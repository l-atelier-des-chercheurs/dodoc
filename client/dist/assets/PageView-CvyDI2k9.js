import{n as i}from"../build.js";const n={props:{},components:{},data(){return{is_loading_page:!0,page:void 0}},async created(){},async mounted(){var a;this.$api.updateSelfPath(this.page_path),await this.getPage(),this.$api.join({room:this.page_path}),((a=this.page.$files)==null?void 0:a.length)===0&&await this.$api.uploadText({path:this.page.$path,filename:"content.txt",content:"<i>"+this.$t("page_content")+"</i>"}),this.is_loading_page=!1},beforeDestroy(){this.$api.leave({room:this.page_path})},watch:{},computed:{page_path(){return this.createPath({page_slug:this.$route.params.page_slug})},can_edit(){return this.canLoggedinEditFolder({folder:this.page})},text_content(){var a,t;return(t=(a=this.page)==null?void 0:a.$files)==null?void 0:t.find(e=>e.$type==="text")}},methods:{async getPage(){this.page=await this.$api.getFolder({path:this.page_path}).catch(()=>{})},async removePage(){await this.$api.deleteItem({path:this.page.$path}),this.$router.push("/")}}};var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_pageView"},[e("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.is_loading_page?e("LoaderSpinner"):e("div",[e("div",{staticClass:"_topbar"},[e("TitleField",{staticClass:"_title",attrs:{field_name:"title",label:t.can_edit?t.$t("title"):void 0,content:t.page.title,path:t.page.$path,required:!0,maxlength:70,tag:"h1",can_edit:t.can_edit}}),t.can_edit?e("DropDown",{attrs:{show_label:!1}},[e("RemoveMenu",{attrs:{modal_title:t.$t("remove_page_and_content")},on:{remove:t.removePage}})],1):t._e()],1),e("div",{staticClass:"u-spacingBottom"}),t.text_content?e("CollaborativeEditor3",{ref:"textBloc",attrs:{path:t.text_content.$path,content:t.text_content.$content,line_selected:!1,can_edit:t.can_edit}}):t._e()],1)],1)],1)},o=[],r=i(n,s,o,!1,null,"5f1229de");const _=r.exports;export{_ as default};
