import{E as o}from"./ExportSaveMakeModal2-DDRFOV6t.js";import{n as l}from"../build.js";import"./PublicationTopbar-BTgkH7qm.js";const r={props:{make:Object,base_media:Object},components:{ExportSaveMakeModal2:o},data(){return{show_render_modal:!1,available_effects:[{key:"black_and_white",label:this.$t("black_and_white")},{key:"colored_filter",label:this.$t("colored_filter")},{key:"slow_down",label:this.$t("slow_down")},{key:"speed_up",label:this.$t("speed_up")},{key:"reverse",label:this.$t("reverse")},{key:"rotate",label:this.$t("rotate")},{key:"mirror",label:this.$t("mirror")}]}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{base_instructions(){const s="video_effects",e=this.selected_effect_type,t=this.base_media.$media_filename+"-"+e,a=this.makeMediaFilePath({$path:this.base_media.$path,$media_filename:this.base_media.$media_filename});let i={};if(e==="colored_filter"){if(!this.make.color_filter)return!1;i={color_filter:this.make.color_filter}}else if(e==="slow_down"||e==="speed_up"){if(!this.make.playback_speed)return!1;i={playback_speed:this.make.playback_speed}}else if(e==="mirror"){if(!this.make.flip)return!1;i={flip:this.make.flip}}else if(e==="rotate"){if(!this.make.rotation)return!1;i={rotation:this.make.rotation}}return{recipe:s,effect_type:e,effect_opts:i,suggested_file_name:t,base_media_path:a}},rotate_preview(){return this.selected_effect_type==="rotate"?this.make.rotation:this.selected_effect_type==="mirror"?this.make.flip:!1},selected_effect_type:{get(){return this.make.effect_type||"black_and_white"}},base_media_width(){var s,e;return(e=(s=this.base_media)==null?void 0:s.$infos)==null?void 0:e.width},base_media_height(){var s,e;return(e=(s=this.base_media)==null?void 0:s.$infos)==null?void 0:e.height}},methods:{setEffectType(s){const e=s.target.value;let t={effect_type:e};e==="colored_filter"?t.color_filter="#fc4b60":e==="speed_up"?t.playback_speed=200:e==="slow_down"?t.playback_speed=50:e==="rotate"?t.rotation="cw":e==="mirror"&&(t.flip="hflip"),this.updatePubliMeta(t)},async updatePubliMeta(s){return await this.$api.updateMeta({path:this.make.$path,new_meta:s})}}};var _=function(){var e=this,t=e._self._c;return t("div",{staticClass:"_videoEffects"},[t("div",{staticClass:"_topContent"},[t("div",{staticClass:"_leftBtns"},[t("DLabel",{attrs:{str:e.$t("effect")}}),t("select",{domProps:{value:e.selected_effect_type},on:{change:e.setEffectType}},e._l(e.available_effects,function(a){return t("option",{key:a.key,domProps:{value:a.key}},[e._v(" "+e._s(a.label)+" ")])}),0),t("div",{staticClass:"u-spacingBottom"}),e.selected_effect_type==="colored_filter"?t("div",{staticClass:"u-spacingBottom"},[t("ColorInput",{attrs:{can_toggle:!1,live_editing:!0,value:e.make.color_filter,default_value:"#fc4b60"},on:{save:function(a){return e.updatePubliMeta({color_filter:a})}}})],1):e.selected_effect_type==="speed_up"?t("div",{staticClass:"u-spacingBottom"},[t("RangeValueInput",{attrs:{label:e.$t("playback_speed"),value:e.make.playback_speed,can_toggle:!1,min:100,max:1e3,step:1,default_value:100,suffix:"%",ticks:[100,200,500,1e3]},on:{save:function(a){return e.updatePubliMeta({playback_speed:a})}}}),e.make.playback_speed<50?t("small",{domProps:{innerHTML:e._s(e.$t("slowing_video_down_limit"))}}):e._e()],1):e.selected_effect_type==="slow_down"?t("div",{staticClass:"u-spacingBottom"},[t("RangeValueInput",{attrs:{label:e.$t("playback_speed"),value:e.make.playback_speed,can_toggle:!1,min:1,max:100,step:1,default_value:50,suffix:"%",ticks:[1,10,25,50]},on:{save:function(a){return e.updatePubliMeta({playback_speed:a})}}}),e.make.playback_speed<50?t("small",{domProps:{innerHTML:e._s(e.$t("slowing_video_down_limit"))}}):e._e()],1):e.selected_effect_type==="mirror"?t("div",{staticClass:"u-spacingBottom"},[t("select",{domProps:{value:e.make.flip},on:{change:function(a){return e.updatePubliMeta({flip:a.target.value})}}},[t("option",{attrs:{value:"vflip"}},[e._v(" "+e._s(e.$t("vertical_flip").toLowerCase())+" ")]),t("option",{attrs:{value:"hflip"}},[e._v(" "+e._s(e.$t("horizontal_flip").toLowerCase())+" ")]),t("option",{attrs:{value:"hflip, vflip"}},[e._v(" "+e._s(e.$t("both").toLowerCase())+" ")])])]):e.selected_effect_type==="rotate"?t("div",{staticClass:"u-spacingBottom"},[t("select",{domProps:{value:e.make.rotation},on:{change:function(a){return e.updatePubliMeta({rotation:a.target.value})}}},[t("option",{attrs:{value:"cw"}},[e._v(e._s(e.$t("move_right"))+" ⟳")]),t("option",{attrs:{value:"ccw"}},[e._v(e._s(e.$t("move_left"))+" ⟲")])])]):e._e()],1),t("div",{staticClass:"_cropWindow",attrs:{"data-rotate":e.rotate_preview,"data-isblackandwhite":e.selected_effect_type==="black_and_white"}},[t("MediaContent",{attrs:{file:e.base_media,resolution:1600,show_fs_button:!0,context:"full"}}),e.selected_effect_type==="colored_filter"?t("div",{staticClass:"_coloredFilter",style:{backgroundColor:e.make.color_filter}}):e._e()],1)]),t("div",{staticClass:"_bottomBtns"},[t("div",{staticClass:"_equationIcon"},[t("b-icon",{attrs:{icon:"chevron-double-down"}})],1),t("button",{staticClass:"u-button u-button_bleumarine",attrs:{type:"button",disabled:!e.base_instructions},on:{click:function(a){e.show_render_modal=!0}}},[t("b-icon",{attrs:{icon:"check"}}),e._v(" "+e._s(e.$t("make"))+" ")],1),t("div",[e.base_instructions?e._e():t("div",{staticClass:"fieldCaption u-colorRed"},[t("small",{domProps:{innerHTML:e._s(e.$t("all_fields_not_filled"))}})])]),e.show_render_modal?t("ExportSaveMakeModal2",{attrs:{base_instructions:e.base_instructions,make_path:e.make.$path,reference_media:e.base_media,allow_disable_audio:!0},on:{close:function(a){e.show_render_modal=!1}}}):e._e()],1)])},n=[],c=l(r,_,n,!1,null,"1ff519ff");const u=c.exports;export{u as default};
