import{n as r}from"../build.js";const s={props:{author:Object},components:{},data(){return{status:"waiting",recovery_email_sent_to:void 0,err_recovering:void 0}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async recoverPassword(){var o;try{const t=await this.$api.recoverPassword({path:this.author.$path});this.status="recovery_mail_sent",this.recovery_email_sent_to=(o=t.data)==null?void 0:o.recovery_email_sent_to}catch(t){t.code==="no_email_for_folder"?this.status="no_email_for_folder":(this.status="error",this.err_recovering=t)}}}};var n=function(){var t=this,e=t._self._c;return e("BaseModal2",{attrs:{title:t.$t("recover_password"),is_closable:!0},on:{close:function(a){return t.$emit("close")}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{staticClass:"u-button",attrs:{type:"button"},on:{click:function(a){return t.$emit("close")}}},[e("b-icon",{attrs:{icon:"x"}}),t._v(" "+t._s(t.$t("close"))+" ")],1),t.status==="waiting"&&t.$root.app_infos.instance_meta.can_send_email?e("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:t.recoverPassword}},[e("b-icon",{attrs:{icon:"envelope"}}),t._v(" "+t._s(t.$t("recover_via_email"))+" ")],1):t._e()]},proxy:!0}])},[e("div",{staticClass:"u-spacingBottom"},[t.$root.app_infos.instance_meta.can_send_email?t.status==="waiting"?e("p",{domProps:{innerHTML:t._s(t.$t("click_to_send_recovery_mail",{account_name:t.author.name}))}}):t._e():e("p",[t._v(" "+t._s(t.$t("please_contact_to_recover"))+" "),e("br"),e("a",{attrs:{href:"mailto:"+t.$root.app_infos.instance_meta.contactmail,target:"_blank"}},[t._v(" "+t._s(t.$root.app_infos.instance_meta.contactmail)+" ")])]),t.status==="recovery_mail_sent"?e("div",[e("p",{domProps:{innerHTML:t._s(t.$t("recovery_mail_sent_to",{account_name:t.author.name,email:t.recovery_email_sent_to}))}}),e("p"),e("p",[t._v(" "+t._s(t.$t("recovery_mail_sent_to_instructions"))+" ")])]):t.status==="no_email_for_folder"?e("div",[e("p",[t._v(" "+t._s(t.$t("no_email_for_account"))+" ")]),e("p",[t._v(" "+t._s(t.$t("please_contact_to_recover"))+" "),e("br"),e("a",{attrs:{href:"mailto:"+t.$root.app_infos.instance_meta.contactmail,target:"_blank"}},[t._v(" "+t._s(t.$root.app_infos.instance_meta.contactmail)+" ")])])]):t.status==="error"?e("div",[t._v(" "+t._s(t.err_recovering)+" ")]):t._e()])])},_=[],c=r(s,n,_,!1,null,"7b13741f");const l=c.exports;export{l as default};
