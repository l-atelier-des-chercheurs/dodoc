import{n as D,H as ae,b as le,d as ce,c as $,a as he}from"../build.js";import{a as gt,M as ue}from"./ModuleCreator-BFcQoWGR.js";import{C as ee}from"./CaptionCreditsPage-B7Fq5xCj.js";const de={props:{publication:Object,sections:Array,opened_section_meta_filename:String,can_edit:Boolean},components:{},inject:{$getMapOptions:{default:!1}},data(){return{}},created(){},mounted(){this.can_edit&&this.sections.length===0&&this.createSection(),this.openFirstSectionIfNoneOpened(),this.openExistingSectionIfNotExisting()},beforeDestroy(){},watch:{opened_section_meta_filename(){this.openFirstSectionIfNoneOpened()}},computed:{is_associated_to_map(){return this.$getMapOptions},default_view_color(){return this.$getMapOptions().default_view_color},story_styles(){return this.makeStoryStyles({publication:this.publication})},new_section_title(){let h=this.sections.length+1;const t=s=>this.$t("section")+" "+s;let e=t(h);for(;this.sections.some(s=>s.section_title===e);)h++,e=t(h);return e},opened_section(){return this.sections.find(h=>this.getFilename(h.$path)===this.opened_section_meta_filename)}},methods:{openSection(h){this.$emit("toggleSection",this.getFilename(h))},openFirstSectionIfNoneOpened(){this.sections.length>0&&!this.opened_section_meta_filename&&this.$emit("openFirstSection")},openExistingSectionIfNotExisting(){this.opened_section_meta_filename&&!this.opened_section&&this.$emit("openFirstSection")},async createSection(){const h=await this.createSection2({publication:this.publication,additional_meta:{section_title:this.new_section_title}});this.$emit("toggleSection",h)}}};var pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_sectionsSummary",style:t.story_styles},[e("ReorderedList",{attrs:{field_name:"sections_list",items:t.sections,path:t.publication.$path,active_item_meta:t.opened_section_meta_filename,can_edit:t.can_edit},on:{openItem:t.openSection,createItem:t.createSection},scopedSlots:t._u([{key:"default",fn:function(s){return[s.item.section_title?[t._v(" "+t._s(s.item.section_title)+" ")]:[e("i",[t._v(t._s(t.$t("untitled")))])]]}}])})],1)},fe=[],me=D(de,pe,fe,!1,null,"b22b64d7");const ge=me.exports,ve={props:{medias_with_linked:Array,context:String,publimodule:Object,page_template:String,show_fs_button:Boolean,number_of_max_medias:[Boolean,Number],publication_path:String,edit_mode:Boolean,can_edit:Boolean},components:{MediaPicker:gt,CaptionCreditsPage:ee},data(){return{show_media_picker:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{is_single_text(){return this.medias_with_linked.length===1&&this.medias_with_linked[0]._linked_media.$type==="text"},is_multiple_medias(){return this.medias_with_linked.length>1},single_media_displayed_at_full_ratio(){var s,l,i,r,c;const h=(s=this.medias_with_linked[0]._linked_media.$infos)==null?void 0:s.ratio,t=(l=this.publimodule)!=null&&l.height&&((i=this.publimodule)!=null&&i.width)?((r=this.publimodule)==null?void 0:r.height)/((c=this.publimodule)==null?void 0:c.width):!1;if(!h||!t)return!1;const e=10;return Math.round(h*e)===Math.round(t*e)}},methods:{itemKey(h,t){return h!=null&&h.$path?h.$path+"_"+t:"no_media_"+t},itemStyle({media_with_linked:h}){let t={};return t["--object-fit"]=h.objectFit||"cover",t},mediaIsSquare(h){var t;return((t=h.$infos)==null?void 0:t.ratio)===1},removeMedia(h){this.$emit("removeMediaAtIndex",{index:h})},mediaDraggedSuccessfully(h){console.log("mediaDraggedSuccessfully"),this.$emit("removeMediaAtIndex",{index:h,remove_source:!1})},showAspectRatioOptions(h){return!(this.medias_with_linked.length===1&&this.page_template!=="page_by_page"||["stl","obj","text","table","other"].includes(h._linked_media.$type)||this.page_template!=="page_by_page"&&this.mediaIsSquare(h._linked_media)||this.single_media_displayed_at_full_ratio)}}};var _e=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_mediaGrid",class:{"is--multipleMedias":t.is_multiple_medias,"is--singleText":t.is_single_text}},[t._l(t.medias_with_linked,function(s,l){return[e("div",{key:t.itemKey(s._linked_media,l),staticClass:"_mediaGrid--item",style:t.itemStyle({media_with_linked:s}),attrs:{"data-mediatype":s._linked_media.$type}},[s._linked_media?s._linked_media.$type==="text"?e("CollaborativeEditor2",{key:t.edit_mode,staticClass:"_mediaContent--collabEditor",attrs:{content:s._linked_media.$content,path:s._linked_media.$path,edit_on_mounted:t.edit_mode,can_edit:t.edit_mode}}):s._linked_media.$type==="table"?e("TableEditor",{staticClass:"_mediaContent--table",attrs:{content:s._linked_media.$content,path:s._linked_media.$path,can_edit:t.edit_mode}}):e("MediaContent",{attrs:{file:s._linked_media,resolution:t.context==="preview"?220:1600,context:t.context,show_fs_button:t.show_fs_button,can_edit:t.can_edit}}):e("div",{staticClass:"u-instructions _noSourceMedia",domProps:{textContent:t._s(t.$t("source_media_missing"))}}),e("CaptionCreditsPage",{attrs:{media:s._linked_media,publication_path:t.publication_path,can_edit:t.can_edit}}),e("div",{staticClass:"_btnRow"},[t.edit_mode&&t.page_template!=="page_by_page"?e("DragFile",{staticClass:"_df",attrs:{size:"small",file:s._linked_media},on:{dragfileSuccess:function(i){return t.mediaDraggedSuccessfully(l)}}}):t._e(),t.edit_mode?[t.showAspectRatioOptions(s)?[!s.objectFit||s.objectFit==="cover"?t._e():e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return i.stopPropagation(),t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"cover"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio"}})],1),s.objectFit!=="contain"?e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return i.stopPropagation(),t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"contain"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio-fill"}})],1):t._e()]:t._e(),t.is_multiple_medias?e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return t.removeMedia(l)}}},[e("b-icon",{attrs:{icon:"trash"}})],1):t._e()]:t._e()],2)],1)]}),t.can_edit&&(!t.number_of_max_medias||t.medias_with_linked.length<t.number_of_max_medias)?e("div",{staticClass:"_mediaPickerTile"},[t.edit_mode?e("EditBtn",{attrs:{btn_type:"add",is_unfolded:!1},on:{click:function(s){t.show_media_picker=!0}}}):t._e(),t.show_media_picker?e("MediaPicker",{attrs:{publication_path:t.publication_path},on:{addMedias:function(s){return t.$emit("addMedias",s)},close:function(s){t.show_media_picker=!1}}}):t._e(),!t.number_of_max_medias||t.medias_with_linked.length<t.number_of_max_medias?[e("DropZone",{staticClass:"_dzAfter",on:{mediaDropped:function(s){return t.$emit("addMedias",s)}}})]:t._e()],2):t._e()],2)},ye=[],be=D(ve,_e,ye,!1,null,"615978eb");const xe=be.exports,Se={props:{medias_with_linked:Array,publication_path:String,mode:String,edit_mode:Boolean},components:{SlickItem:ce,SlickList:le,MediaPicker:gt},directives:{handle:ae},data(){return{show_media_picker:!1,show_media_preview_for:null}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{slicklist_key(){let h=this.edit_mode+"_";return this.medias_with_linked.forEach(t=>{h+=t._linked_media.$path+"_"}),h}},methods:{}};var Ce=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_filesList"},[e("DLabel",{attrs:{str:t.mode==="source"?t.$t("source_files"):void 0}}),e("SlickList",{key:t.slicklist_key,staticClass:"_listOfFiles",attrs:{axis:"y",value:t.medias_with_linked,useDragHandle:!0},on:{input:function(s){return t.$emit("reorderMedias",s)}}},t._l(t.medias_with_linked,function({_linked_media:s},l){return e("SlickItem",{key:s.$path,staticClass:"_reorderedFile",attrs:{index:l}},[t.edit_mode?e("button",{staticClass:"u-button u-button_icon _dragHandle",attrs:{type:"button"}},[e("b-icon",{directives:[{name:"handle",rawName:"v-handle"}],attrs:{icon:"grip-vertical",label:t.$t("move")}})],1):t._e(),s&&s.$path?e(t.mode==="source"?"DownloadFile":"span",{tag:"component",staticClass:"_link",attrs:{file:s}},[["image","video","audio","pdf","stl","url"].includes(s.$type)?e("button",{staticClass:"_link--previewBtn",attrs:{type:"button"},on:{click:function(i){i.preventDefault(),t.show_media_preview_for=s}}},[e("MediaContent",{staticClass:"_preview",attrs:{context:"preview",file:s,resolution:220}})],1):e("div",{staticClass:"_preview _preview--none"},[e("b-icon",{attrs:{icon:"file-earmark-arrow-down"}})],1),t.show_media_preview_for===s?e("BaseModal2",{on:{close:function(i){t.show_media_preview_for=null}}},[e("MediaContent",{attrs:{file:t.show_media_preview_for,context:"preview",resolution:1600}}),e("div",{staticClass:"u-spacingBottom"}),e("DownloadFile",{attrs:{file:t.show_media_preview_for}})],1):t._e(),e("span",{staticClass:"_link--filename",domProps:{textContent:t._s(s.$media_filename)}}),s.$infos.size&&t.mode==="source"?[e("span",{staticClass:"u-instructions _link--filesize",domProps:{textContent:t._s(t.formatBytes(s.$infos.size))}})]:t._e(),t.mode==="source"?e("b-icon",{staticClass:"_download",attrs:{icon:"file-earmark-arrow-down-fill"}}):t._e()],2):t._e(),t.edit_mode?e("div",{staticClass:"_removeItem"},[e("EditBtn",{attrs:{btn_type:"remove",label_position:"left",is_unfolded:!1},on:{click:function(i){return t.$emit("removeMediaAtIndex",{index:l})}}})],1):t._e()],1)}),1),t.edit_mode?e("div",{staticClass:"_addBtnSection"},[e("button",{staticClass:"u-button u-button_transparent u-addBtn",attrs:{type:"button"},on:{click:function(s){t.show_media_picker=!0}}},[e("b-icon",{attrs:{icon:"plus-circle"}}),t._v(" "+t._s(t.$t("add_files"))+" ")],1),t.show_media_picker?e("MediaPicker",{attrs:{publication_path:t.publication_path},on:{addMedias:function(s){return t.$emit("addMedias",s)},close:function(s){t.show_media_picker=!1}}}):t._e(),e("DropZone",{on:{mediaDropped:function(s){return t.$emit("addMedias",s)}}})],1):t._e()],1)},Ee=[],ke=D(Se,Ce,Ee,!1,null,"92a8392b");const ie=ke.exports;var se={exports:{}},B={exports:{}},F={exports:{}},bt;function ne(){return bt||(bt=1,function(h){(function(t,e){h.exports?h.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:$,function(){function t(){}let e=t.prototype;return e.on=function(s,l){if(!s||!l)return this;let i=this._events=this._events||{},r=i[s]=i[s]||[];return r.includes(l)||r.push(l),this},e.once=function(s,l){if(!s||!l)return this;this.on(s,l);let i=this._onceEvents=this._onceEvents||{},r=i[s]=i[s]||{};return r[l]=!0,this},e.off=function(s,l){let i=this._events&&this._events[s];if(!i||!i.length)return this;let r=i.indexOf(l);return r!=-1&&i.splice(r,1),this},e.emitEvent=function(s,l){let i=this._events&&this._events[s];if(!i||!i.length)return this;i=i.slice(0),l=l||[];let r=this._onceEvents&&this._onceEvents[s];for(let c of i)r&&r[c]&&(this.off(s,c),delete r[c]),c.apply(this,l);return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t})}(F)),F.exports}var T={exports:{}};/*!
 * Infinite Scroll v2.0.4
 * measure size of elements
 * MIT license
 */var xt;function oe(){return xt||(xt=1,function(h){(function(t,e){h.exports?h.exports=e():t.getSize=e()})(window,function(){function e(r){let c=parseFloat(r);return r.indexOf("%")==-1&&!isNaN(c)&&c}let s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function l(){let r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return s.forEach(c=>{r[c]=0}),r}function i(r){if(typeof r=="string"&&(r=document.querySelector(r)),!(r&&typeof r=="object"&&r.nodeType))return;let n=getComputedStyle(r);if(n.display=="none")return l();let o={};o.width=r.offsetWidth,o.height=r.offsetHeight;let a=o.isBorderBox=n.boxSizing=="border-box";s.forEach(x=>{let p=n[x],_=parseFloat(p);o[x]=isNaN(_)?0:_});let u=o.paddingLeft+o.paddingRight,f=o.paddingTop+o.paddingBottom,d=o.marginLeft+o.marginRight,v=o.marginTop+o.marginBottom,g=o.borderLeftWidth+o.borderRightWidth,b=o.borderTopWidth+o.borderBottomWidth,k=e(n.width);k!==!1&&(o.width=k+(a?0:u+g));let m=e(n.height);return m!==!1&&(o.height=m+(a?0:f+b)),o.innerWidth=o.width-(u+g),o.innerHeight=o.height-(f+b),o.outerWidth=o.width+d,o.outerHeight=o.height+v,o}return i})}(T)),T.exports}var W={exports:{}},St;function I(){return St||(St=1,function(h){(function(t,e){h.exports?h.exports=e(t):t.fizzyUIUtils=e(t)})($,function(e){let s={};s.extend=function(i,r){return Object.assign(i,r)},s.modulo=function(i,r){return(i%r+r)%r},s.makeArray=function(i){return Array.isArray(i)?i:i==null?[]:typeof i=="object"&&typeof i.length=="number"?[...i]:[i]},s.removeFrom=function(i,r){let c=i.indexOf(r);c!=-1&&i.splice(c,1)},s.getParent=function(i,r){for(;i.parentNode&&i!=document.body;)if(i=i.parentNode,i.matches(r))return i},s.getQueryElement=function(i){return typeof i=="string"?document.querySelector(i):i},s.handleEvent=function(i){let r="on"+i.type;this[r]&&this[r](i)},s.filterFindElements=function(i,r){return i=s.makeArray(i),i.filter(c=>c instanceof HTMLElement).reduce((c,n)=>{if(!r)return c.push(n),c;n.matches(r)&&c.push(n);let o=n.querySelectorAll(r);return c=c.concat(...o),c},[])},s.debounceMethod=function(i,r,c){c=c||100;let n=i.prototype[r],o=r+"Timeout";i.prototype[r]=function(){clearTimeout(this[o]);let a=arguments;this[o]=setTimeout(()=>{n.apply(this,a),delete this[o]},c)}},s.docReady=function(i){let r=document.readyState;r=="complete"||r=="interactive"?setTimeout(i):document.addEventListener("DOMContentLoaded",i)},s.toDashed=function(i){return i.replace(/(.)([A-Z])/g,function(r,c,n){return c+"-"+n}).toLowerCase()};let l=e.console;return s.htmlInit=function(i,r){s.docReady(function(){let n="data-"+s.toDashed(r),o=document.querySelectorAll(`[${n}]`),a=e.jQuery;[...o].forEach(u=>{let f=u.getAttribute(n),d;try{d=f&&JSON.parse(f)}catch(g){l&&l.error(`Error parsing ${n} on ${u.className}: ${g}`);return}let v=new i(u,d);a&&a.data(u,r,v)})})},s})}(W)),W.exports}var O={exports:{}},Ct;function $e(){return Ct||(Ct=1,function(h){(function(t,e){h.exports?h.exports=e(oe()):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t.getSize))})(typeof window<"u"?window:$,function(e){const s="flickity-cell";function l(r){this.element=r,this.element.classList.add(s),this.x=0,this.unselect()}let i=l.prototype;return i.destroy=function(){this.unselect(),this.element.classList.remove(s),this.element.style.transform="",this.element.removeAttribute("aria-hidden")},i.getSize=function(){this.size=e(this.element)},i.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},i.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},i.remove=function(){this.element.remove()},l})}(O)),O.exports}var R={exports:{}},Et;function De(){return Et||(Et=1,function(h){(function(t,e){h.exports?h.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())})(typeof window<"u"?window:$,function(){function e(l,i,r){this.beginMargin=l,this.endMargin=i,this.cellAlign=r,this.cells=[],this.outerWidth=0,this.height=0}let s=e.prototype;return s.addCell=function(l){this.cells.push(l),this.outerWidth+=l.size.outerWidth,this.height=Math.max(l.size.outerHeight,this.height),this.cells.length===1&&(this.x=l.x,this.firstMargin=l.size[this.beginMargin])},s.updateTarget=function(){let l=this.getLastCell(),i=l?l.size[this.endMargin]:0,r=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+r*this.cellAlign},s.getLastCell=function(){return this.cells[this.cells.length-1]},s.select=function(){this.cells.forEach(l=>l.select())},s.unselect=function(){this.cells.forEach(l=>l.unselect())},s.getCellElements=function(){return this.cells.map(l=>l.element)},e})}(R)),R.exports}var q={exports:{}},kt;function Me(){return kt||(kt=1,function(h){(function(t,e){h.exports?h.exports=e(I()):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t.fizzyUIUtils))})(typeof window<"u"?window:$,function(e){let s={};return s.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},s.animate=function(){this.applyDragForce(),this.applySelectedAttraction();let l=this.x;this.integratePhysics(),this.positionSlider(),this.settle(l),this.isAnimating&&requestAnimationFrame(()=>this.animate())},s.positionSlider=function(){let l=this.x;this.isWrapping&&(l=e.modulo(l,this.slideableWidth)-this.slideableWidth,this.shiftWrapCells(l)),this.setTranslateX(l,this.isAnimating),this.dispatchScrollEvent()},s.setTranslateX=function(l,i){l+=this.cursorPosition,this.options.rightToLeft&&(l=-l);let r=this.getPositionValue(l);this.slider.style.transform=i?`translate3d(${r},0,0)`:`translateX(${r})`},s.dispatchScrollEvent=function(){let l=this.slides[0];if(!l)return;let i=-this.x-l.target,r=i/this.slidesWidth;this.dispatchEvent("scroll",null,[r,i])},s.positionSliderAtSelected=function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},s.getPositionValue=function(l){return this.options.percentPosition?Math.round(l/this.size.innerWidth*1e4)*.01+"%":Math.round(l)+"px"},s.settle=function(l){!this.isPointerDown&&Math.round(this.x*100)===Math.round(l*100)&&this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},s.shiftWrapCells=function(l){let i=this.cursorPosition+l;this._shiftCells(this.beforeShiftCells,i,-1);let r=this.size.innerWidth-(l+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,r,1)},s._shiftCells=function(l,i,r){l.forEach(c=>{let n=i>0?r:0;this._wrapShiftCell(c,n),i-=c.size.outerWidth})},s._unshiftCells=function(l){!l||!l.length||l.forEach(i=>this._wrapShiftCell(i,0))},s._wrapShiftCell=function(l,i){this._renderCellPosition(l,l.x+this.slideableWidth*i)},s.integratePhysics=function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},s.applyForce=function(l){this.velocity+=l},s.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},s.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},s.applyDragForce=function(){if(!this.isDraggable||!this.isPointerDown)return;let i=this.dragX-this.x-this.velocity;this.applyForce(i)},s.applySelectedAttraction=function(){if(this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length)return;let r=(this.selectedSlide.target*-1-this.x)*this.options.selectedAttraction;this.applyForce(r)},s})}(q)),q.exports}var $t;function w(){return $t||($t=1,function(h){(function(t,e){if(h.exports)h.exports=e(t,ne(),oe(),I(),$e(),De(),Me());else{let s=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,s.Cell,s.Slide,s.animatePrototype)}})(typeof window<"u"?window:$,function(e,s,l,i,r,c,n){const{getComputedStyle:o,console:a}=e;let{jQuery:u}=e,f=0,d={};function v(p,_){let y=i.getQueryElement(p);if(!y){a&&a.error(`Bad element for Flickity: ${y||p}`);return}if(this.element=y,this.element.flickityGUID){let S=d[this.element.flickityGUID];return S&&S.option(_),S}u&&(this.$element=u(this.element)),this.options={...this.constructor.defaults},this.option(_),this._create()}v.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},v.create={};let g=v.prototype;Object.assign(g,s.prototype),g._create=function(){let{resize:p,watchCSS:_,rightToLeft:y}=this.options,S=this.guid=++f;this.element.flickityGUID=S,d[S]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.beginMargin=y?"marginRight":"marginLeft",this.endMargin=y?"marginLeft":"marginRight",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),this.focusableElems=[this.element],(p||_)&&e.addEventListener("resize",this);for(let C in this.options.on){let E=this.options.on[C];this.on(C,E)}for(let C in v.create)v.create[C].call(this);_?this.watchCSS():this.activate()},g.option=function(p){Object.assign(this.options,p)},g.activate=function(){if(this.isActive)return;this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();let p=this._filterFindCellElements(this.element.children);this.slider.append(...p),this.viewport.append(this.slider),this.element.append(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready")},g._createSlider=function(){let p=document.createElement("div");p.className="flickity-slider",this.slider=p},g._filterFindCellElements=function(p){return i.filterFindElements(p,this.options.cellSelector)},g.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._updateWrapShiftCells(),this.setGallerySize()},g._makeCells=function(p){return this._filterFindCellElements(p).map(y=>new r(y))},g.getLastCell=function(){return this.cells[this.cells.length-1]},g.getLastSlide=function(){return this.slides[this.slides.length-1]},g.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},g._positionCells=function(p){p=p||0,this.maxCellHeight=p&&this.maxCellHeight||0;let _=0;if(p>0){let y=this.cells[p-1];_=y.x+y.size.outerWidth}this.cells.slice(p).forEach(y=>{y.x=_,this._renderCellPosition(y,_),_+=y.size.outerWidth,this.maxCellHeight=Math.max(y.size.outerHeight,this.maxCellHeight)}),this.slideableWidth=_,this.updateSlides(),this._containSlides(),this.slidesWidth=this.cells.length?this.getLastSlide().target-this.slides[0].target:0},g._renderCellPosition=function(p,_){let y=this.options.rightToLeft?-1:1,S=_*y;this.options.percentPosition&&(S*=this.size.innerWidth/p.size.width);let C=this.getPositionValue(S);p.element.style.transform=`translateX( ${C} )`},g._sizeCells=function(p){p.forEach(_=>_.getSize())},g.updateSlides=function(){if(this.slides=[],!this.cells.length)return;let{beginMargin:p,endMargin:_}=this,y=new c(p,_,this.cellAlign);this.slides.push(y);let S=this._getCanCellFit();this.cells.forEach((C,E)=>{if(!y.cells.length){y.addCell(C);return}let M=y.outerWidth-y.firstMargin+(C.size.outerWidth-C.size[_]);S(E,M)||(y.updateTarget(),y=new c(p,_,this.cellAlign),this.slides.push(y)),y.addCell(C)}),y.updateTarget(),this.updateSelectedSlide()},g._getCanCellFit=function(){let{groupCells:p}=this.options;if(!p)return()=>!1;if(typeof p=="number"){let C=parseInt(p,10);return E=>E%C!==0}let _=1,y=typeof p=="string"&&p.match(/^(\d+)%$/);y&&(_=parseInt(y[1],10)/100);let S=(this.size.innerWidth+1)*_;return(C,E)=>E<=S},g._init=g.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},g.getSize=function(){this.size=l(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};let b={left:0,center:.5,right:1};g.setCellAlign=function(){let{cellAlign:p,rightToLeft:_}=this.options,y=b[p];this.cellAlign=y!==void 0?y:p,_&&(this.cellAlign=1-this.cellAlign)},g.setGallerySize=function(){if(!this.options.setGallerySize)return;let p=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=`${p}px`},g._updateWrapShiftCells=function(){if(this.isWrapping=this.getIsWrapping(),!this.isWrapping)return;this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);let p=this.cursorPosition,_=this.cells.length-1;this.beforeShiftCells=this._getGapCells(p,_,-1);let y=this.size.innerWidth-this.cursorPosition;this.afterShiftCells=this._getGapCells(y,0,1)},g.getIsWrapping=function(){let{wrapAround:p}=this.options;if(!p||this.slides.length<2)return!1;if(p!=="fill")return!0;let _=this.slideableWidth-this.size.innerWidth;if(_>this.size.innerWidth)return!0;for(let y of this.cells)if(y.size.outerWidth>_)return!1;return!0},g._getGapCells=function(p,_,y){let S=[];for(;p>0;){let C=this.cells[_];if(!C)break;S.push(C),_+=y,p-=C.size.outerWidth}return S},g._containSlides=function(){if(!(this.options.contain&&!this.isWrapping&&this.cells.length))return;let _=this.slideableWidth-this.getLastCell().size[this.endMargin];if(_<this.size.innerWidth)this.slides.forEach(S=>{S.target=_*this.cellAlign});else{let S=this.cursorPosition+this.cells[0].size[this.beginMargin],C=_-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(E=>{E.target=Math.max(E.target,S),E.target=Math.min(E.target,C)})}},g.dispatchEvent=function(p,_,y){let S=_?[_].concat(y):y;if(this.emitEvent(p,S),u&&this.$element){p+=this.options.namespaceJQueryEvents?".flickity":"";let C=p;if(_){let E=new u.Event(_);E.type=p,C=E}this.$element.trigger(C,y)}};const k=["dragStart","dragMove","dragEnd","pointerDown","pointerMove","pointerEnd","staticClick"];let m=g.emitEvent;g.emitEvent=function(p,_){if(p==="staticClick"){let E=this.getParentCell(_[0].target),M=E&&E.element,A=E&&this.cells.indexOf(E);_=_.concat(M,A)}if(m.call(this,p,_),!k.includes(p)||!u||!this.$element)return;p+=this.options.namespaceJQueryEvents?".flickity":"";let S=_.shift(0),C=new u.Event(S);C.type=p,this.$element.trigger(C,_)},g.select=function(p,_,y){if(!this.isActive||(p=parseInt(p,10),this._wrapSelect(p),(this.isWrapping||_)&&(p=i.modulo(p,this.slides.length)),!this.slides[p]))return;let S=this.selectedIndex;this.selectedIndex=p,this.updateSelectedSlide(),y?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[p]),p!==S&&this.dispatchEvent("change",null,[p])},g._wrapSelect=function(p){if(!this.isWrapping)return;const{selectedIndex:_,slideableWidth:y,slides:{length:S}}=this;if(!this.isDragSelect){let C=i.modulo(p,S),E=Math.abs(C-_),M=Math.abs(C+S-_),A=Math.abs(C-S-_);M<E?p+=S:A<E&&(p-=S)}p<0?this.x-=y:p>=S&&(this.x+=y)},g.previous=function(p,_){this.select(this.selectedIndex-1,p,_)},g.next=function(p,_){this.select(this.selectedIndex+1,p,_)},g.updateSelectedSlide=function(){let p=this.slides[this.selectedIndex];p&&(this.unselectSelectedSlide(),this.selectedSlide=p,p.select(),this.selectedCells=p.cells,this.selectedElements=p.getCellElements(),this.selectedCell=p.cells[0],this.selectedElement=this.selectedElements[0])},g.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},g.selectInitialIndex=function(){let p=this.options.initialIndex;if(this.isInitActivated){this.select(this.selectedIndex,!1,!0);return}if(p&&typeof p=="string"&&this.queryCell(p)){this.selectCell(p,!1,!0);return}let _=0;p&&this.slides[p]&&(_=p),this.select(_,!1,!0)},g.selectCell=function(p,_,y){let S=this.queryCell(p);if(!S)return;let C=this.getCellSlideIndex(S);this.select(C,_,y)},g.getCellSlideIndex=function(p){let _=this.slides.find(y=>y.cells.includes(p));return this.slides.indexOf(_)},g.getCell=function(p){for(let _ of this.cells)if(_.element===p)return _},g.getCells=function(p){return p=i.makeArray(p),p.map(_=>this.getCell(_)).filter(Boolean)},g.getCellElements=function(){return this.cells.map(p=>p.element)},g.getParentCell=function(p){let _=this.getCell(p);if(_)return _;let y=p.closest(".flickity-slider > *");return this.getCell(y)},g.getAdjacentCellElements=function(p,_){if(!p)return this.selectedSlide.getCellElements();_=_===void 0?this.selectedIndex:_;let y=this.slides.length;if(1+p*2>=y)return this.getCellElements();let S=[];for(let C=_-p;C<=_+p;C++){let E=this.isWrapping?i.modulo(C,y):C,M=this.slides[E];M&&(S=S.concat(M.getCellElements()))}return S},g.queryCell=function(p){return typeof p=="number"?this.cells[p]:(typeof p=="string"&&!p.match(/^[#.]?[\d/]/)&&(p=this.element.querySelector(p)),this.getCell(p))},g.uiChange=function(){this.emitEvent("uiChange")},g.onresize=function(){this.watchCSS(),this.resize()},i.debounceMethod(v,"onresize",150),g.resize=function(){if(!this.isActive||this.isAnimating||this.isDragging)return;this.getSize(),this.isWrapping&&(this.x=i.modulo(this.x,this.slideableWidth)),this.positionCells(),this._updateWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");let p=this.selectedElements&&this.selectedElements[0];this.selectCell(p,!1,!0)},g.watchCSS=function(){if(!this.options.watchCSS)return;o(this.element,":after").content.includes("flickity")?this.activate():this.deactivate()},g.onkeydown=function(p){let{activeElement:_}=document,y=v.keyboardHandlers[p.key];if(!this.options.accessibility||!_||!y)return;this.focusableElems.some(C=>_===C)&&y.call(this)},v.keyboardHandlers={ArrowLeft:function(){this.uiChange();let p=this.options.rightToLeft?"next":"previous";this[p]()},ArrowRight:function(){this.uiChange();let p=this.options.rightToLeft?"previous":"next";this[p]()}},g.focus=function(){this.element.focus({preventScroll:!0})},g.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(p=>p.destroy()),this.viewport.remove(),this.element.append(...this.slider.children),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},g.destroy=function(){this.deactivate(),e.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),u&&this.$element&&u.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete d[this.guid]},Object.assign(g,n),v.data=function(p){if(p=i.getQueryElement(p),p)return d[p.flickityGUID]},i.htmlInit(v,"flickity");let{jQueryBridget:x}=e;return u&&x&&x("flickity",v,u),v.setJQuery=function(p){u=p},v.Cell=r,v.Slide=c,v})}(B)),B.exports}var U={exports:{}},N={exports:{}},H={exports:{}},Dt;function we(){return Dt||(Dt=1,function(h){(function(t,e){h.exports?h.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:$,function(){function t(){}let e=t.prototype;return e.on=function(s,l){if(!s||!l)return this;let i=this._events=this._events||{},r=i[s]=i[s]||[];return r.includes(l)||r.push(l),this},e.once=function(s,l){if(!s||!l)return this;this.on(s,l);let i=this._onceEvents=this._onceEvents||{},r=i[s]=i[s]||{};return r[l]=!0,this},e.off=function(s,l){let i=this._events&&this._events[s];if(!i||!i.length)return this;let r=i.indexOf(l);return r!=-1&&i.splice(r,1),this},e.emitEvent=function(s,l){let i=this._events&&this._events[s];if(!i||!i.length)return this;i=i.slice(0),l=l||[];let r=this._onceEvents&&this._onceEvents[s];for(let c of i)r&&r[c]&&(this.off(s,c),delete r[c]),c.apply(this,l);return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t})}(H)),H.exports}/*!
 * Unidragger v3.0.1
 * Draggable base class
 * MIT license
 */var Mt;function Pe(){return Mt||(Mt=1,function(h){(function(t,e){h.exports?h.exports=e(t,we()):t.Unidragger=e(t,t.EvEmitter)})(typeof window<"u"?window:$,function(e,s){function l(){}let i=l.prototype=Object.create(s.prototype);i.handleEvent=function(a){let u="on"+a.type;this[u]&&this[u](a)};let r,c;"ontouchstart"in e?(r="touchstart",c=["touchmove","touchend","touchcancel"]):e.PointerEvent?(r="pointerdown",c=["pointermove","pointerup","pointercancel"]):(r="mousedown",c=["mousemove","mouseup"]),i.touchActionValue="none",i.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},i.unbindHandles=function(){this._bindHandles("removeEventListener","")},i._bindHandles=function(a,u){this.handles.forEach(f=>{f[a](r,this),f[a]("click",this),e.PointerEvent&&(f.style.touchAction=u)})},i.bindActivePointerEvents=function(){c.forEach(a=>{e.addEventListener(a,this)})},i.unbindActivePointerEvents=function(){c.forEach(a=>{e.removeEventListener(a,this)})},i.withPointer=function(a,u){u.pointerId===this.pointerIdentifier&&this[a](u,u)},i.withTouch=function(a,u){let f;for(let d of u.changedTouches)d.identifier===this.pointerIdentifier&&(f=d);f&&this[a](u,f)},i.onmousedown=function(a){this.pointerDown(a,a)},i.ontouchstart=function(a){this.pointerDown(a,a.changedTouches[0])},i.onpointerdown=function(a){this.pointerDown(a,a)};const n=["TEXTAREA","INPUT","SELECT","OPTION"],o=["radio","checkbox","button","submit","image","file"];return i.pointerDown=function(a,u){let f=n.includes(a.target.nodeName),d=o.includes(a.target.type),v=!f||d;!this.isPointerDown&&!a.button&&v&&(this.isPointerDown=!0,this.pointerIdentifier=u.pointerId!==void 0?u.pointerId:u.identifier,this.pointerDownPointer={pageX:u.pageX,pageY:u.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[a,u]))},i.onmousemove=function(a){this.pointerMove(a,a)},i.onpointermove=function(a){this.withPointer("pointerMove",a)},i.ontouchmove=function(a){this.withTouch("pointerMove",a)},i.pointerMove=function(a,u){let f={x:u.pageX-this.pointerDownPointer.pageX,y:u.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[a,u,f]),!this.isDragging&&this.hasDragStarted(f)&&this.dragStart(a,u),this.isDragging&&this.dragMove(a,u,f)},i.hasDragStarted=function(a){return Math.abs(a.x)>3||Math.abs(a.y)>3},i.dragStart=function(a,u){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[a,u])},i.dragMove=function(a,u,f){this.emitEvent("dragMove",[a,u,f])},i.onmouseup=function(a){this.pointerUp(a,a)},i.onpointerup=function(a){this.withPointer("pointerUp",a)},i.ontouchend=function(a){this.withTouch("pointerUp",a)},i.pointerUp=function(a,u){this.pointerDone(),this.emitEvent("pointerUp",[a,u]),this.isDragging?this.dragEnd(a,u):this.staticClick(a,u)},i.dragEnd=function(a,u){this.isDragging=!1,setTimeout(()=>delete this.isPreventingClicks),this.emitEvent("dragEnd",[a,u])},i.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},i.onpointercancel=function(a){this.withPointer("pointerCancel",a)},i.ontouchcancel=function(a){this.withTouch("pointerCancel",a)},i.pointerCancel=function(a,u){this.pointerDone(),this.emitEvent("pointerCancel",[a,u])},i.onclick=function(a){this.isPreventingClicks&&a.preventDefault()},i.staticClick=function(a,u){let f=a.type==="mouseup";f&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[a,u]),f&&(this.isIgnoringMouseUp=!0,setTimeout(()=>{delete this.isIgnoringMouseUp},400)))},l})}(N)),N.exports}var wt;function Le(){return wt||(wt=1,function(h){(function(t,e){h.exports?h.exports=e(t,w(),Pe(),I()):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)})(typeof window<"u"?window:$,function(e,s,l,i){Object.assign(s.defaults,{draggable:">1",dragThreshold:3});let r=s.prototype;Object.assign(r,l.prototype),r.touchActionValue="",s.create.drag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("pointerDown",this.handlePointerDone),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.on("staticClick",this.handleStaticClick)},r.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},r.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},r.updateDraggable=function(){this.options.draggable===">1"?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.element.classList.toggle("is-draggable",this.isDraggable)},r._uiChangeDrag=function(){delete this.isFreeScrolling},r.handlePointerDown=function(n){if(!this.isDraggable){this.bindActivePointerEvents(n);return}let o=n.type==="touchstart",a=n.pointerType==="touch",u=n.target.matches("input, textarea, select");!o&&!a&&!u&&n.preventDefault(),u||this.focus(),document.activeElement!==this.element&&document.activeElement.blur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=c(),e.addEventListener("scroll",this),this.bindActivePointerEvents(n)},r.hasDragStarted=function(n){return Math.abs(n.x)>this.options.dragThreshold},r.handlePointerUp=function(){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down")},r.handlePointerDone=function(){e.removeEventListener("scroll",this),delete this.pointerDownScroll},r.handleDragStart=function(){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),e.removeEventListener("scroll",this))},r.handleDragMove=function(n,o,a){if(!this.isDraggable)return;n.preventDefault(),this.previousDragX=this.dragX;let u=this.options.rightToLeft?-1:1;this.isWrapping&&(a.x%=this.slideableWidth);let f=this.dragStartPosition+a.x*u;if(!this.isWrapping){let d=Math.max(-this.slides[0].target,this.dragStartPosition);f=f>d?(f+d)*.5:f;let v=Math.min(-this.getLastSlide().target,this.dragStartPosition);f=f<v?(f+v)*.5:f}this.dragX=f,this.dragMoveTime=new Date},r.handleDragEnd=function(){if(!this.isDraggable)return;let{freeScroll:n}=this.options;n&&(this.isFreeScrolling=!0);let o=this.dragEndRestingSelect();if(n&&!this.isWrapping){let a=this.getRestingPosition();this.isFreeScrolling=-a>this.slides[0].target&&-a<this.getLastSlide().target}else!n&&o===this.selectedIndex&&(o+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.isWrapping,this.select(o),delete this.isDragSelect},r.dragEndRestingSelect=function(){let n=this.getRestingPosition(),o=Math.abs(this.getSlideDistance(-n,this.selectedIndex)),a=this._getClosestResting(n,o,1),u=this._getClosestResting(n,o,-1);return a.distance<u.distance?a.index:u.index},r._getClosestResting=function(n,o,a){let u=this.selectedIndex,f=1/0,d=this.options.contain&&!this.isWrapping?(v,g)=>v<=g:(v,g)=>v<g;for(;d(o,f)&&(u+=a,f=o,o=this.getSlideDistance(-n,u),o!==null);)o=Math.abs(o);return{distance:f,index:u-a}},r.getSlideDistance=function(n,o){let a=this.slides.length,u=this.options.wrapAround&&a>1,f=u?i.modulo(o,a):o,d=this.slides[f];if(!d)return null;let v=u?this.slideableWidth*Math.floor(o/a):0;return n-(d.target+v)},r.dragEndBoostSelect=function(){if(this.previousDragX===void 0||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;let n=this.getSlideDistance(-this.dragX,this.selectedIndex),o=this.previousDragX-this.dragX;return n>0&&o>0?1:n<0&&o<0?-1:0},r.onscroll=function(){let n=c(),o=this.pointerDownScroll.x-n.x,a=this.pointerDownScroll.y-n.y;(Math.abs(o)>3||Math.abs(a)>3)&&this.pointerDone()};function c(){return{x:e.pageXOffset,y:e.pageYOffset}}return s})}(U)),U.exports}var j={exports:{}},Pt;function Ae(){return Pt||(Pt=1,function(h){(function(t,e){h.exports?h.exports=e(w()):e(t.Flickity)})(typeof window<"u"?window:$,function(e){const s="http://www.w3.org/2000/svg";function l(c,n,o){this.increment=c,this.direction=n,this.isPrevious=c==="previous",this.isLeft=n==="left",this._create(o)}l.prototype._create=function(c){let n=this.element=document.createElement("button");n.className=`flickity-button flickity-prev-next-button ${this.increment}`;let o=this.isPrevious?"Previous":"Next";n.setAttribute("type","button"),n.setAttribute("aria-label",o),this.disable();let a=this.createSVG(o,c);n.append(a)},l.prototype.createSVG=function(c,n){let o=document.createElementNS(s,"svg");o.setAttribute("class","flickity-button-icon"),o.setAttribute("viewBox","0 0 100 100");let a=document.createElementNS(s,"title");a.append(c);let u=document.createElementNS(s,"path"),f=i(n);return u.setAttribute("d",f),u.setAttribute("class","arrow"),this.isLeft||u.setAttribute("transform","translate(100, 100) rotate(180)"),o.append(a,u),o};function i(c){if(typeof c=="string")return c;let{x0:n,x1:o,x2:a,x3:u,y1:f,y2:d}=c;return`M ${n}, 50
    L ${o}, ${f+50}
    L ${a}, ${d+50}
    L ${u}, 50
    L ${a}, ${50-d}
    L ${o}, ${50-f}
    Z`}l.prototype.enable=function(){this.element.removeAttribute("disabled")},l.prototype.disable=function(){this.element.setAttribute("disabled",!0)},Object.assign(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.create.prevNextButtons=function(){if(!this.options.prevNextButtons)return;let{rightToLeft:c,arrowShape:n}=this.options,o=c?"right":"left",a=c?"left":"right";this.prevButton=new l("previous",o,n),this.nextButton=new l("next",a,n),this.focusableElems.push(this.prevButton.element),this.focusableElems.push(this.nextButton.element),this.handlePrevButtonClick=()=>{this.uiChange(),this.previous()},this.handleNextButtonClick=()=>{this.uiChange(),this.next()},this.on("activate",this.activatePrevNextButtons),this.on("select",this.updatePrevNextButtons)};let r=e.prototype;return r.updatePrevNextButtons=function(){let c=this.slides.length?this.slides.length-1:0;this.updatePrevNextButton(this.prevButton,0),this.updatePrevNextButton(this.nextButton,c)},r.updatePrevNextButton=function(c,n){if(this.isWrapping&&this.slides.length>1){c.enable();return}let o=this.selectedIndex!==n;c[o?"enable":"disable"](),!o&&document.activeElement===c.element&&this.focus()},r.activatePrevNextButtons=function(){this.prevButton.element.addEventListener("click",this.handlePrevButtonClick),this.nextButton.element.addEventListener("click",this.handleNextButtonClick),this.element.append(this.prevButton.element,this.nextButton.element),this.on("deactivate",this.deactivatePrevNextButtons)},r.deactivatePrevNextButtons=function(){this.prevButton.element.remove(),this.nextButton.element.remove(),this.prevButton.element.removeEventListener("click",this.handlePrevButtonClick),this.nextButton.element.removeEventListener("click",this.handleNextButtonClick),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=l,e})}(j)),j.exports}var X={exports:{}},Lt;function Ie(){return Lt||(Lt=1,function(h){(function(t,e){h.exports?h.exports=e(w(),I()):e(t.Flickity,t.fizzyUIUtils)})(typeof window<"u"?window:$,function(e,s){function l(){this.holder=document.createElement("div"),this.holder.className="flickity-page-dots",this.dots=[]}l.prototype.setDots=function(r){let c=r-this.dots.length;c>0?this.addDots(c):c<0&&this.removeDots(-c)},l.prototype.addDots=function(r){let c=new Array(r).fill().map((n,o)=>{let a=document.createElement("button");a.setAttribute("type","button");let u=o+1+this.dots.length;return a.className="flickity-page-dot",a.textContent=`View slide ${u}`,a});this.holder.append(...c),this.dots=this.dots.concat(c)},l.prototype.removeDots=function(r){this.dots.splice(this.dots.length-r,r).forEach(n=>n.remove())},l.prototype.updateSelected=function(r){this.selectedDot&&(this.selectedDot.classList.remove("is-selected"),this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[r],this.selectedDot.classList.add("is-selected"),this.selectedDot.setAttribute("aria-current","step"))},e.PageDots=l,Object.assign(e.defaults,{pageDots:!0}),e.create.pageDots=function(){this.options.pageDots&&(this.pageDots=new l,this.handlePageDotsClick=this.onPageDotsClick.bind(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))};let i=e.prototype;return i.activatePageDots=function(){this.pageDots.setDots(this.slides.length),this.focusableElems.push(...this.pageDots.dots),this.pageDots.holder.addEventListener("click",this.handlePageDotsClick),this.element.append(this.pageDots.holder)},i.onPageDotsClick=function(r){let c=this.pageDots.dots.indexOf(r.target);c!==-1&&(this.uiChange(),this.select(c))},i.updateSelectedPageDots=function(){this.pageDots.updateSelected(this.selectedIndex)},i.updatePageDots=function(){this.pageDots.dots.forEach(r=>{s.removeFrom(this.focusableElems,r)}),this.pageDots.setDots(this.slides.length),this.focusableElems.push(...this.pageDots.dots)},i.deactivatePageDots=function(){this.pageDots.holder.remove(),this.pageDots.holder.removeEventListener("click",this.handlePageDotsClick)},e.PageDots=l,e})}(X)),X.exports}var G={exports:{}},At;function ze(){return At||(At=1,function(h){(function(t,e){h.exports?h.exports=e(w()):e(t.Flickity)})(typeof window<"u"?window:$,function(e){function s(i,r){this.autoPlay=i,this.onTick=r,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}s.prototype.play=function(){if(this.state==="playing")return;if(document.hidden){document.addEventListener("visibilitychange",this.onVisibilityPlay);return}this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()},s.prototype.tick=function(){if(this.state!=="playing")return;let i=typeof this.autoPlay=="number"?this.autoPlay:3e3;this.clear(),this.timeout=setTimeout(()=>{this.onTick(),this.tick()},i)},s.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},s.prototype.clear=function(){clearTimeout(this.timeout)},s.prototype.pause=function(){this.state==="playing"&&(this.state="paused",this.clear())},s.prototype.unpause=function(){this.state==="paused"&&this.play()},s.prototype.visibilityChange=function(){let i=document.hidden;this[i?"pause":"unpause"]()},s.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},Object.assign(e.defaults,{pauseAutoPlayOnHover:!0}),e.create.player=function(){this.player=new s(this.options.autoPlay,()=>{this.next(!0)}),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)};let l=e.prototype;return l.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},l.playPlayer=function(){this.player.play()},l.stopPlayer=function(){this.player.stop()},l.pausePlayer=function(){this.player.pause()},l.unpausePlayer=function(){this.player.unpause()},l.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},l.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},l.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},e.Player=s,e})}(G)),G.exports}var V={exports:{}},It;function Be(){return It||(It=1,function(h){(function(t,e){h.exports?h.exports=e(w(),I()):e(t.Flickity,t.fizzyUIUtils)})(typeof window<"u"?window:$,function(e,s){function l(r){let c=document.createDocumentFragment();return r.forEach(n=>c.appendChild(n.element)),c}let i=e.prototype;return i.insert=function(r,c){let n=this._makeCells(r);if(!n||!n.length)return;let o=this.cells.length;c=c===void 0?o:c;let a=l(n),u=c===o;if(u)this.slider.appendChild(a);else{let f=this.cells[c].element;this.slider.insertBefore(a,f)}if(c===0)this.cells=n.concat(this.cells);else if(u)this.cells=this.cells.concat(n);else{let f=this.cells.splice(c,o-c);this.cells=this.cells.concat(n).concat(f)}this._sizeCells(n),this.cellChange(c),this.positionSliderAtSelected()},i.append=function(r){this.insert(r,this.cells.length)},i.prepend=function(r){this.insert(r,0)},i.remove=function(r){let c=this.getCells(r);if(!c||!c.length)return;let n=this.cells.length-1;c.forEach(o=>{o.remove();let a=this.cells.indexOf(o);n=Math.min(a,n),s.removeFrom(this.cells,o)}),this.cellChange(n),this.positionSliderAtSelected()},i.cellSizeChange=function(r){let c=this.getCell(r);if(!c)return;c.getSize();let n=this.cells.indexOf(c);this.cellChange(n)},i.cellChange=function(r){let c=this.selectedElement;this._positionCells(r),this._updateWrapShiftCells(),this.setGallerySize();let n=this.getCell(c);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[r]),this.select(this.selectedIndex)},e})}(V)),V.exports}var Q={exports:{}},zt;function Fe(){return zt||(zt=1,function(h){(function(t,e){h.exports?h.exports=e(w(),I()):e(t.Flickity,t.fizzyUIUtils)})(typeof window<"u"?window:$,function(e,s){const l="data-flickity-lazyload",i=`${l}-src`,r=`${l}-srcset`,c=`img[${l}], img[${i}], img[${r}], source[${r}]`;e.create.lazyLoad=function(){this.on("select",this.lazyLoad),this.handleLazyLoadComplete=this.onLazyLoadComplete.bind(this)};let n=e.prototype;n.lazyLoad=function(){let{lazyLoad:u}=this.options;if(!u)return;let f=typeof u=="number"?u:0;this.getAdjacentCellElements(f).map(o).flat().forEach(d=>new a(d,this.handleLazyLoadComplete))};function o(u){if(u.matches("img")){let f=u.getAttribute(l),d=u.getAttribute(i),v=u.getAttribute(r);if(f||d||v)return u}return[...u.querySelectorAll(c)]}n.onLazyLoadComplete=function(u,f){let d=this.getParentCell(u),v=d&&d.element;this.cellSizeChange(v),this.dispatchEvent("lazyLoad",f,v)};function a(u,f){this.img=u,this.onComplete=f,this.load()}return a.prototype.handleEvent=s.handleEvent,a.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);let u=this.img.getAttribute(l)||this.img.getAttribute(i),f=this.img.getAttribute(r);this.img.src=u,f&&this.img.setAttribute("srcset",f),this.img.removeAttribute(l),this.img.removeAttribute(i),this.img.removeAttribute(r)},a.prototype.onload=function(u){this.complete(u,"flickity-lazyloaded")},a.prototype.onerror=function(u){this.complete(u,"flickity-lazyerror")},a.prototype.complete=function(u,f){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this),(this.img.parentNode.matches("picture")?this.img.parentNode:this.img).classList.add(f),this.onComplete(this.img,u)},e.LazyLoader=a,e})}(Q)),Q.exports}var Y={exports:{}},J={exports:{}};/*!
 * imagesLoaded v5.0.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */var Bt;function Te(){return Bt||(Bt=1,function(h){(function(t,e){h.exports?h.exports=e(t,ne()):t.imagesLoaded=e(t,t.EvEmitter)})(typeof window<"u"?window:$,function(e,s){let l=e.jQuery,i=e.console;function r(f){return Array.isArray(f)?f:typeof f=="object"&&typeof f.length=="number"?[...f]:[f]}function c(f,d,v){if(!(this instanceof c))return new c(f,d,v);let g=f;if(typeof f=="string"&&(g=document.querySelectorAll(f)),!g){i.error(`Bad element for imagesLoaded ${g||f}`);return}this.elements=r(g),this.options={},typeof d=="function"?v=d:Object.assign(this.options,d),v&&this.on("always",v),this.getImages(),l&&(this.jqDeferred=new l.Deferred),setTimeout(this.check.bind(this))}c.prototype=Object.create(s.prototype),c.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const n=[1,9,11];c.prototype.addElementImages=function(f){f.nodeName==="IMG"&&this.addImage(f),this.options.background===!0&&this.addElementBackgroundImages(f);let{nodeType:d}=f;if(!d||!n.includes(d))return;let v=f.querySelectorAll("img");for(let g of v)this.addImage(g);if(typeof this.options.background=="string"){let g=f.querySelectorAll(this.options.background);for(let b of g)this.addElementBackgroundImages(b)}};const o=/url\((['"])?(.*?)\1\)/gi;c.prototype.addElementBackgroundImages=function(f){let d=getComputedStyle(f);if(!d)return;let v=o.exec(d.backgroundImage);for(;v!==null;){let g=v&&v[2];g&&this.addBackground(g,f),v=o.exec(d.backgroundImage)}},c.prototype.addImage=function(f){let d=new a(f);this.images.push(d)},c.prototype.addBackground=function(f,d){let v=new u(f,d);this.images.push(v)},c.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}let f=(d,v,g)=>{setTimeout(()=>{this.progress(d,v,g)})};this.images.forEach(function(d){d.once("progress",f),d.check()})},c.prototype.progress=function(f,d,v){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!f.isLoaded,this.emitEvent("progress",[this,f,d]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,f),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&i&&i.log(`progress: ${v}`,f,d)},c.prototype.complete=function(){let f=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(f,[this]),this.emitEvent("always",[this]),this.jqDeferred){let d=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[d](this)}};function a(f){this.img=f}a.prototype=Object.create(s.prototype),a.prototype.check=function(){if(this.getIsImageComplete()){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src},a.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},a.prototype.confirm=function(f,d){this.isLoaded=f;let{parentNode:v}=this.img,g=v.nodeName==="PICTURE"?v:this.img;this.emitEvent("progress",[this,g,d])},a.prototype.handleEvent=function(f){let d="on"+f.type;this[d]&&this[d](f)},a.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},a.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},a.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function u(f,d){this.url=f,this.element=d,this.img=new Image}return u.prototype=Object.create(a.prototype),u.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},u.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},u.prototype.confirm=function(f,d){this.isLoaded=f,this.emitEvent("progress",[this,this.element,d])},c.makeJQueryPlugin=function(f){f=f||e.jQuery,f&&(l=f,l.fn.imagesLoaded=function(d,v){return new c(this,d,v).jqDeferred.promise(l(this))})},c.makeJQueryPlugin(),c})}(J)),J.exports}var Ft;function We(){return Ft||(Ft=1,function(h){(function(t,e){h.exports?h.exports=e(w(),Te()):e(t.Flickity,t.imagesLoaded)})(typeof window<"u"?window:$,function(e,s){return e.create.imagesLoaded=function(){this.on("activate",this.imagesLoaded)},e.prototype.imagesLoaded=function(){if(!this.options.imagesLoaded)return;let l=(i,r)=>{let c=this.getParentCell(r.img);this.cellSizeChange(c&&c.element),this.options.freeScroll||this.positionSliderAtSelected()};s(this.slider).on("progress",l)},e})}(Y)),Y.exports}/*!
 * Flickity v3.0.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2022 Metafizzy
 */(function(h){if(h.exports){const t=w();Le(),Ae(),Ie(),ze(),Be(),Fe(),We(),h.exports=t}})(se);var Oe=se.exports;const Re=he(Oe);var qe={exports:{}},Z={exports:{}},K={exports:{}},tt={exports:{}},Tt;function z(){return Tt||(Tt=1,function(h){(function(t,e){h.exports?h.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:$,function(){function t(){}var e=t.prototype;return e.on=function(s,l){if(!(!s||!l)){var i=this._events=this._events||{},r=i[s]=i[s]||[];return r.indexOf(l)==-1&&r.push(l),this}},e.once=function(s,l){if(!(!s||!l)){this.on(s,l);var i=this._onceEvents=this._onceEvents||{},r=i[s]=i[s]||{};return r[l]=!0,this}},e.off=function(s,l){var i=this._events&&this._events[s];if(!(!i||!i.length)){var r=i.indexOf(l);return r!=-1&&i.splice(r,1),this}},e.emitEvent=function(s,l){var i=this._events&&this._events[s];if(!(!i||!i.length)){i=i.slice(0),l=l||[];for(var r=this._onceEvents&&this._onceEvents[s],c=0;c<i.length;c++){var n=i[c],o=r&&r[n];o&&(this.off(s,n),delete r[n]),n.apply(this,l)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})}(tt)),tt.exports}var et={exports:{}};/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */var Wt;function re(){return Wt||(Wt=1,function(h){(function(t,e){h.exports?h.exports=e():t.getSize=e()})(window,function(){function e(d){var v=parseFloat(d),g=d.indexOf("%")==-1&&!isNaN(v);return g&&v}function s(){}var l=typeof console>"u"?s:function(d){console.error(d)},i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r=i.length;function c(){for(var d={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},v=0;v<r;v++){var g=i[v];d[g]=0}return d}function n(d){var v=getComputedStyle(d);return v||l("Style returned "+v+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),v}var o=!1,a;function u(){if(!o){o=!0;var d=document.createElement("div");d.style.width="200px",d.style.padding="1px 2px 3px 4px",d.style.borderStyle="solid",d.style.borderWidth="1px 2px 3px 4px",d.style.boxSizing="border-box";var v=document.body||document.documentElement;v.appendChild(d);var g=n(d);a=Math.round(e(g.width))==200,f.isBoxSizeOuter=a,v.removeChild(d)}}function f(d){if(u(),typeof d=="string"&&(d=document.querySelector(d)),!(!d||typeof d!="object"||!d.nodeType)){var v=n(d);if(v.display=="none")return c();var g={};g.width=d.offsetWidth,g.height=d.offsetHeight;for(var b=g.isBorderBox=v.boxSizing=="border-box",k=0;k<r;k++){var m=i[k],x=v[m],p=parseFloat(x);g[m]=isNaN(p)?0:p}var _=g.paddingLeft+g.paddingRight,y=g.paddingTop+g.paddingBottom,S=g.marginLeft+g.marginRight,C=g.marginTop+g.marginBottom,E=g.borderLeftWidth+g.borderRightWidth,M=g.borderTopWidth+g.borderBottomWidth,A=b&&a,_t=e(v.width);_t!==!1&&(g.width=_t+(A?0:_+E));var yt=e(v.height);return yt!==!1&&(g.height=yt+(A?0:y+M)),g.innerWidth=g.width-(_+E),g.innerHeight=g.height-(y+M),g.outerWidth=g.width+S,g.outerHeight=g.height+C,g}}return f})}(et)),et.exports}var it={exports:{}},st={exports:{}},Ot;function Ue(){return Ot||(Ot=1,function(h){(function(t,e){h.exports?h.exports=e():t.matchesSelector=e()})(window,function(){var e=function(){var s=window.Element.prototype;if(s.matches)return"matches";if(s.matchesSelector)return"matchesSelector";for(var l=["webkit","moz","ms","o"],i=0;i<l.length;i++){var r=l[i],c=r+"MatchesSelector";if(s[c])return c}}();return function(l,i){return l[e](i)}})}(st)),st.exports}var Rt;function P(){return Rt||(Rt=1,function(h){(function(t,e){h.exports?h.exports=e(t,Ue()):t.fizzyUIUtils=e(t,t.matchesSelector)})(window,function(e,s){var l={};l.extend=function(c,n){for(var o in n)c[o]=n[o];return c},l.modulo=function(c,n){return(c%n+n)%n};var i=Array.prototype.slice;l.makeArray=function(c){if(Array.isArray(c))return c;if(c==null)return[];var n=typeof c=="object"&&typeof c.length=="number";return n?i.call(c):[c]},l.removeFrom=function(c,n){var o=c.indexOf(n);o!=-1&&c.splice(o,1)},l.getParent=function(c,n){for(;c.parentNode&&c!=document.body;)if(c=c.parentNode,s(c,n))return c},l.getQueryElement=function(c){return typeof c=="string"?document.querySelector(c):c},l.handleEvent=function(c){var n="on"+c.type;this[n]&&this[n](c)},l.filterFindElements=function(c,n){c=l.makeArray(c);var o=[];return c.forEach(function(a){if(a instanceof HTMLElement){if(!n){o.push(a);return}s(a,n)&&o.push(a);for(var u=a.querySelectorAll(n),f=0;f<u.length;f++)o.push(u[f])}}),o},l.debounceMethod=function(c,n,o){o=o||100;var a=c.prototype[n],u=n+"Timeout";c.prototype[n]=function(){var f=this[u];clearTimeout(f);var d=arguments,v=this;this[u]=setTimeout(function(){a.apply(v,d),delete v[u]},o)}},l.docReady=function(c){var n=document.readyState;n=="complete"||n=="interactive"?setTimeout(c):document.addEventListener("DOMContentLoaded",c)},l.toDashed=function(c){return c.replace(/(.)([A-Z])/g,function(n,o,a){return o+"-"+a}).toLowerCase()};var r=e.console;return l.htmlInit=function(c,n){l.docReady(function(){var o=l.toDashed(n),a="data-"+o,u=document.querySelectorAll("["+a+"]"),f=document.querySelectorAll(".js-"+o),d=l.makeArray(u).concat(l.makeArray(f)),v=a+"-options",g=e.jQuery;d.forEach(function(b){var k=b.getAttribute(a)||b.getAttribute(v),m;try{m=k&&JSON.parse(k)}catch(p){r&&r.error("Error parsing "+a+" on "+b.className+": "+p);return}var x=new c(b,m);g&&g.data(b,n,x)})})},l})}(it)),it.exports}var nt={exports:{}},qt;function Ne(){return qt||(qt=1,function(h){(function(t,e){h.exports?h.exports=e(t,re()):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))})(window,function(e,s){function l(r,c){this.element=r,this.parent=c,this.create()}var i=l.prototype;return i.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0,this.element.style[this.parent.originSide]=0},i.destroy=function(){this.unselect(),this.element.style.position="";var r=this.parent.originSide;this.element.style[r]="",this.element.style.transform="",this.element.removeAttribute("aria-hidden")},i.getSize=function(){this.size=s(this.element)},i.setPosition=function(r){this.x=r,this.updateTarget(),this.renderPosition(r)},i.updateTarget=i.setDefaultTarget=function(){var r=this.parent.originSide=="left"?"marginLeft":"marginRight";this.target=this.x+this.size[r]+this.size.width*this.parent.cellAlign},i.renderPosition=function(r){var c=this.parent.originSide==="left"?1:-1,n=this.parent.options.percentPosition?r*c*(this.parent.size.innerWidth/this.size.width):r*c;this.element.style.transform="translateX("+this.parent.getPositionValue(n)+")"},i.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},i.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},i.wrapShift=function(r){this.shift=r,this.renderPosition(this.x+this.parent.slideableWidth*r)},i.remove=function(){this.element.parentNode.removeChild(this.element)},l})}(nt)),nt.exports}var ot={exports:{}},Ut;function He(){return Ut||(Ut=1,function(h){(function(t,e){h.exports?h.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())})(window,function(){function e(l){this.parent=l,this.isOriginLeft=l.originSide=="left",this.cells=[],this.outerWidth=0,this.height=0}var s=e.prototype;return s.addCell=function(l){if(this.cells.push(l),this.outerWidth+=l.size.outerWidth,this.height=Math.max(l.size.outerHeight,this.height),this.cells.length==1){this.x=l.x;var i=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=l.size[i]}},s.updateTarget=function(){var l=this.isOriginLeft?"marginRight":"marginLeft",i=this.getLastCell(),r=i?i.size[l]:0,c=this.outerWidth-(this.firstMargin+r);this.target=this.x+this.firstMargin+c*this.parent.cellAlign},s.getLastCell=function(){return this.cells[this.cells.length-1]},s.select=function(){this.cells.forEach(function(l){l.select()})},s.unselect=function(){this.cells.forEach(function(l){l.unselect()})},s.getCellElements=function(){return this.cells.map(function(l){return l.element})},e})}(ot)),ot.exports}var rt={exports:{}},Nt;function je(){return Nt||(Nt=1,function(h){(function(t,e){h.exports?h.exports=e(t,P()):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))})(window,function(e,s){var l={};return l.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},l.animate=function(){this.applyDragForce(),this.applySelectedAttraction();var i=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(i),this.isAnimating){var r=this;requestAnimationFrame(function(){r.animate()})}},l.positionSlider=function(){var i=this.x;this.options.wrapAround&&this.cells.length>1&&(i=s.modulo(i,this.slideableWidth),i-=this.slideableWidth,this.shiftWrapCells(i)),this.setTranslateX(i,this.isAnimating),this.dispatchScrollEvent()},l.setTranslateX=function(i,r){i+=this.cursorPosition,i=this.options.rightToLeft?-i:i;var c=this.getPositionValue(i);this.slider.style.transform=r?"translate3d("+c+",0,0)":"translateX("+c+")"},l.dispatchScrollEvent=function(){var i=this.slides[0];if(i){var r=-this.x-i.target,c=r/this.slidesWidth;this.dispatchEvent("scroll",null,[c,r])}},l.positionSliderAtSelected=function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},l.getPositionValue=function(i){return this.options.percentPosition?Math.round(i/this.size.innerWidth*1e4)*.01+"%":Math.round(i)+"px"},l.settle=function(i){var r=!this.isPointerDown&&Math.round(this.x*100)==Math.round(i*100);r&&this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},l.shiftWrapCells=function(i){var r=this.cursorPosition+i;this._shiftCells(this.beforeShiftCells,r,-1);var c=this.size.innerWidth-(i+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,c,1)},l._shiftCells=function(i,r,c){for(var n=0;n<i.length;n++){var o=i[n],a=r>0?c:0;o.wrapShift(a),r-=o.size.outerWidth}},l._unshiftCells=function(i){if(!(!i||!i.length))for(var r=0;r<i.length;r++)i[r].wrapShift(0)},l.integratePhysics=function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},l.applyForce=function(i){this.velocity+=i},l.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},l.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},l.applyDragForce=function(){if(!(!this.isDraggable||!this.isPointerDown)){var i=this.dragX-this.x,r=i-this.velocity;this.applyForce(r)}},l.applySelectedAttraction=function(){var i=this.isDraggable&&this.isPointerDown;if(!(i||this.isFreeScrolling||!this.slides.length)){var r=this.selectedSlide.target*-1-this.x,c=r*this.options.selectedAttraction;this.applyForce(c)}},l})}(rt)),rt.exports}var Ht;function L(){return Ht||(Ht=1,function(h){(function(t,e){if(h.exports)h.exports=e(t,z(),re(),P(),Ne(),He(),je());else{var s=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,s.Cell,s.Slide,s.animatePrototype)}})(window,function(e,s,l,i,r,c,n){var o=e.jQuery,a=e.getComputedStyle,u=e.console;function f(m,x){for(m=i.makeArray(m);m.length;)x.appendChild(m.shift())}var d=0,v={};function g(m,x){var p=i.getQueryElement(m);if(!p){u&&u.error("Bad element for Flickity: "+(p||m));return}if(this.element=p,this.element.flickityGUID){var _=v[this.element.flickityGUID];return _&&_.option(x),_}o&&(this.$element=o(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(x),this._create()}g.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},g.createMethods=[];var b=g.prototype;i.extend(b,s.prototype),b._create=function(){var m=this.guid=++d;this.element.flickityGUID=m,v[m]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&e.addEventListener("resize",this);for(var x in this.options.on){var p=this.options.on[x];this.on(x,p)}g.createMethods.forEach(function(_){this[_]()},this),this.options.watchCSS?this.watchCSS():this.activate()},b.option=function(m){i.extend(this.options,m)},b.activate=function(){if(!this.isActive){this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();var m=this._filterFindCellElements(this.element.children);f(m,this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready")}},b._createSlider=function(){var m=document.createElement("div");m.className="flickity-slider",m.style[this.originSide]=0,this.slider=m},b._filterFindCellElements=function(m){return i.filterFindElements(m,this.options.cellSelector)},b.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},b._makeCells=function(m){var x=this._filterFindCellElements(m),p=x.map(function(_){return new r(_,this)},this);return p},b.getLastCell=function(){return this.cells[this.cells.length-1]},b.getLastSlide=function(){return this.slides[this.slides.length-1]},b.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},b._positionCells=function(m){m=m||0,this.maxCellHeight=m&&this.maxCellHeight||0;var x=0;if(m>0){var p=this.cells[m-1];x=p.x+p.size.outerWidth}for(var _=this.cells.length,y=m;y<_;y++){var S=this.cells[y];S.setPosition(x),x+=S.size.outerWidth,this.maxCellHeight=Math.max(S.size.outerHeight,this.maxCellHeight)}this.slideableWidth=x,this.updateSlides(),this._containSlides(),this.slidesWidth=_?this.getLastSlide().target-this.slides[0].target:0},b._sizeCells=function(m){m.forEach(function(x){x.getSize()})},b.updateSlides=function(){if(this.slides=[],!!this.cells.length){var m=new c(this);this.slides.push(m);var x=this.originSide=="left",p=x?"marginRight":"marginLeft",_=this._getCanCellFit();this.cells.forEach(function(y,S){if(!m.cells.length){m.addCell(y);return}var C=m.outerWidth-m.firstMargin+(y.size.outerWidth-y.size[p]);_.call(this,S,C)||(m.updateTarget(),m=new c(this),this.slides.push(m)),m.addCell(y)},this),m.updateTarget(),this.updateSelectedSlide()}},b._getCanCellFit=function(){var m=this.options.groupCells;if(m){if(typeof m=="number"){var x=parseInt(m,10);return function(y){return y%x!==0}}}else return function(){return!1};var p=typeof m=="string"&&m.match(/^(\d+)%$/),_=p?parseInt(p[1],10)/100:1;return function(y,S){return S<=(this.size.innerWidth+1)*_}},b._init=b.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},b.getSize=function(){this.size=l(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var k={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return b.setCellAlign=function(){var m=k[this.options.cellAlign];this.cellAlign=m?m[this.originSide]:this.options.cellAlign},b.setGallerySize=function(){if(this.options.setGallerySize){var m=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=m+"px"}},b._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var m=this.cursorPosition,x=this.cells.length-1;this.beforeShiftCells=this._getGapCells(m,x,-1),m=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(m,0,1)}},b._getGapCells=function(m,x,p){for(var _=[];m>0;){var y=this.cells[x];if(!y)break;_.push(y),x+=p,m-=y.size.outerWidth}return _},b._containSlides=function(){if(!(!this.options.contain||this.options.wrapAround||!this.cells.length)){var m=this.options.rightToLeft,x=m?"marginRight":"marginLeft",p=m?"marginLeft":"marginRight",_=this.slideableWidth-this.getLastCell().size[p],y=_<this.size.innerWidth,S=this.cursorPosition+this.cells[0].size[x],C=_-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(E){y?E.target=_*this.cellAlign:(E.target=Math.max(E.target,S),E.target=Math.min(E.target,C))},this)}},b.dispatchEvent=function(m,x,p){var _=x?[x].concat(p):p;if(this.emitEvent(m,_),o&&this.$element){m+=this.options.namespaceJQueryEvents?".flickity":"";var y=m;if(x){var S=new o.Event(x);S.type=m,y=S}this.$element.trigger(y,p)}},b.select=function(m,x,p){if(this.isActive&&(m=parseInt(m,10),this._wrapSelect(m),(this.options.wrapAround||x)&&(m=i.modulo(m,this.slides.length)),!!this.slides[m])){var _=this.selectedIndex;this.selectedIndex=m,this.updateSelectedSlide(),p?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[m]),m!=_&&this.dispatchEvent("change",null,[m]),this.dispatchEvent("cellSelect")}},b._wrapSelect=function(m){var x=this.slides.length,p=this.options.wrapAround&&x>1;if(!p)return m;var _=i.modulo(m,x),y=Math.abs(_-this.selectedIndex),S=Math.abs(_+x-this.selectedIndex),C=Math.abs(_-x-this.selectedIndex);!this.isDragSelect&&S<y?m+=x:!this.isDragSelect&&C<y&&(m-=x),m<0?this.x-=this.slideableWidth:m>=x&&(this.x+=this.slideableWidth)},b.previous=function(m,x){this.select(this.selectedIndex-1,m,x)},b.next=function(m,x){this.select(this.selectedIndex+1,m,x)},b.updateSelectedSlide=function(){var m=this.slides[this.selectedIndex];m&&(this.unselectSelectedSlide(),this.selectedSlide=m,m.select(),this.selectedCells=m.cells,this.selectedElements=m.getCellElements(),this.selectedCell=m.cells[0],this.selectedElement=this.selectedElements[0])},b.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},b.selectInitialIndex=function(){var m=this.options.initialIndex;if(this.isInitActivated){this.select(this.selectedIndex,!1,!0);return}if(m&&typeof m=="string"){var x=this.queryCell(m);if(x){this.selectCell(m,!1,!0);return}}var p=0;m&&this.slides[m]&&(p=m),this.select(p,!1,!0)},b.selectCell=function(m,x,p){var _=this.queryCell(m);if(_){var y=this.getCellSlideIndex(_);this.select(y,x,p)}},b.getCellSlideIndex=function(m){for(var x=0;x<this.slides.length;x++){var p=this.slides[x],_=p.cells.indexOf(m);if(_!=-1)return x}},b.getCell=function(m){for(var x=0;x<this.cells.length;x++){var p=this.cells[x];if(p.element==m)return p}},b.getCells=function(m){m=i.makeArray(m);var x=[];return m.forEach(function(p){var _=this.getCell(p);_&&x.push(_)},this),x},b.getCellElements=function(){return this.cells.map(function(m){return m.element})},b.getParentCell=function(m){var x=this.getCell(m);return x||(m=i.getParent(m,".flickity-slider > *"),this.getCell(m))},b.getAdjacentCellElements=function(m,x){if(!m)return this.selectedSlide.getCellElements();x=x===void 0?this.selectedIndex:x;var p=this.slides.length;if(1+m*2>=p)return this.getCellElements();for(var _=[],y=x-m;y<=x+m;y++){var S=this.options.wrapAround?i.modulo(y,p):y,C=this.slides[S];C&&(_=_.concat(C.getCellElements()))}return _},b.queryCell=function(m){if(typeof m=="number")return this.cells[m];if(typeof m=="string"){if(m.match(/^[#.]?[\d/]/))return;m=this.element.querySelector(m)}return this.getCell(m)},b.uiChange=function(){this.emitEvent("uiChange")},b.childUIPointerDown=function(m){m.type!="touchstart"&&m.preventDefault(),this.focus()},b.onresize=function(){this.watchCSS(),this.resize()},i.debounceMethod(g,"onresize",150),b.resize=function(){if(!(!this.isActive||this.isAnimating||this.isDragging)){this.getSize(),this.options.wrapAround&&(this.x=i.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var m=this.selectedElements&&this.selectedElements[0];this.selectCell(m,!1,!0)}},b.watchCSS=function(){var m=this.options.watchCSS;if(m){var x=a(this.element,":after").content;x.indexOf("flickity")!=-1?this.activate():this.deactivate()}},b.onkeydown=function(m){var x=document.activeElement&&document.activeElement!=this.element;if(!(!this.options.accessibility||x)){var p=g.keyboardHandlers[m.keyCode];p&&p.call(this)}},g.keyboardHandlers={37:function(){var m=this.options.rightToLeft?"next":"previous";this.uiChange(),this[m]()},39:function(){var m=this.options.rightToLeft?"previous":"next";this.uiChange(),this[m]()}},b.focus=function(){var m=e.pageYOffset;this.element.focus({preventScroll:!0}),e.pageYOffset!=m&&e.scrollTo(e.pageXOffset,m)},b.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(m){m.destroy()}),this.element.removeChild(this.viewport),f(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},b.destroy=function(){this.deactivate(),e.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),o&&this.$element&&o.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete v[this.guid]},i.extend(b,n),g.data=function(m){m=i.getQueryElement(m);var x=m&&m.flickityGUID;return x&&v[x]},i.htmlInit(g,"flickity"),o&&o.bridget&&o.bridget("flickity",g),g.setJQuery=function(m){o=m},g.Cell=r,g.Slide=c,g})}(K)),K.exports}var at={exports:{}},lt={exports:{}},ct={exports:{}};/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */var jt;function vt(){return jt||(jt=1,function(h){(function(t,e){h.exports?h.exports=e(t,z()):t.Unipointer=e(t,t.EvEmitter)})(window,function(e,s){function l(){}function i(){}var r=i.prototype=Object.create(s.prototype);r.bindStartEvent=function(n){this._bindStartEvent(n,!0)},r.unbindStartEvent=function(n){this._bindStartEvent(n,!1)},r._bindStartEvent=function(n,o){o=o===void 0?!0:o;var a=o?"addEventListener":"removeEventListener",u="mousedown";"ontouchstart"in e?u="touchstart":e.PointerEvent&&(u="pointerdown"),n[a](u,this)},r.handleEvent=function(n){var o="on"+n.type;this[o]&&this[o](n)},r.getTouch=function(n){for(var o=0;o<n.length;o++){var a=n[o];if(a.identifier==this.pointerIdentifier)return a}},r.onmousedown=function(n){var o=n.button;o&&o!==0&&o!==1||this._pointerDown(n,n)},r.ontouchstart=function(n){this._pointerDown(n,n.changedTouches[0])},r.onpointerdown=function(n){this._pointerDown(n,n)},r._pointerDown=function(n,o){n.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=o.pointerId!==void 0?o.pointerId:o.identifier,this.pointerDown(n,o))},r.pointerDown=function(n,o){this._bindPostStartEvents(n),this.emitEvent("pointerDown",[n,o])};var c={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return r._bindPostStartEvents=function(n){if(n){var o=c[n.type];o.forEach(function(a){e.addEventListener(a,this)},this),this._boundPointerEvents=o}},r._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(n){e.removeEventListener(n,this)},this),delete this._boundPointerEvents)},r.onmousemove=function(n){this._pointerMove(n,n)},r.onpointermove=function(n){n.pointerId==this.pointerIdentifier&&this._pointerMove(n,n)},r.ontouchmove=function(n){var o=this.getTouch(n.changedTouches);o&&this._pointerMove(n,o)},r._pointerMove=function(n,o){this.pointerMove(n,o)},r.pointerMove=function(n,o){this.emitEvent("pointerMove",[n,o])},r.onmouseup=function(n){this._pointerUp(n,n)},r.onpointerup=function(n){n.pointerId==this.pointerIdentifier&&this._pointerUp(n,n)},r.ontouchend=function(n){var o=this.getTouch(n.changedTouches);o&&this._pointerUp(n,o)},r._pointerUp=function(n,o){this._pointerDone(),this.pointerUp(n,o)},r.pointerUp=function(n,o){this.emitEvent("pointerUp",[n,o])},r._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},r._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},r.pointerDone=l,r.onpointercancel=function(n){n.pointerId==this.pointerIdentifier&&this._pointerCancel(n,n)},r.ontouchcancel=function(n){var o=this.getTouch(n.changedTouches);o&&this._pointerCancel(n,o)},r._pointerCancel=function(n,o){this._pointerDone(),this.pointerCancel(n,o)},r.pointerCancel=function(n,o){this.emitEvent("pointerCancel",[n,o])},i.getPointerPoint=function(n){return{x:n.pageX,y:n.pageY}},i})}(ct)),ct.exports}/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */var Xt;function Xe(){return Xt||(Xt=1,function(h){(function(t,e){h.exports?h.exports=e(t,vt()):t.Unidragger=e(t,t.Unipointer)})(window,function(e,s){function l(){}var i=l.prototype=Object.create(s.prototype);i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(n){n=n===void 0?!0:n;for(var o=n?"addEventListener":"removeEventListener",a=n?this._touchActionValue:"",u=0;u<this.handles.length;u++){var f=this.handles[u];this._bindStartEvent(f,n),f[o]("click",this),e.PointerEvent&&(f.style.touchAction=a)}},i._touchActionValue="none",i.pointerDown=function(n,o){var a=this.okayPointerDown(n);a&&(this.pointerDownPointer={pageX:o.pageX,pageY:o.pageY},n.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(n),this.emitEvent("pointerDown",[n,o]))};var r={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},c={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(n){var o=r[n.target.nodeName],a=c[n.target.type],u=!o||a;return u||this._pointerReset(),u},i.pointerDownBlur=function(){var n=document.activeElement,o=n&&n.blur&&n!=document.body;o&&n.blur()},i.pointerMove=function(n,o){var a=this._dragPointerMove(n,o);this.emitEvent("pointerMove",[n,o,a]),this._dragMove(n,o,a)},i._dragPointerMove=function(n,o){var a={x:o.pageX-this.pointerDownPointer.pageX,y:o.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this._dragStart(n,o),a},i.hasDragStarted=function(n){return Math.abs(n.x)>3||Math.abs(n.y)>3},i.pointerUp=function(n,o){this.emitEvent("pointerUp",[n,o]),this._dragPointerUp(n,o)},i._dragPointerUp=function(n,o){this.isDragging?this._dragEnd(n,o):this._staticClick(n,o)},i._dragStart=function(n,o){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(n,o)},i.dragStart=function(n,o){this.emitEvent("dragStart",[n,o])},i._dragMove=function(n,o,a){this.isDragging&&this.dragMove(n,o,a)},i.dragMove=function(n,o,a){n.preventDefault(),this.emitEvent("dragMove",[n,o,a])},i._dragEnd=function(n,o){this.isDragging=!1,setTimeout((function(){delete this.isPreventingClicks}).bind(this)),this.dragEnd(n,o)},i.dragEnd=function(n,o){this.emitEvent("dragEnd",[n,o])},i.onclick=function(n){this.isPreventingClicks&&n.preventDefault()},i._staticClick=function(n,o){this.isIgnoringMouseUp&&n.type=="mouseup"||(this.staticClick(n,o),n.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout((function(){delete this.isIgnoringMouseUp}).bind(this),400)))},i.staticClick=function(n,o){this.emitEvent("staticClick",[n,o])},l.getPointerPoint=s.getPointerPoint,l})}(lt)),lt.exports}var Gt;function Ge(){return Gt||(Gt=1,function(h){(function(t,e){h.exports?h.exports=e(t,L(),Xe(),P()):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)})(window,function(e,s,l,i){i.extend(s.defaults,{draggable:">1",dragThreshold:3}),s.createMethods.push("_createDrag");var r=s.prototype;i.extend(r,l.prototype),r._touchActionValue="pan-y",r._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable)},r.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},r.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},r.updateDraggable=function(){this.options.draggable==">1"?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},r.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},r.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},r._uiChangeDrag=function(){delete this.isFreeScrolling},r.pointerDown=function(o,a){if(!this.isDraggable){this._pointerDownDefault(o,a);return}var u=this.okayPointerDown(o);u&&(this._pointerDownPreventDefault(o),this.pointerDownFocus(o),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=n(),e.addEventListener("scroll",this),this._pointerDownDefault(o,a))},r._pointerDownDefault=function(o,a){this.pointerDownPointer={pageX:a.pageX,pageY:a.pageY},this._bindPostStartEvents(o),this.dispatchEvent("pointerDown",o,[a])};var c={INPUT:!0,TEXTAREA:!0,SELECT:!0};r.pointerDownFocus=function(o){var a=c[o.target.nodeName];a||this.focus()},r._pointerDownPreventDefault=function(o){var a=o.type=="touchstart",u=o.pointerType=="touch",f=c[o.target.nodeName];!a&&!u&&!f&&o.preventDefault()},r.hasDragStarted=function(o){return Math.abs(o.x)>this.options.dragThreshold},r.pointerUp=function(o,a){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",o,[a]),this._dragPointerUp(o,a)},r.pointerDone=function(){e.removeEventListener("scroll",this),delete this.pointerDownScroll},r.dragStart=function(o,a){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),e.removeEventListener("scroll",this),this.dispatchEvent("dragStart",o,[a]))},r.pointerMove=function(o,a){var u=this._dragPointerMove(o,a);this.dispatchEvent("pointerMove",o,[a,u]),this._dragMove(o,a,u)},r.dragMove=function(o,a,u){if(this.isDraggable){o.preventDefault(),this.previousDragX=this.dragX;var f=this.options.rightToLeft?-1:1;this.options.wrapAround&&(u.x%=this.slideableWidth);var d=this.dragStartPosition+u.x*f;if(!this.options.wrapAround&&this.slides.length){var v=Math.max(-this.slides[0].target,this.dragStartPosition);d=d>v?(d+v)*.5:d;var g=Math.min(-this.getLastSlide().target,this.dragStartPosition);d=d<g?(d+g)*.5:d}this.dragX=d,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",o,[a,u])}},r.dragEnd=function(o,a){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var u=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var f=this.getRestingPosition();this.isFreeScrolling=-f>this.slides[0].target&&-f<this.getLastSlide().target}else!this.options.freeScroll&&u==this.selectedIndex&&(u+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(u),delete this.isDragSelect,this.dispatchEvent("dragEnd",o,[a])}},r.dragEndRestingSelect=function(){var o=this.getRestingPosition(),a=Math.abs(this.getSlideDistance(-o,this.selectedIndex)),u=this._getClosestResting(o,a,1),f=this._getClosestResting(o,a,-1),d=u.distance<f.distance?u.index:f.index;return d},r._getClosestResting=function(o,a,u){for(var f=this.selectedIndex,d=1/0,v=this.options.contain&&!this.options.wrapAround?function(g,b){return g<=b}:function(g,b){return g<b};v(a,d)&&(f+=u,d=a,a=this.getSlideDistance(-o,f),a!==null);)a=Math.abs(a);return{distance:d,index:f-u}},r.getSlideDistance=function(o,a){var u=this.slides.length,f=this.options.wrapAround&&u>1,d=f?i.modulo(a,u):a,v=this.slides[d];if(!v)return null;var g=f?this.slideableWidth*Math.floor(a/u):0;return o-(v.target+g)},r.dragEndBoostSelect=function(){if(this.previousDragX===void 0||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var o=this.getSlideDistance(-this.dragX,this.selectedIndex),a=this.previousDragX-this.dragX;return o>0&&a>0?1:o<0&&a<0?-1:0},r.staticClick=function(o,a){var u=this.getParentCell(o.target),f=u&&u.element,d=u&&this.cells.indexOf(u);this.dispatchEvent("staticClick",o,[a,f,d])},r.onscroll=function(){var o=n(),a=this.pointerDownScroll.x-o.x,u=this.pointerDownScroll.y-o.y;(Math.abs(a)>3||Math.abs(u)>3)&&this._pointerDone()};function n(){return{x:e.pageXOffset,y:e.pageYOffset}}return s})}(at)),at.exports}var ht={exports:{}},Vt;function Ve(){return Vt||(Vt=1,function(h){(function(t,e){h.exports?h.exports=e(t,L(),vt(),P()):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)})(window,function(e,s,l,i){var r="http://www.w3.org/2000/svg";function c(a,u){this.direction=a,this.parent=u,this._create()}c.prototype=Object.create(l.prototype),c.prototype._create=function(){this.isEnabled=!0,this.isPrevious=this.direction==-1;var a=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==a;var u=this.element=document.createElement("button");u.className="flickity-button flickity-prev-next-button",u.className+=this.isPrevious?" previous":" next",u.setAttribute("type","button"),this.disable(),u.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var f=this.createSVG();u.appendChild(f),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},c.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},c.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},c.prototype.createSVG=function(){var a=document.createElementNS(r,"svg");a.setAttribute("class","flickity-button-icon"),a.setAttribute("viewBox","0 0 100 100");var u=document.createElementNS(r,"path"),f=n(this.parent.options.arrowShape);return u.setAttribute("d",f),u.setAttribute("class","arrow"),this.isLeft||u.setAttribute("transform","translate(100, 100) rotate(180) "),a.appendChild(u),a};function n(a){return typeof a=="string"?a:"M "+a.x0+",50 L "+a.x1+","+(a.y1+50)+" L "+a.x2+","+(a.y2+50)+" L "+a.x3+",50  L "+a.x2+","+(50-a.y2)+" L "+a.x1+","+(50-a.y1)+" Z"}c.prototype.handleEvent=i.handleEvent,c.prototype.onclick=function(){if(this.isEnabled){this.parent.uiChange();var a=this.isPrevious?"previous":"next";this.parent[a]()}},c.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},c.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},c.prototype.update=function(){var a=this.parent.slides;if(this.parent.options.wrapAround&&a.length>1){this.enable();return}var u=a.length?a.length-1:0,f=this.isPrevious?0:u,d=this.parent.selectedIndex==f?"disable":"enable";this[d]()},c.prototype.destroy=function(){this.deactivate(),this.allOff()},i.extend(s.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),s.createMethods.push("_createPrevNextButtons");var o=s.prototype;return o._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new c(-1,this),this.nextButton=new c(1,this),this.on("activate",this.activatePrevNextButtons))},o.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},o.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},s.PrevNextButton=c,s})}(ht)),ht.exports}var ut={exports:{}},Qt;function Qe(){return Qt||(Qt=1,function(h){(function(t,e){h.exports?h.exports=e(t,L(),vt(),P()):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)})(window,function(e,s,l,i){function r(n){this.parent=n,this._create()}r.prototype=Object.create(l.prototype),r.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},r.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},r.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},r.prototype.setDots=function(){var n=this.parent.slides.length-this.dots.length;n>0?this.addDots(n):n<0&&this.removeDots(-n)},r.prototype.addDots=function(n){for(var o=document.createDocumentFragment(),a=[],u=this.dots.length,f=u+n,d=u;d<f;d++){var v=document.createElement("li");v.className="dot",v.setAttribute("aria-label","Page dot "+(d+1)),o.appendChild(v),a.push(v)}this.holder.appendChild(o),this.dots=this.dots.concat(a)},r.prototype.removeDots=function(n){var o=this.dots.splice(this.dots.length-n,n);o.forEach(function(a){this.holder.removeChild(a)},this)},r.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},r.prototype.onTap=r.prototype.onClick=function(n){var o=n.target;if(o.nodeName=="LI"){this.parent.uiChange();var a=this.dots.indexOf(o);this.parent.select(a)}},r.prototype.destroy=function(){this.deactivate(),this.allOff()},s.PageDots=r,i.extend(s.defaults,{pageDots:!0}),s.createMethods.push("_createPageDots");var c=s.prototype;return c._createPageDots=function(){this.options.pageDots&&(this.pageDots=new r(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},c.activatePageDots=function(){this.pageDots.activate()},c.updateSelectedPageDots=function(){this.pageDots.updateSelected()},c.updatePageDots=function(){this.pageDots.setDots()},c.deactivatePageDots=function(){this.pageDots.deactivate()},s.PageDots=r,s})}(ut)),ut.exports}var dt={exports:{}},Yt;function Ye(){return Yt||(Yt=1,function(h){(function(t,e){h.exports?h.exports=e(z(),P(),L()):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)})(window,function(e,s,l){function i(c){this.parent=c,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}i.prototype=Object.create(e.prototype),i.prototype.play=function(){if(this.state!="playing"){var c=document.hidden;if(c){document.addEventListener("visibilitychange",this.onVisibilityPlay);return}this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()}},i.prototype.tick=function(){if(this.state=="playing"){var c=this.parent.options.autoPlay;c=typeof c=="number"?c:3e3;var n=this;this.clear(),this.timeout=setTimeout(function(){n.parent.next(!0),n.tick()},c)}},i.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.clear=function(){clearTimeout(this.timeout)},i.prototype.pause=function(){this.state=="playing"&&(this.state="paused",this.clear())},i.prototype.unpause=function(){this.state=="paused"&&this.play()},i.prototype.visibilityChange=function(){var c=document.hidden;this[c?"pause":"unpause"]()},i.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},s.extend(l.defaults,{pauseAutoPlayOnHover:!0}),l.createMethods.push("_createPlayer");var r=l.prototype;return r._createPlayer=function(){this.player=new i(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},r.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},r.playPlayer=function(){this.player.play()},r.stopPlayer=function(){this.player.stop()},r.pausePlayer=function(){this.player.pause()},r.unpausePlayer=function(){this.player.unpause()},r.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},r.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},r.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},l.Player=i,l})}(dt)),dt.exports}var pt={exports:{}},Jt;function Je(){return Jt||(Jt=1,function(h){(function(t,e){h.exports?h.exports=e(t,L(),P()):e(t,t.Flickity,t.fizzyUIUtils)})(window,function(e,s,l){function i(c){var n=document.createDocumentFragment();return c.forEach(function(o){n.appendChild(o.element)}),n}var r=s.prototype;return r.insert=function(c,n){var o=this._makeCells(c);if(!(!o||!o.length)){var a=this.cells.length;n=n===void 0?a:n;var u=i(o),f=n==a;if(f)this.slider.appendChild(u);else{var d=this.cells[n].element;this.slider.insertBefore(u,d)}if(n===0)this.cells=o.concat(this.cells);else if(f)this.cells=this.cells.concat(o);else{var v=this.cells.splice(n,a-n);this.cells=this.cells.concat(o).concat(v)}this._sizeCells(o),this.cellChange(n,!0)}},r.append=function(c){this.insert(c,this.cells.length)},r.prepend=function(c){this.insert(c,0)},r.remove=function(c){var n=this.getCells(c);if(!(!n||!n.length)){var o=this.cells.length-1;n.forEach(function(a){a.remove();var u=this.cells.indexOf(a);o=Math.min(u,o),l.removeFrom(this.cells,a)},this),this.cellChange(o,!0)}},r.cellSizeChange=function(c){var n=this.getCell(c);if(n){n.getSize();var o=this.cells.indexOf(n);this.cellChange(o)}},r.cellChange=function(c,n){var o=this.selectedElement;this._positionCells(c),this._getWrapShiftCells(),this.setGallerySize();var a=this.getCell(o);a&&(this.selectedIndex=this.getCellSlideIndex(a)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[c]),this.select(this.selectedIndex),n&&this.positionSliderAtSelected()},s})}(pt)),pt.exports}var ft={exports:{}},Zt;function Ze(){return Zt||(Zt=1,function(h){(function(t,e){h.exports?h.exports=e(t,L(),P()):e(t,t.Flickity,t.fizzyUIUtils)})(window,function(e,s,l){s.createMethods.push("_createLazyload");var i=s.prototype;i._createLazyload=function(){this.on("select",this.lazyLoad)},i.lazyLoad=function(){var n=this.options.lazyLoad;if(n){var o=typeof n=="number"?n:0,a=this.getAdjacentCellElements(o),u=[];a.forEach(function(f){var d=r(f);u=u.concat(d)}),u.forEach(function(f){new c(f,this)},this)}};function r(n){if(n.nodeName=="IMG"){var o=n.getAttribute("data-flickity-lazyload"),a=n.getAttribute("data-flickity-lazyload-src"),u=n.getAttribute("data-flickity-lazyload-srcset");if(o||a||u)return[n]}var f="img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]",d=n.querySelectorAll(f);return l.makeArray(d)}function c(n,o){this.img=n,this.flickity=o,this.load()}return c.prototype.handleEvent=l.handleEvent,c.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var n=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),o=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=n,o&&this.img.setAttribute("srcset",o),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},c.prototype.onload=function(n){this.complete(n,"flickity-lazyloaded")},c.prototype.onerror=function(n){this.complete(n,"flickity-lazyerror")},c.prototype.complete=function(n,o){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var a=this.flickity.getParentCell(this.img),u=a&&a.element;this.flickity.cellSizeChange(u),this.img.classList.add(o),this.flickity.dispatchEvent("lazyLoad",n,u)},s.LazyLoader=c,s})}(ft)),ft.exports}/*!
 * Flickity v2.3.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2021 Metafizzy
 */var Kt;function Ke(){return Kt||(Kt=1,function(h){(function(t,e){h.exports&&(h.exports=e(L(),Ge(),Ve(),Qe(),Ye(),Je(),Ze()))})(window,function(e){return e})}(Z)),Z.exports}var mt={exports:{}};/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */var te;function ti(){return te||(te=1,function(h){(function(t,e){h.exports?h.exports=e(t,z()):t.imagesLoaded=e(t,t.EvEmitter)})(typeof window<"u"?window:$,function(e,s){var l=e.jQuery,i=e.console;function r(d,v){for(var g in v)d[g]=v[g];return d}var c=Array.prototype.slice;function n(d){if(Array.isArray(d))return d;var v=typeof d=="object"&&typeof d.length=="number";return v?c.call(d):[d]}function o(d,v,g){if(!(this instanceof o))return new o(d,v,g);var b=d;if(typeof d=="string"&&(b=document.querySelectorAll(d)),!b){i.error("Bad element for imagesLoaded "+(b||d));return}this.elements=n(b),this.options=r({},this.options),typeof v=="function"?g=v:r(this.options,v),g&&this.on("always",g),this.getImages(),l&&(this.jqDeferred=new l.Deferred),setTimeout(this.check.bind(this))}o.prototype=Object.create(s.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(d){d.nodeName=="IMG"&&this.addImage(d),this.options.background===!0&&this.addElementBackgroundImages(d);var v=d.nodeType;if(!(!v||!a[v])){for(var g=d.querySelectorAll("img"),b=0;b<g.length;b++){var k=g[b];this.addImage(k)}if(typeof this.options.background=="string"){var m=d.querySelectorAll(this.options.background);for(b=0;b<m.length;b++){var x=m[b];this.addElementBackgroundImages(x)}}}};var a={1:!0,9:!0,11:!0};o.prototype.addElementBackgroundImages=function(d){var v=getComputedStyle(d);if(v)for(var g=/url\((['"])?(.*?)\1\)/gi,b=g.exec(v.backgroundImage);b!==null;){var k=b&&b[2];k&&this.addBackground(k,d),b=g.exec(v.backgroundImage)}},o.prototype.addImage=function(d){var v=new u(d);this.images.push(v)},o.prototype.addBackground=function(d,v){var g=new f(d,v);this.images.push(g)},o.prototype.check=function(){var d=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}function v(g,b,k){setTimeout(function(){d.progress(g,b,k)})}this.images.forEach(function(g){g.once("progress",v),g.check()})},o.prototype.progress=function(d,v,g){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!d.isLoaded,this.emitEvent("progress",[this,d,v]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,d),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+g,d,v)},o.prototype.complete=function(){var d=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(d,[this]),this.emitEvent("always",[this]),this.jqDeferred){var v=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[v](this)}};function u(d){this.img=d}u.prototype=Object.create(s.prototype),u.prototype.check=function(){var d=this.getIsImageComplete();if(d){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src},u.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},u.prototype.confirm=function(d,v){this.isLoaded=d,this.emitEvent("progress",[this,this.img,v])},u.prototype.handleEvent=function(d){var v="on"+d.type;this[v]&&this[v](d)},u.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},u.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},u.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function f(d,v){this.url=d,this.element=v,this.img=new Image}return f.prototype=Object.create(u.prototype),f.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var d=this.getIsImageComplete();d&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},f.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},f.prototype.confirm=function(d,v){this.isLoaded=d,this.emitEvent("progress",[this,this.element,v])},o.makeJQueryPlugin=function(d){d=d||e.jQuery,d&&(l=d,l.fn.imagesLoaded=function(v,g){var b=new o(this,v,g);return b.jqDeferred.promise(l(this))})},o.makeJQueryPlugin(),o})}(mt)),mt.exports}/*!
 * Flickity imagesLoaded v2.0.0
 * enables imagesLoaded option for Flickity
 */(function(h){(function(t,e){h.exports?h.exports=e(t,Ke(),ti()):t.Flickity=e(t,t.Flickity,t.imagesLoaded)})(window,function(e,s,l){s.createMethods.push("_createImagesLoaded");var i=s.prototype;return i._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},i.imagesLoaded=function(){if(!this.options.imagesLoaded)return;var r=this;function c(n,o){var a=r.getParentCell(o.img);r.cellSizeChange(a&&a.element),r.options.freeScroll||r.positionSliderAtSelected()}l(this.slider).on("progress",c)},s})})(qe);const ei={name:"FlickityCarousel",props:{options:{type:Object,default:()=>({initialIndex:0,groupCells:!1,imagesLoaded:!0,pageDots:!0,selectedAttraction:.2,percentPosition:!1,friction:.8,cellAlign:"left",contain:!0})}},data(){return{flickity:null,observer:null}},mounted(){this.initFlickity();let h;this.observer=new ResizeObserver(()=>{h&&clearTimeout(h),h=setTimeout(()=>{this.resize()},700)}),this.observer.observe(this.$el)},beforeDestroy(){this.observer&&this.observer.disconnect(),this.flickity&&this.flickity.destroy()},methods:{initFlickity(){this.flickity=new Re(this.$refs.flickity,this.options),this.$emit("flickity-ready",this.flickity)},resize(){var h;(h=this.flickity)!=null&&h.resize&&this.flickity.resize()}}};var ii=function(){var t=this,e=t._self._c;return e("div",{ref:"flickity",staticClass:"_flickityCarousel"},[t._t("default")],2)},si=[],ni=D(ei,ii,si,!1,null,"4d21b56a");const oi=ni.exports,ri={props:{medias_with_linked:Array,publication_path:String},components:{FilesList:ie},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}};var ai=function(){var t=this,e=t._self._c;return e("BaseModal2",{attrs:{title:t.$t("change_order")},on:{close:function(s){return t.$emit("close")}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("div"),e("button",{staticClass:"u-button",attrs:{type:"button"},on:{click:function(s){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("close"))+" ")])]},proxy:!0}])},[e("FilesList",{attrs:{mode:"carousel",medias_with_linked:t.medias_with_linked,publication_path:t.publication_path,edit_mode:!0},on:{addMedias:function(s){return t.$emit("addMedias",s)},reorderMedias:function(s){return t.$emit("reorderMedias",s)},removeMediaAtIndex:function(s){return t.$emit("removeMediaAtIndex",s)}}})],1)},li=[],ci=D(ri,ai,li,!1,null,"60af19b6");const hi=ci.exports,ui={props:{medias_with_linked:Array,context:String,page_template:String,show_fs_button:Boolean,number_of_max_medias:[Boolean,Number],publication_path:String,publi_width:Number,edit_mode:Boolean,can_edit:Boolean},components:{FlickityCarousel:oi,MediaPicker:gt,CaptionCreditsPage:ee,ChangeOrderModal:hi},data(){return{show_media_picker:!1,show_change_order_modal:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{slider_key(){const h=this.medias_with_linked.map((t,e)=>t.meta_filename_in_project+"-index-"+e);return h?JSON.stringify(h):"none"}},methods:{itemStyle({media_with_linked:h}){let t={};return t["--object-fit"]=h.objectFit||"cover",t},mediaIsSquare(h){var t;return((t=h.$infos)==null?void 0:t.ratio)===1},showObjectFitFor(h){return!(!h._linked_media||this.mediaIsSquare(h._linked_media)||!["image","video","stl","pdf"].includes(h._linked_media.$type))}}};var di=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_carousel",class:{}},[e("FlickityCarousel",{key:t.slider_key,staticClass:"_mainCarousel"},t._l(t.medias_with_linked,function(s,l){return e("div",{key:s._linked_media&&s._linked_media.$path||"no_media_"+l,staticClass:"carousel-cell",style:t.itemStyle({media_with_linked:s}),attrs:{"data-mediatype":s._linked_media.$type}},[s._linked_media?e("MediaContent",{attrs:{file:s._linked_media,resolution:t.context==="preview"?220:1600,context:t.context,show_fs_button:t.show_fs_button,display_credits_caption:!0,can_edit_credits_caption:t.can_edit}}):e("span",{staticClass:"_noSourceMedia u-instructions",domProps:{textContent:t._s(t.$t("source_media_missing"))}}),e("CaptionCreditsPage",{attrs:{media:s._linked_media,publication_path:t.publication_path,can_edit:t.can_edit}}),t.edit_mode?e("div",{staticClass:"_btnRow"},[e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){t.show_change_order_modal=!0}}},[e("b-icon",{attrs:{icon:"arrow-left-right"}})],1),t.showObjectFitFor(s)?[!s.objectFit||s.objectFit==="cover"?t._e():e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"cover"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio"}})],1),s.objectFit!=="contain"?e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"contain"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio-fill"}})],1):t._e()]:t._e(),e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(i){return t.$emit("removeMediaAtIndex",{index:l})}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],2):t._e()],1)}),0),t.show_change_order_modal?e("ChangeOrderModal",{attrs:{medias_with_linked:t.medias_with_linked,publication_path:t.publication_path},on:{addMedias:function(s){return t.$emit("addMedias",s)},reorderMedias:function(s){return t.$emit("reorderMedias",s)},removeMediaAtIndex:function(s){return t.$emit("removeMediaAtIndex",s)},close:function(s){t.show_change_order_modal=!1}}}):t._e(),t.can_edit?e("div",{staticClass:"_mediaPickerTile"},[e("EditBtn",{attrs:{btn_type:"add",is_unfolded:!1},on:{click:function(s){t.show_media_picker=!0}}}),t.show_media_picker?e("MediaPicker",{attrs:{publication_path:t.publication_path},on:{addMedias:function(s){return t.$emit("addMedias",s)},close:function(s){t.show_media_picker=!1}}}):t._e(),e("DropZone",{staticClass:"_dzAfter",on:{mediaDropped:function(s){return t.$emit("addMedias",s)}}})],1):t._e()],1)},pi=[],fi=D(ui,di,pi,!1,null,"f3adcda8");const mi=fi.exports,gi={props:{publimodule:Object,context:{type:String,default:"full"},page_template:String,number_of_max_medias:[Boolean,Number],show_fs_button:Boolean,edit_mode:Boolean,can_edit:Boolean},components:{MosaicMediaGrid:xe,FilesList:ie,MediaCarousel:mi},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{publication_path(){return this.getParent(this.publimodule.$path)},medias_with_linked(){return this.publimodule.source_medias?this.publimodule.source_medias.reduce((h,t)=>{const e=this.getSourceMedia({source_media:t,folder_path:this.publication_path});if(e){const s=Object.assign({},t,{_linked_media:e});h.push(s)}return h},[]):[]}},methods:{async addMedias({path_to_source_media_metas:h}){let t=this.publimodule.source_medias.slice()||[];for(const e of h){const s=this.$root.publication_include_mode,l=await this.prepareMediaForPublication({path_to_source_media_meta:e,publication_path:this.publication_path,import_mode:s});t.push(l)}this.$emit("updateMeta",{source_medias:t})},async removeMediaAtIndex({index:h,remove_source:t=!0}){const e=this.publimodule.source_medias.slice(),s=e[h];if(e.splice(h,1),e.length===0?this.$emit("remove",{with_content:!1}):this.$emit("updateMeta",{source_medias:e}),Object.prototype.hasOwnProperty.call(s,"meta_filename")&&t===!0){const l=this.getSourceMedia({source_media:{meta_filename:s.meta_filename},folder_path:this.publication_path});await this.$api.deleteItem({path:l.$path})}},reorderMedias(h){const t=h.map(e=>(delete e._linked_media,e));this.$emit("updateMeta",{source_medias:t})},updateMediaOpt({index:h,opt:t}){const e=this.publimodule.source_medias.slice();Object.assign(e[h],t),this.$emit("updateMeta",{source_medias:e})}}};var vi=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[e("div",{key:t.medias_with_linked.length>1?"multiple":"single",staticClass:"_mediasModule",style:`--number_of_medias: ${t.medias_with_linked.length}`},[e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.publimodule.module_type==="mosaic"?e("MosaicMediaGrid",{key:"mosaic",attrs:{medias_with_linked:t.medias_with_linked,publimodule:t.publimodule,context:t.context,page_template:t.page_template,show_fs_button:t.show_fs_button,number_of_max_medias:t.number_of_max_medias,publication_path:t.publication_path,edit_mode:t.edit_mode,can_edit:t.can_edit},on:{addMedias:t.addMedias,removeMediaAtIndex:t.removeMediaAtIndex,updateMediaOpt:t.updateMediaOpt}}):t.publimodule.module_type==="files"?e("FilesList",{key:"filelist",attrs:{mode:"source",medias_with_linked:t.medias_with_linked,publication_path:t.publication_path,edit_mode:t.edit_mode,can_edit:t.can_edit},on:{addMedias:t.addMedias,reorderMedias:t.reorderMedias,removeMediaAtIndex:t.removeMediaAtIndex}}):t.publimodule.module_type==="carousel"?e("MediaCarousel",{attrs:{medias_with_linked:t.medias_with_linked,context:t.context,page_template:t.page_template,show_fs_button:t.show_fs_button,publication_path:t.publication_path,publi_width:t.publimodule.size,edit_mode:t.edit_mode,can_edit:t.can_edit},on:{addMedias:t.addMedias,reorderMedias:t.reorderMedias,removeMediaAtIndex:t.removeMediaAtIndex,updateMediaOpt:t.updateMediaOpt}}):t._e()],1)],1)])},_i=[],yi=D(gi,vi,_i,!1,null,"e4cd4c80");const bi=yi.exports,xi={props:{publimodule:Object,module_position:String,module_being_edited:String,magnification:Number,border_radius:{type:Object,default:()=>({x:0,y:0})},context:String,page_template:String,number_of_max_medias:{type:[Boolean,Number],default:!1},can_edit:Boolean},components:{MediasModule:bi},inject:{$getMapOptions:{default:!1}},data(){return{is_repicking_location:!1,observer:void 0}},created(){},mounted(){this.$eventHub.$on(`module.enable_edit.${this.module_meta_filename}`,this.enableEdit),this.$eventHub.$on(`module.duplicate.${this.module_meta_filename}`,this.duplicateModule),this.$eventHub.$on(`module.remove.${this.module_meta_filename}`,this.removeModule),this.$eventHub.$on(`publication.story.scrollTo.${this.publimodule.$path}`,this.scrollToModule),this.$eventHub.$on("publication.map.click",this.setRepickLocation),this.startIntersectionObserver()},beforeDestroy(){this.$eventHub.$off(`module.enable_edit.${this.module_meta_filename}`,this.enableEdit),this.$eventHub.$off(`module.duplicate.${this.module_meta_filename}`,this.duplicateModule),this.$eventHub.$off(`module.remove.${this.module_meta_filename}`,this.removeModule),this.$eventHub.$off(`publication.story.scrollTo.${this.publimodule.$path}`,this.scrollToModule),this.$eventHub.$off("publication.map.click",this.setRepickLocation),this.endIntersectionObserver()},watch:{edit_mode(){this.$refs.textBloc&&(this.edit_mode?this.$nextTick(()=>this.$refs.textBloc.enableEditor()):this.$refs.textBloc.disableEditor()),this.edit_mode||(this.is_repicking_location=!1)}},computed:{is_associated_to_map(){return this.$getMapOptions},is_active_on_map(){return this.$getMapOptions?this.$getMapOptions().opened_pin_path===this.publimodule.$path:!1},zoom_level_options(){return new Array(20).fill(0).map((t,e)=>e===0?{key:"",text:this.$t("dont_zoom")}:e===1?{key:e,text:e+" ("+this.$t("very_far")+")"}:e===19?{key:e,text:e+" ("+this.$t("very_close")+")"}:{key:e})},available_module_types(){return this.publimodule.module_type==="text"?["text","mosaic","carousel","files"]:["mosaic","carousel","files"]},pin_options(){return this.$getMapOptions?this.$getMapOptions().pins_infos.find(({path:h})=>h===this.publimodule.$path):!1},has_coordinates(){var h,t;return((h=this.publimodule.location)==null?void 0:h.latitude)&&((t=this.publimodule.location)==null?void 0:t.longitude)},edit_mode(){return this.module_being_edited===this.publimodule.$path},module_meta_filename(){return this.publimodule.$path.split("/").at(-1)},show_caption(){var h;return!(this.module_type==="text"||this.module_type==="shape"||this.publimodule.source_medias.length===1&&((h=this.publimodule.source_medias[0].meta_filename)!=null&&h.startsWith("text-"))||!this.publimodule.caption&&!this.edit_mode)},module_type(){return this.getModuleType(this.publimodule.module_type)},show_fs_button(){return this.page_template==="page_by_page"?this.publimodule.show_fs_button===!0:!0},first_media(){return this.firstMedia(this.publimodule)},media_styles(){let h=0;return this.publimodule.align==="center"&&(this.publimodule.size===66.6?h=16.6:this.publimodule.size===50?h=25:this.publimodule.size===33.3&&(h=33.3)),this.publimodule.align==="right"&&(this.publimodule.size===66.6?h=33.3:this.publimodule.size===50?h=50:this.publimodule.size===33.3&&(h=66.6)),{"--module-width":this.publimodule.size||100,"--module-margin-left":h}}},methods:{async updateMeta(h){await this.$api.updateMeta({path:this.publimodule.$path,new_meta:h}).catch(t=>{throw this.$alertify.delay(4e3).error(t),t})},repickLocation(){this.is_repicking_location=!0,this.$eventHub.$emit("publication.map.disableTools")},showModuleOnMap(){this.$eventHub.$emit("publication.map.openPin",this.publimodule.$path)},pinButtonClick(){this.scrollToModule()},preventClickTraversing(h){this.edit_mode&&h.stopPropagation()},async setRepickLocation({longitude:h,latitude:t}){this.is_repicking_location&&(await this.updateMeta({location:{longitude:h,latitude:t}}).catch(e=>{throw this.$alertify.delay(4e3).error(e),e}),this.is_repicking_location=!1,await new Promise(e=>setTimeout(e,100)),this.showModuleOnMap())},async eraseCoords(){await this.updateMeta({location:{}}).catch(h=>{throw this.$alertify.delay(4e3).error(h),h})},enableEdit(){this.$emit("update:module_being_edited",this.publimodule.$path)},disableEdit(){this.$emit("update:module_being_edited",void 0)},scrollToModule(h="auto"){this.$el&&(console.log("scrollToModule "+this.publimodule.$path),this.$el.scrollIntoView({behavior:h,block:"start",inline:"nearest"}))},startIntersectionObserver(){let h=(e,s)=>{e.forEach(l=>{l.isIntersecting&&this.is_associated_to_map&&this.has_coordinates&&!this.is_active_on_map&&this.showModuleOnMap()})},t="-10%";try{t=window.getComputedStyle(this.$el).getPropertyValue("scroll-margin-top")}catch{}this.observer=new IntersectionObserver(h,{rootMargin:`${t} 0% -80% 0%`}),this.observer.observe(this.$refs.sentinel)},endIntersectionObserver(){this.observer.unobserve(this.$el)},changeModuleType(h){const t=h.target.value;this.updateMeta({module_type:t})},async duplicateModule(){let h={};this.page_template==="page_by_page"&&(h.x=(this.publimodule.x||0)+10,h.y=(this.publimodule.y||0)+10);const t=await this.duplicateModuleWithSourceMedias({og_module:this.publimodule,addtl_meta_to_module:h});this.$emit("duplicate",t),this.disableEdit()},async removeModule({with_content:h=!0}={}){if(h)try{for(let t of this.publimodule.source_medias)if(Object.prototype.hasOwnProperty.call(t,"meta_filename")){const e=this.getParent(this.publimodule.$path),s=this.getSourceMedia({source_media:t,folder_path:e});s&&await this.$api.deleteItem({path:s.$path})}}catch(t){this.$alertify.delay(4e3).error(t)}await this.$api.deleteItem({path:this.publimodule.$path}).catch(t=>{throw this.$alertify.delay(4e3).error(t),t}),this.$emit("remove")}}};var Si=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_publicationModule",attrs:{"data-type":t.module_type},on:{click:t.preventClickTraversing}},[e("transition",{attrs:{name:"showOptions",mode:"out-in",appear:""}},[t.edit_mode&&t.page_template!=="page_by_page"?e("div",{staticClass:"_sideOptions"},[e("div",{staticClass:"_sideOptions--content"},[e("div",{staticClass:"_arrows"},[t.$listeners.hasOwnProperty("moveUp")?e("button",{staticClass:"u-button _sideBtns _moveBefore",attrs:{disabled:t.module_position==="first"||t.module_position==="alone",type:"button"},on:{click:function(s){return t.$emit("moveUp")}}},[e("svg",{staticStyle:{transform:"rotate(90deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 168 168"}},[e("path",{staticStyle:{fill:"currentColor"},attrs:{d:"M87.46,49.46,73.39,64.77a65.3,65.3,0,0,1-6.15,6.15A47.8,47.8,0,0,1,61,75.29H131.6V91.14H61A39.1,39.1,0,0,1,67,95.51q2.81,2.46,6.36,6.15L87.46,117,74.48,128,34.17,83.21,74.48,38.39Z"}})])]):t._e(),t.$listeners.hasOwnProperty("moveDown")?e("button",{staticClass:"u-button _sideBtns _moveAfter",attrs:{type:"button",disabled:t.module_position==="last"||t.module_position==="alone"},on:{click:function(s){return t.$emit("moveDown")}}},[e("svg",{staticStyle:{transform:"rotate(90deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 168 168"}},[e("path",{staticStyle:{fill:"currentColor"},attrs:{d:"M78.31,117l14.07-15.31a65.3,65.3,0,0,1,6.15-6.15,47.52,47.52,0,0,1,6.29-4.37H34.17V75.29h70.65a39.1,39.1,0,0,1-6.08-4.37q-2.8-2.46-6.36-6.15L78.31,49.46l13-11.07L131.6,83.21,91.29,128Z"}})])]):t._e()]),e("div",{staticClass:"_options"},[e("div",{staticClass:"_advanced_menu"},[e("div",[e("select",{attrs:{disabled:t.available_module_types.length<=1},domProps:{value:t.publimodule.module_type},on:{change:t.changeModuleType}},t._l(t.available_module_types,function(s){return e("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(t.$t(`module.label.${s}`))+" ")])}),0)]),e("div",{staticClass:"_buttonRow"},t._l([100,66.6,50,33.3],function(s){return e("button",{key:s,staticClass:"u-button u-button_small u-button_transparent _sizes",class:{"is--active":!t.publimodule.size&&s===100||t.publimodule.size===s},attrs:{type:"button"},on:{click:function(l){return t.updateMeta({size:s})}}},[t._v(" "+t._s(s)+"% ")])}),0),t.publimodule.size&&t.publimodule.size!==100?e("div",{staticClass:"_buttonRow"},t._l(["left","center","right"],function(s){return e("button",{key:s,staticClass:"u-button u-button_small u-button_transparent",class:{"is--active":!t.publimodule.align&&s==="left"||t.publimodule.align===s},attrs:{type:"button"},on:{click:function(l){return t.updateMeta({align:s})}}},[s==="left"?e("b-icon",{attrs:{icon:"align-start"}}):t._e(),s==="center"?e("b-icon",{attrs:{icon:"align-center"}}):t._e(),s==="right"?e("b-icon",{attrs:{icon:"align-end"}}):t._e()],1)}),0):t._e()]),t.is_associated_to_map?e("div",{staticClass:"_carto"},[t._e(),e("div",{},[e("button",{staticClass:"u-button u-button_red u-button_small",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),t.repickLocation.apply(null,arguments)}}},[t.has_coordinates?[e("b-icon",{attrs:{icon:"pin-map-fill"}}),t._v(" "+t._s(t.$t("change_location"))+" ")]:[e("b-icon",{attrs:{icon:"pin-map"}}),t._v(" "+t._s(t.$t("place_on_map"))+" ")]],2)]),t.has_coordinates?e("div",{},[e("SelectField2",{attrs:{value:t.publimodule.zoom_level,options:t.zoom_level_options,can_edit:t.can_edit,hide_validation:!0,size:"small"},on:{change:function(s){return t.updateMeta({zoom_level:s})}}})],1):t._e(),t.has_coordinates?e("div",{},[e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.eraseCoords}},[e("b-icon",{attrs:{icon:"x-circle"}}),t._v(" "+t._s(t.$t("erase"))+" ")],1)]):t._e()]):t._e(),e("DropDown",{attrs:{right:!0}},[e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.duplicateModule}},[e("b-icon",{attrs:{icon:"file-plus"}}),t._v(" "+t._s(t.$t("duplicate"))+" ")],1),e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(s){return t.$emit("changeSectionForModule")}}},[e("b-icon",{attrs:{icon:"arrow-left-right"}}),t._v(" "+t._s(t.$t("change_section"))+" ")],1),t.can_edit?e("RemoveMenu",{attrs:{show_button_text:!0},on:{remove:t.removeModule}}):t._e()],1)],1),e("div",{staticClass:"_saveBtn"},[e("EditBtn",{attrs:{btn_type:"check",label_position:"left"},on:{click:t.disableEdit}})],1),t.is_repicking_location?e("div",{staticClass:"_repickNotice"},[e("div",{staticClass:"_repickNotice--content"},[e("div",[t._v(" "+t._s(t.$t("click_on_map_to_repick_location"))+" ")]),e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(s){t.is_repicking_location=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")])])]):t._e()])]):t._e()]),e("div",{staticClass:"_content",style:t.media_styles},[e("div",{ref:"sentinel"}),t.is_associated_to_map&&t.has_coordinates?e("button",{ref:"pinButton",staticClass:"u-button _pinButton",class:{"is--active":t.is_active_on_map},style:`--pin-color: ${t.pin_options?t.pin_options.color:""}`,attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),t.pinButtonClick.apply(null,arguments)}}},[e("img",{attrs:{src:t.pin_options.pin_preview_src}})]):t._e(),t.can_edit&&(t.page_template!=="page_by_page"||t.publimodule.module_type==="text")?e("div",{staticClass:"_floatingEditBtn"},[e("span",{on:{click:function(s){return s.stopPropagation(),t.enableEdit.apply(null,arguments)},touchstart:function(s){return s.stopPropagation(),t.enableEdit.apply(null,arguments)}}},[t.edit_mode?t._e():e("EditBtn",{attrs:{label_position:"left"}})],1)]):t._e(),["mosaic","carousel","files"].includes(t.publimodule.module_type)?e("MediasModule",{attrs:{publimodule:t.publimodule,edit_mode:t.edit_mode,can_edit:t.can_edit,context:t.context,page_template:t.page_template,number_of_max_medias:t.number_of_max_medias,show_fs_button:t.show_fs_button},on:{updateMeta:t.updateMeta,remove:t.removeModule}}):t.publimodule.module_type==="text"&&t.first_media?e("CollaborativeEditor2",{ref:"textBloc",attrs:{path:t.first_media.$path,content:t.first_media.$content,scrollingContainer:t.$el,line_selected:!1,can_edit:t.can_edit},on:{lineClicked:function(s){return t.$emit("lineClicked",s)},contentIsEdited:function(s){return t.$emit("contentIsEdited",s)},contentIsNotEdited:function(s){return t.$emit("contentIsNotEdited",s)}}}):t.module_type==="shape"?[e("svg",{attrs:{viewBox:"0 0 100 100",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg"}},[t.publimodule.module_type==="ellipsis"?e("circle",{attrs:{cx:"50",cy:"50",r:50-t.publimodule.outline_width*t.magnification/8,"vector-effect":"non-scaling-stroke"}}):t.publimodule.module_type==="rectangle"?e("rect",{attrs:{x:t.publimodule.outline_width*t.magnification/4,y:t.publimodule.outline_width*t.magnification/4,width:100-t.publimodule.outline_width*t.magnification/2,height:100-t.publimodule.outline_width*t.magnification/2,"vector-effect":"non-scaling-stroke",rx:t.border_radius.x,ry:t.border_radius.y}}):t.publimodule.module_type==="line"?e("g",[e("rect",{attrs:{width:"100",height:"100","vector-effect":"non-scaling-stroke",stroke:"none",rx:t.border_radius.x,ry:t.border_radius.y}}),e("line",{attrs:{x1:t.publimodule.outline_width*t.magnification/4||0,y1:"50",x2:100-(t.publimodule.outline_width*t.magnification/4||0),y2:"50","vector-effect":"non-scaling-stroke"}})]):t.publimodule.module_type==="arrow"?e("g",[e("rect",{attrs:{width:"100",height:"100","vector-effect":"non-scaling-stroke",stroke:"none",rx:t.border_radius.x,ry:t.border_radius.y}}),e("line",{attrs:{x1:t.publimodule.outline_width*t.magnification/4||0,y1:"50",x2:100-(t.publimodule.outline_width*t.magnification/4||0),y2:"50","vector-effect":"non-scaling-stroke"}}),e("g",{attrs:{transform:`
              translate(${100-(t.publimodule.outline_width*t.magnification/4||0)}, 50)`,preserveAspectRatio:""}},[e("line",{attrs:{x1:"0",y1:"0",x2:"-10",y2:"-10","vector-effect":"non-scaling-stroke"}}),e("line",{attrs:{x1:"0",y1:"0",x2:"-10",y2:"10","vector-effect":"non-scaling-stroke"}})])]):t._e()])]:e("small",[t._v(t._s(t.$t("nothing_to_show")))]),t.show_caption?e("div",{staticClass:"_captionField"},[e("CollaborativeEditor2",{staticClass:"_caption",attrs:{label:t.edit_mode&&!t.publimodule.caption&&t.page_template!=="page_by_page"?t.$t("add_caption"):void 0,field_to_edit:"caption",content:t.publimodule.caption,path:t.publimodule.$path,custom_formats:["bold","italic","link"],is_collaborative:!1,can_edit:t.page_template!=="page_by_page"?t.can_edit:!1}}),t.edit_mode&&t.first_media&&t.first_media.caption&&!t.publimodule.caption&&t.page_template!=="page_by_page"?e("div",{},[e("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("copy_first_media_caption"))+" ")]),e("button",{attrs:{type:"button"},on:{click:function(s){return t.updateMeta({caption:t.first_media.caption})}}},[t._v(" "+t._s(t.first_media.caption)+" ")])]):t._e()],1):t._e()],2),t.edit_mode&&t.page_template!=="page_by_page"?e("div",{staticClass:"_selectorIndicator"}):t._e()],1)},Ci=[],Ei=D(xi,Si,Ci,!1,null,"fb42f457");const ki=Ei.exports,$i={props:{publication:Object,section:Object,can_edit:Boolean},components:{ModuleCreator:ue,PublicationModule:ki},data(){return{medias:[],module_being_edited:void 0}},created(){this.$eventHub.$on("module.none_edited",this.unselectModuleEdited)},async mounted(){},beforeDestroy(){this.$eventHub.$off("module.none_edited",this.unselectModuleEdited)},watch:{},computed:{section_modules_list(){return this.getModulesForSection({publication:this.publication,section:this.section}).map(({_module:h})=>h)},story_styles(){return this.makeStoryStyles({publication:this.publication})},title_is_visible(){return this.section.section_title_is_visible!==!1}},methods:{async addModules({meta_filenames:h}){await this.insertModuleMetaFilenamesToList2({publication:this.publication,section:this.section,meta_filenames:h});const t=h.at(-1);this.toggleNewModuleEdit({meta_filename:t})},async insertModules({meta_filenames:h,index:t}){await this.insertModuleMetaFilenamesToList2({publication:this.publication,section:this.section,index:t,meta_filenames:h});const e=h.at(-1);this.toggleNewModuleEdit({meta_filename:e})},toggleNewModuleEdit({meta_filename:h}){const t=this.publication.$path+"/"+h;setTimeout(()=>{this.$eventHub.$emit(`module.enable_edit.${h}`),this.$eventHub.$emit("publication.map.openPin",t)},150)},async toggleSectionVisibility(){await this.$api.updateMeta({path:this.section.$path,new_meta:{section_title_is_visible:!this.title_is_visible}})},async duplicateSection(){await this.duplicateSection2({publication:this.publication,og_modules:this.section_modules_list,section:this.section}),this.$emit("nextSection")},async removeSection(){this.$emit("prevSection"),this.removeSection2({publication:this.publication,group:"sections_list",section:this.section})},async moveModuleTo({path:h,new_position:t}){await this.moveModuleTo2({publication:this.publication,section:this.section,meta_filename:this.getFilename(h),new_position:t})},async duplicatePublicationMedia({source_module_path:h,copy_meta_filename:t}){const e=this.getFilename(h);await this.duplicatePublicationMedia2({publication:this.publication,section:this.section,source_meta_filename:e,copy_meta_filename:t})},unselectModuleEdited(){this.module_being_edited=void 0},async removeModule(h){await this.removeModule2({publication:this.publication,section:this.section,path:h})}}};var Di=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_singleSection"},[e("div",{staticClass:"_storyContainer"},[t.section?e("div",{staticClass:"_storyContent",style:t.story_styles},[t.can_edit||t.section.section_title||t.section.section_description?e("div",{staticClass:"_topbar"},[e("div",{staticClass:"_text"},[t.can_edit||t.title_is_visible?e("div",{staticClass:"_sectionTitle",class:{"is--hidden":!t.title_is_visible}},[e("TitleField",{attrs:{field_name:"section_title",content:t.section.section_title||t.$t("untitled"),path:t.section.$path,required:!0,maxlength:60,tag:"h1",can_edit:t.can_edit}}),t.can_edit?e("EditBtn",{attrs:{btn_type:t.title_is_visible?"show":"hide",label:t.$t("show_title")},on:{click:t.toggleSectionVisibility}}):t._e()],1):t._e(),t.section.section_description?e("div",[e("div",{domProps:{textContent:t._s(t.section.section_description)}})]):t._e()]),t.can_edit?e("div",{staticClass:"_buttons"},[t.can_edit?e("DropDown",{attrs:{show_label:!1,right:!0}},[e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.duplicateSection}},[e("b-icon",{attrs:{icon:"file-plus"}}),t._v(" "+t._s(t.$t("duplicate"))+" ")],1),e("RemoveMenu",{attrs:{modal_title:t.$t("remove_section")},on:{remove:t.removeSection}})],1):t._e()],1):t._e()]):t._e(),e("transition-group",{staticClass:"_storyModules",attrs:{tag:"div",name:"StoryModules",appear:"",duration:700}},[t._l(t.section_modules_list,function(s,l){return[e("div",{key:"mc_"+l,staticClass:"_spacer"},[t.can_edit?e("ModuleCreator",{attrs:{publication_path:t.publication.$path,types_available:["import","write","embed","table"]},on:{addModules:({meta_filenames:i})=>t.insertModules({meta_filenames:i,index:l})}}):t._e()],1),e("PublicationModule",{key:s.$path,staticClass:"_mediaPublication",attrs:{publimodule:s,module_being_edited:t.module_being_edited,module_position:t.section_modules_list.length===1?"alone":l===0?"first":l===t.section_modules_list.length-1?"last":"inbetween",can_edit:t.can_edit},on:{"update:module_being_edited":function(i){t.module_being_edited=i},moveUp:function(i){return t.moveModuleTo({path:s.$path,new_position:l-1})},moveDown:function(i){return t.moveModuleTo({path:s.$path,new_position:l+1})},duplicate:function(i){return t.duplicatePublicationMedia({source_module_path:s.$path,copy_meta_filename:i})},changeSectionForModule:function(i){return t.$emit("changeSectionForModule",s.$path)},remove:function(i){return t.removeModule(s.$path)}}})]})],2),t.can_edit?e("ModuleCreator",{staticClass:"_lastModule",attrs:{start_collapsed:!1,publication_path:t.publication.$path,types_available:["import","write","embed","table"]},on:{addModules:t.addModules}}):t._e()],1):t._e()])])},Mi=[],wi=D($i,Di,Mi,!1,null,"e6746e7f");const Pi=wi.exports,Li={props:{module_path:String,sections:Array},components:{},data(){return{section_path_to_move_to:void 0}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{module_meta_filename(){return this.getFilename(this.module_path)},all_sections_in_select(){return this.sections.map(h=>({key:h.$path,text:h.section_title}))},current_section_path(){var h;return(h=this.sections.find(t=>t.modules_list.includes(this.module_meta_filename)))==null?void 0:h.$path}},methods:{setNewSection(h){this.section_path_to_move_to=h},async submit(){await this.appendModuleToSection(),await this.removeModuleFromSection()},async appendModuleToSection(){var e;let t=((e=this.sections.find(s=>s.$path===this.section_path_to_move_to).modules_list)==null?void 0:e.slice())||[];t.push(this.module_meta_filename),await this.$api.updateMeta({path:this.section_path_to_move_to,new_meta:{modules_list:t}})},async removeModuleFromSection(){var e;let t=((e=this.sections.find(s=>s.$path===this.current_section_path).modules_list)==null?void 0:e.slice())||[];t=t.filter(s=>s!==this.module_meta_filename),await this.$api.updateMeta({path:this.current_section_path,new_meta:{modules_list:t}}),this.$emit("close")}}};var Ai=function(){var t=this,e=t._self._c;return e("BaseModal2",{attrs:{title:t.$t("change_section")},on:{close:function(s){return t.$emit("close")}}},[e("div",{},[e("SelectField2",{attrs:{value:t.current_section_path,options:t.all_sections_in_select,can_edit:!0,hide_validation:!0},on:{change:t.setNewSection}})],1),e("template",{slot:"footer"},[e("button",{staticClass:"u-button",attrs:{type:"button"},on:{click:function(s){return t.$emit("close")}}},[e("b-icon",{attrs:{icon:"x-circle"}}),t._v(" "+t._s(t.$t("cancel"))+" ")],1),e("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button",autofocus:"",disabled:!t.section_path_to_move_to||t.section_path_to_move_to===t.current_section_path},on:{click:t.submit}},[t._v(" "+t._s(t.$t("move"))+" ")])])],2)},Ii=[],zi=D(Li,Ai,Ii,!1,null,"5c2e5079");const Bi=zi.exports,Fi={props:{publication:Object,sections:Array,opened_section_meta_filename:String,can_edit:Boolean},components:{SingleSection:Pi,ChangeSectionForModule:Bi},data(){return{change_section_for_module:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{opened_section(){return this.sections.find(h=>this.getFilename(h.$path)===this.opened_section_meta_filename)},opened_section_index(){return this.sections.findIndex(h=>{var t;return h.$path===((t=this.opened_section)==null?void 0:t.$path)})},next_section(){return this.opened_section_index<this.sections.length-1?this.sections[this.opened_section_index+1]:!1},prev_section(){return this.opened_section_index>0?this.sections[this.opened_section_index-1]:!1}},methods:{nextSection(){var h;this.scrollToTop(),(h=this.next_section)!=null&&h.$path&&this.$emit("toggleSection",this.getFilename(this.next_section.$path))},prevSection(){var h;this.scrollToTop(),(h=this.prev_section)!=null&&h.$path&&this.$emit("toggleSection",this.getFilename(this.prev_section.$path))},async scrollToTop(){const h=function(s){const l=s.scrollHeight>s.clientHeight,r=window.getComputedStyle(s).overflowY.indexOf("hidden")!==-1;return l&&!r},t=function(s){return!s||s===document.body?document.body:h(s)?s:t(s.parentNode)};t(this.$el).scrollTo({top:0,left:0,behavior:"smooth"})}}};var Ti=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_openedSection"},[e("SingleSection",{ref:"section",attrs:{publication:t.publication,section:t.opened_section,can_edit:t.can_edit},on:{prevSection:t.prevSection,nextSection:t.nextSection,changeSectionForModule:function(s){t.change_section_for_module=s}}}),t.change_section_for_module?e("ChangeSectionForModule",{attrs:{module_path:t.change_section_for_module,sections:t.sections},on:{close:function(s){t.change_section_for_module=!1}}}):t._e(),e("div",{staticClass:"_navBtns"},[e("div",{staticClass:"_navBtns--content"},[t.prev_section?e("button",{staticClass:"u-linkList",attrs:{type:"button"},on:{click:t.prevSection}},[e("b-icon",{attrs:{icon:"arrow-left-square"}}),e("span",[t._v(" "+t._s(t.prev_section.section_title)+" ")])],1):t._e(),t.next_section?e("button",{staticClass:"u-linkList",attrs:{type:"button"},on:{click:t.nextSection}},[e("span",[t._v(" "+t._s(t.next_section.section_title)+" ")]),e("b-icon",{attrs:{icon:"arrow-right-square"}})],1):t._e()])])],1)},Wi=[],Oi=D(Fi,Ti,Wi,!1,null,"37f01819");const Ri=Oi.exports,qi={props:{publication:Object,opened_section_meta_filename:String,can_edit:Boolean},components:{SectionsSummary:ge,OpenedSection:Ri},provide(){return{$getMetaFilenamesAlreadyPresent:()=>this.meta_filenames_already_present}},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{sections(){return this.getSectionsWithProps({publication:this.publication,group:"sections_list"})},meta_filenames_already_present(){const{current:h,other:t}=this.getMediasAlreadyPresentInPublication({publication:this.publication,sections:this.sections,opened_section_meta_filename:this.opened_section_meta_filename});return[{label:this.$t("in_this_section"),medias:h,color:"var(--c-orange)"},{label:this.$t("in_another_section"),medias:t,color:"var(--c-bleuvert)"}]}},methods:{openFirstSection(){const h=this.getFilename(this.sections[0].$path);this.$emit("toggleSection",h)},unselectModule(){this.$eventHub.$emit("module.none_edited")}}};var Ui=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_sectionsList"},[e("SectionsSummary",{directives:[{name:"show",rawName:"v-show",value:t.can_edit||t.sections.length>1,expression:"can_edit || sections.length > 1"}],attrs:{publication:t.publication,sections:t.sections,opened_section_meta_filename:t.opened_section_meta_filename,can_edit:t.can_edit},on:{toggleSection:function(s){return t.$emit("toggleSection",s)},openFirstSection:t.openFirstSection}}),e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.opened_section_meta_filename?e("OpenedSection",{key:t.opened_section_meta_filename,attrs:{publication:t.publication,sections:t.sections,opened_section_meta_filename:t.opened_section_meta_filename,can_edit:t.can_edit},on:{toggleSection:function(s){return t.$emit("toggleSection",s)}}}):t._e()],1)],1)},Ni=[],Hi=D(qi,Ui,Ni,!1,null,"f29a92d4");const Vi=Hi.exports;export{Vi as S,Pi as a};
