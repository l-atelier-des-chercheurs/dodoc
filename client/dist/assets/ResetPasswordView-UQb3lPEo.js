import{n as r}from"../build.js";const i={name:"ResetPasswordView",data(){return{submitError:"",submitSuccess:"",is_submitting:!1,author:null,is_loading:!0,author_path:window.decodeURIComponent(this.$route.query.path),author:!1,error:"",reset_password:"",allow_save:!1}},async created(){try{this.author=await this.$api.getFolder({path:this.author_path}).catch(e=>{this.error=e.response})}catch{}finally{this.is_loading=!1}},methods:{async handleSubmit(){var e,s;this.submitError="",this.is_submitting=!0;try{await this.$api.resetPassword({path:this.author_path,new_password:this.reset_password,token:this.$route.query.token}),this.submitSuccess=this.$t("password_reset_successful")}catch(t){this.submitError=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||this.$t("failed_to_reset_password")}finally{this.is_submitting=!1}}}};var o=function(){var s=this,t=s._self._c;return t("div",{staticClass:"_resetPassword"},[t("div",{staticClass:"_resetPassword--form"},[t("h1",{staticClass:"u-spacingBottom"},[s._v(s._s(s.$t("reset_password")))]),s.is_loading?t("div",{staticClass:"loading-message"},[s._v(s._s(s.$t("loading")))]):s.error?t("div",{staticClass:"error-message"},[s._v(" "+s._s(s.error)+" ")]):s.submitSuccess?t("div",{staticClass:"success-message"},[s._v(" "+s._s(s.submitSuccess)+" ")]):t("form",{on:{submit:function(a){return a.preventDefault(),s.handleSubmit.apply(null,arguments)}}},[s.author?t("div",{staticClass:"u-spacingBottom"},[t("p",{staticClass:"u-instructions"},[s._v(" "+s._s(s.$t("set_new_password_for_account"))+" "),t("strong",[s._v(s._s(s.author.name))])])]):s._e(),t("TextInput",{attrs:{content:s.reset_password,label_str:"password",minlength:3,maxlength:20,required:!0,input_type:"password",autocomplete:"new-password"},on:{"update:content":function(a){s.reset_password=a},toggleValidity:a=>s.allow_save=a}}),s.submitError?t("div",{staticClass:"error-message"},[s._v(" "+s._s(s.submitError)+" ")]):s._e(),t("div",{staticClass:"_bottomBtns"},[t("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"submit",disabled:!s.allow_save||s.is_submitting}},[s._v(" "+s._s(s.is_submitting?s.$t("resetting_password"):s.$t("reset_password"))+" ")])])],1)])])},n=[],_=r(i,o,n,!1,null,"f4cc9750");const l=_.exports;export{l as default};
