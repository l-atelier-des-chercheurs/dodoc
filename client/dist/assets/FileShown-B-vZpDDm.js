import{n as o}from"../build.js";const s={props:{file:Object,context:String,position:String,can_edit:Boolean},components:{},data(){return{show_infos:!0,is_dragged:!1,edit_mode:!1,is_regenerating:!1}},i18n:{messages:{fr:{},en:{}}},created(){localStorage.getItem("show_infos")?this.show_infos=localStorage.getItem("show_infos")!=="false":this.show_infos=this.can_edit||this.file.caption||this.file.$credits},mounted(){this.$eventHub.$on("fileshown.showInfos",this.showInfos),this.$eventHub.$on("fileshown.hideInfos",this.hideInfos)},beforeDestroy(){this.$eventHub.$off("fileshown.showInfos",this.showInfos),this.$eventHub.$off("fileshown.hideInfos",this.hideInfos)},watch:{show_infos(){localStorage.setItem("show_infos",this.show_infos)}},computed:{optimization_possible(){return this.fileCanBeOptimized({path:this.file.$media_filename})},optimization_strongly_recommended(){return this.fileShouldBeOptimized({path:this.file.$media_filename})}},methods:{async regenerateThumbs(){this.is_regenerating=!0,await this.$api.regenerateThumbs({path:this.file.$path}),this.is_regenerating=!1},showInfos(){this.show_infos=!0},hideInfos(){this.show_infos=!1}}};var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_fileShown"},[e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.file?e("div",{key:t.file.$path,staticClass:"_single",attrs:{"data-type":t.file.$type}},[t.file.$type==="text"?e("div",{staticClass:"_textEditor"},[e("CollaborativeEditor2",{attrs:{path:t.file.$path,content:t.file.$content,custom_formats:["bold","italic","underline","link"],can_edit:t.can_edit,edit_on_mounted:t.context==="chutier"}})],1):e("MediaContent",{attrs:{file:t.file,context:"full",resolution:1600,show_fs_button:!0,zoom_on_click:!1}}),t.position?e("div",{staticClass:"_navArrow"},[e("button",{staticClass:"u-button u-button_icon",attrs:{type:"button",disabled:t.position==="alone"||t.position==="first"},on:{click:function(i){return t.$eventHub.$emit("carousel.prev")}}},[e("b-icon",{attrs:{icon:"arrow-left-short"}})],1),e("button",{staticClass:"u-button u-button_icon",attrs:{type:"button",disabled:t.position==="alone"||t.position==="last"},on:{click:function(i){return t.$eventHub.$emit("carousel.next")}}},[e("b-icon",{attrs:{icon:"arrow-right-short"}})],1)]):t._e(),t.file.$thumbs==="no_preview"?e("button",{staticClass:"u-buttonLink _regenerateBtn",attrs:{type:"button"},on:{click:t.regenerateThumbs}},[t.is_regenerating?e("LoaderSpinner"):[e("b-icon",{attrs:{icon:"arrow-clockwise"}}),t._v(" "+t._s(t.$t("regenerate_thumbs"))+" ")]],2):t._e(),e("div",{staticClass:"_dragEditBtn"},[e("DragFile",{attrs:{file:t.file,is_dragged:t.is_dragged},on:{"update:is_dragged":function(i){t.is_dragged=i}}})],1)],1):t._e()]),e("div",{staticClass:"_unfoldBtn"},[e("button",{staticClass:"u-button u-button_icon u-button_transparent",attrs:{type:"button"},on:{click:function(i){t.show_infos=!t.show_infos}}},[t.show_infos?e("b-icon",{attrs:{icon:"chevron-down","aria-label":t.$t("close")}}):e("b-icon",{attrs:{icon:"chevron-up","aria-label":t.$t("open")}}),t.file.caption?e("b-icon",{attrs:{icon:"text-left","aria-label":t.$t("caption")}}):t._e(),t.file.$credits?e("b-icon",{attrs:{icon:"info-circle","aria-label":t.$t("credit/reference")}}):t._e()],1)]),e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[e("div",{key:t.file.$path,staticClass:"_infos",attrs:{"data-hide":!t.show_infos}},[e("div",{staticClass:"_infos--content"},[t.optimization_strongly_recommended?e("div",{staticClass:"u-spacingBottom _optimizeNotice"},[e("div",{},[e("OptimizeMedia",{attrs:{media:t.file},on:{close:function(i){return t.$emit("close")}}})],1)]):t._e(),t.file.$type==="url"?e("div",{staticClass:"u-spacingBottom"},[e("DLabel",{staticClass:"_label",attrs:{str:t.$t("link")}}),e("div",[e("a",{attrs:{href:t.file.$content,target:"_blank"}},[t._v(" "+t._s(t.file.$content)+" ")])])],1):t._e(),e("div",{staticClass:"u-spacingBottom"},[e("CollaborativeEditor2",{attrs:{label:t.$t("caption"),field_to_edit:"caption",content:t.file.caption,path:t.file.$path,custom_formats:["bold","italic","link"],is_collaborative:!1,maxlength:1280,can_edit:t.can_edit}})],1),e("div",{},[e("CollaborativeEditor2",{attrs:{label:t.$t("credit/reference"),field_to_edit:"$credits",content:t.file.$credits,path:t.file.$path,custom_formats:["bold","italic","link"],is_collaborative:!1,maxlength:1280,can_edit:t.can_edit}})],1),t.file.$location?[e("div",{staticClass:"u-spacingBottom"}),e("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("latitude"))+" : "+t._s(t.file.$location.latitude)+" // "+t._s(t.$t("longitude"))+" : "+t._s(t.file.$location.longitude)+" ")])]:t._e()],2)])])],1)},a=[],l=o(s,n,a,!1,null,"bd5846ba");const f=l.exports;export{f as F};
