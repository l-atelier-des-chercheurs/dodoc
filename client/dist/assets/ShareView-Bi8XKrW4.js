import{n}from"../build.js";const p={props:{},components:{},data(){return{path:"folders",folders:void 0,shared_folder_path:"",new_corpus_name:"",show_chutier:!0,is_creating_corpus:!1}},i18n:{messages:{fr:{access_corpus:"Accéder à un corpus",corpus:"Corpus",select_corpus:"– sélectionner un corpus –",new_corpus:"nouveau corpus",new_corpus_name:"Nom du corpus"},en:{access_corpus:"Access a corpus",corpus:"Corpus",select_corpus:"– select a corpus –",new_corpus:"new corpus",new_corpus_name:"Corpus name"}}},async created(){const s=this.loadPanesWidthFromStorage();s?this.panes_width=s:this.$root.is_mobile_view?(this.panes_width.archive=100,this.panes_width.collection=0):(this.panes_width.archive=100,this.panes_width.collection=0),await this.loadFolder()},async mounted(){},beforeDestroy(){},watch:{connected_as(){},panes_width:{handler(){Object.entries(this.panes_width).map(([s,e])=>this.top_panes_width[s]=e),this.savePanesWidthToStorage()},deep:!0}},computed:{min_toppane_width(){return 0}},methods:{async loadFolder(){this.folders=await this.$api.getFolders({path:this.path}).catch(s=>{this.fetch_spaces_error=s.response}),this.$api.join({room:this.path})},openFolder(){const s=this.shared_folder_path.split("/").pop();this.$router.push(`/share/${s}`)},async createCorpus(){this.is_creating_corpus=!0;const s=await this.$api.createFolder({path:this.path,additional_meta:{title:this.new_corpus_name,$admins:"everyone"}});setTimeout(()=>{this.shared_folder_path="folders/"+s,this.is_creating_corpus=!1},1e3)},resizeTopPane(s){s.map((e,t)=>{const a=Number(e.size.toFixed(1));t===0&&(this.top_panes_width.archive=a),t===1&&(this.top_panes_width.collection=a)})},resizedPane(s){s.map((e,t)=>{const a=Number(e.size.toFixed(1));t===0&&(this.panes_width.archive=a),t===1&&(this.panes_width.collection=a)})},setTopbarWidth(s){return`
        --topPane-width: ${this.top_panes_width[s]}%;
      `},togglePane(s){this.panes_width[s]>0?Object.entries(this.panes_width).map(([e,t])=>e===s?this.panes_width[e]=0:this.panes_width[e]=100):Object.entries(this.panes_width).map(([e,t])=>this.panes_width[e]=50)},savePanesWidthToStorage(){localStorage.setItem("panes_width",JSON.stringify(this.panes_width))},loadPanesWidthFromStorage(){try{const s=localStorage.getItem("panes_width");if(s){const e=JSON.parse(s);return e.format&&delete e.format,e.chutier&&delete e.chutier,e}}catch{}return!1}}};var c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"_contributeView"},[e.folders?[t("div",{staticClass:"_selectFolder"},[t("div",[t("label",{attrs:{for:"shared_folder_path"}},[e._v(" "+e._s(e.$t("access_corpus"))+" ")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.shared_folder_path,expression:"shared_folder_path"}],on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,function(r){return r.selected}).map(function(r){var i="_value"in r?r._value:r.value;return i});e.shared_folder_path=a.target.multiple?o:o[0]}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("select_corpus")))]),e._l(e.folders,function(a){return t("option",{key:a.$path,domProps:{value:a.$path}},[e._v(" "+e._s(a.title||e.$t("untitled"))+" ")])}),t("option",{attrs:{value:"new"}},[e._v("+ "+e._s(e.$t("new_corpus")))])],2),t("div",{staticClass:"u-spacingBottom"}),e.shared_folder_path==="new"?t("div",{staticClass:"u-spacingBottom"},[t("TextInput",{attrs:{content:e.new_corpus_name,placeholder:e.$t("new_corpus_name"),required:!0,input_type:"text",maxlength:30},on:{"update:content":function(a){e.new_corpus_name=a}}})],1):e._e(),t("div",{staticClass:"_btnRow"},[t("div"),e.shared_folder_path!=="new"?t("button",{staticClass:"u-button",attrs:{type:"button",disabled:!e.shared_folder_path},on:{click:e.openFolder}},[e._v(" "+e._s(e.$t("open"))+" ")]):e.shared_folder_path==="new"?t("button",{staticClass:"u-button",attrs:{type:"button",disabled:!e.new_corpus_name||e.is_creating_corpus},on:{click:e.createCorpus}},[e._v(" "+e._s(e.$t("create"))+" ")]):e._e()]),e.is_creating_corpus?t("div",[t("LoaderSpinner")],1):e._e()])])]:t("LoaderSpinner")],2)},_=[],h=n(p,c,_,!1,null,"72b5ee45");const l=h.exports;export{l as default};
