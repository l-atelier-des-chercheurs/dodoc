import{n as o,A as i,_ as n}from"../build.js";const l={props:{},components:{AuthorCard:i,DisplayOnMap:()=>n(()=>import("./DisplayOnMap-BosKvJTK.js"),[])},data(){return{path:"authors",authors:[],search_author_name:"",filter_by_group:"",view_mode:"list"}},created(){},async mounted(){this.$api.updateSelfPath(this.path),this.authors=await this.$api.getFolders({path:this.path}),this.$api.join({room:this.path})},beforeDestroy(){},watch:{},computed:{pins(){const s="#142257";return this.filtered_authors.reduce((t,a)=>{if(a.$location){const{latitude:e,longitude:r}=a.$location;e&&r&&t.push({latitude:e,longitude:r,path:a.$path,label:a.name,color:s,pin_preview:"text"})}return t},[])},sorted_authors(){return this.authors.slice().sort((s,t)=>s.name.localeCompare(t.name))},filtered_authors(){return this.sorted_authors.filter(s=>{var t;return!(this.search_author_name&&!this.twoStringsSearch(s.name,this.search_author_name)||this.filter_by_group&&!((t=s.group)!=null&&t.includes(this.filter_by_group))||this.view_mode==="map"&&!s.$location)})},all_groups(){return this.sorted_authors.reduce((s,t)=>{var a;return(a=t.group)==null||a.map(e=>{s.some(r=>r===e)||e&&s.push(e)}),s},[]).sort((s,t)=>s.localeCompare(t))}},methods:{toggleGroupFilter(s){this.filter_by_group=s===this.filter_by_group?"":s},pinClicked(s){const t=this.createURLFromPath(s);this.$router.push(t)}}};var _=function(){var t=this,a=t._self._c;return a("div",{staticClass:"_authorsView"},[a("h1",{staticClass:"_title",domProps:{textContent:t._s(t.$t("list_of_accounts"))}}),a("div",{staticClass:"u-spacingBottom"},[t._v(" "+t._s(t.$t("accounts_displayed",{count:t.filtered_authors.length,total:t.authors.length}))+" ")]),a("div",{staticClass:"_topRow"},[a("div",{staticClass:"_searchField"},[a("SearchInput",{attrs:{search_placeholder:t.$t("search_by_name"),name:"search_author"},model:{value:t.search_author_name,callback:function(e){t.search_author_name=e},expression:"search_author_name"}})],1),t.all_groups.length>0?a("div",[a("TagsList",{attrs:{tags:t.all_groups,tag_type:"accountgroup",tags_active:[t.filter_by_group]},on:{tagClick:function(e){return t.toggleGroupFilter(e)}}})],1):t._e(),a("div",{staticClass:"_mode"},[a("button",{staticClass:"u-button u-button_small u-button_transparent",class:{"is--active":t.view_mode==="list"},attrs:{type:"button"},on:{click:function(e){t.view_mode="list"}}},[a("svg",{staticClass:"bi-person-vcard mx-auto b-icon bi",attrs:{viewBox:"0 0 16 16",width:"1em",height:"1em",focusable:"false",role:"img","aria-label":"person vcard",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor","data-v-41be6633":""}},[a("g",{attrs:{"data-v-41be6633":""}},[a("path",{attrs:{d:"M5 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4m4-2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5M9 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 9 8m1 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5"}}),a("path",{attrs:{d:"M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM1 4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H8.96q.04-.245.04-.5C9 10.567 7.21 9 5 9c-2.086 0-3.8 1.398-3.984 3.181A1 1 0 0 1 1 12z"}})])])]),a("button",{staticClass:"u-button u-button_small u-button_transparent",class:{"is--active":t.view_mode==="map"},attrs:{type:"button"},on:{click:function(e){t.view_mode="map"}}},[a("b-icon",{attrs:{icon:"map-fill"}})],1)])]),t.$api.all_devices_connected.length>1?a("div",{staticClass:"_currentlyConnected"},[a("DetailsPane",{attrs:{header:t.$t("devices_connected"),icon:"people",has_items:t.$api.all_devices_connected.length}},t._l(t.$api.all_devices_connected,function(e){return a("div",{key:e.id,staticClass:"u-spacingBottom"},[a("div",[e.meta.token_path?a("AuthorTag",{attrs:{path:e.meta.token_path}}):a("span",[t._v(t._s(t.$t("not_logged_in")))])],1),a("div",[t._v(t._s(e.meta.user_agent))]),a("div",[t._v(t._s(e.meta.path))])])}),0)],1):t._e(),t.filtered_authors.length===0?a("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("no_accounts_to_show"))+" ")]):[t.view_mode==="list"?a("transition-group",{staticClass:"_allAuthors",attrs:{tag:"section",name:"listComplete",appear:""}},t._l(t.filtered_authors,function(e){return a("div",{key:e.$path},[a("AuthorCard",{attrs:{author:e}})],1)}),0):t._e(),t.view_mode==="map"?a("div",{staticClass:"_mapContainer"},[a("DisplayOnMap",{attrs:{pins:t.pins,map_baselayer_opacity:.5,map_baselayer_bw:!0,is_small:!1},on:{"update:opened_pin_path":function(e){return t.pinClicked(e)}}})],1):t._e()]],2)},u=[],c=o(l,_,u,!1,null,"2be36723");const p=c.exports;export{p as default};
