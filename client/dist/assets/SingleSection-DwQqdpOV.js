import{M as ae}from"./ModuleCreator-ByiY0c4x.js";import{n as M,H as le,d as he,e as ce,c as D,a as ue}from"../build.js";import{M as mt}from"./MediaPicker-B3kIh4l9.js";import{C as ee}from"./CaptionCreditsPage-1K0UUM48.js";import"./EmbedPicker-CzBF7hDs.js";import"./PickExistingMediastackModal-B_zNLcYm.js";import"./DestinationCorpusSelector-D9gmIUpK.js";const de={props:{medias_with_linked:Array,context:String,publimodule:Object,page_template:String,show_fs_button:Boolean,number_of_max_medias:[Boolean,Number],publication_path:String,edit_mode:Boolean,can_edit:Boolean},components:{MediaPicker:mt,CaptionCreditsPage:ee},data(){return{show_media_picker:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{is_single_text(){return this.medias_with_linked.length===1&&this.medias_with_linked[0]._linked_media.$type==="text"},is_multiple_medias(){return this.medias_with_linked.length>1},single_media_displayed_at_full_ratio(){var n,l,i,o,h;const c=(n=this.medias_with_linked[0]._linked_media.$infos)==null?void 0:n.ratio,t=(l=this.publimodule)!=null&&l.height&&((i=this.publimodule)!=null&&i.width)?((o=this.publimodule)==null?void 0:o.height)/((h=this.publimodule)==null?void 0:h.width):!1;if(!c||!t)return!1;const e=10;return Math.round(c*e)===Math.round(t*e)}},methods:{itemKey(c,t){return c!=null&&c.$path?c.$path+"_"+t:"no_media_"+t},itemStyle({media_with_linked:c}){let t={};return t["--object-fit"]=c.objectFit||"cover",t},mediaIsSquare(c){var t;return((t=c.$infos)==null?void 0:t.ratio)===1},removeMedia(c){this.$emit("removeMediaAtIndex",{index:c})},mediaDraggedSuccessfully(c){console.log("mediaDraggedSuccessfully"),this.$emit("removeMediaAtIndex",{index:c,remove_source:!1})},showAspectRatioOptions(c){return!(this.medias_with_linked.length===1&&this.page_template!=="page_by_page"||["stl","obj","text","table","other"].includes(c._linked_media.$type)||this.page_template!=="page_by_page"&&this.mediaIsSquare(c._linked_media)||this.single_media_displayed_at_full_ratio)}}};var pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_mediaGrid",class:{"is--multipleMedias":t.is_multiple_medias&&!t.$root.is_mobile_view,"is--singleText":t.is_single_text}},[t._l(t.medias_with_linked,function(n,l){return[e("div",{key:t.itemKey(n._linked_media,l),staticClass:"_mediaGrid--item",style:t.itemStyle({media_with_linked:n}),attrs:{"data-mediatype":n._linked_media.$type}},[n._linked_media?n._linked_media.$type==="text"?e("CollaborativeEditor2",{key:t.edit_mode,staticClass:"_mediaContent--collabEditor",attrs:{content:n._linked_media.$content,path:n._linked_media.$path,edit_on_mounted:t.edit_mode,can_edit:t.edit_mode}}):n._linked_media.$type==="table"?e("TableEditor",{staticClass:"_mediaContent--table",attrs:{content:n._linked_media.$content,path:n._linked_media.$path,can_edit:t.edit_mode}}):e("MediaContent",{attrs:{file:n._linked_media,resolution:t.context==="preview"?220:1600,context:t.context,show_fs_button:t.show_fs_button,can_edit:t.can_edit}}):e("div",{staticClass:"u-instructions _noSourceMedia",domProps:{textContent:t._s(t.$t("source_media_missing"))}}),e("CaptionCreditsPage",{attrs:{media:n._linked_media,publication_path:t.publication_path,can_edit:t.can_edit}}),e("div",{staticClass:"_btnRow"},[t.edit_mode&&t.page_template!=="page_by_page"?e("DragFile",{staticClass:"_df",attrs:{size:"small",file:n._linked_media},on:{dragfileSuccess:function(i){return t.mediaDraggedSuccessfully(l)}}}):t._e(),t.edit_mode?[t.showAspectRatioOptions(n)?[!n.objectFit||n.objectFit==="cover"?t._e():e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return i.stopPropagation(),t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"cover"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio"}})],1),n.objectFit!=="contain"?e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return i.stopPropagation(),t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"contain"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio-fill"}})],1):t._e()]:t._e(),t.is_multiple_medias?e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return t.removeMedia(l)}}},[e("b-icon",{attrs:{icon:"trash"}})],1):t._e()]:t._e()],2)],1)]}),t.can_edit&&(!t.number_of_max_medias||t.medias_with_linked.length<t.number_of_max_medias)?e("div",{staticClass:"_mediaPickerTile"},[t.edit_mode?e("EditBtn",{attrs:{btn_type:"add",is_unfolded:!1},on:{click:function(n){t.show_media_picker=!0}}}):t._e(),t.show_media_picker?e("MediaPicker",{attrs:{publication_path:t.publication_path},on:{pickMedias:function(n){return t.$emit("pickMedias",n)},close:function(n){t.show_media_picker=!1}}}):t._e(),!t.number_of_max_medias||t.medias_with_linked.length<t.number_of_max_medias?[e("DropZone",{staticClass:"_dzAfter",attrs:{rotate:-90},on:{mediaDropped:function(n){return t.$emit("pickMedias",[n])}}})]:t._e()],2):t._e()],2)},fe=[],ge=M(de,pe,fe,!1,null,"bcb770b1");const me=ge.exports,ve={props:{medias_with_linked:Array,publication_path:String,mode:String,edit_mode:Boolean},components:{SlickItem:ce,SlickList:he,MediaPicker:mt},directives:{handle:le},data(){return{show_media_picker:!1,show_media_preview_for:null}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{slicklist_key(){let c=this.edit_mode+"_";return this.medias_with_linked.forEach(t=>{c+=t._linked_media.$path+"_"}),c}},methods:{}};var _e=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_filesList"},[e("DLabel",{attrs:{str:t.mode==="source"?t.$t("source_files"):void 0}}),e("SlickList",{key:t.slicklist_key,staticClass:"_listOfFiles",attrs:{axis:"y",value:t.medias_with_linked,useDragHandle:!0},on:{input:function(n){return t.$emit("reorderMedias",n)}}},t._l(t.medias_with_linked,function({_linked_media:n},l){return e("SlickItem",{key:n.$path,staticClass:"_reorderedFile",attrs:{index:l}},[t.edit_mode?e("button",{staticClass:"u-button u-button_icon _dragHandle",attrs:{type:"button"}},[e("b-icon",{directives:[{name:"handle",rawName:"v-handle"}],attrs:{icon:"grip-vertical",label:t.$t("move")}})],1):t._e(),n&&n.$path?e(t.mode==="source"?"DownloadFile":"span",{tag:"component",staticClass:"_link",attrs:{file:n}},[["image","video","audio","pdf","stl","url"].includes(n.$type)?e("button",{staticClass:"_link--previewBtn",attrs:{type:"button"},on:{click:function(i){i.preventDefault(),t.show_media_preview_for=n}}},[e("MediaContent",{staticClass:"_preview",attrs:{context:"preview",file:n,resolution:220}})],1):e("div",{staticClass:"_preview _preview--none"},[e("b-icon",{attrs:{icon:"file-earmark-arrow-down"}})],1),t.show_media_preview_for===n?e("BaseModal2",{on:{close:function(i){t.show_media_preview_for=null}}},[e("MediaContent",{attrs:{file:t.show_media_preview_for,context:"preview",resolution:1600}}),e("div",{staticClass:"u-spacingBottom"}),e("DownloadFile",{attrs:{file:t.show_media_preview_for}})],1):t._e(),e("span",{staticClass:"_link--filename",domProps:{textContent:t._s(n.$media_filename)}}),n.$infos.size&&t.mode==="source"?[e("span",{staticClass:"u-instructions _link--filesize",domProps:{textContent:t._s(t.formatBytes(n.$infos.size))}})]:t._e(),t.mode==="source"?e("b-icon",{staticClass:"_download",attrs:{icon:"file-earmark-arrow-down-fill"}}):t._e()],2):t._e(),t.edit_mode?e("div",{staticClass:"_removeItem"},[e("EditBtn",{attrs:{btn_type:"remove",label_position:"left",is_unfolded:!1},on:{click:function(i){return t.$emit("removeMediaAtIndex",{index:l})}}})],1):t._e()],1)}),1),t.edit_mode?e("div",{staticClass:"_addBtnSection"},[e("button",{staticClass:"u-button u-button_transparent u-addBtn",attrs:{type:"button"},on:{click:function(n){t.show_media_picker=!0}}},[e("b-icon",{attrs:{icon:"plus-circle"}}),t._v(" "+t._s(t.$t("add_files"))+" ")],1),t.show_media_picker?e("MediaPicker",{attrs:{publication_path:t.publication_path},on:{pickMedias:function(n){return t.$emit("pickMedias",n)},close:function(n){t.show_media_picker=!1}}}):t._e(),e("DropZone",{on:{mediaDropped:function(n){return t.$emit("pickMedias",[n])}}})],1):t._e()],1)},ye=[],be=M(ve,_e,ye,!1,null,"f3a70d91");const ie=be.exports;var se={exports:{}},B={exports:{}},T={exports:{}},bt;function ne(){return bt||(bt=1,function(c){(function(t,e){c.exports?c.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:D,function(){function t(){}let e=t.prototype;return e.on=function(n,l){if(!n||!l)return this;let i=this._events=this._events||{},o=i[n]=i[n]||[];return o.includes(l)||o.push(l),this},e.once=function(n,l){if(!n||!l)return this;this.on(n,l);let i=this._onceEvents=this._onceEvents||{},o=i[n]=i[n]||{};return o[l]=!0,this},e.off=function(n,l){let i=this._events&&this._events[n];if(!i||!i.length)return this;let o=i.indexOf(l);return o!=-1&&i.splice(o,1),this},e.emitEvent=function(n,l){let i=this._events&&this._events[n];if(!i||!i.length)return this;i=i.slice(0),l=l||[];let o=this._onceEvents&&this._onceEvents[n];for(let h of i)o&&o[h]&&(this.off(n,h),delete o[h]),h.apply(this,l);return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t})}(T)),T.exports}var W={exports:{}};/*!
 * Infinite Scroll v2.0.4
 * measure size of elements
 * MIT license
 */var xt;function re(){return xt||(xt=1,function(c){(function(t,e){c.exports?c.exports=e():t.getSize=e()})(window,function(){function e(o){let h=parseFloat(o);return o.indexOf("%")==-1&&!isNaN(h)&&h}let n=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function l(){let o={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return n.forEach(h=>{o[h]=0}),o}function i(o){if(typeof o=="string"&&(o=document.querySelector(o)),!(o&&typeof o=="object"&&o.nodeType))return;let s=getComputedStyle(o);if(s.display=="none")return l();let r={};r.width=o.offsetWidth,r.height=o.offsetHeight;let a=r.isBorderBox=s.boxSizing=="border-box";n.forEach(x=>{let p=s[x],_=parseFloat(p);r[x]=isNaN(_)?0:_});let u=r.paddingLeft+r.paddingRight,f=r.paddingTop+r.paddingBottom,d=r.marginLeft+r.marginRight,v=r.marginTop+r.marginBottom,m=r.borderLeftWidth+r.borderRightWidth,b=r.borderTopWidth+r.borderBottomWidth,k=e(s.width);k!==!1&&(r.width=k+(a?0:u+m));let g=e(s.height);return g!==!1&&(r.height=g+(a?0:f+b)),r.innerWidth=r.width-(u+m),r.innerHeight=r.height-(f+b),r.outerWidth=r.width+d,r.outerHeight=r.height+v,r}return i})}(W)),W.exports}var F={exports:{}},Ct;function I(){return Ct||(Ct=1,function(c){(function(t,e){c.exports?c.exports=e(t):t.fizzyUIUtils=e(t)})(D,function(e){let n={};n.extend=function(i,o){return Object.assign(i,o)},n.modulo=function(i,o){return(i%o+o)%o},n.makeArray=function(i){return Array.isArray(i)?i:i==null?[]:typeof i=="object"&&typeof i.length=="number"?[...i]:[i]},n.removeFrom=function(i,o){let h=i.indexOf(o);h!=-1&&i.splice(h,1)},n.getParent=function(i,o){for(;i.parentNode&&i!=document.body;)if(i=i.parentNode,i.matches(o))return i},n.getQueryElement=function(i){return typeof i=="string"?document.querySelector(i):i},n.handleEvent=function(i){let o="on"+i.type;this[o]&&this[o](i)},n.filterFindElements=function(i,o){return i=n.makeArray(i),i.filter(h=>h instanceof HTMLElement).reduce((h,s)=>{if(!o)return h.push(s),h;s.matches(o)&&h.push(s);let r=s.querySelectorAll(o);return h=h.concat(...r),h},[])},n.debounceMethod=function(i,o,h){h=h||100;let s=i.prototype[o],r=o+"Timeout";i.prototype[o]=function(){clearTimeout(this[r]);let a=arguments;this[r]=setTimeout(()=>{s.apply(this,a),delete this[r]},h)}},n.docReady=function(i){let o=document.readyState;o=="complete"||o=="interactive"?setTimeout(i):document.addEventListener("DOMContentLoaded",i)},n.toDashed=function(i){return i.replace(/(.)([A-Z])/g,function(o,h,s){return h+"-"+s}).toLowerCase()};let l=e.console;return n.htmlInit=function(i,o){n.docReady(function(){let s="data-"+n.toDashed(o),r=document.querySelectorAll(`[${s}]`),a=e.jQuery;[...r].forEach(u=>{let f=u.getAttribute(s),d;try{d=f&&JSON.parse(f)}catch(m){l&&l.error(`Error parsing ${s} on ${u.className}: ${m}`);return}let v=new i(u,d);a&&a.data(u,o,v)})})},n})}(F)),F.exports}var O={exports:{}},Et;function xe(){return Et||(Et=1,function(c){(function(t,e){c.exports?c.exports=e(re()):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t.getSize))})(typeof window<"u"?window:D,function(e){const n="flickity-cell";function l(o){this.element=o,this.element.classList.add(n),this.x=0,this.unselect()}let i=l.prototype;return i.destroy=function(){this.unselect(),this.element.classList.remove(n),this.element.style.transform="",this.element.removeAttribute("aria-hidden")},i.getSize=function(){this.size=e(this.element)},i.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},i.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},i.remove=function(){this.element.remove()},l})}(O)),O.exports}var q={exports:{}},St;function Ce(){return St||(St=1,function(c){(function(t,e){c.exports?c.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())})(typeof window<"u"?window:D,function(){function e(l,i,o){this.beginMargin=l,this.endMargin=i,this.cellAlign=o,this.cells=[],this.outerWidth=0,this.height=0}let n=e.prototype;return n.addCell=function(l){this.cells.push(l),this.outerWidth+=l.size.outerWidth,this.height=Math.max(l.size.outerHeight,this.height),this.cells.length===1&&(this.x=l.x,this.firstMargin=l.size[this.beginMargin])},n.updateTarget=function(){let l=this.getLastCell(),i=l?l.size[this.endMargin]:0,o=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+o*this.cellAlign},n.getLastCell=function(){return this.cells[this.cells.length-1]},n.select=function(){this.cells.forEach(l=>l.select())},n.unselect=function(){this.cells.forEach(l=>l.unselect())},n.getCellElements=function(){return this.cells.map(l=>l.element)},e})}(q)),q.exports}var R={exports:{}},kt;function Ee(){return kt||(kt=1,function(c){(function(t,e){c.exports?c.exports=e(I()):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t.fizzyUIUtils))})(typeof window<"u"?window:D,function(e){let n={};return n.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},n.animate=function(){this.applyDragForce(),this.applySelectedAttraction();let l=this.x;this.integratePhysics(),this.positionSlider(),this.settle(l),this.isAnimating&&requestAnimationFrame(()=>this.animate())},n.positionSlider=function(){let l=this.x;this.isWrapping&&(l=e.modulo(l,this.slideableWidth)-this.slideableWidth,this.shiftWrapCells(l)),this.setTranslateX(l,this.isAnimating),this.dispatchScrollEvent()},n.setTranslateX=function(l,i){l+=this.cursorPosition,this.options.rightToLeft&&(l=-l);let o=this.getPositionValue(l);this.slider.style.transform=i?`translate3d(${o},0,0)`:`translateX(${o})`},n.dispatchScrollEvent=function(){let l=this.slides[0];if(!l)return;let i=-this.x-l.target,o=i/this.slidesWidth;this.dispatchEvent("scroll",null,[o,i])},n.positionSliderAtSelected=function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},n.getPositionValue=function(l){return this.options.percentPosition?Math.round(l/this.size.innerWidth*1e4)*.01+"%":Math.round(l)+"px"},n.settle=function(l){!this.isPointerDown&&Math.round(this.x*100)===Math.round(l*100)&&this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},n.shiftWrapCells=function(l){let i=this.cursorPosition+l;this._shiftCells(this.beforeShiftCells,i,-1);let o=this.size.innerWidth-(l+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,o,1)},n._shiftCells=function(l,i,o){l.forEach(h=>{let s=i>0?o:0;this._wrapShiftCell(h,s),i-=h.size.outerWidth})},n._unshiftCells=function(l){!l||!l.length||l.forEach(i=>this._wrapShiftCell(i,0))},n._wrapShiftCell=function(l,i){this._renderCellPosition(l,l.x+this.slideableWidth*i)},n.integratePhysics=function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},n.applyForce=function(l){this.velocity+=l},n.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},n.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},n.applyDragForce=function(){if(!this.isDraggable||!this.isPointerDown)return;let i=this.dragX-this.x-this.velocity;this.applyForce(i)},n.applySelectedAttraction=function(){if(this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length)return;let o=(this.selectedSlide.target*-1-this.x)*this.options.selectedAttraction;this.applyForce(o)},n})}(R)),R.exports}var Dt;function P(){return Dt||(Dt=1,function(c){(function(t,e){if(c.exports)c.exports=e(t,ne(),re(),I(),xe(),Ce(),Ee());else{let n=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,n.Cell,n.Slide,n.animatePrototype)}})(typeof window<"u"?window:D,function(e,n,l,i,o,h,s){const{getComputedStyle:r,console:a}=e;let{jQuery:u}=e,f=0,d={};function v(p,_){let y=i.getQueryElement(p);if(!y){a&&a.error(`Bad element for Flickity: ${y||p}`);return}if(this.element=y,this.element.flickityGUID){let C=d[this.element.flickityGUID];return C&&C.option(_),C}u&&(this.$element=u(this.element)),this.options={...this.constructor.defaults},this.option(_),this._create()}v.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},v.create={};let m=v.prototype;Object.assign(m,n.prototype),m._create=function(){let{resize:p,watchCSS:_,rightToLeft:y}=this.options,C=this.guid=++f;this.element.flickityGUID=C,d[C]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.beginMargin=y?"marginRight":"marginLeft",this.endMargin=y?"marginLeft":"marginRight",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),this.focusableElems=[this.element],(p||_)&&e.addEventListener("resize",this);for(let E in this.options.on){let S=this.options.on[E];this.on(E,S)}for(let E in v.create)v.create[E].call(this);_?this.watchCSS():this.activate()},m.option=function(p){Object.assign(this.options,p)},m.activate=function(){if(this.isActive)return;this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();let p=this._filterFindCellElements(this.element.children);this.slider.append(...p),this.viewport.append(this.slider),this.element.append(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready")},m._createSlider=function(){let p=document.createElement("div");p.className="flickity-slider",this.slider=p},m._filterFindCellElements=function(p){return i.filterFindElements(p,this.options.cellSelector)},m.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._updateWrapShiftCells(),this.setGallerySize()},m._makeCells=function(p){return this._filterFindCellElements(p).map(y=>new o(y))},m.getLastCell=function(){return this.cells[this.cells.length-1]},m.getLastSlide=function(){return this.slides[this.slides.length-1]},m.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},m._positionCells=function(p){p=p||0,this.maxCellHeight=p&&this.maxCellHeight||0;let _=0;if(p>0){let y=this.cells[p-1];_=y.x+y.size.outerWidth}this.cells.slice(p).forEach(y=>{y.x=_,this._renderCellPosition(y,_),_+=y.size.outerWidth,this.maxCellHeight=Math.max(y.size.outerHeight,this.maxCellHeight)}),this.slideableWidth=_,this.updateSlides(),this._containSlides(),this.slidesWidth=this.cells.length?this.getLastSlide().target-this.slides[0].target:0},m._renderCellPosition=function(p,_){let y=this.options.rightToLeft?-1:1,C=_*y;this.options.percentPosition&&(C*=this.size.innerWidth/p.size.width);let E=this.getPositionValue(C);p.element.style.transform=`translateX( ${E} )`},m._sizeCells=function(p){p.forEach(_=>_.getSize())},m.updateSlides=function(){if(this.slides=[],!this.cells.length)return;let{beginMargin:p,endMargin:_}=this,y=new h(p,_,this.cellAlign);this.slides.push(y);let C=this._getCanCellFit();this.cells.forEach((E,S)=>{if(!y.cells.length){y.addCell(E);return}let $=y.outerWidth-y.firstMargin+(E.size.outerWidth-E.size[_]);C(S,$)||(y.updateTarget(),y=new h(p,_,this.cellAlign),this.slides.push(y)),y.addCell(E)}),y.updateTarget(),this.updateSelectedSlide()},m._getCanCellFit=function(){let{groupCells:p}=this.options;if(!p)return()=>!1;if(typeof p=="number"){let E=parseInt(p,10);return S=>S%E!==0}let _=1,y=typeof p=="string"&&p.match(/^(\d+)%$/);y&&(_=parseInt(y[1],10)/100);let C=(this.size.innerWidth+1)*_;return(E,S)=>S<=C},m._init=m.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},m.getSize=function(){this.size=l(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};let b={left:0,center:.5,right:1};m.setCellAlign=function(){let{cellAlign:p,rightToLeft:_}=this.options,y=b[p];this.cellAlign=y!==void 0?y:p,_&&(this.cellAlign=1-this.cellAlign)},m.setGallerySize=function(){if(!this.options.setGallerySize)return;let p=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=`${p}px`},m._updateWrapShiftCells=function(){if(this.isWrapping=this.getIsWrapping(),!this.isWrapping)return;this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);let p=this.cursorPosition,_=this.cells.length-1;this.beforeShiftCells=this._getGapCells(p,_,-1);let y=this.size.innerWidth-this.cursorPosition;this.afterShiftCells=this._getGapCells(y,0,1)},m.getIsWrapping=function(){let{wrapAround:p}=this.options;if(!p||this.slides.length<2)return!1;if(p!=="fill")return!0;let _=this.slideableWidth-this.size.innerWidth;if(_>this.size.innerWidth)return!0;for(let y of this.cells)if(y.size.outerWidth>_)return!1;return!0},m._getGapCells=function(p,_,y){let C=[];for(;p>0;){let E=this.cells[_];if(!E)break;C.push(E),_+=y,p-=E.size.outerWidth}return C},m._containSlides=function(){if(!(this.options.contain&&!this.isWrapping&&this.cells.length))return;let _=this.slideableWidth-this.getLastCell().size[this.endMargin];if(_<this.size.innerWidth)this.slides.forEach(C=>{C.target=_*this.cellAlign});else{let C=this.cursorPosition+this.cells[0].size[this.beginMargin],E=_-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(S=>{S.target=Math.max(S.target,C),S.target=Math.min(S.target,E)})}},m.dispatchEvent=function(p,_,y){let C=_?[_].concat(y):y;if(this.emitEvent(p,C),u&&this.$element){p+=this.options.namespaceJQueryEvents?".flickity":"";let E=p;if(_){let S=new u.Event(_);S.type=p,E=S}this.$element.trigger(E,y)}};const k=["dragStart","dragMove","dragEnd","pointerDown","pointerMove","pointerEnd","staticClick"];let g=m.emitEvent;m.emitEvent=function(p,_){if(p==="staticClick"){let S=this.getParentCell(_[0].target),$=S&&S.element,A=S&&this.cells.indexOf(S);_=_.concat($,A)}if(g.call(this,p,_),!k.includes(p)||!u||!this.$element)return;p+=this.options.namespaceJQueryEvents?".flickity":"";let C=_.shift(0),E=new u.Event(C);E.type=p,this.$element.trigger(E,_)},m.select=function(p,_,y){if(!this.isActive||(p=parseInt(p,10),this._wrapSelect(p),(this.isWrapping||_)&&(p=i.modulo(p,this.slides.length)),!this.slides[p]))return;let C=this.selectedIndex;this.selectedIndex=p,this.updateSelectedSlide(),y?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[p]),p!==C&&this.dispatchEvent("change",null,[p])},m._wrapSelect=function(p){if(!this.isWrapping)return;const{selectedIndex:_,slideableWidth:y,slides:{length:C}}=this;if(!this.isDragSelect){let E=i.modulo(p,C),S=Math.abs(E-_),$=Math.abs(E+C-_),A=Math.abs(E-C-_);$<S?p+=C:A<S&&(p-=C)}p<0?this.x-=y:p>=C&&(this.x+=y)},m.previous=function(p,_){this.select(this.selectedIndex-1,p,_)},m.next=function(p,_){this.select(this.selectedIndex+1,p,_)},m.updateSelectedSlide=function(){let p=this.slides[this.selectedIndex];p&&(this.unselectSelectedSlide(),this.selectedSlide=p,p.select(),this.selectedCells=p.cells,this.selectedElements=p.getCellElements(),this.selectedCell=p.cells[0],this.selectedElement=this.selectedElements[0])},m.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},m.selectInitialIndex=function(){let p=this.options.initialIndex;if(this.isInitActivated){this.select(this.selectedIndex,!1,!0);return}if(p&&typeof p=="string"&&this.queryCell(p)){this.selectCell(p,!1,!0);return}let _=0;p&&this.slides[p]&&(_=p),this.select(_,!1,!0)},m.selectCell=function(p,_,y){let C=this.queryCell(p);if(!C)return;let E=this.getCellSlideIndex(C);this.select(E,_,y)},m.getCellSlideIndex=function(p){let _=this.slides.find(y=>y.cells.includes(p));return this.slides.indexOf(_)},m.getCell=function(p){for(let _ of this.cells)if(_.element===p)return _},m.getCells=function(p){return p=i.makeArray(p),p.map(_=>this.getCell(_)).filter(Boolean)},m.getCellElements=function(){return this.cells.map(p=>p.element)},m.getParentCell=function(p){let _=this.getCell(p);if(_)return _;let y=p.closest(".flickity-slider > *");return this.getCell(y)},m.getAdjacentCellElements=function(p,_){if(!p)return this.selectedSlide.getCellElements();_=_===void 0?this.selectedIndex:_;let y=this.slides.length;if(1+p*2>=y)return this.getCellElements();let C=[];for(let E=_-p;E<=_+p;E++){let S=this.isWrapping?i.modulo(E,y):E,$=this.slides[S];$&&(C=C.concat($.getCellElements()))}return C},m.queryCell=function(p){return typeof p=="number"?this.cells[p]:(typeof p=="string"&&!p.match(/^[#.]?[\d/]/)&&(p=this.element.querySelector(p)),this.getCell(p))},m.uiChange=function(){this.emitEvent("uiChange")},m.onresize=function(){this.watchCSS(),this.resize()},i.debounceMethod(v,"onresize",150),m.resize=function(){if(!this.isActive||this.isAnimating||this.isDragging)return;this.getSize(),this.isWrapping&&(this.x=i.modulo(this.x,this.slideableWidth)),this.positionCells(),this._updateWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");let p=this.selectedElements&&this.selectedElements[0];this.selectCell(p,!1,!0)},m.watchCSS=function(){if(!this.options.watchCSS)return;r(this.element,":after").content.includes("flickity")?this.activate():this.deactivate()},m.onkeydown=function(p){let{activeElement:_}=document,y=v.keyboardHandlers[p.key];if(!this.options.accessibility||!_||!y)return;this.focusableElems.some(E=>_===E)&&y.call(this)},v.keyboardHandlers={ArrowLeft:function(){this.uiChange();let p=this.options.rightToLeft?"next":"previous";this[p]()},ArrowRight:function(){this.uiChange();let p=this.options.rightToLeft?"previous":"next";this[p]()}},m.focus=function(){this.element.focus({preventScroll:!0})},m.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(p=>p.destroy()),this.viewport.remove(),this.element.append(...this.slider.children),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},m.destroy=function(){this.deactivate(),e.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),u&&this.$element&&u.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete d[this.guid]},Object.assign(m,s),v.data=function(p){if(p=i.getQueryElement(p),p)return d[p.flickityGUID]},i.htmlInit(v,"flickity");let{jQueryBridget:x}=e;return u&&x&&x("flickity",v,u),v.setJQuery=function(p){u=p},v.Cell=o,v.Slide=h,v})}(B)),B.exports}var U={exports:{}},N={exports:{}},H={exports:{}},$t;function Se(){return $t||($t=1,function(c){(function(t,e){c.exports?c.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:D,function(){function t(){}let e=t.prototype;return e.on=function(n,l){if(!n||!l)return this;let i=this._events=this._events||{},o=i[n]=i[n]||[];return o.includes(l)||o.push(l),this},e.once=function(n,l){if(!n||!l)return this;this.on(n,l);let i=this._onceEvents=this._onceEvents||{},o=i[n]=i[n]||{};return o[l]=!0,this},e.off=function(n,l){let i=this._events&&this._events[n];if(!i||!i.length)return this;let o=i.indexOf(l);return o!=-1&&i.splice(o,1),this},e.emitEvent=function(n,l){let i=this._events&&this._events[n];if(!i||!i.length)return this;i=i.slice(0),l=l||[];let o=this._onceEvents&&this._onceEvents[n];for(let h of i)o&&o[h]&&(this.off(n,h),delete o[h]),h.apply(this,l);return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t})}(H)),H.exports}/*!
 * Unidragger v3.0.1
 * Draggable base class
 * MIT license
 */var Mt;function ke(){return Mt||(Mt=1,function(c){(function(t,e){c.exports?c.exports=e(t,Se()):t.Unidragger=e(t,t.EvEmitter)})(typeof window<"u"?window:D,function(e,n){function l(){}let i=l.prototype=Object.create(n.prototype);i.handleEvent=function(a){let u="on"+a.type;this[u]&&this[u](a)};let o,h;"ontouchstart"in e?(o="touchstart",h=["touchmove","touchend","touchcancel"]):e.PointerEvent?(o="pointerdown",h=["pointermove","pointerup","pointercancel"]):(o="mousedown",h=["mousemove","mouseup"]),i.touchActionValue="none",i.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},i.unbindHandles=function(){this._bindHandles("removeEventListener","")},i._bindHandles=function(a,u){this.handles.forEach(f=>{f[a](o,this),f[a]("click",this),e.PointerEvent&&(f.style.touchAction=u)})},i.bindActivePointerEvents=function(){h.forEach(a=>{e.addEventListener(a,this)})},i.unbindActivePointerEvents=function(){h.forEach(a=>{e.removeEventListener(a,this)})},i.withPointer=function(a,u){u.pointerId===this.pointerIdentifier&&this[a](u,u)},i.withTouch=function(a,u){let f;for(let d of u.changedTouches)d.identifier===this.pointerIdentifier&&(f=d);f&&this[a](u,f)},i.onmousedown=function(a){this.pointerDown(a,a)},i.ontouchstart=function(a){this.pointerDown(a,a.changedTouches[0])},i.onpointerdown=function(a){this.pointerDown(a,a)};const s=["TEXTAREA","INPUT","SELECT","OPTION"],r=["radio","checkbox","button","submit","image","file"];return i.pointerDown=function(a,u){let f=s.includes(a.target.nodeName),d=r.includes(a.target.type),v=!f||d;!this.isPointerDown&&!a.button&&v&&(this.isPointerDown=!0,this.pointerIdentifier=u.pointerId!==void 0?u.pointerId:u.identifier,this.pointerDownPointer={pageX:u.pageX,pageY:u.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[a,u]))},i.onmousemove=function(a){this.pointerMove(a,a)},i.onpointermove=function(a){this.withPointer("pointerMove",a)},i.ontouchmove=function(a){this.withTouch("pointerMove",a)},i.pointerMove=function(a,u){let f={x:u.pageX-this.pointerDownPointer.pageX,y:u.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[a,u,f]),!this.isDragging&&this.hasDragStarted(f)&&this.dragStart(a,u),this.isDragging&&this.dragMove(a,u,f)},i.hasDragStarted=function(a){return Math.abs(a.x)>3||Math.abs(a.y)>3},i.dragStart=function(a,u){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[a,u])},i.dragMove=function(a,u,f){this.emitEvent("dragMove",[a,u,f])},i.onmouseup=function(a){this.pointerUp(a,a)},i.onpointerup=function(a){this.withPointer("pointerUp",a)},i.ontouchend=function(a){this.withTouch("pointerUp",a)},i.pointerUp=function(a,u){this.pointerDone(),this.emitEvent("pointerUp",[a,u]),this.isDragging?this.dragEnd(a,u):this.staticClick(a,u)},i.dragEnd=function(a,u){this.isDragging=!1,setTimeout(()=>delete this.isPreventingClicks),this.emitEvent("dragEnd",[a,u])},i.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},i.onpointercancel=function(a){this.withPointer("pointerCancel",a)},i.ontouchcancel=function(a){this.withTouch("pointerCancel",a)},i.pointerCancel=function(a,u){this.pointerDone(),this.emitEvent("pointerCancel",[a,u])},i.onclick=function(a){this.isPreventingClicks&&a.preventDefault()},i.staticClick=function(a,u){let f=a.type==="mouseup";f&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[a,u]),f&&(this.isIgnoringMouseUp=!0,setTimeout(()=>{delete this.isIgnoringMouseUp},400)))},l})}(N)),N.exports}var Pt;function De(){return Pt||(Pt=1,function(c){(function(t,e){c.exports?c.exports=e(t,P(),ke(),I()):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)})(typeof window<"u"?window:D,function(e,n,l,i){Object.assign(n.defaults,{draggable:">1",dragThreshold:3});let o=n.prototype;Object.assign(o,l.prototype),o.touchActionValue="",n.create.drag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("pointerDown",this.handlePointerDone),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.on("staticClick",this.handleStaticClick)},o.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},o.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},o.updateDraggable=function(){this.options.draggable===">1"?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.element.classList.toggle("is-draggable",this.isDraggable)},o._uiChangeDrag=function(){delete this.isFreeScrolling},o.handlePointerDown=function(s){if(!this.isDraggable){this.bindActivePointerEvents(s);return}let r=s.type==="touchstart",a=s.pointerType==="touch",u=s.target.matches("input, textarea, select");!r&&!a&&!u&&s.preventDefault(),u||this.focus(),document.activeElement!==this.element&&document.activeElement.blur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=h(),e.addEventListener("scroll",this),this.bindActivePointerEvents(s)},o.hasDragStarted=function(s){return Math.abs(s.x)>this.options.dragThreshold},o.handlePointerUp=function(){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down")},o.handlePointerDone=function(){e.removeEventListener("scroll",this),delete this.pointerDownScroll},o.handleDragStart=function(){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),e.removeEventListener("scroll",this))},o.handleDragMove=function(s,r,a){if(!this.isDraggable)return;s.preventDefault(),this.previousDragX=this.dragX;let u=this.options.rightToLeft?-1:1;this.isWrapping&&(a.x%=this.slideableWidth);let f=this.dragStartPosition+a.x*u;if(!this.isWrapping){let d=Math.max(-this.slides[0].target,this.dragStartPosition);f=f>d?(f+d)*.5:f;let v=Math.min(-this.getLastSlide().target,this.dragStartPosition);f=f<v?(f+v)*.5:f}this.dragX=f,this.dragMoveTime=new Date},o.handleDragEnd=function(){if(!this.isDraggable)return;let{freeScroll:s}=this.options;s&&(this.isFreeScrolling=!0);let r=this.dragEndRestingSelect();if(s&&!this.isWrapping){let a=this.getRestingPosition();this.isFreeScrolling=-a>this.slides[0].target&&-a<this.getLastSlide().target}else!s&&r===this.selectedIndex&&(r+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.isWrapping,this.select(r),delete this.isDragSelect},o.dragEndRestingSelect=function(){let s=this.getRestingPosition(),r=Math.abs(this.getSlideDistance(-s,this.selectedIndex)),a=this._getClosestResting(s,r,1),u=this._getClosestResting(s,r,-1);return a.distance<u.distance?a.index:u.index},o._getClosestResting=function(s,r,a){let u=this.selectedIndex,f=1/0,d=this.options.contain&&!this.isWrapping?(v,m)=>v<=m:(v,m)=>v<m;for(;d(r,f)&&(u+=a,f=r,r=this.getSlideDistance(-s,u),r!==null);)r=Math.abs(r);return{distance:f,index:u-a}},o.getSlideDistance=function(s,r){let a=this.slides.length,u=this.options.wrapAround&&a>1,f=u?i.modulo(r,a):r,d=this.slides[f];if(!d)return null;let v=u?this.slideableWidth*Math.floor(r/a):0;return s-(d.target+v)},o.dragEndBoostSelect=function(){if(this.previousDragX===void 0||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;let s=this.getSlideDistance(-this.dragX,this.selectedIndex),r=this.previousDragX-this.dragX;return s>0&&r>0?1:s<0&&r<0?-1:0},o.onscroll=function(){let s=h(),r=this.pointerDownScroll.x-s.x,a=this.pointerDownScroll.y-s.y;(Math.abs(r)>3||Math.abs(a)>3)&&this.pointerDone()};function h(){return{x:e.pageXOffset,y:e.pageYOffset}}return n})}(U)),U.exports}var j={exports:{}},wt;function $e(){return wt||(wt=1,function(c){(function(t,e){c.exports?c.exports=e(P()):e(t.Flickity)})(typeof window<"u"?window:D,function(e){const n="http://www.w3.org/2000/svg";function l(h,s,r){this.increment=h,this.direction=s,this.isPrevious=h==="previous",this.isLeft=s==="left",this._create(r)}l.prototype._create=function(h){let s=this.element=document.createElement("button");s.className=`flickity-button flickity-prev-next-button ${this.increment}`;let r=this.isPrevious?"Previous":"Next";s.setAttribute("type","button"),s.setAttribute("aria-label",r),this.disable();let a=this.createSVG(r,h);s.append(a)},l.prototype.createSVG=function(h,s){let r=document.createElementNS(n,"svg");r.setAttribute("class","flickity-button-icon"),r.setAttribute("viewBox","0 0 100 100");let a=document.createElementNS(n,"title");a.append(h);let u=document.createElementNS(n,"path"),f=i(s);return u.setAttribute("d",f),u.setAttribute("class","arrow"),this.isLeft||u.setAttribute("transform","translate(100, 100) rotate(180)"),r.append(a,u),r};function i(h){if(typeof h=="string")return h;let{x0:s,x1:r,x2:a,x3:u,y1:f,y2:d}=h;return`M ${s}, 50
    L ${r}, ${f+50}
    L ${a}, ${d+50}
    L ${u}, 50
    L ${a}, ${50-d}
    L ${r}, ${50-f}
    Z`}l.prototype.enable=function(){this.element.removeAttribute("disabled")},l.prototype.disable=function(){this.element.setAttribute("disabled",!0)},Object.assign(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.create.prevNextButtons=function(){if(!this.options.prevNextButtons)return;let{rightToLeft:h,arrowShape:s}=this.options,r=h?"right":"left",a=h?"left":"right";this.prevButton=new l("previous",r,s),this.nextButton=new l("next",a,s),this.focusableElems.push(this.prevButton.element),this.focusableElems.push(this.nextButton.element),this.handlePrevButtonClick=()=>{this.uiChange(),this.previous()},this.handleNextButtonClick=()=>{this.uiChange(),this.next()},this.on("activate",this.activatePrevNextButtons),this.on("select",this.updatePrevNextButtons)};let o=e.prototype;return o.updatePrevNextButtons=function(){let h=this.slides.length?this.slides.length-1:0;this.updatePrevNextButton(this.prevButton,0),this.updatePrevNextButton(this.nextButton,h)},o.updatePrevNextButton=function(h,s){if(this.isWrapping&&this.slides.length>1){h.enable();return}let r=this.selectedIndex!==s;h[r?"enable":"disable"](),!r&&document.activeElement===h.element&&this.focus()},o.activatePrevNextButtons=function(){this.prevButton.element.addEventListener("click",this.handlePrevButtonClick),this.nextButton.element.addEventListener("click",this.handleNextButtonClick),this.element.append(this.prevButton.element,this.nextButton.element),this.on("deactivate",this.deactivatePrevNextButtons)},o.deactivatePrevNextButtons=function(){this.prevButton.element.remove(),this.nextButton.element.remove(),this.prevButton.element.removeEventListener("click",this.handlePrevButtonClick),this.nextButton.element.removeEventListener("click",this.handleNextButtonClick),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=l,e})}(j)),j.exports}var X={exports:{}},Lt;function Me(){return Lt||(Lt=1,function(c){(function(t,e){c.exports?c.exports=e(P(),I()):e(t.Flickity,t.fizzyUIUtils)})(typeof window<"u"?window:D,function(e,n){function l(){this.holder=document.createElement("div"),this.holder.className="flickity-page-dots",this.dots=[]}l.prototype.setDots=function(o){let h=o-this.dots.length;h>0?this.addDots(h):h<0&&this.removeDots(-h)},l.prototype.addDots=function(o){let h=new Array(o).fill().map((s,r)=>{let a=document.createElement("button");a.setAttribute("type","button");let u=r+1+this.dots.length;return a.className="flickity-page-dot",a.textContent=`View slide ${u}`,a});this.holder.append(...h),this.dots=this.dots.concat(h)},l.prototype.removeDots=function(o){this.dots.splice(this.dots.length-o,o).forEach(s=>s.remove())},l.prototype.updateSelected=function(o){this.selectedDot&&(this.selectedDot.classList.remove("is-selected"),this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[o],this.selectedDot.classList.add("is-selected"),this.selectedDot.setAttribute("aria-current","step"))},e.PageDots=l,Object.assign(e.defaults,{pageDots:!0}),e.create.pageDots=function(){this.options.pageDots&&(this.pageDots=new l,this.handlePageDotsClick=this.onPageDotsClick.bind(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))};let i=e.prototype;return i.activatePageDots=function(){this.pageDots.setDots(this.slides.length),this.focusableElems.push(...this.pageDots.dots),this.pageDots.holder.addEventListener("click",this.handlePageDotsClick),this.element.append(this.pageDots.holder)},i.onPageDotsClick=function(o){let h=this.pageDots.dots.indexOf(o.target);h!==-1&&(this.uiChange(),this.select(h))},i.updateSelectedPageDots=function(){this.pageDots.updateSelected(this.selectedIndex)},i.updatePageDots=function(){this.pageDots.dots.forEach(o=>{n.removeFrom(this.focusableElems,o)}),this.pageDots.setDots(this.slides.length),this.focusableElems.push(...this.pageDots.dots)},i.deactivatePageDots=function(){this.pageDots.holder.remove(),this.pageDots.holder.removeEventListener("click",this.handlePageDotsClick)},e.PageDots=l,e})}(X)),X.exports}var G={exports:{}},At;function Pe(){return At||(At=1,function(c){(function(t,e){c.exports?c.exports=e(P()):e(t.Flickity)})(typeof window<"u"?window:D,function(e){function n(i,o){this.autoPlay=i,this.onTick=o,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}n.prototype.play=function(){if(this.state==="playing")return;if(document.hidden){document.addEventListener("visibilitychange",this.onVisibilityPlay);return}this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()},n.prototype.tick=function(){if(this.state!=="playing")return;let i=typeof this.autoPlay=="number"?this.autoPlay:3e3;this.clear(),this.timeout=setTimeout(()=>{this.onTick(),this.tick()},i)},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){this.state==="playing"&&(this.state="paused",this.clear())},n.prototype.unpause=function(){this.state==="paused"&&this.play()},n.prototype.visibilityChange=function(){let i=document.hidden;this[i?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},Object.assign(e.defaults,{pauseAutoPlayOnHover:!0}),e.create.player=function(){this.player=new n(this.options.autoPlay,()=>{this.next(!0)}),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)};let l=e.prototype;return l.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},l.playPlayer=function(){this.player.play()},l.stopPlayer=function(){this.player.stop()},l.pausePlayer=function(){this.player.pause()},l.unpausePlayer=function(){this.player.unpause()},l.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},l.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},l.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},e.Player=n,e})}(G)),G.exports}var V={exports:{}},It;function we(){return It||(It=1,function(c){(function(t,e){c.exports?c.exports=e(P(),I()):e(t.Flickity,t.fizzyUIUtils)})(typeof window<"u"?window:D,function(e,n){function l(o){let h=document.createDocumentFragment();return o.forEach(s=>h.appendChild(s.element)),h}let i=e.prototype;return i.insert=function(o,h){let s=this._makeCells(o);if(!s||!s.length)return;let r=this.cells.length;h=h===void 0?r:h;let a=l(s),u=h===r;if(u)this.slider.appendChild(a);else{let f=this.cells[h].element;this.slider.insertBefore(a,f)}if(h===0)this.cells=s.concat(this.cells);else if(u)this.cells=this.cells.concat(s);else{let f=this.cells.splice(h,r-h);this.cells=this.cells.concat(s).concat(f)}this._sizeCells(s),this.cellChange(h),this.positionSliderAtSelected()},i.append=function(o){this.insert(o,this.cells.length)},i.prepend=function(o){this.insert(o,0)},i.remove=function(o){let h=this.getCells(o);if(!h||!h.length)return;let s=this.cells.length-1;h.forEach(r=>{r.remove();let a=this.cells.indexOf(r);s=Math.min(a,s),n.removeFrom(this.cells,r)}),this.cellChange(s),this.positionSliderAtSelected()},i.cellSizeChange=function(o){let h=this.getCell(o);if(!h)return;h.getSize();let s=this.cells.indexOf(h);this.cellChange(s)},i.cellChange=function(o){let h=this.selectedElement;this._positionCells(o),this._updateWrapShiftCells(),this.setGallerySize();let s=this.getCell(h);s&&(this.selectedIndex=this.getCellSlideIndex(s)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[o]),this.select(this.selectedIndex)},e})}(V)),V.exports}var Q={exports:{}},zt;function Le(){return zt||(zt=1,function(c){(function(t,e){c.exports?c.exports=e(P(),I()):e(t.Flickity,t.fizzyUIUtils)})(typeof window<"u"?window:D,function(e,n){const l="data-flickity-lazyload",i=`${l}-src`,o=`${l}-srcset`,h=`img[${l}], img[${i}], img[${o}], source[${o}]`;e.create.lazyLoad=function(){this.on("select",this.lazyLoad),this.handleLazyLoadComplete=this.onLazyLoadComplete.bind(this)};let s=e.prototype;s.lazyLoad=function(){let{lazyLoad:u}=this.options;if(!u)return;let f=typeof u=="number"?u:0;this.getAdjacentCellElements(f).map(r).flat().forEach(d=>new a(d,this.handleLazyLoadComplete))};function r(u){if(u.matches("img")){let f=u.getAttribute(l),d=u.getAttribute(i),v=u.getAttribute(o);if(f||d||v)return u}return[...u.querySelectorAll(h)]}s.onLazyLoadComplete=function(u,f){let d=this.getParentCell(u),v=d&&d.element;this.cellSizeChange(v),this.dispatchEvent("lazyLoad",f,v)};function a(u,f){this.img=u,this.onComplete=f,this.load()}return a.prototype.handleEvent=n.handleEvent,a.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);let u=this.img.getAttribute(l)||this.img.getAttribute(i),f=this.img.getAttribute(o);this.img.src=u,f&&this.img.setAttribute("srcset",f),this.img.removeAttribute(l),this.img.removeAttribute(i),this.img.removeAttribute(o)},a.prototype.onload=function(u){this.complete(u,"flickity-lazyloaded")},a.prototype.onerror=function(u){this.complete(u,"flickity-lazyerror")},a.prototype.complete=function(u,f){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this),(this.img.parentNode.matches("picture")?this.img.parentNode:this.img).classList.add(f),this.onComplete(this.img,u)},e.LazyLoader=a,e})}(Q)),Q.exports}var Y={exports:{}},J={exports:{}};/*!
 * imagesLoaded v5.0.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */var Bt;function Ae(){return Bt||(Bt=1,function(c){(function(t,e){c.exports?c.exports=e(t,ne()):t.imagesLoaded=e(t,t.EvEmitter)})(typeof window<"u"?window:D,function(e,n){let l=e.jQuery,i=e.console;function o(f){return Array.isArray(f)?f:typeof f=="object"&&typeof f.length=="number"?[...f]:[f]}function h(f,d,v){if(!(this instanceof h))return new h(f,d,v);let m=f;if(typeof f=="string"&&(m=document.querySelectorAll(f)),!m){i.error(`Bad element for imagesLoaded ${m||f}`);return}this.elements=o(m),this.options={},typeof d=="function"?v=d:Object.assign(this.options,d),v&&this.on("always",v),this.getImages(),l&&(this.jqDeferred=new l.Deferred),setTimeout(this.check.bind(this))}h.prototype=Object.create(n.prototype),h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const s=[1,9,11];h.prototype.addElementImages=function(f){f.nodeName==="IMG"&&this.addImage(f),this.options.background===!0&&this.addElementBackgroundImages(f);let{nodeType:d}=f;if(!d||!s.includes(d))return;let v=f.querySelectorAll("img");for(let m of v)this.addImage(m);if(typeof this.options.background=="string"){let m=f.querySelectorAll(this.options.background);for(let b of m)this.addElementBackgroundImages(b)}};const r=/url\((['"])?(.*?)\1\)/gi;h.prototype.addElementBackgroundImages=function(f){let d=getComputedStyle(f);if(!d)return;let v=r.exec(d.backgroundImage);for(;v!==null;){let m=v&&v[2];m&&this.addBackground(m,f),v=r.exec(d.backgroundImage)}},h.prototype.addImage=function(f){let d=new a(f);this.images.push(d)},h.prototype.addBackground=function(f,d){let v=new u(f,d);this.images.push(v)},h.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}let f=(d,v,m)=>{setTimeout(()=>{this.progress(d,v,m)})};this.images.forEach(function(d){d.once("progress",f),d.check()})},h.prototype.progress=function(f,d,v){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!f.isLoaded,this.emitEvent("progress",[this,f,d]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,f),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&i&&i.log(`progress: ${v}`,f,d)},h.prototype.complete=function(){let f=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(f,[this]),this.emitEvent("always",[this]),this.jqDeferred){let d=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[d](this)}};function a(f){this.img=f}a.prototype=Object.create(n.prototype),a.prototype.check=function(){if(this.getIsImageComplete()){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src},a.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},a.prototype.confirm=function(f,d){this.isLoaded=f;let{parentNode:v}=this.img,m=v.nodeName==="PICTURE"?v:this.img;this.emitEvent("progress",[this,m,d])},a.prototype.handleEvent=function(f){let d="on"+f.type;this[d]&&this[d](f)},a.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},a.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},a.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function u(f,d){this.url=f,this.element=d,this.img=new Image}return u.prototype=Object.create(a.prototype),u.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},u.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},u.prototype.confirm=function(f,d){this.isLoaded=f,this.emitEvent("progress",[this,this.element,d])},h.makeJQueryPlugin=function(f){f=f||e.jQuery,f&&(l=f,l.fn.imagesLoaded=function(d,v){return new h(this,d,v).jqDeferred.promise(l(this))})},h.makeJQueryPlugin(),h})}(J)),J.exports}var Tt;function Ie(){return Tt||(Tt=1,function(c){(function(t,e){c.exports?c.exports=e(P(),Ae()):e(t.Flickity,t.imagesLoaded)})(typeof window<"u"?window:D,function(e,n){return e.create.imagesLoaded=function(){this.on("activate",this.imagesLoaded)},e.prototype.imagesLoaded=function(){if(!this.options.imagesLoaded)return;let l=(i,o)=>{let h=this.getParentCell(o.img);this.cellSizeChange(h&&h.element),this.options.freeScroll||this.positionSliderAtSelected()};n(this.slider).on("progress",l)},e})}(Y)),Y.exports}/*!
 * Flickity v3.0.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2022 Metafizzy
 */(function(c){if(c.exports){const t=P();De(),$e(),Me(),Pe(),we(),Le(),Ie(),c.exports=t}})(se);var ze=se.exports;const Be=ue(ze);var Te={exports:{}},Z={exports:{}},K={exports:{}},tt={exports:{}},Wt;function z(){return Wt||(Wt=1,function(c){(function(t,e){c.exports?c.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:D,function(){function t(){}var e=t.prototype;return e.on=function(n,l){if(!(!n||!l)){var i=this._events=this._events||{},o=i[n]=i[n]||[];return o.indexOf(l)==-1&&o.push(l),this}},e.once=function(n,l){if(!(!n||!l)){this.on(n,l);var i=this._onceEvents=this._onceEvents||{},o=i[n]=i[n]||{};return o[l]=!0,this}},e.off=function(n,l){var i=this._events&&this._events[n];if(!(!i||!i.length)){var o=i.indexOf(l);return o!=-1&&i.splice(o,1),this}},e.emitEvent=function(n,l){var i=this._events&&this._events[n];if(!(!i||!i.length)){i=i.slice(0),l=l||[];for(var o=this._onceEvents&&this._onceEvents[n],h=0;h<i.length;h++){var s=i[h],r=o&&o[s];r&&(this.off(n,s),delete o[s]),s.apply(this,l)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})}(tt)),tt.exports}var et={exports:{}};/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */var Ft;function oe(){return Ft||(Ft=1,function(c){(function(t,e){c.exports?c.exports=e():t.getSize=e()})(window,function(){function e(d){var v=parseFloat(d),m=d.indexOf("%")==-1&&!isNaN(v);return m&&v}function n(){}var l=typeof console>"u"?n:function(d){console.error(d)},i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],o=i.length;function h(){for(var d={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},v=0;v<o;v++){var m=i[v];d[m]=0}return d}function s(d){var v=getComputedStyle(d);return v||l("Style returned "+v+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),v}var r=!1,a;function u(){if(!r){r=!0;var d=document.createElement("div");d.style.width="200px",d.style.padding="1px 2px 3px 4px",d.style.borderStyle="solid",d.style.borderWidth="1px 2px 3px 4px",d.style.boxSizing="border-box";var v=document.body||document.documentElement;v.appendChild(d);var m=s(d);a=Math.round(e(m.width))==200,f.isBoxSizeOuter=a,v.removeChild(d)}}function f(d){if(u(),typeof d=="string"&&(d=document.querySelector(d)),!(!d||typeof d!="object"||!d.nodeType)){var v=s(d);if(v.display=="none")return h();var m={};m.width=d.offsetWidth,m.height=d.offsetHeight;for(var b=m.isBorderBox=v.boxSizing=="border-box",k=0;k<o;k++){var g=i[k],x=v[g],p=parseFloat(x);m[g]=isNaN(p)?0:p}var _=m.paddingLeft+m.paddingRight,y=m.paddingTop+m.paddingBottom,C=m.marginLeft+m.marginRight,E=m.marginTop+m.marginBottom,S=m.borderLeftWidth+m.borderRightWidth,$=m.borderTopWidth+m.borderBottomWidth,A=b&&a,_t=e(v.width);_t!==!1&&(m.width=_t+(A?0:_+S));var yt=e(v.height);return yt!==!1&&(m.height=yt+(A?0:y+$)),m.innerWidth=m.width-(_+S),m.innerHeight=m.height-(y+$),m.outerWidth=m.width+C,m.outerHeight=m.height+E,m}}return f})}(et)),et.exports}var it={exports:{}},st={exports:{}},Ot;function We(){return Ot||(Ot=1,function(c){(function(t,e){c.exports?c.exports=e():t.matchesSelector=e()})(window,function(){var e=function(){var n=window.Element.prototype;if(n.matches)return"matches";if(n.matchesSelector)return"matchesSelector";for(var l=["webkit","moz","ms","o"],i=0;i<l.length;i++){var o=l[i],h=o+"MatchesSelector";if(n[h])return h}}();return function(l,i){return l[e](i)}})}(st)),st.exports}var qt;function w(){return qt||(qt=1,function(c){(function(t,e){c.exports?c.exports=e(t,We()):t.fizzyUIUtils=e(t,t.matchesSelector)})(window,function(e,n){var l={};l.extend=function(h,s){for(var r in s)h[r]=s[r];return h},l.modulo=function(h,s){return(h%s+s)%s};var i=Array.prototype.slice;l.makeArray=function(h){if(Array.isArray(h))return h;if(h==null)return[];var s=typeof h=="object"&&typeof h.length=="number";return s?i.call(h):[h]},l.removeFrom=function(h,s){var r=h.indexOf(s);r!=-1&&h.splice(r,1)},l.getParent=function(h,s){for(;h.parentNode&&h!=document.body;)if(h=h.parentNode,n(h,s))return h},l.getQueryElement=function(h){return typeof h=="string"?document.querySelector(h):h},l.handleEvent=function(h){var s="on"+h.type;this[s]&&this[s](h)},l.filterFindElements=function(h,s){h=l.makeArray(h);var r=[];return h.forEach(function(a){if(a instanceof HTMLElement){if(!s){r.push(a);return}n(a,s)&&r.push(a);for(var u=a.querySelectorAll(s),f=0;f<u.length;f++)r.push(u[f])}}),r},l.debounceMethod=function(h,s,r){r=r||100;var a=h.prototype[s],u=s+"Timeout";h.prototype[s]=function(){var f=this[u];clearTimeout(f);var d=arguments,v=this;this[u]=setTimeout(function(){a.apply(v,d),delete v[u]},r)}},l.docReady=function(h){var s=document.readyState;s=="complete"||s=="interactive"?setTimeout(h):document.addEventListener("DOMContentLoaded",h)},l.toDashed=function(h){return h.replace(/(.)([A-Z])/g,function(s,r,a){return r+"-"+a}).toLowerCase()};var o=e.console;return l.htmlInit=function(h,s){l.docReady(function(){var r=l.toDashed(s),a="data-"+r,u=document.querySelectorAll("["+a+"]"),f=document.querySelectorAll(".js-"+r),d=l.makeArray(u).concat(l.makeArray(f)),v=a+"-options",m=e.jQuery;d.forEach(function(b){var k=b.getAttribute(a)||b.getAttribute(v),g;try{g=k&&JSON.parse(k)}catch(p){o&&o.error("Error parsing "+a+" on "+b.className+": "+p);return}var x=new h(b,g);m&&m.data(b,s,x)})})},l})}(it)),it.exports}var nt={exports:{}},Rt;function Fe(){return Rt||(Rt=1,function(c){(function(t,e){c.exports?c.exports=e(t,oe()):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))})(window,function(e,n){function l(o,h){this.element=o,this.parent=h,this.create()}var i=l.prototype;return i.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0,this.element.style[this.parent.originSide]=0},i.destroy=function(){this.unselect(),this.element.style.position="";var o=this.parent.originSide;this.element.style[o]="",this.element.style.transform="",this.element.removeAttribute("aria-hidden")},i.getSize=function(){this.size=n(this.element)},i.setPosition=function(o){this.x=o,this.updateTarget(),this.renderPosition(o)},i.updateTarget=i.setDefaultTarget=function(){var o=this.parent.originSide=="left"?"marginLeft":"marginRight";this.target=this.x+this.size[o]+this.size.width*this.parent.cellAlign},i.renderPosition=function(o){var h=this.parent.originSide==="left"?1:-1,s=this.parent.options.percentPosition?o*h*(this.parent.size.innerWidth/this.size.width):o*h;this.element.style.transform="translateX("+this.parent.getPositionValue(s)+")"},i.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},i.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},i.wrapShift=function(o){this.shift=o,this.renderPosition(this.x+this.parent.slideableWidth*o)},i.remove=function(){this.element.parentNode.removeChild(this.element)},l})}(nt)),nt.exports}var rt={exports:{}},Ut;function Oe(){return Ut||(Ut=1,function(c){(function(t,e){c.exports?c.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())})(window,function(){function e(l){this.parent=l,this.isOriginLeft=l.originSide=="left",this.cells=[],this.outerWidth=0,this.height=0}var n=e.prototype;return n.addCell=function(l){if(this.cells.push(l),this.outerWidth+=l.size.outerWidth,this.height=Math.max(l.size.outerHeight,this.height),this.cells.length==1){this.x=l.x;var i=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=l.size[i]}},n.updateTarget=function(){var l=this.isOriginLeft?"marginRight":"marginLeft",i=this.getLastCell(),o=i?i.size[l]:0,h=this.outerWidth-(this.firstMargin+o);this.target=this.x+this.firstMargin+h*this.parent.cellAlign},n.getLastCell=function(){return this.cells[this.cells.length-1]},n.select=function(){this.cells.forEach(function(l){l.select()})},n.unselect=function(){this.cells.forEach(function(l){l.unselect()})},n.getCellElements=function(){return this.cells.map(function(l){return l.element})},e})}(rt)),rt.exports}var ot={exports:{}},Nt;function qe(){return Nt||(Nt=1,function(c){(function(t,e){c.exports?c.exports=e(t,w()):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))})(window,function(e,n){var l={};return l.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},l.animate=function(){this.applyDragForce(),this.applySelectedAttraction();var i=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(i),this.isAnimating){var o=this;requestAnimationFrame(function(){o.animate()})}},l.positionSlider=function(){var i=this.x;this.options.wrapAround&&this.cells.length>1&&(i=n.modulo(i,this.slideableWidth),i-=this.slideableWidth,this.shiftWrapCells(i)),this.setTranslateX(i,this.isAnimating),this.dispatchScrollEvent()},l.setTranslateX=function(i,o){i+=this.cursorPosition,i=this.options.rightToLeft?-i:i;var h=this.getPositionValue(i);this.slider.style.transform=o?"translate3d("+h+",0,0)":"translateX("+h+")"},l.dispatchScrollEvent=function(){var i=this.slides[0];if(i){var o=-this.x-i.target,h=o/this.slidesWidth;this.dispatchEvent("scroll",null,[h,o])}},l.positionSliderAtSelected=function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},l.getPositionValue=function(i){return this.options.percentPosition?Math.round(i/this.size.innerWidth*1e4)*.01+"%":Math.round(i)+"px"},l.settle=function(i){var o=!this.isPointerDown&&Math.round(this.x*100)==Math.round(i*100);o&&this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},l.shiftWrapCells=function(i){var o=this.cursorPosition+i;this._shiftCells(this.beforeShiftCells,o,-1);var h=this.size.innerWidth-(i+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,h,1)},l._shiftCells=function(i,o,h){for(var s=0;s<i.length;s++){var r=i[s],a=o>0?h:0;r.wrapShift(a),o-=r.size.outerWidth}},l._unshiftCells=function(i){if(!(!i||!i.length))for(var o=0;o<i.length;o++)i[o].wrapShift(0)},l.integratePhysics=function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},l.applyForce=function(i){this.velocity+=i},l.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},l.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},l.applyDragForce=function(){if(!(!this.isDraggable||!this.isPointerDown)){var i=this.dragX-this.x,o=i-this.velocity;this.applyForce(o)}},l.applySelectedAttraction=function(){var i=this.isDraggable&&this.isPointerDown;if(!(i||this.isFreeScrolling||!this.slides.length)){var o=this.selectedSlide.target*-1-this.x,h=o*this.options.selectedAttraction;this.applyForce(h)}},l})}(ot)),ot.exports}var Ht;function L(){return Ht||(Ht=1,function(c){(function(t,e){if(c.exports)c.exports=e(t,z(),oe(),w(),Fe(),Oe(),qe());else{var n=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,n.Cell,n.Slide,n.animatePrototype)}})(window,function(e,n,l,i,o,h,s){var r=e.jQuery,a=e.getComputedStyle,u=e.console;function f(g,x){for(g=i.makeArray(g);g.length;)x.appendChild(g.shift())}var d=0,v={};function m(g,x){var p=i.getQueryElement(g);if(!p){u&&u.error("Bad element for Flickity: "+(p||g));return}if(this.element=p,this.element.flickityGUID){var _=v[this.element.flickityGUID];return _&&_.option(x),_}r&&(this.$element=r(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(x),this._create()}m.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},m.createMethods=[];var b=m.prototype;i.extend(b,n.prototype),b._create=function(){var g=this.guid=++d;this.element.flickityGUID=g,v[g]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&e.addEventListener("resize",this);for(var x in this.options.on){var p=this.options.on[x];this.on(x,p)}m.createMethods.forEach(function(_){this[_]()},this),this.options.watchCSS?this.watchCSS():this.activate()},b.option=function(g){i.extend(this.options,g)},b.activate=function(){if(!this.isActive){this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();var g=this._filterFindCellElements(this.element.children);f(g,this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready")}},b._createSlider=function(){var g=document.createElement("div");g.className="flickity-slider",g.style[this.originSide]=0,this.slider=g},b._filterFindCellElements=function(g){return i.filterFindElements(g,this.options.cellSelector)},b.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},b._makeCells=function(g){var x=this._filterFindCellElements(g),p=x.map(function(_){return new o(_,this)},this);return p},b.getLastCell=function(){return this.cells[this.cells.length-1]},b.getLastSlide=function(){return this.slides[this.slides.length-1]},b.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},b._positionCells=function(g){g=g||0,this.maxCellHeight=g&&this.maxCellHeight||0;var x=0;if(g>0){var p=this.cells[g-1];x=p.x+p.size.outerWidth}for(var _=this.cells.length,y=g;y<_;y++){var C=this.cells[y];C.setPosition(x),x+=C.size.outerWidth,this.maxCellHeight=Math.max(C.size.outerHeight,this.maxCellHeight)}this.slideableWidth=x,this.updateSlides(),this._containSlides(),this.slidesWidth=_?this.getLastSlide().target-this.slides[0].target:0},b._sizeCells=function(g){g.forEach(function(x){x.getSize()})},b.updateSlides=function(){if(this.slides=[],!!this.cells.length){var g=new h(this);this.slides.push(g);var x=this.originSide=="left",p=x?"marginRight":"marginLeft",_=this._getCanCellFit();this.cells.forEach(function(y,C){if(!g.cells.length){g.addCell(y);return}var E=g.outerWidth-g.firstMargin+(y.size.outerWidth-y.size[p]);_.call(this,C,E)||(g.updateTarget(),g=new h(this),this.slides.push(g)),g.addCell(y)},this),g.updateTarget(),this.updateSelectedSlide()}},b._getCanCellFit=function(){var g=this.options.groupCells;if(g){if(typeof g=="number"){var x=parseInt(g,10);return function(y){return y%x!==0}}}else return function(){return!1};var p=typeof g=="string"&&g.match(/^(\d+)%$/),_=p?parseInt(p[1],10)/100:1;return function(y,C){return C<=(this.size.innerWidth+1)*_}},b._init=b.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},b.getSize=function(){this.size=l(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var k={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return b.setCellAlign=function(){var g=k[this.options.cellAlign];this.cellAlign=g?g[this.originSide]:this.options.cellAlign},b.setGallerySize=function(){if(this.options.setGallerySize){var g=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=g+"px"}},b._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var g=this.cursorPosition,x=this.cells.length-1;this.beforeShiftCells=this._getGapCells(g,x,-1),g=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(g,0,1)}},b._getGapCells=function(g,x,p){for(var _=[];g>0;){var y=this.cells[x];if(!y)break;_.push(y),x+=p,g-=y.size.outerWidth}return _},b._containSlides=function(){if(!(!this.options.contain||this.options.wrapAround||!this.cells.length)){var g=this.options.rightToLeft,x=g?"marginRight":"marginLeft",p=g?"marginLeft":"marginRight",_=this.slideableWidth-this.getLastCell().size[p],y=_<this.size.innerWidth,C=this.cursorPosition+this.cells[0].size[x],E=_-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(S){y?S.target=_*this.cellAlign:(S.target=Math.max(S.target,C),S.target=Math.min(S.target,E))},this)}},b.dispatchEvent=function(g,x,p){var _=x?[x].concat(p):p;if(this.emitEvent(g,_),r&&this.$element){g+=this.options.namespaceJQueryEvents?".flickity":"";var y=g;if(x){var C=new r.Event(x);C.type=g,y=C}this.$element.trigger(y,p)}},b.select=function(g,x,p){if(this.isActive&&(g=parseInt(g,10),this._wrapSelect(g),(this.options.wrapAround||x)&&(g=i.modulo(g,this.slides.length)),!!this.slides[g])){var _=this.selectedIndex;this.selectedIndex=g,this.updateSelectedSlide(),p?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[g]),g!=_&&this.dispatchEvent("change",null,[g]),this.dispatchEvent("cellSelect")}},b._wrapSelect=function(g){var x=this.slides.length,p=this.options.wrapAround&&x>1;if(!p)return g;var _=i.modulo(g,x),y=Math.abs(_-this.selectedIndex),C=Math.abs(_+x-this.selectedIndex),E=Math.abs(_-x-this.selectedIndex);!this.isDragSelect&&C<y?g+=x:!this.isDragSelect&&E<y&&(g-=x),g<0?this.x-=this.slideableWidth:g>=x&&(this.x+=this.slideableWidth)},b.previous=function(g,x){this.select(this.selectedIndex-1,g,x)},b.next=function(g,x){this.select(this.selectedIndex+1,g,x)},b.updateSelectedSlide=function(){var g=this.slides[this.selectedIndex];g&&(this.unselectSelectedSlide(),this.selectedSlide=g,g.select(),this.selectedCells=g.cells,this.selectedElements=g.getCellElements(),this.selectedCell=g.cells[0],this.selectedElement=this.selectedElements[0])},b.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},b.selectInitialIndex=function(){var g=this.options.initialIndex;if(this.isInitActivated){this.select(this.selectedIndex,!1,!0);return}if(g&&typeof g=="string"){var x=this.queryCell(g);if(x){this.selectCell(g,!1,!0);return}}var p=0;g&&this.slides[g]&&(p=g),this.select(p,!1,!0)},b.selectCell=function(g,x,p){var _=this.queryCell(g);if(_){var y=this.getCellSlideIndex(_);this.select(y,x,p)}},b.getCellSlideIndex=function(g){for(var x=0;x<this.slides.length;x++){var p=this.slides[x],_=p.cells.indexOf(g);if(_!=-1)return x}},b.getCell=function(g){for(var x=0;x<this.cells.length;x++){var p=this.cells[x];if(p.element==g)return p}},b.getCells=function(g){g=i.makeArray(g);var x=[];return g.forEach(function(p){var _=this.getCell(p);_&&x.push(_)},this),x},b.getCellElements=function(){return this.cells.map(function(g){return g.element})},b.getParentCell=function(g){var x=this.getCell(g);return x||(g=i.getParent(g,".flickity-slider > *"),this.getCell(g))},b.getAdjacentCellElements=function(g,x){if(!g)return this.selectedSlide.getCellElements();x=x===void 0?this.selectedIndex:x;var p=this.slides.length;if(1+g*2>=p)return this.getCellElements();for(var _=[],y=x-g;y<=x+g;y++){var C=this.options.wrapAround?i.modulo(y,p):y,E=this.slides[C];E&&(_=_.concat(E.getCellElements()))}return _},b.queryCell=function(g){if(typeof g=="number")return this.cells[g];if(typeof g=="string"){if(g.match(/^[#.]?[\d/]/))return;g=this.element.querySelector(g)}return this.getCell(g)},b.uiChange=function(){this.emitEvent("uiChange")},b.childUIPointerDown=function(g){g.type!="touchstart"&&g.preventDefault(),this.focus()},b.onresize=function(){this.watchCSS(),this.resize()},i.debounceMethod(m,"onresize",150),b.resize=function(){if(!(!this.isActive||this.isAnimating||this.isDragging)){this.getSize(),this.options.wrapAround&&(this.x=i.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var g=this.selectedElements&&this.selectedElements[0];this.selectCell(g,!1,!0)}},b.watchCSS=function(){var g=this.options.watchCSS;if(g){var x=a(this.element,":after").content;x.indexOf("flickity")!=-1?this.activate():this.deactivate()}},b.onkeydown=function(g){var x=document.activeElement&&document.activeElement!=this.element;if(!(!this.options.accessibility||x)){var p=m.keyboardHandlers[g.keyCode];p&&p.call(this)}},m.keyboardHandlers={37:function(){var g=this.options.rightToLeft?"next":"previous";this.uiChange(),this[g]()},39:function(){var g=this.options.rightToLeft?"previous":"next";this.uiChange(),this[g]()}},b.focus=function(){var g=e.pageYOffset;this.element.focus({preventScroll:!0}),e.pageYOffset!=g&&e.scrollTo(e.pageXOffset,g)},b.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(g){g.destroy()}),this.element.removeChild(this.viewport),f(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},b.destroy=function(){this.deactivate(),e.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),r&&this.$element&&r.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete v[this.guid]},i.extend(b,s),m.data=function(g){g=i.getQueryElement(g);var x=g&&g.flickityGUID;return x&&v[x]},i.htmlInit(m,"flickity"),r&&r.bridget&&r.bridget("flickity",m),m.setJQuery=function(g){r=g},m.Cell=o,m.Slide=h,m})}(K)),K.exports}var at={exports:{}},lt={exports:{}},ht={exports:{}};/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */var jt;function vt(){return jt||(jt=1,function(c){(function(t,e){c.exports?c.exports=e(t,z()):t.Unipointer=e(t,t.EvEmitter)})(window,function(e,n){function l(){}function i(){}var o=i.prototype=Object.create(n.prototype);o.bindStartEvent=function(s){this._bindStartEvent(s,!0)},o.unbindStartEvent=function(s){this._bindStartEvent(s,!1)},o._bindStartEvent=function(s,r){r=r===void 0?!0:r;var a=r?"addEventListener":"removeEventListener",u="mousedown";"ontouchstart"in e?u="touchstart":e.PointerEvent&&(u="pointerdown"),s[a](u,this)},o.handleEvent=function(s){var r="on"+s.type;this[r]&&this[r](s)},o.getTouch=function(s){for(var r=0;r<s.length;r++){var a=s[r];if(a.identifier==this.pointerIdentifier)return a}},o.onmousedown=function(s){var r=s.button;r&&r!==0&&r!==1||this._pointerDown(s,s)},o.ontouchstart=function(s){this._pointerDown(s,s.changedTouches[0])},o.onpointerdown=function(s){this._pointerDown(s,s)},o._pointerDown=function(s,r){s.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=r.pointerId!==void 0?r.pointerId:r.identifier,this.pointerDown(s,r))},o.pointerDown=function(s,r){this._bindPostStartEvents(s),this.emitEvent("pointerDown",[s,r])};var h={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return o._bindPostStartEvents=function(s){if(s){var r=h[s.type];r.forEach(function(a){e.addEventListener(a,this)},this),this._boundPointerEvents=r}},o._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(s){e.removeEventListener(s,this)},this),delete this._boundPointerEvents)},o.onmousemove=function(s){this._pointerMove(s,s)},o.onpointermove=function(s){s.pointerId==this.pointerIdentifier&&this._pointerMove(s,s)},o.ontouchmove=function(s){var r=this.getTouch(s.changedTouches);r&&this._pointerMove(s,r)},o._pointerMove=function(s,r){this.pointerMove(s,r)},o.pointerMove=function(s,r){this.emitEvent("pointerMove",[s,r])},o.onmouseup=function(s){this._pointerUp(s,s)},o.onpointerup=function(s){s.pointerId==this.pointerIdentifier&&this._pointerUp(s,s)},o.ontouchend=function(s){var r=this.getTouch(s.changedTouches);r&&this._pointerUp(s,r)},o._pointerUp=function(s,r){this._pointerDone(),this.pointerUp(s,r)},o.pointerUp=function(s,r){this.emitEvent("pointerUp",[s,r])},o._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},o._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},o.pointerDone=l,o.onpointercancel=function(s){s.pointerId==this.pointerIdentifier&&this._pointerCancel(s,s)},o.ontouchcancel=function(s){var r=this.getTouch(s.changedTouches);r&&this._pointerCancel(s,r)},o._pointerCancel=function(s,r){this._pointerDone(),this.pointerCancel(s,r)},o.pointerCancel=function(s,r){this.emitEvent("pointerCancel",[s,r])},i.getPointerPoint=function(s){return{x:s.pageX,y:s.pageY}},i})}(ht)),ht.exports}/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */var Xt;function Re(){return Xt||(Xt=1,function(c){(function(t,e){c.exports?c.exports=e(t,vt()):t.Unidragger=e(t,t.Unipointer)})(window,function(e,n){function l(){}var i=l.prototype=Object.create(n.prototype);i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(s){s=s===void 0?!0:s;for(var r=s?"addEventListener":"removeEventListener",a=s?this._touchActionValue:"",u=0;u<this.handles.length;u++){var f=this.handles[u];this._bindStartEvent(f,s),f[r]("click",this),e.PointerEvent&&(f.style.touchAction=a)}},i._touchActionValue="none",i.pointerDown=function(s,r){var a=this.okayPointerDown(s);a&&(this.pointerDownPointer={pageX:r.pageX,pageY:r.pageY},s.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(s),this.emitEvent("pointerDown",[s,r]))};var o={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},h={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(s){var r=o[s.target.nodeName],a=h[s.target.type],u=!r||a;return u||this._pointerReset(),u},i.pointerDownBlur=function(){var s=document.activeElement,r=s&&s.blur&&s!=document.body;r&&s.blur()},i.pointerMove=function(s,r){var a=this._dragPointerMove(s,r);this.emitEvent("pointerMove",[s,r,a]),this._dragMove(s,r,a)},i._dragPointerMove=function(s,r){var a={x:r.pageX-this.pointerDownPointer.pageX,y:r.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this._dragStart(s,r),a},i.hasDragStarted=function(s){return Math.abs(s.x)>3||Math.abs(s.y)>3},i.pointerUp=function(s,r){this.emitEvent("pointerUp",[s,r]),this._dragPointerUp(s,r)},i._dragPointerUp=function(s,r){this.isDragging?this._dragEnd(s,r):this._staticClick(s,r)},i._dragStart=function(s,r){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(s,r)},i.dragStart=function(s,r){this.emitEvent("dragStart",[s,r])},i._dragMove=function(s,r,a){this.isDragging&&this.dragMove(s,r,a)},i.dragMove=function(s,r,a){s.preventDefault(),this.emitEvent("dragMove",[s,r,a])},i._dragEnd=function(s,r){this.isDragging=!1,setTimeout((function(){delete this.isPreventingClicks}).bind(this)),this.dragEnd(s,r)},i.dragEnd=function(s,r){this.emitEvent("dragEnd",[s,r])},i.onclick=function(s){this.isPreventingClicks&&s.preventDefault()},i._staticClick=function(s,r){this.isIgnoringMouseUp&&s.type=="mouseup"||(this.staticClick(s,r),s.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout((function(){delete this.isIgnoringMouseUp}).bind(this),400)))},i.staticClick=function(s,r){this.emitEvent("staticClick",[s,r])},l.getPointerPoint=n.getPointerPoint,l})}(lt)),lt.exports}var Gt;function Ue(){return Gt||(Gt=1,function(c){(function(t,e){c.exports?c.exports=e(t,L(),Re(),w()):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)})(window,function(e,n,l,i){i.extend(n.defaults,{draggable:">1",dragThreshold:3}),n.createMethods.push("_createDrag");var o=n.prototype;i.extend(o,l.prototype),o._touchActionValue="pan-y",o._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable)},o.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},o.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},o.updateDraggable=function(){this.options.draggable==">1"?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},o.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},o.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},o._uiChangeDrag=function(){delete this.isFreeScrolling},o.pointerDown=function(r,a){if(!this.isDraggable){this._pointerDownDefault(r,a);return}var u=this.okayPointerDown(r);u&&(this._pointerDownPreventDefault(r),this.pointerDownFocus(r),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=s(),e.addEventListener("scroll",this),this._pointerDownDefault(r,a))},o._pointerDownDefault=function(r,a){this.pointerDownPointer={pageX:a.pageX,pageY:a.pageY},this._bindPostStartEvents(r),this.dispatchEvent("pointerDown",r,[a])};var h={INPUT:!0,TEXTAREA:!0,SELECT:!0};o.pointerDownFocus=function(r){var a=h[r.target.nodeName];a||this.focus()},o._pointerDownPreventDefault=function(r){var a=r.type=="touchstart",u=r.pointerType=="touch",f=h[r.target.nodeName];!a&&!u&&!f&&r.preventDefault()},o.hasDragStarted=function(r){return Math.abs(r.x)>this.options.dragThreshold},o.pointerUp=function(r,a){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",r,[a]),this._dragPointerUp(r,a)},o.pointerDone=function(){e.removeEventListener("scroll",this),delete this.pointerDownScroll},o.dragStart=function(r,a){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),e.removeEventListener("scroll",this),this.dispatchEvent("dragStart",r,[a]))},o.pointerMove=function(r,a){var u=this._dragPointerMove(r,a);this.dispatchEvent("pointerMove",r,[a,u]),this._dragMove(r,a,u)},o.dragMove=function(r,a,u){if(this.isDraggable){r.preventDefault(),this.previousDragX=this.dragX;var f=this.options.rightToLeft?-1:1;this.options.wrapAround&&(u.x%=this.slideableWidth);var d=this.dragStartPosition+u.x*f;if(!this.options.wrapAround&&this.slides.length){var v=Math.max(-this.slides[0].target,this.dragStartPosition);d=d>v?(d+v)*.5:d;var m=Math.min(-this.getLastSlide().target,this.dragStartPosition);d=d<m?(d+m)*.5:d}this.dragX=d,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",r,[a,u])}},o.dragEnd=function(r,a){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var u=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var f=this.getRestingPosition();this.isFreeScrolling=-f>this.slides[0].target&&-f<this.getLastSlide().target}else!this.options.freeScroll&&u==this.selectedIndex&&(u+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(u),delete this.isDragSelect,this.dispatchEvent("dragEnd",r,[a])}},o.dragEndRestingSelect=function(){var r=this.getRestingPosition(),a=Math.abs(this.getSlideDistance(-r,this.selectedIndex)),u=this._getClosestResting(r,a,1),f=this._getClosestResting(r,a,-1),d=u.distance<f.distance?u.index:f.index;return d},o._getClosestResting=function(r,a,u){for(var f=this.selectedIndex,d=1/0,v=this.options.contain&&!this.options.wrapAround?function(m,b){return m<=b}:function(m,b){return m<b};v(a,d)&&(f+=u,d=a,a=this.getSlideDistance(-r,f),a!==null);)a=Math.abs(a);return{distance:d,index:f-u}},o.getSlideDistance=function(r,a){var u=this.slides.length,f=this.options.wrapAround&&u>1,d=f?i.modulo(a,u):a,v=this.slides[d];if(!v)return null;var m=f?this.slideableWidth*Math.floor(a/u):0;return r-(v.target+m)},o.dragEndBoostSelect=function(){if(this.previousDragX===void 0||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var r=this.getSlideDistance(-this.dragX,this.selectedIndex),a=this.previousDragX-this.dragX;return r>0&&a>0?1:r<0&&a<0?-1:0},o.staticClick=function(r,a){var u=this.getParentCell(r.target),f=u&&u.element,d=u&&this.cells.indexOf(u);this.dispatchEvent("staticClick",r,[a,f,d])},o.onscroll=function(){var r=s(),a=this.pointerDownScroll.x-r.x,u=this.pointerDownScroll.y-r.y;(Math.abs(a)>3||Math.abs(u)>3)&&this._pointerDone()};function s(){return{x:e.pageXOffset,y:e.pageYOffset}}return n})}(at)),at.exports}var ct={exports:{}},Vt;function Ne(){return Vt||(Vt=1,function(c){(function(t,e){c.exports?c.exports=e(t,L(),vt(),w()):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)})(window,function(e,n,l,i){var o="http://www.w3.org/2000/svg";function h(a,u){this.direction=a,this.parent=u,this._create()}h.prototype=Object.create(l.prototype),h.prototype._create=function(){this.isEnabled=!0,this.isPrevious=this.direction==-1;var a=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==a;var u=this.element=document.createElement("button");u.className="flickity-button flickity-prev-next-button",u.className+=this.isPrevious?" previous":" next",u.setAttribute("type","button"),this.disable(),u.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var f=this.createSVG();u.appendChild(f),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},h.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},h.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},h.prototype.createSVG=function(){var a=document.createElementNS(o,"svg");a.setAttribute("class","flickity-button-icon"),a.setAttribute("viewBox","0 0 100 100");var u=document.createElementNS(o,"path"),f=s(this.parent.options.arrowShape);return u.setAttribute("d",f),u.setAttribute("class","arrow"),this.isLeft||u.setAttribute("transform","translate(100, 100) rotate(180) "),a.appendChild(u),a};function s(a){return typeof a=="string"?a:"M "+a.x0+",50 L "+a.x1+","+(a.y1+50)+" L "+a.x2+","+(a.y2+50)+" L "+a.x3+",50  L "+a.x2+","+(50-a.y2)+" L "+a.x1+","+(50-a.y1)+" Z"}h.prototype.handleEvent=i.handleEvent,h.prototype.onclick=function(){if(this.isEnabled){this.parent.uiChange();var a=this.isPrevious?"previous":"next";this.parent[a]()}},h.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},h.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},h.prototype.update=function(){var a=this.parent.slides;if(this.parent.options.wrapAround&&a.length>1){this.enable();return}var u=a.length?a.length-1:0,f=this.isPrevious?0:u,d=this.parent.selectedIndex==f?"disable":"enable";this[d]()},h.prototype.destroy=function(){this.deactivate(),this.allOff()},i.extend(n.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),n.createMethods.push("_createPrevNextButtons");var r=n.prototype;return r._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new h(-1,this),this.nextButton=new h(1,this),this.on("activate",this.activatePrevNextButtons))},r.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},r.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},n.PrevNextButton=h,n})}(ct)),ct.exports}var ut={exports:{}},Qt;function He(){return Qt||(Qt=1,function(c){(function(t,e){c.exports?c.exports=e(t,L(),vt(),w()):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)})(window,function(e,n,l,i){function o(s){this.parent=s,this._create()}o.prototype=Object.create(l.prototype),o.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},o.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},o.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},o.prototype.setDots=function(){var s=this.parent.slides.length-this.dots.length;s>0?this.addDots(s):s<0&&this.removeDots(-s)},o.prototype.addDots=function(s){for(var r=document.createDocumentFragment(),a=[],u=this.dots.length,f=u+s,d=u;d<f;d++){var v=document.createElement("li");v.className="dot",v.setAttribute("aria-label","Page dot "+(d+1)),r.appendChild(v),a.push(v)}this.holder.appendChild(r),this.dots=this.dots.concat(a)},o.prototype.removeDots=function(s){var r=this.dots.splice(this.dots.length-s,s);r.forEach(function(a){this.holder.removeChild(a)},this)},o.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},o.prototype.onTap=o.prototype.onClick=function(s){var r=s.target;if(r.nodeName=="LI"){this.parent.uiChange();var a=this.dots.indexOf(r);this.parent.select(a)}},o.prototype.destroy=function(){this.deactivate(),this.allOff()},n.PageDots=o,i.extend(n.defaults,{pageDots:!0}),n.createMethods.push("_createPageDots");var h=n.prototype;return h._createPageDots=function(){this.options.pageDots&&(this.pageDots=new o(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},h.activatePageDots=function(){this.pageDots.activate()},h.updateSelectedPageDots=function(){this.pageDots.updateSelected()},h.updatePageDots=function(){this.pageDots.setDots()},h.deactivatePageDots=function(){this.pageDots.deactivate()},n.PageDots=o,n})}(ut)),ut.exports}var dt={exports:{}},Yt;function je(){return Yt||(Yt=1,function(c){(function(t,e){c.exports?c.exports=e(z(),w(),L()):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)})(window,function(e,n,l){function i(h){this.parent=h,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}i.prototype=Object.create(e.prototype),i.prototype.play=function(){if(this.state!="playing"){var h=document.hidden;if(h){document.addEventListener("visibilitychange",this.onVisibilityPlay);return}this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()}},i.prototype.tick=function(){if(this.state=="playing"){var h=this.parent.options.autoPlay;h=typeof h=="number"?h:3e3;var s=this;this.clear(),this.timeout=setTimeout(function(){s.parent.next(!0),s.tick()},h)}},i.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},i.prototype.clear=function(){clearTimeout(this.timeout)},i.prototype.pause=function(){this.state=="playing"&&(this.state="paused",this.clear())},i.prototype.unpause=function(){this.state=="paused"&&this.play()},i.prototype.visibilityChange=function(){var h=document.hidden;this[h?"pause":"unpause"]()},i.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},n.extend(l.defaults,{pauseAutoPlayOnHover:!0}),l.createMethods.push("_createPlayer");var o=l.prototype;return o._createPlayer=function(){this.player=new i(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},o.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},o.playPlayer=function(){this.player.play()},o.stopPlayer=function(){this.player.stop()},o.pausePlayer=function(){this.player.pause()},o.unpausePlayer=function(){this.player.unpause()},o.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},o.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},o.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},l.Player=i,l})}(dt)),dt.exports}var pt={exports:{}},Jt;function Xe(){return Jt||(Jt=1,function(c){(function(t,e){c.exports?c.exports=e(t,L(),w()):e(t,t.Flickity,t.fizzyUIUtils)})(window,function(e,n,l){function i(h){var s=document.createDocumentFragment();return h.forEach(function(r){s.appendChild(r.element)}),s}var o=n.prototype;return o.insert=function(h,s){var r=this._makeCells(h);if(!(!r||!r.length)){var a=this.cells.length;s=s===void 0?a:s;var u=i(r),f=s==a;if(f)this.slider.appendChild(u);else{var d=this.cells[s].element;this.slider.insertBefore(u,d)}if(s===0)this.cells=r.concat(this.cells);else if(f)this.cells=this.cells.concat(r);else{var v=this.cells.splice(s,a-s);this.cells=this.cells.concat(r).concat(v)}this._sizeCells(r),this.cellChange(s,!0)}},o.append=function(h){this.insert(h,this.cells.length)},o.prepend=function(h){this.insert(h,0)},o.remove=function(h){var s=this.getCells(h);if(!(!s||!s.length)){var r=this.cells.length-1;s.forEach(function(a){a.remove();var u=this.cells.indexOf(a);r=Math.min(u,r),l.removeFrom(this.cells,a)},this),this.cellChange(r,!0)}},o.cellSizeChange=function(h){var s=this.getCell(h);if(s){s.getSize();var r=this.cells.indexOf(s);this.cellChange(r)}},o.cellChange=function(h,s){var r=this.selectedElement;this._positionCells(h),this._getWrapShiftCells(),this.setGallerySize();var a=this.getCell(r);a&&(this.selectedIndex=this.getCellSlideIndex(a)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[h]),this.select(this.selectedIndex),s&&this.positionSliderAtSelected()},n})}(pt)),pt.exports}var ft={exports:{}},Zt;function Ge(){return Zt||(Zt=1,function(c){(function(t,e){c.exports?c.exports=e(t,L(),w()):e(t,t.Flickity,t.fizzyUIUtils)})(window,function(e,n,l){n.createMethods.push("_createLazyload");var i=n.prototype;i._createLazyload=function(){this.on("select",this.lazyLoad)},i.lazyLoad=function(){var s=this.options.lazyLoad;if(s){var r=typeof s=="number"?s:0,a=this.getAdjacentCellElements(r),u=[];a.forEach(function(f){var d=o(f);u=u.concat(d)}),u.forEach(function(f){new h(f,this)},this)}};function o(s){if(s.nodeName=="IMG"){var r=s.getAttribute("data-flickity-lazyload"),a=s.getAttribute("data-flickity-lazyload-src"),u=s.getAttribute("data-flickity-lazyload-srcset");if(r||a||u)return[s]}var f="img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]",d=s.querySelectorAll(f);return l.makeArray(d)}function h(s,r){this.img=s,this.flickity=r,this.load()}return h.prototype.handleEvent=l.handleEvent,h.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var s=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),r=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=s,r&&this.img.setAttribute("srcset",r),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},h.prototype.onload=function(s){this.complete(s,"flickity-lazyloaded")},h.prototype.onerror=function(s){this.complete(s,"flickity-lazyerror")},h.prototype.complete=function(s,r){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var a=this.flickity.getParentCell(this.img),u=a&&a.element;this.flickity.cellSizeChange(u),this.img.classList.add(r),this.flickity.dispatchEvent("lazyLoad",s,u)},n.LazyLoader=h,n})}(ft)),ft.exports}/*!
 * Flickity v2.3.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2021 Metafizzy
 */var Kt;function Ve(){return Kt||(Kt=1,function(c){(function(t,e){c.exports&&(c.exports=e(L(),Ue(),Ne(),He(),je(),Xe(),Ge()))})(window,function(e){return e})}(Z)),Z.exports}var gt={exports:{}};/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */var te;function Qe(){return te||(te=1,function(c){(function(t,e){c.exports?c.exports=e(t,z()):t.imagesLoaded=e(t,t.EvEmitter)})(typeof window<"u"?window:D,function(e,n){var l=e.jQuery,i=e.console;function o(d,v){for(var m in v)d[m]=v[m];return d}var h=Array.prototype.slice;function s(d){if(Array.isArray(d))return d;var v=typeof d=="object"&&typeof d.length=="number";return v?h.call(d):[d]}function r(d,v,m){if(!(this instanceof r))return new r(d,v,m);var b=d;if(typeof d=="string"&&(b=document.querySelectorAll(d)),!b){i.error("Bad element for imagesLoaded "+(b||d));return}this.elements=s(b),this.options=o({},this.options),typeof v=="function"?m=v:o(this.options,v),m&&this.on("always",m),this.getImages(),l&&(this.jqDeferred=new l.Deferred),setTimeout(this.check.bind(this))}r.prototype=Object.create(n.prototype),r.prototype.options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(d){d.nodeName=="IMG"&&this.addImage(d),this.options.background===!0&&this.addElementBackgroundImages(d);var v=d.nodeType;if(!(!v||!a[v])){for(var m=d.querySelectorAll("img"),b=0;b<m.length;b++){var k=m[b];this.addImage(k)}if(typeof this.options.background=="string"){var g=d.querySelectorAll(this.options.background);for(b=0;b<g.length;b++){var x=g[b];this.addElementBackgroundImages(x)}}}};var a={1:!0,9:!0,11:!0};r.prototype.addElementBackgroundImages=function(d){var v=getComputedStyle(d);if(v)for(var m=/url\((['"])?(.*?)\1\)/gi,b=m.exec(v.backgroundImage);b!==null;){var k=b&&b[2];k&&this.addBackground(k,d),b=m.exec(v.backgroundImage)}},r.prototype.addImage=function(d){var v=new u(d);this.images.push(v)},r.prototype.addBackground=function(d,v){var m=new f(d,v);this.images.push(m)},r.prototype.check=function(){var d=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}function v(m,b,k){setTimeout(function(){d.progress(m,b,k)})}this.images.forEach(function(m){m.once("progress",v),m.check()})},r.prototype.progress=function(d,v,m){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!d.isLoaded,this.emitEvent("progress",[this,d,v]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,d),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+m,d,v)},r.prototype.complete=function(){var d=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(d,[this]),this.emitEvent("always",[this]),this.jqDeferred){var v=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[v](this)}};function u(d){this.img=d}u.prototype=Object.create(n.prototype),u.prototype.check=function(){var d=this.getIsImageComplete();if(d){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src},u.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},u.prototype.confirm=function(d,v){this.isLoaded=d,this.emitEvent("progress",[this,this.img,v])},u.prototype.handleEvent=function(d){var v="on"+d.type;this[v]&&this[v](d)},u.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},u.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},u.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function f(d,v){this.url=d,this.element=v,this.img=new Image}return f.prototype=Object.create(u.prototype),f.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var d=this.getIsImageComplete();d&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},f.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},f.prototype.confirm=function(d,v){this.isLoaded=d,this.emitEvent("progress",[this,this.element,v])},r.makeJQueryPlugin=function(d){d=d||e.jQuery,d&&(l=d,l.fn.imagesLoaded=function(v,m){var b=new r(this,v,m);return b.jqDeferred.promise(l(this))})},r.makeJQueryPlugin(),r})}(gt)),gt.exports}/*!
 * Flickity imagesLoaded v2.0.0
 * enables imagesLoaded option for Flickity
 */(function(c){(function(t,e){c.exports?c.exports=e(t,Ve(),Qe()):t.Flickity=e(t,t.Flickity,t.imagesLoaded)})(window,function(e,n,l){n.createMethods.push("_createImagesLoaded");var i=n.prototype;return i._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},i.imagesLoaded=function(){if(!this.options.imagesLoaded)return;var o=this;function h(s,r){var a=o.getParentCell(r.img);o.cellSizeChange(a&&a.element),o.options.freeScroll||o.positionSliderAtSelected()}l(this.slider).on("progress",h)},n})})(Te);const Ye={name:"FlickityCarousel",props:{options:{type:Object,default:()=>({initialIndex:0,groupCells:!1,imagesLoaded:!0,pageDots:!0,selectedAttraction:.2,percentPosition:!1,friction:.8,cellAlign:"left",contain:!0})}},data(){return{flickity:null,observer:null}},mounted(){this.initFlickity();let c;this.observer=new ResizeObserver(()=>{c&&clearTimeout(c),c=setTimeout(()=>{this.resize()},700)}),this.observer.observe(this.$el)},beforeDestroy(){this.observer&&this.observer.disconnect(),this.flickity&&this.flickity.destroy()},methods:{initFlickity(){this.flickity=new Be(this.$refs.flickity,this.options),this.$emit("flickity-ready",this.flickity)},resize(){var c;(c=this.flickity)!=null&&c.resize&&this.flickity.resize()}}};var Je=function(){var t=this,e=t._self._c;return e("div",{ref:"flickity",staticClass:"_flickityCarousel"},[t._t("default")],2)},Ze=[],Ke=M(Ye,Je,Ze,!1,null,"4d21b56a");const ti=Ke.exports,ei={props:{medias_with_linked:Array,publication_path:String},components:{FilesList:ie},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}};var ii=function(){var t=this,e=t._self._c;return e("BaseModal2",{attrs:{title:t.$t("change_order")},on:{close:function(n){return t.$emit("close")}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("div"),e("button",{staticClass:"u-button",attrs:{type:"button"},on:{click:function(n){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("close"))+" ")])]},proxy:!0}])},[e("FilesList",{attrs:{mode:"carousel",medias_with_linked:t.medias_with_linked,publication_path:t.publication_path,edit_mode:!0},on:{pickMedias:function(n){return t.$emit("pickMedias",n)},reorderMedias:function(n){return t.$emit("reorderMedias",n)},removeMediaAtIndex:function(n){return t.$emit("removeMediaAtIndex",n)}}})],1)},si=[],ni=M(ei,ii,si,!1,null,"baaa75a5");const ri=ni.exports,oi={props:{medias_with_linked:Array,context:String,page_template:String,show_fs_button:Boolean,number_of_max_medias:[Boolean,Number],publication_path:String,publi_width:Number,edit_mode:Boolean,can_edit:Boolean},components:{FlickityCarousel:ti,MediaPicker:mt,CaptionCreditsPage:ee,ChangeOrderModal:ri},data(){return{show_media_picker:!1,show_change_order_modal:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{slider_key(){const c=this.medias_with_linked.map((t,e)=>t.meta_filename_in_project+"-index-"+e);return c?JSON.stringify(c):"none"}},methods:{itemStyle({media_with_linked:c}){let t={};return t["--object-fit"]=c.objectFit||"cover",t},mediaIsSquare(c){var t;return((t=c.$infos)==null?void 0:t.ratio)===1},showObjectFitFor(c){return!(!c._linked_media||this.mediaIsSquare(c._linked_media)||!["image","video","stl","pdf"].includes(c._linked_media.$type))}}};var ai=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_carousel",class:{}},[e("FlickityCarousel",{key:t.slider_key,staticClass:"_mainCarousel"},t._l(t.medias_with_linked,function(n,l){return e("div",{key:n._linked_media&&n._linked_media.$path||"no_media_"+l,staticClass:"carousel-cell",style:t.itemStyle({media_with_linked:n}),attrs:{"data-mediatype":n._linked_media.$type}},[n._linked_media?e("MediaContent",{attrs:{file:n._linked_media,resolution:t.context==="preview"?220:1600,context:t.context,show_fs_button:t.show_fs_button,display_credits_caption:!0,can_edit_credits_caption:t.can_edit}}):e("span",{staticClass:"_noSourceMedia u-instructions",domProps:{textContent:t._s(t.$t("source_media_missing"))}}),e("CaptionCreditsPage",{attrs:{media:n._linked_media,publication_path:t.publication_path,can_edit:t.can_edit}}),t.edit_mode?e("div",{staticClass:"_btnRow"},[e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){t.show_change_order_modal=!0}}},[e("b-icon",{attrs:{icon:"arrow-left-right"}})],1),t.showObjectFitFor(n)?[!n.objectFit||n.objectFit==="cover"?t._e():e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"cover"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio"}})],1),n.objectFit!=="contain"?e("button",{staticClass:"u-button u-button_icon u-button_small",attrs:{type:"button"},on:{click:function(i){return t.$emit("updateMediaOpt",{index:l,opt:{objectFit:"contain"}})}}},[e("b-icon",{attrs:{icon:"aspect-ratio-fill"}})],1):t._e()]:t._e(),e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(i){return t.$emit("removeMediaAtIndex",{index:l})}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],2):t._e()],1)}),0),t.show_change_order_modal?e("ChangeOrderModal",{attrs:{medias_with_linked:t.medias_with_linked,publication_path:t.publication_path},on:{pickMedias:function(n){return t.$emit("pickMedias",n)},reorderMedias:function(n){return t.$emit("reorderMedias",n)},removeMediaAtIndex:function(n){return t.$emit("removeMediaAtIndex",n)},close:function(n){t.show_change_order_modal=!1}}}):t._e(),t.can_edit?e("div",{staticClass:"_mediaPickerTile"},[e("EditBtn",{attrs:{btn_type:"add",is_unfolded:!1},on:{click:function(n){t.show_media_picker=!0}}}),t.show_media_picker?e("MediaPicker",{attrs:{publication_path:t.publication_path},on:{pickMedias:function(n){return t.$emit("pickMedias",n)},close:function(n){t.show_media_picker=!1}}}):t._e(),e("DropZone",{staticClass:"_dzAfter",on:{mediaDropped:function(n){return t.$emit("pickMedias",[n])}}})],1):t._e()],1)},li=[],hi=M(oi,ai,li,!1,null,"494b50ee");const ci=hi.exports,ui={props:{publimodule:Object,context:{type:String,default:"full"},page_template:String,number_of_max_medias:[Boolean,Number],show_fs_button:Boolean,edit_mode:Boolean,can_edit:Boolean},components:{MosaicMediaGrid:me,FilesList:ie,MediaCarousel:ci},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{publication_path(){return this.getParent(this.publimodule.$path)},medias_with_linked(){return this.publimodule.source_medias?this.publimodule.source_medias.reduce((c,t)=>{const e=this.getSourceMedia({source_media:t,folder_path:this.publication_path});if(e){const n=Object.assign({},t,{_linked_media:e});c.push(n)}return c},[]):[]}},methods:{async pickMedias(c){let t=this.publimodule.source_medias.slice()||[];for(const e of c){const n=this.$root.publication_include_mode,l=await this.prepareMediaForPublication({path_to_source_media_meta:e.$path,publication_path:this.publication_path,import_mode:n});t.push(l)}this.$emit("updateMeta",{source_medias:t})},async removeMediaAtIndex({index:c,remove_source:t=!0}){const e=this.publimodule.source_medias.slice(),n=e[c];if(e.splice(c,1),e.length===0?this.$emit("remove",{with_content:!1}):this.$emit("updateMeta",{source_medias:e}),Object.prototype.hasOwnProperty.call(n,"meta_filename")&&t===!0){const l=this.getSourceMedia({source_media:{meta_filename:n.meta_filename},folder_path:this.publication_path});await this.$api.deleteItem({path:l.$path})}},reorderMedias(c){const t=c.map(e=>(delete e._linked_media,e));this.$emit("updateMeta",{source_medias:t})},updateMediaOpt({index:c,opt:t}){const e=this.publimodule.source_medias.slice();Object.assign(e[c],t),this.$emit("updateMeta",{source_medias:e})}}};var di=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[e("div",{key:t.medias_with_linked.length>1?"multiple":"single",staticClass:"_mediasModule",style:`--number_of_medias: ${t.medias_with_linked.length}`},[e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.publimodule.module_type==="mosaic"?e("MosaicMediaGrid",{key:"mosaic",attrs:{medias_with_linked:t.medias_with_linked,publimodule:t.publimodule,context:t.context,page_template:t.page_template,show_fs_button:t.show_fs_button,number_of_max_medias:t.number_of_max_medias,publication_path:t.publication_path,edit_mode:t.edit_mode,can_edit:t.can_edit},on:{pickMedias:t.pickMedias,removeMediaAtIndex:t.removeMediaAtIndex,updateMediaOpt:t.updateMediaOpt}}):t.publimodule.module_type==="files"?e("FilesList",{key:"filelist",attrs:{mode:"source",medias_with_linked:t.medias_with_linked,publication_path:t.publication_path,edit_mode:t.edit_mode,can_edit:t.can_edit},on:{pickMedias:t.pickMedias,reorderMedias:t.reorderMedias,removeMediaAtIndex:t.removeMediaAtIndex}}):t.publimodule.module_type==="carousel"?e("MediaCarousel",{attrs:{medias_with_linked:t.medias_with_linked,context:t.context,page_template:t.page_template,show_fs_button:t.show_fs_button,publication_path:t.publication_path,publi_width:t.publimodule.size,edit_mode:t.edit_mode,can_edit:t.can_edit},on:{pickMedias:t.pickMedias,reorderMedias:t.reorderMedias,removeMediaAtIndex:t.removeMediaAtIndex,updateMediaOpt:t.updateMediaOpt}}):t._e()],1)],1)])},pi=[],fi=M(ui,di,pi,!1,null,"4aa29987");const gi=fi.exports,mi={props:{publimodule:Object,module_position:String,module_being_edited:String,magnification:Number,border_radius:{type:Object,default:()=>({x:0,y:0})},context:String,page_template:String,number_of_max_medias:{type:[Boolean,Number],default:!1},can_edit:Boolean},components:{MediasModule:gi},inject:{$getMapOptions:{default:!1}},data(){return{is_repicking_location:!1,observer:void 0,show_instructions_modal:!1}},created(){},mounted(){this.$eventHub.$on(`module.enable_edit.${this.module_meta_filename}`,this.enableEdit),this.$eventHub.$on(`module.duplicate.${this.module_meta_filename}`,this.duplicateModule),this.$eventHub.$on(`module.remove.${this.module_meta_filename}`,this.removeModule),this.$eventHub.$on(`publication.story.scrollTo.${this.publimodule.$path}`,this.scrollToModule),this.$eventHub.$on("publication.map.click",this.setRepickLocation),this.startIntersectionObserver()},beforeDestroy(){this.$eventHub.$off(`module.enable_edit.${this.module_meta_filename}`,this.enableEdit),this.$eventHub.$off(`module.duplicate.${this.module_meta_filename}`,this.duplicateModule),this.$eventHub.$off(`module.remove.${this.module_meta_filename}`,this.removeModule),this.$eventHub.$off(`publication.story.scrollTo.${this.publimodule.$path}`,this.scrollToModule),this.$eventHub.$off("publication.map.click",this.setRepickLocation),this.endIntersectionObserver()},watch:{edit_mode(){this.$refs.textBloc&&(this.edit_mode?this.$nextTick(()=>this.$refs.textBloc.enableEditor()):this.$refs.textBloc.disableEditor()),this.edit_mode||(this.is_repicking_location=!1)}},computed:{is_associated_to_map(){return this.$getMapOptions},is_active_on_map(){return this.$getMapOptions?this.$getMapOptions().opened_pin_path===this.publimodule.$path:!1},zoom_level_options(){return new Array(20).fill(0).map((t,e)=>e===0?{key:"",text:this.$t("dont_zoom")}:e===1?{key:e,text:e+" ("+this.$t("very_far")+")"}:e===19?{key:e,text:e+" ("+this.$t("very_close")+")"}:{key:e})},available_module_types(){return this.publimodule.module_type==="text"?["text","mosaic","carousel","files"]:["mosaic","carousel","files"]},pin_options(){return this.$getMapOptions?this.$getMapOptions().pins_infos.find(({path:c})=>c===this.publimodule.$path):!1},has_coordinates(){var c,t;return((c=this.publimodule.location)==null?void 0:c.latitude)&&((t=this.publimodule.location)==null?void 0:t.longitude)},edit_mode(){return this.module_being_edited===this.publimodule.$path},module_meta_filename(){return this.publimodule.$path.split("/").at(-1)},show_caption(){var c;return!(this.module_type==="text"||this.module_type==="shape"||this.publimodule.source_medias.length===1&&((c=this.publimodule.source_medias[0].meta_filename)!=null&&c.startsWith("text-"))||!this.publimodule.caption&&!this.edit_mode)},module_type(){return this.getModuleType(this.publimodule.module_type)},show_fs_button(){return this.page_template==="page_by_page"?this.publimodule.show_fs_button===!0:!0},first_media(){return this.firstMedia(this.publimodule)},media_styles(){let c=0;if(!this.$root.is_mobile_view)return this.publimodule.align==="center"&&(this.publimodule.size===66.6?c=16.6:this.publimodule.size===50?c=25:this.publimodule.size===33.3&&(c=33.3)),this.publimodule.align==="right"&&(this.publimodule.size===66.6?c=33.3:this.publimodule.size===50?c=50:this.publimodule.size===33.3&&(c=66.6)),{"--module-width":this.publimodule.size||100,"--module-margin-left":c}}},methods:{async updateMeta(c){await this.$api.updateMeta({path:this.publimodule.$path,new_meta:c}).catch(t=>{throw this.$alertify.delay(4e3).error(t),t})},repickLocation(){this.is_repicking_location=!0,this.$eventHub.$emit("publication.map.disableTools")},showModuleOnMap(){this.$eventHub.$emit("publication.map.openPin",this.publimodule.$path)},pinButtonClick(){this.scrollToModule()},preventClickTraversing(c){this.edit_mode&&c.stopPropagation()},async setRepickLocation({longitude:c,latitude:t}){this.is_repicking_location&&(await this.updateMeta({location:{longitude:c,latitude:t}}).catch(e=>{throw this.$alertify.delay(4e3).error(e),e}),this.is_repicking_location=!1,await new Promise(e=>setTimeout(e,100)),this.showModuleOnMap())},async eraseCoords(){await this.updateMeta({location:{}}).catch(c=>{throw this.$alertify.delay(4e3).error(c),c})},enableEdit(){this.$emit("update:module_being_edited",this.publimodule.$path)},disableEdit(){this.$emit("update:module_being_edited",void 0)},scrollToModule(c="auto"){this.$el&&(console.log("scrollToModule "+this.publimodule.$path),this.$el.scrollIntoView({behavior:c,block:"start",inline:"nearest"}))},startIntersectionObserver(){let c=(e,n)=>{e.forEach(l=>{l.isIntersecting&&this.is_associated_to_map&&this.has_coordinates&&!this.is_active_on_map&&this.showModuleOnMap()})},t="-10%";try{t=window.getComputedStyle(this.$el).getPropertyValue("scroll-margin-top")}catch{}this.observer=new IntersectionObserver(c,{rootMargin:`${t} 0% -80% 0%`}),this.observer.observe(this.$refs.sentinel)},endIntersectionObserver(){this.observer.unobserve(this.$el)},changeModuleType(c){const t=c.target.value;this.updateMeta({module_type:t})},async duplicateModule(){let c={};this.page_template==="page_by_page"&&(c.x=(this.publimodule.x||0)+10,c.y=(this.publimodule.y||0)+10);const t=await this.duplicateModuleWithSourceMedias({og_module:this.publimodule,addtl_meta_to_module:c});this.$emit("duplicate",t),this.disableEdit()},async removeModule({with_content:c=!0}={}){if(c)try{for(let t of this.publimodule.source_medias)if(Object.prototype.hasOwnProperty.call(t,"meta_filename")){const e=this.getParent(this.publimodule.$path),n=this.getSourceMedia({source_media:t,folder_path:e});n&&await this.$api.deleteItem({path:n.$path})}}catch(t){this.$alertify.delay(4e3).error(t)}await this.$api.deleteItem({path:this.publimodule.$path}).catch(t=>{throw this.$alertify.delay(4e3).error(t),t}),this.$emit("remove")}}};var vi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_publicationModule",attrs:{"data-type":t.module_type},on:{click:t.preventClickTraversing}},[e("transition",{attrs:{name:"showOptions",mode:"out-in",appear:""}},[t.edit_mode&&t.page_template!=="page_by_page"?e("div",{staticClass:"_sideOptions"},[e("div",{staticClass:"_sideOptions--content"},[e("div",{staticClass:"_arrows"},[t.$listeners.hasOwnProperty("moveUp")?e("button",{staticClass:"u-button _sideBtns _moveBefore",attrs:{disabled:t.module_position==="first"||t.module_position==="alone",type:"button"},on:{click:function(n){return t.$emit("moveUp")}}},[e("svg",{staticStyle:{transform:"rotate(90deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 168 168"}},[e("path",{staticStyle:{fill:"currentColor"},attrs:{d:"M87.46,49.46,73.39,64.77a65.3,65.3,0,0,1-6.15,6.15A47.8,47.8,0,0,1,61,75.29H131.6V91.14H61A39.1,39.1,0,0,1,67,95.51q2.81,2.46,6.36,6.15L87.46,117,74.48,128,34.17,83.21,74.48,38.39Z"}})])]):t._e(),t.$listeners.hasOwnProperty("moveDown")?e("button",{staticClass:"u-button _sideBtns _moveAfter",attrs:{type:"button",disabled:t.module_position==="last"||t.module_position==="alone"},on:{click:function(n){return t.$emit("moveDown")}}},[e("svg",{staticStyle:{transform:"rotate(90deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 168 168"}},[e("path",{staticStyle:{fill:"currentColor"},attrs:{d:"M78.31,117l14.07-15.31a65.3,65.3,0,0,1,6.15-6.15,47.52,47.52,0,0,1,6.29-4.37H34.17V75.29h70.65a39.1,39.1,0,0,1-6.08-4.37q-2.8-2.46-6.36-6.15L78.31,49.46l13-11.07L131.6,83.21,91.29,128Z"}})])]):t._e()]),e("div",{staticClass:"_options"},[e("div",{staticClass:"_advanced_menu"},[e("div",[e("select",{attrs:{disabled:t.available_module_types.length<=1},domProps:{value:t.publimodule.module_type},on:{change:t.changeModuleType}},t._l(t.available_module_types,function(n){return e("option",{key:n,domProps:{value:n}},[t._v(" "+t._s(t.$t(`module.label.${n}`))+" ")])}),0)]),e("fieldset",{staticClass:"_buttonRow"},[e("button",{staticClass:"u-button u-button_verysmall u-button_bleuvert",attrs:{type:"button"},on:{click:function(n){t.show_instructions_modal=!t.show_instructions_modal}}},[e("b-icon",{class:{"is--active":t.show_instructions_modal},attrs:{icon:t.show_instructions_modal?"info-circle-fill":"info-circle"}})],1),t.show_instructions_modal?e("BaseModal2",{attrs:{title:t.$t("text_image_layout")},on:{close:function(n){t.show_instructions_modal=!1}}},[e("p",[t._v(" "+t._s(t.$t("width_alignment_grid_only_non_mobile"))+" ")])]):t._e(),t._l([100,66.6,50,33.3],function(n){return e("button",{key:n,staticClass:"u-button u-button_verysmall u-button_bleuvert _sizes",class:{"is--active":!t.publimodule.size&&n===100||t.publimodule.size===n},attrs:{type:"button"},on:{click:function(l){return t.updateMeta({size:n})}}},[t._v(" "+t._s(n)+"% ")])}),t.publimodule.size&&t.publimodule.size!==100?t._l(["left","center","right"],function(n){return e("button",{key:n,staticClass:"u-button u-button_small u-button_bleuvert",class:{"is--active":!t.publimodule.align&&n==="left"||t.publimodule.align===n},attrs:{type:"button"},on:{click:function(l){return t.updateMeta({align:n})}}},[n==="left"?e("b-icon",{attrs:{icon:"align-start"}}):t._e(),n==="center"?e("b-icon",{attrs:{icon:"align-center"}}):t._e(),n==="right"?e("b-icon",{attrs:{icon:"align-end"}}):t._e()],1)}):t._e()],2)]),t.is_associated_to_map?e("div",{staticClass:"_carto"},[t._e(),e("div",{},[e("button",{staticClass:"u-button u-button_red u-button_small",attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),t.repickLocation.apply(null,arguments)}}},[t.has_coordinates?[e("b-icon",{attrs:{icon:"pin-map-fill"}}),t._v(" "+t._s(t.$t("change_location"))+" ")]:[e("b-icon",{attrs:{icon:"pin-map"}}),t._v(" "+t._s(t.$t("place_on_map"))+" ")]],2)]),t.has_coordinates?e("div",{},[e("SelectField2",{attrs:{value:t.publimodule.zoom_level,options:t.zoom_level_options,can_edit:t.can_edit,hide_validation:!0,size:"small"},on:{change:function(n){return t.updateMeta({zoom_level:n})}}})],1):t._e(),t.has_coordinates?e("div",{},[e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.eraseCoords}},[e("b-icon",{attrs:{icon:"x-circle"}}),t._v(" "+t._s(t.$t("erase"))+" ")],1)]):t._e()]):t._e(),e("DropDown",{attrs:{show_label:!1,right:!0}},[e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.duplicateModule}},[e("b-icon",{attrs:{icon:"file-plus"}}),t._v(" "+t._s(t.$t("duplicate"))+" ")],1),e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(n){return t.$emit("changeSectionForModule")}}},[e("b-icon",{attrs:{icon:"arrow-left-right"}}),t._v(" "+t._s(t.$t("change_section"))+" ")],1),t.can_edit?e("RemoveMenu",{attrs:{show_button_text:!0},on:{remove:t.removeModule}}):t._e()],1)],1),e("div",{staticClass:"_saveBtn"},[e("EditBtn",{attrs:{btn_type:"check",label_position:"left"},on:{click:t.disableEdit}})],1),t.is_repicking_location?e("div",{staticClass:"_repickNotice"},[e("div",{staticClass:"_repickNotice--content"},[e("div",[t._v(" "+t._s(t.$t("click_on_map_to_repick_location"))+" ")]),e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(n){t.is_repicking_location=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")])])]):t._e()])]):t._e()]),e("div",{staticClass:"_content",style:t.media_styles},[e("div",{ref:"sentinel"}),t.is_associated_to_map&&t.has_coordinates?e("button",{ref:"pinButton",staticClass:"u-button _pinButton",class:{"is--active":t.is_active_on_map},style:`--pin-color: ${t.pin_options?t.pin_options.color:""}`,attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),t.pinButtonClick.apply(null,arguments)}}},[e("img",{attrs:{src:t.pin_options.pin_preview_src}})]):t._e(),t.can_edit&&(t.page_template!=="page_by_page"||t.publimodule.module_type==="text")?e("div",{staticClass:"_floatingEditBtn"},[e("span",{on:{click:function(n){return n.stopPropagation(),t.enableEdit.apply(null,arguments)},touchstart:function(n){return n.stopPropagation(),t.enableEdit.apply(null,arguments)}}},[t.edit_mode?t._e():e("EditBtn",{attrs:{label_position:"left"}})],1)]):t._e(),["mosaic","carousel","files"].includes(t.publimodule.module_type)?e("MediasModule",{attrs:{publimodule:t.publimodule,edit_mode:t.edit_mode,can_edit:t.can_edit,context:t.context,page_template:t.page_template,number_of_max_medias:t.number_of_max_medias,show_fs_button:t.show_fs_button},on:{updateMeta:t.updateMeta,remove:t.removeModule}}):t.publimodule.module_type==="text"&&t.first_media?e("CollaborativeEditor2",{ref:"textBloc",attrs:{path:t.first_media.$path,content:t.first_media.$content,scrollingContainer:t.$el,line_selected:!1,can_edit:t.can_edit},on:{lineClicked:function(n){return t.$emit("lineClicked",n)},contentIsEdited:function(n){return t.$emit("contentIsEdited",n)},contentIsNotEdited:function(n){return t.$emit("contentIsNotEdited",n)}}}):t.module_type==="shape"?[e("svg",{attrs:{viewBox:"0 0 100 100",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg"}},[t.publimodule.module_type==="ellipsis"?e("circle",{attrs:{cx:"50",cy:"50",r:50-t.publimodule.outline_width*t.magnification/8,"vector-effect":"non-scaling-stroke"}}):t.publimodule.module_type==="rectangle"?e("rect",{attrs:{x:t.publimodule.outline_width*t.magnification/4,y:t.publimodule.outline_width*t.magnification/4,width:100-t.publimodule.outline_width*t.magnification/2,height:100-t.publimodule.outline_width*t.magnification/2,"vector-effect":"non-scaling-stroke",rx:t.border_radius.x,ry:t.border_radius.y}}):t.publimodule.module_type==="line"?e("g",[e("rect",{attrs:{width:"100",height:"100","vector-effect":"non-scaling-stroke",stroke:"none",rx:t.border_radius.x,ry:t.border_radius.y}}),e("line",{attrs:{x1:t.publimodule.outline_width*t.magnification/4||0,y1:"50",x2:100-(t.publimodule.outline_width*t.magnification/4||0),y2:"50","vector-effect":"non-scaling-stroke"}})]):t.publimodule.module_type==="arrow"?e("g",[e("rect",{attrs:{width:"100",height:"100","vector-effect":"non-scaling-stroke",stroke:"none",rx:t.border_radius.x,ry:t.border_radius.y}}),e("line",{attrs:{x1:t.publimodule.outline_width*t.magnification/4||0,y1:"50",x2:100-(t.publimodule.outline_width*t.magnification/4||0),y2:"50","vector-effect":"non-scaling-stroke"}}),e("g",{attrs:{transform:`
              translate(${100-(t.publimodule.outline_width*t.magnification/4||0)}, 50)`,preserveAspectRatio:""}},[e("line",{attrs:{x1:"0",y1:"0",x2:"-10",y2:"-10","vector-effect":"non-scaling-stroke"}}),e("line",{attrs:{x1:"0",y1:"0",x2:"-10",y2:"10","vector-effect":"non-scaling-stroke"}})])]):t._e()])]:e("small",[t._v(t._s(t.$t("nothing_to_show")))]),t.show_caption?e("div",{staticClass:"_captionField"},[e("CollaborativeEditor2",{staticClass:"_caption",attrs:{label:t.edit_mode&&!t.publimodule.caption&&t.page_template!=="page_by_page"?t.$t("add_caption"):void 0,field_to_edit:"caption",content:t.publimodule.caption,path:t.publimodule.$path,custom_formats:["bold","italic","link"],is_collaborative:!1,can_edit:t.page_template!=="page_by_page"?t.can_edit:!1}}),t.edit_mode&&t.first_media&&t.first_media.caption&&!t.publimodule.caption&&t.page_template!=="page_by_page"?e("div",{},[e("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("copy_first_media_caption"))+" ")]),e("button",{attrs:{type:"button"},on:{click:function(n){return t.updateMeta({caption:t.first_media.caption})}}},[t._v(" "+t._s(t.first_media.caption)+" ")])]):t._e()],1):t._e()],2),t.edit_mode&&t.page_template!=="page_by_page"?e("div",{staticClass:"_selectorIndicator"}):t._e()],1)},_i=[],yi=M(mi,vi,_i,!1,null,"18e3243f");const bi=yi.exports,xi={props:{publication:Object,section:Object,can_edit:Boolean},components:{ModuleCreator:ae,PublicationModule:bi},data(){return{medias:[],module_being_edited:void 0}},created(){this.$eventHub.$on("module.none_edited",this.unselectModuleEdited)},async mounted(){},beforeDestroy(){this.$eventHub.$off("module.none_edited",this.unselectModuleEdited)},watch:{},computed:{section_modules_list(){return this.getModulesForSection({publication:this.publication,section:this.section}).map(({_module:c})=>c)},story_styles(){return this.makeStoryStyles({publication:this.publication})},title_is_visible(){return this.section.section_title_is_visible!==!1}},methods:{async addModules({meta_filenames:c}){await this.insertModuleMetaFilenamesToList2({publication:this.publication,section:this.section,meta_filenames:c});const t=c.at(-1);this.toggleNewModuleEdit({meta_filename:t})},async insertModules({meta_filenames:c,index:t}){await this.insertModuleMetaFilenamesToList2({publication:this.publication,section:this.section,index:t,meta_filenames:c});const e=c.at(-1);this.toggleNewModuleEdit({meta_filename:e})},toggleNewModuleEdit({meta_filename:c}){const t=this.publication.$path+"/"+c;setTimeout(()=>{this.$eventHub.$emit(`module.enable_edit.${c}`),this.$eventHub.$emit("publication.map.openPin",t)},150)},async toggleSectionVisibility(){await this.$api.updateMeta({path:this.section.$path,new_meta:{section_title_is_visible:!this.title_is_visible}})},async duplicateSection(){await this.duplicateSection2({publication:this.publication,og_modules:this.section_modules_list,section:this.section}),this.$emit("nextSection")},async removeSection(){this.$emit("prevSection"),this.removeSection2({publication:this.publication,group:"sections_list",section:this.section})},async moveModuleTo({path:c,new_position:t}){await this.moveModuleTo2({publication:this.publication,section:this.section,meta_filename:this.getFilename(c),new_position:t})},async duplicatePublicationMedia({source_module_path:c,copy_meta_filename:t}){const e=this.getFilename(c);await this.duplicatePublicationMedia2({publication:this.publication,section:this.section,source_meta_filename:e,copy_meta_filename:t})},unselectModuleEdited(){this.module_being_edited=void 0},async removeModule(c){await this.removeModule2({publication:this.publication,section:this.section,path:c})}}};var Ci=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_singleSection"},[e("div",{staticClass:"_storyContainer"},[t.section?e("div",{staticClass:"_storyContent",style:t.story_styles},[t.can_edit||t.section.section_title||t.section.section_description?e("div",{staticClass:"_topbar"},[e("div",{staticClass:"_text"},[t.can_edit||t.title_is_visible?e("div",{staticClass:"_sectionTitle",class:{"is--hidden":!t.title_is_visible}},[e("TitleField",{attrs:{field_name:"section_title",content:t.section.section_title||t.$t("untitled"),path:t.section.$path,required:!0,maxlength:60,tag:"h1",can_edit:t.can_edit}}),t.can_edit?e("EditBtn",{attrs:{btn_type:t.title_is_visible?"show":"hide",label:t.$t("show_title")},on:{click:t.toggleSectionVisibility}}):t._e()],1):t._e(),t.section.section_description?e("div",[e("div",{domProps:{textContent:t._s(t.section.section_description)}})]):t._e()]),t.can_edit?e("div",{staticClass:"_buttons"},[t.can_edit?e("DropDown",{attrs:{show_label:!1,right:!0}},[e("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.duplicateSection}},[e("b-icon",{attrs:{icon:"file-plus"}}),t._v(" "+t._s(t.$t("duplicate"))+" ")],1),e("RemoveMenu",{attrs:{modal_title:t.$t("remove_section")},on:{remove:t.removeSection}})],1):t._e()],1):t._e()]):t._e(),e("transition-group",{staticClass:"_storyModules",attrs:{tag:"div",name:"StoryModules",appear:"",duration:700}},[t._l(t.section_modules_list,function(n,l){return[e("div",{key:"mc_"+l,staticClass:"_spacer"},[t.can_edit?e("ModuleCreator",{attrs:{publication_path:t.publication.$path,types_available:["import","write","embed","table"]},on:{addModules:({meta_filenames:i})=>t.insertModules({meta_filenames:i,index:l})}}):t._e()],1),e("PublicationModule",{key:n.$path,staticClass:"_mediaPublication",attrs:{publimodule:n,module_being_edited:t.module_being_edited,module_position:t.section_modules_list.length===1?"alone":l===0?"first":l===t.section_modules_list.length-1?"last":"inbetween",can_edit:t.can_edit},on:{"update:module_being_edited":function(i){t.module_being_edited=i},moveUp:function(i){return t.moveModuleTo({path:n.$path,new_position:l-1})},moveDown:function(i){return t.moveModuleTo({path:n.$path,new_position:l+1})},duplicate:function(i){return t.duplicatePublicationMedia({source_module_path:n.$path,copy_meta_filename:i})},changeSectionForModule:function(i){return t.$emit("changeSectionForModule",n.$path)},remove:function(i){return t.removeModule(n.$path)}}})]})],2),t.can_edit?e("ModuleCreator",{staticClass:"_lastModule",attrs:{start_collapsed:!1,publication_path:t.publication.$path,types_available:["import","write","embed","table"]},on:{addModules:t.addModules}}):t._e()],1):t._e()])])},Ei=[],Si=M(xi,Ci,Ei,!1,null,"e6746e7f");const Ai=Si.exports;export{Ai as default};
