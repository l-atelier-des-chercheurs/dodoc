import{n as o,A as i,_ as n}from"../build.js";const _={props:{},components:{AuthorCard:i,DisplayOnMap:()=>n(()=>import("./DisplayOnMap-DmHIlKGh.js"),[])},data(){return{path:"authors",authors:[],search_author_name:"",filter_by_group:"",view_mode:"list"}},created(){},async mounted(){this.$api.updateSelfPath(this.path),this.authors=await this.$api.getFolders({path:this.path}),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{pins(){const s="#142257";return this.filtered_authors.reduce((t,e)=>{if(e.$location){const{latitude:a,longitude:r}=e.$location;a&&r&&t.push({latitude:a,longitude:r,path:e.$path,label:e.name,color:s,pin_preview:"text"})}return t},[])},sorted_authors(){return this.authors.slice().sort((s,t)=>s.name.localeCompare(t.name))},filtered_authors(){return this.sorted_authors.filter(s=>{var t;return!(this.search_author_name&&!this.twoStringsSearch(s.name,this.search_author_name)||this.filter_by_group&&!((t=s.group)!=null&&t.includes(this.filter_by_group))||this.view_mode==="map"&&!s.$location)})},all_groups(){return this.sorted_authors.reduce((s,t)=>{var e;return(e=t.group)==null||e.map(a=>{s.some(r=>r===a)||a&&s.push(a)}),s},[]).sort((s,t)=>s.localeCompare(t))}},methods:{toggleGroupFilter(s){this.filter_by_group=s===this.filter_by_group?"":s},pinClicked(s){const t=this.createURLFromPath(s);this.$router.push(t)}}};var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_authorsView"},[e("h1",{staticClass:"_title",domProps:{textContent:t._s(t.$t("list_of_accounts"))}}),e("div",{staticClass:"u-spacingBottom"},[t._v(" "+t._s(t.$t("accounts_displayed",{count:t.filtered_authors.length,total:t.authors.length}))+" ")]),e("div",{staticClass:"_topRow"},[e("div",{staticClass:"_searchField"},[e("SearchInput",{attrs:{search_placeholder:t.$t("search_by_name"),name:"search_author"},model:{value:t.search_author_name,callback:function(a){t.search_author_name=a},expression:"search_author_name"}})],1),t.all_groups.length>0?e("div",[e("TagsList",{attrs:{tags:t.all_groups,tag_type:"accountgroup",tags_active:[t.filter_by_group]},on:{tagClick:function(a){return t.toggleGroupFilter(a)}}})],1):t._e(),e("div",{staticClass:"_mode"},[e("button",{staticClass:"u-button u-button_icon u-button_transparent",class:{"is--active":t.view_mode==="list"},attrs:{type:"button"},on:{click:function(a){t.view_mode="list"}}},[e("svg",{staticClass:"bi-person-vcard mx-auto b-icon bi",attrs:{viewBox:"0 0 16 16",width:"1em",height:"1em",focusable:"false",role:"img","aria-label":"person vcard",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor","data-v-41be6633":""}},[e("g",{attrs:{"data-v-41be6633":""}},[e("path",{attrs:{d:"M5 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4m4-2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5M9 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 9 8m1 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5"}}),e("path",{attrs:{d:"M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM1 4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H8.96q.04-.245.04-.5C9 10.567 7.21 9 5 9c-2.086 0-3.8 1.398-3.984 3.181A1 1 0 0 1 1 12z"}})])])]),e("button",{staticClass:"u-button u-button_icon u-button_transparent",class:{"is--active":t.view_mode==="map"},attrs:{type:"button"},on:{click:function(a){t.view_mode="map"}}},[e("b-icon",{attrs:{icon:"map-fill"}})],1)])]),t.$api.other_devices_connected.length>=1?e("div",{staticClass:"_currentlyConnected"},[e("DetailsPane",{attrs:{header:t.$t("other_devices_connected"),icon:"people",has_items:t.$api.other_devices_connected.length}},t._l(t.$api.other_devices_connected,function(a){return e("div",{key:a.id,staticClass:"u-spacingBottom"},[e("div",[a.meta.token_path?e("AuthorTag",{attrs:{path:a.meta.token_path}}):e("span",[t._v(t._s(t.$t("not_logged_in")))])],1),e("div",[t._v(t._s(a.meta.user_agent))]),e("DLabel",{attrs:{str:"emplacement"}}),e("div",[t._v(t._s(a.meta.path))])],1)}),0)],1):t._e(),t.filtered_authors.length===0?e("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("no_accounts_to_show"))+" ")]):[t.view_mode==="list"?e("transition-group",{staticClass:"_allAuthors",attrs:{tag:"section",name:"listComplete",appear:""}},t._l(t.filtered_authors,function(a){return e("div",{key:a.$path},[e("AuthorCard",{attrs:{author:a}})],1)}),0):t._e(),t.view_mode==="map"?e("div",{staticClass:"_mapContainer"},[e("DisplayOnMap",{attrs:{pins:t.pins,map_baselayer_opacity:.5,map_baselayer_bw:!0,is_small:!1},on:{"update:opened_pin_path":function(a){return t.pinClicked(a)}}})],1):t._e()]],2)},u=[],h=o(_,l,u,!1,null,"d2734150");const p=h.exports;export{p as default};
