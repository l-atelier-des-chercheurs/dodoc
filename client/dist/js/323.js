(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[323],{81323:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return k}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_eventsSection"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.opened_event?a("OpenedEvent",{key:"event",attrs:{event_slug:t.opened_event}}):a("EventsList",{key:"list"})],1)],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_eventsList"},[a("div",{staticClass:"u-sameRow u-spacingBottom"},[a("DLabel",{attrs:{str:t.$t("events")}}),t.is_instance_admin||t.is_instance_contributor?a("button",{staticClass:"u-button u-button_orange u-button_small",attrs:{type:"button"},on:{click:function(e){t.show_create_modal=!0}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[a("path",{staticStyle:{fill:"#ffbe32"},attrs:{d:"M24.6,24.4c-32.8,32.8-32.8,86.1,0,119c32.8,32.8,85.9,32.8,118.7,0c32.8-32.8,32.8-85.9,0-118.7\n\t\tC110.5-8.2,57.5-8.2,24.6,24.4z"}}),a("polygon",{staticStyle:{fill:"#ffffff"},attrs:{points:"132.3,73.4 132.3,94.4 94.6,94.4 94.6,132.1 73.6,132.1 73.6,94.4 35.9,94.4 35.9,73.4 \n\t\t73.6,73.4 73.6,35.7 94.6,35.7 94.6,73.4 \t\t"}})]),t._v(" Â  "+t._s(t.$t("create"))+" ")]):t._e(),t.show_create_modal?a("CreateFolder",{attrs:{modal_name:t.$t("create_an_event"),path:"events"},on:{close:function(e){t.show_create_modal=!1},openNew:t.openNewEvent}}):t._e()],1),t._m(0),t.sorted_events.length>0?a("flickity",{ref:"flickity",staticClass:"_flickity",attrs:{options:t.flickityOptions}},t._l(t.sorted_events,(function(e){return a("div",{key:e.$path,staticClass:"_slide"},[a("div",{staticClass:"_eventsDate"},[e.start_date?[t._v(" "+t._s(t.formatDateToPrecise(e.start_date))+" "),e.end_date?[a("b-icon",{attrs:{icon:"arrow-right-short"}}),t._v(" "+t._s(t.formatDateToPrecise(e.end_date))+" ")]:t._e()]:t._e()],2),a("div",{staticClass:"_eventsCoverTitle"},[a("CoverField",{staticClass:"_cover",attrs:{context:"preview",cover:e.$cover,path:e.$path,can_edit:!1}}),a("div",{},[a("h3",[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"_openEvent"},[a("router-link",{staticClass:"u-buttonLink",attrs:{to:{path:t.createURLFromPath(e.$path)},event:""},nativeOn:{click:function(e){return e.preventDefault(),t.sliderClick.apply(null,arguments)}}},[a("div",{staticClass:"_clickZone"}),t._v(" "+t._s(t.$t("open"))+" ")])],1)])],1)])})),0):t._e()],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_lineCont"},[a("div",{staticClass:"_line"})])}],r=(a(70560),a(31077)),l={props:{},components:{Flickity:r.Z},data(){return{events:void 0,path:"events",fetch_events_error:void 0,show_create_modal:!1,flickityOptions:{initialIndex:0,groupCells:!1,imagesLoaded:!0,pageDots:!1,resize:!0,selectedAttraction:.2,percentPosition:!1,friction:.8,cellAlign:"left",contain:!0}}},created(){},async mounted(){this.events=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_events_error=t.response})),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{sorted_events(){if(!this.events)return[];const t=this.events.slice().filter((t=>this.canLoggedinSeeFolder({folder:t}))).sort(((t,e)=>+new Date(e.start_date)-+new Date(t.start_date)));return t}},methods:{openNewEvent(t){this.show_create_modal=!1;const e=this.createURLFromPath(this.path+"/"+t);this.$router.push(e)},sliderClick(t){if(this.$refs.flickity.$flickity.isPreventingClicks)return!1;this.$router.push(t.currentTarget.getAttribute("href"))}}},c=l,d=(a(71916),a(1001)),v=(0,d.Z)(c,s,o,!1,null,"65680fbb",null),p=v.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_openedEvent"},[a("div",{staticClass:"_openedEvent--cont"},[t.is_loading?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):[t.event?t._e():a("div",[a("router-link",{staticClass:"u-buttonLink",attrs:{to:"/"}},[a("b-icon",{attrs:{icon:"arrow-left-short"}}),t._v(" "+t._s(t.$t("other_events"))+" ")],1)],1),a("CoverField",{staticClass:"_cover",attrs:{context:"full",cover:t.event.$cover,path:t.event.$path,can_edit:t.can_edit_event}}),a("div",{staticClass:"_text"},[a("div",{staticClass:"_backBtn"},[a("router-link",{staticClass:"u-buttonLink",attrs:{to:"/"}},[a("b-icon",{attrs:{icon:"arrow-left-short"}}),t._v(" "+t._s(t.$t("other_events"))+" ")],1)],1),t.can_edit_event?a("div",{staticClass:"u-spacingBottom"}):t._e(),t.can_edit_event?a("StatusTag",{attrs:{status:t.event.$status||"public",status_options:["public","private"],path:t.event.$path,can_edit:t.can_edit_event}}):t._e(),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{staticClass:"_title",attrs:{field_name:"title",label:t.can_edit_event&&!t.event.title?t.$t("title"):"",content:t.event.title,path:t.event.$path,required:!0,maxlength:40,tag:"h1",can_edit:t.can_edit_event}})],1),a("div",{staticClass:"_eventsDates"},[a("div",{staticClass:"u-spacingBottom"},[a("DateField",{attrs:{field_name:"start_date",label:t.$t("start_date"),date:t.event.start_date,path:t.event.$path,input_type:"date",can_edit:t.can_edit_event}})],1),a("div",{staticClass:"u-spacingBottom"},[a("DateField",{attrs:{field_name:"end_date",label:t.$t("end_date"),date:t.event.end_date,path:t.event.$path,input_type:"date",can_edit:t.can_edit_event}})],1)]),a("div",{staticClass:"u-spacingBottom"},[a("CollaborativeEditor2",{attrs:{label:t.can_edit_event&&!t.event.description?t.$t("presentation"):"",field_to_edit:"presentation",content:t.event.presentation,path:t.event.$path,custom_formats:["bold","italic","link"],is_collaborative:!1,maxlength:1280,can_edit:t.can_edit_event}})],1),t.can_edit_event?a("div",{staticClass:"u-mediaOptions"},[a("RemoveMenu",{on:{remove:t.removeEvent}})],1):t._e()],1)]],2)])},f=[],h={props:{event_slug:String},components:{},data(){return{event:void 0,is_loading:!0}},async created(){await this.getEvent().catch((t=>{404===t.response?.status&&this.$alertify.delay(4e3).error("event_does_not_exit"),this.$router.replace("/")})),this.$api.join({room:this.event_path}),this.is_loading=!1},mounted(){},beforeDestroy(){this.$api.leave({room:this.event_path})},watch:{},computed:{event_path(){return this.createPath({event_slug:this.event_slug})},can_edit_event(){return this.canLoggedinEditFolder({folder:this.event})}},methods:{async getEvent(){this.event=await this.$api.getFolder({path:this.event_path})},async removeEvent(){await this.$api.deleteItem({path:this.event_path}),this.$router.push("/")}}},u=h,b=(a(76939),(0,d.Z)(u,_,f,!1,null,"5f0a55fe",null)),g=b.exports,m={props:{},components:{EventsList:p,OpenedEvent:g},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{opened_event:{handler(){this.opened_event&&this.$nextTick((()=>{this.$el.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}))},immediate:!0}},computed:{opened_event(){return this.$route.hash.substring(1)||!1}},methods:{}},w=m,x=(a(61010),(0,d.Z)(w,i,n,!1,null,"00a2f891",null)),k=x.exports},52521:function(t,e,a){"use strict";a.r(e);var i=a(8081),n=a.n(i),s=a(23645),o=a.n(s),r=o()(n());r.push([t.id,'._eventsList[data-v-65680fbb]{margin:0 auto;padding:calc(var(--spacing)*2) 0}._flickity[data-v-65680fbb]{width:100%;height:100%;margin:0 auto;max-width:var(--max-column-width)}._flickity[data-v-65680fbb]  .flickity-button{background:transparent;background:#fff}._flickity[data-v-65680fbb]  .flickity-button:hover{background:var(--c-gris)}._flickity[data-v-65680fbb]  .flickity-prev-next-button{overflow:hidden}._flickity[data-v-65680fbb]  .flickity-button:disabled{display:none}._flickity[data-v-65680fbb]  .flickity-prev-next-button.previous{left:-10px}._flickity[data-v-65680fbb]  .flickity-prev-next-button.next{right:-10px}._slide[data-v-65680fbb]{position:relative;width:280px;min-height:100px;padding:0 calc(var(--spacing)*1);max-width:56ch;width:100%;transition:all .2s cubic-bezier(.19,1,.22,1)}._slide:focus-visible ._eventsDate[data-v-65680fbb]:after,._slide:hover ._eventsDate[data-v-65680fbb]:after{background:var(--active-color)}._eventsCoverTitle[data-v-65680fbb]{display:flex;align-items:center;gap:calc(var(--spacing)/1)}._eventsDate[data-v-65680fbb]{display:flex;align-items:center;padding-bottom:16px;height:36px;font-size:var(--sl-font-size-small)}._eventsDate[data-v-65680fbb]:after{content:"";width:10px;height:10px;background:var(--c-bleuvert);position:absolute;top:17px;left:5px;border-radius:50%;border:4px solid #fff}._cover[data-v-65680fbb]{aspect-ratio:3/2;flex:0 0 150px;border-radius:4px;overflow:hidden}._cover[data-v-65680fbb],._lineCont[data-v-65680fbb]{position:relative}._line[data-v-65680fbb]{position:absolute;left:0;width:100%;height:2px;background:var(--c-gris);top:25px}._openEvent[data-v-65680fbb]{opacity:0}._openEvent[data-v-65680fbb],._openEvent ._clickZone[data-v-65680fbb]{position:absolute;top:0;left:0;width:100%;height:100%}',""]),e["default"]=r},17599:function(t,e,a){"use strict";a.r(e);var i=a(8081),n=a.n(i),s=a(23645),o=a.n(s),r=o()(n());r.push([t.id,"._eventsSection[data-v-00a2f891]{background:#fff}",""]),e["default"]=r},95790:function(t,e,a){"use strict";a.r(e);var i=a(8081),n=a.n(i),s=a(23645),o=a.n(s),r=o()(n());r.push([t.id,"._openedEvent[data-v-5f0a55fe]{width:100%;position:relative;min-height:5em;padding:calc(var(--spacing)*1);margin:0 auto;max-width:var(--max-column-width);overflow:hidden}._openedEvent ._openedEvent--cont[data-v-5f0a55fe]{position:relative;display:flex;flex-flow:row wrap;align-items:center}._openedEvent ._openedEvent--cont ._cover[data-v-5f0a55fe]{position:relative;flex:1 0 300px;aspect-ratio:3/2}._openedEvent ._openedEvent--cont ._text[data-v-5f0a55fe]{flex:1 1 400px;padding:calc(var(--spacing)/1)}._eventsDates[data-v-5f0a55fe]{display:flex;flex-flow:row nowrap;gap:calc(var(--spacing)*1)}",""]),e["default"]=r},71916:function(t,e,a){var i=a(52521);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var n=a(20730).Z;n("0a59ff16",i,!0,{sourceMap:!1,shadowMode:!1})},61010:function(t,e,a){var i=a(17599);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var n=a(20730).Z;n("6af56ee8",i,!0,{sourceMap:!1,shadowMode:!1})},76939:function(t,e,a){var i=a(95790);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var n=a(20730).Z;n("4c93d0e4",i,!0,{sourceMap:!1,shadowMode:!1})}}]);