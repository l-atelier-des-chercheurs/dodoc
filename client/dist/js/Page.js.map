{"version":3,"file":"js/Page.js","mappings":"mJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,YAAY,KAAO,WAAW,CAAEP,EAAmB,gBAAEI,EAAG,iBAAiBA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,aAAa,CAACE,YAAY,SAASC,MAAM,CAAC,WAAa,QAAQ,MAAQP,EAAIQ,SAAWR,EAAIS,GAAG,cAAWC,EAAU,QAAUV,EAAIW,KAAKC,MAAM,KAAOZ,EAAIW,KAAKE,MAAM,UAAW,EAAK,UAAY,GAAG,IAAM,KAAK,SAAWb,EAAIQ,YAAaR,EAAY,SAAEI,EAAG,WAAW,CAACA,EAAG,aAAa,CAACG,MAAM,CAAC,YAAcP,EAAIS,GAAG,WAAWK,GAAG,CAAC,OAASd,EAAIe,eAAe,GAAGf,EAAIgB,MAAM,GAAGZ,EAAG,MAAM,CAACE,YAAY,oBAAqBN,EAAgB,aAAEI,EAAG,uBAAuB,CAACa,IAAI,WAAWV,MAAM,CAAC,KAAOP,EAAIkB,aAAaL,MAAM,QAAUb,EAAIkB,aAAaC,SAAS,eAAgB,EAAM,SAAWnB,EAAIQ,YAAYR,EAAIgB,MAAM,IAAI,IAAI,IACt3BI,EAAkB,GCqCtB,G,SAAA,CACAC,MAAAA,GACAC,WAAAA,GACAC,OACA,OACAC,iBAAAA,EACAb,UAAAA,IAGAc,KAAAA,CACAC,SAAAA,CACAC,GAAAA,KAGA,kBACA,sBACA,eACA,gBAAAC,KAAAA,KAAAA,YAEA,oCACA,sBACAC,KAAAA,KAAAA,KAAAA,MACAC,SAAAA,cACAC,QAAAA,MAAAA,KAAAA,GAAAA,gBAAAA,SAIA,yBAEAC,kBACAC,MAAAA,GACAC,SAAAA,CACAC,YACA,wBAAAC,UAAAA,KAAAA,OAAAA,OAAAA,aAEA5B,WACA,mCAAA6B,OAAAA,KAAAA,QAEAnB,eACA,wDAGAoB,QAAAA,CACA,gBACA,0BACAC,UAAAA,CACAV,KAAAA,KAAAA,YAEAW,OAAAA,UAIA,yBACA,sBACAX,KAAAA,KAAAA,KAAAA,QAEA,2BC9FoQ,I,qBCQhQY,GAAY,OACd,EACA1C,EACAqB,GACA,EACA,KACA,WACA,MAIF,EAAeqB,EAAiB,S,qFChB5BC,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,qNAAsN,KAE/P,gB,sBCJA,IAAId,EAAU,EAAQ,OACnBA,EAAQe,aAAYf,EAAUA,EAAQgB,SACnB,kBAAZhB,IAAsBA,EAAU,CAAC,CAACa,EAAOC,GAAId,EAAS,MAC7DA,EAAQiB,SAAQJ,EAAOK,QAAUlB,EAAQiB,QAE5C,IAAIE,EAAM,WACGA,EAAI,WAAYnB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa","sources":["webpack://app/./src/views/PageView.vue?a555","webpack://app/src/views/PageView.vue","webpack://app/./src/views/PageView.vue?9508","webpack://app/./src/views/PageView.vue","webpack://app/./src/views/PageView.vue?c9e8","webpack://app/./src/views/PageView.vue?74c7"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_pageView\"},[_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[(_vm.is_loading_page)?_c('LoaderSpinner'):_c('div',[_c('div',{staticClass:\"_topbar\"},[_c('TitleField',{staticClass:\"_title\",attrs:{\"field_name\":'title',\"label\":_vm.can_edit ? _vm.$t('title') : undefined,\"content\":_vm.page.title,\"path\":_vm.page.$path,\"required\":true,\"maxlength\":40,\"tag\":'h1',\"can_edit\":_vm.can_edit}}),(_vm.can_edit)?_c('DropDown',[_c('RemoveMenu',{attrs:{\"remove_text\":_vm.$t('remove')},on:{\"remove\":_vm.removePage}})],1):_vm._e()],1),_c('div',{staticClass:\"u-spacingBottom\"}),(_vm.text_content)?_c('CollaborativeEditor2',{ref:\"textBloc\",attrs:{\"path\":_vm.text_content.$path,\"content\":_vm.text_content.$content,\"line_selected\":false,\"can_edit\":_vm.can_edit}}):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_pageView\">\n    <transition name=\"fade_fast\" mode=\"out-in\">\n      <LoaderSpinner v-if=\"is_loading_page\" />\n      <div v-else>\n        <div class=\"_topbar\">\n          <TitleField\n            :field_name=\"'title'\"\n            :label=\"can_edit ? $t('title') : undefined\"\n            class=\"_title\"\n            :content=\"page.title\"\n            :path=\"page.$path\"\n            :required=\"true\"\n            :maxlength=\"40\"\n            :tag=\"'h1'\"\n            :can_edit=\"can_edit\"\n          />\n\n          <DropDown v-if=\"can_edit\">\n            <RemoveMenu :remove_text=\"$t('remove')\" @remove=\"removePage\" />\n          </DropDown>\n        </div>\n\n        <div class=\"u-spacingBottom\" />\n\n        <CollaborativeEditor2\n          v-if=\"text_content\"\n          ref=\"textBloc\"\n          :path=\"text_content.$path\"\n          :content=\"text_content.$content\"\n          :line_selected=\"false\"\n          :can_edit=\"can_edit\"\n        />\n      </div>\n    </transition>\n  </div>\n</template>\n<script>\nexport default {\n  props: {},\n  components: {},\n  data() {\n    return {\n      is_loading_page: true,\n      page: undefined,\n    };\n  },\n  i18n: {\n    messages: {\n      fr: {},\n    },\n  },\n  async created() {},\n  async mounted() {\n    await this.getPage();\n    this.$api.join({ room: this.page_path });\n\n    if (this.page.$files?.length === 0) {\n      await this.$api.uploadText({\n        path: this.page.$path,\n        filename: \"content.txt\",\n        content: \"<i>\" + this.$t(\"page_content\") + \"</i>\",\n      });\n    }\n\n    this.is_loading_page = false;\n  },\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    page_path() {\n      return this.createPath({ page_slug: this.$route.params.page_slug });\n    },\n    can_edit() {\n      return this.canLoggedinEditFolder({ folder: this.page });\n    },\n    text_content() {\n      return this.page?.$files?.find((f) => f.$type === \"text\");\n    },\n  },\n  methods: {\n    async getPage() {\n      this.page = await this.$api\n        .getFolder({\n          path: this.page_path,\n        })\n        .catch(() => {\n          return;\n        });\n    },\n    async removePage() {\n      await this.$api.deleteItem({\n        path: this.page.$path,\n      });\n      this.$router.push(\"/\");\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._pageView {\n  width: 90%;\n  max-width: 560px;\n  margin: 0 auto;\n  padding: calc(var(--spacing) * 2) 0;\n}\n._topbar {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageView.vue?vue&type=template&id=4f4472dc&scoped=true&\"\nimport script from \"./PageView.vue?vue&type=script&lang=js&\"\nexport * from \"./PageView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageView.vue?vue&type=style&index=0&id=4f4472dc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4f4472dc\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._pageView[data-v-4f4472dc]{width:90%;max-width:560px;margin:0 auto;padding:calc(var(--spacing)*2) 0}._topbar[data-v-4f4472dc]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageView.vue?vue&type=style&index=0&id=4f4472dc&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"84f15d78\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","can_edit","$t","undefined","page","title","$path","on","removePage","_e","ref","text_content","$content","staticRenderFns","props","components","data","is_loading_page","i18n","messages","fr","room","path","filename","content","beforeDestroy","watch","computed","page_path","page_slug","folder","methods","getFolder","catch","component","___CSS_LOADER_EXPORT___","push","module","id","__esModule","default","locals","exports","add"],"sourceRoot":""}