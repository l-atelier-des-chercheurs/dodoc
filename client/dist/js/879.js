(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[879],{10326:function(t,e,i){"use strict";i.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("BaseModal2",{attrs:{title:t.title||t.$t("export")},on:{close:function(e){return t.$emit("close")}}},[i("div",{staticClass:"_cont"},[i("div",{staticClass:"u-spacingBottom"},[t._t("default")],2),i("div",{},[i("div",{staticClass:"u-sameRow"},[i("a",{staticClass:"u-buttonLink",attrs:{disabled:!t.export_href,download:t.export_name,href:t.export_href,target:"_blank"}},[t._v(" "+t._s(t.$t("download"))+" ")]),i("button",{staticClass:"u-button u-button_red",attrs:{type:"button"},on:{click:t.saveToProject}},[i("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[i("path",{staticStyle:{fill:"var(--c-rouge)"},attrs:{d:"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z"}}),i("g",{staticStyle:{fill:"var(--c-orange)"}},[i("path",{attrs:{d:"m42 42h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m73.2 42h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m104.4 42h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m42 73.5h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m73.2 73.5h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m104.4 73.5h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m42 105h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m73.2 105h21.6v21h-21.6z"}}),i("path",{attrs:{d:"m104.4 105h21.6v21h-21.6z"}})])]),t._v(" "+t._s(t.$t("save_to_project"))+" ")])])]),t.finished_saving_to_project?i("div",{staticClass:"_saveNotice"},[t._v(" "+t._s(t.$t("media_was_saved"))+" ")]):t._e()])])},n=[],s={props:{title:String,export_name:{type:String,default:"file"},export_blob:[Boolean,Blob],export_href:String,project_path:String},components:{},data(){return{finished_saving_to_project:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async saveToProject(){if(this.export_blob){const t={$origin:"make"};await this.$api.uploadFile({path:this.project_path,filename:this.export_name,file:this.export_blob,additional_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))}this.finished_saving_to_project=!0,setTimeout((()=>{this.$emit("close")}),3e3)}}},o=s,a=(i(68052),i(1001)),l=(0,a.Z)(o,r,n,!1,null,"5617f895",null),c=l.exports},39879:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return d}});var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_trimAudioVideo"},["trim_video"===t.make.type?i("div",{staticClass:"u-spacingBottom _videoPreview"},[i("video",{ref:"videoPreview",attrs:{src:t.base_media_url,muted:""},domProps:{muted:!0}})]):t._e(),i("div",{staticClass:"u-spacingBottom _btnRow"},[i("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:t.play}},[i("b-icon",{attrs:{icon:"play-circle-fill"}}),t._v(" "+t._s(t.$t("play"))+" ")],1),i("button",{staticClass:"u-button u-button_orange",attrs:{type:"button"},on:{click:t.pause}},[i("b-icon",{attrs:{icon:"pause-circle"}}),t._v(" "+t._s(t.$t("pause"))+" ")],1),i("button",{staticClass:"u-button u-button_black",attrs:{type:"button"},on:{click:t.zoomin}},[i("b-icon",{attrs:{icon:"zoom-in"}})],1),i("button",{staticClass:"u-button u-button_black",attrs:{type:"button"},on:{click:t.zoomout}},[i("b-icon",{attrs:{icon:"zoom-out"}})],1)]),i("div",{staticClass:"_trimSelect"}),i("div",{ref:"playlist",staticClass:"u-spacingBottom _wfp"}),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"playlistPreview"}),i("p",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("trim_instructions"))+" ")]),i("div",{staticClass:"_currentTime"},[t._v(t._s(t.current_time_displayed)+" s")]),i("div",{staticClass:"_startEndBlock"},[i("div",{key:t.selection.start,staticClass:"_startEndBlock--b"},[i("button",{staticClass:"u-button u-button_red _picto",attrs:{type:"button",disabled:t.current_time===t.selection.start},on:{click:function(e){return t.setStartOrEnd({new_start:t.current_time})}}},[i("b-icon",{attrs:{icon:"chevron-bar-left"}}),t._v(" "+t._s(t.$t("start"))+" ")],1),i("NumberInput",{attrs:{value:t.selection.start,suffix:"s",size:"medium"},on:{save:function(e){return t.setStartOrEnd({new_start:e})}}}),i("div",{staticClass:"u-sameRow"},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.setStartOrEnd({new_start:t.selection.start-.1})}}},[t._v(" -0.1s ")]),i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.setStartOrEnd({new_start:t.selection.start+.1})}}},[t._v(" +0.1s ")])])],1),i("b-icon",{attrs:{icon:"arrow-right-circle"}}),i("div",{staticClass:"_startEndBlock--b"},[i("button",{staticClass:"u-button u-button_red _picto",attrs:{type:"button",disabled:t.current_time===t.selection.end},on:{click:function(e){return t.setStartOrEnd({new_end:t.current_time})}}},[t._v(" "+t._s(t.$t("end"))+" "),i("b-icon",{attrs:{icon:"chevron-bar-right"}})],1),i("NumberInput",{attrs:{value:t.selection.end,suffix:"s",size:"medium"},on:{save:function(e){return t.setStartOrEnd({new_end:e})}}}),i("div",{staticClass:"u-sameRow"},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.setStartOrEnd({new_end:t.selection.end-.1})}}},[t._v(" -0.1s ")]),i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.setStartOrEnd({new_end:t.selection.end+.1})}}},[t._v(" +0.1s ")])])],1)],1),i("div",{staticClass:"_submit"},[i("div",{staticClass:"u-instructions"},[t.selection.start===t.selection.end?[t._v(" "+t._s(t.$t("start_egal_to_end"))+" ")]:t._e(),+t.selection.end<+t.selection.start?[t._v(" "+t._s(t.$t("end_before_start"))+" ")]:t._e()],2),i("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button",disabled:0===t.selection.end||t.selection.start===t.selection.end},on:{click:function(e){t.show_save_export_modal=!0}}},[i("b-icon",{attrs:{icon:"check"}}),t._v(" "+t._s(t.$t("test_and_export"))+" ")],1)]),t.show_save_export_modal?i("ExportSaveMakeModal",{attrs:{title:t.export_modal_title,export_blob:t.export_blob,export_name:t.export_name,export_href:t.export_href,project_path:t.project_path},on:{close:function(e){t.show_save_export_modal=!1}}},["trim_audio"===t.make.type?[t.export_src_url?i("audio",{staticClass:"_player",attrs:{src:t.export_src_url,controls:""}}):t._e()]:"trim_video"===t.make.type?[t.is_exporting?i("div",{key:"loader",staticClass:"_spinner"},[i("LoaderSpinner")],1):i("div",[i("MediaContent",{staticClass:"_preview",attrs:{file:t.trimmed_video,resolution:1600,context:"full"}})],1)]:t._e()],2):t._e()],1)},n=[],s=i(47010),o=i.n(s),a=i(10326),l={props:{make:Object,project_path:String,base_media:Object},components:{ExportSaveMakeModal:a.Z},data(){return{main_wfpl:void 0,current_time:0,start_preview_play_from:0,is_playing:!1,selection:{start:this.make.selection?.start||0,end:this.make.selection?.end||0},trimmed_video:!1,is_rendering:!1,show_save_export_modal:!1,debounce_selection:void 0,is_exporting:!1,export_blob:!1,export_href:void 0,export_src_url:!1,export_duration:""}},i18n:{messages:{fr:{start_egal_to_end:"Le début est identique à la fin",end_before_start:"La fin est avant le début",export_trim_video:"Exporter la vidéo recoupée"},en:{start_egal_to_end:"Start is equal to end",end_before_start:"End is before start",export_trim_audio:"Export trimmed video"}}},created(){},async mounted(){await this.loadWFP()},beforeDestroy(){},watch:{show_save_export_modal(){this.show_save_export_modal&&this.$nextTick((()=>{"trim_video"===this.make.type?this.renderVideo():"trim_audio"===this.make.type&&this.renderAudio()}))},"make.selection":{handler(){this.setSelect()},deep:!0},current_time(){this.updatePreviewVideoTime()}},computed:{export_name(){return"trim_video"===this.make.type?this.base_media.$media_filename+"_trim.mp4":"trim_audio"===this.make.type?this.base_media.$media_filename+"_trim.wav":"untitled"},export_modal_title(){return"trim_video"===this.make.type?this.$t("export_trim_video"):""===this.make.type?this.$t("export_trim_audio"):""},current_time_displayed(){return parseFloat(this.current_time.toFixed(2)).toLocaleString(this.$i18n.locale)},selection_is_ready(){return this.selection.start&&this.selection.end&&this.selection.start!==this.selection.end},base_media_url(){return this.makeMediaFileURL({$path:this.base_media.$path,$media_filename:this.base_media.$media_filename})}},methods:{async loadWFP(){this.main_wfpl=o()({container:this.$refs.playlist,samplesPerPixel:256,timescale:!0,isAutomaticScroll:!0,zoomLevels:[256,512,1024,2048,4096],state:"cursor",states:{cursor:!0,fadein:!1,fadeout:!1,select:!0,shift:!1},controls:{show:!0,width:150,widgets:{muteOrSolo:!1,volume:!0,stereoPan:!1,collapse:!1,remove:!1}}}),this.setListener(),await this.main_wfpl.load([{src:this.base_media_url,name:this.base_media.$media_filename,selected:{start:this.selection.start,end:this.selection.end}}])},play(){this.start_preview_play_from=this.current_time,this.main_wfpl.getEventEmitter().emit("play"),this.$nextTick((()=>{this.$nextTick((()=>{this.$nextTick((()=>{this.playPreviewVideo()}))}))})),this.is_playing=!0},playPreviewVideo(){const t=this.$refs.videoPreview;t&&(t.currentTime=this.current_time,t.play())},updatePreviewVideoTime(){const t=this.$refs.videoPreview;if(!t)return;const e=this.roundToDec(this.current_time,1),i=this.roundToDec(t.currentTime,1);e!==i&&(console.log("!!! resync vid",i-e),t.currentTime=this.current_time)},pause(){this.main_wfpl.getEventEmitter().emit("pause"),this.pausePreviewVideo(),this.is_playing=!1},zoomin(){this.main_wfpl.getEventEmitter().emit("zoomin")},zoomout(){this.main_wfpl.getEventEmitter().emit("zoomout")},pausePreviewVideo(){const t=this.$refs.videoPreview;t&&t.pause()},setListener(){this.main_wfpl.getEventEmitter().on("timeupdate",this.timeUpdate),this.main_wfpl.getEventEmitter().on("finished",this.finished),this.main_wfpl.getEventEmitter().on("audiosourceserror",this.audiosourceserror)},timeUpdate(t){this.current_time=this.roundToDec(t)},audiosourceserror(t){t.message},select(t,e){t!==e&&this.updateSelection(t,e)},setSelect(){const{start:t,end:e}=this.make.selection;t===this.selection.start&&e===this.selection.end||this.main_wfpl.getEventEmitter().emit("select",t,e)},setStartOrEnd({new_start:t,new_end:e}){const i=t||this.selection.start,r=e||this.selection.end;this.updateSelection(i,r)},updateSelection(t,e){this.selection.start=this.roundToDec(t),this.selection.end=this.roundToDec(e),this.debounce_selection&&clearTimeout(this.debounce_selection),this.debounce_selection=setTimeout((async()=>{await this.updateSelectionMeta()}),1e3)},async updateSelectionMeta(){this.selection.start===this.make.selection?.start&&this.selection.end===this.make.selection?.end||await this.$api.updateMeta({path:this.make.$path,new_meta:{selection:this.selection}})},finished(){this.pausePreviewVideo(),this.is_playing=!1},audiorenderingstarting(){this.is_rendering=!0},audiorenderingfinished(t,e){this.is_rendering=!1,this.export_blob=e,this.export_href=window.URL.createObjectURL(e);const i=new FileReader;i.onload=t=>{this.export_src_url=t.target.result},i.readAsDataURL(e)},async renderAudio(){this.export_blob=!1,this.export_href=void 0,this.export_src_url=!1,this.export_duration="",this.main_wfpl.getEventEmitter().emit("stop");const t=o()({container:this.$refs.playlistPreview}),e=this.$el.querySelector(".volume-slider").value/100||1;await t.load([{src:this.base_media_url,name:this.base_media.$media_filename,gain:e,fadeIn:{shape:"logarithmic",duration:.3},fadeOut:{shape:"logarithmic",duration:.3},selected:{start:this.selection.start,end:this.selection.end}}]),t.getEventEmitter().on("audiorenderingstarting",this.audiorenderingstarting),t.getEventEmitter().on("audiorenderingfinished",this.audiorenderingfinished),t.initExporter(),t.getEventEmitter().emit("trim"),t.getEventEmitter().emit("shift",-this.selection.start,t.tracks[0]);const i=this.selection.end-this.selection.start;t.duration=i,this.export_duration=this.roundToDec(i),t.getEventEmitter().emit("startaudiorendering","wav")},async renderVideo(){this.trimmed_video=!1,this.export_href=void 0;let t={recipe:"trim_video",suggested_file_name:this.base_media.$media_filename+"_trim",selection:this.selection,base_media_path:this.makeMediaFilePath({$path:this.base_media.$path,$media_filename:this.base_media.$media_filename}),additional_meta:{$origin:"make"}};const e=await this.$api.exportFolder({path:this.make.$path,instructions:t});this.$api.join({room:"task_"+e}),this.is_exporting=!0;const i=({task_id:t,message:r})=>{t===e&&(this.$eventHub.$off("task.ended",i),this.$api.leave({room:"task_"+e}),"completed"===r.event?(r.file,this.trimmed_video=r.file,this.export_href=this.makeMediaFileURL({$path:this.trimmed_video.$path,$media_filename:this.trimmed_video.$media_filename})):"aborted"===r.event||"failed"===r.event&&r.info,this.is_exporting=!1)};this.$eventHub.$on("task.ended",i)}}},c=l,u=(i(77203),i(36988),i(1001)),h=(0,u.Z)(c,r,n,!1,null,"3bbd7d0e",null),d=h.exports},97218:function(t,e,i){"use strict";i.r(e);var r=i(8081),n=i.n(r),s=i(23645),o=i.n(s),a=o()(n());a.push([t.id,"._cont[data-v-5617f895]{position:relative}._saveNotice[data-v-5617f895]{position:absolute;inset:-2px;background:hsla(0,0%,100%,.95);display:flex;justify-content:center;align-items:center}",""]),e["default"]=a},51849:function(t,e,i){"use strict";i.r(e);var r=i(8081),n=i.n(r),s=i(23645),o=i.n(s),a=o()(n());a.push([t.id,'._trimAudioVideo[data-v-3bbd7d0e]{position:relative;width:100%;height:auto;background:#fff;padding:calc(var(--spacing)*1)}._wfp[data-v-3bbd7d0e]{position:relative;box-shadow:0 1px 4px rgba(0,0,0,.2);--wp-range-slider-label-color:var(--c-noir)}._wfp[data-v-3bbd7d0e]  .playlist .controls label.volume{font-weight:700;font-family:inherit}._wfp[data-v-3bbd7d0e]  .playlist .controls label.volume:before{content:"-"}._wfp[data-v-3bbd7d0e]  .playlist .controls label.volume:after{content:"+"}._btnRow[data-v-3bbd7d0e]{display:flex;flex-flow:row wrap;gap:calc(var(--spacing)/4);align-items:center;width:100%;margin:0 auto calc(var(--spacing)/1)}._btnRow>*[data-v-3bbd7d0e]{box-shadow:0 1px 4px rgba(0,0,0,.2)}._extract[data-v-3bbd7d0e]{margin:calc(var(--spacing)*1) auto}._extract input[data-v-3bbd7d0e]{width:10ch}._submit[data-v-3bbd7d0e]{margin:calc(var(--spacing)*1) auto;text-align:center;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}._player[data-v-3bbd7d0e]{display:block;width:100%;height:auto;min-height:40px}._videoPreview[data-v-3bbd7d0e]{height:100%;width:auto;margin:0 auto;margin-bottom:calc(var(--spacing)/1);background:var(--c-noir)}._videoPreview video[data-v-3bbd7d0e]{width:100%;max-height:50vh}._currentTime[data-v-3bbd7d0e]{font-size:var(--sl-font-size-x-large);text-align:center}._currentTime[data-v-3bbd7d0e],._startEndBlock[data-v-3bbd7d0e]{margin:calc(var(--spacing)*2) auto}._startEndBlock[data-v-3bbd7d0e]{display:flex;justify-content:center;gap:calc(var(--spacing)*2)}._startEndBlock--b[data-v-3bbd7d0e]{display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/2);border:2px solid var(--c-gris);padding:calc(var(--spacing)/2)}._picto[data-v-3bbd7d0e]{width:100%}',""]),e["default"]=a},3129:function(t,e,i){"use strict";i.r(e);var r=i(8081),n=i.n(r),s=i(23645),o=i.n(s),a=o()(n());a.push([t.id,':root{--wp-controls-border-color:var(--c-gris);--wp-controls-background-color:#fff;--wp-mute-solo-color:#343a40;--wp-mute-solo-hover-color:#fff;--wp-mute-solo-focus-color:rgba(52,58,64,.5);--wp-btn-danger-background-hover-color:#c82333;--wp-btn-danger-border-hover-color:#bd2130;--wp-btn-danger-background-color:#dc3545;--wp-btn-danger-border-color:#dc3545;--wp-btn-danger-focus-color:rgba(225,83,97,.5);--wp-btn-danger-color:#fff;--wp-btn-info-background-hover-color:#138496;--wp-btn-info-border-hover-color:#117a8b;--wp-btn-info-background-color:#17a2b8;--wp-btn-info-border-color:#17a2b8;--wp-btn-info-focus-color:rgba(58,176,195,.5);--wp-btn-info-color:#fff;--wp-fade-background-color:rgba(0,0,0,.1);--wp-channel-color:#ffd500;--wp-channel-progress-color:#fbbc04;--wp-cursor-color:#000;--wp-selection-background-color:rgba(0,0,0,.1);--wp-selection-point-color:red;--wp-tracks-container-background-color:#005bbb;--wp-range-slider-label-color:#fff;--wp-range-slider-color:#daa520;--wp-range-slider-focus-color:#000;--wp-range-slider-background-color:#ddd;--wp-range-slider-background-focus-color:#bbb;--wp-annotation-box-border-color:grey;--wp-annotation-current-background-color:#ebf4f6;--wp-annotation-icon-hover-color:orange}.playlist{margin:0 0}.playlist *,.playlist :after,.playlist :before{box-sizing:border-box}.playlist .btn:not(:disabled){cursor:pointer}.playlist .btn{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.playlist .btn-outline-dark{color:var(--wp-mute-solo-color);border-color:var(--wp-mute-solo-color)}.playlist .btn-outline-dark:hover{color:var(--wp-mute-solo-hover-color);background-color:var(--wp-mute-solo-color);border-color:var(--wp-mute-solo-color)}.playlist .btn-outline-dark:active:focus,.playlist .btn-outline-dark:focus{box-shadow:0 0 0 .2rem var(--wp-mute-solo-focus-color)}.playlist .btn-danger{color:var(--wp-btn-danger-color);background-color:var(--wp-btn-danger-background-color);border-color:var(--wp-btn-danger-border-color)}.playlist .btn-danger:hover{color:var(--wp-btn-danger-color);background-color:var(--wp-btn-danger-background-hover-color);border-color:var(--wp-btn-danger-border-hover-color)}.playlist .btn-danger:active:focus,.playlist .btn-danger:focus{box-shadow:0 0 0 .2rem var(--wp-btn-danger-focus-color)}.playlist .btn-info{color:var(--wp-btn-info-color);background-color:var(--wp-btn-info-background-color);border-color:var(--wp-btn-info-border-color)}.playlist .btn-info:hover{color:var(--wp-btn-info-color);background-color:var(--wp-btn-info-background-hover-color);border-color:var(--wp-btn-info-border-hover-color)}.playlist .btn-info:active:focus,.playlist .btn-info:focus{box-shadow:0 0 0 .2rem var(--wp-btn-info-focus-color)}.playlist .btn-xs{padding:.25rem .4rem;font-size:.875rem;line-height:.5;border-radius:.2rem}.playlist .btn-group{margin-bottom:.3rem}.playlist .btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.playlist .btn-group>.btn:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.playlist .playlist-time-scale{height:30px}.playlist .playlist-tracks{background:var(--wp-tracks-container-background-color)}.playlist .channel{background:var(--wp-channel-color)}.playlist .channel-progress{background:var(--wp-channel-progress-color)}.playlist .cursor{background:var(--wp-cursor-color)}.playlist .wp-fade{background-color:var(--wp-fade-background-color)}.playlist .state-cursor,.playlist .state-select{cursor:text}.playlist .state-fadein{cursor:w-resize}.playlist .state-fadeout{cursor:e-resize}.playlist .state-shift{cursor:ew-resize}.playlist .selection.point{background:var(--wp-selection-point-color)}.playlist .selection.segment{background:var(--wp-selection-background-color)}.playlist .channel-wrapper.silent .channel{opacity:.3}.playlist .controls{background:var(--wp-controls-background-color);text-align:center;border:2px solid var(--wp-controls-border-color);border-radius:2px}.playlist .controls .track-header{overflow:hidden;height:26px;display:flex;align-items:center;justify-content:space-between;padding:0 .2rem;font-size:.75rem}.playlist .controls .track-header button{width:20px;height:20px;display:flex;align-items:center;justify-content:center}.playlist .controls label{width:100%;display:flex;justify-content:space-between;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0);padding:0 1rem;margin-bottom:.2rem}.playlist .controls label:before{color:var(--wp-range-slider-label-color);font-size:18px;padding-right:5px;-moz-osx-font-smoothing:grayscale}.playlist .controls label:after{color:var(--wp-range-slider-label-color);font-size:18px;padding-left:5px}.playlist .controls label.volume:before{content:"\\f027"}.playlist .controls label.volume:after{content:"\\f028"}.playlist .controls label.stereopan:before{content:"L"}.playlist .controls label.stereopan:after{content:"R"}.playlist .controls input[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:inline-block;width:75%}.playlist .controls input[type=range]::-webkit-slider-runnable-track{height:5px;background:var(--wp-range-slider-background-color);border:none;border-radius:3px}.playlist .controls input[type=range]::-moz-range-track{height:5px;background:var(--wp-range-slider-background-color);border:none;border-radius:3px}.playlist .controls input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:12px;width:12px;border-radius:50%;background:var(--wp-range-slider-color);margin-top:-5px;cursor:ew-resize}.playlist .controls input[type=range]::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:12px;width:12px;border-radius:50%;background:var(--wp-range-slider-color);margin-top:-5px;cursor:ew-resize}.playlist .controls input[type=range]:focus{outline:none}.playlist .controls input[type=range]:focus::-webkit-slider-runnable-track{background:var(--wp-range-slider-background-focus-color)}.playlist .controls input[type=range]:focus::-moz-range-track{background:var(--wp-range-slider-background-focus-color)}.playlist .controls input[type=range]:focus::-webkit-slider-thumb{border:2px solid var(--wp-range-slider-focus-color)}.playlist .controls input[type=range]:focus::-moz-range-thumb{border:2px solid var(--wp-range-slider-focus-color)}.playlist .annotations .annotations-boxes{text-align:center}.playlist .annotations .annotation-box{border:2px dashed var(--wp-annotation-box-border-color);padding:0 10px;line-height:1.5}.playlist .annotations .annotation-box .resize-handle{background:var(--wp-annotation-box-border-color);opacity:.3;cursor:ew-resize}.playlist .annotations .annotation-box .id{cursor:pointer;display:inline-block;width:100%;height:100%}.playlist .annotations .annotations-text{font-size:19px;font-weight:300;margin-top:1em;height:160px;overflow-x:hidden;overflow-y:auto}.playlist .annotations .annotations-text .annotation{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}.playlist .annotations .annotations-text .annotation span{margin:.3rem .6rem}.playlist .annotations .annotations-text .annotation span:last-of-type{margin-right:1.2rem}.playlist .annotations .annotations-text .annotation .annotation-end,.playlist .annotations .annotations-text .annotation .annotation-id,.playlist .annotations .annotations-text .annotation .annotation-start{font-size:16px;line-height:27px}.playlist .annotations .annotations-text .annotation .annotation-lines{flex-grow:10}.playlist .annotations .annotations-text .annotation .annotation-actions{flex-basis:auto;width:85px;text-align:right;font-size:16px}.playlist .annotations .annotations-text .annotation .annotation-actions i{margin-right:.6rem}.playlist .annotations .annotations-text .annotation .annotation-actions i:last-of-type{margin-right:0}.playlist .annotations .annotations-text .annotation .annotation-actions i:hover{color:var(--wp-annotation-icon-hover-color);cursor:pointer}.playlist .annotations .current{background-color:var(--wp-annotation-current-background-color)}.breadcrumb{background-color:#f4f4f4}.playlist .vocals{background-color:#c0dce0}.track-drop{border:2px dashed blue;height:100px;width:200px;margin:1em 0}.track-drop:before{content:"Drop audio file(s) here!"}.track-drop.drag-enter{border:2px solid orange}footer{margin-top:2em}',""]),e["default"]=a},47010:function(t,e,i){i(57658),i(21703),i(48675),i(63408),i(14590),i(3462),function(e,i){t.exports=i()}(0,(function(){return(()=>{var t={6824:t=>{
/*!
           * Cross-Browser Split 1.1.1
           * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
           * Available under the MIT License
           * ECMAScript compliant, uniform cross-browser split method
           */
t.exports=function(t){var e,i=String.prototype.split,r=/()??/.exec("")[1]===t;return e=function(e,n,s){if("[object RegExp]"!==Object.prototype.toString.call(n))return i.call(e,n,s);var o,a,l,c,u=[],h=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.extended?"x":"")+(n.sticky?"y":""),d=0;n=new RegExp(n.source,h+"g");e+="",r||(o=new RegExp("^"+n.source+"$(?!\\s)",h)),s=s===t?-1>>>0:s>>>0;while(a=n.exec(e)){if(l=a.index+a[0].length,l>d&&(u.push(e.slice(d,a.index)),!r&&a.length>1&&a[0].replace(o,(function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(a[e]=t)})),a.length>1&&a.index<e.length&&Array.prototype.push.apply(u,a.slice(1)),c=a[0].length,d=l,u.length>=s))break;n.lastIndex===a.index&&n.lastIndex++}return d===e.length?!c&&n.test("")||u.push(""):u.push(e.slice(d)),u.length>s?u.slice(0,s):u},e}()},1804:(t,e,i)=>{"use strict";var r=i(5618),n=i(7205),s=i(7191),o=i(5516),a=i(9981),l=t.exports=function(t,e){var i,n,l,c,u;return arguments.length<2||"string"!==typeof t?(c=e,e=t,t=null):c=arguments[2],r(t)?(i=a.call(t,"c"),n=a.call(t,"e"),l=a.call(t,"w")):(i=l=!0,n=!1),u={value:e,configurable:i,enumerable:n,writable:l},c?s(o(c),u):u};l.gs=function(t,e,i){var l,c,u,h;return"string"!==typeof t?(u=i,i=e,e=t,t=null):u=arguments[3],r(e)?n(e)?r(i)?n(i)||(u=i,i=void 0):i=void 0:(u=e,e=i=void 0):e=void 0,r(t)?(l=a.call(t,"c"),c=a.call(t,"e")):(l=!0,c=!1),h={get:e,set:i,configurable:l,enumerable:c},u?s(o(u),h):h}},430:t=>{"use strict";t.exports=function(){}},7191:(t,e,i)=>{"use strict";t.exports=i(6560)()?Object.assign:i(7346)},6560:t=>{"use strict";t.exports=function(){var t,e=Object.assign;return"function"===typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},7346:(t,e,i)=>{"use strict";var r=i(5103),n=i(2745),s=Math.max;t.exports=function(t,e){var i,o,a,l=s(arguments.length,2);for(t=Object(n(t)),a=function(r){try{t[r]=e[r]}catch(n){i||(i=n)}},o=1;o<l;++o)e=arguments[o],r(e).forEach(a);if(void 0!==i)throw i;return t}},6914:(t,e,i)=>{"use strict";var r=i(430)();t.exports=function(t){return t!==r&&null!==t}},5103:(t,e,i)=>{"use strict";t.exports=i(7446)()?Object.keys:i(6137)},7446:t=>{"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},6137:(t,e,i)=>{"use strict";var r=i(6914),n=Object.keys;t.exports=function(t){return n(r(t)?Object(t):t)}},5516:(t,e,i)=>{"use strict";var r=i(6914),n=Array.prototype.forEach,s=Object.create,o=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var e=s(null);return n.call(arguments,(function(t){r(t)&&o(Object(t),e)})),e}},1290:t=>{"use strict";t.exports=function(t){if("function"!==typeof t)throw new TypeError(t+" is not a function");return t}},2745:(t,e,i)=>{"use strict";var r=i(6914);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},9981:(t,e,i)=>{"use strict";t.exports=i(3591)()?String.prototype.contains:i(6042)},3591:t=>{"use strict";var e="razdwatrzy";t.exports=function(){return"function"===typeof e.contains&&(!0===e.contains("dwa")&&!1===e.contains("foo"))}},6042:t=>{"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},8832:(t,e,i)=>{"use strict";var r=i(4167),n="7";r("ev-store",n);var s="__EV_STORE_KEY@"+n;function o(t){var e=t[s];return e||(e=t[s]={}),e}t.exports=o},8370:(t,e,i)=>{"use strict";var r,n,s,o,a,l,c,u=i(1804),h=i(1290),d=Function.prototype.apply,p=Function.prototype.call,f=Object.create,m=Object.defineProperty,v=Object.defineProperties,g=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var i;return h(e),g.call(this,"__ee__")?i=this.__ee__:(i=b.value=f(null),m(this,"__ee__",b),b.value=null),i[t]?"object"===typeof i[t]?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this},n=function(t,e){var i,n;return h(e),n=this,r.call(this,t,i=function(){s.call(n,t,i),d.call(e,this,arguments)}),i.__eeOnceListener__=e,this},s=function(t,e){var i,r,n,s;if(h(e),!g.call(this,"__ee__"))return this;if(i=this.__ee__,!i[t])return this;if(r=i[t],"object"===typeof r)for(s=0;n=r[s];++s)n!==e&&n.__eeOnceListener__!==e||(2===r.length?i[t]=r[s?0:1]:r.splice(s,1));else r!==e&&r.__eeOnceListener__!==e||delete i[t];return this},o=function(t){var e,i,r,n,s;if(g.call(this,"__ee__")&&(n=this.__ee__[t],n))if("object"===typeof n){for(i=arguments.length,s=new Array(i-1),e=1;e<i;++e)s[e-1]=arguments[e];for(n=n.slice(),e=0;r=n[e];++e)d.call(r,this,s)}else switch(arguments.length){case 1:p.call(n,this);break;case 2:p.call(n,this,arguments[1]);break;case 3:p.call(n,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),e=1;e<i;++e)s[e-1]=arguments[e];d.call(n,this,s)}},a={on:r,once:n,off:s,emit:o},l={on:u(r),once:u(n),off:u(s),emit:u(o)},c=v({},l),t.exports=e=function(t){return null==t?f(c):v(Object(t),l)},e.methods=a},6226:(t,e)=>{"use strict";function i(t,e){var i,r,n=new Float32Array(t),s=t-1;for(i=0;i<t;i++)r=i/s,n[i]=e>0?r:1-r;return n}function r(t,e){var i,r,n,s=new Float32Array(t),o=t-1;for(i=0;i<t;i++)r=i/o,n=e>0?i:t-1-i,s[n]=Math.exp(2*r-1)/Math.exp(1);return s}function n(t,e){var i,r=new Float32Array(t),n=e>0?Math.PI/2:-Math.PI/2;for(i=0;i<t;++i)r[i]=Math.sin(Math.PI*i/t-n)/2+.5;return r}function s(t,e,i){var r,n,s=new Float32Array(t),o=0;for(n=0;n<t;n++)r=i>0?n:t-1-n,o=n/t,s[r]=Math.log(1+e*o)/Math.log(1+e);return s}Object.defineProperty(e,"__esModule",{value:!0}),e.linear=i,e.exponential=r,e.sCurve=n,e.logarithmic=s},1114:(t,e,i)=>{"use strict";e.h7=e.Y1=e.Hp=e.Jl=e.t$=e._h=void 0,e.L7=v,e.Mt=g;var r=i(6226),n=e._h="sCurve",s=e.t$="linear",o=e.Jl="exponential",a=e.Hp="logarithmic";e.Y1="FadeIn",e.h7="FadeOut";function l(t,e){var i=(0,r.sCurve)(1e4,1);this.setValueCurveAtTime(i,t,e)}function c(t,e){var i=(0,r.sCurve)(1e4,-1);this.setValueCurveAtTime(i,t,e)}function u(t,e){this.linearRampToValueAtTime(0,t),this.linearRampToValueAtTime(1,t+e)}function h(t,e){this.linearRampToValueAtTime(1,t),this.linearRampToValueAtTime(0,t+e)}function d(t,e){this.exponentialRampToValueAtTime(.01,t),this.exponentialRampToValueAtTime(1,t+e)}function p(t,e){this.exponentialRampToValueAtTime(1,t),this.exponentialRampToValueAtTime(.01,t+e)}function f(t,e){var i=(0,r.logarithmic)(1e4,10,1);this.setValueCurveAtTime(i,t,e)}function m(t,e){var i=(0,r.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(i,t,e)}function v(t,e,i,r){switch(e){case n:l.call(t,i,r);break;case s:u.call(t,i,r);break;case o:d.call(t,i,r);break;case a:f.call(t,i,r);break;default:throw new Error("Unsupported Fade type")}}function g(t,e,i,r){switch(e){case n:c.call(t,i,r);break;case s:h.call(t,i,r);break;case o:p.call(t,i,r);break;case a:m.call(t,i,r);break;default:throw new Error("Unsupported Fade type")}}},9144:(t,e,i)=>{var r,n="undefined"!==typeof i.g?i.g:"undefined"!==typeof window?window:{},s=i(5893);"undefined"!==typeof document?r=document:(r=n["__GLOBAL_DOCUMENT_CACHE@4"],r||(r=n["__GLOBAL_DOCUMENT_CACHE@4"]=s)),t.exports=r},8070:(t,e,i)=>{"use strict";var r="undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:{};function n(t,e){return t in r?r[t]:(r[t]=e,e)}t.exports=n},4167:(t,e,i)=>{"use strict";var r=i(8070);function n(t,e,i){var n="__INDIVIDUAL_ONE_VERSION_"+t,s=n+"_ENFORCE_SINGLETON",o=r(s,e);if(o!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+o+" installed.\nThis means you cannot install version "+e);return r(n,i)}t.exports=n},849:(t,e,i)=>{var r=!!(i.g===i.g.window&&i.g.URL&&i.g.Blob&&i.g.Worker);function n(t,e){var n,s=this;if(e=e||{},r)return n=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new i.g.Worker(i.g.URL.createObjectURL(new i.g.Blob([n],{type:"text/javascript"})));function o(t){setTimeout((function(){s.onmessage({data:t})}),0)}this.self=e,this.self.postMessage=o,setTimeout(t.bind(e,e),0)}n.prototype.postMessage=function(t){var e=this;setTimeout((function(){e.self.onmessage({data:t})}),0)},t.exports=n},6240:t=>{"use strict";t.exports=function(t){return"object"===typeof t&&null!==t}},1730:t=>{var e=9007199254740991,i="[object Arguments]",r="[object Function]",n="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function o(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function a(t,e){var i=-1,r=Array(t);while(++i<t)r[i]=e(i);return r}function l(t,e){return function(i){return t(e(i))}}var c=Object.prototype,u=c.hasOwnProperty,h=c.toString,d=c.propertyIsEnumerable,p=l(Object.keys,Object),f=Math.max,m=!d.call({valueOf:1},"valueOf");function v(t,e){var i=E(t)||T(t)?a(t.length,String):[],r=i.length,n=!!r;for(var s in t)!e&&!u.call(t,s)||n&&("length"==s||_(s,r))||i.push(s);return i}function g(t,e,i){var r=t[e];u.call(t,e)&&S(r,i)&&(void 0!==i||e in t)||(t[e]=i)}function b(t){if(!P(t))return p(t);var e=[];for(var i in Object(t))u.call(t,i)&&"constructor"!=i&&e.push(i);return e}function y(t,e){return e=f(void 0===e?t.length-1:e,0),function(){var i=arguments,r=-1,n=f(i.length-e,0),s=Array(n);while(++r<n)s[r]=i[e+r];r=-1;var a=Array(e+1);while(++r<e)a[r]=i[r];return a[e]=s,o(t,this,a)}}function w(t,e,i,r){i||(i={});var n=-1,s=e.length;while(++n<s){var o=e[n],a=r?r(i[o],t[o],o,i,t):void 0;g(i,o,void 0===a?t[o]:a)}return i}function k(t){return y((function(e,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,o=n>2?i[2]:void 0;s=t.length>3&&"function"==typeof s?(n--,s):void 0,o&&x(i[0],i[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);while(++r<n){var a=i[r];a&&t(e,a,r,s)}return e}))}function _(t,i){return i=null==i?e:i,!!i&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&t<i}function x(t,e,i){if(!A(i))return!1;var r=typeof e;return!!("number"==r?O(i)&&_(e,i.length):"string"==r&&e in i)&&S(i[e],t)}function P(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||c;return t===i}function S(t,e){return t===e||t!==t&&e!==e}function T(t){return R(t)&&u.call(t,"callee")&&(!d.call(t,"callee")||h.call(t)==i)}var E=Array.isArray;function O(t){return null!=t&&j(t.length)&&!C(t)}function R(t){return $(t)&&O(t)}function C(t){var e=A(t)?h.call(t):"";return e==r||e==n}function j(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}function A(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $(t){return!!t&&"object"==typeof t}var z=k((function(t,e){if(m||P(e)||O(e))w(e,M(e),t);else for(var i in e)u.call(e,i)&&g(t,i,e[i])}));function M(t){return O(t)?v(t):b(t)}t.exports=z},2098:(t,e,i)=>{t=i.nmd(t);var r=200,n="__lodash_hash_undefined__",s=800,o=16,a=9007199254740991,l="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Function]",m="[object GeneratorFunction]",v="[object Map]",g="[object Number]",b="[object Null]",y="[object Object]",w="[object Proxy]",k="[object RegExp]",_="[object Set]",x="[object String]",P="[object Undefined]",S="[object WeakMap]",T="[object ArrayBuffer]",E="[object DataView]",O="[object Float32Array]",R="[object Float64Array]",C="[object Int8Array]",j="[object Int16Array]",A="[object Int32Array]",$="[object Uint8Array]",z="[object Uint8ClampedArray]",M="[object Uint16Array]",L="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,D={};D[O]=D[R]=D[C]=D[j]=D[A]=D[$]=D[z]=D[M]=D[L]=!0,D[l]=D[c]=D[T]=D[h]=D[E]=D[d]=D[p]=D[f]=D[v]=D[g]=D[y]=D[k]=D[_]=D[x]=D[S]=!1;var V="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,N="object"==typeof self&&self&&self.Object===Object&&self,U=V||N||Function("return this")(),W=e&&!e.nodeType&&e,q=W&&t&&!t.nodeType&&t,B=q&&q.exports===W,H=B&&V.process,X=function(){try{var t=q&&q.require&&q.require("util").types;return t||H&&H.binding&&H.binding("util")}catch(e){}}(),Z=X&&X.isTypedArray;function Y(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function J(t,e){var i=-1,r=Array(t);while(++i<t)r[i]=e(i);return r}function K(t){return function(e){return t(e)}}function Q(t,e){return null==t?void 0:t[e]}function tt(t,e){return function(i){return t(e(i))}}var et=Array.prototype,it=Function.prototype,rt=Object.prototype,nt=U["__core-js_shared__"],st=it.toString,ot=rt.hasOwnProperty,at=function(){var t=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),lt=rt.toString,ct=st.call(Object),ut=RegExp("^"+st.call(ot).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=B?U.Buffer:void 0,dt=U.Symbol,pt=U.Uint8Array,ft=ht?ht.allocUnsafe:void 0,mt=tt(Object.getPrototypeOf,Object),vt=Object.create,gt=rt.propertyIsEnumerable,bt=et.splice,yt=dt?dt.toStringTag:void 0,wt=function(){try{var t=ke(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),kt=ht?ht.isBuffer:void 0,_t=Math.max,xt=Date.now,Pt=ke(U,"Map"),St=ke(Object,"create"),Tt=function(){function t(){}return function(e){if(!We(e))return{};if(vt)return vt(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Et(t){var e=-1,i=null==t?0:t.length;this.clear();while(++e<i){var r=t[e];this.set(r[0],r[1])}}function Ot(){this.__data__=St?St(null):{},this.size=0}function Rt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ct(t){var e=this.__data__;if(St){var i=e[t];return i===n?void 0:i}return ot.call(e,t)?e[t]:void 0}function jt(t){var e=this.__data__;return St?void 0!==e[t]:ot.call(e,t)}function At(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=St&&void 0===e?n:e,this}function $t(t){var e=-1,i=null==t?0:t.length;this.clear();while(++e<i){var r=t[e];this.set(r[0],r[1])}}function zt(){this.__data__=[],this.size=0}function Mt(t){var e=this.__data__,i=te(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():bt.call(e,i,1),--this.size,!0}function Lt(t){var e=this.__data__,i=te(e,t);return i<0?void 0:e[i][1]}function Gt(t){return te(this.__data__,t)>-1}function Ft(t,e){var i=this.__data__,r=te(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}function It(t){var e=-1,i=null==t?0:t.length;this.clear();while(++e<i){var r=t[e];this.set(r[0],r[1])}}function Dt(){this.size=0,this.__data__={hash:new Et,map:new(Pt||$t),string:new Et}}function Vt(t){var e=we(this,t)["delete"](t);return this.size-=e?1:0,e}function Nt(t){return we(this,t).get(t)}function Ut(t){return we(this,t).has(t)}function Wt(t,e){var i=we(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}function qt(t){var e=this.__data__=new $t(t);this.size=e.size}function Bt(){this.__data__=new $t,this.size=0}function Ht(t){var e=this.__data__,i=e["delete"](t);return this.size=e.size,i}function Xt(t){return this.__data__.get(t)}function Zt(t){return this.__data__.has(t)}function Yt(t,e){var i=this.__data__;if(i instanceof $t){var n=i.__data__;if(!Pt||n.length<r-1)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new It(n)}return i.set(t,e),this.size=i.size,this}function Jt(t,e){var i=Fe(t),r=!i&&Ge(t),n=!i&&!r&&Ve(t),s=!i&&!r&&!n&&He(t),o=i||r||n||s,a=o?J(t.length,String):[],l=a.length;for(var c in t)!e&&!ot.call(t,c)||o&&("length"==c||n&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pe(c,l))||a.push(c);return a}function Kt(t,e,i){(void 0!==i&&!Le(t[e],i)||void 0===i&&!(e in t))&&ee(t,e,i)}function Qt(t,e,i){var r=t[e];ot.call(t,e)&&Le(r,i)&&(void 0!==i||e in t)||ee(t,e,i)}function te(t,e){var i=t.length;while(i--)if(Le(t[i][0],e))return i;return-1}function ee(t,e,i){"__proto__"==e&&wt?wt(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}Et.prototype.clear=Ot,Et.prototype["delete"]=Rt,Et.prototype.get=Ct,Et.prototype.has=jt,Et.prototype.set=At,$t.prototype.clear=zt,$t.prototype["delete"]=Mt,$t.prototype.get=Lt,$t.prototype.has=Gt,$t.prototype.set=Ft,It.prototype.clear=Dt,It.prototype["delete"]=Vt,It.prototype.get=Nt,It.prototype.has=Ut,It.prototype.set=Wt,qt.prototype.clear=Bt,qt.prototype["delete"]=Ht,qt.prototype.get=Xt,qt.prototype.has=Zt,qt.prototype.set=Yt;var ie=be();function re(t){return null==t?void 0===t?P:b:yt&&yt in Object(t)?_e(t):Ce(t)}function ne(t){return qe(t)&&re(t)==l}function se(t){if(!We(t)||Ee(t))return!1;var e=Ne(t)?ut:F;return e.test(Me(t))}function oe(t){return qe(t)&&Ue(t.length)&&!!D[re(t)]}function ae(t){if(!We(t))return Re(t);var e=Oe(t),i=[];for(var r in t)("constructor"!=r||!e&&ot.call(t,r))&&i.push(r);return i}function le(t,e,i,r,n){t!==e&&ie(e,(function(s,o){if(n||(n=new qt),We(s))ce(t,e,o,i,le,r,n);else{var a=r?r(Ae(t,o),s,o+"",t,e,n):void 0;void 0===a&&(a=s),Kt(t,o,a)}}),Ye)}function ce(t,e,i,r,n,s,o){var a=Ae(t,i),l=Ae(e,i),c=o.get(l);if(c)Kt(t,i,c);else{var u=s?s(a,l,i+"",t,e,o):void 0,h=void 0===u;if(h){var d=Fe(l),p=!d&&Ve(l),f=!d&&!p&&He(l);u=l,d||p||f?Fe(a)?u=a:De(a)?u=me(a):p?(h=!1,u=de(l,!0)):f?(h=!1,u=fe(l,!0)):u=[]:Be(l)||Ge(l)?(u=a,Ge(a)?u=Xe(a):We(a)&&!Ne(a)||(u=xe(l))):h=!1}h&&(o.set(l,u),n(u,l,r,s,o),o["delete"](l)),Kt(t,i,u)}}function ue(t,e){return $e(je(t,e,Qe),t+"")}var he=wt?function(t,e){return wt(t,"toString",{configurable:!0,enumerable:!1,value:Ke(e),writable:!0})}:Qe;function de(t,e){if(e)return t.slice();var i=t.length,r=ft?ft(i):new t.constructor(i);return t.copy(r),r}function pe(t){var e=new t.constructor(t.byteLength);return new pt(e).set(new pt(t)),e}function fe(t,e){var i=e?pe(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function me(t,e){var i=-1,r=t.length;e||(e=Array(r));while(++i<r)e[i]=t[i];return e}function ve(t,e,i,r){var n=!i;i||(i={});var s=-1,o=e.length;while(++s<o){var a=e[s],l=r?r(i[a],t[a],a,i,t):void 0;void 0===l&&(l=t[a]),n?ee(i,a,l):Qt(i,a,l)}return i}function ge(t){return ue((function(e,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,o=n>2?i[2]:void 0;s=t.length>3&&"function"==typeof s?(n--,s):void 0,o&&Se(i[0],i[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);while(++r<n){var a=i[r];a&&t(e,a,r,s)}return e}))}function be(t){return function(e,i,r){var n=-1,s=Object(e),o=r(e),a=o.length;while(a--){var l=o[t?a:++n];if(!1===i(s[l],l,s))break}return e}}function ye(t,e,i,r,n,s){return We(t)&&We(e)&&(s.set(e,t),le(t,e,void 0,ye,s),s["delete"](e)),t}function we(t,e){var i=t.__data__;return Te(e)?i["string"==typeof e?"string":"hash"]:i.map}function ke(t,e){var i=Q(t,e);return se(i)?i:void 0}function _e(t){var e=ot.call(t,yt),i=t[yt];try{t[yt]=void 0;var r=!0}catch(s){}var n=lt.call(t);return r&&(e?t[yt]=i:delete t[yt]),n}function xe(t){return"function"!=typeof t.constructor||Oe(t)?{}:Tt(mt(t))}function Pe(t,e){var i=typeof t;return e=null==e?a:e,!!e&&("number"==i||"symbol"!=i&&I.test(t))&&t>-1&&t%1==0&&t<e}function Se(t,e,i){if(!We(i))return!1;var r=typeof e;return!!("number"==r?Ie(i)&&Pe(e,i.length):"string"==r&&e in i)&&Le(i[e],t)}function Te(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ee(t){return!!at&&at in t}function Oe(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||rt;return t===i}function Re(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function Ce(t){return lt.call(t)}function je(t,e,i){return e=_t(void 0===e?t.length-1:e,0),function(){var r=arguments,n=-1,s=_t(r.length-e,0),o=Array(s);while(++n<s)o[n]=r[e+n];n=-1;var a=Array(e+1);while(++n<e)a[n]=r[n];return a[e]=i(o),Y(t,this,a)}}function Ae(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var $e=ze(he);function ze(t){var e=0,i=0;return function(){var r=xt(),n=o-(r-i);if(i=r,n>0){if(++e>=s)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Me(t){if(null!=t){try{return st.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Le(t,e){return t===e||t!==t&&e!==e}var Ge=ne(function(){return arguments}())?ne:function(t){return qe(t)&&ot.call(t,"callee")&&!gt.call(t,"callee")},Fe=Array.isArray;function Ie(t){return null!=t&&Ue(t.length)&&!Ne(t)}function De(t){return qe(t)&&Ie(t)}var Ve=kt||ti;function Ne(t){if(!We(t))return!1;var e=re(t);return e==f||e==m||e==u||e==w}function Ue(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function We(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qe(t){return null!=t&&"object"==typeof t}function Be(t){if(!qe(t)||re(t)!=y)return!1;var e=mt(t);if(null===e)return!0;var i=ot.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&st.call(i)==ct}var He=Z?K(Z):oe;function Xe(t){return ve(t,Ye(t))}var Ze=ue((function(t){return t.push(void 0,ye),Y(Je,void 0,t)}));function Ye(t){return Ie(t)?Jt(t,!0):ae(t)}var Je=ge((function(t,e,i,r){le(t,e,i,r)}));function Ke(t){return function(){return t}}function Qe(t){return t}function ti(){return!1}t.exports=Ze},3520:t=>{var e=9007199254740991,i="[object Arguments]",r="[object Function]",n="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function o(t,e){var i=-1,r=Array(t);while(++i<t)r[i]=e(i);return r}function a(t,e){return function(i){return t(e(i))}}var l=Object.prototype,c=l.hasOwnProperty,u=l.toString,h=l.propertyIsEnumerable,d=a(Object.keys,Object);function p(t,e){var i=k(t)||w(t)?o(t.length,String):[],r=i.length,n=!!r;for(var s in t)!e&&!c.call(t,s)||n&&("length"==s||b(s,r))||i.push(s);return i}var f=g();function m(t,e){return t&&f(t,e,R)}function v(t){if(!y(t))return d(t);var e=[];for(var i in Object(t))c.call(t,i)&&"constructor"!=i&&e.push(i);return e}function g(t){return function(e,i,r){var n=-1,s=Object(e),o=r(e),a=o.length;while(a--){var l=o[t?a:++n];if(!1===i(s[l],l,s))break}return e}}function b(t,i){return i=null==i?e:i,!!i&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&t<i}function y(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||l;return t===i}function w(t){return x(t)&&c.call(t,"callee")&&(!h.call(t,"callee")||u.call(t)==i)}var k=Array.isArray;function _(t){return null!=t&&S(t.length)&&!P(t)}function x(t){return E(t)&&_(t)}function P(t){var e=T(t)?u.call(t):"";return e==r||e==n}function S(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function E(t){return!!t&&"object"==typeof t}function O(t,e){return t&&m(t,"function"==typeof e?e:C)}function R(t){return _(t)?p(t):v(t)}function C(t){return t}t.exports=O},372:(t,e,i)=>{"use strict";var r=i(6060);t.exports=function(t){if("function"!==typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!==typeof t.length)return!1;if("function"!==typeof t.call)return!1;if("function"!==typeof t.apply)return!1}catch(e){return!1}return!r(t)}},3940:(t,e,i)=>{"use strict";var r=i(5618),n={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!r(t)&&hasOwnProperty.call(n,typeof t)}},7205:(t,e,i)=>{"use strict";var r=i(372),n=/^\s*class[\s{/}]/,s=Function.prototype.toString;t.exports=function(t){return!!r(t)&&!n.test(s.call(t))}},6060:(t,e,i)=>{"use strict";var r=i(3940);t.exports=function(t){if(!r(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(e){return!1}}},5618:t=>{"use strict";var e=void 0;t.exports=function(t){return t!==e&&null!==t}},4935:(t,e,i)=>{var r=i(3513);t.exports=r},7921:(t,e,i)=>{var r=i(3072);t.exports=r},347:(t,e,i)=>{var r=i(8744);t.exports=r},9720:(t,e,i)=>{var r=i(6943);t.exports=r},6672:(t,e,i)=>{var r=i(6240),n=i(7265);function s(t,e,i){for(var s in e){var l=e[s];void 0===l?o(t,s,l,i):n(l)?(o(t,s,l,i),l.hook&&l.hook(t,s,i?i[s]:void 0)):r(l)?a(t,e,i,s,l):t[s]=l}}function o(t,e,i,r){if(r){var s=r[e];if(n(s))s.unhook&&s.unhook(t,e,i);else if("attributes"===e)for(var o in s)t.removeAttribute(o);else if("style"===e)for(var a in s)t.style[a]="";else t[e]="string"===typeof s?"":null}}function a(t,e,i,n,s){var o=i?i[n]:void 0;if("attributes"!==n)if(o&&r(o)&&l(o)!==l(s))t[n]=s;else{r(t[n])||(t[n]={});var a="style"===n?"":void 0;for(var c in s){var u=s[c];t[n][c]=void 0===u?a:u}}else for(var h in s){var d=s[h];void 0===d?t.removeAttribute(h):t.setAttribute(h,d)}}function l(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=s},3513:(t,e,i)=>{var r=i(9144),n=i(6672),s=i(5170),o=i(6221),a=i(4097),l=i(6078);function c(t,e){var i=e&&e.document||r,u=e?e.warn:null;if(t=l(t).a,a(t))return t.init();if(o(t))return i.createTextNode(t.text);if(!s(t))return u&&u("Item is not a valid virtual dom node",t),null;var h=null===t.namespace?i.createElement(t.tagName):i.createElementNS(t.namespace,t.tagName),d=t.properties;n(h,d);for(var p=t.children,f=0;f<p.length;f++){var m=c(p[f],e);m&&h.appendChild(m)}return h}t.exports=c},8992:t=>{var e={};function i(t,e,i,n){return i&&0!==i.length?(i.sort(s),r(t,e,i,n,0)):{}}function r(t,i,s,o,a){if(o=o||{},t){n(s,a,a)&&(o[a]=t);var l=i.children;if(l)for(var c=t.childNodes,u=0;u<i.children.length;u++){a+=1;var h=l[u]||e,d=a+(h.count||0);n(s,a,d)&&r(c[u],h,s,o,a),a=d}}return o}function n(t,e,i){if(0===t.length)return!1;var r,n,s=0,o=t.length-1;while(s<=o){if(r=(o+s)/2>>0,n=t[r],s===o)return n>=e&&n<=i;if(n<e)s=r+1;else{if(!(n>i))return!0;o=r-1}}return!1}function s(t,e){return t>e?1:-1}t.exports=i},9120:(t,e,i)=>{var r=i(6672),n=i(4097),s=i(8057),o=i(6670);function a(t,e,i){var n=t.type,o=t.vNode,a=t.patch;switch(n){case s.REMOVE:return l(e,o);case s.INSERT:return c(e,a,i);case s.VTEXT:return u(e,o,a,i);case s.WIDGET:return h(e,o,a,i);case s.VNODE:return d(e,o,a,i);case s.ORDER:return f(e,a),e;case s.PROPS:return r(e,a,o.properties),e;case s.THUNK:return m(e,i.patch(e,a,i));default:return e}}function l(t,e){var i=t.parentNode;return i&&i.removeChild(t),p(t,e),null}function c(t,e,i){var r=i.render(e,i);return t&&t.appendChild(r),t}function u(t,e,i,r){var n;if(3===t.nodeType)t.replaceData(0,t.length,i.text),n=t;else{var s=t.parentNode;n=r.render(i,r),s&&n!==t&&s.replaceChild(n,t)}return n}function h(t,e,i,r){var n,s=o(e,i);n=s?i.update(e,t)||t:r.render(i,r);var a=t.parentNode;return a&&n!==t&&a.replaceChild(n,t),s||p(t,e),n}function d(t,e,i,r){var n=t.parentNode,s=r.render(i,r);return n&&s!==t&&n.replaceChild(s,t),s}function p(t,e){"function"===typeof e.destroy&&n(e)&&e.destroy(t)}function f(t,e){for(var i,r,n,s=t.childNodes,o={},a=0;a<e.removes.length;a++)r=e.removes[a],i=s[r.from],r.key&&(o[r.key]=i),t.removeChild(i);for(var l=s.length,c=0;c<e.inserts.length;c++)n=e.inserts[c],i=o[n.key],t.insertBefore(i,n.to>=l++?null:s[n.to])}function m(t,e){return t&&e&&t!==e&&t.parentNode&&t.parentNode.replaceChild(e,t),e}t.exports=a},6943:(t,e,i)=>{var r=i(9144),n=i(7362),s=i(3513),o=i(8992),a=i(9120);function l(t,e,i){return i=i||{},i.patch=i.patch&&i.patch!==l?i.patch:c,i.render=i.render||s,i.patch(t,e,i)}function c(t,e,i){var n=h(e);if(0===n.length)return t;var s=o(t,e.a,n),a=t.ownerDocument;i.document||a===r||(i.document=a);for(var l=0;l<n.length;l++){var c=n[l];t=u(t,s[c],e[c],i)}return t}function u(t,e,i,r){if(!e)return t;var s;if(n(i))for(var o=0;o<i.length;o++)s=a(i[o],e,r),e===t&&(t=s);else s=a(i,e,r),e===t&&(t=s);return t}function h(t){var e=[];for(var i in t)"a"!==i&&e.push(Number(i));return e}t.exports=l},6670:(t,e,i)=>{var r=i(4097);function n(t,e){return!(!r(t)||!r(e))&&("name"in t&&"name"in e?t.id===e.id:t.init===e.init)}t.exports=n},6505:(t,e,i)=>{"use strict";var r=i(8832);function n(t){if(!(this instanceof n))return new n(t);this.value=t}t.exports=n,n.prototype.hook=function(t,e){var i=r(t),n=e.substr(3);i[n]=this.value},n.prototype.unhook=function(t,e){var i=r(t),n=e.substr(3);i[n]=void 0}},7199:t=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this.value=t}t.exports=e,e.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},8744:(t,e,i)=>{"use strict";var r=i(7362),n=i(4282),s=i(4268),o=i(5170),a=i(6221),l=i(4097),c=i(7265),u=i(6741),h=i(1948),d=i(7199),p=i(6505);function f(t,e,i){var r,s,o,a,l=[];return!i&&b(e)&&(i=e,s={}),s=s||e||{},r=h(t,s),s.hasOwnProperty("key")&&(o=s.key,s.key=void 0),s.hasOwnProperty("namespace")&&(a=s.namespace,s.namespace=void 0),"INPUT"!==r||a||!s.hasOwnProperty("value")||void 0===s.value||c(s.value)||(s.value=d(s.value)),v(s),void 0!==i&&null!==i&&m(i,l,r,s),new n(r,s,l,o,a)}function m(t,e,i,n){if("string"===typeof t)e.push(new s(t));else if("number"===typeof t)e.push(new s(String(t)));else if(g(t))e.push(t);else{if(!r(t)){if(null===t||void 0===t)return;throw y({foreignObject:t,parentVnode:{tagName:i,properties:n}})}for(var o=0;o<t.length;o++)m(t[o],e,i,n)}}function v(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];if(c(i))continue;"ev-"===e.substr(0,3)&&(t[e]=p(i))}}function g(t){return o(t)||a(t)||l(t)||u(t)}function b(t){return"string"===typeof t||r(t)||g(t)}function y(t){var e=new Error;return e.type="virtual-hyperscript.unexpected.virtual-element",e.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+w(t.foreignObject)+".\nThe parent vnode is:\n"+w(t.parentVnode),e.foreignObject=t.foreignObject,e.parentVnode=t.parentVnode,e}function w(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}t.exports=f},1948:(t,e,i)=>{"use strict";var r=i(6824),n=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,s=/^\.|#/;function o(t,e){if(!t)return"DIV";var i,o,a,l,c=!e.hasOwnProperty("id"),u=r(t,n),h=null;for(s.test(u[1])&&(h="DIV"),l=0;l<u.length;l++)o=u[l],o&&(a=o.charAt(0),h?"."===a?(i=i||[],i.push(o.substring(1,o.length))):"#"===a&&c&&(e.id=o.substring(1,o.length)):h=o);return i&&(e.className&&i.push(e.className),e.className=i.join(" ")),e.namespace?h:h.toUpperCase()}t.exports=o},6078:(t,e,i)=>{var r=i(5170),n=i(6221),s=i(4097),o=i(6741);function a(t,e){var i=t,r=e;return o(e)&&(r=l(e,t)),o(t)&&(i=l(t,null)),{a:i,b:r}}function l(t,e){var i=t.vnode;if(i||(i=t.vnode=t.render(e)),!(r(i)||n(i)||s(i)))throw new Error("thunk did not return a valid node");return i}t.exports=a},6741:t=>{function e(t){return t&&"Thunk"===t.type}t.exports=e},7265:t=>{function e(t){return t&&("function"===typeof t.hook&&!t.hasOwnProperty("hook")||"function"===typeof t.unhook&&!t.hasOwnProperty("unhook"))}t.exports=e},5170:(t,e,i)=>{var r=i(9962);function n(t){return t&&"VirtualNode"===t.type&&t.version===r}t.exports=n},6221:(t,e,i)=>{var r=i(9962);function n(t){return t&&"VirtualText"===t.type&&t.version===r}t.exports=n},4097:t=>{function e(t){return t&&"Widget"===t.type}t.exports=e},9962:t=>{t.exports="2"},4282:(t,e,i)=>{var r=i(9962),n=i(5170),s=i(4097),o=i(6741),a=i(7265);t.exports=u;var l={},c=[];function u(t,e,i,r,u){this.tagName=t,this.properties=e||l,this.children=i||c,this.key=null!=r?String(r):void 0,this.namespace="string"===typeof u?u:null;var h,d=i&&i.length||0,p=0,f=!1,m=!1,v=!1;for(var g in e)if(e.hasOwnProperty(g)){var b=e[g];a(b)&&b.unhook&&(h||(h={}),h[g]=b)}for(var y=0;y<d;y++){var w=i[y];n(w)?(p+=w.count||0,!f&&w.hasWidgets&&(f=!0),!m&&w.hasThunks&&(m=!0),v||!w.hooks&&!w.descendantHooks||(v=!0)):!f&&s(w)?"function"===typeof w.destroy&&(f=!0):!m&&o(w)&&(m=!0)}this.count=d+p,this.hasWidgets=f,this.hasThunks=m,this.hooks=h,this.descendantHooks=v}u.prototype.version=r,u.prototype.type="VirtualNode"},8057:(t,e,i)=>{var r=i(9962);function n(t,e,i){this.type=Number(t),this.vNode=e,this.patch=i}n.NONE=0,n.VTEXT=1,n.VNODE=2,n.WIDGET=3,n.PROPS=4,n.ORDER=5,n.INSERT=6,n.REMOVE=7,n.THUNK=8,t.exports=n,n.prototype.version=r,n.prototype.type="VirtualPatch"},4268:(t,e,i)=>{var r=i(9962);function n(t){this.text=String(t)}t.exports=n,n.prototype.version=r,n.prototype.type="VirtualText"},9973:(t,e,i)=>{var r=i(6240),n=i(7265);function s(t,e){var i;for(var a in t){a in e||(i=i||{},i[a]=void 0);var l=t[a],c=e[a];if(l!==c)if(r(l)&&r(c))if(o(c)!==o(l))i=i||{},i[a]=c;else if(n(c))i=i||{},i[a]=c;else{var u=s(l,c);u&&(i=i||{},i[a]=u)}else i=i||{},i[a]=c}for(var h in e)h in t||(i=i||{},i[h]=e[h]);return i}function o(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=s},3072:(t,e,i)=>{var r=i(7362),n=i(8057),s=i(5170),o=i(6221),a=i(4097),l=i(6741),c=i(6078),u=i(9973);function h(t,e){var i={a:t};return d(t,e,i,0),i}function d(t,e,i,r){if(t!==e){var c=i[r],h=!1;if(l(t)||l(e))v(t,e,i,r);else if(null==e)a(t)||(f(t,i,r),c=i[r]),c=x(c,new n(n.REMOVE,t,e));else if(s(e))if(s(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var d=u(t.properties,e.properties);d&&(c=x(c,new n(n.PROPS,t,d))),c=p(t,e,i,c,r)}else c=x(c,new n(n.VNODE,t,e)),h=!0;else c=x(c,new n(n.VNODE,t,e)),h=!0;else o(e)?o(t)?t.text!==e.text&&(c=x(c,new n(n.VTEXT,t,e))):(c=x(c,new n(n.VTEXT,t,e)),h=!0):a(e)&&(a(t)||(h=!0),c=x(c,new n(n.WIDGET,t,e)));c&&(i[r]=c),h&&f(t,i,r)}}function p(t,e,i,r,o){for(var a=t.children,l=w(a,e.children),c=l.children,u=a.length,h=c.length,p=u>h?u:h,f=0;f<p;f++){var m=a[f],v=c[f];o+=1,m?d(m,v,i,o):v&&(r=x(r,new n(n.INSERT,null,v))),s(m)&&m.count&&(o+=m.count)}return l.moves&&(r=x(r,new n(n.ORDER,t,l.moves))),r}function f(t,e,i){b(t,e,i),m(t,e,i)}function m(t,e,i){if(a(t))"function"===typeof t.destroy&&(e[i]=x(e[i],new n(n.REMOVE,t,null)));else if(s(t)&&(t.hasWidgets||t.hasThunks))for(var r=t.children,o=r.length,c=0;c<o;c++){var u=r[c];i+=1,m(u,e,i),s(u)&&u.count&&(i+=u.count)}else l(t)&&v(t,null,e,i)}function v(t,e,i,r){var s=c(t,e),o=h(s.a,s.b);g(o)&&(i[r]=new n(n.THUNK,null,o))}function g(t){for(var e in t)if("a"!==e)return!0;return!1}function b(t,e,i){if(s(t)){if(t.hooks&&(e[i]=x(e[i],new n(n.PROPS,t,y(t.hooks)))),t.descendantHooks||t.hasThunks)for(var r=t.children,o=r.length,a=0;a<o;a++){var c=r[a];i+=1,b(c,e,i),s(c)&&c.count&&(i+=c.count)}}else l(t)&&v(t,null,e,i)}function y(t){var e={};for(var i in t)e[i]=void 0;return e}function w(t,e){var i=_(e),r=i.keys,n=i.free;if(n.length===e.length)return{children:e,moves:null};var s=_(t),o=s.keys,a=s.free;if(a.length===t.length)return{children:e,moves:null};for(var l=[],c=0,u=n.length,h=0,d=0;d<t.length;d++){var p,f=t[d];f.key?r.hasOwnProperty(f.key)?(p=r[f.key],l.push(e[p])):(p=d-h++,l.push(null)):c<u?(p=n[c++],l.push(e[p])):(p=d-h++,l.push(null))}for(var m=c>=n.length?e.length:n[c],v=0;v<e.length;v++){var g=e[v];g.key?o.hasOwnProperty(g.key)||l.push(g):v>=m&&l.push(g)}for(var b,y=l.slice(),w=0,x=[],P=[],S=0;S<e.length;){var T=e[S];b=y[w];while(null===b&&y.length)x.push(k(y,w,null)),b=y[w];b&&b.key===T.key?(w++,S++):T.key?(b&&b.key&&r[b.key]!==S+1?(x.push(k(y,w,b.key)),b=y[w],b&&b.key===T.key?w++:P.push({key:T.key,to:S})):P.push({key:T.key,to:S}),S++):b&&b.key&&x.push(k(y,w,b.key))}while(w<y.length)b=y[w],x.push(k(y,w,b&&b.key));return x.length!==h||P.length?{children:l,moves:{removes:x,inserts:P}}:{children:l,moves:null}}function k(t,e,i){return t.splice(e,1),{from:e,key:i}}function _(t){for(var e={},i=[],r=t.length,n=0;n<r;n++){var s=t[n];s.key?e[s.key]=n:i.push(n)}return{keys:e,free:i}}function x(t,e){return t?(r(t)?t.push(e):t=[t,e],t):e}t.exports=h},4991:t=>{"use strict";function e(t){for(var e,i=1/0,r=-1/0,n=0,s=t.length;n<s;n++)e=t[n],i>e&&(i=e),r<e&&(r=e);return{min:i,max:r}}function i(t,e){var i=Math.pow(2,e-1),r=t<0?t*i:t*(i-1);return Math.max(-i,Math.min(i-1,r))}function r(t,r,s){var o,a,l,c,u,h,d,p=t.length,f=Math.ceil(p/r),m=n(s,2*f);for(o=0;o<f;o++)a=o*r,l=(o+1)*r>p?p:(o+1)*r,c=t.subarray(a,l),d=e(c),h=i(d.min,s),u=i(d.max,s),m[2*o]=h,m[2*o+1]=u;return m}function n(t,e){return new(new Function(`return Int${t}Array`)())(e)}function s(t,e){var i,r,s=t.length,o=1/s,a=t[0].length/2,l=0,c=0,u=n(e,2*a);for(c=0;c<a;c++){for(i=0,r=0,l=0;l<s;l++)i+=o*t[l][2*c],r+=o*t[l][2*c+1];u[2*c]=i,u[2*c+1]=r}return[u]}function o(t,e){return"number"===typeof t?t:e}t.exports=function(t,e,i,n,a,l){if(e=o(e,1e3),l=o(l,16),null!==i&&void 0!==i||(i=!0),[8,16,32].indexOf(l)<0)throw new Error("Invalid number of bits specified for peaks.");var c,u,h,d,p=t.numberOfChannels,f=[];if(n=o(n,0),a=o(a,t.length),"undefined"===typeof t.subarray)for(c=0;c<p;c++)h=t.getChannelData(c),d=h.subarray(n,a),f.push(r(d,e,l));else f.push(r(t.subarray(n,a),e,l));return i&&f.length>1&&(f=s(f,l)),u=f[0].length/2,{length:u,data:f,bits:l}}},7362:t=>{var e=Array.isArray,i=Object.prototype.toString;function r(t){return"[object Array]"===i.call(t)}t.exports=e||r},5893:()=>{}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={id:r,loaded:!1,exports:{}};return t[r](s,s.exports,i),s.loaded=!0,s.exports}(()=>{i.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return i.d(e,{a:e}),e}})(),(()=>{i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{i.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})();var r={};return(()=>{"use strict";i.r(r),i.d(r,{default:()=>Et,init:()=>Tt});var t=i(2098),e=i.n(t),n=i(4935),s=i.n(n),o=i(8370),a=i.n(o),l=i(347),c=i.n(l),u=i(7921),h=i.n(u),d=i(9720),p=i.n(d),f=i(849),m=i.n(f);function v(t,e){return Math.ceil(t*e)}function g(t,e,i){return t*e/i}function b(t,e,i){return Math.ceil(t*i/e)}function y(t,e){const i=Math.ceil(t.duration*e),r=new OfflineAudioContext(t.numberOfChannels,i,e),n=r.createBufferSource();return n.buffer=t,n.connect(r.destination),n.start(),r.startRendering()}const w=0,k=1,_=2,x=3,P=class{constructor(t,e,i=a()()){this.src=t,this.ac=e,this.audioRequestState=w,this.ee=i}setStateChange(t){this.audioRequestState=t,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}fileProgress(t){let e=0;this.audioRequestState===w&&this.setStateChange(k),t.lengthComputable&&(e=t.loaded/t.total*100),this.ee.emit("loadprogress",e,this.src)}fileLoad(t){const e=t.target.response||t.target.result;return this.setStateChange(_),new Promise(((t,i)=>{this.ac.decodeAudioData(e,(e=>{this.audioBuffer=e,this.setStateChange(x),t(e)}),(t=>{i(null===t?Error("MediaDecodeAudioDataUnknownContentType"):t)}))}))}},S=class extends P{load(){return new Promise(((t,e)=>{if(this.src.type.match(/audio.*/)||this.src.type.match(/video\/ogg/)){const i=new FileReader;i.readAsArrayBuffer(this.src),i.addEventListener("progress",(t=>{super.fileProgress(t)})),i.addEventListener("load",(i=>{const r=super.fileLoad(i);r.then((e=>{t(e)})).catch(e)})),i.addEventListener("error",e)}else e(Error(`Unsupported file type ${this.src.type}`))}))}};class T extends P{load(){return Promise.resolve(this.src)}}const E=class extends P{load(){return new Promise(((t,e)=>{const i=new XMLHttpRequest;i.open("GET",this.src,!0),i.responseType="arraybuffer",i.send(),i.addEventListener("progress",(t=>{super.fileProgress(t)})),i.addEventListener("load",(i=>{const r=super.fileLoad(i);r.then((e=>{t(e)})).catch(e)})),i.addEventListener("error",(()=>{e(Error(`Track ${this.src} failed to load`))}))}))}},O=class{static createLoader(t,e,i){if(t instanceof Blob)return new S(t,e,i);if(t instanceof AudioBuffer)return new T(t,e,i);if("string"===typeof t)return new E(t,e,i);throw new Error("Unsupported src type")}},R=class{constructor(t){this.playlist=t}hook(t){const e=this.playlist;if(!e.isScrolling){const i=t;if(e.isAutomaticScroll){const i=t.getBoundingClientRect(),r=e.controls.show?e.controls.width:0,n=g(i.width-r,e.samplesPerPixel,e.sampleRate),s=e.isPlaying()?e.playbackSeconds:e.getTimeSelection().start;(s<e.scrollLeft||s>=e.scrollLeft+n)&&(e.scrollLeft=Math.min(s,e.duration-n))}const r=b(e.scrollLeft,e.samplesPerPixel,e.sampleRate);i.scrollLeft=r}}},C=class{constructor(t,e,i,r,n){this.tickInfo=t,this.offset=e,this.samplesPerPixel=i,this.duration=r,this.colors=n}hook(t,e,i){if(void 0!==i&&i.offset===this.offset&&i.duration===this.duration&&i.samplesPerPixel===this.samplesPerPixel)return;const r=t.width,n=t.height,s=t.getContext("2d");s.clearRect(0,0,r,n),s.fillStyle=this.colors.timeColor,Object.keys(this.tickInfo).forEach((t=>{const e=this.tickInfo[t],i=n-e;s.fillRect(t,i,1,e)}))}};class j{constructor(t,e,i,r,n=0,s){this.duration=t,this.offset=e,this.samplesPerPixel=i,this.sampleRate=r,this.marginLeft=n,this.colors=s,this.timeinfo={2e4:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12e3:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},1e4:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5e3:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}getScaleInfo(t){let e=Object.keys(this.timeinfo).map((t=>parseInt(t,10)));e=e.sort(((t,e)=>t-e));for(let i=0;i<e.length;i+=1)if(t<=e[i])return this.timeinfo[e[i]];return this.timeinfo[e[0]]}static formatTime(t){const e=t/1e3;let i=e%60;const r=(e-i)/60;return i<10&&(i=`0${i}`),`${r}:${i}`}render(){const t=b(this.duration,this.samplesPerPixel,this.sampleRate),e=this.sampleRate/this.samplesPerPixel,i=b(this.offset,this.samplesPerPixel,this.sampleRate),r=this.getScaleInfo(this.samplesPerPixel),n={},s=[],o=t+i;let a=0;for(let l=0;l<o;l+=e*r.secondStep){const t=Math.floor(l),e=t-i;t>=i&&(r.marker&&a%r.marker===0?(s.push(c()("div.time",{attributes:{style:`position: absolute; left: ${e}px;`}},[j.formatTime(a)])),n[e]=10):r.bigStep&&a%r.bigStep===0?n[e]=5:r.smallStep&&a%r.smallStep===0&&(n[e]=2)),a+=1e3*r.secondStep}return c()("div.playlist-time-scale",{attributes:{style:`position: relative; left: 0; right: 0; margin-left: ${this.marginLeft}px;`}},[s,c()("canvas",{attributes:{width:t,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new C(n,this.offset,this.samplesPerPixel,this.duration,this.colors)})])}}const A=j;var $,z=i(1730),M=i.n(z),L=i(3520),G=i.n(L),F=new Uint8Array(16);function I(){if(!$&&($="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $(F)}const D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function V(t){return"string"===typeof t&&D.test(t)}const N=V;for(var U=[],W=0;W<256;++W)U.push((W+256).toString(16).substr(1));function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(U[t[e+0]]+U[t[e+1]]+U[t[e+2]]+U[t[e+3]]+"-"+U[t[e+4]]+U[t[e+5]]+"-"+U[t[e+6]]+U[t[e+7]]+"-"+U[t[e+8]]+U[t[e+9]]+"-"+U[t[e+10]]+U[t[e+11]]+U[t[e+12]]+U[t[e+13]]+U[t[e+14]]+U[t[e+15]]).toLowerCase();if(!N(i))throw TypeError("Stringified UUID is invalid");return i}const B=q;function H(t,e,i){t=t||{};var r=t.random||(t.rng||I)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){i=i||0;for(var n=0;n<16;++n)e[i+n]=r[n];return e}return B(r)}const X=H;var Z=i(4991),Y=i.n(Z),J=i(1114);const K=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){t.preventDefault();const e=t.offsetX,i=g(e,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",i,i,this.track)}static getClass(){return".state-cursor"}static getEvents(){return["click"]}},Q=class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitSelection(t){const e=Math.min(t,this.startX),i=Math.max(t,this.startX),r=g(e,this.samplesPerPixel,this.sampleRate),n=g(i,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",r,n,this.track)}complete(t){this.emitSelection(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.startX=t.offsetX;const e=g(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",e,e,this.track)}mousemove(t){this.active&&(t.preventDefault(),this.emitSelection(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-select"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},tt=class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitShift(t){const e=t-this.prevX,i=g(e,this.samplesPerPixel,this.sampleRate);this.prevX=t,this.track.ee.emit("shift",i,this.track)}complete(t){this.emitShift(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.el=t.target,this.prevX=t.offsetX}mousemove(t){this.active&&(t.preventDefault(),this.emitShift(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-shift"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},et=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=t.offsetX,i=g(e,this.samplesPerPixel,this.sampleRate);i>this.track.getStartTime()&&i<this.track.getEndTime()&&this.track.ee.emit("fadein",i-this.track.getStartTime(),this.track)}static getClass(){return".state-fadein"}static getEvents(){return["click"]}},it=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=t.offsetX,i=g(e,this.samplesPerPixel,this.sampleRate);i>this.track.getStartTime()&&i<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-i,this.track)}static getClass(){return".state-fadeout"}static getEvents(){return["click"]}},rt={cursor:K,select:Q,shift:tt,fadein:et,fadeout:it};class nt{constructor(t,e,i,r,n,s,o,a){this.peaks=t,this.offset=e,this.color=r,this.bits=i,this.scale=n,this.height=s,this.barWidth=o,this.barGap=a}static drawFrame(t,e,i,r,n,s,o){const a=Math.abs(r*e),l=Math.abs(n*e);t.fillRect(i,0,s,e-l),t.fillRect(i,e+a,s,e-a),0!==o&&t.fillRect(i+s,0,o,2*e)}hook(t,e,i){if(void 0!==i&&i.peaks===this.peaks&&i.scale===this.scale&&i.height===this.height)return;const r=this.scale,n=t.width/r,s=t.getContext("2d"),o=t.height/r/2,a=2**(this.bits-1),l=this.barWidth,c=this.barGap,u=l+c;s.clearRect(0,0,t.width,t.height),s.save(),s.fillStyle=this.color,s.scale(r,r);for(let h=0;h<n;h+=u){const t=this.peaks[2*(h+this.offset)]/a,e=this.peaks[2*(h+this.offset)+1]/a;nt.drawFrame(s,o,h,t,e,l,c)}s.restore()}}const st=nt;var ot=i(6226);class at{constructor(t,e,i,r){this.type=t,this.shape=e,this.duration=i,this.samplesPerPixel=r}static createCurve(t,e,i){let r,n;switch(e){case J.Y1:r=1;break;case J.h7:r=-1;break;default:throw new Error("Unsupported fade type.")}switch(t){case J._h:n=(0,ot.sCurve)(i,r);break;case J.t$:n=(0,ot.linear)(i,r);break;case J.Jl:n=(0,ot.exponential)(i,r);break;case J.Hp:n=(0,ot.logarithmic)(i,10,r);break;default:throw new Error("Unsupported fade shape")}return n}hook(t,e,i){if(void 0!==i&&i.shape===this.shape&&i.type===this.type&&i.duration===this.duration&&i.samplesPerPixel===this.samplesPerPixel)return;const r=t.getContext("2d"),n=t.width,s=t.height,o=at.createCurve(this.shape,this.type,n),a=o.length;let l=s-o[0]*s;r.clearRect(0,0,t.width,t.height),r.save(),r.strokeStyle="black",r.beginPath(),r.moveTo(0,l);for(let c=1;c<a;c+=1)l=s-o[c]*s,r.lineTo(c,l);r.stroke(),r.restore()}}const lt=at,ct=class{constructor(t){this.gain=t}hook(t){t.value=100*this.gain,t.title=`${Math.round(100*this.gain)}% volume`}},ut=class{constructor(t){this.stereoPan=t}hook(t){let e;t.value=100*this.stereoPan,e=0===this.stereoPan?"Center":this.stereoPan<0?"Left":"Right";const i=`${Math.abs(Math.round(100*this.stereoPan))}% `;t.title=`Pan: ${0!==this.stereoPan?i:""}${e}`}},ht=1e3,dt=class{constructor(){this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0,this.stereoPan=0}setEventEmitter(t){this.ee=t}setName(t){this.name=t}setCustomClass(t){this.customClass=t}setWaveOutlineColor(t){this.waveOutlineColor=t}setCues(t,e){if(e<t)throw new Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}trim(t,e){const i=this.getStartTime(),r=this.getEndTime(),n=this.cueIn-i;if(i<=t&&r>=t||i<=e&&r>=e){const s=t<i?i:t,o=e>r?r:e;this.setCues(s+n,o+n),t>i&&this.setStartTime(t)}}setStartTime(t){this.startTime=t,this.endTime=t+this.duration}setPlayout(t){this.playout=t}setOfflinePlayout(t){this.offlinePlayout=t}setEnabledStates(t={}){const e={cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0};this.enabledStates=M()({},e,t)}setFadeIn(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade In");const i={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(J.Y1,i.shape,i.start,i.end)}setFadeOut(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade Out");const i={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(J.h7,i.shape,i.start,i.end)}saveFade(t,e,i,r){const n=X();return this.fades[n]={type:t,shape:e,start:i,end:r},n}removeFade(t){delete this.fades[t]}setBuffer(t){this.buffer=t}setPeakData(t){this.peakData=t}calculatePeaks(t,e){const i=v(this.cueIn,e),r=v(this.cueOut,e);this.setPeaks(Y()(this.buffer,t,this.peakData.mono,i,r))}setPeaks(t){this.peaks=t}setState(t){if(this.state=t,this.state&&this.enabledStates[this.state]){const t=rt[this.state];this.stateObj=new t(this)}else this.stateObj=void 0}getStartTime(){return this.startTime}getEndTime(){return this.endTime}getDuration(){return this.duration}isPlaying(){return this.playout.isPlaying()}setShouldPlay(t){this.playout.setShouldPlay(t)}setGainLevel(t){this.gain=t,this.playout.setVolumeGainLevel(t)}setMasterGainLevel(t){this.playout.setMasterGainLevel(t)}setStereoPanValue(t){this.stereoPan=t,this.playout.setStereoPanValue(t)}setEffects(t){this.effectsGraph=t,this.playout.setEffects(t)}schedulePlay(t,e,i,r){let n,s,o=t,a=i?i-e:void 0;const l={shouldPlay:!0,masterGain:1,isOffline:!1},c=M()({},l,r),u=c.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=e||a&&e+a<this.startTime)return Promise.resolve();this.startTime>=e?(n=0,o+=this.startTime-e,i?(a-=this.startTime-e,s=Math.min(a,this.duration)):s=this.duration):(n=e-this.startTime,s=i?Math.min(a,this.duration-n):this.duration-n),n+=this.cueIn;const h=e-this.startTime,d=u.setUpSource();return G()(this.fades,(e=>{let i,r;if(h<e.end)switch(h<=e.start?(i=t+(e.start-h),r=e.end-e.start):h>e.start&&h<e.end&&(i=t-(h-e.start),r=e.end-e.start),e.type){case J.Y1:u.applyFadeIn(i,r,e.shape);break;case J.h7:u.applyFadeOut(i,r,e.shape);break;default:throw new Error("Invalid fade type saved on track.")}})),u.setVolumeGainLevel(this.gain),u.setShouldPlay(c.shouldPlay),u.setMasterGainLevel(c.masterGain),u.setStereoPanValue(this.stereoPan),u.play(o,n,s),d}scheduleStop(t=0){this.playout.stop(t)}renderOverlay(t){const e=b(t.playlistLength,t.resolution,t.sampleRate),i={attributes:{style:`position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: ${e}px; z-index: 9;`}};let r="";if(this.stateObj){this.stateObj.setup(t.resolution,t.sampleRate);const e=rt[this.state],n=e.getEvents();n.forEach((t=>{i[`on${t}`]=this.stateObj[t].bind(this.stateObj)})),r=e.getClass()}return c()(`div.playlist-overlay${r}`,i)}renderControls(t){const e=t.muted?".active":"",i=t.soloed?".active":"",r=t.collapsed,n=this.peaks.data.length,s=t.controls.widgets,o=c()("button.btn.btn-danger.btn-xs.track-remove",{attributes:{type:"button",title:"Remove track"},onclick:()=>{this.ee.emit("removeTrack",this)}},[c()("i.fas.fa-times")]),a=c()("span",[this.name]),l=c()("button.btn.btn-info.btn-xs.track-collapse",{attributes:{type:"button",title:r?"Expand track":"Collapse track"},onclick:()=>{this.ee.emit("changeTrackView",this,{collapsed:!r})}},[c()("i.fas."+(r?"fa-caret-down":"fa-caret-up"))]),u=[];s.remove&&u.push(o),u.push(a),s.collapse&&u.push(l);const h=[c()("div.track-header",u)];return r||(s.muteOrSolo&&h.push(c()("div.btn-group",[c()(`button.btn.btn-outline-dark.btn-xs.btn-mute${e}`,{attributes:{type:"button"},onclick:()=>{this.ee.emit("mute",this)}},["Mute"]),c()(`button.btn.btn-outline-dark.btn-xs.btn-solo${i}`,{onclick:()=>{this.ee.emit("solo",this)}},["Solo"])])),s.volume&&h.push(c()("label.volume",[c()("input.volume-slider",{attributes:{"aria-label":"Track volume control",type:"range",min:0,max:100,value:100},hook:new ct(this.gain),oninput:t=>{this.ee.emit("volumechange",t.target.value,this)}})])),s.stereoPan&&h.push(c()("label.stereopan",[c()("input.stereopan-slider",{attributes:{"aria-label":"Track stereo pan control",type:"range",min:-100,max:100,value:100},hook:new ut(this.stereoPan),oninput:t=>{this.ee.emit("stereopan",t.target.value/100,this)}})]))),c()("div.controls",{attributes:{style:`height: ${n*t.height}px; width: ${t.controls.width}px; position: absolute; left: 0; z-index: 10;`}},h)}render(t){const e=this.peaks.length,i=b(t.playbackSeconds,t.resolution,t.sampleRate),r=b(this.startTime,t.resolution,t.sampleRate),n=b(this.endTime,t.resolution,t.sampleRate);let s=0;const o=this.peaks.data.length,a=Math.ceil(window.devicePixelRatio);i>0&&i>r&&(s=i<n?i-r:e);const l=[c()("div.cursor",{attributes:{style:`position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: ${i}px; bottom: 0; z-index: 5;`}})],u=Object.keys(this.peaks.data).map((i=>{const n=[c()("div.channel-progress",{attributes:{style:`position: absolute; width: ${s}px; height: ${t.height}px; z-index: 2;`}})];let o=0,l=e;const u=this.peaks.data[i];while(l>0){const e=Math.min(l,ht),i=this.waveOutlineColor?this.waveOutlineColor:t.colors.waveOutlineColor;n.push(c()("canvas",{attributes:{width:e*a,height:t.height*a,style:`float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: ${e}px; height: ${t.height}px;`},hook:new st(u,o,this.peaks.bits,i,a,t.height,t.barWidth,t.barGap)})),l-=e,o+=ht}if(this.fadeIn){const e=this.fades[this.fadeIn],i=b(e.end-e.start,t.resolution,t.sampleRate);n.push(c()("div.wp-fade.wp-fadein",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${i}px; top: 0; left: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:i,height:t.height},hook:new lt(e.type,e.shape,e.end-e.start,t.resolution)})]))}if(this.fadeOut){const e=this.fades[this.fadeOut],i=b(e.end-e.start,t.resolution,t.sampleRate);n.push(c()("div.wp-fade.wp-fadeout",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${i}px; top: 0; right: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:i,height:t.height},hook:new lt(e.type,e.shape,e.end-e.start,t.resolution)})]))}return c()(`div.channel.channel-${i}`,{attributes:{style:`height: ${t.height}px; width: ${e}px; top: ${i*t.height}px; left: ${r}px; position: absolute; margin: 0; padding: 0; z-index: 1;`}},n)}));if(l.push(u),l.push(this.renderOverlay(t)),!0===t.isActive){const e=b(t.timeSelection.start,t.resolution,t.sampleRate),i=b(t.timeSelection.end,t.resolution,t.sampleRate),r=i-e+1,n=r>1?".segment":".point";l.push(c()(`div.selection${n}`,{attributes:{style:`position: absolute; width: ${r}px; bottom: 0; top: 0; left: ${e}px; z-index: 4;`}}))}const h=c()("div.waveform",{attributes:{style:`height: ${o*t.height}px; position: relative;`}},l),d=[];let p=0;t.controls.show&&(d.push(this.renderControls(t)),p=t.controls.width),d.push(h);const f=t.shouldPlay?"":".silent",m=void 0===this.customClass?"":`.${this.customClass}`;return c()(`div.channel-wrapper${f}${m}`,{attributes:{style:`margin-left: ${p}px; height: ${t.height*o}px;`}},d)}getTrackDetails(){const t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut,stereoPan:this.stereoPan,gain:this.gain,effects:this.effectsGraph};if(this.fadeIn){const e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){const e=this.fades[this.fadeOut];t.fadeOut={shape:e.shape,duration:e.end-e.start}}return t}};function pt(t,e){t.connect(e)}const ft=class{constructor(t,e,i=t.createGain()){this.ac=t,this.gain=1,this.effectsGraph=pt,this.masterEffectsGraph=pt,this.buffer=e,this.masterGain=i,this.destination=this.ac.destination}applyFade(t,e,i,r="logarithmic"){if(t===J.Y1)(0,J.L7)(this.fadeGain.gain,r,e,i);else{if(t!==J.h7)throw new Error("Unsupported fade type");(0,J.Mt)(this.fadeGain.gain,r,e,i)}}applyFadeIn(t,e,i="logarithmic"){this.applyFade(J.Y1,t,e,i)}applyFadeOut(t,e,i="logarithmic"){this.applyFade(J.h7,t,e,i)}isPlaying(){return void 0!==this.source}getDuration(){return this.buffer.duration}setAudioContext(t){this.ac=t,this.destination=this.ac.destination}createStereoPanner(){return this.ac.createStereoPanner?this.ac.createStereoPanner():this.ac.createPanner()}setUpSource(){let t,e;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;const i=new Promise((i=>{this.source.onended=()=>{this.source.disconnect(),this.fadeGain.disconnect(),this.volumeGain.disconnect(),this.shouldPlayGain.disconnect(),this.panner.disconnect(),t&&t(),e&&e(),this.source=void 0,this.fadeGain=void 0,this.volumeGain=void 0,this.shouldPlayGain=void 0,this.panner=void 0,i()}}));return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.panner=this.createStereoPanner(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.panner),t=this.effectsGraph(this.panner,this.masterGain,this.ac instanceof OfflineAudioContext),e=this.masterEffectsGraph(this.masterGain,this.destination,this.ac instanceof OfflineAudioContext),i}setVolumeGainLevel(t){this.volumeGain&&(this.volumeGain.gain.value=t)}setShouldPlay(t){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=t?1:0)}setMasterGainLevel(t){this.masterGain&&(this.masterGain.gain.value=t)}setStereoPanValue(t=0){this.panner&&(void 0!==this.panner.pan?this.panner.pan.value=t:(this.panner.panningModel="equalpower",this.panner.setPosition(t,0,1-Math.abs(t))))}setEffects(t=pt){this.effectsGraph=t}setMasterEffects(t=pt){this.masterEffectsGraph=t}play(t,e,i){this.source.start(t,e,i)}stop(t=0){this.source&&this.source.stop(t)}};function mt(t){const e={id:t.id||X(),start:Number(t.begin)||0,end:Number(t.end)||0,lines:t.lines||[""],lang:t.language||"en"};return e}function vt(t){return{begin:String(t.start.toFixed(3)),end:String(t.end.toFixed(3)),id:String(t.id),language:t.lang,lines:t.lines}}const gt=class{constructor(t,e={}){this.playlist=t,this.data=e,this.active=!1,this.ondragover=t=>{this.active&&(t.preventDefault(),this.emitDrag(t.clientX))}}emitDrag(t){const e=t-this.prevX;if(e){const i=g(e,this.playlist.samplesPerPixel,this.playlist.sampleRate);this.prevX=t,this.playlist.ee.emit("dragged",i,this.data)}}complete(){this.active=!1,document.removeEventListener("dragover",this.ondragover)}dragstart(t){const e=t;this.active=!0,this.prevX=t.clientX,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}dragend(t){this.active&&(t.preventDefault(),this.complete())}static getClass(){return".shift"}static getEvents(){return["dragstart","dragend"]}},bt=function(){};bt.prototype.hook=function(t){const e=t.querySelector(".current");if(e){const i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.top-i.top,s=t;s.scrollTop+=n}};const yt=bt;function wt(t){function e(t,e){const i=parseInt(t/3600,10)%24,r=parseInt(t/60,10)%60,n=(t%60).toFixed(e),s=i<10?`0${i}`:i,o=r<10?`0${r}`:r,a=n<10?`0${n}`:n;return`${s}:${o}:${a}`}const i={seconds(t){return t.toFixed(0)},thousandths(t){return t.toFixed(3)},"hh:mm:ss":function(t){return e(t,0)},"hh:mm:ss.u":function(t){return e(t,1)},"hh:mm:ss.uu":function(t){return e(t,2)},"hh:mm:ss.uuu":function(t){return e(t,3)}};return i[t]}class kt{constructor(t,e,i=[],r=!1,n=!1,s=!1,o=0){this.playlist=t,this.marginLeft=o,this.resizeHandlers=[],this.editable=r,this.annotations=e.map((t=>mt(t))),this.setupInteractions(),this.controls=i,this.setupEE(t.ee),this.playlist.isContinuousPlay=s,this.playlist.linkEndpoints=n,this.length=this.annotations.length}setupInteractions(){this.annotations.forEach(((t,e)=>{const i=new gt(this.playlist,{direction:"left",index:e}),r=new gt(this.playlist,{direction:"right",index:e});this.resizeHandlers.push(i),this.resizeHandlers.push(r)}))}setupEE(t){return t.on("dragged",((t,e)=>{const i=e.index,r=this.annotations,n=r[i];if("left"===e.direction){const e=n.start;n.start+=t,n.start<0&&(n.start=0),i&&r[i-1].end>n.start&&(r[i-1].end=n.start),this.playlist.linkEndpoints&&i&&r[i-1].end===e&&(r[i-1].end=n.start)}else{const e=n.end;n.end+=t,n.end>this.playlist.duration&&(n.end=this.playlist.duration),i<r.length-1&&r[i+1].start<n.end&&(r[i+1].start=n.end),this.playlist.linkEndpoints&&i<r.length-1&&r[i+1].start===e&&(r[i+1].start=n.end)}this.playlist.drawRequest()})),t.on("continuousplay",(t=>{this.playlist.isContinuousPlay=t})),t.on("linkendpoints",(t=>{this.playlist.linkEndpoints=t})),t.on("annotationsrequest",(()=>{this.export()})),t}export(){const t=this.annotations.map((t=>vt(t))),e=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`,i=document.createElement("a");document.body.appendChild(i),i.href=e,i.download="annotations.json",i.click(),document.body.removeChild(i)}renderResizeLeft(t){const e=gt.getEvents(),i={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},r=this.resizeHandlers[2*t];return e.forEach((t=>{i[`on${t}`]=r[t].bind(r)})),c()("div.resize-handle.resize-w",i)}renderResizeRight(t){const e=gt.getEvents(),i={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},r=this.resizeHandlers[2*t+1];return e.forEach((t=>{i[`on${t}`]=r[t].bind(r)})),c()("div.resize-handle.resize-e",i)}renderControls(t,e){const i=this;return this.controls.map((r=>c()(`i.${r.class}`,{attributes:{title:r.title},onclick:()=>{r.action(t,e,i.annotations,{linkEndpoints:i.playlist.linkEndpoints}),this.setupInteractions(),i.playlist.drawRequest()}})))}render(){const t=c()("div.annotations-boxes",{attributes:{style:`height: 30px; position: relative; margin-left: ${this.marginLeft}px;`}},this.annotations.map(((t,e)=>{const i=this.playlist.samplesPerPixel,r=this.playlist.sampleRate,n=r/i,s=b(this.playlist.scrollLeft,i,r),o=Math.floor(t.start*n-s),a=Math.ceil(t.end*n-t.start*n);return c()("div.annotation-box",{attributes:{style:`position: absolute; height: 30px; width: ${a}px; left: ${o}px`,"data-id":t.id}},[this.renderResizeLeft(e),c()("span.id",{onclick:()=>{const t=this.annotations[e].start,i=this.annotations[e].end;this.playlist.isContinuousPlay?(this.playlist.seek(t,t),this.playlist.ee.emit("play",t)):(this.playlist.seek(t,i),this.playlist.ee.emit("play",t,i))}},[t.id]),this.renderResizeRight(e)])}))),e=c()("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[t]),i=c()("div.annotations-text",{hook:new yt},this.annotations.map(((t,e)=>{const i=wt(this.playlist.durationFormat),r=i(t.start),n=i(t.end);let s="";this.playlist.isPlaying()&&this.playlist.playbackSeconds>=t.start&&this.playlist.playbackSeconds<=t.end&&(s=".current");const o={attributes:{contenteditable:!0},oninput:e=>{t.lines=[e.target.innerText]},onkeypress:t=>{13!==t.which&&13!==t.keyCode||(t.target.blur(),t.preventDefault())}},a=this.editable?o:{};return c()(`div.annotation${s}`,[c()("span.annotation-id",[t.id]),c()("span.annotation-start",[r]),c()("span.annotation-end",[n]),c()("span.annotation-lines",a,[t.lines]),c()("span.annotation-actions",this.renderControls(t,e))])})));return c()("div.annotations",[e,i])}}const _t=kt;function xt(){function t(t){let e,i=1/0,r=-1/0;for(let n=0;n<t.length;n+=1)e=t[n],i>e&&(i=e),r<e&&(r=e);return{min:i,max:r}}function e(t,e){const i=2**(e-1),r=t<0?t*i:t*i-1;return Math.max(-i,Math.min(i-1,r))}function i(i,r,n){const s=i.length,o=Math.ceil(s/r);let a,l,c,u,h,d;const p=new self[`Int${n}Array`](2*o);for(let f=0;f<o;f+=1)a=f*r,l=(f+1)*r>s?s:(f+1)*r,c=i.subarray(a,l),d=t(c),h=e(d.min,n),u=e(d.max,n),p[2*f]=h,p[2*f+1]=u;return p}function r(t,e=1e4,r=8){if([8,16,32].indexOf(r)<0)throw new Error("Invalid number of bits specified for peaks.");const n=[],s=0,o=t.length;n.push(i(t.subarray(s,o),e,r));const a=n[0].length/2;return{bits:r,length:a,data:n}}onmessage=function(t){const e=r(t.data.samples,t.data.samplesPerPixel);postMessage(e)}}function Pt(){let t,e=0,i=[],r=[];function n(e){t=e.sampleRate}function s(t){i.push(t[0]),r.push(t[1]),e+=t[0].length}function o(t,e,i){for(let r=0;r<i.length;r+=1)t.setUint8(e+r,i.charCodeAt(r))}function a(t,e,i){let r=e;for(let n=0;n<i.length;n+=1,r+=2){const e=Math.max(-1,Math.min(1,i[n]));t.setInt16(r,e<0?32768*e:32767*e,!0)}}function l(e,i=!1){const r=new ArrayBuffer(44+2*e.length),n=new DataView(r);return o(n,0,"RIFF"),n.setUint32(4,32+2*e.length,!0),o(n,8,"WAVE"),o(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,i?1:2,!0),n.setUint32(24,t,!0),n.setUint32(28,4*t,!0),n.setUint16(32,4,!0),n.setUint16(34,16,!0),o(n,36,"data"),n.setUint32(40,2*e.length,!0),a(n,44,e),n}function c(t,e){const i=new Float32Array(e);let r=0;for(let n=0;n<t.length;n+=1)i.set(t[n],r),r+=t[n].length;return i}function u(t,e){const i=t.length+e.length,r=new Float32Array(i);let n=0,s=0;while(n<i)r[n+=1]=t[s],r[n+=1]=e[s],s+=1;return r}function h(t){const n=c(i,e),s=c(r,e),o=u(n,s),a=l(o),h=new Blob([a],{type:t});postMessage(h)}function d(){e=0,i=[],r=[]}onmessage=function(t){switch(t.data.command){case"init":n(t.data.config);break;case"record":s(t.data.buffer);break;case"exportWAV":h(t.data.type);break;case"clear":d();break;default:throw new Error("Unknown export worker command")}}}const St=class{constructor(){this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.collapsedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0}initExporter(){this.exportWorker=new(m())(Pt)}initRecorder(t){this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstart=()=>{const t=new dt;t.setName("Recording"),t.setEnabledStates(),t.setEventEmitter(this.ee),this.recordingTrack=t,this.tracks.push(t),this.chunks=[],this.working=!1},this.mediaRecorder.ondataavailable=t=>{if(this.chunks.push(t.data),!this.working){const t=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"}),e=O.createLoader(t,this.ac);e.load().then((t=>{this.recorderWorker.postMessage({samples:t.getChannelData(0),samplesPerPixel:this.samplesPerPixel}),this.recordingTrack.setCues(0,t.duration),this.recordingTrack.setBuffer(t),this.recordingTrack.setPlayout(new ft(this.ac,t,this.masterGainNode)),this.adjustDuration()})).catch((()=>{this.working=!1})),this.working=!0}},this.mediaRecorder.onstop=()=>{this.chunks=[],this.working=!1},this.recorderWorker=new(m())(xt),this.recorderWorker.onmessage=t=>{this.recordingTrack.setPeaks(t.data),this.working=!1,this.drawRequest()}}setShowTimeScale(t){this.showTimescale=t}setMono(t){this.mono=t}setExclSolo(t){this.exclSolo=t}setSeekStyle(t){this.seekStyle=t}getSeekStyle(){return this.seekStyle}setSampleRate(t){this.sampleRate=t}setSamplesPerPixel(t){this.samplesPerPixel=t}setAudioContext(t){this.ac=t,this.masterGainNode=t.createGain()}getAudioContext(){return this.ac}setControlOptions(t){this.controls=t}setWaveHeight(t){this.waveHeight=t}setCollapsedWaveHeight(t){this.collapsedWaveHeight=t}setColors(t){this.colors=t}setBarWidth(t){this.barWidth=t}setBarGap(t){this.barGap=t}setAnnotations(t){const e=this.controls.show?this.controls.width:0;this.annotationList=new _t(this,t.annotations,t.controls,t.editable,t.linkEndpoints,t.isContinuousPlay,e)}setEffects(t){this.effectsGraph=t}setEventEmitter(t){this.ee=t}getEventEmitter(){return this.ee}setUpEventEmitter(){const t=this.ee;t.on("automaticscroll",(t=>{this.isAutomaticScroll=t})),t.on("durationformat",(t=>{this.durationFormat=t,this.drawRequest()})),t.on("select",((t,e,i)=>{this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.seek(t,e,i),this.ee.emit("timeupdate",t),this.drawRequest())})),t.on("startaudiorendering",(t=>{this.startOfflineRender(t)})),t.on("statechange",(t=>{this.setState(t),this.drawRequest()})),t.on("shift",((t,e)=>{e.setStartTime(e.getStartTime()+t),this.adjustDuration(),this.drawRequest()})),t.on("record",(()=>{this.record()})),t.on("play",((t,e)=>{this.play(t,e)})),t.on("pause",(()=>{this.pause()})),t.on("stop",(()=>{this.stop()})),t.on("rewind",(()=>{this.rewind()})),t.on("fastforward",(()=>{this.fastForward()})),t.on("clear",(()=>{this.clear().then((()=>{this.drawRequest()}))})),t.on("solo",(t=>{this.soloTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("mute",(t=>{this.muteTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("removeTrack",(t=>{this.removeTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("changeTrackView",((t,e)=>{this.collapseTrack(t,e),this.drawRequest()})),t.on("volumechange",((t,e)=>{e.setGainLevel(t/100),this.drawRequest()})),t.on("mastervolumechange",(t=>{this.masterGain=t/100,this.tracks.forEach((t=>{t.setMasterGainLevel(this.masterGain)}))})),t.on("fadein",((t,e)=>{e.setFadeIn(t,this.fadeType),this.drawRequest()})),t.on("fadeout",((t,e)=>{e.setFadeOut(t,this.fadeType),this.drawRequest()})),t.on("stereopan",((t,e)=>{e.setStereoPanValue(t),this.drawRequest()})),t.on("fadetype",(t=>{this.fadeType=t})),t.on("newtrack",(t=>{this.load([{src:t,name:t.name}])})),t.on("trim",(()=>{const t=this.getActiveTrack(),e=this.getTimeSelection();t.trim(e.start,e.end),t.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.setTimeSelection(0,0),this.drawRequest()})),t.on("zoomin",(()=>{const t=Math.max(0,this.zoomIndex-1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())})),t.on("zoomout",(()=>{const t=Math.min(this.zoomLevels.length-1,this.zoomIndex+1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())})),t.on("scroll",(()=>{this.isScrolling=!0,this.drawRequest(),clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((()=>{this.isScrolling=!1}),200)}))}load(t){const e=t.map((t=>{const e=O.createLoader(t.src,this.ac,this.ee);return e.load().then((t=>t.sampleRate===this.sampleRate?t:y(t,this.sampleRate)))}));return Promise.all(e).then((e=>{this.ee.emit("audiosourcesloaded");const i=e.map(((e,i)=>{const r=t[i],n=r.name||"Untitled",s=r.start||0,o=r.states||{},a=r.fadeIn,l=r.fadeOut,c=r.cuein||0,u=r.cueout||e.duration,h=r.gain||1,d=r.muted||!1,p=r.soloed||!1,f=r.selected,m=r.peaks||{type:"WebAudio",mono:this.mono},v=r.customClass||void 0,g=r.waveOutlineColor||void 0,b=r.stereoPan||0,y=r.effects||null,w=new ft(this.ac,e,this.masterGainNode),k=new dt;return k.src=r.src,k.setBuffer(e),k.setName(n),k.setEventEmitter(this.ee),k.setEnabledStates(o),k.setCues(c,u),k.setCustomClass(v),k.setWaveOutlineColor(g),void 0!==a&&k.setFadeIn(a.duration,a.shape),void 0!==l&&k.setFadeOut(l.duration,l.shape),void 0!==f&&(this.setActiveTrack(k),this.setTimeSelection(f.start,f.end)),void 0!==m&&k.setPeakData(m),k.setState(this.getState()),k.setStartTime(s),k.setPlayout(w),k.setGainLevel(h),k.setStereoPanValue(b),y&&k.setEffects(y),d&&this.muteTrack(k),p&&this.soloTrack(k),k.calculatePeaks(this.samplesPerPixel,this.sampleRate),k}));this.tracks=this.tracks.concat(i),this.adjustDuration(),this.draw(this.render()),this.ee.emit("audiosourcesrendered")})).catch((t=>{this.ee.emit("audiosourceserror",t)}))}setActiveTrack(t){this.activeTrack=t}getActiveTrack(){return this.activeTrack}isSegmentSelection(){return this.timeSelection.start!==this.timeSelection.end}setTimeSelection(t=0,e){this.timeSelection={start:t,end:void 0===e?t:e},this.cursor=t}async startOfflineRender(t){if(this.isRendering)return;this.isRendering=!0,this.offlineAudioContext=new OfflineAudioContext(2,44100*this.duration,44100);const e=[];this.ee.emit("audiorenderingstarting",this.offlineAudioContext,e);const i=this.offlineAudioContext.currentTime,r=this.offlineAudioContext.createGain();this.tracks.forEach((t=>{const e=new ft(this.offlineAudioContext,t.buffer,r);e.setEffects(t.effectsGraph),e.setMasterEffects(this.effectsGraph),t.setOfflinePlayout(e),t.schedulePlay(i,0,0,{shouldPlay:this.shouldTrackPlay(t),masterGain:1,isOffline:!0})})),await Promise.all(e);const n=await this.offlineAudioContext.startRendering();"buffer"===t?(this.ee.emit("audiorenderingfinished",t,n),this.isRendering=!1):"wav"===t&&(this.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),this.exportWorker.onmessage=e=>{this.ee.emit("audiorenderingfinished",t,e.data),this.isRendering=!1,this.exportWorker.postMessage({command:"clear"})},this.exportWorker.postMessage({command:"record",buffer:[n.getChannelData(0),n.getChannelData(1)]}),this.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}))}getTimeSelection(){return this.timeSelection}setState(t){this.state=t,this.tracks.forEach((e=>{e.setState(t)}))}getState(){return this.state}setZoomIndex(t){this.zoomIndex=t}setZoomLevels(t){this.zoomLevels=t}setZoom(t){this.samplesPerPixel=t,this.zoomIndex=this.zoomLevels.indexOf(t),this.tracks.forEach((e=>{e.calculatePeaks(t,this.sampleRate)}))}muteTrack(t){const e=this.mutedTracks.indexOf(t);e>-1?this.mutedTracks.splice(e,1):this.mutedTracks.push(t)}soloTrack(t){const e=this.soloedTracks.indexOf(t);e>-1?this.soloedTracks.splice(e,1):this.exclSolo?this.soloedTracks=[t]:this.soloedTracks.push(t)}collapseTrack(t,e){if(e.collapsed)this.collapsedTracks.push(t);else{const e=this.collapsedTracks.indexOf(t);e>-1&&this.collapsedTracks.splice(e,1)}}removeTrack(t){t.isPlaying()&&t.scheduleStop();const e=[this.mutedTracks,this.soloedTracks,this.collapsedTracks,this.tracks];e.forEach((e=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)}))}adjustTrackPlayout(){this.tracks.forEach((t=>{t.setShouldPlay(this.shouldTrackPlay(t))}))}adjustDuration(){this.duration=this.tracks.reduce(((t,e)=>Math.max(t,e.getEndTime())),0)}shouldTrackPlay(t){let e;return this.soloedTracks.length>0?(e=!1,this.soloedTracks.indexOf(t)>-1&&(e=!0)):(e=!0,this.mutedTracks.indexOf(t)>-1&&(e=!1)),e}isPlaying(){return this.tracks.reduce(((t,e)=>t||e.isPlaying()),!1)}getCurrentTime(){const t=this.lastSeeked||this.pausedAt||this.cursor;return t+this.getElapsedTime()}getElapsedTime(){return this.ac.currentTime-this.lastPlay}setMasterGain(t){this.ee.emit("mastervolumechange",t)}restartPlayFrom(t,e){return this.stopAnimation(),this.tracks.forEach((t=>{t.scheduleStop()})),Promise.all(this.playoutPromises).then(this.play.bind(this,t,e))}play(t,e){clearTimeout(this.resetDrawTimer);const i=this.ac.currentTime,r=this.getTimeSelection(),n=[],s=t||this.pausedAt||this.cursor;let o=e;return!o&&r.end!==r.start&&r.end>s&&(o=r.end),this.isPlaying()?this.restartPlayFrom(s,o):(this.effectsGraph&&this.tracks&&this.tracks[0].playout.setMasterEffects(this.effectsGraph),this.tracks.forEach((t=>{t.setState("cursor"),n.push(t.schedulePlay(i,s,o,{shouldPlay:this.shouldTrackPlay(t),masterGain:this.masterGain}))})),this.lastPlay=i,this.playoutPromises=n,this.startAnimation(s),Promise.all(this.playoutPromises))}pause(){return this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):Promise.all(this.playoutPromises)}stop(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}playbackReset(){return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach((t=>{t.scheduleStop(),t.setState(this.getState())})),this.masterGainNode.disconnect(),this.drawRequest(),Promise.all(this.playoutPromises)}rewind(){return this.stop().then((()=>{this.scrollLeft=0,this.ee.emit("select",0,0)}))}fastForward(){return this.stop().then((()=>{this.viewDuration<this.duration?this.scrollLeft=this.duration-this.viewDuration:this.scrollLeft=0,this.ee.emit("select",this.duration,this.duration)}))}clear(){return this.stop().then((()=>{this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.seek(0,0,void 0)}))}record(){const t=[];this.mediaRecorder.start(300),this.tracks.forEach((e=>{e.setState("none"),t.push(e.schedulePlay(this.ac.currentTime,0,void 0,{shouldPlay:this.shouldTrackPlay(e)}))})),this.playoutPromises=t}startAnimation(t){this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame((()=>{this.updateEditor(t)}))}stopAnimation(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}seek(t,e,i){this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.setActiveTrack(i||this.tracks[0]),this.pausedAt=t,this.setTimeSelection(t,e),"fill"===this.getSeekStyle()&&(this.playbackSeconds=t))}updateEditor(t){const e=this.ac.currentTime,i=this.getTimeSelection(),r=t||this.cursor,n=e-this.lastDraw;if(this.isPlaying()){const t=r+n;this.ee.emit("timeupdate",t),this.animationRequest=window.requestAnimationFrame((()=>{this.updateEditor(t)})),this.playbackSeconds=t,this.draw(this.render()),this.lastDraw=e}else r+n>=(this.isSegmentSelection()?i.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout((()=>{this.pausedAt=void 0,this.lastSeeked=void 0,this.setState(this.getState()),this.playbackSeconds=0,this.draw(this.render())}),0)}drawRequest(){window.requestAnimationFrame((()=>{this.draw(this.render())}))}draw(t){const e=h()(this.tree,t);this.rootNode=p()(this.rootNode,e),this.tree=t,this.viewDuration=g(this.rootNode.clientWidth-this.controls.width,this.samplesPerPixel,this.sampleRate)}getTrackRenderData(t={}){const i={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors,barWidth:this.barWidth,barGap:this.barGap};return e()({},t,i)}isActiveTrack(t){const e=this.getActiveTrack();return!this.isSegmentSelection()||e===t}renderAnnotations(){return this.annotationList.render()}renderTimeScale(){const t=this.controls.show?this.controls.width:0,e=new A(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,t,this.colors);return e.render()}renderTrackSection(){const t=this.tracks.map((t=>{const e=this.collapsedTracks.indexOf(t)>-1;return t.render(this.getTrackRenderData({isActive:this.isActiveTrack(t),shouldPlay:this.shouldTrackPlay(t),soloed:this.soloedTracks.indexOf(t)>-1,muted:this.mutedTracks.indexOf(t)>-1,collapsed:e,height:e?this.collapsedWaveHeight:this.waveHeight,barGap:this.barGap,barWidth:this.barWidth}))}));return c()("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:t=>{this.scrollLeft=g(t.target.scrollLeft,this.samplesPerPixel,this.sampleRate),this.ee.emit("scroll")},hook:new R(this)},t)}render(){const t=[];return this.showTimescale&&t.push(this.renderTimeScale()),t.push(this.renderTrackSection()),this.annotationList.length&&t.push(this.renderAnnotations()),c()("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},t)}getInfo(){const t=[];return this.tracks.forEach((e=>{t.push(e.getTrackDetails())})),{tracks:t,effects:this.effectsGraph}}};function Tt(t={},i=a()()){if(void 0===t.container)throw new Error("DOM element container must be given.");const r={samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150,widgets:{muteOrSolo:!0,volume:!0,stereoPan:!0,collapse:!0,remove:!0}},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,collapsedWaveHeight:30,barWidth:1,barGap:0,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1},n=e()({},t,r),o=n.zoomLevels.indexOf(n.samplesPerPixel);if(-1===o)throw new Error("initial samplesPerPixel must be included in array zoomLevels");const l=new St,c=n.ac||new AudioContext;l.setAudioContext(c),l.setSampleRate(n.sampleRate||c.sampleRate),l.setSamplesPerPixel(n.samplesPerPixel),l.setEventEmitter(i),l.setUpEventEmitter(),l.setTimeSelection(0,0),l.setState(n.state),l.setControlOptions(n.controls),l.setWaveHeight(n.waveHeight),l.setCollapsedWaveHeight(n.collapsedWaveHeight),l.setColors(n.colors),l.setZoomLevels(n.zoomLevels),l.setZoomIndex(o),l.setMono(n.mono),l.setExclSolo(n.exclSolo),l.setShowTimeScale(n.timescale),l.setSeekStyle(n.seekStyle),l.setAnnotations(n.annotationList),l.setBarGap(n.barGap),l.setBarWidth(n.barWidth),l.isAutomaticScroll=n.isAutomaticScroll,l.isContinuousPlay=n.isContinuousPlay,l.linkedEndpoints=n.linkedEndpoints,n.effects&&l.setEffects(n.effects);const u=l.render(),h=s()(u);return n.container.appendChild(h),l.tree=u,l.rootNode=h,l}function Et(t={},e=a()()){return Tt(t,e)}})(),r})()}))},68052:function(t,e,i){var r=i(97218);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var n=i(31982).Z;n("64dc7726",r,!0,{sourceMap:!1,shadowMode:!1})},36988:function(t,e,i){var r=i(51849);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var n=i(31982).Z;n("07107bae",r,!0,{sourceMap:!1,shadowMode:!1})},77203:function(t,e,i){var r=i(3129);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var n=i(31982).Z;n("31071e86",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=879.js.map