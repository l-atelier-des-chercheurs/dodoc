/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
((typeof self !== 'undefined' ? self : this)["webpackChunkapp"] = (typeof self !== 'undefined' ? self : this)["webpackChunkapp"] || []).push([["src_adc-core_fields_PrintMap_vue"],{

/***/ "./src/adc-core/fields/PrintMap.vue":
/*!******************************************!*\
  !*** ./src/adc-core/fields/PrintMap.vue ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true& */ \"./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true&\");\n/* harmony import */ var _PrintMap_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PrintMap.vue?vue&type=script&lang=js& */ \"./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js&\");\n/* harmony import */ var _PrintMap_vue_vue_type_style_index_0_id_58e5a6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& */ \"./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&\");\n/* harmony import */ var _node_modules_vue_vue_loader_v15_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js */ \"./node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\");\n\n\n\n;\n\n\n/* normalize component */\n\nvar component = (0,_node_modules_vue_vue_loader_v15_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\n  _PrintMap_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  _PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__.render,\n  _PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns,\n  false,\n  null,\n  \"58e5a6ca\",\n  null\n  \n)\n\n/* hot reload */\nif (true) {\n  var api = __webpack_require__(/*! ./node_modules/vue-hot-reload-api/dist/index.js */ \"./node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(__webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.esm.js\"))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('58e5a6ca')) {\n      api.createRecord('58e5a6ca', component.options)\n    } else {\n      api.reload('58e5a6ca', component.options)\n    }\n    module.hot.accept(/*! ./PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true& */ \"./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true&\", function(__WEBPACK_OUTDATED_DEPENDENCIES__) { /* harmony import */ _PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true& */ \"./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true&\");\n(function () {\n      api.rerender('58e5a6ca', {\n        render: _PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__.render,\n        staticRenderFns: _PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns\n      })\n    })(__WEBPACK_OUTDATED_DEPENDENCIES__); }.bind(this))\n  }\n}\ncomponent.options.__file = \"src/adc-core/fields/PrintMap.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYWRjLWNvcmUvZmllbGRzL1ByaW50TWFwLnZ1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHAvLi9zcmMvYWRjLWNvcmUvZmllbGRzL1ByaW50TWFwLnZ1ZT8zOGY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vUHJpbnRNYXAudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTU4ZTVhNmNhJnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1ByaW50TWFwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vUHJpbnRNYXAudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL1ByaW50TWFwLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTU4ZTVhNmNhJmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiNThlNWE2Y2FcIixcbiAgbnVsbFxuICBcbilcblxuLyogaG90IHJlbG9hZCAqL1xuaWYgKG1vZHVsZS5ob3QpIHtcbiAgdmFyIGFwaSA9IHJlcXVpcmUoXCIvVXNlcnMvbG91aXMvRG9jdW1lbnRzL1JFUE8vTFVNQS9jbGllbnQvbm9kZV9tb2R1bGVzL3Z1ZS1ob3QtcmVsb2FkLWFwaS9kaXN0L2luZGV4LmpzXCIpXG4gIGFwaS5pbnN0YWxsKHJlcXVpcmUoJ3Z1ZScpKVxuICBpZiAoYXBpLmNvbXBhdGlibGUpIHtcbiAgICBtb2R1bGUuaG90LmFjY2VwdCgpXG4gICAgaWYgKCFhcGkuaXNSZWNvcmRlZCgnNThlNWE2Y2EnKSkge1xuICAgICAgYXBpLmNyZWF0ZVJlY29yZCgnNThlNWE2Y2EnLCBjb21wb25lbnQub3B0aW9ucylcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbG9hZCgnNThlNWE2Y2EnLCBjb21wb25lbnQub3B0aW9ucylcbiAgICB9XG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoXCIuL1ByaW50TWFwLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD01OGU1YTZjYSZzY29wZWQ9dHJ1ZSZcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgYXBpLnJlcmVuZGVyKCc1OGU1YTZjYScsIHtcbiAgICAgICAgcmVuZGVyOiByZW5kZXIsXG4gICAgICAgIHN0YXRpY1JlbmRlckZuczogc3RhdGljUmVuZGVyRm5zXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cbmNvbXBvbmVudC5vcHRpb25zLl9fZmlsZSA9IFwic3JjL2FkYy1jb3JlL2ZpZWxkcy9QcmludE1hcC52dWVcIlxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/adc-core/fields/PrintMap.vue\n");

/***/ }),

/***/ "./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true&":
/*!*************************************************************************************!*\
  !*** ./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true& ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": function() { return /* reexport safe */ _node_modules_vue_vue_loader_v15_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__.render; },
/* harmony export */   "staticRenderFns": function() { return /* reexport safe */ _node_modules_vue_vue_loader_v15_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns; }
/* harmony export */ });
/* harmony import */ var _node_modules_vue_vue_loader_v15_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_template_id_58e5a6ca_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true& */ "./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true&");


/***/ }),

/***/ "./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js&":
/*!*******************************************************************!*\
  !*** ./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js& ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_37_0_rules_0_use_0_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PrintMap.vue?vue&type=script&lang=js& */ \"./node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js&\");\n /* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_babel_loader_lib_index_js_clonedRuleSet_37_0_rules_0_use_0_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[\"default\"]); //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYWRjLWNvcmUvZmllbGRzL1ByaW50TWFwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyYuanMiLCJtYXBwaW5ncyI6Ijs7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC8uL3NyYy9hZGMtY29yZS9maWVsZHMvUHJpbnRNYXAudnVlPzE0NTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC0zN1swXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9QcmludE1hcC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCI7IGV4cG9ydCBkZWZhdWx0IG1vZDsgZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtMzdbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vUHJpbnRNYXAudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js&\n");

/***/ }),

/***/ "./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&":
/*!****************************************************************************************************!*\
  !*** ./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_clonedRuleSet_19_0_rules_0_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_3_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_style_index_0_id_58e5a6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-style-loader/index.js??clonedRuleSet-19[0].rules[0].use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& */ "./node_modules/vue-style-loader/index.js??clonedRuleSet-19[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&");
/* harmony import */ var _node_modules_vue_style_loader_index_js_clonedRuleSet_19_0_rules_0_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_3_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_style_index_0_id_58e5a6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_clonedRuleSet_19_0_rules_0_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_3_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_style_index_0_id_58e5a6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_clonedRuleSet_19_0_rules_0_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_3_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_style_index_0_id_58e5a6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = function(key) { return _node_modules_vue_style_loader_index_js_clonedRuleSet_19_0_rules_0_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_2_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_19_0_rules_0_use_3_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_PrintMap_vue_vue_type_style_index_0_id_58e5a6ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }.bind(0, __WEBPACK_IMPORT_KEY__)
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);


/***/ }),

/***/ "./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true&":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true& ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"render\": function() { return /* binding */ render; },\n/* harmony export */   \"staticRenderFns\": function() { return /* binding */ staticRenderFns; }\n/* harmony export */ });\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"BaseModal2\",\n    {\n      attrs: { title: _vm.$t(\"print_map\") },\n      on: {\n        close: function ($event) {\n          return _vm.$emit(\"close\")\n        },\n      },\n    },\n    [\n      _vm.is_making_preview ? _c(\"LoaderSpinner\") : _vm._e(),\n      _c(\n        \"div\",\n        { staticClass: \"u-spacingBottom\" },\n        [\n          _c(\"DLabel\", { attrs: { str: _vm.$t(\"format\") } }),\n          _c(\n            \"select\",\n            {\n              directives: [\n                {\n                  name: \"model\",\n                  rawName: \"v-model\",\n                  value: _vm.print_format,\n                  expression: \"print_format\",\n                },\n              ],\n              on: {\n                change: function ($event) {\n                  var $$selectedVal = Array.prototype.filter\n                    .call($event.target.options, function (o) {\n                      return o.selected\n                    })\n                    .map(function (o) {\n                      var val = \"_value\" in o ? o._value : o.value\n                      return val\n                    })\n                  _vm.print_format = $event.target.multiple\n                    ? $$selectedVal\n                    : $$selectedVal[0]\n                },\n              },\n            },\n            _vm._l(_vm.print_formats, function (format) {\n              return _c(\"option\", {\n                key: format.key,\n                domProps: {\n                  value: format.key,\n                  textContent: _vm._s(format.key),\n                },\n              })\n            }),\n            0\n          ),\n        ],\n        1\n      ),\n      _c(\n        \"div\",\n        { staticClass: \"u-spacingBottom\" },\n        [\n          _c(\"ToggleInput\", {\n            attrs: {\n              content: _vm.print_only_basemap,\n              label: _vm.$t(\"print_only_basemap\"),\n            },\n            on: {\n              \"update:content\": function ($event) {\n                _vm.print_only_basemap = $event\n              },\n            },\n          }),\n        ],\n        1\n      ),\n      _c(\"fieldset\", { staticClass: \"u-spacingBottom _previewCanvas\" }, [\n        _c(\"legend\", { staticClass: \"u-label\" }, [\n          _vm._v(_vm._s(_vm.$t(\"preview\"))),\n        ]),\n        _c(\"canvas\", {\n          directives: [\n            {\n              name: \"show\",\n              rawName: \"v-show\",\n              value: false,\n              expression: \"false\",\n            },\n          ],\n          ref: \"mapCanvas\",\n        }),\n        _c(\"canvas\", { ref: \"pageCanvas\" }),\n      ]),\n      _c(\n        \"button\",\n        {\n          staticClass: \"u-button u-button_bleuvert\",\n          attrs: { type: \"button\", disabled: _vm.is_making_print },\n          on: {\n            click: function ($event) {\n              return _vm.printMap()\n            },\n          },\n        },\n        [\n          _c(\"b-icon\", {\n            staticClass: \"inlineSVG\",\n            attrs: { icon: \"printer\" },\n          }),\n          _vm._v(\" \" + _vm._s(_vm.$t(\"export_in_pdf\")) + \" \"),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvbG9hZGVycy90ZW1wbGF0ZUxvYWRlci5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9zcmMvYWRjLWNvcmUvZmllbGRzL1ByaW50TWFwLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD01OGU1YTZjYSZzY29wZWQ9dHJ1ZSYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC8uL3NyYy9hZGMtY29yZS9maWVsZHMvUHJpbnRNYXAudnVlP2I5N2QiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF92bSA9IHRoaXNcbiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50XG4gIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaFxuICByZXR1cm4gX2MoXG4gICAgXCJCYXNlTW9kYWwyXCIsXG4gICAge1xuICAgICAgYXR0cnM6IHsgdGl0bGU6IF92bS4kdChcInByaW50X21hcFwiKSB9LFxuICAgICAgb246IHtcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3ZtLiRlbWl0KFwiY2xvc2VcIilcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBbXG4gICAgICBfdm0uaXNfbWFraW5nX3ByZXZpZXcgPyBfYyhcIkxvYWRlclNwaW5uZXJcIikgOiBfdm0uX2UoKSxcbiAgICAgIF9jKFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICB7IHN0YXRpY0NsYXNzOiBcInUtc3BhY2luZ0JvdHRvbVwiIH0sXG4gICAgICAgIFtcbiAgICAgICAgICBfYyhcIkRMYWJlbFwiLCB7IGF0dHJzOiB7IHN0cjogX3ZtLiR0KFwiZm9ybWF0XCIpIH0gfSksXG4gICAgICAgICAgX2MoXG4gICAgICAgICAgICBcInNlbGVjdFwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LW1vZGVsXCIsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLnByaW50X2Zvcm1hdCxcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwicHJpbnRfZm9ybWF0XCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgIHZhciAkJHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlclxuICAgICAgICAgICAgICAgICAgICAuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBcIl92YWx1ZVwiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBfdm0ucHJpbnRfZm9ybWF0ID0gJGV2ZW50LnRhcmdldC5tdWx0aXBsZVxuICAgICAgICAgICAgICAgICAgICA/ICQkc2VsZWN0ZWRWYWxcbiAgICAgICAgICAgICAgICAgICAgOiAkJHNlbGVjdGVkVmFsWzBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdm0uX2woX3ZtLnByaW50X2Zvcm1hdHMsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9jKFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBrZXk6IGZvcm1hdC5rZXksXG4gICAgICAgICAgICAgICAgZG9tUHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBmb3JtYXQua2V5LFxuICAgICAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IF92bS5fcyhmb3JtYXQua2V5KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAwXG4gICAgICAgICAgKSxcbiAgICAgICAgXSxcbiAgICAgICAgMVxuICAgICAgKSxcbiAgICAgIF9jKFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICB7IHN0YXRpY0NsYXNzOiBcInUtc3BhY2luZ0JvdHRvbVwiIH0sXG4gICAgICAgIFtcbiAgICAgICAgICBfYyhcIlRvZ2dsZUlucHV0XCIsIHtcbiAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgIGNvbnRlbnQ6IF92bS5wcmludF9vbmx5X2Jhc2VtYXAsXG4gICAgICAgICAgICAgIGxhYmVsOiBfdm0uJHQoXCJwcmludF9vbmx5X2Jhc2VtYXBcIiksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgXCJ1cGRhdGU6Y29udGVudFwiOiBmdW5jdGlvbiAoJGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgX3ZtLnByaW50X29ubHlfYmFzZW1hcCA9ICRldmVudFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXSxcbiAgICAgICAgMVxuICAgICAgKSxcbiAgICAgIF9jKFwiZmllbGRzZXRcIiwgeyBzdGF0aWNDbGFzczogXCJ1LXNwYWNpbmdCb3R0b20gX3ByZXZpZXdDYW52YXNcIiB9LCBbXG4gICAgICAgIF9jKFwibGVnZW5kXCIsIHsgc3RhdGljQ2xhc3M6IFwidS1sYWJlbFwiIH0sIFtcbiAgICAgICAgICBfdm0uX3YoX3ZtLl9zKF92bS4kdChcInByZXZpZXdcIikpKSxcbiAgICAgICAgXSksXG4gICAgICAgIF9jKFwiY2FudmFzXCIsIHtcbiAgICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6IFwic2hvd1wiLFxuICAgICAgICAgICAgICByYXdOYW1lOiBcInYtc2hvd1wiLFxuICAgICAgICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICAgICAgICAgIGV4cHJlc3Npb246IFwiZmFsc2VcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICByZWY6IFwibWFwQ2FudmFzXCIsXG4gICAgICAgIH0pLFxuICAgICAgICBfYyhcImNhbnZhc1wiLCB7IHJlZjogXCJwYWdlQ2FudmFzXCIgfSksXG4gICAgICBdKSxcbiAgICAgIF9jKFxuICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICB7XG4gICAgICAgICAgc3RhdGljQ2xhc3M6IFwidS1idXR0b24gdS1idXR0b25fYmxldXZlcnRcIixcbiAgICAgICAgICBhdHRyczogeyB0eXBlOiBcImJ1dHRvblwiLCBkaXNhYmxlZDogX3ZtLmlzX21ha2luZ19wcmludCB9LFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICByZXR1cm4gX3ZtLnByaW50TWFwKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgW1xuICAgICAgICAgIF9jKFwiYi1pY29uXCIsIHtcbiAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImlubGluZVNWR1wiLFxuICAgICAgICAgICAgYXR0cnM6IHsgaWNvbjogXCJwcmludGVyXCIgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBfdm0uX3YoXCIgXCIgKyBfdm0uX3MoX3ZtLiR0KFwiZXhwb3J0X2luX3BkZlwiKSkgKyBcIiBcIiksXG4gICAgICAgIF0sXG4gICAgICAgIDFcbiAgICAgICksXG4gICAgXSxcbiAgICAxXG4gIClcbn1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxucmVuZGVyLl93aXRoU3RyaXBwZWQgPSB0cnVlXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=template&id=58e5a6ca&scoped=true&\n");

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js&":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jspdf */ \"./node_modules/jspdf/dist/jspdf.es.min.js\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  props: {\n    map: Object\n  },\n  components: {},\n  data() {\n    return {\n      is_making_preview: false,\n      is_making_print: false,\n      print_options: {},\n      print_format: \"A4\",\n      print_formats: [{\n        key: \"A0\",\n        dimensions: [1189, 841]\n      }, {\n        key: \"A1\",\n        dimensions: [841, 594]\n      }, {\n        key: \"A2\",\n        dimensions: [594, 420]\n      }, {\n        key: \"A3\",\n        dimensions: [420, 297]\n      }, {\n        key: \"A4\",\n        dimensions: [297, 210]\n      }, {\n        key: \"A5\",\n        dimensions: [210, 148]\n      }],\n      print_only_basemap: true\n    };\n  },\n  i18n: {\n    messages: {\n      fr: {\n        print_map: \"Imprimer la carte\",\n        print_only_basemap: \"Uniquement le fond de carte (masquer les épingles et les dessins)\"\n      },\n      en: {\n        print_map: \"Print the map\",\n        print_only_basemap: \"Only print the baselayer (do not print pins and drawing)\"\n      }\n    }\n  },\n  created() {},\n  mounted() {\n    this.$nextTick(() => {\n      this.generatePreview();\n    });\n  },\n  beforeDestroy() {},\n  watch: {\n    print_only_basemap() {\n      this.generatePreview();\n    },\n    print_format() {\n      this.generatePreview();\n    }\n  },\n  computed: {},\n  methods: {\n    async generatePreview() {\n      // from https://openlayers.org/en/latest/examples/export-pdf.html\n      this.is_making_preview = true;\n      await new Promise(r => setTimeout(r, 500));\n      const format = this.print_format;\n      const dim = this.print_formats.find(f => f.key === format).dimensions;\n      const resolution = 300; // DPI\n      const map = this.map;\n      const [current_map_width, current_map_height] = map.getSize();\n      let orientation, paper_width_in_mm, paper_height_in_mm;\n      if (current_map_width <= current_map_height) {\n        orientation = \"portrait\";\n        paper_width_in_mm = dim[1];\n        paper_height_in_mm = dim[0];\n      } else {\n        orientation = \"landscape\";\n        paper_width_in_mm = dim[0];\n        paper_height_in_mm = dim[1];\n      }\n      const paper_width = Math.round(paper_width_in_mm * resolution / 25.4);\n      const paper_height = Math.round(paper_height_in_mm * resolution / 25.4);\n      const viewResolution = map.getView().getResolution();\n      var hRatio = paper_width / current_map_width;\n      var vRatio = paper_height / current_map_height;\n      var ratio = Math.min(hRatio, vRatio);\n      const new_map_width = current_map_width * ratio;\n      const new_map_height = current_map_height * ratio;\n      var centerShift_x = (paper_width - new_map_width) / 2;\n      var centerShift_y = (paper_height - new_map_height) / 2;\n      map.once(\"rendercomplete\", () => {\n        const mapCanvas = this.$refs.mapCanvas;\n        mapCanvas.width = new_map_width;\n        mapCanvas.height = new_map_height;\n        const mapContext = mapCanvas.getContext(\"2d\");\n        Array.prototype.forEach.call(document.querySelectorAll(\".ol-layer\"), async layer => {\n          if (this.print_only_basemap) if (!layer.className?.includes(\"ol-basemap\")) return;\n          const canvas = layer.querySelector(\"canvas\");\n          if (canvas.width > 0) {\n            const opacity = canvas.parentNode.style.opacity;\n            mapContext.globalAlpha = opacity === \"\" ? 1 : Number(opacity);\n            const transform = canvas.style.transform;\n            // Get the transform parameters from the style's transform matrix\n            const matrix = transform\n            // eslint-disable-next-line\n            .match(/^matrix\\(([^\\(]*)\\)$/)[1].split(\",\").map(Number);\n            // Apply the transform to the export map context\n            CanvasRenderingContext2D.prototype.setTransform.apply(mapContext, matrix);\n            mapContext.drawImage(canvas, 0, 0);\n          }\n        });\n        mapContext.globalAlpha = 1;\n        mapContext.setTransform(1, 0, 0, 1, 0, 0);\n        const page_canvas = this.$refs.pageCanvas;\n        page_canvas.width = paper_width;\n        page_canvas.height = paper_height;\n        const page_context = page_canvas.getContext(\"2d\");\n        page_context.fillStyle = \"white\";\n        page_context.fillRect(0, 0, page_canvas.width, page_canvas.height);\n        page_context.drawImage(mapCanvas, centerShift_x, centerShift_y, new_map_width, new_map_height);\n        this.print_options = {\n          orientation,\n          format,\n          paper_width_in_mm,\n          paper_height_in_mm,\n          page_canvas\n        };\n\n        // Reset original map size\n        map.setSize([current_map_width, current_map_height]);\n        map.getView().setResolution(viewResolution);\n        this.is_making_preview = false;\n      });\n\n      // ratio = 0.5;\n      // map.setSize([current_map_width * ratio, current_map_height * ratio]);\n      // map.getView().setResolution(viewResolution * ratio);\n\n      const printSize = [new_map_width, new_map_height];\n      map.setSize(printSize);\n      const scaling = Math.min(paper_width / current_map_width, paper_height / current_map_height);\n      map.getView().setResolution(viewResolution / scaling);\n    },\n    printMap() {\n      this.is_making_print = true;\n      const {\n        orientation,\n        format,\n        paper_width_in_mm,\n        paper_height_in_mm,\n        page_canvas\n      } = this.print_options;\n      const pdf = new jspdf__WEBPACK_IMPORTED_MODULE_0__.jsPDF({\n        orientation,\n        unit: \"mm\",\n        format\n      });\n      pdf.addImage(page_canvas.toDataURL(\"image/jpeg\"), \"JPEG\", 0, 0, paper_width_in_mm, paper_height_in_mm);\n      pdf.save(\"map.pdf\");\n      this.is_making_print = false;\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC0zN1swXS5ydWxlc1swXS51c2VbMF0hLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL3NyYy9hZGMtY29yZS9maWVsZHMvUHJpbnRNYXAudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0NBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC9zcmMvYWRjLWNvcmUvZmllbGRzL1ByaW50TWFwLnZ1ZT9iZmIwIl0sInNvdXJjZXNDb250ZW50IjpbIjx0ZW1wbGF0ZT5cbiAgPEJhc2VNb2RhbDIgOnRpdGxlPVwiJHQoJ3ByaW50X21hcCcpXCIgQGNsb3NlPVwiJGVtaXQoJ2Nsb3NlJylcIj5cbiAgICA8TG9hZGVyU3Bpbm5lciB2LWlmPVwiaXNfbWFraW5nX3ByZXZpZXdcIiAvPlxuICAgIDxkaXYgY2xhc3M9XCJ1LXNwYWNpbmdCb3R0b21cIj5cbiAgICAgIDxETGFiZWwgOnN0cj1cIiR0KCdmb3JtYXQnKVwiIC8+XG4gICAgICA8c2VsZWN0IHYtbW9kZWw9XCJwcmludF9mb3JtYXRcIj5cbiAgICAgICAgPG9wdGlvblxuICAgICAgICAgIHYtZm9yPVwiZm9ybWF0IGluIHByaW50X2Zvcm1hdHNcIlxuICAgICAgICAgIDprZXk9XCJmb3JtYXQua2V5XCJcbiAgICAgICAgICA6dmFsdWU9XCJmb3JtYXQua2V5XCJcbiAgICAgICAgICB2LXRleHQ9XCJmb3JtYXQua2V5XCJcbiAgICAgICAgLz5cbiAgICAgIDwvc2VsZWN0PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJ1LXNwYWNpbmdCb3R0b21cIj5cbiAgICAgIDxUb2dnbGVJbnB1dFxuICAgICAgICA6Y29udGVudD1cInByaW50X29ubHlfYmFzZW1hcFwiXG4gICAgICAgIDpsYWJlbD1cIiR0KCdwcmludF9vbmx5X2Jhc2VtYXAnKVwiXG4gICAgICAgIEB1cGRhdGU6Y29udGVudD1cInByaW50X29ubHlfYmFzZW1hcCA9ICRldmVudFwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuICAgIDxmaWVsZHNldCBjbGFzcz1cInUtc3BhY2luZ0JvdHRvbSBfcHJldmlld0NhbnZhc1wiPlxuICAgICAgPGxlZ2VuZCBjbGFzcz1cInUtbGFiZWxcIj57eyAkdChcInByZXZpZXdcIikgfX08L2xlZ2VuZD5cbiAgICAgIDxjYW52YXMgdi1zaG93PVwiZmFsc2VcIiByZWY9XCJtYXBDYW52YXNcIiBjbGFzcz1cIlwiIC8+XG4gICAgICA8Y2FudmFzIHJlZj1cInBhZ2VDYW52YXNcIiBjbGFzcz1cIlwiIC8+XG4gICAgPC9maWVsZHNldD5cbiAgICA8YnV0dG9uXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIGNsYXNzPVwidS1idXR0b24gdS1idXR0b25fYmxldXZlcnRcIlxuICAgICAgOmRpc2FibGVkPVwiaXNfbWFraW5nX3ByaW50XCJcbiAgICAgIEBjbGljaz1cInByaW50TWFwKClcIlxuICAgID5cbiAgICAgIDxiLWljb24gY2xhc3M9XCJpbmxpbmVTVkdcIiBpY29uPVwicHJpbnRlclwiIC8+XG4gICAgICB7eyAkdChcImV4cG9ydF9pbl9wZGZcIikgfX1cbiAgICA8L2J1dHRvbj5cbiAgPC9CYXNlTW9kYWwyPlxuPC90ZW1wbGF0ZT5cbjxzY3JpcHQ+XG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCJqc3BkZlwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgbWFwOiBPYmplY3QsXG4gIH0sXG4gIGNvbXBvbmVudHM6IHt9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc19tYWtpbmdfcHJldmlldzogZmFsc2UsXG4gICAgICBpc19tYWtpbmdfcHJpbnQ6IGZhbHNlLFxuICAgICAgcHJpbnRfb3B0aW9uczoge30sXG5cbiAgICAgIHByaW50X2Zvcm1hdDogXCJBNFwiLFxuICAgICAgcHJpbnRfZm9ybWF0czogW1xuICAgICAgICB7XG4gICAgICAgICAga2V5OiBcIkEwXCIsXG4gICAgICAgICAgZGltZW5zaW9uczogWzExODksIDg0MV0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6IFwiQTFcIixcbiAgICAgICAgICBkaW1lbnNpb25zOiBbODQxLCA1OTRdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiBcIkEyXCIsXG4gICAgICAgICAgZGltZW5zaW9uczogWzU5NCwgNDIwXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogXCJBM1wiLFxuICAgICAgICAgIGRpbWVuc2lvbnM6IFs0MjAsIDI5N10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6IFwiQTRcIixcbiAgICAgICAgICBkaW1lbnNpb25zOiBbMjk3LCAyMTBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiBcIkE1XCIsXG4gICAgICAgICAgZGltZW5zaW9uczogWzIxMCwgMTQ4XSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG5cbiAgICAgIHByaW50X29ubHlfYmFzZW1hcDogdHJ1ZSxcbiAgICB9O1xuICB9LFxuICBpMThuOiB7XG4gICAgbWVzc2FnZXM6IHtcbiAgICAgIGZyOiB7XG4gICAgICAgIHByaW50X21hcDogXCJJbXByaW1lciBsYSBjYXJ0ZVwiLFxuICAgICAgICBwcmludF9vbmx5X2Jhc2VtYXA6XG4gICAgICAgICAgXCJVbmlxdWVtZW50IGxlIGZvbmQgZGUgY2FydGUgKG1hc3F1ZXIgbGVzIMOpcGluZ2xlcyBldCBsZXMgZGVzc2lucylcIixcbiAgICAgIH0sXG4gICAgICBlbjoge1xuICAgICAgICBwcmludF9tYXA6IFwiUHJpbnQgdGhlIG1hcFwiLFxuICAgICAgICBwcmludF9vbmx5X2Jhc2VtYXA6XG4gICAgICAgICAgXCJPbmx5IHByaW50IHRoZSBiYXNlbGF5ZXIgKGRvIG5vdCBwcmludCBwaW5zIGFuZCBkcmF3aW5nKVwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBjcmVhdGVkKCkge30sXG4gIG1vdW50ZWQoKSB7XG4gICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgdGhpcy5nZW5lcmF0ZVByZXZpZXcoKTtcbiAgICB9KTtcbiAgfSxcbiAgYmVmb3JlRGVzdHJveSgpIHt9LFxuICB3YXRjaDoge1xuICAgIHByaW50X29ubHlfYmFzZW1hcCgpIHtcbiAgICAgIHRoaXMuZ2VuZXJhdGVQcmV2aWV3KCk7XG4gICAgfSxcbiAgICBwcmludF9mb3JtYXQoKSB7XG4gICAgICB0aGlzLmdlbmVyYXRlUHJldmlldygpO1xuICAgIH0sXG4gIH0sXG4gIGNvbXB1dGVkOiB7fSxcbiAgbWV0aG9kczoge1xuICAgIGFzeW5jIGdlbmVyYXRlUHJldmlldygpIHtcbiAgICAgIC8vIGZyb20gaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi9sYXRlc3QvZXhhbXBsZXMvZXhwb3J0LXBkZi5odG1sXG4gICAgICB0aGlzLmlzX21ha2luZ19wcmV2aWV3ID0gdHJ1ZTtcblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgNTAwKSk7XG5cbiAgICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMucHJpbnRfZm9ybWF0O1xuICAgICAgY29uc3QgZGltID0gdGhpcy5wcmludF9mb3JtYXRzLmZpbmQoKGYpID0+IGYua2V5ID09PSBmb3JtYXQpLmRpbWVuc2lvbnM7XG4gICAgICBjb25zdCByZXNvbHV0aW9uID0gMzAwOyAvLyBEUElcbiAgICAgIGNvbnN0IG1hcCA9IHRoaXMubWFwO1xuXG4gICAgICBjb25zdCBbY3VycmVudF9tYXBfd2lkdGgsIGN1cnJlbnRfbWFwX2hlaWdodF0gPSBtYXAuZ2V0U2l6ZSgpO1xuICAgICAgbGV0IG9yaWVudGF0aW9uLCBwYXBlcl93aWR0aF9pbl9tbSwgcGFwZXJfaGVpZ2h0X2luX21tO1xuICAgICAgaWYgKGN1cnJlbnRfbWFwX3dpZHRoIDw9IGN1cnJlbnRfbWFwX2hlaWdodCkge1xuICAgICAgICBvcmllbnRhdGlvbiA9IFwicG9ydHJhaXRcIjtcbiAgICAgICAgcGFwZXJfd2lkdGhfaW5fbW0gPSBkaW1bMV07XG4gICAgICAgIHBhcGVyX2hlaWdodF9pbl9tbSA9IGRpbVswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9yaWVudGF0aW9uID0gXCJsYW5kc2NhcGVcIjtcbiAgICAgICAgcGFwZXJfd2lkdGhfaW5fbW0gPSBkaW1bMF07XG4gICAgICAgIHBhcGVyX2hlaWdodF9pbl9tbSA9IGRpbVsxXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcGVyX3dpZHRoID0gTWF0aC5yb3VuZCgocGFwZXJfd2lkdGhfaW5fbW0gKiByZXNvbHV0aW9uKSAvIDI1LjQpO1xuICAgICAgY29uc3QgcGFwZXJfaGVpZ2h0ID0gTWF0aC5yb3VuZCgocGFwZXJfaGVpZ2h0X2luX21tICogcmVzb2x1dGlvbikgLyAyNS40KTtcbiAgICAgIGNvbnN0IHZpZXdSZXNvbHV0aW9uID0gbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICAgIHZhciBoUmF0aW8gPSBwYXBlcl93aWR0aCAvIGN1cnJlbnRfbWFwX3dpZHRoO1xuICAgICAgdmFyIHZSYXRpbyA9IHBhcGVyX2hlaWdodCAvIGN1cnJlbnRfbWFwX2hlaWdodDtcbiAgICAgIHZhciByYXRpbyA9IE1hdGgubWluKGhSYXRpbywgdlJhdGlvKTtcblxuICAgICAgY29uc3QgbmV3X21hcF93aWR0aCA9IGN1cnJlbnRfbWFwX3dpZHRoICogcmF0aW87XG4gICAgICBjb25zdCBuZXdfbWFwX2hlaWdodCA9IGN1cnJlbnRfbWFwX2hlaWdodCAqIHJhdGlvO1xuXG4gICAgICB2YXIgY2VudGVyU2hpZnRfeCA9IChwYXBlcl93aWR0aCAtIG5ld19tYXBfd2lkdGgpIC8gMjtcbiAgICAgIHZhciBjZW50ZXJTaGlmdF95ID0gKHBhcGVyX2hlaWdodCAtIG5ld19tYXBfaGVpZ2h0KSAvIDI7XG5cbiAgICAgIG1hcC5vbmNlKFwicmVuZGVyY29tcGxldGVcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBtYXBDYW52YXMgPSB0aGlzLiRyZWZzLm1hcENhbnZhcztcbiAgICAgICAgbWFwQ2FudmFzLndpZHRoID0gbmV3X21hcF93aWR0aDtcbiAgICAgICAgbWFwQ2FudmFzLmhlaWdodCA9IG5ld19tYXBfaGVpZ2h0O1xuICAgICAgICBjb25zdCBtYXBDb250ZXh0ID0gbWFwQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKFxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub2wtbGF5ZXJcIiksXG4gICAgICAgICAgYXN5bmMgKGxheWVyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmludF9vbmx5X2Jhc2VtYXApXG4gICAgICAgICAgICAgIGlmICghbGF5ZXIuY2xhc3NOYW1lPy5pbmNsdWRlcyhcIm9sLWJhc2VtYXBcIikpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gbGF5ZXIucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbiAgICAgICAgICAgIGlmIChjYW52YXMud2lkdGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG9wYWNpdHkgPSBjYW52YXMucGFyZW50Tm9kZS5zdHlsZS5vcGFjaXR5O1xuICAgICAgICAgICAgICBtYXBDb250ZXh0Lmdsb2JhbEFscGhhID0gb3BhY2l0eSA9PT0gXCJcIiA/IDEgOiBOdW1iZXIob3BhY2l0eSk7XG4gICAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGNhbnZhcy5zdHlsZS50cmFuc2Zvcm07XG4gICAgICAgICAgICAgIC8vIEdldCB0aGUgdHJhbnNmb3JtIHBhcmFtZXRlcnMgZnJvbSB0aGUgc3R5bGUncyB0cmFuc2Zvcm0gbWF0cml4XG4gICAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IHRyYW5zZm9ybVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgICAgIC5tYXRjaCgvXm1hdHJpeFxcKChbXlxcKF0qKVxcKSQvKVsxXVxuICAgICAgICAgICAgICAgIC5zcGxpdChcIixcIilcbiAgICAgICAgICAgICAgICAubWFwKE51bWJlcik7XG4gICAgICAgICAgICAgIC8vIEFwcGx5IHRoZSB0cmFuc2Zvcm0gdG8gdGhlIGV4cG9ydCBtYXAgY29udGV4dFxuICAgICAgICAgICAgICBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnNldFRyYW5zZm9ybS5hcHBseShcbiAgICAgICAgICAgICAgICBtYXBDb250ZXh0LFxuICAgICAgICAgICAgICAgIG1hdHJpeFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBtYXBDb250ZXh0LmRyYXdJbWFnZShjYW52YXMsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgbWFwQ29udGV4dC5nbG9iYWxBbHBoYSA9IDE7XG4gICAgICAgIG1hcENvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuXG4gICAgICAgIGNvbnN0IHBhZ2VfY2FudmFzID0gdGhpcy4kcmVmcy5wYWdlQ2FudmFzO1xuICAgICAgICBwYWdlX2NhbnZhcy53aWR0aCA9IHBhcGVyX3dpZHRoO1xuICAgICAgICBwYWdlX2NhbnZhcy5oZWlnaHQgPSBwYXBlcl9oZWlnaHQ7XG4gICAgICAgIGNvbnN0IHBhZ2VfY29udGV4dCA9IHBhZ2VfY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgcGFnZV9jb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICAgICAgcGFnZV9jb250ZXh0LmZpbGxSZWN0KDAsIDAsIHBhZ2VfY2FudmFzLndpZHRoLCBwYWdlX2NhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAgIHBhZ2VfY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgbWFwQ2FudmFzLFxuICAgICAgICAgIGNlbnRlclNoaWZ0X3gsXG4gICAgICAgICAgY2VudGVyU2hpZnRfeSxcbiAgICAgICAgICBuZXdfbWFwX3dpZHRoLFxuICAgICAgICAgIG5ld19tYXBfaGVpZ2h0XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5wcmludF9vcHRpb25zID0ge1xuICAgICAgICAgIG9yaWVudGF0aW9uLFxuICAgICAgICAgIGZvcm1hdCxcbiAgICAgICAgICBwYXBlcl93aWR0aF9pbl9tbSxcbiAgICAgICAgICBwYXBlcl9oZWlnaHRfaW5fbW0sXG4gICAgICAgICAgcGFnZV9jYW52YXMsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUmVzZXQgb3JpZ2luYWwgbWFwIHNpemVcbiAgICAgICAgbWFwLnNldFNpemUoW2N1cnJlbnRfbWFwX3dpZHRoLCBjdXJyZW50X21hcF9oZWlnaHRdKTtcbiAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRSZXNvbHV0aW9uKHZpZXdSZXNvbHV0aW9uKTtcbiAgICAgICAgdGhpcy5pc19tYWtpbmdfcHJldmlldyA9IGZhbHNlO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIHJhdGlvID0gMC41O1xuICAgICAgLy8gbWFwLnNldFNpemUoW2N1cnJlbnRfbWFwX3dpZHRoICogcmF0aW8sIGN1cnJlbnRfbWFwX2hlaWdodCAqIHJhdGlvXSk7XG4gICAgICAvLyBtYXAuZ2V0VmlldygpLnNldFJlc29sdXRpb24odmlld1Jlc29sdXRpb24gKiByYXRpbyk7XG5cbiAgICAgIGNvbnN0IHByaW50U2l6ZSA9IFtuZXdfbWFwX3dpZHRoLCBuZXdfbWFwX2hlaWdodF07XG4gICAgICBtYXAuc2V0U2l6ZShwcmludFNpemUpO1xuICAgICAgY29uc3Qgc2NhbGluZyA9IE1hdGgubWluKFxuICAgICAgICBwYXBlcl93aWR0aCAvIGN1cnJlbnRfbWFwX3dpZHRoLFxuICAgICAgICBwYXBlcl9oZWlnaHQgLyBjdXJyZW50X21hcF9oZWlnaHRcbiAgICAgICk7XG4gICAgICBtYXAuZ2V0VmlldygpLnNldFJlc29sdXRpb24odmlld1Jlc29sdXRpb24gLyBzY2FsaW5nKTtcbiAgICB9LFxuXG4gICAgcHJpbnRNYXAoKSB7XG4gICAgICB0aGlzLmlzX21ha2luZ19wcmludCA9IHRydWU7XG5cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgb3JpZW50YXRpb24sXG4gICAgICAgIGZvcm1hdCxcbiAgICAgICAgcGFwZXJfd2lkdGhfaW5fbW0sXG4gICAgICAgIHBhcGVyX2hlaWdodF9pbl9tbSxcbiAgICAgICAgcGFnZV9jYW52YXMsXG4gICAgICB9ID0gdGhpcy5wcmludF9vcHRpb25zO1xuXG4gICAgICBjb25zdCBwZGYgPSBuZXcganNQREYoe1xuICAgICAgICBvcmllbnRhdGlvbixcbiAgICAgICAgdW5pdDogXCJtbVwiLFxuICAgICAgICBmb3JtYXQsXG4gICAgICB9KTtcblxuICAgICAgcGRmLmFkZEltYWdlKFxuICAgICAgICBwYWdlX2NhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIpLFxuICAgICAgICBcIkpQRUdcIixcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgcGFwZXJfd2lkdGhfaW5fbW0sXG4gICAgICAgIHBhcGVyX2hlaWdodF9pbl9tbVxuICAgICAgKTtcbiAgICAgIHBkZi5zYXZlKFwibWFwLnBkZlwiKTtcblxuICAgICAgdGhpcy5pc19tYWtpbmdfcHJpbnQgPSBmYWxzZTtcbiAgICB9LFxuICB9LFxufTtcbjwvc2NyaXB0PlxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxuLl9wcmV2aWV3Q2FudmFzIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjYW52YXMge1xuICAgIGhlaWdodDogMjAwcHg7XG4gICAgd2lkdGg6IGF1dG87XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NraztcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1jLWdyaXMpO1xuICAgIC8vIHBhZGRpbmc6IDJweDtcbiAgfVxufVxuPC9zdHlsZT5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=script&lang=js&\n");

/***/ }),

/***/ "./node_modules/fflate/esm/browser.js":
/*!********************************************!*\
  !*** ./node_modules/fflate/esm/browser.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AsyncCompress\": function() { return /* binding */ AsyncGzip; },\n/* harmony export */   \"AsyncDecompress\": function() { return /* binding */ AsyncDecompress; },\n/* harmony export */   \"AsyncDeflate\": function() { return /* binding */ AsyncDeflate; },\n/* harmony export */   \"AsyncGunzip\": function() { return /* binding */ AsyncGunzip; },\n/* harmony export */   \"AsyncGzip\": function() { return /* binding */ AsyncGzip; },\n/* harmony export */   \"AsyncInflate\": function() { return /* binding */ AsyncInflate; },\n/* harmony export */   \"AsyncUnzlib\": function() { return /* binding */ AsyncUnzlib; },\n/* harmony export */   \"AsyncZlib\": function() { return /* binding */ AsyncZlib; },\n/* harmony export */   \"Compress\": function() { return /* binding */ Gzip; },\n/* harmony export */   \"Decompress\": function() { return /* binding */ Decompress; },\n/* harmony export */   \"Deflate\": function() { return /* binding */ Deflate; },\n/* harmony export */   \"Gunzip\": function() { return /* binding */ Gunzip; },\n/* harmony export */   \"Gzip\": function() { return /* binding */ Gzip; },\n/* harmony export */   \"Inflate\": function() { return /* binding */ Inflate; },\n/* harmony export */   \"Unzlib\": function() { return /* binding */ Unzlib; },\n/* harmony export */   \"Zlib\": function() { return /* binding */ Zlib; },\n/* harmony export */   \"compress\": function() { return /* binding */ gzip; },\n/* harmony export */   \"compressSync\": function() { return /* binding */ gzipSync; },\n/* harmony export */   \"decompress\": function() { return /* binding */ decompress; },\n/* harmony export */   \"decompressSync\": function() { return /* binding */ decompressSync; },\n/* harmony export */   \"deflate\": function() { return /* binding */ deflate; },\n/* harmony export */   \"deflateSync\": function() { return /* binding */ deflateSync; },\n/* harmony export */   \"gunzip\": function() { return /* binding */ gunzip; },\n/* harmony export */   \"gunzipSync\": function() { return /* binding */ gunzipSync; },\n/* harmony export */   \"gzip\": function() { return /* binding */ gzip; },\n/* harmony export */   \"gzipSync\": function() { return /* binding */ gzipSync; },\n/* harmony export */   \"inflate\": function() { return /* binding */ inflate; },\n/* harmony export */   \"inflateSync\": function() { return /* binding */ inflateSync; },\n/* harmony export */   \"strFromU8\": function() { return /* binding */ strFromU8; },\n/* harmony export */   \"strToU8\": function() { return /* binding */ strToU8; },\n/* harmony export */   \"unzip\": function() { return /* binding */ unzip; },\n/* harmony export */   \"unzipSync\": function() { return /* binding */ unzipSync; },\n/* harmony export */   \"unzlib\": function() { return /* binding */ unzlib; },\n/* harmony export */   \"unzlibSync\": function() { return /* binding */ unzlibSync; },\n/* harmony export */   \"zip\": function() { return /* binding */ zip; },\n/* harmony export */   \"zipSync\": function() { return /* binding */ zipSync; },\n/* harmony export */   \"zlib\": function() { return /* binding */ zlib; },\n/* harmony export */   \"zlibSync\": function() { return /* binding */ zlibSync; }\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_typed_array_at_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.typed-array.at.js */ \"./node_modules/core-js/modules/es.typed-array.at.js\");\n/* harmony import */ var core_js_modules_es_typed_array_at_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_at_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_typed_array_find_last_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-last.js */ \"./node_modules/core-js/modules/es.typed-array.find-last.js\");\n/* harmony import */ var core_js_modules_es_typed_array_find_last_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_last_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_typed_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-last-index.js */ \"./node_modules/core-js/modules/es.typed-array.find-last-index.js\");\n/* harmony import */ var core_js_modules_es_typed_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.typed-array.set.js */ \"./node_modules/core-js/modules/es.typed-array.set.js\");\n/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.push.js */ \"./node_modules/core-js/modules/es.array.push.js\");\n/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Much of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// Many optimizations have been made, so the bundle size is ultimately smaller but performance is similar.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = function (c, id, msg, transfer, cb) {\n  var u = ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c], {\n    type: 'text/javascript'\n  })));\n  var w = new Worker(u);\n  w.onerror = function (e) {\n    return cb(e.error, null);\n  };\n  w.onmessage = function (e) {\n    return cb(null, e.data);\n  };\n  w.postMessage(msg, transfer);\n  return w;\n};\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array,\n  u16 = Uint16Array,\n  u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */0, 0, /* impossible */0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n  var b = new u16(31);\n  for (var i = 0; i < 31; ++i) {\n    b[i] = start += 1 << eb[i - 1];\n  }\n  // numbers here are at max 18 bits\n  var r = new u32(b[30]);\n  for (var i = 1; i < 30; ++i) {\n    for (var j = b[i]; j < b[i + 1]; ++j) {\n      r[j] = j - b[i] << 5 | i;\n    }\n  }\n  return [b, r];\n};\nvar _a = freb(fleb, 2),\n  fl = _a[0],\n  revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0),\n  fd = _b[0],\n  revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n  // reverse table algorithm from SO\n  var x = (i & 0xAAAA) >>> 1 | (i & 0x5555) << 1;\n  x = (x & 0xCCCC) >>> 2 | (x & 0x3333) << 2;\n  x = (x & 0xF0F0) >>> 4 | (x & 0x0F0F) << 4;\n  rev[i] = ((x & 0xFF00) >>> 8 | (x & 0x00FF) << 8) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = function (cd, mb, r) {\n  var s = cd.length;\n  // index\n  var i = 0;\n  // u16 \"map\": index -> # of codes with bit length = index\n  var l = new u16(mb);\n  // length of cd must be 288 (total # of codes)\n  for (; i < s; ++i) ++l[cd[i] - 1];\n  // u16 \"map\": index -> minimum code for bit length = index\n  var le = new u16(mb);\n  for (i = 0; i < mb; ++i) {\n    le[i] = le[i - 1] + l[i - 1] << 1;\n  }\n  var co;\n  if (r) {\n    // u16 \"map\": index -> number of actual bits, symbol for code\n    co = new u16(1 << mb);\n    // bits to remove for reverser\n    var rvb = 15 - mb;\n    for (i = 0; i < s; ++i) {\n      // ignore 0 lengths\n      if (cd[i]) {\n        // num encoding both symbol and bits read\n        var sv = i << 4 | cd[i];\n        // free bits\n        var r_1 = mb - cd[i];\n        // start value\n        var v = le[cd[i] - 1]++ << r_1;\n        // m is end value\n        for (var m = v | (1 << r_1) - 1; v <= m; ++v) {\n          // every 16 bit value starting with the code yields the same result\n          co[rev[v] >>> rvb] = sv;\n        }\n      }\n    }\n  } else {\n    co = new u16(s);\n    for (i = 0; i < s; ++i) co[i] = rev[le[cd[i] - 1]++] >>> 15 - cd[i];\n  }\n  return co;\n};\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i) flt[i] = 8;\nfor (var i = 144; i < 256; ++i) flt[i] = 9;\nfor (var i = 256; i < 280; ++i) flt[i] = 7;\nfor (var i = 280; i < 288; ++i) flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i) fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/hMap(flt, 9, 0),\n  flrm = /*#__PURE__*/hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/hMap(fdt, 5, 0),\n  fdrm = /*#__PURE__*/hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n  var m = a[0];\n  for (var i = 1; i < a.length; ++i) {\n    if (a[i] > m) m = a[i];\n  }\n  return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n  var o = p / 8 >> 0;\n  return (d[o] | d[o + 1] << 8) >>> (p & 7) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n  var o = p / 8 >> 0;\n  return (d[o] | d[o + 1] << 8 | d[o + 2] << 16) >>> (p & 7);\n};\n// get end of byte\nvar shft = function (p) {\n  return (p / 8 >> 0) + (p & 7 && 1);\n};\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n  if (s == null || s < 0) s = 0;\n  if (e == null || e > v.length) e = v.length;\n  // can't use .constructor in case user-supplied\n  var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n  n.set(v.subarray(s, e));\n  return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n  // source length\n  var sl = dat.length;\n  // have to estimate size\n  var noBuf = !buf || st;\n  // no state\n  var noSt = !st || st.i;\n  if (!st) st = {};\n  // Assumes roughly 33% compression ratio average\n  if (!buf) buf = new u8(sl * 3);\n  // ensure buffer can fit at least l elements\n  var cbuf = function (l) {\n    var bl = buf.length;\n    // need to increase size to fit\n    if (l > bl) {\n      // Double or set to necessary, whichever is greater\n      var nbuf = new u8(Math.max(bl * 2, l));\n      nbuf.set(buf);\n      buf = nbuf;\n    }\n  };\n  //  last chunk         bitpos           bytes\n  var final = st.f || 0,\n    pos = st.p || 0,\n    bt = st.b || 0,\n    lm = st.l,\n    dm = st.d,\n    lbt = st.m,\n    dbt = st.n;\n  // total bits\n  var tbts = sl * 8;\n  do {\n    if (!lm) {\n      // BFINAL - this is only 1 when last chunk is next\n      st.f = final = bits(dat, pos, 1);\n      // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n      var type = bits(dat, pos + 1, 3);\n      pos += 3;\n      if (!type) {\n        // go to end of byte boundary\n        var s = shft(pos) + 4,\n          l = dat[s - 4] | dat[s - 3] << 8,\n          t = s + l;\n        if (t > sl) {\n          if (noSt) throw 'unexpected EOF';\n          break;\n        }\n        // ensure size\n        if (noBuf) cbuf(bt + l);\n        // Copy over uncompressed data\n        buf.set(dat.subarray(s, t), bt);\n        // Get new bitpos, update byte count\n        st.b = bt += l, st.p = pos = t * 8;\n        continue;\n      } else if (type == 1) lm = flrm, dm = fdrm, lbt = 9, dbt = 5;else if (type == 2) {\n        //  literal                            lengths\n        var hLit = bits(dat, pos, 31) + 257,\n          hcLen = bits(dat, pos + 10, 15) + 4;\n        var tl = hLit + bits(dat, pos + 5, 31) + 1;\n        pos += 14;\n        // length+distance tree\n        var ldt = new u8(tl);\n        // code length tree\n        var clt = new u8(19);\n        for (var i = 0; i < hcLen; ++i) {\n          // use index map to get real code\n          clt[clim[i]] = bits(dat, pos + i * 3, 7);\n        }\n        pos += hcLen * 3;\n        // code lengths bits\n        var clb = max(clt),\n          clbmsk = (1 << clb) - 1;\n        if (!noSt && pos + tl * (clb + 7) > tbts) break;\n        // code lengths map\n        var clm = hMap(clt, clb, 1);\n        for (var i = 0; i < tl;) {\n          var r = clm[bits(dat, pos, clbmsk)];\n          // bits read\n          pos += r & 15;\n          // symbol\n          var s = r >>> 4;\n          // code length to copy\n          if (s < 16) {\n            ldt[i++] = s;\n          } else {\n            //  copy   count\n            var c = 0,\n              n = 0;\n            if (s == 16) n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];else if (s == 17) n = 3 + bits(dat, pos, 7), pos += 3;else if (s == 18) n = 11 + bits(dat, pos, 127), pos += 7;\n            while (n--) ldt[i++] = c;\n          }\n        }\n        //    length tree                 distance tree\n        var lt = ldt.subarray(0, hLit),\n          dt = ldt.subarray(hLit);\n        // max length bits\n        lbt = max(lt);\n        // max dist bits\n        dbt = max(dt);\n        lm = hMap(lt, lbt, 1);\n        dm = hMap(dt, dbt, 1);\n      } else throw 'invalid block type';\n      if (pos > tbts) throw 'unexpected EOF';\n    }\n    // Make sure the buffer can hold this + the largest possible addition\n    // Maximum chunk size (practically, theoretically infinite) is 2^17;\n    if (noBuf) cbuf(bt + 131072);\n    var lms = (1 << lbt) - 1,\n      dms = (1 << dbt) - 1;\n    var mxa = lbt + dbt + 18;\n    while (noSt || pos + mxa < tbts) {\n      // bits read, code\n      var c = lm[bits16(dat, pos) & lms],\n        sym = c >>> 4;\n      pos += c & 15;\n      if (pos > tbts) throw 'unexpected EOF';\n      if (!c) throw 'invalid length/literal';\n      if (sym < 256) buf[bt++] = sym;else if (sym == 256) {\n        lm = null;\n        break;\n      } else {\n        var add = sym - 254;\n        // no extra bits needed if less\n        if (sym > 264) {\n          // index\n          var i = sym - 257,\n            b = fleb[i];\n          add = bits(dat, pos, (1 << b) - 1) + fl[i];\n          pos += b;\n        }\n        // dist\n        var d = dm[bits16(dat, pos) & dms],\n          dsym = d >>> 4;\n        if (!d) throw 'invalid distance';\n        pos += d & 15;\n        var dt = fd[dsym];\n        if (dsym > 3) {\n          var b = fdeb[dsym];\n          dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n        }\n        if (pos > tbts) throw 'unexpected EOF';\n        if (noBuf) cbuf(bt + 131072);\n        var end = bt + add;\n        for (; bt < end; bt += 4) {\n          buf[bt] = buf[bt - dt];\n          buf[bt + 1] = buf[bt + 1 - dt];\n          buf[bt + 2] = buf[bt + 2 - dt];\n          buf[bt + 3] = buf[bt + 3 - dt];\n        }\n        bt = end;\n      }\n    }\n    st.l = lm, st.p = pos, st.b = bt;\n    if (lm) final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n  } while (!final);\n  return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 >> 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n  v <<= p & 7;\n  var o = p / 8 >> 0;\n  d[o] |= v;\n  d[o + 1] |= v >>> 8;\n  d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n  // Need extra info to make a tree\n  var t = [];\n  for (var i = 0; i < d.length; ++i) {\n    if (d[i]) t.push({\n      s: i,\n      f: d[i]\n    });\n  }\n  var s = t.length;\n  var t2 = t.slice();\n  if (!s) return [new u8(0), 0];\n  if (s == 1) {\n    var v = new u8(t[0].s + 1);\n    v[t[0].s] = 1;\n    return [v, 1];\n  }\n  t.sort(function (a, b) {\n    return a.f - b.f;\n  });\n  // after i2 reaches last ind, will be stopped\n  // freq must be greater than largest possible number of symbols\n  t.push({\n    s: -1,\n    f: 25001\n  });\n  var l = t[0],\n    r = t[1],\n    i0 = 0,\n    i1 = 1,\n    i2 = 2;\n  t[0] = {\n    s: -1,\n    f: l.f + r.f,\n    l: l,\n    r: r\n  };\n  // efficient algorithm from UZIP.js\n  // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n  // symbols that combined have high freq, will start processing i2 (high-freq,\n  // non-composite) symbols instead\n  // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n  while (i1 != s - 1) {\n    l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n    r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n    t[i1++] = {\n      s: -1,\n      f: l.f + r.f,\n      l: l,\n      r: r\n    };\n  }\n  var maxSym = t2[0].s;\n  for (var i = 1; i < s; ++i) {\n    if (t2[i].s > maxSym) maxSym = t2[i].s;\n  }\n  // code lengths\n  var tr = new u16(maxSym + 1);\n  // max bits in tree\n  var mbt = ln(t[i1 - 1], tr, 0);\n  if (mbt > mb) {\n    // more algorithms from UZIP.js\n    // TODO: find out how this code works (debt)\n    //  ind    debt\n    var i = 0,\n      dt = 0;\n    //    left            cost\n    var lft = mbt - mb,\n      cst = 1 << lft;\n    t2.sort(function (a, b) {\n      return tr[b.s] - tr[a.s] || a.f - b.f;\n    });\n    for (; i < s; ++i) {\n      var i2_1 = t2[i].s;\n      if (tr[i2_1] > mb) {\n        dt += cst - (1 << mbt - tr[i2_1]);\n        tr[i2_1] = mb;\n      } else break;\n    }\n    dt >>>= lft;\n    while (dt > 0) {\n      var i2_2 = t2[i].s;\n      if (tr[i2_2] < mb) dt -= 1 << mb - tr[i2_2]++ - 1;else ++i;\n    }\n    for (; i >= 0 && dt; --i) {\n      var i2_3 = t2[i].s;\n      if (tr[i2_3] == mb) {\n        --tr[i2_3];\n        ++dt;\n      }\n    }\n    mbt = mb;\n  }\n  return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n  return n.s == -1 ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1)) : l[n.s] = d;\n};\n// length codes generation\nvar lc = function (c) {\n  var s = c.length;\n  // Note that the semicolon was intentional\n  while (s && !c[--s]);\n  var cl = new u16(++s);\n  //  ind      num         streak\n  var cli = 0,\n    cln = c[0],\n    cls = 1;\n  var w = function (v) {\n    cl[cli++] = v;\n  };\n  for (var i = 1; i <= s; ++i) {\n    if (c[i] == cln && i != s) ++cls;else {\n      if (!cln && cls > 2) {\n        for (; cls > 138; cls -= 138) w(32754);\n        if (cls > 2) {\n          w(cls > 10 ? cls - 11 << 5 | 28690 : cls - 3 << 5 | 12305);\n          cls = 0;\n        }\n      } else if (cls > 3) {\n        w(cln), --cls;\n        for (; cls > 6; cls -= 6) w(8304);\n        if (cls > 2) w(cls - 3 << 5 | 8208), cls = 0;\n      }\n      while (cls--) w(cln);\n      cls = 1;\n      cln = c[i];\n    }\n  }\n  return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n  var l = 0;\n  for (var i = 0; i < cl.length; ++i) l += cf[i] * cl[i];\n  return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n  // no need to write 00 as type: TypedArray defaults to 0\n  var s = dat.length;\n  var o = shft(pos + 2);\n  out[o] = s & 255;\n  out[o + 1] = s >>> 8;\n  out[o + 2] = out[o] ^ 255;\n  out[o + 3] = out[o + 1] ^ 255;\n  for (var i = 0; i < s; ++i) out[o + i + 4] = dat[i];\n  return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n  wbits(out, p++, final);\n  ++lf[256];\n  var _a = hTree(lf, 15),\n    dlt = _a[0],\n    mlb = _a[1];\n  var _b = hTree(df, 15),\n    ddt = _b[0],\n    mdb = _b[1];\n  var _c = lc(dlt),\n    lclt = _c[0],\n    nlc = _c[1];\n  var _d = lc(ddt),\n    lcdt = _d[0],\n    ndc = _d[1];\n  var lcfreq = new u16(19);\n  for (var i = 0; i < lclt.length; ++i) lcfreq[lclt[i] & 31]++;\n  for (var i = 0; i < lcdt.length; ++i) lcfreq[lcdt[i] & 31]++;\n  var _e = hTree(lcfreq, 7),\n    lct = _e[0],\n    mlcb = _e[1];\n  var nlcc = 19;\n  for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc);\n  var flen = bl + 5 << 3;\n  var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n  var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n  if (flen <= ftlen && flen <= dtlen) return wfblk(out, p, dat.subarray(bs, bs + bl));\n  var lm, ll, dm, dl;\n  wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n  if (dtlen < ftlen) {\n    lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n    var llm = hMap(lct, mlcb, 0);\n    wbits(out, p, nlc - 257);\n    wbits(out, p + 5, ndc - 1);\n    wbits(out, p + 10, nlcc - 4);\n    p += 14;\n    for (var i = 0; i < nlcc; ++i) wbits(out, p + 3 * i, lct[clim[i]]);\n    p += 3 * nlcc;\n    var lcts = [lclt, lcdt];\n    for (var it = 0; it < 2; ++it) {\n      var clct = lcts[it];\n      for (var i = 0; i < clct.length; ++i) {\n        var len = clct[i] & 31;\n        wbits(out, p, llm[len]), p += lct[len];\n        if (len > 15) wbits(out, p, clct[i] >>> 5 & 127), p += clct[i] >>> 12;\n      }\n    }\n  } else {\n    lm = flm, ll = flt, dm = fdm, dl = fdt;\n  }\n  for (var i = 0; i < li; ++i) {\n    if (syms[i] > 255) {\n      var len = syms[i] >>> 18 & 31;\n      wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n      if (len > 7) wbits(out, p, syms[i] >>> 23 & 31), p += fleb[len];\n      var dst = syms[i] & 31;\n      wbits16(out, p, dm[dst]), p += dl[dst];\n      if (dst > 3) wbits16(out, p, syms[i] >>> 5 & 8191), p += fdeb[dst];\n    } else {\n      wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n    }\n  }\n  wbits16(out, p, lm[256]);\n  return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n  var s = dat.length;\n  var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n  // writing to this writes to the output buffer\n  var w = o.subarray(pre, o.length - post);\n  var pos = 0;\n  if (!lvl || s < 8) {\n    for (var i = 0; i <= s; i += 65535) {\n      // end\n      var e = i + 65535;\n      if (e < s) {\n        // write full block\n        pos = wfblk(w, pos, dat.subarray(i, e));\n      } else {\n        // write final block\n        w[i] = lst;\n        pos = wfblk(w, pos, dat.subarray(i, s));\n      }\n    }\n  } else {\n    var opt = deo[lvl - 1];\n    var n = opt >>> 13,\n      c = opt & 8191;\n    var msk_1 = (1 << plvl) - 1;\n    //    prev 2-byte val map    curr 2-byte val map\n    var prev = new u16(32768),\n      head = new u16(msk_1 + 1);\n    var bs1_1 = Math.ceil(plvl / 3),\n      bs2_1 = 2 * bs1_1;\n    var hsh = function (i) {\n      return (dat[i] ^ dat[i + 1] << bs1_1 ^ dat[i + 2] << bs2_1) & msk_1;\n    };\n    // 24576 is an arbitrary number of maximum symbols per block\n    // 424 buffer for last block\n    var syms = new u32(25000);\n    // length/literal freq   distance freq\n    var lf = new u16(288),\n      df = new u16(32);\n    //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n    var lc_1 = 0,\n      eb = 0,\n      i = 0,\n      li = 0,\n      wi = 0,\n      bs = 0;\n    for (; i < s; ++i) {\n      // hash value\n      var hv = hsh(i);\n      // index mod 32768\n      var imod = i & 32767;\n      // previous index with this value\n      var pimod = head[hv];\n      prev[imod] = pimod;\n      head[hv] = imod;\n      // We always should modify head and prev, but only add symbols if\n      // this data is not yet processed (\"wait\" for wait index)\n      if (wi <= i) {\n        // bytes remaining\n        var rem = s - i;\n        if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n          pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n          li = lc_1 = eb = 0, bs = i;\n          for (var j = 0; j < 286; ++j) lf[j] = 0;\n          for (var j = 0; j < 30; ++j) df[j] = 0;\n        }\n        //  len    dist   chain\n        var l = 2,\n          d = 0,\n          ch_1 = c,\n          dif = imod - pimod & 32767;\n        if (rem > 2 && hv == hsh(i - dif)) {\n          var maxn = Math.min(n, rem) - 1;\n          var maxd = Math.min(32767, i);\n          // max possible length\n          // not capped at dif because decompressors implement \"rolling\" index population\n          var ml = Math.min(258, rem);\n          while (dif <= maxd && --ch_1 && imod != pimod) {\n            if (dat[i + l] == dat[i + l - dif]) {\n              var nl = 0;\n              for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl);\n              if (nl > l) {\n                l = nl, d = dif;\n                // break out early when we reach \"nice\" (we are satisfied enough)\n                if (nl > maxn) break;\n                // now, find the rarest 2-byte sequence within this\n                // length of literals and search for that instead.\n                // Much faster than just using the start\n                var mmd = Math.min(dif, nl - 2);\n                var md = 0;\n                for (var j = 0; j < mmd; ++j) {\n                  var ti = i - dif + j + 32768 & 32767;\n                  var pti = prev[ti];\n                  var cd = ti - pti + 32768 & 32767;\n                  if (cd > md) md = cd, pimod = ti;\n                }\n              }\n            }\n            // check the previous match\n            imod = pimod, pimod = prev[imod];\n            dif += imod - pimod + 32768 & 32767;\n          }\n        }\n        // d will be nonzero only when a match was found\n        if (d) {\n          // store both dist and len data in one Uint32\n          // Make sure this is recognized as a len/dist with 28th bit (2^28)\n          syms[li++] = 268435456 | revfl[l] << 18 | revfd[d];\n          var lin = revfl[l] & 31,\n            din = revfd[d] & 31;\n          eb += fleb[lin] + fdeb[din];\n          ++lf[257 + lin];\n          ++df[din];\n          wi = i + l;\n          ++lc_1;\n        } else {\n          syms[li++] = dat[i];\n          ++lf[dat[i]];\n        }\n      }\n    }\n    pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n    // this is the easiest way to avoid needing to maintain state\n    if (!lst) pos = wfblk(w, pos, et);\n  }\n  return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/function () {\n  var t = new u32(256);\n  for (var i = 0; i < 256; ++i) {\n    var c = i,\n      k = 9;\n    while (--k) c = (c & 1 && 0xEDB88320) ^ c >>> 1;\n    t[i] = c;\n  }\n  return t;\n}();\n// CRC32\nvar crc = function () {\n  var c = 0xFFFFFFFF;\n  return {\n    p: function (d) {\n      // closures have awful performance\n      var cr = c;\n      for (var i = 0; i < d.length; ++i) cr = crct[cr & 255 ^ d[i]] ^ cr >>> 8;\n      c = cr;\n    },\n    d: function () {\n      return c ^ 0xFFFFFFFF;\n    }\n  };\n};\n// Alder32\nvar adler = function () {\n  var a = 1,\n    b = 0;\n  return {\n    p: function (d) {\n      // closures have awful performance\n      var n = a,\n        m = b;\n      var l = d.length;\n      for (var i = 0; i != l;) {\n        var e = Math.min(i + 5552, l);\n        for (; i < e; ++i) n += d[i], m += n;\n        n %= 65521, m %= 65521;\n      }\n      a = n, b = m;\n    },\n    d: function () {\n      return (a >>> 8 << 16 | (b & 255) << 8 | b >>> 8) + ((a & 255) << 23) * 2;\n    }\n  };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n  return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 12 + opt.mem, pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n  var o = {};\n  for (var k in a) o[k] = a[k];\n  for (var k in b) o[k] = b[k];\n  return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n  var dt = fn();\n  var st = fn.toString();\n  var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n  for (var i = 0; i < dt.length; ++i) {\n    var v = dt[i],\n      k = ks[i];\n    if (typeof v == 'function') {\n      fnStr += ';' + k + '=';\n      var st_1 = v.toString();\n      if (v.prototype) {\n        // for global objects\n        if (st_1.indexOf('[native code]') != -1) {\n          var spInd = st_1.indexOf(' ', 8) + 1;\n          fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n        } else {\n          fnStr += st_1;\n          for (var t in v.prototype) fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n        }\n      } else fnStr += st_1;\n    } else td[k] = v;\n  }\n  return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n  var tl = [];\n  for (var k in v) {\n    if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32) tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n  }\n  return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n  var _a;\n  if (!ch[id]) {\n    var fnStr = '',\n      td_1 = {},\n      m = fns.length - 1;\n    for (var i = 0; i < m; ++i) _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n    ch[id] = wcln(fns[m], fnStr, td_1);\n  }\n  var td = mrg({}, ch[id][1]);\n  return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () {\n  return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8];\n};\nvar bDflt = function () {\n  return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf];\n};\n// gzip extra\nvar gze = function () {\n  return [gzh, gzhl, wbytes, crc, crct];\n};\n// gunzip extra\nvar guze = function () {\n  return [gzs, gzl];\n};\n// zlib extra\nvar zle = function () {\n  return [zlh, wbytes, adler];\n};\n// unzlib extra\nvar zule = function () {\n  return [zlv];\n};\n// post buf\nvar pbf = function (msg) {\n  return postMessage(msg, [msg.buffer]);\n};\n// get u8\nvar gu8 = function (o) {\n  return o && o.size && new u8(o.size);\n};\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n  var w = wrkr(fns, init, id, function (err, dat) {\n    w.terminate();\n    cb(err, dat);\n  });\n  if (!opts.consume) dat = new u8(dat);\n  w.postMessage([dat, opts], [dat.buffer]);\n  return function () {\n    w.terminate();\n  };\n};\n// auto stream\nvar astrm = function (strm) {\n  strm.ondata = function (dat, final) {\n    return postMessage([dat, final], [dat.buffer]);\n  };\n  return function (ev) {\n    return strm.push(ev.data[0], ev.data[1]);\n  };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n  var t;\n  var w = wrkr(fns, init, id, function (err, dat) {\n    if (err) w.terminate(), strm.ondata.call(strm, err);else {\n      if (dat[1]) w.terminate();\n      strm.ondata.call(strm, err, dat[0], dat[1]);\n    }\n  });\n  w.postMessage(opts);\n  strm.push = function (d, f) {\n    if (t) throw 'stream finished';\n    if (!strm.ondata) throw 'no stream handler';\n    w.postMessage([d, t = f], [d.buffer]);\n  };\n  strm.terminate = function () {\n    w.terminate();\n  };\n};\n// read 2 bytes\nvar b2 = function (d, b) {\n  return d[b] | d[b + 1] << 8;\n};\n// read 4 bytes\nvar b4 = function (d, b) {\n  return (d[b] | d[b + 1] << 8 | d[b + 2] << 16) + (d[b + 3] << 23) * 2;\n};\n// write bytes\nvar wbytes = function (d, b, v) {\n  for (; v; ++b) d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n  var fn = o.filename;\n  c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n  if (o.mtime != 0) wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n  if (fn) {\n    c[3] = 8;\n    for (var i = 0; i <= fn.length; ++i) c[i + 10] = fn.charCodeAt(i);\n  }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n  if (d[0] != 31 || d[1] != 139 || d[2] != 8) throw 'invalid gzip data';\n  var flg = d[3];\n  var st = 10;\n  if (flg & 4) st += d[10] | (d[11] << 8) + 2;\n  for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++]);\n  return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n  var l = d.length;\n  return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) + 2 * (d[l - 1] << 23);\n};\n// gzip header length\nvar gzhl = function (o) {\n  return 10 + (o.filename && o.filename.length + 1 || 0);\n};\n// zlib header\nvar zlh = function (c, o) {\n  var lv = o.level,\n    fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n  c[0] = 120, c[1] = fl << 6 | (fl ? 32 - 2 * fl : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n  if ((d[0] & 15) != 8 || d[0] >>> 4 > 7 || (d[0] << 8 | d[1]) % 31) throw 'invalid zlib data';\n  if (d[1] & 32) throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n  if (!cb && typeof opts == 'function') cb = opts, opts = {};\n  this.ondata = cb;\n  return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/function () {\n  function Deflate(opts, cb) {\n    if (!cb && typeof opts == 'function') cb = opts, opts = {};\n    this.ondata = cb;\n    this.o = opts || {};\n  }\n  Deflate.prototype.p = function (c, f) {\n    this.ondata(dopt(c, this.o, 0, 0, !f), f);\n  };\n  /**\n   * Pushes a chunk to be deflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n  Deflate.prototype.push = function (chunk, final) {\n    if (this.d) throw 'stream finished';\n    if (!this.ondata) throw 'no stream handler';\n    this.d = final;\n    this.p(chunk, final || false);\n  };\n  return Deflate;\n}();\n\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/function () {\n  function AsyncDeflate(opts, cb) {\n    astrmify([bDflt, function () {\n      return [astrm, Deflate];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Deflate(ev.data);\n      onmessage = astrm(strm);\n    }, 6);\n  }\n  return AsyncDeflate;\n}();\n\nfunction deflate(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bDflt], function (ev) {\n    return pbf(deflateSync(ev.data[0], ev.data[1]));\n  }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nfunction deflateSync(data, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  return dopt(data, opts, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/function () {\n  /**\n   * Creates an inflation stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Inflate(cb) {\n    this.s = {};\n    this.p = new u8(0);\n    this.ondata = cb;\n  }\n  Inflate.prototype.e = function (c) {\n    if (this.d) throw 'stream finished';\n    if (!this.ondata) throw 'no stream handler';\n    var l = this.p.length;\n    var n = new u8(l + c.length);\n    n.set(this.p), n.set(c, l), this.p = n;\n  };\n  Inflate.prototype.c = function (final) {\n    this.d = this.s.i = final || false;\n    var bts = this.s.b;\n    var dt = inflt(this.p, this.o, this.s);\n    this.ondata(slc(dt, bts, this.s.b), this.d);\n    this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n    this.p = slc(this.p, this.s.p / 8 >> 0), this.s.p &= 7;\n  };\n  /**\n   * Pushes a chunk to be inflated\n   * @param chunk The chunk to push\n   * @param final Whether this is the final chunk\n   */\n  Inflate.prototype.push = function (chunk, final) {\n    this.e(chunk), this.c(final);\n  };\n  return Inflate;\n}();\n\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous inflation stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncInflate(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, function () {\n      return [astrm, Inflate];\n    }], this, 0, function () {\n      var strm = new Inflate();\n      onmessage = astrm(strm);\n    }, 7);\n  }\n  return AsyncInflate;\n}();\n\nfunction inflate(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bInflt], function (ev) {\n    return pbf(inflateSync(ev.data[0], gu8(ev.data[1])));\n  }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction inflateSync(data, out) {\n  return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/function () {\n  function Gzip(opts, cb) {\n    this.c = crc();\n    this.l = 0;\n    this.v = 1;\n    Deflate.call(this, opts, cb);\n  }\n  /**\n   * Pushes a chunk to be GZIPped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n  Gzip.prototype.push = function (chunk, final) {\n    Deflate.prototype.push.call(this, chunk, final);\n  };\n  Gzip.prototype.p = function (c, f) {\n    this.c.p(c);\n    this.l += c.length;\n    var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n    if (this.v) gzh(raw, this.o), this.v = 0;\n    if (f) wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n    this.ondata(raw, f);\n  };\n  return Gzip;\n}();\n\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/function () {\n  function AsyncGzip(opts, cb) {\n    astrmify([bDflt, gze, function () {\n      return [astrm, Deflate, Gzip];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Gzip(ev.data);\n      onmessage = astrm(strm);\n    }, 8);\n  }\n  return AsyncGzip;\n}();\n\nfunction gzip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bDflt, gze, function () {\n    return [gzipSync];\n  }], function (ev) {\n    return pbf(gzipSync(ev.data[0], ev.data[1]));\n  }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nfunction gzipSync(data, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  var c = crc(),\n    l = data.length;\n  c.p(data);\n  var d = dopt(data, opts, gzhl(opts), 8),\n    s = d.length;\n  return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/function () {\n  /**\n   * Creates a GUNZIP stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Gunzip(cb) {\n    this.v = 1;\n    Inflate.call(this, cb);\n  }\n  /**\n   * Pushes a chunk to be GUNZIPped\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n  Gunzip.prototype.push = function (chunk, final) {\n    Inflate.prototype.e.call(this, chunk);\n    if (this.v) {\n      var s = gzs(this.p);\n      if (s >= this.p.length && !final) return;\n      this.p = this.p.subarray(s), this.v = 0;\n    }\n    if (final) {\n      if (this.p.length < 8) throw 'invalid gzip stream';\n      this.p = this.p.subarray(0, -8);\n    }\n    // necessary to prevent TS from using the closure value\n    // This allows for workerization to function correctly\n    Inflate.prototype.c.call(this, final);\n  };\n  return Gunzip;\n}();\n\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous GUNZIP stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncGunzip(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, guze, function () {\n      return [astrm, Inflate, Gunzip];\n    }], this, 0, function () {\n      var strm = new Gunzip();\n      onmessage = astrm(strm);\n    }, 9);\n  }\n  return AsyncGunzip;\n}();\n\nfunction gunzip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bInflt, guze, function () {\n    return [gunzipSync];\n  }], function (ev) {\n    return pbf(gunzipSync(ev.data[0]));\n  }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nfunction gunzipSync(data, out) {\n  return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/function () {\n  function Zlib(opts, cb) {\n    this.c = adler();\n    this.v = 1;\n    Deflate.call(this, opts, cb);\n  }\n  /**\n   * Pushes a chunk to be zlibbed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n  Zlib.prototype.push = function (chunk, final) {\n    Deflate.prototype.push.call(this, chunk, final);\n  };\n  Zlib.prototype.p = function (c, f) {\n    this.c.p(c);\n    var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n    if (this.v) zlh(raw, this.o), this.v = 0;\n    if (f) wbytes(raw, raw.length - 4, this.c.d());\n    this.ondata(raw, f);\n  };\n  return Zlib;\n}();\n\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/function () {\n  function AsyncZlib(opts, cb) {\n    astrmify([bDflt, zle, function () {\n      return [astrm, Deflate, Zlib];\n    }], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n      var strm = new Zlib(ev.data);\n      onmessage = astrm(strm);\n    }, 10);\n  }\n  return AsyncZlib;\n}();\n\nfunction zlib(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bDflt, zle, function () {\n    return [zlibSync];\n  }], function (ev) {\n    return pbf(zlibSync(ev.data[0], ev.data[1]));\n  }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nfunction zlibSync(data, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  var a = adler();\n  a.p(data);\n  var d = dopt(data, opts, 2, 4);\n  return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/function () {\n  /**\n   * Creates a Zlib decompression stream\n   * @param cb The callback to call whenever data is inflated\n   */\n  function Unzlib(cb) {\n    this.v = 1;\n    Inflate.call(this, cb);\n  }\n  /**\n   * Pushes a chunk to be unzlibbed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n  Unzlib.prototype.push = function (chunk, final) {\n    Inflate.prototype.e.call(this, chunk);\n    if (this.v) {\n      if (this.p.length < 2 && !final) return;\n      this.p = this.p.subarray(2), this.v = 0;\n    }\n    if (final) {\n      if (this.p.length < 4) throw 'invalid zlib stream';\n      this.p = this.p.subarray(0, -4);\n    }\n    // necessary to prevent TS from using the closure value\n    // This allows for workerization to function correctly\n    Inflate.prototype.c.call(this, final);\n  };\n  return Unzlib;\n}();\n\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/function () {\n  /**\n   * Creates an asynchronous Zlib decompression stream\n   * @param cb The callback to call whenever data is deflated\n   */\n  function AsyncUnzlib(cb) {\n    this.ondata = cb;\n    astrmify([bInflt, zule, function () {\n      return [astrm, Inflate, Unzlib];\n    }], this, 0, function () {\n      var strm = new Unzlib();\n      onmessage = astrm(strm);\n    }, 11);\n  }\n  return AsyncUnzlib;\n}();\n\nfunction unzlib(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return cbify(data, opts, [bInflt, zule, function () {\n    return [unzlibSync];\n  }], function (ev) {\n    return pbf(unzlibSync(ev.data[0], gu8(ev.data[1])));\n  }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, out) {\n  return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\n\n// Default algorithm for compression (used because having a known output size allows faster decompression)\n\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/function () {\n  /**\n   * Creates a decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n  function Decompress(cb) {\n    this.G = Gunzip;\n    this.I = Inflate;\n    this.Z = Unzlib;\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be decompressed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n  Decompress.prototype.push = function (chunk, final) {\n    if (!this.ondata) throw 'no stream handler';\n    if (!this.s) {\n      if (this.p && this.p.length) {\n        var n = new u8(this.p.length + chunk.length);\n        n.set(this.p), n.set(chunk, this.p.length);\n      } else this.p = chunk;\n      if (this.p.length > 2) {\n        var _this_1 = this;\n        var cb = function () {\n          _this_1.ondata.apply(_this_1, arguments);\n        };\n        this.s = this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8 ? new this.G(cb) : (this.p[0] & 15) != 8 || this.p[0] >> 4 > 7 || (this.p[0] << 8 | this.p[1]) % 31 ? new this.I(cb) : new this.Z(cb);\n        this.s.push(this.p, final);\n        this.p = null;\n      }\n    } else this.s.push(chunk, final);\n  };\n  return Decompress;\n}();\n\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/function () {\n  /**\n  * Creates an asynchronous decompression stream\n  * @param cb The callback to call whenever data is decompressed\n  */\n  function AsyncDecompress(cb) {\n    this.G = AsyncGunzip;\n    this.I = AsyncInflate;\n    this.Z = AsyncUnzlib;\n    this.ondata = cb;\n  }\n  /**\n   * Pushes a chunk to be decompressed\n   * @param chunk The chunk to push\n   * @param final Whether this is the last chunk\n   */\n  AsyncDecompress.prototype.push = function (chunk, final) {\n    Decompress.prototype.push.call(this, chunk, final);\n  };\n  return AsyncDecompress;\n}();\n\nfunction decompress(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzip(data, opts, cb) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflate(data, opts, cb) : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction decompressSync(data, out) {\n  return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzipSync(data, out) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflateSync(data, out) : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n  for (var k in d) {\n    var val = d[k],\n      n = p + k;\n    if (val instanceof u8) t[n] = [val, o];else if (Array.isArray(val)) t[n] = [val[0], mrg(o, val[1])];else fltn(val, n + '/', t, o);\n  }\n};\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nfunction strToU8(str, latin1) {\n  var l = str.length;\n  if (!latin1 && typeof TextEncoder != 'undefined') return new TextEncoder().encode(str);\n  var ar = new u8(str.length + (str.length >>> 1));\n  var ai = 0;\n  var w = function (v) {\n    ar[ai++] = v;\n  };\n  for (var i = 0; i < l; ++i) {\n    if (ai + 5 > ar.length) {\n      var n = new u8(ai + 8 + (l - i << 1));\n      n.set(ar);\n      ar = n;\n    }\n    var c = str.charCodeAt(i);\n    if (c < 128 || latin1) w(c);else if (c < 2048) w(192 | c >>> 6), w(128 | c & 63);else if (c > 55295 && c < 57344) c = 65536 + (c & 1023 << 10) | str.charCodeAt(++i) & 1023, w(240 | c >>> 18), w(128 | c >>> 12 & 63), w(128 | c >>> 6 & 63), w(128 | c & 63);else w(224 | c >>> 12), w(128 | c >>> 6 & 63), w(128 | c & 63);\n  }\n  return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nfunction strFromU8(dat, latin1) {\n  var r = '';\n  if (!latin1 && typeof TextDecoder != 'undefined') return new TextDecoder().decode(dat);\n  for (var i = 0; i < dat.length;) {\n    var c = dat[i++];\n    if (c < 128 || latin1) r += String.fromCharCode(c);else if (c < 224) r += String.fromCharCode((c & 31) << 6 | dat[i++] & 63);else if (c < 240) r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | dat[i++] & 63);else c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | dat[i++] & 63) - 65536, r += String.fromCharCode(55296 | c >> 10, 56320 | c & 1023);\n  }\n  return r;\n}\n;\n// skip local zip header\nvar slzh = function (d, b) {\n  return b + 30 + b2(d, b + 26) + b2(d, b + 28);\n};\n// read zip header\nvar zh = function (d, b, z) {\n  var fnl = b2(d, b + 28),\n    fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)),\n    es = b + 46 + fnl;\n  var _a = z ? z64e(d, es) : [b4(d, b + 20), b4(d, b + 24), b4(d, b + 42)],\n    sc = _a[0],\n    su = _a[1],\n    off = _a[2];\n  return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n  for (; b2(d, b) != 1; b += 4 + b2(d, b + 2));\n  return [b4(d, b + 12), b4(d, b + 4), b4(d, b + 20)];\n};\n// write zip header\nvar wzh = function (d, b, c, cmp, su, fn, u, o, ce, t) {\n  var fl = fn.length,\n    l = cmp.length;\n  wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n  if (ce != null) d[b] = 20, b += 2;\n  d[b] = 20, b += 2; // spec compliance? what's that?\n  d[b++] = t == 8 && (o.level == 1 ? 6 : o.level < 6 ? 4 : o.level == 9 ? 2 : 0), d[b++] = u && 8;\n  d[b] = t, b += 2;\n  var dt = new Date(o.mtime || Date.now()),\n    y = dt.getFullYear() - 1980;\n  if (y < 0 || y > 119) throw 'date not in range 1980-2099';\n  wbytes(d, b, (y << 24) * 2 | dt.getMonth() + 1 << 21 | dt.getDate() << 16 | dt.getHours() << 11 | dt.getMinutes() << 5 | dt.getSeconds() >>> 1);\n  b += 4;\n  wbytes(d, b, c);\n  wbytes(d, b + 4, l);\n  wbytes(d, b + 8, su);\n  wbytes(d, b + 12, fl), b += 16; // skip extra field, comment\n  if (ce != null) wbytes(d, b += 10, ce), b += 4;\n  d.set(fn, b);\n  b += fl;\n  if (ce == null) d.set(cmp, b);\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n  wbytes(o, b, 0x6054B50); // skip disk\n  wbytes(o, b + 8, c);\n  wbytes(o, b + 10, c);\n  wbytes(o, b + 12, d);\n  wbytes(o, b + 16, e);\n};\nfunction zip(data, opts, cb) {\n  if (!cb) cb = opts, opts = {};\n  if (typeof cb != 'function') throw 'no callback';\n  var r = {};\n  fltn(data, '', r, opts);\n  var k = Object.keys(r);\n  var lft = k.length,\n    o = 0,\n    tot = 0;\n  var slft = lft,\n    files = new Array(lft);\n  var term = [];\n  var tAll = function () {\n    for (var i = 0; i < term.length; ++i) term[i]();\n  };\n  var cbf = function () {\n    var out = new u8(tot + 22),\n      oe = o,\n      cdl = tot - o;\n    tot = 0;\n    for (var i = 0; i < slft; ++i) {\n      var f = files[i];\n      try {\n        wzh(out, tot, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n        wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, tot, f.t), o += 46 + f.n.length, tot += 30 + f.n.length + f.d.length;\n      } catch (e) {\n        return cb(e, null);\n      }\n    }\n    wzf(out, o, files.length, cdl, oe);\n    cb(null, out);\n  };\n  if (!lft) cbf();\n  var _loop_1 = function (i) {\n    var fn = k[i];\n    var _a = r[fn],\n      file = _a[0],\n      p = _a[1];\n    var c = crc(),\n      m = file.length;\n    c.p(file);\n    var n = strToU8(fn),\n      s = n.length;\n    var t = p.level == 0 ? 0 : 8;\n    var cbl = function (e, d) {\n      if (e) {\n        tAll();\n        cb(e, null);\n      } else {\n        var l = d.length;\n        files[i] = {\n          t: t,\n          d: d,\n          m: m,\n          c: c.d(),\n          u: fn.length != l,\n          n: n,\n          p: p\n        };\n        o += 30 + s + l;\n        tot += 76 + 2 * s + l;\n        if (! --lft) cbf();\n      }\n    };\n    if (n.length > 65535) cbl('filename too long', null);\n    if (!t) cbl(null, file);else if (m < 160000) {\n      try {\n        cbl(null, deflateSync(file, p));\n      } catch (e) {\n        cbl(e, null);\n      }\n    } else term.push(deflate(file, p, cbl));\n  };\n  // Cannot use lft because it can decrease\n  for (var i = 0; i < slft; ++i) {\n    _loop_1(i);\n  }\n  return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nfunction zipSync(data, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  var r = {};\n  var files = [];\n  fltn(data, '', r, opts);\n  var o = 0;\n  var tot = 0;\n  for (var fn in r) {\n    var _a = r[fn],\n      file = _a[0],\n      p = _a[1];\n    var t = p.level == 0 ? 0 : 8;\n    var n = strToU8(fn),\n      s = n.length;\n    if (n.length > 65535) throw 'filename too long';\n    var d = t ? deflateSync(file, p) : file,\n      l = d.length;\n    var c = crc();\n    c.p(file);\n    files.push({\n      t: t,\n      d: d,\n      m: file.length,\n      c: c.d(),\n      u: fn.length != s,\n      n: n,\n      o: o,\n      p: p\n    });\n    o += 30 + s + l;\n    tot += 76 + 2 * s + l;\n  }\n  var out = new u8(tot + 22),\n    oe = o,\n    cdl = tot - o;\n  for (var i = 0; i < files.length; ++i) {\n    var f = files[i];\n    wzh(out, f.o, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n    wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, f.o, f.t), o += 46 + f.n.length;\n  }\n  wzf(out, o, files.length, cdl, oe);\n  return out;\n}\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nfunction unzip(data, cb) {\n  if (typeof cb != 'function') throw 'no callback';\n  var term = [];\n  var tAll = function () {\n    for (var i = 0; i < term.length; ++i) term[i]();\n  };\n  var files = {};\n  var e = data.length - 22;\n  for (; b4(data, e) != 0x6054B50; --e) {\n    if (!e || data.length - e > 65558) {\n      cb('invalid zip file', null);\n      return;\n    }\n  }\n  ;\n  var lft = b2(data, e + 8);\n  if (!lft) cb(null, {});\n  var c = lft;\n  var o = b4(data, e + 16);\n  var z = o == 4294967295;\n  if (z) {\n    e = b4(data, e - 12);\n    if (b4(data, e) != 0x6064B50) throw 'invalid zip file';\n    c = lft = b4(data, e + 32);\n    o = b4(data, e + 48);\n  }\n  var _loop_2 = function (i) {\n    var _a = zh(data, o, z),\n      c_1 = _a[0],\n      sc = _a[1],\n      su = _a[2],\n      fn = _a[3],\n      no = _a[4],\n      off = _a[5],\n      b = slzh(data, off);\n    o = no;\n    var cbl = function (e, d) {\n      if (e) {\n        tAll();\n        cb(e, null);\n      } else {\n        files[fn] = d;\n        if (! --lft) cb(null, files);\n      }\n    };\n    if (!c_1) cbl(null, slc(data, b, b + sc));else if (c_1 == 8) {\n      var infl = data.subarray(b, b + sc);\n      if (sc < 320000) {\n        try {\n          cbl(null, inflateSync(infl, new u8(su)));\n        } catch (e) {\n          cbl(e, null);\n        }\n      } else term.push(inflate(infl, {\n        size: su\n      }, cbl));\n    } else cbl('unknown compression type ' + c_1, null);\n  };\n  for (var i = 0; i < c; ++i) {\n    _loop_2(i);\n  }\n  return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nfunction unzipSync(data) {\n  var files = {};\n  var e = data.length - 22;\n  for (; b4(data, e) != 0x6054B50; --e) {\n    if (!e || data.length - e > 65558) throw 'invalid zip file';\n  }\n  ;\n  var c = b2(data, e + 8);\n  if (!c) return {};\n  var o = b4(data, e + 16);\n  var z = o == 4294967295;\n  if (z) {\n    e = b4(data, e - 12);\n    if (b4(data, e) != 0x6064B50) throw 'invalid zip file';\n    c = b4(data, e + 32);\n    o = b4(data, e + 48);\n  }\n  for (var i = 0; i < c; ++i) {\n    var _a = zh(data, o, z),\n      c_2 = _a[0],\n      sc = _a[1],\n      su = _a[2],\n      fn = _a[3],\n      no = _a[4],\n      off = _a[5],\n      b = slzh(data, off);\n    o = no;\n    if (!c_2) files[fn] = slc(data, b, b + sc);else if (c_2 == 8) files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));else throw 'unknown compression type ' + c_2;\n  }\n  return files;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmZsYXRlL2VzbS9icm93c2VyLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC8uL25vZGVfbW9kdWxlcy9mZmxhdGUvZXNtL2Jyb3dzZXIuanM/ZDNiZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBERUZMQVRFIGlzIGEgY29tcGxleCBmb3JtYXQ7IHRvIHJlYWQgdGhpcyBjb2RlLCB5b3Ugc2hvdWxkIHByb2JhYmx5IGNoZWNrIHRoZSBSRkMgZmlyc3Q6XG4vLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMTk1MVxuLy8gWW91IG1heSBhbHNvIHdpc2ggdG8gdGFrZSBhIGxvb2sgYXQgdGhlIGd1aWRlIEkgbWFkZSBhYm91dCB0aGlzIHByb2dyYW06XG4vLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xMDFhcnJvd3ovMjUzZjMxZWI1YWJjM2Q5Mjc1YWI5NDMwMDNmZmVjYWRcbi8vIE11Y2ggb2YgdGhlIGZvbGxvd2luZyBjb2RlIGlzIHNpbWlsYXIgdG8gdGhhdCBvZiBVWklQLmpzOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3Bob3RvcGVhL1VaSVAuanNcbi8vIE1hbnkgb3B0aW1pemF0aW9ucyBoYXZlIGJlZW4gbWFkZSwgc28gdGhlIGJ1bmRsZSBzaXplIGlzIHVsdGltYXRlbHkgc21hbGxlciBidXQgcGVyZm9ybWFuY2UgaXMgc2ltaWxhci5cbi8vIFNvbWV0aW1lcyAwIHdpbGwgYXBwZWFyIHdoZXJlIC0xIHdvdWxkIGJlIG1vcmUgYXBwcm9wcmlhdGUuIFRoaXMgaXMgYmVjYXVzZSB1c2luZyBhIHVpbnRcbi8vIGlzIGJldHRlciBmb3IgbWVtb3J5IGluIG1vc3QgZW5naW5lcyAoSSAqdGhpbmsqKS5cbnZhciBjaDIgPSB7fTtcbnZhciB3ayA9IChmdW5jdGlvbiAoYywgaWQsIG1zZywgdHJhbnNmZXIsIGNiKSB7XG4gICAgdmFyIHUgPSBjaDJbaWRdIHx8IChjaDJbaWRdID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbY10sIHsgdHlwZTogJ3RleHQvamF2YXNjcmlwdCcgfSkpKTtcbiAgICB2YXIgdyA9IG5ldyBXb3JrZXIodSk7XG4gICAgdy5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGNiKGUuZXJyb3IsIG51bGwpOyB9O1xuICAgIHcub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGNiKG51bGwsIGUuZGF0YSk7IH07XG4gICAgdy5wb3N0TWVzc2FnZShtc2csIHRyYW5zZmVyKTtcbiAgICByZXR1cm4gdztcbn0pO1xuXG4vLyBhbGlhc2VzIGZvciBzaG9ydGVyIGNvbXByZXNzZWQgY29kZSAobW9zdCBtaW5pZmVycyBkb24ndCBkbyB0aGlzKVxudmFyIHU4ID0gVWludDhBcnJheSwgdTE2ID0gVWludDE2QXJyYXksIHUzMiA9IFVpbnQzMkFycmF5O1xuLy8gZml4ZWQgbGVuZ3RoIGV4dHJhIGJpdHNcbnZhciBmbGViID0gbmV3IHU4KFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAyLCAyLCAyLCAyLCAzLCAzLCAzLCAzLCA0LCA0LCA0LCA0LCA1LCA1LCA1LCA1LCAwLCAvKiB1bnVzZWQgKi8gMCwgMCwgLyogaW1wb3NzaWJsZSAqLyAwXSk7XG4vLyBmaXhlZCBkaXN0YW5jZSBleHRyYSBiaXRzXG4vLyBzZWUgZmxlYiBub3RlXG52YXIgZmRlYiA9IG5ldyB1OChbMCwgMCwgMCwgMCwgMSwgMSwgMiwgMiwgMywgMywgNCwgNCwgNSwgNSwgNiwgNiwgNywgNywgOCwgOCwgOSwgOSwgMTAsIDEwLCAxMSwgMTEsIDEyLCAxMiwgMTMsIDEzLCAvKiB1bnVzZWQgKi8gMCwgMF0pO1xuLy8gY29kZSBsZW5ndGggaW5kZXggbWFwXG52YXIgY2xpbSA9IG5ldyB1OChbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV0pO1xuLy8gZ2V0IGJhc2UsIHJldmVyc2UgaW5kZXggbWFwIGZyb20gZXh0cmEgYml0c1xudmFyIGZyZWIgPSBmdW5jdGlvbiAoZWIsIHN0YXJ0KSB7XG4gICAgdmFyIGIgPSBuZXcgdTE2KDMxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMxOyArK2kpIHtcbiAgICAgICAgYltpXSA9IHN0YXJ0ICs9IDEgPDwgZWJbaSAtIDFdO1xuICAgIH1cbiAgICAvLyBudW1iZXJzIGhlcmUgYXJlIGF0IG1heCAxOCBiaXRzXG4gICAgdmFyIHIgPSBuZXcgdTMyKGJbMzBdKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IDMwOyArK2kpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IGJbaV07IGogPCBiW2kgKyAxXTsgKytqKSB7XG4gICAgICAgICAgICByW2pdID0gKChqIC0gYltpXSkgPDwgNSkgfCBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbYiwgcl07XG59O1xudmFyIF9hID0gZnJlYihmbGViLCAyKSwgZmwgPSBfYVswXSwgcmV2ZmwgPSBfYVsxXTtcbi8vIHdlIGNhbiBpZ25vcmUgdGhlIGZhY3QgdGhhdCB0aGUgb3RoZXIgbnVtYmVycyBhcmUgd3Jvbmc7IHRoZXkgbmV2ZXIgaGFwcGVuIGFueXdheVxuZmxbMjhdID0gMjU4LCByZXZmbFsyNThdID0gMjg7XG52YXIgX2IgPSBmcmViKGZkZWIsIDApLCBmZCA9IF9iWzBdLCByZXZmZCA9IF9iWzFdO1xuLy8gbWFwIG9mIHZhbHVlIHRvIHJldmVyc2UgKGFzc3VtaW5nIDE2IGJpdHMpXG52YXIgcmV2ID0gbmV3IHUxNigzMjc2OCk7XG5mb3IgKHZhciBpID0gMDsgaSA8IDMyNzY4OyArK2kpIHtcbiAgICAvLyByZXZlcnNlIHRhYmxlIGFsZ29yaXRobSBmcm9tIFNPXG4gICAgdmFyIHggPSAoKGkgJiAweEFBQUEpID4+PiAxKSB8ICgoaSAmIDB4NTU1NSkgPDwgMSk7XG4gICAgeCA9ICgoeCAmIDB4Q0NDQykgPj4+IDIpIHwgKCh4ICYgMHgzMzMzKSA8PCAyKTtcbiAgICB4ID0gKCh4ICYgMHhGMEYwKSA+Pj4gNCkgfCAoKHggJiAweDBGMEYpIDw8IDQpO1xuICAgIHJldltpXSA9ICgoKHggJiAweEZGMDApID4+PiA4KSB8ICgoeCAmIDB4MDBGRikgPDwgOCkpID4+PiAxO1xufVxuLy8gY3JlYXRlIGh1ZmZtYW4gdHJlZSBmcm9tIHU4IFwibWFwXCI6IGluZGV4IC0+IGNvZGUgbGVuZ3RoIGZvciBjb2RlIGluZGV4XG4vLyBtYiAobWF4IGJpdHMpIG11c3QgYmUgYXQgbW9zdCAxNVxuLy8gVE9ETzogb3B0aW1pemUvc3BsaXQgdXA/XG52YXIgaE1hcCA9IChmdW5jdGlvbiAoY2QsIG1iLCByKSB7XG4gICAgdmFyIHMgPSBjZC5sZW5ndGg7XG4gICAgLy8gaW5kZXhcbiAgICB2YXIgaSA9IDA7XG4gICAgLy8gdTE2IFwibWFwXCI6IGluZGV4IC0+ICMgb2YgY29kZXMgd2l0aCBiaXQgbGVuZ3RoID0gaW5kZXhcbiAgICB2YXIgbCA9IG5ldyB1MTYobWIpO1xuICAgIC8vIGxlbmd0aCBvZiBjZCBtdXN0IGJlIDI4OCAodG90YWwgIyBvZiBjb2RlcylcbiAgICBmb3IgKDsgaSA8IHM7ICsraSlcbiAgICAgICAgKytsW2NkW2ldIC0gMV07XG4gICAgLy8gdTE2IFwibWFwXCI6IGluZGV4IC0+IG1pbmltdW0gY29kZSBmb3IgYml0IGxlbmd0aCA9IGluZGV4XG4gICAgdmFyIGxlID0gbmV3IHUxNihtYik7XG4gICAgZm9yIChpID0gMDsgaSA8IG1iOyArK2kpIHtcbiAgICAgICAgbGVbaV0gPSAobGVbaSAtIDFdICsgbFtpIC0gMV0pIDw8IDE7XG4gICAgfVxuICAgIHZhciBjbztcbiAgICBpZiAocikge1xuICAgICAgICAvLyB1MTYgXCJtYXBcIjogaW5kZXggLT4gbnVtYmVyIG9mIGFjdHVhbCBiaXRzLCBzeW1ib2wgZm9yIGNvZGVcbiAgICAgICAgY28gPSBuZXcgdTE2KDEgPDwgbWIpO1xuICAgICAgICAvLyBiaXRzIHRvIHJlbW92ZSBmb3IgcmV2ZXJzZXJcbiAgICAgICAgdmFyIHJ2YiA9IDE1IC0gbWI7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzOyArK2kpIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSAwIGxlbmd0aHNcbiAgICAgICAgICAgIGlmIChjZFtpXSkge1xuICAgICAgICAgICAgICAgIC8vIG51bSBlbmNvZGluZyBib3RoIHN5bWJvbCBhbmQgYml0cyByZWFkXG4gICAgICAgICAgICAgICAgdmFyIHN2ID0gKGkgPDwgNCkgfCBjZFtpXTtcbiAgICAgICAgICAgICAgICAvLyBmcmVlIGJpdHNcbiAgICAgICAgICAgICAgICB2YXIgcl8xID0gbWIgLSBjZFtpXTtcbiAgICAgICAgICAgICAgICAvLyBzdGFydCB2YWx1ZVxuICAgICAgICAgICAgICAgIHZhciB2ID0gbGVbY2RbaV0gLSAxXSsrIDw8IHJfMTtcbiAgICAgICAgICAgICAgICAvLyBtIGlzIGVuZCB2YWx1ZVxuICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSB2IHwgKCgxIDw8IHJfMSkgLSAxKTsgdiA8PSBtOyArK3YpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlcnkgMTYgYml0IHZhbHVlIHN0YXJ0aW5nIHdpdGggdGhlIGNvZGUgeWllbGRzIHRoZSBzYW1lIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICBjb1tyZXZbdl0gPj4+IHJ2Yl0gPSBzdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvID0gbmV3IHUxNihzKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHM7ICsraSlcbiAgICAgICAgICAgIGNvW2ldID0gcmV2W2xlW2NkW2ldIC0gMV0rK10gPj4+ICgxNSAtIGNkW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvO1xufSk7XG4vLyBmaXhlZCBsZW5ndGggdHJlZVxudmFyIGZsdCA9IG5ldyB1OCgyODgpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAxNDQ7ICsraSlcbiAgICBmbHRbaV0gPSA4O1xuZm9yICh2YXIgaSA9IDE0NDsgaSA8IDI1NjsgKytpKVxuICAgIGZsdFtpXSA9IDk7XG5mb3IgKHZhciBpID0gMjU2OyBpIDwgMjgwOyArK2kpXG4gICAgZmx0W2ldID0gNztcbmZvciAodmFyIGkgPSAyODA7IGkgPCAyODg7ICsraSlcbiAgICBmbHRbaV0gPSA4O1xuLy8gZml4ZWQgZGlzdGFuY2UgdHJlZVxudmFyIGZkdCA9IG5ldyB1OCgzMik7XG5mb3IgKHZhciBpID0gMDsgaSA8IDMyOyArK2kpXG4gICAgZmR0W2ldID0gNTtcbi8vIGZpeGVkIGxlbmd0aCBtYXBcbnZhciBmbG0gPSAvKiNfX1BVUkVfXyovIGhNYXAoZmx0LCA5LCAwKSwgZmxybSA9IC8qI19fUFVSRV9fKi8gaE1hcChmbHQsIDksIDEpO1xuLy8gZml4ZWQgZGlzdGFuY2UgbWFwXG52YXIgZmRtID0gLyojX19QVVJFX18qLyBoTWFwKGZkdCwgNSwgMCksIGZkcm0gPSAvKiNfX1BVUkVfXyovIGhNYXAoZmR0LCA1LCAxKTtcbi8vIGZpbmQgbWF4IG9mIGFycmF5XG52YXIgbWF4ID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgbSA9IGFbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChhW2ldID4gbSlcbiAgICAgICAgICAgIG0gPSBhW2ldO1xuICAgIH1cbiAgICByZXR1cm4gbTtcbn07XG4vLyByZWFkIGQsIHN0YXJ0aW5nIGF0IGJpdCBwIGFuZCBtYXNrIHdpdGggbVxudmFyIGJpdHMgPSBmdW5jdGlvbiAoZCwgcCwgbSkge1xuICAgIHZhciBvID0gKHAgLyA4KSA+PiAwO1xuICAgIHJldHVybiAoKGRbb10gfCAoZFtvICsgMV0gPDwgOCkpID4+PiAocCAmIDcpKSAmIG07XG59O1xuLy8gcmVhZCBkLCBzdGFydGluZyBhdCBiaXQgcCBjb250aW51aW5nIGZvciBhdCBsZWFzdCAxNiBiaXRzXG52YXIgYml0czE2ID0gZnVuY3Rpb24gKGQsIHApIHtcbiAgICB2YXIgbyA9IChwIC8gOCkgPj4gMDtcbiAgICByZXR1cm4gKChkW29dIHwgKGRbbyArIDFdIDw8IDgpIHwgKGRbbyArIDJdIDw8IDE2KSkgPj4+IChwICYgNykpO1xufTtcbi8vIGdldCBlbmQgb2YgYnl0ZVxudmFyIHNoZnQgPSBmdW5jdGlvbiAocCkgeyByZXR1cm4gKChwIC8gOCkgPj4gMCkgKyAocCAmIDcgJiYgMSk7IH07XG4vLyB0eXBlZCBhcnJheSBzbGljZSAtIGFsbG93cyBnYXJiYWdlIGNvbGxlY3RvciB0byBmcmVlIG9yaWdpbmFsIHJlZmVyZW5jZSxcbi8vIHdoaWxlIGJlaW5nIG1vcmUgY29tcGF0aWJsZSB0aGFuIC5zbGljZVxudmFyIHNsYyA9IGZ1bmN0aW9uICh2LCBzLCBlKSB7XG4gICAgaWYgKHMgPT0gbnVsbCB8fCBzIDwgMClcbiAgICAgICAgcyA9IDA7XG4gICAgaWYgKGUgPT0gbnVsbCB8fCBlID4gdi5sZW5ndGgpXG4gICAgICAgIGUgPSB2Lmxlbmd0aDtcbiAgICAvLyBjYW4ndCB1c2UgLmNvbnN0cnVjdG9yIGluIGNhc2UgdXNlci1zdXBwbGllZFxuICAgIHZhciBuID0gbmV3ICh2IGluc3RhbmNlb2YgdTE2ID8gdTE2IDogdiBpbnN0YW5jZW9mIHUzMiA/IHUzMiA6IHU4KShlIC0gcyk7XG4gICAgbi5zZXQodi5zdWJhcnJheShzLCBlKSk7XG4gICAgcmV0dXJuIG47XG59O1xuLy8gZXhwYW5kcyByYXcgREVGTEFURSBkYXRhXG52YXIgaW5mbHQgPSBmdW5jdGlvbiAoZGF0LCBidWYsIHN0KSB7XG4gICAgLy8gc291cmNlIGxlbmd0aFxuICAgIHZhciBzbCA9IGRhdC5sZW5ndGg7XG4gICAgLy8gaGF2ZSB0byBlc3RpbWF0ZSBzaXplXG4gICAgdmFyIG5vQnVmID0gIWJ1ZiB8fCBzdDtcbiAgICAvLyBubyBzdGF0ZVxuICAgIHZhciBub1N0ID0gIXN0IHx8IHN0Lmk7XG4gICAgaWYgKCFzdClcbiAgICAgICAgc3QgPSB7fTtcbiAgICAvLyBBc3N1bWVzIHJvdWdobHkgMzMlIGNvbXByZXNzaW9uIHJhdGlvIGF2ZXJhZ2VcbiAgICBpZiAoIWJ1ZilcbiAgICAgICAgYnVmID0gbmV3IHU4KHNsICogMyk7XG4gICAgLy8gZW5zdXJlIGJ1ZmZlciBjYW4gZml0IGF0IGxlYXN0IGwgZWxlbWVudHNcbiAgICB2YXIgY2J1ZiA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgIHZhciBibCA9IGJ1Zi5sZW5ndGg7XG4gICAgICAgIC8vIG5lZWQgdG8gaW5jcmVhc2Ugc2l6ZSB0byBmaXRcbiAgICAgICAgaWYgKGwgPiBibCkge1xuICAgICAgICAgICAgLy8gRG91YmxlIG9yIHNldCB0byBuZWNlc3NhcnksIHdoaWNoZXZlciBpcyBncmVhdGVyXG4gICAgICAgICAgICB2YXIgbmJ1ZiA9IG5ldyB1OChNYXRoLm1heChibCAqIDIsIGwpKTtcbiAgICAgICAgICAgIG5idWYuc2V0KGJ1Zik7XG4gICAgICAgICAgICBidWYgPSBuYnVmO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyAgbGFzdCBjaHVuayAgICAgICAgIGJpdHBvcyAgICAgICAgICAgYnl0ZXNcbiAgICB2YXIgZmluYWwgPSBzdC5mIHx8IDAsIHBvcyA9IHN0LnAgfHwgMCwgYnQgPSBzdC5iIHx8IDAsIGxtID0gc3QubCwgZG0gPSBzdC5kLCBsYnQgPSBzdC5tLCBkYnQgPSBzdC5uO1xuICAgIC8vIHRvdGFsIGJpdHNcbiAgICB2YXIgdGJ0cyA9IHNsICogODtcbiAgICBkbyB7XG4gICAgICAgIGlmICghbG0pIHtcbiAgICAgICAgICAgIC8vIEJGSU5BTCAtIHRoaXMgaXMgb25seSAxIHdoZW4gbGFzdCBjaHVuayBpcyBuZXh0XG4gICAgICAgICAgICBzdC5mID0gZmluYWwgPSBiaXRzKGRhdCwgcG9zLCAxKTtcbiAgICAgICAgICAgIC8vIHR5cGU6IDAgPSBubyBjb21wcmVzc2lvbiwgMSA9IGZpeGVkIGh1ZmZtYW4sIDIgPSBkeW5hbWljIGh1ZmZtYW5cbiAgICAgICAgICAgIHZhciB0eXBlID0gYml0cyhkYXQsIHBvcyArIDEsIDMpO1xuICAgICAgICAgICAgcG9zICs9IDM7XG4gICAgICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICAgICAgICAvLyBnbyB0byBlbmQgb2YgYnl0ZSBib3VuZGFyeVxuICAgICAgICAgICAgICAgIHZhciBzID0gc2hmdChwb3MpICsgNCwgbCA9IGRhdFtzIC0gNF0gfCAoZGF0W3MgLSAzXSA8PCA4KSwgdCA9IHMgKyBsO1xuICAgICAgICAgICAgICAgIGlmICh0ID4gc2wpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vU3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAndW5leHBlY3RlZCBFT0YnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIHNpemVcbiAgICAgICAgICAgICAgICBpZiAobm9CdWYpXG4gICAgICAgICAgICAgICAgICAgIGNidWYoYnQgKyBsKTtcbiAgICAgICAgICAgICAgICAvLyBDb3B5IG92ZXIgdW5jb21wcmVzc2VkIGRhdGFcbiAgICAgICAgICAgICAgICBidWYuc2V0KGRhdC5zdWJhcnJheShzLCB0KSwgYnQpO1xuICAgICAgICAgICAgICAgIC8vIEdldCBuZXcgYml0cG9zLCB1cGRhdGUgYnl0ZSBjb3VudFxuICAgICAgICAgICAgICAgIHN0LmIgPSBidCArPSBsLCBzdC5wID0gcG9zID0gdCAqIDg7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDEpXG4gICAgICAgICAgICAgICAgbG0gPSBmbHJtLCBkbSA9IGZkcm0sIGxidCA9IDksIGRidCA9IDU7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDIpIHtcbiAgICAgICAgICAgICAgICAvLyAgbGl0ZXJhbCAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhzXG4gICAgICAgICAgICAgICAgdmFyIGhMaXQgPSBiaXRzKGRhdCwgcG9zLCAzMSkgKyAyNTcsIGhjTGVuID0gYml0cyhkYXQsIHBvcyArIDEwLCAxNSkgKyA0O1xuICAgICAgICAgICAgICAgIHZhciB0bCA9IGhMaXQgKyBiaXRzKGRhdCwgcG9zICsgNSwgMzEpICsgMTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gMTQ7XG4gICAgICAgICAgICAgICAgLy8gbGVuZ3RoK2Rpc3RhbmNlIHRyZWVcbiAgICAgICAgICAgICAgICB2YXIgbGR0ID0gbmV3IHU4KHRsKTtcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGxlbmd0aCB0cmVlXG4gICAgICAgICAgICAgICAgdmFyIGNsdCA9IG5ldyB1OCgxOSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoY0xlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZSBpbmRleCBtYXAgdG8gZ2V0IHJlYWwgY29kZVxuICAgICAgICAgICAgICAgICAgICBjbHRbY2xpbVtpXV0gPSBiaXRzKGRhdCwgcG9zICsgaSAqIDMsIDcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3MgKz0gaGNMZW4gKiAzO1xuICAgICAgICAgICAgICAgIC8vIGNvZGUgbGVuZ3RocyBiaXRzXG4gICAgICAgICAgICAgICAgdmFyIGNsYiA9IG1heChjbHQpLCBjbGJtc2sgPSAoMSA8PCBjbGIpIC0gMTtcbiAgICAgICAgICAgICAgICBpZiAoIW5vU3QgJiYgcG9zICsgdGwgKiAoY2xiICsgNykgPiB0YnRzKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGxlbmd0aHMgbWFwXG4gICAgICAgICAgICAgICAgdmFyIGNsbSA9IGhNYXAoY2x0LCBjbGIsIDEpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGw7KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gY2xtW2JpdHMoZGF0LCBwb3MsIGNsYm1zayldO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaXRzIHJlYWRcbiAgICAgICAgICAgICAgICAgICAgcG9zICs9IHIgJiAxNTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3ltYm9sXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gciA+Pj4gNDtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29kZSBsZW5ndGggdG8gY29weVxuICAgICAgICAgICAgICAgICAgICBpZiAocyA8IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZHRbaSsrXSA9IHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgY29weSAgIGNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IDAsIG4gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT0gMTYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDMgKyBiaXRzKGRhdCwgcG9zLCAzKSwgcG9zICs9IDIsIGMgPSBsZHRbaSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocyA9PSAxNylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gMyArIGJpdHMoZGF0LCBwb3MsIDcpLCBwb3MgKz0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHMgPT0gMTgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDExICsgYml0cyhkYXQsIHBvcywgMTI3KSwgcG9zICs9IDc7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobi0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxkdFtpKytdID0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAgICBsZW5ndGggdHJlZSAgICAgICAgICAgICAgICAgZGlzdGFuY2UgdHJlZVxuICAgICAgICAgICAgICAgIHZhciBsdCA9IGxkdC5zdWJhcnJheSgwLCBoTGl0KSwgZHQgPSBsZHQuc3ViYXJyYXkoaExpdCk7XG4gICAgICAgICAgICAgICAgLy8gbWF4IGxlbmd0aCBiaXRzXG4gICAgICAgICAgICAgICAgbGJ0ID0gbWF4KGx0KTtcbiAgICAgICAgICAgICAgICAvLyBtYXggZGlzdCBiaXRzXG4gICAgICAgICAgICAgICAgZGJ0ID0gbWF4KGR0KTtcbiAgICAgICAgICAgICAgICBsbSA9IGhNYXAobHQsIGxidCwgMSk7XG4gICAgICAgICAgICAgICAgZG0gPSBoTWFwKGR0LCBkYnQsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGJsb2NrIHR5cGUnO1xuICAgICAgICAgICAgaWYgKHBvcyA+IHRidHMpXG4gICAgICAgICAgICAgICAgdGhyb3cgJ3VuZXhwZWN0ZWQgRU9GJztcbiAgICAgICAgfVxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGJ1ZmZlciBjYW4gaG9sZCB0aGlzICsgdGhlIGxhcmdlc3QgcG9zc2libGUgYWRkaXRpb25cbiAgICAgICAgLy8gTWF4aW11bSBjaHVuayBzaXplIChwcmFjdGljYWxseSwgdGhlb3JldGljYWxseSBpbmZpbml0ZSkgaXMgMl4xNztcbiAgICAgICAgaWYgKG5vQnVmKVxuICAgICAgICAgICAgY2J1ZihidCArIDEzMTA3Mik7XG4gICAgICAgIHZhciBsbXMgPSAoMSA8PCBsYnQpIC0gMSwgZG1zID0gKDEgPDwgZGJ0KSAtIDE7XG4gICAgICAgIHZhciBteGEgPSBsYnQgKyBkYnQgKyAxODtcbiAgICAgICAgd2hpbGUgKG5vU3QgfHwgcG9zICsgbXhhIDwgdGJ0cykge1xuICAgICAgICAgICAgLy8gYml0cyByZWFkLCBjb2RlXG4gICAgICAgICAgICB2YXIgYyA9IGxtW2JpdHMxNihkYXQsIHBvcykgJiBsbXNdLCBzeW0gPSBjID4+PiA0O1xuICAgICAgICAgICAgcG9zICs9IGMgJiAxNTtcbiAgICAgICAgICAgIGlmIChwb3MgPiB0YnRzKVxuICAgICAgICAgICAgICAgIHRocm93ICd1bmV4cGVjdGVkIEVPRic7XG4gICAgICAgICAgICBpZiAoIWMpXG4gICAgICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgbGVuZ3RoL2xpdGVyYWwnO1xuICAgICAgICAgICAgaWYgKHN5bSA8IDI1NilcbiAgICAgICAgICAgICAgICBidWZbYnQrK10gPSBzeW07XG4gICAgICAgICAgICBlbHNlIGlmIChzeW0gPT0gMjU2KSB7XG4gICAgICAgICAgICAgICAgbG0gPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGFkZCA9IHN5bSAtIDI1NDtcbiAgICAgICAgICAgICAgICAvLyBubyBleHRyYSBiaXRzIG5lZWRlZCBpZiBsZXNzXG4gICAgICAgICAgICAgICAgaWYgKHN5bSA+IDI2NCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpbmRleFxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHN5bSAtIDI1NywgYiA9IGZsZWJbaV07XG4gICAgICAgICAgICAgICAgICAgIGFkZCA9IGJpdHMoZGF0LCBwb3MsICgxIDw8IGIpIC0gMSkgKyBmbFtpXTtcbiAgICAgICAgICAgICAgICAgICAgcG9zICs9IGI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGRpc3RcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGRtW2JpdHMxNihkYXQsIHBvcykgJiBkbXNdLCBkc3ltID0gZCA+Pj4gNDtcbiAgICAgICAgICAgICAgICBpZiAoIWQpXG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGRpc3RhbmNlJztcbiAgICAgICAgICAgICAgICBwb3MgKz0gZCAmIDE1O1xuICAgICAgICAgICAgICAgIHZhciBkdCA9IGZkW2RzeW1dO1xuICAgICAgICAgICAgICAgIGlmIChkc3ltID4gMykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGZkZWJbZHN5bV07XG4gICAgICAgICAgICAgICAgICAgIGR0ICs9IGJpdHMxNihkYXQsIHBvcykgJiAoKDEgPDwgYikgLSAxKSwgcG9zICs9IGI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3MgPiB0YnRzKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAndW5leHBlY3RlZCBFT0YnO1xuICAgICAgICAgICAgICAgIGlmIChub0J1ZilcbiAgICAgICAgICAgICAgICAgICAgY2J1ZihidCArIDEzMTA3Mik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGJ0ICsgYWRkO1xuICAgICAgICAgICAgICAgIGZvciAoOyBidCA8IGVuZDsgYnQgKz0gNCkge1xuICAgICAgICAgICAgICAgICAgICBidWZbYnRdID0gYnVmW2J0IC0gZHRdO1xuICAgICAgICAgICAgICAgICAgICBidWZbYnQgKyAxXSA9IGJ1ZltidCArIDEgLSBkdF07XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltidCArIDJdID0gYnVmW2J0ICsgMiAtIGR0XTtcbiAgICAgICAgICAgICAgICAgICAgYnVmW2J0ICsgM10gPSBidWZbYnQgKyAzIC0gZHRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidCA9IGVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdC5sID0gbG0sIHN0LnAgPSBwb3MsIHN0LmIgPSBidDtcbiAgICAgICAgaWYgKGxtKVxuICAgICAgICAgICAgZmluYWwgPSAxLCBzdC5tID0gbGJ0LCBzdC5kID0gZG0sIHN0Lm4gPSBkYnQ7XG4gICAgfSB3aGlsZSAoIWZpbmFsKTtcbiAgICByZXR1cm4gYnQgPT0gYnVmLmxlbmd0aCA/IGJ1ZiA6IHNsYyhidWYsIDAsIGJ0KTtcbn07XG4vLyBzdGFydGluZyBhdCBwLCB3cml0ZSB0aGUgbWluaW11bSBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBob2xkIHYgdG8gZFxudmFyIHdiaXRzID0gZnVuY3Rpb24gKGQsIHAsIHYpIHtcbiAgICB2IDw8PSBwICYgNztcbiAgICB2YXIgbyA9IChwIC8gOCkgPj4gMDtcbiAgICBkW29dIHw9IHY7XG4gICAgZFtvICsgMV0gfD0gdiA+Pj4gODtcbn07XG4vLyBzdGFydGluZyBhdCBwLCB3cml0ZSB0aGUgbWluaW11bSBudW1iZXIgb2YgYml0cyAoPjgpIHRoYXQgY2FuIGhvbGQgdiB0byBkXG52YXIgd2JpdHMxNiA9IGZ1bmN0aW9uIChkLCBwLCB2KSB7XG4gICAgdiA8PD0gcCAmIDc7XG4gICAgdmFyIG8gPSAocCAvIDgpID4+IDA7XG4gICAgZFtvXSB8PSB2O1xuICAgIGRbbyArIDFdIHw9IHYgPj4+IDg7XG4gICAgZFtvICsgMl0gfD0gdiA+Pj4gMTY7XG59O1xuLy8gY3JlYXRlcyBjb2RlIGxlbmd0aHMgZnJvbSBhIGZyZXF1ZW5jeSB0YWJsZVxudmFyIGhUcmVlID0gZnVuY3Rpb24gKGQsIG1iKSB7XG4gICAgLy8gTmVlZCBleHRyYSBpbmZvIHRvIG1ha2UgYSB0cmVlXG4gICAgdmFyIHQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGRbaV0pXG4gICAgICAgICAgICB0LnB1c2goeyBzOiBpLCBmOiBkW2ldIH0pO1xuICAgIH1cbiAgICB2YXIgcyA9IHQubGVuZ3RoO1xuICAgIHZhciB0MiA9IHQuc2xpY2UoKTtcbiAgICBpZiAoIXMpXG4gICAgICAgIHJldHVybiBbbmV3IHU4KDApLCAwXTtcbiAgICBpZiAocyA9PSAxKSB7XG4gICAgICAgIHZhciB2ID0gbmV3IHU4KHRbMF0ucyArIDEpO1xuICAgICAgICB2W3RbMF0uc10gPSAxO1xuICAgICAgICByZXR1cm4gW3YsIDFdO1xuICAgIH1cbiAgICB0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuZiAtIGIuZjsgfSk7XG4gICAgLy8gYWZ0ZXIgaTIgcmVhY2hlcyBsYXN0IGluZCwgd2lsbCBiZSBzdG9wcGVkXG4gICAgLy8gZnJlcSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBsYXJnZXN0IHBvc3NpYmxlIG51bWJlciBvZiBzeW1ib2xzXG4gICAgdC5wdXNoKHsgczogLTEsIGY6IDI1MDAxIH0pO1xuICAgIHZhciBsID0gdFswXSwgciA9IHRbMV0sIGkwID0gMCwgaTEgPSAxLCBpMiA9IDI7XG4gICAgdFswXSA9IHsgczogLTEsIGY6IGwuZiArIHIuZiwgbDogbCwgcjogciB9O1xuICAgIC8vIGVmZmljaWVudCBhbGdvcml0aG0gZnJvbSBVWklQLmpzXG4gICAgLy8gaTAgaXMgbG9va2JlaGluZCwgaTIgaXMgbG9va2FoZWFkIC0gYWZ0ZXIgcHJvY2Vzc2luZyB0d28gbG93LWZyZXFcbiAgICAvLyBzeW1ib2xzIHRoYXQgY29tYmluZWQgaGF2ZSBoaWdoIGZyZXEsIHdpbGwgc3RhcnQgcHJvY2Vzc2luZyBpMiAoaGlnaC1mcmVxLFxuICAgIC8vIG5vbi1jb21wb3NpdGUpIHN5bWJvbHMgaW5zdGVhZFxuICAgIC8vIHNlZSBodHRwczovL3JlZGRpdC5jb20vci9waG90b3BlYS9jb21tZW50cy9pa2VraHQvdXppcGpzX3F1ZXN0aW9ucy9cbiAgICB3aGlsZSAoaTEgIT0gcyAtIDEpIHtcbiAgICAgICAgbCA9IHRbdFtpMF0uZiA8IHRbaTJdLmYgPyBpMCsrIDogaTIrK107XG4gICAgICAgIHIgPSB0W2kwICE9IGkxICYmIHRbaTBdLmYgPCB0W2kyXS5mID8gaTArKyA6IGkyKytdO1xuICAgICAgICB0W2kxKytdID0geyBzOiAtMSwgZjogbC5mICsgci5mLCBsOiBsLCByOiByIH07XG4gICAgfVxuICAgIHZhciBtYXhTeW0gPSB0MlswXS5zO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgczsgKytpKSB7XG4gICAgICAgIGlmICh0MltpXS5zID4gbWF4U3ltKVxuICAgICAgICAgICAgbWF4U3ltID0gdDJbaV0ucztcbiAgICB9XG4gICAgLy8gY29kZSBsZW5ndGhzXG4gICAgdmFyIHRyID0gbmV3IHUxNihtYXhTeW0gKyAxKTtcbiAgICAvLyBtYXggYml0cyBpbiB0cmVlXG4gICAgdmFyIG1idCA9IGxuKHRbaTEgLSAxXSwgdHIsIDApO1xuICAgIGlmIChtYnQgPiBtYikge1xuICAgICAgICAvLyBtb3JlIGFsZ29yaXRobXMgZnJvbSBVWklQLmpzXG4gICAgICAgIC8vIFRPRE86IGZpbmQgb3V0IGhvdyB0aGlzIGNvZGUgd29ya3MgKGRlYnQpXG4gICAgICAgIC8vICBpbmQgICAgZGVidFxuICAgICAgICB2YXIgaSA9IDAsIGR0ID0gMDtcbiAgICAgICAgLy8gICAgbGVmdCAgICAgICAgICAgIGNvc3RcbiAgICAgICAgdmFyIGxmdCA9IG1idCAtIG1iLCBjc3QgPSAxIDw8IGxmdDtcbiAgICAgICAgdDIuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gdHJbYi5zXSAtIHRyW2Euc10gfHwgYS5mIC0gYi5mOyB9KTtcbiAgICAgICAgZm9yICg7IGkgPCBzOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBpMl8xID0gdDJbaV0ucztcbiAgICAgICAgICAgIGlmICh0cltpMl8xXSA+IG1iKSB7XG4gICAgICAgICAgICAgICAgZHQgKz0gY3N0IC0gKDEgPDwgKG1idCAtIHRyW2kyXzFdKSk7XG4gICAgICAgICAgICAgICAgdHJbaTJfMV0gPSBtYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkdCA+Pj49IGxmdDtcbiAgICAgICAgd2hpbGUgKGR0ID4gMCkge1xuICAgICAgICAgICAgdmFyIGkyXzIgPSB0MltpXS5zO1xuICAgICAgICAgICAgaWYgKHRyW2kyXzJdIDwgbWIpXG4gICAgICAgICAgICAgICAgZHQgLT0gMSA8PCAobWIgLSB0cltpMl8yXSsrIC0gMSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpID49IDAgJiYgZHQ7IC0taSkge1xuICAgICAgICAgICAgdmFyIGkyXzMgPSB0MltpXS5zO1xuICAgICAgICAgICAgaWYgKHRyW2kyXzNdID09IG1iKSB7XG4gICAgICAgICAgICAgICAgLS10cltpMl8zXTtcbiAgICAgICAgICAgICAgICArK2R0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1idCA9IG1iO1xuICAgIH1cbiAgICByZXR1cm4gW25ldyB1OCh0ciksIG1idF07XG59O1xuLy8gZ2V0IHRoZSBtYXggbGVuZ3RoIGFuZCBhc3NpZ24gbGVuZ3RoIGNvZGVzXG52YXIgbG4gPSBmdW5jdGlvbiAobiwgbCwgZCkge1xuICAgIHJldHVybiBuLnMgPT0gLTFcbiAgICAgICAgPyBNYXRoLm1heChsbihuLmwsIGwsIGQgKyAxKSwgbG4obi5yLCBsLCBkICsgMSkpXG4gICAgICAgIDogKGxbbi5zXSA9IGQpO1xufTtcbi8vIGxlbmd0aCBjb2RlcyBnZW5lcmF0aW9uXG52YXIgbGMgPSBmdW5jdGlvbiAoYykge1xuICAgIHZhciBzID0gYy5sZW5ndGg7XG4gICAgLy8gTm90ZSB0aGF0IHRoZSBzZW1pY29sb24gd2FzIGludGVudGlvbmFsXG4gICAgd2hpbGUgKHMgJiYgIWNbLS1zXSlcbiAgICAgICAgO1xuICAgIHZhciBjbCA9IG5ldyB1MTYoKytzKTtcbiAgICAvLyAgaW5kICAgICAgbnVtICAgICAgICAgc3RyZWFrXG4gICAgdmFyIGNsaSA9IDAsIGNsbiA9IGNbMF0sIGNscyA9IDE7XG4gICAgdmFyIHcgPSBmdW5jdGlvbiAodikgeyBjbFtjbGkrK10gPSB2OyB9O1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHM7ICsraSkge1xuICAgICAgICBpZiAoY1tpXSA9PSBjbG4gJiYgaSAhPSBzKVxuICAgICAgICAgICAgKytjbHM7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFjbG4gJiYgY2xzID4gMikge1xuICAgICAgICAgICAgICAgIGZvciAoOyBjbHMgPiAxMzg7IGNscyAtPSAxMzgpXG4gICAgICAgICAgICAgICAgICAgIHcoMzI3NTQpO1xuICAgICAgICAgICAgICAgIGlmIChjbHMgPiAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHcoY2xzID4gMTAgPyAoKGNscyAtIDExKSA8PCA1KSB8IDI4NjkwIDogKChjbHMgLSAzKSA8PCA1KSB8IDEyMzA1KTtcbiAgICAgICAgICAgICAgICAgICAgY2xzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbHMgPiAzKSB7XG4gICAgICAgICAgICAgICAgdyhjbG4pLCAtLWNscztcbiAgICAgICAgICAgICAgICBmb3IgKDsgY2xzID4gNjsgY2xzIC09IDYpXG4gICAgICAgICAgICAgICAgICAgIHcoODMwNCk7XG4gICAgICAgICAgICAgICAgaWYgKGNscyA+IDIpXG4gICAgICAgICAgICAgICAgICAgIHcoKChjbHMgLSAzKSA8PCA1KSB8IDgyMDgpLCBjbHMgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGNscy0tKVxuICAgICAgICAgICAgICAgIHcoY2xuKTtcbiAgICAgICAgICAgIGNscyA9IDE7XG4gICAgICAgICAgICBjbG4gPSBjW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbY2wuc3ViYXJyYXkoMCwgY2xpKSwgc107XG59O1xuLy8gY2FsY3VsYXRlIHRoZSBsZW5ndGggb2Ygb3V0cHV0IGZyb20gdHJlZSwgY29kZSBsZW5ndGhzXG52YXIgY2xlbiA9IGZ1bmN0aW9uIChjZiwgY2wpIHtcbiAgICB2YXIgbCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbC5sZW5ndGg7ICsraSlcbiAgICAgICAgbCArPSBjZltpXSAqIGNsW2ldO1xuICAgIHJldHVybiBsO1xufTtcbi8vIHdyaXRlcyBhIGZpeGVkIGJsb2NrXG4vLyByZXR1cm5zIHRoZSBuZXcgYml0IHBvc1xudmFyIHdmYmxrID0gZnVuY3Rpb24gKG91dCwgcG9zLCBkYXQpIHtcbiAgICAvLyBubyBuZWVkIHRvIHdyaXRlIDAwIGFzIHR5cGU6IFR5cGVkQXJyYXkgZGVmYXVsdHMgdG8gMFxuICAgIHZhciBzID0gZGF0Lmxlbmd0aDtcbiAgICB2YXIgbyA9IHNoZnQocG9zICsgMik7XG4gICAgb3V0W29dID0gcyAmIDI1NTtcbiAgICBvdXRbbyArIDFdID0gcyA+Pj4gODtcbiAgICBvdXRbbyArIDJdID0gb3V0W29dIF4gMjU1O1xuICAgIG91dFtvICsgM10gPSBvdXRbbyArIDFdIF4gMjU1O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgKytpKVxuICAgICAgICBvdXRbbyArIGkgKyA0XSA9IGRhdFtpXTtcbiAgICByZXR1cm4gKG8gKyA0ICsgcykgKiA4O1xufTtcbi8vIHdyaXRlcyBhIGJsb2NrXG52YXIgd2JsayA9IGZ1bmN0aW9uIChkYXQsIG91dCwgZmluYWwsIHN5bXMsIGxmLCBkZiwgZWIsIGxpLCBicywgYmwsIHApIHtcbiAgICB3Yml0cyhvdXQsIHArKywgZmluYWwpO1xuICAgICsrbGZbMjU2XTtcbiAgICB2YXIgX2EgPSBoVHJlZShsZiwgMTUpLCBkbHQgPSBfYVswXSwgbWxiID0gX2FbMV07XG4gICAgdmFyIF9iID0gaFRyZWUoZGYsIDE1KSwgZGR0ID0gX2JbMF0sIG1kYiA9IF9iWzFdO1xuICAgIHZhciBfYyA9IGxjKGRsdCksIGxjbHQgPSBfY1swXSwgbmxjID0gX2NbMV07XG4gICAgdmFyIF9kID0gbGMoZGR0KSwgbGNkdCA9IF9kWzBdLCBuZGMgPSBfZFsxXTtcbiAgICB2YXIgbGNmcmVxID0gbmV3IHUxNigxOSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsY2x0Lmxlbmd0aDsgKytpKVxuICAgICAgICBsY2ZyZXFbbGNsdFtpXSAmIDMxXSsrO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGNkdC5sZW5ndGg7ICsraSlcbiAgICAgICAgbGNmcmVxW2xjZHRbaV0gJiAzMV0rKztcbiAgICB2YXIgX2UgPSBoVHJlZShsY2ZyZXEsIDcpLCBsY3QgPSBfZVswXSwgbWxjYiA9IF9lWzFdO1xuICAgIHZhciBubGNjID0gMTk7XG4gICAgZm9yICg7IG5sY2MgPiA0ICYmICFsY3RbY2xpbVtubGNjIC0gMV1dOyAtLW5sY2MpXG4gICAgICAgIDtcbiAgICB2YXIgZmxlbiA9IChibCArIDUpIDw8IDM7XG4gICAgdmFyIGZ0bGVuID0gY2xlbihsZiwgZmx0KSArIGNsZW4oZGYsIGZkdCkgKyBlYjtcbiAgICB2YXIgZHRsZW4gPSBjbGVuKGxmLCBkbHQpICsgY2xlbihkZiwgZGR0KSArIGViICsgMTQgKyAzICogbmxjYyArIGNsZW4obGNmcmVxLCBsY3QpICsgKDIgKiBsY2ZyZXFbMTZdICsgMyAqIGxjZnJlcVsxN10gKyA3ICogbGNmcmVxWzE4XSk7XG4gICAgaWYgKGZsZW4gPD0gZnRsZW4gJiYgZmxlbiA8PSBkdGxlbilcbiAgICAgICAgcmV0dXJuIHdmYmxrKG91dCwgcCwgZGF0LnN1YmFycmF5KGJzLCBicyArIGJsKSk7XG4gICAgdmFyIGxtLCBsbCwgZG0sIGRsO1xuICAgIHdiaXRzKG91dCwgcCwgMSArIChkdGxlbiA8IGZ0bGVuKSksIHAgKz0gMjtcbiAgICBpZiAoZHRsZW4gPCBmdGxlbikge1xuICAgICAgICBsbSA9IGhNYXAoZGx0LCBtbGIsIDApLCBsbCA9IGRsdCwgZG0gPSBoTWFwKGRkdCwgbWRiLCAwKSwgZGwgPSBkZHQ7XG4gICAgICAgIHZhciBsbG0gPSBoTWFwKGxjdCwgbWxjYiwgMCk7XG4gICAgICAgIHdiaXRzKG91dCwgcCwgbmxjIC0gMjU3KTtcbiAgICAgICAgd2JpdHMob3V0LCBwICsgNSwgbmRjIC0gMSk7XG4gICAgICAgIHdiaXRzKG91dCwgcCArIDEwLCBubGNjIC0gNCk7XG4gICAgICAgIHAgKz0gMTQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmxjYzsgKytpKVxuICAgICAgICAgICAgd2JpdHMob3V0LCBwICsgMyAqIGksIGxjdFtjbGltW2ldXSk7XG4gICAgICAgIHAgKz0gMyAqIG5sY2M7XG4gICAgICAgIHZhciBsY3RzID0gW2xjbHQsIGxjZHRdO1xuICAgICAgICBmb3IgKHZhciBpdCA9IDA7IGl0IDwgMjsgKytpdCkge1xuICAgICAgICAgICAgdmFyIGNsY3QgPSBsY3RzW2l0XTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xjdC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBsZW4gPSBjbGN0W2ldICYgMzE7XG4gICAgICAgICAgICAgICAgd2JpdHMob3V0LCBwLCBsbG1bbGVuXSksIHAgKz0gbGN0W2xlbl07XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDE1KVxuICAgICAgICAgICAgICAgICAgICB3Yml0cyhvdXQsIHAsIChjbGN0W2ldID4+PiA1KSAmIDEyNyksIHAgKz0gY2xjdFtpXSA+Pj4gMTI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxtID0gZmxtLCBsbCA9IGZsdCwgZG0gPSBmZG0sIGRsID0gZmR0O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpOyArK2kpIHtcbiAgICAgICAgaWYgKHN5bXNbaV0gPiAyNTUpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSAoc3ltc1tpXSA+Pj4gMTgpICYgMzE7XG4gICAgICAgICAgICB3Yml0czE2KG91dCwgcCwgbG1bbGVuICsgMjU3XSksIHAgKz0gbGxbbGVuICsgMjU3XTtcbiAgICAgICAgICAgIGlmIChsZW4gPiA3KVxuICAgICAgICAgICAgICAgIHdiaXRzKG91dCwgcCwgKHN5bXNbaV0gPj4+IDIzKSAmIDMxKSwgcCArPSBmbGViW2xlbl07XG4gICAgICAgICAgICB2YXIgZHN0ID0gc3ltc1tpXSAmIDMxO1xuICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIGRtW2RzdF0pLCBwICs9IGRsW2RzdF07XG4gICAgICAgICAgICBpZiAoZHN0ID4gMylcbiAgICAgICAgICAgICAgICB3Yml0czE2KG91dCwgcCwgKHN5bXNbaV0gPj4+IDUpICYgODE5MSksIHAgKz0gZmRlYltkc3RdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2JpdHMxNihvdXQsIHAsIGxtW3N5bXNbaV1dKSwgcCArPSBsbFtzeW1zW2ldXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3Yml0czE2KG91dCwgcCwgbG1bMjU2XSk7XG4gICAgcmV0dXJuIHAgKyBsbFsyNTZdO1xufTtcbi8vIGRlZmxhdGUgb3B0aW9ucyAobmljZSA8PCAxMykgfCBjaGFpblxudmFyIGRlbyA9IC8qI19fUFVSRV9fKi8gbmV3IHUzMihbNjU1NDAsIDEzMTA4MCwgMTMxMDg4LCAxMzExMDQsIDI2MjE3NiwgMTA0ODcwNCwgMTA0ODgzMiwgMjExNDU2MCwgMjExNzYzMl0pO1xuLy8gZW1wdHlcbnZhciBldCA9IC8qI19fUFVSRV9fKi8gbmV3IHU4KDApO1xuLy8gY29tcHJlc3NlcyBkYXRhIGludG8gYSByYXcgREVGTEFURSBidWZmZXJcbnZhciBkZmx0ID0gZnVuY3Rpb24gKGRhdCwgbHZsLCBwbHZsLCBwcmUsIHBvc3QsIGxzdCkge1xuICAgIHZhciBzID0gZGF0Lmxlbmd0aDtcbiAgICB2YXIgbyA9IG5ldyB1OChwcmUgKyBzICsgNSAqICgxICsgTWF0aC5mbG9vcihzIC8gNzAwMCkpICsgcG9zdCk7XG4gICAgLy8gd3JpdGluZyB0byB0aGlzIHdyaXRlcyB0byB0aGUgb3V0cHV0IGJ1ZmZlclxuICAgIHZhciB3ID0gby5zdWJhcnJheShwcmUsIG8ubGVuZ3RoIC0gcG9zdCk7XG4gICAgdmFyIHBvcyA9IDA7XG4gICAgaWYgKCFsdmwgfHwgcyA8IDgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gczsgaSArPSA2NTUzNSkge1xuICAgICAgICAgICAgLy8gZW5kXG4gICAgICAgICAgICB2YXIgZSA9IGkgKyA2NTUzNTtcbiAgICAgICAgICAgIGlmIChlIDwgcykge1xuICAgICAgICAgICAgICAgIC8vIHdyaXRlIGZ1bGwgYmxvY2tcbiAgICAgICAgICAgICAgICBwb3MgPSB3ZmJsayh3LCBwb3MsIGRhdC5zdWJhcnJheShpLCBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB3cml0ZSBmaW5hbCBibG9ja1xuICAgICAgICAgICAgICAgIHdbaV0gPSBsc3Q7XG4gICAgICAgICAgICAgICAgcG9zID0gd2ZibGsodywgcG9zLCBkYXQuc3ViYXJyYXkoaSwgcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgb3B0ID0gZGVvW2x2bCAtIDFdO1xuICAgICAgICB2YXIgbiA9IG9wdCA+Pj4gMTMsIGMgPSBvcHQgJiA4MTkxO1xuICAgICAgICB2YXIgbXNrXzEgPSAoMSA8PCBwbHZsKSAtIDE7XG4gICAgICAgIC8vICAgIHByZXYgMi1ieXRlIHZhbCBtYXAgICAgY3VyciAyLWJ5dGUgdmFsIG1hcFxuICAgICAgICB2YXIgcHJldiA9IG5ldyB1MTYoMzI3NjgpLCBoZWFkID0gbmV3IHUxNihtc2tfMSArIDEpO1xuICAgICAgICB2YXIgYnMxXzEgPSBNYXRoLmNlaWwocGx2bCAvIDMpLCBiczJfMSA9IDIgKiBiczFfMTtcbiAgICAgICAgdmFyIGhzaCA9IGZ1bmN0aW9uIChpKSB7IHJldHVybiAoZGF0W2ldIF4gKGRhdFtpICsgMV0gPDwgYnMxXzEpIF4gKGRhdFtpICsgMl0gPDwgYnMyXzEpKSAmIG1za18xOyB9O1xuICAgICAgICAvLyAyNDU3NiBpcyBhbiBhcmJpdHJhcnkgbnVtYmVyIG9mIG1heGltdW0gc3ltYm9scyBwZXIgYmxvY2tcbiAgICAgICAgLy8gNDI0IGJ1ZmZlciBmb3IgbGFzdCBibG9ja1xuICAgICAgICB2YXIgc3ltcyA9IG5ldyB1MzIoMjUwMDApO1xuICAgICAgICAvLyBsZW5ndGgvbGl0ZXJhbCBmcmVxICAgZGlzdGFuY2UgZnJlcVxuICAgICAgICB2YXIgbGYgPSBuZXcgdTE2KDI4OCksIGRmID0gbmV3IHUxNigzMik7XG4gICAgICAgIC8vICBsL2xjbnQgIGV4Yml0cyAgaW5kZXggIGwvbGluZCAgd2FpdGR4ICBiaXRwb3NcbiAgICAgICAgdmFyIGxjXzEgPSAwLCBlYiA9IDAsIGkgPSAwLCBsaSA9IDAsIHdpID0gMCwgYnMgPSAwO1xuICAgICAgICBmb3IgKDsgaSA8IHM7ICsraSkge1xuICAgICAgICAgICAgLy8gaGFzaCB2YWx1ZVxuICAgICAgICAgICAgdmFyIGh2ID0gaHNoKGkpO1xuICAgICAgICAgICAgLy8gaW5kZXggbW9kIDMyNzY4XG4gICAgICAgICAgICB2YXIgaW1vZCA9IGkgJiAzMjc2NztcbiAgICAgICAgICAgIC8vIHByZXZpb3VzIGluZGV4IHdpdGggdGhpcyB2YWx1ZVxuICAgICAgICAgICAgdmFyIHBpbW9kID0gaGVhZFtodl07XG4gICAgICAgICAgICBwcmV2W2ltb2RdID0gcGltb2Q7XG4gICAgICAgICAgICBoZWFkW2h2XSA9IGltb2Q7XG4gICAgICAgICAgICAvLyBXZSBhbHdheXMgc2hvdWxkIG1vZGlmeSBoZWFkIGFuZCBwcmV2LCBidXQgb25seSBhZGQgc3ltYm9scyBpZlxuICAgICAgICAgICAgLy8gdGhpcyBkYXRhIGlzIG5vdCB5ZXQgcHJvY2Vzc2VkIChcIndhaXRcIiBmb3Igd2FpdCBpbmRleClcbiAgICAgICAgICAgIGlmICh3aSA8PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gYnl0ZXMgcmVtYWluaW5nXG4gICAgICAgICAgICAgICAgdmFyIHJlbSA9IHMgLSBpO1xuICAgICAgICAgICAgICAgIGlmICgobGNfMSA+IDcwMDAgfHwgbGkgPiAyNDU3NikgJiYgcmVtID4gNDIzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHdibGsoZGF0LCB3LCAwLCBzeW1zLCBsZiwgZGYsIGViLCBsaSwgYnMsIGkgLSBicywgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgbGkgPSBsY18xID0gZWIgPSAwLCBicyA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMjg2OyArK2opXG4gICAgICAgICAgICAgICAgICAgICAgICBsZltqXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzA7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIGRmW2pdID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gIGxlbiAgICBkaXN0ICAgY2hhaW5cbiAgICAgICAgICAgICAgICB2YXIgbCA9IDIsIGQgPSAwLCBjaF8xID0gYywgZGlmID0gKGltb2QgLSBwaW1vZCkgJiAzMjc2NztcbiAgICAgICAgICAgICAgICBpZiAocmVtID4gMiAmJiBodiA9PSBoc2goaSAtIGRpZikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heG4gPSBNYXRoLm1pbihuLCByZW0pIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heGQgPSBNYXRoLm1pbigzMjc2NywgaSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1heCBwb3NzaWJsZSBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IGNhcHBlZCBhdCBkaWYgYmVjYXVzZSBkZWNvbXByZXNzb3JzIGltcGxlbWVudCBcInJvbGxpbmdcIiBpbmRleCBwb3B1bGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHZhciBtbCA9IE1hdGgubWluKDI1OCwgcmVtKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGRpZiA8PSBtYXhkICYmIC0tY2hfMSAmJiBpbW9kICE9IHBpbW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0W2kgKyBsXSA9PSBkYXRbaSArIGwgLSBkaWZdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5sID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgbmwgPCBtbCAmJiBkYXRbaSArIG5sXSA9PSBkYXRbaSArIG5sIC0gZGlmXTsgKytubClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubCA+IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG5sLCBkID0gZGlmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBicmVhayBvdXQgZWFybHkgd2hlbiB3ZSByZWFjaCBcIm5pY2VcIiAod2UgYXJlIHNhdGlzZmllZCBlbm91Z2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubCA+IG1heG4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93LCBmaW5kIHRoZSByYXJlc3QgMi1ieXRlIHNlcXVlbmNlIHdpdGhpbiB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlbmd0aCBvZiBsaXRlcmFscyBhbmQgc2VhcmNoIGZvciB0aGF0IGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11Y2ggZmFzdGVyIHRoYW4ganVzdCB1c2luZyB0aGUgc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1tZCA9IE1hdGgubWluKGRpZiwgbmwgLSAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1kID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtbWQ7ICsraikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpID0gKGkgLSBkaWYgKyBqICsgMzI3NjgpICYgMzI3Njc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHRpID0gcHJldlt0aV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2QgPSAodGkgLSBwdGkgKyAzMjc2OCkgJiAzMjc2NztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZCA+IG1kKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kID0gY2QsIHBpbW9kID0gdGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGUgcHJldmlvdXMgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIGltb2QgPSBwaW1vZCwgcGltb2QgPSBwcmV2W2ltb2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlmICs9IChpbW9kIC0gcGltb2QgKyAzMjc2OCkgJiAzMjc2NztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkIHdpbGwgYmUgbm9uemVybyBvbmx5IHdoZW4gYSBtYXRjaCB3YXMgZm91bmRcbiAgICAgICAgICAgICAgICBpZiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZSBib3RoIGRpc3QgYW5kIGxlbiBkYXRhIGluIG9uZSBVaW50MzJcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgaXMgcmVjb2duaXplZCBhcyBhIGxlbi9kaXN0IHdpdGggMjh0aCBiaXQgKDJeMjgpXG4gICAgICAgICAgICAgICAgICAgIHN5bXNbbGkrK10gPSAyNjg0MzU0NTYgfCAocmV2ZmxbbF0gPDwgMTgpIHwgcmV2ZmRbZF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW4gPSByZXZmbFtsXSAmIDMxLCBkaW4gPSByZXZmZFtkXSAmIDMxO1xuICAgICAgICAgICAgICAgICAgICBlYiArPSBmbGViW2xpbl0gKyBmZGViW2Rpbl07XG4gICAgICAgICAgICAgICAgICAgICsrbGZbMjU3ICsgbGluXTtcbiAgICAgICAgICAgICAgICAgICAgKytkZltkaW5dO1xuICAgICAgICAgICAgICAgICAgICB3aSA9IGkgKyBsO1xuICAgICAgICAgICAgICAgICAgICArK2xjXzE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzeW1zW2xpKytdID0gZGF0W2ldO1xuICAgICAgICAgICAgICAgICAgICArK2xmW2RhdFtpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBvcyA9IHdibGsoZGF0LCB3LCBsc3QsIHN5bXMsIGxmLCBkZiwgZWIsIGxpLCBicywgaSAtIGJzLCBwb3MpO1xuICAgICAgICAvLyB0aGlzIGlzIHRoZSBlYXNpZXN0IHdheSB0byBhdm9pZCBuZWVkaW5nIHRvIG1haW50YWluIHN0YXRlXG4gICAgICAgIGlmICghbHN0KVxuICAgICAgICAgICAgcG9zID0gd2ZibGsodywgcG9zLCBldCk7XG4gICAgfVxuICAgIHJldHVybiBzbGMobywgMCwgcHJlICsgc2hmdChwb3MpICsgcG9zdCk7XG59O1xuLy8gQ1JDMzIgdGFibGVcbnZhciBjcmN0ID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ID0gbmV3IHUzMigyNTYpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgICAgICAgdmFyIGMgPSBpLCBrID0gOTtcbiAgICAgICAgd2hpbGUgKC0taylcbiAgICAgICAgICAgIGMgPSAoKGMgJiAxKSAmJiAweEVEQjg4MzIwKSBeIChjID4+PiAxKTtcbiAgICAgICAgdFtpXSA9IGM7XG4gICAgfVxuICAgIHJldHVybiB0O1xufSkoKTtcbi8vIENSQzMyXG52YXIgY3JjID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjID0gMHhGRkZGRkZGRjtcbiAgICByZXR1cm4ge1xuICAgICAgICBwOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgLy8gY2xvc3VyZXMgaGF2ZSBhd2Z1bCBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgdmFyIGNyID0gYztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICBjciA9IGNyY3RbKGNyICYgMjU1KSBeIGRbaV1dIF4gKGNyID4+PiA4KTtcbiAgICAgICAgICAgIGMgPSBjcjtcbiAgICAgICAgfSxcbiAgICAgICAgZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYyBeIDB4RkZGRkZGRkY7IH1cbiAgICB9O1xufTtcbi8vIEFsZGVyMzJcbnZhciBhZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYSA9IDEsIGIgPSAwO1xuICAgIHJldHVybiB7XG4gICAgICAgIHA6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAvLyBjbG9zdXJlcyBoYXZlIGF3ZnVsIHBlcmZvcm1hbmNlXG4gICAgICAgICAgICB2YXIgbiA9IGEsIG0gPSBiO1xuICAgICAgICAgICAgdmFyIGwgPSBkLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpICE9IGw7KSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBNYXRoLm1pbihpICsgNTU1MiwgbCk7XG4gICAgICAgICAgICAgICAgZm9yICg7IGkgPCBlOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gZFtpXSwgbSArPSBuO1xuICAgICAgICAgICAgICAgIG4gJT0gNjU1MjEsIG0gJT0gNjU1MjE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhID0gbiwgYiA9IG07XG4gICAgICAgIH0sXG4gICAgICAgIGQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgoYSA+Pj4gOCkgPDwgMTYgfCAoYiAmIDI1NSkgPDwgOCB8IChiID4+PiA4KSkgKyAoKGEgJiAyNTUpIDw8IDIzKSAqIDI7IH1cbiAgICB9O1xufTtcbjtcbi8vIGRlZmxhdGUgd2l0aCBvcHRzXG52YXIgZG9wdCA9IGZ1bmN0aW9uIChkYXQsIG9wdCwgcHJlLCBwb3N0LCBzdCkge1xuICAgIHJldHVybiBkZmx0KGRhdCwgb3B0LmxldmVsID09IG51bGwgPyA2IDogb3B0LmxldmVsLCBvcHQubWVtID09IG51bGwgPyBNYXRoLmNlaWwoTWF0aC5tYXgoOCwgTWF0aC5taW4oMTMsIE1hdGgubG9nKGRhdC5sZW5ndGgpKSkgKiAxLjUpIDogKDEyICsgb3B0Lm1lbSksIHByZSwgcG9zdCwgIXN0KTtcbn07XG4vLyBXYWxtYXJ0IG9iamVjdCBzcHJlYWRcbnZhciBtcmcgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHZhciBvID0ge307XG4gICAgZm9yICh2YXIgayBpbiBhKVxuICAgICAgICBvW2tdID0gYVtrXTtcbiAgICBmb3IgKHZhciBrIGluIGIpXG4gICAgICAgIG9ba10gPSBiW2tdO1xuICAgIHJldHVybiBvO1xufTtcbi8vIHdvcmtlciBjbG9uZVxuLy8gVGhpcyBpcyBwb3NzaWJseSB0aGUgY3Jhemllc3QgcGFydCBvZiB0aGUgZW50aXJlIGNvZGViYXNlLCBkZXNwaXRlIGhvdyBzaW1wbGUgaXQgbWF5IHNlZW0uXG4vLyBUaGUgb25seSBwYXJhbWV0ZXIgdG8gdGhpcyBmdW5jdGlvbiBpcyBhIGNsb3N1cmUgdGhhdCByZXR1cm5zIGFuIGFycmF5IG9mIHZhcmlhYmxlcyBvdXRzaWRlIG9mIHRoZSBmdW5jdGlvbiBzY29wZS5cbi8vIFdlJ3JlIGdvaW5nIHRvIHRyeSB0byBmaWd1cmUgb3V0IHRoZSB2YXJpYWJsZSBuYW1lcyB1c2VkIGluIHRoZSBjbG9zdXJlIGFzIHN0cmluZ3MgYmVjYXVzZSB0aGF0IGlzIGNydWNpYWwgZm9yIHdvcmtlcml6YXRpb24uXG4vLyBXZSB3aWxsIHJldHVybiBhbiBvYmplY3QgbWFwcGluZyBvZiB0cnVlIHZhcmlhYmxlIG5hbWUgdG8gdmFsdWUgKGJhc2ljYWxseSwgdGhlIGN1cnJlbnQgc2NvcGUgYXMgYSBKUyBvYmplY3QpLlxuLy8gVGhlIHJlYXNvbiB3ZSBjYW4ndCBqdXN0IHVzZSB0aGUgb3JpZ2luYWwgdmFyaWFibGUgbmFtZXMgaXMgbWluaWZpZXJzIG1hbmdsaW5nIHRoZSB0b3BsZXZlbCBzY29wZS5cbi8vIFRoaXMgdG9vayBtZSB0aHJlZSB3ZWVrcyB0byBmaWd1cmUgb3V0IGhvdyB0byBkby5cbnZhciB3Y2xuID0gZnVuY3Rpb24gKGZuLCBmblN0ciwgdGQpIHtcbiAgICB2YXIgZHQgPSBmbigpO1xuICAgIHZhciBzdCA9IGZuLnRvU3RyaW5nKCk7XG4gICAgdmFyIGtzID0gc3Quc2xpY2Uoc3QuaW5kZXhPZignWycpICsgMSwgc3QubGFzdEluZGV4T2YoJ10nKSkucmVwbGFjZSgvIC9nLCAnJykuc3BsaXQoJywnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGR0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciB2ID0gZHRbaV0sIGsgPSBrc1tpXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2ID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGZuU3RyICs9ICc7JyArIGsgKyAnPSc7XG4gICAgICAgICAgICB2YXIgc3RfMSA9IHYudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICh2LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgIC8vIGZvciBnbG9iYWwgb2JqZWN0c1xuICAgICAgICAgICAgICAgIGlmIChzdF8xLmluZGV4T2YoJ1tuYXRpdmUgY29kZV0nKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3BJbmQgPSBzdF8xLmluZGV4T2YoJyAnLCA4KSArIDE7XG4gICAgICAgICAgICAgICAgICAgIGZuU3RyICs9IHN0XzEuc2xpY2Uoc3BJbmQsIHN0XzEuaW5kZXhPZignKCcsIHNwSW5kKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmblN0ciArPSBzdF8xO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0IGluIHYucHJvdG90eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm5TdHIgKz0gJzsnICsgayArICcucHJvdG90eXBlLicgKyB0ICsgJz0nICsgdi5wcm90b3R5cGVbdF0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZm5TdHIgKz0gc3RfMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0ZFtrXSA9IHY7XG4gICAgfVxuICAgIHJldHVybiBbZm5TdHIsIHRkXTtcbn07XG52YXIgY2ggPSBbXTtcbi8vIGNsb25lIGJ1ZnNcbnZhciBjYmZzID0gZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgdGwgPSBbXTtcbiAgICBmb3IgKHZhciBrIGluIHYpIHtcbiAgICAgICAgaWYgKHZba10gaW5zdGFuY2VvZiB1OCB8fCB2W2tdIGluc3RhbmNlb2YgdTE2IHx8IHZba10gaW5zdGFuY2VvZiB1MzIpXG4gICAgICAgICAgICB0bC5wdXNoKCh2W2tdID0gbmV3IHZba10uY29uc3RydWN0b3IodltrXSkpLmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiB0bDtcbn07XG4vLyB1c2UgYSB3b3JrZXIgdG8gZXhlY3V0ZSBjb2RlXG52YXIgd3JrciA9IGZ1bmN0aW9uIChmbnMsIGluaXQsIGlkLCBjYikge1xuICAgIHZhciBfYTtcbiAgICBpZiAoIWNoW2lkXSkge1xuICAgICAgICB2YXIgZm5TdHIgPSAnJywgdGRfMSA9IHt9LCBtID0gZm5zLmxlbmd0aCAtIDE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbTsgKytpKVxuICAgICAgICAgICAgX2EgPSB3Y2xuKGZuc1tpXSwgZm5TdHIsIHRkXzEpLCBmblN0ciA9IF9hWzBdLCB0ZF8xID0gX2FbMV07XG4gICAgICAgIGNoW2lkXSA9IHdjbG4oZm5zW21dLCBmblN0ciwgdGRfMSk7XG4gICAgfVxuICAgIHZhciB0ZCA9IG1yZyh7fSwgY2hbaWRdWzFdKTtcbiAgICByZXR1cm4gd2soY2hbaWRdWzBdICsgJztvbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7Zm9yKHZhciBrIGluIGUuZGF0YSlzZWxmW2tdPWUuZGF0YVtrXTtvbm1lc3NhZ2U9JyArIGluaXQudG9TdHJpbmcoKSArICd9JywgaWQsIHRkLCBjYmZzKHRkKSwgY2IpO1xufTtcbi8vIGJhc2UgYXN5bmMgaW5mbGF0ZSBmblxudmFyIGJJbmZsdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFt1OCwgdTE2LCB1MzIsIGZsZWIsIGZkZWIsIGNsaW0sIGZsLCBmZCwgZmxybSwgZmRybSwgcmV2LCBoTWFwLCBtYXgsIGJpdHMsIGJpdHMxNiwgc2hmdCwgc2xjLCBpbmZsdCwgaW5mbGF0ZVN5bmMsIHBiZiwgZ3U4XTsgfTtcbnZhciBiRGZsdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFt1OCwgdTE2LCB1MzIsIGZsZWIsIGZkZWIsIGNsaW0sIHJldmZsLCByZXZmZCwgZmxtLCBmbHQsIGZkbSwgZmR0LCByZXYsIGRlbywgZXQsIGhNYXAsIHdiaXRzLCB3Yml0czE2LCBoVHJlZSwgbG4sIGxjLCBjbGVuLCB3ZmJsaywgd2Jsaywgc2hmdCwgc2xjLCBkZmx0LCBkb3B0LCBkZWZsYXRlU3luYywgcGJmXTsgfTtcbi8vIGd6aXAgZXh0cmFcbnZhciBnemUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbZ3poLCBnemhsLCB3Ynl0ZXMsIGNyYywgY3JjdF07IH07XG4vLyBndW56aXAgZXh0cmFcbnZhciBndXplID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW2d6cywgZ3psXTsgfTtcbi8vIHpsaWIgZXh0cmFcbnZhciB6bGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbemxoLCB3Ynl0ZXMsIGFkbGVyXTsgfTtcbi8vIHVuemxpYiBleHRyYVxudmFyIHp1bGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbemx2XTsgfTtcbi8vIHBvc3QgYnVmXG52YXIgcGJmID0gZnVuY3Rpb24gKG1zZykgeyByZXR1cm4gcG9zdE1lc3NhZ2UobXNnLCBbbXNnLmJ1ZmZlcl0pOyB9O1xuLy8gZ2V0IHU4XG52YXIgZ3U4ID0gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgby5zaXplICYmIG5ldyB1OChvLnNpemUpOyB9O1xuLy8gYXN5bmMgaGVscGVyXG52YXIgY2JpZnkgPSBmdW5jdGlvbiAoZGF0LCBvcHRzLCBmbnMsIGluaXQsIGlkLCBjYikge1xuICAgIHZhciB3ID0gd3JrcihmbnMsIGluaXQsIGlkLCBmdW5jdGlvbiAoZXJyLCBkYXQpIHtcbiAgICAgICAgdy50ZXJtaW5hdGUoKTtcbiAgICAgICAgY2IoZXJyLCBkYXQpO1xuICAgIH0pO1xuICAgIGlmICghb3B0cy5jb25zdW1lKVxuICAgICAgICBkYXQgPSBuZXcgdTgoZGF0KTtcbiAgICB3LnBvc3RNZXNzYWdlKFtkYXQsIG9wdHNdLCBbZGF0LmJ1ZmZlcl0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHcudGVybWluYXRlKCk7IH07XG59O1xuLy8gYXV0byBzdHJlYW1cbnZhciBhc3RybSA9IGZ1bmN0aW9uIChzdHJtKSB7XG4gICAgc3RybS5vbmRhdGEgPSBmdW5jdGlvbiAoZGF0LCBmaW5hbCkgeyByZXR1cm4gcG9zdE1lc3NhZ2UoW2RhdCwgZmluYWxdLCBbZGF0LmJ1ZmZlcl0pOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHN0cm0ucHVzaChldi5kYXRhWzBdLCBldi5kYXRhWzFdKTsgfTtcbn07XG4vLyBhc3luYyBzdHJlYW0gYXR0YWNoXG52YXIgYXN0cm1pZnkgPSBmdW5jdGlvbiAoZm5zLCBzdHJtLCBvcHRzLCBpbml0LCBpZCkge1xuICAgIHZhciB0O1xuICAgIHZhciB3ID0gd3JrcihmbnMsIGluaXQsIGlkLCBmdW5jdGlvbiAoZXJyLCBkYXQpIHtcbiAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgIHcudGVybWluYXRlKCksIHN0cm0ub25kYXRhLmNhbGwoc3RybSwgZXJyKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZGF0WzFdKVxuICAgICAgICAgICAgICAgIHcudGVybWluYXRlKCk7XG4gICAgICAgICAgICBzdHJtLm9uZGF0YS5jYWxsKHN0cm0sIGVyciwgZGF0WzBdLCBkYXRbMV0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdy5wb3N0TWVzc2FnZShvcHRzKTtcbiAgICBzdHJtLnB1c2ggPSBmdW5jdGlvbiAoZCwgZikge1xuICAgICAgICBpZiAodClcbiAgICAgICAgICAgIHRocm93ICdzdHJlYW0gZmluaXNoZWQnO1xuICAgICAgICBpZiAoIXN0cm0ub25kYXRhKVxuICAgICAgICAgICAgdGhyb3cgJ25vIHN0cmVhbSBoYW5kbGVyJztcbiAgICAgICAgdy5wb3N0TWVzc2FnZShbZCwgdCA9IGZdLCBbZC5idWZmZXJdKTtcbiAgICB9O1xuICAgIHN0cm0udGVybWluYXRlID0gZnVuY3Rpb24gKCkgeyB3LnRlcm1pbmF0ZSgpOyB9O1xufTtcbi8vIHJlYWQgMiBieXRlc1xudmFyIGIyID0gZnVuY3Rpb24gKGQsIGIpIHsgcmV0dXJuIGRbYl0gfCAoZFtiICsgMV0gPDwgOCk7IH07XG4vLyByZWFkIDQgYnl0ZXNcbnZhciBiNCA9IGZ1bmN0aW9uIChkLCBiKSB7IHJldHVybiAoZFtiXSB8IChkW2IgKyAxXSA8PCA4KSB8IChkW2IgKyAyXSA8PCAxNikpICsgKGRbYiArIDNdIDw8IDIzKSAqIDI7IH07XG4vLyB3cml0ZSBieXRlc1xudmFyIHdieXRlcyA9IGZ1bmN0aW9uIChkLCBiLCB2KSB7XG4gICAgZm9yICg7IHY7ICsrYilcbiAgICAgICAgZFtiXSA9IHYsIHYgPj4+PSA4O1xufTtcbi8vIGd6aXAgaGVhZGVyXG52YXIgZ3poID0gZnVuY3Rpb24gKGMsIG8pIHtcbiAgICB2YXIgZm4gPSBvLmZpbGVuYW1lO1xuICAgIGNbMF0gPSAzMSwgY1sxXSA9IDEzOSwgY1syXSA9IDgsIGNbOF0gPSBvLmxldmVsIDwgMiA/IDQgOiBvLmxldmVsID09IDkgPyAyIDogMCwgY1s5XSA9IDM7IC8vIGFzc3VtZSBVbml4XG4gICAgaWYgKG8ubXRpbWUgIT0gMClcbiAgICAgICAgd2J5dGVzKGMsIDQsIE1hdGguZmxvb3IobmV3IERhdGUoby5tdGltZSB8fCBEYXRlLm5vdygpKSAvIDEwMDApKTtcbiAgICBpZiAoZm4pIHtcbiAgICAgICAgY1szXSA9IDg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGZuLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgY1tpICsgMTBdID0gZm4uY2hhckNvZGVBdChpKTtcbiAgICB9XG59O1xuLy8gZ3ppcCBmb290ZXI6IC04IHRvIC00ID0gQ1JDLCAtNCB0byAtMCBpcyBsZW5ndGhcbi8vIGd6aXAgc3RhcnRcbnZhciBnenMgPSBmdW5jdGlvbiAoZCkge1xuICAgIGlmIChkWzBdICE9IDMxIHx8IGRbMV0gIT0gMTM5IHx8IGRbMl0gIT0gOClcbiAgICAgICAgdGhyb3cgJ2ludmFsaWQgZ3ppcCBkYXRhJztcbiAgICB2YXIgZmxnID0gZFszXTtcbiAgICB2YXIgc3QgPSAxMDtcbiAgICBpZiAoZmxnICYgNClcbiAgICAgICAgc3QgKz0gZFsxMF0gfCAoZFsxMV0gPDwgOCkgKyAyO1xuICAgIGZvciAodmFyIHpzID0gKGZsZyA+PiAzICYgMSkgKyAoZmxnID4+IDQgJiAxKTsgenMgPiAwOyB6cyAtPSAhZFtzdCsrXSlcbiAgICAgICAgO1xuICAgIHJldHVybiBzdCArIChmbGcgJiAyKTtcbn07XG4vLyBnemlwIGxlbmd0aFxudmFyIGd6bCA9IGZ1bmN0aW9uIChkKSB7XG4gICAgdmFyIGwgPSBkLmxlbmd0aDtcbiAgICByZXR1cm4gKGRbbCAtIDRdIHwgZFtsIC0gM10gPDwgOCB8IGRbbCAtIDJdIDw8IDE2KSArICgyICogKGRbbCAtIDFdIDw8IDIzKSk7XG59O1xuLy8gZ3ppcCBoZWFkZXIgbGVuZ3RoXG52YXIgZ3pobCA9IGZ1bmN0aW9uIChvKSB7IHJldHVybiAxMCArICgoby5maWxlbmFtZSAmJiAoby5maWxlbmFtZS5sZW5ndGggKyAxKSkgfHwgMCk7IH07XG4vLyB6bGliIGhlYWRlclxudmFyIHpsaCA9IGZ1bmN0aW9uIChjLCBvKSB7XG4gICAgdmFyIGx2ID0gby5sZXZlbCwgZmwgPSBsdiA9PSAwID8gMCA6IGx2IDwgNiA/IDEgOiBsdiA9PSA5ID8gMyA6IDI7XG4gICAgY1swXSA9IDEyMCwgY1sxXSA9IChmbCA8PCA2KSB8IChmbCA/ICgzMiAtIDIgKiBmbCkgOiAxKTtcbn07XG4vLyB6bGliIHZhbGlkXG52YXIgemx2ID0gZnVuY3Rpb24gKGQpIHtcbiAgICBpZiAoKGRbMF0gJiAxNSkgIT0gOCB8fCAoZFswXSA+Pj4gNCkgPiA3IHx8ICgoZFswXSA8PCA4IHwgZFsxXSkgJSAzMSkpXG4gICAgICAgIHRocm93ICdpbnZhbGlkIHpsaWIgZGF0YSc7XG4gICAgaWYgKGRbMV0gJiAzMilcbiAgICAgICAgdGhyb3cgJ2ludmFsaWQgemxpYiBkYXRhOiBwcmVzZXQgZGljdGlvbmFyaWVzIG5vdCBzdXBwb3J0ZWQnO1xufTtcbmZ1bmN0aW9uIEFzeW5jQ21wU3RybShvcHRzLCBjYikge1xuICAgIGlmICghY2IgJiYgdHlwZW9mIG9wdHMgPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICByZXR1cm4gb3B0cztcbn1cbi8vIHpsaWIgZm9vdGVyOiAtNCB0byAtMCBpcyBBZGxlcjMyXG4vKipcbiAqIFN0cmVhbWluZyBERUZMQVRFIGNvbXByZXNzaW9uXG4gKi9cbnZhciBEZWZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlZmxhdGUob3B0cywgY2IpIHtcbiAgICAgICAgaWYgKCFjYiAmJiB0eXBlb2Ygb3B0cyA9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgICAgIHRoaXMubyA9IG9wdHMgfHwge307XG4gICAgfVxuICAgIERlZmxhdGUucHJvdG90eXBlLnAgPSBmdW5jdGlvbiAoYywgZikge1xuICAgICAgICB0aGlzLm9uZGF0YShkb3B0KGMsIHRoaXMubywgMCwgMCwgIWYpLCBmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIGRlZmxhdGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIERlZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIGlmICh0aGlzLmQpXG4gICAgICAgICAgICB0aHJvdyAnc3RyZWFtIGZpbmlzaGVkJztcbiAgICAgICAgaWYgKCF0aGlzLm9uZGF0YSlcbiAgICAgICAgICAgIHRocm93ICdubyBzdHJlYW0gaGFuZGxlcic7XG4gICAgICAgIHRoaXMuZCA9IGZpbmFsO1xuICAgICAgICB0aGlzLnAoY2h1bmssIGZpbmFsIHx8IGZhbHNlKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWZsYXRlO1xufSgpKTtcbmV4cG9ydCB7IERlZmxhdGUgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBERUZMQVRFIGNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY0RlZmxhdGUgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXN5bmNEZWZsYXRlKG9wdHMsIGNiKSB7XG4gICAgICAgIGFzdHJtaWZ5KFtcbiAgICAgICAgICAgIGJEZmx0LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBEZWZsYXRlXTsgfVxuICAgICAgICBdLCB0aGlzLCBBc3luY0NtcFN0cm0uY2FsbCh0aGlzLCBvcHRzLCBjYiksIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgdmFyIHN0cm0gPSBuZXcgRGVmbGF0ZShldi5kYXRhKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA2KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jRGVmbGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBBc3luY0RlZmxhdGUgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJEZmx0LFxuICAgIF0sIGZ1bmN0aW9uIChldikgeyByZXR1cm4gcGJmKGRlZmxhdGVTeW5jKGV2LmRhdGFbMF0sIGV2LmRhdGFbMV0pKTsgfSwgMCwgY2IpO1xufVxuLyoqXG4gKiBDb21wcmVzc2VzIGRhdGEgd2l0aCBERUZMQVRFIHdpdGhvdXQgYW55IHdyYXBwZXJcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGNvbXByZXNzXG4gKiBAcGFyYW0gb3B0cyBUaGUgY29tcHJlc3Npb24gb3B0aW9uc1xuICogQHJldHVybnMgVGhlIGRlZmxhdGVkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVTeW5jKGRhdGEsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7IG9wdHMgPSB7fTsgfVxuICAgIHJldHVybiBkb3B0KGRhdGEsIG9wdHMsIDAsIDApO1xufVxuLyoqXG4gKiBTdHJlYW1pbmcgREVGTEFURSBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBJbmZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5mbGF0aW9uIHN0cmVhbVxuICAgICAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuZXZlciBkYXRhIGlzIGluZmxhdGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW5mbGF0ZShjYikge1xuICAgICAgICB0aGlzLnMgPSB7fTtcbiAgICAgICAgdGhpcy5wID0gbmV3IHU4KDApO1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgIH1cbiAgICBJbmZsYXRlLnByb3RvdHlwZS5lID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgaWYgKHRoaXMuZClcbiAgICAgICAgICAgIHRocm93ICdzdHJlYW0gZmluaXNoZWQnO1xuICAgICAgICBpZiAoIXRoaXMub25kYXRhKVxuICAgICAgICAgICAgdGhyb3cgJ25vIHN0cmVhbSBoYW5kbGVyJztcbiAgICAgICAgdmFyIGwgPSB0aGlzLnAubGVuZ3RoO1xuICAgICAgICB2YXIgbiA9IG5ldyB1OChsICsgYy5sZW5ndGgpO1xuICAgICAgICBuLnNldCh0aGlzLnApLCBuLnNldChjLCBsKSwgdGhpcy5wID0gbjtcbiAgICB9O1xuICAgIEluZmxhdGUucHJvdG90eXBlLmMgPSBmdW5jdGlvbiAoZmluYWwpIHtcbiAgICAgICAgdGhpcy5kID0gdGhpcy5zLmkgPSBmaW5hbCB8fCBmYWxzZTtcbiAgICAgICAgdmFyIGJ0cyA9IHRoaXMucy5iO1xuICAgICAgICB2YXIgZHQgPSBpbmZsdCh0aGlzLnAsIHRoaXMubywgdGhpcy5zKTtcbiAgICAgICAgdGhpcy5vbmRhdGEoc2xjKGR0LCBidHMsIHRoaXMucy5iKSwgdGhpcy5kKTtcbiAgICAgICAgdGhpcy5vID0gc2xjKGR0LCB0aGlzLnMuYiAtIDMyNzY4KSwgdGhpcy5zLmIgPSB0aGlzLm8ubGVuZ3RoO1xuICAgICAgICB0aGlzLnAgPSBzbGModGhpcy5wLCAodGhpcy5zLnAgLyA4KSA+PiAwKSwgdGhpcy5zLnAgJj0gNztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIGluZmxhdGVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgZmluYWwgY2h1bmtcbiAgICAgKi9cbiAgICBJbmZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICB0aGlzLmUoY2h1bmspLCB0aGlzLmMoZmluYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIEluZmxhdGU7XG59KCkpO1xuZXhwb3J0IHsgSW5mbGF0ZSB9O1xuLyoqXG4gKiBBc3luY2hyb25vdXMgc3RyZWFtaW5nIERFRkxBVEUgZGVjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNJbmZsYXRlID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmNocm9ub3VzIGluZmxhdGlvbiBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBkZWZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jSW5mbGF0ZShjYikge1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiSW5mbHQsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbYXN0cm0sIEluZmxhdGVdOyB9XG4gICAgICAgIF0sIHRoaXMsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IEluZmxhdGUoKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA3KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jSW5mbGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBBc3luY0luZmxhdGUgfTtcbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJJbmZsdFxuICAgIF0sIGZ1bmN0aW9uIChldikgeyByZXR1cm4gcGJmKGluZmxhdGVTeW5jKGV2LmRhdGFbMF0sIGd1OChldi5kYXRhWzFdKSkpOyB9LCAxLCBjYik7XG59XG4vKipcbiAqIEV4cGFuZHMgREVGTEFURSBkYXRhIHdpdGggbm8gd3JhcHBlclxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gZGVjb21wcmVzc1xuICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0ZSB0aGUgZGF0YS4gU2F2ZXMgbWVtb3J5IGlmIHlvdSBrbm93IHRoZSBkZWNvbXByZXNzZWQgc2l6ZSBhbmQgcHJvdmlkZSBhbiBvdXRwdXQgYnVmZmVyIG9mIHRoYXQgbGVuZ3RoLlxuICogQHJldHVybnMgVGhlIGRlY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlU3luYyhkYXRhLCBvdXQpIHtcbiAgICByZXR1cm4gaW5mbHQoZGF0YSwgb3V0KTtcbn1cbi8vIGJlZm9yZSB5b3UgeWVsbCBhdCBtZSBmb3Igbm90IGp1c3QgdXNpbmcgZXh0ZW5kcywgbXkgcmVhc29uIGlzIHRoYXQgVFMgaW5oZXJpdGFuY2UgaXMgaGFyZCB0byB3b3JrZXJpemUuXG4vKipcbiAqIFN0cmVhbWluZyBHWklQIGNvbXByZXNzaW9uXG4gKi9cbnZhciBHemlwID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEd6aXAob3B0cywgY2IpIHtcbiAgICAgICAgdGhpcy5jID0gY3JjKCk7XG4gICAgICAgIHRoaXMubCA9IDA7XG4gICAgICAgIHRoaXMudiA9IDE7XG4gICAgICAgIERlZmxhdGUuY2FsbCh0aGlzLCBvcHRzLCBjYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIEdaSVBwZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgR3ppcC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgRGVmbGF0ZS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICBHemlwLnByb3RvdHlwZS5wID0gZnVuY3Rpb24gKGMsIGYpIHtcbiAgICAgICAgdGhpcy5jLnAoYyk7XG4gICAgICAgIHRoaXMubCArPSBjLmxlbmd0aDtcbiAgICAgICAgdmFyIHJhdyA9IGRvcHQoYywgdGhpcy5vLCB0aGlzLnYgJiYgZ3pobCh0aGlzLm8pLCBmICYmIDgsICFmKTtcbiAgICAgICAgaWYgKHRoaXMudilcbiAgICAgICAgICAgIGd6aChyYXcsIHRoaXMubyksIHRoaXMudiA9IDA7XG4gICAgICAgIGlmIChmKVxuICAgICAgICAgICAgd2J5dGVzKHJhdywgcmF3Lmxlbmd0aCAtIDgsIHRoaXMuYy5kKCkpLCB3Ynl0ZXMocmF3LCByYXcubGVuZ3RoIC0gNCwgdGhpcy5sKTtcbiAgICAgICAgdGhpcy5vbmRhdGEocmF3LCBmKTtcbiAgICB9O1xuICAgIHJldHVybiBHemlwO1xufSgpKTtcbmV4cG9ydCB7IEd6aXAgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBHWklQIGNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY0d6aXAgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXN5bmNHemlwKG9wdHMsIGNiKSB7XG4gICAgICAgIGFzdHJtaWZ5KFtcbiAgICAgICAgICAgIGJEZmx0LFxuICAgICAgICAgICAgZ3plLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBEZWZsYXRlLCBHemlwXTsgfVxuICAgICAgICBdLCB0aGlzLCBBc3luY0NtcFN0cm0uY2FsbCh0aGlzLCBvcHRzLCBjYiksIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgdmFyIHN0cm0gPSBuZXcgR3ppcChldi5kYXRhKTtcbiAgICAgICAgICAgIG9ubWVzc2FnZSA9IGFzdHJtKHN0cm0pO1xuICAgICAgICB9LCA4KTtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jR3ppcDtcbn0oKSk7XG5leHBvcnQgeyBBc3luY0d6aXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBnemlwKGRhdGEsIG9wdHMsIGNiKSB7XG4gICAgaWYgKCFjYilcbiAgICAgICAgY2IgPSBvcHRzLCBvcHRzID0ge307XG4gICAgaWYgKHR5cGVvZiBjYiAhPSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyAnbm8gY2FsbGJhY2snO1xuICAgIHJldHVybiBjYmlmeShkYXRhLCBvcHRzLCBbXG4gICAgICAgIGJEZmx0LFxuICAgICAgICBnemUsXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtnemlwU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihnemlwU3luYyhldi5kYXRhWzBdLCBldi5kYXRhWzFdKSk7IH0sIDIsIGNiKTtcbn1cbi8qKlxuICogQ29tcHJlc3NlcyBkYXRhIHdpdGggR1pJUFxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gY29tcHJlc3NcbiAqIEBwYXJhbSBvcHRzIFRoZSBjb21wcmVzc2lvbiBvcHRpb25zXG4gKiBAcmV0dXJucyBUaGUgZ3ppcHBlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnemlwU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICB2YXIgYyA9IGNyYygpLCBsID0gZGF0YS5sZW5ndGg7XG4gICAgYy5wKGRhdGEpO1xuICAgIHZhciBkID0gZG9wdChkYXRhLCBvcHRzLCBnemhsKG9wdHMpLCA4KSwgcyA9IGQubGVuZ3RoO1xuICAgIHJldHVybiBnemgoZCwgb3B0cyksIHdieXRlcyhkLCBzIC0gOCwgYy5kKCkpLCB3Ynl0ZXMoZCwgcyAtIDQsIGwpLCBkO1xufVxuLyoqXG4gKiBTdHJlYW1pbmcgR1pJUCBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBHdW56aXAgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIEdVTlpJUCBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBpbmZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEd1bnppcChjYikge1xuICAgICAgICB0aGlzLnYgPSAxO1xuICAgICAgICBJbmZsYXRlLmNhbGwodGhpcywgY2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBHVU5aSVBwZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgR3VuemlwLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBJbmZsYXRlLnByb3RvdHlwZS5lLmNhbGwodGhpcywgY2h1bmspO1xuICAgICAgICBpZiAodGhpcy52KSB7XG4gICAgICAgICAgICB2YXIgcyA9IGd6cyh0aGlzLnApO1xuICAgICAgICAgICAgaWYgKHMgPj0gdGhpcy5wLmxlbmd0aCAmJiAhZmluYWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5wID0gdGhpcy5wLnN1YmFycmF5KHMpLCB0aGlzLnYgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPCA4KVxuICAgICAgICAgICAgICAgIHRocm93ICdpbnZhbGlkIGd6aXAgc3RyZWFtJztcbiAgICAgICAgICAgIHRoaXMucCA9IHRoaXMucC5zdWJhcnJheSgwLCAtOCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbmVjZXNzYXJ5IHRvIHByZXZlbnQgVFMgZnJvbSB1c2luZyB0aGUgY2xvc3VyZSB2YWx1ZVxuICAgICAgICAvLyBUaGlzIGFsbG93cyBmb3Igd29ya2VyaXphdGlvbiB0byBmdW5jdGlvbiBjb3JyZWN0bHlcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuYy5jYWxsKHRoaXMsIGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBHdW56aXA7XG59KCkpO1xuZXhwb3J0IHsgR3VuemlwIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgR1pJUCBkZWNvbXByZXNzaW9uXG4gKi9cbnZhciBBc3luY0d1bnppcCA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBHVU5aSVAgc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVmbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY0d1bnppcChjYikge1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiSW5mbHQsXG4gICAgICAgICAgICBndXplLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW2FzdHJtLCBJbmZsYXRlLCBHdW56aXBdOyB9XG4gICAgICAgIF0sIHRoaXMsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IEd1bnppcCgpO1xuICAgICAgICAgICAgb25tZXNzYWdlID0gYXN0cm0oc3RybSk7XG4gICAgICAgIH0sIDkpO1xuICAgIH1cbiAgICByZXR1cm4gQXN5bmNHdW56aXA7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNHdW56aXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBndW56aXAoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIGNiaWZ5KGRhdGEsIG9wdHMsIFtcbiAgICAgICAgYkluZmx0LFxuICAgICAgICBndXplLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbZ3VuemlwU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZihndW56aXBTeW5jKGV2LmRhdGFbMF0pKTsgfSwgMywgY2IpO1xufVxuLyoqXG4gKiBFeHBhbmRzIEdaSVAgZGF0YVxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gZGVjb21wcmVzc1xuICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0ZSB0aGUgZGF0YS4gR1pJUCBhbHJlYWR5IGVuY29kZXMgdGhlIG91dHB1dCBzaXplLCBzbyBwcm92aWRpbmcgdGhpcyBkb2Vzbid0IHNhdmUgbWVtb3J5LlxuICogQHJldHVybnMgVGhlIGRlY29tcHJlc3NlZCB2ZXJzaW9uIG9mIHRoZSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBndW56aXBTeW5jKGRhdGEsIG91dCkge1xuICAgIHJldHVybiBpbmZsdChkYXRhLnN1YmFycmF5KGd6cyhkYXRhKSwgLTgpLCBvdXQgfHwgbmV3IHU4KGd6bChkYXRhKSkpO1xufVxuLyoqXG4gKiBTdHJlYW1pbmcgWmxpYiBjb21wcmVzc2lvblxuICovXG52YXIgWmxpYiA9IC8qI19fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBabGliKG9wdHMsIGNiKSB7XG4gICAgICAgIHRoaXMuYyA9IGFkbGVyKCk7XG4gICAgICAgIHRoaXMudiA9IDE7XG4gICAgICAgIERlZmxhdGUuY2FsbCh0aGlzLCBvcHRzLCBjYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1c2hlcyBhIGNodW5rIHRvIGJlIHpsaWJiZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgWmxpYi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgRGVmbGF0ZS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICBabGliLnByb3RvdHlwZS5wID0gZnVuY3Rpb24gKGMsIGYpIHtcbiAgICAgICAgdGhpcy5jLnAoYyk7XG4gICAgICAgIHZhciByYXcgPSBkb3B0KGMsIHRoaXMubywgdGhpcy52ICYmIDIsIGYgJiYgNCwgIWYpO1xuICAgICAgICBpZiAodGhpcy52KVxuICAgICAgICAgICAgemxoKHJhdywgdGhpcy5vKSwgdGhpcy52ID0gMDtcbiAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICB3Ynl0ZXMocmF3LCByYXcubGVuZ3RoIC0gNCwgdGhpcy5jLmQoKSk7XG4gICAgICAgIHRoaXMub25kYXRhKHJhdywgZik7XG4gICAgfTtcbiAgICByZXR1cm4gWmxpYjtcbn0oKSk7XG5leHBvcnQgeyBabGliIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgWmxpYiBjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNabGliID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFzeW5jWmxpYihvcHRzLCBjYikge1xuICAgICAgICBhc3RybWlmeShbXG4gICAgICAgICAgICBiRGZsdCxcbiAgICAgICAgICAgIHpsZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFthc3RybSwgRGVmbGF0ZSwgWmxpYl07IH1cbiAgICAgICAgXSwgdGhpcywgQXN5bmNDbXBTdHJtLmNhbGwodGhpcywgb3B0cywgY2IpLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBzdHJtID0gbmV3IFpsaWIoZXYuZGF0YSk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgMTApO1xuICAgIH1cbiAgICByZXR1cm4gQXN5bmNabGliO1xufSgpKTtcbmV4cG9ydCB7IEFzeW5jWmxpYiB9O1xuZXhwb3J0IGZ1bmN0aW9uIHpsaWIoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIGNiaWZ5KGRhdGEsIG9wdHMsIFtcbiAgICAgICAgYkRmbHQsXG4gICAgICAgIHpsZSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gW3psaWJTeW5jXTsgfVxuICAgIF0sIGZ1bmN0aW9uIChldikgeyByZXR1cm4gcGJmKHpsaWJTeW5jKGV2LmRhdGFbMF0sIGV2LmRhdGFbMV0pKTsgfSwgNCwgY2IpO1xufVxuLyoqXG4gKiBDb21wcmVzcyBkYXRhIHdpdGggWmxpYlxuICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gY29tcHJlc3NcbiAqIEBwYXJhbSBvcHRzIFRoZSBjb21wcmVzc2lvbiBvcHRpb25zXG4gKiBAcmV0dXJucyBUaGUgemxpYi1jb21wcmVzc2VkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpsaWJTeW5jKGRhdGEsIG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7IG9wdHMgPSB7fTsgfVxuICAgIHZhciBhID0gYWRsZXIoKTtcbiAgICBhLnAoZGF0YSk7XG4gICAgdmFyIGQgPSBkb3B0KGRhdGEsIG9wdHMsIDIsIDQpO1xuICAgIHJldHVybiB6bGgoZCwgb3B0cyksIHdieXRlcyhkLCBkLmxlbmd0aCAtIDQsIGEuZCgpKSwgZDtcbn1cbi8qKlxuICogU3RyZWFtaW5nIFpsaWIgZGVjb21wcmVzc2lvblxuICovXG52YXIgVW56bGliID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBabGliIGRlY29tcHJlc3Npb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgaW5mbGF0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBVbnpsaWIoY2IpIHtcbiAgICAgICAgdGhpcy52ID0gMTtcbiAgICAgICAgSW5mbGF0ZS5jYWxsKHRoaXMsIGNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgdW56bGliYmVkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIFVuemxpYi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZmluYWwpIHtcbiAgICAgICAgSW5mbGF0ZS5wcm90b3R5cGUuZS5jYWxsKHRoaXMsIGNodW5rKTtcbiAgICAgICAgaWYgKHRoaXMudikge1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPCAyICYmICFmaW5hbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnAgPSB0aGlzLnAuc3ViYXJyYXkoMiksIHRoaXMudiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbmFsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wLmxlbmd0aCA8IDQpXG4gICAgICAgICAgICAgICAgdGhyb3cgJ2ludmFsaWQgemxpYiBzdHJlYW0nO1xuICAgICAgICAgICAgdGhpcy5wID0gdGhpcy5wLnN1YmFycmF5KDAsIC00KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBuZWNlc3NhcnkgdG8gcHJldmVudCBUUyBmcm9tIHVzaW5nIHRoZSBjbG9zdXJlIHZhbHVlXG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIGZvciB3b3JrZXJpemF0aW9uIHRvIGZ1bmN0aW9uIGNvcnJlY3RseVxuICAgICAgICBJbmZsYXRlLnByb3RvdHlwZS5jLmNhbGwodGhpcywgZmluYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIFVuemxpYjtcbn0oKSk7XG5leHBvcnQgeyBVbnpsaWIgfTtcbi8qKlxuICogQXN5bmNocm9ub3VzIHN0cmVhbWluZyBabGliIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIEFzeW5jVW56bGliID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmNocm9ub3VzIFpsaWIgZGVjb21wcmVzc2lvbiBzdHJlYW1cbiAgICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBkZWZsYXRlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jVW56bGliKGNiKSB7XG4gICAgICAgIHRoaXMub25kYXRhID0gY2I7XG4gICAgICAgIGFzdHJtaWZ5KFtcbiAgICAgICAgICAgIGJJbmZsdCxcbiAgICAgICAgICAgIHp1bGUsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbYXN0cm0sIEluZmxhdGUsIFVuemxpYl07IH1cbiAgICAgICAgXSwgdGhpcywgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0cm0gPSBuZXcgVW56bGliKCk7XG4gICAgICAgICAgICBvbm1lc3NhZ2UgPSBhc3RybShzdHJtKTtcbiAgICAgICAgfSwgMTEpO1xuICAgIH1cbiAgICByZXR1cm4gQXN5bmNVbnpsaWI7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNVbnpsaWIgfTtcbmV4cG9ydCBmdW5jdGlvbiB1bnpsaWIoZGF0YSwgb3B0cywgY2IpIHtcbiAgICBpZiAoIWNiKVxuICAgICAgICBjYiA9IG9wdHMsIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgcmV0dXJuIGNiaWZ5KGRhdGEsIG9wdHMsIFtcbiAgICAgICAgYkluZmx0LFxuICAgICAgICB6dWxlLFxuICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBbdW56bGliU3luY107IH1cbiAgICBdLCBmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHBiZih1bnpsaWJTeW5jKGV2LmRhdGFbMF0sIGd1OChldi5kYXRhWzFdKSkpOyB9LCA1LCBjYik7XG59XG4vKipcbiAqIEV4cGFuZHMgWmxpYiBkYXRhXG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBkZWNvbXByZXNzXG4gKiBAcGFyYW0gb3V0IFdoZXJlIHRvIHdyaXRlIHRoZSBkYXRhLiBTYXZlcyBtZW1vcnkgaWYgeW91IGtub3cgdGhlIGRlY29tcHJlc3NlZCBzaXplIGFuZCBwcm92aWRlIGFuIG91dHB1dCBidWZmZXIgb2YgdGhhdCBsZW5ndGguXG4gKiBAcmV0dXJucyBUaGUgZGVjb21wcmVzc2VkIHZlcnNpb24gb2YgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuemxpYlN5bmMoZGF0YSwgb3V0KSB7XG4gICAgcmV0dXJuIGluZmx0KCh6bHYoZGF0YSksIGRhdGEuc3ViYXJyYXkoMiwgLTQpKSwgb3V0KTtcbn1cbi8vIERlZmF1bHQgYWxnb3JpdGhtIGZvciBjb21wcmVzc2lvbiAodXNlZCBiZWNhdXNlIGhhdmluZyBhIGtub3duIG91dHB1dCBzaXplIGFsbG93cyBmYXN0ZXIgZGVjb21wcmVzc2lvbilcbmV4cG9ydCB7IGd6aXAgYXMgY29tcHJlc3MsIEFzeW5jR3ppcCBhcyBBc3luY0NvbXByZXNzIH07XG4vLyBEZWZhdWx0IGFsZ29yaXRobSBmb3IgY29tcHJlc3Npb24gKHVzZWQgYmVjYXVzZSBoYXZpbmcgYSBrbm93biBvdXRwdXQgc2l6ZSBhbGxvd3MgZmFzdGVyIGRlY29tcHJlc3Npb24pXG5leHBvcnQgeyBnemlwU3luYyBhcyBjb21wcmVzc1N5bmMsIEd6aXAgYXMgQ29tcHJlc3MgfTtcbi8qKlxuICogU3RyZWFtaW5nIEdaSVAsIFpsaWIsIG9yIHJhdyBERUZMQVRFIGRlY29tcHJlc3Npb25cbiAqL1xudmFyIERlY29tcHJlc3MgPSAvKiNfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlY29tcHJlc3Npb24gc3RyZWFtXG4gICAgICogQHBhcmFtIGNiIFRoZSBjYWxsYmFjayB0byBjYWxsIHdoZW5ldmVyIGRhdGEgaXMgZGVjb21wcmVzc2VkXG4gICAgICovXG4gICAgZnVuY3Rpb24gRGVjb21wcmVzcyhjYikge1xuICAgICAgICB0aGlzLkcgPSBHdW56aXA7XG4gICAgICAgIHRoaXMuSSA9IEluZmxhdGU7XG4gICAgICAgIHRoaXMuWiA9IFVuemxpYjtcbiAgICAgICAgdGhpcy5vbmRhdGEgPSBjYjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaGVzIGEgY2h1bmsgdG8gYmUgZGVjb21wcmVzc2VkXG4gICAgICogQHBhcmFtIGNodW5rIFRoZSBjaHVuayB0byBwdXNoXG4gICAgICogQHBhcmFtIGZpbmFsIFdoZXRoZXIgdGhpcyBpcyB0aGUgbGFzdCBjaHVua1xuICAgICAqL1xuICAgIERlY29tcHJlc3MucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGZpbmFsKSB7XG4gICAgICAgIGlmICghdGhpcy5vbmRhdGEpXG4gICAgICAgICAgICB0aHJvdyAnbm8gc3RyZWFtIGhhbmRsZXInO1xuICAgICAgICBpZiAoIXRoaXMucykge1xuICAgICAgICAgICAgaWYgKHRoaXMucCAmJiB0aGlzLnAubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBuZXcgdTgodGhpcy5wLmxlbmd0aCArIGNodW5rLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgbi5zZXQodGhpcy5wKSwgbi5zZXQoY2h1bmssIHRoaXMucC5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMucCA9IGNodW5rO1xuICAgICAgICAgICAgaWYgKHRoaXMucC5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHsgX3RoaXNfMS5vbmRhdGEuYXBwbHkoX3RoaXNfMSwgYXJndW1lbnRzKTsgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnMgPSAodGhpcy5wWzBdID09IDMxICYmIHRoaXMucFsxXSA9PSAxMzkgJiYgdGhpcy5wWzJdID09IDgpXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IHRoaXMuRyhjYilcbiAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMucFswXSAmIDE1KSAhPSA4IHx8ICh0aGlzLnBbMF0gPj4gNCkgPiA3IHx8ICgodGhpcy5wWzBdIDw8IDggfCB0aGlzLnBbMV0pICUgMzEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgdGhpcy5JKGNiKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgdGhpcy5aKGNiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnMucHVzaCh0aGlzLnAsIGZpbmFsKTtcbiAgICAgICAgICAgICAgICB0aGlzLnAgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMucy5wdXNoKGNodW5rLCBmaW5hbCk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVjb21wcmVzcztcbn0oKSk7XG5leHBvcnQgeyBEZWNvbXByZXNzIH07XG4vKipcbiAqIEFzeW5jaHJvbm91cyBzdHJlYW1pbmcgR1pJUCwgWmxpYiwgb3IgcmF3IERFRkxBVEUgZGVjb21wcmVzc2lvblxuICovXG52YXIgQXN5bmNEZWNvbXByZXNzID0gLyojX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgKiBDcmVhdGVzIGFuIGFzeW5jaHJvbm91cyBkZWNvbXByZXNzaW9uIHN0cmVhbVxuICAgKiBAcGFyYW0gY2IgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbmV2ZXIgZGF0YSBpcyBkZWNvbXByZXNzZWRcbiAgICovXG4gICAgZnVuY3Rpb24gQXN5bmNEZWNvbXByZXNzKGNiKSB7XG4gICAgICAgIHRoaXMuRyA9IEFzeW5jR3VuemlwO1xuICAgICAgICB0aGlzLkkgPSBBc3luY0luZmxhdGU7XG4gICAgICAgIHRoaXMuWiA9IEFzeW5jVW56bGliO1xuICAgICAgICB0aGlzLm9uZGF0YSA9IGNiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXNoZXMgYSBjaHVuayB0byBiZSBkZWNvbXByZXNzZWRcbiAgICAgKiBAcGFyYW0gY2h1bmsgVGhlIGNodW5rIHRvIHB1c2hcbiAgICAgKiBAcGFyYW0gZmluYWwgV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGNodW5rXG4gICAgICovXG4gICAgQXN5bmNEZWNvbXByZXNzLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBmaW5hbCkge1xuICAgICAgICBEZWNvbXByZXNzLnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGZpbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBBc3luY0RlY29tcHJlc3M7XG59KCkpO1xuZXhwb3J0IHsgQXN5bmNEZWNvbXByZXNzIH07XG5leHBvcnQgZnVuY3Rpb24gZGVjb21wcmVzcyhkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICByZXR1cm4gKGRhdGFbMF0gPT0gMzEgJiYgZGF0YVsxXSA9PSAxMzkgJiYgZGF0YVsyXSA9PSA4KVxuICAgICAgICA/IGd1bnppcChkYXRhLCBvcHRzLCBjYilcbiAgICAgICAgOiAoKGRhdGFbMF0gJiAxNSkgIT0gOCB8fCAoZGF0YVswXSA+PiA0KSA+IDcgfHwgKChkYXRhWzBdIDw8IDggfCBkYXRhWzFdKSAlIDMxKSlcbiAgICAgICAgICAgID8gaW5mbGF0ZShkYXRhLCBvcHRzLCBjYilcbiAgICAgICAgICAgIDogdW56bGliKGRhdGEsIG9wdHMsIGNiKTtcbn1cbi8qKlxuICogRXhwYW5kcyBjb21wcmVzc2VkIEdaSVAsIFpsaWIsIG9yIHJhdyBERUZMQVRFIGRhdGEsIGF1dG9tYXRpY2FsbHkgZGV0ZWN0aW5nIHRoZSBmb3JtYXRcbiAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGRlY29tcHJlc3NcbiAqIEBwYXJhbSBvdXQgV2hlcmUgdG8gd3JpdGUgdGhlIGRhdGEuIFNhdmVzIG1lbW9yeSBpZiB5b3Uga25vdyB0aGUgZGVjb21wcmVzc2VkIHNpemUgYW5kIHByb3ZpZGUgYW4gb3V0cHV0IGJ1ZmZlciBvZiB0aGF0IGxlbmd0aC5cbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgdmVyc2lvbiBvZiB0aGUgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb21wcmVzc1N5bmMoZGF0YSwgb3V0KSB7XG4gICAgcmV0dXJuIChkYXRhWzBdID09IDMxICYmIGRhdGFbMV0gPT0gMTM5ICYmIGRhdGFbMl0gPT0gOClcbiAgICAgICAgPyBndW56aXBTeW5jKGRhdGEsIG91dClcbiAgICAgICAgOiAoKGRhdGFbMF0gJiAxNSkgIT0gOCB8fCAoZGF0YVswXSA+PiA0KSA+IDcgfHwgKChkYXRhWzBdIDw8IDggfCBkYXRhWzFdKSAlIDMxKSlcbiAgICAgICAgICAgID8gaW5mbGF0ZVN5bmMoZGF0YSwgb3V0KVxuICAgICAgICAgICAgOiB1bnpsaWJTeW5jKGRhdGEsIG91dCk7XG59XG4vLyBmbGF0dGVuIGEgZGlyZWN0b3J5IHN0cnVjdHVyZVxudmFyIGZsdG4gPSBmdW5jdGlvbiAoZCwgcCwgdCwgbykge1xuICAgIGZvciAodmFyIGsgaW4gZCkge1xuICAgICAgICB2YXIgdmFsID0gZFtrXSwgbiA9IHAgKyBrO1xuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgdTgpXG4gICAgICAgICAgICB0W25dID0gW3ZhbCwgb107XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsKSlcbiAgICAgICAgICAgIHRbbl0gPSBbdmFsWzBdLCBtcmcobywgdmFsWzFdKV07XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZsdG4odmFsLCBuICsgJy8nLCB0LCBvKTtcbiAgICB9XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyBpbnRvIGEgVWludDhBcnJheSBmb3IgdXNlIHdpdGggY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBtZXRob2RzXG4gKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gZW5jb2RlXG4gKiBAcGFyYW0gbGF0aW4xIFdoZXRoZXIgb3Igbm90IHRvIGludGVycHJldCB0aGUgZGF0YSBhcyBMYXRpbi0xLiBUaGlzIHNob3VsZFxuICogICAgICAgICAgICAgICBub3QgbmVlZCB0byBiZSB0cnVlIHVubGVzcyBkZWNvZGluZyBhIGJpbmFyeSBzdHJpbmcuXG4gKiBAcmV0dXJucyBUaGUgc3RyaW5nIGVuY29kZWQgaW4gVVRGLTgvTGF0aW4tMSBiaW5hcnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0clRvVTgoc3RyLCBsYXRpbjEpIHtcbiAgICB2YXIgbCA9IHN0ci5sZW5ndGg7XG4gICAgaWYgKCFsYXRpbjEgJiYgdHlwZW9mIFRleHRFbmNvZGVyICE9ICd1bmRlZmluZWQnKVxuICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0cik7XG4gICAgdmFyIGFyID0gbmV3IHU4KHN0ci5sZW5ndGggKyAoc3RyLmxlbmd0aCA+Pj4gMSkpO1xuICAgIHZhciBhaSA9IDA7XG4gICAgdmFyIHcgPSBmdW5jdGlvbiAodikgeyBhclthaSsrXSA9IHY7IH07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgaWYgKGFpICsgNSA+IGFyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG4gPSBuZXcgdTgoYWkgKyA4ICsgKChsIC0gaSkgPDwgMSkpO1xuICAgICAgICAgICAgbi5zZXQoYXIpO1xuICAgICAgICAgICAgYXIgPSBuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjIDwgMTI4IHx8IGxhdGluMSlcbiAgICAgICAgICAgIHcoYyk7XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KVxuICAgICAgICAgICAgdygxOTIgfCAoYyA+Pj4gNikpLCB3KDEyOCB8IChjICYgNjMpKTtcbiAgICAgICAgZWxzZSBpZiAoYyA+IDU1Mjk1ICYmIGMgPCA1NzM0NClcbiAgICAgICAgICAgIGMgPSA2NTUzNiArIChjICYgMTAyMyA8PCAxMCkgfCAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDEwMjMpLFxuICAgICAgICAgICAgICAgIHcoMjQwIHwgKGMgPj4+IDE4KSksIHcoMTI4IHwgKChjID4+PiAxMikgJiA2MykpLCB3KDEyOCB8ICgoYyA+Pj4gNikgJiA2MykpLCB3KDEyOCB8IChjICYgNjMpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdygyMjQgfCAoYyA+Pj4gMTIpKSwgdygxMjggfCAoKGMgPj4+IDYpICYgNjMpKSwgdygxMjggfCAoYyAmIDYzKSk7XG4gICAgfVxuICAgIHJldHVybiBzbGMoYXIsIDAsIGFpKTtcbn1cbi8qKlxuICogQ29udmVydHMgYSBVaW50OEFycmF5IHRvIGEgc3RyaW5nXG4gKiBAcGFyYW0gZGF0IFRoZSBkYXRhIHRvIGRlY29kZSB0byBzdHJpbmdcbiAqIEBwYXJhbSBsYXRpbjEgV2hldGhlciBvciBub3QgdG8gaW50ZXJwcmV0IHRoZSBkYXRhIGFzIExhdGluLTEuIFRoaXMgc2hvdWxkXG4gKiAgICAgICAgICAgICAgIG5vdCBuZWVkIHRvIGJlIHRydWUgdW5sZXNzIGVuY29kaW5nIHRvIGJpbmFyeSBzdHJpbmcuXG4gKiBAcmV0dXJucyBUaGUgb3JpZ2luYWwgVVRGLTgvTGF0aW4tMSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0ckZyb21VOChkYXQsIGxhdGluMSkge1xuICAgIHZhciByID0gJyc7XG4gICAgaWYgKCFsYXRpbjEgJiYgdHlwZW9mIFRleHREZWNvZGVyICE9ICd1bmRlZmluZWQnKVxuICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRhdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXQubGVuZ3RoOykge1xuICAgICAgICB2YXIgYyA9IGRhdFtpKytdO1xuICAgICAgICBpZiAoYyA8IDEyOCB8fCBsYXRpbjEpXG4gICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMjQpXG4gICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiAzMSkgPDwgNiB8IChkYXRbaSsrXSAmIDYzKSk7XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyNDApXG4gICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiAxNSkgPDwgMTIgfCAoZGF0W2krK10gJiA2MykgPDwgNiB8IChkYXRbaSsrXSAmIDYzKSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGMgPSAoKGMgJiAxNSkgPDwgMTggfCAoZGF0W2krK10gJiA2MykgPDwgMTIgfCAoZGF0W2krK10gJiA2MykgPDwgNiB8IChkYXRbaSsrXSAmIDYzKSkgLSA2NTUzNixcbiAgICAgICAgICAgICAgICByICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYgfCAoYyA+PiAxMCksIDU2MzIwIHwgKGMgJiAxMDIzKSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuO1xuLy8gc2tpcCBsb2NhbCB6aXAgaGVhZGVyXG52YXIgc2x6aCA9IGZ1bmN0aW9uIChkLCBiKSB7IHJldHVybiBiICsgMzAgKyBiMihkLCBiICsgMjYpICsgYjIoZCwgYiArIDI4KTsgfTtcbi8vIHJlYWQgemlwIGhlYWRlclxudmFyIHpoID0gZnVuY3Rpb24gKGQsIGIsIHopIHtcbiAgICB2YXIgZm5sID0gYjIoZCwgYiArIDI4KSwgZm4gPSBzdHJGcm9tVTgoZC5zdWJhcnJheShiICsgNDYsIGIgKyA0NiArIGZubCksICEoYjIoZCwgYiArIDgpICYgMjA0OCkpLCBlcyA9IGIgKyA0NiArIGZubDtcbiAgICB2YXIgX2EgPSB6ID8gejY0ZShkLCBlcykgOiBbYjQoZCwgYiArIDIwKSwgYjQoZCwgYiArIDI0KSwgYjQoZCwgYiArIDQyKV0sIHNjID0gX2FbMF0sIHN1ID0gX2FbMV0sIG9mZiA9IF9hWzJdO1xuICAgIHJldHVybiBbYjIoZCwgYiArIDEwKSwgc2MsIHN1LCBmbiwgZXMgKyBiMihkLCBiICsgMzApICsgYjIoZCwgYiArIDMyKSwgb2ZmXTtcbn07XG4vLyByZWFkIHppcDY0IGV4dHJhIGZpZWxkXG52YXIgejY0ZSA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICg7IGIyKGQsIGIpICE9IDE7IGIgKz0gNCArIGIyKGQsIGIgKyAyKSlcbiAgICAgICAgO1xuICAgIHJldHVybiBbYjQoZCwgYiArIDEyKSwgYjQoZCwgYiArIDQpLCBiNChkLCBiICsgMjApXTtcbn07XG4vLyB3cml0ZSB6aXAgaGVhZGVyXG52YXIgd3poID0gZnVuY3Rpb24gKGQsIGIsIGMsIGNtcCwgc3UsIGZuLCB1LCBvLCBjZSwgdCkge1xuICAgIHZhciBmbCA9IGZuLmxlbmd0aCwgbCA9IGNtcC5sZW5ndGg7XG4gICAgd2J5dGVzKGQsIGIsIGNlICE9IG51bGwgPyAweDIwMTRCNTAgOiAweDQwMzRCNTApLCBiICs9IDQ7XG4gICAgaWYgKGNlICE9IG51bGwpXG4gICAgICAgIGRbYl0gPSAyMCwgYiArPSAyO1xuICAgIGRbYl0gPSAyMCwgYiArPSAyOyAvLyBzcGVjIGNvbXBsaWFuY2U/IHdoYXQncyB0aGF0P1xuICAgIGRbYisrXSA9ICh0ID09IDggJiYgKG8ubGV2ZWwgPT0gMSA/IDYgOiBvLmxldmVsIDwgNiA/IDQgOiBvLmxldmVsID09IDkgPyAyIDogMCkpLCBkW2IrK10gPSB1ICYmIDg7XG4gICAgZFtiXSA9IHQsIGIgKz0gMjtcbiAgICB2YXIgZHQgPSBuZXcgRGF0ZShvLm10aW1lIHx8IERhdGUubm93KCkpLCB5ID0gZHQuZ2V0RnVsbFllYXIoKSAtIDE5ODA7XG4gICAgaWYgKHkgPCAwIHx8IHkgPiAxMTkpXG4gICAgICAgIHRocm93ICdkYXRlIG5vdCBpbiByYW5nZSAxOTgwLTIwOTknO1xuICAgIHdieXRlcyhkLCBiLCAoKHkgPDwgMjQpICogMikgfCAoKGR0LmdldE1vbnRoKCkgKyAxKSA8PCAyMSkgfCAoZHQuZ2V0RGF0ZSgpIDw8IDE2KSB8IChkdC5nZXRIb3VycygpIDw8IDExKSB8IChkdC5nZXRNaW51dGVzKCkgPDwgNSkgfCAoZHQuZ2V0U2Vjb25kcygpID4+PiAxKSk7XG4gICAgYiArPSA0O1xuICAgIHdieXRlcyhkLCBiLCBjKTtcbiAgICB3Ynl0ZXMoZCwgYiArIDQsIGwpO1xuICAgIHdieXRlcyhkLCBiICsgOCwgc3UpO1xuICAgIHdieXRlcyhkLCBiICsgMTIsIGZsKSwgYiArPSAxNjsgLy8gc2tpcCBleHRyYSBmaWVsZCwgY29tbWVudFxuICAgIGlmIChjZSAhPSBudWxsKVxuICAgICAgICB3Ynl0ZXMoZCwgYiArPSAxMCwgY2UpLCBiICs9IDQ7XG4gICAgZC5zZXQoZm4sIGIpO1xuICAgIGIgKz0gZmw7XG4gICAgaWYgKGNlID09IG51bGwpXG4gICAgICAgIGQuc2V0KGNtcCwgYik7XG59O1xuLy8gd3JpdGUgemlwIGZvb3RlciAoZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5KVxudmFyIHd6ZiA9IGZ1bmN0aW9uIChvLCBiLCBjLCBkLCBlKSB7XG4gICAgd2J5dGVzKG8sIGIsIDB4NjA1NEI1MCk7IC8vIHNraXAgZGlza1xuICAgIHdieXRlcyhvLCBiICsgOCwgYyk7XG4gICAgd2J5dGVzKG8sIGIgKyAxMCwgYyk7XG4gICAgd2J5dGVzKG8sIGIgKyAxMiwgZCk7XG4gICAgd2J5dGVzKG8sIGIgKyAxNiwgZSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHppcChkYXRhLCBvcHRzLCBjYikge1xuICAgIGlmICghY2IpXG4gICAgICAgIGNiID0gb3B0cywgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2YgY2IgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgJ25vIGNhbGxiYWNrJztcbiAgICB2YXIgciA9IHt9O1xuICAgIGZsdG4oZGF0YSwgJycsIHIsIG9wdHMpO1xuICAgIHZhciBrID0gT2JqZWN0LmtleXMocik7XG4gICAgdmFyIGxmdCA9IGsubGVuZ3RoLCBvID0gMCwgdG90ID0gMDtcbiAgICB2YXIgc2xmdCA9IGxmdCwgZmlsZXMgPSBuZXcgQXJyYXkobGZ0KTtcbiAgICB2YXIgdGVybSA9IFtdO1xuICAgIHZhciB0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlcm0ubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICB0ZXJtW2ldKCk7XG4gICAgfTtcbiAgICB2YXIgY2JmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3V0ID0gbmV3IHU4KHRvdCArIDIyKSwgb2UgPSBvLCBjZGwgPSB0b3QgLSBvO1xuICAgICAgICB0b3QgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsZnQ7ICsraSkge1xuICAgICAgICAgICAgdmFyIGYgPSBmaWxlc1tpXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgd3poKG91dCwgdG90LCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCBudWxsLCBmLnQpO1xuICAgICAgICAgICAgICAgIHd6aChvdXQsIG8sIGYuYywgZi5kLCBmLm0sIGYubiwgZi51LCBmLnAsIHRvdCwgZi50KSwgbyArPSA0NiArIGYubi5sZW5ndGgsIHRvdCArPSAzMCArIGYubi5sZW5ndGggKyBmLmQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2IoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd3pmKG91dCwgbywgZmlsZXMubGVuZ3RoLCBjZGwsIG9lKTtcbiAgICAgICAgY2IobnVsbCwgb3V0KTtcbiAgICB9O1xuICAgIGlmICghbGZ0KVxuICAgICAgICBjYmYoKTtcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHZhciBmbiA9IGtbaV07XG4gICAgICAgIHZhciBfYSA9IHJbZm5dLCBmaWxlID0gX2FbMF0sIHAgPSBfYVsxXTtcbiAgICAgICAgdmFyIGMgPSBjcmMoKSwgbSA9IGZpbGUubGVuZ3RoO1xuICAgICAgICBjLnAoZmlsZSk7XG4gICAgICAgIHZhciBuID0gc3RyVG9VOChmbiksIHMgPSBuLmxlbmd0aDtcbiAgICAgICAgdmFyIHQgPSBwLmxldmVsID09IDAgPyAwIDogODtcbiAgICAgICAgdmFyIGNibCA9IGZ1bmN0aW9uIChlLCBkKSB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIHRBbGwoKTtcbiAgICAgICAgICAgICAgICBjYihlLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBsID0gZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZmlsZXNbaV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHQ6IHQsXG4gICAgICAgICAgICAgICAgICAgIGQ6IGQsXG4gICAgICAgICAgICAgICAgICAgIG06IG0sXG4gICAgICAgICAgICAgICAgICAgIGM6IGMuZCgpLFxuICAgICAgICAgICAgICAgICAgICB1OiBmbi5sZW5ndGggIT0gbCxcbiAgICAgICAgICAgICAgICAgICAgbjogbixcbiAgICAgICAgICAgICAgICAgICAgcDogcFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbyArPSAzMCArIHMgKyBsO1xuICAgICAgICAgICAgICAgIHRvdCArPSA3NiArIDIgKiBzICsgbDtcbiAgICAgICAgICAgICAgICBpZiAoIS0tbGZ0KVxuICAgICAgICAgICAgICAgICAgICBjYmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4ubGVuZ3RoID4gNjU1MzUpXG4gICAgICAgICAgICBjYmwoJ2ZpbGVuYW1lIHRvbyBsb25nJywgbnVsbCk7XG4gICAgICAgIGlmICghdClcbiAgICAgICAgICAgIGNibChudWxsLCBmaWxlKTtcbiAgICAgICAgZWxzZSBpZiAobSA8IDE2MDAwMCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYmwobnVsbCwgZGVmbGF0ZVN5bmMoZmlsZSwgcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjYmwoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGVybS5wdXNoKGRlZmxhdGUoZmlsZSwgcCwgY2JsKSk7XG4gICAgfTtcbiAgICAvLyBDYW5ub3QgdXNlIGxmdCBiZWNhdXNlIGl0IGNhbiBkZWNyZWFzZVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xmdDsgKytpKSB7XG4gICAgICAgIF9sb29wXzEoaSk7XG4gICAgfVxuICAgIHJldHVybiB0QWxsO1xufVxuLyoqXG4gKiBTeW5jaHJvbm91c2x5IGNyZWF0ZXMgYSBaSVAgZmlsZS4gUHJlZmVyIHVzaW5nIGB6aXBgIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAqIHdpdGggbW9yZSB0aGFuIG9uZSBmaWxlLlxuICogQHBhcmFtIGRhdGEgVGhlIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgZm9yIHRoZSBaSVAgYXJjaGl2ZVxuICogQHBhcmFtIG9wdHMgVGhlIG1haW4gb3B0aW9ucywgbWVyZ2VkIHdpdGggcGVyLWZpbGUgb3B0aW9uc1xuICogQHJldHVybnMgVGhlIGdlbmVyYXRlZCBaSVAgYXJjaGl2ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gemlwU3luYyhkYXRhLCBvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICB2YXIgciA9IHt9O1xuICAgIHZhciBmaWxlcyA9IFtdO1xuICAgIGZsdG4oZGF0YSwgJycsIHIsIG9wdHMpO1xuICAgIHZhciBvID0gMDtcbiAgICB2YXIgdG90ID0gMDtcbiAgICBmb3IgKHZhciBmbiBpbiByKSB7XG4gICAgICAgIHZhciBfYSA9IHJbZm5dLCBmaWxlID0gX2FbMF0sIHAgPSBfYVsxXTtcbiAgICAgICAgdmFyIHQgPSBwLmxldmVsID09IDAgPyAwIDogODtcbiAgICAgICAgdmFyIG4gPSBzdHJUb1U4KGZuKSwgcyA9IG4ubGVuZ3RoO1xuICAgICAgICBpZiAobi5sZW5ndGggPiA2NTUzNSlcbiAgICAgICAgICAgIHRocm93ICdmaWxlbmFtZSB0b28gbG9uZyc7XG4gICAgICAgIHZhciBkID0gdCA/IGRlZmxhdGVTeW5jKGZpbGUsIHApIDogZmlsZSwgbCA9IGQubGVuZ3RoO1xuICAgICAgICB2YXIgYyA9IGNyYygpO1xuICAgICAgICBjLnAoZmlsZSk7XG4gICAgICAgIGZpbGVzLnB1c2goe1xuICAgICAgICAgICAgdDogdCxcbiAgICAgICAgICAgIGQ6IGQsXG4gICAgICAgICAgICBtOiBmaWxlLmxlbmd0aCxcbiAgICAgICAgICAgIGM6IGMuZCgpLFxuICAgICAgICAgICAgdTogZm4ubGVuZ3RoICE9IHMsXG4gICAgICAgICAgICBuOiBuLFxuICAgICAgICAgICAgbzogbyxcbiAgICAgICAgICAgIHA6IHBcbiAgICAgICAgfSk7XG4gICAgICAgIG8gKz0gMzAgKyBzICsgbDtcbiAgICAgICAgdG90ICs9IDc2ICsgMiAqIHMgKyBsO1xuICAgIH1cbiAgICB2YXIgb3V0ID0gbmV3IHU4KHRvdCArIDIyKSwgb2UgPSBvLCBjZGwgPSB0b3QgLSBvO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGYgPSBmaWxlc1tpXTtcbiAgICAgICAgd3poKG91dCwgZi5vLCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCBudWxsLCBmLnQpO1xuICAgICAgICB3emgob3V0LCBvLCBmLmMsIGYuZCwgZi5tLCBmLm4sIGYudSwgZi5wLCBmLm8sIGYudCksIG8gKz0gNDYgKyBmLm4ubGVuZ3RoO1xuICAgIH1cbiAgICB3emYob3V0LCBvLCBmaWxlcy5sZW5ndGgsIGNkbCwgb2UpO1xuICAgIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IGRlY29tcHJlc3NlcyBhIFpJUCBhcmNoaXZlXG4gKiBAcGFyYW0gZGF0YSBUaGUgcmF3IGNvbXByZXNzZWQgWklQIGZpbGVcbiAqIEBwYXJhbSBjYiBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aXRoIHRoZSBkZWNvbXByZXNzZWQgZmlsZXNcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBpbW1lZGlhdGVseSB0ZXJtaW5hdGUgdGhlIHVuemlwcGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdW56aXAoZGF0YSwgY2IpIHtcbiAgICBpZiAodHlwZW9mIGNiICE9ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93ICdubyBjYWxsYmFjayc7XG4gICAgdmFyIHRlcm0gPSBbXTtcbiAgICB2YXIgdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXJtLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGVybVtpXSgpO1xuICAgIH07XG4gICAgdmFyIGZpbGVzID0ge307XG4gICAgdmFyIGUgPSBkYXRhLmxlbmd0aCAtIDIyO1xuICAgIGZvciAoOyBiNChkYXRhLCBlKSAhPSAweDYwNTRCNTA7IC0tZSkge1xuICAgICAgICBpZiAoIWUgfHwgZGF0YS5sZW5ndGggLSBlID4gNjU1NTgpIHtcbiAgICAgICAgICAgIGNiKCdpbnZhbGlkIHppcCBmaWxlJywgbnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgO1xuICAgIHZhciBsZnQgPSBiMihkYXRhLCBlICsgOCk7XG4gICAgaWYgKCFsZnQpXG4gICAgICAgIGNiKG51bGwsIHt9KTtcbiAgICB2YXIgYyA9IGxmdDtcbiAgICB2YXIgbyA9IGI0KGRhdGEsIGUgKyAxNik7XG4gICAgdmFyIHogPSBvID09IDQyOTQ5NjcyOTU7XG4gICAgaWYgKHopIHtcbiAgICAgICAgZSA9IGI0KGRhdGEsIGUgLSAxMik7XG4gICAgICAgIGlmIChiNChkYXRhLCBlKSAhPSAweDYwNjRCNTApXG4gICAgICAgICAgICB0aHJvdyAnaW52YWxpZCB6aXAgZmlsZSc7XG4gICAgICAgIGMgPSBsZnQgPSBiNChkYXRhLCBlICsgMzIpO1xuICAgICAgICBvID0gYjQoZGF0YSwgZSArIDQ4KTtcbiAgICB9XG4gICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgX2EgPSB6aChkYXRhLCBvLCB6KSwgY18xID0gX2FbMF0sIHNjID0gX2FbMV0sIHN1ID0gX2FbMl0sIGZuID0gX2FbM10sIG5vID0gX2FbNF0sIG9mZiA9IF9hWzVdLCBiID0gc2x6aChkYXRhLCBvZmYpO1xuICAgICAgICBvID0gbm87XG4gICAgICAgIHZhciBjYmwgPSBmdW5jdGlvbiAoZSwgZCkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICB0QWxsKCk7XG4gICAgICAgICAgICAgICAgY2IoZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaWxlc1tmbl0gPSBkO1xuICAgICAgICAgICAgICAgIGlmICghLS1sZnQpXG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGZpbGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFjXzEpXG4gICAgICAgICAgICBjYmwobnVsbCwgc2xjKGRhdGEsIGIsIGIgKyBzYykpO1xuICAgICAgICBlbHNlIGlmIChjXzEgPT0gOCkge1xuICAgICAgICAgICAgdmFyIGluZmwgPSBkYXRhLnN1YmFycmF5KGIsIGIgKyBzYyk7XG4gICAgICAgICAgICBpZiAoc2MgPCAzMjAwMDApIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYmwobnVsbCwgaW5mbGF0ZVN5bmMoaW5mbCwgbmV3IHU4KHN1KSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjYmwoZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRlcm0ucHVzaChpbmZsYXRlKGluZmwsIHsgc2l6ZTogc3UgfSwgY2JsKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY2JsKCd1bmtub3duIGNvbXByZXNzaW9uIHR5cGUgJyArIGNfMSwgbnVsbCk7XG4gICAgfTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGM7ICsraSkge1xuICAgICAgICBfbG9vcF8yKGkpO1xuICAgIH1cbiAgICByZXR1cm4gdEFsbDtcbn1cbi8qKlxuICogU3luY2hyb25vdXNseSBkZWNvbXByZXNzZXMgYSBaSVAgYXJjaGl2ZS4gUHJlZmVyIHVzaW5nIGB1bnppcGAgZm9yIGJldHRlclxuICogcGVyZm9ybWFuY2Ugd2l0aCBtb3JlIHRoYW4gb25lIGZpbGUuXG4gKiBAcGFyYW0gZGF0YSBUaGUgcmF3IGNvbXByZXNzZWQgWklQIGZpbGVcbiAqIEByZXR1cm5zIFRoZSBkZWNvbXByZXNzZWQgZmlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuemlwU3luYyhkYXRhKSB7XG4gICAgdmFyIGZpbGVzID0ge307XG4gICAgdmFyIGUgPSBkYXRhLmxlbmd0aCAtIDIyO1xuICAgIGZvciAoOyBiNChkYXRhLCBlKSAhPSAweDYwNTRCNTA7IC0tZSkge1xuICAgICAgICBpZiAoIWUgfHwgZGF0YS5sZW5ndGggLSBlID4gNjU1NTgpXG4gICAgICAgICAgICB0aHJvdyAnaW52YWxpZCB6aXAgZmlsZSc7XG4gICAgfVxuICAgIDtcbiAgICB2YXIgYyA9IGIyKGRhdGEsIGUgKyA4KTtcbiAgICBpZiAoIWMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICB2YXIgbyA9IGI0KGRhdGEsIGUgKyAxNik7XG4gICAgdmFyIHogPSBvID09IDQyOTQ5NjcyOTU7XG4gICAgaWYgKHopIHtcbiAgICAgICAgZSA9IGI0KGRhdGEsIGUgLSAxMik7XG4gICAgICAgIGlmIChiNChkYXRhLCBlKSAhPSAweDYwNjRCNTApXG4gICAgICAgICAgICB0aHJvdyAnaW52YWxpZCB6aXAgZmlsZSc7XG4gICAgICAgIGMgPSBiNChkYXRhLCBlICsgMzIpO1xuICAgICAgICBvID0gYjQoZGF0YSwgZSArIDQ4KTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjOyArK2kpIHtcbiAgICAgICAgdmFyIF9hID0gemgoZGF0YSwgbywgeiksIGNfMiA9IF9hWzBdLCBzYyA9IF9hWzFdLCBzdSA9IF9hWzJdLCBmbiA9IF9hWzNdLCBubyA9IF9hWzRdLCBvZmYgPSBfYVs1XSwgYiA9IHNsemgoZGF0YSwgb2ZmKTtcbiAgICAgICAgbyA9IG5vO1xuICAgICAgICBpZiAoIWNfMilcbiAgICAgICAgICAgIGZpbGVzW2ZuXSA9IHNsYyhkYXRhLCBiLCBiICsgc2MpO1xuICAgICAgICBlbHNlIGlmIChjXzIgPT0gOClcbiAgICAgICAgICAgIGZpbGVzW2ZuXSA9IGluZmxhdGVTeW5jKGRhdGEuc3ViYXJyYXkoYiwgYiArIHNjKSwgbmV3IHU4KHN1KSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93ICd1bmtub3duIGNvbXByZXNzaW9uIHR5cGUgJyArIGNfMjtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGVzO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/fflate/esm/browser.js\n");

/***/ }),

/***/ "./node_modules/jspdf/dist/jspdf.es.min.js":
/*!*************************************************!*\
  !*** ./node_modules/jspdf/dist/jspdf.es.min.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AcroForm\": function() { return /* binding */ St; },\n/* harmony export */   \"AcroFormAppearance\": function() { return /* binding */ At; },\n/* harmony export */   \"AcroFormButton\": function() { return /* binding */ mt; },\n/* harmony export */   \"AcroFormCheckBox\": function() { return /* binding */ wt; },\n/* harmony export */   \"AcroFormChoiceField\": function() { return /* binding */ ft; },\n/* harmony export */   \"AcroFormComboBox\": function() { return /* binding */ pt; },\n/* harmony export */   \"AcroFormEditBox\": function() { return /* binding */ gt; },\n/* harmony export */   \"AcroFormListBox\": function() { return /* binding */ dt; },\n/* harmony export */   \"AcroFormPasswordField\": function() { return /* binding */ Lt; },\n/* harmony export */   \"AcroFormPushButton\": function() { return /* binding */ vt; },\n/* harmony export */   \"AcroFormRadioButton\": function() { return /* binding */ bt; },\n/* harmony export */   \"AcroFormTextField\": function() { return /* binding */ Nt; },\n/* harmony export */   \"GState\": function() { return /* binding */ j; },\n/* harmony export */   \"ShadingPattern\": function() { return /* binding */ B; },\n/* harmony export */   \"TilingPattern\": function() { return /* binding */ M; },\n/* harmony export */   \"jsPDF\": function() { return /* binding */ E; }\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.error.cause.js */ \"./node_modules/core-js/modules/es.error.cause.js\");\n/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.push.js */ \"./node_modules/core-js/modules/es.array.push.js\");\n/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_typed_array_at_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.typed-array.at.js */ \"./node_modules/core-js/modules/es.typed-array.at.js\");\n/* harmony import */ var core_js_modules_es_typed_array_at_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_at_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_typed_array_find_last_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-last.js */ \"./node_modules/core-js/modules/es.typed-array.find-last.js\");\n/* harmony import */ var core_js_modules_es_typed_array_find_last_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_last_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es_typed_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.typed-array.find-last-index.js */ \"./node_modules/core-js/modules/es.typed-array.find-last-index.js\");\n/* harmony import */ var core_js_modules_es_typed_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_find_last_index_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.typed-array.set.js */ \"./node_modules/core-js/modules/es.typed-array.set.js\");\n/* harmony import */ var core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_array_unshift_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.unshift.js */ \"./node_modules/core-js/modules/es.array.unshift.js\");\n/* harmony import */ var core_js_modules_es_array_unshift_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_unshift_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_es_regexp_flags_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.regexp.flags.js */ \"./node_modules/core-js/modules/es.regexp.flags.js\");\n/* harmony import */ var core_js_modules_es_regexp_flags_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_flags_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/esm/typeof.js\");\n/* harmony import */ var fflate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! fflate */ \"./node_modules/fflate/esm/browser.js\");\n\n\n\n\n\n\n\n\n/** @license\n *\n * jsPDF - PDF Document creation from JavaScript\n * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z\n *                      CommitID 00000000\n *\n * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF\n *               2015-2021 yWorks GmbH, http://www.yworks.com\n *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX\n *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>\n *               2010 Aaron Spike, https://github.com/acspike\n *               2012 Willow Systems Corporation, https://github.com/willowsystems\n *               2012 Pablo Hess, https://github.com/pablohess\n *               2012 Florian Jenett, https://github.com/fjenett\n *               2013 Warren Weckesser, https://github.com/warrenweckesser\n *               2013 Youssef Beddad, https://github.com/lifof\n *               2013 Lee Driscoll, https://github.com/lsdriscoll\n *               2013 Stefan Slonevskiy, https://github.com/stefslon\n *               2013 Jeremy Morel, https://github.com/jmorel\n *               2013 Christoph Hartmann, https://github.com/chris-rock\n *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria\n *               2014 James Makes, https://github.com/dollaruw\n *               2014 Diego Casorran, https://github.com/diegocr\n *               2014 Steven Spungin, https://github.com/Flamenco\n *               2014 Kenneth Glassey, https://github.com/Gavvers\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * Contributor(s):\n *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,\n *    kim3er, mfo, alnorth, Flamenco\n */\n\n\n\nvar n = function () {\n  return \"undefined\" != typeof window ? window : \"undefined\" != typeof __webpack_require__.g ? __webpack_require__.g : \"undefined\" != typeof self ? self : this;\n}();\nfunction i() {\n  n.console && \"function\" == typeof n.console.log && n.console.log.apply(n.console, arguments);\n}\nvar a = {\n  log: i,\n  warn: function (t) {\n    n.console && (\"function\" == typeof n.console.warn ? n.console.warn.apply(n.console, arguments) : i.call(null, arguments));\n  },\n  error: function (t) {\n    n.console && (\"function\" == typeof n.console.error ? n.console.error.apply(n.console, arguments) : i(t));\n  }\n};\nfunction o(t, e, r) {\n  var n = new XMLHttpRequest();\n  n.open(\"GET\", t), n.responseType = \"blob\", n.onload = function () {\n    l(n.response, e, r);\n  }, n.onerror = function () {\n    a.error(\"could not download file\");\n  }, n.send();\n}\nfunction s(t) {\n  var e = new XMLHttpRequest();\n  e.open(\"HEAD\", t, !1);\n  try {\n    e.send();\n  } catch (t) {}\n  return e.status >= 200 && e.status <= 299;\n}\nfunction c(t) {\n  try {\n    t.dispatchEvent(new MouseEvent(\"click\"));\n  } catch (r) {\n    var e = document.createEvent(\"MouseEvents\");\n    e.initMouseEvent(\"click\", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), t.dispatchEvent(e);\n  }\n}\nvar u,\n  h,\n  l = n.saveAs || (\"object\" !== (\"undefined\" == typeof window ? \"undefined\" : (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(window)) || window !== n ? function () {} : \"undefined\" != typeof HTMLAnchorElement && \"download\" in HTMLAnchorElement.prototype ? function (t, e, r) {\n    var i = n.URL || n.webkitURL,\n      a = document.createElement(\"a\");\n    e = e || t.name || \"download\", a.download = e, a.rel = \"noopener\", \"string\" == typeof t ? (a.href = t, a.origin !== location.origin ? s(a.href) ? o(t, e, r) : c(a, a.target = \"_blank\") : c(a)) : (a.href = i.createObjectURL(t), setTimeout(function () {\n      i.revokeObjectURL(a.href);\n    }, 4e4), setTimeout(function () {\n      c(a);\n    }, 0));\n  } : \"msSaveOrOpenBlob\" in navigator ? function (e, r, n) {\n    if (r = r || e.name || \"download\", \"string\" == typeof e) {\n      if (s(e)) o(e, r, n);else {\n        var i = document.createElement(\"a\");\n        i.href = e, i.target = \"_blank\", setTimeout(function () {\n          c(i);\n        });\n      }\n    } else navigator.msSaveOrOpenBlob(function (e, r) {\n      return void 0 === r ? r = {\n        autoBom: !1\n      } : \"object\" !== (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(r) && (a.warn(\"Deprecated: Expected third argument to be a object\"), r = {\n        autoBom: !r\n      }), r.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(e.type) ? new Blob([String.fromCharCode(65279), e], {\n        type: e.type\n      }) : e;\n    }(e, n), r);\n  } : function (e, r, i, a) {\n    if ((a = a || open(\"\", \"_blank\")) && (a.document.title = a.document.body.innerText = \"downloading...\"), \"string\" == typeof e) return o(e, r, i);\n    var s = \"application/octet-stream\" === e.type,\n      c = /constructor/i.test(n.HTMLElement) || n.safari,\n      u = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n    if ((u || s && c) && \"object\" === (\"undefined\" == typeof FileReader ? \"undefined\" : (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(FileReader))) {\n      var h = new FileReader();\n      h.onloadend = function () {\n        var t = h.result;\n        t = u ? t : t.replace(/^data:[^;]*;/, \"data:attachment/file;\"), a ? a.location.href = t : location = t, a = null;\n      }, h.readAsDataURL(e);\n    } else {\n      var l = n.URL || n.webkitURL,\n        f = l.createObjectURL(e);\n      a ? a.location = f : location.href = f, a = null, setTimeout(function () {\n        l.revokeObjectURL(f);\n      }, 4e4);\n    }\n  });\n/**\n * A class to parse color values\n * @author Stoyan Stefanov <sstoo@gmail.com>\n * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}\n * @license Use it if you like it\n */\nfunction f(t) {\n  var e;\n  t = t || \"\", this.ok = !1, \"#\" == t.charAt(0) && (t = t.substr(1, 6));\n  t = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"00ffff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"0000ff\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"00ffff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dodgerblue: \"1e90ff\",\n    feldspar: \"d19275\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"ff00ff\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgrey: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslateblue: \"8470ff\",\n    lightslategray: \"778899\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"00ff00\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"ff00ff\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370d8\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"d87093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    red: \"ff0000\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    violetred: \"d02090\",\n    wheat: \"f5deb3\",\n    white: \"ffffff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ffff00\",\n    yellowgreen: \"9acd32\"\n  }[t = (t = t.replace(/ /g, \"\")).toLowerCase()] || t;\n  for (var r = [{\n      re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n      example: [\"rgb(123, 234, 45)\", \"rgb(255,234,245)\"],\n      process: function (t) {\n        return [parseInt(t[1]), parseInt(t[2]), parseInt(t[3])];\n      }\n    }, {\n      re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n      example: [\"#00ff00\", \"336699\"],\n      process: function (t) {\n        return [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)];\n      }\n    }, {\n      re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n      example: [\"#fb0\", \"f0f\"],\n      process: function (t) {\n        return [parseInt(t[1] + t[1], 16), parseInt(t[2] + t[2], 16), parseInt(t[3] + t[3], 16)];\n      }\n    }], n = 0; n < r.length; n++) {\n    var i = r[n].re,\n      a = r[n].process,\n      o = i.exec(t);\n    o && (e = a(o), this.r = e[0], this.g = e[1], this.b = e[2], this.ok = !0);\n  }\n  this.r = this.r < 0 || isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r, this.g = this.g < 0 || isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g, this.b = this.b < 0 || isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b, this.toRGB = function () {\n    return \"rgb(\" + this.r + \", \" + this.g + \", \" + this.b + \")\";\n  }, this.toHex = function () {\n    var t = this.r.toString(16),\n      e = this.g.toString(16),\n      r = this.b.toString(16);\n    return 1 == t.length && (t = \"0\" + t), 1 == e.length && (e = \"0\" + e), 1 == r.length && (r = \"0\" + r), \"#\" + t + e + r;\n  };\n}\n/**\n * @license\n * Joseph Myers does not specify a particular license for his work.\n *\n * Author: Joseph Myers\n * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js\n *\n * Modified by: Owen Leong\n */\nfunction d(t, e) {\n  var r = t[0],\n    n = t[1],\n    i = t[2],\n    a = t[3];\n  r = g(r, n, i, a, e[0], 7, -680876936), a = g(a, r, n, i, e[1], 12, -389564586), i = g(i, a, r, n, e[2], 17, 606105819), n = g(n, i, a, r, e[3], 22, -1044525330), r = g(r, n, i, a, e[4], 7, -176418897), a = g(a, r, n, i, e[5], 12, 1200080426), i = g(i, a, r, n, e[6], 17, -1473231341), n = g(n, i, a, r, e[7], 22, -45705983), r = g(r, n, i, a, e[8], 7, 1770035416), a = g(a, r, n, i, e[9], 12, -1958414417), i = g(i, a, r, n, e[10], 17, -42063), n = g(n, i, a, r, e[11], 22, -1990404162), r = g(r, n, i, a, e[12], 7, 1804603682), a = g(a, r, n, i, e[13], 12, -40341101), i = g(i, a, r, n, e[14], 17, -1502002290), r = m(r, n = g(n, i, a, r, e[15], 22, 1236535329), i, a, e[1], 5, -165796510), a = m(a, r, n, i, e[6], 9, -1069501632), i = m(i, a, r, n, e[11], 14, 643717713), n = m(n, i, a, r, e[0], 20, -373897302), r = m(r, n, i, a, e[5], 5, -701558691), a = m(a, r, n, i, e[10], 9, 38016083), i = m(i, a, r, n, e[15], 14, -660478335), n = m(n, i, a, r, e[4], 20, -405537848), r = m(r, n, i, a, e[9], 5, 568446438), a = m(a, r, n, i, e[14], 9, -1019803690), i = m(i, a, r, n, e[3], 14, -187363961), n = m(n, i, a, r, e[8], 20, 1163531501), r = m(r, n, i, a, e[13], 5, -1444681467), a = m(a, r, n, i, e[2], 9, -51403784), i = m(i, a, r, n, e[7], 14, 1735328473), r = v(r, n = m(n, i, a, r, e[12], 20, -1926607734), i, a, e[5], 4, -378558), a = v(a, r, n, i, e[8], 11, -2022574463), i = v(i, a, r, n, e[11], 16, 1839030562), n = v(n, i, a, r, e[14], 23, -35309556), r = v(r, n, i, a, e[1], 4, -1530992060), a = v(a, r, n, i, e[4], 11, 1272893353), i = v(i, a, r, n, e[7], 16, -155497632), n = v(n, i, a, r, e[10], 23, -1094730640), r = v(r, n, i, a, e[13], 4, 681279174), a = v(a, r, n, i, e[0], 11, -358537222), i = v(i, a, r, n, e[3], 16, -722521979), n = v(n, i, a, r, e[6], 23, 76029189), r = v(r, n, i, a, e[9], 4, -640364487), a = v(a, r, n, i, e[12], 11, -421815835), i = v(i, a, r, n, e[15], 16, 530742520), r = b(r, n = v(n, i, a, r, e[2], 23, -995338651), i, a, e[0], 6, -198630844), a = b(a, r, n, i, e[7], 10, 1126891415), i = b(i, a, r, n, e[14], 15, -1416354905), n = b(n, i, a, r, e[5], 21, -57434055), r = b(r, n, i, a, e[12], 6, 1700485571), a = b(a, r, n, i, e[3], 10, -1894986606), i = b(i, a, r, n, e[10], 15, -1051523), n = b(n, i, a, r, e[1], 21, -2054922799), r = b(r, n, i, a, e[8], 6, 1873313359), a = b(a, r, n, i, e[15], 10, -30611744), i = b(i, a, r, n, e[6], 15, -1560198380), n = b(n, i, a, r, e[13], 21, 1309151649), r = b(r, n, i, a, e[4], 6, -145523070), a = b(a, r, n, i, e[11], 10, -1120210379), i = b(i, a, r, n, e[2], 15, 718787259), n = b(n, i, a, r, e[9], 21, -343485551), t[0] = _(r, t[0]), t[1] = _(n, t[1]), t[2] = _(i, t[2]), t[3] = _(a, t[3]);\n}\nfunction p(t, e, r, n, i, a) {\n  return e = _(_(e, t), _(n, a)), _(e << i | e >>> 32 - i, r);\n}\nfunction g(t, e, r, n, i, a, o) {\n  return p(e & r | ~e & n, t, e, i, a, o);\n}\nfunction m(t, e, r, n, i, a, o) {\n  return p(e & n | r & ~n, t, e, i, a, o);\n}\nfunction v(t, e, r, n, i, a, o) {\n  return p(e ^ r ^ n, t, e, i, a, o);\n}\nfunction b(t, e, r, n, i, a, o) {\n  return p(r ^ (e | ~n), t, e, i, a, o);\n}\nfunction y(t) {\n  var e,\n    r = t.length,\n    n = [1732584193, -271733879, -1732584194, 271733878];\n  for (e = 64; e <= t.length; e += 64) d(n, w(t.substring(e - 64, e)));\n  t = t.substring(e - 64);\n  var i = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  for (e = 0; e < t.length; e++) i[e >> 2] |= t.charCodeAt(e) << (e % 4 << 3);\n  if (i[e >> 2] |= 128 << (e % 4 << 3), e > 55) for (d(n, i), e = 0; e < 16; e++) i[e] = 0;\n  return i[14] = 8 * r, d(n, i), n;\n}\nfunction w(t) {\n  var e,\n    r = [];\n  for (e = 0; e < 64; e += 4) r[e >> 2] = t.charCodeAt(e) + (t.charCodeAt(e + 1) << 8) + (t.charCodeAt(e + 2) << 16) + (t.charCodeAt(e + 3) << 24);\n  return r;\n}\nu = n.atob.bind(n), h = n.btoa.bind(n);\nvar N = \"0123456789abcdef\".split(\"\");\nfunction L(t) {\n  for (var e = \"\", r = 0; r < 4; r++) e += N[t >> 8 * r + 4 & 15] + N[t >> 8 * r & 15];\n  return e;\n}\nfunction A(t) {\n  return String.fromCharCode((255 & t) >> 0, (65280 & t) >> 8, (16711680 & t) >> 16, (4278190080 & t) >> 24);\n}\nfunction x(t) {\n  return y(t).map(A).join(\"\");\n}\nvar S = \"5d41402abc4b2a76b9719d911017c592\" != function (t) {\n  for (var e = 0; e < t.length; e++) t[e] = L(t[e]);\n  return t.join(\"\");\n}(y(\"hello\"));\nfunction _(t, e) {\n  if (S) {\n    var r = (65535 & t) + (65535 & e);\n    return (t >> 16) + (e >> 16) + (r >> 16) << 16 | 65535 & r;\n  }\n  return t + e & 4294967295;\n}\n/**\n * @license\n * FPDF is released under a permissive license: there is no usage restriction.\n * You may embed it freely in your application (commercial or not), with or\n * without modifications.\n *\n * Reference: http://www.fpdf.org/en/script/script37.php\n */\nfunction P(t, e) {\n  var r, n, i, a;\n  if (t !== r) {\n    for (var o = (i = t, a = 1 + (256 / t.length >> 0), new Array(a + 1).join(i)), s = [], c = 0; c < 256; c++) s[c] = c;\n    var u = 0;\n    for (c = 0; c < 256; c++) {\n      var h = s[c];\n      u = (u + h + o.charCodeAt(c)) % 256, s[c] = s[u], s[u] = h;\n    }\n    r = t, n = s;\n  } else s = n;\n  var l = e.length,\n    f = 0,\n    d = 0,\n    p = \"\";\n  for (c = 0; c < l; c++) d = (d + (h = s[f = (f + 1) % 256])) % 256, s[f] = s[d], s[d] = h, o = s[(s[f] + s[d]) % 256], p += String.fromCharCode(e.charCodeAt(c) ^ o);\n  return p;\n}\n/**\n * @license\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n * Author: Owen Leong (@owenl131)\n * Date: 15 Oct 2020\n * References:\n * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt\n * https://github.com/foliojs/pdfkit/blob/master/lib/security.js\n * http://www.fpdf.org/en/script/script37.php\n */\nvar k = {\n  print: 4,\n  modify: 8,\n  copy: 16,\n  \"annot-forms\": 32\n};\nfunction I(t, e, r, n) {\n  this.v = 1, this.r = 2;\n  var i = 192;\n  t.forEach(function (t) {\n    if (void 0 !== k.perm) throw new Error(\"Invalid permission: \" + t);\n    i += k[t];\n  }), this.padding = \"(¿N^NuAd\\0NVÿú\u0001\\b..\\0¶Ðh>/\\f©þdSiz\";\n  var a = (e + this.padding).substr(0, 32),\n    o = (r + this.padding).substr(0, 32);\n  this.O = this.processOwnerPassword(a, o), this.P = -(1 + (255 ^ i)), this.encryptionKey = x(a + this.O + this.lsbFirstWord(this.P) + this.hexToBytes(n)).substr(0, 5), this.U = P(this.encryptionKey, this.padding);\n}\nfunction F(t) {\n  if (/[^\\u0000-\\u00ff]/.test(t)) throw new Error(\"Invalid PDF Name Object: \" + t + \", Only accept ASCII characters.\");\n  for (var e = \"\", r = t.length, n = 0; n < r; n++) {\n    var i = t.charCodeAt(n);\n    if (i < 33 || 35 === i || 37 === i || 40 === i || 41 === i || 47 === i || 60 === i || 62 === i || 91 === i || 93 === i || 123 === i || 125 === i || i > 126) e += \"#\" + (\"0\" + i.toString(16)).slice(-2);else e += t[n];\n  }\n  return e;\n}\nfunction C(e) {\n  if (\"object\" !== (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e)) throw new Error(\"Invalid Context passed to initialize PubSub (jsPDF-module)\");\n  var r = {};\n  this.subscribe = function (t, e, n) {\n    if (n = n || !1, \"string\" != typeof t || \"function\" != typeof e || \"boolean\" != typeof n) throw new Error(\"Invalid arguments passed to PubSub.subscribe (jsPDF-module)\");\n    r.hasOwnProperty(t) || (r[t] = {});\n    var i = Math.random().toString(35);\n    return r[t][i] = [e, !!n], i;\n  }, this.unsubscribe = function (t) {\n    for (var e in r) if (r[e][t]) return delete r[e][t], 0 === Object.keys(r[e]).length && delete r[e], !0;\n    return !1;\n  }, this.publish = function (t) {\n    if (r.hasOwnProperty(t)) {\n      var i = Array.prototype.slice.call(arguments, 1),\n        o = [];\n      for (var s in r[t]) {\n        var c = r[t][s];\n        try {\n          c[0].apply(e, i);\n        } catch (t) {\n          n.console && a.error(\"jsPDF PubSub Error\", t.message, t);\n        }\n        c[1] && o.push(s);\n      }\n      o.length && o.forEach(this.unsubscribe);\n    }\n  }, this.getTopics = function () {\n    return r;\n  };\n}\nfunction j(t) {\n  if (!(this instanceof j)) return new j(t);\n  var e = \"opacity,stroke-opacity\".split(\",\");\n  for (var r in t) t.hasOwnProperty(r) && e.indexOf(r) >= 0 && (this[r] = t[r]);\n  this.id = \"\", this.objectNumber = -1;\n}\nfunction O(t, e) {\n  this.gState = t, this.matrix = e, this.id = \"\", this.objectNumber = -1;\n}\nfunction B(t, e, r, n, i) {\n  if (!(this instanceof B)) return new B(t, e, r, n, i);\n  this.type = \"axial\" === t ? 2 : 3, this.coords = e, this.colors = r, O.call(this, n, i);\n}\nfunction M(t, e, r, n, i) {\n  if (!(this instanceof M)) return new M(t, e, r, n, i);\n  this.boundingBox = t, this.xStep = e, this.yStep = r, this.stream = \"\", this.cloneIndex = 0, O.call(this, n, i);\n}\nfunction E(e) {\n  var r,\n    i = \"string\" == typeof arguments[0] ? arguments[0] : \"p\",\n    o = arguments[1],\n    s = arguments[2],\n    c = arguments[3],\n    u = [],\n    d = 1,\n    p = 16,\n    g = \"S\",\n    m = null;\n  \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e = e || {}) && (i = e.orientation, o = e.unit || o, s = e.format || s, c = e.compress || e.compressPdf || c, null !== (m = e.encryption || null) && (m.userPassword = m.userPassword || \"\", m.ownerPassword = m.ownerPassword || \"\", m.userPermissions = m.userPermissions || []), d = \"number\" == typeof e.userUnit ? Math.abs(e.userUnit) : 1, void 0 !== e.precision && (r = e.precision), void 0 !== e.floatPrecision && (p = e.floatPrecision), g = e.defaultPathOperation || \"S\"), u = e.filters || (!0 === c ? [\"FlateEncode\"] : u), o = o || \"mm\", i = (\"\" + (i || \"P\")).toLowerCase();\n  var v = e.putOnlyUsedFonts || !1,\n    b = {},\n    y = {\n      internal: {},\n      __private__: {}\n    };\n  y.__private__.PubSub = C;\n  var w = \"1.3\",\n    N = y.__private__.getPdfVersion = function () {\n      return w;\n    };\n  y.__private__.setPdfVersion = function (t) {\n    w = t;\n  };\n  var L = {\n    a0: [2383.94, 3370.39],\n    a1: [1683.78, 2383.94],\n    a2: [1190.55, 1683.78],\n    a3: [841.89, 1190.55],\n    a4: [595.28, 841.89],\n    a5: [419.53, 595.28],\n    a6: [297.64, 419.53],\n    a7: [209.76, 297.64],\n    a8: [147.4, 209.76],\n    a9: [104.88, 147.4],\n    a10: [73.7, 104.88],\n    b0: [2834.65, 4008.19],\n    b1: [2004.09, 2834.65],\n    b2: [1417.32, 2004.09],\n    b3: [1000.63, 1417.32],\n    b4: [708.66, 1000.63],\n    b5: [498.9, 708.66],\n    b6: [354.33, 498.9],\n    b7: [249.45, 354.33],\n    b8: [175.75, 249.45],\n    b9: [124.72, 175.75],\n    b10: [87.87, 124.72],\n    c0: [2599.37, 3676.54],\n    c1: [1836.85, 2599.37],\n    c2: [1298.27, 1836.85],\n    c3: [918.43, 1298.27],\n    c4: [649.13, 918.43],\n    c5: [459.21, 649.13],\n    c6: [323.15, 459.21],\n    c7: [229.61, 323.15],\n    c8: [161.57, 229.61],\n    c9: [113.39, 161.57],\n    c10: [79.37, 113.39],\n    dl: [311.81, 623.62],\n    letter: [612, 792],\n    \"government-letter\": [576, 756],\n    legal: [612, 1008],\n    \"junior-legal\": [576, 360],\n    ledger: [1224, 792],\n    tabloid: [792, 1224],\n    \"credit-card\": [153, 243]\n  };\n  y.__private__.getPageFormats = function () {\n    return L;\n  };\n  var A = y.__private__.getPageFormat = function (t) {\n    return L[t];\n  };\n  s = s || \"a4\";\n  var x = {\n      COMPAT: \"compat\",\n      ADVANCED: \"advanced\"\n    },\n    S = x.COMPAT;\n  function _() {\n    this.saveGraphicsState(), lt(new Vt(_t, 0, 0, -_t, 0, Rr() * _t).toString() + \" cm\"), this.setFontSize(this.getFontSize() / _t), g = \"n\", S = x.ADVANCED;\n  }\n  function P() {\n    this.restoreGraphicsState(), g = \"S\", S = x.COMPAT;\n  }\n  var k = y.__private__.combineFontStyleAndFontWeight = function (t, e) {\n    if (\"bold\" == t && \"normal\" == e || \"bold\" == t && 400 == e || \"normal\" == t && \"italic\" == e || \"bold\" == t && \"italic\" == e) throw new Error(\"Invalid Combination of fontweight and fontstyle\");\n    return e && (t = 400 == e || \"normal\" === e ? \"italic\" === t ? \"italic\" : \"normal\" : 700 != e && \"bold\" !== e || \"normal\" !== t ? (700 == e ? \"bold\" : e) + \"\" + t : \"bold\"), t;\n  };\n  y.advancedAPI = function (t) {\n    var e = S === x.COMPAT;\n    return e && _.call(this), \"function\" != typeof t || (t(this), e && P.call(this)), this;\n  }, y.compatAPI = function (t) {\n    var e = S === x.ADVANCED;\n    return e && P.call(this), \"function\" != typeof t || (t(this), e && _.call(this)), this;\n  }, y.isAdvancedAPI = function () {\n    return S === x.ADVANCED;\n  };\n  var O,\n    q = function (t) {\n      if (S !== x.ADVANCED) throw new Error(t + \" is only available in 'advanced' API mode. You need to call advancedAPI() first.\");\n    },\n    D = y.roundToPrecision = y.__private__.roundToPrecision = function (t, e) {\n      var n = r || e;\n      if (isNaN(t) || isNaN(n)) throw new Error(\"Invalid argument passed to jsPDF.roundToPrecision\");\n      return t.toFixed(n).replace(/0+$/, \"\");\n    };\n  O = y.hpf = y.__private__.hpf = \"number\" == typeof p ? function (t) {\n    if (isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.hpf\");\n    return D(t, p);\n  } : \"smart\" === p ? function (t) {\n    if (isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.hpf\");\n    return D(t, t > -1 && t < 1 ? 16 : 5);\n  } : function (t) {\n    if (isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.hpf\");\n    return D(t, 16);\n  };\n  var R = y.f2 = y.__private__.f2 = function (t) {\n      if (isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.f2\");\n      return D(t, 2);\n    },\n    T = y.__private__.f3 = function (t) {\n      if (isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.f3\");\n      return D(t, 3);\n    },\n    U = y.scale = y.__private__.scale = function (t) {\n      if (isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.scale\");\n      return S === x.COMPAT ? t * _t : S === x.ADVANCED ? t : void 0;\n    },\n    z = function (t) {\n      return S === x.COMPAT ? Rr() - t : S === x.ADVANCED ? t : void 0;\n    },\n    H = function (t) {\n      return U(z(t));\n    };\n  y.__private__.setPrecision = y.setPrecision = function (t) {\n    \"number\" == typeof parseInt(t, 10) && (r = parseInt(t, 10));\n  };\n  var W,\n    V = \"00000000000000000000000000000000\",\n    G = y.__private__.getFileId = function () {\n      return V;\n    },\n    Y = y.__private__.setFileId = function (t) {\n      return V = void 0 !== t && /^[a-fA-F0-9]{32}$/.test(t) ? t.toUpperCase() : V.split(\"\").map(function () {\n        return \"ABCDEF0123456789\".charAt(Math.floor(16 * Math.random()));\n      }).join(\"\"), null !== m && (Ye = new I(m.userPermissions, m.userPassword, m.ownerPassword, V)), V;\n    };\n  y.setFileId = function (t) {\n    return Y(t), this;\n  }, y.getFileId = function () {\n    return G();\n  };\n  var J = y.__private__.convertDateToPDFDate = function (t) {\n      var e = t.getTimezoneOffset(),\n        r = e < 0 ? \"+\" : \"-\",\n        n = Math.floor(Math.abs(e / 60)),\n        i = Math.abs(e % 60),\n        a = [r, Q(n), \"'\", Q(i), \"'\"].join(\"\");\n      return [\"D:\", t.getFullYear(), Q(t.getMonth() + 1), Q(t.getDate()), Q(t.getHours()), Q(t.getMinutes()), Q(t.getSeconds()), a].join(\"\");\n    },\n    X = y.__private__.convertPDFDateToDate = function (t) {\n      var e = parseInt(t.substr(2, 4), 10),\n        r = parseInt(t.substr(6, 2), 10) - 1,\n        n = parseInt(t.substr(8, 2), 10),\n        i = parseInt(t.substr(10, 2), 10),\n        a = parseInt(t.substr(12, 2), 10),\n        o = parseInt(t.substr(14, 2), 10);\n      return new Date(e, r, n, i, a, o, 0);\n    },\n    K = y.__private__.setCreationDate = function (t) {\n      var e;\n      if (void 0 === t && (t = new Date()), t instanceof Date) e = J(t);else {\n        if (!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\\+0[0-9]|\\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t)) throw new Error(\"Invalid argument passed to jsPDF.setCreationDate\");\n        e = t;\n      }\n      return W = e;\n    },\n    Z = y.__private__.getCreationDate = function (t) {\n      var e = W;\n      return \"jsDate\" === t && (e = X(W)), e;\n    };\n  y.setCreationDate = function (t) {\n    return K(t), this;\n  }, y.getCreationDate = function (t) {\n    return Z(t);\n  };\n  var $,\n    Q = y.__private__.padd2 = function (t) {\n      return (\"0\" + parseInt(t)).slice(-2);\n    },\n    tt = y.__private__.padd2Hex = function (t) {\n      return (\"00\" + (t = t.toString())).substr(t.length);\n    },\n    et = 0,\n    rt = [],\n    nt = [],\n    it = 0,\n    at = [],\n    ot = [],\n    st = !1,\n    ct = nt,\n    ut = function () {\n      et = 0, it = 0, nt = [], rt = [], at = [], Qt = Kt(), te = Kt();\n    };\n  y.__private__.setCustomOutputDestination = function (t) {\n    st = !0, ct = t;\n  };\n  var ht = function (t) {\n    st || (ct = t);\n  };\n  y.__private__.resetCustomOutputDestination = function () {\n    st = !1, ct = nt;\n  };\n  var lt = y.__private__.out = function (t) {\n      return t = t.toString(), it += t.length + 1, ct.push(t), ct;\n    },\n    ft = y.__private__.write = function (t) {\n      return lt(1 === arguments.length ? t.toString() : Array.prototype.join.call(arguments, \" \"));\n    },\n    dt = y.__private__.getArrayBuffer = function (t) {\n      for (var e = t.length, r = new ArrayBuffer(e), n = new Uint8Array(r); e--;) n[e] = t.charCodeAt(e);\n      return r;\n    },\n    pt = [[\"Helvetica\", \"helvetica\", \"normal\", \"WinAnsiEncoding\"], [\"Helvetica-Bold\", \"helvetica\", \"bold\", \"WinAnsiEncoding\"], [\"Helvetica-Oblique\", \"helvetica\", \"italic\", \"WinAnsiEncoding\"], [\"Helvetica-BoldOblique\", \"helvetica\", \"bolditalic\", \"WinAnsiEncoding\"], [\"Courier\", \"courier\", \"normal\", \"WinAnsiEncoding\"], [\"Courier-Bold\", \"courier\", \"bold\", \"WinAnsiEncoding\"], [\"Courier-Oblique\", \"courier\", \"italic\", \"WinAnsiEncoding\"], [\"Courier-BoldOblique\", \"courier\", \"bolditalic\", \"WinAnsiEncoding\"], [\"Times-Roman\", \"times\", \"normal\", \"WinAnsiEncoding\"], [\"Times-Bold\", \"times\", \"bold\", \"WinAnsiEncoding\"], [\"Times-Italic\", \"times\", \"italic\", \"WinAnsiEncoding\"], [\"Times-BoldItalic\", \"times\", \"bolditalic\", \"WinAnsiEncoding\"], [\"ZapfDingbats\", \"zapfdingbats\", \"normal\", null], [\"Symbol\", \"symbol\", \"normal\", null]];\n  y.__private__.getStandardFonts = function () {\n    return pt;\n  };\n  var gt = e.fontSize || 16;\n  y.__private__.setFontSize = y.setFontSize = function (t) {\n    return gt = S === x.ADVANCED ? t / _t : t, this;\n  };\n  var mt,\n    vt = y.__private__.getFontSize = y.getFontSize = function () {\n      return S === x.COMPAT ? gt : gt * _t;\n    },\n    bt = e.R2L || !1;\n  y.__private__.setR2L = y.setR2L = function (t) {\n    return bt = t, this;\n  }, y.__private__.getR2L = y.getR2L = function () {\n    return bt;\n  };\n  var yt,\n    wt = y.__private__.setZoomMode = function (t) {\n      var e = [void 0, null, \"fullwidth\", \"fullheight\", \"fullpage\", \"original\"];\n      if (/^(?:\\d+\\.\\d*|\\d*\\.\\d+|\\d+)%$/.test(t)) mt = t;else if (isNaN(t)) {\n        if (-1 === e.indexOf(t)) throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. \"' + t + '\" is not recognized.');\n        mt = t;\n      } else mt = parseInt(t, 10);\n    };\n  y.__private__.getZoomMode = function () {\n    return mt;\n  };\n  var Nt,\n    Lt = y.__private__.setPageMode = function (t) {\n      if (-1 == [void 0, null, \"UseNone\", \"UseOutlines\", \"UseThumbs\", \"FullScreen\"].indexOf(t)) throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. \"' + t + '\" is not recognized.');\n      yt = t;\n    };\n  y.__private__.getPageMode = function () {\n    return yt;\n  };\n  var At = y.__private__.setLayoutMode = function (t) {\n    if (-1 == [void 0, null, \"continuous\", \"single\", \"twoleft\", \"tworight\", \"two\"].indexOf(t)) throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. \"' + t + '\" is not recognized.');\n    Nt = t;\n  };\n  y.__private__.getLayoutMode = function () {\n    return Nt;\n  }, y.__private__.setDisplayMode = y.setDisplayMode = function (t, e, r) {\n    return wt(t), At(e), Lt(r), this;\n  };\n  var xt = {\n    title: \"\",\n    subject: \"\",\n    author: \"\",\n    keywords: \"\",\n    creator: \"\"\n  };\n  y.__private__.getDocumentProperty = function (t) {\n    if (-1 === Object.keys(xt).indexOf(t)) throw new Error(\"Invalid argument passed to jsPDF.getDocumentProperty\");\n    return xt[t];\n  }, y.__private__.getDocumentProperties = function () {\n    return xt;\n  }, y.__private__.setDocumentProperties = y.setProperties = y.setDocumentProperties = function (t) {\n    for (var e in xt) xt.hasOwnProperty(e) && t[e] && (xt[e] = t[e]);\n    return this;\n  }, y.__private__.setDocumentProperty = function (t, e) {\n    if (-1 === Object.keys(xt).indexOf(t)) throw new Error(\"Invalid arguments passed to jsPDF.setDocumentProperty\");\n    return xt[t] = e;\n  };\n  var St,\n    _t,\n    Pt,\n    kt,\n    It,\n    Ft = {},\n    Ct = {},\n    jt = [],\n    Ot = {},\n    Bt = {},\n    Mt = {},\n    Et = {},\n    qt = null,\n    Dt = 0,\n    Rt = [],\n    Tt = new C(y),\n    Ut = e.hotfixes || [],\n    zt = {},\n    Ht = {},\n    Wt = [],\n    Vt = function t(e, r, n, i, a, o) {\n      if (!(this instanceof t)) return new t(e, r, n, i, a, o);\n      isNaN(e) && (e = 1), isNaN(r) && (r = 0), isNaN(n) && (n = 0), isNaN(i) && (i = 1), isNaN(a) && (a = 0), isNaN(o) && (o = 0), this._matrix = [e, r, n, i, a, o];\n    };\n  Object.defineProperty(Vt.prototype, \"sx\", {\n    get: function () {\n      return this._matrix[0];\n    },\n    set: function (t) {\n      this._matrix[0] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"shy\", {\n    get: function () {\n      return this._matrix[1];\n    },\n    set: function (t) {\n      this._matrix[1] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"shx\", {\n    get: function () {\n      return this._matrix[2];\n    },\n    set: function (t) {\n      this._matrix[2] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"sy\", {\n    get: function () {\n      return this._matrix[3];\n    },\n    set: function (t) {\n      this._matrix[3] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"tx\", {\n    get: function () {\n      return this._matrix[4];\n    },\n    set: function (t) {\n      this._matrix[4] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"ty\", {\n    get: function () {\n      return this._matrix[5];\n    },\n    set: function (t) {\n      this._matrix[5] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"a\", {\n    get: function () {\n      return this._matrix[0];\n    },\n    set: function (t) {\n      this._matrix[0] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"b\", {\n    get: function () {\n      return this._matrix[1];\n    },\n    set: function (t) {\n      this._matrix[1] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"c\", {\n    get: function () {\n      return this._matrix[2];\n    },\n    set: function (t) {\n      this._matrix[2] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"d\", {\n    get: function () {\n      return this._matrix[3];\n    },\n    set: function (t) {\n      this._matrix[3] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"e\", {\n    get: function () {\n      return this._matrix[4];\n    },\n    set: function (t) {\n      this._matrix[4] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"f\", {\n    get: function () {\n      return this._matrix[5];\n    },\n    set: function (t) {\n      this._matrix[5] = t;\n    }\n  }), Object.defineProperty(Vt.prototype, \"rotation\", {\n    get: function () {\n      return Math.atan2(this.shx, this.sx);\n    }\n  }), Object.defineProperty(Vt.prototype, \"scaleX\", {\n    get: function () {\n      return this.decompose().scale.sx;\n    }\n  }), Object.defineProperty(Vt.prototype, \"scaleY\", {\n    get: function () {\n      return this.decompose().scale.sy;\n    }\n  }), Object.defineProperty(Vt.prototype, \"isIdentity\", {\n    get: function () {\n      return 1 === this.sx && 0 === this.shy && 0 === this.shx && 1 === this.sy && 0 === this.tx && 0 === this.ty;\n    }\n  }), Vt.prototype.join = function (t) {\n    return [this.sx, this.shy, this.shx, this.sy, this.tx, this.ty].map(O).join(t);\n  }, Vt.prototype.multiply = function (t) {\n    var e = t.sx * this.sx + t.shy * this.shx,\n      r = t.sx * this.shy + t.shy * this.sy,\n      n = t.shx * this.sx + t.sy * this.shx,\n      i = t.shx * this.shy + t.sy * this.sy,\n      a = t.tx * this.sx + t.ty * this.shx + this.tx,\n      o = t.tx * this.shy + t.ty * this.sy + this.ty;\n    return new Vt(e, r, n, i, a, o);\n  }, Vt.prototype.decompose = function () {\n    var t = this.sx,\n      e = this.shy,\n      r = this.shx,\n      n = this.sy,\n      i = this.tx,\n      a = this.ty,\n      o = Math.sqrt(t * t + e * e),\n      s = (t /= o) * r + (e /= o) * n;\n    r -= t * s, n -= e * s;\n    var c = Math.sqrt(r * r + n * n);\n    return s /= c, t * (n /= c) < e * (r /= c) && (t = -t, e = -e, s = -s, o = -o), {\n      scale: new Vt(o, 0, 0, c, 0, 0),\n      translate: new Vt(1, 0, 0, 1, i, a),\n      rotate: new Vt(t, e, -e, t, 0, 0),\n      skew: new Vt(1, 0, s, 1, 0, 0)\n    };\n  }, Vt.prototype.toString = function (t) {\n    return this.join(\" \");\n  }, Vt.prototype.inversed = function () {\n    var t = this.sx,\n      e = this.shy,\n      r = this.shx,\n      n = this.sy,\n      i = this.tx,\n      a = this.ty,\n      o = 1 / (t * n - e * r),\n      s = n * o,\n      c = -e * o,\n      u = -r * o,\n      h = t * o;\n    return new Vt(s, c, u, h, -s * i - u * a, -c * i - h * a);\n  }, Vt.prototype.applyToPoint = function (t) {\n    var e = t.x * this.sx + t.y * this.shx + this.tx,\n      r = t.x * this.shy + t.y * this.sy + this.ty;\n    return new Cr(e, r);\n  }, Vt.prototype.applyToRectangle = function (t) {\n    var e = this.applyToPoint(t),\n      r = this.applyToPoint(new Cr(t.x + t.w, t.y + t.h));\n    return new jr(e.x, e.y, r.x - e.x, r.y - e.y);\n  }, Vt.prototype.clone = function () {\n    var t = this.sx,\n      e = this.shy,\n      r = this.shx,\n      n = this.sy,\n      i = this.tx,\n      a = this.ty;\n    return new Vt(t, e, r, n, i, a);\n  }, y.Matrix = Vt;\n  var Gt = y.matrixMult = function (t, e) {\n      return e.multiply(t);\n    },\n    Yt = new Vt(1, 0, 0, 1, 0, 0);\n  y.unitMatrix = y.identityMatrix = Yt;\n  var Jt = function (t, e) {\n    if (!Bt[t]) {\n      var r = (e instanceof B ? \"Sh\" : \"P\") + (Object.keys(Ot).length + 1).toString(10);\n      e.id = r, Bt[t] = r, Ot[r] = e, Tt.publish(\"addPattern\", e);\n    }\n  };\n  y.ShadingPattern = B, y.TilingPattern = M, y.addShadingPattern = function (t, e) {\n    return q(\"addShadingPattern()\"), Jt(t, e), this;\n  }, y.beginTilingPattern = function (t) {\n    q(\"beginTilingPattern()\"), Br(t.boundingBox[0], t.boundingBox[1], t.boundingBox[2] - t.boundingBox[0], t.boundingBox[3] - t.boundingBox[1], t.matrix);\n  }, y.endTilingPattern = function (t, e) {\n    q(\"endTilingPattern()\"), e.stream = ot[$].join(\"\\n\"), Jt(t, e), Tt.publish(\"endTilingPattern\", e), Wt.pop().restore();\n  };\n  var Xt = y.__private__.newObject = function () {\n      var t = Kt();\n      return Zt(t, !0), t;\n    },\n    Kt = y.__private__.newObjectDeferred = function () {\n      return et++, rt[et] = function () {\n        return it;\n      }, et;\n    },\n    Zt = function (t, e) {\n      return e = \"boolean\" == typeof e && e, rt[t] = it, e && lt(t + \" 0 obj\"), t;\n    },\n    $t = y.__private__.newAdditionalObject = function () {\n      var t = {\n        objId: Kt(),\n        content: \"\"\n      };\n      return at.push(t), t;\n    },\n    Qt = Kt(),\n    te = Kt(),\n    ee = y.__private__.decodeColorString = function (t) {\n      var e = t.split(\" \");\n      if (2 !== e.length || \"g\" !== e[1] && \"G\" !== e[1]) {\n        if (5 === e.length && (\"k\" === e[4] || \"K\" === e[4])) {\n          e = [(1 - e[0]) * (1 - e[3]), (1 - e[1]) * (1 - e[3]), (1 - e[2]) * (1 - e[3]), \"r\"];\n        }\n      } else {\n        var r = parseFloat(e[0]);\n        e = [r, r, r, \"r\"];\n      }\n      for (var n = \"#\", i = 0; i < 3; i++) n += (\"0\" + Math.floor(255 * parseFloat(e[i])).toString(16)).slice(-2);\n      return n;\n    },\n    re = y.__private__.encodeColorString = function (e) {\n      var r;\n      \"string\" == typeof e && (e = {\n        ch1: e\n      });\n      var n = e.ch1,\n        i = e.ch2,\n        a = e.ch3,\n        o = e.ch4,\n        s = \"draw\" === e.pdfColorType ? [\"G\", \"RG\", \"K\"] : [\"g\", \"rg\", \"k\"];\n      if (\"string\" == typeof n && \"#\" !== n.charAt(0)) {\n        var c = new f(n);\n        if (c.ok) n = c.toHex();else if (!/^\\d*\\.?\\d*$/.test(n)) throw new Error('Invalid color \"' + n + '\" passed to jsPDF.encodeColorString.');\n      }\n      if (\"string\" == typeof n && /^#[0-9A-Fa-f]{3}$/.test(n) && (n = \"#\" + n[1] + n[1] + n[2] + n[2] + n[3] + n[3]), \"string\" == typeof n && /^#[0-9A-Fa-f]{6}$/.test(n)) {\n        var u = parseInt(n.substr(1), 16);\n        n = u >> 16 & 255, i = u >> 8 & 255, a = 255 & u;\n      }\n      if (void 0 === i || void 0 === o && n === i && i === a) {\n        if (\"string\" == typeof n) r = n + \" \" + s[0];else switch (e.precision) {\n          case 2:\n            r = R(n / 255) + \" \" + s[0];\n            break;\n          case 3:\n          default:\n            r = T(n / 255) + \" \" + s[0];\n        }\n      } else if (void 0 === o || \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(o)) {\n        if (o && !isNaN(o.a) && 0 === o.a) return r = [\"1.\", \"1.\", \"1.\", s[1]].join(\" \");\n        if (\"string\" == typeof n) r = [n, i, a, s[1]].join(\" \");else switch (e.precision) {\n          case 2:\n            r = [R(n / 255), R(i / 255), R(a / 255), s[1]].join(\" \");\n            break;\n          default:\n          case 3:\n            r = [T(n / 255), T(i / 255), T(a / 255), s[1]].join(\" \");\n        }\n      } else if (\"string\" == typeof n) r = [n, i, a, o, s[2]].join(\" \");else switch (e.precision) {\n        case 2:\n          r = [R(n), R(i), R(a), R(o), s[2]].join(\" \");\n          break;\n        case 3:\n        default:\n          r = [T(n), T(i), T(a), T(o), s[2]].join(\" \");\n      }\n      return r;\n    },\n    ne = y.__private__.getFilters = function () {\n      return u;\n    },\n    ie = y.__private__.putStream = function (t) {\n      var e = (t = t || {}).data || \"\",\n        r = t.filters || ne(),\n        n = t.alreadyAppliedFilters || [],\n        i = t.addLength1 || !1,\n        a = e.length,\n        o = t.objectId,\n        s = function (t) {\n          return t;\n        };\n      if (null !== m && void 0 === o) throw new Error(\"ObjectId must be passed to putStream for file encryption\");\n      null !== m && (s = Ye.encryptor(o, 0));\n      var c = {};\n      !0 === r && (r = [\"FlateEncode\"]);\n      var u = t.additionalKeyValues || [],\n        h = (c = void 0 !== E.API.processDataByFilters ? E.API.processDataByFilters(e, r) : {\n          data: e,\n          reverseChain: []\n        }).reverseChain + (Array.isArray(n) ? n.join(\" \") : n.toString());\n      if (0 !== c.data.length && (u.push({\n        key: \"Length\",\n        value: c.data.length\n      }), !0 === i && u.push({\n        key: \"Length1\",\n        value: a\n      })), 0 != h.length) if (h.split(\"/\").length - 1 == 1) u.push({\n        key: \"Filter\",\n        value: h\n      });else {\n        u.push({\n          key: \"Filter\",\n          value: \"[\" + h + \"]\"\n        });\n        for (var l = 0; l < u.length; l += 1) if (\"DecodeParms\" === u[l].key) {\n          for (var f = [], d = 0; d < c.reverseChain.split(\"/\").length - 1; d += 1) f.push(\"null\");\n          f.push(u[l].value), u[l].value = \"[\" + f.join(\" \") + \"]\";\n        }\n      }\n      lt(\"<<\");\n      for (var p = 0; p < u.length; p++) lt(\"/\" + u[p].key + \" \" + u[p].value);\n      lt(\">>\"), 0 !== c.data.length && (lt(\"stream\"), lt(s(c.data)), lt(\"endstream\"));\n    },\n    ae = y.__private__.putPage = function (t) {\n      var e = t.number,\n        r = t.data,\n        n = t.objId,\n        i = t.contentsObjId;\n      Zt(n, !0), lt(\"<</Type /Page\"), lt(\"/Parent \" + t.rootDictionaryObjId + \" 0 R\"), lt(\"/Resources \" + t.resourceDictionaryObjId + \" 0 R\"), lt(\"/MediaBox [\" + parseFloat(O(t.mediaBox.bottomLeftX)) + \" \" + parseFloat(O(t.mediaBox.bottomLeftY)) + \" \" + O(t.mediaBox.topRightX) + \" \" + O(t.mediaBox.topRightY) + \"]\"), null !== t.cropBox && lt(\"/CropBox [\" + O(t.cropBox.bottomLeftX) + \" \" + O(t.cropBox.bottomLeftY) + \" \" + O(t.cropBox.topRightX) + \" \" + O(t.cropBox.topRightY) + \"]\"), null !== t.bleedBox && lt(\"/BleedBox [\" + O(t.bleedBox.bottomLeftX) + \" \" + O(t.bleedBox.bottomLeftY) + \" \" + O(t.bleedBox.topRightX) + \" \" + O(t.bleedBox.topRightY) + \"]\"), null !== t.trimBox && lt(\"/TrimBox [\" + O(t.trimBox.bottomLeftX) + \" \" + O(t.trimBox.bottomLeftY) + \" \" + O(t.trimBox.topRightX) + \" \" + O(t.trimBox.topRightY) + \"]\"), null !== t.artBox && lt(\"/ArtBox [\" + O(t.artBox.bottomLeftX) + \" \" + O(t.artBox.bottomLeftY) + \" \" + O(t.artBox.topRightX) + \" \" + O(t.artBox.topRightY) + \"]\"), \"number\" == typeof t.userUnit && 1 !== t.userUnit && lt(\"/UserUnit \" + t.userUnit), Tt.publish(\"putPage\", {\n        objId: n,\n        pageContext: Rt[e],\n        pageNumber: e,\n        page: r\n      }), lt(\"/Contents \" + i + \" 0 R\"), lt(\">>\"), lt(\"endobj\");\n      var a = r.join(\"\\n\");\n      return S === x.ADVANCED && (a += \"\\nQ\"), Zt(i, !0), ie({\n        data: a,\n        filters: ne(),\n        objectId: i\n      }), lt(\"endobj\"), n;\n    },\n    oe = y.__private__.putPages = function () {\n      var t,\n        e,\n        r = [];\n      for (t = 1; t <= Dt; t++) Rt[t].objId = Kt(), Rt[t].contentsObjId = Kt();\n      for (t = 1; t <= Dt; t++) r.push(ae({\n        number: t,\n        data: ot[t],\n        objId: Rt[t].objId,\n        contentsObjId: Rt[t].contentsObjId,\n        mediaBox: Rt[t].mediaBox,\n        cropBox: Rt[t].cropBox,\n        bleedBox: Rt[t].bleedBox,\n        trimBox: Rt[t].trimBox,\n        artBox: Rt[t].artBox,\n        userUnit: Rt[t].userUnit,\n        rootDictionaryObjId: Qt,\n        resourceDictionaryObjId: te\n      }));\n      Zt(Qt, !0), lt(\"<</Type /Pages\");\n      var n = \"/Kids [\";\n      for (e = 0; e < Dt; e++) n += r[e] + \" 0 R \";\n      lt(n + \"]\"), lt(\"/Count \" + Dt), lt(\">>\"), lt(\"endobj\"), Tt.publish(\"postPutPages\");\n    },\n    se = function (t) {\n      Tt.publish(\"putFont\", {\n        font: t,\n        out: lt,\n        newObject: Xt,\n        putStream: ie\n      }), !0 !== t.isAlreadyPutted && (t.objectNumber = Xt(), lt(\"<<\"), lt(\"/Type /Font\"), lt(\"/BaseFont /\" + F(t.postScriptName)), lt(\"/Subtype /Type1\"), \"string\" == typeof t.encoding && lt(\"/Encoding /\" + t.encoding), lt(\"/FirstChar 32\"), lt(\"/LastChar 255\"), lt(\">>\"), lt(\"endobj\"));\n    },\n    ce = function () {\n      for (var t in Ft) Ft.hasOwnProperty(t) && (!1 === v || !0 === v && b.hasOwnProperty(t)) && se(Ft[t]);\n    },\n    ue = function (t) {\n      t.objectNumber = Xt();\n      var e = [];\n      e.push({\n        key: \"Type\",\n        value: \"/XObject\"\n      }), e.push({\n        key: \"Subtype\",\n        value: \"/Form\"\n      }), e.push({\n        key: \"BBox\",\n        value: \"[\" + [O(t.x), O(t.y), O(t.x + t.width), O(t.y + t.height)].join(\" \") + \"]\"\n      }), e.push({\n        key: \"Matrix\",\n        value: \"[\" + t.matrix.toString() + \"]\"\n      });\n      var r = t.pages[1].join(\"\\n\");\n      ie({\n        data: r,\n        additionalKeyValues: e,\n        objectId: t.objectNumber\n      }), lt(\"endobj\");\n    },\n    he = function () {\n      for (var t in zt) zt.hasOwnProperty(t) && ue(zt[t]);\n    },\n    le = function (t, e) {\n      var r,\n        n = [],\n        i = 1 / (e - 1);\n      for (r = 0; r < 1; r += i) n.push(r);\n      if (n.push(1), 0 != t[0].offset) {\n        var a = {\n          offset: 0,\n          color: t[0].color\n        };\n        t.unshift(a);\n      }\n      if (1 != t[t.length - 1].offset) {\n        var o = {\n          offset: 1,\n          color: t[t.length - 1].color\n        };\n        t.push(o);\n      }\n      for (var s = \"\", c = 0, u = 0; u < n.length; u++) {\n        for (r = n[u]; r > t[c + 1].offset;) c++;\n        var h = t[c].offset,\n          l = (r - h) / (t[c + 1].offset - h),\n          f = t[c].color,\n          d = t[c + 1].color;\n        s += tt(Math.round((1 - l) * f[0] + l * d[0]).toString(16)) + tt(Math.round((1 - l) * f[1] + l * d[1]).toString(16)) + tt(Math.round((1 - l) * f[2] + l * d[2]).toString(16));\n      }\n      return s.trim();\n    },\n    fe = function (t, e) {\n      e || (e = 21);\n      var r = Xt(),\n        n = le(t.colors, e),\n        i = [];\n      i.push({\n        key: \"FunctionType\",\n        value: \"0\"\n      }), i.push({\n        key: \"Domain\",\n        value: \"[0.0 1.0]\"\n      }), i.push({\n        key: \"Size\",\n        value: \"[\" + e + \"]\"\n      }), i.push({\n        key: \"BitsPerSample\",\n        value: \"8\"\n      }), i.push({\n        key: \"Range\",\n        value: \"[0.0 1.0 0.0 1.0 0.0 1.0]\"\n      }), i.push({\n        key: \"Decode\",\n        value: \"[0.0 1.0 0.0 1.0 0.0 1.0]\"\n      }), ie({\n        data: n,\n        additionalKeyValues: i,\n        alreadyAppliedFilters: [\"/ASCIIHexDecode\"],\n        objectId: r\n      }), lt(\"endobj\"), t.objectNumber = Xt(), lt(\"<< /ShadingType \" + t.type), lt(\"/ColorSpace /DeviceRGB\");\n      var a = \"/Coords [\" + O(parseFloat(t.coords[0])) + \" \" + O(parseFloat(t.coords[1])) + \" \";\n      2 === t.type ? a += O(parseFloat(t.coords[2])) + \" \" + O(parseFloat(t.coords[3])) : a += O(parseFloat(t.coords[2])) + \" \" + O(parseFloat(t.coords[3])) + \" \" + O(parseFloat(t.coords[4])) + \" \" + O(parseFloat(t.coords[5])), lt(a += \"]\"), t.matrix && lt(\"/Matrix [\" + t.matrix.toString() + \"]\"), lt(\"/Function \" + r + \" 0 R\"), lt(\"/Extend [true true]\"), lt(\">>\"), lt(\"endobj\");\n    },\n    de = function (t, e) {\n      var r = Kt(),\n        n = Xt();\n      e.push({\n        resourcesOid: r,\n        objectOid: n\n      }), t.objectNumber = n;\n      var i = [];\n      i.push({\n        key: \"Type\",\n        value: \"/Pattern\"\n      }), i.push({\n        key: \"PatternType\",\n        value: \"1\"\n      }), i.push({\n        key: \"PaintType\",\n        value: \"1\"\n      }), i.push({\n        key: \"TilingType\",\n        value: \"1\"\n      }), i.push({\n        key: \"BBox\",\n        value: \"[\" + t.boundingBox.map(O).join(\" \") + \"]\"\n      }), i.push({\n        key: \"XStep\",\n        value: O(t.xStep)\n      }), i.push({\n        key: \"YStep\",\n        value: O(t.yStep)\n      }), i.push({\n        key: \"Resources\",\n        value: r + \" 0 R\"\n      }), t.matrix && i.push({\n        key: \"Matrix\",\n        value: \"[\" + t.matrix.toString() + \"]\"\n      }), ie({\n        data: t.stream,\n        additionalKeyValues: i,\n        objectId: t.objectNumber\n      }), lt(\"endobj\");\n    },\n    pe = function (t) {\n      var e;\n      for (e in Ot) Ot.hasOwnProperty(e) && (Ot[e] instanceof B ? fe(Ot[e]) : Ot[e] instanceof M && de(Ot[e], t));\n    },\n    ge = function (t) {\n      for (var e in t.objectNumber = Xt(), lt(\"<<\"), t) switch (e) {\n        case \"opacity\":\n          lt(\"/ca \" + R(t[e]));\n          break;\n        case \"stroke-opacity\":\n          lt(\"/CA \" + R(t[e]));\n      }\n      lt(\">>\"), lt(\"endobj\");\n    },\n    me = function () {\n      var t;\n      for (t in Mt) Mt.hasOwnProperty(t) && ge(Mt[t]);\n    },\n    ve = function () {\n      for (var t in lt(\"/XObject <<\"), zt) zt.hasOwnProperty(t) && zt[t].objectNumber >= 0 && lt(\"/\" + t + \" \" + zt[t].objectNumber + \" 0 R\");\n      Tt.publish(\"putXobjectDict\"), lt(\">>\");\n    },\n    be = function () {\n      Ye.oid = Xt(), lt(\"<<\"), lt(\"/Filter /Standard\"), lt(\"/V \" + Ye.v), lt(\"/R \" + Ye.r), lt(\"/U <\" + Ye.toHexString(Ye.U) + \">\"), lt(\"/O <\" + Ye.toHexString(Ye.O) + \">\"), lt(\"/P \" + Ye.P), lt(\">>\"), lt(\"endobj\");\n    },\n    ye = function () {\n      for (var t in lt(\"/Font <<\"), Ft) Ft.hasOwnProperty(t) && (!1 === v || !0 === v && b.hasOwnProperty(t)) && lt(\"/\" + t + \" \" + Ft[t].objectNumber + \" 0 R\");\n      lt(\">>\");\n    },\n    we = function () {\n      if (Object.keys(Ot).length > 0) {\n        for (var t in lt(\"/Shading <<\"), Ot) Ot.hasOwnProperty(t) && Ot[t] instanceof B && Ot[t].objectNumber >= 0 && lt(\"/\" + t + \" \" + Ot[t].objectNumber + \" 0 R\");\n        Tt.publish(\"putShadingPatternDict\"), lt(\">>\");\n      }\n    },\n    Ne = function (t) {\n      if (Object.keys(Ot).length > 0) {\n        for (var e in lt(\"/Pattern <<\"), Ot) Ot.hasOwnProperty(e) && Ot[e] instanceof y.TilingPattern && Ot[e].objectNumber >= 0 && Ot[e].objectNumber < t && lt(\"/\" + e + \" \" + Ot[e].objectNumber + \" 0 R\");\n        Tt.publish(\"putTilingPatternDict\"), lt(\">>\");\n      }\n    },\n    Le = function () {\n      if (Object.keys(Mt).length > 0) {\n        var t;\n        for (t in lt(\"/ExtGState <<\"), Mt) Mt.hasOwnProperty(t) && Mt[t].objectNumber >= 0 && lt(\"/\" + t + \" \" + Mt[t].objectNumber + \" 0 R\");\n        Tt.publish(\"putGStateDict\"), lt(\">>\");\n      }\n    },\n    Ae = function (t) {\n      Zt(t.resourcesOid, !0), lt(\"<<\"), lt(\"/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]\"), ye(), we(), Ne(t.objectOid), Le(), ve(), lt(\">>\"), lt(\"endobj\");\n    },\n    xe = function () {\n      var t = [];\n      ce(), me(), he(), pe(t), Tt.publish(\"putResources\"), t.forEach(Ae), Ae({\n        resourcesOid: te,\n        objectOid: Number.MAX_SAFE_INTEGER\n      }), Tt.publish(\"postPutResources\");\n    },\n    Se = function () {\n      Tt.publish(\"putAdditionalObjects\");\n      for (var t = 0; t < at.length; t++) {\n        var e = at[t];\n        Zt(e.objId, !0), lt(e.content), lt(\"endobj\");\n      }\n      Tt.publish(\"postPutAdditionalObjects\");\n    },\n    _e = function (t) {\n      Ct[t.fontName] = Ct[t.fontName] || {}, Ct[t.fontName][t.fontStyle] = t.id;\n    },\n    Pe = function (t, e, r, n, i) {\n      var a = {\n        id: \"F\" + (Object.keys(Ft).length + 1).toString(10),\n        postScriptName: t,\n        fontName: e,\n        fontStyle: r,\n        encoding: n,\n        isStandardFont: i || !1,\n        metadata: {}\n      };\n      return Tt.publish(\"addFont\", {\n        font: a,\n        instance: this\n      }), Ft[a.id] = a, _e(a), a.id;\n    },\n    ke = function (t) {\n      for (var e = 0, r = pt.length; e < r; e++) {\n        var n = Pe.call(this, t[e][0], t[e][1], t[e][2], pt[e][3], !0);\n        !1 === v && (b[n] = !0);\n        var i = t[e][0].split(\"-\");\n        _e({\n          id: n,\n          fontName: i[0],\n          fontStyle: i[1] || \"\"\n        });\n      }\n      Tt.publish(\"addFonts\", {\n        fonts: Ft,\n        dictionary: Ct\n      });\n    },\n    Ie = function (t) {\n      return t.foo = function () {\n        try {\n          return t.apply(this, arguments);\n        } catch (t) {\n          var e = t.stack || \"\";\n          ~e.indexOf(\" at \") && (e = e.split(\" at \")[1]);\n          var r = \"Error in function \" + e.split(\"\\n\")[0].split(\"<\")[0] + \": \" + t.message;\n          if (!n.console) throw new Error(r);\n          n.console.error(r, t), n.alert && alert(r);\n        }\n      }, t.foo.bar = t, t.foo;\n    },\n    Fe = function (t, e) {\n      var r, n, i, a, o, s, c, u, h;\n      if (i = (e = e || {}).sourceEncoding || \"Unicode\", o = e.outputEncoding, (e.autoencode || o) && Ft[St].metadata && Ft[St].metadata[i] && Ft[St].metadata[i].encoding && (a = Ft[St].metadata[i].encoding, !o && Ft[St].encoding && (o = Ft[St].encoding), !o && a.codePages && (o = a.codePages[0]), \"string\" == typeof o && (o = a[o]), o)) {\n        for (c = !1, s = [], r = 0, n = t.length; r < n; r++) (u = o[t.charCodeAt(r)]) ? s.push(String.fromCharCode(u)) : s.push(t[r]), s[r].charCodeAt(0) >> 8 && (c = !0);\n        t = s.join(\"\");\n      }\n      for (r = t.length; void 0 === c && 0 !== r;) t.charCodeAt(r - 1) >> 8 && (c = !0), r--;\n      if (!c) return t;\n      for (s = e.noBOM ? [] : [254, 255], r = 0, n = t.length; r < n; r++) {\n        if ((h = (u = t.charCodeAt(r)) >> 8) >> 8) throw new Error(\"Character at position \" + r + \" of string '\" + t + \"' exceeds 16bits. Cannot be encoded into UCS-2 BE\");\n        s.push(h), s.push(u - (h << 8));\n      }\n      return String.fromCharCode.apply(void 0, s);\n    },\n    Ce = y.__private__.pdfEscape = y.pdfEscape = function (t, e) {\n      return Fe(t, e).replace(/\\\\/g, \"\\\\\\\\\").replace(/\\(/g, \"\\\\(\").replace(/\\)/g, \"\\\\)\");\n    },\n    je = y.__private__.beginPage = function (t) {\n      ot[++Dt] = [], Rt[Dt] = {\n        objId: 0,\n        contentsObjId: 0,\n        userUnit: Number(d),\n        artBox: null,\n        bleedBox: null,\n        cropBox: null,\n        trimBox: null,\n        mediaBox: {\n          bottomLeftX: 0,\n          bottomLeftY: 0,\n          topRightX: Number(t[0]),\n          topRightY: Number(t[1])\n        }\n      }, Me(Dt), ht(ot[$]);\n    },\n    Oe = function (t, e) {\n      var r, n, o;\n      switch (i = e || i, \"string\" == typeof t && (r = A(t.toLowerCase()), Array.isArray(r) && (n = r[0], o = r[1])), Array.isArray(t) && (n = t[0] * _t, o = t[1] * _t), isNaN(n) && (n = s[0], o = s[1]), (n > 14400 || o > 14400) && (a.warn(\"A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400\"), n = Math.min(14400, n), o = Math.min(14400, o)), s = [n, o], i.substr(0, 1)) {\n        case \"l\":\n          o > n && (s = [o, n]);\n          break;\n        case \"p\":\n          n > o && (s = [o, n]);\n      }\n      je(s), pr(fr), lt(Lr), 0 !== kr && lt(kr + \" J\"), 0 !== Ir && lt(Ir + \" j\"), Tt.publish(\"addPage\", {\n        pageNumber: Dt\n      });\n    },\n    Be = function (t) {\n      t > 0 && t <= Dt && (ot.splice(t, 1), Rt.splice(t, 1), Dt--, $ > Dt && ($ = Dt), this.setPage($));\n    },\n    Me = function (t) {\n      t > 0 && t <= Dt && ($ = t);\n    },\n    Ee = y.__private__.getNumberOfPages = y.getNumberOfPages = function () {\n      return ot.length - 1;\n    },\n    qe = function (t, e, r) {\n      var n,\n        i = void 0;\n      return r = r || {}, t = void 0 !== t ? t : Ft[St].fontName, e = void 0 !== e ? e : Ft[St].fontStyle, n = t.toLowerCase(), void 0 !== Ct[n] && void 0 !== Ct[n][e] ? i = Ct[n][e] : void 0 !== Ct[t] && void 0 !== Ct[t][e] ? i = Ct[t][e] : !1 === r.disableWarning && a.warn(\"Unable to look up font label for font '\" + t + \"', '\" + e + \"'. Refer to getFontList() for available fonts.\"), i || r.noFallback || null == (i = Ct.times[e]) && (i = Ct.times.normal), i;\n    },\n    De = y.__private__.putInfo = function () {\n      var t = Xt(),\n        e = function (t) {\n          return t;\n        };\n      for (var r in null !== m && (e = Ye.encryptor(t, 0)), lt(\"<<\"), lt(\"/Producer (\" + Ce(e(\"jsPDF \" + E.version)) + \")\"), xt) xt.hasOwnProperty(r) && xt[r] && lt(\"/\" + r.substr(0, 1).toUpperCase() + r.substr(1) + \" (\" + Ce(e(xt[r])) + \")\");\n      lt(\"/CreationDate (\" + Ce(e(W)) + \")\"), lt(\">>\"), lt(\"endobj\");\n    },\n    Re = y.__private__.putCatalog = function (t) {\n      var e = (t = t || {}).rootDictionaryObjId || Qt;\n      switch (Xt(), lt(\"<<\"), lt(\"/Type /Catalog\"), lt(\"/Pages \" + e + \" 0 R\"), mt || (mt = \"fullwidth\"), mt) {\n        case \"fullwidth\":\n          lt(\"/OpenAction [3 0 R /FitH null]\");\n          break;\n        case \"fullheight\":\n          lt(\"/OpenAction [3 0 R /FitV null]\");\n          break;\n        case \"fullpage\":\n          lt(\"/OpenAction [3 0 R /Fit]\");\n          break;\n        case \"original\":\n          lt(\"/OpenAction [3 0 R /XYZ null null 1]\");\n          break;\n        default:\n          var r = \"\" + mt;\n          \"%\" === r.substr(r.length - 1) && (mt = parseInt(mt) / 100), \"number\" == typeof mt && lt(\"/OpenAction [3 0 R /XYZ null null \" + R(mt) + \"]\");\n      }\n      switch (Nt || (Nt = \"continuous\"), Nt) {\n        case \"continuous\":\n          lt(\"/PageLayout /OneColumn\");\n          break;\n        case \"single\":\n          lt(\"/PageLayout /SinglePage\");\n          break;\n        case \"two\":\n        case \"twoleft\":\n          lt(\"/PageLayout /TwoColumnLeft\");\n          break;\n        case \"tworight\":\n          lt(\"/PageLayout /TwoColumnRight\");\n      }\n      yt && lt(\"/PageMode /\" + yt), Tt.publish(\"putCatalog\"), lt(\">>\"), lt(\"endobj\");\n    },\n    Te = y.__private__.putTrailer = function () {\n      lt(\"trailer\"), lt(\"<<\"), lt(\"/Size \" + (et + 1)), lt(\"/Root \" + et + \" 0 R\"), lt(\"/Info \" + (et - 1) + \" 0 R\"), null !== m && lt(\"/Encrypt \" + Ye.oid + \" 0 R\"), lt(\"/ID [ <\" + V + \"> <\" + V + \"> ]\"), lt(\">>\");\n    },\n    Ue = y.__private__.putHeader = function () {\n      lt(\"%PDF-\" + w), lt(\"%ºß¬à\");\n    },\n    ze = y.__private__.putXRef = function () {\n      var t = \"0000000000\";\n      lt(\"xref\"), lt(\"0 \" + (et + 1)), lt(\"0000000000 65535 f \");\n      for (var e = 1; e <= et; e++) {\n        \"function\" == typeof rt[e] ? lt((t + rt[e]()).slice(-10) + \" 00000 n \") : void 0 !== rt[e] ? lt((t + rt[e]).slice(-10) + \" 00000 n \") : lt(\"0000000000 00000 n \");\n      }\n    },\n    He = y.__private__.buildDocument = function () {\n      ut(), ht(nt), Tt.publish(\"buildDocument\"), Ue(), oe(), Se(), xe(), null !== m && be(), De(), Re();\n      var t = it;\n      return ze(), Te(), lt(\"startxref\"), lt(\"\" + t), lt(\"%%EOF\"), ht(ot[$]), nt.join(\"\\n\");\n    },\n    We = y.__private__.getBlob = function (t) {\n      return new Blob([dt(t)], {\n        type: \"application/pdf\"\n      });\n    },\n    Ve = y.output = y.__private__.output = Ie(function (t, e) {\n      switch (\"string\" == typeof (e = e || {}) ? e = {\n        filename: e\n      } : e.filename = e.filename || \"generated.pdf\", t) {\n        case void 0:\n          return He();\n        case \"save\":\n          y.save(e.filename);\n          break;\n        case \"arraybuffer\":\n          return dt(He());\n        case \"blob\":\n          return We(He());\n        case \"bloburi\":\n        case \"bloburl\":\n          if (void 0 !== n.URL && \"function\" == typeof n.URL.createObjectURL) return n.URL && n.URL.createObjectURL(We(He())) || void 0;\n          a.warn(\"bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.\");\n          break;\n        case \"datauristring\":\n        case \"dataurlstring\":\n          var r = \"\",\n            i = He();\n          try {\n            r = h(i);\n          } catch (t) {\n            r = h(unescape(encodeURIComponent(i)));\n          }\n          return \"data:application/pdf;filename=\" + e.filename + \";base64,\" + r;\n        case \"pdfobjectnewwindow\":\n          if (\"[object Window]\" === Object.prototype.toString.call(n)) {\n            var o = \"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js\",\n              s = ' integrity=\"sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==\" crossorigin=\"anonymous\"';\n            e.pdfObjectUrl && (o = e.pdfObjectUrl, s = \"\");\n            var c = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src=\"' + o + '\"' + s + '><\\/script><script >PDFObject.embed(\"' + this.output(\"dataurlstring\") + '\", ' + JSON.stringify(e) + \");<\\/script></body></html>\",\n              u = n.open();\n            return null !== u && u.document.write(c), u;\n          }\n          throw new Error(\"The option pdfobjectnewwindow just works in a browser-environment.\");\n        case \"pdfjsnewwindow\":\n          if (\"[object Window]\" === Object.prototype.toString.call(n)) {\n            var l = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id=\"pdfViewer\" src=\"' + (e.pdfJsUrl || \"examples/PDF.js/web/viewer.html\") + \"?file=&downloadName=\" + e.filename + '\" width=\"500px\" height=\"400px\" /></body></html>',\n              f = n.open();\n            if (null !== f) {\n              f.document.write(l);\n              var d = this;\n              f.document.documentElement.querySelector(\"#pdfViewer\").onload = function () {\n                f.document.title = e.filename, f.document.documentElement.querySelector(\"#pdfViewer\").contentWindow.PDFViewerApplication.open(d.output(\"bloburl\"));\n              };\n            }\n            return f;\n          }\n          throw new Error(\"The option pdfjsnewwindow just works in a browser-environment.\");\n        case \"dataurlnewwindow\":\n          if (\"[object Window]\" !== Object.prototype.toString.call(n)) throw new Error(\"The option dataurlnewwindow just works in a browser-environment.\");\n          var p = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src=\"' + this.output(\"datauristring\", e) + '\"></iframe></body></html>',\n            g = n.open();\n          if (null !== g && (g.document.write(p), g.document.title = e.filename), g || \"undefined\" == typeof safari) return g;\n          break;\n        case \"datauri\":\n        case \"dataurl\":\n          return n.document.location.href = this.output(\"datauristring\", e);\n        default:\n          return null;\n      }\n    }),\n    Ge = function (t) {\n      return !0 === Array.isArray(Ut) && Ut.indexOf(t) > -1;\n    };\n  switch (o) {\n    case \"pt\":\n      _t = 1;\n      break;\n    case \"mm\":\n      _t = 72 / 25.4;\n      break;\n    case \"cm\":\n      _t = 72 / 2.54;\n      break;\n    case \"in\":\n      _t = 72;\n      break;\n    case \"px\":\n      _t = 1 == Ge(\"px_scaling\") ? .75 : 96 / 72;\n      break;\n    case \"pc\":\n    case \"em\":\n      _t = 12;\n      break;\n    case \"ex\":\n      _t = 6;\n      break;\n    default:\n      if (\"number\" != typeof o) throw new Error(\"Invalid unit: \" + o);\n      _t = o;\n  }\n  var Ye = null;\n  K(), Y();\n  var Je = function (t) {\n      return null !== m ? Ye.encryptor(t, 0) : function (t) {\n        return t;\n      };\n    },\n    Xe = y.__private__.getPageInfo = y.getPageInfo = function (t) {\n      if (isNaN(t) || t % 1 != 0) throw new Error(\"Invalid argument passed to jsPDF.getPageInfo\");\n      return {\n        objId: Rt[t].objId,\n        pageNumber: t,\n        pageContext: Rt[t]\n      };\n    },\n    Ke = y.__private__.getPageInfoByObjId = function (t) {\n      if (isNaN(t) || t % 1 != 0) throw new Error(\"Invalid argument passed to jsPDF.getPageInfoByObjId\");\n      for (var e in Rt) if (Rt[e].objId === t) break;\n      return Xe(e);\n    },\n    Ze = y.__private__.getCurrentPageInfo = y.getCurrentPageInfo = function () {\n      return {\n        objId: Rt[$].objId,\n        pageNumber: $,\n        pageContext: Rt[$]\n      };\n    };\n  y.addPage = function () {\n    return Oe.apply(this, arguments), this;\n  }, y.setPage = function () {\n    return Me.apply(this, arguments), ht.call(this, ot[$]), this;\n  }, y.insertPage = function (t) {\n    return this.addPage(), this.movePage($, t), this;\n  }, y.movePage = function (t, e) {\n    var r, n;\n    if (t > e) {\n      r = ot[t], n = Rt[t];\n      for (var i = t; i > e; i--) ot[i] = ot[i - 1], Rt[i] = Rt[i - 1];\n      ot[e] = r, Rt[e] = n, this.setPage(e);\n    } else if (t < e) {\n      r = ot[t], n = Rt[t];\n      for (var a = t; a < e; a++) ot[a] = ot[a + 1], Rt[a] = Rt[a + 1];\n      ot[e] = r, Rt[e] = n, this.setPage(e);\n    }\n    return this;\n  }, y.deletePage = function () {\n    return Be.apply(this, arguments), this;\n  }, y.__private__.text = y.text = function (e, r, n, i, a) {\n    var o,\n      s,\n      c,\n      u,\n      h,\n      l,\n      f,\n      d,\n      p,\n      g = (i = i || {}).scope || this;\n    if (\"number\" == typeof e && \"number\" == typeof r && (\"string\" == typeof n || Array.isArray(n))) {\n      var m = n;\n      n = r, r = e, e = m;\n    }\n    if (arguments[3] instanceof Vt == !1 ? (c = arguments[4], u = arguments[5], \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(f = arguments[3]) && null !== f || (\"string\" == typeof c && (u = c, c = null), \"string\" == typeof f && (u = f, f = null), \"number\" == typeof f && (c = f, f = null), i = {\n      flags: f,\n      angle: c,\n      align: u\n    })) : (q(\"The transform parameter of text() with a Matrix value\"), p = a), isNaN(r) || isNaN(n) || null == e) throw new Error(\"Invalid arguments passed to jsPDF.text\");\n    if (0 === e.length) return g;\n    var v = \"\",\n      y = !1,\n      w = \"number\" == typeof i.lineHeightFactor ? i.lineHeightFactor : lr,\n      N = g.internal.scaleFactor;\n    function L(t) {\n      return t = t.split(\"\\t\").join(Array(i.TabLen || 9).join(\" \")), Ce(t, f);\n    }\n    function A(t) {\n      for (var e, r = t.concat(), n = [], i = r.length; i--;) \"string\" == typeof (e = r.shift()) ? n.push(e) : Array.isArray(t) && (1 === e.length || void 0 === e[1] && void 0 === e[2]) ? n.push(e[0]) : n.push([e[0], e[1], e[2]]);\n      return n;\n    }\n    function _(t, e) {\n      var r;\n      if (\"string\" == typeof t) r = e(t)[0];else if (Array.isArray(t)) {\n        for (var n, i, a = t.concat(), o = [], s = a.length; s--;) \"string\" == typeof (n = a.shift()) ? o.push(e(n)[0]) : Array.isArray(n) && \"string\" == typeof n[0] && (i = e(n[0], n[1], n[2]), o.push([i[0], i[1], i[2]]));\n        r = o;\n      }\n      return r;\n    }\n    var P = !1,\n      k = !0;\n    if (\"string\" == typeof e) P = !0;else if (Array.isArray(e)) {\n      var I = e.concat();\n      s = [];\n      for (var F, C = I.length; C--;) (\"string\" != typeof (F = I.shift()) || Array.isArray(F) && \"string\" != typeof F[0]) && (k = !1);\n      P = k;\n    }\n    if (!1 === P) throw new Error('Type of text must be string or Array. \"' + e + '\" is not recognized.');\n    \"string\" == typeof e && (e = e.match(/[\\r?\\n]/) ? e.split(/\\r\\n|\\r|\\n/g) : [e]);\n    var j = gt / g.internal.scaleFactor,\n      B = j * (w - 1);\n    switch (i.baseline) {\n      case \"bottom\":\n        n -= B;\n        break;\n      case \"top\":\n        n += j - B;\n        break;\n      case \"hanging\":\n        n += j - 2 * B;\n        break;\n      case \"middle\":\n        n += j / 2 - B;\n    }\n    if ((l = i.maxWidth || 0) > 0 && (\"string\" == typeof e ? e = g.splitTextToSize(e, l) : \"[object Array]\" === Object.prototype.toString.call(e) && (e = e.reduce(function (t, e) {\n      return t.concat(g.splitTextToSize(e, l));\n    }, []))), o = {\n      text: e,\n      x: r,\n      y: n,\n      options: i,\n      mutex: {\n        pdfEscape: Ce,\n        activeFontKey: St,\n        fonts: Ft,\n        activeFontSize: gt\n      }\n    }, Tt.publish(\"preProcessText\", o), e = o.text, c = (i = o.options).angle, p instanceof Vt == !1 && c && \"number\" == typeof c) {\n      c *= Math.PI / 180, 0 === i.rotationDirection && (c = -c), S === x.ADVANCED && (c = -c);\n      var M = Math.cos(c),\n        E = Math.sin(c);\n      p = new Vt(M, E, -E, M, 0, 0);\n    } else c && c instanceof Vt && (p = c);\n    S !== x.ADVANCED || p || (p = Yt), void 0 !== (h = i.charSpace || _r) && (v += O(U(h)) + \" Tc\\n\", this.setCharSpace(this.getCharSpace() || 0)), void 0 !== (d = i.horizontalScale) && (v += O(100 * d) + \" Tz\\n\");\n    i.lang;\n    var D = -1,\n      R = void 0 !== i.renderingMode ? i.renderingMode : i.stroke,\n      T = g.internal.getCurrentPageInfo().pageContext;\n    switch (R) {\n      case 0:\n      case !1:\n      case \"fill\":\n        D = 0;\n        break;\n      case 1:\n      case !0:\n      case \"stroke\":\n        D = 1;\n        break;\n      case 2:\n      case \"fillThenStroke\":\n        D = 2;\n        break;\n      case 3:\n      case \"invisible\":\n        D = 3;\n        break;\n      case 4:\n      case \"fillAndAddForClipping\":\n        D = 4;\n        break;\n      case 5:\n      case \"strokeAndAddPathForClipping\":\n        D = 5;\n        break;\n      case 6:\n      case \"fillThenStrokeAndAddToPathForClipping\":\n        D = 6;\n        break;\n      case 7:\n      case \"addToPathForClipping\":\n        D = 7;\n    }\n    var z = void 0 !== T.usedRenderingMode ? T.usedRenderingMode : -1;\n    -1 !== D ? v += D + \" Tr\\n\" : -1 !== z && (v += \"0 Tr\\n\"), -1 !== D && (T.usedRenderingMode = D), u = i.align || \"left\";\n    var H,\n      W = gt * w,\n      V = g.internal.pageSize.getWidth(),\n      G = Ft[St];\n    h = i.charSpace || _r, l = i.maxWidth || 0, f = Object.assign({\n      autoencode: !0,\n      noBOM: !0\n    }, i.flags);\n    var Y = [];\n    if (\"[object Array]\" === Object.prototype.toString.call(e)) {\n      var J;\n      s = A(e), \"left\" !== u && (H = s.map(function (t) {\n        return g.getStringUnitWidth(t, {\n          font: G,\n          charSpace: h,\n          fontSize: gt,\n          doKerning: !1\n        }) * gt / N;\n      }));\n      var X,\n        K = 0;\n      if (\"right\" === u) {\n        r -= H[0], e = [], C = s.length;\n        for (var Z = 0; Z < C; Z++) 0 === Z ? (X = br(r), J = yr(n)) : (X = U(K - H[Z]), J = -W), e.push([s[Z], X, J]), K = H[Z];\n      } else if (\"center\" === u) {\n        r -= H[0] / 2, e = [], C = s.length;\n        for (var $ = 0; $ < C; $++) 0 === $ ? (X = br(r), J = yr(n)) : (X = U((K - H[$]) / 2), J = -W), e.push([s[$], X, J]), K = H[$];\n      } else if (\"left\" === u) {\n        e = [], C = s.length;\n        for (var Q = 0; Q < C; Q++) e.push(s[Q]);\n      } else {\n        if (\"justify\" !== u) throw new Error('Unrecognized alignment option, use \"left\", \"center\", \"right\" or \"justify\".');\n        e = [], C = s.length, l = 0 !== l ? l : V;\n        for (var tt = 0; tt < C; tt++) J = 0 === tt ? yr(n) : -W, X = 0 === tt ? br(r) : 0, tt < C - 1 ? Y.push(O(U((l - H[tt]) / (s[tt].split(\" \").length - 1)))) : Y.push(0), e.push([s[tt], X, J]);\n      }\n    }\n    var et = \"boolean\" == typeof i.R2L ? i.R2L : bt;\n    !0 === et && (e = _(e, function (t, e, r) {\n      return [t.split(\"\").reverse().join(\"\"), e, r];\n    })), o = {\n      text: e,\n      x: r,\n      y: n,\n      options: i,\n      mutex: {\n        pdfEscape: Ce,\n        activeFontKey: St,\n        fonts: Ft,\n        activeFontSize: gt\n      }\n    }, Tt.publish(\"postProcessText\", o), e = o.text, y = o.mutex.isHex || !1;\n    var rt = Ft[St].encoding;\n    \"WinAnsiEncoding\" !== rt && \"StandardEncoding\" !== rt || (e = _(e, function (t, e, r) {\n      return [L(t), e, r];\n    })), s = A(e), e = [];\n    for (var nt, it, at, ot = 0, st = 1, ct = Array.isArray(s[0]) ? st : ot, ut = \"\", ht = function (t, e, r) {\n        var n = \"\";\n        return r instanceof Vt ? (r = \"number\" == typeof i.angle ? Gt(r, new Vt(1, 0, 0, 1, t, e)) : Gt(new Vt(1, 0, 0, 1, t, e), r), S === x.ADVANCED && (r = Gt(new Vt(1, 0, 0, -1, 0, 0), r)), n = r.join(\" \") + \" Tm\\n\") : n = O(t) + \" \" + O(e) + \" Td\\n\", n;\n      }, ft = 0; ft < s.length; ft++) {\n      switch (ut = \"\", ct) {\n        case st:\n          at = (y ? \"<\" : \"(\") + s[ft][0] + (y ? \">\" : \")\"), nt = parseFloat(s[ft][1]), it = parseFloat(s[ft][2]);\n          break;\n        case ot:\n          at = (y ? \"<\" : \"(\") + s[ft] + (y ? \">\" : \")\"), nt = br(r), it = yr(n);\n      }\n      void 0 !== Y && void 0 !== Y[ft] && (ut = Y[ft] + \" Tw\\n\"), 0 === ft ? e.push(ut + ht(nt, it, p) + at) : ct === ot ? e.push(ut + at) : ct === st && e.push(ut + ht(nt, it, p) + at);\n    }\n    e = ct === ot ? e.join(\" Tj\\nT* \") : e.join(\" Tj\\n\"), e += \" Tj\\n\";\n    var dt = \"BT\\n/\";\n    return dt += St + \" \" + gt + \" Tf\\n\", dt += O(gt * w) + \" TL\\n\", dt += xr + \"\\n\", dt += v, dt += e, lt(dt += \"ET\"), b[St] = !0, g;\n  };\n  var $e = y.__private__.clip = y.clip = function (t) {\n    return lt(\"evenodd\" === t ? \"W*\" : \"W\"), this;\n  };\n  y.clipEvenOdd = function () {\n    return $e(\"evenodd\");\n  }, y.__private__.discardPath = y.discardPath = function () {\n    return lt(\"n\"), this;\n  };\n  var Qe = y.__private__.isValidStyle = function (t) {\n    var e = !1;\n    return -1 !== [void 0, null, \"S\", \"D\", \"F\", \"DF\", \"FD\", \"f\", \"f*\", \"B\", \"B*\", \"n\"].indexOf(t) && (e = !0), e;\n  };\n  y.__private__.setDefaultPathOperation = y.setDefaultPathOperation = function (t) {\n    return Qe(t) && (g = t), this;\n  };\n  var tr = y.__private__.getStyle = y.getStyle = function (t) {\n      var e = g;\n      switch (t) {\n        case \"D\":\n        case \"S\":\n          e = \"S\";\n          break;\n        case \"F\":\n          e = \"f\";\n          break;\n        case \"FD\":\n        case \"DF\":\n          e = \"B\";\n          break;\n        case \"f\":\n        case \"f*\":\n        case \"B\":\n        case \"B*\":\n          e = t;\n      }\n      return e;\n    },\n    er = y.close = function () {\n      return lt(\"h\"), this;\n    };\n  y.stroke = function () {\n    return lt(\"S\"), this;\n  }, y.fill = function (t) {\n    return rr(\"f\", t), this;\n  }, y.fillEvenOdd = function (t) {\n    return rr(\"f*\", t), this;\n  }, y.fillStroke = function (t) {\n    return rr(\"B\", t), this;\n  }, y.fillStrokeEvenOdd = function (t) {\n    return rr(\"B*\", t), this;\n  };\n  var rr = function (e, r) {\n      \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(r) ? ar(r, e) : lt(e);\n    },\n    nr = function (t) {\n      null === t || S === x.ADVANCED && void 0 === t || (t = tr(t), lt(t));\n    };\n  function ir(t, e, r, n, i) {\n    var a = new M(e || this.boundingBox, r || this.xStep, n || this.yStep, this.gState, i || this.matrix);\n    a.stream = this.stream;\n    var o = t + \"$$\" + this.cloneIndex++ + \"$$\";\n    return Jt(o, a), a;\n  }\n  var ar = function (t, e) {\n      var r = Bt[t.key],\n        n = Ot[r];\n      if (n instanceof B) lt(\"q\"), lt(or(e)), n.gState && y.setGState(n.gState), lt(t.matrix.toString() + \" cm\"), lt(\"/\" + r + \" sh\"), lt(\"Q\");else if (n instanceof M) {\n        var i = new Vt(1, 0, 0, -1, 0, Rr());\n        t.matrix && (i = i.multiply(t.matrix || Yt), r = ir.call(n, t.key, t.boundingBox, t.xStep, t.yStep, i).id), lt(\"q\"), lt(\"/Pattern cs\"), lt(\"/\" + r + \" scn\"), n.gState && y.setGState(n.gState), lt(e), lt(\"Q\");\n      }\n    },\n    or = function (t) {\n      switch (t) {\n        case \"f\":\n        case \"F\":\n          return \"W n\";\n        case \"f*\":\n          return \"W* n\";\n        case \"B\":\n          return \"W S\";\n        case \"B*\":\n          return \"W* S\";\n        case \"S\":\n          return \"W S\";\n        case \"n\":\n          return \"W n\";\n      }\n    },\n    sr = y.moveTo = function (t, e) {\n      return lt(O(U(t)) + \" \" + O(H(e)) + \" m\"), this;\n    },\n    cr = y.lineTo = function (t, e) {\n      return lt(O(U(t)) + \" \" + O(H(e)) + \" l\"), this;\n    },\n    ur = y.curveTo = function (t, e, r, n, i, a) {\n      return lt([O(U(t)), O(H(e)), O(U(r)), O(H(n)), O(U(i)), O(H(a)), \"c\"].join(\" \")), this;\n    };\n  y.__private__.line = y.line = function (t, e, r, n, i) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n) || !Qe(i)) throw new Error(\"Invalid arguments passed to jsPDF.line\");\n    return S === x.COMPAT ? this.lines([[r - t, n - e]], t, e, [1, 1], i || \"S\") : this.lines([[r - t, n - e]], t, e, [1, 1]).stroke();\n  }, y.__private__.lines = y.lines = function (t, e, r, n, i, a) {\n    var o, s, c, u, h, l, f, d, p, g, m, v;\n    if (\"number\" == typeof t && (v = r, r = e, e = t, t = v), n = n || [1, 1], a = a || !1, isNaN(e) || isNaN(r) || !Array.isArray(t) || !Array.isArray(n) || !Qe(i) || \"boolean\" != typeof a) throw new Error(\"Invalid arguments passed to jsPDF.lines\");\n    for (sr(e, r), o = n[0], s = n[1], u = t.length, g = e, m = r, c = 0; c < u; c++) 2 === (h = t[c]).length ? (g = h[0] * o + g, m = h[1] * s + m, cr(g, m)) : (l = h[0] * o + g, f = h[1] * s + m, d = h[2] * o + g, p = h[3] * s + m, g = h[4] * o + g, m = h[5] * s + m, ur(l, f, d, p, g, m));\n    return a && er(), nr(i), this;\n  }, y.path = function (t) {\n    for (var e = 0; e < t.length; e++) {\n      var r = t[e],\n        n = r.c;\n      switch (r.op) {\n        case \"m\":\n          sr(n[0], n[1]);\n          break;\n        case \"l\":\n          cr(n[0], n[1]);\n          break;\n        case \"c\":\n          ur.apply(this, n);\n          break;\n        case \"h\":\n          er();\n      }\n    }\n    return this;\n  }, y.__private__.rect = y.rect = function (t, e, r, n, i) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n) || !Qe(i)) throw new Error(\"Invalid arguments passed to jsPDF.rect\");\n    return S === x.COMPAT && (n = -n), lt([O(U(t)), O(H(e)), O(U(r)), O(U(n)), \"re\"].join(\" \")), nr(i), this;\n  }, y.__private__.triangle = y.triangle = function (t, e, r, n, i, a, o) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n) || isNaN(i) || isNaN(a) || !Qe(o)) throw new Error(\"Invalid arguments passed to jsPDF.triangle\");\n    return this.lines([[r - t, n - e], [i - r, a - n], [t - i, e - a]], t, e, [1, 1], o, !0), this;\n  }, y.__private__.roundedRect = y.roundedRect = function (t, e, r, n, i, a, o) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n) || isNaN(i) || isNaN(a) || !Qe(o)) throw new Error(\"Invalid arguments passed to jsPDF.roundedRect\");\n    var s = 4 / 3 * (Math.SQRT2 - 1);\n    return i = Math.min(i, .5 * r), a = Math.min(a, .5 * n), this.lines([[r - 2 * i, 0], [i * s, 0, i, a - a * s, i, a], [0, n - 2 * a], [0, a * s, -i * s, a, -i, a], [2 * i - r, 0], [-i * s, 0, -i, -a * s, -i, -a], [0, 2 * a - n], [0, -a * s, i * s, -a, i, -a]], t + i, e, [1, 1], o, !0), this;\n  }, y.__private__.ellipse = y.ellipse = function (t, e, r, n, i) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n) || !Qe(i)) throw new Error(\"Invalid arguments passed to jsPDF.ellipse\");\n    var a = 4 / 3 * (Math.SQRT2 - 1) * r,\n      o = 4 / 3 * (Math.SQRT2 - 1) * n;\n    return sr(t + r, e), ur(t + r, e - o, t + a, e - n, t, e - n), ur(t - a, e - n, t - r, e - o, t - r, e), ur(t - r, e + o, t - a, e + n, t, e + n), ur(t + a, e + n, t + r, e + o, t + r, e), nr(i), this;\n  }, y.__private__.circle = y.circle = function (t, e, r, n) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || !Qe(n)) throw new Error(\"Invalid arguments passed to jsPDF.circle\");\n    return this.ellipse(t, e, r, r, n);\n  }, y.setFont = function (t, e, r) {\n    return r && (e = k(e, r)), St = qe(t, e, {\n      disableWarning: !1\n    }), this;\n  };\n  var hr = y.__private__.getFont = y.getFont = function () {\n    return Ft[qe.apply(y, arguments)];\n  };\n  y.__private__.getFontList = y.getFontList = function () {\n    var t,\n      e,\n      r = {};\n    for (t in Ct) if (Ct.hasOwnProperty(t)) for (e in r[t] = [], Ct[t]) Ct[t].hasOwnProperty(e) && r[t].push(e);\n    return r;\n  }, y.addFont = function (t, e, r, n, i) {\n    var a = [\"StandardEncoding\", \"MacRomanEncoding\", \"Identity-H\", \"WinAnsiEncoding\"];\n    return arguments[3] && -1 !== a.indexOf(arguments[3]) ? i = arguments[3] : arguments[3] && -1 == a.indexOf(arguments[3]) && (r = k(r, n)), i = i || \"Identity-H\", Pe.call(this, t, e, r, i);\n  };\n  var lr,\n    fr = e.lineWidth || .200025,\n    dr = y.__private__.getLineWidth = y.getLineWidth = function () {\n      return fr;\n    },\n    pr = y.__private__.setLineWidth = y.setLineWidth = function (t) {\n      return fr = t, lt(O(U(t)) + \" w\"), this;\n    };\n  y.__private__.setLineDash = E.API.setLineDash = E.API.setLineDashPattern = function (t, e) {\n    if (t = t || [], e = e || 0, isNaN(e) || !Array.isArray(t)) throw new Error(\"Invalid arguments passed to jsPDF.setLineDash\");\n    return t = t.map(function (t) {\n      return O(U(t));\n    }).join(\" \"), e = O(U(e)), lt(\"[\" + t + \"] \" + e + \" d\"), this;\n  };\n  var gr = y.__private__.getLineHeight = y.getLineHeight = function () {\n    return gt * lr;\n  };\n  y.__private__.getLineHeight = y.getLineHeight = function () {\n    return gt * lr;\n  };\n  var mr = y.__private__.setLineHeightFactor = y.setLineHeightFactor = function (t) {\n      return \"number\" == typeof (t = t || 1.15) && (lr = t), this;\n    },\n    vr = y.__private__.getLineHeightFactor = y.getLineHeightFactor = function () {\n      return lr;\n    };\n  mr(e.lineHeight);\n  var br = y.__private__.getHorizontalCoordinate = function (t) {\n      return U(t);\n    },\n    yr = y.__private__.getVerticalCoordinate = function (t) {\n      return S === x.ADVANCED ? t : Rt[$].mediaBox.topRightY - Rt[$].mediaBox.bottomLeftY - U(t);\n    },\n    wr = y.__private__.getHorizontalCoordinateString = y.getHorizontalCoordinateString = function (t) {\n      return O(br(t));\n    },\n    Nr = y.__private__.getVerticalCoordinateString = y.getVerticalCoordinateString = function (t) {\n      return O(yr(t));\n    },\n    Lr = e.strokeColor || \"0 G\";\n  y.__private__.getStrokeColor = y.getDrawColor = function () {\n    return ee(Lr);\n  }, y.__private__.setStrokeColor = y.setDrawColor = function (t, e, r, n) {\n    return Lr = re({\n      ch1: t,\n      ch2: e,\n      ch3: r,\n      ch4: n,\n      pdfColorType: \"draw\",\n      precision: 2\n    }), lt(Lr), this;\n  };\n  var Ar = e.fillColor || \"0 g\";\n  y.__private__.getFillColor = y.getFillColor = function () {\n    return ee(Ar);\n  }, y.__private__.setFillColor = y.setFillColor = function (t, e, r, n) {\n    return Ar = re({\n      ch1: t,\n      ch2: e,\n      ch3: r,\n      ch4: n,\n      pdfColorType: \"fill\",\n      precision: 2\n    }), lt(Ar), this;\n  };\n  var xr = e.textColor || \"0 g\",\n    Sr = y.__private__.getTextColor = y.getTextColor = function () {\n      return ee(xr);\n    };\n  y.__private__.setTextColor = y.setTextColor = function (t, e, r, n) {\n    return xr = re({\n      ch1: t,\n      ch2: e,\n      ch3: r,\n      ch4: n,\n      pdfColorType: \"text\",\n      precision: 3\n    }), this;\n  };\n  var _r = e.charSpace,\n    Pr = y.__private__.getCharSpace = y.getCharSpace = function () {\n      return parseFloat(_r || 0);\n    };\n  y.__private__.setCharSpace = y.setCharSpace = function (t) {\n    if (isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.setCharSpace\");\n    return _r = t, this;\n  };\n  var kr = 0;\n  y.CapJoinStyles = {\n    0: 0,\n    butt: 0,\n    but: 0,\n    miter: 0,\n    1: 1,\n    round: 1,\n    rounded: 1,\n    circle: 1,\n    2: 2,\n    projecting: 2,\n    project: 2,\n    square: 2,\n    bevel: 2\n  }, y.__private__.setLineCap = y.setLineCap = function (t) {\n    var e = y.CapJoinStyles[t];\n    if (void 0 === e) throw new Error(\"Line cap style of '\" + t + \"' is not recognized. See or extend .CapJoinStyles property for valid styles\");\n    return kr = e, lt(e + \" J\"), this;\n  };\n  var Ir = 0;\n  y.__private__.setLineJoin = y.setLineJoin = function (t) {\n    var e = y.CapJoinStyles[t];\n    if (void 0 === e) throw new Error(\"Line join style of '\" + t + \"' is not recognized. See or extend .CapJoinStyles property for valid styles\");\n    return Ir = e, lt(e + \" j\"), this;\n  }, y.__private__.setLineMiterLimit = y.__private__.setMiterLimit = y.setLineMiterLimit = y.setMiterLimit = function (t) {\n    if (t = t || 0, isNaN(t)) throw new Error(\"Invalid argument passed to jsPDF.setLineMiterLimit\");\n    return lt(O(U(t)) + \" M\"), this;\n  }, y.GState = j, y.setGState = function (t) {\n    (t = \"string\" == typeof t ? Mt[Et[t]] : Fr(null, t)).equals(qt) || (lt(\"/\" + t.id + \" gs\"), qt = t);\n  };\n  var Fr = function (t, e) {\n    if (!t || !Et[t]) {\n      var r = !1;\n      for (var n in Mt) if (Mt.hasOwnProperty(n) && Mt[n].equals(e)) {\n        r = !0;\n        break;\n      }\n      if (r) e = Mt[n];else {\n        var i = \"GS\" + (Object.keys(Mt).length + 1).toString(10);\n        Mt[i] = e, e.id = i;\n      }\n      return t && (Et[t] = e.id), Tt.publish(\"addGState\", e), e;\n    }\n  };\n  y.addGState = function (t, e) {\n    return Fr(t, e), this;\n  }, y.saveGraphicsState = function () {\n    return lt(\"q\"), jt.push({\n      key: St,\n      size: gt,\n      color: xr\n    }), this;\n  }, y.restoreGraphicsState = function () {\n    lt(\"Q\");\n    var t = jt.pop();\n    return St = t.key, gt = t.size, xr = t.color, qt = null, this;\n  }, y.setCurrentTransformationMatrix = function (t) {\n    return lt(t.toString() + \" cm\"), this;\n  }, y.comment = function (t) {\n    return lt(\"#\" + t), this;\n  };\n  var Cr = function (t, e) {\n      var r = t || 0;\n      Object.defineProperty(this, \"x\", {\n        enumerable: !0,\n        get: function () {\n          return r;\n        },\n        set: function (t) {\n          isNaN(t) || (r = parseFloat(t));\n        }\n      });\n      var n = e || 0;\n      Object.defineProperty(this, \"y\", {\n        enumerable: !0,\n        get: function () {\n          return n;\n        },\n        set: function (t) {\n          isNaN(t) || (n = parseFloat(t));\n        }\n      });\n      var i = \"pt\";\n      return Object.defineProperty(this, \"type\", {\n        enumerable: !0,\n        get: function () {\n          return i;\n        },\n        set: function (t) {\n          i = t.toString();\n        }\n      }), this;\n    },\n    jr = function (t, e, r, n) {\n      Cr.call(this, t, e), this.type = \"rect\";\n      var i = r || 0;\n      Object.defineProperty(this, \"w\", {\n        enumerable: !0,\n        get: function () {\n          return i;\n        },\n        set: function (t) {\n          isNaN(t) || (i = parseFloat(t));\n        }\n      });\n      var a = n || 0;\n      return Object.defineProperty(this, \"h\", {\n        enumerable: !0,\n        get: function () {\n          return a;\n        },\n        set: function (t) {\n          isNaN(t) || (a = parseFloat(t));\n        }\n      }), this;\n    },\n    Or = function () {\n      this.page = Dt, this.currentPage = $, this.pages = ot.slice(0), this.pagesContext = Rt.slice(0), this.x = Pt, this.y = kt, this.matrix = It, this.width = qr($), this.height = Rr($), this.outputDestination = ct, this.id = \"\", this.objectNumber = -1;\n    };\n  Or.prototype.restore = function () {\n    Dt = this.page, $ = this.currentPage, Rt = this.pagesContext, ot = this.pages, Pt = this.x, kt = this.y, It = this.matrix, Dr($, this.width), Tr($, this.height), ct = this.outputDestination;\n  };\n  var Br = function (t, e, r, n, i) {\n      Wt.push(new Or()), Dt = $ = 0, ot = [], Pt = t, kt = e, It = i, je([r, n]);\n    },\n    Mr = function (t) {\n      if (Ht[t]) Wt.pop().restore();else {\n        var e = new Or(),\n          r = \"Xo\" + (Object.keys(zt).length + 1).toString(10);\n        e.id = r, Ht[t] = r, zt[r] = e, Tt.publish(\"addFormObject\", e), Wt.pop().restore();\n      }\n    };\n  for (var Er in y.beginFormObject = function (t, e, r, n, i) {\n    return Br(t, e, r, n, i), this;\n  }, y.endFormObject = function (t) {\n    return Mr(t), this;\n  }, y.doFormObject = function (t, e) {\n    var r = zt[Ht[t]];\n    return lt(\"q\"), lt(e.toString() + \" cm\"), lt(\"/\" + r.id + \" Do\"), lt(\"Q\"), this;\n  }, y.getFormObject = function (t) {\n    var e = zt[Ht[t]];\n    return {\n      x: e.x,\n      y: e.y,\n      width: e.width,\n      height: e.height,\n      matrix: e.matrix\n    };\n  }, y.save = function (t, e) {\n    return t = t || \"generated.pdf\", (e = e || {}).returnPromise = e.returnPromise || !1, !1 === e.returnPromise ? (l(We(He()), t), \"function\" == typeof l.unload && n.setTimeout && setTimeout(l.unload, 911), this) : new Promise(function (e, r) {\n      try {\n        var i = l(We(He()), t);\n        \"function\" == typeof l.unload && n.setTimeout && setTimeout(l.unload, 911), e(i);\n      } catch (t) {\n        r(t.message);\n      }\n    });\n  }, E.API) E.API.hasOwnProperty(Er) && (\"events\" === Er && E.API.events.length ? function (t, e) {\n    var r, n, i;\n    for (i = e.length - 1; -1 !== i; i--) r = e[i][0], n = e[i][1], t.subscribe.apply(t, [r].concat(\"function\" == typeof n ? [n] : n));\n  }(Tt, E.API.events) : y[Er] = E.API[Er]);\n  var qr = y.getPageWidth = function (t) {\n      return (Rt[t = t || $].mediaBox.topRightX - Rt[t].mediaBox.bottomLeftX) / _t;\n    },\n    Dr = y.setPageWidth = function (t, e) {\n      Rt[t].mediaBox.topRightX = e * _t + Rt[t].mediaBox.bottomLeftX;\n    },\n    Rr = y.getPageHeight = function (t) {\n      return (Rt[t = t || $].mediaBox.topRightY - Rt[t].mediaBox.bottomLeftY) / _t;\n    },\n    Tr = y.setPageHeight = function (t, e) {\n      Rt[t].mediaBox.topRightY = e * _t + Rt[t].mediaBox.bottomLeftY;\n    };\n  return y.internal = {\n    pdfEscape: Ce,\n    getStyle: tr,\n    getFont: hr,\n    getFontSize: vt,\n    getCharSpace: Pr,\n    getTextColor: Sr,\n    getLineHeight: gr,\n    getLineHeightFactor: vr,\n    getLineWidth: dr,\n    write: ft,\n    getHorizontalCoordinate: br,\n    getVerticalCoordinate: yr,\n    getCoordinateString: wr,\n    getVerticalCoordinateString: Nr,\n    collections: {},\n    newObject: Xt,\n    newAdditionalObject: $t,\n    newObjectDeferred: Kt,\n    newObjectDeferredBegin: Zt,\n    getFilters: ne,\n    putStream: ie,\n    events: Tt,\n    scaleFactor: _t,\n    pageSize: {\n      getWidth: function () {\n        return qr($);\n      },\n      setWidth: function (t) {\n        Dr($, t);\n      },\n      getHeight: function () {\n        return Rr($);\n      },\n      setHeight: function (t) {\n        Tr($, t);\n      }\n    },\n    encryptionOptions: m,\n    encryption: Ye,\n    getEncryptor: Je,\n    output: Ve,\n    getNumberOfPages: Ee,\n    pages: ot,\n    out: lt,\n    f2: R,\n    f3: T,\n    getPageInfo: Xe,\n    getPageInfoByObjId: Ke,\n    getCurrentPageInfo: Ze,\n    getPDFVersion: N,\n    Point: Cr,\n    Rectangle: jr,\n    Matrix: Vt,\n    hasHotfix: Ge\n  }, Object.defineProperty(y.internal.pageSize, \"width\", {\n    get: function () {\n      return qr($);\n    },\n    set: function (t) {\n      Dr($, t);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(y.internal.pageSize, \"height\", {\n    get: function () {\n      return Rr($);\n    },\n    set: function (t) {\n      Tr($, t);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), ke.call(y, pt), St = \"F1\", Oe(s, i), Tt.publish(\"initialized\"), y;\n}\nI.prototype.lsbFirstWord = function (t) {\n  return String.fromCharCode(t >> 0 & 255, t >> 8 & 255, t >> 16 & 255, t >> 24 & 255);\n}, I.prototype.toHexString = function (t) {\n  return t.split(\"\").map(function (t) {\n    return (\"0\" + (255 & t.charCodeAt(0)).toString(16)).slice(-2);\n  }).join(\"\");\n}, I.prototype.hexToBytes = function (t) {\n  for (var e = [], r = 0; r < t.length; r += 2) e.push(String.fromCharCode(parseInt(t.substr(r, 2), 16)));\n  return e.join(\"\");\n}, I.prototype.processOwnerPassword = function (t, e) {\n  return P(x(e).substr(0, 5), t);\n}, I.prototype.encryptor = function (t, e) {\n  var r = x(this.encryptionKey + String.fromCharCode(255 & t, t >> 8 & 255, t >> 16 & 255, 255 & e, e >> 8 & 255)).substr(0, 10);\n  return function (t) {\n    return P(r, t);\n  };\n}, j.prototype.equals = function (e) {\n  var r,\n    n = \"id,objectNumber,equals\";\n  if (!e || (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e) !== (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(this)) return !1;\n  var i = 0;\n  for (r in this) if (!(n.indexOf(r) >= 0)) {\n    if (this.hasOwnProperty(r) && !e.hasOwnProperty(r)) return !1;\n    if (this[r] !== e[r]) return !1;\n    i++;\n  }\n  for (r in e) e.hasOwnProperty(r) && n.indexOf(r) < 0 && i--;\n  return 0 === i;\n}, E.API = {\n  events: []\n}, E.version = \"2.5.1\";\nvar q = E.API,\n  D = 1,\n  R = function (t) {\n    return t.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\(/g, \"\\\\(\").replace(/\\)/g, \"\\\\)\");\n  },\n  T = function (t) {\n    return t.replace(/\\\\\\\\/g, \"\\\\\").replace(/\\\\\\(/g, \"(\").replace(/\\\\\\)/g, \")\");\n  },\n  U = function (t) {\n    return t.toFixed(2);\n  },\n  z = function (t) {\n    return t.toFixed(5);\n  };\nq.__acroform__ = {};\nvar H = function (t, e) {\n    t.prototype = Object.create(e.prototype), t.prototype.constructor = t;\n  },\n  W = function (t) {\n    return t * D;\n  },\n  V = function (t) {\n    var e = new ut(),\n      r = At.internal.getHeight(t) || 0,\n      n = At.internal.getWidth(t) || 0;\n    return e.BBox = [0, 0, Number(U(n)), Number(U(r))], e;\n  },\n  G = q.__acroform__.setBit = function (t, e) {\n    if (t = t || 0, e = e || 0, isNaN(t) || isNaN(e)) throw new Error(\"Invalid arguments passed to jsPDF.API.__acroform__.setBit\");\n    return t |= 1 << e;\n  },\n  Y = q.__acroform__.clearBit = function (t, e) {\n    if (t = t || 0, e = e || 0, isNaN(t) || isNaN(e)) throw new Error(\"Invalid arguments passed to jsPDF.API.__acroform__.clearBit\");\n    return t &= ~(1 << e);\n  },\n  J = q.__acroform__.getBit = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid arguments passed to jsPDF.API.__acroform__.getBit\");\n    return 0 == (t & 1 << e) ? 0 : 1;\n  },\n  X = q.__acroform__.getBitForPdf = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf\");\n    return J(t, e - 1);\n  },\n  K = q.__acroform__.setBitForPdf = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf\");\n    return G(t, e - 1);\n  },\n  Z = q.__acroform__.clearBitForPdf = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf\");\n    return Y(t, e - 1);\n  },\n  $ = q.__acroform__.calculateCoordinates = function (t, e) {\n    var r = e.internal.getHorizontalCoordinate,\n      n = e.internal.getVerticalCoordinate,\n      i = t[0],\n      a = t[1],\n      o = t[2],\n      s = t[3],\n      c = {};\n    return c.lowerLeft_X = r(i) || 0, c.lowerLeft_Y = n(a + s) || 0, c.upperRight_X = r(i + o) || 0, c.upperRight_Y = n(a) || 0, [Number(U(c.lowerLeft_X)), Number(U(c.lowerLeft_Y)), Number(U(c.upperRight_X)), Number(U(c.upperRight_Y))];\n  },\n  Q = function (t) {\n    if (t.appearanceStreamContent) return t.appearanceStreamContent;\n    if (t.V || t.DV) {\n      var e = [],\n        r = t._V || t.DV,\n        n = tt(t, r),\n        i = t.scope.internal.getFont(t.fontName, t.fontStyle).id;\n      e.push(\"/Tx BMC\"), e.push(\"q\"), e.push(\"BT\"), e.push(t.scope.__private__.encodeColorString(t.color)), e.push(\"/\" + i + \" \" + U(n.fontSize) + \" Tf\"), e.push(\"1 0 0 1 0 0 Tm\"), e.push(n.text), e.push(\"ET\"), e.push(\"Q\"), e.push(\"EMC\");\n      var a = V(t);\n      return a.scope = t.scope, a.stream = e.join(\"\\n\"), a;\n    }\n  },\n  tt = function (t, e) {\n    var r = 0 === t.fontSize ? t.maxFontSize : t.fontSize,\n      n = {\n        text: \"\",\n        fontSize: \"\"\n      },\n      i = (e = \")\" == (e = \"(\" == e.substr(0, 1) ? e.substr(1) : e).substr(e.length - 1) ? e.substr(0, e.length - 1) : e).split(\" \");\n    i = t.multiline ? i.map(function (t) {\n      return t.split(\"\\n\");\n    }) : i.map(function (t) {\n      return [t];\n    });\n    var a = r,\n      o = At.internal.getHeight(t) || 0;\n    o = o < 0 ? -o : o;\n    var s = At.internal.getWidth(t) || 0;\n    s = s < 0 ? -s : s;\n    var c = function (e, r, n) {\n      if (e + 1 < i.length) {\n        var a = r + \" \" + i[e + 1][0];\n        return et(a, t, n).width <= s - 4;\n      }\n      return !1;\n    };\n    a++;\n    t: for (; a > 0;) {\n      e = \"\", a--;\n      var u,\n        h,\n        l = et(\"3\", t, a).height,\n        f = t.multiline ? o - a : (o - l) / 2,\n        d = f += 2,\n        p = 0,\n        g = 0,\n        m = 0;\n      if (a <= 0) {\n        e = \"(...) Tj\\n\", e += \"% Width of Text: \" + et(e, t, a = 12).width + \", FieldWidth:\" + s + \"\\n\";\n        break;\n      }\n      for (var v = \"\", b = 0, y = 0; y < i.length; y++) if (i.hasOwnProperty(y)) {\n        var w = !1;\n        if (1 !== i[y].length && m !== i[y].length - 1) {\n          if ((l + 2) * (b + 2) + 2 > o) continue t;\n          v += i[y][m], w = !0, g = y, y--;\n        } else {\n          v = \" \" == (v += i[y][m] + \" \").substr(v.length - 1) ? v.substr(0, v.length - 1) : v;\n          var N = parseInt(y),\n            L = c(N, v, a),\n            A = y >= i.length - 1;\n          if (L && !A) {\n            v += \" \", m = 0;\n            continue;\n          }\n          if (L || A) {\n            if (A) g = N;else if (t.multiline && (l + 2) * (b + 2) + 2 > o) continue t;\n          } else {\n            if (!t.multiline) continue t;\n            if ((l + 2) * (b + 2) + 2 > o) continue t;\n            g = N;\n          }\n        }\n        for (var x = \"\", S = p; S <= g; S++) {\n          var _ = i[S];\n          if (t.multiline) {\n            if (S === g) {\n              x += _[m] + \" \", m = (m + 1) % _.length;\n              continue;\n            }\n            if (S === p) {\n              x += _[_.length - 1] + \" \";\n              continue;\n            }\n          }\n          x += _[0] + \" \";\n        }\n        switch (x = \" \" == x.substr(x.length - 1) ? x.substr(0, x.length - 1) : x, h = et(x, t, a).width, t.textAlign) {\n          case \"right\":\n            u = s - h - 2;\n            break;\n          case \"center\":\n            u = (s - h) / 2;\n            break;\n          case \"left\":\n          default:\n            u = 2;\n        }\n        e += U(u) + \" \" + U(d) + \" Td\\n\", e += \"(\" + R(x) + \") Tj\\n\", e += -U(u) + \" 0 Td\\n\", d = -(a + 2), h = 0, p = w ? g : g + 1, b++, v = \"\";\n      } else ;\n      break;\n    }\n    return n.text = e, n.fontSize = a, n;\n  },\n  et = function (t, e, r) {\n    var n = e.scope.internal.getFont(e.fontName, e.fontStyle),\n      i = e.scope.getStringUnitWidth(t, {\n        font: n,\n        fontSize: parseFloat(r),\n        charSpace: 0\n      }) * parseFloat(r);\n    return {\n      height: e.scope.getStringUnitWidth(\"3\", {\n        font: n,\n        fontSize: parseFloat(r),\n        charSpace: 0\n      }) * parseFloat(r) * 1.5,\n      width: i\n    };\n  },\n  rt = {\n    fields: [],\n    xForms: [],\n    acroFormDictionaryRoot: null,\n    printedOut: !1,\n    internal: null,\n    isInitialized: !1\n  },\n  nt = function (t, e) {\n    var r = {\n      type: \"reference\",\n      object: t\n    };\n    void 0 === e.internal.getPageInfo(t.page).pageContext.annotations.find(function (t) {\n      return t.type === r.type && t.object === r.object;\n    }) && e.internal.getPageInfo(t.page).pageContext.annotations.push(r);\n  },\n  it = function (e, r) {\n    for (var n in e) if (e.hasOwnProperty(n)) {\n      var i = n,\n        a = e[n];\n      r.internal.newObjectDeferredBegin(a.objId, !0), \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(a) && \"function\" == typeof a.putStream && a.putStream(), delete e[i];\n    }\n  },\n  at = function (e, r) {\n    if (r.scope = e, void 0 !== e.internal && (void 0 === e.internal.acroformPlugin || !1 === e.internal.acroformPlugin.isInitialized)) {\n      if (lt.FieldNum = 0, e.internal.acroformPlugin = JSON.parse(JSON.stringify(rt)), e.internal.acroformPlugin.acroFormDictionaryRoot) throw new Error(\"Exception while creating AcroformDictionary\");\n      D = e.internal.scaleFactor, e.internal.acroformPlugin.acroFormDictionaryRoot = new ht(), e.internal.acroformPlugin.acroFormDictionaryRoot.scope = e, e.internal.acroformPlugin.acroFormDictionaryRoot._eventID = e.internal.events.subscribe(\"postPutResources\", function () {\n        !function (t) {\n          t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID), delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID, t.internal.acroformPlugin.printedOut = !0;\n        }(e);\n      }), e.internal.events.subscribe(\"buildDocument\", function () {\n        !function (t) {\n          t.internal.acroformPlugin.acroFormDictionaryRoot.objId = void 0;\n          var e = t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;\n          for (var r in e) if (e.hasOwnProperty(r)) {\n            var n = e[r];\n            n.objId = void 0, n.hasAnnotation && nt(n, t);\n          }\n        }(e);\n      }), e.internal.events.subscribe(\"putCatalog\", function () {\n        !function (t) {\n          if (void 0 === t.internal.acroformPlugin.acroFormDictionaryRoot) throw new Error(\"putCatalogCallback: Root missing.\");\n          t.internal.write(\"/AcroForm \" + t.internal.acroformPlugin.acroFormDictionaryRoot.objId + \" 0 R\");\n        }(e);\n      }), e.internal.events.subscribe(\"postPutPages\", function (r) {\n        !function (e, r) {\n          var n = !e;\n          for (var i in e || (r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId, !0), r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()), e = e || r.internal.acroformPlugin.acroFormDictionaryRoot.Kids) if (e.hasOwnProperty(i)) {\n            var a = e[i],\n              o = [],\n              s = a.Rect;\n            if (a.Rect && (a.Rect = $(a.Rect, r)), r.internal.newObjectDeferredBegin(a.objId, !0), a.DA = At.createDefaultAppearanceStream(a), \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(a) && \"function\" == typeof a.getKeyValueListForStream && (o = a.getKeyValueListForStream()), a.Rect = s, a.hasAppearanceStream && !a.appearanceStreamContent) {\n              var c = Q(a);\n              o.push({\n                key: \"AP\",\n                value: \"<</N \" + c + \">>\"\n              }), r.internal.acroformPlugin.xForms.push(c);\n            }\n            if (a.appearanceStreamContent) {\n              var u = \"\";\n              for (var h in a.appearanceStreamContent) if (a.appearanceStreamContent.hasOwnProperty(h)) {\n                var l = a.appearanceStreamContent[h];\n                if (u += \"/\" + h + \" \", u += \"<<\", Object.keys(l).length >= 1 || Array.isArray(l)) {\n                  for (var i in l) if (l.hasOwnProperty(i)) {\n                    var f = l[i];\n                    \"function\" == typeof f && (f = f.call(r, a)), u += \"/\" + i + \" \" + f + \" \", r.internal.acroformPlugin.xForms.indexOf(f) >= 0 || r.internal.acroformPlugin.xForms.push(f);\n                  }\n                } else \"function\" == typeof (f = l) && (f = f.call(r, a)), u += \"/\" + i + \" \" + f, r.internal.acroformPlugin.xForms.indexOf(f) >= 0 || r.internal.acroformPlugin.xForms.push(f);\n                u += \">>\";\n              }\n              o.push({\n                key: \"AP\",\n                value: \"<<\\n\" + u + \">>\"\n              });\n            }\n            r.internal.putStream({\n              additionalKeyValues: o,\n              objectId: a.objId\n            }), r.internal.out(\"endobj\");\n          }\n          n && it(r.internal.acroformPlugin.xForms, r);\n        }(r, e);\n      }), e.internal.acroformPlugin.isInitialized = !0;\n    }\n  },\n  ot = q.__acroform__.arrayToPdfArray = function (e, r, n) {\n    var i = function (t) {\n      return t;\n    };\n    if (Array.isArray(e)) {\n      for (var a = \"[\", o = 0; o < e.length; o++) switch (0 !== o && (a += \" \"), (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e[o])) {\n        case \"boolean\":\n        case \"number\":\n        case \"object\":\n          a += e[o].toString();\n          break;\n        case \"string\":\n          \"/\" !== e[o].substr(0, 1) ? (void 0 !== r && n && (i = n.internal.getEncryptor(r)), a += \"(\" + R(i(e[o].toString())) + \")\") : a += e[o].toString();\n      }\n      return a += \"]\";\n    }\n    throw new Error(\"Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray\");\n  };\nvar st = function (t, e, r) {\n    var n = function (t) {\n      return t;\n    };\n    return void 0 !== e && r && (n = r.internal.getEncryptor(e)), (t = t || \"\").toString(), t = \"(\" + R(n(t)) + \")\";\n  },\n  ct = function () {\n    this._objId = void 0, this._scope = void 0, Object.defineProperty(this, \"objId\", {\n      get: function () {\n        if (void 0 === this._objId) {\n          if (void 0 === this.scope) return;\n          this._objId = this.scope.internal.newObjectDeferred();\n        }\n        return this._objId;\n      },\n      set: function (t) {\n        this._objId = t;\n      }\n    }), Object.defineProperty(this, \"scope\", {\n      value: this._scope,\n      writable: !0\n    });\n  };\nct.prototype.toString = function () {\n  return this.objId + \" 0 R\";\n}, ct.prototype.putStream = function () {\n  var t = this.getKeyValueListForStream();\n  this.scope.internal.putStream({\n    data: this.stream,\n    additionalKeyValues: t,\n    objectId: this.objId\n  }), this.scope.internal.out(\"endobj\");\n}, ct.prototype.getKeyValueListForStream = function () {\n  var t = [],\n    e = Object.getOwnPropertyNames(this).filter(function (t) {\n      return \"content\" != t && \"appearanceStreamContent\" != t && \"scope\" != t && \"objId\" != t && \"_\" != t.substring(0, 1);\n    });\n  for (var r in e) if (!1 === Object.getOwnPropertyDescriptor(this, e[r]).configurable) {\n    var n = e[r],\n      i = this[n];\n    i && (Array.isArray(i) ? t.push({\n      key: n,\n      value: ot(i, this.objId, this.scope)\n    }) : i instanceof ct ? (i.scope = this.scope, t.push({\n      key: n,\n      value: i.objId + \" 0 R\"\n    })) : \"function\" != typeof i && t.push({\n      key: n,\n      value: i\n    }));\n  }\n  return t;\n};\nvar ut = function () {\n  ct.call(this), Object.defineProperty(this, \"Type\", {\n    value: \"/XObject\",\n    configurable: !1,\n    writable: !0\n  }), Object.defineProperty(this, \"Subtype\", {\n    value: \"/Form\",\n    configurable: !1,\n    writable: !0\n  }), Object.defineProperty(this, \"FormType\", {\n    value: 1,\n    configurable: !1,\n    writable: !0\n  });\n  var t,\n    e = [];\n  Object.defineProperty(this, \"BBox\", {\n    configurable: !1,\n    get: function () {\n      return e;\n    },\n    set: function (t) {\n      e = t;\n    }\n  }), Object.defineProperty(this, \"Resources\", {\n    value: \"2 0 R\",\n    configurable: !1,\n    writable: !0\n  }), Object.defineProperty(this, \"stream\", {\n    enumerable: !1,\n    configurable: !0,\n    set: function (e) {\n      t = e.trim();\n    },\n    get: function () {\n      return t || null;\n    }\n  });\n};\nH(ut, ct);\nvar ht = function () {\n  ct.call(this);\n  var t,\n    e = [];\n  Object.defineProperty(this, \"Kids\", {\n    enumerable: !1,\n    configurable: !0,\n    get: function () {\n      return e.length > 0 ? e : void 0;\n    }\n  }), Object.defineProperty(this, \"Fields\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      return e;\n    }\n  }), Object.defineProperty(this, \"DA\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      if (t) {\n        var e = function (t) {\n          return t;\n        };\n        return this.scope && (e = this.scope.internal.getEncryptor(this.objId)), \"(\" + R(e(t)) + \")\";\n      }\n    },\n    set: function (e) {\n      t = e;\n    }\n  });\n};\nH(ht, ct);\nvar lt = function t() {\n  ct.call(this);\n  var e = 4;\n  Object.defineProperty(this, \"F\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      return e;\n    },\n    set: function (t) {\n      if (isNaN(t)) throw new Error('Invalid value \"' + t + '\" for attribute F supplied.');\n      e = t;\n    }\n  }), Object.defineProperty(this, \"showWhenPrinted\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(e, 3));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.F = K(e, 3) : this.F = Z(e, 3);\n    }\n  });\n  var r = 0;\n  Object.defineProperty(this, \"Ff\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      return r;\n    },\n    set: function (t) {\n      if (isNaN(t)) throw new Error('Invalid value \"' + t + '\" for attribute Ff supplied.');\n      r = t;\n    }\n  });\n  var n = [];\n  Object.defineProperty(this, \"Rect\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      if (0 !== n.length) return n;\n    },\n    set: function (t) {\n      n = void 0 !== t ? t : [];\n    }\n  }), Object.defineProperty(this, \"x\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return !n || isNaN(n[0]) ? 0 : n[0];\n    },\n    set: function (t) {\n      n[0] = t;\n    }\n  }), Object.defineProperty(this, \"y\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return !n || isNaN(n[1]) ? 0 : n[1];\n    },\n    set: function (t) {\n      n[1] = t;\n    }\n  }), Object.defineProperty(this, \"width\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return !n || isNaN(n[2]) ? 0 : n[2];\n    },\n    set: function (t) {\n      n[2] = t;\n    }\n  }), Object.defineProperty(this, \"height\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return !n || isNaN(n[3]) ? 0 : n[3];\n    },\n    set: function (t) {\n      n[3] = t;\n    }\n  });\n  var i = \"\";\n  Object.defineProperty(this, \"FT\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      return i;\n    },\n    set: function (t) {\n      switch (t) {\n        case \"/Btn\":\n        case \"/Tx\":\n        case \"/Ch\":\n        case \"/Sig\":\n          i = t;\n          break;\n        default:\n          throw new Error('Invalid value \"' + t + '\" for attribute FT supplied.');\n      }\n    }\n  });\n  var a = null;\n  Object.defineProperty(this, \"T\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      if (!a || a.length < 1) {\n        if (this instanceof yt) return;\n        a = \"FieldObject\" + t.FieldNum++;\n      }\n      var e = function (t) {\n        return t;\n      };\n      return this.scope && (e = this.scope.internal.getEncryptor(this.objId)), \"(\" + R(e(a)) + \")\";\n    },\n    set: function (t) {\n      a = t.toString();\n    }\n  }), Object.defineProperty(this, \"fieldName\", {\n    configurable: !0,\n    enumerable: !0,\n    get: function () {\n      return a;\n    },\n    set: function (t) {\n      a = t;\n    }\n  });\n  var o = \"helvetica\";\n  Object.defineProperty(this, \"fontName\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return o;\n    },\n    set: function (t) {\n      o = t;\n    }\n  });\n  var s = \"normal\";\n  Object.defineProperty(this, \"fontStyle\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return s;\n    },\n    set: function (t) {\n      s = t;\n    }\n  });\n  var c = 0;\n  Object.defineProperty(this, \"fontSize\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return c;\n    },\n    set: function (t) {\n      c = t;\n    }\n  });\n  var u = void 0;\n  Object.defineProperty(this, \"maxFontSize\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return void 0 === u ? 50 / D : u;\n    },\n    set: function (t) {\n      u = t;\n    }\n  });\n  var h = \"black\";\n  Object.defineProperty(this, \"color\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return h;\n    },\n    set: function (t) {\n      h = t;\n    }\n  });\n  var l = \"/F1 0 Tf 0 g\";\n  Object.defineProperty(this, \"DA\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      if (!(!l || this instanceof yt || this instanceof Nt)) return st(l, this.objId, this.scope);\n    },\n    set: function (t) {\n      t = t.toString(), l = t;\n    }\n  });\n  var f = null;\n  Object.defineProperty(this, \"DV\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      if (f) return this instanceof mt == !1 ? st(f, this.objId, this.scope) : f;\n    },\n    set: function (t) {\n      t = t.toString(), f = this instanceof mt == !1 ? \"(\" === t.substr(0, 1) ? T(t.substr(1, t.length - 2)) : T(t) : t;\n    }\n  }), Object.defineProperty(this, \"defaultValue\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return this instanceof mt == !0 ? T(f.substr(1, f.length - 1)) : f;\n    },\n    set: function (t) {\n      t = t.toString(), f = this instanceof mt == !0 ? \"/\" + t : t;\n    }\n  });\n  var d = null;\n  Object.defineProperty(this, \"_V\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      if (d) return d;\n    },\n    set: function (t) {\n      this.V = t;\n    }\n  }), Object.defineProperty(this, \"V\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      if (d) return this instanceof mt == !1 ? st(d, this.objId, this.scope) : d;\n    },\n    set: function (t) {\n      t = t.toString(), d = this instanceof mt == !1 ? \"(\" === t.substr(0, 1) ? T(t.substr(1, t.length - 2)) : T(t) : t;\n    }\n  }), Object.defineProperty(this, \"value\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return this instanceof mt == !0 ? T(d.substr(1, d.length - 1)) : d;\n    },\n    set: function (t) {\n      t = t.toString(), d = this instanceof mt == !0 ? \"/\" + t : t;\n    }\n  }), Object.defineProperty(this, \"hasAnnotation\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return this.Rect;\n    }\n  }), Object.defineProperty(this, \"Type\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      return this.hasAnnotation ? \"/Annot\" : null;\n    }\n  }), Object.defineProperty(this, \"Subtype\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      return this.hasAnnotation ? \"/Widget\" : null;\n    }\n  });\n  var p,\n    g = !1;\n  Object.defineProperty(this, \"hasAppearanceStream\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return g;\n    },\n    set: function (t) {\n      t = Boolean(t), g = t;\n    }\n  }), Object.defineProperty(this, \"page\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      if (p) return p;\n    },\n    set: function (t) {\n      p = t;\n    }\n  }), Object.defineProperty(this, \"readOnly\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 1));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 1) : this.Ff = Z(this.Ff, 1);\n    }\n  }), Object.defineProperty(this, \"required\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 2));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 2) : this.Ff = Z(this.Ff, 2);\n    }\n  }), Object.defineProperty(this, \"noExport\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 3));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 3) : this.Ff = Z(this.Ff, 3);\n    }\n  });\n  var m = null;\n  Object.defineProperty(this, \"Q\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      if (null !== m) return m;\n    },\n    set: function (t) {\n      if (-1 === [0, 1, 2].indexOf(t)) throw new Error('Invalid value \"' + t + '\" for attribute Q supplied.');\n      m = t;\n    }\n  }), Object.defineProperty(this, \"textAlign\", {\n    get: function () {\n      var t;\n      switch (m) {\n        case 0:\n        default:\n          t = \"left\";\n          break;\n        case 1:\n          t = \"center\";\n          break;\n        case 2:\n          t = \"right\";\n      }\n      return t;\n    },\n    configurable: !0,\n    enumerable: !0,\n    set: function (t) {\n      switch (t) {\n        case \"right\":\n        case 2:\n          m = 2;\n          break;\n        case \"center\":\n        case 1:\n          m = 1;\n          break;\n        case \"left\":\n        case 0:\n        default:\n          m = 0;\n      }\n    }\n  });\n};\nH(lt, ct);\nvar ft = function () {\n  lt.call(this), this.FT = \"/Ch\", this.V = \"()\", this.fontName = \"zapfdingbats\";\n  var t = 0;\n  Object.defineProperty(this, \"TI\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      return t;\n    },\n    set: function (e) {\n      t = e;\n    }\n  }), Object.defineProperty(this, \"topIndex\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return t;\n    },\n    set: function (e) {\n      t = e;\n    }\n  });\n  var e = [];\n  Object.defineProperty(this, \"Opt\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      return ot(e, this.objId, this.scope);\n    },\n    set: function (t) {\n      var r, n;\n      n = [], \"string\" == typeof (r = t) && (n = function (t, e, r) {\n        r || (r = 1);\n        for (var n, i = []; n = e.exec(t);) i.push(n[r]);\n        return i;\n      }(r, /\\((.*?)\\)/g)), e = n;\n    }\n  }), this.getOptions = function () {\n    return e;\n  }, this.setOptions = function (t) {\n    e = t, this.sort && e.sort();\n  }, this.addOption = function (t) {\n    t = (t = t || \"\").toString(), e.push(t), this.sort && e.sort();\n  }, this.removeOption = function (t, r) {\n    for (r = r || !1, t = (t = t || \"\").toString(); -1 !== e.indexOf(t) && (e.splice(e.indexOf(t), 1), !1 !== r););\n  }, Object.defineProperty(this, \"combo\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 18));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 18) : this.Ff = Z(this.Ff, 18);\n    }\n  }), Object.defineProperty(this, \"edit\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 19));\n    },\n    set: function (t) {\n      !0 === this.combo && (!0 === Boolean(t) ? this.Ff = K(this.Ff, 19) : this.Ff = Z(this.Ff, 19));\n    }\n  }), Object.defineProperty(this, \"sort\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 20));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? (this.Ff = K(this.Ff, 20), e.sort()) : this.Ff = Z(this.Ff, 20);\n    }\n  }), Object.defineProperty(this, \"multiSelect\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 22));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 22) : this.Ff = Z(this.Ff, 22);\n    }\n  }), Object.defineProperty(this, \"doNotSpellCheck\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 23));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 23) : this.Ff = Z(this.Ff, 23);\n    }\n  }), Object.defineProperty(this, \"commitOnSelChange\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 27));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 27) : this.Ff = Z(this.Ff, 27);\n    }\n  }), this.hasAppearanceStream = !1;\n};\nH(ft, lt);\nvar dt = function () {\n  ft.call(this), this.fontName = \"helvetica\", this.combo = !1;\n};\nH(dt, ft);\nvar pt = function () {\n  dt.call(this), this.combo = !0;\n};\nH(pt, dt);\nvar gt = function () {\n  pt.call(this), this.edit = !0;\n};\nH(gt, pt);\nvar mt = function () {\n  lt.call(this), this.FT = \"/Btn\", Object.defineProperty(this, \"noToggleToOff\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 15));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 15) : this.Ff = Z(this.Ff, 15);\n    }\n  }), Object.defineProperty(this, \"radio\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 16));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 16) : this.Ff = Z(this.Ff, 16);\n    }\n  }), Object.defineProperty(this, \"pushButton\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 17));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 17) : this.Ff = Z(this.Ff, 17);\n    }\n  }), Object.defineProperty(this, \"radioIsUnison\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 26));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 26) : this.Ff = Z(this.Ff, 26);\n    }\n  });\n  var e,\n    r = {};\n  Object.defineProperty(this, \"MK\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      var t = function (t) {\n        return t;\n      };\n      if (this.scope && (t = this.scope.internal.getEncryptor(this.objId)), 0 !== Object.keys(r).length) {\n        var e,\n          n = [];\n        for (e in n.push(\"<<\"), r) n.push(\"/\" + e + \" (\" + R(t(r[e])) + \")\");\n        return n.push(\">>\"), n.join(\"\\n\");\n      }\n    },\n    set: function (e) {\n      \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e) && (r = e);\n    }\n  }), Object.defineProperty(this, \"caption\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return r.CA || \"\";\n    },\n    set: function (t) {\n      \"string\" == typeof t && (r.CA = t);\n    }\n  }), Object.defineProperty(this, \"AS\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      return e;\n    },\n    set: function (t) {\n      e = t;\n    }\n  }), Object.defineProperty(this, \"appearanceState\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return e.substr(1, e.length - 1);\n    },\n    set: function (t) {\n      e = \"/\" + t;\n    }\n  });\n};\nH(mt, lt);\nvar vt = function () {\n  mt.call(this), this.pushButton = !0;\n};\nH(vt, mt);\nvar bt = function () {\n  mt.call(this), this.radio = !0, this.pushButton = !1;\n  var t = [];\n  Object.defineProperty(this, \"Kids\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      return t;\n    },\n    set: function (e) {\n      t = void 0 !== e ? e : [];\n    }\n  });\n};\nH(bt, mt);\nvar yt = function () {\n  var e, r;\n  lt.call(this), Object.defineProperty(this, \"Parent\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      return e;\n    },\n    set: function (t) {\n      e = t;\n    }\n  }), Object.defineProperty(this, \"optionName\", {\n    enumerable: !1,\n    configurable: !0,\n    get: function () {\n      return r;\n    },\n    set: function (t) {\n      r = t;\n    }\n  });\n  var n,\n    i = {};\n  Object.defineProperty(this, \"MK\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      var t = function (t) {\n        return t;\n      };\n      this.scope && (t = this.scope.internal.getEncryptor(this.objId));\n      var e,\n        r = [];\n      for (e in r.push(\"<<\"), i) r.push(\"/\" + e + \" (\" + R(t(i[e])) + \")\");\n      return r.push(\">>\"), r.join(\"\\n\");\n    },\n    set: function (e) {\n      \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e) && (i = e);\n    }\n  }), Object.defineProperty(this, \"caption\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return i.CA || \"\";\n    },\n    set: function (t) {\n      \"string\" == typeof t && (i.CA = t);\n    }\n  }), Object.defineProperty(this, \"AS\", {\n    enumerable: !1,\n    configurable: !1,\n    get: function () {\n      return n;\n    },\n    set: function (t) {\n      n = t;\n    }\n  }), Object.defineProperty(this, \"appearanceState\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return n.substr(1, n.length - 1);\n    },\n    set: function (t) {\n      n = \"/\" + t;\n    }\n  }), this.caption = \"l\", this.appearanceState = \"Off\", this._AppearanceType = At.RadioButton.Circle, this.appearanceStreamContent = this._AppearanceType.createAppearanceStream(this.optionName);\n};\nH(yt, lt), bt.prototype.setAppearance = function (t) {\n  if (!(\"createAppearanceStream\" in t) || !(\"getCA\" in t)) throw new Error(\"Couldn't assign Appearance to RadioButton. Appearance was Invalid!\");\n  for (var e in this.Kids) if (this.Kids.hasOwnProperty(e)) {\n    var r = this.Kids[e];\n    r.appearanceStreamContent = t.createAppearanceStream(r.optionName), r.caption = t.getCA();\n  }\n}, bt.prototype.createOption = function (t) {\n  var e = new yt();\n  return e.Parent = this, e.optionName = t, this.Kids.push(e), xt.call(this.scope, e), e;\n};\nvar wt = function () {\n  mt.call(this), this.fontName = \"zapfdingbats\", this.caption = \"3\", this.appearanceState = \"On\", this.value = \"On\", this.textAlign = \"center\", this.appearanceStreamContent = At.CheckBox.createAppearanceStream();\n};\nH(wt, mt);\nvar Nt = function () {\n  lt.call(this), this.FT = \"/Tx\", Object.defineProperty(this, \"multiline\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 13));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 13) : this.Ff = Z(this.Ff, 13);\n    }\n  }), Object.defineProperty(this, \"fileSelect\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 21));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 21) : this.Ff = Z(this.Ff, 21);\n    }\n  }), Object.defineProperty(this, \"doNotSpellCheck\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 23));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 23) : this.Ff = Z(this.Ff, 23);\n    }\n  }), Object.defineProperty(this, \"doNotScroll\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 24));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 24) : this.Ff = Z(this.Ff, 24);\n    }\n  }), Object.defineProperty(this, \"comb\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 25));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 25) : this.Ff = Z(this.Ff, 25);\n    }\n  }), Object.defineProperty(this, \"richText\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 26));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 26) : this.Ff = Z(this.Ff, 26);\n    }\n  });\n  var t = null;\n  Object.defineProperty(this, \"MaxLen\", {\n    enumerable: !0,\n    configurable: !1,\n    get: function () {\n      return t;\n    },\n    set: function (e) {\n      t = e;\n    }\n  }), Object.defineProperty(this, \"maxLength\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return t;\n    },\n    set: function (e) {\n      Number.isInteger(e) && (t = e);\n    }\n  }), Object.defineProperty(this, \"hasAppearanceStream\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return this.V || this.DV;\n    }\n  });\n};\nH(Nt, lt);\nvar Lt = function () {\n  Nt.call(this), Object.defineProperty(this, \"password\", {\n    enumerable: !0,\n    configurable: !0,\n    get: function () {\n      return Boolean(X(this.Ff, 14));\n    },\n    set: function (t) {\n      !0 === Boolean(t) ? this.Ff = K(this.Ff, 14) : this.Ff = Z(this.Ff, 14);\n    }\n  }), this.password = !0;\n};\nH(Lt, Nt);\nvar At = {\n  CheckBox: {\n    createAppearanceStream: function () {\n      return {\n        N: {\n          On: At.CheckBox.YesNormal\n        },\n        D: {\n          On: At.CheckBox.YesPushDown,\n          Off: At.CheckBox.OffPushDown\n        }\n      };\n    },\n    YesPushDown: function (t) {\n      var e = V(t);\n      e.scope = t.scope;\n      var r = [],\n        n = t.scope.internal.getFont(t.fontName, t.fontStyle).id,\n        i = t.scope.__private__.encodeColorString(t.color),\n        a = tt(t, t.caption);\n      return r.push(\"0.749023 g\"), r.push(\"0 0 \" + U(At.internal.getWidth(t)) + \" \" + U(At.internal.getHeight(t)) + \" re\"), r.push(\"f\"), r.push(\"BMC\"), r.push(\"q\"), r.push(\"0 0 1 rg\"), r.push(\"/\" + n + \" \" + U(a.fontSize) + \" Tf \" + i), r.push(\"BT\"), r.push(a.text), r.push(\"ET\"), r.push(\"Q\"), r.push(\"EMC\"), e.stream = r.join(\"\\n\"), e;\n    },\n    YesNormal: function (t) {\n      var e = V(t);\n      e.scope = t.scope;\n      var r = t.scope.internal.getFont(t.fontName, t.fontStyle).id,\n        n = t.scope.__private__.encodeColorString(t.color),\n        i = [],\n        a = At.internal.getHeight(t),\n        o = At.internal.getWidth(t),\n        s = tt(t, t.caption);\n      return i.push(\"1 g\"), i.push(\"0 0 \" + U(o) + \" \" + U(a) + \" re\"), i.push(\"f\"), i.push(\"q\"), i.push(\"0 0 1 rg\"), i.push(\"0 0 \" + U(o - 1) + \" \" + U(a - 1) + \" re\"), i.push(\"W\"), i.push(\"n\"), i.push(\"0 g\"), i.push(\"BT\"), i.push(\"/\" + r + \" \" + U(s.fontSize) + \" Tf \" + n), i.push(s.text), i.push(\"ET\"), i.push(\"Q\"), e.stream = i.join(\"\\n\"), e;\n    },\n    OffPushDown: function (t) {\n      var e = V(t);\n      e.scope = t.scope;\n      var r = [];\n      return r.push(\"0.749023 g\"), r.push(\"0 0 \" + U(At.internal.getWidth(t)) + \" \" + U(At.internal.getHeight(t)) + \" re\"), r.push(\"f\"), e.stream = r.join(\"\\n\"), e;\n    }\n  },\n  RadioButton: {\n    Circle: {\n      createAppearanceStream: function (t) {\n        var e = {\n          D: {\n            Off: At.RadioButton.Circle.OffPushDown\n          },\n          N: {}\n        };\n        return e.N[t] = At.RadioButton.Circle.YesNormal, e.D[t] = At.RadioButton.Circle.YesPushDown, e;\n      },\n      getCA: function () {\n        return \"l\";\n      },\n      YesNormal: function (t) {\n        var e = V(t);\n        e.scope = t.scope;\n        var r = [],\n          n = At.internal.getWidth(t) <= At.internal.getHeight(t) ? At.internal.getWidth(t) / 4 : At.internal.getHeight(t) / 4;\n        n = Number((.9 * n).toFixed(5));\n        var i = At.internal.Bezier_C,\n          a = Number((n * i).toFixed(5));\n        return r.push(\"q\"), r.push(\"1 0 0 1 \" + z(At.internal.getWidth(t) / 2) + \" \" + z(At.internal.getHeight(t) / 2) + \" cm\"), r.push(n + \" 0 m\"), r.push(n + \" \" + a + \" \" + a + \" \" + n + \" 0 \" + n + \" c\"), r.push(\"-\" + a + \" \" + n + \" -\" + n + \" \" + a + \" -\" + n + \" 0 c\"), r.push(\"-\" + n + \" -\" + a + \" -\" + a + \" -\" + n + \" 0 -\" + n + \" c\"), r.push(a + \" -\" + n + \" \" + n + \" -\" + a + \" \" + n + \" 0 c\"), r.push(\"f\"), r.push(\"Q\"), e.stream = r.join(\"\\n\"), e;\n      },\n      YesPushDown: function (t) {\n        var e = V(t);\n        e.scope = t.scope;\n        var r = [],\n          n = At.internal.getWidth(t) <= At.internal.getHeight(t) ? At.internal.getWidth(t) / 4 : At.internal.getHeight(t) / 4;\n        n = Number((.9 * n).toFixed(5));\n        var i = Number((2 * n).toFixed(5)),\n          a = Number((i * At.internal.Bezier_C).toFixed(5)),\n          o = Number((n * At.internal.Bezier_C).toFixed(5));\n        return r.push(\"0.749023 g\"), r.push(\"q\"), r.push(\"1 0 0 1 \" + z(At.internal.getWidth(t) / 2) + \" \" + z(At.internal.getHeight(t) / 2) + \" cm\"), r.push(i + \" 0 m\"), r.push(i + \" \" + a + \" \" + a + \" \" + i + \" 0 \" + i + \" c\"), r.push(\"-\" + a + \" \" + i + \" -\" + i + \" \" + a + \" -\" + i + \" 0 c\"), r.push(\"-\" + i + \" -\" + a + \" -\" + a + \" -\" + i + \" 0 -\" + i + \" c\"), r.push(a + \" -\" + i + \" \" + i + \" -\" + a + \" \" + i + \" 0 c\"), r.push(\"f\"), r.push(\"Q\"), r.push(\"0 g\"), r.push(\"q\"), r.push(\"1 0 0 1 \" + z(At.internal.getWidth(t) / 2) + \" \" + z(At.internal.getHeight(t) / 2) + \" cm\"), r.push(n + \" 0 m\"), r.push(n + \" \" + o + \" \" + o + \" \" + n + \" 0 \" + n + \" c\"), r.push(\"-\" + o + \" \" + n + \" -\" + n + \" \" + o + \" -\" + n + \" 0 c\"), r.push(\"-\" + n + \" -\" + o + \" -\" + o + \" -\" + n + \" 0 -\" + n + \" c\"), r.push(o + \" -\" + n + \" \" + n + \" -\" + o + \" \" + n + \" 0 c\"), r.push(\"f\"), r.push(\"Q\"), e.stream = r.join(\"\\n\"), e;\n      },\n      OffPushDown: function (t) {\n        var e = V(t);\n        e.scope = t.scope;\n        var r = [],\n          n = At.internal.getWidth(t) <= At.internal.getHeight(t) ? At.internal.getWidth(t) / 4 : At.internal.getHeight(t) / 4;\n        n = Number((.9 * n).toFixed(5));\n        var i = Number((2 * n).toFixed(5)),\n          a = Number((i * At.internal.Bezier_C).toFixed(5));\n        return r.push(\"0.749023 g\"), r.push(\"q\"), r.push(\"1 0 0 1 \" + z(At.internal.getWidth(t) / 2) + \" \" + z(At.internal.getHeight(t) / 2) + \" cm\"), r.push(i + \" 0 m\"), r.push(i + \" \" + a + \" \" + a + \" \" + i + \" 0 \" + i + \" c\"), r.push(\"-\" + a + \" \" + i + \" -\" + i + \" \" + a + \" -\" + i + \" 0 c\"), r.push(\"-\" + i + \" -\" + a + \" -\" + a + \" -\" + i + \" 0 -\" + i + \" c\"), r.push(a + \" -\" + i + \" \" + i + \" -\" + a + \" \" + i + \" 0 c\"), r.push(\"f\"), r.push(\"Q\"), e.stream = r.join(\"\\n\"), e;\n      }\n    },\n    Cross: {\n      createAppearanceStream: function (t) {\n        var e = {\n          D: {\n            Off: At.RadioButton.Cross.OffPushDown\n          },\n          N: {}\n        };\n        return e.N[t] = At.RadioButton.Cross.YesNormal, e.D[t] = At.RadioButton.Cross.YesPushDown, e;\n      },\n      getCA: function () {\n        return \"8\";\n      },\n      YesNormal: function (t) {\n        var e = V(t);\n        e.scope = t.scope;\n        var r = [],\n          n = At.internal.calculateCross(t);\n        return r.push(\"q\"), r.push(\"1 1 \" + U(At.internal.getWidth(t) - 2) + \" \" + U(At.internal.getHeight(t) - 2) + \" re\"), r.push(\"W\"), r.push(\"n\"), r.push(U(n.x1.x) + \" \" + U(n.x1.y) + \" m\"), r.push(U(n.x2.x) + \" \" + U(n.x2.y) + \" l\"), r.push(U(n.x4.x) + \" \" + U(n.x4.y) + \" m\"), r.push(U(n.x3.x) + \" \" + U(n.x3.y) + \" l\"), r.push(\"s\"), r.push(\"Q\"), e.stream = r.join(\"\\n\"), e;\n      },\n      YesPushDown: function (t) {\n        var e = V(t);\n        e.scope = t.scope;\n        var r = At.internal.calculateCross(t),\n          n = [];\n        return n.push(\"0.749023 g\"), n.push(\"0 0 \" + U(At.internal.getWidth(t)) + \" \" + U(At.internal.getHeight(t)) + \" re\"), n.push(\"f\"), n.push(\"q\"), n.push(\"1 1 \" + U(At.internal.getWidth(t) - 2) + \" \" + U(At.internal.getHeight(t) - 2) + \" re\"), n.push(\"W\"), n.push(\"n\"), n.push(U(r.x1.x) + \" \" + U(r.x1.y) + \" m\"), n.push(U(r.x2.x) + \" \" + U(r.x2.y) + \" l\"), n.push(U(r.x4.x) + \" \" + U(r.x4.y) + \" m\"), n.push(U(r.x3.x) + \" \" + U(r.x3.y) + \" l\"), n.push(\"s\"), n.push(\"Q\"), e.stream = n.join(\"\\n\"), e;\n      },\n      OffPushDown: function (t) {\n        var e = V(t);\n        e.scope = t.scope;\n        var r = [];\n        return r.push(\"0.749023 g\"), r.push(\"0 0 \" + U(At.internal.getWidth(t)) + \" \" + U(At.internal.getHeight(t)) + \" re\"), r.push(\"f\"), e.stream = r.join(\"\\n\"), e;\n      }\n    }\n  },\n  createDefaultAppearanceStream: function (t) {\n    var e = t.scope.internal.getFont(t.fontName, t.fontStyle).id,\n      r = t.scope.__private__.encodeColorString(t.color);\n    return \"/\" + e + \" \" + t.fontSize + \" Tf \" + r;\n  }\n};\nAt.internal = {\n  Bezier_C: .551915024494,\n  calculateCross: function (t) {\n    var e = At.internal.getWidth(t),\n      r = At.internal.getHeight(t),\n      n = Math.min(e, r);\n    return {\n      x1: {\n        x: (e - n) / 2,\n        y: (r - n) / 2 + n\n      },\n      x2: {\n        x: (e - n) / 2 + n,\n        y: (r - n) / 2\n      },\n      x3: {\n        x: (e - n) / 2,\n        y: (r - n) / 2\n      },\n      x4: {\n        x: (e - n) / 2 + n,\n        y: (r - n) / 2 + n\n      }\n    };\n  }\n}, At.internal.getWidth = function (e) {\n  var r = 0;\n  return \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e) && (r = W(e.Rect[2])), r;\n}, At.internal.getHeight = function (e) {\n  var r = 0;\n  return \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e) && (r = W(e.Rect[3])), r;\n};\nvar xt = q.addField = function (t) {\n  if (at(this, t), !(t instanceof lt)) throw new Error(\"Invalid argument passed to jsPDF.addField.\");\n  var e;\n  return (e = t).scope.internal.acroformPlugin.printedOut && (e.scope.internal.acroformPlugin.printedOut = !1, e.scope.internal.acroformPlugin.acroFormDictionaryRoot = null), e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e), t.page = t.scope.internal.getCurrentPageInfo().pageNumber, this;\n};\nq.AcroFormChoiceField = ft, q.AcroFormListBox = dt, q.AcroFormComboBox = pt, q.AcroFormEditBox = gt, q.AcroFormButton = mt, q.AcroFormPushButton = vt, q.AcroFormRadioButton = bt, q.AcroFormCheckBox = wt, q.AcroFormTextField = Nt, q.AcroFormPasswordField = Lt, q.AcroFormAppearance = At, q.AcroForm = {\n  ChoiceField: ft,\n  ListBox: dt,\n  ComboBox: pt,\n  EditBox: gt,\n  Button: mt,\n  PushButton: vt,\n  RadioButton: bt,\n  CheckBox: wt,\n  TextField: Nt,\n  PasswordField: Lt,\n  Appearance: At\n}, E.AcroForm = {\n  ChoiceField: ft,\n  ListBox: dt,\n  ComboBox: pt,\n  EditBox: gt,\n  Button: mt,\n  PushButton: vt,\n  RadioButton: bt,\n  CheckBox: wt,\n  TextField: Nt,\n  PasswordField: Lt,\n  Appearance: At\n};\nvar St = E.AcroForm;\nfunction _t(t) {\n  return t.reduce(function (t, e, r) {\n    return t[e] = r, t;\n  }, {});\n}\n!function (e) {\n  e.__addimage__ = {};\n  var r = \"UNKNOWN\",\n    n = {\n      PNG: [[137, 80, 78, 71]],\n      TIFF: [[77, 77, 0, 42], [73, 73, 42, 0]],\n      JPEG: [[255, 216, 255, 224, void 0, void 0, 74, 70, 73, 70, 0], [255, 216, 255, 225, void 0, void 0, 69, 120, 105, 102, 0, 0], [255, 216, 255, 219], [255, 216, 255, 238]],\n      JPEG2000: [[0, 0, 0, 12, 106, 80, 32, 32]],\n      GIF87a: [[71, 73, 70, 56, 55, 97]],\n      GIF89a: [[71, 73, 70, 56, 57, 97]],\n      WEBP: [[82, 73, 70, 70, void 0, void 0, void 0, void 0, 87, 69, 66, 80]],\n      BMP: [[66, 77], [66, 65], [67, 73], [67, 80], [73, 67], [80, 84]]\n    },\n    i = e.__addimage__.getImageFileTypeByImageData = function (t, e) {\n      var i,\n        a,\n        o,\n        s,\n        c,\n        u = r;\n      if (\"RGBA\" === (e = e || r) || void 0 !== t.data && t.data instanceof Uint8ClampedArray && \"height\" in t && \"width\" in t) return \"RGBA\";\n      if (x(t)) for (c in n) for (o = n[c], i = 0; i < o.length; i += 1) {\n        for (s = !0, a = 0; a < o[i].length; a += 1) if (void 0 !== o[i][a] && o[i][a] !== t[a]) {\n          s = !1;\n          break;\n        }\n        if (!0 === s) {\n          u = c;\n          break;\n        }\n      } else for (c in n) for (o = n[c], i = 0; i < o.length; i += 1) {\n        for (s = !0, a = 0; a < o[i].length; a += 1) if (void 0 !== o[i][a] && o[i][a] !== t.charCodeAt(a)) {\n          s = !1;\n          break;\n        }\n        if (!0 === s) {\n          u = c;\n          break;\n        }\n      }\n      return u === r && e !== r && (u = e), u;\n    },\n    a = function t(e) {\n      for (var r = this.internal.write, n = this.internal.putStream, i = (0, this.internal.getFilters)(); -1 !== i.indexOf(\"FlateEncode\");) i.splice(i.indexOf(\"FlateEncode\"), 1);\n      e.objectId = this.internal.newObject();\n      var a = [];\n      if (a.push({\n        key: \"Type\",\n        value: \"/XObject\"\n      }), a.push({\n        key: \"Subtype\",\n        value: \"/Image\"\n      }), a.push({\n        key: \"Width\",\n        value: e.width\n      }), a.push({\n        key: \"Height\",\n        value: e.height\n      }), e.colorSpace === b.INDEXED ? a.push({\n        key: \"ColorSpace\",\n        value: \"[/Indexed /DeviceRGB \" + (e.palette.length / 3 - 1) + \" \" + (\"sMask\" in e && void 0 !== e.sMask ? e.objectId + 2 : e.objectId + 1) + \" 0 R]\"\n      }) : (a.push({\n        key: \"ColorSpace\",\n        value: \"/\" + e.colorSpace\n      }), e.colorSpace === b.DEVICE_CMYK && a.push({\n        key: \"Decode\",\n        value: \"[1 0 1 0 1 0 1 0]\"\n      })), a.push({\n        key: \"BitsPerComponent\",\n        value: e.bitsPerComponent\n      }), \"decodeParameters\" in e && void 0 !== e.decodeParameters && a.push({\n        key: \"DecodeParms\",\n        value: \"<<\" + e.decodeParameters + \">>\"\n      }), \"transparency\" in e && Array.isArray(e.transparency)) {\n        for (var o = \"\", s = 0, c = e.transparency.length; s < c; s++) o += e.transparency[s] + \" \" + e.transparency[s] + \" \";\n        a.push({\n          key: \"Mask\",\n          value: \"[\" + o + \"]\"\n        });\n      }\n      void 0 !== e.sMask && a.push({\n        key: \"SMask\",\n        value: e.objectId + 1 + \" 0 R\"\n      });\n      var u = void 0 !== e.filter ? [\"/\" + e.filter] : void 0;\n      if (n({\n        data: e.data,\n        additionalKeyValues: a,\n        alreadyAppliedFilters: u,\n        objectId: e.objectId\n      }), r(\"endobj\"), \"sMask\" in e && void 0 !== e.sMask) {\n        var h = \"/Predictor \" + e.predictor + \" /Colors 1 /BitsPerComponent \" + e.bitsPerComponent + \" /Columns \" + e.width,\n          l = {\n            width: e.width,\n            height: e.height,\n            colorSpace: \"DeviceGray\",\n            bitsPerComponent: e.bitsPerComponent,\n            decodeParameters: h,\n            data: e.sMask\n          };\n        \"filter\" in e && (l.filter = e.filter), t.call(this, l);\n      }\n      if (e.colorSpace === b.INDEXED) {\n        var f = this.internal.newObject();\n        n({\n          data: _(new Uint8Array(e.palette)),\n          objectId: f\n        }), r(\"endobj\");\n      }\n    },\n    o = function () {\n      var t = this.internal.collections.addImage_images;\n      for (var e in t) a.call(this, t[e]);\n    },\n    s = function () {\n      var t,\n        e = this.internal.collections.addImage_images,\n        r = this.internal.write;\n      for (var n in e) r(\"/I\" + (t = e[n]).index, t.objectId, \"0\", \"R\");\n    },\n    c = function () {\n      this.internal.collections.addImage_images || (this.internal.collections.addImage_images = {}, this.internal.events.subscribe(\"putResources\", o), this.internal.events.subscribe(\"putXobjectDict\", s));\n    },\n    h = function () {\n      var t = this.internal.collections.addImage_images;\n      return c.call(this), t;\n    },\n    l = function () {\n      return Object.keys(this.internal.collections.addImage_images).length;\n    },\n    f = function (t) {\n      return \"function\" == typeof e[\"process\" + t.toUpperCase()];\n    },\n    d = function (e) {\n      return \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e) && 1 === e.nodeType;\n    },\n    p = function (t, r) {\n      if (\"IMG\" === t.nodeName && t.hasAttribute(\"src\")) {\n        var n = \"\" + t.getAttribute(\"src\");\n        if (0 === n.indexOf(\"data:image/\")) return u(unescape(n).split(\"base64,\").pop());\n        var i = e.loadFile(n, !0);\n        if (void 0 !== i) return i;\n      }\n      if (\"CANVAS\" === t.nodeName) {\n        if (0 === t.width || 0 === t.height) throw new Error(\"Given canvas must have data. Canvas width: \" + t.width + \", height: \" + t.height);\n        var a;\n        switch (r) {\n          case \"PNG\":\n            a = \"image/png\";\n            break;\n          case \"WEBP\":\n            a = \"image/webp\";\n            break;\n          case \"JPEG\":\n          case \"JPG\":\n          default:\n            a = \"image/jpeg\";\n        }\n        return u(t.toDataURL(a, 1).split(\"base64,\").pop());\n      }\n    },\n    g = function (t) {\n      var e = this.internal.collections.addImage_images;\n      if (e) for (var r in e) if (t === e[r].alias) return e[r];\n    },\n    m = function (t, e, r) {\n      return t || e || (t = -96, e = -96), t < 0 && (t = -1 * r.width * 72 / t / this.internal.scaleFactor), e < 0 && (e = -1 * r.height * 72 / e / this.internal.scaleFactor), 0 === t && (t = e * r.width / r.height), 0 === e && (e = t * r.height / r.width), [t, e];\n    },\n    v = function (t, e, r, n, i, a) {\n      var o = m.call(this, r, n, i),\n        s = this.internal.getCoordinateString,\n        c = this.internal.getVerticalCoordinateString,\n        u = h.call(this);\n      if (r = o[0], n = o[1], u[i.index] = i, a) {\n        a *= Math.PI / 180;\n        var l = Math.cos(a),\n          f = Math.sin(a),\n          d = function (t) {\n            return t.toFixed(4);\n          },\n          p = [d(l), d(f), d(-1 * f), d(l), 0, 0, \"cm\"];\n      }\n      this.internal.write(\"q\"), a ? (this.internal.write([1, \"0\", \"0\", 1, s(t), c(e + n), \"cm\"].join(\" \")), this.internal.write(p.join(\" \")), this.internal.write([s(r), \"0\", \"0\", s(n), \"0\", \"0\", \"cm\"].join(\" \"))) : this.internal.write([s(r), \"0\", \"0\", s(n), s(t), c(e + n), \"cm\"].join(\" \")), this.isAdvancedAPI() && this.internal.write([1, 0, 0, -1, 0, 0, \"cm\"].join(\" \")), this.internal.write(\"/I\" + i.index + \" Do\"), this.internal.write(\"Q\");\n    },\n    b = e.color_spaces = {\n      DEVICE_RGB: \"DeviceRGB\",\n      DEVICE_GRAY: \"DeviceGray\",\n      DEVICE_CMYK: \"DeviceCMYK\",\n      CAL_GREY: \"CalGray\",\n      CAL_RGB: \"CalRGB\",\n      LAB: \"Lab\",\n      ICC_BASED: \"ICCBased\",\n      INDEXED: \"Indexed\",\n      PATTERN: \"Pattern\",\n      SEPARATION: \"Separation\",\n      DEVICE_N: \"DeviceN\"\n    };\n  e.decode = {\n    DCT_DECODE: \"DCTDecode\",\n    FLATE_DECODE: \"FlateDecode\",\n    LZW_DECODE: \"LZWDecode\",\n    JPX_DECODE: \"JPXDecode\",\n    JBIG2_DECODE: \"JBIG2Decode\",\n    ASCII85_DECODE: \"ASCII85Decode\",\n    ASCII_HEX_DECODE: \"ASCIIHexDecode\",\n    RUN_LENGTH_DECODE: \"RunLengthDecode\",\n    CCITT_FAX_DECODE: \"CCITTFaxDecode\"\n  };\n  var y = e.image_compression = {\n      NONE: \"NONE\",\n      FAST: \"FAST\",\n      MEDIUM: \"MEDIUM\",\n      SLOW: \"SLOW\"\n    },\n    w = e.__addimage__.sHashCode = function (t) {\n      var e,\n        r,\n        n = 0;\n      if (\"string\" == typeof t) for (r = t.length, e = 0; e < r; e++) n = (n << 5) - n + t.charCodeAt(e), n |= 0;else if (x(t)) for (r = t.byteLength / 2, e = 0; e < r; e++) n = (n << 5) - n + t[e], n |= 0;\n      return n;\n    },\n    N = e.__addimage__.validateStringAsBase64 = function (t) {\n      (t = t || \"\").toString().trim();\n      var e = !0;\n      return 0 === t.length && (e = !1), t.length % 4 != 0 && (e = !1), !1 === /^[A-Za-z0-9+/]+$/.test(t.substr(0, t.length - 2)) && (e = !1), !1 === /^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2)) && (e = !1), e;\n    },\n    L = e.__addimage__.extractImageFromDataUrl = function (t) {\n      var e = (t = t || \"\").split(\"base64,\"),\n        r = null;\n      if (2 === e.length) {\n        var n = /^data:(\\w*\\/\\w*);*(charset=(?!charset=)[\\w=-]*)*;*$/.exec(e[0]);\n        Array.isArray(n) && (r = {\n          mimeType: n[1],\n          charset: n[2],\n          data: e[1]\n        });\n      }\n      return r;\n    },\n    A = e.__addimage__.supportsArrayBuffer = function () {\n      return \"undefined\" != typeof ArrayBuffer && \"undefined\" != typeof Uint8Array;\n    };\n  e.__addimage__.isArrayBuffer = function (t) {\n    return A() && t instanceof ArrayBuffer;\n  };\n  var x = e.__addimage__.isArrayBufferView = function (t) {\n      return A() && \"undefined\" != typeof Uint32Array && (t instanceof Int8Array || t instanceof Uint8Array || \"undefined\" != typeof Uint8ClampedArray && t instanceof Uint8ClampedArray || t instanceof Int16Array || t instanceof Uint16Array || t instanceof Int32Array || t instanceof Uint32Array || t instanceof Float32Array || t instanceof Float64Array);\n    },\n    S = e.__addimage__.binaryStringToUint8Array = function (t) {\n      for (var e = t.length, r = new Uint8Array(e), n = 0; n < e; n++) r[n] = t.charCodeAt(n);\n      return r;\n    },\n    _ = e.__addimage__.arrayBufferToBinaryString = function (t) {\n      for (var e = \"\", r = x(t) ? t : new Uint8Array(t), n = 0; n < r.length; n += 8192) e += String.fromCharCode.apply(null, r.subarray(n, n + 8192));\n      return e;\n    };\n  e.addImage = function () {\n    var e, n, i, a, o, s, u, h, l;\n    if (\"number\" == typeof arguments[1] ? (n = r, i = arguments[1], a = arguments[2], o = arguments[3], s = arguments[4], u = arguments[5], h = arguments[6], l = arguments[7]) : (n = arguments[1], i = arguments[2], a = arguments[3], o = arguments[4], s = arguments[5], u = arguments[6], h = arguments[7], l = arguments[8]), \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e = arguments[0]) && !d(e) && \"imageData\" in e) {\n      var f = e;\n      e = f.imageData, n = f.format || n || r, i = f.x || i || 0, a = f.y || a || 0, o = f.w || f.width || o, s = f.h || f.height || s, u = f.alias || u, h = f.compression || h, l = f.rotation || f.angle || l;\n    }\n    var p = this.internal.getFilters();\n    if (void 0 === h && -1 !== p.indexOf(\"FlateEncode\") && (h = \"SLOW\"), isNaN(i) || isNaN(a)) throw new Error(\"Invalid coordinates passed to jsPDF.addImage\");\n    c.call(this);\n    var g = P.call(this, e, n, u, h);\n    return v.call(this, i, a, o, s, g, l), this;\n  };\n  var P = function (t, n, a, o) {\n      var s, c, u;\n      if (\"string\" == typeof t && i(t) === r) {\n        t = unescape(t);\n        var h = k(t, !1);\n        (\"\" !== h || void 0 !== (h = e.loadFile(t, !0))) && (t = h);\n      }\n      if (d(t) && (t = p(t, n)), n = i(t, n), !f(n)) throw new Error(\"addImage does not support files of type '\" + n + \"', please ensure that a plugin for '\" + n + \"' support is added.\");\n      if ((null == (u = a) || 0 === u.length) && (a = function (t) {\n        return \"string\" == typeof t || x(t) ? w(t) : x(t.data) ? w(t.data) : null;\n      }(t)), (s = g.call(this, a)) || (A() && (t instanceof Uint8Array || \"RGBA\" === n || (c = t, t = S(t))), s = this[\"process\" + n.toUpperCase()](t, l.call(this), a, function (t) {\n        return t && \"string\" == typeof t && (t = t.toUpperCase()), t in e.image_compression ? t : y.NONE;\n      }(o), c)), !s) throw new Error(\"An unknown error occurred whilst processing the image.\");\n      return s;\n    },\n    k = e.__addimage__.convertBase64ToBinaryString = function (t, e) {\n      var r;\n      e = \"boolean\" != typeof e || e;\n      var n,\n        i = \"\";\n      if (\"string\" == typeof t) {\n        n = null !== (r = L(t)) ? r.data : t;\n        try {\n          i = u(n);\n        } catch (t) {\n          if (e) throw N(n) ? new Error(\"atob-Error in jsPDF.convertBase64ToBinaryString \" + t.message) : new Error(\"Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString \");\n        }\n      }\n      return i;\n    };\n  e.getImageProperties = function (t) {\n    var n,\n      a,\n      o = \"\";\n    if (d(t) && (t = p(t)), \"string\" == typeof t && i(t) === r && (\"\" === (o = k(t, !1)) && (o = e.loadFile(t) || \"\"), t = o), a = i(t), !f(a)) throw new Error(\"addImage does not support files of type '\" + a + \"', please ensure that a plugin for '\" + a + \"' support is added.\");\n    if (!A() || t instanceof Uint8Array || (t = S(t)), !(n = this[\"process\" + a.toUpperCase()](t))) throw new Error(\"An unknown error occurred whilst processing the image\");\n    return n.fileType = a, n;\n  };\n}(E.API),\n/**\n * @license\n * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var e = function (t) {\n    if (void 0 !== t && \"\" != t) return !0;\n  };\n  E.API.events.push([\"addPage\", function (t) {\n    this.internal.getPageInfo(t.pageNumber).pageContext.annotations = [];\n  }]), t.events.push([\"putPage\", function (t) {\n    for (var r, n, i, a = this.internal.getCoordinateString, o = this.internal.getVerticalCoordinateString, s = this.internal.getPageInfoByObjId(t.objId), c = t.pageContext.annotations, u = !1, h = 0; h < c.length && !u; h++) switch ((r = c[h]).type) {\n      case \"link\":\n        (e(r.options.url) || e(r.options.pageNumber)) && (u = !0);\n        break;\n      case \"reference\":\n      case \"text\":\n      case \"freetext\":\n        u = !0;\n    }\n    if (0 != u) {\n      this.internal.write(\"/Annots [\");\n      for (var l = 0; l < c.length; l++) {\n        r = c[l];\n        var f = this.internal.pdfEscape,\n          d = this.internal.getEncryptor(t.objId);\n        switch (r.type) {\n          case \"reference\":\n            this.internal.write(\" \" + r.object.objId + \" 0 R \");\n            break;\n          case \"text\":\n            var p = this.internal.newAdditionalObject(),\n              g = this.internal.newAdditionalObject(),\n              m = this.internal.getEncryptor(p.objId),\n              v = r.title || \"Note\";\n            i = \"<</Type /Annot /Subtype /Text \" + (n = \"/Rect [\" + a(r.bounds.x) + \" \" + o(r.bounds.y + r.bounds.h) + \" \" + a(r.bounds.x + r.bounds.w) + \" \" + o(r.bounds.y) + \"] \") + \"/Contents (\" + f(m(r.contents)) + \")\", i += \" /Popup \" + g.objId + \" 0 R\", i += \" /P \" + s.objId + \" 0 R\", i += \" /T (\" + f(m(v)) + \") >>\", p.content = i;\n            var b = p.objId + \" 0 R\";\n            i = \"<</Type /Annot /Subtype /Popup \" + (n = \"/Rect [\" + a(r.bounds.x + 30) + \" \" + o(r.bounds.y + r.bounds.h) + \" \" + a(r.bounds.x + r.bounds.w + 30) + \" \" + o(r.bounds.y) + \"] \") + \" /Parent \" + b, r.open && (i += \" /Open true\"), i += \" >>\", g.content = i, this.internal.write(p.objId, \"0 R\", g.objId, \"0 R\");\n            break;\n          case \"freetext\":\n            n = \"/Rect [\" + a(r.bounds.x) + \" \" + o(r.bounds.y) + \" \" + a(r.bounds.x + r.bounds.w) + \" \" + o(r.bounds.y + r.bounds.h) + \"] \";\n            var y = r.color || \"#000000\";\n            i = \"<</Type /Annot /Subtype /FreeText \" + n + \"/Contents (\" + f(d(r.contents)) + \")\", i += \" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#\" + y + \")\", i += \" /Border [0 0 0]\", i += \" >>\", this.internal.write(i);\n            break;\n          case \"link\":\n            if (r.options.name) {\n              var w = this.annotations._nameMap[r.options.name];\n              r.options.pageNumber = w.page, r.options.top = w.y;\n            } else r.options.top || (r.options.top = 0);\n            if (n = \"/Rect [\" + r.finalBounds.x + \" \" + r.finalBounds.y + \" \" + r.finalBounds.w + \" \" + r.finalBounds.h + \"] \", i = \"\", r.options.url) i = \"<</Type /Annot /Subtype /Link \" + n + \"/Border [0 0 0] /A <</S /URI /URI (\" + f(d(r.options.url)) + \") >>\";else if (r.options.pageNumber) {\n              switch (i = \"<</Type /Annot /Subtype /Link \" + n + \"/Border [0 0 0] /Dest [\" + this.internal.getPageInfo(r.options.pageNumber).objId + \" 0 R\", r.options.magFactor = r.options.magFactor || \"XYZ\", r.options.magFactor) {\n                case \"Fit\":\n                  i += \" /Fit]\";\n                  break;\n                case \"FitH\":\n                  i += \" /FitH \" + r.options.top + \"]\";\n                  break;\n                case \"FitV\":\n                  r.options.left = r.options.left || 0, i += \" /FitV \" + r.options.left + \"]\";\n                  break;\n                case \"XYZ\":\n                default:\n                  var N = o(r.options.top);\n                  r.options.left = r.options.left || 0, void 0 === r.options.zoom && (r.options.zoom = 0), i += \" /XYZ \" + r.options.left + \" \" + N + \" \" + r.options.zoom + \"]\";\n              }\n            }\n            \"\" != i && (i += \" >>\", this.internal.write(i));\n        }\n      }\n      this.internal.write(\"]\");\n    }\n  }]), t.createAnnotation = function (t) {\n    var e = this.internal.getCurrentPageInfo();\n    switch (t.type) {\n      case \"link\":\n        this.link(t.bounds.x, t.bounds.y, t.bounds.w, t.bounds.h, t);\n        break;\n      case \"text\":\n      case \"freetext\":\n        e.pageContext.annotations.push(t);\n    }\n  }, t.link = function (t, e, r, n, i) {\n    var a = this.internal.getCurrentPageInfo(),\n      o = this.internal.getCoordinateString,\n      s = this.internal.getVerticalCoordinateString;\n    a.pageContext.annotations.push({\n      finalBounds: {\n        x: o(t),\n        y: s(e),\n        w: o(t + r),\n        h: s(e + n)\n      },\n      options: i,\n      type: \"link\"\n    });\n  }, t.textWithLink = function (t, e, r, n) {\n    var i,\n      a,\n      o = this.getTextWidth(t),\n      s = this.internal.getLineHeight() / this.internal.scaleFactor;\n    if (void 0 !== n.maxWidth) {\n      a = n.maxWidth;\n      var c = this.splitTextToSize(t, a).length;\n      i = Math.ceil(s * c);\n    } else a = o, i = s;\n    return this.text(t, e, r, n), r += .2 * s, \"center\" === n.align && (e -= o / 2), \"right\" === n.align && (e -= o), this.link(e, r - s, a, i, n), o;\n  }, t.getTextWidth = function (t) {\n    var e = this.internal.getFontSize();\n    return this.getStringUnitWidth(t) * e / this.internal.scaleFactor;\n  };\n}(E.API),\n/**\n * @license\n * Copyright (c) 2017 Aras Abbasi\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var e = {\n      1569: [65152],\n      1570: [65153, 65154],\n      1571: [65155, 65156],\n      1572: [65157, 65158],\n      1573: [65159, 65160],\n      1574: [65161, 65162, 65163, 65164],\n      1575: [65165, 65166],\n      1576: [65167, 65168, 65169, 65170],\n      1577: [65171, 65172],\n      1578: [65173, 65174, 65175, 65176],\n      1579: [65177, 65178, 65179, 65180],\n      1580: [65181, 65182, 65183, 65184],\n      1581: [65185, 65186, 65187, 65188],\n      1582: [65189, 65190, 65191, 65192],\n      1583: [65193, 65194],\n      1584: [65195, 65196],\n      1585: [65197, 65198],\n      1586: [65199, 65200],\n      1587: [65201, 65202, 65203, 65204],\n      1588: [65205, 65206, 65207, 65208],\n      1589: [65209, 65210, 65211, 65212],\n      1590: [65213, 65214, 65215, 65216],\n      1591: [65217, 65218, 65219, 65220],\n      1592: [65221, 65222, 65223, 65224],\n      1593: [65225, 65226, 65227, 65228],\n      1594: [65229, 65230, 65231, 65232],\n      1601: [65233, 65234, 65235, 65236],\n      1602: [65237, 65238, 65239, 65240],\n      1603: [65241, 65242, 65243, 65244],\n      1604: [65245, 65246, 65247, 65248],\n      1605: [65249, 65250, 65251, 65252],\n      1606: [65253, 65254, 65255, 65256],\n      1607: [65257, 65258, 65259, 65260],\n      1608: [65261, 65262],\n      1609: [65263, 65264, 64488, 64489],\n      1610: [65265, 65266, 65267, 65268],\n      1649: [64336, 64337],\n      1655: [64477],\n      1657: [64358, 64359, 64360, 64361],\n      1658: [64350, 64351, 64352, 64353],\n      1659: [64338, 64339, 64340, 64341],\n      1662: [64342, 64343, 64344, 64345],\n      1663: [64354, 64355, 64356, 64357],\n      1664: [64346, 64347, 64348, 64349],\n      1667: [64374, 64375, 64376, 64377],\n      1668: [64370, 64371, 64372, 64373],\n      1670: [64378, 64379, 64380, 64381],\n      1671: [64382, 64383, 64384, 64385],\n      1672: [64392, 64393],\n      1676: [64388, 64389],\n      1677: [64386, 64387],\n      1678: [64390, 64391],\n      1681: [64396, 64397],\n      1688: [64394, 64395],\n      1700: [64362, 64363, 64364, 64365],\n      1702: [64366, 64367, 64368, 64369],\n      1705: [64398, 64399, 64400, 64401],\n      1709: [64467, 64468, 64469, 64470],\n      1711: [64402, 64403, 64404, 64405],\n      1713: [64410, 64411, 64412, 64413],\n      1715: [64406, 64407, 64408, 64409],\n      1722: [64414, 64415],\n      1723: [64416, 64417, 64418, 64419],\n      1726: [64426, 64427, 64428, 64429],\n      1728: [64420, 64421],\n      1729: [64422, 64423, 64424, 64425],\n      1733: [64480, 64481],\n      1734: [64473, 64474],\n      1735: [64471, 64472],\n      1736: [64475, 64476],\n      1737: [64482, 64483],\n      1739: [64478, 64479],\n      1740: [64508, 64509, 64510, 64511],\n      1744: [64484, 64485, 64486, 64487],\n      1746: [64430, 64431],\n      1747: [64432, 64433]\n    },\n    r = {\n      65247: {\n        65154: 65269,\n        65156: 65271,\n        65160: 65273,\n        65166: 65275\n      },\n      65248: {\n        65154: 65270,\n        65156: 65272,\n        65160: 65274,\n        65166: 65276\n      },\n      65165: {\n        65247: {\n          65248: {\n            65258: 65010\n          }\n        }\n      },\n      1617: {\n        1612: 64606,\n        1613: 64607,\n        1614: 64608,\n        1615: 64609,\n        1616: 64610\n      }\n    },\n    n = {\n      1612: 64606,\n      1613: 64607,\n      1614: 64608,\n      1615: 64609,\n      1616: 64610\n    },\n    i = [1570, 1571, 1573, 1575];\n  t.__arabicParser__ = {};\n  var a = t.__arabicParser__.isInArabicSubstitutionA = function (t) {\n      return void 0 !== e[t.charCodeAt(0)];\n    },\n    o = t.__arabicParser__.isArabicLetter = function (t) {\n      return \"string\" == typeof t && /^[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]+$/.test(t);\n    },\n    s = t.__arabicParser__.isArabicEndLetter = function (t) {\n      return o(t) && a(t) && e[t.charCodeAt(0)].length <= 2;\n    },\n    c = t.__arabicParser__.isArabicAlfLetter = function (t) {\n      return o(t) && i.indexOf(t.charCodeAt(0)) >= 0;\n    };\n  t.__arabicParser__.arabicLetterHasIsolatedForm = function (t) {\n    return o(t) && a(t) && e[t.charCodeAt(0)].length >= 1;\n  };\n  var u = t.__arabicParser__.arabicLetterHasFinalForm = function (t) {\n    return o(t) && a(t) && e[t.charCodeAt(0)].length >= 2;\n  };\n  t.__arabicParser__.arabicLetterHasInitialForm = function (t) {\n    return o(t) && a(t) && e[t.charCodeAt(0)].length >= 3;\n  };\n  var h = t.__arabicParser__.arabicLetterHasMedialForm = function (t) {\n      return o(t) && a(t) && 4 == e[t.charCodeAt(0)].length;\n    },\n    l = t.__arabicParser__.resolveLigatures = function (t) {\n      var e = 0,\n        n = r,\n        i = \"\",\n        a = 0;\n      for (e = 0; e < t.length; e += 1) void 0 !== n[t.charCodeAt(e)] ? (a++, \"number\" == typeof (n = n[t.charCodeAt(e)]) && (i += String.fromCharCode(n), n = r, a = 0), e === t.length - 1 && (n = r, i += t.charAt(e - (a - 1)), e -= a - 1, a = 0)) : (n = r, i += t.charAt(e - a), e -= a, a = 0);\n      return i;\n    };\n  t.__arabicParser__.isArabicDiacritic = function (t) {\n    return void 0 !== t && void 0 !== n[t.charCodeAt(0)];\n  };\n  var f = t.__arabicParser__.getCorrectForm = function (t, e, r) {\n      return o(t) ? !1 === a(t) ? -1 : !u(t) || !o(e) && !o(r) || !o(r) && s(e) || s(t) && !o(e) || s(t) && c(e) || s(t) && s(e) ? 0 : h(t) && o(e) && !s(e) && o(r) && u(r) ? 3 : s(t) || !o(r) ? 1 : 2 : -1;\n    },\n    d = function (t) {\n      var r = 0,\n        n = 0,\n        i = 0,\n        a = \"\",\n        s = \"\",\n        c = \"\",\n        u = (t = t || \"\").split(\"\\\\s+\"),\n        h = [];\n      for (r = 0; r < u.length; r += 1) {\n        for (h.push(\"\"), n = 0; n < u[r].length; n += 1) a = u[r][n], s = u[r][n - 1], c = u[r][n + 1], o(a) ? (i = f(a, s, c), h[r] += -1 !== i ? String.fromCharCode(e[a.charCodeAt(0)][i]) : a) : h[r] += a;\n        h[r] = l(h[r]);\n      }\n      return h.join(\" \");\n    },\n    p = t.__arabicParser__.processArabic = t.processArabic = function () {\n      var t,\n        e = \"string\" == typeof arguments[0] ? arguments[0] : arguments[0].text,\n        r = [];\n      if (Array.isArray(e)) {\n        var n = 0;\n        for (r = [], n = 0; n < e.length; n += 1) Array.isArray(e[n]) ? r.push([d(e[n][0]), e[n][1], e[n][2]]) : r.push([d(e[n])]);\n        t = r;\n      } else t = d(e);\n      return \"string\" == typeof arguments[0] ? t : (arguments[0].text = t, arguments[0]);\n    };\n  t.events.push([\"preProcessText\", p]);\n}(E.API), E.API.autoPrint = function (t) {\n  var e;\n  switch ((t = t || {}).variant = t.variant || \"non-conform\", t.variant) {\n    case \"javascript\":\n      this.addJS(\"print({});\");\n      break;\n    case \"non-conform\":\n    default:\n      this.internal.events.subscribe(\"postPutResources\", function () {\n        e = this.internal.newObject(), this.internal.out(\"<<\"), this.internal.out(\"/S /Named\"), this.internal.out(\"/Type /Action\"), this.internal.out(\"/N /Print\"), this.internal.out(\">>\"), this.internal.out(\"endobj\");\n      }), this.internal.events.subscribe(\"putCatalog\", function () {\n        this.internal.out(\"/OpenAction \" + e + \" 0 R\");\n      });\n  }\n  return this;\n},\n/**\n * @license\n * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var e = function () {\n    var t = void 0;\n    Object.defineProperty(this, \"pdf\", {\n      get: function () {\n        return t;\n      },\n      set: function (e) {\n        t = e;\n      }\n    });\n    var e = 150;\n    Object.defineProperty(this, \"width\", {\n      get: function () {\n        return e;\n      },\n      set: function (t) {\n        e = isNaN(t) || !1 === Number.isInteger(t) || t < 0 ? 150 : t, this.getContext(\"2d\").pageWrapXEnabled && (this.getContext(\"2d\").pageWrapX = e + 1);\n      }\n    });\n    var r = 300;\n    Object.defineProperty(this, \"height\", {\n      get: function () {\n        return r;\n      },\n      set: function (t) {\n        r = isNaN(t) || !1 === Number.isInteger(t) || t < 0 ? 300 : t, this.getContext(\"2d\").pageWrapYEnabled && (this.getContext(\"2d\").pageWrapY = r + 1);\n      }\n    });\n    var n = [];\n    Object.defineProperty(this, \"childNodes\", {\n      get: function () {\n        return n;\n      },\n      set: function (t) {\n        n = t;\n      }\n    });\n    var i = {};\n    Object.defineProperty(this, \"style\", {\n      get: function () {\n        return i;\n      },\n      set: function (t) {\n        i = t;\n      }\n    }), Object.defineProperty(this, \"parentNode\", {});\n  };\n  e.prototype.getContext = function (t, e) {\n    var r;\n    if (\"2d\" !== (t = t || \"2d\")) return null;\n    for (r in e) this.pdf.context2d.hasOwnProperty(r) && (this.pdf.context2d[r] = e[r]);\n    return this.pdf.context2d._canvas = this, this.pdf.context2d;\n  }, e.prototype.toDataURL = function () {\n    throw new Error(\"toDataURL is not implemented.\");\n  }, t.events.push([\"initialized\", function () {\n    this.canvas = new e(), this.canvas.pdf = this;\n  }]);\n}(E.API), function (e) {\n  var r = {\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0\n    },\n    n = !1,\n    i = function () {\n      void 0 === this.internal.__cell__ && (this.internal.__cell__ = {}, this.internal.__cell__.padding = 3, this.internal.__cell__.headerFunction = void 0, this.internal.__cell__.margins = Object.assign({}, r), this.internal.__cell__.margins.width = this.getPageWidth(), a.call(this));\n    },\n    a = function () {\n      this.internal.__cell__.lastCell = new o(), this.internal.__cell__.pages = 1;\n    },\n    o = function () {\n      var t = arguments[0];\n      Object.defineProperty(this, \"x\", {\n        enumerable: !0,\n        get: function () {\n          return t;\n        },\n        set: function (e) {\n          t = e;\n        }\n      });\n      var e = arguments[1];\n      Object.defineProperty(this, \"y\", {\n        enumerable: !0,\n        get: function () {\n          return e;\n        },\n        set: function (t) {\n          e = t;\n        }\n      });\n      var r = arguments[2];\n      Object.defineProperty(this, \"width\", {\n        enumerable: !0,\n        get: function () {\n          return r;\n        },\n        set: function (t) {\n          r = t;\n        }\n      });\n      var n = arguments[3];\n      Object.defineProperty(this, \"height\", {\n        enumerable: !0,\n        get: function () {\n          return n;\n        },\n        set: function (t) {\n          n = t;\n        }\n      });\n      var i = arguments[4];\n      Object.defineProperty(this, \"text\", {\n        enumerable: !0,\n        get: function () {\n          return i;\n        },\n        set: function (t) {\n          i = t;\n        }\n      });\n      var a = arguments[5];\n      Object.defineProperty(this, \"lineNumber\", {\n        enumerable: !0,\n        get: function () {\n          return a;\n        },\n        set: function (t) {\n          a = t;\n        }\n      });\n      var o = arguments[6];\n      return Object.defineProperty(this, \"align\", {\n        enumerable: !0,\n        get: function () {\n          return o;\n        },\n        set: function (t) {\n          o = t;\n        }\n      }), this;\n    };\n  o.prototype.clone = function () {\n    return new o(this.x, this.y, this.width, this.height, this.text, this.lineNumber, this.align);\n  }, o.prototype.toArray = function () {\n    return [this.x, this.y, this.width, this.height, this.text, this.lineNumber, this.align];\n  }, e.setHeaderFunction = function (t) {\n    return i.call(this), this.internal.__cell__.headerFunction = \"function\" == typeof t ? t : void 0, this;\n  }, e.getTextDimensions = function (t, e) {\n    i.call(this);\n    var r = (e = e || {}).fontSize || this.getFontSize(),\n      n = e.font || this.getFont(),\n      a = e.scaleFactor || this.internal.scaleFactor,\n      o = 0,\n      s = 0,\n      c = 0,\n      u = this;\n    if (!Array.isArray(t) && \"string\" != typeof t) {\n      if (\"number\" != typeof t) throw new Error(\"getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.\");\n      t = String(t);\n    }\n    var h = e.maxWidth;\n    h > 0 ? \"string\" == typeof t ? t = this.splitTextToSize(t, h) : \"[object Array]\" === Object.prototype.toString.call(t) && (t = t.reduce(function (t, e) {\n      return t.concat(u.splitTextToSize(e, h));\n    }, [])) : t = Array.isArray(t) ? t : [t];\n    for (var l = 0; l < t.length; l++) o < (c = this.getStringUnitWidth(t[l], {\n      font: n\n    }) * r) && (o = c);\n    return 0 !== o && (s = t.length), {\n      w: o /= a,\n      h: Math.max((s * r * this.getLineHeightFactor() - r * (this.getLineHeightFactor() - 1)) / a, 0)\n    };\n  }, e.cellAddPage = function () {\n    i.call(this), this.addPage();\n    var t = this.internal.__cell__.margins || r;\n    return this.internal.__cell__.lastCell = new o(t.left, t.top, void 0, void 0), this.internal.__cell__.pages += 1, this;\n  };\n  var s = e.cell = function () {\n    var t;\n    t = arguments[0] instanceof o ? arguments[0] : new o(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]), i.call(this);\n    var e = this.internal.__cell__.lastCell,\n      a = this.internal.__cell__.padding,\n      s = this.internal.__cell__.margins || r,\n      c = this.internal.__cell__.tableHeaderRow,\n      u = this.internal.__cell__.printHeaders;\n    return void 0 !== e.lineNumber && (e.lineNumber === t.lineNumber ? (t.x = (e.x || 0) + (e.width || 0), t.y = e.y || 0) : e.y + e.height + t.height + s.bottom > this.getPageHeight() ? (this.cellAddPage(), t.y = s.top, u && c && (this.printHeaderRow(t.lineNumber, !0), t.y += c[0].height)) : t.y = e.y + e.height || t.y), void 0 !== t.text[0] && (this.rect(t.x, t.y, t.width, t.height, !0 === n ? \"FD\" : void 0), \"right\" === t.align ? this.text(t.text, t.x + t.width - a, t.y + a, {\n      align: \"right\",\n      baseline: \"top\"\n    }) : \"center\" === t.align ? this.text(t.text, t.x + t.width / 2, t.y + a, {\n      align: \"center\",\n      baseline: \"top\",\n      maxWidth: t.width - a - a\n    }) : this.text(t.text, t.x + a, t.y + a, {\n      align: \"left\",\n      baseline: \"top\",\n      maxWidth: t.width - a - a\n    })), this.internal.__cell__.lastCell = t, this;\n  };\n  e.table = function (e, n, u, h, l) {\n    if (i.call(this), !u) throw new Error(\"No data for PDF table.\");\n    var f,\n      d,\n      p,\n      g,\n      m = [],\n      v = [],\n      b = [],\n      y = {},\n      w = {},\n      N = [],\n      L = [],\n      A = (l = l || {}).autoSize || !1,\n      x = !1 !== l.printHeaders,\n      S = l.css && void 0 !== l.css[\"font-size\"] ? 16 * l.css[\"font-size\"] : l.fontSize || 12,\n      _ = l.margins || Object.assign({\n        width: this.getPageWidth()\n      }, r),\n      P = \"number\" == typeof l.padding ? l.padding : 3,\n      k = l.headerBackgroundColor || \"#c8c8c8\",\n      I = l.headerTextColor || \"#000\";\n    if (a.call(this), this.internal.__cell__.printHeaders = x, this.internal.__cell__.margins = _, this.internal.__cell__.table_font_size = S, this.internal.__cell__.padding = P, this.internal.__cell__.headerBackgroundColor = k, this.internal.__cell__.headerTextColor = I, this.setFontSize(S), null == h) v = m = Object.keys(u[0]), b = m.map(function () {\n      return \"left\";\n    });else if (Array.isArray(h) && \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(h[0])) for (m = h.map(function (t) {\n      return t.name;\n    }), v = h.map(function (t) {\n      return t.prompt || t.name || \"\";\n    }), b = h.map(function (t) {\n      return t.align || \"left\";\n    }), f = 0; f < h.length; f += 1) w[h[f].name] = h[f].width * (19.049976 / 25.4);else Array.isArray(h) && \"string\" == typeof h[0] && (v = m = h, b = m.map(function () {\n      return \"left\";\n    }));\n    if (A || Array.isArray(h) && \"string\" == typeof h[0]) for (f = 0; f < m.length; f += 1) {\n      for (y[g = m[f]] = u.map(function (t) {\n        return t[g];\n      }), this.setFont(void 0, \"bold\"), N.push(this.getTextDimensions(v[f], {\n        fontSize: this.internal.__cell__.table_font_size,\n        scaleFactor: this.internal.scaleFactor\n      }).w), d = y[g], this.setFont(void 0, \"normal\"), p = 0; p < d.length; p += 1) N.push(this.getTextDimensions(d[p], {\n        fontSize: this.internal.__cell__.table_font_size,\n        scaleFactor: this.internal.scaleFactor\n      }).w);\n      w[g] = Math.max.apply(null, N) + P + P, N = [];\n    }\n    if (x) {\n      var F = {};\n      for (f = 0; f < m.length; f += 1) F[m[f]] = {}, F[m[f]].text = v[f], F[m[f]].align = b[f];\n      var C = c.call(this, F, w);\n      L = m.map(function (t) {\n        return new o(e, n, w[t], C, F[t].text, void 0, F[t].align);\n      }), this.setTableHeaderRow(L), this.printHeaderRow(1, !1);\n    }\n    var j = h.reduce(function (t, e) {\n      return t[e.name] = e.align, t;\n    }, {});\n    for (f = 0; f < u.length; f += 1) {\n      \"rowStart\" in l && l.rowStart instanceof Function && l.rowStart({\n        row: f,\n        data: u[f]\n      }, this);\n      var O = c.call(this, u[f], w);\n      for (p = 0; p < m.length; p += 1) {\n        var B = u[f][m[p]];\n        \"cellStart\" in l && l.cellStart instanceof Function && l.cellStart({\n          row: f,\n          col: p,\n          data: B\n        }, this), s.call(this, new o(e, n, w[m[p]], O, B, f + 2, j[m[p]]));\n      }\n    }\n    return this.internal.__cell__.table_x = e, this.internal.__cell__.table_y = n, this;\n  };\n  var c = function (t, e) {\n    var r = this.internal.__cell__.padding,\n      n = this.internal.__cell__.table_font_size,\n      i = this.internal.scaleFactor;\n    return Object.keys(t).map(function (n) {\n      var i = t[n];\n      return this.splitTextToSize(i.hasOwnProperty(\"text\") ? i.text : i, e[n] - r - r);\n    }, this).map(function (t) {\n      return this.getLineHeightFactor() * t.length * n / i + r + r;\n    }, this).reduce(function (t, e) {\n      return Math.max(t, e);\n    }, 0);\n  };\n  e.setTableHeaderRow = function (t) {\n    i.call(this), this.internal.__cell__.tableHeaderRow = t;\n  }, e.printHeaderRow = function (t, e) {\n    if (i.call(this), !this.internal.__cell__.tableHeaderRow) throw new Error(\"Property tableHeaderRow does not exist.\");\n    var r;\n    if (n = !0, \"function\" == typeof this.internal.__cell__.headerFunction) {\n      var a = this.internal.__cell__.headerFunction(this, this.internal.__cell__.pages);\n      this.internal.__cell__.lastCell = new o(a[0], a[1], a[2], a[3], void 0, -1);\n    }\n    this.setFont(void 0, \"bold\");\n    for (var c = [], u = 0; u < this.internal.__cell__.tableHeaderRow.length; u += 1) {\n      r = this.internal.__cell__.tableHeaderRow[u].clone(), e && (r.y = this.internal.__cell__.margins.top || 0, c.push(r)), r.lineNumber = t;\n      var h = this.getTextColor();\n      this.setTextColor(this.internal.__cell__.headerTextColor), this.setFillColor(this.internal.__cell__.headerBackgroundColor), s.call(this, r), this.setTextColor(h);\n    }\n    c.length > 0 && this.setTableHeaderRow(c), this.setFont(void 0, \"normal\"), n = !1;\n  };\n}(E.API);\nvar Pt = {\n    italic: [\"italic\", \"oblique\", \"normal\"],\n    oblique: [\"oblique\", \"italic\", \"normal\"],\n    normal: [\"normal\", \"oblique\", \"italic\"]\n  },\n  kt = [\"ultra-condensed\", \"extra-condensed\", \"condensed\", \"semi-condensed\", \"normal\", \"semi-expanded\", \"expanded\", \"extra-expanded\", \"ultra-expanded\"],\n  It = _t(kt),\n  Ft = [100, 200, 300, 400, 500, 600, 700, 800, 900],\n  Ct = _t(Ft);\nfunction jt(t) {\n  var e = t.family.replace(/\"|'/g, \"\").toLowerCase(),\n    r = function (t) {\n      return Pt[t = t || \"normal\"] ? t : \"normal\";\n    }(t.style),\n    n = function (t) {\n      if (!t) return 400;\n      if (\"number\" == typeof t) return t >= 100 && t <= 900 && t % 100 == 0 ? t : 400;\n      if (/^\\d00$/.test(t)) return parseInt(t);\n      switch (t) {\n        case \"bold\":\n          return 700;\n        case \"normal\":\n        default:\n          return 400;\n      }\n    }(t.weight),\n    i = function (t) {\n      return \"number\" == typeof It[t = t || \"normal\"] ? t : \"normal\";\n    }(t.stretch);\n  return {\n    family: e,\n    style: r,\n    weight: n,\n    stretch: i,\n    src: t.src || [],\n    ref: t.ref || {\n      name: e,\n      style: [i, r, n].join(\" \")\n    }\n  };\n}\nfunction Ot(t, e, r, n) {\n  var i;\n  for (i = r; i >= 0 && i < e.length; i += n) if (t[e[i]]) return t[e[i]];\n  for (i = r; i >= 0 && i < e.length; i -= n) if (t[e[i]]) return t[e[i]];\n}\nvar Bt = {\n    \"sans-serif\": \"helvetica\",\n    fixed: \"courier\",\n    monospace: \"courier\",\n    terminal: \"courier\",\n    cursive: \"times\",\n    fantasy: \"times\",\n    serif: \"times\"\n  },\n  Mt = {\n    caption: \"times\",\n    icon: \"times\",\n    menu: \"times\",\n    \"message-box\": \"times\",\n    \"small-caption\": \"times\",\n    \"status-bar\": \"times\"\n  };\nfunction Et(t) {\n  return [t.stretch, t.style, t.weight, t.family].join(\" \");\n}\nfunction qt(t, e, r) {\n  for (var n = (r = r || {}).defaultFontFamily || \"times\", i = Object.assign({}, Bt, r.genericFontFamilies || {}), a = null, o = null, s = 0; s < e.length; ++s) if (i[(a = jt(e[s])).family] && (a.family = i[a.family]), t.hasOwnProperty(a.family)) {\n    o = t[a.family];\n    break;\n  }\n  if (!(o = o || t[n])) throw new Error(\"Could not find a font-family for the rule '\" + Et(a) + \"' and default family '\" + n + \"'.\");\n  if (o = function (t, e) {\n    if (e[t]) return e[t];\n    var r = It[t],\n      n = r <= It.normal ? -1 : 1,\n      i = Ot(e, kt, r, n);\n    if (!i) throw new Error(\"Could not find a matching font-stretch value for \" + t);\n    return i;\n  }(a.stretch, o), o = function (t, e) {\n    if (e[t]) return e[t];\n    for (var r = Pt[t], n = 0; n < r.length; ++n) if (e[r[n]]) return e[r[n]];\n    throw new Error(\"Could not find a matching font-style for \" + t);\n  }(a.style, o), !(o = function (t, e) {\n    if (e[t]) return e[t];\n    if (400 === t && e[500]) return e[500];\n    if (500 === t && e[400]) return e[400];\n    var r = Ct[t],\n      n = Ot(e, Ft, r, t < 400 ? -1 : 1);\n    if (!n) throw new Error(\"Could not find a matching font-weight for value \" + t);\n    return n;\n  }(a.weight, o))) throw new Error(\"Failed to resolve a font for the rule '\" + Et(a) + \"'.\");\n  return o;\n}\nfunction Dt(t) {\n  return t.trimLeft();\n}\nfunction Rt(t, e) {\n  for (var r = 0; r < t.length;) {\n    if (t.charAt(r) === e) return [t.substring(0, r), t.substring(r + 1)];\n    r += 1;\n  }\n  return null;\n}\nfunction Tt(t) {\n  var e = t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);\n  return null === e ? null : [e[0], t.substring(e[0].length)];\n}\nvar Ut,\n  zt,\n  Ht,\n  Wt = [\"times\"];\n!function (e) {\n  var r,\n    n,\n    i,\n    o,\n    s,\n    c,\n    u,\n    h,\n    l,\n    d = function (t) {\n      return t = t || {}, this.isStrokeTransparent = t.isStrokeTransparent || !1, this.strokeOpacity = t.strokeOpacity || 1, this.strokeStyle = t.strokeStyle || \"#000000\", this.fillStyle = t.fillStyle || \"#000000\", this.isFillTransparent = t.isFillTransparent || !1, this.fillOpacity = t.fillOpacity || 1, this.font = t.font || \"10px sans-serif\", this.textBaseline = t.textBaseline || \"alphabetic\", this.textAlign = t.textAlign || \"left\", this.lineWidth = t.lineWidth || 1, this.lineJoin = t.lineJoin || \"miter\", this.lineCap = t.lineCap || \"butt\", this.path = t.path || [], this.transform = void 0 !== t.transform ? t.transform.clone() : new h(), this.globalCompositeOperation = t.globalCompositeOperation || \"normal\", this.globalAlpha = t.globalAlpha || 1, this.clip_path = t.clip_path || [], this.currentPoint = t.currentPoint || new c(), this.miterLimit = t.miterLimit || 10, this.lastPoint = t.lastPoint || new c(), this.lineDashOffset = t.lineDashOffset || 0, this.lineDash = t.lineDash || [], this.margin = t.margin || [0, 0, 0, 0], this.prevPageLastElemOffset = t.prevPageLastElemOffset || 0, this.ignoreClearRect = \"boolean\" != typeof t.ignoreClearRect || t.ignoreClearRect, this;\n    };\n  e.events.push([\"initialized\", function () {\n    this.context2d = new p(this), r = this.internal.f2, n = this.internal.getCoordinateString, i = this.internal.getVerticalCoordinateString, o = this.internal.getHorizontalCoordinate, s = this.internal.getVerticalCoordinate, c = this.internal.Point, u = this.internal.Rectangle, h = this.internal.Matrix, l = new d();\n  }]);\n  var p = function (t) {\n    Object.defineProperty(this, \"canvas\", {\n      get: function () {\n        return {\n          parentNode: !1,\n          style: !1\n        };\n      }\n    });\n    var e = t;\n    Object.defineProperty(this, \"pdf\", {\n      get: function () {\n        return e;\n      }\n    });\n    var r = !1;\n    Object.defineProperty(this, \"pageWrapXEnabled\", {\n      get: function () {\n        return r;\n      },\n      set: function (t) {\n        r = Boolean(t);\n      }\n    });\n    var n = !1;\n    Object.defineProperty(this, \"pageWrapYEnabled\", {\n      get: function () {\n        return n;\n      },\n      set: function (t) {\n        n = Boolean(t);\n      }\n    });\n    var i = 0;\n    Object.defineProperty(this, \"posX\", {\n      get: function () {\n        return i;\n      },\n      set: function (t) {\n        isNaN(t) || (i = t);\n      }\n    });\n    var a = 0;\n    Object.defineProperty(this, \"posY\", {\n      get: function () {\n        return a;\n      },\n      set: function (t) {\n        isNaN(t) || (a = t);\n      }\n    }), Object.defineProperty(this, \"margin\", {\n      get: function () {\n        return l.margin;\n      },\n      set: function (t) {\n        var e;\n        \"number\" == typeof t ? e = [t, t, t, t] : ((e = new Array(4))[0] = t[0], e[1] = t.length >= 2 ? t[1] : e[0], e[2] = t.length >= 3 ? t[2] : e[0], e[3] = t.length >= 4 ? t[3] : e[1]), l.margin = e;\n      }\n    });\n    var o = !1;\n    Object.defineProperty(this, \"autoPaging\", {\n      get: function () {\n        return o;\n      },\n      set: function (t) {\n        o = t;\n      }\n    });\n    var s = 0;\n    Object.defineProperty(this, \"lastBreak\", {\n      get: function () {\n        return s;\n      },\n      set: function (t) {\n        s = t;\n      }\n    });\n    var c = [];\n    Object.defineProperty(this, \"pageBreaks\", {\n      get: function () {\n        return c;\n      },\n      set: function (t) {\n        c = t;\n      }\n    }), Object.defineProperty(this, \"ctx\", {\n      get: function () {\n        return l;\n      },\n      set: function (t) {\n        t instanceof d && (l = t);\n      }\n    }), Object.defineProperty(this, \"path\", {\n      get: function () {\n        return l.path;\n      },\n      set: function (t) {\n        l.path = t;\n      }\n    });\n    var u = [];\n    Object.defineProperty(this, \"ctxStack\", {\n      get: function () {\n        return u;\n      },\n      set: function (t) {\n        u = t;\n      }\n    }), Object.defineProperty(this, \"fillStyle\", {\n      get: function () {\n        return this.ctx.fillStyle;\n      },\n      set: function (t) {\n        var e;\n        e = g(t), this.ctx.fillStyle = e.style, this.ctx.isFillTransparent = 0 === e.a, this.ctx.fillOpacity = e.a, this.pdf.setFillColor(e.r, e.g, e.b, {\n          a: e.a\n        }), this.pdf.setTextColor(e.r, e.g, e.b, {\n          a: e.a\n        });\n      }\n    }), Object.defineProperty(this, \"strokeStyle\", {\n      get: function () {\n        return this.ctx.strokeStyle;\n      },\n      set: function (t) {\n        var e = g(t);\n        this.ctx.strokeStyle = e.style, this.ctx.isStrokeTransparent = 0 === e.a, this.ctx.strokeOpacity = e.a, 0 === e.a ? this.pdf.setDrawColor(255, 255, 255) : (e.a, this.pdf.setDrawColor(e.r, e.g, e.b));\n      }\n    }), Object.defineProperty(this, \"lineCap\", {\n      get: function () {\n        return this.ctx.lineCap;\n      },\n      set: function (t) {\n        -1 !== [\"butt\", \"round\", \"square\"].indexOf(t) && (this.ctx.lineCap = t, this.pdf.setLineCap(t));\n      }\n    }), Object.defineProperty(this, \"lineWidth\", {\n      get: function () {\n        return this.ctx.lineWidth;\n      },\n      set: function (t) {\n        isNaN(t) || (this.ctx.lineWidth = t, this.pdf.setLineWidth(t));\n      }\n    }), Object.defineProperty(this, \"lineJoin\", {\n      get: function () {\n        return this.ctx.lineJoin;\n      },\n      set: function (t) {\n        -1 !== [\"bevel\", \"round\", \"miter\"].indexOf(t) && (this.ctx.lineJoin = t, this.pdf.setLineJoin(t));\n      }\n    }), Object.defineProperty(this, \"miterLimit\", {\n      get: function () {\n        return this.ctx.miterLimit;\n      },\n      set: function (t) {\n        isNaN(t) || (this.ctx.miterLimit = t, this.pdf.setMiterLimit(t));\n      }\n    }), Object.defineProperty(this, \"textBaseline\", {\n      get: function () {\n        return this.ctx.textBaseline;\n      },\n      set: function (t) {\n        this.ctx.textBaseline = t;\n      }\n    }), Object.defineProperty(this, \"textAlign\", {\n      get: function () {\n        return this.ctx.textAlign;\n      },\n      set: function (t) {\n        -1 !== [\"right\", \"end\", \"center\", \"left\", \"start\"].indexOf(t) && (this.ctx.textAlign = t);\n      }\n    });\n    var h = null;\n    function f(t, e) {\n      if (null === h) {\n        var r = function (t) {\n          var e = [];\n          return Object.keys(t).forEach(function (r) {\n            t[r].forEach(function (t) {\n              var n = null;\n              switch (t) {\n                case \"bold\":\n                  n = {\n                    family: r,\n                    weight: \"bold\"\n                  };\n                  break;\n                case \"italic\":\n                  n = {\n                    family: r,\n                    style: \"italic\"\n                  };\n                  break;\n                case \"bolditalic\":\n                  n = {\n                    family: r,\n                    weight: \"bold\",\n                    style: \"italic\"\n                  };\n                  break;\n                case \"\":\n                case \"normal\":\n                  n = {\n                    family: r\n                  };\n              }\n              null !== n && (n.ref = {\n                name: r,\n                style: t\n              }, e.push(n));\n            });\n          }), e;\n        }(t.getFontList());\n        h = function (t) {\n          for (var e = {}, r = 0; r < t.length; ++r) {\n            var n = jt(t[r]),\n              i = n.family,\n              a = n.stretch,\n              o = n.style,\n              s = n.weight;\n            e[i] = e[i] || {}, e[i][a] = e[i][a] || {}, e[i][a][o] = e[i][a][o] || {}, e[i][a][o][s] = n;\n          }\n          return e;\n        }(r.concat(e));\n      }\n      return h;\n    }\n    var p = null;\n    Object.defineProperty(this, \"fontFaces\", {\n      get: function () {\n        return p;\n      },\n      set: function (t) {\n        h = null, p = t;\n      }\n    }), Object.defineProperty(this, \"font\", {\n      get: function () {\n        return this.ctx.font;\n      },\n      set: function (t) {\n        var e;\n        if (this.ctx.font = t, null !== (e = /^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:\\s*\\/\\s*(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s*([-_,\\\"\\'\\sa-z]+?)\\s*$/i.exec(t))) {\n          var r = e[1],\n            n = (e[2], e[3]),\n            i = e[4],\n            a = (e[5], e[6]),\n            o = /^([.\\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];\n          i = \"px\" === o ? Math.floor(parseFloat(i) * this.pdf.internal.scaleFactor) : \"em\" === o ? Math.floor(parseFloat(i) * this.pdf.getFontSize()) : Math.floor(parseFloat(i) * this.pdf.internal.scaleFactor), this.pdf.setFontSize(i);\n          var s = function (t) {\n            var e,\n              r,\n              n = [],\n              i = t.trim();\n            if (\"\" === i) return Wt;\n            if (i in Mt) return [Mt[i]];\n            for (; \"\" !== i;) {\n              switch (r = null, e = (i = Dt(i)).charAt(0)) {\n                case '\"':\n                case \"'\":\n                  r = Rt(i.substring(1), e);\n                  break;\n                default:\n                  r = Tt(i);\n              }\n              if (null === r) return Wt;\n              if (n.push(r[0]), \"\" !== (i = Dt(r[1])) && \",\" !== i.charAt(0)) return Wt;\n              i = i.replace(/^,/, \"\");\n            }\n            return n;\n          }(a);\n          if (this.fontFaces) {\n            var c = qt(f(this.pdf, this.fontFaces), s.map(function (t) {\n              return {\n                family: t,\n                stretch: \"normal\",\n                weight: n,\n                style: r\n              };\n            }));\n            this.pdf.setFont(c.ref.name, c.ref.style);\n          } else {\n            var u = \"\";\n            (\"bold\" === n || parseInt(n, 10) >= 700 || \"bold\" === r) && (u = \"bold\"), \"italic\" === r && (u += \"italic\"), 0 === u.length && (u = \"normal\");\n            for (var h = \"\", l = {\n                arial: \"Helvetica\",\n                Arial: \"Helvetica\",\n                verdana: \"Helvetica\",\n                Verdana: \"Helvetica\",\n                helvetica: \"Helvetica\",\n                Helvetica: \"Helvetica\",\n                \"sans-serif\": \"Helvetica\",\n                fixed: \"Courier\",\n                monospace: \"Courier\",\n                terminal: \"Courier\",\n                cursive: \"Times\",\n                fantasy: \"Times\",\n                serif: \"Times\"\n              }, d = 0; d < s.length; d++) {\n              if (void 0 !== this.pdf.internal.getFont(s[d], u, {\n                noFallback: !0,\n                disableWarning: !0\n              })) {\n                h = s[d];\n                break;\n              }\n              if (\"bolditalic\" === u && void 0 !== this.pdf.internal.getFont(s[d], \"bold\", {\n                noFallback: !0,\n                disableWarning: !0\n              })) h = s[d], u = \"bold\";else if (void 0 !== this.pdf.internal.getFont(s[d], \"normal\", {\n                noFallback: !0,\n                disableWarning: !0\n              })) {\n                h = s[d], u = \"normal\";\n                break;\n              }\n            }\n            if (\"\" === h) for (var p = 0; p < s.length; p++) if (l[s[p]]) {\n              h = l[s[p]];\n              break;\n            }\n            h = \"\" === h ? \"Times\" : h, this.pdf.setFont(h, u);\n          }\n        }\n      }\n    }), Object.defineProperty(this, \"globalCompositeOperation\", {\n      get: function () {\n        return this.ctx.globalCompositeOperation;\n      },\n      set: function (t) {\n        this.ctx.globalCompositeOperation = t;\n      }\n    }), Object.defineProperty(this, \"globalAlpha\", {\n      get: function () {\n        return this.ctx.globalAlpha;\n      },\n      set: function (t) {\n        this.ctx.globalAlpha = t;\n      }\n    }), Object.defineProperty(this, \"lineDashOffset\", {\n      get: function () {\n        return this.ctx.lineDashOffset;\n      },\n      set: function (t) {\n        this.ctx.lineDashOffset = t, T.call(this);\n      }\n    }), Object.defineProperty(this, \"lineDash\", {\n      get: function () {\n        return this.ctx.lineDash;\n      },\n      set: function (t) {\n        this.ctx.lineDash = t, T.call(this);\n      }\n    }), Object.defineProperty(this, \"ignoreClearRect\", {\n      get: function () {\n        return this.ctx.ignoreClearRect;\n      },\n      set: function (t) {\n        this.ctx.ignoreClearRect = Boolean(t);\n      }\n    });\n  };\n  p.prototype.setLineDash = function (t) {\n    this.lineDash = t;\n  }, p.prototype.getLineDash = function () {\n    return this.lineDash.length % 2 ? this.lineDash.concat(this.lineDash) : this.lineDash.slice();\n  }, p.prototype.fill = function () {\n    A.call(this, \"fill\", !1);\n  }, p.prototype.stroke = function () {\n    A.call(this, \"stroke\", !1);\n  }, p.prototype.beginPath = function () {\n    this.path = [{\n      type: \"begin\"\n    }];\n  }, p.prototype.moveTo = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw a.error(\"jsPDF.context2d.moveTo: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.moveTo\");\n    var r = this.ctx.transform.applyToPoint(new c(t, e));\n    this.path.push({\n      type: \"mt\",\n      x: r.x,\n      y: r.y\n    }), this.ctx.lastPoint = new c(t, e);\n  }, p.prototype.closePath = function () {\n    var e = new c(0, 0),\n      r = 0;\n    for (r = this.path.length - 1; -1 !== r; r--) if (\"begin\" === this.path[r].type && \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(this.path[r + 1]) && \"number\" == typeof this.path[r + 1].x) {\n      e = new c(this.path[r + 1].x, this.path[r + 1].y);\n      break;\n    }\n    this.path.push({\n      type: \"close\"\n    }), this.ctx.lastPoint = new c(e.x, e.y);\n  }, p.prototype.lineTo = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw a.error(\"jsPDF.context2d.lineTo: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.lineTo\");\n    var r = this.ctx.transform.applyToPoint(new c(t, e));\n    this.path.push({\n      type: \"lt\",\n      x: r.x,\n      y: r.y\n    }), this.ctx.lastPoint = new c(r.x, r.y);\n  }, p.prototype.clip = function () {\n    this.ctx.clip_path = JSON.parse(JSON.stringify(this.path)), A.call(this, null, !0);\n  }, p.prototype.quadraticCurveTo = function (t, e, r, n) {\n    if (isNaN(r) || isNaN(n) || isNaN(t) || isNaN(e)) throw a.error(\"jsPDF.context2d.quadraticCurveTo: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.quadraticCurveTo\");\n    var i = this.ctx.transform.applyToPoint(new c(r, n)),\n      o = this.ctx.transform.applyToPoint(new c(t, e));\n    this.path.push({\n      type: \"qct\",\n      x1: o.x,\n      y1: o.y,\n      x: i.x,\n      y: i.y\n    }), this.ctx.lastPoint = new c(i.x, i.y);\n  }, p.prototype.bezierCurveTo = function (t, e, r, n, i, o) {\n    if (isNaN(i) || isNaN(o) || isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n)) throw a.error(\"jsPDF.context2d.bezierCurveTo: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.bezierCurveTo\");\n    var s = this.ctx.transform.applyToPoint(new c(i, o)),\n      u = this.ctx.transform.applyToPoint(new c(t, e)),\n      h = this.ctx.transform.applyToPoint(new c(r, n));\n    this.path.push({\n      type: \"bct\",\n      x1: u.x,\n      y1: u.y,\n      x2: h.x,\n      y2: h.y,\n      x: s.x,\n      y: s.y\n    }), this.ctx.lastPoint = new c(s.x, s.y);\n  }, p.prototype.arc = function (t, e, r, n, i, o) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n) || isNaN(i)) throw a.error(\"jsPDF.context2d.arc: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.arc\");\n    if (o = Boolean(o), !this.ctx.transform.isIdentity) {\n      var s = this.ctx.transform.applyToPoint(new c(t, e));\n      t = s.x, e = s.y;\n      var u = this.ctx.transform.applyToPoint(new c(0, r)),\n        h = this.ctx.transform.applyToPoint(new c(0, 0));\n      r = Math.sqrt(Math.pow(u.x - h.x, 2) + Math.pow(u.y - h.y, 2));\n    }\n    Math.abs(i - n) >= 2 * Math.PI && (n = 0, i = 2 * Math.PI), this.path.push({\n      type: \"arc\",\n      x: t,\n      y: e,\n      radius: r,\n      startAngle: n,\n      endAngle: i,\n      counterclockwise: o\n    });\n  }, p.prototype.arcTo = function (t, e, r, n, i) {\n    throw new Error(\"arcTo not implemented.\");\n  }, p.prototype.rect = function (t, e, r, n) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n)) throw a.error(\"jsPDF.context2d.rect: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.rect\");\n    this.moveTo(t, e), this.lineTo(t + r, e), this.lineTo(t + r, e + n), this.lineTo(t, e + n), this.lineTo(t, e), this.lineTo(t + r, e), this.lineTo(t, e);\n  }, p.prototype.fillRect = function (t, e, r, n) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n)) throw a.error(\"jsPDF.context2d.fillRect: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.fillRect\");\n    if (!m.call(this)) {\n      var i = {};\n      \"butt\" !== this.lineCap && (i.lineCap = this.lineCap, this.lineCap = \"butt\"), \"miter\" !== this.lineJoin && (i.lineJoin = this.lineJoin, this.lineJoin = \"miter\"), this.beginPath(), this.rect(t, e, r, n), this.fill(), i.hasOwnProperty(\"lineCap\") && (this.lineCap = i.lineCap), i.hasOwnProperty(\"lineJoin\") && (this.lineJoin = i.lineJoin);\n    }\n  }, p.prototype.strokeRect = function (t, e, r, n) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n)) throw a.error(\"jsPDF.context2d.strokeRect: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.strokeRect\");\n    v.call(this) || (this.beginPath(), this.rect(t, e, r, n), this.stroke());\n  }, p.prototype.clearRect = function (t, e, r, n) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n)) throw a.error(\"jsPDF.context2d.clearRect: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.clearRect\");\n    this.ignoreClearRect || (this.fillStyle = \"#ffffff\", this.fillRect(t, e, r, n));\n  }, p.prototype.save = function (t) {\n    t = \"boolean\" != typeof t || t;\n    for (var e = this.pdf.internal.getCurrentPageInfo().pageNumber, r = 0; r < this.pdf.internal.getNumberOfPages(); r++) this.pdf.setPage(r + 1), this.pdf.internal.out(\"q\");\n    if (this.pdf.setPage(e), t) {\n      this.ctx.fontSize = this.pdf.internal.getFontSize();\n      var n = new d(this.ctx);\n      this.ctxStack.push(this.ctx), this.ctx = n;\n    }\n  }, p.prototype.restore = function (t) {\n    t = \"boolean\" != typeof t || t;\n    for (var e = this.pdf.internal.getCurrentPageInfo().pageNumber, r = 0; r < this.pdf.internal.getNumberOfPages(); r++) this.pdf.setPage(r + 1), this.pdf.internal.out(\"Q\");\n    this.pdf.setPage(e), t && 0 !== this.ctxStack.length && (this.ctx = this.ctxStack.pop(), this.fillStyle = this.ctx.fillStyle, this.strokeStyle = this.ctx.strokeStyle, this.font = this.ctx.font, this.lineCap = this.ctx.lineCap, this.lineWidth = this.ctx.lineWidth, this.lineJoin = this.ctx.lineJoin, this.lineDash = this.ctx.lineDash, this.lineDashOffset = this.ctx.lineDashOffset);\n  }, p.prototype.toDataURL = function () {\n    throw new Error(\"toDataUrl not implemented.\");\n  };\n  var g = function (t) {\n      var e, r, n, i;\n      if (!0 === t.isCanvasGradient && (t = t.getColor()), !t) return {\n        r: 0,\n        g: 0,\n        b: 0,\n        a: 0,\n        style: t\n      };\n      if (/transparent|rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*0+\\s*\\)/.test(t)) e = 0, r = 0, n = 0, i = 0;else {\n        var a = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/.exec(t);\n        if (null !== a) e = parseInt(a[1]), r = parseInt(a[2]), n = parseInt(a[3]), i = 1;else if (null !== (a = /rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([\\d.]+)\\s*\\)/.exec(t))) e = parseInt(a[1]), r = parseInt(a[2]), n = parseInt(a[3]), i = parseFloat(a[4]);else {\n          if (i = 1, \"string\" == typeof t && \"#\" !== t.charAt(0)) {\n            var o = new f(t);\n            t = o.ok ? o.toHex() : \"#000000\";\n          }\n          4 === t.length ? (e = t.substring(1, 2), e += e, r = t.substring(2, 3), r += r, n = t.substring(3, 4), n += n) : (e = t.substring(1, 3), r = t.substring(3, 5), n = t.substring(5, 7)), e = parseInt(e, 16), r = parseInt(r, 16), n = parseInt(n, 16);\n        }\n      }\n      return {\n        r: e,\n        g: r,\n        b: n,\n        a: i,\n        style: t\n      };\n    },\n    m = function () {\n      return this.ctx.isFillTransparent || 0 == this.globalAlpha;\n    },\n    v = function () {\n      return Boolean(this.ctx.isStrokeTransparent || 0 == this.globalAlpha);\n    };\n  p.prototype.fillText = function (t, e, r, n) {\n    if (isNaN(e) || isNaN(r) || \"string\" != typeof t) throw a.error(\"jsPDF.context2d.fillText: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.fillText\");\n    if (n = isNaN(n) ? void 0 : n, !m.call(this)) {\n      var i = q(this.ctx.transform.rotation),\n        o = this.ctx.transform.scaleX;\n      C.call(this, {\n        text: t,\n        x: e,\n        y: r,\n        scale: o,\n        angle: i,\n        align: this.textAlign,\n        maxWidth: n\n      });\n    }\n  }, p.prototype.strokeText = function (t, e, r, n) {\n    if (isNaN(e) || isNaN(r) || \"string\" != typeof t) throw a.error(\"jsPDF.context2d.strokeText: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.strokeText\");\n    if (!v.call(this)) {\n      n = isNaN(n) ? void 0 : n;\n      var i = q(this.ctx.transform.rotation),\n        o = this.ctx.transform.scaleX;\n      C.call(this, {\n        text: t,\n        x: e,\n        y: r,\n        scale: o,\n        renderingMode: \"stroke\",\n        angle: i,\n        align: this.textAlign,\n        maxWidth: n\n      });\n    }\n  }, p.prototype.measureText = function (t) {\n    if (\"string\" != typeof t) throw a.error(\"jsPDF.context2d.measureText: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.measureText\");\n    var e = this.pdf,\n      r = this.pdf.internal.scaleFactor,\n      n = e.internal.getFontSize(),\n      i = e.getStringUnitWidth(t) * n / e.internal.scaleFactor,\n      o = function (t) {\n        var e = (t = t || {}).width || 0;\n        return Object.defineProperty(this, \"width\", {\n          get: function () {\n            return e;\n          }\n        }), this;\n      };\n    return new o({\n      width: i *= Math.round(96 * r / 72 * 1e4) / 1e4\n    });\n  }, p.prototype.scale = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw a.error(\"jsPDF.context2d.scale: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.scale\");\n    var r = new h(t, 0, 0, e, 0, 0);\n    this.ctx.transform = this.ctx.transform.multiply(r);\n  }, p.prototype.rotate = function (t) {\n    if (isNaN(t)) throw a.error(\"jsPDF.context2d.rotate: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.rotate\");\n    var e = new h(Math.cos(t), Math.sin(t), -Math.sin(t), Math.cos(t), 0, 0);\n    this.ctx.transform = this.ctx.transform.multiply(e);\n  }, p.prototype.translate = function (t, e) {\n    if (isNaN(t) || isNaN(e)) throw a.error(\"jsPDF.context2d.translate: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.translate\");\n    var r = new h(1, 0, 0, 1, t, e);\n    this.ctx.transform = this.ctx.transform.multiply(r);\n  }, p.prototype.transform = function (t, e, r, n, i, o) {\n    if (isNaN(t) || isNaN(e) || isNaN(r) || isNaN(n) || isNaN(i) || isNaN(o)) throw a.error(\"jsPDF.context2d.transform: Invalid arguments\", arguments), new Error(\"Invalid arguments passed to jsPDF.context2d.transform\");\n    var s = new h(t, e, r, n, i, o);\n    this.ctx.transform = this.ctx.transform.multiply(s);\n  }, p.prototype.setTransform = function (t, e, r, n, i, a) {\n    t = isNaN(t) ? 1 : t, e = isNaN(e) ? 0 : e, r = isNaN(r) ? 0 : r, n = isNaN(n) ? 1 : n, i = isNaN(i) ? 0 : i, a = isNaN(a) ? 0 : a, this.ctx.transform = new h(t, e, r, n, i, a);\n  };\n  var b = function () {\n    return this.margin[0] > 0 || this.margin[1] > 0 || this.margin[2] > 0 || this.margin[3] > 0;\n  };\n  p.prototype.drawImage = function (t, e, r, n, i, a, o, s, c) {\n    var l = this.pdf.getImageProperties(t),\n      f = 1,\n      d = 1,\n      p = 1,\n      g = 1;\n    void 0 !== n && void 0 !== s && (p = s / n, g = c / i, f = l.width / n * s / n, d = l.height / i * c / i), void 0 === a && (a = e, o = r, e = 0, r = 0), void 0 !== n && void 0 === s && (s = n, c = i), void 0 === n && void 0 === s && (s = l.width, c = l.height);\n    for (var m, v = this.ctx.transform.decompose(), w = q(v.rotate.shx), A = new h(), S = (A = (A = (A = A.multiply(v.translate)).multiply(v.skew)).multiply(v.scale)).applyToRectangle(new u(a - e * p, o - r * g, n * f, i * d)), _ = y.call(this, S), P = [], k = 0; k < _.length; k += 1) -1 === P.indexOf(_[k]) && P.push(_[k]);\n    if (L(P), this.autoPaging) for (var I = P[0], F = P[P.length - 1], C = I; C < F + 1; C++) {\n      this.pdf.setPage(C);\n      var j = this.pdf.internal.pageSize.width - this.margin[3] - this.margin[1],\n        O = 1 === C ? this.posY + this.margin[0] : this.margin[0],\n        B = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2],\n        M = this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2],\n        E = 1 === C ? 0 : B + (C - 2) * M;\n      if (0 !== this.ctx.clip_path.length) {\n        var D = this.path;\n        m = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = N(m, this.posX + this.margin[3], -E + O + this.ctx.prevPageLastElemOffset), x.call(this, \"fill\", !0), this.path = D;\n      }\n      var R = JSON.parse(JSON.stringify(S));\n      R = N([R], this.posX + this.margin[3], -E + O + this.ctx.prevPageLastElemOffset)[0];\n      var T = (C > I || C < F) && b.call(this);\n      T && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], j, M, null).clip().discardPath()), this.pdf.addImage(t, \"JPEG\", R.x, R.y, R.w, R.h, null, null, w), T && this.pdf.restoreGraphicsState();\n    } else this.pdf.addImage(t, \"JPEG\", S.x, S.y, S.w, S.h, null, null, w);\n  };\n  var y = function (t, e, r) {\n      var n = [];\n      e = e || this.pdf.internal.pageSize.width, r = r || this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2];\n      var i = this.posY + this.ctx.prevPageLastElemOffset;\n      switch (t.type) {\n        default:\n        case \"mt\":\n        case \"lt\":\n          n.push(Math.floor((t.y + i) / r) + 1);\n          break;\n        case \"arc\":\n          n.push(Math.floor((t.y + i - t.radius) / r) + 1), n.push(Math.floor((t.y + i + t.radius) / r) + 1);\n          break;\n        case \"qct\":\n          var a = D(this.ctx.lastPoint.x, this.ctx.lastPoint.y, t.x1, t.y1, t.x, t.y);\n          n.push(Math.floor((a.y + i) / r) + 1), n.push(Math.floor((a.y + a.h + i) / r) + 1);\n          break;\n        case \"bct\":\n          var o = R(this.ctx.lastPoint.x, this.ctx.lastPoint.y, t.x1, t.y1, t.x2, t.y2, t.x, t.y);\n          n.push(Math.floor((o.y + i) / r) + 1), n.push(Math.floor((o.y + o.h + i) / r) + 1);\n          break;\n        case \"rect\":\n          n.push(Math.floor((t.y + i) / r) + 1), n.push(Math.floor((t.y + t.h + i) / r) + 1);\n      }\n      for (var s = 0; s < n.length; s += 1) for (; this.pdf.internal.getNumberOfPages() < n[s];) w.call(this);\n      return n;\n    },\n    w = function () {\n      var t = this.fillStyle,\n        e = this.strokeStyle,\n        r = this.font,\n        n = this.lineCap,\n        i = this.lineWidth,\n        a = this.lineJoin;\n      this.pdf.addPage(), this.fillStyle = t, this.strokeStyle = e, this.font = r, this.lineCap = n, this.lineWidth = i, this.lineJoin = a;\n    },\n    N = function (t, e, r) {\n      for (var n = 0; n < t.length; n++) switch (t[n].type) {\n        case \"bct\":\n          t[n].x2 += e, t[n].y2 += r;\n        case \"qct\":\n          t[n].x1 += e, t[n].y1 += r;\n        case \"mt\":\n        case \"lt\":\n        case \"arc\":\n        default:\n          t[n].x += e, t[n].y += r;\n      }\n      return t;\n    },\n    L = function (t) {\n      return t.sort(function (t, e) {\n        return t - e;\n      });\n    },\n    A = function (t, e) {\n      for (var r, n, i = this.fillStyle, a = this.strokeStyle, o = this.lineCap, s = this.lineWidth, c = Math.abs(s * this.ctx.transform.scaleX), u = this.lineJoin, h = JSON.parse(JSON.stringify(this.path)), l = JSON.parse(JSON.stringify(this.path)), f = [], d = 0; d < l.length; d++) if (void 0 !== l[d].x) for (var p = y.call(this, l[d]), g = 0; g < p.length; g += 1) -1 === f.indexOf(p[g]) && f.push(p[g]);\n      for (var m = 0; m < f.length; m++) for (; this.pdf.internal.getNumberOfPages() < f[m];) w.call(this);\n      if (L(f), this.autoPaging) for (var v = f[0], A = f[f.length - 1], S = v; S < A + 1; S++) {\n        this.pdf.setPage(S), this.fillStyle = i, this.strokeStyle = a, this.lineCap = o, this.lineWidth = c, this.lineJoin = u;\n        var _ = this.pdf.internal.pageSize.width - this.margin[3] - this.margin[1],\n          P = 1 === S ? this.posY + this.margin[0] : this.margin[0],\n          k = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2],\n          I = this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2],\n          F = 1 === S ? 0 : k + (S - 2) * I;\n        if (0 !== this.ctx.clip_path.length) {\n          var C = this.path;\n          r = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = N(r, this.posX + this.margin[3], -F + P + this.ctx.prevPageLastElemOffset), x.call(this, t, !0), this.path = C;\n        }\n        if (n = JSON.parse(JSON.stringify(h)), this.path = N(n, this.posX + this.margin[3], -F + P + this.ctx.prevPageLastElemOffset), !1 === e || 0 === S) {\n          var j = (S > v || S < A) && b.call(this);\n          j && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], _, I, null).clip().discardPath()), x.call(this, t, e), j && this.pdf.restoreGraphicsState();\n        }\n        this.lineWidth = s;\n      } else this.lineWidth = c, x.call(this, t, e), this.lineWidth = s;\n      this.path = h;\n    },\n    x = function (t, e) {\n      if ((\"stroke\" !== t || e || !v.call(this)) && (\"stroke\" === t || e || !m.call(this))) {\n        for (var r, n, i = [], a = this.path, o = 0; o < a.length; o++) {\n          var s = a[o];\n          switch (s.type) {\n            case \"begin\":\n              i.push({\n                begin: !0\n              });\n              break;\n            case \"close\":\n              i.push({\n                close: !0\n              });\n              break;\n            case \"mt\":\n              i.push({\n                start: s,\n                deltas: [],\n                abs: []\n              });\n              break;\n            case \"lt\":\n              var c = i.length;\n              if (a[o - 1] && !isNaN(a[o - 1].x) && (r = [s.x - a[o - 1].x, s.y - a[o - 1].y], c > 0)) for (; c >= 0; c--) if (!0 !== i[c - 1].close && !0 !== i[c - 1].begin) {\n                i[c - 1].deltas.push(r), i[c - 1].abs.push(s);\n                break;\n              }\n              break;\n            case \"bct\":\n              r = [s.x1 - a[o - 1].x, s.y1 - a[o - 1].y, s.x2 - a[o - 1].x, s.y2 - a[o - 1].y, s.x - a[o - 1].x, s.y - a[o - 1].y], i[i.length - 1].deltas.push(r);\n              break;\n            case \"qct\":\n              var u = a[o - 1].x + 2 / 3 * (s.x1 - a[o - 1].x),\n                h = a[o - 1].y + 2 / 3 * (s.y1 - a[o - 1].y),\n                l = s.x + 2 / 3 * (s.x1 - s.x),\n                f = s.y + 2 / 3 * (s.y1 - s.y),\n                d = s.x,\n                p = s.y;\n              r = [u - a[o - 1].x, h - a[o - 1].y, l - a[o - 1].x, f - a[o - 1].y, d - a[o - 1].x, p - a[o - 1].y], i[i.length - 1].deltas.push(r);\n              break;\n            case \"arc\":\n              i.push({\n                deltas: [],\n                abs: [],\n                arc: !0\n              }), Array.isArray(i[i.length - 1].abs) && i[i.length - 1].abs.push(s);\n          }\n        }\n        n = e ? null : \"stroke\" === t ? \"stroke\" : \"fill\";\n        for (var g = !1, b = 0; b < i.length; b++) if (i[b].arc) for (var y = i[b].abs, w = 0; w < y.length; w++) {\n          var N = y[w];\n          \"arc\" === N.type ? P.call(this, N.x, N.y, N.radius, N.startAngle, N.endAngle, N.counterclockwise, void 0, e, !g) : j.call(this, N.x, N.y), g = !0;\n        } else if (!0 === i[b].close) this.pdf.internal.out(\"h\"), g = !1;else if (!0 !== i[b].begin) {\n          var L = i[b].start.x,\n            A = i[b].start.y;\n          O.call(this, i[b].deltas, L, A), g = !0;\n        }\n        n && k.call(this, n), e && I.call(this);\n      }\n    },\n    S = function (t) {\n      var e = this.pdf.internal.getFontSize() / this.pdf.internal.scaleFactor,\n        r = e * (this.pdf.internal.getLineHeightFactor() - 1);\n      switch (this.ctx.textBaseline) {\n        case \"bottom\":\n          return t - r;\n        case \"top\":\n          return t + e - r;\n        case \"hanging\":\n          return t + e - 2 * r;\n        case \"middle\":\n          return t + e / 2 - r;\n        case \"ideographic\":\n          return t;\n        case \"alphabetic\":\n        default:\n          return t;\n      }\n    },\n    _ = function (t) {\n      return t + this.pdf.internal.getFontSize() / this.pdf.internal.scaleFactor * (this.pdf.internal.getLineHeightFactor() - 1);\n    };\n  p.prototype.createLinearGradient = function () {\n    var t = function () {};\n    return t.colorStops = [], t.addColorStop = function (t, e) {\n      this.colorStops.push([t, e]);\n    }, t.getColor = function () {\n      return 0 === this.colorStops.length ? \"#000000\" : this.colorStops[0][1];\n    }, t.isCanvasGradient = !0, t;\n  }, p.prototype.createPattern = function () {\n    return this.createLinearGradient();\n  }, p.prototype.createRadialGradient = function () {\n    return this.createLinearGradient();\n  };\n  var P = function (t, e, r, n, i, a, o, s, c) {\n      for (var u = M.call(this, r, n, i, a), h = 0; h < u.length; h++) {\n        var l = u[h];\n        0 === h && (c ? F.call(this, l.x1 + t, l.y1 + e) : j.call(this, l.x1 + t, l.y1 + e)), B.call(this, t, e, l.x2, l.y2, l.x3, l.y3, l.x4, l.y4);\n      }\n      s ? I.call(this) : k.call(this, o);\n    },\n    k = function (t) {\n      switch (t) {\n        case \"stroke\":\n          this.pdf.internal.out(\"S\");\n          break;\n        case \"fill\":\n          this.pdf.internal.out(\"f\");\n      }\n    },\n    I = function () {\n      this.pdf.clip(), this.pdf.discardPath();\n    },\n    F = function (t, e) {\n      this.pdf.internal.out(n(t) + \" \" + i(e) + \" m\");\n    },\n    C = function (t) {\n      var e;\n      switch (t.align) {\n        case \"right\":\n        case \"end\":\n          e = \"right\";\n          break;\n        case \"center\":\n          e = \"center\";\n          break;\n        case \"left\":\n        case \"start\":\n        default:\n          e = \"left\";\n      }\n      var r = this.pdf.getTextDimensions(t.text),\n        n = S.call(this, t.y),\n        i = _.call(this, n) - r.h,\n        a = this.ctx.transform.applyToPoint(new c(t.x, n)),\n        o = this.ctx.transform.decompose(),\n        s = new h();\n      s = (s = (s = s.multiply(o.translate)).multiply(o.skew)).multiply(o.scale);\n      for (var l, f, d, p = this.ctx.transform.applyToRectangle(new u(t.x, n, r.w, r.h)), g = s.applyToRectangle(new u(t.x, i, r.w, r.h)), m = y.call(this, g), v = [], w = 0; w < m.length; w += 1) -1 === v.indexOf(m[w]) && v.push(m[w]);\n      if (L(v), this.autoPaging) for (var A = v[0], P = v[v.length - 1], k = A; k < P + 1; k++) {\n        this.pdf.setPage(k);\n        var I = 1 === k ? this.posY + this.margin[0] : this.margin[0],\n          F = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2],\n          C = this.pdf.internal.pageSize.height - this.margin[2],\n          j = C - this.margin[0],\n          O = this.pdf.internal.pageSize.width - this.margin[1],\n          B = O - this.margin[3],\n          M = 1 === k ? 0 : F + (k - 2) * j;\n        if (0 !== this.ctx.clip_path.length) {\n          var E = this.path;\n          l = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = N(l, this.posX + this.margin[3], -1 * M + I), x.call(this, \"fill\", !0), this.path = E;\n        }\n        var q = N([JSON.parse(JSON.stringify(g))], this.posX + this.margin[3], -M + I + this.ctx.prevPageLastElemOffset)[0];\n        t.scale >= .01 && (f = this.pdf.internal.getFontSize(), this.pdf.setFontSize(f * t.scale), d = this.lineWidth, this.lineWidth = d * t.scale);\n        var D = \"text\" !== this.autoPaging;\n        if (D || q.y + q.h <= C) {\n          if (D || q.y >= I && q.x <= O) {\n            var R = D ? t.text : this.pdf.splitTextToSize(t.text, t.maxWidth || O - q.x)[0],\n              T = N([JSON.parse(JSON.stringify(p))], this.posX + this.margin[3], -M + I + this.ctx.prevPageLastElemOffset)[0],\n              U = D && (k > A || k < P) && b.call(this);\n            U && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], B, j, null).clip().discardPath()), this.pdf.text(R, T.x, T.y, {\n              angle: t.angle,\n              align: e,\n              renderingMode: t.renderingMode\n            }), U && this.pdf.restoreGraphicsState();\n          }\n        } else q.y < C && (this.ctx.prevPageLastElemOffset += C - q.y);\n        t.scale >= .01 && (this.pdf.setFontSize(f), this.lineWidth = d);\n      } else t.scale >= .01 && (f = this.pdf.internal.getFontSize(), this.pdf.setFontSize(f * t.scale), d = this.lineWidth, this.lineWidth = d * t.scale), this.pdf.text(t.text, a.x + this.posX, a.y + this.posY, {\n        angle: t.angle,\n        align: e,\n        renderingMode: t.renderingMode,\n        maxWidth: t.maxWidth\n      }), t.scale >= .01 && (this.pdf.setFontSize(f), this.lineWidth = d);\n    },\n    j = function (t, e, r, a) {\n      r = r || 0, a = a || 0, this.pdf.internal.out(n(t + r) + \" \" + i(e + a) + \" l\");\n    },\n    O = function (t, e, r) {\n      return this.pdf.lines(t, e, r, null, null);\n    },\n    B = function (t, e, n, i, a, c, u, h) {\n      this.pdf.internal.out([r(o(n + t)), r(s(i + e)), r(o(a + t)), r(s(c + e)), r(o(u + t)), r(s(h + e)), \"c\"].join(\" \"));\n    },\n    M = function (t, e, r, n) {\n      for (var i = 2 * Math.PI, a = Math.PI / 2; e > r;) e -= i;\n      var o = Math.abs(r - e);\n      o < i && n && (o = i - o);\n      for (var s = [], c = n ? -1 : 1, u = e; o > 1e-5;) {\n        var h = u + c * Math.min(o, a);\n        s.push(E.call(this, t, u, h)), o -= Math.abs(h - u), u = h;\n      }\n      return s;\n    },\n    E = function (t, e, r) {\n      var n = (r - e) / 2,\n        i = t * Math.cos(n),\n        a = t * Math.sin(n),\n        o = i,\n        s = -a,\n        c = o * o + s * s,\n        u = c + o * i + s * a,\n        h = 4 / 3 * (Math.sqrt(2 * c * u) - u) / (o * a - s * i),\n        l = o - h * s,\n        f = s + h * o,\n        d = l,\n        p = -f,\n        g = n + e,\n        m = Math.cos(g),\n        v = Math.sin(g);\n      return {\n        x1: t * Math.cos(e),\n        y1: t * Math.sin(e),\n        x2: l * m - f * v,\n        y2: l * v + f * m,\n        x3: d * m - p * v,\n        y3: d * v + p * m,\n        x4: t * Math.cos(r),\n        y4: t * Math.sin(r)\n      };\n    },\n    q = function (t) {\n      return 180 * t / Math.PI;\n    },\n    D = function (t, e, r, n, i, a) {\n      var o = t + .5 * (r - t),\n        s = e + .5 * (n - e),\n        c = i + .5 * (r - i),\n        h = a + .5 * (n - a),\n        l = Math.min(t, i, o, c),\n        f = Math.max(t, i, o, c),\n        d = Math.min(e, a, s, h),\n        p = Math.max(e, a, s, h);\n      return new u(l, d, f - l, p - d);\n    },\n    R = function (t, e, r, n, i, a, o, s) {\n      var c,\n        h,\n        l,\n        f,\n        d,\n        p,\n        g,\n        m,\n        v,\n        b,\n        y,\n        w,\n        N,\n        L,\n        A = r - t,\n        x = n - e,\n        S = i - r,\n        _ = a - n,\n        P = o - i,\n        k = s - a;\n      for (h = 0; h < 41; h++) v = (g = (l = t + (c = h / 40) * A) + c * ((d = r + c * S) - l)) + c * (d + c * (i + c * P - d) - g), b = (m = (f = e + c * x) + c * ((p = n + c * _) - f)) + c * (p + c * (a + c * k - p) - m), 0 == h ? (y = v, w = b, N = v, L = b) : (y = Math.min(y, v), w = Math.min(w, b), N = Math.max(N, v), L = Math.max(L, b));\n      return new u(Math.round(y), Math.round(w), Math.round(N - y), Math.round(L - w));\n    },\n    T = function () {\n      if (this.prevLineDash || this.ctx.lineDash.length || this.ctx.lineDashOffset) {\n        var t,\n          e,\n          r = (t = this.ctx.lineDash, e = this.ctx.lineDashOffset, JSON.stringify({\n            lineDash: t,\n            lineDashOffset: e\n          }));\n        this.prevLineDash !== r && (this.pdf.setLineDash(this.ctx.lineDash, this.ctx.lineDashOffset), this.prevLineDash = r);\n      }\n    };\n}(E.API),\n/**\n * @license\n * jsPDF filters PlugIn\n * Copyright (c) 2014 Aras Abbasi\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var r = function (t) {\n      var e, r, n, i, a, o, s, c, u, h;\n      for (/[^\\x00-\\xFF]/.test(t), r = [], n = 0, i = (t += e = \"\\0\\0\\0\\0\".slice(t.length % 4 || 4)).length; i > n; n += 4) 0 !== (a = (t.charCodeAt(n) << 24) + (t.charCodeAt(n + 1) << 16) + (t.charCodeAt(n + 2) << 8) + t.charCodeAt(n + 3)) ? (o = (a = ((a = ((a = ((a = (a - (h = a % 85)) / 85) - (u = a % 85)) / 85) - (c = a % 85)) / 85) - (s = a % 85)) / 85) % 85, r.push(o + 33, s + 33, c + 33, u + 33, h + 33)) : r.push(122);\n      return function (t, e) {\n        for (var r = e; r > 0; r--) t.pop();\n      }(r, e.length), String.fromCharCode.apply(String, r) + \"~>\";\n    },\n    n = function (t) {\n      var e,\n        r,\n        n,\n        i,\n        a,\n        o = String,\n        s = \"length\",\n        c = 255,\n        u = \"charCodeAt\",\n        h = \"slice\",\n        l = \"replace\";\n      for (t[h](-2), t = t[h](0, -2)[l](/\\s/g, \"\")[l](\"z\", \"!!!!!\"), n = [], i = 0, a = (t += e = \"uuuuu\"[h](t[s] % 5 || 5))[s]; a > i; i += 5) r = 52200625 * (t[u](i) - 33) + 614125 * (t[u](i + 1) - 33) + 7225 * (t[u](i + 2) - 33) + 85 * (t[u](i + 3) - 33) + (t[u](i + 4) - 33), n.push(c & r >> 24, c & r >> 16, c & r >> 8, c & r);\n      return function (t, e) {\n        for (var r = e; r > 0; r--) t.pop();\n      }(n, e[s]), o.fromCharCode.apply(o, n);\n    },\n    i = function (t) {\n      var e = new RegExp(/^([0-9A-Fa-f]{2})+$/);\n      if (-1 !== (t = t.replace(/\\s/g, \"\")).indexOf(\">\") && (t = t.substr(0, t.indexOf(\">\"))), t.length % 2 && (t += \"0\"), !1 === e.test(t)) return \"\";\n      for (var r = \"\", n = 0; n < t.length; n += 2) r += String.fromCharCode(\"0x\" + (t[n] + t[n + 1]));\n      return r;\n    },\n    a = function (t) {\n      for (var r = new Uint8Array(t.length), n = t.length; n--;) r[n] = t.charCodeAt(n);\n      return t = (r = (0,fflate__WEBPACK_IMPORTED_MODULE_9__.zlibSync)(r)).reduce(function (t, e) {\n        return t + String.fromCharCode(e);\n      }, \"\");\n    };\n  t.processDataByFilters = function (t, e) {\n    var o = 0,\n      s = t || \"\",\n      c = [];\n    for (\"string\" == typeof (e = e || []) && (e = [e]), o = 0; o < e.length; o += 1) switch (e[o]) {\n      case \"ASCII85Decode\":\n      case \"/ASCII85Decode\":\n        s = n(s), c.push(\"/ASCII85Encode\");\n        break;\n      case \"ASCII85Encode\":\n      case \"/ASCII85Encode\":\n        s = r(s), c.push(\"/ASCII85Decode\");\n        break;\n      case \"ASCIIHexDecode\":\n      case \"/ASCIIHexDecode\":\n        s = i(s), c.push(\"/ASCIIHexEncode\");\n        break;\n      case \"ASCIIHexEncode\":\n      case \"/ASCIIHexEncode\":\n        s = s.split(\"\").map(function (t) {\n          return (\"0\" + t.charCodeAt().toString(16)).slice(-2);\n        }).join(\"\") + \">\", c.push(\"/ASCIIHexDecode\");\n        break;\n      case \"FlateEncode\":\n      case \"/FlateEncode\":\n        s = a(s), c.push(\"/FlateDecode\");\n        break;\n      default:\n        throw new Error('The filter: \"' + e[o] + '\" is not implemented');\n    }\n    return {\n      data: s,\n      reverseChain: c.reverse().join(\" \")\n    };\n  };\n}(E.API),\n/**\n * @license\n * jsPDF fileloading PlugIn\n * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  t.loadFile = function (t, e, r) {\n    return function (t, e, r) {\n      e = !1 !== e, r = \"function\" == typeof r ? r : function () {};\n      var n = void 0;\n      try {\n        n = function (t, e, r) {\n          var n = new XMLHttpRequest(),\n            i = 0,\n            a = function (t) {\n              var e = t.length,\n                r = [],\n                n = String.fromCharCode;\n              for (i = 0; i < e; i += 1) r.push(n(255 & t.charCodeAt(i)));\n              return r.join(\"\");\n            };\n          if (n.open(\"GET\", t, !e), n.overrideMimeType(\"text/plain; charset=x-user-defined\"), !1 === e && (n.onload = function () {\n            200 === n.status ? r(a(this.responseText)) : r(void 0);\n          }), n.send(null), e && 200 === n.status) return a(n.responseText);\n        }(t, e, r);\n      } catch (t) {}\n      return n;\n    }(t, e, r);\n  }, t.loadImageFile = t.loadFile;\n}(E.API), function (e) {\n  function r() {\n    return (n.html2canvas ? Promise.resolve(n.html2canvas) : __webpack_require__.e(/*! import() */ \"node_modules_html2canvas_dist_html2canvas_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! html2canvas */ \"./node_modules/html2canvas/dist/html2canvas.js\", 23))).catch(function (t) {\n      return Promise.reject(new Error(\"Could not load html2canvas: \" + t));\n    }).then(function (t) {\n      return t.default ? t.default : t;\n    });\n  }\n  function i() {\n    return (n.DOMPurify ? Promise.resolve(n.DOMPurify) : __webpack_require__.e(/*! import() */ \"node_modules_jspdf_node_modules_dompurify_dist_purify_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! dompurify */ \"./node_modules/jspdf/node_modules/dompurify/dist/purify.js\", 23))).catch(function (t) {\n      return Promise.reject(new Error(\"Could not load dompurify: \" + t));\n    }).then(function (t) {\n      return t.default ? t.default : t;\n    });\n  }\n  var a = function (e) {\n      var r = (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e);\n      return \"undefined\" === r ? \"undefined\" : \"string\" === r || e instanceof String ? \"string\" : \"number\" === r || e instanceof Number ? \"number\" : \"function\" === r || e instanceof Function ? \"function\" : e && e.constructor === Array ? \"array\" : e && 1 === e.nodeType ? \"element\" : \"object\" === r ? \"object\" : \"unknown\";\n    },\n    o = function (t, e) {\n      var r = document.createElement(t);\n      for (var n in e.className && (r.className = e.className), e.innerHTML && e.dompurify && (r.innerHTML = e.dompurify.sanitize(e.innerHTML)), e.style) r.style[n] = e.style[n];\n      return r;\n    },\n    s = function t(e) {\n      var r = Object.assign(t.convert(Promise.resolve()), JSON.parse(JSON.stringify(t.template))),\n        n = t.convert(Promise.resolve(), r);\n      return n = (n = n.setProgress(1, t, 1, [t])).set(e);\n    };\n  (s.prototype = Object.create(Promise.prototype)).constructor = s, s.convert = function (t, e) {\n    return t.__proto__ = e || s.prototype, t;\n  }, s.template = {\n    prop: {\n      src: null,\n      container: null,\n      overlay: null,\n      canvas: null,\n      img: null,\n      pdf: null,\n      pageSize: null,\n      callback: function () {}\n    },\n    progress: {\n      val: 0,\n      state: null,\n      n: 0,\n      stack: []\n    },\n    opt: {\n      filename: \"file.pdf\",\n      margin: [0, 0, 0, 0],\n      enableLinks: !0,\n      x: 0,\n      y: 0,\n      html2canvas: {},\n      jsPDF: {},\n      backgroundColor: \"transparent\"\n    }\n  }, s.prototype.from = function (t, e) {\n    return this.then(function () {\n      switch (e = e || function (t) {\n        switch (a(t)) {\n          case \"string\":\n            return \"string\";\n          case \"element\":\n            return \"canvas\" === t.nodeName.toLowerCase() ? \"canvas\" : \"element\";\n          default:\n            return \"unknown\";\n        }\n      }(t)) {\n        case \"string\":\n          return this.then(i).then(function (e) {\n            return this.set({\n              src: o(\"div\", {\n                innerHTML: t,\n                dompurify: e\n              })\n            });\n          });\n        case \"element\":\n          return this.set({\n            src: t\n          });\n        case \"canvas\":\n          return this.set({\n            canvas: t\n          });\n        case \"img\":\n          return this.set({\n            img: t\n          });\n        default:\n          return this.error(\"Unknown source type.\");\n      }\n    });\n  }, s.prototype.to = function (t) {\n    switch (t) {\n      case \"container\":\n        return this.toContainer();\n      case \"canvas\":\n        return this.toCanvas();\n      case \"img\":\n        return this.toImg();\n      case \"pdf\":\n        return this.toPdf();\n      default:\n        return this.error(\"Invalid target.\");\n    }\n  }, s.prototype.toContainer = function () {\n    return this.thenList([function () {\n      return this.prop.src || this.error(\"Cannot duplicate - no source HTML.\");\n    }, function () {\n      return this.prop.pageSize || this.setPageSize();\n    }]).then(function () {\n      var t = {\n          position: \"relative\",\n          display: \"inline-block\",\n          width: (\"number\" != typeof this.opt.width || isNaN(this.opt.width) || \"number\" != typeof this.opt.windowWidth || isNaN(this.opt.windowWidth) ? Math.max(this.prop.src.clientWidth, this.prop.src.scrollWidth, this.prop.src.offsetWidth) : this.opt.windowWidth) + \"px\",\n          left: 0,\n          right: 0,\n          top: 0,\n          margin: \"auto\",\n          backgroundColor: this.opt.backgroundColor\n        },\n        e = function t(e, r) {\n          for (var n = 3 === e.nodeType ? document.createTextNode(e.nodeValue) : e.cloneNode(!1), i = e.firstChild; i; i = i.nextSibling) !0 !== r && 1 === i.nodeType && \"SCRIPT\" === i.nodeName || n.appendChild(t(i, r));\n          return 1 === e.nodeType && (\"CANVAS\" === e.nodeName ? (n.width = e.width, n.height = e.height, n.getContext(\"2d\").drawImage(e, 0, 0)) : \"TEXTAREA\" !== e.nodeName && \"SELECT\" !== e.nodeName || (n.value = e.value), n.addEventListener(\"load\", function () {\n            n.scrollTop = e.scrollTop, n.scrollLeft = e.scrollLeft;\n          }, !0)), n;\n        }(this.prop.src, this.opt.html2canvas.javascriptEnabled);\n      \"BODY\" === e.tagName && (t.height = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) + \"px\"), this.prop.overlay = o(\"div\", {\n        className: \"html2pdf__overlay\",\n        style: {\n          position: \"fixed\",\n          overflow: \"hidden\",\n          zIndex: 1e3,\n          left: \"-100000px\",\n          right: 0,\n          bottom: 0,\n          top: 0\n        }\n      }), this.prop.container = o(\"div\", {\n        className: \"html2pdf__container\",\n        style: t\n      }), this.prop.container.appendChild(e), this.prop.container.firstChild.appendChild(o(\"div\", {\n        style: {\n          clear: \"both\",\n          border: \"0 none transparent\",\n          margin: 0,\n          padding: 0,\n          height: 0\n        }\n      })), this.prop.container.style.float = \"none\", this.prop.overlay.appendChild(this.prop.container), document.body.appendChild(this.prop.overlay), this.prop.container.firstChild.style.position = \"relative\", this.prop.container.height = Math.max(this.prop.container.firstChild.clientHeight, this.prop.container.firstChild.scrollHeight, this.prop.container.firstChild.offsetHeight) + \"px\";\n    });\n  }, s.prototype.toCanvas = function () {\n    var t = [function () {\n      return document.body.contains(this.prop.container) || this.toContainer();\n    }];\n    return this.thenList(t).then(r).then(function (t) {\n      var e = Object.assign({}, this.opt.html2canvas);\n      return delete e.onrendered, t(this.prop.container, e);\n    }).then(function (t) {\n      (this.opt.html2canvas.onrendered || function () {})(t), this.prop.canvas = t, document.body.removeChild(this.prop.overlay);\n    });\n  }, s.prototype.toContext2d = function () {\n    var t = [function () {\n      return document.body.contains(this.prop.container) || this.toContainer();\n    }];\n    return this.thenList(t).then(r).then(function (t) {\n      var e = this.opt.jsPDF,\n        r = this.opt.fontFaces,\n        n = \"number\" != typeof this.opt.width || isNaN(this.opt.width) || \"number\" != typeof this.opt.windowWidth || isNaN(this.opt.windowWidth) ? 1 : this.opt.width / this.opt.windowWidth,\n        i = Object.assign({\n          async: !0,\n          allowTaint: !0,\n          scale: n,\n          scrollX: this.opt.scrollX || 0,\n          scrollY: this.opt.scrollY || 0,\n          backgroundColor: \"#ffffff\",\n          imageTimeout: 15e3,\n          logging: !0,\n          proxy: null,\n          removeContainer: !0,\n          foreignObjectRendering: !1,\n          useCORS: !1\n        }, this.opt.html2canvas);\n      if (delete i.onrendered, e.context2d.autoPaging = void 0 === this.opt.autoPaging || this.opt.autoPaging, e.context2d.posX = this.opt.x, e.context2d.posY = this.opt.y, e.context2d.margin = this.opt.margin, e.context2d.fontFaces = r, r) for (var a = 0; a < r.length; ++a) {\n        var o = r[a],\n          s = o.src.find(function (t) {\n            return \"truetype\" === t.format;\n          });\n        s && e.addFont(s.url, o.ref.name, o.ref.style);\n      }\n      return i.windowHeight = i.windowHeight || 0, i.windowHeight = 0 == i.windowHeight ? Math.max(this.prop.container.clientHeight, this.prop.container.scrollHeight, this.prop.container.offsetHeight) : i.windowHeight, e.context2d.save(!0), t(this.prop.container, i);\n    }).then(function (t) {\n      this.opt.jsPDF.context2d.restore(!0), (this.opt.html2canvas.onrendered || function () {})(t), this.prop.canvas = t, document.body.removeChild(this.prop.overlay);\n    });\n  }, s.prototype.toImg = function () {\n    return this.thenList([function () {\n      return this.prop.canvas || this.toCanvas();\n    }]).then(function () {\n      var t = this.prop.canvas.toDataURL(\"image/\" + this.opt.image.type, this.opt.image.quality);\n      this.prop.img = document.createElement(\"img\"), this.prop.img.src = t;\n    });\n  }, s.prototype.toPdf = function () {\n    return this.thenList([function () {\n      return this.toContext2d();\n    }]).then(function () {\n      this.prop.pdf = this.prop.pdf || this.opt.jsPDF;\n    });\n  }, s.prototype.output = function (t, e, r) {\n    return \"img\" === (r = r || \"pdf\").toLowerCase() || \"image\" === r.toLowerCase() ? this.outputImg(t, e) : this.outputPdf(t, e);\n  }, s.prototype.outputPdf = function (t, e) {\n    return this.thenList([function () {\n      return this.prop.pdf || this.toPdf();\n    }]).then(function () {\n      return this.prop.pdf.output(t, e);\n    });\n  }, s.prototype.outputImg = function (t) {\n    return this.thenList([function () {\n      return this.prop.img || this.toImg();\n    }]).then(function () {\n      switch (t) {\n        case void 0:\n        case \"img\":\n          return this.prop.img;\n        case \"datauristring\":\n        case \"dataurlstring\":\n          return this.prop.img.src;\n        case \"datauri\":\n        case \"dataurl\":\n          return document.location.href = this.prop.img.src;\n        default:\n          throw 'Image output type \"' + t + '\" is not supported.';\n      }\n    });\n  }, s.prototype.save = function (t) {\n    return this.thenList([function () {\n      return this.prop.pdf || this.toPdf();\n    }]).set(t ? {\n      filename: t\n    } : null).then(function () {\n      this.prop.pdf.save(this.opt.filename);\n    });\n  }, s.prototype.doCallback = function () {\n    return this.thenList([function () {\n      return this.prop.pdf || this.toPdf();\n    }]).then(function () {\n      this.prop.callback(this.prop.pdf);\n    });\n  }, s.prototype.set = function (t) {\n    if (\"object\" !== a(t)) return this;\n    var e = Object.keys(t || {}).map(function (e) {\n      if (e in s.template.prop) return function () {\n        this.prop[e] = t[e];\n      };\n      switch (e) {\n        case \"margin\":\n          return this.setMargin.bind(this, t.margin);\n        case \"jsPDF\":\n          return function () {\n            return this.opt.jsPDF = t.jsPDF, this.setPageSize();\n          };\n        case \"pageSize\":\n          return this.setPageSize.bind(this, t.pageSize);\n        default:\n          return function () {\n            this.opt[e] = t[e];\n          };\n      }\n    }, this);\n    return this.then(function () {\n      return this.thenList(e);\n    });\n  }, s.prototype.get = function (t, e) {\n    return this.then(function () {\n      var r = t in s.template.prop ? this.prop[t] : this.opt[t];\n      return e ? e(r) : r;\n    });\n  }, s.prototype.setMargin = function (t) {\n    return this.then(function () {\n      switch (a(t)) {\n        case \"number\":\n          t = [t, t, t, t];\n        case \"array\":\n          if (2 === t.length && (t = [t[0], t[1], t[0], t[1]]), 4 === t.length) break;\n        default:\n          return this.error(\"Invalid margin array.\");\n      }\n      this.opt.margin = t;\n    }).then(this.setPageSize);\n  }, s.prototype.setPageSize = function (t) {\n    function e(t, e) {\n      return Math.floor(t * e / 72 * 96);\n    }\n    return this.then(function () {\n      (t = t || E.getPageSize(this.opt.jsPDF)).hasOwnProperty(\"inner\") || (t.inner = {\n        width: t.width - this.opt.margin[1] - this.opt.margin[3],\n        height: t.height - this.opt.margin[0] - this.opt.margin[2]\n      }, t.inner.px = {\n        width: e(t.inner.width, t.k),\n        height: e(t.inner.height, t.k)\n      }, t.inner.ratio = t.inner.height / t.inner.width), this.prop.pageSize = t;\n    });\n  }, s.prototype.setProgress = function (t, e, r, n) {\n    return null != t && (this.progress.val = t), null != e && (this.progress.state = e), null != r && (this.progress.n = r), null != n && (this.progress.stack = n), this.progress.ratio = this.progress.val / this.progress.state, this;\n  }, s.prototype.updateProgress = function (t, e, r, n) {\n    return this.setProgress(t ? this.progress.val + t : null, e || null, r ? this.progress.n + r : null, n ? this.progress.stack.concat(n) : null);\n  }, s.prototype.then = function (t, e) {\n    var r = this;\n    return this.thenCore(t, e, function (t, e) {\n      return r.updateProgress(null, null, 1, [t]), Promise.prototype.then.call(this, function (e) {\n        return r.updateProgress(null, t), e;\n      }).then(t, e).then(function (t) {\n        return r.updateProgress(1), t;\n      });\n    });\n  }, s.prototype.thenCore = function (t, e, r) {\n    r = r || Promise.prototype.then;\n    t && (t = t.bind(this)), e && (e = e.bind(this));\n    var n = -1 !== Promise.toString().indexOf(\"[native code]\") && \"Promise\" === Promise.name ? this : s.convert(Object.assign({}, this), Promise.prototype),\n      i = r.call(n, t, e);\n    return s.convert(i, this.__proto__);\n  }, s.prototype.thenExternal = function (t, e) {\n    return Promise.prototype.then.call(this, t, e);\n  }, s.prototype.thenList = function (t) {\n    var e = this;\n    return t.forEach(function (t) {\n      e = e.thenCore(t);\n    }), e;\n  }, s.prototype.catch = function (t) {\n    t && (t = t.bind(this));\n    var e = Promise.prototype.catch.call(this, t);\n    return s.convert(e, this);\n  }, s.prototype.catchExternal = function (t) {\n    return Promise.prototype.catch.call(this, t);\n  }, s.prototype.error = function (t) {\n    return this.then(function () {\n      throw new Error(t);\n    });\n  }, s.prototype.using = s.prototype.set, s.prototype.saveAs = s.prototype.save, s.prototype.export = s.prototype.output, s.prototype.run = s.prototype.then, E.getPageSize = function (e, r, n) {\n    if (\"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e)) {\n      var i = e;\n      e = i.orientation, r = i.unit || r, n = i.format || n;\n    }\n    r = r || \"mm\", n = n || \"a4\", e = (\"\" + (e || \"P\")).toLowerCase();\n    var a,\n      o = (\"\" + n).toLowerCase(),\n      s = {\n        a0: [2383.94, 3370.39],\n        a1: [1683.78, 2383.94],\n        a2: [1190.55, 1683.78],\n        a3: [841.89, 1190.55],\n        a4: [595.28, 841.89],\n        a5: [419.53, 595.28],\n        a6: [297.64, 419.53],\n        a7: [209.76, 297.64],\n        a8: [147.4, 209.76],\n        a9: [104.88, 147.4],\n        a10: [73.7, 104.88],\n        b0: [2834.65, 4008.19],\n        b1: [2004.09, 2834.65],\n        b2: [1417.32, 2004.09],\n        b3: [1000.63, 1417.32],\n        b4: [708.66, 1000.63],\n        b5: [498.9, 708.66],\n        b6: [354.33, 498.9],\n        b7: [249.45, 354.33],\n        b8: [175.75, 249.45],\n        b9: [124.72, 175.75],\n        b10: [87.87, 124.72],\n        c0: [2599.37, 3676.54],\n        c1: [1836.85, 2599.37],\n        c2: [1298.27, 1836.85],\n        c3: [918.43, 1298.27],\n        c4: [649.13, 918.43],\n        c5: [459.21, 649.13],\n        c6: [323.15, 459.21],\n        c7: [229.61, 323.15],\n        c8: [161.57, 229.61],\n        c9: [113.39, 161.57],\n        c10: [79.37, 113.39],\n        dl: [311.81, 623.62],\n        letter: [612, 792],\n        \"government-letter\": [576, 756],\n        legal: [612, 1008],\n        \"junior-legal\": [576, 360],\n        ledger: [1224, 792],\n        tabloid: [792, 1224],\n        \"credit-card\": [153, 243]\n      };\n    switch (r) {\n      case \"pt\":\n        a = 1;\n        break;\n      case \"mm\":\n        a = 72 / 25.4;\n        break;\n      case \"cm\":\n        a = 72 / 2.54;\n        break;\n      case \"in\":\n        a = 72;\n        break;\n      case \"px\":\n        a = .75;\n        break;\n      case \"pc\":\n      case \"em\":\n        a = 12;\n        break;\n      case \"ex\":\n        a = 6;\n        break;\n      default:\n        throw \"Invalid unit: \" + r;\n    }\n    var c,\n      u = 0,\n      h = 0;\n    if (s.hasOwnProperty(o)) u = s[o][1] / a, h = s[o][0] / a;else try {\n      u = n[1], h = n[0];\n    } catch (t) {\n      throw new Error(\"Invalid format: \" + n);\n    }\n    if (\"p\" === e || \"portrait\" === e) e = \"p\", h > u && (c = h, h = u, u = c);else {\n      if (\"l\" !== e && \"landscape\" !== e) throw \"Invalid orientation: \" + e;\n      e = \"l\", u > h && (c = h, h = u, u = c);\n    }\n    return {\n      width: h,\n      height: u,\n      unit: r,\n      k: a,\n      orientation: e\n    };\n  }, e.html = function (t, e) {\n    (e = e || {}).callback = e.callback || function () {}, e.html2canvas = e.html2canvas || {}, e.html2canvas.canvas = e.html2canvas.canvas || this.canvas, e.jsPDF = e.jsPDF || this, e.fontFaces = e.fontFaces ? e.fontFaces.map(jt) : null;\n    var r = new s(e);\n    return e.worker ? r : r.from(t).doCallback();\n  };\n}(E.API), E.API.addJS = function (t) {\n  return Ht = t, this.internal.events.subscribe(\"postPutResources\", function () {\n    Ut = this.internal.newObject(), this.internal.out(\"<<\"), this.internal.out(\"/Names [(EmbeddedJS) \" + (Ut + 1) + \" 0 R]\"), this.internal.out(\">>\"), this.internal.out(\"endobj\"), zt = this.internal.newObject(), this.internal.out(\"<<\"), this.internal.out(\"/S /JavaScript\"), this.internal.out(\"/JS (\" + Ht + \")\"), this.internal.out(\">>\"), this.internal.out(\"endobj\");\n  }), this.internal.events.subscribe(\"putCatalog\", function () {\n    void 0 !== Ut && void 0 !== zt && this.internal.out(\"/Names <</JavaScript \" + Ut + \" 0 R>>\");\n  }), this;\n},\n/**\n * @license\n * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var e;\n  t.events.push([\"postPutResources\", function () {\n    var t = this,\n      r = /^(\\d+) 0 obj$/;\n    if (this.outline.root.children.length > 0) for (var n = t.outline.render().split(/\\r\\n/), i = 0; i < n.length; i++) {\n      var a = n[i],\n        o = r.exec(a);\n      if (null != o) {\n        var s = o[1];\n        t.internal.newObjectDeferredBegin(s, !1);\n      }\n      t.internal.write(a);\n    }\n    if (this.outline.createNamedDestinations) {\n      var c = this.internal.pages.length,\n        u = [];\n      for (i = 0; i < c; i++) {\n        var h = t.internal.newObject();\n        u.push(h);\n        var l = t.internal.getPageInfo(i + 1);\n        t.internal.write(\"<< /D[\" + l.objId + \" 0 R /XYZ null null null]>> endobj\");\n      }\n      var f = t.internal.newObject();\n      t.internal.write(\"<< /Names [ \");\n      for (i = 0; i < u.length; i++) t.internal.write(\"(page_\" + (i + 1) + \")\" + u[i] + \" 0 R\");\n      t.internal.write(\" ] >>\", \"endobj\"), e = t.internal.newObject(), t.internal.write(\"<< /Dests \" + f + \" 0 R\"), t.internal.write(\">>\", \"endobj\");\n    }\n  }]), t.events.push([\"putCatalog\", function () {\n    this.outline.root.children.length > 0 && (this.internal.write(\"/Outlines\", this.outline.makeRef(this.outline.root)), this.outline.createNamedDestinations && this.internal.write(\"/Names \" + e + \" 0 R\"));\n  }]), t.events.push([\"initialized\", function () {\n    var t = this;\n    t.outline = {\n      createNamedDestinations: !1,\n      root: {\n        children: []\n      }\n    }, t.outline.add = function (t, e, r) {\n      var n = {\n        title: e,\n        options: r,\n        children: []\n      };\n      return null == t && (t = this.root), t.children.push(n), n;\n    }, t.outline.render = function () {\n      return this.ctx = {}, this.ctx.val = \"\", this.ctx.pdf = t, this.genIds_r(this.root), this.renderRoot(this.root), this.renderItems(this.root), this.ctx.val;\n    }, t.outline.genIds_r = function (e) {\n      e.id = t.internal.newObjectDeferred();\n      for (var r = 0; r < e.children.length; r++) this.genIds_r(e.children[r]);\n    }, t.outline.renderRoot = function (t) {\n      this.objStart(t), this.line(\"/Type /Outlines\"), t.children.length > 0 && (this.line(\"/First \" + this.makeRef(t.children[0])), this.line(\"/Last \" + this.makeRef(t.children[t.children.length - 1]))), this.line(\"/Count \" + this.count_r({\n        count: 0\n      }, t)), this.objEnd();\n    }, t.outline.renderItems = function (e) {\n      for (var r = this.ctx.pdf.internal.getVerticalCoordinateString, n = 0; n < e.children.length; n++) {\n        var i = e.children[n];\n        this.objStart(i), this.line(\"/Title \" + this.makeString(i.title)), this.line(\"/Parent \" + this.makeRef(e)), n > 0 && this.line(\"/Prev \" + this.makeRef(e.children[n - 1])), n < e.children.length - 1 && this.line(\"/Next \" + this.makeRef(e.children[n + 1])), i.children.length > 0 && (this.line(\"/First \" + this.makeRef(i.children[0])), this.line(\"/Last \" + this.makeRef(i.children[i.children.length - 1])));\n        var a = this.count = this.count_r({\n          count: 0\n        }, i);\n        if (a > 0 && this.line(\"/Count \" + a), i.options && i.options.pageNumber) {\n          var o = t.internal.getPageInfo(i.options.pageNumber);\n          this.line(\"/Dest [\" + o.objId + \" 0 R /XYZ 0 \" + r(0) + \" 0]\");\n        }\n        this.objEnd();\n      }\n      for (var s = 0; s < e.children.length; s++) this.renderItems(e.children[s]);\n    }, t.outline.line = function (t) {\n      this.ctx.val += t + \"\\r\\n\";\n    }, t.outline.makeRef = function (t) {\n      return t.id + \" 0 R\";\n    }, t.outline.makeString = function (e) {\n      return \"(\" + t.internal.pdfEscape(e) + \")\";\n    }, t.outline.objStart = function (t) {\n      this.ctx.val += \"\\r\\n\" + t.id + \" 0 obj\\r\\n<<\\r\\n\";\n    }, t.outline.objEnd = function () {\n      this.ctx.val += \">> \\r\\nendobj\\r\\n\";\n    }, t.outline.count_r = function (t, e) {\n      for (var r = 0; r < e.children.length; r++) t.count++, this.count_r(t, e.children[r]);\n      return t.count;\n    };\n  }]);\n}(E.API),\n/**\n * @license\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var e = [192, 193, 194, 195, 196, 197, 198, 199];\n  t.processJPEG = function (t, r, n, i, a, o) {\n    var s,\n      c = this.decode.DCT_DECODE,\n      u = null;\n    if (\"string\" == typeof t || this.__addimage__.isArrayBuffer(t) || this.__addimage__.isArrayBufferView(t)) {\n      switch (t = a || t, t = this.__addimage__.isArrayBuffer(t) ? new Uint8Array(t) : t, (s = function (t) {\n        for (var r, n = 256 * t.charCodeAt(4) + t.charCodeAt(5), i = t.length, a = {\n            width: 0,\n            height: 0,\n            numcomponents: 1\n          }, o = 4; o < i; o += 2) {\n          if (o += n, -1 !== e.indexOf(t.charCodeAt(o + 1))) {\n            r = 256 * t.charCodeAt(o + 5) + t.charCodeAt(o + 6), a = {\n              width: 256 * t.charCodeAt(o + 7) + t.charCodeAt(o + 8),\n              height: r,\n              numcomponents: t.charCodeAt(o + 9)\n            };\n            break;\n          }\n          n = 256 * t.charCodeAt(o + 2) + t.charCodeAt(o + 3);\n        }\n        return a;\n      }(t = this.__addimage__.isArrayBufferView(t) ? this.__addimage__.arrayBufferToBinaryString(t) : t)).numcomponents) {\n        case 1:\n          o = this.color_spaces.DEVICE_GRAY;\n          break;\n        case 4:\n          o = this.color_spaces.DEVICE_CMYK;\n          break;\n        case 3:\n          o = this.color_spaces.DEVICE_RGB;\n      }\n      u = {\n        data: t,\n        width: s.width,\n        height: s.height,\n        colorSpace: o,\n        bitsPerComponent: 8,\n        filter: c,\n        index: r,\n        alias: n\n      };\n    }\n    return u;\n  };\n}(E.API);\nvar Vt,\n  Gt,\n  Yt,\n  Jt,\n  Xt,\n  Kt = function () {\n    var t, e, i;\n    function a(t) {\n      var e, r, n, i, a, o, s, c, u, h, l, f, d, p;\n      for (this.data = t, this.pos = 8, this.palette = [], this.imgData = [], this.transparency = {}, this.animation = null, this.text = {}, o = null;;) {\n        switch (e = this.readUInt32(), u = function () {\n          var t, e;\n          for (e = [], t = 0; t < 4; ++t) e.push(String.fromCharCode(this.data[this.pos++]));\n          return e;\n        }.call(this).join(\"\")) {\n          case \"IHDR\":\n            this.width = this.readUInt32(), this.height = this.readUInt32(), this.bits = this.data[this.pos++], this.colorType = this.data[this.pos++], this.compressionMethod = this.data[this.pos++], this.filterMethod = this.data[this.pos++], this.interlaceMethod = this.data[this.pos++];\n            break;\n          case \"acTL\":\n            this.animation = {\n              numFrames: this.readUInt32(),\n              numPlays: this.readUInt32() || 1 / 0,\n              frames: []\n            };\n            break;\n          case \"PLTE\":\n            this.palette = this.read(e);\n            break;\n          case \"fcTL\":\n            o && this.animation.frames.push(o), this.pos += 4, o = {\n              width: this.readUInt32(),\n              height: this.readUInt32(),\n              xOffset: this.readUInt32(),\n              yOffset: this.readUInt32()\n            }, a = this.readUInt16(), i = this.readUInt16() || 100, o.delay = 1e3 * a / i, o.disposeOp = this.data[this.pos++], o.blendOp = this.data[this.pos++], o.data = [];\n            break;\n          case \"IDAT\":\n          case \"fdAT\":\n            for (\"fdAT\" === u && (this.pos += 4, e -= 4), t = (null != o ? o.data : void 0) || this.imgData, f = 0; 0 <= e ? f < e : f > e; 0 <= e ? ++f : --f) t.push(this.data[this.pos++]);\n            break;\n          case \"tRNS\":\n            switch (this.transparency = {}, this.colorType) {\n              case 3:\n                if (n = this.palette.length / 3, this.transparency.indexed = this.read(e), this.transparency.indexed.length > n) throw new Error(\"More transparent colors than palette size\");\n                if ((h = n - this.transparency.indexed.length) > 0) for (d = 0; 0 <= h ? d < h : d > h; 0 <= h ? ++d : --d) this.transparency.indexed.push(255);\n                break;\n              case 0:\n                this.transparency.grayscale = this.read(e)[0];\n                break;\n              case 2:\n                this.transparency.rgb = this.read(e);\n            }\n            break;\n          case \"tEXt\":\n            s = (l = this.read(e)).indexOf(0), c = String.fromCharCode.apply(String, l.slice(0, s)), this.text[c] = String.fromCharCode.apply(String, l.slice(s + 1));\n            break;\n          case \"IEND\":\n            return o && this.animation.frames.push(o), this.colors = function () {\n              switch (this.colorType) {\n                case 0:\n                case 3:\n                case 4:\n                  return 1;\n                case 2:\n                case 6:\n                  return 3;\n              }\n            }.call(this), this.hasAlphaChannel = 4 === (p = this.colorType) || 6 === p, r = this.colors + (this.hasAlphaChannel ? 1 : 0), this.pixelBitlength = this.bits * r, this.colorSpace = function () {\n              switch (this.colors) {\n                case 1:\n                  return \"DeviceGray\";\n                case 3:\n                  return \"DeviceRGB\";\n              }\n            }.call(this), void (this.imgData = new Uint8Array(this.imgData));\n          default:\n            this.pos += e;\n        }\n        if (this.pos += 4, this.pos > this.data.length) throw new Error(\"Incomplete or corrupt PNG file\");\n      }\n    }\n    a.prototype.read = function (t) {\n      var e, r;\n      for (r = [], e = 0; 0 <= t ? e < t : e > t; 0 <= t ? ++e : --e) r.push(this.data[this.pos++]);\n      return r;\n    }, a.prototype.readUInt32 = function () {\n      return this.data[this.pos++] << 24 | this.data[this.pos++] << 16 | this.data[this.pos++] << 8 | this.data[this.pos++];\n    }, a.prototype.readUInt16 = function () {\n      return this.data[this.pos++] << 8 | this.data[this.pos++];\n    }, a.prototype.decodePixels = function (t) {\n      var e = this.pixelBitlength / 8,\n        n = new Uint8Array(this.width * this.height * e),\n        i = 0,\n        a = this;\n      if (null == t && (t = this.imgData), 0 === t.length) return new Uint8Array(0);\n      function o(r, o, s, c) {\n        var u,\n          h,\n          l,\n          f,\n          d,\n          p,\n          g,\n          m,\n          v,\n          b,\n          y,\n          w,\n          N,\n          L,\n          A,\n          x,\n          S,\n          _,\n          P,\n          k,\n          I,\n          F = Math.ceil((a.width - r) / s),\n          C = Math.ceil((a.height - o) / c),\n          j = a.width == F && a.height == C;\n        for (L = e * F, w = j ? n : new Uint8Array(L * C), p = t.length, N = 0, h = 0; N < C && i < p;) {\n          switch (t[i++]) {\n            case 0:\n              for (f = S = 0; S < L; f = S += 1) w[h++] = t[i++];\n              break;\n            case 1:\n              for (f = _ = 0; _ < L; f = _ += 1) u = t[i++], d = f < e ? 0 : w[h - e], w[h++] = (u + d) % 256;\n              break;\n            case 2:\n              for (f = P = 0; P < L; f = P += 1) u = t[i++], l = (f - f % e) / e, A = N && w[(N - 1) * L + l * e + f % e], w[h++] = (A + u) % 256;\n              break;\n            case 3:\n              for (f = k = 0; k < L; f = k += 1) u = t[i++], l = (f - f % e) / e, d = f < e ? 0 : w[h - e], A = N && w[(N - 1) * L + l * e + f % e], w[h++] = (u + Math.floor((d + A) / 2)) % 256;\n              break;\n            case 4:\n              for (f = I = 0; I < L; f = I += 1) u = t[i++], l = (f - f % e) / e, d = f < e ? 0 : w[h - e], 0 === N ? A = x = 0 : (A = w[(N - 1) * L + l * e + f % e], x = l && w[(N - 1) * L + (l - 1) * e + f % e]), g = d + A - x, m = Math.abs(g - d), b = Math.abs(g - A), y = Math.abs(g - x), v = m <= b && m <= y ? d : b <= y ? A : x, w[h++] = (u + v) % 256;\n              break;\n            default:\n              throw new Error(\"Invalid filter algorithm: \" + t[i - 1]);\n          }\n          if (!j) {\n            var O = ((o + N * c) * a.width + r) * e,\n              B = N * L;\n            for (f = 0; f < F; f += 1) {\n              for (var M = 0; M < e; M += 1) n[O++] = w[B++];\n              O += (s - 1) * e;\n            }\n          }\n          N++;\n        }\n      }\n      return t = (0,fflate__WEBPACK_IMPORTED_MODULE_9__.unzlibSync)(t), 1 == a.interlaceMethod ? (o(0, 0, 8, 8), o(4, 0, 8, 8), o(0, 4, 4, 8), o(2, 0, 4, 4), o(0, 2, 2, 4), o(1, 0, 2, 2), o(0, 1, 1, 2)) : o(0, 0, 1, 1), n;\n    }, a.prototype.decodePalette = function () {\n      var t, e, r, n, i, a, o, s, c;\n      for (r = this.palette, a = this.transparency.indexed || [], i = new Uint8Array((a.length || 0) + r.length), n = 0, t = 0, e = o = 0, s = r.length; o < s; e = o += 3) i[n++] = r[e], i[n++] = r[e + 1], i[n++] = r[e + 2], i[n++] = null != (c = a[t++]) ? c : 255;\n      return i;\n    }, a.prototype.copyToImageData = function (t, e) {\n      var r, n, i, a, o, s, c, u, h, l, f;\n      if (n = this.colors, h = null, r = this.hasAlphaChannel, this.palette.length && (h = null != (f = this._decodedPalette) ? f : this._decodedPalette = this.decodePalette(), n = 4, r = !0), u = (i = t.data || t).length, o = h || e, a = s = 0, 1 === n) for (; a < u;) c = h ? 4 * e[a / 4] : s, l = o[c++], i[a++] = l, i[a++] = l, i[a++] = l, i[a++] = r ? o[c++] : 255, s = c;else for (; a < u;) c = h ? 4 * e[a / 4] : s, i[a++] = o[c++], i[a++] = o[c++], i[a++] = o[c++], i[a++] = r ? o[c++] : 255, s = c;\n    }, a.prototype.decode = function () {\n      var t;\n      return t = new Uint8Array(this.width * this.height * 4), this.copyToImageData(t, this.decodePixels()), t;\n    };\n    var o = function () {\n      if (\"[object Window]\" === Object.prototype.toString.call(n)) {\n        try {\n          e = n.document.createElement(\"canvas\"), i = e.getContext(\"2d\");\n        } catch (t) {\n          return !1;\n        }\n        return !0;\n      }\n      return !1;\n    };\n    return o(), t = function (t) {\n      var r;\n      if (!0 === o()) return i.width = t.width, i.height = t.height, i.clearRect(0, 0, t.width, t.height), i.putImageData(t, 0, 0), (r = new Image()).src = e.toDataURL(), r;\n      throw new Error(\"This method requires a Browser with Canvas-capability.\");\n    }, a.prototype.decodeFrames = function (e) {\n      var r, n, i, a, o, s, c, u;\n      if (this.animation) {\n        for (u = [], n = o = 0, s = (c = this.animation.frames).length; o < s; n = ++o) r = c[n], i = e.createImageData(r.width, r.height), a = this.decodePixels(new Uint8Array(r.data)), this.copyToImageData(i, a), r.imageData = i, u.push(r.image = t(i));\n        return u;\n      }\n    }, a.prototype.renderFrame = function (t, e) {\n      var r, n, i;\n      return r = (n = this.animation.frames)[e], i = n[e - 1], 0 === e && t.clearRect(0, 0, this.width, this.height), 1 === (null != i ? i.disposeOp : void 0) ? t.clearRect(i.xOffset, i.yOffset, i.width, i.height) : 2 === (null != i ? i.disposeOp : void 0) && t.putImageData(i.imageData, i.xOffset, i.yOffset), 0 === r.blendOp && t.clearRect(r.xOffset, r.yOffset, r.width, r.height), t.drawImage(r.image, r.xOffset, r.yOffset);\n    }, a.prototype.animate = function (t) {\n      var e,\n        r,\n        n,\n        i,\n        a,\n        o,\n        s = this;\n      return r = 0, o = this.animation, i = o.numFrames, n = o.frames, a = o.numPlays, (e = function () {\n        var o, c;\n        if (o = r++ % i, c = n[o], s.renderFrame(t, o), i > 1 && r / i < a) return s.animation._timeout = setTimeout(e, c.delay);\n      })();\n    }, a.prototype.stopAnimation = function () {\n      var t;\n      return clearTimeout(null != (t = this.animation) ? t._timeout : void 0);\n    }, a.prototype.render = function (t) {\n      var e, r;\n      return t._png && t._png.stopAnimation(), t._png = this, t.width = this.width, t.height = this.height, e = t.getContext(\"2d\"), this.animation ? (this.decodeFrames(e), this.animate(e)) : (r = e.createImageData(this.width, this.height), this.copyToImageData(r, this.decodePixels()), e.putImageData(r, 0, 0));\n    }, a;\n  }();\n/**\n * @license\n *\n * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * ====================================================================\n */\n/**\n * @license\n * (c) Dean McNamee <dean@gmail.com>, 2013.\n *\n * https://github.com/deanm/omggif\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n *\n * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,\n * including animation and compression.  It does not rely on any specific\n * underlying system, so should run in the browser, Node, or Plask.\n */\nfunction Zt(t) {\n  var e = 0;\n  if (71 !== t[e++] || 73 !== t[e++] || 70 !== t[e++] || 56 !== t[e++] || 56 != (t[e++] + 1 & 253) || 97 !== t[e++]) throw new Error(\"Invalid GIF 87a/89a header.\");\n  var r = t[e++] | t[e++] << 8,\n    n = t[e++] | t[e++] << 8,\n    i = t[e++],\n    a = i >> 7,\n    o = 1 << (7 & i) + 1;\n  t[e++];\n  t[e++];\n  var s = null,\n    c = null;\n  a && (s = e, c = o, e += 3 * o);\n  var u = !0,\n    h = [],\n    l = 0,\n    f = null,\n    d = 0,\n    p = null;\n  for (this.width = r, this.height = n; u && e < t.length;) switch (t[e++]) {\n    case 33:\n      switch (t[e++]) {\n        case 255:\n          if (11 !== t[e] || 78 == t[e + 1] && 69 == t[e + 2] && 84 == t[e + 3] && 83 == t[e + 4] && 67 == t[e + 5] && 65 == t[e + 6] && 80 == t[e + 7] && 69 == t[e + 8] && 50 == t[e + 9] && 46 == t[e + 10] && 48 == t[e + 11] && 3 == t[e + 12] && 1 == t[e + 13] && 0 == t[e + 16]) e += 14, p = t[e++] | t[e++] << 8, e++;else for (e += 12;;) {\n            if (!((P = t[e++]) >= 0)) throw Error(\"Invalid block size\");\n            if (0 === P) break;\n            e += P;\n          }\n          break;\n        case 249:\n          if (4 !== t[e++] || 0 !== t[e + 4]) throw new Error(\"Invalid graphics extension block.\");\n          var g = t[e++];\n          l = t[e++] | t[e++] << 8, f = t[e++], 0 == (1 & g) && (f = null), d = g >> 2 & 7, e++;\n          break;\n        case 254:\n          for (;;) {\n            if (!((P = t[e++]) >= 0)) throw Error(\"Invalid block size\");\n            if (0 === P) break;\n            e += P;\n          }\n          break;\n        default:\n          throw new Error(\"Unknown graphic control label: 0x\" + t[e - 1].toString(16));\n      }\n      break;\n    case 44:\n      var m = t[e++] | t[e++] << 8,\n        v = t[e++] | t[e++] << 8,\n        b = t[e++] | t[e++] << 8,\n        y = t[e++] | t[e++] << 8,\n        w = t[e++],\n        N = w >> 6 & 1,\n        L = 1 << (7 & w) + 1,\n        A = s,\n        x = c,\n        S = !1;\n      if (w >> 7) {\n        S = !0;\n        A = e, x = L, e += 3 * L;\n      }\n      var _ = e;\n      for (e++;;) {\n        var P;\n        if (!((P = t[e++]) >= 0)) throw Error(\"Invalid block size\");\n        if (0 === P) break;\n        e += P;\n      }\n      h.push({\n        x: m,\n        y: v,\n        width: b,\n        height: y,\n        has_local_palette: S,\n        palette_offset: A,\n        palette_size: x,\n        data_offset: _,\n        data_length: e - _,\n        transparent_index: f,\n        interlaced: !!N,\n        delay: l,\n        disposal: d\n      });\n      break;\n    case 59:\n      u = !1;\n      break;\n    default:\n      throw new Error(\"Unknown gif block: 0x\" + t[e - 1].toString(16));\n  }\n  this.numFrames = function () {\n    return h.length;\n  }, this.loopCount = function () {\n    return p;\n  }, this.frameInfo = function (t) {\n    if (t < 0 || t >= h.length) throw new Error(\"Frame index out of range.\");\n    return h[t];\n  }, this.decodeAndBlitFrameBGRA = function (e, n) {\n    var i = this.frameInfo(e),\n      a = i.width * i.height,\n      o = new Uint8Array(a);\n    $t(t, i.data_offset, o, a);\n    var s = i.palette_offset,\n      c = i.transparent_index;\n    null === c && (c = 256);\n    var u = i.width,\n      h = r - u,\n      l = u,\n      f = 4 * (i.y * r + i.x),\n      d = 4 * ((i.y + i.height) * r + i.x),\n      p = f,\n      g = 4 * h;\n    !0 === i.interlaced && (g += 4 * r * 7);\n    for (var m = 8, v = 0, b = o.length; v < b; ++v) {\n      var y = o[v];\n      if (0 === l && (l = u, (p += g) >= d && (g = 4 * h + 4 * r * (m - 1), p = f + (u + h) * (m << 1), m >>= 1)), y === c) p += 4;else {\n        var w = t[s + 3 * y],\n          N = t[s + 3 * y + 1],\n          L = t[s + 3 * y + 2];\n        n[p++] = L, n[p++] = N, n[p++] = w, n[p++] = 255;\n      }\n      --l;\n    }\n  }, this.decodeAndBlitFrameRGBA = function (e, n) {\n    var i = this.frameInfo(e),\n      a = i.width * i.height,\n      o = new Uint8Array(a);\n    $t(t, i.data_offset, o, a);\n    var s = i.palette_offset,\n      c = i.transparent_index;\n    null === c && (c = 256);\n    var u = i.width,\n      h = r - u,\n      l = u,\n      f = 4 * (i.y * r + i.x),\n      d = 4 * ((i.y + i.height) * r + i.x),\n      p = f,\n      g = 4 * h;\n    !0 === i.interlaced && (g += 4 * r * 7);\n    for (var m = 8, v = 0, b = o.length; v < b; ++v) {\n      var y = o[v];\n      if (0 === l && (l = u, (p += g) >= d && (g = 4 * h + 4 * r * (m - 1), p = f + (u + h) * (m << 1), m >>= 1)), y === c) p += 4;else {\n        var w = t[s + 3 * y],\n          N = t[s + 3 * y + 1],\n          L = t[s + 3 * y + 2];\n        n[p++] = w, n[p++] = N, n[p++] = L, n[p++] = 255;\n      }\n      --l;\n    }\n  };\n}\nfunction $t(t, e, r, n) {\n  for (var i = t[e++], o = 1 << i, s = o + 1, c = s + 1, u = i + 1, h = (1 << u) - 1, l = 0, f = 0, d = 0, p = t[e++], g = new Int32Array(4096), m = null;;) {\n    for (; l < 16 && 0 !== p;) f |= t[e++] << l, l += 8, 1 === p ? p = t[e++] : --p;\n    if (l < u) break;\n    var v = f & h;\n    if (f >>= u, l -= u, v !== o) {\n      if (v === s) break;\n      for (var b = v < c ? v : m, y = 0, w = b; w > o;) w = g[w] >> 8, ++y;\n      var N = w;\n      if (d + y + (b !== v ? 1 : 0) > n) return void a.log(\"Warning, gif stream longer than expected.\");\n      r[d++] = N;\n      var L = d += y;\n      for (b !== v && (r[d++] = N), w = b; y--;) w = g[w], r[--L] = 255 & w, w >>= 8;\n      null !== m && c < 4096 && (g[c++] = m << 8 | N, c >= h + 1 && u < 12 && (++u, h = h << 1 | 1)), m = v;\n    } else c = s + 1, h = (1 << (u = i + 1)) - 1, m = null;\n  }\n  return d !== n && a.log(\"Warning, gif stream shorter than expected.\"), r;\n}\n/**\n * @license\n  Copyright (c) 2008, Adobe Systems Incorporated\n  All rights reserved.\n\n  Redistribution and use in source and binary forms, with or without \n  modification, are permitted provided that the following conditions are\n  met:\n\n  * Redistributions of source code must retain the above copyright notice, \n    this list of conditions and the following disclaimer.\n  \n  * Redistributions in binary form must reproduce the above copyright\n    notice, this list of conditions and the following disclaimer in the \n    documentation and/or other materials provided with the distribution.\n  \n  * Neither the name of Adobe Systems Incorporated nor the names of its \n    contributors may be used to endorse or promote products derived from \n    this software without specific prior written permission.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n  IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\n  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR \n  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\nfunction Qt(t) {\n  var e,\n    r,\n    n,\n    i,\n    a,\n    o = Math.floor,\n    s = new Array(64),\n    c = new Array(64),\n    u = new Array(64),\n    h = new Array(64),\n    l = new Array(65535),\n    f = new Array(65535),\n    d = new Array(64),\n    p = new Array(64),\n    g = [],\n    m = 0,\n    v = 7,\n    b = new Array(64),\n    y = new Array(64),\n    w = new Array(64),\n    N = new Array(256),\n    L = new Array(2048),\n    A = [0, 1, 5, 6, 14, 15, 27, 28, 2, 4, 7, 13, 16, 26, 29, 42, 3, 8, 12, 17, 25, 30, 41, 43, 9, 11, 18, 24, 31, 40, 44, 53, 10, 19, 23, 32, 39, 45, 52, 54, 20, 22, 33, 38, 46, 51, 55, 60, 21, 34, 37, 47, 50, 56, 59, 61, 35, 36, 48, 49, 57, 58, 62, 63],\n    x = [0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],\n    S = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n    _ = [0, 0, 2, 1, 3, 3, 2, 4, 3, 5, 5, 4, 4, 0, 0, 1, 125],\n    P = [1, 2, 3, 0, 4, 17, 5, 18, 33, 49, 65, 6, 19, 81, 97, 7, 34, 113, 20, 50, 129, 145, 161, 8, 35, 66, 177, 193, 21, 82, 209, 240, 36, 51, 98, 114, 130, 9, 10, 22, 23, 24, 25, 26, 37, 38, 39, 40, 41, 42, 52, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250],\n    k = [0, 0, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0],\n    I = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n    F = [0, 0, 2, 1, 2, 4, 4, 3, 4, 7, 5, 4, 4, 0, 1, 2, 119],\n    C = [0, 1, 2, 3, 17, 4, 5, 33, 49, 6, 18, 65, 81, 7, 97, 113, 19, 34, 50, 129, 8, 20, 66, 145, 161, 177, 193, 9, 35, 51, 82, 240, 21, 98, 114, 209, 10, 22, 36, 52, 225, 37, 241, 23, 24, 25, 26, 38, 39, 40, 41, 42, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 130, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 226, 227, 228, 229, 230, 231, 232, 233, 234, 242, 243, 244, 245, 246, 247, 248, 249, 250];\n  function j(t, e) {\n    for (var r = 0, n = 0, i = new Array(), a = 1; a <= 16; a++) {\n      for (var o = 1; o <= t[a]; o++) i[e[n]] = [], i[e[n]][0] = r, i[e[n]][1] = a, n++, r++;\n      r *= 2;\n    }\n    return i;\n  }\n  function O(t) {\n    for (var e = t[0], r = t[1] - 1; r >= 0;) e & 1 << r && (m |= 1 << v), r--, --v < 0 && (255 == m ? (B(255), B(0)) : B(m), v = 7, m = 0);\n  }\n  function B(t) {\n    g.push(t);\n  }\n  function M(t) {\n    B(t >> 8 & 255), B(255 & t);\n  }\n  function E(t, e, r, n, i) {\n    for (var a, o = i[0], s = i[240], c = function (t, e) {\n        var r,\n          n,\n          i,\n          a,\n          o,\n          s,\n          c,\n          u,\n          h,\n          l,\n          f = 0;\n        for (h = 0; h < 8; ++h) {\n          r = t[f], n = t[f + 1], i = t[f + 2], a = t[f + 3], o = t[f + 4], s = t[f + 5], c = t[f + 6];\n          var p = r + (u = t[f + 7]),\n            g = r - u,\n            m = n + c,\n            v = n - c,\n            b = i + s,\n            y = i - s,\n            w = a + o,\n            N = a - o,\n            L = p + w,\n            A = p - w,\n            x = m + b,\n            S = m - b;\n          t[f] = L + x, t[f + 4] = L - x;\n          var _ = .707106781 * (S + A);\n          t[f + 2] = A + _, t[f + 6] = A - _;\n          var P = .382683433 * ((L = N + y) - (S = v + g)),\n            k = .5411961 * L + P,\n            I = 1.306562965 * S + P,\n            F = .707106781 * (x = y + v),\n            C = g + F,\n            j = g - F;\n          t[f + 5] = j + k, t[f + 3] = j - k, t[f + 1] = C + I, t[f + 7] = C - I, f += 8;\n        }\n        for (f = 0, h = 0; h < 8; ++h) {\n          r = t[f], n = t[f + 8], i = t[f + 16], a = t[f + 24], o = t[f + 32], s = t[f + 40], c = t[f + 48];\n          var O = r + (u = t[f + 56]),\n            B = r - u,\n            M = n + c,\n            E = n - c,\n            q = i + s,\n            D = i - s,\n            R = a + o,\n            T = a - o,\n            U = O + R,\n            z = O - R,\n            H = M + q,\n            W = M - q;\n          t[f] = U + H, t[f + 32] = U - H;\n          var V = .707106781 * (W + z);\n          t[f + 16] = z + V, t[f + 48] = z - V;\n          var G = .382683433 * ((U = T + D) - (W = E + B)),\n            Y = .5411961 * U + G,\n            J = 1.306562965 * W + G,\n            X = .707106781 * (H = D + E),\n            K = B + X,\n            Z = B - X;\n          t[f + 40] = Z + Y, t[f + 24] = Z - Y, t[f + 8] = K + J, t[f + 56] = K - J, f++;\n        }\n        for (h = 0; h < 64; ++h) l = t[h] * e[h], d[h] = l > 0 ? l + .5 | 0 : l - .5 | 0;\n        return d;\n      }(t, e), u = 0; u < 64; ++u) p[A[u]] = c[u];\n    var h = p[0] - r;\n    r = p[0], 0 == h ? O(n[0]) : (O(n[f[a = 32767 + h]]), O(l[a]));\n    for (var g = 63; g > 0 && 0 == p[g];) g--;\n    if (0 == g) return O(o), r;\n    for (var m, v = 1; v <= g;) {\n      for (var b = v; 0 == p[v] && v <= g;) ++v;\n      var y = v - b;\n      if (y >= 16) {\n        m = y >> 4;\n        for (var w = 1; w <= m; ++w) O(s);\n        y &= 15;\n      }\n      a = 32767 + p[v], O(i[(y << 4) + f[a]]), O(l[a]), v++;\n    }\n    return 63 != g && O(o), r;\n  }\n  function q(t) {\n    (t = Math.min(Math.max(t, 1), 100), a != t) && (!function (t) {\n      for (var e = [16, 11, 10, 16, 24, 40, 51, 61, 12, 12, 14, 19, 26, 58, 60, 55, 14, 13, 16, 24, 40, 57, 69, 56, 14, 17, 22, 29, 51, 87, 80, 62, 18, 22, 37, 56, 68, 109, 103, 77, 24, 35, 55, 64, 81, 104, 113, 92, 49, 64, 78, 87, 103, 121, 120, 101, 72, 92, 95, 98, 112, 100, 103, 99], r = 0; r < 64; r++) {\n        var n = o((e[r] * t + 50) / 100);\n        n = Math.min(Math.max(n, 1), 255), s[A[r]] = n;\n      }\n      for (var i = [17, 18, 24, 47, 99, 99, 99, 99, 18, 21, 26, 66, 99, 99, 99, 99, 24, 26, 56, 99, 99, 99, 99, 99, 47, 66, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99], a = 0; a < 64; a++) {\n        var l = o((i[a] * t + 50) / 100);\n        l = Math.min(Math.max(l, 1), 255), c[A[a]] = l;\n      }\n      for (var f = [1, 1.387039845, 1.306562965, 1.175875602, 1, .785694958, .5411961, .275899379], d = 0, p = 0; p < 8; p++) for (var g = 0; g < 8; g++) u[d] = 1 / (s[A[d]] * f[p] * f[g] * 8), h[d] = 1 / (c[A[d]] * f[p] * f[g] * 8), d++;\n    }(t < 50 ? Math.floor(5e3 / t) : Math.floor(200 - 2 * t)), a = t);\n  }\n  this.encode = function (t, a) {\n    a && q(a), g = new Array(), m = 0, v = 7, M(65496), M(65504), M(16), B(74), B(70), B(73), B(70), B(0), B(1), B(1), B(0), M(1), M(1), B(0), B(0), function () {\n      M(65499), M(132), B(0);\n      for (var t = 0; t < 64; t++) B(s[t]);\n      B(1);\n      for (var e = 0; e < 64; e++) B(c[e]);\n    }(), function (t, e) {\n      M(65472), M(17), B(8), M(e), M(t), B(3), B(1), B(17), B(0), B(2), B(17), B(1), B(3), B(17), B(1);\n    }(t.width, t.height), function () {\n      M(65476), M(418), B(0);\n      for (var t = 0; t < 16; t++) B(x[t + 1]);\n      for (var e = 0; e <= 11; e++) B(S[e]);\n      B(16);\n      for (var r = 0; r < 16; r++) B(_[r + 1]);\n      for (var n = 0; n <= 161; n++) B(P[n]);\n      B(1);\n      for (var i = 0; i < 16; i++) B(k[i + 1]);\n      for (var a = 0; a <= 11; a++) B(I[a]);\n      B(17);\n      for (var o = 0; o < 16; o++) B(F[o + 1]);\n      for (var s = 0; s <= 161; s++) B(C[s]);\n    }(), M(65498), M(12), B(3), B(1), B(0), B(2), B(17), B(3), B(17), B(0), B(63), B(0);\n    var o = 0,\n      l = 0,\n      f = 0;\n    m = 0, v = 7, this.encode.displayName = \"_encode_\";\n    for (var d, p, N, A, j, D, R, T, U, z = t.data, H = t.width, W = t.height, V = 4 * H, G = 0; G < W;) {\n      for (d = 0; d < V;) {\n        for (j = V * G + d, R = -1, T = 0, U = 0; U < 64; U++) D = j + (T = U >> 3) * V + (R = 4 * (7 & U)), G + T >= W && (D -= V * (G + 1 + T - W)), d + R >= V && (D -= d + R - V + 4), p = z[D++], N = z[D++], A = z[D++], b[U] = (L[p] + L[N + 256 >> 0] + L[A + 512 >> 0] >> 16) - 128, y[U] = (L[p + 768 >> 0] + L[N + 1024 >> 0] + L[A + 1280 >> 0] >> 16) - 128, w[U] = (L[p + 1280 >> 0] + L[N + 1536 >> 0] + L[A + 1792 >> 0] >> 16) - 128;\n        o = E(b, u, o, e, n), l = E(y, h, l, r, i), f = E(w, h, f, r, i), d += 32;\n      }\n      G += 8;\n    }\n    if (v >= 0) {\n      var Y = [];\n      Y[1] = v + 1, Y[0] = (1 << v + 1) - 1, O(Y);\n    }\n    return M(65497), new Uint8Array(g);\n  }, t = t || 50, function () {\n    for (var t = String.fromCharCode, e = 0; e < 256; e++) N[e] = t(e);\n  }(), e = j(x, S), r = j(k, I), n = j(_, P), i = j(F, C), function () {\n    for (var t = 1, e = 2, r = 1; r <= 15; r++) {\n      for (var n = t; n < e; n++) f[32767 + n] = r, l[32767 + n] = [], l[32767 + n][1] = r, l[32767 + n][0] = n;\n      for (var i = -(e - 1); i <= -t; i++) f[32767 + i] = r, l[32767 + i] = [], l[32767 + i][1] = r, l[32767 + i][0] = e - 1 + i;\n      t <<= 1, e <<= 1;\n    }\n  }(), function () {\n    for (var t = 0; t < 256; t++) L[t] = 19595 * t, L[t + 256 >> 0] = 38470 * t, L[t + 512 >> 0] = 7471 * t + 32768, L[t + 768 >> 0] = -11059 * t, L[t + 1024 >> 0] = -21709 * t, L[t + 1280 >> 0] = 32768 * t + 8421375, L[t + 1536 >> 0] = -27439 * t, L[t + 1792 >> 0] = -5329 * t;\n  }(), q(t);\n}\n/**\n * @license\n * Copyright (c) 2017 Aras Abbasi\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction te(t, e) {\n  if (this.pos = 0, this.buffer = t, this.datav = new DataView(t.buffer), this.is_with_alpha = !!e, this.bottom_up = !0, this.flag = String.fromCharCode(this.buffer[0]) + String.fromCharCode(this.buffer[1]), this.pos += 2, -1 === [\"BM\", \"BA\", \"CI\", \"CP\", \"IC\", \"PT\"].indexOf(this.flag)) throw new Error(\"Invalid BMP File\");\n  this.parseHeader(), this.parseBGR();\n}\nfunction ee(t) {\n  function e(t) {\n    if (!t) throw Error(\"assert :P\");\n  }\n  function r(t, e, r) {\n    for (var n = 0; 4 > n; n++) if (t[e + n] != r.charCodeAt(n)) return !0;\n    return !1;\n  }\n  function n(t, e, r, n, i) {\n    for (var a = 0; a < i; a++) t[e + a] = r[n + a];\n  }\n  function i(t, e, r, n) {\n    for (var i = 0; i < n; i++) t[e + i] = r;\n  }\n  function a(t) {\n    return new Int32Array(t);\n  }\n  function o(t, e) {\n    for (var r = [], n = 0; n < t; n++) r.push(new e());\n    return r;\n  }\n  function s(t, e) {\n    var r = [];\n    return function t(r, n, i) {\n      for (var a = i[n], o = 0; o < a && (r.push(i.length > n + 1 ? [] : new e()), !(i.length < n + 1)); o++) t(r[o], n + 1, i);\n    }(r, 0, t), r;\n  }\n  var c = function () {\n    var t = this;\n    function c(t, e) {\n      for (var r = 1 << e - 1 >>> 0; t & r;) r >>>= 1;\n      return r ? (t & r - 1) + r : t;\n    }\n    function u(t, r, n, i, a) {\n      e(!(i % n));\n      do {\n        t[r + (i -= n)] = a;\n      } while (0 < i);\n    }\n    function h(t, r, n, i, o) {\n      if (e(2328 >= o), 512 >= o) var s = a(512);else if (null == (s = a(o))) return 0;\n      return function (t, r, n, i, o, s) {\n        var h,\n          f,\n          d = r,\n          p = 1 << n,\n          g = a(16),\n          m = a(16);\n        for (e(0 != o), e(null != i), e(null != t), e(0 < n), f = 0; f < o; ++f) {\n          if (15 < i[f]) return 0;\n          ++g[i[f]];\n        }\n        if (g[0] == o) return 0;\n        for (m[1] = 0, h = 1; 15 > h; ++h) {\n          if (g[h] > 1 << h) return 0;\n          m[h + 1] = m[h] + g[h];\n        }\n        for (f = 0; f < o; ++f) h = i[f], 0 < i[f] && (s[m[h]++] = f);\n        if (1 == m[15]) return (i = new l()).g = 0, i.value = s[0], u(t, d, 1, p, i), p;\n        var v,\n          b = -1,\n          y = p - 1,\n          w = 0,\n          N = 1,\n          L = 1,\n          A = 1 << n;\n        for (f = 0, h = 1, o = 2; h <= n; ++h, o <<= 1) {\n          if (N += L <<= 1, 0 > (L -= g[h])) return 0;\n          for (; 0 < g[h]; --g[h]) (i = new l()).g = h, i.value = s[f++], u(t, d + w, o, A, i), w = c(w, h);\n        }\n        for (h = n + 1, o = 2; 15 >= h; ++h, o <<= 1) {\n          if (N += L <<= 1, 0 > (L -= g[h])) return 0;\n          for (; 0 < g[h]; --g[h]) {\n            if (i = new l(), (w & y) != b) {\n              for (d += A, v = 1 << (b = h) - n; 15 > b && !(0 >= (v -= g[b]));) ++b, v <<= 1;\n              p += A = 1 << (v = b - n), t[r + (b = w & y)].g = v + n, t[r + b].value = d - r - b;\n            }\n            i.g = h - n, i.value = s[f++], u(t, d + (w >> n), o, A, i), w = c(w, h);\n          }\n        }\n        return N != 2 * m[15] - 1 ? 0 : p;\n      }(t, r, n, i, o, s);\n    }\n    function l() {\n      this.value = this.g = 0;\n    }\n    function f() {\n      this.value = this.g = 0;\n    }\n    function d() {\n      this.G = o(5, l), this.H = a(5), this.jc = this.Qb = this.qb = this.nd = 0, this.pd = o(Dr, f);\n    }\n    function p(t, r, n, i) {\n      e(null != t), e(null != r), e(2147483648 > i), t.Ca = 254, t.I = 0, t.b = -8, t.Ka = 0, t.oa = r, t.pa = n, t.Jd = r, t.Yc = n + i, t.Zc = 4 <= i ? n + i - 4 + 1 : n, _(t);\n    }\n    function g(t, e) {\n      for (var r = 0; 0 < e--;) r |= k(t, 128) << e;\n      return r;\n    }\n    function m(t, e) {\n      var r = g(t, e);\n      return P(t) ? -r : r;\n    }\n    function v(t, r, n, i) {\n      var a,\n        o = 0;\n      for (e(null != t), e(null != r), e(4294967288 > i), t.Sb = i, t.Ra = 0, t.u = 0, t.h = 0, 4 < i && (i = 4), a = 0; a < i; ++a) o += r[n + a] << 8 * a;\n      t.Ra = o, t.bb = i, t.oa = r, t.pa = n;\n    }\n    function b(t) {\n      for (; 8 <= t.u && t.bb < t.Sb;) t.Ra >>>= 8, t.Ra += t.oa[t.pa + t.bb] << Ur - 8 >>> 0, ++t.bb, t.u -= 8;\n      A(t) && (t.h = 1, t.u = 0);\n    }\n    function y(t, r) {\n      if (e(0 <= r), !t.h && r <= Tr) {\n        var n = L(t) & Rr[r];\n        return t.u += r, b(t), n;\n      }\n      return t.h = 1, t.u = 0;\n    }\n    function w() {\n      this.b = this.Ca = this.I = 0, this.oa = [], this.pa = 0, this.Jd = [], this.Yc = 0, this.Zc = [], this.Ka = 0;\n    }\n    function N() {\n      this.Ra = 0, this.oa = [], this.h = this.u = this.bb = this.Sb = this.pa = 0;\n    }\n    function L(t) {\n      return t.Ra >>> (t.u & Ur - 1) >>> 0;\n    }\n    function A(t) {\n      return e(t.bb <= t.Sb), t.h || t.bb == t.Sb && t.u > Ur;\n    }\n    function x(t, e) {\n      t.u = e, t.h = A(t);\n    }\n    function S(t) {\n      t.u >= zr && (e(t.u >= zr), b(t));\n    }\n    function _(t) {\n      e(null != t && null != t.oa), t.pa < t.Zc ? (t.I = (t.oa[t.pa++] | t.I << 8) >>> 0, t.b += 8) : (e(null != t && null != t.oa), t.pa < t.Yc ? (t.b += 8, t.I = t.oa[t.pa++] | t.I << 8) : t.Ka ? t.b = 0 : (t.I <<= 8, t.b += 8, t.Ka = 1));\n    }\n    function P(t) {\n      return g(t, 1);\n    }\n    function k(t, e) {\n      var r = t.Ca;\n      0 > t.b && _(t);\n      var n = t.b,\n        i = r * e >>> 8,\n        a = (t.I >>> n > i) + 0;\n      for (a ? (r -= i, t.I -= i + 1 << n >>> 0) : r = i + 1, n = r, i = 0; 256 <= n;) i += 8, n >>= 8;\n      return n = 7 ^ i + Hr[n], t.b -= n, t.Ca = (r << n) - 1, a;\n    }\n    function I(t, e, r) {\n      t[e + 0] = r >> 24 & 255, t[e + 1] = r >> 16 & 255, t[e + 2] = r >> 8 & 255, t[e + 3] = r >> 0 & 255;\n    }\n    function F(t, e) {\n      return t[e + 0] << 0 | t[e + 1] << 8;\n    }\n    function C(t, e) {\n      return F(t, e) | t[e + 2] << 16;\n    }\n    function j(t, e) {\n      return F(t, e) | F(t, e + 2) << 16;\n    }\n    function O(t, r) {\n      var n = 1 << r;\n      return e(null != t), e(0 < r), t.X = a(n), null == t.X ? 0 : (t.Mb = 32 - r, t.Xa = r, 1);\n    }\n    function B(t, r) {\n      e(null != t), e(null != r), e(t.Xa == r.Xa), n(r.X, 0, t.X, 0, 1 << r.Xa);\n    }\n    function M() {\n      this.X = [], this.Xa = this.Mb = 0;\n    }\n    function E(t, r, n, i) {\n      e(null != n), e(null != i);\n      var a = n[0],\n        o = i[0];\n      return 0 == a && (a = (t * o + r / 2) / r), 0 == o && (o = (r * a + t / 2) / t), 0 >= a || 0 >= o ? 0 : (n[0] = a, i[0] = o, 1);\n    }\n    function q(t, e) {\n      return t + (1 << e) - 1 >>> e;\n    }\n    function D(t, e) {\n      return ((4278255360 & t) + (4278255360 & e) >>> 0 & 4278255360) + ((16711935 & t) + (16711935 & e) >>> 0 & 16711935) >>> 0;\n    }\n    function R(e, r) {\n      t[r] = function (r, n, i, a, o, s, c) {\n        var u;\n        for (u = 0; u < o; ++u) {\n          var h = t[e](s[c + u - 1], i, a + u);\n          s[c + u] = D(r[n + u], h);\n        }\n      };\n    }\n    function T() {\n      this.ud = this.hd = this.jd = 0;\n    }\n    function U(t, e) {\n      return ((4278124286 & (t ^ e)) >>> 1) + (t & e) >>> 0;\n    }\n    function z(t) {\n      return 0 <= t && 256 > t ? t : 0 > t ? 0 : 255 < t ? 255 : void 0;\n    }\n    function H(t, e) {\n      return z(t + (t - e + .5 >> 1));\n    }\n    function W(t, e, r) {\n      return Math.abs(e - r) - Math.abs(t - r);\n    }\n    function V(t, e, r, n, i, a, o) {\n      for (n = a[o - 1], r = 0; r < i; ++r) a[o + r] = n = D(t[e + r], n);\n    }\n    function G(t, e, r, n, i) {\n      var a;\n      for (a = 0; a < r; ++a) {\n        var o = t[e + a],\n          s = o >> 8 & 255,\n          c = 16711935 & (c = (c = 16711935 & o) + ((s << 16) + s));\n        n[i + a] = (4278255360 & o) + c >>> 0;\n      }\n    }\n    function Y(t, e) {\n      e.jd = t >> 0 & 255, e.hd = t >> 8 & 255, e.ud = t >> 16 & 255;\n    }\n    function J(t, e, r, n, i, a) {\n      var o;\n      for (o = 0; o < n; ++o) {\n        var s = e[r + o],\n          c = s >>> 8,\n          u = s,\n          h = 255 & (h = (h = s >>> 16) + ((t.jd << 24 >> 24) * (c << 24 >> 24) >>> 5));\n        u = 255 & (u = (u = u + ((t.hd << 24 >> 24) * (c << 24 >> 24) >>> 5)) + ((t.ud << 24 >> 24) * (h << 24 >> 24) >>> 5));\n        i[a + o] = (4278255360 & s) + (h << 16) + u;\n      }\n    }\n    function X(e, r, n, i, a) {\n      t[r] = function (t, e, r, n, o, s, c, u, h) {\n        for (n = c; n < u; ++n) for (c = 0; c < h; ++c) o[s++] = a(r[i(t[e++])]);\n      }, t[e] = function (e, r, o, s, c, u, h) {\n        var l = 8 >> e.b,\n          f = e.Ea,\n          d = e.K[0],\n          p = e.w;\n        if (8 > l) for (e = (1 << e.b) - 1, p = (1 << l) - 1; r < o; ++r) {\n          var g,\n            m = 0;\n          for (g = 0; g < f; ++g) g & e || (m = i(s[c++])), u[h++] = a(d[m & p]), m >>= l;\n        } else t[\"VP8LMapColor\" + n](s, c, d, p, u, h, r, o, f);\n      };\n    }\n    function K(t, e, r, n, i) {\n      for (r = e + r; e < r;) {\n        var a = t[e++];\n        n[i++] = a >> 16 & 255, n[i++] = a >> 8 & 255, n[i++] = a >> 0 & 255;\n      }\n    }\n    function Z(t, e, r, n, i) {\n      for (r = e + r; e < r;) {\n        var a = t[e++];\n        n[i++] = a >> 16 & 255, n[i++] = a >> 8 & 255, n[i++] = a >> 0 & 255, n[i++] = a >> 24 & 255;\n      }\n    }\n    function $(t, e, r, n, i) {\n      for (r = e + r; e < r;) {\n        var a = (o = t[e++]) >> 16 & 240 | o >> 12 & 15,\n          o = o >> 0 & 240 | o >> 28 & 15;\n        n[i++] = a, n[i++] = o;\n      }\n    }\n    function Q(t, e, r, n, i) {\n      for (r = e + r; e < r;) {\n        var a = (o = t[e++]) >> 16 & 248 | o >> 13 & 7,\n          o = o >> 5 & 224 | o >> 3 & 31;\n        n[i++] = a, n[i++] = o;\n      }\n    }\n    function tt(t, e, r, n, i) {\n      for (r = e + r; e < r;) {\n        var a = t[e++];\n        n[i++] = a >> 0 & 255, n[i++] = a >> 8 & 255, n[i++] = a >> 16 & 255;\n      }\n    }\n    function et(t, e, r, i, a, o) {\n      if (0 == o) for (r = e + r; e < r;) I(i, ((o = t[e++])[0] >> 24 | o[1] >> 8 & 65280 | o[2] << 8 & 16711680 | o[3] << 24) >>> 0), a += 32;else n(i, a, t, e, r);\n    }\n    function rt(e, r) {\n      t[r][0] = t[e + \"0\"], t[r][1] = t[e + \"1\"], t[r][2] = t[e + \"2\"], t[r][3] = t[e + \"3\"], t[r][4] = t[e + \"4\"], t[r][5] = t[e + \"5\"], t[r][6] = t[e + \"6\"], t[r][7] = t[e + \"7\"], t[r][8] = t[e + \"8\"], t[r][9] = t[e + \"9\"], t[r][10] = t[e + \"10\"], t[r][11] = t[e + \"11\"], t[r][12] = t[e + \"12\"], t[r][13] = t[e + \"13\"], t[r][14] = t[e + \"0\"], t[r][15] = t[e + \"0\"];\n    }\n    function nt(t) {\n      return t == Hn || t == Wn || t == Vn || t == Gn;\n    }\n    function it() {\n      this.eb = [], this.size = this.A = this.fb = 0;\n    }\n    function at() {\n      this.y = [], this.f = [], this.ea = [], this.F = [], this.Tc = this.Ed = this.Cd = this.Fd = this.lb = this.Db = this.Ab = this.fa = this.J = this.W = this.N = this.O = 0;\n    }\n    function ot() {\n      this.Rd = this.height = this.width = this.S = 0, this.f = {}, this.f.RGBA = new it(), this.f.kb = new at(), this.sd = null;\n    }\n    function st() {\n      this.width = [0], this.height = [0], this.Pd = [0], this.Qd = [0], this.format = [0];\n    }\n    function ct() {\n      this.Id = this.fd = this.Md = this.hb = this.ib = this.da = this.bd = this.cd = this.j = this.v = this.Da = this.Sd = this.ob = 0;\n    }\n    function ut(t) {\n      return alert(\"todo:WebPSamplerProcessPlane\"), t.T;\n    }\n    function ht(t, e) {\n      var r = t.T,\n        i = e.ba.f.RGBA,\n        a = i.eb,\n        o = i.fb + t.ka * i.A,\n        s = vi[e.ba.S],\n        c = t.y,\n        u = t.O,\n        h = t.f,\n        l = t.N,\n        f = t.ea,\n        d = t.W,\n        p = e.cc,\n        g = e.dc,\n        m = e.Mc,\n        v = e.Nc,\n        b = t.ka,\n        y = t.ka + t.T,\n        w = t.U,\n        N = w + 1 >> 1;\n      for (0 == b ? s(c, u, null, null, h, l, f, d, h, l, f, d, a, o, null, null, w) : (s(e.ec, e.fc, c, u, p, g, m, v, h, l, f, d, a, o - i.A, a, o, w), ++r); b + 2 < y; b += 2) p = h, g = l, m = f, v = d, l += t.Rc, d += t.Rc, o += 2 * i.A, s(c, (u += 2 * t.fa) - t.fa, c, u, p, g, m, v, h, l, f, d, a, o - i.A, a, o, w);\n      return u += t.fa, t.j + y < t.o ? (n(e.ec, e.fc, c, u, w), n(e.cc, e.dc, h, l, N), n(e.Mc, e.Nc, f, d, N), r--) : 1 & y || s(c, u, null, null, h, l, f, d, h, l, f, d, a, o + i.A, null, null, w), r;\n    }\n    function lt(t, r, n) {\n      var i = t.F,\n        a = [t.J];\n      if (null != i) {\n        var o = t.U,\n          s = r.ba.S,\n          c = s == Tn || s == Vn;\n        r = r.ba.f.RGBA;\n        var u = [0],\n          h = t.ka;\n        u[0] = t.T, t.Kb && (0 == h ? --u[0] : (--h, a[0] -= t.width), t.j + t.ka + t.T == t.o && (u[0] = t.o - t.j - h));\n        var l = r.eb;\n        h = r.fb + h * r.A;\n        t = Sn(i, a[0], t.width, o, u, l, h + (c ? 0 : 3), r.A), e(n == u), t && nt(s) && An(l, h, c, o, u, r.A);\n      }\n      return 0;\n    }\n    function ft(t) {\n      var e = t.ma,\n        r = e.ba.S,\n        n = 11 > r,\n        i = r == qn || r == Rn || r == Tn || r == Un || 12 == r || nt(r);\n      if (e.memory = null, e.Ib = null, e.Jb = null, e.Nd = null, !Mr(e.Oa, t, i ? 11 : 12)) return 0;\n      if (i && nt(r) && br(), t.da) alert(\"todo:use_scaling\");else {\n        if (n) {\n          if (e.Ib = ut, t.Kb) {\n            if (r = t.U + 1 >> 1, e.memory = a(t.U + 2 * r), null == e.memory) return 0;\n            e.ec = e.memory, e.fc = 0, e.cc = e.ec, e.dc = e.fc + t.U, e.Mc = e.cc, e.Nc = e.dc + r, e.Ib = ht, br();\n          }\n        } else alert(\"todo:EmitYUV\");\n        i && (e.Jb = lt, n && mr());\n      }\n      if (n && !Ci) {\n        for (t = 0; 256 > t; ++t) ji[t] = 89858 * (t - 128) + _i >> Si, Mi[t] = -22014 * (t - 128) + _i, Bi[t] = -45773 * (t - 128), Oi[t] = 113618 * (t - 128) + _i >> Si;\n        for (t = Pi; t < ki; ++t) e = 76283 * (t - 16) + _i >> Si, Ei[t - Pi] = Vt(e, 255), qi[t - Pi] = Vt(e + 8 >> 4, 15);\n        Ci = 1;\n      }\n      return 1;\n    }\n    function dt(t) {\n      var r = t.ma,\n        n = t.U,\n        i = t.T;\n      return e(!(1 & t.ka)), 0 >= n || 0 >= i ? 0 : (n = r.Ib(t, r), null != r.Jb && r.Jb(t, r, n), r.Dc += n, 1);\n    }\n    function pt(t) {\n      t.ma.memory = null;\n    }\n    function gt(t, e, r, n) {\n      return 47 != y(t, 8) ? 0 : (e[0] = y(t, 14) + 1, r[0] = y(t, 14) + 1, n[0] = y(t, 1), 0 != y(t, 3) ? 0 : !t.h);\n    }\n    function mt(t, e) {\n      if (4 > t) return t + 1;\n      var r = t - 2 >> 1;\n      return (2 + (1 & t) << r) + y(e, r) + 1;\n    }\n    function vt(t, e) {\n      return 120 < e ? e - 120 : 1 <= (r = ((r = $n[e - 1]) >> 4) * t + (8 - (15 & r))) ? r : 1;\n      var r;\n    }\n    function bt(t, e, r) {\n      var n = L(r),\n        i = t[e += 255 & n].g - 8;\n      return 0 < i && (x(r, r.u + 8), n = L(r), e += t[e].value, e += n & (1 << i) - 1), x(r, r.u + t[e].g), t[e].value;\n    }\n    function yt(t, r, n) {\n      return n.g += t.g, n.value += t.value << r >>> 0, e(8 >= n.g), t.g;\n    }\n    function wt(t, r, n) {\n      var i = t.xc;\n      return e((r = 0 == i ? 0 : t.vc[t.md * (n >> i) + (r >> i)]) < t.Wb), t.Ya[r];\n    }\n    function Nt(t, r, i, a) {\n      var o = t.ab,\n        s = t.c * r,\n        c = t.C;\n      r = c + r;\n      var u = i,\n        h = a;\n      for (a = t.Ta, i = t.Ua; 0 < o--;) {\n        var l = t.gc[o],\n          f = c,\n          d = r,\n          p = u,\n          g = h,\n          m = (h = a, u = i, l.Ea);\n        switch (e(f < d), e(d <= l.nc), l.hc) {\n          case 2:\n            Gr(p, g, (d - f) * m, h, u);\n            break;\n          case 0:\n            var v = f,\n              b = d,\n              y = h,\n              w = u,\n              N = (_ = l).Ea;\n            0 == v && (Wr(p, g, null, null, 1, y, w), V(p, g + 1, 0, 0, N - 1, y, w + 1), g += N, w += N, ++v);\n            for (var L = 1 << _.b, A = L - 1, x = q(N, _.b), S = _.K, _ = _.w + (v >> _.b) * x; v < b;) {\n              var P = S,\n                k = _,\n                I = 1;\n              for (Vr(p, g, y, w - N, 1, y, w); I < N;) {\n                var F = (I & ~A) + L;\n                F > N && (F = N), (0, Zr[P[k++] >> 8 & 15])(p, g + +I, y, w + I - N, F - I, y, w + I), I = F;\n              }\n              g += N, w += N, ++v & A || (_ += x);\n            }\n            d != l.nc && n(h, u - m, h, u + (d - f - 1) * m, m);\n            break;\n          case 1:\n            for (m = p, b = g, N = (p = l.Ea) - (w = p & ~(y = (g = 1 << l.b) - 1)), v = q(p, l.b), L = l.K, l = l.w + (f >> l.b) * v; f < d;) {\n              for (A = L, x = l, S = new T(), _ = b + w, P = b + p; b < _;) Y(A[x++], S), $r(S, m, b, g, h, u), b += g, u += g;\n              b < P && (Y(A[x++], S), $r(S, m, b, N, h, u), b += N, u += N), ++f & y || (l += v);\n            }\n            break;\n          case 3:\n            if (p == h && g == u && 0 < l.b) {\n              for (b = h, p = m = u + (d - f) * m - (w = (d - f) * q(l.Ea, l.b)), g = h, y = u, v = [], w = (N = w) - 1; 0 <= w; --w) v[w] = g[y + w];\n              for (w = N - 1; 0 <= w; --w) b[p + w] = v[w];\n              Yr(l, f, d, h, m, h, u);\n            } else Yr(l, f, d, p, g, h, u);\n        }\n        u = a, h = i;\n      }\n      h != i && n(a, i, u, h, s);\n    }\n    function Lt(t, r) {\n      var n = t.V,\n        i = t.Ba + t.c * t.C,\n        a = r - t.C;\n      if (e(r <= t.l.o), e(16 >= a), 0 < a) {\n        var o = t.l,\n          s = t.Ta,\n          c = t.Ua,\n          u = o.width;\n        if (Nt(t, a, n, i), a = c = [c], e((n = t.C) < (i = r)), e(o.v < o.va), i > o.o && (i = o.o), n < o.j) {\n          var h = o.j - n;\n          n = o.j;\n          a[0] += h * u;\n        }\n        if (n >= i ? n = 0 : (a[0] += 4 * o.v, o.ka = n - o.j, o.U = o.va - o.v, o.T = i - n, n = 1), n) {\n          if (c = c[0], 11 > (n = t.ca).S) {\n            var l = n.f.RGBA,\n              f = (i = n.S, a = o.U, o = o.T, h = l.eb, l.A),\n              d = o;\n            for (l = l.fb + t.Ma * l.A; 0 < d--;) {\n              var p = s,\n                g = c,\n                m = a,\n                v = h,\n                b = l;\n              switch (i) {\n                case En:\n                  Qr(p, g, m, v, b);\n                  break;\n                case qn:\n                  tn(p, g, m, v, b);\n                  break;\n                case Hn:\n                  tn(p, g, m, v, b), An(v, b, 0, m, 1, 0);\n                  break;\n                case Dn:\n                  nn(p, g, m, v, b);\n                  break;\n                case Rn:\n                  et(p, g, m, v, b, 1);\n                  break;\n                case Wn:\n                  et(p, g, m, v, b, 1), An(v, b, 0, m, 1, 0);\n                  break;\n                case Tn:\n                  et(p, g, m, v, b, 0);\n                  break;\n                case Vn:\n                  et(p, g, m, v, b, 0), An(v, b, 1, m, 1, 0);\n                  break;\n                case Un:\n                  en(p, g, m, v, b);\n                  break;\n                case Gn:\n                  en(p, g, m, v, b), xn(v, b, m, 1, 0);\n                  break;\n                case zn:\n                  rn(p, g, m, v, b);\n                  break;\n                default:\n                  e(0);\n              }\n              c += u, l += f;\n            }\n            t.Ma += o;\n          } else alert(\"todo:EmitRescaledRowsYUVA\");\n          e(t.Ma <= n.height);\n        }\n      }\n      t.C = r, e(t.C <= t.i);\n    }\n    function At(t) {\n      var e;\n      if (0 < t.ua) return 0;\n      for (e = 0; e < t.Wb; ++e) {\n        var r = t.Ya[e].G,\n          n = t.Ya[e].H;\n        if (0 < r[1][n[1] + 0].g || 0 < r[2][n[2] + 0].g || 0 < r[3][n[3] + 0].g) return 0;\n      }\n      return 1;\n    }\n    function xt(t, r, n, i, a, o) {\n      if (0 != t.Z) {\n        var s = t.qd,\n          c = t.rd;\n        for (e(null != mi[t.Z]); r < n; ++r) mi[t.Z](s, c, i, a, i, a, o), s = i, c = a, a += o;\n        t.qd = s, t.rd = c;\n      }\n    }\n    function St(t, r) {\n      var n = t.l.ma,\n        i = 0 == n.Z || 1 == n.Z ? t.l.j : t.C;\n      i = t.C < i ? i : t.C;\n      if (e(r <= t.l.o), r > i) {\n        var a = t.l.width,\n          o = n.ca,\n          s = n.tb + a * i,\n          c = t.V,\n          u = t.Ba + t.c * i,\n          h = t.gc;\n        e(1 == t.ab), e(3 == h[0].hc), Xr(h[0], i, r, c, u, o, s), xt(n, i, r, o, s, a);\n      }\n      t.C = t.Ma = r;\n    }\n    function _t(t, r, n, i, a, o, s) {\n      var c = t.$ / i,\n        u = t.$ % i,\n        h = t.m,\n        l = t.s,\n        f = n + t.$,\n        d = f;\n      a = n + i * a;\n      var p = n + i * o,\n        g = 280 + l.ua,\n        m = t.Pb ? c : 16777216,\n        v = 0 < l.ua ? l.Wa : null,\n        b = l.wc,\n        y = f < p ? wt(l, u, c) : null;\n      e(t.C < o), e(p <= a);\n      var w = !1;\n      t: for (;;) {\n        for (; w || f < p;) {\n          var N = 0;\n          if (c >= m) {\n            var _ = f - n;\n            e((m = t).Pb), m.wd = m.m, m.xd = _, 0 < m.s.ua && B(m.s.Wa, m.s.vb), m = c + ti;\n          }\n          if (u & b || (y = wt(l, u, c)), e(null != y), y.Qb && (r[f] = y.qb, w = !0), !w) if (S(h), y.jc) {\n            N = h, _ = r;\n            var P = f,\n              k = y.pd[L(N) & Dr - 1];\n            e(y.jc), 256 > k.g ? (x(N, N.u + k.g), _[P] = k.value, N = 0) : (x(N, N.u + k.g - 256), e(256 <= k.value), N = k.value), 0 == N && (w = !0);\n          } else N = bt(y.G[0], y.H[0], h);\n          if (h.h) break;\n          if (w || 256 > N) {\n            if (!w) if (y.nd) r[f] = (y.qb | N << 8) >>> 0;else {\n              if (S(h), w = bt(y.G[1], y.H[1], h), S(h), _ = bt(y.G[2], y.H[2], h), P = bt(y.G[3], y.H[3], h), h.h) break;\n              r[f] = (P << 24 | w << 16 | N << 8 | _) >>> 0;\n            }\n            if (w = !1, ++f, ++u >= i && (u = 0, ++c, null != s && c <= o && !(c % 16) && s(t, c), null != v)) for (; d < f;) N = r[d++], v.X[(506832829 * N & 4294967295) >>> v.Mb] = N;\n          } else if (280 > N) {\n            if (N = mt(N - 256, h), _ = bt(y.G[4], y.H[4], h), S(h), _ = vt(i, _ = mt(_, h)), h.h) break;\n            if (f - n < _ || a - f < N) break t;\n            for (P = 0; P < N; ++P) r[f + P] = r[f + P - _];\n            for (f += N, u += N; u >= i;) u -= i, ++c, null != s && c <= o && !(c % 16) && s(t, c);\n            if (e(f <= a), u & b && (y = wt(l, u, c)), null != v) for (; d < f;) N = r[d++], v.X[(506832829 * N & 4294967295) >>> v.Mb] = N;\n          } else {\n            if (!(N < g)) break t;\n            for (w = N - 280, e(null != v); d < f;) N = r[d++], v.X[(506832829 * N & 4294967295) >>> v.Mb] = N;\n            N = f, e(!(w >>> (_ = v).Xa)), r[N] = _.X[w], w = !0;\n          }\n          w || e(h.h == A(h));\n        }\n        if (t.Pb && h.h && f < a) e(t.m.h), t.a = 5, t.m = t.wd, t.$ = t.xd, 0 < t.s.ua && B(t.s.vb, t.s.Wa);else {\n          if (h.h) break t;\n          null != s && s(t, c > o ? o : c), t.a = 0, t.$ = f - n;\n        }\n        return 1;\n      }\n      return t.a = 3, 0;\n    }\n    function Pt(t) {\n      e(null != t), t.vc = null, t.yc = null, t.Ya = null;\n      var r = t.Wa;\n      null != r && (r.X = null), t.vb = null, e(null != t);\n    }\n    function kt() {\n      var e = new or();\n      return null == e ? null : (e.a = 0, e.xb = gi, rt(\"Predictor\", \"VP8LPredictors\"), rt(\"Predictor\", \"VP8LPredictors_C\"), rt(\"PredictorAdd\", \"VP8LPredictorsAdd\"), rt(\"PredictorAdd\", \"VP8LPredictorsAdd_C\"), Gr = G, $r = J, Qr = K, tn = Z, en = $, rn = Q, nn = tt, t.VP8LMapColor32b = Jr, t.VP8LMapColor8b = Kr, e);\n    }\n    function It(t, r, n, s, c) {\n      var u = 1,\n        f = [t],\n        p = [r],\n        g = s.m,\n        m = s.s,\n        v = null,\n        b = 0;\n      t: for (;;) {\n        if (n) for (; u && y(g, 1);) {\n          var w = f,\n            N = p,\n            A = s,\n            _ = 1,\n            P = A.m,\n            k = A.gc[A.ab],\n            I = y(P, 2);\n          if (A.Oc & 1 << I) u = 0;else {\n            switch (A.Oc |= 1 << I, k.hc = I, k.Ea = w[0], k.nc = N[0], k.K = [null], ++A.ab, e(4 >= A.ab), I) {\n              case 0:\n              case 1:\n                k.b = y(P, 3) + 2, _ = It(q(k.Ea, k.b), q(k.nc, k.b), 0, A, k.K), k.K = k.K[0];\n                break;\n              case 3:\n                var F,\n                  C = y(P, 8) + 1,\n                  j = 16 < C ? 0 : 4 < C ? 1 : 2 < C ? 2 : 3;\n                if (w[0] = q(k.Ea, j), k.b = j, F = _ = It(C, 1, 0, A, k.K)) {\n                  var B,\n                    M = C,\n                    E = k,\n                    R = 1 << (8 >> E.b),\n                    T = a(R);\n                  if (null == T) F = 0;else {\n                    var U = E.K[0],\n                      z = E.w;\n                    for (T[0] = E.K[0][0], B = 1; B < 1 * M; ++B) T[B] = D(U[z + B], T[B - 1]);\n                    for (; B < 4 * R; ++B) T[B] = 0;\n                    E.K[0] = null, E.K[0] = T, F = 1;\n                  }\n                }\n                _ = F;\n                break;\n              case 2:\n                break;\n              default:\n                e(0);\n            }\n            u = _;\n          }\n        }\n        if (f = f[0], p = p[0], u && y(g, 1) && !(u = 1 <= (b = y(g, 4)) && 11 >= b)) {\n          s.a = 3;\n          break t;\n        }\n        var H;\n        if (H = u) e: {\n          var W,\n            V,\n            G,\n            Y = s,\n            J = f,\n            X = p,\n            K = b,\n            Z = n,\n            $ = Y.m,\n            Q = Y.s,\n            tt = [null],\n            et = 1,\n            rt = 0,\n            nt = Qn[K];\n          r: for (;;) {\n            if (Z && y($, 1)) {\n              var it = y($, 3) + 2,\n                at = q(J, it),\n                ot = q(X, it),\n                st = at * ot;\n              if (!It(at, ot, 0, Y, tt)) break r;\n              for (tt = tt[0], Q.xc = it, W = 0; W < st; ++W) {\n                var ct = tt[W] >> 8 & 65535;\n                tt[W] = ct, ct >= et && (et = ct + 1);\n              }\n            }\n            if ($.h) break r;\n            for (V = 0; 5 > V; ++V) {\n              var ut = Xn[V];\n              !V && 0 < K && (ut += 1 << K), rt < ut && (rt = ut);\n            }\n            var ht = o(et * nt, l),\n              lt = et,\n              ft = o(lt, d);\n            if (null == ft) var dt = null;else e(65536 >= lt), dt = ft;\n            var pt = a(rt);\n            if (null == dt || null == pt || null == ht) {\n              Y.a = 1;\n              break r;\n            }\n            var gt = ht;\n            for (W = G = 0; W < et; ++W) {\n              var mt = dt[W],\n                vt = mt.G,\n                bt = mt.H,\n                wt = 0,\n                Nt = 1,\n                Lt = 0;\n              for (V = 0; 5 > V; ++V) {\n                ut = Xn[V], vt[V] = gt, bt[V] = G, !V && 0 < K && (ut += 1 << K);\n                n: {\n                  var At,\n                    xt = ut,\n                    St = Y,\n                    kt = pt,\n                    Ft = gt,\n                    Ct = G,\n                    jt = 0,\n                    Ot = St.m,\n                    Bt = y(Ot, 1);\n                  if (i(kt, 0, 0, xt), Bt) {\n                    var Mt = y(Ot, 1) + 1,\n                      Et = y(Ot, 1),\n                      qt = y(Ot, 0 == Et ? 1 : 8);\n                    kt[qt] = 1, 2 == Mt && (kt[qt = y(Ot, 8)] = 1);\n                    var Dt = 1;\n                  } else {\n                    var Rt = a(19),\n                      Tt = y(Ot, 4) + 4;\n                    if (19 < Tt) {\n                      St.a = 3;\n                      var Ut = 0;\n                      break n;\n                    }\n                    for (At = 0; At < Tt; ++At) Rt[Zn[At]] = y(Ot, 3);\n                    var zt = void 0,\n                      Ht = void 0,\n                      Wt = St,\n                      Vt = Rt,\n                      Gt = xt,\n                      Yt = kt,\n                      Jt = 0,\n                      Xt = Wt.m,\n                      Kt = 8,\n                      Zt = o(128, l);\n                    i: for (; h(Zt, 0, 7, Vt, 19);) {\n                      if (y(Xt, 1)) {\n                        var $t = 2 + 2 * y(Xt, 3);\n                        if ((zt = 2 + y(Xt, $t)) > Gt) break i;\n                      } else zt = Gt;\n                      for (Ht = 0; Ht < Gt && zt--;) {\n                        S(Xt);\n                        var Qt = Zt[0 + (127 & L(Xt))];\n                        x(Xt, Xt.u + Qt.g);\n                        var te = Qt.value;\n                        if (16 > te) Yt[Ht++] = te, 0 != te && (Kt = te);else {\n                          var ee = 16 == te,\n                            re = te - 16,\n                            ne = Jn[re],\n                            ie = y(Xt, Yn[re]) + ne;\n                          if (Ht + ie > Gt) break i;\n                          for (var ae = ee ? Kt : 0; 0 < ie--;) Yt[Ht++] = ae;\n                        }\n                      }\n                      Jt = 1;\n                      break i;\n                    }\n                    Jt || (Wt.a = 3), Dt = Jt;\n                  }\n                  (Dt = Dt && !Ot.h) && (jt = h(Ft, Ct, 8, kt, xt)), Dt && 0 != jt ? Ut = jt : (St.a = 3, Ut = 0);\n                }\n                if (0 == Ut) break r;\n                if (Nt && 1 == Kn[V] && (Nt = 0 == gt[G].g), wt += gt[G].g, G += Ut, 3 >= V) {\n                  var oe,\n                    se = pt[0];\n                  for (oe = 1; oe < ut; ++oe) pt[oe] > se && (se = pt[oe]);\n                  Lt += se;\n                }\n              }\n              if (mt.nd = Nt, mt.Qb = 0, Nt && (mt.qb = (vt[3][bt[3] + 0].value << 24 | vt[1][bt[1] + 0].value << 16 | vt[2][bt[2] + 0].value) >>> 0, 0 == wt && 256 > vt[0][bt[0] + 0].value && (mt.Qb = 1, mt.qb += vt[0][bt[0] + 0].value << 8)), mt.jc = !mt.Qb && 6 > Lt, mt.jc) {\n                var ce,\n                  ue = mt;\n                for (ce = 0; ce < Dr; ++ce) {\n                  var he = ce,\n                    le = ue.pd[he],\n                    fe = ue.G[0][ue.H[0] + he];\n                  256 <= fe.value ? (le.g = fe.g + 256, le.value = fe.value) : (le.g = 0, le.value = 0, he >>= yt(fe, 8, le), he >>= yt(ue.G[1][ue.H[1] + he], 16, le), he >>= yt(ue.G[2][ue.H[2] + he], 0, le), yt(ue.G[3][ue.H[3] + he], 24, le));\n                }\n              }\n            }\n            Q.vc = tt, Q.Wb = et, Q.Ya = dt, Q.yc = ht, H = 1;\n            break e;\n          }\n          H = 0;\n        }\n        if (!(u = H)) {\n          s.a = 3;\n          break t;\n        }\n        if (0 < b) {\n          if (m.ua = 1 << b, !O(m.Wa, b)) {\n            s.a = 1, u = 0;\n            break t;\n          }\n        } else m.ua = 0;\n        var de = s,\n          pe = f,\n          ge = p,\n          me = de.s,\n          ve = me.xc;\n        if (de.c = pe, de.i = ge, me.md = q(pe, ve), me.wc = 0 == ve ? -1 : (1 << ve) - 1, n) {\n          s.xb = pi;\n          break t;\n        }\n        if (null == (v = a(f * p))) {\n          s.a = 1, u = 0;\n          break t;\n        }\n        u = (u = _t(s, v, 0, f, p, p, null)) && !g.h;\n        break t;\n      }\n      return u ? (null != c ? c[0] = v : (e(null == v), e(n)), s.$ = 0, n || Pt(m)) : Pt(m), u;\n    }\n    function Ft(t, r) {\n      var n = t.c * t.i,\n        i = n + r + 16 * r;\n      return e(t.c <= r), t.V = a(i), null == t.V ? (t.Ta = null, t.Ua = 0, t.a = 1, 0) : (t.Ta = t.V, t.Ua = t.Ba + n + r, 1);\n    }\n    function Ct(t, r) {\n      var n = t.C,\n        i = r - n,\n        a = t.V,\n        o = t.Ba + t.c * n;\n      for (e(r <= t.l.o); 0 < i;) {\n        var s = 16 < i ? 16 : i,\n          c = t.l.ma,\n          u = t.l.width,\n          h = u * s,\n          l = c.ca,\n          f = c.tb + u * n,\n          d = t.Ta,\n          p = t.Ua;\n        Nt(t, s, a, o), _n(d, p, l, f, h), xt(c, n, n + s, l, f, u), i -= s, a += s * t.c, n += s;\n      }\n      e(n == r), t.C = t.Ma = r;\n    }\n    function jt() {\n      this.ub = this.yd = this.td = this.Rb = 0;\n    }\n    function Ot() {\n      this.Kd = this.Ld = this.Ud = this.Td = this.i = this.c = 0;\n    }\n    function Bt() {\n      this.Fb = this.Bb = this.Cb = 0, this.Zb = a(4), this.Lb = a(4);\n    }\n    function Mt() {\n      this.Yb = function () {\n        var t = [];\n        return function t(e, r, n) {\n          for (var i = n[r], a = 0; a < i && (e.push(n.length > r + 1 ? [] : 0), !(n.length < r + 1)); a++) t(e[a], r + 1, n);\n        }(t, 0, [3, 11]), t;\n      }();\n    }\n    function Et() {\n      this.jb = a(3), this.Wc = s([4, 8], Mt), this.Xc = s([4, 17], Mt);\n    }\n    function qt() {\n      this.Pc = this.wb = this.Tb = this.zd = 0, this.vd = new a(4), this.od = new a(4);\n    }\n    function Dt() {\n      this.ld = this.La = this.dd = this.tc = 0;\n    }\n    function Rt() {\n      this.Na = this.la = 0;\n    }\n    function Tt() {\n      this.Sc = [0, 0], this.Eb = [0, 0], this.Qc = [0, 0], this.ia = this.lc = 0;\n    }\n    function Ut() {\n      this.ad = a(384), this.Za = 0, this.Ob = a(16), this.$b = this.Ad = this.ia = this.Gc = this.Hc = this.Dd = 0;\n    }\n    function zt() {\n      this.uc = this.M = this.Nb = 0, this.wa = Array(new Dt()), this.Y = 0, this.ya = Array(new Ut()), this.aa = 0, this.l = new Gt();\n    }\n    function Ht() {\n      this.y = a(16), this.f = a(8), this.ea = a(8);\n    }\n    function Wt() {\n      this.cb = this.a = 0, this.sc = \"\", this.m = new w(), this.Od = new jt(), this.Kc = new Ot(), this.ed = new qt(), this.Qa = new Bt(), this.Ic = this.$c = this.Aa = 0, this.D = new zt(), this.Xb = this.Va = this.Hb = this.zb = this.yb = this.Ub = this.za = 0, this.Jc = o(8, w), this.ia = 0, this.pb = o(4, Tt), this.Pa = new Et(), this.Bd = this.kc = 0, this.Ac = [], this.Bc = 0, this.zc = [0, 0, 0, 0], this.Gd = Array(new Ht()), this.Hd = 0, this.rb = Array(new Rt()), this.sb = 0, this.wa = Array(new Dt()), this.Y = 0, this.oc = [], this.pc = 0, this.sa = [], this.ta = 0, this.qa = [], this.ra = 0, this.Ha = [], this.B = this.R = this.Ia = 0, this.Ec = [], this.M = this.ja = this.Vb = this.Fc = 0, this.ya = Array(new Ut()), this.L = this.aa = 0, this.gd = s([4, 2], Dt), this.ga = null, this.Fa = [], this.Cc = this.qc = this.P = 0, this.Gb = [], this.Uc = 0, this.mb = [], this.nb = 0, this.rc = [], this.Ga = this.Vc = 0;\n    }\n    function Vt(t, e) {\n      return 0 > t ? 0 : t > e ? e : t;\n    }\n    function Gt() {\n      this.T = this.U = this.ka = this.height = this.width = 0, this.y = [], this.f = [], this.ea = [], this.Rc = this.fa = this.W = this.N = this.O = 0, this.ma = \"void\", this.put = \"VP8IoPutHook\", this.ac = \"VP8IoSetupHook\", this.bc = \"VP8IoTeardownHook\", this.ha = this.Kb = 0, this.data = [], this.hb = this.ib = this.da = this.o = this.j = this.va = this.v = this.Da = this.ob = this.w = 0, this.F = [], this.J = 0;\n    }\n    function Yt() {\n      var t = new Wt();\n      return null != t && (t.a = 0, t.sc = \"OK\", t.cb = 0, t.Xb = 0, ni || (ni = Zt)), t;\n    }\n    function Jt(t, e, r) {\n      return 0 == t.a && (t.a = e, t.sc = r, t.cb = 0), 0;\n    }\n    function Xt(t, e, r) {\n      return 3 <= r && 157 == t[e + 0] && 1 == t[e + 1] && 42 == t[e + 2];\n    }\n    function Kt(t, r) {\n      if (null == t) return 0;\n      if (t.a = 0, t.sc = \"OK\", null == r) return Jt(t, 2, \"null VP8Io passed to VP8GetHeaders()\");\n      var n = r.data,\n        a = r.w,\n        o = r.ha;\n      if (4 > o) return Jt(t, 7, \"Truncated header.\");\n      var s = n[a + 0] | n[a + 1] << 8 | n[a + 2] << 16,\n        c = t.Od;\n      if (c.Rb = !(1 & s), c.td = s >> 1 & 7, c.yd = s >> 4 & 1, c.ub = s >> 5, 3 < c.td) return Jt(t, 3, \"Incorrect keyframe parameters.\");\n      if (!c.yd) return Jt(t, 4, \"Frame not displayable.\");\n      a += 3, o -= 3;\n      var u = t.Kc;\n      if (c.Rb) {\n        if (7 > o) return Jt(t, 7, \"cannot parse picture header\");\n        if (!Xt(n, a, o)) return Jt(t, 3, \"Bad code word\");\n        u.c = 16383 & (n[a + 4] << 8 | n[a + 3]), u.Td = n[a + 4] >> 6, u.i = 16383 & (n[a + 6] << 8 | n[a + 5]), u.Ud = n[a + 6] >> 6, a += 7, o -= 7, t.za = u.c + 15 >> 4, t.Ub = u.i + 15 >> 4, r.width = u.c, r.height = u.i, r.Da = 0, r.j = 0, r.v = 0, r.va = r.width, r.o = r.height, r.da = 0, r.ib = r.width, r.hb = r.height, r.U = r.width, r.T = r.height, i((s = t.Pa).jb, 0, 255, s.jb.length), e(null != (s = t.Qa)), s.Cb = 0, s.Bb = 0, s.Fb = 1, i(s.Zb, 0, 0, s.Zb.length), i(s.Lb, 0, 0, s.Lb);\n      }\n      if (c.ub > o) return Jt(t, 7, \"bad partition length\");\n      p(s = t.m, n, a, c.ub), a += c.ub, o -= c.ub, c.Rb && (u.Ld = P(s), u.Kd = P(s)), u = t.Qa;\n      var h,\n        l = t.Pa;\n      if (e(null != s), e(null != u), u.Cb = P(s), u.Cb) {\n        if (u.Bb = P(s), P(s)) {\n          for (u.Fb = P(s), h = 0; 4 > h; ++h) u.Zb[h] = P(s) ? m(s, 7) : 0;\n          for (h = 0; 4 > h; ++h) u.Lb[h] = P(s) ? m(s, 6) : 0;\n        }\n        if (u.Bb) for (h = 0; 3 > h; ++h) l.jb[h] = P(s) ? g(s, 8) : 255;\n      } else u.Bb = 0;\n      if (s.Ka) return Jt(t, 3, \"cannot parse segment header\");\n      if ((u = t.ed).zd = P(s), u.Tb = g(s, 6), u.wb = g(s, 3), u.Pc = P(s), u.Pc && P(s)) {\n        for (l = 0; 4 > l; ++l) P(s) && (u.vd[l] = m(s, 6));\n        for (l = 0; 4 > l; ++l) P(s) && (u.od[l] = m(s, 6));\n      }\n      if (t.L = 0 == u.Tb ? 0 : u.zd ? 1 : 2, s.Ka) return Jt(t, 3, \"cannot parse filter header\");\n      var f = o;\n      if (o = h = a, a = h + f, u = f, t.Xb = (1 << g(t.m, 2)) - 1, f < 3 * (l = t.Xb)) n = 7;else {\n        for (h += 3 * l, u -= 3 * l, f = 0; f < l; ++f) {\n          var d = n[o + 0] | n[o + 1] << 8 | n[o + 2] << 16;\n          d > u && (d = u), p(t.Jc[+f], n, h, d), h += d, u -= d, o += 3;\n        }\n        p(t.Jc[+l], n, h, u), n = h < a ? 0 : 5;\n      }\n      if (0 != n) return Jt(t, n, \"cannot parse partitions\");\n      for (n = g(h = t.m, 7), o = P(h) ? m(h, 4) : 0, a = P(h) ? m(h, 4) : 0, u = P(h) ? m(h, 4) : 0, l = P(h) ? m(h, 4) : 0, h = P(h) ? m(h, 4) : 0, f = t.Qa, d = 0; 4 > d; ++d) {\n        if (f.Cb) {\n          var v = f.Zb[d];\n          f.Fb || (v += n);\n        } else {\n          if (0 < d) {\n            t.pb[d] = t.pb[0];\n            continue;\n          }\n          v = n;\n        }\n        var b = t.pb[d];\n        b.Sc[0] = ei[Vt(v + o, 127)], b.Sc[1] = ri[Vt(v + 0, 127)], b.Eb[0] = 2 * ei[Vt(v + a, 127)], b.Eb[1] = 101581 * ri[Vt(v + u, 127)] >> 16, 8 > b.Eb[1] && (b.Eb[1] = 8), b.Qc[0] = ei[Vt(v + l, 117)], b.Qc[1] = ri[Vt(v + h, 127)], b.lc = v + h;\n      }\n      if (!c.Rb) return Jt(t, 4, \"Not a key frame.\");\n      for (P(s), c = t.Pa, n = 0; 4 > n; ++n) {\n        for (o = 0; 8 > o; ++o) for (a = 0; 3 > a; ++a) for (u = 0; 11 > u; ++u) l = k(s, ui[n][o][a][u]) ? g(s, 8) : si[n][o][a][u], c.Wc[n][o].Yb[a][u] = l;\n        for (o = 0; 17 > o; ++o) c.Xc[n][o] = c.Wc[n][hi[o]];\n      }\n      return t.kc = P(s), t.kc && (t.Bd = g(s, 8)), t.cb = 1;\n    }\n    function Zt(t, e, r, n, i, a, o) {\n      var s = e[i].Yb[r];\n      for (r = 0; 16 > i; ++i) {\n        if (!k(t, s[r + 0])) return i;\n        for (; !k(t, s[r + 1]);) if (s = e[++i].Yb[0], r = 0, 16 == i) return 16;\n        var c = e[i + 1].Yb;\n        if (k(t, s[r + 2])) {\n          var u = t,\n            h = 0;\n          if (k(u, (f = s)[(l = r) + 3])) {\n            if (k(u, f[l + 6])) {\n              for (s = 0, l = 2 * (h = k(u, f[l + 8])) + (f = k(u, f[l + 9 + h])), h = 0, f = ii[l]; f[s]; ++s) h += h + k(u, f[s]);\n              h += 3 + (8 << l);\n            } else k(u, f[l + 7]) ? (h = 7 + 2 * k(u, 165), h += k(u, 145)) : h = 5 + k(u, 159);\n          } else h = k(u, f[l + 4]) ? 3 + k(u, f[l + 5]) : 2;\n          s = c[2];\n        } else h = 1, s = c[1];\n        c = o + ai[i], 0 > (u = t).b && _(u);\n        var l,\n          f = u.b,\n          d = (l = u.Ca >> 1) - (u.I >> f) >> 31;\n        --u.b, u.Ca += d, u.Ca |= 1, u.I -= (l + 1 & d) << f, a[c] = ((h ^ d) - d) * n[(0 < i) + 0];\n      }\n      return 16;\n    }\n    function $t(t) {\n      var e = t.rb[t.sb - 1];\n      e.la = 0, e.Na = 0, i(t.zc, 0, 0, t.zc.length), t.ja = 0;\n    }\n    function Qt(t, r) {\n      if (null == t) return 0;\n      if (null == r) return Jt(t, 2, \"NULL VP8Io parameter in VP8Decode().\");\n      if (!t.cb && !Kt(t, r)) return 0;\n      if (e(t.cb), null == r.ac || r.ac(r)) {\n        r.ob && (t.L = 0);\n        var s = Ri[t.L];\n        if (2 == t.L ? (t.yb = 0, t.zb = 0) : (t.yb = r.v - s >> 4, t.zb = r.j - s >> 4, 0 > t.yb && (t.yb = 0), 0 > t.zb && (t.zb = 0)), t.Va = r.o + 15 + s >> 4, t.Hb = r.va + 15 + s >> 4, t.Hb > t.za && (t.Hb = t.za), t.Va > t.Ub && (t.Va = t.Ub), 0 < t.L) {\n          var c = t.ed;\n          for (s = 0; 4 > s; ++s) {\n            var u;\n            if (t.Qa.Cb) {\n              var h = t.Qa.Lb[s];\n              t.Qa.Fb || (h += c.Tb);\n            } else h = c.Tb;\n            for (u = 0; 1 >= u; ++u) {\n              var l = t.gd[s][u],\n                f = h;\n              if (c.Pc && (f += c.vd[0], u && (f += c.od[0])), 0 < (f = 0 > f ? 0 : 63 < f ? 63 : f)) {\n                var d = f;\n                0 < c.wb && (d = 4 < c.wb ? d >> 2 : d >> 1) > 9 - c.wb && (d = 9 - c.wb), 1 > d && (d = 1), l.dd = d, l.tc = 2 * f + d, l.ld = 40 <= f ? 2 : 15 <= f ? 1 : 0;\n              } else l.tc = 0;\n              l.La = u;\n            }\n          }\n        }\n        s = 0;\n      } else Jt(t, 6, \"Frame setup failed\"), s = t.a;\n      if (s = 0 == s) {\n        if (s) {\n          t.$c = 0, 0 < t.Aa || (t.Ic = Ui);\n          t: {\n            s = t.Ic;\n            c = 4 * (d = t.za);\n            var p = 32 * d,\n              g = d + 1,\n              m = 0 < t.L ? d * (0 < t.Aa ? 2 : 1) : 0,\n              v = (2 == t.Aa ? 2 : 1) * d;\n            if ((l = c + 832 + (u = 3 * (16 * s + Ri[t.L]) / 2 * p) + (h = null != t.Fa && 0 < t.Fa.length ? t.Kc.c * t.Kc.i : 0)) != l) s = 0;else {\n              if (l > t.Vb) {\n                if (t.Vb = 0, t.Ec = a(l), t.Fc = 0, null == t.Ec) {\n                  s = Jt(t, 1, \"no memory during frame initialization.\");\n                  break t;\n                }\n                t.Vb = l;\n              }\n              l = t.Ec, f = t.Fc, t.Ac = l, t.Bc = f, f += c, t.Gd = o(p, Ht), t.Hd = 0, t.rb = o(g + 1, Rt), t.sb = 1, t.wa = m ? o(m, Dt) : null, t.Y = 0, t.D.Nb = 0, t.D.wa = t.wa, t.D.Y = t.Y, 0 < t.Aa && (t.D.Y += d), e(!0), t.oc = l, t.pc = f, f += 832, t.ya = o(v, Ut), t.aa = 0, t.D.ya = t.ya, t.D.aa = t.aa, 2 == t.Aa && (t.D.aa += d), t.R = 16 * d, t.B = 8 * d, d = (p = Ri[t.L]) * t.R, p = p / 2 * t.B, t.sa = l, t.ta = f + d, t.qa = t.sa, t.ra = t.ta + 16 * s * t.R + p, t.Ha = t.qa, t.Ia = t.ra + 8 * s * t.B + p, t.$c = 0, f += u, t.mb = h ? l : null, t.nb = h ? f : null, e(f + h <= t.Fc + t.Vb), $t(t), i(t.Ac, t.Bc, 0, c), s = 1;\n            }\n          }\n          if (s) {\n            if (r.ka = 0, r.y = t.sa, r.O = t.ta, r.f = t.qa, r.N = t.ra, r.ea = t.Ha, r.Vd = t.Ia, r.fa = t.R, r.Rc = t.B, r.F = null, r.J = 0, !Cn) {\n              for (s = -255; 255 >= s; ++s) Pn[255 + s] = 0 > s ? -s : s;\n              for (s = -1020; 1020 >= s; ++s) kn[1020 + s] = -128 > s ? -128 : 127 < s ? 127 : s;\n              for (s = -112; 112 >= s; ++s) In[112 + s] = -16 > s ? -16 : 15 < s ? 15 : s;\n              for (s = -255; 510 >= s; ++s) Fn[255 + s] = 0 > s ? 0 : 255 < s ? 255 : s;\n              Cn = 1;\n            }\n            an = ue, on = ae, cn = oe, un = se, hn = ce, sn = ie, ln = Je, fn = Xe, dn = $e, pn = Qe, gn = Ke, mn = Ze, vn = tr, bn = er, yn = ze, wn = He, Nn = We, Ln = Ve, fi[0] = xe, fi[1] = le, fi[2] = Le, fi[3] = Ae, fi[4] = Se, fi[5] = Pe, fi[6] = _e, fi[7] = ke, fi[8] = Fe, fi[9] = Ie, li[0] = ve, li[1] = de, li[2] = pe, li[3] = ge, li[4] = be, li[5] = ye, li[6] = we, di[0] = Be, di[1] = fe, di[2] = Ce, di[3] = je, di[4] = Ee, di[5] = Me, di[6] = qe, s = 1;\n          } else s = 0;\n        }\n        s && (s = function (t, r) {\n          for (t.M = 0; t.M < t.Va; ++t.M) {\n            var o,\n              s = t.Jc[t.M & t.Xb],\n              c = t.m,\n              u = t;\n            for (o = 0; o < u.za; ++o) {\n              var h = c,\n                l = u,\n                f = l.Ac,\n                d = l.Bc + 4 * o,\n                p = l.zc,\n                g = l.ya[l.aa + o];\n              if (l.Qa.Bb ? g.$b = k(h, l.Pa.jb[0]) ? 2 + k(h, l.Pa.jb[2]) : k(h, l.Pa.jb[1]) : g.$b = 0, l.kc && (g.Ad = k(h, l.Bd)), g.Za = !k(h, 145) + 0, g.Za) {\n                var m = g.Ob,\n                  v = 0;\n                for (l = 0; 4 > l; ++l) {\n                  var b,\n                    y = p[0 + l];\n                  for (b = 0; 4 > b; ++b) {\n                    y = ci[f[d + b]][y];\n                    for (var w = oi[k(h, y[0])]; 0 < w;) w = oi[2 * w + k(h, y[w])];\n                    y = -w, f[d + b] = y;\n                  }\n                  n(m, v, f, d, 4), v += 4, p[0 + l] = y;\n                }\n              } else y = k(h, 156) ? k(h, 128) ? 1 : 3 : k(h, 163) ? 2 : 0, g.Ob[0] = y, i(f, d, y, 4), i(p, 0, y, 4);\n              g.Dd = k(h, 142) ? k(h, 114) ? k(h, 183) ? 1 : 3 : 2 : 0;\n            }\n            if (u.m.Ka) return Jt(t, 7, \"Premature end-of-partition0 encountered.\");\n            for (; t.ja < t.za; ++t.ja) {\n              if (u = s, h = (c = t).rb[c.sb - 1], f = c.rb[c.sb + c.ja], o = c.ya[c.aa + c.ja], d = c.kc ? o.Ad : 0) h.la = f.la = 0, o.Za || (h.Na = f.Na = 0), o.Hc = 0, o.Gc = 0, o.ia = 0;else {\n                var N, L;\n                h = f, f = u, d = c.Pa.Xc, p = c.ya[c.aa + c.ja], g = c.pb[p.$b];\n                if (l = p.ad, m = 0, v = c.rb[c.sb - 1], y = b = 0, i(l, m, 0, 384), p.Za) var A = 0,\n                  x = d[3];else {\n                  w = a(16);\n                  var S = h.Na + v.Na;\n                  if (S = ni(f, d[1], S, g.Eb, 0, w, 0), h.Na = v.Na = (0 < S) + 0, 1 < S) an(w, 0, l, m);else {\n                    var _ = w[0] + 3 >> 3;\n                    for (w = 0; 256 > w; w += 16) l[m + w] = _;\n                  }\n                  A = 1, x = d[0];\n                }\n                var P = 15 & h.la,\n                  I = 15 & v.la;\n                for (w = 0; 4 > w; ++w) {\n                  var F = 1 & I;\n                  for (_ = L = 0; 4 > _; ++_) P = P >> 1 | (F = (S = ni(f, x, S = F + (1 & P), g.Sc, A, l, m)) > A) << 7, L = L << 2 | (3 < S ? 3 : 1 < S ? 2 : 0 != l[m + 0]), m += 16;\n                  P >>= 4, I = I >> 1 | F << 7, b = (b << 8 | L) >>> 0;\n                }\n                for (x = P, A = I >> 4, N = 0; 4 > N; N += 2) {\n                  for (L = 0, P = h.la >> 4 + N, I = v.la >> 4 + N, w = 0; 2 > w; ++w) {\n                    for (F = 1 & I, _ = 0; 2 > _; ++_) S = F + (1 & P), P = P >> 1 | (F = 0 < (S = ni(f, d[2], S, g.Qc, 0, l, m))) << 3, L = L << 2 | (3 < S ? 3 : 1 < S ? 2 : 0 != l[m + 0]), m += 16;\n                    P >>= 2, I = I >> 1 | F << 5;\n                  }\n                  y |= L << 4 * N, x |= P << 4 << N, A |= (240 & I) << N;\n                }\n                h.la = x, v.la = A, p.Hc = b, p.Gc = y, p.ia = 43690 & y ? 0 : g.ia, d = !(b | y);\n              }\n              if (0 < c.L && (c.wa[c.Y + c.ja] = c.gd[o.$b][o.Za], c.wa[c.Y + c.ja].La |= !d), u.Ka) return Jt(t, 7, \"Premature end-of-file encountered.\");\n            }\n            if ($t(t), c = r, u = 1, o = (s = t).D, h = 0 < s.L && s.M >= s.zb && s.M <= s.Va, 0 == s.Aa) t: {\n              if (o.M = s.M, o.uc = h, Or(s, o), u = 1, o = (L = s.D).Nb, h = (y = Ri[s.L]) * s.R, f = y / 2 * s.B, w = 16 * o * s.R, _ = 8 * o * s.B, d = s.sa, p = s.ta - h + w, g = s.qa, l = s.ra - f + _, m = s.Ha, v = s.Ia - f + _, I = 0 == (P = L.M), b = P >= s.Va - 1, 2 == s.Aa && Or(s, L), L.uc) for (F = (S = s).D.M, e(S.D.uc), L = S.yb; L < S.Hb; ++L) {\n                A = L, x = F;\n                var C = (j = (U = S).D).Nb;\n                N = U.R;\n                var j = j.wa[j.Y + A],\n                  O = U.sa,\n                  B = U.ta + 16 * C * N + 16 * A,\n                  M = j.dd,\n                  E = j.tc;\n                if (0 != E) if (e(3 <= E), 1 == U.L) 0 < A && wn(O, B, N, E + 4), j.La && Ln(O, B, N, E), 0 < x && yn(O, B, N, E + 4), j.La && Nn(O, B, N, E);else {\n                  var q = U.B,\n                    D = U.qa,\n                    R = U.ra + 8 * C * q + 8 * A,\n                    T = U.Ha,\n                    U = U.Ia + 8 * C * q + 8 * A;\n                  C = j.ld;\n                  0 < A && (fn(O, B, N, E + 4, M, C), pn(D, R, T, U, q, E + 4, M, C)), j.La && (mn(O, B, N, E, M, C), bn(D, R, T, U, q, E, M, C)), 0 < x && (ln(O, B, N, E + 4, M, C), dn(D, R, T, U, q, E + 4, M, C)), j.La && (gn(O, B, N, E, M, C), vn(D, R, T, U, q, E, M, C));\n                }\n              }\n              if (s.ia && alert(\"todo:DitherRow\"), null != c.put) {\n                if (L = 16 * P, P = 16 * (P + 1), I ? (c.y = s.sa, c.O = s.ta + w, c.f = s.qa, c.N = s.ra + _, c.ea = s.Ha, c.W = s.Ia + _) : (L -= y, c.y = d, c.O = p, c.f = g, c.N = l, c.ea = m, c.W = v), b || (P -= y), P > c.o && (P = c.o), c.F = null, c.J = null, null != s.Fa && 0 < s.Fa.length && L < P && (c.J = lr(s, c, L, P - L), c.F = s.mb, null == c.F && 0 == c.F.length)) {\n                  u = Jt(s, 3, \"Could not decode alpha data.\");\n                  break t;\n                }\n                L < c.j && (y = c.j - L, L = c.j, e(!(1 & y)), c.O += s.R * y, c.N += s.B * (y >> 1), c.W += s.B * (y >> 1), null != c.F && (c.J += c.width * y)), L < P && (c.O += c.v, c.N += c.v >> 1, c.W += c.v >> 1, null != c.F && (c.J += c.v), c.ka = L - c.j, c.U = c.va - c.v, c.T = P - L, u = c.put(c));\n              }\n              o + 1 != s.Ic || b || (n(s.sa, s.ta - h, d, p + 16 * s.R, h), n(s.qa, s.ra - f, g, l + 8 * s.B, f), n(s.Ha, s.Ia - f, m, v + 8 * s.B, f));\n            }\n            if (!u) return Jt(t, 6, \"Output aborted.\");\n          }\n          return 1;\n        }(t, r)), null != r.bc && r.bc(r), s &= 1;\n      }\n      return s ? (t.cb = 0, s) : 0;\n    }\n    function te(t, e, r, n, i) {\n      i = t[e + r + 32 * n] + (i >> 3), t[e + r + 32 * n] = -256 & i ? 0 > i ? 0 : 255 : i;\n    }\n    function ee(t, e, r, n, i, a) {\n      te(t, e, 0, r, n + i), te(t, e, 1, r, n + a), te(t, e, 2, r, n - a), te(t, e, 3, r, n - i);\n    }\n    function re(t) {\n      return (20091 * t >> 16) + t;\n    }\n    function ne(t, e, r, n) {\n      var i,\n        o = 0,\n        s = a(16);\n      for (i = 0; 4 > i; ++i) {\n        var c = t[e + 0] + t[e + 8],\n          u = t[e + 0] - t[e + 8],\n          h = (35468 * t[e + 4] >> 16) - re(t[e + 12]),\n          l = re(t[e + 4]) + (35468 * t[e + 12] >> 16);\n        s[o + 0] = c + l, s[o + 1] = u + h, s[o + 2] = u - h, s[o + 3] = c - l, o += 4, e++;\n      }\n      for (i = o = 0; 4 > i; ++i) c = (t = s[o + 0] + 4) + s[o + 8], u = t - s[o + 8], h = (35468 * s[o + 4] >> 16) - re(s[o + 12]), te(r, n, 0, 0, c + (l = re(s[o + 4]) + (35468 * s[o + 12] >> 16))), te(r, n, 1, 0, u + h), te(r, n, 2, 0, u - h), te(r, n, 3, 0, c - l), o++, n += 32;\n    }\n    function ie(t, e, r, n) {\n      var i = t[e + 0] + 4,\n        a = 35468 * t[e + 4] >> 16,\n        o = re(t[e + 4]),\n        s = 35468 * t[e + 1] >> 16;\n      ee(r, n, 0, i + o, t = re(t[e + 1]), s), ee(r, n, 1, i + a, t, s), ee(r, n, 2, i - a, t, s), ee(r, n, 3, i - o, t, s);\n    }\n    function ae(t, e, r, n, i) {\n      ne(t, e, r, n), i && ne(t, e + 16, r, n + 4);\n    }\n    function oe(t, e, r, n) {\n      on(t, e + 0, r, n, 1), on(t, e + 32, r, n + 128, 1);\n    }\n    function se(t, e, r, n) {\n      var i;\n      for (t = t[e + 0] + 4, i = 0; 4 > i; ++i) for (e = 0; 4 > e; ++e) te(r, n, e, i, t);\n    }\n    function ce(t, e, r, n) {\n      t[e + 0] && un(t, e + 0, r, n), t[e + 16] && un(t, e + 16, r, n + 4), t[e + 32] && un(t, e + 32, r, n + 128), t[e + 48] && un(t, e + 48, r, n + 128 + 4);\n    }\n    function ue(t, e, r, n) {\n      var i,\n        o = a(16);\n      for (i = 0; 4 > i; ++i) {\n        var s = t[e + 0 + i] + t[e + 12 + i],\n          c = t[e + 4 + i] + t[e + 8 + i],\n          u = t[e + 4 + i] - t[e + 8 + i],\n          h = t[e + 0 + i] - t[e + 12 + i];\n        o[0 + i] = s + c, o[8 + i] = s - c, o[4 + i] = h + u, o[12 + i] = h - u;\n      }\n      for (i = 0; 4 > i; ++i) s = (t = o[0 + 4 * i] + 3) + o[3 + 4 * i], c = o[1 + 4 * i] + o[2 + 4 * i], u = o[1 + 4 * i] - o[2 + 4 * i], h = t - o[3 + 4 * i], r[n + 0] = s + c >> 3, r[n + 16] = h + u >> 3, r[n + 32] = s - c >> 3, r[n + 48] = h - u >> 3, n += 64;\n    }\n    function he(t, e, r) {\n      var n,\n        i = e - 32,\n        a = Bn,\n        o = 255 - t[i - 1];\n      for (n = 0; n < r; ++n) {\n        var s,\n          c = a,\n          u = o + t[e - 1];\n        for (s = 0; s < r; ++s) t[e + s] = c[u + t[i + s]];\n        e += 32;\n      }\n    }\n    function le(t, e) {\n      he(t, e, 4);\n    }\n    function fe(t, e) {\n      he(t, e, 8);\n    }\n    function de(t, e) {\n      he(t, e, 16);\n    }\n    function pe(t, e) {\n      var r;\n      for (r = 0; 16 > r; ++r) n(t, e + 32 * r, t, e - 32, 16);\n    }\n    function ge(t, e) {\n      var r;\n      for (r = 16; 0 < r; --r) i(t, e, t[e - 1], 16), e += 32;\n    }\n    function me(t, e, r) {\n      var n;\n      for (n = 0; 16 > n; ++n) i(e, r + 32 * n, t, 16);\n    }\n    function ve(t, e) {\n      var r,\n        n = 16;\n      for (r = 0; 16 > r; ++r) n += t[e - 1 + 32 * r] + t[e + r - 32];\n      me(n >> 5, t, e);\n    }\n    function be(t, e) {\n      var r,\n        n = 8;\n      for (r = 0; 16 > r; ++r) n += t[e - 1 + 32 * r];\n      me(n >> 4, t, e);\n    }\n    function ye(t, e) {\n      var r,\n        n = 8;\n      for (r = 0; 16 > r; ++r) n += t[e + r - 32];\n      me(n >> 4, t, e);\n    }\n    function we(t, e) {\n      me(128, t, e);\n    }\n    function Ne(t, e, r) {\n      return t + 2 * e + r + 2 >> 2;\n    }\n    function Le(t, e) {\n      var r,\n        i = e - 32;\n      i = new Uint8Array([Ne(t[i - 1], t[i + 0], t[i + 1]), Ne(t[i + 0], t[i + 1], t[i + 2]), Ne(t[i + 1], t[i + 2], t[i + 3]), Ne(t[i + 2], t[i + 3], t[i + 4])]);\n      for (r = 0; 4 > r; ++r) n(t, e + 32 * r, i, 0, i.length);\n    }\n    function Ae(t, e) {\n      var r = t[e - 1],\n        n = t[e - 1 + 32],\n        i = t[e - 1 + 64],\n        a = t[e - 1 + 96];\n      I(t, e + 0, 16843009 * Ne(t[e - 1 - 32], r, n)), I(t, e + 32, 16843009 * Ne(r, n, i)), I(t, e + 64, 16843009 * Ne(n, i, a)), I(t, e + 96, 16843009 * Ne(i, a, a));\n    }\n    function xe(t, e) {\n      var r,\n        n = 4;\n      for (r = 0; 4 > r; ++r) n += t[e + r - 32] + t[e - 1 + 32 * r];\n      for (n >>= 3, r = 0; 4 > r; ++r) i(t, e + 32 * r, n, 4);\n    }\n    function Se(t, e) {\n      var r = t[e - 1 + 0],\n        n = t[e - 1 + 32],\n        i = t[e - 1 + 64],\n        a = t[e - 1 - 32],\n        o = t[e + 0 - 32],\n        s = t[e + 1 - 32],\n        c = t[e + 2 - 32],\n        u = t[e + 3 - 32];\n      t[e + 0 + 96] = Ne(n, i, t[e - 1 + 96]), t[e + 1 + 96] = t[e + 0 + 64] = Ne(r, n, i), t[e + 2 + 96] = t[e + 1 + 64] = t[e + 0 + 32] = Ne(a, r, n), t[e + 3 + 96] = t[e + 2 + 64] = t[e + 1 + 32] = t[e + 0 + 0] = Ne(o, a, r), t[e + 3 + 64] = t[e + 2 + 32] = t[e + 1 + 0] = Ne(s, o, a), t[e + 3 + 32] = t[e + 2 + 0] = Ne(c, s, o), t[e + 3 + 0] = Ne(u, c, s);\n    }\n    function _e(t, e) {\n      var r = t[e + 1 - 32],\n        n = t[e + 2 - 32],\n        i = t[e + 3 - 32],\n        a = t[e + 4 - 32],\n        o = t[e + 5 - 32],\n        s = t[e + 6 - 32],\n        c = t[e + 7 - 32];\n      t[e + 0 + 0] = Ne(t[e + 0 - 32], r, n), t[e + 1 + 0] = t[e + 0 + 32] = Ne(r, n, i), t[e + 2 + 0] = t[e + 1 + 32] = t[e + 0 + 64] = Ne(n, i, a), t[e + 3 + 0] = t[e + 2 + 32] = t[e + 1 + 64] = t[e + 0 + 96] = Ne(i, a, o), t[e + 3 + 32] = t[e + 2 + 64] = t[e + 1 + 96] = Ne(a, o, s), t[e + 3 + 64] = t[e + 2 + 96] = Ne(o, s, c), t[e + 3 + 96] = Ne(s, c, c);\n    }\n    function Pe(t, e) {\n      var r = t[e - 1 + 0],\n        n = t[e - 1 + 32],\n        i = t[e - 1 + 64],\n        a = t[e - 1 - 32],\n        o = t[e + 0 - 32],\n        s = t[e + 1 - 32],\n        c = t[e + 2 - 32],\n        u = t[e + 3 - 32];\n      t[e + 0 + 0] = t[e + 1 + 64] = a + o + 1 >> 1, t[e + 1 + 0] = t[e + 2 + 64] = o + s + 1 >> 1, t[e + 2 + 0] = t[e + 3 + 64] = s + c + 1 >> 1, t[e + 3 + 0] = c + u + 1 >> 1, t[e + 0 + 96] = Ne(i, n, r), t[e + 0 + 64] = Ne(n, r, a), t[e + 0 + 32] = t[e + 1 + 96] = Ne(r, a, o), t[e + 1 + 32] = t[e + 2 + 96] = Ne(a, o, s), t[e + 2 + 32] = t[e + 3 + 96] = Ne(o, s, c), t[e + 3 + 32] = Ne(s, c, u);\n    }\n    function ke(t, e) {\n      var r = t[e + 0 - 32],\n        n = t[e + 1 - 32],\n        i = t[e + 2 - 32],\n        a = t[e + 3 - 32],\n        o = t[e + 4 - 32],\n        s = t[e + 5 - 32],\n        c = t[e + 6 - 32],\n        u = t[e + 7 - 32];\n      t[e + 0 + 0] = r + n + 1 >> 1, t[e + 1 + 0] = t[e + 0 + 64] = n + i + 1 >> 1, t[e + 2 + 0] = t[e + 1 + 64] = i + a + 1 >> 1, t[e + 3 + 0] = t[e + 2 + 64] = a + o + 1 >> 1, t[e + 0 + 32] = Ne(r, n, i), t[e + 1 + 32] = t[e + 0 + 96] = Ne(n, i, a), t[e + 2 + 32] = t[e + 1 + 96] = Ne(i, a, o), t[e + 3 + 32] = t[e + 2 + 96] = Ne(a, o, s), t[e + 3 + 64] = Ne(o, s, c), t[e + 3 + 96] = Ne(s, c, u);\n    }\n    function Ie(t, e) {\n      var r = t[e - 1 + 0],\n        n = t[e - 1 + 32],\n        i = t[e - 1 + 64],\n        a = t[e - 1 + 96];\n      t[e + 0 + 0] = r + n + 1 >> 1, t[e + 2 + 0] = t[e + 0 + 32] = n + i + 1 >> 1, t[e + 2 + 32] = t[e + 0 + 64] = i + a + 1 >> 1, t[e + 1 + 0] = Ne(r, n, i), t[e + 3 + 0] = t[e + 1 + 32] = Ne(n, i, a), t[e + 3 + 32] = t[e + 1 + 64] = Ne(i, a, a), t[e + 3 + 64] = t[e + 2 + 64] = t[e + 0 + 96] = t[e + 1 + 96] = t[e + 2 + 96] = t[e + 3 + 96] = a;\n    }\n    function Fe(t, e) {\n      var r = t[e - 1 + 0],\n        n = t[e - 1 + 32],\n        i = t[e - 1 + 64],\n        a = t[e - 1 + 96],\n        o = t[e - 1 - 32],\n        s = t[e + 0 - 32],\n        c = t[e + 1 - 32],\n        u = t[e + 2 - 32];\n      t[e + 0 + 0] = t[e + 2 + 32] = r + o + 1 >> 1, t[e + 0 + 32] = t[e + 2 + 64] = n + r + 1 >> 1, t[e + 0 + 64] = t[e + 2 + 96] = i + n + 1 >> 1, t[e + 0 + 96] = a + i + 1 >> 1, t[e + 3 + 0] = Ne(s, c, u), t[e + 2 + 0] = Ne(o, s, c), t[e + 1 + 0] = t[e + 3 + 32] = Ne(r, o, s), t[e + 1 + 32] = t[e + 3 + 64] = Ne(n, r, o), t[e + 1 + 64] = t[e + 3 + 96] = Ne(i, n, r), t[e + 1 + 96] = Ne(a, i, n);\n    }\n    function Ce(t, e) {\n      var r;\n      for (r = 0; 8 > r; ++r) n(t, e + 32 * r, t, e - 32, 8);\n    }\n    function je(t, e) {\n      var r;\n      for (r = 0; 8 > r; ++r) i(t, e, t[e - 1], 8), e += 32;\n    }\n    function Oe(t, e, r) {\n      var n;\n      for (n = 0; 8 > n; ++n) i(e, r + 32 * n, t, 8);\n    }\n    function Be(t, e) {\n      var r,\n        n = 8;\n      for (r = 0; 8 > r; ++r) n += t[e + r - 32] + t[e - 1 + 32 * r];\n      Oe(n >> 4, t, e);\n    }\n    function Me(t, e) {\n      var r,\n        n = 4;\n      for (r = 0; 8 > r; ++r) n += t[e + r - 32];\n      Oe(n >> 3, t, e);\n    }\n    function Ee(t, e) {\n      var r,\n        n = 4;\n      for (r = 0; 8 > r; ++r) n += t[e - 1 + 32 * r];\n      Oe(n >> 3, t, e);\n    }\n    function qe(t, e) {\n      Oe(128, t, e);\n    }\n    function De(t, e, r) {\n      var n = t[e - r],\n        i = t[e + 0],\n        a = 3 * (i - n) + jn[1020 + t[e - 2 * r] - t[e + r]],\n        o = On[112 + (a + 4 >> 3)];\n      t[e - r] = Bn[255 + n + On[112 + (a + 3 >> 3)]], t[e + 0] = Bn[255 + i - o];\n    }\n    function Re(t, e, r, n) {\n      var i = t[e + 0],\n        a = t[e + r];\n      return Mn[255 + t[e - 2 * r] - t[e - r]] > n || Mn[255 + a - i] > n;\n    }\n    function Te(t, e, r, n) {\n      return 4 * Mn[255 + t[e - r] - t[e + 0]] + Mn[255 + t[e - 2 * r] - t[e + r]] <= n;\n    }\n    function Ue(t, e, r, n, i) {\n      var a = t[e - 3 * r],\n        o = t[e - 2 * r],\n        s = t[e - r],\n        c = t[e + 0],\n        u = t[e + r],\n        h = t[e + 2 * r],\n        l = t[e + 3 * r];\n      return 4 * Mn[255 + s - c] + Mn[255 + o - u] > n ? 0 : Mn[255 + t[e - 4 * r] - a] <= i && Mn[255 + a - o] <= i && Mn[255 + o - s] <= i && Mn[255 + l - h] <= i && Mn[255 + h - u] <= i && Mn[255 + u - c] <= i;\n    }\n    function ze(t, e, r, n) {\n      var i = 2 * n + 1;\n      for (n = 0; 16 > n; ++n) Te(t, e + n, r, i) && De(t, e + n, r);\n    }\n    function He(t, e, r, n) {\n      var i = 2 * n + 1;\n      for (n = 0; 16 > n; ++n) Te(t, e + n * r, 1, i) && De(t, e + n * r, 1);\n    }\n    function We(t, e, r, n) {\n      var i;\n      for (i = 3; 0 < i; --i) ze(t, e += 4 * r, r, n);\n    }\n    function Ve(t, e, r, n) {\n      var i;\n      for (i = 3; 0 < i; --i) He(t, e += 4, r, n);\n    }\n    function Ge(t, e, r, n, i, a, o, s) {\n      for (a = 2 * a + 1; 0 < i--;) {\n        if (Ue(t, e, r, a, o)) if (Re(t, e, r, s)) De(t, e, r);else {\n          var c = t,\n            u = e,\n            h = r,\n            l = c[u - 2 * h],\n            f = c[u - h],\n            d = c[u + 0],\n            p = c[u + h],\n            g = c[u + 2 * h],\n            m = 27 * (b = jn[1020 + 3 * (d - f) + jn[1020 + l - p]]) + 63 >> 7,\n            v = 18 * b + 63 >> 7,\n            b = 9 * b + 63 >> 7;\n          c[u - 3 * h] = Bn[255 + c[u - 3 * h] + b], c[u - 2 * h] = Bn[255 + l + v], c[u - h] = Bn[255 + f + m], c[u + 0] = Bn[255 + d - m], c[u + h] = Bn[255 + p - v], c[u + 2 * h] = Bn[255 + g - b];\n        }\n        e += n;\n      }\n    }\n    function Ye(t, e, r, n, i, a, o, s) {\n      for (a = 2 * a + 1; 0 < i--;) {\n        if (Ue(t, e, r, a, o)) if (Re(t, e, r, s)) De(t, e, r);else {\n          var c = t,\n            u = e,\n            h = r,\n            l = c[u - h],\n            f = c[u + 0],\n            d = c[u + h],\n            p = On[112 + ((g = 3 * (f - l)) + 4 >> 3)],\n            g = On[112 + (g + 3 >> 3)],\n            m = p + 1 >> 1;\n          c[u - 2 * h] = Bn[255 + c[u - 2 * h] + m], c[u - h] = Bn[255 + l + g], c[u + 0] = Bn[255 + f - p], c[u + h] = Bn[255 + d - m];\n        }\n        e += n;\n      }\n    }\n    function Je(t, e, r, n, i, a) {\n      Ge(t, e, r, 1, 16, n, i, a);\n    }\n    function Xe(t, e, r, n, i, a) {\n      Ge(t, e, 1, r, 16, n, i, a);\n    }\n    function Ke(t, e, r, n, i, a) {\n      var o;\n      for (o = 3; 0 < o; --o) Ye(t, e += 4 * r, r, 1, 16, n, i, a);\n    }\n    function Ze(t, e, r, n, i, a) {\n      var o;\n      for (o = 3; 0 < o; --o) Ye(t, e += 4, 1, r, 16, n, i, a);\n    }\n    function $e(t, e, r, n, i, a, o, s) {\n      Ge(t, e, i, 1, 8, a, o, s), Ge(r, n, i, 1, 8, a, o, s);\n    }\n    function Qe(t, e, r, n, i, a, o, s) {\n      Ge(t, e, 1, i, 8, a, o, s), Ge(r, n, 1, i, 8, a, o, s);\n    }\n    function tr(t, e, r, n, i, a, o, s) {\n      Ye(t, e + 4 * i, i, 1, 8, a, o, s), Ye(r, n + 4 * i, i, 1, 8, a, o, s);\n    }\n    function er(t, e, r, n, i, a, o, s) {\n      Ye(t, e + 4, 1, i, 8, a, o, s), Ye(r, n + 4, 1, i, 8, a, o, s);\n    }\n    function rr() {\n      this.ba = new ot(), this.ec = [], this.cc = [], this.Mc = [], this.Dc = this.Nc = this.dc = this.fc = 0, this.Oa = new ct(), this.memory = 0, this.Ib = \"OutputFunc\", this.Jb = \"OutputAlphaFunc\", this.Nd = \"OutputRowFunc\";\n    }\n    function nr() {\n      this.data = [], this.offset = this.kd = this.ha = this.w = 0, this.na = [], this.xa = this.gb = this.Ja = this.Sa = this.P = 0;\n    }\n    function ir() {\n      this.nc = this.Ea = this.b = this.hc = 0, this.K = [], this.w = 0;\n    }\n    function ar() {\n      this.ua = 0, this.Wa = new M(), this.vb = new M(), this.md = this.xc = this.wc = 0, this.vc = [], this.Wb = 0, this.Ya = new d(), this.yc = new l();\n    }\n    function or() {\n      this.xb = this.a = 0, this.l = new Gt(), this.ca = new ot(), this.V = [], this.Ba = 0, this.Ta = [], this.Ua = 0, this.m = new N(), this.Pb = 0, this.wd = new N(), this.Ma = this.$ = this.C = this.i = this.c = this.xd = 0, this.s = new ar(), this.ab = 0, this.gc = o(4, ir), this.Oc = 0;\n    }\n    function sr() {\n      this.Lc = this.Z = this.$a = this.i = this.c = 0, this.l = new Gt(), this.ic = 0, this.ca = [], this.tb = 0, this.qd = null, this.rd = 0;\n    }\n    function cr(t, e, r, n, i, a, o) {\n      for (t = null == t ? 0 : t[e + 0], e = 0; e < o; ++e) i[a + e] = t + r[n + e] & 255, t = i[a + e];\n    }\n    function ur(t, e, r, n, i, a, o) {\n      var s;\n      if (null == t) cr(null, null, r, n, i, a, o);else for (s = 0; s < o; ++s) i[a + s] = t[e + s] + r[n + s] & 255;\n    }\n    function hr(t, e, r, n, i, a, o) {\n      if (null == t) cr(null, null, r, n, i, a, o);else {\n        var s,\n          c = t[e + 0],\n          u = c,\n          h = c;\n        for (s = 0; s < o; ++s) u = h + (c = t[e + s]) - u, h = r[n + s] + (-256 & u ? 0 > u ? 0 : 255 : u) & 255, u = c, i[a + s] = h;\n      }\n    }\n    function lr(t, r, i, o) {\n      var s = r.width,\n        c = r.o;\n      if (e(null != t && null != r), 0 > i || 0 >= o || i + o > c) return null;\n      if (!t.Cc) {\n        if (null == t.ga) {\n          var u;\n          if (t.ga = new sr(), (u = null == t.ga) || (u = r.width * r.o, e(0 == t.Gb.length), t.Gb = a(u), t.Uc = 0, null == t.Gb ? u = 0 : (t.mb = t.Gb, t.nb = t.Uc, t.rc = null, u = 1), u = !u), !u) {\n            u = t.ga;\n            var h = t.Fa,\n              l = t.P,\n              f = t.qc,\n              d = t.mb,\n              p = t.nb,\n              g = l + 1,\n              m = f - 1,\n              b = u.l;\n            if (e(null != h && null != d && null != r), mi[0] = null, mi[1] = cr, mi[2] = ur, mi[3] = hr, u.ca = d, u.tb = p, u.c = r.width, u.i = r.height, e(0 < u.c && 0 < u.i), 1 >= f) r = 0;else if (u.$a = h[l + 0] >> 0 & 3, u.Z = h[l + 0] >> 2 & 3, u.Lc = h[l + 0] >> 4 & 3, l = h[l + 0] >> 6 & 3, 0 > u.$a || 1 < u.$a || 4 <= u.Z || 1 < u.Lc || l) r = 0;else if (b.put = dt, b.ac = ft, b.bc = pt, b.ma = u, b.width = r.width, b.height = r.height, b.Da = r.Da, b.v = r.v, b.va = r.va, b.j = r.j, b.o = r.o, u.$a) t: {\n              e(1 == u.$a), r = kt();\n              e: for (;;) {\n                if (null == r) {\n                  r = 0;\n                  break t;\n                }\n                if (e(null != u), u.mc = r, r.c = u.c, r.i = u.i, r.l = u.l, r.l.ma = u, r.l.width = u.c, r.l.height = u.i, r.a = 0, v(r.m, h, g, m), !It(u.c, u.i, 1, r, null)) break e;\n                if (1 == r.ab && 3 == r.gc[0].hc && At(r.s) ? (u.ic = 1, h = r.c * r.i, r.Ta = null, r.Ua = 0, r.V = a(h), r.Ba = 0, null == r.V ? (r.a = 1, r = 0) : r = 1) : (u.ic = 0, r = Ft(r, u.c)), !r) break e;\n                r = 1;\n                break t;\n              }\n              u.mc = null, r = 0;\n            } else r = m >= u.c * u.i;\n            u = !r;\n          }\n          if (u) return null;\n          1 != t.ga.Lc ? t.Ga = 0 : o = c - i;\n        }\n        e(null != t.ga), e(i + o <= c);\n        t: {\n          if (r = (h = t.ga).c, c = h.l.o, 0 == h.$a) {\n            if (g = t.rc, m = t.Vc, b = t.Fa, l = t.P + 1 + i * r, f = t.mb, d = t.nb + i * r, e(l <= t.P + t.qc), 0 != h.Z) for (e(null != mi[h.Z]), u = 0; u < o; ++u) mi[h.Z](g, m, b, l, f, d, r), g = f, m = d, d += r, l += r;else for (u = 0; u < o; ++u) n(f, d, b, l, r), g = f, m = d, d += r, l += r;\n            t.rc = g, t.Vc = m;\n          } else {\n            if (e(null != h.mc), r = i + o, e(null != (u = h.mc)), e(r <= u.i), u.C >= r) r = 1;else if (h.ic || mr(), h.ic) {\n              h = u.V, g = u.Ba, m = u.c;\n              var y = u.i,\n                w = (b = 1, l = u.$ / m, f = u.$ % m, d = u.m, p = u.s, u.$),\n                N = m * y,\n                L = m * r,\n                x = p.wc,\n                _ = w < L ? wt(p, f, l) : null;\n              e(w <= N), e(r <= y), e(At(p));\n              e: for (;;) {\n                for (; !d.h && w < L;) {\n                  if (f & x || (_ = wt(p, f, l)), e(null != _), S(d), 256 > (y = bt(_.G[0], _.H[0], d))) h[g + w] = y, ++w, ++f >= m && (f = 0, ++l <= r && !(l % 16) && St(u, l));else {\n                    if (!(280 > y)) {\n                      b = 0;\n                      break e;\n                    }\n                    y = mt(y - 256, d);\n                    var P,\n                      k = bt(_.G[4], _.H[4], d);\n                    if (S(d), !(w >= (k = vt(m, k = mt(k, d))) && N - w >= y)) {\n                      b = 0;\n                      break e;\n                    }\n                    for (P = 0; P < y; ++P) h[g + w + P] = h[g + w + P - k];\n                    for (w += y, f += y; f >= m;) f -= m, ++l <= r && !(l % 16) && St(u, l);\n                    w < L && f & x && (_ = wt(p, f, l));\n                  }\n                  e(d.h == A(d));\n                }\n                St(u, l > r ? r : l);\n                break e;\n              }\n              !b || d.h && w < N ? (b = 0, u.a = d.h ? 5 : 3) : u.$ = w, r = b;\n            } else r = _t(u, u.V, u.Ba, u.c, u.i, r, Ct);\n            if (!r) {\n              o = 0;\n              break t;\n            }\n          }\n          i + o >= c && (t.Cc = 1), o = 1;\n        }\n        if (!o) return null;\n        if (t.Cc && (null != (o = t.ga) && (o.mc = null), t.ga = null, 0 < t.Ga)) return alert(\"todo:WebPDequantizeLevels\"), null;\n      }\n      return t.nb + i * s;\n    }\n    function fr(t, e, r, n, i, a) {\n      for (; 0 < i--;) {\n        var o,\n          s = t,\n          c = e + (r ? 1 : 0),\n          u = t,\n          h = e + (r ? 0 : 3);\n        for (o = 0; o < n; ++o) {\n          var l = u[h + 4 * o];\n          255 != l && (l *= 32897, s[c + 4 * o + 0] = s[c + 4 * o + 0] * l >> 23, s[c + 4 * o + 1] = s[c + 4 * o + 1] * l >> 23, s[c + 4 * o + 2] = s[c + 4 * o + 2] * l >> 23);\n        }\n        e += a;\n      }\n    }\n    function dr(t, e, r, n, i) {\n      for (; 0 < n--;) {\n        var a;\n        for (a = 0; a < r; ++a) {\n          var o = t[e + 2 * a + 0],\n            s = 15 & (u = t[e + 2 * a + 1]),\n            c = 4369 * s,\n            u = (240 & u | u >> 4) * c >> 16;\n          t[e + 2 * a + 0] = (240 & o | o >> 4) * c >> 16 & 240 | (15 & o | o << 4) * c >> 16 >> 4 & 15, t[e + 2 * a + 1] = 240 & u | s;\n        }\n        e += i;\n      }\n    }\n    function pr(t, e, r, n, i, a, o, s) {\n      var c,\n        u,\n        h = 255;\n      for (u = 0; u < i; ++u) {\n        for (c = 0; c < n; ++c) {\n          var l = t[e + c];\n          a[o + 4 * c] = l, h &= l;\n        }\n        e += r, o += s;\n      }\n      return 255 != h;\n    }\n    function gr(t, e, r, n, i) {\n      var a;\n      for (a = 0; a < i; ++a) r[n + a] = t[e + a] >> 8;\n    }\n    function mr() {\n      An = fr, xn = dr, Sn = pr, _n = gr;\n    }\n    function vr(r, n, i) {\n      t[r] = function (t, r, a, o, s, c, u, h, l, f, d, p, g, m, v, b, y) {\n        var w,\n          N = y - 1 >> 1,\n          L = s[c + 0] | u[h + 0] << 16,\n          A = l[f + 0] | d[p + 0] << 16;\n        e(null != t);\n        var x = 3 * L + A + 131074 >> 2;\n        for (n(t[r + 0], 255 & x, x >> 16, g, m), null != a && (x = 3 * A + L + 131074 >> 2, n(a[o + 0], 255 & x, x >> 16, v, b)), w = 1; w <= N; ++w) {\n          var S = s[c + w] | u[h + w] << 16,\n            _ = l[f + w] | d[p + w] << 16,\n            P = L + S + A + _ + 524296,\n            k = P + 2 * (S + A) >> 3;\n          x = k + L >> 1, L = (P = P + 2 * (L + _) >> 3) + S >> 1, n(t[r + 2 * w - 1], 255 & x, x >> 16, g, m + (2 * w - 1) * i), n(t[r + 2 * w - 0], 255 & L, L >> 16, g, m + (2 * w - 0) * i), null != a && (x = P + A >> 1, L = k + _ >> 1, n(a[o + 2 * w - 1], 255 & x, x >> 16, v, b + (2 * w - 1) * i), n(a[o + 2 * w + 0], 255 & L, L >> 16, v, b + (2 * w + 0) * i)), L = S, A = _;\n        }\n        1 & y || (x = 3 * L + A + 131074 >> 2, n(t[r + y - 1], 255 & x, x >> 16, g, m + (y - 1) * i), null != a && (x = 3 * A + L + 131074 >> 2, n(a[o + y - 1], 255 & x, x >> 16, v, b + (y - 1) * i)));\n      };\n    }\n    function br() {\n      vi[En] = bi, vi[qn] = wi, vi[Dn] = yi, vi[Rn] = Ni, vi[Tn] = Li, vi[Un] = Ai, vi[zn] = xi, vi[Hn] = wi, vi[Wn] = Ni, vi[Vn] = Li, vi[Gn] = Ai;\n    }\n    function yr(t) {\n      return t & ~Fi ? 0 > t ? 0 : 255 : t >> Ii;\n    }\n    function wr(t, e) {\n      return yr((19077 * t >> 8) + (26149 * e >> 8) - 14234);\n    }\n    function Nr(t, e, r) {\n      return yr((19077 * t >> 8) - (6419 * e >> 8) - (13320 * r >> 8) + 8708);\n    }\n    function Lr(t, e) {\n      return yr((19077 * t >> 8) + (33050 * e >> 8) - 17685);\n    }\n    function Ar(t, e, r, n, i) {\n      n[i + 0] = wr(t, r), n[i + 1] = Nr(t, e, r), n[i + 2] = Lr(t, e);\n    }\n    function xr(t, e, r, n, i) {\n      n[i + 0] = Lr(t, e), n[i + 1] = Nr(t, e, r), n[i + 2] = wr(t, r);\n    }\n    function Sr(t, e, r, n, i) {\n      var a = Nr(t, e, r);\n      e = a << 3 & 224 | Lr(t, e) >> 3, n[i + 0] = 248 & wr(t, r) | a >> 5, n[i + 1] = e;\n    }\n    function _r(t, e, r, n, i) {\n      var a = 240 & Lr(t, e) | 15;\n      n[i + 0] = 240 & wr(t, r) | Nr(t, e, r) >> 4, n[i + 1] = a;\n    }\n    function Pr(t, e, r, n, i) {\n      n[i + 0] = 255, Ar(t, e, r, n, i + 1);\n    }\n    function kr(t, e, r, n, i) {\n      xr(t, e, r, n, i), n[i + 3] = 255;\n    }\n    function Ir(t, e, r, n, i) {\n      Ar(t, e, r, n, i), n[i + 3] = 255;\n    }\n    function Vt(t, e) {\n      return 0 > t ? 0 : t > e ? e : t;\n    }\n    function Fr(e, r, n) {\n      t[e] = function (t, e, i, a, o, s, c, u, h) {\n        for (var l = u + (-2 & h) * n; u != l;) r(t[e + 0], i[a + 0], o[s + 0], c, u), r(t[e + 1], i[a + 0], o[s + 0], c, u + n), e += 2, ++a, ++s, u += 2 * n;\n        1 & h && r(t[e + 0], i[a + 0], o[s + 0], c, u);\n      };\n    }\n    function Cr(t, e, r) {\n      return 0 == r ? 0 == t ? 0 == e ? 6 : 5 : 0 == e ? 4 : 0 : r;\n    }\n    function jr(t, e, r, n, i) {\n      switch (t >>> 30) {\n        case 3:\n          on(e, r, n, i, 0);\n          break;\n        case 2:\n          sn(e, r, n, i);\n          break;\n        case 1:\n          un(e, r, n, i);\n      }\n    }\n    function Or(t, e) {\n      var r,\n        a,\n        o = e.M,\n        s = e.Nb,\n        c = t.oc,\n        u = t.pc + 40,\n        h = t.oc,\n        l = t.pc + 584,\n        f = t.oc,\n        d = t.pc + 600;\n      for (r = 0; 16 > r; ++r) c[u + 32 * r - 1] = 129;\n      for (r = 0; 8 > r; ++r) h[l + 32 * r - 1] = 129, f[d + 32 * r - 1] = 129;\n      for (0 < o ? c[u - 1 - 32] = h[l - 1 - 32] = f[d - 1 - 32] = 129 : (i(c, u - 32 - 1, 127, 21), i(h, l - 32 - 1, 127, 9), i(f, d - 32 - 1, 127, 9)), a = 0; a < t.za; ++a) {\n        var p = e.ya[e.aa + a];\n        if (0 < a) {\n          for (r = -1; 16 > r; ++r) n(c, u + 32 * r - 4, c, u + 32 * r + 12, 4);\n          for (r = -1; 8 > r; ++r) n(h, l + 32 * r - 4, h, l + 32 * r + 4, 4), n(f, d + 32 * r - 4, f, d + 32 * r + 4, 4);\n        }\n        var g = t.Gd,\n          m = t.Hd + a,\n          v = p.ad,\n          b = p.Hc;\n        if (0 < o && (n(c, u - 32, g[m].y, 0, 16), n(h, l - 32, g[m].f, 0, 8), n(f, d - 32, g[m].ea, 0, 8)), p.Za) {\n          var y = c,\n            w = u - 32 + 16;\n          for (0 < o && (a >= t.za - 1 ? i(y, w, g[m].y[15], 4) : n(y, w, g[m + 1].y, 0, 4)), r = 0; 4 > r; r++) y[w + 128 + r] = y[w + 256 + r] = y[w + 384 + r] = y[w + 0 + r];\n          for (r = 0; 16 > r; ++r, b <<= 2) y = c, w = u + Di[r], fi[p.Ob[r]](y, w), jr(b, v, 16 * +r, y, w);\n        } else if (y = Cr(a, o, p.Ob[0]), li[y](c, u), 0 != b) for (r = 0; 16 > r; ++r, b <<= 2) jr(b, v, 16 * +r, c, u + Di[r]);\n        for (r = p.Gc, y = Cr(a, o, p.Dd), di[y](h, l), di[y](f, d), b = v, y = h, w = l, 255 & (p = r >> 0) && (170 & p ? cn(b, 256, y, w) : hn(b, 256, y, w)), p = f, b = d, 255 & (r >>= 8) && (170 & r ? cn(v, 320, p, b) : hn(v, 320, p, b)), o < t.Ub - 1 && (n(g[m].y, 0, c, u + 480, 16), n(g[m].f, 0, h, l + 224, 8), n(g[m].ea, 0, f, d + 224, 8)), r = 8 * s * t.B, g = t.sa, m = t.ta + 16 * a + 16 * s * t.R, v = t.qa, p = t.ra + 8 * a + r, b = t.Ha, y = t.Ia + 8 * a + r, r = 0; 16 > r; ++r) n(g, m + r * t.R, c, u + 32 * r, 16);\n        for (r = 0; 8 > r; ++r) n(v, p + r * t.B, h, l + 32 * r, 8), n(b, y + r * t.B, f, d + 32 * r, 8);\n      }\n    }\n    function Br(t, n, i, a, o, s, c, u, h) {\n      var l = [0],\n        f = [0],\n        d = 0,\n        p = null != h ? h.kd : 0,\n        g = null != h ? h : new nr();\n      if (null == t || 12 > i) return 7;\n      g.data = t, g.w = n, g.ha = i, n = [n], i = [i], g.gb = [g.gb];\n      t: {\n        var m = n,\n          b = i,\n          y = g.gb;\n        if (e(null != t), e(null != b), e(null != y), y[0] = 0, 12 <= b[0] && !r(t, m[0], \"RIFF\")) {\n          if (r(t, m[0] + 8, \"WEBP\")) {\n            y = 3;\n            break t;\n          }\n          var w = j(t, m[0] + 4);\n          if (12 > w || 4294967286 < w) {\n            y = 3;\n            break t;\n          }\n          if (p && w > b[0] - 8) {\n            y = 7;\n            break t;\n          }\n          y[0] = w, m[0] += 12, b[0] -= 12;\n        }\n        y = 0;\n      }\n      if (0 != y) return y;\n      for (w = 0 < g.gb[0], i = i[0];;) {\n        t: {\n          var L = t;\n          b = n, y = i;\n          var A = l,\n            x = f,\n            S = m = [0];\n          if ((k = d = [d])[0] = 0, 8 > y[0]) y = 7;else {\n            if (!r(L, b[0], \"VP8X\")) {\n              if (10 != j(L, b[0] + 4)) {\n                y = 3;\n                break t;\n              }\n              if (18 > y[0]) {\n                y = 7;\n                break t;\n              }\n              var _ = j(L, b[0] + 8),\n                P = 1 + C(L, b[0] + 12);\n              if (2147483648 <= P * (L = 1 + C(L, b[0] + 15))) {\n                y = 3;\n                break t;\n              }\n              null != S && (S[0] = _), null != A && (A[0] = P), null != x && (x[0] = L), b[0] += 18, y[0] -= 18, k[0] = 1;\n            }\n            y = 0;\n          }\n        }\n        if (d = d[0], m = m[0], 0 != y) return y;\n        if (b = !!(2 & m), !w && d) return 3;\n        if (null != s && (s[0] = !!(16 & m)), null != c && (c[0] = b), null != u && (u[0] = 0), c = l[0], m = f[0], d && b && null == h) {\n          y = 0;\n          break;\n        }\n        if (4 > i) {\n          y = 7;\n          break;\n        }\n        if (w && d || !w && !d && !r(t, n[0], \"ALPH\")) {\n          i = [i], g.na = [g.na], g.P = [g.P], g.Sa = [g.Sa];\n          t: {\n            _ = t, y = n, w = i;\n            var k = g.gb;\n            A = g.na, x = g.P, S = g.Sa;\n            P = 22, e(null != _), e(null != w), L = y[0];\n            var I = w[0];\n            for (e(null != A), e(null != S), A[0] = null, x[0] = null, S[0] = 0;;) {\n              if (y[0] = L, w[0] = I, 8 > I) {\n                y = 7;\n                break t;\n              }\n              var F = j(_, L + 4);\n              if (4294967286 < F) {\n                y = 3;\n                break t;\n              }\n              var O = 8 + F + 1 & -2;\n              if (P += O, 0 < k && P > k) {\n                y = 3;\n                break t;\n              }\n              if (!r(_, L, \"VP8 \") || !r(_, L, \"VP8L\")) {\n                y = 0;\n                break t;\n              }\n              if (I[0] < O) {\n                y = 7;\n                break t;\n              }\n              r(_, L, \"ALPH\") || (A[0] = _, x[0] = L + 8, S[0] = F), L += O, I -= O;\n            }\n          }\n          if (i = i[0], g.na = g.na[0], g.P = g.P[0], g.Sa = g.Sa[0], 0 != y) break;\n        }\n        i = [i], g.Ja = [g.Ja], g.xa = [g.xa];\n        t: if (k = t, y = n, w = i, A = g.gb[0], x = g.Ja, S = g.xa, _ = y[0], L = !r(k, _, \"VP8 \"), P = !r(k, _, \"VP8L\"), e(null != k), e(null != w), e(null != x), e(null != S), 8 > w[0]) y = 7;else {\n          if (L || P) {\n            if (k = j(k, _ + 4), 12 <= A && k > A - 12) {\n              y = 3;\n              break t;\n            }\n            if (p && k > w[0] - 8) {\n              y = 7;\n              break t;\n            }\n            x[0] = k, y[0] += 8, w[0] -= 8, S[0] = P;\n          } else S[0] = 5 <= w[0] && 47 == k[_ + 0] && !(k[_ + 4] >> 5), x[0] = w[0];\n          y = 0;\n        }\n        if (i = i[0], g.Ja = g.Ja[0], g.xa = g.xa[0], n = n[0], 0 != y) break;\n        if (4294967286 < g.Ja) return 3;\n        if (null == u || b || (u[0] = g.xa ? 2 : 1), c = [c], m = [m], g.xa) {\n          if (5 > i) {\n            y = 7;\n            break;\n          }\n          u = c, p = m, b = s, null == t || 5 > i ? t = 0 : 5 <= i && 47 == t[n + 0] && !(t[n + 4] >> 5) ? (w = [0], k = [0], A = [0], v(x = new N(), t, n, i), gt(x, w, k, A) ? (null != u && (u[0] = w[0]), null != p && (p[0] = k[0]), null != b && (b[0] = A[0]), t = 1) : t = 0) : t = 0;\n        } else {\n          if (10 > i) {\n            y = 7;\n            break;\n          }\n          u = m, null == t || 10 > i || !Xt(t, n + 3, i - 3) ? t = 0 : (p = t[n + 0] | t[n + 1] << 8 | t[n + 2] << 16, b = 16383 & (t[n + 7] << 8 | t[n + 6]), t = 16383 & (t[n + 9] << 8 | t[n + 8]), 1 & p || 3 < (p >> 1 & 7) || !(p >> 4 & 1) || p >> 5 >= g.Ja || !b || !t ? t = 0 : (c && (c[0] = b), u && (u[0] = t), t = 1));\n        }\n        if (!t) return 3;\n        if (c = c[0], m = m[0], d && (l[0] != c || f[0] != m)) return 3;\n        null != h && (h[0] = g, h.offset = n - h.w, e(4294967286 > n - h.w), e(h.offset == h.ha - i));\n        break;\n      }\n      return 0 == y || 7 == y && d && null == h ? (null != s && (s[0] |= null != g.na && 0 < g.na.length), null != a && (a[0] = c), null != o && (o[0] = m), 0) : y;\n    }\n    function Mr(t, e, r) {\n      var n = e.width,\n        i = e.height,\n        a = 0,\n        o = 0,\n        s = n,\n        c = i;\n      if (e.Da = null != t && 0 < t.Da, e.Da && (s = t.cd, c = t.bd, a = t.v, o = t.j, 11 > r || (a &= -2, o &= -2), 0 > a || 0 > o || 0 >= s || 0 >= c || a + s > n || o + c > i)) return 0;\n      if (e.v = a, e.j = o, e.va = a + s, e.o = o + c, e.U = s, e.T = c, e.da = null != t && 0 < t.da, e.da) {\n        if (!E(s, c, r = [t.ib], a = [t.hb])) return 0;\n        e.ib = r[0], e.hb = a[0];\n      }\n      return e.ob = null != t && t.ob, e.Kb = null == t || !t.Sd, e.da && (e.ob = e.ib < 3 * n / 4 && e.hb < 3 * i / 4, e.Kb = 0), 1;\n    }\n    function Er(t) {\n      if (null == t) return 2;\n      if (11 > t.S) {\n        var e = t.f.RGBA;\n        e.fb += (t.height - 1) * e.A, e.A = -e.A;\n      } else e = t.f.kb, t = t.height, e.O += (t - 1) * e.fa, e.fa = -e.fa, e.N += (t - 1 >> 1) * e.Ab, e.Ab = -e.Ab, e.W += (t - 1 >> 1) * e.Db, e.Db = -e.Db, null != e.F && (e.J += (t - 1) * e.lb, e.lb = -e.lb);\n      return 0;\n    }\n    function qr(t, e, r, n) {\n      if (null == n || 0 >= t || 0 >= e) return 2;\n      if (null != r) {\n        if (r.Da) {\n          var i = r.cd,\n            o = r.bd,\n            s = -2 & r.v,\n            c = -2 & r.j;\n          if (0 > s || 0 > c || 0 >= i || 0 >= o || s + i > t || c + o > e) return 2;\n          t = i, e = o;\n        }\n        if (r.da) {\n          if (!E(t, e, i = [r.ib], o = [r.hb])) return 2;\n          t = i[0], e = o[0];\n        }\n      }\n      n.width = t, n.height = e;\n      t: {\n        var u = n.width,\n          h = n.height;\n        if (t = n.S, 0 >= u || 0 >= h || !(t >= En && 13 > t)) t = 2;else {\n          if (0 >= n.Rd && null == n.sd) {\n            s = o = i = e = 0;\n            var l = (c = u * zi[t]) * h;\n            if (11 > t || (o = (h + 1) / 2 * (e = (u + 1) / 2), 12 == t && (s = (i = u) * h)), null == (h = a(l + 2 * o + s))) {\n              t = 1;\n              break t;\n            }\n            n.sd = h, 11 > t ? ((u = n.f.RGBA).eb = h, u.fb = 0, u.A = c, u.size = l) : ((u = n.f.kb).y = h, u.O = 0, u.fa = c, u.Fd = l, u.f = h, u.N = 0 + l, u.Ab = e, u.Cd = o, u.ea = h, u.W = 0 + l + o, u.Db = e, u.Ed = o, 12 == t && (u.F = h, u.J = 0 + l + 2 * o), u.Tc = s, u.lb = i);\n          }\n          if (e = 1, i = n.S, o = n.width, s = n.height, i >= En && 13 > i) {\n            if (11 > i) t = n.f.RGBA, e &= (c = Math.abs(t.A)) * (s - 1) + o <= t.size, e &= c >= o * zi[i], e &= null != t.eb;else {\n              t = n.f.kb, c = (o + 1) / 2, l = (s + 1) / 2, u = Math.abs(t.fa);\n              h = Math.abs(t.Ab);\n              var f = Math.abs(t.Db),\n                d = Math.abs(t.lb),\n                p = d * (s - 1) + o;\n              e &= u * (s - 1) + o <= t.Fd, e &= h * (l - 1) + c <= t.Cd, e = (e &= f * (l - 1) + c <= t.Ed) & u >= o & h >= c & f >= c, e &= null != t.y, e &= null != t.f, e &= null != t.ea, 12 == i && (e &= d >= o, e &= p <= t.Tc, e &= null != t.F);\n            }\n          } else e = 0;\n          t = e ? 0 : 2;\n        }\n      }\n      return 0 != t || null != r && r.fd && (t = Er(n)), t;\n    }\n    var Dr = 64,\n      Rr = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535, 131071, 262143, 524287, 1048575, 2097151, 4194303, 8388607, 16777215],\n      Tr = 24,\n      Ur = 32,\n      zr = 8,\n      Hr = [0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7];\n    R(\"Predictor0\", \"PredictorAdd0\"), t.Predictor0 = function () {\n      return 4278190080;\n    }, t.Predictor1 = function (t) {\n      return t;\n    }, t.Predictor2 = function (t, e, r) {\n      return e[r + 0];\n    }, t.Predictor3 = function (t, e, r) {\n      return e[r + 1];\n    }, t.Predictor4 = function (t, e, r) {\n      return e[r - 1];\n    }, t.Predictor5 = function (t, e, r) {\n      return U(U(t, e[r + 1]), e[r + 0]);\n    }, t.Predictor6 = function (t, e, r) {\n      return U(t, e[r - 1]);\n    }, t.Predictor7 = function (t, e, r) {\n      return U(t, e[r + 0]);\n    }, t.Predictor8 = function (t, e, r) {\n      return U(e[r - 1], e[r + 0]);\n    }, t.Predictor9 = function (t, e, r) {\n      return U(e[r + 0], e[r + 1]);\n    }, t.Predictor10 = function (t, e, r) {\n      return U(U(t, e[r - 1]), U(e[r + 0], e[r + 1]));\n    }, t.Predictor11 = function (t, e, r) {\n      var n = e[r + 0];\n      return 0 >= W(n >> 24 & 255, t >> 24 & 255, (e = e[r - 1]) >> 24 & 255) + W(n >> 16 & 255, t >> 16 & 255, e >> 16 & 255) + W(n >> 8 & 255, t >> 8 & 255, e >> 8 & 255) + W(255 & n, 255 & t, 255 & e) ? n : t;\n    }, t.Predictor12 = function (t, e, r) {\n      var n = e[r + 0];\n      return (z((t >> 24 & 255) + (n >> 24 & 255) - ((e = e[r - 1]) >> 24 & 255)) << 24 | z((t >> 16 & 255) + (n >> 16 & 255) - (e >> 16 & 255)) << 16 | z((t >> 8 & 255) + (n >> 8 & 255) - (e >> 8 & 255)) << 8 | z((255 & t) + (255 & n) - (255 & e))) >>> 0;\n    }, t.Predictor13 = function (t, e, r) {\n      var n = e[r - 1];\n      return (H((t = U(t, e[r + 0])) >> 24 & 255, n >> 24 & 255) << 24 | H(t >> 16 & 255, n >> 16 & 255) << 16 | H(t >> 8 & 255, n >> 8 & 255) << 8 | H(t >> 0 & 255, n >> 0 & 255)) >>> 0;\n    };\n    var Wr = t.PredictorAdd0;\n    t.PredictorAdd1 = V, R(\"Predictor2\", \"PredictorAdd2\"), R(\"Predictor3\", \"PredictorAdd3\"), R(\"Predictor4\", \"PredictorAdd4\"), R(\"Predictor5\", \"PredictorAdd5\"), R(\"Predictor6\", \"PredictorAdd6\"), R(\"Predictor7\", \"PredictorAdd7\"), R(\"Predictor8\", \"PredictorAdd8\"), R(\"Predictor9\", \"PredictorAdd9\"), R(\"Predictor10\", \"PredictorAdd10\"), R(\"Predictor11\", \"PredictorAdd11\"), R(\"Predictor12\", \"PredictorAdd12\"), R(\"Predictor13\", \"PredictorAdd13\");\n    var Vr = t.PredictorAdd2;\n    X(\"ColorIndexInverseTransform\", \"MapARGB\", \"32b\", function (t) {\n      return t >> 8 & 255;\n    }, function (t) {\n      return t;\n    }), X(\"VP8LColorIndexInverseTransformAlpha\", \"MapAlpha\", \"8b\", function (t) {\n      return t;\n    }, function (t) {\n      return t >> 8 & 255;\n    });\n    var Gr,\n      Yr = t.ColorIndexInverseTransform,\n      Jr = t.MapARGB,\n      Xr = t.VP8LColorIndexInverseTransformAlpha,\n      Kr = t.MapAlpha,\n      Zr = t.VP8LPredictorsAdd = [];\n    Zr.length = 16, (t.VP8LPredictors = []).length = 16, (t.VP8LPredictorsAdd_C = []).length = 16, (t.VP8LPredictors_C = []).length = 16;\n    var $r,\n      Qr,\n      tn,\n      en,\n      rn,\n      nn,\n      an,\n      on,\n      sn,\n      cn,\n      un,\n      hn,\n      ln,\n      fn,\n      dn,\n      pn,\n      gn,\n      mn,\n      vn,\n      bn,\n      yn,\n      wn,\n      Nn,\n      Ln,\n      An,\n      xn,\n      Sn,\n      _n,\n      Pn = a(511),\n      kn = a(2041),\n      In = a(225),\n      Fn = a(767),\n      Cn = 0,\n      jn = kn,\n      On = In,\n      Bn = Fn,\n      Mn = Pn,\n      En = 0,\n      qn = 1,\n      Dn = 2,\n      Rn = 3,\n      Tn = 4,\n      Un = 5,\n      zn = 6,\n      Hn = 7,\n      Wn = 8,\n      Vn = 9,\n      Gn = 10,\n      Yn = [2, 3, 7],\n      Jn = [3, 3, 11],\n      Xn = [280, 256, 256, 256, 40],\n      Kn = [0, 1, 1, 1, 0],\n      Zn = [17, 18, 0, 1, 2, 3, 4, 5, 16, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],\n      $n = [24, 7, 23, 25, 40, 6, 39, 41, 22, 26, 38, 42, 56, 5, 55, 57, 21, 27, 54, 58, 37, 43, 72, 4, 71, 73, 20, 28, 53, 59, 70, 74, 36, 44, 88, 69, 75, 52, 60, 3, 87, 89, 19, 29, 86, 90, 35, 45, 68, 76, 85, 91, 51, 61, 104, 2, 103, 105, 18, 30, 102, 106, 34, 46, 84, 92, 67, 77, 101, 107, 50, 62, 120, 1, 119, 121, 83, 93, 17, 31, 100, 108, 66, 78, 118, 122, 33, 47, 117, 123, 49, 63, 99, 109, 82, 94, 0, 116, 124, 65, 79, 16, 32, 98, 110, 48, 115, 125, 81, 95, 64, 114, 126, 97, 111, 80, 113, 127, 96, 112],\n      Qn = [2954, 2956, 2958, 2962, 2970, 2986, 3018, 3082, 3212, 3468, 3980, 5004],\n      ti = 8,\n      ei = [4, 5, 6, 7, 8, 9, 10, 10, 11, 12, 13, 14, 15, 16, 17, 17, 18, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 25, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 91, 93, 95, 96, 98, 100, 101, 102, 104, 106, 108, 110, 112, 114, 116, 118, 122, 124, 126, 128, 130, 132, 134, 136, 138, 140, 143, 145, 148, 151, 154, 157],\n      ri = [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100, 102, 104, 106, 108, 110, 112, 114, 116, 119, 122, 125, 128, 131, 134, 137, 140, 143, 146, 149, 152, 155, 158, 161, 164, 167, 170, 173, 177, 181, 185, 189, 193, 197, 201, 205, 209, 213, 217, 221, 225, 229, 234, 239, 245, 249, 254, 259, 264, 269, 274, 279, 284],\n      ni = null,\n      ii = [[173, 148, 140, 0], [176, 155, 140, 135, 0], [180, 157, 141, 134, 130, 0], [254, 254, 243, 230, 196, 177, 153, 140, 133, 130, 129, 0]],\n      ai = [0, 1, 4, 8, 5, 2, 3, 6, 9, 12, 13, 10, 7, 11, 14, 15],\n      oi = [-0, 1, -1, 2, -2, 3, 4, 6, -3, 5, -4, -5, -6, 7, -7, 8, -8, -9],\n      si = [[[[128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]], [[253, 136, 254, 255, 228, 219, 128, 128, 128, 128, 128], [189, 129, 242, 255, 227, 213, 255, 219, 128, 128, 128], [106, 126, 227, 252, 214, 209, 255, 255, 128, 128, 128]], [[1, 98, 248, 255, 236, 226, 255, 255, 128, 128, 128], [181, 133, 238, 254, 221, 234, 255, 154, 128, 128, 128], [78, 134, 202, 247, 198, 180, 255, 219, 128, 128, 128]], [[1, 185, 249, 255, 243, 255, 128, 128, 128, 128, 128], [184, 150, 247, 255, 236, 224, 128, 128, 128, 128, 128], [77, 110, 216, 255, 236, 230, 128, 128, 128, 128, 128]], [[1, 101, 251, 255, 241, 255, 128, 128, 128, 128, 128], [170, 139, 241, 252, 236, 209, 255, 255, 128, 128, 128], [37, 116, 196, 243, 228, 255, 255, 255, 128, 128, 128]], [[1, 204, 254, 255, 245, 255, 128, 128, 128, 128, 128], [207, 160, 250, 255, 238, 128, 128, 128, 128, 128, 128], [102, 103, 231, 255, 211, 171, 128, 128, 128, 128, 128]], [[1, 152, 252, 255, 240, 255, 128, 128, 128, 128, 128], [177, 135, 243, 255, 234, 225, 128, 128, 128, 128, 128], [80, 129, 211, 255, 194, 224, 128, 128, 128, 128, 128]], [[1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [246, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [255, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]]], [[[198, 35, 237, 223, 193, 187, 162, 160, 145, 155, 62], [131, 45, 198, 221, 172, 176, 220, 157, 252, 221, 1], [68, 47, 146, 208, 149, 167, 221, 162, 255, 223, 128]], [[1, 149, 241, 255, 221, 224, 255, 255, 128, 128, 128], [184, 141, 234, 253, 222, 220, 255, 199, 128, 128, 128], [81, 99, 181, 242, 176, 190, 249, 202, 255, 255, 128]], [[1, 129, 232, 253, 214, 197, 242, 196, 255, 255, 128], [99, 121, 210, 250, 201, 198, 255, 202, 128, 128, 128], [23, 91, 163, 242, 170, 187, 247, 210, 255, 255, 128]], [[1, 200, 246, 255, 234, 255, 128, 128, 128, 128, 128], [109, 178, 241, 255, 231, 245, 255, 255, 128, 128, 128], [44, 130, 201, 253, 205, 192, 255, 255, 128, 128, 128]], [[1, 132, 239, 251, 219, 209, 255, 165, 128, 128, 128], [94, 136, 225, 251, 218, 190, 255, 255, 128, 128, 128], [22, 100, 174, 245, 186, 161, 255, 199, 128, 128, 128]], [[1, 182, 249, 255, 232, 235, 128, 128, 128, 128, 128], [124, 143, 241, 255, 227, 234, 128, 128, 128, 128, 128], [35, 77, 181, 251, 193, 211, 255, 205, 128, 128, 128]], [[1, 157, 247, 255, 236, 231, 255, 255, 128, 128, 128], [121, 141, 235, 255, 225, 227, 255, 255, 128, 128, 128], [45, 99, 188, 251, 195, 217, 255, 224, 128, 128, 128]], [[1, 1, 251, 255, 213, 255, 128, 128, 128, 128, 128], [203, 1, 248, 255, 255, 128, 128, 128, 128, 128, 128], [137, 1, 177, 255, 224, 255, 128, 128, 128, 128, 128]]], [[[253, 9, 248, 251, 207, 208, 255, 192, 128, 128, 128], [175, 13, 224, 243, 193, 185, 249, 198, 255, 255, 128], [73, 17, 171, 221, 161, 179, 236, 167, 255, 234, 128]], [[1, 95, 247, 253, 212, 183, 255, 255, 128, 128, 128], [239, 90, 244, 250, 211, 209, 255, 255, 128, 128, 128], [155, 77, 195, 248, 188, 195, 255, 255, 128, 128, 128]], [[1, 24, 239, 251, 218, 219, 255, 205, 128, 128, 128], [201, 51, 219, 255, 196, 186, 128, 128, 128, 128, 128], [69, 46, 190, 239, 201, 218, 255, 228, 128, 128, 128]], [[1, 191, 251, 255, 255, 128, 128, 128, 128, 128, 128], [223, 165, 249, 255, 213, 255, 128, 128, 128, 128, 128], [141, 124, 248, 255, 255, 128, 128, 128, 128, 128, 128]], [[1, 16, 248, 255, 255, 128, 128, 128, 128, 128, 128], [190, 36, 230, 255, 236, 255, 128, 128, 128, 128, 128], [149, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[1, 226, 255, 128, 128, 128, 128, 128, 128, 128, 128], [247, 192, 255, 128, 128, 128, 128, 128, 128, 128, 128], [240, 128, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[1, 134, 252, 255, 255, 128, 128, 128, 128, 128, 128], [213, 62, 250, 255, 255, 128, 128, 128, 128, 128, 128], [55, 93, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]]], [[[202, 24, 213, 235, 186, 191, 220, 160, 240, 175, 255], [126, 38, 182, 232, 169, 184, 228, 174, 255, 187, 128], [61, 46, 138, 219, 151, 178, 240, 170, 255, 216, 128]], [[1, 112, 230, 250, 199, 191, 247, 159, 255, 255, 128], [166, 109, 228, 252, 211, 215, 255, 174, 128, 128, 128], [39, 77, 162, 232, 172, 180, 245, 178, 255, 255, 128]], [[1, 52, 220, 246, 198, 199, 249, 220, 255, 255, 128], [124, 74, 191, 243, 183, 193, 250, 221, 255, 255, 128], [24, 71, 130, 219, 154, 170, 243, 182, 255, 255, 128]], [[1, 182, 225, 249, 219, 240, 255, 224, 128, 128, 128], [149, 150, 226, 252, 216, 205, 255, 171, 128, 128, 128], [28, 108, 170, 242, 183, 194, 254, 223, 255, 255, 128]], [[1, 81, 230, 252, 204, 203, 255, 192, 128, 128, 128], [123, 102, 209, 247, 188, 196, 255, 233, 128, 128, 128], [20, 95, 153, 243, 164, 173, 255, 203, 128, 128, 128]], [[1, 222, 248, 255, 216, 213, 128, 128, 128, 128, 128], [168, 175, 246, 252, 235, 205, 255, 255, 128, 128, 128], [47, 116, 215, 255, 211, 212, 255, 255, 128, 128, 128]], [[1, 121, 236, 253, 212, 214, 255, 255, 128, 128, 128], [141, 84, 213, 252, 201, 202, 255, 219, 128, 128, 128], [42, 80, 160, 240, 162, 185, 255, 205, 128, 128, 128]], [[1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [244, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [238, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]]]],\n      ci = [[[231, 120, 48, 89, 115, 113, 120, 152, 112], [152, 179, 64, 126, 170, 118, 46, 70, 95], [175, 69, 143, 80, 85, 82, 72, 155, 103], [56, 58, 10, 171, 218, 189, 17, 13, 152], [114, 26, 17, 163, 44, 195, 21, 10, 173], [121, 24, 80, 195, 26, 62, 44, 64, 85], [144, 71, 10, 38, 171, 213, 144, 34, 26], [170, 46, 55, 19, 136, 160, 33, 206, 71], [63, 20, 8, 114, 114, 208, 12, 9, 226], [81, 40, 11, 96, 182, 84, 29, 16, 36]], [[134, 183, 89, 137, 98, 101, 106, 165, 148], [72, 187, 100, 130, 157, 111, 32, 75, 80], [66, 102, 167, 99, 74, 62, 40, 234, 128], [41, 53, 9, 178, 241, 141, 26, 8, 107], [74, 43, 26, 146, 73, 166, 49, 23, 157], [65, 38, 105, 160, 51, 52, 31, 115, 128], [104, 79, 12, 27, 217, 255, 87, 17, 7], [87, 68, 71, 44, 114, 51, 15, 186, 23], [47, 41, 14, 110, 182, 183, 21, 17, 194], [66, 45, 25, 102, 197, 189, 23, 18, 22]], [[88, 88, 147, 150, 42, 46, 45, 196, 205], [43, 97, 183, 117, 85, 38, 35, 179, 61], [39, 53, 200, 87, 26, 21, 43, 232, 171], [56, 34, 51, 104, 114, 102, 29, 93, 77], [39, 28, 85, 171, 58, 165, 90, 98, 64], [34, 22, 116, 206, 23, 34, 43, 166, 73], [107, 54, 32, 26, 51, 1, 81, 43, 31], [68, 25, 106, 22, 64, 171, 36, 225, 114], [34, 19, 21, 102, 132, 188, 16, 76, 124], [62, 18, 78, 95, 85, 57, 50, 48, 51]], [[193, 101, 35, 159, 215, 111, 89, 46, 111], [60, 148, 31, 172, 219, 228, 21, 18, 111], [112, 113, 77, 85, 179, 255, 38, 120, 114], [40, 42, 1, 196, 245, 209, 10, 25, 109], [88, 43, 29, 140, 166, 213, 37, 43, 154], [61, 63, 30, 155, 67, 45, 68, 1, 209], [100, 80, 8, 43, 154, 1, 51, 26, 71], [142, 78, 78, 16, 255, 128, 34, 197, 171], [41, 40, 5, 102, 211, 183, 4, 1, 221], [51, 50, 17, 168, 209, 192, 23, 25, 82]], [[138, 31, 36, 171, 27, 166, 38, 44, 229], [67, 87, 58, 169, 82, 115, 26, 59, 179], [63, 59, 90, 180, 59, 166, 93, 73, 154], [40, 40, 21, 116, 143, 209, 34, 39, 175], [47, 15, 16, 183, 34, 223, 49, 45, 183], [46, 17, 33, 183, 6, 98, 15, 32, 183], [57, 46, 22, 24, 128, 1, 54, 17, 37], [65, 32, 73, 115, 28, 128, 23, 128, 205], [40, 3, 9, 115, 51, 192, 18, 6, 223], [87, 37, 9, 115, 59, 77, 64, 21, 47]], [[104, 55, 44, 218, 9, 54, 53, 130, 226], [64, 90, 70, 205, 40, 41, 23, 26, 57], [54, 57, 112, 184, 5, 41, 38, 166, 213], [30, 34, 26, 133, 152, 116, 10, 32, 134], [39, 19, 53, 221, 26, 114, 32, 73, 255], [31, 9, 65, 234, 2, 15, 1, 118, 73], [75, 32, 12, 51, 192, 255, 160, 43, 51], [88, 31, 35, 67, 102, 85, 55, 186, 85], [56, 21, 23, 111, 59, 205, 45, 37, 192], [55, 38, 70, 124, 73, 102, 1, 34, 98]], [[125, 98, 42, 88, 104, 85, 117, 175, 82], [95, 84, 53, 89, 128, 100, 113, 101, 45], [75, 79, 123, 47, 51, 128, 81, 171, 1], [57, 17, 5, 71, 102, 57, 53, 41, 49], [38, 33, 13, 121, 57, 73, 26, 1, 85], [41, 10, 67, 138, 77, 110, 90, 47, 114], [115, 21, 2, 10, 102, 255, 166, 23, 6], [101, 29, 16, 10, 85, 128, 101, 196, 26], [57, 18, 10, 102, 102, 213, 34, 20, 43], [117, 20, 15, 36, 163, 128, 68, 1, 26]], [[102, 61, 71, 37, 34, 53, 31, 243, 192], [69, 60, 71, 38, 73, 119, 28, 222, 37], [68, 45, 128, 34, 1, 47, 11, 245, 171], [62, 17, 19, 70, 146, 85, 55, 62, 70], [37, 43, 37, 154, 100, 163, 85, 160, 1], [63, 9, 92, 136, 28, 64, 32, 201, 85], [75, 15, 9, 9, 64, 255, 184, 119, 16], [86, 6, 28, 5, 64, 255, 25, 248, 1], [56, 8, 17, 132, 137, 255, 55, 116, 128], [58, 15, 20, 82, 135, 57, 26, 121, 40]], [[164, 50, 31, 137, 154, 133, 25, 35, 218], [51, 103, 44, 131, 131, 123, 31, 6, 158], [86, 40, 64, 135, 148, 224, 45, 183, 128], [22, 26, 17, 131, 240, 154, 14, 1, 209], [45, 16, 21, 91, 64, 222, 7, 1, 197], [56, 21, 39, 155, 60, 138, 23, 102, 213], [83, 12, 13, 54, 192, 255, 68, 47, 28], [85, 26, 85, 85, 128, 128, 32, 146, 171], [18, 11, 7, 63, 144, 171, 4, 4, 246], [35, 27, 10, 146, 174, 171, 12, 26, 128]], [[190, 80, 35, 99, 180, 80, 126, 54, 45], [85, 126, 47, 87, 176, 51, 41, 20, 32], [101, 75, 128, 139, 118, 146, 116, 128, 85], [56, 41, 15, 176, 236, 85, 37, 9, 62], [71, 30, 17, 119, 118, 255, 17, 18, 138], [101, 38, 60, 138, 55, 70, 43, 26, 142], [146, 36, 19, 30, 171, 255, 97, 27, 20], [138, 45, 61, 62, 219, 1, 81, 188, 64], [32, 41, 20, 117, 151, 142, 20, 21, 163], [112, 19, 12, 61, 195, 128, 48, 4, 24]]],\n      ui = [[[[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[176, 246, 255, 255, 255, 255, 255, 255, 255, 255, 255], [223, 241, 252, 255, 255, 255, 255, 255, 255, 255, 255], [249, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 244, 252, 255, 255, 255, 255, 255, 255, 255, 255], [234, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 246, 254, 255, 255, 255, 255, 255, 255, 255, 255], [239, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 253, 255, 254, 255, 255, 255, 255, 255, 255], [250, 255, 254, 255, 254, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[217, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [225, 252, 241, 253, 255, 255, 254, 255, 255, 255, 255], [234, 250, 241, 250, 253, 255, 253, 254, 255, 255, 255]], [[255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [223, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [238, 253, 254, 254, 255, 255, 255, 255, 255, 255, 255]], [[255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255], [249, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 255, 255, 255, 255, 255, 255, 255, 255, 255], [247, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [252, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255], [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[186, 251, 250, 255, 255, 255, 255, 255, 255, 255, 255], [234, 251, 244, 254, 255, 255, 255, 255, 255, 255, 255], [251, 251, 243, 253, 254, 255, 254, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [236, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 253, 253, 254, 254, 255, 255, 255, 255, 255, 255]], [[255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[248, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [250, 254, 252, 254, 255, 255, 255, 255, 255, 255, 255], [248, 254, 249, 253, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255], [246, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255], [252, 254, 251, 254, 254, 255, 255, 255, 255, 255, 255]], [[255, 254, 252, 255, 255, 255, 255, 255, 255, 255, 255], [248, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 254, 254, 255, 255, 255, 255, 255, 255, 255]], [[255, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255], [245, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 251, 253, 255, 255, 255, 255, 255, 255, 255, 255], [252, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 252, 255, 255, 255, 255, 255, 255, 255, 255, 255], [249, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 253, 255, 255, 255, 255, 255, 255, 255, 255], [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]]],\n      hi = [0, 1, 2, 3, 6, 4, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 0],\n      li = [],\n      fi = [],\n      di = [],\n      pi = 1,\n      gi = 2,\n      mi = [],\n      vi = [];\n    vr(\"UpsampleRgbLinePair\", Ar, 3), vr(\"UpsampleBgrLinePair\", xr, 3), vr(\"UpsampleRgbaLinePair\", Ir, 4), vr(\"UpsampleBgraLinePair\", kr, 4), vr(\"UpsampleArgbLinePair\", Pr, 4), vr(\"UpsampleRgba4444LinePair\", _r, 2), vr(\"UpsampleRgb565LinePair\", Sr, 2);\n    var bi = t.UpsampleRgbLinePair,\n      yi = t.UpsampleBgrLinePair,\n      wi = t.UpsampleRgbaLinePair,\n      Ni = t.UpsampleBgraLinePair,\n      Li = t.UpsampleArgbLinePair,\n      Ai = t.UpsampleRgba4444LinePair,\n      xi = t.UpsampleRgb565LinePair,\n      Si = 16,\n      _i = 1 << Si - 1,\n      Pi = -227,\n      ki = 482,\n      Ii = 6,\n      Fi = (256 << Ii) - 1,\n      Ci = 0,\n      ji = a(256),\n      Oi = a(256),\n      Bi = a(256),\n      Mi = a(256),\n      Ei = a(ki - Pi),\n      qi = a(ki - Pi);\n    Fr(\"YuvToRgbRow\", Ar, 3), Fr(\"YuvToBgrRow\", xr, 3), Fr(\"YuvToRgbaRow\", Ir, 4), Fr(\"YuvToBgraRow\", kr, 4), Fr(\"YuvToArgbRow\", Pr, 4), Fr(\"YuvToRgba4444Row\", _r, 2), Fr(\"YuvToRgb565Row\", Sr, 2);\n    var Di = [0, 4, 8, 12, 128, 132, 136, 140, 256, 260, 264, 268, 384, 388, 392, 396],\n      Ri = [0, 2, 8],\n      Ti = [8, 7, 6, 4, 4, 2, 2, 2, 1, 1, 1, 1],\n      Ui = 1;\n    this.WebPDecodeRGBA = function (t, r, n, i, a) {\n      var o = qn,\n        s = new rr(),\n        c = new ot();\n      s.ba = c, c.S = o, c.width = [c.width], c.height = [c.height];\n      var u = c.width,\n        h = c.height,\n        l = new st();\n      if (null == l || null == t) var f = 2;else e(null != l), f = Br(t, r, n, l.width, l.height, l.Pd, l.Qd, l.format, null);\n      if (0 != f ? u = 0 : (null != u && (u[0] = l.width[0]), null != h && (h[0] = l.height[0]), u = 1), u) {\n        c.width = c.width[0], c.height = c.height[0], null != i && (i[0] = c.width), null != a && (a[0] = c.height);\n        t: {\n          if (i = new Gt(), (a = new nr()).data = t, a.w = r, a.ha = n, a.kd = 1, r = [0], e(null != a), (0 == (t = Br(a.data, a.w, a.ha, null, null, null, r, null, a)) || 7 == t) && r[0] && (t = 4), 0 == (r = t)) {\n            if (e(null != s), i.data = a.data, i.w = a.w + a.offset, i.ha = a.ha - a.offset, i.put = dt, i.ac = ft, i.bc = pt, i.ma = s, a.xa) {\n              if (null == (t = kt())) {\n                s = 1;\n                break t;\n              }\n              if (function (t, r) {\n                var n = [0],\n                  i = [0],\n                  a = [0];\n                e: for (;;) {\n                  if (null == t) return 0;\n                  if (null == r) return t.a = 2, 0;\n                  if (t.l = r, t.a = 0, v(t.m, r.data, r.w, r.ha), !gt(t.m, n, i, a)) {\n                    t.a = 3;\n                    break e;\n                  }\n                  if (t.xb = gi, r.width = n[0], r.height = i[0], !It(n[0], i[0], 1, t, null)) break e;\n                  return 1;\n                }\n                return e(0 != t.a), 0;\n              }(t, i)) {\n                if (i = 0 == (r = qr(i.width, i.height, s.Oa, s.ba))) {\n                  e: {\n                    i = t;\n                    r: for (;;) {\n                      if (null == i) {\n                        i = 0;\n                        break e;\n                      }\n                      if (e(null != i.s.yc), e(null != i.s.Ya), e(0 < i.s.Wb), e(null != (n = i.l)), e(null != (a = n.ma)), 0 != i.xb) {\n                        if (i.ca = a.ba, i.tb = a.tb, e(null != i.ca), !Mr(a.Oa, n, Rn)) {\n                          i.a = 2;\n                          break r;\n                        }\n                        if (!Ft(i, n.width)) break r;\n                        if (n.da) break r;\n                        if ((n.da || nt(i.ca.S)) && mr(), 11 > i.ca.S || (alert(\"todo:WebPInitConvertARGBToYUV\"), null != i.ca.f.kb.F && mr()), i.Pb && 0 < i.s.ua && null == i.s.vb.X && !O(i.s.vb, i.s.Wa.Xa)) {\n                          i.a = 1;\n                          break r;\n                        }\n                        i.xb = 0;\n                      }\n                      if (!_t(i, i.V, i.Ba, i.c, i.i, n.o, Lt)) break r;\n                      a.Dc = i.Ma, i = 1;\n                      break e;\n                    }\n                    e(0 != i.a), i = 0;\n                  }\n                  i = !i;\n                }\n                i && (r = t.a);\n              } else r = t.a;\n            } else {\n              if (null == (t = new Yt())) {\n                s = 1;\n                break t;\n              }\n              if (t.Fa = a.na, t.P = a.P, t.qc = a.Sa, Kt(t, i)) {\n                if (0 == (r = qr(i.width, i.height, s.Oa, s.ba))) {\n                  if (t.Aa = 0, n = s.Oa, e(null != (a = t)), null != n) {\n                    if (0 < (u = 0 > (u = n.Md) ? 0 : 100 < u ? 255 : 255 * u / 100)) {\n                      for (h = l = 0; 4 > h; ++h) 12 > (f = a.pb[h]).lc && (f.ia = u * Ti[0 > f.lc ? 0 : f.lc] >> 3), l |= f.ia;\n                      l && (alert(\"todo:VP8InitRandom\"), a.ia = 1);\n                    }\n                    a.Ga = n.Id, 100 < a.Ga ? a.Ga = 100 : 0 > a.Ga && (a.Ga = 0);\n                  }\n                  Qt(t, i) || (r = t.a);\n                }\n              } else r = t.a;\n            }\n            0 == r && null != s.Oa && s.Oa.fd && (r = Er(s.ba));\n          }\n          s = r;\n        }\n        o = 0 != s ? null : 11 > o ? c.f.RGBA.eb : c.f.kb.y;\n      } else o = null;\n      return o;\n    };\n    var zi = [3, 4, 3, 4, 4, 2, 2, 4, 4, 4, 2, 1, 1];\n  };\n  function u(t, e) {\n    for (var r = \"\", n = 0; n < 4; n++) r += String.fromCharCode(t[e++]);\n    return r;\n  }\n  function h(t, e) {\n    return (t[e + 0] << 0 | t[e + 1] << 8 | t[e + 2] << 16) >>> 0;\n  }\n  function l(t, e) {\n    return (t[e + 0] << 0 | t[e + 1] << 8 | t[e + 2] << 16 | t[e + 3] << 24) >>> 0;\n  }\n  new c();\n  var f = [0],\n    d = [0],\n    p = [],\n    g = new c(),\n    m = t,\n    v = function (t, e) {\n      var r = {},\n        n = 0,\n        i = !1,\n        a = 0,\n        o = 0;\n      if (r.frames = [], !\n      /** @license\n         * Copyright (c) 2017 Dominik Homberger\n        Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n        The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n        THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n        https://webpjs.appspot.com\n        WebPRiffParser dominikhlbg@gmail.com\n        */\n      function (t, e, r, n) {\n        for (var i = 0; i < n; i++) if (t[e + i] != r.charCodeAt(i)) return !0;\n        return !1;\n      }(t, e, \"RIFF\", 4)) {\n        var s, c;\n        l(t, e += 4);\n        for (e += 8; e < t.length;) {\n          var f = u(t, e),\n            d = l(t, e += 4);\n          e += 4;\n          var p = d + (1 & d);\n          switch (f) {\n            case \"VP8 \":\n            case \"VP8L\":\n              void 0 === r.frames[n] && (r.frames[n] = {});\n              (v = r.frames[n]).src_off = i ? o : e - 8, v.src_size = a + d + 8, n++, i && (i = !1, a = 0, o = 0);\n              break;\n            case \"VP8X\":\n              (v = r.header = {}).feature_flags = t[e];\n              var g = e + 4;\n              v.canvas_width = 1 + h(t, g);\n              g += 3;\n              v.canvas_height = 1 + h(t, g);\n              g += 3;\n              break;\n            case \"ALPH\":\n              i = !0, a = p + 8, o = e - 8;\n              break;\n            case \"ANIM\":\n              (v = r.header).bgcolor = l(t, e);\n              g = e + 4;\n              v.loop_count = (s = t)[(c = g) + 0] << 0 | s[c + 1] << 8;\n              g += 2;\n              break;\n            case \"ANMF\":\n              var m, v;\n              (v = r.frames[n] = {}).offset_x = 2 * h(t, e), e += 3, v.offset_y = 2 * h(t, e), e += 3, v.width = 1 + h(t, e), e += 3, v.height = 1 + h(t, e), e += 3, v.duration = h(t, e), e += 3, m = t[e++], v.dispose = 1 & m, v.blend = m >> 1 & 1;\n          }\n          \"ANMF\" != f && (e += p);\n        }\n        return r;\n      }\n    }(m, 0);\n  v.response = m, v.rgbaoutput = !0, v.dataurl = !1;\n  var b = v.header ? v.header : null,\n    y = v.frames ? v.frames : null;\n  if (b) {\n    b.loop_counter = b.loop_count, f = [b.canvas_height], d = [b.canvas_width];\n    for (var w = 0; w < y.length && 0 != y[w].blend; w++);\n  }\n  var N = y[0],\n    L = g.WebPDecodeRGBA(m, N.src_off, N.src_size, d, f);\n  N.rgba = L, N.imgwidth = d[0], N.imgheight = f[0];\n  for (var A = 0; A < d[0] * f[0] * 4; A++) p[A] = L[A];\n  return this.width = d, this.height = f, this.data = p, this;\n}\n!function (t) {\n  var r = function () {\n      return \"function\" == typeof fflate__WEBPACK_IMPORTED_MODULE_9__.zlibSync;\n    },\n    n = function (r, n, a, h) {\n      var l = 4,\n        f = s;\n      switch (h) {\n        case t.image_compression.FAST:\n          l = 1, f = o;\n          break;\n        case t.image_compression.MEDIUM:\n          l = 6, f = c;\n          break;\n        case t.image_compression.SLOW:\n          l = 9, f = u;\n      }\n      r = i(r, n, a, f);\n      var d = (0,fflate__WEBPACK_IMPORTED_MODULE_9__.zlibSync)(r, {\n        level: l\n      });\n      return t.__addimage__.arrayBufferToBinaryString(d);\n    },\n    i = function (t, e, r, n) {\n      for (var i, a, o, s = t.length / e, c = new Uint8Array(t.length + s), u = l(), h = 0; h < s; h += 1) {\n        if (o = h * e, i = t.subarray(o, o + e), n) c.set(n(i, r, a), o + h);else {\n          for (var d, p = u.length, g = []; d < p; d += 1) g[d] = u[d](i, r, a);\n          var m = f(g.concat());\n          c.set(g[m], o + h);\n        }\n        a = i;\n      }\n      return c;\n    },\n    a = function (t) {\n      var e = Array.apply([], t);\n      return e.unshift(0), e;\n    },\n    o = function (t, e) {\n      var r,\n        n = [],\n        i = t.length;\n      n[0] = 1;\n      for (var a = 0; a < i; a += 1) r = t[a - e] || 0, n[a + 1] = t[a] - r + 256 & 255;\n      return n;\n    },\n    s = function (t, e, r) {\n      var n,\n        i = [],\n        a = t.length;\n      i[0] = 2;\n      for (var o = 0; o < a; o += 1) n = r && r[o] || 0, i[o + 1] = t[o] - n + 256 & 255;\n      return i;\n    },\n    c = function (t, e, r) {\n      var n,\n        i,\n        a = [],\n        o = t.length;\n      a[0] = 3;\n      for (var s = 0; s < o; s += 1) n = t[s - e] || 0, i = r && r[s] || 0, a[s + 1] = t[s] + 256 - (n + i >>> 1) & 255;\n      return a;\n    },\n    u = function (t, e, r) {\n      var n,\n        i,\n        a,\n        o,\n        s = [],\n        c = t.length;\n      s[0] = 4;\n      for (var u = 0; u < c; u += 1) n = t[u - e] || 0, i = r && r[u] || 0, a = r && r[u - e] || 0, o = h(n, i, a), s[u + 1] = t[u] - o + 256 & 255;\n      return s;\n    },\n    h = function (t, e, r) {\n      if (t === e && e === r) return t;\n      var n = Math.abs(e - r),\n        i = Math.abs(t - r),\n        a = Math.abs(t + e - r - r);\n      return n <= i && n <= a ? t : i <= a ? e : r;\n    },\n    l = function () {\n      return [a, o, s, c, u];\n    },\n    f = function (t) {\n      var e = t.map(function (t) {\n        return t.reduce(function (t, e) {\n          return t + Math.abs(e);\n        }, 0);\n      });\n      return e.indexOf(Math.min.apply(null, e));\n    };\n  t.processPNG = function (e, i, a, o) {\n    var s,\n      c,\n      u,\n      h,\n      l,\n      f,\n      d,\n      p,\n      g,\n      m,\n      v,\n      b,\n      y,\n      w,\n      N,\n      L = this.decode.FLATE_DECODE,\n      A = \"\";\n    if (this.__addimage__.isArrayBuffer(e) && (e = new Uint8Array(e)), this.__addimage__.isArrayBufferView(e)) {\n      if (e = (u = new Kt(e)).imgData, c = u.bits, s = u.colorSpace, l = u.colors, -1 !== [4, 6].indexOf(u.colorType)) {\n        if (8 === u.bits) {\n          g = (p = 32 == u.pixelBitlength ? new Uint32Array(u.decodePixels().buffer) : 16 == u.pixelBitlength ? new Uint16Array(u.decodePixels().buffer) : new Uint8Array(u.decodePixels().buffer)).length, v = new Uint8Array(g * u.colors), m = new Uint8Array(g);\n          var x,\n            S = u.pixelBitlength - u.bits;\n          for (w = 0, N = 0; w < g; w++) {\n            for (y = p[w], x = 0; x < S;) v[N++] = y >>> x & 255, x += u.bits;\n            m[w] = y >>> x & 255;\n          }\n        }\n        if (16 === u.bits) {\n          g = (p = new Uint32Array(u.decodePixels().buffer)).length, v = new Uint8Array(g * (32 / u.pixelBitlength) * u.colors), m = new Uint8Array(g * (32 / u.pixelBitlength)), b = u.colors > 1, w = 0, N = 0;\n          for (var _ = 0; w < g;) y = p[w++], v[N++] = y >>> 0 & 255, b && (v[N++] = y >>> 16 & 255, y = p[w++], v[N++] = y >>> 0 & 255), m[_++] = y >>> 16 & 255;\n          c = 8;\n        }\n        o !== t.image_compression.NONE && r() ? (e = n(v, u.width * u.colors, u.colors, o), d = n(m, u.width, 1, o)) : (e = v, d = m, L = void 0);\n      }\n      if (3 === u.colorType && (s = this.color_spaces.INDEXED, f = u.palette, u.transparency.indexed)) {\n        var P = u.transparency.indexed,\n          k = 0;\n        for (w = 0, g = P.length; w < g; ++w) k += P[w];\n        if ((k /= 255) === g - 1 && -1 !== P.indexOf(0)) h = [P.indexOf(0)];else if (k !== g) {\n          for (p = u.decodePixels(), m = new Uint8Array(p.length), w = 0, g = p.length; w < g; w++) m[w] = P[p[w]];\n          d = n(m, u.width, 1);\n        }\n      }\n      var I = function (e) {\n        var r;\n        switch (e) {\n          case t.image_compression.FAST:\n            r = 11;\n            break;\n          case t.image_compression.MEDIUM:\n            r = 13;\n            break;\n          case t.image_compression.SLOW:\n            r = 14;\n            break;\n          default:\n            r = 12;\n        }\n        return r;\n      }(o);\n      return L === this.decode.FLATE_DECODE && (A = \"/Predictor \" + I + \" \"), A += \"/Colors \" + l + \" /BitsPerComponent \" + c + \" /Columns \" + u.width, (this.__addimage__.isArrayBuffer(e) || this.__addimage__.isArrayBufferView(e)) && (e = this.__addimage__.arrayBufferToBinaryString(e)), (d && this.__addimage__.isArrayBuffer(d) || this.__addimage__.isArrayBufferView(d)) && (d = this.__addimage__.arrayBufferToBinaryString(d)), {\n        alias: a,\n        data: e,\n        index: i,\n        filter: L,\n        decodeParameters: A,\n        transparency: h,\n        palette: f,\n        sMask: d,\n        predictor: I,\n        width: u.width,\n        height: u.height,\n        bitsPerComponent: c,\n        colorSpace: s\n      };\n    }\n  };\n}(E.API), function (t) {\n  t.processGIF89A = function (e, r, n, i) {\n    var a = new Zt(e),\n      o = a.width,\n      s = a.height,\n      c = [];\n    a.decodeAndBlitFrameRGBA(0, c);\n    var u = {\n        data: c,\n        width: o,\n        height: s\n      },\n      h = new Qt(100).encode(u, 100);\n    return t.processJPEG.call(this, h, r, n, i);\n  }, t.processGIF87A = t.processGIF89A;\n}(E.API), te.prototype.parseHeader = function () {\n  if (this.fileSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.reserved = this.datav.getUint32(this.pos, !0), this.pos += 4, this.offset = this.datav.getUint32(this.pos, !0), this.pos += 4, this.headerSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.width = this.datav.getUint32(this.pos, !0), this.pos += 4, this.height = this.datav.getInt32(this.pos, !0), this.pos += 4, this.planes = this.datav.getUint16(this.pos, !0), this.pos += 2, this.bitPP = this.datav.getUint16(this.pos, !0), this.pos += 2, this.compress = this.datav.getUint32(this.pos, !0), this.pos += 4, this.rawSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.hr = this.datav.getUint32(this.pos, !0), this.pos += 4, this.vr = this.datav.getUint32(this.pos, !0), this.pos += 4, this.colors = this.datav.getUint32(this.pos, !0), this.pos += 4, this.importantColors = this.datav.getUint32(this.pos, !0), this.pos += 4, 16 === this.bitPP && this.is_with_alpha && (this.bitPP = 15), this.bitPP < 15) {\n    var t = 0 === this.colors ? 1 << this.bitPP : this.colors;\n    this.palette = new Array(t);\n    for (var e = 0; e < t; e++) {\n      var r = this.datav.getUint8(this.pos++, !0),\n        n = this.datav.getUint8(this.pos++, !0),\n        i = this.datav.getUint8(this.pos++, !0),\n        a = this.datav.getUint8(this.pos++, !0);\n      this.palette[e] = {\n        red: i,\n        green: n,\n        blue: r,\n        quad: a\n      };\n    }\n  }\n  this.height < 0 && (this.height *= -1, this.bottom_up = !1);\n}, te.prototype.parseBGR = function () {\n  this.pos = this.offset;\n  try {\n    var t = \"bit\" + this.bitPP,\n      e = this.width * this.height * 4;\n    this.data = new Uint8Array(e), this[t]();\n  } catch (t) {\n    a.log(\"bit decode error:\" + t);\n  }\n}, te.prototype.bit1 = function () {\n  var t,\n    e = Math.ceil(this.width / 8),\n    r = e % 4;\n  for (t = this.height - 1; t >= 0; t--) {\n    for (var n = this.bottom_up ? t : this.height - 1 - t, i = 0; i < e; i++) for (var a = this.datav.getUint8(this.pos++, !0), o = n * this.width * 4 + 8 * i * 4, s = 0; s < 8 && 8 * i + s < this.width; s++) {\n      var c = this.palette[a >> 7 - s & 1];\n      this.data[o + 4 * s] = c.blue, this.data[o + 4 * s + 1] = c.green, this.data[o + 4 * s + 2] = c.red, this.data[o + 4 * s + 3] = 255;\n    }\n    0 !== r && (this.pos += 4 - r);\n  }\n}, te.prototype.bit4 = function () {\n  for (var t = Math.ceil(this.width / 2), e = t % 4, r = this.height - 1; r >= 0; r--) {\n    for (var n = this.bottom_up ? r : this.height - 1 - r, i = 0; i < t; i++) {\n      var a = this.datav.getUint8(this.pos++, !0),\n        o = n * this.width * 4 + 2 * i * 4,\n        s = a >> 4,\n        c = 15 & a,\n        u = this.palette[s];\n      if (this.data[o] = u.blue, this.data[o + 1] = u.green, this.data[o + 2] = u.red, this.data[o + 3] = 255, 2 * i + 1 >= this.width) break;\n      u = this.palette[c], this.data[o + 4] = u.blue, this.data[o + 4 + 1] = u.green, this.data[o + 4 + 2] = u.red, this.data[o + 4 + 3] = 255;\n    }\n    0 !== e && (this.pos += 4 - e);\n  }\n}, te.prototype.bit8 = function () {\n  for (var t = this.width % 4, e = this.height - 1; e >= 0; e--) {\n    for (var r = this.bottom_up ? e : this.height - 1 - e, n = 0; n < this.width; n++) {\n      var i = this.datav.getUint8(this.pos++, !0),\n        a = r * this.width * 4 + 4 * n;\n      if (i < this.palette.length) {\n        var o = this.palette[i];\n        this.data[a] = o.red, this.data[a + 1] = o.green, this.data[a + 2] = o.blue, this.data[a + 3] = 255;\n      } else this.data[a] = 255, this.data[a + 1] = 255, this.data[a + 2] = 255, this.data[a + 3] = 255;\n    }\n    0 !== t && (this.pos += 4 - t);\n  }\n}, te.prototype.bit15 = function () {\n  for (var t = this.width % 3, e = parseInt(\"11111\", 2), r = this.height - 1; r >= 0; r--) {\n    for (var n = this.bottom_up ? r : this.height - 1 - r, i = 0; i < this.width; i++) {\n      var a = this.datav.getUint16(this.pos, !0);\n      this.pos += 2;\n      var o = (a & e) / e * 255 | 0,\n        s = (a >> 5 & e) / e * 255 | 0,\n        c = (a >> 10 & e) / e * 255 | 0,\n        u = a >> 15 ? 255 : 0,\n        h = n * this.width * 4 + 4 * i;\n      this.data[h] = c, this.data[h + 1] = s, this.data[h + 2] = o, this.data[h + 3] = u;\n    }\n    this.pos += t;\n  }\n}, te.prototype.bit16 = function () {\n  for (var t = this.width % 3, e = parseInt(\"11111\", 2), r = parseInt(\"111111\", 2), n = this.height - 1; n >= 0; n--) {\n    for (var i = this.bottom_up ? n : this.height - 1 - n, a = 0; a < this.width; a++) {\n      var o = this.datav.getUint16(this.pos, !0);\n      this.pos += 2;\n      var s = (o & e) / e * 255 | 0,\n        c = (o >> 5 & r) / r * 255 | 0,\n        u = (o >> 11) / e * 255 | 0,\n        h = i * this.width * 4 + 4 * a;\n      this.data[h] = u, this.data[h + 1] = c, this.data[h + 2] = s, this.data[h + 3] = 255;\n    }\n    this.pos += t;\n  }\n}, te.prototype.bit24 = function () {\n  for (var t = this.height - 1; t >= 0; t--) {\n    for (var e = this.bottom_up ? t : this.height - 1 - t, r = 0; r < this.width; r++) {\n      var n = this.datav.getUint8(this.pos++, !0),\n        i = this.datav.getUint8(this.pos++, !0),\n        a = this.datav.getUint8(this.pos++, !0),\n        o = e * this.width * 4 + 4 * r;\n      this.data[o] = a, this.data[o + 1] = i, this.data[o + 2] = n, this.data[o + 3] = 255;\n    }\n    this.pos += this.width % 4;\n  }\n}, te.prototype.bit32 = function () {\n  for (var t = this.height - 1; t >= 0; t--) for (var e = this.bottom_up ? t : this.height - 1 - t, r = 0; r < this.width; r++) {\n    var n = this.datav.getUint8(this.pos++, !0),\n      i = this.datav.getUint8(this.pos++, !0),\n      a = this.datav.getUint8(this.pos++, !0),\n      o = this.datav.getUint8(this.pos++, !0),\n      s = e * this.width * 4 + 4 * r;\n    this.data[s] = a, this.data[s + 1] = i, this.data[s + 2] = n, this.data[s + 3] = o;\n  }\n}, te.prototype.getData = function () {\n  return this.data;\n},\n/**\n * @license\n * Copyright (c) 2018 Aras Abbasi\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  t.processBMP = function (e, r, n, i) {\n    var a = new te(e, !1),\n      o = a.width,\n      s = a.height,\n      c = {\n        data: a.getData(),\n        width: o,\n        height: s\n      },\n      u = new Qt(100).encode(c, 100);\n    return t.processJPEG.call(this, u, r, n, i);\n  };\n}(E.API), ee.prototype.getData = function () {\n  return this.data;\n},\n/**\n * @license\n * Copyright (c) 2019 Aras Abbasi\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  t.processWEBP = function (e, r, n, i) {\n    var a = new ee(e, !1),\n      o = a.width,\n      s = a.height,\n      c = {\n        data: a.getData(),\n        width: o,\n        height: s\n      },\n      u = new Qt(100).encode(c, 100);\n    return t.processJPEG.call(this, u, r, n, i);\n  };\n}(E.API), E.API.processRGBA = function (t, e, r) {\n  for (var n = t.data, i = n.length, a = new Uint8Array(i / 4 * 3), o = new Uint8Array(i / 4), s = 0, c = 0, u = 0; u < i; u += 4) {\n    var h = n[u],\n      l = n[u + 1],\n      f = n[u + 2],\n      d = n[u + 3];\n    a[s++] = h, a[s++] = l, a[s++] = f, o[c++] = d;\n  }\n  var p = this.__addimage__.arrayBufferToBinaryString(a);\n  return {\n    alpha: this.__addimage__.arrayBufferToBinaryString(o),\n    data: p,\n    index: e,\n    alias: r,\n    colorSpace: \"DeviceRGB\",\n    bitsPerComponent: 8,\n    width: t.width,\n    height: t.height\n  };\n}, E.API.setLanguage = function (t) {\n  return void 0 === this.internal.languageSettings && (this.internal.languageSettings = {}, this.internal.languageSettings.isSubscribed = !1), void 0 !== {\n    af: \"Afrikaans\",\n    sq: \"Albanian\",\n    ar: \"Arabic (Standard)\",\n    \"ar-DZ\": \"Arabic (Algeria)\",\n    \"ar-BH\": \"Arabic (Bahrain)\",\n    \"ar-EG\": \"Arabic (Egypt)\",\n    \"ar-IQ\": \"Arabic (Iraq)\",\n    \"ar-JO\": \"Arabic (Jordan)\",\n    \"ar-KW\": \"Arabic (Kuwait)\",\n    \"ar-LB\": \"Arabic (Lebanon)\",\n    \"ar-LY\": \"Arabic (Libya)\",\n    \"ar-MA\": \"Arabic (Morocco)\",\n    \"ar-OM\": \"Arabic (Oman)\",\n    \"ar-QA\": \"Arabic (Qatar)\",\n    \"ar-SA\": \"Arabic (Saudi Arabia)\",\n    \"ar-SY\": \"Arabic (Syria)\",\n    \"ar-TN\": \"Arabic (Tunisia)\",\n    \"ar-AE\": \"Arabic (U.A.E.)\",\n    \"ar-YE\": \"Arabic (Yemen)\",\n    an: \"Aragonese\",\n    hy: \"Armenian\",\n    as: \"Assamese\",\n    ast: \"Asturian\",\n    az: \"Azerbaijani\",\n    eu: \"Basque\",\n    be: \"Belarusian\",\n    bn: \"Bengali\",\n    bs: \"Bosnian\",\n    br: \"Breton\",\n    bg: \"Bulgarian\",\n    my: \"Burmese\",\n    ca: \"Catalan\",\n    ch: \"Chamorro\",\n    ce: \"Chechen\",\n    zh: \"Chinese\",\n    \"zh-HK\": \"Chinese (Hong Kong)\",\n    \"zh-CN\": \"Chinese (PRC)\",\n    \"zh-SG\": \"Chinese (Singapore)\",\n    \"zh-TW\": \"Chinese (Taiwan)\",\n    cv: \"Chuvash\",\n    co: \"Corsican\",\n    cr: \"Cree\",\n    hr: \"Croatian\",\n    cs: \"Czech\",\n    da: \"Danish\",\n    nl: \"Dutch (Standard)\",\n    \"nl-BE\": \"Dutch (Belgian)\",\n    en: \"English\",\n    \"en-AU\": \"English (Australia)\",\n    \"en-BZ\": \"English (Belize)\",\n    \"en-CA\": \"English (Canada)\",\n    \"en-IE\": \"English (Ireland)\",\n    \"en-JM\": \"English (Jamaica)\",\n    \"en-NZ\": \"English (New Zealand)\",\n    \"en-PH\": \"English (Philippines)\",\n    \"en-ZA\": \"English (South Africa)\",\n    \"en-TT\": \"English (Trinidad & Tobago)\",\n    \"en-GB\": \"English (United Kingdom)\",\n    \"en-US\": \"English (United States)\",\n    \"en-ZW\": \"English (Zimbabwe)\",\n    eo: \"Esperanto\",\n    et: \"Estonian\",\n    fo: \"Faeroese\",\n    fj: \"Fijian\",\n    fi: \"Finnish\",\n    fr: \"French (Standard)\",\n    \"fr-BE\": \"French (Belgium)\",\n    \"fr-CA\": \"French (Canada)\",\n    \"fr-FR\": \"French (France)\",\n    \"fr-LU\": \"French (Luxembourg)\",\n    \"fr-MC\": \"French (Monaco)\",\n    \"fr-CH\": \"French (Switzerland)\",\n    fy: \"Frisian\",\n    fur: \"Friulian\",\n    gd: \"Gaelic (Scots)\",\n    \"gd-IE\": \"Gaelic (Irish)\",\n    gl: \"Galacian\",\n    ka: \"Georgian\",\n    de: \"German (Standard)\",\n    \"de-AT\": \"German (Austria)\",\n    \"de-DE\": \"German (Germany)\",\n    \"de-LI\": \"German (Liechtenstein)\",\n    \"de-LU\": \"German (Luxembourg)\",\n    \"de-CH\": \"German (Switzerland)\",\n    el: \"Greek\",\n    gu: \"Gujurati\",\n    ht: \"Haitian\",\n    he: \"Hebrew\",\n    hi: \"Hindi\",\n    hu: \"Hungarian\",\n    is: \"Icelandic\",\n    id: \"Indonesian\",\n    iu: \"Inuktitut\",\n    ga: \"Irish\",\n    it: \"Italian (Standard)\",\n    \"it-CH\": \"Italian (Switzerland)\",\n    ja: \"Japanese\",\n    kn: \"Kannada\",\n    ks: \"Kashmiri\",\n    kk: \"Kazakh\",\n    km: \"Khmer\",\n    ky: \"Kirghiz\",\n    tlh: \"Klingon\",\n    ko: \"Korean\",\n    \"ko-KP\": \"Korean (North Korea)\",\n    \"ko-KR\": \"Korean (South Korea)\",\n    la: \"Latin\",\n    lv: \"Latvian\",\n    lt: \"Lithuanian\",\n    lb: \"Luxembourgish\",\n    mk: \"North Macedonia\",\n    ms: \"Malay\",\n    ml: \"Malayalam\",\n    mt: \"Maltese\",\n    mi: \"Maori\",\n    mr: \"Marathi\",\n    mo: \"Moldavian\",\n    nv: \"Navajo\",\n    ng: \"Ndonga\",\n    ne: \"Nepali\",\n    no: \"Norwegian\",\n    nb: \"Norwegian (Bokmal)\",\n    nn: \"Norwegian (Nynorsk)\",\n    oc: \"Occitan\",\n    or: \"Oriya\",\n    om: \"Oromo\",\n    fa: \"Persian\",\n    \"fa-IR\": \"Persian/Iran\",\n    pl: \"Polish\",\n    pt: \"Portuguese\",\n    \"pt-BR\": \"Portuguese (Brazil)\",\n    pa: \"Punjabi\",\n    \"pa-IN\": \"Punjabi (India)\",\n    \"pa-PK\": \"Punjabi (Pakistan)\",\n    qu: \"Quechua\",\n    rm: \"Rhaeto-Romanic\",\n    ro: \"Romanian\",\n    \"ro-MO\": \"Romanian (Moldavia)\",\n    ru: \"Russian\",\n    \"ru-MO\": \"Russian (Moldavia)\",\n    sz: \"Sami (Lappish)\",\n    sg: \"Sango\",\n    sa: \"Sanskrit\",\n    sc: \"Sardinian\",\n    sd: \"Sindhi\",\n    si: \"Singhalese\",\n    sr: \"Serbian\",\n    sk: \"Slovak\",\n    sl: \"Slovenian\",\n    so: \"Somani\",\n    sb: \"Sorbian\",\n    es: \"Spanish\",\n    \"es-AR\": \"Spanish (Argentina)\",\n    \"es-BO\": \"Spanish (Bolivia)\",\n    \"es-CL\": \"Spanish (Chile)\",\n    \"es-CO\": \"Spanish (Colombia)\",\n    \"es-CR\": \"Spanish (Costa Rica)\",\n    \"es-DO\": \"Spanish (Dominican Republic)\",\n    \"es-EC\": \"Spanish (Ecuador)\",\n    \"es-SV\": \"Spanish (El Salvador)\",\n    \"es-GT\": \"Spanish (Guatemala)\",\n    \"es-HN\": \"Spanish (Honduras)\",\n    \"es-MX\": \"Spanish (Mexico)\",\n    \"es-NI\": \"Spanish (Nicaragua)\",\n    \"es-PA\": \"Spanish (Panama)\",\n    \"es-PY\": \"Spanish (Paraguay)\",\n    \"es-PE\": \"Spanish (Peru)\",\n    \"es-PR\": \"Spanish (Puerto Rico)\",\n    \"es-ES\": \"Spanish (Spain)\",\n    \"es-UY\": \"Spanish (Uruguay)\",\n    \"es-VE\": \"Spanish (Venezuela)\",\n    sx: \"Sutu\",\n    sw: \"Swahili\",\n    sv: \"Swedish\",\n    \"sv-FI\": \"Swedish (Finland)\",\n    \"sv-SV\": \"Swedish (Sweden)\",\n    ta: \"Tamil\",\n    tt: \"Tatar\",\n    te: \"Teluga\",\n    th: \"Thai\",\n    tig: \"Tigre\",\n    ts: \"Tsonga\",\n    tn: \"Tswana\",\n    tr: \"Turkish\",\n    tk: \"Turkmen\",\n    uk: \"Ukrainian\",\n    hsb: \"Upper Sorbian\",\n    ur: \"Urdu\",\n    ve: \"Venda\",\n    vi: \"Vietnamese\",\n    vo: \"Volapuk\",\n    wa: \"Walloon\",\n    cy: \"Welsh\",\n    xh: \"Xhosa\",\n    ji: \"Yiddish\",\n    zu: \"Zulu\"\n  }[t] && (this.internal.languageSettings.languageCode = t, !1 === this.internal.languageSettings.isSubscribed && (this.internal.events.subscribe(\"putCatalog\", function () {\n    this.internal.write(\"/Lang (\" + this.internal.languageSettings.languageCode + \")\");\n  }), this.internal.languageSettings.isSubscribed = !0)), this;\n}, Vt = E.API, Gt = Vt.getCharWidthsArray = function (e, r) {\n  var n,\n    i,\n    a = (r = r || {}).font || this.internal.getFont(),\n    o = r.fontSize || this.internal.getFontSize(),\n    s = r.charSpace || this.internal.getCharSpace(),\n    c = r.widths ? r.widths : a.metadata.Unicode.widths,\n    u = c.fof ? c.fof : 1,\n    h = r.kerning ? r.kerning : a.metadata.Unicode.kerning,\n    l = h.fof ? h.fof : 1,\n    f = !1 !== r.doKerning,\n    d = 0,\n    p = e.length,\n    g = 0,\n    m = c[0] || u,\n    v = [];\n  for (n = 0; n < p; n++) i = e.charCodeAt(n), \"function\" == typeof a.metadata.widthOfString ? v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i)) + s * (1e3 / o) || 0) / 1e3) : (d = f && \"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(h[i]) && !isNaN(parseInt(h[i][g], 10)) ? h[i][g] / l : 0, v.push((c[i] || m) / u + d)), g = i;\n  return v;\n}, Yt = Vt.getStringUnitWidth = function (t, e) {\n  var r = (e = e || {}).fontSize || this.internal.getFontSize(),\n    n = e.font || this.internal.getFont(),\n    i = e.charSpace || this.internal.getCharSpace();\n  return Vt.processArabic && (t = Vt.processArabic(t)), \"function\" == typeof n.metadata.widthOfString ? n.metadata.widthOfString(t, r, i) / r : Gt.apply(this, arguments).reduce(function (t, e) {\n    return t + e;\n  }, 0);\n}, Jt = function (t, e, r, n) {\n  for (var i = [], a = 0, o = t.length, s = 0; a !== o && s + e[a] < r;) s += e[a], a++;\n  i.push(t.slice(0, a));\n  var c = a;\n  for (s = 0; a !== o;) s + e[a] > n && (i.push(t.slice(c, a)), s = 0, c = a), s += e[a], a++;\n  return c !== a && i.push(t.slice(c, a)), i;\n}, Xt = function (t, e, r) {\n  r || (r = {});\n  var n,\n    i,\n    a,\n    o,\n    s,\n    c,\n    u,\n    h = [],\n    l = [h],\n    f = r.textIndent || 0,\n    d = 0,\n    p = 0,\n    g = t.split(\" \"),\n    m = Gt.apply(this, [\" \", r])[0];\n  if (c = -1 === r.lineIndent ? g[0].length + 2 : r.lineIndent || 0) {\n    var v = Array(c).join(\" \"),\n      b = [];\n    g.map(function (t) {\n      (t = t.split(/\\s*\\n/)).length > 1 ? b = b.concat(t.map(function (t, e) {\n        return (e && t.length ? \"\\n\" : \"\") + t;\n      })) : b.push(t[0]);\n    }), g = b, c = Yt.apply(this, [v, r]);\n  }\n  for (a = 0, o = g.length; a < o; a++) {\n    var y = 0;\n    if (n = g[a], c && \"\\n\" == n[0] && (n = n.substr(1), y = 1), f + d + (p = (i = Gt.apply(this, [n, r])).reduce(function (t, e) {\n      return t + e;\n    }, 0)) > e || y) {\n      if (p > e) {\n        for (s = Jt.apply(this, [n, i, e - (f + d), e]), h.push(s.shift()), h = [s.pop()]; s.length;) l.push([s.shift()]);\n        p = i.slice(n.length - (h[0] ? h[0].length : 0)).reduce(function (t, e) {\n          return t + e;\n        }, 0);\n      } else h = [n];\n      l.push(h), f = p + c, d = m;\n    } else h.push(n), f += d + p, d = m;\n  }\n  return u = c ? function (t, e) {\n    return (e ? v : \"\") + t.join(\" \");\n  } : function (t) {\n    return t.join(\" \");\n  }, l.map(u);\n}, Vt.splitTextToSize = function (t, e, r) {\n  var n,\n    i = (r = r || {}).fontSize || this.internal.getFontSize(),\n    a = function (t) {\n      if (t.widths && t.kerning) return {\n        widths: t.widths,\n        kerning: t.kerning\n      };\n      var e = this.internal.getFont(t.fontName, t.fontStyle);\n      return e.metadata.Unicode ? {\n        widths: e.metadata.Unicode.widths || {\n          0: 1\n        },\n        kerning: e.metadata.Unicode.kerning || {}\n      } : {\n        font: e.metadata,\n        fontSize: this.internal.getFontSize(),\n        charSpace: this.internal.getCharSpace()\n      };\n    }.call(this, r);\n  n = Array.isArray(t) ? t : String(t).split(/\\r?\\n/);\n  var o = 1 * this.internal.scaleFactor * e / i;\n  a.textIndent = r.textIndent ? 1 * r.textIndent * this.internal.scaleFactor / i : 0, a.lineIndent = r.lineIndent;\n  var s,\n    c,\n    u = [];\n  for (s = 0, c = n.length; s < c; s++) u = u.concat(Xt.apply(this, [n[s], o, a]));\n  return u;\n}, function (e) {\n  e.__fontmetrics__ = e.__fontmetrics__ || {};\n  for (var r = \"klmnopqrstuvwxyz\", n = {}, i = {}, a = 0; a < r.length; a++) n[r[a]] = \"0123456789abcdef\"[a], i[\"0123456789abcdef\"[a]] = r[a];\n  var o = function (t) {\n      return \"0x\" + parseInt(t, 10).toString(16);\n    },\n    s = e.__fontmetrics__.compress = function (e) {\n      var r,\n        n,\n        a,\n        c,\n        u = [\"{\"];\n      for (var h in e) {\n        if (r = e[h], isNaN(parseInt(h, 10)) ? n = \"'\" + h + \"'\" : (h = parseInt(h, 10), n = (n = o(h).slice(2)).slice(0, -1) + i[n.slice(-1)]), \"number\" == typeof r) r < 0 ? (a = o(r).slice(3), c = \"-\") : (a = o(r).slice(2), c = \"\"), a = c + a.slice(0, -1) + i[a.slice(-1)];else {\n          if (\"object\" !== (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(r)) throw new Error(\"Don't know what to do with value type \" + (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(r) + \".\");\n          a = s(r);\n        }\n        u.push(n + a);\n      }\n      return u.push(\"}\"), u.join(\"\");\n    },\n    c = e.__fontmetrics__.uncompress = function (t) {\n      if (\"string\" != typeof t) throw new Error(\"Invalid argument passed to uncompress.\");\n      for (var e, r, i, a, o = {}, s = 1, c = o, u = [], h = \"\", l = \"\", f = t.length - 1, d = 1; d < f; d += 1) \"'\" == (a = t[d]) ? e ? (i = e.join(\"\"), e = void 0) : e = [] : e ? e.push(a) : \"{\" == a ? (u.push([c, i]), c = {}, i = void 0) : \"}\" == a ? ((r = u.pop())[0][r[1]] = c, i = void 0, c = r[0]) : \"-\" == a ? s = -1 : void 0 === i ? n.hasOwnProperty(a) ? (h += n[a], i = parseInt(h, 16) * s, s = 1, h = \"\") : h += a : n.hasOwnProperty(a) ? (l += n[a], c[i] = parseInt(l, 16) * s, s = 1, i = void 0, l = \"\") : l += a;\n      return o;\n    },\n    u = {\n      codePages: [\"WinAnsiEncoding\"],\n      WinAnsiEncoding: c(\"{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}\")\n    },\n    h = {\n      Unicode: {\n        Courier: u,\n        \"Courier-Bold\": u,\n        \"Courier-BoldOblique\": u,\n        \"Courier-Oblique\": u,\n        Helvetica: u,\n        \"Helvetica-Bold\": u,\n        \"Helvetica-BoldOblique\": u,\n        \"Helvetica-Oblique\": u,\n        \"Times-Roman\": u,\n        \"Times-Bold\": u,\n        \"Times-BoldItalic\": u,\n        \"Times-Italic\": u\n      }\n    },\n    l = {\n      Unicode: {\n        \"Courier-Oblique\": c(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\"),\n        \"Times-BoldItalic\": c(\"{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}\"),\n        \"Helvetica-Bold\": c(\"{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}\"),\n        Courier: c(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\"),\n        \"Courier-BoldOblique\": c(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\"),\n        \"Times-Bold\": c(\"{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}\"),\n        Symbol: c(\"{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}\"),\n        Helvetica: c(\"{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}\"),\n        \"Helvetica-BoldOblique\": c(\"{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}\"),\n        ZapfDingbats: c(\"{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}\"),\n        \"Courier-Bold\": c(\"{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}\"),\n        \"Times-Italic\": c(\"{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}\"),\n        \"Times-Roman\": c(\"{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}\"),\n        \"Helvetica-Oblique\": c(\"{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}\")\n      }\n    };\n  e.events.push([\"addFont\", function (t) {\n    var e = t.font,\n      r = l.Unicode[e.postScriptName];\n    r && (e.metadata.Unicode = {}, e.metadata.Unicode.widths = r.widths, e.metadata.Unicode.kerning = r.kerning);\n    var n = h.Unicode[e.postScriptName];\n    n && (e.metadata.Unicode.encoding = n, e.encoding = n.codePages[0]);\n  }]);\n}(E.API),\n/**\n * @license\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var e = function (t) {\n    for (var e = t.length, r = new Uint8Array(e), n = 0; n < e; n++) r[n] = t.charCodeAt(n);\n    return r;\n  };\n  t.API.events.push([\"addFont\", function (r) {\n    var n = void 0,\n      i = r.font,\n      a = r.instance;\n    if (!i.isStandardFont) {\n      if (void 0 === a) throw new Error(\"Font does not exist in vFS, import fonts or remove declaration doc.addFont('\" + i.postScriptName + \"').\");\n      if (\"string\" != typeof (n = !1 === a.existsFileInVFS(i.postScriptName) ? a.loadFile(i.postScriptName) : a.getFileFromVFS(i.postScriptName))) throw new Error(\"Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('\" + i.postScriptName + \"').\");\n      !function (r, n) {\n        n = /^\\x00\\x01\\x00\\x00/.test(n) ? e(n) : e(u(n)), r.metadata = t.API.TTFFont.open(n), r.metadata.Unicode = r.metadata.Unicode || {\n          encoding: {},\n          kerning: {},\n          widths: []\n        }, r.metadata.glyIdsUsed = [0];\n      }(i, n);\n    }\n  }]);\n}(E),\n/** @license\n * Copyright (c) 2012 Willow Systems Corporation, https://github.com/willowsystems\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * ====================================================================\n */\nfunction (t) {\n  function e() {\n    return (n.canvg ? Promise.resolve(n.canvg) : __webpack_require__.e(/*! import() */ \"node_modules_canvg_lib_index_es_js\").then(__webpack_require__.bind(__webpack_require__, /*! canvg */ \"./node_modules/canvg/lib/index.es.js\"))).catch(function (t) {\n      return Promise.reject(new Error(\"Could not load canvg: \" + t));\n    }).then(function (t) {\n      return t.default ? t.default : t;\n    });\n  }\n  E.API.addSvgAsImage = function (t, r, n, i, o, s, c, u) {\n    if (isNaN(r) || isNaN(n)) throw a.error(\"jsPDF.addSvgAsImage: Invalid coordinates\", arguments), new Error(\"Invalid coordinates passed to jsPDF.addSvgAsImage\");\n    if (isNaN(i) || isNaN(o)) throw a.error(\"jsPDF.addSvgAsImage: Invalid measurements\", arguments), new Error(\"Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage\");\n    var h = document.createElement(\"canvas\");\n    h.width = i, h.height = o;\n    var l = h.getContext(\"2d\");\n    l.fillStyle = \"#fff\", l.fillRect(0, 0, h.width, h.height);\n    var f = {\n        ignoreMouse: !0,\n        ignoreAnimation: !0,\n        ignoreDimensions: !0\n      },\n      d = this;\n    return e().then(function (e) {\n      return e.fromString(l, t, f);\n    }, function () {\n      return Promise.reject(new Error(\"Could not load canvg.\"));\n    }).then(function (t) {\n      return t.render(f);\n    }).then(function () {\n      d.addImage(h.toDataURL(\"image/jpeg\", 1), r, n, i, o, c, u);\n    });\n  };\n}(), E.API.putTotalPages = function (t) {\n  var e,\n    r = 0;\n  parseInt(this.internal.getFont().id.substr(1), 10) < 15 ? (e = new RegExp(t, \"g\"), r = this.internal.getNumberOfPages()) : (e = new RegExp(this.pdfEscape16(t, this.internal.getFont()), \"g\"), r = this.pdfEscape16(this.internal.getNumberOfPages() + \"\", this.internal.getFont()));\n  for (var n = 1; n <= this.internal.getNumberOfPages(); n++) for (var i = 0; i < this.internal.pages[n].length; i++) this.internal.pages[n][i] = this.internal.pages[n][i].replace(e, r);\n  return this;\n}, E.API.viewerPreferences = function (e, r) {\n  var n;\n  e = e || {}, r = r || !1;\n  var i,\n    a,\n    o,\n    s = {\n      HideToolbar: {\n        defaultValue: !1,\n        value: !1,\n        type: \"boolean\",\n        explicitSet: !1,\n        valueSet: [!0, !1],\n        pdfVersion: 1.3\n      },\n      HideMenubar: {\n        defaultValue: !1,\n        value: !1,\n        type: \"boolean\",\n        explicitSet: !1,\n        valueSet: [!0, !1],\n        pdfVersion: 1.3\n      },\n      HideWindowUI: {\n        defaultValue: !1,\n        value: !1,\n        type: \"boolean\",\n        explicitSet: !1,\n        valueSet: [!0, !1],\n        pdfVersion: 1.3\n      },\n      FitWindow: {\n        defaultValue: !1,\n        value: !1,\n        type: \"boolean\",\n        explicitSet: !1,\n        valueSet: [!0, !1],\n        pdfVersion: 1.3\n      },\n      CenterWindow: {\n        defaultValue: !1,\n        value: !1,\n        type: \"boolean\",\n        explicitSet: !1,\n        valueSet: [!0, !1],\n        pdfVersion: 1.3\n      },\n      DisplayDocTitle: {\n        defaultValue: !1,\n        value: !1,\n        type: \"boolean\",\n        explicitSet: !1,\n        valueSet: [!0, !1],\n        pdfVersion: 1.4\n      },\n      NonFullScreenPageMode: {\n        defaultValue: \"UseNone\",\n        value: \"UseNone\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"UseNone\", \"UseOutlines\", \"UseThumbs\", \"UseOC\"],\n        pdfVersion: 1.3\n      },\n      Direction: {\n        defaultValue: \"L2R\",\n        value: \"L2R\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"L2R\", \"R2L\"],\n        pdfVersion: 1.3\n      },\n      ViewArea: {\n        defaultValue: \"CropBox\",\n        value: \"CropBox\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"MediaBox\", \"CropBox\", \"TrimBox\", \"BleedBox\", \"ArtBox\"],\n        pdfVersion: 1.4\n      },\n      ViewClip: {\n        defaultValue: \"CropBox\",\n        value: \"CropBox\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"MediaBox\", \"CropBox\", \"TrimBox\", \"BleedBox\", \"ArtBox\"],\n        pdfVersion: 1.4\n      },\n      PrintArea: {\n        defaultValue: \"CropBox\",\n        value: \"CropBox\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"MediaBox\", \"CropBox\", \"TrimBox\", \"BleedBox\", \"ArtBox\"],\n        pdfVersion: 1.4\n      },\n      PrintClip: {\n        defaultValue: \"CropBox\",\n        value: \"CropBox\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"MediaBox\", \"CropBox\", \"TrimBox\", \"BleedBox\", \"ArtBox\"],\n        pdfVersion: 1.4\n      },\n      PrintScaling: {\n        defaultValue: \"AppDefault\",\n        value: \"AppDefault\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"AppDefault\", \"None\"],\n        pdfVersion: 1.6\n      },\n      Duplex: {\n        defaultValue: \"\",\n        value: \"none\",\n        type: \"name\",\n        explicitSet: !1,\n        valueSet: [\"Simplex\", \"DuplexFlipShortEdge\", \"DuplexFlipLongEdge\", \"none\"],\n        pdfVersion: 1.7\n      },\n      PickTrayByPDFSize: {\n        defaultValue: !1,\n        value: !1,\n        type: \"boolean\",\n        explicitSet: !1,\n        valueSet: [!0, !1],\n        pdfVersion: 1.7\n      },\n      PrintPageRange: {\n        defaultValue: \"\",\n        value: \"\",\n        type: \"array\",\n        explicitSet: !1,\n        valueSet: null,\n        pdfVersion: 1.7\n      },\n      NumCopies: {\n        defaultValue: 1,\n        value: 1,\n        type: \"integer\",\n        explicitSet: !1,\n        valueSet: null,\n        pdfVersion: 1.7\n      }\n    },\n    c = Object.keys(s),\n    u = [],\n    h = 0,\n    l = 0,\n    f = 0;\n  function d(t, e) {\n    var r,\n      n = !1;\n    for (r = 0; r < t.length; r += 1) t[r] === e && (n = !0);\n    return n;\n  }\n  if (void 0 === this.internal.viewerpreferences && (this.internal.viewerpreferences = {}, this.internal.viewerpreferences.configuration = JSON.parse(JSON.stringify(s)), this.internal.viewerpreferences.isSubscribed = !1), n = this.internal.viewerpreferences.configuration, \"reset\" === e || !0 === r) {\n    var p = c.length;\n    for (f = 0; f < p; f += 1) n[c[f]].value = n[c[f]].defaultValue, n[c[f]].explicitSet = !1;\n  }\n  if (\"object\" === (0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e)) for (a in e) if (o = e[a], d(c, a) && void 0 !== o) {\n    if (\"boolean\" === n[a].type && \"boolean\" == typeof o) n[a].value = o;else if (\"name\" === n[a].type && d(n[a].valueSet, o)) n[a].value = o;else if (\"integer\" === n[a].type && Number.isInteger(o)) n[a].value = o;else if (\"array\" === n[a].type) {\n      for (h = 0; h < o.length; h += 1) if (i = !0, 1 === o[h].length && \"number\" == typeof o[h][0]) u.push(String(o[h] - 1));else if (o[h].length > 1) {\n        for (l = 0; l < o[h].length; l += 1) \"number\" != typeof o[h][l] && (i = !1);\n        !0 === i && u.push([o[h][0] - 1, o[h][1] - 1].join(\" \"));\n      }\n      n[a].value = \"[\" + u.join(\" \") + \"]\";\n    } else n[a].value = n[a].defaultValue;\n    n[a].explicitSet = !0;\n  }\n  return !1 === this.internal.viewerpreferences.isSubscribed && (this.internal.events.subscribe(\"putCatalog\", function () {\n    var t,\n      e = [];\n    for (t in n) !0 === n[t].explicitSet && (\"name\" === n[t].type ? e.push(\"/\" + t + \" /\" + n[t].value) : e.push(\"/\" + t + \" \" + n[t].value));\n    0 !== e.length && this.internal.write(\"/ViewerPreferences\\n<<\\n\" + e.join(\"\\n\") + \"\\n>>\");\n  }), this.internal.viewerpreferences.isSubscribed = !0), this.internal.viewerpreferences.configuration = n, this;\n},\n/** ====================================================================\n * @license\n * jsPDF XMP metadata plugin\n * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * ====================================================================\n */\nfunction (t) {\n  var e = function () {\n      var t = '<rdf:RDF xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"><rdf:Description rdf:about=\"\" xmlns:jspdf=\"' + this.internal.__metadata__.namespaceuri + '\"><jspdf:metadata>',\n        e = unescape(encodeURIComponent('<x:xmpmeta xmlns:x=\"adobe:ns:meta/\">')),\n        r = unescape(encodeURIComponent(t)),\n        n = unescape(encodeURIComponent(this.internal.__metadata__.metadata)),\n        i = unescape(encodeURIComponent(\"</jspdf:metadata></rdf:Description></rdf:RDF>\")),\n        a = unescape(encodeURIComponent(\"</x:xmpmeta>\")),\n        o = r.length + n.length + i.length + e.length + a.length;\n      this.internal.__metadata__.metadata_object_number = this.internal.newObject(), this.internal.write(\"<< /Type /Metadata /Subtype /XML /Length \" + o + \" >>\"), this.internal.write(\"stream\"), this.internal.write(e + r + n + i + a), this.internal.write(\"endstream\"), this.internal.write(\"endobj\");\n    },\n    r = function () {\n      this.internal.__metadata__.metadata_object_number && this.internal.write(\"/Metadata \" + this.internal.__metadata__.metadata_object_number + \" 0 R\");\n    };\n  t.addMetadata = function (t, n) {\n    return void 0 === this.internal.__metadata__ && (this.internal.__metadata__ = {\n      metadata: t,\n      namespaceuri: n || \"http://jspdf.default.namespaceuri/\"\n    }, this.internal.events.subscribe(\"putCatalog\", r), this.internal.events.subscribe(\"postPutResources\", e)), this;\n  };\n}(E.API), function (t) {\n  var e = t.API,\n    r = e.pdfEscape16 = function (t, e) {\n      for (var r, n = e.metadata.Unicode.widths, i = [\"\", \"0\", \"00\", \"000\", \"0000\"], a = [\"\"], o = 0, s = t.length; o < s; ++o) {\n        if (r = e.metadata.characterToGlyph(t.charCodeAt(o)), e.metadata.glyIdsUsed.push(r), e.metadata.toUnicode[r] = t.charCodeAt(o), -1 == n.indexOf(r) && (n.push(r), n.push([parseInt(e.metadata.widthOfGlyph(r), 10)])), \"0\" == r) return a.join(\"\");\n        r = r.toString(16), a.push(i[4 - r.length], r);\n      }\n      return a.join(\"\");\n    },\n    n = function (t) {\n      var e, r, n, i, a, o, s;\n      for (a = \"/CIDInit /ProcSet findresource begin\\n12 dict begin\\nbegincmap\\n/CIDSystemInfo <<\\n  /Registry (Adobe)\\n  /Ordering (UCS)\\n  /Supplement 0\\n>> def\\n/CMapName /Adobe-Identity-UCS def\\n/CMapType 2 def\\n1 begincodespacerange\\n<0000><ffff>\\nendcodespacerange\", n = [], o = 0, s = (r = Object.keys(t).sort(function (t, e) {\n        return t - e;\n      })).length; o < s; o++) e = r[o], n.length >= 100 && (a += \"\\n\" + n.length + \" beginbfchar\\n\" + n.join(\"\\n\") + \"\\nendbfchar\", n = []), void 0 !== t[e] && null !== t[e] && \"function\" == typeof t[e].toString && (i = (\"0000\" + t[e].toString(16)).slice(-4), e = (\"0000\" + (+e).toString(16)).slice(-4), n.push(\"<\" + e + \"><\" + i + \">\"));\n      return n.length && (a += \"\\n\" + n.length + \" beginbfchar\\n\" + n.join(\"\\n\") + \"\\nendbfchar\\n\"), a += \"endcmap\\nCMapName currentdict /CMap defineresource pop\\nend\\nend\";\n    };\n  e.events.push([\"putFont\", function (e) {\n    !function (e) {\n      var r = e.font,\n        i = e.out,\n        a = e.newObject,\n        o = e.putStream;\n      if (r.metadata instanceof t.API.TTFFont && \"Identity-H\" === r.encoding) {\n        for (var s = r.metadata.Unicode.widths, c = r.metadata.subset.encode(r.metadata.glyIdsUsed, 1), u = \"\", h = 0; h < c.length; h++) u += String.fromCharCode(c[h]);\n        var l = a();\n        o({\n          data: u,\n          addLength1: !0,\n          objectId: l\n        }), i(\"endobj\");\n        var f = a();\n        o({\n          data: n(r.metadata.toUnicode),\n          addLength1: !0,\n          objectId: f\n        }), i(\"endobj\");\n        var d = a();\n        i(\"<<\"), i(\"/Type /FontDescriptor\"), i(\"/FontName /\" + F(r.fontName)), i(\"/FontFile2 \" + l + \" 0 R\"), i(\"/FontBBox \" + t.API.PDFObject.convert(r.metadata.bbox)), i(\"/Flags \" + r.metadata.flags), i(\"/StemV \" + r.metadata.stemV), i(\"/ItalicAngle \" + r.metadata.italicAngle), i(\"/Ascent \" + r.metadata.ascender), i(\"/Descent \" + r.metadata.decender), i(\"/CapHeight \" + r.metadata.capHeight), i(\">>\"), i(\"endobj\");\n        var p = a();\n        i(\"<<\"), i(\"/Type /Font\"), i(\"/BaseFont /\" + F(r.fontName)), i(\"/FontDescriptor \" + d + \" 0 R\"), i(\"/W \" + t.API.PDFObject.convert(s)), i(\"/CIDToGIDMap /Identity\"), i(\"/DW 1000\"), i(\"/Subtype /CIDFontType2\"), i(\"/CIDSystemInfo\"), i(\"<<\"), i(\"/Supplement 0\"), i(\"/Registry (Adobe)\"), i(\"/Ordering (\" + r.encoding + \")\"), i(\">>\"), i(\">>\"), i(\"endobj\"), r.objectNumber = a(), i(\"<<\"), i(\"/Type /Font\"), i(\"/Subtype /Type0\"), i(\"/ToUnicode \" + f + \" 0 R\"), i(\"/BaseFont /\" + F(r.fontName)), i(\"/Encoding /\" + r.encoding), i(\"/DescendantFonts [\" + p + \" 0 R]\"), i(\">>\"), i(\"endobj\"), r.isAlreadyPutted = !0;\n      }\n    }(e);\n  }]);\n  e.events.push([\"putFont\", function (e) {\n    !function (e) {\n      var r = e.font,\n        i = e.out,\n        a = e.newObject,\n        o = e.putStream;\n      if (r.metadata instanceof t.API.TTFFont && \"WinAnsiEncoding\" === r.encoding) {\n        for (var s = r.metadata.rawData, c = \"\", u = 0; u < s.length; u++) c += String.fromCharCode(s[u]);\n        var h = a();\n        o({\n          data: c,\n          addLength1: !0,\n          objectId: h\n        }), i(\"endobj\");\n        var l = a();\n        o({\n          data: n(r.metadata.toUnicode),\n          addLength1: !0,\n          objectId: l\n        }), i(\"endobj\");\n        var f = a();\n        i(\"<<\"), i(\"/Descent \" + r.metadata.decender), i(\"/CapHeight \" + r.metadata.capHeight), i(\"/StemV \" + r.metadata.stemV), i(\"/Type /FontDescriptor\"), i(\"/FontFile2 \" + h + \" 0 R\"), i(\"/Flags 96\"), i(\"/FontBBox \" + t.API.PDFObject.convert(r.metadata.bbox)), i(\"/FontName /\" + F(r.fontName)), i(\"/ItalicAngle \" + r.metadata.italicAngle), i(\"/Ascent \" + r.metadata.ascender), i(\">>\"), i(\"endobj\"), r.objectNumber = a();\n        for (var d = 0; d < r.metadata.hmtx.widths.length; d++) r.metadata.hmtx.widths[d] = parseInt(r.metadata.hmtx.widths[d] * (1e3 / r.metadata.head.unitsPerEm));\n        i(\"<</Subtype/TrueType/Type/Font/ToUnicode \" + l + \" 0 R/BaseFont/\" + F(r.fontName) + \"/FontDescriptor \" + f + \" 0 R/Encoding/\" + r.encoding + \" /FirstChar 29 /LastChar 255 /Widths \" + t.API.PDFObject.convert(r.metadata.hmtx.widths) + \">>\"), i(\"endobj\"), r.isAlreadyPutted = !0;\n      }\n    }(e);\n  }]);\n  var i = function (t) {\n    var e,\n      n = t.text || \"\",\n      i = t.x,\n      a = t.y,\n      o = t.options || {},\n      s = t.mutex || {},\n      c = s.pdfEscape,\n      u = s.activeFontKey,\n      h = s.fonts,\n      l = u,\n      f = \"\",\n      d = 0,\n      p = \"\",\n      g = h[l].encoding;\n    if (\"Identity-H\" !== h[l].encoding) return {\n      text: n,\n      x: i,\n      y: a,\n      options: o,\n      mutex: s\n    };\n    for (p = n, l = u, Array.isArray(n) && (p = n[0]), d = 0; d < p.length; d += 1) h[l].metadata.hasOwnProperty(\"cmap\") && (e = h[l].metadata.cmap.unicode.codeMap[p[d].charCodeAt(0)]), e || p[d].charCodeAt(0) < 256 && h[l].metadata.hasOwnProperty(\"Unicode\") ? f += p[d] : f += \"\";\n    var m = \"\";\n    return parseInt(l.slice(1)) < 14 || \"WinAnsiEncoding\" === g ? m = c(f, l).split(\"\").map(function (t) {\n      return t.charCodeAt(0).toString(16);\n    }).join(\"\") : \"Identity-H\" === g && (m = r(f, h[l])), s.isHex = !0, {\n      text: m,\n      x: i,\n      y: a,\n      options: o,\n      mutex: s\n    };\n  };\n  e.events.push([\"postProcessText\", function (t) {\n    var e = t.text || \"\",\n      r = [],\n      n = {\n        text: e,\n        x: t.x,\n        y: t.y,\n        options: t.options,\n        mutex: t.mutex\n      };\n    if (Array.isArray(e)) {\n      var a = 0;\n      for (a = 0; a < e.length; a += 1) Array.isArray(e[a]) && 3 === e[a].length ? r.push([i(Object.assign({}, n, {\n        text: e[a][0]\n      })).text, e[a][1], e[a][2]]) : r.push(i(Object.assign({}, n, {\n        text: e[a]\n      })).text);\n      t.text = r;\n    } else t.text = i(Object.assign({}, n, {\n      text: e\n    })).text;\n  }]);\n}(E),\n/**\n * @license\n * jsPDF virtual FileSystem functionality\n *\n * Licensed under the MIT License.\n * http://opensource.org/licenses/mit-license\n */\nfunction (t) {\n  var e = function () {\n    return void 0 === this.internal.vFS && (this.internal.vFS = {}), !0;\n  };\n  t.existsFileInVFS = function (t) {\n    return e.call(this), void 0 !== this.internal.vFS[t];\n  }, t.addFileToVFS = function (t, r) {\n    return e.call(this), this.internal.vFS[t] = r, this;\n  }, t.getFileFromVFS = function (t) {\n    return e.call(this), void 0 !== this.internal.vFS[t] ? this.internal.vFS[t] : null;\n  };\n}(E.API),\n/**\n * @license\n * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)\n * MIT License\n */\nfunction (t) {\n  t.__bidiEngine__ = t.prototype.__bidiEngine__ = function (t) {\n    var r,\n      n,\n      i,\n      a,\n      o,\n      s,\n      c,\n      u = e,\n      h = [[0, 3, 0, 1, 0, 0, 0], [0, 3, 0, 1, 2, 2, 0], [0, 3, 0, 17, 2, 0, 1], [0, 3, 5, 5, 4, 1, 0], [0, 3, 21, 21, 4, 0, 1], [0, 3, 5, 5, 4, 2, 0]],\n      l = [[2, 0, 1, 1, 0, 1, 0], [2, 0, 1, 1, 0, 2, 0], [2, 0, 2, 1, 3, 2, 0], [2, 0, 2, 33, 3, 1, 1]],\n      f = {\n        L: 0,\n        R: 1,\n        EN: 2,\n        AN: 3,\n        N: 4,\n        B: 5,\n        S: 6\n      },\n      d = {\n        0: 0,\n        5: 1,\n        6: 2,\n        7: 3,\n        32: 4,\n        251: 5,\n        254: 6,\n        255: 7\n      },\n      p = [\"(\", \")\", \"(\", \"<\", \">\", \"<\", \"[\", \"]\", \"[\", \"{\", \"}\", \"{\", \"«\", \"»\", \"«\", \"‹\", \"›\", \"‹\", \"⁅\", \"⁆\", \"⁅\", \"⁽\", \"⁾\", \"⁽\", \"₍\", \"₎\", \"₍\", \"≤\", \"≥\", \"≤\", \"〈\", \"〉\", \"〈\", \"﹙\", \"﹚\", \"﹙\", \"﹛\", \"﹜\", \"﹛\", \"﹝\", \"﹞\", \"﹝\", \"﹤\", \"﹥\", \"﹤\"],\n      g = new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),\n      m = !1,\n      v = 0;\n    this.__bidiEngine__ = {};\n    var b = function (t) {\n        var e = t.charCodeAt(),\n          r = e >> 8,\n          n = d[r];\n        return void 0 !== n ? u[256 * n + (255 & e)] : 252 === r || 253 === r ? \"AL\" : g.test(r) ? \"L\" : 8 === r ? \"R\" : \"N\";\n      },\n      y = function (t) {\n        for (var e, r = 0; r < t.length; r++) {\n          if (\"L\" === (e = b(t.charAt(r)))) return !1;\n          if (\"R\" === e) return !0;\n        }\n        return !1;\n      },\n      w = function (t, e, o, s) {\n        var c,\n          u,\n          h,\n          l,\n          f = e[s];\n        switch (f) {\n          case \"L\":\n          case \"R\":\n            m = !1;\n            break;\n          case \"N\":\n          case \"AN\":\n            break;\n          case \"EN\":\n            m && (f = \"AN\");\n            break;\n          case \"AL\":\n            m = !0, f = \"R\";\n            break;\n          case \"WS\":\n            f = \"N\";\n            break;\n          case \"CS\":\n            s < 1 || s + 1 >= e.length || \"EN\" !== (c = o[s - 1]) && \"AN\" !== c || \"EN\" !== (u = e[s + 1]) && \"AN\" !== u ? f = \"N\" : m && (u = \"AN\"), f = u === c ? u : \"N\";\n            break;\n          case \"ES\":\n            f = \"EN\" === (c = s > 0 ? o[s - 1] : \"B\") && s + 1 < e.length && \"EN\" === e[s + 1] ? \"EN\" : \"N\";\n            break;\n          case \"ET\":\n            if (s > 0 && \"EN\" === o[s - 1]) {\n              f = \"EN\";\n              break;\n            }\n            if (m) {\n              f = \"N\";\n              break;\n            }\n            for (h = s + 1, l = e.length; h < l && \"ET\" === e[h];) h++;\n            f = h < l && \"EN\" === e[h] ? \"EN\" : \"N\";\n            break;\n          case \"NSM\":\n            if (i && !a) {\n              for (l = e.length, h = s + 1; h < l && \"NSM\" === e[h];) h++;\n              if (h < l) {\n                var d = t[s],\n                  p = d >= 1425 && d <= 2303 || 64286 === d;\n                if (c = e[h], p && (\"R\" === c || \"AL\" === c)) {\n                  f = \"R\";\n                  break;\n                }\n              }\n            }\n            f = s < 1 || \"B\" === (c = e[s - 1]) ? \"N\" : o[s - 1];\n            break;\n          case \"B\":\n            m = !1, r = !0, f = v;\n            break;\n          case \"S\":\n            n = !0, f = \"N\";\n            break;\n          case \"LRE\":\n          case \"RLE\":\n          case \"LRO\":\n          case \"RLO\":\n          case \"PDF\":\n            m = !1;\n            break;\n          case \"BN\":\n            f = \"N\";\n        }\n        return f;\n      },\n      N = function (t, e, r) {\n        var n = t.split(\"\");\n        return r && L(n, r, {\n          hiLevel: v\n        }), n.reverse(), e && e.reverse(), n.join(\"\");\n      },\n      L = function (t, e, i) {\n        var a,\n          o,\n          s,\n          c,\n          u,\n          d = -1,\n          p = t.length,\n          g = 0,\n          y = [],\n          N = v ? l : h,\n          L = [];\n        for (m = !1, r = !1, n = !1, o = 0; o < p; o++) L[o] = b(t[o]);\n        for (s = 0; s < p; s++) {\n          if (u = g, y[s] = w(t, L, y, s), a = 240 & (g = N[u][f[y[s]]]), g &= 15, e[s] = c = N[g][5], a > 0) if (16 === a) {\n            for (o = d; o < s; o++) e[o] = 1;\n            d = -1;\n          } else d = -1;\n          if (N[g][6]) -1 === d && (d = s);else if (d > -1) {\n            for (o = d; o < s; o++) e[o] = c;\n            d = -1;\n          }\n          \"B\" === L[s] && (e[s] = 0), i.hiLevel |= c;\n        }\n        n && function (t, e, r) {\n          for (var n = 0; n < r; n++) if (\"S\" === t[n]) {\n            e[n] = v;\n            for (var i = n - 1; i >= 0 && \"WS\" === t[i]; i--) e[i] = v;\n          }\n        }(L, e, p);\n      },\n      A = function (t, e, n, i, a) {\n        if (!(a.hiLevel < t)) {\n          if (1 === t && 1 === v && !r) return e.reverse(), void (n && n.reverse());\n          for (var o, s, c, u, h = e.length, l = 0; l < h;) {\n            if (i[l] >= t) {\n              for (c = l + 1; c < h && i[c] >= t;) c++;\n              for (u = l, s = c - 1; u < s; u++, s--) o = e[u], e[u] = e[s], e[s] = o, n && (o = n[u], n[u] = n[s], n[s] = o);\n              l = c;\n            }\n            l++;\n          }\n        }\n      },\n      x = function (t, e, r) {\n        var n = t.split(\"\"),\n          i = {\n            hiLevel: v\n          };\n        return r || (r = []), L(n, r, i), function (t, e, r) {\n          if (0 !== r.hiLevel && c) for (var n, i = 0; i < t.length; i++) 1 === e[i] && (n = p.indexOf(t[i])) >= 0 && (t[i] = p[n + 1]);\n        }(n, r, i), A(2, n, e, r, i), A(1, n, e, r, i), n.join(\"\");\n      };\n    return this.__bidiEngine__.doBidiReorder = function (t, e, r) {\n      if (function (t, e) {\n        if (e) for (var r = 0; r < t.length; r++) e[r] = r;\n        void 0 === a && (a = y(t)), void 0 === s && (s = y(t));\n      }(t, e), i || !o || s) {\n        if (i && o && a ^ s) v = a ? 1 : 0, t = N(t, e, r);else if (!i && o && s) v = a ? 1 : 0, t = x(t, e, r), t = N(t, e);else if (!i || a || o || s) {\n          if (i && !o && a ^ s) t = N(t, e), a ? (v = 0, t = x(t, e, r)) : (v = 1, t = x(t, e, r), t = N(t, e));else if (i && a && !o && s) v = 1, t = x(t, e, r), t = N(t, e);else if (!i && !o && a ^ s) {\n            var n = c;\n            a ? (v = 1, t = x(t, e, r), v = 0, c = !1, t = x(t, e, r), c = n) : (v = 0, t = x(t, e, r), t = N(t, e), v = 1, c = !1, t = x(t, e, r), c = n, t = N(t, e));\n          }\n        } else v = 0, t = x(t, e, r);\n      } else v = a ? 1 : 0, t = x(t, e, r);\n      return t;\n    }, this.__bidiEngine__.setOptions = function (t) {\n      t && (i = t.isInputVisual, o = t.isOutputVisual, a = t.isInputRtl, s = t.isOutputRtl, c = t.isSymmetricSwapping);\n    }, this.__bidiEngine__.setOptions(t), this.__bidiEngine__;\n  };\n  var e = [\"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"S\", \"B\", \"S\", \"WS\", \"B\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"B\", \"B\", \"B\", \"S\", \"WS\", \"N\", \"N\", \"ET\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"N\", \"N\", \"ES\", \"CS\", \"ES\", \"CS\", \"CS\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"CS\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"N\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"B\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"CS\", \"N\", \"ET\", \"ET\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"N\", \"L\", \"N\", \"N\", \"BN\", \"N\", \"N\", \"ET\", \"ET\", \"EN\", \"EN\", \"N\", \"L\", \"N\", \"N\", \"N\", \"EN\", \"L\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"L\", \"N\", \"N\", \"N\", \"N\", \"N\", \"ET\", \"N\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"R\", \"NSM\", \"R\", \"NSM\", \"NSM\", \"R\", \"NSM\", \"NSM\", \"R\", \"NSM\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"N\", \"N\", \"N\", \"N\", \"N\", \"R\", \"R\", \"R\", \"R\", \"R\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"N\", \"N\", \"AL\", \"ET\", \"ET\", \"AL\", \"CS\", \"AL\", \"N\", \"N\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"AL\", \"AL\", \"N\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"AN\", \"ET\", \"AN\", \"AN\", \"AL\", \"AL\", \"AL\", \"NSM\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"AN\", \"N\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"AL\", \"AL\", \"NSM\", \"NSM\", \"N\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"AL\", \"AL\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"N\", \"AL\", \"AL\", \"NSM\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"N\", \"N\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"AL\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"R\", \"R\", \"N\", \"N\", \"N\", \"N\", \"R\", \"N\", \"N\", \"N\", \"N\", \"N\", \"WS\", \"WS\", \"WS\", \"WS\", \"WS\", \"WS\", \"WS\", \"WS\", \"WS\", \"WS\", \"WS\", \"BN\", \"BN\", \"BN\", \"L\", \"R\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"WS\", \"B\", \"LRE\", \"RLE\", \"PDF\", \"LRO\", \"RLO\", \"CS\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"CS\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"WS\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"N\", \"LRI\", \"RLI\", \"FSI\", \"PDI\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"BN\", \"EN\", \"L\", \"N\", \"N\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"ES\", \"ES\", \"N\", \"N\", \"N\", \"L\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"ES\", \"ES\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"N\", \"N\", \"R\", \"NSM\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"ES\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"N\", \"R\", \"R\", \"R\", \"R\", \"R\", \"N\", \"R\", \"N\", \"R\", \"R\", \"N\", \"R\", \"R\", \"N\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"R\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"NSM\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"CS\", \"N\", \"CS\", \"N\", \"N\", \"CS\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"ET\", \"N\", \"N\", \"ES\", \"ES\", \"N\", \"N\", \"N\", \"N\", \"N\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"N\", \"N\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"N\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"N\", \"N\", \"BN\", \"N\", \"N\", \"N\", \"ET\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"N\", \"N\", \"ES\", \"CS\", \"ES\", \"CS\", \"CS\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"EN\", \"CS\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"L\", \"L\", \"L\", \"L\", \"L\", \"L\", \"N\", \"N\", \"L\", \"L\", \"L\", \"N\", \"N\", \"N\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"ET\", \"ET\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\"],\n    r = new t.__bidiEngine__({\n      isInputVisual: !0\n    });\n  t.API.events.push([\"postProcessText\", function (t) {\n    var e = t.text,\n      n = (t.x, t.y, t.options || {}),\n      i = (t.mutex, n.lang, []);\n    if (n.isInputVisual = \"boolean\" != typeof n.isInputVisual || n.isInputVisual, r.setOptions(n), \"[object Array]\" === Object.prototype.toString.call(e)) {\n      var a = 0;\n      for (i = [], a = 0; a < e.length; a += 1) \"[object Array]\" === Object.prototype.toString.call(e[a]) ? i.push([r.doBidiReorder(e[a][0]), e[a][1], e[a][2]]) : i.push([r.doBidiReorder(e[a])]);\n      t.text = i;\n    } else t.text = r.doBidiReorder(e);\n    r.setOptions({\n      isInputVisual: !0\n    });\n  }]);\n}(E), E.API.TTFFont = function () {\n  function t(t) {\n    var e;\n    if (this.rawData = t, e = this.contents = new ne(t), this.contents.pos = 4, \"ttcf\" === e.readString(4)) throw new Error(\"TTCF not supported.\");\n    e.pos = 0, this.parse(), this.subset = new Le(this), this.registerTTF();\n  }\n  return t.open = function (e) {\n    return new t(e);\n  }, t.prototype.parse = function () {\n    return this.directory = new ie(this.contents), this.head = new se(this), this.name = new pe(this), this.cmap = new ue(this), this.toUnicode = {}, this.hhea = new he(this), this.maxp = new ge(this), this.hmtx = new me(this), this.post = new fe(this), this.os2 = new le(this), this.loca = new Ne(this), this.glyf = new be(this), this.ascender = this.os2.exists && this.os2.ascender || this.hhea.ascender, this.decender = this.os2.exists && this.os2.decender || this.hhea.decender, this.lineGap = this.os2.exists && this.os2.lineGap || this.hhea.lineGap, this.bbox = [this.head.xMin, this.head.yMin, this.head.xMax, this.head.yMax];\n  }, t.prototype.registerTTF = function () {\n    var t, e, r, n, i;\n    if (this.scaleFactor = 1e3 / this.head.unitsPerEm, this.bbox = function () {\n      var e, r, n, i;\n      for (i = [], e = 0, r = (n = this.bbox).length; e < r; e++) t = n[e], i.push(Math.round(t * this.scaleFactor));\n      return i;\n    }.call(this), this.stemV = 0, this.post.exists ? (r = 255 & (n = this.post.italic_angle), 0 != (32768 & (e = n >> 16)) && (e = -(1 + (65535 ^ e))), this.italicAngle = +(e + \".\" + r)) : this.italicAngle = 0, this.ascender = Math.round(this.ascender * this.scaleFactor), this.decender = Math.round(this.decender * this.scaleFactor), this.lineGap = Math.round(this.lineGap * this.scaleFactor), this.capHeight = this.os2.exists && this.os2.capHeight || this.ascender, this.xHeight = this.os2.exists && this.os2.xHeight || 0, this.familyClass = (this.os2.exists && this.os2.familyClass || 0) >> 8, this.isSerif = 1 === (i = this.familyClass) || 2 === i || 3 === i || 4 === i || 5 === i || 7 === i, this.isScript = 10 === this.familyClass, this.flags = 0, this.post.isFixedPitch && (this.flags |= 1), this.isSerif && (this.flags |= 2), this.isScript && (this.flags |= 8), 0 !== this.italicAngle && (this.flags |= 64), this.flags |= 32, !this.cmap.unicode) throw new Error(\"No unicode cmap for font\");\n  }, t.prototype.characterToGlyph = function (t) {\n    var e;\n    return (null != (e = this.cmap.unicode) ? e.codeMap[t] : void 0) || 0;\n  }, t.prototype.widthOfGlyph = function (t) {\n    var e;\n    return e = 1e3 / this.head.unitsPerEm, this.hmtx.forGlyph(t).advance * e;\n  }, t.prototype.widthOfString = function (t, e, r) {\n    var n, i, a, o;\n    for (a = 0, i = 0, o = (t = \"\" + t).length; 0 <= o ? i < o : i > o; i = 0 <= o ? ++i : --i) n = t.charCodeAt(i), a += this.widthOfGlyph(this.characterToGlyph(n)) + r * (1e3 / e) || 0;\n    return a * (e / 1e3);\n  }, t.prototype.lineHeight = function (t, e) {\n    var r;\n    return null == e && (e = !1), r = e ? this.lineGap : 0, (this.ascender + r - this.decender) / 1e3 * t;\n  }, t;\n}();\nvar re,\n  ne = function () {\n    function t(t) {\n      this.data = null != t ? t : [], this.pos = 0, this.length = this.data.length;\n    }\n    return t.prototype.readByte = function () {\n      return this.data[this.pos++];\n    }, t.prototype.writeByte = function (t) {\n      return this.data[this.pos++] = t;\n    }, t.prototype.readUInt32 = function () {\n      return 16777216 * this.readByte() + (this.readByte() << 16) + (this.readByte() << 8) + this.readByte();\n    }, t.prototype.writeUInt32 = function (t) {\n      return this.writeByte(t >>> 24 & 255), this.writeByte(t >> 16 & 255), this.writeByte(t >> 8 & 255), this.writeByte(255 & t);\n    }, t.prototype.readInt32 = function () {\n      var t;\n      return (t = this.readUInt32()) >= 2147483648 ? t - 4294967296 : t;\n    }, t.prototype.writeInt32 = function (t) {\n      return t < 0 && (t += 4294967296), this.writeUInt32(t);\n    }, t.prototype.readUInt16 = function () {\n      return this.readByte() << 8 | this.readByte();\n    }, t.prototype.writeUInt16 = function (t) {\n      return this.writeByte(t >> 8 & 255), this.writeByte(255 & t);\n    }, t.prototype.readInt16 = function () {\n      var t;\n      return (t = this.readUInt16()) >= 32768 ? t - 65536 : t;\n    }, t.prototype.writeInt16 = function (t) {\n      return t < 0 && (t += 65536), this.writeUInt16(t);\n    }, t.prototype.readString = function (t) {\n      var e, r;\n      for (r = [], e = 0; 0 <= t ? e < t : e > t; e = 0 <= t ? ++e : --e) r[e] = String.fromCharCode(this.readByte());\n      return r.join(\"\");\n    }, t.prototype.writeString = function (t) {\n      var e, r, n;\n      for (n = [], e = 0, r = t.length; 0 <= r ? e < r : e > r; e = 0 <= r ? ++e : --e) n.push(this.writeByte(t.charCodeAt(e)));\n      return n;\n    }, t.prototype.readShort = function () {\n      return this.readInt16();\n    }, t.prototype.writeShort = function (t) {\n      return this.writeInt16(t);\n    }, t.prototype.readLongLong = function () {\n      var t, e, r, n, i, a, o, s;\n      return t = this.readByte(), e = this.readByte(), r = this.readByte(), n = this.readByte(), i = this.readByte(), a = this.readByte(), o = this.readByte(), s = this.readByte(), 128 & t ? -1 * (72057594037927940 * (255 ^ t) + 281474976710656 * (255 ^ e) + 1099511627776 * (255 ^ r) + 4294967296 * (255 ^ n) + 16777216 * (255 ^ i) + 65536 * (255 ^ a) + 256 * (255 ^ o) + (255 ^ s) + 1) : 72057594037927940 * t + 281474976710656 * e + 1099511627776 * r + 4294967296 * n + 16777216 * i + 65536 * a + 256 * o + s;\n    }, t.prototype.writeLongLong = function (t) {\n      var e, r;\n      return e = Math.floor(t / 4294967296), r = 4294967295 & t, this.writeByte(e >> 24 & 255), this.writeByte(e >> 16 & 255), this.writeByte(e >> 8 & 255), this.writeByte(255 & e), this.writeByte(r >> 24 & 255), this.writeByte(r >> 16 & 255), this.writeByte(r >> 8 & 255), this.writeByte(255 & r);\n    }, t.prototype.readInt = function () {\n      return this.readInt32();\n    }, t.prototype.writeInt = function (t) {\n      return this.writeInt32(t);\n    }, t.prototype.read = function (t) {\n      var e, r;\n      for (e = [], r = 0; 0 <= t ? r < t : r > t; r = 0 <= t ? ++r : --r) e.push(this.readByte());\n      return e;\n    }, t.prototype.write = function (t) {\n      var e, r, n, i;\n      for (i = [], r = 0, n = t.length; r < n; r++) e = t[r], i.push(this.writeByte(e));\n      return i;\n    }, t;\n  }(),\n  ie = function () {\n    var t;\n    function e(t) {\n      var e, r, n;\n      for (this.scalarType = t.readInt(), this.tableCount = t.readShort(), this.searchRange = t.readShort(), this.entrySelector = t.readShort(), this.rangeShift = t.readShort(), this.tables = {}, r = 0, n = this.tableCount; 0 <= n ? r < n : r > n; r = 0 <= n ? ++r : --r) e = {\n        tag: t.readString(4),\n        checksum: t.readInt(),\n        offset: t.readInt(),\n        length: t.readInt()\n      }, this.tables[e.tag] = e;\n    }\n    return e.prototype.encode = function (e) {\n      var r, n, i, a, o, s, c, u, h, l, f, d, p;\n      for (p in f = Object.keys(e).length, s = Math.log(2), h = 16 * Math.floor(Math.log(f) / s), a = Math.floor(h / s), u = 16 * f - h, (n = new ne()).writeInt(this.scalarType), n.writeShort(f), n.writeShort(h), n.writeShort(a), n.writeShort(u), i = 16 * f, c = n.pos + i, o = null, d = [], e) for (l = e[p], n.writeString(p), n.writeInt(t(l)), n.writeInt(c), n.writeInt(l.length), d = d.concat(l), \"head\" === p && (o = c), c += l.length; c % 4;) d.push(0), c++;\n      return n.write(d), r = 2981146554 - t(n.data), n.pos = o + 8, n.writeUInt32(r), n.data;\n    }, t = function (t) {\n      var e, r, n, i;\n      for (t = ve.call(t); t.length % 4;) t.push(0);\n      for (n = new ne(t), r = 0, e = 0, i = t.length; e < i; e = e += 4) r += n.readUInt32();\n      return 4294967295 & r;\n    }, e;\n  }(),\n  ae = {}.hasOwnProperty,\n  oe = function (t, e) {\n    for (var r in e) ae.call(e, r) && (t[r] = e[r]);\n    function n() {\n      this.constructor = t;\n    }\n    return n.prototype = e.prototype, t.prototype = new n(), t.__super__ = e.prototype, t;\n  };\nre = function () {\n  function t(t) {\n    var e;\n    this.file = t, e = this.file.directory.tables[this.tag], this.exists = !!e, e && (this.offset = e.offset, this.length = e.length, this.parse(this.file.contents));\n  }\n  return t.prototype.parse = function () {}, t.prototype.encode = function () {}, t.prototype.raw = function () {\n    return this.exists ? (this.file.contents.pos = this.offset, this.file.contents.read(this.length)) : null;\n  }, t;\n}();\nvar se = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"head\", e.prototype.parse = function (t) {\n      return t.pos = this.offset, this.version = t.readInt(), this.revision = t.readInt(), this.checkSumAdjustment = t.readInt(), this.magicNumber = t.readInt(), this.flags = t.readShort(), this.unitsPerEm = t.readShort(), this.created = t.readLongLong(), this.modified = t.readLongLong(), this.xMin = t.readShort(), this.yMin = t.readShort(), this.xMax = t.readShort(), this.yMax = t.readShort(), this.macStyle = t.readShort(), this.lowestRecPPEM = t.readShort(), this.fontDirectionHint = t.readShort(), this.indexToLocFormat = t.readShort(), this.glyphDataFormat = t.readShort();\n    }, e.prototype.encode = function (t) {\n      var e;\n      return (e = new ne()).writeInt(this.version), e.writeInt(this.revision), e.writeInt(this.checkSumAdjustment), e.writeInt(this.magicNumber), e.writeShort(this.flags), e.writeShort(this.unitsPerEm), e.writeLongLong(this.created), e.writeLongLong(this.modified), e.writeShort(this.xMin), e.writeShort(this.yMin), e.writeShort(this.xMax), e.writeShort(this.yMax), e.writeShort(this.macStyle), e.writeShort(this.lowestRecPPEM), e.writeShort(this.fontDirectionHint), e.writeShort(t), e.writeShort(this.glyphDataFormat), e.data;\n    }, e;\n  }(),\n  ce = function () {\n    function t(t, e) {\n      var r, n, i, a, o, s, c, u, h, l, f, d, p, g, m, v, b;\n      switch (this.platformID = t.readUInt16(), this.encodingID = t.readShort(), this.offset = e + t.readInt(), h = t.pos, t.pos = this.offset, this.format = t.readUInt16(), this.length = t.readUInt16(), this.language = t.readUInt16(), this.isUnicode = 3 === this.platformID && 1 === this.encodingID && 4 === this.format || 0 === this.platformID && 4 === this.format, this.codeMap = {}, this.format) {\n        case 0:\n          for (s = 0; s < 256; ++s) this.codeMap[s] = t.readByte();\n          break;\n        case 4:\n          for (f = t.readUInt16(), l = f / 2, t.pos += 6, i = function () {\n            var e, r;\n            for (r = [], s = e = 0; 0 <= l ? e < l : e > l; s = 0 <= l ? ++e : --e) r.push(t.readUInt16());\n            return r;\n          }(), t.pos += 2, p = function () {\n            var e, r;\n            for (r = [], s = e = 0; 0 <= l ? e < l : e > l; s = 0 <= l ? ++e : --e) r.push(t.readUInt16());\n            return r;\n          }(), c = function () {\n            var e, r;\n            for (r = [], s = e = 0; 0 <= l ? e < l : e > l; s = 0 <= l ? ++e : --e) r.push(t.readUInt16());\n            return r;\n          }(), u = function () {\n            var e, r;\n            for (r = [], s = e = 0; 0 <= l ? e < l : e > l; s = 0 <= l ? ++e : --e) r.push(t.readUInt16());\n            return r;\n          }(), n = (this.length - t.pos + this.offset) / 2, o = function () {\n            var e, r;\n            for (r = [], s = e = 0; 0 <= n ? e < n : e > n; s = 0 <= n ? ++e : --e) r.push(t.readUInt16());\n            return r;\n          }(), s = m = 0, b = i.length; m < b; s = ++m) for (g = i[s], r = v = d = p[s]; d <= g ? v <= g : v >= g; r = d <= g ? ++v : --v) 0 === u[s] ? a = r + c[s] : 0 !== (a = o[u[s] / 2 + (r - d) - (l - s)] || 0) && (a += c[s]), this.codeMap[r] = 65535 & a;\n      }\n      t.pos = h;\n    }\n    return t.encode = function (t, e) {\n      var r, n, i, a, o, s, c, u, h, l, f, d, p, g, m, v, b, y, w, N, L, A, x, S, _, P, k, I, F, C, j, O, B, M, E, q, D, R, T, U, z, H, W, V, G, Y;\n      switch (I = new ne(), a = Object.keys(t).sort(function (t, e) {\n        return t - e;\n      }), e) {\n        case \"macroman\":\n          for (p = 0, g = function () {\n            var t = [];\n            for (d = 0; d < 256; ++d) t.push(0);\n            return t;\n          }(), v = {\n            0: 0\n          }, i = {}, F = 0, B = a.length; F < B; F++) null == v[W = t[n = a[F]]] && (v[W] = ++p), i[n] = {\n            old: t[n],\n            new: v[t[n]]\n          }, g[n] = v[t[n]];\n          return I.writeUInt16(1), I.writeUInt16(0), I.writeUInt32(12), I.writeUInt16(0), I.writeUInt16(262), I.writeUInt16(0), I.write(g), {\n            charMap: i,\n            subtable: I.data,\n            maxGlyphID: p + 1\n          };\n        case \"unicode\":\n          for (P = [], h = [], b = 0, v = {}, r = {}, m = c = null, C = 0, M = a.length; C < M; C++) null == v[w = t[n = a[C]]] && (v[w] = ++b), r[n] = {\n            old: w,\n            new: v[w]\n          }, o = v[w] - n, null != m && o === c || (m && h.push(m), P.push(n), c = o), m = n;\n          for (m && h.push(m), h.push(65535), P.push(65535), S = 2 * (x = P.length), A = 2 * Math.pow(Math.log(x) / Math.LN2, 2), l = Math.log(A / 2) / Math.LN2, L = 2 * x - A, s = [], N = [], f = [], d = j = 0, E = P.length; j < E; d = ++j) {\n            if (_ = P[d], u = h[d], 65535 === _) {\n              s.push(0), N.push(0);\n              break;\n            }\n            if (_ - (k = r[_].new) >= 32768) for (s.push(0), N.push(2 * (f.length + x - d)), n = O = _; _ <= u ? O <= u : O >= u; n = _ <= u ? ++O : --O) f.push(r[n].new);else s.push(k - _), N.push(0);\n          }\n          for (I.writeUInt16(3), I.writeUInt16(1), I.writeUInt32(12), I.writeUInt16(4), I.writeUInt16(16 + 8 * x + 2 * f.length), I.writeUInt16(0), I.writeUInt16(S), I.writeUInt16(A), I.writeUInt16(l), I.writeUInt16(L), z = 0, q = h.length; z < q; z++) n = h[z], I.writeUInt16(n);\n          for (I.writeUInt16(0), H = 0, D = P.length; H < D; H++) n = P[H], I.writeUInt16(n);\n          for (V = 0, R = s.length; V < R; V++) o = s[V], I.writeUInt16(o);\n          for (G = 0, T = N.length; G < T; G++) y = N[G], I.writeUInt16(y);\n          for (Y = 0, U = f.length; Y < U; Y++) p = f[Y], I.writeUInt16(p);\n          return {\n            charMap: r,\n            subtable: I.data,\n            maxGlyphID: b + 1\n          };\n      }\n    }, t;\n  }(),\n  ue = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"cmap\", e.prototype.parse = function (t) {\n      var e, r, n;\n      for (t.pos = this.offset, this.version = t.readUInt16(), n = t.readUInt16(), this.tables = [], this.unicode = null, r = 0; 0 <= n ? r < n : r > n; r = 0 <= n ? ++r : --r) e = new ce(t, this.offset), this.tables.push(e), e.isUnicode && null == this.unicode && (this.unicode = e);\n      return !0;\n    }, e.encode = function (t, e) {\n      var r, n;\n      return null == e && (e = \"macroman\"), r = ce.encode(t, e), (n = new ne()).writeUInt16(0), n.writeUInt16(1), r.table = n.data.concat(r.subtable), r;\n    }, e;\n  }(),\n  he = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"hhea\", e.prototype.parse = function (t) {\n      return t.pos = this.offset, this.version = t.readInt(), this.ascender = t.readShort(), this.decender = t.readShort(), this.lineGap = t.readShort(), this.advanceWidthMax = t.readShort(), this.minLeftSideBearing = t.readShort(), this.minRightSideBearing = t.readShort(), this.xMaxExtent = t.readShort(), this.caretSlopeRise = t.readShort(), this.caretSlopeRun = t.readShort(), this.caretOffset = t.readShort(), t.pos += 8, this.metricDataFormat = t.readShort(), this.numberOfMetrics = t.readUInt16();\n    }, e;\n  }(),\n  le = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"OS/2\", e.prototype.parse = function (t) {\n      if (t.pos = this.offset, this.version = t.readUInt16(), this.averageCharWidth = t.readShort(), this.weightClass = t.readUInt16(), this.widthClass = t.readUInt16(), this.type = t.readShort(), this.ySubscriptXSize = t.readShort(), this.ySubscriptYSize = t.readShort(), this.ySubscriptXOffset = t.readShort(), this.ySubscriptYOffset = t.readShort(), this.ySuperscriptXSize = t.readShort(), this.ySuperscriptYSize = t.readShort(), this.ySuperscriptXOffset = t.readShort(), this.ySuperscriptYOffset = t.readShort(), this.yStrikeoutSize = t.readShort(), this.yStrikeoutPosition = t.readShort(), this.familyClass = t.readShort(), this.panose = function () {\n        var e, r;\n        for (r = [], e = 0; e < 10; ++e) r.push(t.readByte());\n        return r;\n      }(), this.charRange = function () {\n        var e, r;\n        for (r = [], e = 0; e < 4; ++e) r.push(t.readInt());\n        return r;\n      }(), this.vendorID = t.readString(4), this.selection = t.readShort(), this.firstCharIndex = t.readShort(), this.lastCharIndex = t.readShort(), this.version > 0 && (this.ascent = t.readShort(), this.descent = t.readShort(), this.lineGap = t.readShort(), this.winAscent = t.readShort(), this.winDescent = t.readShort(), this.codePageRange = function () {\n        var e, r;\n        for (r = [], e = 0; e < 2; e = ++e) r.push(t.readInt());\n        return r;\n      }(), this.version > 1)) return this.xHeight = t.readShort(), this.capHeight = t.readShort(), this.defaultChar = t.readShort(), this.breakChar = t.readShort(), this.maxContext = t.readShort();\n    }, e;\n  }(),\n  fe = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"post\", e.prototype.parse = function (t) {\n      var e, r, n;\n      switch (t.pos = this.offset, this.format = t.readInt(), this.italicAngle = t.readInt(), this.underlinePosition = t.readShort(), this.underlineThickness = t.readShort(), this.isFixedPitch = t.readInt(), this.minMemType42 = t.readInt(), this.maxMemType42 = t.readInt(), this.minMemType1 = t.readInt(), this.maxMemType1 = t.readInt(), this.format) {\n        case 65536:\n          break;\n        case 131072:\n          var i;\n          for (r = t.readUInt16(), this.glyphNameIndex = [], i = 0; 0 <= r ? i < r : i > r; i = 0 <= r ? ++i : --i) this.glyphNameIndex.push(t.readUInt16());\n          for (this.names = [], n = []; t.pos < this.offset + this.length;) e = t.readByte(), n.push(this.names.push(t.readString(e)));\n          return n;\n        case 151552:\n          return r = t.readUInt16(), this.offsets = t.read(r);\n        case 196608:\n          break;\n        case 262144:\n          return this.map = function () {\n            var e, r, n;\n            for (n = [], i = e = 0, r = this.file.maxp.numGlyphs; 0 <= r ? e < r : e > r; i = 0 <= r ? ++e : --e) n.push(t.readUInt32());\n            return n;\n          }.call(this);\n      }\n    }, e;\n  }(),\n  de = function (t, e) {\n    this.raw = t, this.length = t.length, this.platformID = e.platformID, this.encodingID = e.encodingID, this.languageID = e.languageID;\n  },\n  pe = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"name\", e.prototype.parse = function (t) {\n      var e, r, n, i, a, o, s, c, u, h, l;\n      for (t.pos = this.offset, t.readShort(), e = t.readShort(), o = t.readShort(), r = [], i = 0; 0 <= e ? i < e : i > e; i = 0 <= e ? ++i : --i) r.push({\n        platformID: t.readShort(),\n        encodingID: t.readShort(),\n        languageID: t.readShort(),\n        nameID: t.readShort(),\n        length: t.readShort(),\n        offset: this.offset + o + t.readShort()\n      });\n      for (s = {}, i = u = 0, h = r.length; u < h; i = ++u) n = r[i], t.pos = n.offset, c = t.readString(n.length), a = new de(c, n), null == s[l = n.nameID] && (s[l] = []), s[n.nameID].push(a);\n      this.strings = s, this.copyright = s[0], this.fontFamily = s[1], this.fontSubfamily = s[2], this.uniqueSubfamily = s[3], this.fontName = s[4], this.version = s[5];\n      try {\n        this.postscriptName = s[6][0].raw.replace(/[\\x00-\\x19\\x80-\\xff]/g, \"\");\n      } catch (t) {\n        this.postscriptName = s[4][0].raw.replace(/[\\x00-\\x19\\x80-\\xff]/g, \"\");\n      }\n      return this.trademark = s[7], this.manufacturer = s[8], this.designer = s[9], this.description = s[10], this.vendorUrl = s[11], this.designerUrl = s[12], this.license = s[13], this.licenseUrl = s[14], this.preferredFamily = s[15], this.preferredSubfamily = s[17], this.compatibleFull = s[18], this.sampleText = s[19];\n    }, e;\n  }(),\n  ge = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"maxp\", e.prototype.parse = function (t) {\n      return t.pos = this.offset, this.version = t.readInt(), this.numGlyphs = t.readUInt16(), this.maxPoints = t.readUInt16(), this.maxContours = t.readUInt16(), this.maxCompositePoints = t.readUInt16(), this.maxComponentContours = t.readUInt16(), this.maxZones = t.readUInt16(), this.maxTwilightPoints = t.readUInt16(), this.maxStorage = t.readUInt16(), this.maxFunctionDefs = t.readUInt16(), this.maxInstructionDefs = t.readUInt16(), this.maxStackElements = t.readUInt16(), this.maxSizeOfInstructions = t.readUInt16(), this.maxComponentElements = t.readUInt16(), this.maxComponentDepth = t.readUInt16();\n    }, e;\n  }(),\n  me = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"hmtx\", e.prototype.parse = function (t) {\n      var e, r, n, i, a, o, s;\n      for (t.pos = this.offset, this.metrics = [], e = 0, o = this.file.hhea.numberOfMetrics; 0 <= o ? e < o : e > o; e = 0 <= o ? ++e : --e) this.metrics.push({\n        advance: t.readUInt16(),\n        lsb: t.readInt16()\n      });\n      for (n = this.file.maxp.numGlyphs - this.file.hhea.numberOfMetrics, this.leftSideBearings = function () {\n        var r, i;\n        for (i = [], e = r = 0; 0 <= n ? r < n : r > n; e = 0 <= n ? ++r : --r) i.push(t.readInt16());\n        return i;\n      }(), this.widths = function () {\n        var t, e, r, n;\n        for (n = [], t = 0, e = (r = this.metrics).length; t < e; t++) i = r[t], n.push(i.advance);\n        return n;\n      }.call(this), r = this.widths[this.widths.length - 1], s = [], e = a = 0; 0 <= n ? a < n : a > n; e = 0 <= n ? ++a : --a) s.push(this.widths.push(r));\n      return s;\n    }, e.prototype.forGlyph = function (t) {\n      return t in this.metrics ? this.metrics[t] : {\n        advance: this.metrics[this.metrics.length - 1].advance,\n        lsb: this.leftSideBearings[t - this.metrics.length]\n      };\n    }, e;\n  }(),\n  ve = [].slice,\n  be = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"glyf\", e.prototype.parse = function () {\n      return this.cache = {};\n    }, e.prototype.glyphFor = function (t) {\n      var e, r, n, i, a, o, s, c, u, h;\n      return t in this.cache ? this.cache[t] : (i = this.file.loca, e = this.file.contents, r = i.indexOf(t), 0 === (n = i.lengthOf(t)) ? this.cache[t] = null : (e.pos = this.offset + r, a = (o = new ne(e.read(n))).readShort(), c = o.readShort(), h = o.readShort(), s = o.readShort(), u = o.readShort(), this.cache[t] = -1 === a ? new we(o, c, h, s, u) : new ye(o, a, c, h, s, u), this.cache[t]));\n    }, e.prototype.encode = function (t, e, r) {\n      var n, i, a, o, s;\n      for (a = [], i = [], o = 0, s = e.length; o < s; o++) n = t[e[o]], i.push(a.length), n && (a = a.concat(n.encode(r)));\n      return i.push(a.length), {\n        table: a,\n        offsets: i\n      };\n    }, e;\n  }(),\n  ye = function () {\n    function t(t, e, r, n, i, a) {\n      this.raw = t, this.numberOfContours = e, this.xMin = r, this.yMin = n, this.xMax = i, this.yMax = a, this.compound = !1;\n    }\n    return t.prototype.encode = function () {\n      return this.raw.data;\n    }, t;\n  }(),\n  we = function () {\n    function t(t, e, r, n, i) {\n      var a, o;\n      for (this.raw = t, this.xMin = e, this.yMin = r, this.xMax = n, this.yMax = i, this.compound = !0, this.glyphIDs = [], this.glyphOffsets = [], a = this.raw; o = a.readShort(), this.glyphOffsets.push(a.pos), this.glyphIDs.push(a.readUInt16()), 32 & o;) a.pos += 1 & o ? 4 : 2, 128 & o ? a.pos += 8 : 64 & o ? a.pos += 4 : 8 & o && (a.pos += 2);\n    }\n    return 1, 8, 32, 64, 128, t.prototype.encode = function () {\n      var t, e, r;\n      for (e = new ne(ve.call(this.raw.data)), t = 0, r = this.glyphIDs.length; t < r; ++t) e.pos = this.glyphOffsets[t];\n      return e.data;\n    }, t;\n  }(),\n  Ne = function (t) {\n    function e() {\n      return e.__super__.constructor.apply(this, arguments);\n    }\n    return oe(e, re), e.prototype.tag = \"loca\", e.prototype.parse = function (t) {\n      var e, r;\n      return t.pos = this.offset, e = this.file.head.indexToLocFormat, this.offsets = 0 === e ? function () {\n        var e, n;\n        for (n = [], r = 0, e = this.length; r < e; r += 2) n.push(2 * t.readUInt16());\n        return n;\n      }.call(this) : function () {\n        var e, n;\n        for (n = [], r = 0, e = this.length; r < e; r += 4) n.push(t.readUInt32());\n        return n;\n      }.call(this);\n    }, e.prototype.indexOf = function (t) {\n      return this.offsets[t];\n    }, e.prototype.lengthOf = function (t) {\n      return this.offsets[t + 1] - this.offsets[t];\n    }, e.prototype.encode = function (t, e) {\n      for (var r = new Uint32Array(this.offsets.length), n = 0, i = 0, a = 0; a < r.length; ++a) if (r[a] = n, i < e.length && e[i] == a) {\n        ++i, r[a] = n;\n        var o = this.offsets[a],\n          s = this.offsets[a + 1] - o;\n        s > 0 && (n += s);\n      }\n      for (var c = new Array(4 * r.length), u = 0; u < r.length; ++u) c[4 * u + 3] = 255 & r[u], c[4 * u + 2] = (65280 & r[u]) >> 8, c[4 * u + 1] = (16711680 & r[u]) >> 16, c[4 * u] = (4278190080 & r[u]) >> 24;\n      return c;\n    }, e;\n  }(),\n  Le = function () {\n    function t(t) {\n      this.font = t, this.subset = {}, this.unicodes = {}, this.next = 33;\n    }\n    return t.prototype.generateCmap = function () {\n      var t, e, r, n, i;\n      for (e in n = this.font.cmap.tables[0].codeMap, t = {}, i = this.subset) r = i[e], t[e] = n[r];\n      return t;\n    }, t.prototype.glyphsFor = function (t) {\n      var e, r, n, i, a, o, s;\n      for (n = {}, a = 0, o = t.length; a < o; a++) n[i = t[a]] = this.font.glyf.glyphFor(i);\n      for (i in e = [], n) (null != (r = n[i]) ? r.compound : void 0) && e.push.apply(e, r.glyphIDs);\n      if (e.length > 0) for (i in s = this.glyphsFor(e)) r = s[i], n[i] = r;\n      return n;\n    }, t.prototype.encode = function (t, e) {\n      var r, n, i, a, o, s, c, u, h, l, f, d, p, g, m;\n      for (n in r = ue.encode(this.generateCmap(), \"unicode\"), a = this.glyphsFor(t), f = {\n        0: 0\n      }, m = r.charMap) f[(s = m[n]).old] = s.new;\n      for (d in l = r.maxGlyphID, a) d in f || (f[d] = l++);\n      return u = function (t) {\n        var e, r;\n        for (e in r = {}, t) r[t[e]] = e;\n        return r;\n      }(f), h = Object.keys(u).sort(function (t, e) {\n        return t - e;\n      }), p = function () {\n        var t, e, r;\n        for (r = [], t = 0, e = h.length; t < e; t++) o = h[t], r.push(u[o]);\n        return r;\n      }(), i = this.font.glyf.encode(a, p, f), c = this.font.loca.encode(i.offsets, p), g = {\n        cmap: this.font.cmap.raw(),\n        glyf: i.table,\n        loca: c,\n        hmtx: this.font.hmtx.raw(),\n        hhea: this.font.hhea.raw(),\n        maxp: this.font.maxp.raw(),\n        post: this.font.post.raw(),\n        name: this.font.name.raw(),\n        head: this.font.head.encode(e)\n      }, this.font.os2.exists && (g[\"OS/2\"] = this.font.os2.raw()), this.font.directory.encode(g);\n    }, t;\n  }();\nE.API.PDFObject = function () {\n  var t;\n  function e() {}\n  return t = function (t, e) {\n    return (Array(e + 1).join(\"0\") + t).slice(-e);\n  }, e.convert = function (r) {\n    var n, i, a, o;\n    if (Array.isArray(r)) return \"[\" + function () {\n      var t, i, a;\n      for (a = [], t = 0, i = r.length; t < i; t++) n = r[t], a.push(e.convert(n));\n      return a;\n    }().join(\" \") + \"]\";\n    if (\"string\" == typeof r) return \"/\" + r;\n    if (null != r ? r.isString : void 0) return \"(\" + r + \")\";\n    if (r instanceof Date) return \"(D:\" + t(r.getUTCFullYear(), 4) + t(r.getUTCMonth(), 2) + t(r.getUTCDate(), 2) + t(r.getUTCHours(), 2) + t(r.getUTCMinutes(), 2) + t(r.getUTCSeconds(), 2) + \"Z)\";\n    if (\"[object Object]\" === {}.toString.call(r)) {\n      for (i in a = [\"<<\"], r) o = r[i], a.push(\"/\" + i + \" \" + e.convert(o));\n      return a.push(\">>\"), a.join(\"\\n\");\n    }\n    return \"\" + r;\n  }, e;\n}();\n/* harmony default export */ __webpack_exports__[\"default\"] = (E);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvanNwZGYvZGlzdC9qc3BkZi5lcy5taW4uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFPQTtBQ0xBO0FBQ0E7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFwQkE7QUFJQTtBQWlCQTtBQVhBO0FBSUE7QUFBQTtBQ1dBO0FBQUE7QUFFQTtBQUdBO0FBQUE7QUFHQTtBQUFBO0FBRUE7QUFHQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBaUJBO0FBQUE7QUFJQTtBQ2xGQTtBRGtGQTtBQVVBO0FBRUE7QUFDQTtBQXNCQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBS0E7QUFHQTtBQUdBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQTdIQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBV0E7QUFBQTtBQUVBO0FBZ0hBO0FBSUE7QUFTQTtBQUdBO0FBRUE7QUFBQTtBQUtBO0FBR0E7QUFBQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUFBOzs7Ozs7O0FFcExBO0FBQUE7QUFDQTtBQWlLQTtBQWhKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQVVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUlBO0FBQUE7Ozs7Ozs7Ozs7QUNoT0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBdUVBO0FBR0E7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBSUE7QUFJQTtBQWtCQTtBQUFBO0FBRUE7QUFBQTtBQU9BO0FBRUE7QUYxSkE7QUU2SkE7QUFFQTtBQUFBO0FBSUE7QUFDQTtBQVNBO0FBQUE7QUFLQTtBQVVBO0FBQUE7QUFKQTtBQWFBO0FBOUJBO0FBQ0E7QUFDQTtBQThCQTtBQUFBO0FBQ0E7QUFLQTtBQUVBO0FBQUE7QUFPQTs7Ozs7Ozs7O0FDck1BO0FBQUE7QUFiQTtBQWVBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBUUE7QUFFQTs7Ozs7Ozs7Ozs7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWdCQTtBQUFBO0FBRUE7QUFJQTtBQUFBO0FBSUE7QUFBQTtBQUtBO0FBR0E7QUFBQTtBQVVBO0FDMURBO0FBQUE7QUFLQTtBQUtBO0FBQ0E7QUEwQkE7QUFBQTtBQUdBO0FDM0JBO0FBQUE7QUFHQTtBQUdBO0FBRUE7QUFZQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBT0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUlBO0FBQUE7QUFFQTtBQVdBO0FBR0E7QUFZQTtBQW9CQTtBQUFBO0FBS0E7QUFHQTtBQUFBO0FBRUE7QUFRQTtBQUdBO0FBQUE7QUFFQTtBQVdBO0FBc0NBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQTJCQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFHQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBcUJBO0FBQUE7QUFHQTtBQUdBO0FBQUE7QUFZQTtBQVFBO0FBYUE7QUE2QkE7QUFBQTtBQUNBO0FBT0E7QUFxQkE7QUFDQTtBQU9BO0FBaUJBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFHQTtBQU9BO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFNQTtBQUFBO0FBRUE7QUFFQTtBQUdBO0FBRUE7QUFLQTtBQUlBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFFQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBRUE7QUFJQTtBQUtBO0FBQUE7QUFHQTtBQUtBO0FBQUE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBTUE7QUFDQTtBQWFBO0FBV0E7QUFBQTtBQUVBO0FBV0E7QUFDQTtBQUFBO0FBTUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBV0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFJQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBSUE7QUFBQTtBQUNBO0FBSUE7QUFXQTtBQUFBO0FBRUE7QUFXQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUtBO0FBR0E7QUFBQTtBQUlBO0FBSUE7QUFBQTtBQUtBO0FBQ0E7QUFHQTtBQWlCQTtBQUFBO0FBQ0E7QUFBQTtBQWVBO0FBQUE7QUFNQTtBQUFBO0FBWUE7QUFBQTtBQUlBO0FBSUE7QUFZQTtBQUFBO0FBRUE7QUFZQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBT0E7QUFPQTtBQUNBO0FBQUE7QUFGQTtBQVlBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQWlCQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQWtCQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBK0JBO0FBS0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQWNBO0FBS0E7QUFHQTtBQUdBO0FBRUE7QUFFQTtBQUFBO0FBWUE7QUFTQTtBQUNBO0FBQ0E7QUFwQkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBc0JBO0FBQUE7QUFLQTtBQU9BO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQVNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBU0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFTQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQVNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBU0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFTQTtBQUFBO0FBQ0E7QUFBQTtBQVNBO0FBQUE7QUFDQTtBQUFBO0FBU0E7QUFBQTtBQUNBO0FBQUE7QUFTQTtBQUFBO0FBZ0JBO0FBQUE7QUFlQTtBQUdBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFTQTtBQUVBO0FBQUE7QUFDQTtBQU9BO0FBRUE7QUFBQTtBQUNBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUdBO0FBU0E7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQU9BO0FBRUE7QUFJQTtBQUtBO0FBQUE7QUFtQkE7QUEyQkE7QUFJQTtBQVdBO0FBT0E7QUFlQTtBQVVBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFJQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQU1BO0FBTUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFHQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBUUE7QUFTQTtBQUFBO0FBQUE7QUFiQTtBQUdBO0FBQUE7QUFBQTtBQWdCQTtBQUVBO0FBR0E7QUFDQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUFBO0FBU0E7QUFFQTtBQUVBO0FBQUE7QUFLQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQU1BO0FBUUE7QUFFQTtBQUtBO0FBQUE7QUFBQTtBQUlBO0FBS0E7QUFBQTtBQVFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQUE7QUFLQTtBQUdBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFPQTtBQUNBO0FBR0E7QUFFQTtBQVFBO0FBRkE7QUFBQTtBQUFBO0FBTUE7QUFJQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFRQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFXQTtBQUNBO0FBQUE7QUFNQTtBQUFBO0FBSUE7QUFJQTtBQUlBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQTRFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFFQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBSUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWVBO0FBSUE7QUFBQTtBQU9BO0FBTUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBUUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUdBO0FBQUE7QUFHQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFLQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBRUE7QUFHQTtBQVNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFPQTtBQTBCQTtBQUdBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFNQTtBQU1BO0FBQUE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFJQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFLQTtBQUFBO0FBa0JBO0FBQ0E7QUFHQTtBQUNBO0FBU0E7QUFHQTtBQUFBO0FBYUE7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQVNBO0FBR0E7QUFBQTtBQWVBO0FBUUE7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUtBO0FBR0E7QUFBQTtBQUNBO0FBT0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQUE7QUFPQTtBQUdBO0FBQUE7QUF5REE7QUF1Q0E7QUFrQkE7QUFBQTtBQUFBO0FBV0E7QUFHQTtBQUlBO0FBYUE7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUVBO0FBa0JBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUdBO0FBQUE7QUFDQTtBQWdDQTtBQUVBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFLQTtBQWNBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFPQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQWlCQTtBQUFBO0FBQ0E7QUFBQTtBQXNDQTtBQUdBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQW1CQTtBQUVBO0FBR0E7QUFBQTtBQUdBO0FBT0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBR0E7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFZQTtBQUdBO0FBQ0E7QUFVQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFHQTtBQUVBO0FBR0E7QUFNQTtBQUFBO0FBTUE7QUFDQTtBQVdBO0FBRUE7QUFTQTtBQUdBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUE0QkE7QUFFQTtBQU1BO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFNQTtBQUVBO0FBR0E7QUFHQTtBQUdBO0FBRUE7QUFjQTtBQUFBO0FBS0E7QUFBQTtBQUdBO0FBR0E7QUFHQTtBQVdBO0FBQUE7QUFHQTtBQUFBO0FBRUE7QUFHQTtBQUlBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFHQTtBQUdBO0FBcUJBO0FBVEE7QUFBQTtBQU1BO0FBQUE7QUFPQTtBQUNBO0FBR0E7QUFBQTtBQUdBO0FBQUE7QUFTQTtBQUFBO0FBRUE7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBSUE7QUFFQTtBQUFBO0FBR0E7QUFJQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFBQTtBQU9BO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBR0E7QUFHQTtBQUlBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFnQkE7QUFBQTtBQUVBO0FBbUJBO0FBR0E7QUFZQTtBQUdBO0FBWUE7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBRUE7QUFDQTtBQUtBO0FBRUE7QUFBQTtBQUVBO0FBWUE7QUFFQTtBQXVDQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBa0JBO0FBbkJBO0FBQUE7QUFZQTtBQUVBO0FBRUE7QUFBQTtBQXdCQTtBQUNBO0FBQ0E7QUFBQTtBQVdBO0FBSUE7QUFJQTtBQUNBO0FBSUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUdBO0FBb0JBO0FBSUE7QUFBQTtBQUdBO0FBQ0E7QUFHQTtBQWtCQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBS0E7QUFBQTtBQUlBO0FBR0E7QUFBQTtBQWNBO0FBQUE7QUFBQTtBQWlCQTtBQUlBO0FBTUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBZ0JBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBZ0JBO0FBT0E7QUFJQTtBQUNBO0FBQUE7QUFLQTtBQW9CQTtBQUFBO0FBUUE7QUFJQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQU9BO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFPQTtBQUFBO0FBS0E7QUFFQTtBQVVBO0FBS0E7QUFFQTtBQVVBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBZ0JBO0FBQUE7QUFBQTtBQVVBO0FBRUE7QUFPQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFNQTtBQU1BO0FBR0E7QUFDQTtBQU1BO0FBWUE7QUFFQTtBQTRCQTtBQUdBO0FBR0E7QUFFQTtBQUdBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUF1QkE7QUFLQTtBQUNBO0FBRUE7QUFVQTtBQUFBO0FBNkJBO0FBUUE7QUFhQTtBQUFBO0FBQ0E7QUFZQTtBQUVBO0FBQUE7QUFHQTtBQWVBO0FBSUE7QUFHQTtBQUNBO0FBS0E7QUFBQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFTQTtBQUFBO0FBQUE7QUFHQTtBQVdBO0FBQUE7QUFFQTtBQVdBO0FBQUE7QUFFQTtBQWFBO0FBRUE7QUFhQTtBQUVBO0FBYUE7QUFFQTtBQWFBO0FBRUE7QUFBQTtBQUlBO0FBR0E7QUFJQTtBQUVBO0FBU0E7QUFBQTtBQUdBO0FBUUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUdBO0FBRUE7QUFBQTtBQWFBO0FBS0E7QUF1QkE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFjQTtBQUFBO0FBRUE7QUFjQTtBQUFBO0FBRUE7QUFtQkE7QUFBQTtBQVlBO0FBaUJBO0FBQUE7QUFRQTtBQUtBO0FBNkNBO0FBRUE7QUF5QkE7QUE4QkE7QUFTQTtBQWFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBd0JBO0FBRUE7QUFpQkE7QUFpQ0E7QUFXQTtBQWNBO0FBaUNBO0FBV0E7QUFFQTtBQXNCQTtBQXdCQTtBQVFBO0FBR0E7QUFBQTtBQVNBO0FBdUJBO0FBRUE7QUFFQTtBQWdCQTtBQUtBO0FBQUE7QUFFQTtBQUFBO0FBWUE7QUFDQTtBQWNBO0FBQUE7QUFHQTtBQUZBO0FBQUE7QUFTQTtBQUtBO0FBc0JBO0FBTUE7QUFTQTtBQUFBO0FBR0E7QUFVQTtBQUFBO0FBQ0E7QUFhQTtBQUNBO0FBSUE7QUFpQkE7QUFFQTtBQU1BO0FBSUE7QUFDQTtBQU1BO0FBQUE7QUFLQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFjQTtBQU1BO0FBWUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBUUE7QUFJQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQVdBO0FBQUE7QUFDQTtBQTZDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBS0E7QUFBQTtBQWNBO0FBQUE7QUFDQTtBQTZDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBS0E7QUFBQTtBQWFBO0FBQUE7QUFDQTtBQXdDQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBY0E7QUFBQTtBQUNBO0FBYUE7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQVlBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWNBO0FBQ0E7QUFLQTtBQU1BO0FBQUE7QUFlQTtBQUFBO0FBQ0E7QUFLQTtBQU1BO0FBZUE7QUFJQTtBQUlBO0FBeUJBO0FBU0E7QUFBQTtBQVNBO0FBRUE7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFFQTtBQUNBO0FBQUE7QUFRQTtBQUFBO0FBY0E7QUFBQTtBQUVBO0FBWUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBV0E7QUFBQTtBQUdBO0FBT0E7QUFZQTtBQUVBO0FBWUE7QUFFQTtBQUFBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBS0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFNQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUtBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBT0E7QUFBQTtBQWFBO0FBR0E7QUFDQTtBQVNBO0FBQUE7QUFLQTtBQVVBO0FBR0E7QUFBQTtBQUdBO0FBT0E7QUFDQTtBQVFBO0FBQUE7QUFBQTtBQW9CQTtBQVNBO0FBV0E7QUFFQTtBQWVBO0FBQ0E7QUFLQTtBQVlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQWVBO0FBZUE7QUFBQTtBQUdBO0FBS0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQWFBO0FBTUE7QUFlQTtBQU1BO0FBS0E7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFZQTtBRjl6TEE7QUFBQTtBQUtBO0FBWUE7QUFHQTtBQUNBO0FBRUE7QUFXQTtBQUVBO0FBQ0E7QUFjQTtBQUdBO0FBaUJBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUV4Q0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBZ3lMQTtBQUFBO0FDbjVMQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQUlBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFNQTtBQUFBO0FBTUE7QUFHQTtBQU9BO0FBQUE7QUFNQTtBQUdBO0FBT0E7QUFBQTtBQUdBO0FBR0E7QUFNQTtBQUVBO0FBSUE7QUFHQTtBQUdBO0FBRUE7QUFJQTtBQUdBO0FBR0E7QUFFQTtBQUlBO0FBR0E7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFXQTtBQUlBO0FBQUE7QUFFQTtBQUdBO0FBT0E7QUFDQTtBQUNBO0FBTUE7QUFTQTtBQUVBO0FBR0E7QUFBQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQVNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFWQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUtBO0FBTUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFHQTtBQUdBO0FBR0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQWVBO0FBU0E7QUF4QkE7QUFFQTtBQVVBO0FBQUE7QUFBQTtBQUFBO0FBb0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFZQTtBQUVBO0FBMUlBO0FBQUE7QUE2SUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQWpKQTtBQW9KQTtBQWFBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFVQTtBQUFBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBU0E7QUFOQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQU1BO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFtQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQVNBO0FBZ0tBO0FBQUE7QUFFQTtBQUVBO0FBRUE7QUFRQTtBQUFBO0FBS0E7QUFBQTtBQU1BO0FBUUE7QUFRQTtBQTNLQTtBQUlBO0FBd0tBO0FBSUE7QUEzUEE7QUFBQTtBQUNBO0FBRUE7QUFHQTtBQUtBO0FBQUE7QUFpUEE7QUFNQTtBQS9NQTtBQU1BO0FBQ0E7QUF5TUE7QUFJQTtBQS9LQTtBQUNBO0FBaUJBO0FBRUE7QUFDQTtBQUFBO0FBeUJBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFVQTtBQUFBO0FBY0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBR0E7QUFDQTtBQStEQTtBQUdBO0FBQUE7QUFLQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUtBO0FBQUE7QUFLQTtBQUFBO0FBSUE7QUFZQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFZQTtBQUFBO0FBU0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFTQTtBQUVBO0FBQUE7QUFNQTtBQUFBO0FBS0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBTUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFRQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBa0JBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFFQTtBQUVBO0FBQUE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBT0E7QUFFQTtBQUNBO0FBUUE7QUFBQTtBQWFBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFHQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQU9BO0FBRUE7QUFDQTtBQVFBO0FBQUE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBR0E7QUFDQTtBQUlBO0FBQUE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFrQkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQUE7QUFPQTtBQU1BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBOTdCQTtBQUNBO0FBVEE7QUFBQTtBQUlBO0FBRUE7QUFPQTtBQUFBO0FBcThCQTtBQUNBO0FBV0E7QUFFQTtBQWFBO0FBR0E7QUFZQTtBQU9BO0FBY0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFJQTtBQUFBO0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFNQTtBQUFBO0FBY0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFLQTtBQUFBO0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFJQTtBQUFBO0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFJQTtBQUFBO0FBY0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFJQTtBQUFBO0FBS0E7QUFFQTtBQUFBO0FBUUE7QUFJQTtBQUVBO0FBQUE7QUFTQTtBQUNBO0FBRUE7QUFBQTtBQVVBO0FBQ0E7QUFFQTtBQUFBO0FBT0E7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUlBO0FBR0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBaUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQVFBO0FBQ0E7QUFFQTtBQUFBO0FBUUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFLQTtBQVNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBaUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQVVBO0FBR0E7QUFFQTtBQUdBO0FBSUE7QUFFQTtBQUdBO0FBQUE7QUFLQTtBQUVBO0FBUUE7QUFBQTtBQVNBO0FBT0E7QUFFQTtBQUFBO0FBT0E7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBUUE7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFJQTtBQUVBO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFXQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBSUE7QUFHQTtBQUFBO0FBc0JBO0FBR0E7QUFBQTtBQUVBO0FBQUE7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFrQkE7QUFRQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBV0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTUE7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFBQTtBQUdBO0FBTUE7QUFBQTtBQUVBO0FBQUE7QUFrRUE7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBTUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQXVGQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFNQTtBQUFBO0FBSUE7QUFBQTtBQXVCQTtBQUFBO0FBSUE7QUFRQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTUE7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFrQkE7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUEyQkE7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBV0E7QUFBQTtBQUFBO0FBVUE7QUFBQTtBQU9BO0FBQ0E7QUFHQTtBQUFBO0FBS0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFJQTtBQWNBO0FBQUE7QUFqbEZBO0FBQUE7QUEwbEZBO0FBR0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQ3RsR0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FDb0NBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFJQTtBQStCQTtBQUNBO0FBQ0E7QUFDQTtBQWdCQTtBQU1BO0FBaUJBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFZQTtBQU1BO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQVFBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFJQTtBQUFBO0FBVUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQVFBO0FBSUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUFBO0FBT0E7QUFDQTtBQUFBO0FBR0E7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFTQTtBQUNBO0FBR0E7QUFJQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQWVBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBT0E7QUFLQTtBQUVBO0FBQUE7QUFJQTtBQU1BO0FBR0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFPQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBSUE7QUFNQTtBQUFBO0FBa0JBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBT0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFPQTtBQUFBO0FBZ0NBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBU0E7QUFBQTtBQUdBO0FBRkE7QUFBQTtBQWNBO0FBR0E7QUFhQTtBQUNBO0FBR0E7QUFFQTtBQXlCQTtBQWVBO0FBQ0E7QUFJQTtBQUFBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBVUE7QUFBQTtBQUVBO0FBYUE7QUFBQTtBQUNBO0FBQUE7QUFZQTtBQWNBO0FBYUE7QUFDQTtBQUtBO0FBRUE7QUFhQTtBQUNBO0FBbnNCQTtBQWt0QkE7QUE4QkE7QUFBQTtBQUNBO0FBMkJBO0FBR0E7QUFRQTtBQUFBO0FBSUE7QUFTQTtBQUFBO0FBT0E7QUFLQTtBQUFBO0FBR0E7QUE5ZkE7QUFxZ0JBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFvQkE7QUExaEJBO0FBT0E7QUEvQkE7QUFFQTtBQThrQkE7QUFFQTtBQVNBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUtBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFVQTtBQVNBO0FBQUE7QUFHQTtBQURBO0FBQUE7QUEwQkE7QUFXQTtBQUtBO0FBQUE7Ozs7Ozs7O0FDcDhCQTtBQUFBO0FBR0E7QUFHQTtBQUtBO0FBR0E7QUFDQTtBQU1BO0FBV0E7QUFDQTtBQUtBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBSUE7QUFJQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQVlBO0FBV0E7QUFnQkE7QUFhQTtBQUFBO0FBSUE7QUFTQTtBQUVBO0FBY0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUF1QkE7QUFVQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFHQTtBQVlBO0FBQUE7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUtBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQW1CQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBZ0JBO0FBR0E7QUFGQTtBQUNBO0FBQUE7QUFNQTtBQURBO0FBR0E7QUFBQTtBQUdBO0FBZ0JBO0FBVUE7QUFDQTtBQUVBO0FBQUE7Ozs7Ozs7O0FDaFlBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBUUE7QUFBQTtBQUlBO0FBRUE7QUFHQTtBQUNBO0FBS0E7QUFLQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBR0E7QUFJQTtBQUFBO0FBSUE7QUFBQTtBQUtBO0FBS0E7QUFJQTtBQUFBO0FBSUE7QUFBQTtBQUtBO0FBS0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFzQkE7QUFJQTtBQUdBO0FBQUE7QUFHQTtBQUFBO0FBT0E7QUFHQTtBQXVDQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBb0JBO0FBQUE7QUFBQTtBQUVBO0FBS0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUdBO0FBQ0E7QUFTQTtBQUFBO0FBRUE7QUFNQTtBQUlBO0FBQUE7QUMzVkE7QUFFQTtBQUlBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUdBO0FBTUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUlBOzs7Ozs7OztBQ3ZDQTtBQUFBO0FBT0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFXQTtBQUFBO0FBRUE7QUFHQTtBQUlBO0FBSUE7QUFTQTtBQUNBO0FBS0E7QUFFQTtBQUFBO0FDMUdBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFBQTtBQU9BO0FBSUE7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBR0E7QUFBQTtBQVFBO0FBSUE7QUFRQTtBQVNBO0FBSUE7QUFVQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQVNBO0FBSUE7QUFDQTtBQUtBO0FBSUE7QUFBQTtBQUVBO0FBZUE7QUFBQTtBQUZBO0FBQUE7QUFVQTtBQUVBO0FBRUE7QUFTQTtBQUFBO0FBZUE7QUFJQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXNDQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUF3QkE7QUFBQTtBQUdBO0FBV0E7QUFFQTtBQTREQTtBQXBFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBaUJBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFTQTtBQUNBO0FBQUE7QUFTQTtBQUtBO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUFVQTtBQUNBO0FBQUE7QUFNQTtBQUlBO0FBQUE7QUFNQTtBQUNBO0FBSUE7QUFNQTtBQUFBO0FBUUE7QUFRQTtBQUFBO0FBS0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUdBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBY0E7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQWFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQVdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFRQTtBQUFBO0FBR0E7QUFJQTtBQUtBO0FBQ0E7QUFJQTtBQUVBO0FBSUE7QUFBQTtBTjFwQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBY0E7QUFFQTtBQUNBO0FBc0NBO0FBQUE7QUFHQTtBQWpDQTtBQUdBO0FBK0JBO0FBNUJBO0FBRUE7QUFLQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFTQTtBQXpDQTtBQUdBO0FBc0NBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQTBDQTtBQUFBO0FBQ0E7QUFJQTtBQU1BO0FBNkVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBcUJBO0FBQUE7QUFBQTtBQUFBO0FBaUJBO0FBcklBO0FBRUE7QUFPQTtBQUNBO0FBQUE7QUFNQTtBQUlBO0FBR0E7QUFFQTtBQU9BO0FBTUE7QUFHQTtBQUVBO0FBSUE7QUFJQTtBQVFBO0FBREE7QUFPQTtBQUlBO0FBMkVBO0FBSUE7QUFZQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBR0E7QUFPQTtBQUFBO0FBQUE7QUFJQTtBQUdBO0FBQUE7QUFTQTtBQU9BO0FBR0E7QU9yVEE7QUFBQTtBUHFUQTtBQUFBO0FRL1RBO0FBdUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1Q0E7QUFBQTtBQWdDQTtBQWFBO0FBRUE7QUFXQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQVlBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQVNBO0FBQUE7QUFBQTtBQTRCQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFVQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBVUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFXQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQWNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQWNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQVNBO0FBQUE7QUFpQkE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUdBO0FBQUE7QUFhQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQVNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUFBO0FBWUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFNQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFLQTtBQUVBO0FBQ0E7QUFXQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFPQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFLQTtBQTNEQTtBUjFXQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFHQTtBUXdWQTtBQUFBO0FBR0E7QUFBQTtBQW1FQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBS0E7QUFJQTtBQUNBO0FBRUE7QUFLQTtBQUdBO0FBV0E7QVJyT0E7QUFFQTtBQURBO0FBRUE7QUFBQTtBQUdBO0FBSUE7QUFHQTtBQUdBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFLQTtBQVlBO0FBQUE7QUFBQTtBQUdBO0FReUxBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQUlBO0FBY0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFBQTtBQU9BO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQVdBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBTUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFNQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBV0E7QUFBQTtBQUNBO0FBU0E7QUFNQTtBQUtBO0FBQUE7QUFXQTtBQUFBO0FBVUE7QUFHQTtBQUFBO0FBQUE7QUFhQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBVUE7QUFFQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBRUE7QUFZQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBVUE7QUFFQTtBQWNBO0FBT0E7QUFLQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFnQkE7QUFjQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQXNCQTtBQVVBO0FBSUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBR0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFrQkE7QUFDQTtBQWNBO0FBR0E7QUFRQTtBQWNBO0FBR0E7QUFFQTtBQUlBO0FBaUJBO0FBQUE7QUFlQTtBQUtBO0FBS0E7QUFrQkE7QUFLQTtBQUtBO0FBVUE7QUFBQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQVdBO0FBQUE7QUFJQTtBQWFBO0FBUUE7QUFDQTtBQUFBO0FBYUE7QUFLQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQWFBO0FBR0E7QUFHQTtBQUVBO0FBSUE7QUFjQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQUE7QUFDQTtBQVVBO0FBQUE7QUFDQTtBQWNBO0FBQUE7QUFHQTtBQUdBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBZUE7QUFHQTtBQU1BO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQWFBO0FBT0E7QUFJQTtBQUVBO0FBQ0E7QUFJQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFFQTtBQVpBO0FBQUE7QUEwQkE7QUFHQTtBQUVBO0FBQ0E7QUFZQTtBQUdBO0FBUUE7QUFFQTtBQVlBO0FBR0E7QUFFQTtBQUNBO0FBZ0JBO0FBR0E7QUFFQTtBQUNBO0FBaUJBO0FBTUE7QUFBQTtBQXlDQTtBQUtBO0FBa0JBO0FBU0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBd0JBO0FBcUJBO0FBVUE7QUFDQTtBQUlBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBT0E7QUFBQTtBQUdBO0FBSUE7QUFJQTtBQXlCQTtBQWFBO0FBQUE7QUFLQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBSUE7QUFBQTtBQUdBO0FBU0E7QUFPQTtBQUFBO0FBR0E7QUFXQTtBQU1BO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFLQTtBQUdBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU9BO0FBR0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBb0JBO0FBUUE7QUFRQTtBQU9BO0FBSUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFPQTtBQUFBO0FBUUE7QUFFQTtBQWVBO0FBQUE7QUFHQTtBQUtBO0FBRUE7QUFZQTtBQUFBO0FBS0E7QUFTQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQVFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQWFBO0FBSEE7QUFXQTtBQUdBO0FBZ0JBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBQUE7QUFJQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFHQTtBQUlBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUtBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBdUJBO0FBS0E7QUFFQTtBQWdCQTtBQUlBO0FBQ0E7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBRUE7QUFHQTtBQUFBO0FBS0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUtBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBWUE7QUFVQTtBQUNBO0FBR0E7QUFLQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBT0E7QUFBQTtBQVFBO0FBSUE7QUFHQTtBQUlBO0FBTUE7QUFRQTtBQVFBO0FBR0E7QUFtQkE7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBY0E7QUFFQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUtBO0FBQ0E7QUFPQTtBQUlBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFVQTtBQVVBO0FBQUE7QUFNQTtBQUdBO0FBRUE7QUFXQTtBQUdBO0FBRUE7QUFBQTtBQUdBO0FBVUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUtBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXlEQTtBQU9BO0FBV0E7QUFBQTtBQUtBO0FBWkE7QUFrQkE7QUFoQkE7QUFDQTtBQUFBO0FBbUJBO0FBRUE7QUFBQTtBQUFBOzs7Ozs7Ozs7QUMxbUZBO0FBQUE7QUFHQTtBQUNBO0FBNEJBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFvQkE7QUFFQTtBQUNBO0FBRUE7QUFlQTtBQUFBO0FBQ0E7QUFTQTtBQUlBO0FBRUE7QUFlQTtBQUFBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBakZBO0FBQ0E7QUFpRkE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7O0FDbExBO0FBV0E7QUFBQTtBQWVBO0FBQ0E7QUFDQTtBQXNDQTtBQXBDQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQVNBO0FBR0E7QUFPQTtBQUlBO0FBRUE7QUFDQTtBQXpEQTtBQVdBO0FDbkJBO0FBR0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFRQTtBQVNBO0FBQUE7QUFDQTtBQU1BO0FBRUE7QUFvREE7QUFBQTtBQU1BO0FBQUE7QUFJQTtBQUFBO0FBU0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQU1BO0FBWUE7QUFYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFJQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFZQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQW5NQTtBQVlBO0FBa0JBO0FBQ0E7QUFPQTtBQWtLQTtBQVlBO0FBQ0E7QUEvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBNENBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFhQTtBQUFBO0FBSUE7QUFHQTtBQUVBO0FBQUE7QUFRQTtBQUVBO0FBR0E7QUFFQTtBQU1BO0FBQUE7QUFJQTtBQUdBO0FBRUE7QUFBQTtBQVFBO0FBSUE7QUFFQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQWNBO0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBZ0JBO0FBRUE7QUFRQTtBQUFBO0FBSUE7QUFHQTtBQUNBO0FBS0E7QUFHQTtBQUdBO0FBQUE7QUFJQTtBQUdBO0FBQ0E7QUFNQTtBQUVBO0FBQUE7QUFNQTtBQU1BO0FBSUE7QUFHQTtBQUNBO0FBS0E7QUFNQTtBQUFBO0FBSUE7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBS0E7QUFHQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQU1BO0FBS0E7QUFJQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUdBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFJQTtBQUFBO0FBS0E7QUFBQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBT0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBTUE7QUFBQTtBQUlBO0FBU0E7QUFPQTtBQU9BO0FBTUE7QUFFQTtBQUlBO0FBS0E7QUFFQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBV0E7QUFJQTtBQURBO0FBaUJBO0FBQUE7QUFDQTtBQUtBO0FBR0E7QUFHQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQUE7QUFZQTtBQUVBO0FBRUE7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBSUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWFBO0FBQ0E7QUFJQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUEwRUE7QUFVQTtBQUdBO0FBSUE7QUFBQTtBSnIrQkE7QUFHQTtBQVdBO0FBRUE7QUFFQTtBQUdBOzs7Ozs7OztBSy9DQTtBQUFBO0FBTUE7QUFFQTtBQUVBO0FBQUE7QUFrQkE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTUE7QUFLQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBTUE7QUFBQTtBQUlBO0FBUUE7QUFBQTtBQVFBO0FBT0E7QUFVQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQU1BO0FBR0E7QUFTQTtBQUlBO0FBQUE7QUFFQTtBQUlBO0FBYUE7QUFBQTtBQUtBO0FBR0E7QUFHQTtBQUNBO0FBZUE7QUFNQTtBQUFBO0FBRUE7QUFPQTtBQUdBO0FBT0E7QUFBQTtBQWNBO0FBQUE7QUFHQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBQUE7QUFBQTs7Ozs7OztBQzdQQTtBQUFBO0FBMENBO0FBTUE7QUFFQTtBQUdBO0FBQUE7QUFNQTtBQXpDQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFBQTtBQURBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBa0NBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUNqRkE7QUNtQkE7QUF5RUE7QUE0QkE7QUFtQ0E7QUQzSkE7QUFBQTtBQVFBO0FBWUE7QUFlQTtBQVNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFHQTtBQUVBO0FBT0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBT0E7QUFBQTtBQUVBO0FBQ0E7QUFXQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBSUE7QUFZQTtBQUFBO0FBSUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFLQTtBQUlBO0FBQUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFBQTtBQUlBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFPQTtBQUVBO0FBR0E7QUFLQTtBQUlBO0FBR0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUlBO0FBQUE7QUFHQTtBQVdBO0FBQUE7QUFHQTtBQVlBO0FBQUE7QUFHQTtBQWlDQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQStCQTtBQUdBO0FBQ0E7QUFXQTtBQUVBO0FBR0E7QUFDQTtBQWlDQTtBQUtBO0FBQ0E7QUFHQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUtBO0FBRUE7QUFPQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBV0E7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQW1CQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFNQTtBQUNBO0FBS0E7QUFBQTtBQUtBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFjQTtBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUUvS0E7QUFBQTtBQUNBO0FBV0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFHQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBMkJBO0FBSUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBRUE7QUFFQTtBQUlBO0FBQUE7QUFHQTtBQUNBO0FBSUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBR0E7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQU9BO0FBQ0E7QUFBQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBS0E7QUFLQTtBQUNBO0FBaUJBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBT0E7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFLQTtBQUtBO0FBQ0E7QUFpQkE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQXlCQTtBQVlBO0FBTUE7QUFFQTtBQW1CQTtBQUFBO0FBOEJBO0FBR0E7QUFTQTtBQUFBO0FBRUE7QUFjQTtBQWFBO0FBekVBO0FBQUE7QUFnRkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3oxQkE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQWVBO0FBdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQW1FQTtBQW1CQTtBQUNBO0FBbUJBO0FBcUtBO0FBbUJBO0FBQ0E7QUFtQkE7QUFrS0E7QUF1S0E7QUFJQTtBQVFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUEyREE7QUFpQkE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQXlPQTtBQXJPQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFrSEE7QUFuSEE7QUFBQTtBQUtBO0FBTUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQUFBO0FBTUE7QUFNQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQUE7QUFTQTtBQUdBO0FBaUhBO0FBR0E7QUFPQTtBQUtBO0FBS0E7QUFJQTtBQUdBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUtBO0FBQUE7QUE4SEE7QUF2cUJBO0FBb0VBO0FBRUE7QUFDQTtBQUFBO0FBb0VBO0FBRUE7QUFDQTtBQUFBO0FBaUJBO0FBaWhCQTtBQUFBO0FBeEhBO0FBcklBO0FBRUE7QUFJQTtBQUFBO0FBRUE7QUExQkE7QUFjQTtBQWlCQTtBQUdBO0FBRUE7QUFNQTtBQUFBO0FBRUE7QUFNQTtBQUFBO0FBRUE7QUFNQTtBQUFBO0FBRUE7QUFHQTtBQWdCQTtBQXlGQTtBQUNBO0FBRUE7QUFHQTtBQVlBO0FBRUE7QUFtREE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQU1BO0FBRUE7QUFFQTtBQUFBO0FBS0E7QUFpQkE7QUFySUE7QUE1V0E7QUFPQTtBQU1BO0FBU0E7QUFDQTtBQUFBO0FBOGRBO0FBamRBO0FBb2RBOzs7Ozs7OztBQzlzQ0E7QUFBQTtBQVVBO0FBRUE7QUNyQkE7QUFBQTtBQXNDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBY0E7QUFRQTtBQVBBO0FBSUE7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBK0VBO0FBR0E7QUFoRkE7QUFJQTtBQUhBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUlBO0FBTUE7QUFBQTtBQUdBO0FBSUE7QUFDQTtBQUVBO0FBV0E7QUFHQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFNQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFJQTtBQUFBO0FBR0E7QUFZQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQVVBO0FBR0E7QUFBQTtBQUVBO0FBTUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUdBO0FBQUE7QUFFQTtBQU9BO0FBQUE7QUFFQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQVFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUlBO0FBQUE7QUFHQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBT0E7QUFBQTtBQUdBO0FBR0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBTUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBSUE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFhQTtBQUFBO0FBR0E7QUFlQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFLQTtBQUFBO0FBRUE7QUFLQTtBQUFBO0FBRUE7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWNBO0FBMkJBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFPQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFLQTtBQUtBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQU1BO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUtBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFJQTtBQURBO0FBQUE7QUFHQTtBQUdBO0FBQUE7QUFPQTtBQUFBO0FBRUE7QUFJQTtBQUFBO0FBRUE7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFNQTtBQVNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBVUE7QUFPQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFTQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFTQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBU0E7QUFLQTtBQUtBO0FBQ0E7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBTUE7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFBQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU9BO0FBQUE7QUFBQTtBQWNBO0FBQ0E7QUFNQTtBQUVBO0FBQUE7QUFHQTtBQU1BO0FBQ0E7QUFTQTtBQUxBO0FBSUE7QUFFQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFHQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFpQkE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQVFBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUdBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQU9BO0FBSUE7QUFWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBSUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBSUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFlQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQVFBO0FBQUE7QUFBQTtBQUlBO0FBSUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBTUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFBQTtBQXlCQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBejVDQTtBQVBBO0FBSUE7QUFLQTtBQXU1Q0E7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBSUE7QUFBQTtBQUVBO0FBSUE7QUFBQTtBQUVBO0FBTUE7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBK0NBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQWNBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBNEJBO0FBQUE7QUFJQTtBQUlBO0FBQ0E7QUFBQTtBQUtBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFPQTtBQUdBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBU0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBT0E7QUFBQTtBQUVBO0FBR0E7QUFLQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBQUE7QUFJQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBS0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBR0E7QUFBQTtBQW9RQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBT0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBS0E7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQTBDQTtBQUFBO0FBQUE7QUFHQTtBQVlBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFBQTtBQUVBO0FBMENBO0FBQ0E7QUFFQTtBQTViQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQVlBO0FBR0E7QUFJQTtBQVFBO0FBRUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFRQTtBQUVBO0FBQUE7QUFJQTtBQUlBO0FBU0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUtBO0FBQUE7QUFLQTtBQUFBO0FBU0E7QUFzQkE7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFJQTtBQTZCQTtBQUFBO0FBQ0E7QUFFQTtBQWdCQTtBQUVBO0FBSUE7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQThMQTtBQUFBO0FBRUE7QUFBQTtBQUtBO0FBQ0E7QUFBQTtBQUdBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFhQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBWUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFRQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFVQTtBQUFBO0FBRUE7QUFJQTtBQUFBO0FBRUE7QUFHQTtBQUFBO0FBRUE7QUFRQTtBQUFBO0FBRUE7QUFlQTtBQUFBO0FBRUE7QUFPQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFPQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQVdBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBbUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBWUE7QUFXQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUlBO0FBa0JBO0FBQ0E7QUFDQTtBQVFBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFVQTtBQWtCQTtBQUFBO0FBQ0E7QUFsQkE7QUFBQTtBQUNBO0FBQUE7QUFRQTtBQUFBO0FBQ0E7QUFBQTtBQUhBO0FBUUE7QUFBQTtBQUtBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBS0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUdBO0FBRkE7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFHQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFVQTtBQUVBO0FBS0E7QUFBQTtBQUFBO0FBSUE7QUFVQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUVBO0FBQUE7QUFNQTtBQUVBO0FBRUE7QUF5QkE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQU1BO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFLQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUtBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQVRBO0FBWUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFPQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFFQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUlBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFHQTtBQUNBO0FBS0E7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQU9BO0FBRUE7QUFHQTtBQWlCQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBSUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFpQkE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBYUE7QUFBQTtBQUVBO0FBR0E7QUFLQTtBQUFBO0FBQUE7QUFRQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFXQTtBQVFBO0FBSUE7QUFDQTtBQUFBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFVQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFJQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBRUE7QUFPQTtBQUFBO0FBQ0E7QUFFQTtBQXNCQTtBQUFBO0FBTUE7QUFRQTtBQUlBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBS0E7QUEyQkE7QUFDQTtBQUNBO0FBQ0E7QUFrUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUVBO0FBQ0E7QUFRQTtBQUdBO0FBQ0E7QUFPQTtBQUFBO0FBSUE7QUFZQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBKzNCQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQXo1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTBIQTtBQWNBO0FBQ0E7QUFrSUE7QUFrSUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQTBLQTtBQTBIQTtBQTBLQTtBQUVBO0FBQ0E7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFtQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBSUE7QUFPQTtBQUlBO0FBQUE7QUFZQTtBQVNBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUEzbUhBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFHQTtBQXdsSEE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBU0E7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFXQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBS0E7QUFHQTtBQU1BO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBdUJBO0FBRUE7QUFDQTtBQUFBO0FBT0E7QUFLQTtBQUFBO0FBSUE7QUFNQTtBQUFBO0FBOUNBO0FBaUpBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFwR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7Ozs7QUF4Q0E7QUFBQTtBQUVBO0FBQ0E7QUF1Q0E7QUFFQTtBQURBO0FBSUE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBWUE7QUFBQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQVNBO0FBYUE7QUFJQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBVUE7QUFFQTtBQUdBO0FBQUE7QUFHQTtBQUVBO0FBR0E7QUFBQTtBQVFBO0FBT0E7QUFFQTtBQUdBO0FBTUE7QUFBQTtBQ2p5S0E7QUE2Q0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBSUE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFJQTtBQVNBO0FBTUE7QUFLQTtBQUtBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUdBO0FBQUE7QUFLQTtBQUdBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBSUE7QUFHQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUlBO0FBR0E7QUFHQTtBQUFBO0FBSUE7QUFIQTtBQUNBO0FBSUE7QUFBQTtBQUtBO0FBR0E7QUFHQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU1BO0FBQUE7QUFPQTtBQUdBO0FBR0E7QUFBQTtBQUVBO0FBR0E7QUFDQTtBQUFBO0FBS0E7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBOEJBO0FBQUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFHQTtBQUFBO0FBaUJBO0FBY0E7QUFXQTtBQUVBO0FBQ0E7QUFBQTtBQUtBO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQU9BO0FBaUJBO0FBQUE7QUFHQTtBQVdBO0FBQUE7QUFXQTtBQUVBO0FBQUE7QUFLQTtBQWdCQTtBQVVBO0FBQUE7QUFBQTtBQUFBO0FBeExBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUdBO0FBMEtBO0FBNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUNsZEE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBWEE7QUFZQTtBQUdBO0FIaEJBO0FBaUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFJQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBS0E7QUFFQTtBQUlBO0FBT0E7QUFDQTtBQUFBO0FBS0E7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQVFBO0FBSUE7QUFHQTtBQUNBO0FBQUE7QUFLQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBS0E7QUFHQTtBQUNBO0FBQUE7QUFLQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFHQTtBQUFBO0FBSUE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBTEE7QUFBQTtBQVlBO0FBQUE7QUFJQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQUE7QUFHQTtBQUFBO0FBUUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBT0E7QUFDQTs7Ozs7Ozs7QUlsUUE7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQVZBO0FBV0E7QUFBQTtBSG95S0E7QUFDQTs7Ozs7Ozs7QUl0ektBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFWQTtBQVdBO0FBQUE7QUNRQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQy9DQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFXQTtBQUVBO0FBTUE7QVYxTUE7QUFvQkE7QUFqQkE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQTRCQTtBQUdBO0FBbUJBO0FBSUE7QUFDQTtBQUFBO0FBYUE7QUFDQTtBQUNBO0FBUUE7QUFZQTtBQUFBO0FBR0E7QUFTQTtBQU1BO0FBU0E7QUFDQTtBQVNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFrRkE7QUE5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQVdBO0FBRUE7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUlBO0FBSUE7QUFBQTtBQUdBO0FBQ0E7QUFRQTtBQUNBO0FBTUE7QUFDQTtBQWlCQTtBQUVBO0FBQ0E7QUFDQTtBQU9BO0FBRUE7QUFLQTtBQUFBO0FBTUE7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQW9CQTtBQUtBO0FBQ0E7QUFBQTtBQTJCQTtBQUNBO0FBQUE7QUFBQTtBQXJCQTtBQVFBO0FBZEE7QUFDQTtBQWNBO0FBWkE7QUFnQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQWNBO0FBRUE7QUFlQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBTUE7QUFLQTtBV3ZWQTtBQUFBO0FBU0E7QUFHQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQURBO0FBQUE7QUFHQTtBQXdCQTtBQUVBO0FBQUE7QUFPQTtBQUFBO0FBQUE7QUFHQTtBQVdBO0FBQUE7QUFFQTtBQStEQTtBQUtBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFVQTtBQUdBO0FBS0E7QUFBQTtBQUVBO0FBS0E7QUFHQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBQUE7QUFnQkE7QUFFQTtBQUdBO0FBQ0E7QUFHQTtBQUlBO0FBRUE7QUFBQTs7Ozs7O0FDalNBO0FBQUE7QUFHQTtBQUlBO0FBRUE7QUFtQkE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBcUJBO0FBUkE7QUFoQ0E7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBeUJBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0JBO0FBQUE7QUFHQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFrRkE7QUFuREE7QUFJQTtBQU1BO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQU9BO0FBQUE7QUFBQTtBQ3RGQTtBQUlBO0FBQ0E7QUFVQTtBQVFBO0FBS0E7QUNzQ0E7QUFDQTtBQUNBO0FBMkpBO0FBQ0E7QUF6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFFQTtBQUFBO0FBSUE7QUFHQTtBQUFBO0FBWUE7QUFDQTtBQUtBO0FBQUE7QUFVQTtBQWdCQTtBQUtBO0FBR0E7QUFJQTtBQUlBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFXQTtBQUVBO0FBUUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbFZBO0FBQUE7QUFHQTtBQVFBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUtBO0FBZUE7QUFHQTtBQUNBO0FBSUE7QUFjQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBTUE7QUFBQTtBQ2xHQTtBQVNBO0FBQUE7QUFJQTtBQVlBO0FBQ0E7QUFBQTtBQUdBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQXVCQTtBQWFBO0FBK0VBO0FBRUE7QUE3RUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBT0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQVlBO0FBR0E7QUE0QkE7QUFBQTtBQU9BO0FBcUVBO0FBRUE7QUFuRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBTUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQWFBO0FBTUE7QUFlQTtBQUFBO0FBT0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBbUNBO0FBTUE7QUFLQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFpREE7QUE3Q0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBQUE7QUFVQTtBQUNBO0FBS0E7QUFBQTtBQVlBO0FBQUE7QUFJQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7Ozs7Ozs7O0FDL1ZBO0FBQUE7QUFHQTtBQUlBO0FBYUE7QUFBQTtBQUVBO0FBY0E7QUFHQTtBQWFBO0FBTUE7QUFBQTs7Ozs7O0FDbEVBO0FBb2pFQTtBQUFBO0FBdUZBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdGQTtBQUVBO0FBU0E7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBZ0RBO0FBSUE7QUFXQTtBQVBBO0FBU0E7QUFrQkE7QUFFQTtBQUNBO0FBQUE7QUFhQTtBQUdBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBS0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFLQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUFBO0FBS0E7QUFFQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBS0E7QUFTQTtBQUFBO0FBS0E7QUFLQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBU0E7QUFFQTtBQUFBO0FBSUE7QUFDQTtBQUtBO0FBRUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBRUE7QUFBQTtBQUtBO0FBRUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFrQkE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBS0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFPQTtBQUVBO0FBYUE7QUFJQTtBQUFBO0FBRUE7QUFTQTtBQUlBO0FBQUE7QUFHQTtBQUdBO0FBRUE7QUF4RkE7QUFHQTtBQUFBO0FBR0E7QUFBQTtBQW1GQTtBQU1BO0FBS0E7QUFFQTtBQUtBO0FBVUE7QUFDQTtBQUdBO0FBWUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBbUJBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQWZBO0FBTUE7QUFrQkE7QUFBQTtBQWVBO0FBbFdBO0FBR0E7QUFPQTtBQStWQTtBQWFBO0FBa0JBO0FBR0E7QUFpQkE7QUFBQTtBQXZDQTtBQWJBO0FBdURBO0FBZUE7QUFLQTtBQUtBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFvQ0E7QUFsQ0E7QUFJQTtBQUdBO0FBQUE7QUFNQTtBQUNBO0FBYUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUNobkZBO0FBYUE7QUFDQTtBQU9BO0FBR0E7QUFBQTtBQW5CQTtBQUNBO0FBeUJBO0FBc0JBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBMkNBO0FBR0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQVdBO0FBRUE7QUFHQTtBQUNBO0FBS0E7QUFFQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQUdBO0FBSUE7QUFFQTtBQUNBO0FBS0E7QUFHQTtBQUlBO0FBRUE7QUFHQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBS0E7QUFHQTtBQUlBO0FBRUE7QUFDQTtBQU9BO0FBRUE7QUFFQTtBQUNBO0FBT0E7QUFFQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQStCQTtBQUdBO0FBQ0E7QUFVQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQU9BO0FBRUE7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBR0E7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBT0E7QUFjQTtBQTZCQTtBQVFBO0FBTUE7QUFDQTtBQUdBO0FBS0E7QUFFQTtBQUVBO0FBSUE7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFLQTtBQU9BO0FBQUE7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUtBO0FBRUE7QUFLQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQWtCQTtBQUVBO0FBQ0E7QUFtQkE7QUFFQTtBQU9BO0FBQUE7QUFDQTtBQWtCQTtBQWFBO0FBQ0E7QUFFQTtBQUFBO0FBR0E7QUFJQTtBQUNBO0FBT0E7QUFFQTtBQUdBO0FBQ0E7QUFPQTtBQUVBO0FBRUE7QUFDQTtBQU9BO0FBRUE7QUFFQTtBQUNBO0FBT0E7QUFFQTtBQUdBO0FBQ0E7QUFPQTtBQUVBO0FBbUJBO0FBSUE7QUFBQTtBQUFBO0FBRUE7QUE4Q0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQVNBO0FBQ0E7QUFBQTtBQUVBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBY0E7QUFDQTtBQUFBO0FBVUE7QUFlQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBZ0JBO0FBQUE7QUFlQTtBQUtBO0FBSUE7QUFJQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFHQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQWVBO0FBSUE7QUFNQTtBQUNBO0FBU0E7QUFFQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQWVBO0FBdUJBO0FBR0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBa0JBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFZQTtBQUNBO0FBR0E7QUFFQTtBQU9BO0FBT0E7QUFHQTtBQUFBO0FBSUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQVdBO0FBQ0E7QUFBQTtBQUVBO0FBR0E7QUFNQTtBQU1BO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUFBO0FBa0VBO0FBT0E7QUFDQTtBQUtBO0FBS0E7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBV0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBWUE7QUFRQTtBQUFBO0FBSUE7QUFFQTtBQUdBO0FBQUE7QUFjQTtBQWtEQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQWdCQTtBQXNCQTtBQUdBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBU0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBT0E7QUFFQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBU0E7QUFFQTtBQU1BO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFjQTtBQUdBO0FBRUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQVVBO0FBOEJBO0FBRUE7QUFDQTtBQVFBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUdBO0FBQUE7QUFLQTtBQU9BO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBa0JBO0FBQ0E7QUEyQkE7QUFBQTtBQVFBO0FBQ0E7QUFJQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFNQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFTQTtBQUVBO0FBRUE7QUFnRUE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQTRCQTtBQUNBO0FBTUE7QUFFQTtBQW9CQTtBQUNBO0FBSUE7QUFNQTtBQU9BO0FBR0E7QUFNQTtBQWVBO0FBR0E7QUFDQTtBQUtBO0FBS0E7QUEvS0E7QUFDQTtBQUlBO0FBRUE7QUE0S0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUVBO0FBR0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBR0E7QUFFQTtBQUVBO0FBV0E7QUFBQTtBQUlBO0FBR0E7QUFBQTtBQUVBO0FBR0E7QUFuREEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvZ2xvYmFsT2JqZWN0LmpzP2RhOGEiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9saWJzL2NvbnNvbGUuanM/ZDFhYSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvRmlsZVNhdmVyLmpzPzBkZDAiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9saWJzL0F0b2JCdG9hLmpzP2ZlNWIiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9saWJzL3JnYmNvbG9yLmpzPzRiYmMiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9saWJzL21kNS5qcz80ODQwIiwid2VicGFjazovL2FwcC8uLi9zcmMvbGlicy9yYzQuanM/MDYxZiIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvcGRmc2VjdXJpdHkuanM/NzY3OSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvcGRmbmFtZS5qcz83MmUyIiwid2VicGFjazovL2FwcC8uLi9zcmMvanNwZGYuanM/ZDVmYiIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvYWNyb2Zvcm0uanM/ZDM1MiIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvZm9udEZhY2UuanM/OTY4OSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvYWRkaW1hZ2UuanM/ZDA4ZiIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvYW5ub3RhdGlvbnMuanM/MDhlYSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvYXJhYmljLmpzP2IyMDYiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL2F1dG9wcmludC5qcz84OTNlIiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9jYW52YXMuanM/MWZmOCIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvY2VsbC5qcz8wZTYzIiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9qYXZhc2NyaXB0LmpzP2M2N2QiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL2NvbnRleHQyZC5qcz85NDYyIiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9maWx0ZXJzLmpzPzU1NDAiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL2ZpbGVsb2FkaW5nLmpzP2VkMWUiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL2h0bWwuanM/MTBkOCIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvb3V0bGluZS5qcz9jMTA1Iiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9qcGVnX3N1cHBvcnQuanM/MzkxYSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvcG5nLmpzPzcyNDciLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL3NwbGl0X3RleHRfdG9fc2l6ZS5qcz9hM2IzIiwid2VicGFjazovL2FwcC8uLi9zcmMvbGlicy9vbWdnaWYuanM/MDdiZCIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvSlBFR0VuY29kZXIuanM/NGFlMSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvQk1QRGVjb2Rlci5qcz9kODM1Iiwid2VicGFjazovL2FwcC8uLi9zcmMvbGlicy9XZWJQRGVjb2Rlci5qcz85ZDAxIiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9wbmdfc3VwcG9ydC5qcz8yOTAwIiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9naWZfc3VwcG9ydC5qcz8zZGVlIiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9ibXBfc3VwcG9ydC5qcz82ODE4Iiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy93ZWJwX3N1cHBvcnQuanM/OTllNiIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvcmdiYV9zdXBwb3J0LmpzPzU1YmIiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL3NldGxhbmd1YWdlLmpzP2UzYzUiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL3N0YW5kYXJkX2ZvbnRzX21ldHJpY3MuanM/MmU1YiIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvdHRmc3VwcG9ydC5qcz83Y2UzIiwid2VicGFjazovL2FwcC8uLi9zcmMvbW9kdWxlcy9zdmcuanM/NjcxOSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvdG90YWxfcGFnZXMuanM/ZjQxYyIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvdmlld2VycHJlZmVyZW5jZXMuanM/ZDZhYyIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMveG1wX21ldGFkYXRhLmpzPzUxNDAiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9tb2R1bGVzL3V0ZjguanM/NTQ5MSIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL21vZHVsZXMvdmZzLmpzP2ZhN2UiLCJ3ZWJwYWNrOi8vYXBwLy4uL3NyYy9saWJzL2JpZGlFbmdpbmUuanM/YTcxMiIsIndlYnBhY2s6Ly9hcHAvLi4vc3JjL2xpYnMvdHRmZm9udC5qcz81NzFmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgZ2xvYmFsT2JqZWN0ID0gKGZ1bmN0aW9uKCkge1xuICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIHdpbmRvd1xuICAgID8gd2luZG93XG4gICAgOiBcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgZ2xvYmFsXG4gICAgPyBnbG9iYWxcbiAgICA6IFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBzZWxmXG4gICAgPyBzZWxmXG4gICAgOiB0aGlzO1xufSkoKTtcbiIsImltcG9ydCB7IGdsb2JhbE9iamVjdCB9IGZyb20gXCIuL2dsb2JhbE9iamVjdC5qc1wiO1xuXG5mdW5jdGlvbiBjb25zb2xlTG9nKCkge1xuICBpZiAoZ2xvYmFsT2JqZWN0LmNvbnNvbGUgJiYgdHlwZW9mIGdsb2JhbE9iamVjdC5jb25zb2xlLmxvZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZ2xvYmFsT2JqZWN0LmNvbnNvbGUubG9nLmFwcGx5KGdsb2JhbE9iamVjdC5jb25zb2xlLCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnNvbGVXYXJuKHN0cikge1xuICBpZiAoZ2xvYmFsT2JqZWN0LmNvbnNvbGUpIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbE9iamVjdC5jb25zb2xlLndhcm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZ2xvYmFsT2JqZWN0LmNvbnNvbGUud2Fybi5hcHBseShnbG9iYWxPYmplY3QuY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZUxvZy5jYWxsKG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnNvbGVFcnJvcihzdHIpIHtcbiAgaWYgKGdsb2JhbE9iamVjdC5jb25zb2xlKSB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWxPYmplY3QuY29uc29sZS5lcnJvciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBnbG9iYWxPYmplY3QuY29uc29sZS5lcnJvci5hcHBseShnbG9iYWxPYmplY3QuY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZUxvZyhzdHIpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IHZhciBjb25zb2xlID0ge1xuICBsb2c6IGNvbnNvbGVMb2csXG4gIHdhcm46IGNvbnNvbGVXYXJuLFxuICBlcnJvcjogY29uc29sZUVycm9yXG59O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogRmlsZVNhdmVyLmpzXG4gKiBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG4gKlxuICogTGljZW5zZSA6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIChNSVQpXG4gKiBzb3VyY2UgIDogaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qc1xuICovXG5cbmltcG9ydCB7IGdsb2JhbE9iamVjdCBhcyBfZ2xvYmFsIH0gZnJvbSBcIi4vZ2xvYmFsT2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBjb25zb2xlIH0gZnJvbSBcIi4vY29uc29sZS5qc1wiO1xuXG5mdW5jdGlvbiBib20oYmxvYiwgb3B0cykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09IFwidW5kZWZpbmVkXCIpIG9wdHMgPSB7IGF1dG9Cb206IGZhbHNlIH07XG4gIGVsc2UgaWYgKHR5cGVvZiBvcHRzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc29sZS53YXJuKFwiRGVwcmVjYXRlZDogRXhwZWN0ZWQgdGhpcmQgYXJndW1lbnQgdG8gYmUgYSBvYmplY3RcIik7XG4gICAgb3B0cyA9IHsgYXV0b0JvbTogIW9wdHMgfTtcbiAgfVxuXG4gIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG4gIC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG4gIGlmIChcbiAgICBvcHRzLmF1dG9Cb20gJiZcbiAgICAvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChcbiAgICAgIGJsb2IudHlwZVxuICAgIClcbiAgKSB7XG4gICAgcmV0dXJuIG5ldyBCbG9iKFtTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZmVmZiksIGJsb2JdLCB7IHR5cGU6IGJsb2IudHlwZSB9KTtcbiAgfVxuICByZXR1cm4gYmxvYjtcbn1cblxuZnVuY3Rpb24gZG93bmxvYWQodXJsLCBuYW1lLCBvcHRzKSB7XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgeGhyLm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgeGhyLnJlc3BvbnNlVHlwZSA9IFwiYmxvYlwiO1xuICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cyk7XG4gIH07XG4gIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5lcnJvcihcImNvdWxkIG5vdCBkb3dubG9hZCBmaWxlXCIpO1xuICB9O1xuICB4aHIuc2VuZCgpO1xufVxuXG5mdW5jdGlvbiBjb3JzRW5hYmxlZCh1cmwpIHtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAvLyB1c2Ugc3luYyB0byBhdm9pZCBwb3B1cCBibG9ja2VyXG4gIHhoci5vcGVuKFwiSEVBRFwiLCB1cmwsIGZhbHNlKTtcbiAgdHJ5IHtcbiAgICB4aHIuc2VuZCgpO1xuICB9IGNhdGNoIChlKSB7fVxuICByZXR1cm4geGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyOTk7XG59XG5cbi8vIGBhLmNsaWNrKClgIGRvZXNuJ3Qgd29yayBmb3IgYWxsIGJyb3dzZXJzICgjNDY1KVxuZnVuY3Rpb24gY2xpY2sobm9kZSkge1xuICB0cnkge1xuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudChcImNsaWNrXCIpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO1xuICAgIGV2dC5pbml0TW91c2VFdmVudChcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIHRydWUsXG4gICAgICB0cnVlLFxuICAgICAgd2luZG93LFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgODAsXG4gICAgICAyMCxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2UsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlLFxuICAgICAgMCxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldnQpO1xuICB9XG59XG5cbnZhciBzYXZlQXMgPVxuICBfZ2xvYmFsLnNhdmVBcyB8fFxuICAvLyBwcm9iYWJseSBpbiBzb21lIHdlYiB3b3JrZXJcbiAgKHR5cGVvZiB3aW5kb3cgIT09IFwib2JqZWN0XCIgfHwgd2luZG93ICE9PSBfZ2xvYmFsXG4gICAgPyBmdW5jdGlvbiBzYXZlQXMoKSB7XG4gICAgICAgIC8qIG5vb3AgKi9cbiAgICAgIH1cbiAgICA6IC8vIFVzZSBkb3dubG9hZCBhdHRyaWJ1dGUgZmlyc3QgaWYgcG9zc2libGUgKCMxOTMgTHVtaWEgbW9iaWxlKSB1bmxlc3MgdGhpcyBpcyBhIG5hdGl2ZSBhcHBcbiAgICB0eXBlb2YgSFRNTEFuY2hvckVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgIFwiZG93bmxvYWRcIiBpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGVcbiAgICA/IGZ1bmN0aW9uIHNhdmVBcyhibG9iLCBuYW1lLCBvcHRzKSB7XG4gICAgICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTDtcbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8IFwiZG93bmxvYWRcIjtcblxuICAgICAgICBhLmRvd25sb2FkID0gbmFtZTtcbiAgICAgICAgYS5yZWwgPSBcIm5vb3BlbmVyXCI7IC8vIHRhYm5hYmJpbmdcblxuICAgICAgICAvLyBUT0RPOiBkZXRlY3QgY2hyb21lIGV4dGVuc2lvbnMgJiBwYWNrYWdlZCBhcHBzXG4gICAgICAgIC8vIGEudGFyZ2V0ID0gJ19ibGFuaydcblxuICAgICAgICBpZiAodHlwZW9mIGJsb2IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAvLyBTdXBwb3J0IHJlZ3VsYXIgbGlua3NcbiAgICAgICAgICBhLmhyZWYgPSBibG9iO1xuICAgICAgICAgIGlmIChhLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICAgICAgICBjb3JzRW5hYmxlZChhLmhyZWYpXG4gICAgICAgICAgICAgID8gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cylcbiAgICAgICAgICAgICAgOiBjbGljayhhLCAoYS50YXJnZXQgPSBcIl9ibGFua1wiKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsaWNrKGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTdXBwb3J0IGJsb2JzXG4gICAgICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpO1xuICAgICAgICAgIH0sIDRlNCk7IC8vIDQwc1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbGljayhhKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIDogLy8gVXNlIG1zU2F2ZU9yT3BlbkJsb2IgYXMgYSBzZWNvbmQgYXBwcm9hY2hcbiAgICBcIm1zU2F2ZU9yT3BlbkJsb2JcIiBpbiBuYXZpZ2F0b3JcbiAgICA/IGZ1bmN0aW9uIHNhdmVBcyhibG9iLCBuYW1lLCBvcHRzKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lIHx8IGJsb2IubmFtZSB8fCBcImRvd25sb2FkXCI7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBibG9iID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgaWYgKGNvcnNFbmFibGVkKGJsb2IpKSB7XG4gICAgICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgIGEuaHJlZiA9IGJsb2I7XG4gICAgICAgICAgICBhLnRhcmdldCA9IFwiX2JsYW5rXCI7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjbGljayhhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihib20oYmxvYiwgb3B0cyksIG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgOiAvLyBGYWxsYmFjayB0byB1c2luZyBGaWxlUmVhZGVyIGFuZCBhIHBvcHVwXG4gICAgICBmdW5jdGlvbiBzYXZlQXMoYmxvYiwgbmFtZSwgb3B0cywgcG9wdXApIHtcbiAgICAgICAgLy8gT3BlbiBhIHBvcHVwIGltbWVkaWF0ZWx5IGRvIGdvIGFyb3VuZCBwb3B1cCBibG9ja2VyXG4gICAgICAgIC8vIE1vc3RseSBvbmx5IGF2YWlsYWJsZSBvbiB1c2VyIGludGVyYWN0aW9uIGFuZCB0aGUgZmlsZVJlYWRlciBpcyBhc3luYyBzby4uLlxuICAgICAgICBwb3B1cCA9IHBvcHVwIHx8IG9wZW4oXCJcIiwgXCJfYmxhbmtcIik7XG4gICAgICAgIGlmIChwb3B1cCkge1xuICAgICAgICAgIHBvcHVwLmRvY3VtZW50LnRpdGxlID0gcG9wdXAuZG9jdW1lbnQuYm9keS5pbm5lclRleHQgPVxuICAgICAgICAgICAgXCJkb3dubG9hZGluZy4uLlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBibG9iID09PSBcInN0cmluZ1wiKSByZXR1cm4gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XG5cbiAgICAgICAgdmFyIGZvcmNlID0gYmxvYi50eXBlID09PSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiO1xuICAgICAgICB2YXIgaXNTYWZhcmkgPVxuICAgICAgICAgIC9jb25zdHJ1Y3Rvci9pLnRlc3QoX2dsb2JhbC5IVE1MRWxlbWVudCkgfHwgX2dsb2JhbC5zYWZhcmk7XG4gICAgICAgIHZhciBpc0Nocm9tZUlPUyA9IC9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgKGlzQ2hyb21lSU9TIHx8IChmb3JjZSAmJiBpc1NhZmFyaSkpICYmXG4gICAgICAgICAgdHlwZW9mIEZpbGVSZWFkZXIgPT09IFwib2JqZWN0XCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiBVUkxzXG4gICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHVybCA9IHJlYWRlci5yZXN1bHQ7XG4gICAgICAgICAgICB1cmwgPSBpc0Nocm9tZUlPU1xuICAgICAgICAgICAgICA/IHVybFxuICAgICAgICAgICAgICA6IHVybC5yZXBsYWNlKC9eZGF0YTpbXjtdKjsvLCBcImRhdGE6YXR0YWNobWVudC9maWxlO1wiKTtcbiAgICAgICAgICAgIGlmIChwb3B1cCkgcG9wdXAubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgICAgIGVsc2UgbG9jYXRpb24gPSB1cmw7XG4gICAgICAgICAgICBwb3B1cCA9IG51bGw7IC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgVVJMID0gX2dsb2JhbC5VUkwgfHwgX2dsb2JhbC53ZWJraXRVUkw7XG4gICAgICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgaWYgKHBvcHVwKSBwb3B1cC5sb2NhdGlvbiA9IHVybDtcbiAgICAgICAgICBlbHNlIGxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MFxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgICAgfSwgNGU0KTsgLy8gNDBzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5leHBvcnQgeyBzYXZlQXMgfTtcbiIsImltcG9ydCB7IGdsb2JhbE9iamVjdCB9IGZyb20gXCIuL2dsb2JhbE9iamVjdC5qc1wiO1xuXG52YXIgYXRvYiwgYnRvYTtcblxuKGZ1bmN0aW9uKCkge1xuICBhdG9iID0gZ2xvYmFsT2JqZWN0LmF0b2IuYmluZChnbG9iYWxPYmplY3QpO1xuICBidG9hID0gZ2xvYmFsT2JqZWN0LmJ0b2EuYmluZChnbG9iYWxPYmplY3QpO1xuICByZXR1cm47XG5cbn0pKCk7XG5cbmV4cG9ydCB7IGF0b2IsIGJ0b2EgfTtcbiIsIi8qKlxuICogQSBjbGFzcyB0byBwYXJzZSBjb2xvciB2YWx1ZXNcbiAqIEBhdXRob3IgU3RveWFuIFN0ZWZhbm92IDxzc3Rvb0BnbWFpbC5jb20+XG4gKiB7QGxpbmsgICBodHRwOi8vd3d3LnBocGllZC5jb20vcmdiLWNvbG9yLXBhcnNlci1pbi1qYXZhc2NyaXB0L31cbiAqIEBsaWNlbnNlIFVzZSBpdCBpZiB5b3UgbGlrZSBpdFxuICovXG5cbmZ1bmN0aW9uIFJHQkNvbG9yKGNvbG9yX3N0cmluZykge1xuICBjb2xvcl9zdHJpbmcgPSBjb2xvcl9zdHJpbmcgfHwgXCJcIjtcbiAgdGhpcy5vayA9IGZhbHNlO1xuXG4gIC8vIHN0cmlwIGFueSBsZWFkaW5nICNcbiAgaWYgKGNvbG9yX3N0cmluZy5jaGFyQXQoMCkgPT0gXCIjXCIpIHtcbiAgICAvLyByZW1vdmUgIyBpZiBhbnlcbiAgICBjb2xvcl9zdHJpbmcgPSBjb2xvcl9zdHJpbmcuc3Vic3RyKDEsIDYpO1xuICB9XG5cbiAgY29sb3Jfc3RyaW5nID0gY29sb3Jfc3RyaW5nLnJlcGxhY2UoLyAvZywgXCJcIik7XG4gIGNvbG9yX3N0cmluZyA9IGNvbG9yX3N0cmluZy50b0xvd2VyQ2FzZSgpO1xuXG4gIHZhciBjaGFubmVscztcblxuICAvLyBiZWZvcmUgZ2V0dGluZyBpbnRvIHJlZ2V4cHMsIHRyeSBzaW1wbGUgbWF0Y2hlc1xuICAvLyBhbmQgb3ZlcndyaXRlIHRoZSBpbnB1dFxuICB2YXIgc2ltcGxlX2NvbG9ycyA9IHtcbiAgICBhbGljZWJsdWU6IFwiZjBmOGZmXCIsXG4gICAgYW50aXF1ZXdoaXRlOiBcImZhZWJkN1wiLFxuICAgIGFxdWE6IFwiMDBmZmZmXCIsXG4gICAgYXF1YW1hcmluZTogXCI3ZmZmZDRcIixcbiAgICBhenVyZTogXCJmMGZmZmZcIixcbiAgICBiZWlnZTogXCJmNWY1ZGNcIixcbiAgICBiaXNxdWU6IFwiZmZlNGM0XCIsXG4gICAgYmxhY2s6IFwiMDAwMDAwXCIsXG4gICAgYmxhbmNoZWRhbG1vbmQ6IFwiZmZlYmNkXCIsXG4gICAgYmx1ZTogXCIwMDAwZmZcIixcbiAgICBibHVldmlvbGV0OiBcIjhhMmJlMlwiLFxuICAgIGJyb3duOiBcImE1MmEyYVwiLFxuICAgIGJ1cmx5d29vZDogXCJkZWI4ODdcIixcbiAgICBjYWRldGJsdWU6IFwiNWY5ZWEwXCIsXG4gICAgY2hhcnRyZXVzZTogXCI3ZmZmMDBcIixcbiAgICBjaG9jb2xhdGU6IFwiZDI2OTFlXCIsXG4gICAgY29yYWw6IFwiZmY3ZjUwXCIsXG4gICAgY29ybmZsb3dlcmJsdWU6IFwiNjQ5NWVkXCIsXG4gICAgY29ybnNpbGs6IFwiZmZmOGRjXCIsXG4gICAgY3JpbXNvbjogXCJkYzE0M2NcIixcbiAgICBjeWFuOiBcIjAwZmZmZlwiLFxuICAgIGRhcmtibHVlOiBcIjAwMDA4YlwiLFxuICAgIGRhcmtjeWFuOiBcIjAwOGI4YlwiLFxuICAgIGRhcmtnb2xkZW5yb2Q6IFwiYjg4NjBiXCIsXG4gICAgZGFya2dyYXk6IFwiYTlhOWE5XCIsXG4gICAgZGFya2dyZWVuOiBcIjAwNjQwMFwiLFxuICAgIGRhcmtraGFraTogXCJiZGI3NmJcIixcbiAgICBkYXJrbWFnZW50YTogXCI4YjAwOGJcIixcbiAgICBkYXJrb2xpdmVncmVlbjogXCI1NTZiMmZcIixcbiAgICBkYXJrb3JhbmdlOiBcImZmOGMwMFwiLFxuICAgIGRhcmtvcmNoaWQ6IFwiOTkzMmNjXCIsXG4gICAgZGFya3JlZDogXCI4YjAwMDBcIixcbiAgICBkYXJrc2FsbW9uOiBcImU5OTY3YVwiLFxuICAgIGRhcmtzZWFncmVlbjogXCI4ZmJjOGZcIixcbiAgICBkYXJrc2xhdGVibHVlOiBcIjQ4M2Q4YlwiLFxuICAgIGRhcmtzbGF0ZWdyYXk6IFwiMmY0ZjRmXCIsXG4gICAgZGFya3R1cnF1b2lzZTogXCIwMGNlZDFcIixcbiAgICBkYXJrdmlvbGV0OiBcIjk0MDBkM1wiLFxuICAgIGRlZXBwaW5rOiBcImZmMTQ5M1wiLFxuICAgIGRlZXBza3libHVlOiBcIjAwYmZmZlwiLFxuICAgIGRpbWdyYXk6IFwiNjk2OTY5XCIsXG4gICAgZG9kZ2VyYmx1ZTogXCIxZTkwZmZcIixcbiAgICBmZWxkc3BhcjogXCJkMTkyNzVcIixcbiAgICBmaXJlYnJpY2s6IFwiYjIyMjIyXCIsXG4gICAgZmxvcmFsd2hpdGU6IFwiZmZmYWYwXCIsXG4gICAgZm9yZXN0Z3JlZW46IFwiMjI4YjIyXCIsXG4gICAgZnVjaHNpYTogXCJmZjAwZmZcIixcbiAgICBnYWluc2Jvcm86IFwiZGNkY2RjXCIsXG4gICAgZ2hvc3R3aGl0ZTogXCJmOGY4ZmZcIixcbiAgICBnb2xkOiBcImZmZDcwMFwiLFxuICAgIGdvbGRlbnJvZDogXCJkYWE1MjBcIixcbiAgICBncmF5OiBcIjgwODA4MFwiLFxuICAgIGdyZWVuOiBcIjAwODAwMFwiLFxuICAgIGdyZWVueWVsbG93OiBcImFkZmYyZlwiLFxuICAgIGhvbmV5ZGV3OiBcImYwZmZmMFwiLFxuICAgIGhvdHBpbms6IFwiZmY2OWI0XCIsXG4gICAgaW5kaWFucmVkOiBcImNkNWM1Y1wiLFxuICAgIGluZGlnbzogXCI0YjAwODJcIixcbiAgICBpdm9yeTogXCJmZmZmZjBcIixcbiAgICBraGFraTogXCJmMGU2OGNcIixcbiAgICBsYXZlbmRlcjogXCJlNmU2ZmFcIixcbiAgICBsYXZlbmRlcmJsdXNoOiBcImZmZjBmNVwiLFxuICAgIGxhd25ncmVlbjogXCI3Y2ZjMDBcIixcbiAgICBsZW1vbmNoaWZmb246IFwiZmZmYWNkXCIsXG4gICAgbGlnaHRibHVlOiBcImFkZDhlNlwiLFxuICAgIGxpZ2h0Y29yYWw6IFwiZjA4MDgwXCIsXG4gICAgbGlnaHRjeWFuOiBcImUwZmZmZlwiLFxuICAgIGxpZ2h0Z29sZGVucm9keWVsbG93OiBcImZhZmFkMlwiLFxuICAgIGxpZ2h0Z3JleTogXCJkM2QzZDNcIixcbiAgICBsaWdodGdyZWVuOiBcIjkwZWU5MFwiLFxuICAgIGxpZ2h0cGluazogXCJmZmI2YzFcIixcbiAgICBsaWdodHNhbG1vbjogXCJmZmEwN2FcIixcbiAgICBsaWdodHNlYWdyZWVuOiBcIjIwYjJhYVwiLFxuICAgIGxpZ2h0c2t5Ymx1ZTogXCI4N2NlZmFcIixcbiAgICBsaWdodHNsYXRlYmx1ZTogXCI4NDcwZmZcIixcbiAgICBsaWdodHNsYXRlZ3JheTogXCI3Nzg4OTlcIixcbiAgICBsaWdodHN0ZWVsYmx1ZTogXCJiMGM0ZGVcIixcbiAgICBsaWdodHllbGxvdzogXCJmZmZmZTBcIixcbiAgICBsaW1lOiBcIjAwZmYwMFwiLFxuICAgIGxpbWVncmVlbjogXCIzMmNkMzJcIixcbiAgICBsaW5lbjogXCJmYWYwZTZcIixcbiAgICBtYWdlbnRhOiBcImZmMDBmZlwiLFxuICAgIG1hcm9vbjogXCI4MDAwMDBcIixcbiAgICBtZWRpdW1hcXVhbWFyaW5lOiBcIjY2Y2RhYVwiLFxuICAgIG1lZGl1bWJsdWU6IFwiMDAwMGNkXCIsXG4gICAgbWVkaXVtb3JjaGlkOiBcImJhNTVkM1wiLFxuICAgIG1lZGl1bXB1cnBsZTogXCI5MzcwZDhcIixcbiAgICBtZWRpdW1zZWFncmVlbjogXCIzY2IzNzFcIixcbiAgICBtZWRpdW1zbGF0ZWJsdWU6IFwiN2I2OGVlXCIsXG4gICAgbWVkaXVtc3ByaW5nZ3JlZW46IFwiMDBmYTlhXCIsXG4gICAgbWVkaXVtdHVycXVvaXNlOiBcIjQ4ZDFjY1wiLFxuICAgIG1lZGl1bXZpb2xldHJlZDogXCJjNzE1ODVcIixcbiAgICBtaWRuaWdodGJsdWU6IFwiMTkxOTcwXCIsXG4gICAgbWludGNyZWFtOiBcImY1ZmZmYVwiLFxuICAgIG1pc3R5cm9zZTogXCJmZmU0ZTFcIixcbiAgICBtb2NjYXNpbjogXCJmZmU0YjVcIixcbiAgICBuYXZham93aGl0ZTogXCJmZmRlYWRcIixcbiAgICBuYXZ5OiBcIjAwMDA4MFwiLFxuICAgIG9sZGxhY2U6IFwiZmRmNWU2XCIsXG4gICAgb2xpdmU6IFwiODA4MDAwXCIsXG4gICAgb2xpdmVkcmFiOiBcIjZiOGUyM1wiLFxuICAgIG9yYW5nZTogXCJmZmE1MDBcIixcbiAgICBvcmFuZ2VyZWQ6IFwiZmY0NTAwXCIsXG4gICAgb3JjaGlkOiBcImRhNzBkNlwiLFxuICAgIHBhbGVnb2xkZW5yb2Q6IFwiZWVlOGFhXCIsXG4gICAgcGFsZWdyZWVuOiBcIjk4ZmI5OFwiLFxuICAgIHBhbGV0dXJxdW9pc2U6IFwiYWZlZWVlXCIsXG4gICAgcGFsZXZpb2xldHJlZDogXCJkODcwOTNcIixcbiAgICBwYXBheWF3aGlwOiBcImZmZWZkNVwiLFxuICAgIHBlYWNocHVmZjogXCJmZmRhYjlcIixcbiAgICBwZXJ1OiBcImNkODUzZlwiLFxuICAgIHBpbms6IFwiZmZjMGNiXCIsXG4gICAgcGx1bTogXCJkZGEwZGRcIixcbiAgICBwb3dkZXJibHVlOiBcImIwZTBlNlwiLFxuICAgIHB1cnBsZTogXCI4MDAwODBcIixcbiAgICByZWQ6IFwiZmYwMDAwXCIsXG4gICAgcm9zeWJyb3duOiBcImJjOGY4ZlwiLFxuICAgIHJveWFsYmx1ZTogXCI0MTY5ZTFcIixcbiAgICBzYWRkbGVicm93bjogXCI4YjQ1MTNcIixcbiAgICBzYWxtb246IFwiZmE4MDcyXCIsXG4gICAgc2FuZHlicm93bjogXCJmNGE0NjBcIixcbiAgICBzZWFncmVlbjogXCIyZThiNTdcIixcbiAgICBzZWFzaGVsbDogXCJmZmY1ZWVcIixcbiAgICBzaWVubmE6IFwiYTA1MjJkXCIsXG4gICAgc2lsdmVyOiBcImMwYzBjMFwiLFxuICAgIHNreWJsdWU6IFwiODdjZWViXCIsXG4gICAgc2xhdGVibHVlOiBcIjZhNWFjZFwiLFxuICAgIHNsYXRlZ3JheTogXCI3MDgwOTBcIixcbiAgICBzbm93OiBcImZmZmFmYVwiLFxuICAgIHNwcmluZ2dyZWVuOiBcIjAwZmY3ZlwiLFxuICAgIHN0ZWVsYmx1ZTogXCI0NjgyYjRcIixcbiAgICB0YW46IFwiZDJiNDhjXCIsXG4gICAgdGVhbDogXCIwMDgwODBcIixcbiAgICB0aGlzdGxlOiBcImQ4YmZkOFwiLFxuICAgIHRvbWF0bzogXCJmZjYzNDdcIixcbiAgICB0dXJxdW9pc2U6IFwiNDBlMGQwXCIsXG4gICAgdmlvbGV0OiBcImVlODJlZVwiLFxuICAgIHZpb2xldHJlZDogXCJkMDIwOTBcIixcbiAgICB3aGVhdDogXCJmNWRlYjNcIixcbiAgICB3aGl0ZTogXCJmZmZmZmZcIixcbiAgICB3aGl0ZXNtb2tlOiBcImY1ZjVmNVwiLFxuICAgIHllbGxvdzogXCJmZmZmMDBcIixcbiAgICB5ZWxsb3dncmVlbjogXCI5YWNkMzJcIlxuICB9O1xuICBjb2xvcl9zdHJpbmcgPSBzaW1wbGVfY29sb3JzW2NvbG9yX3N0cmluZ10gfHwgY29sb3Jfc3RyaW5nO1xuXG4gIC8vIGFycmF5IG9mIGNvbG9yIGRlZmluaXRpb24gb2JqZWN0c1xuICB2YXIgY29sb3JfZGVmcyA9IFtcbiAgICB7XG4gICAgICByZTogL15yZ2JcXCgoXFxkezEsM30pLFxccyooXFxkezEsM30pLFxccyooXFxkezEsM30pXFwpJC8sXG4gICAgICBleGFtcGxlOiBbXCJyZ2IoMTIzLCAyMzQsIDQ1KVwiLCBcInJnYigyNTUsMjM0LDI0NSlcIl0sXG4gICAgICBwcm9jZXNzOiBmdW5jdGlvbihiaXRzKSB7XG4gICAgICAgIHJldHVybiBbcGFyc2VJbnQoYml0c1sxXSksIHBhcnNlSW50KGJpdHNbMl0pLCBwYXJzZUludChiaXRzWzNdKV07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICByZTogL14oXFx3ezJ9KShcXHd7Mn0pKFxcd3syfSkkLyxcbiAgICAgIGV4YW1wbGU6IFtcIiMwMGZmMDBcIiwgXCIzMzY2OTlcIl0sXG4gICAgICBwcm9jZXNzOiBmdW5jdGlvbihiaXRzKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgcGFyc2VJbnQoYml0c1sxXSwgMTYpLFxuICAgICAgICAgIHBhcnNlSW50KGJpdHNbMl0sIDE2KSxcbiAgICAgICAgICBwYXJzZUludChiaXRzWzNdLCAxNilcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHJlOiAvXihcXHd7MX0pKFxcd3sxfSkoXFx3ezF9KSQvLFxuICAgICAgZXhhbXBsZTogW1wiI2ZiMFwiLCBcImYwZlwiXSxcbiAgICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGJpdHMpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBwYXJzZUludChiaXRzWzFdICsgYml0c1sxXSwgMTYpLFxuICAgICAgICAgIHBhcnNlSW50KGJpdHNbMl0gKyBiaXRzWzJdLCAxNiksXG4gICAgICAgICAgcGFyc2VJbnQoYml0c1szXSArIGJpdHNbM10sIDE2KVxuICAgICAgICBdO1xuICAgICAgfVxuICAgIH1cbiAgXTtcblxuICAvLyBzZWFyY2ggdGhyb3VnaCB0aGUgZGVmaW5pdGlvbnMgdG8gZmluZCBhIG1hdGNoXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3JfZGVmcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciByZSA9IGNvbG9yX2RlZnNbaV0ucmU7XG4gICAgdmFyIHByb2Nlc3NvciA9IGNvbG9yX2RlZnNbaV0ucHJvY2VzcztcbiAgICB2YXIgYml0cyA9IHJlLmV4ZWMoY29sb3Jfc3RyaW5nKTtcbiAgICBpZiAoYml0cykge1xuICAgICAgY2hhbm5lbHMgPSBwcm9jZXNzb3IoYml0cyk7XG4gICAgICB0aGlzLnIgPSBjaGFubmVsc1swXTtcbiAgICAgIHRoaXMuZyA9IGNoYW5uZWxzWzFdO1xuICAgICAgdGhpcy5iID0gY2hhbm5lbHNbMl07XG4gICAgICB0aGlzLm9rID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyB2YWxpZGF0ZS9jbGVhbnVwIHZhbHVlc1xuICB0aGlzLnIgPSB0aGlzLnIgPCAwIHx8IGlzTmFOKHRoaXMucikgPyAwIDogdGhpcy5yID4gMjU1ID8gMjU1IDogdGhpcy5yO1xuICB0aGlzLmcgPSB0aGlzLmcgPCAwIHx8IGlzTmFOKHRoaXMuZykgPyAwIDogdGhpcy5nID4gMjU1ID8gMjU1IDogdGhpcy5nO1xuICB0aGlzLmIgPSB0aGlzLmIgPCAwIHx8IGlzTmFOKHRoaXMuYikgPyAwIDogdGhpcy5iID4gMjU1ID8gMjU1IDogdGhpcy5iO1xuXG4gIC8vIHNvbWUgZ2V0dGVyc1xuICB0aGlzLnRvUkdCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwicmdiKFwiICsgdGhpcy5yICsgXCIsIFwiICsgdGhpcy5nICsgXCIsIFwiICsgdGhpcy5iICsgXCIpXCI7XG4gIH07XG4gIHRoaXMudG9IZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgciA9IHRoaXMuci50b1N0cmluZygxNik7XG4gICAgdmFyIGcgPSB0aGlzLmcudG9TdHJpbmcoMTYpO1xuICAgIHZhciBiID0gdGhpcy5iLnRvU3RyaW5nKDE2KTtcbiAgICBpZiAoci5sZW5ndGggPT0gMSkgciA9IFwiMFwiICsgcjtcbiAgICBpZiAoZy5sZW5ndGggPT0gMSkgZyA9IFwiMFwiICsgZztcbiAgICBpZiAoYi5sZW5ndGggPT0gMSkgYiA9IFwiMFwiICsgYjtcbiAgICByZXR1cm4gXCIjXCIgKyByICsgZyArIGI7XG4gIH07XG59XG5cbmV4cG9ydCB7IFJHQkNvbG9yIH07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBKb3NlcGggTXllcnMgZG9lcyBub3Qgc3BlY2lmeSBhIHBhcnRpY3VsYXIgbGljZW5zZSBmb3IgaGlzIHdvcmsuXG4gKlxuICogQXV0aG9yOiBKb3NlcGggTXllcnNcbiAqIEFjY2Vzc2VkIGZyb206IGh0dHA6Ly93d3cubXllcnNkYWlseS5vcmcvam9zZXBoL2phdmFzY3JpcHQvbWQ1LmpzXG4gKlxuICogTW9kaWZpZWQgYnk6IE93ZW4gTGVvbmdcbiAqL1xuXG5mdW5jdGlvbiBtZDVjeWNsZSh4LCBrKSB7XG4gIHZhciBhID0geFswXSxcbiAgICBiID0geFsxXSxcbiAgICBjID0geFsyXSxcbiAgICBkID0geFszXTtcblxuICBhID0gZmYoYSwgYiwgYywgZCwga1swXSwgNywgLTY4MDg3NjkzNik7XG4gIGQgPSBmZihkLCBhLCBiLCBjLCBrWzFdLCAxMiwgLTM4OTU2NDU4Nik7XG4gIGMgPSBmZihjLCBkLCBhLCBiLCBrWzJdLCAxNywgNjA2MTA1ODE5KTtcbiAgYiA9IGZmKGIsIGMsIGQsIGEsIGtbM10sIDIyLCAtMTA0NDUyNTMzMCk7XG4gIGEgPSBmZihhLCBiLCBjLCBkLCBrWzRdLCA3LCAtMTc2NDE4ODk3KTtcbiAgZCA9IGZmKGQsIGEsIGIsIGMsIGtbNV0sIDEyLCAxMjAwMDgwNDI2KTtcbiAgYyA9IGZmKGMsIGQsIGEsIGIsIGtbNl0sIDE3LCAtMTQ3MzIzMTM0MSk7XG4gIGIgPSBmZihiLCBjLCBkLCBhLCBrWzddLCAyMiwgLTQ1NzA1OTgzKTtcbiAgYSA9IGZmKGEsIGIsIGMsIGQsIGtbOF0sIDcsIDE3NzAwMzU0MTYpO1xuICBkID0gZmYoZCwgYSwgYiwgYywga1s5XSwgMTIsIC0xOTU4NDE0NDE3KTtcbiAgYyA9IGZmKGMsIGQsIGEsIGIsIGtbMTBdLCAxNywgLTQyMDYzKTtcbiAgYiA9IGZmKGIsIGMsIGQsIGEsIGtbMTFdLCAyMiwgLTE5OTA0MDQxNjIpO1xuICBhID0gZmYoYSwgYiwgYywgZCwga1sxMl0sIDcsIDE4MDQ2MDM2ODIpO1xuICBkID0gZmYoZCwgYSwgYiwgYywga1sxM10sIDEyLCAtNDAzNDExMDEpO1xuICBjID0gZmYoYywgZCwgYSwgYiwga1sxNF0sIDE3LCAtMTUwMjAwMjI5MCk7XG4gIGIgPSBmZihiLCBjLCBkLCBhLCBrWzE1XSwgMjIsIDEyMzY1MzUzMjkpO1xuXG4gIGEgPSBnZyhhLCBiLCBjLCBkLCBrWzFdLCA1LCAtMTY1Nzk2NTEwKTtcbiAgZCA9IGdnKGQsIGEsIGIsIGMsIGtbNl0sIDksIC0xMDY5NTAxNjMyKTtcbiAgYyA9IGdnKGMsIGQsIGEsIGIsIGtbMTFdLCAxNCwgNjQzNzE3NzEzKTtcbiAgYiA9IGdnKGIsIGMsIGQsIGEsIGtbMF0sIDIwLCAtMzczODk3MzAyKTtcbiAgYSA9IGdnKGEsIGIsIGMsIGQsIGtbNV0sIDUsIC03MDE1NTg2OTEpO1xuICBkID0gZ2coZCwgYSwgYiwgYywga1sxMF0sIDksIDM4MDE2MDgzKTtcbiAgYyA9IGdnKGMsIGQsIGEsIGIsIGtbMTVdLCAxNCwgLTY2MDQ3ODMzNSk7XG4gIGIgPSBnZyhiLCBjLCBkLCBhLCBrWzRdLCAyMCwgLTQwNTUzNzg0OCk7XG4gIGEgPSBnZyhhLCBiLCBjLCBkLCBrWzldLCA1LCA1Njg0NDY0MzgpO1xuICBkID0gZ2coZCwgYSwgYiwgYywga1sxNF0sIDksIC0xMDE5ODAzNjkwKTtcbiAgYyA9IGdnKGMsIGQsIGEsIGIsIGtbM10sIDE0LCAtMTg3MzYzOTYxKTtcbiAgYiA9IGdnKGIsIGMsIGQsIGEsIGtbOF0sIDIwLCAxMTYzNTMxNTAxKTtcbiAgYSA9IGdnKGEsIGIsIGMsIGQsIGtbMTNdLCA1LCAtMTQ0NDY4MTQ2Nyk7XG4gIGQgPSBnZyhkLCBhLCBiLCBjLCBrWzJdLCA5LCAtNTE0MDM3ODQpO1xuICBjID0gZ2coYywgZCwgYSwgYiwga1s3XSwgMTQsIDE3MzUzMjg0NzMpO1xuICBiID0gZ2coYiwgYywgZCwgYSwga1sxMl0sIDIwLCAtMTkyNjYwNzczNCk7XG5cbiAgYSA9IGhoKGEsIGIsIGMsIGQsIGtbNV0sIDQsIC0zNzg1NTgpO1xuICBkID0gaGgoZCwgYSwgYiwgYywga1s4XSwgMTEsIC0yMDIyNTc0NDYzKTtcbiAgYyA9IGhoKGMsIGQsIGEsIGIsIGtbMTFdLCAxNiwgMTgzOTAzMDU2Mik7XG4gIGIgPSBoaChiLCBjLCBkLCBhLCBrWzE0XSwgMjMsIC0zNTMwOTU1Nik7XG4gIGEgPSBoaChhLCBiLCBjLCBkLCBrWzFdLCA0LCAtMTUzMDk5MjA2MCk7XG4gIGQgPSBoaChkLCBhLCBiLCBjLCBrWzRdLCAxMSwgMTI3Mjg5MzM1Myk7XG4gIGMgPSBoaChjLCBkLCBhLCBiLCBrWzddLCAxNiwgLTE1NTQ5NzYzMik7XG4gIGIgPSBoaChiLCBjLCBkLCBhLCBrWzEwXSwgMjMsIC0xMDk0NzMwNjQwKTtcbiAgYSA9IGhoKGEsIGIsIGMsIGQsIGtbMTNdLCA0LCA2ODEyNzkxNzQpO1xuICBkID0gaGgoZCwgYSwgYiwgYywga1swXSwgMTEsIC0zNTg1MzcyMjIpO1xuICBjID0gaGgoYywgZCwgYSwgYiwga1szXSwgMTYsIC03MjI1MjE5NzkpO1xuICBiID0gaGgoYiwgYywgZCwgYSwga1s2XSwgMjMsIDc2MDI5MTg5KTtcbiAgYSA9IGhoKGEsIGIsIGMsIGQsIGtbOV0sIDQsIC02NDAzNjQ0ODcpO1xuICBkID0gaGgoZCwgYSwgYiwgYywga1sxMl0sIDExLCAtNDIxODE1ODM1KTtcbiAgYyA9IGhoKGMsIGQsIGEsIGIsIGtbMTVdLCAxNiwgNTMwNzQyNTIwKTtcbiAgYiA9IGhoKGIsIGMsIGQsIGEsIGtbMl0sIDIzLCAtOTk1MzM4NjUxKTtcblxuICBhID0gaWkoYSwgYiwgYywgZCwga1swXSwgNiwgLTE5ODYzMDg0NCk7XG4gIGQgPSBpaShkLCBhLCBiLCBjLCBrWzddLCAxMCwgMTEyNjg5MTQxNSk7XG4gIGMgPSBpaShjLCBkLCBhLCBiLCBrWzE0XSwgMTUsIC0xNDE2MzU0OTA1KTtcbiAgYiA9IGlpKGIsIGMsIGQsIGEsIGtbNV0sIDIxLCAtNTc0MzQwNTUpO1xuICBhID0gaWkoYSwgYiwgYywgZCwga1sxMl0sIDYsIDE3MDA0ODU1NzEpO1xuICBkID0gaWkoZCwgYSwgYiwgYywga1szXSwgMTAsIC0xODk0OTg2NjA2KTtcbiAgYyA9IGlpKGMsIGQsIGEsIGIsIGtbMTBdLCAxNSwgLTEwNTE1MjMpO1xuICBiID0gaWkoYiwgYywgZCwgYSwga1sxXSwgMjEsIC0yMDU0OTIyNzk5KTtcbiAgYSA9IGlpKGEsIGIsIGMsIGQsIGtbOF0sIDYsIDE4NzMzMTMzNTkpO1xuICBkID0gaWkoZCwgYSwgYiwgYywga1sxNV0sIDEwLCAtMzA2MTE3NDQpO1xuICBjID0gaWkoYywgZCwgYSwgYiwga1s2XSwgMTUsIC0xNTYwMTk4MzgwKTtcbiAgYiA9IGlpKGIsIGMsIGQsIGEsIGtbMTNdLCAyMSwgMTMwOTE1MTY0OSk7XG4gIGEgPSBpaShhLCBiLCBjLCBkLCBrWzRdLCA2LCAtMTQ1NTIzMDcwKTtcbiAgZCA9IGlpKGQsIGEsIGIsIGMsIGtbMTFdLCAxMCwgLTExMjAyMTAzNzkpO1xuICBjID0gaWkoYywgZCwgYSwgYiwga1syXSwgMTUsIDcxODc4NzI1OSk7XG4gIGIgPSBpaShiLCBjLCBkLCBhLCBrWzldLCAyMSwgLTM0MzQ4NTU1MSk7XG5cbiAgeFswXSA9IGFkZDMyKGEsIHhbMF0pO1xuICB4WzFdID0gYWRkMzIoYiwgeFsxXSk7XG4gIHhbMl0gPSBhZGQzMihjLCB4WzJdKTtcbiAgeFszXSA9IGFkZDMyKGQsIHhbM10pO1xufVxuXG5mdW5jdGlvbiBjbW4ocSwgYSwgYiwgeCwgcywgdCkge1xuICBhID0gYWRkMzIoYWRkMzIoYSwgcSksIGFkZDMyKHgsIHQpKTtcbiAgcmV0dXJuIGFkZDMyKChhIDw8IHMpIHwgKGEgPj4+ICgzMiAtIHMpKSwgYik7XG59XG5cbmZ1bmN0aW9uIGZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIGNtbigoYiAmIGMpIHwgKH5iICYgZCksIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBnZyhhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gIHJldHVybiBjbW4oKGIgJiBkKSB8IChjICYgfmQpLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gaGgoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gY21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIGlpKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIGNtbihjIF4gKGIgfCB+ZCksIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBtZDUxKHMpIHtcbiAgLy8gdHh0ID0gJyc7XG4gIHZhciBuID0gcy5sZW5ndGgsXG4gICAgc3RhdGUgPSBbMTczMjU4NDE5MywgLTI3MTczMzg3OSwgLTE3MzI1ODQxOTQsIDI3MTczMzg3OF0sXG4gICAgaTtcbiAgZm9yIChpID0gNjQ7IGkgPD0gcy5sZW5ndGg7IGkgKz0gNjQpIHtcbiAgICBtZDVjeWNsZShzdGF0ZSwgbWQ1YmxrKHMuc3Vic3RyaW5nKGkgLSA2NCwgaSkpKTtcbiAgfVxuICBzID0gcy5zdWJzdHJpbmcoaSAtIDY0KTtcbiAgdmFyIHRhaWwgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG4gIGZvciAoaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKVxuICAgIHRhaWxbaSA+PiAyXSB8PSBzLmNoYXJDb2RlQXQoaSkgPDwgKGkgJSA0IDw8IDMpO1xuICB0YWlsW2kgPj4gMl0gfD0gMHg4MCA8PCAoaSAlIDQgPDwgMyk7XG4gIGlmIChpID4gNTUpIHtcbiAgICBtZDVjeWNsZShzdGF0ZSwgdGFpbCk7XG4gICAgZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHRhaWxbaV0gPSAwO1xuICB9XG4gIHRhaWxbMTRdID0gbiAqIDg7XG4gIG1kNWN5Y2xlKHN0YXRlLCB0YWlsKTtcbiAgcmV0dXJuIHN0YXRlO1xufVxuXG4vKiB0aGVyZSBuZWVkcyB0byBiZSBzdXBwb3J0IGZvciBVbmljb2RlIGhlcmUsXG4gKiB1bmxlc3Mgd2UgcHJldGVuZCB0aGF0IHdlIGNhbiByZWRlZmluZSB0aGUgTUQtNVxuICogYWxnb3JpdGhtIGZvciBtdWx0aS1ieXRlIGNoYXJhY3RlcnMgKHBlcmhhcHNcbiAqIGJ5IGFkZGluZyBldmVyeSBmb3VyIDE2LWJpdCBjaGFyYWN0ZXJzIGFuZFxuICogc2hvcnRlbmluZyB0aGUgc3VtIHRvIDMyIGJpdHMpLiBPdGhlcndpc2VcbiAqIEkgc3VnZ2VzdCBwZXJmb3JtaW5nIE1ELTUgYXMgaWYgZXZlcnkgY2hhcmFjdGVyXG4gKiB3YXMgdHdvIGJ5dGVzLS1lLmcuLCAwMDQwIDAwMjUgPSBAJS0tYnV0IHRoZW5cbiAqIGhvdyB3aWxsIGFuIG9yZGluYXJ5IE1ELTUgc3VtIGJlIG1hdGNoZWQ/XG4gKiBUaGVyZSBpcyBubyB3YXkgdG8gc3RhbmRhcmRpemUgdGV4dCB0byBzb21ldGhpbmdcbiAqIGxpa2UgVVRGLTggYmVmb3JlIHRyYW5zZm9ybWF0aW9uOyBzcGVlZCBjb3N0IGlzXG4gKiB1dHRlcmx5IHByb2hpYml0aXZlLiBUaGUgSmF2YVNjcmlwdCBzdGFuZGFyZFxuICogaXRzZWxmIG5lZWRzIHRvIGxvb2sgYXQgdGhpczogaXQgc2hvdWxkIHN0YXJ0XG4gKiBwcm92aWRpbmcgYWNjZXNzIHRvIHN0cmluZ3MgYXMgcHJlZm9ybWVkIFVURi04XG4gKiA4LWJpdCB1bnNpZ25lZCB2YWx1ZSBhcnJheXMuXG4gKi9cbmZ1bmN0aW9uIG1kNWJsayhzKSB7XG4gIC8qIEkgZmlndXJlZCBnbG9iYWwgd2FzIGZhc3Rlci4gICAqL1xuICB2YXIgbWQ1YmxrcyA9IFtdLFxuICAgIGk7IC8qIEFuZHkgS2luZyBzYWlkIGRvIGl0IHRoaXMgd2F5LiAqL1xuICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkgKz0gNCkge1xuICAgIG1kNWJsa3NbaSA+PiAyXSA9XG4gICAgICBzLmNoYXJDb2RlQXQoaSkgK1xuICAgICAgKHMuY2hhckNvZGVBdChpICsgMSkgPDwgOCkgK1xuICAgICAgKHMuY2hhckNvZGVBdChpICsgMikgPDwgMTYpICtcbiAgICAgIChzLmNoYXJDb2RlQXQoaSArIDMpIDw8IDI0KTtcbiAgfVxuICByZXR1cm4gbWQ1Ymxrcztcbn1cblxudmFyIGhleF9jaHIgPSBcIjAxMjM0NTY3ODlhYmNkZWZcIi5zcGxpdChcIlwiKTtcblxuZnVuY3Rpb24gcmhleChuKSB7XG4gIHZhciBzID0gXCJcIixcbiAgICBqID0gMDtcbiAgZm9yICg7IGogPCA0OyBqKyspXG4gICAgcyArPSBoZXhfY2hyWyhuID4+IChqICogOCArIDQpKSAmIDB4MGZdICsgaGV4X2NoclsobiA+PiAoaiAqIDgpKSAmIDB4MGZdO1xuICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gaGV4KHgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB4W2ldID0gcmhleCh4W2ldKTtcbiAgcmV0dXJuIHguam9pbihcIlwiKTtcbn1cblxuLy8gQ29udmVydHMgYSA0LWJ5dGUgbnVtYmVyIHRvIGJ5dGUgc3RyaW5nXG5mdW5jdGlvbiBzaW5nbGVUb0J5dGVTdHJpbmcobikge1xuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShcbiAgICAobiAmIDB4ZmYpID4+IDAsXG4gICAgKG4gJiAweGZmMDApID4+IDgsXG4gICAgKG4gJiAweGZmMDAwMCkgPj4gMTYsXG4gICAgKG4gJiAweGZmMDAwMDAwKSA+PiAyNFxuICApO1xufVxuXG4vLyBDb252ZXJ0cyBhbiBhcnJheSBvZiBudW1iZXJzIHRvIGEgYnl0ZSBzdHJpbmdcbmZ1bmN0aW9uIHRvQnl0ZVN0cmluZyh4KSB7XG4gIHJldHVybiB4Lm1hcChzaW5nbGVUb0J5dGVTdHJpbmcpLmpvaW4oXCJcIik7XG59XG5cbi8vIFJldHVybnMgdGhlIE1ENSBoYXNoIGFzIGEgYnl0ZSBzdHJpbmdcbmZ1bmN0aW9uIG1kNUJpbihzKSB7XG4gIHJldHVybiB0b0J5dGVTdHJpbmcobWQ1MShzKSk7XG59XG5cbi8vIFJldHVybnMgTUQ1IGhhc2ggYXMgYSBoZXggc3RyaW5nXG5mdW5jdGlvbiBtZDUocykge1xuICByZXR1cm4gaGV4KG1kNTEocykpO1xufVxuXG52YXIgbWQ1Q2hlY2sgPSBtZDUoXCJoZWxsb1wiKSAhPSBcIjVkNDE0MDJhYmM0YjJhNzZiOTcxOWQ5MTEwMTdjNTkyXCI7XG5cbmZ1bmN0aW9uIGFkZDMyKGEsIGIpIHtcbiAgaWYgKG1kNUNoZWNrKSB7XG4gICAgLyogaWYgdGhlIG1kNUNoZWNrIGRvZXMgbm90IG1hdGNoXG4gICAgIHRoZSBleHBlY3RlZCB2YWx1ZSwgd2UncmUgZGVhbGluZ1xuICAgICB3aXRoIGFuIG9sZCBicm93c2VyIGFuZCBuZWVkXG4gICAgIHRoaXMgZnVuY3Rpb24uICovXG4gICAgdmFyIGxzdyA9IChhICYgMHhmZmZmKSArIChiICYgMHhmZmZmKSxcbiAgICAgIG1zdyA9IChhID4+IDE2KSArIChiID4+IDE2KSArIChsc3cgPj4gMTYpO1xuICAgIHJldHVybiAobXN3IDw8IDE2KSB8IChsc3cgJiAweGZmZmYpO1xuICB9IGVsc2Uge1xuICAgIC8qIHRoaXMgZnVuY3Rpb24gaXMgbXVjaCBmYXN0ZXIsXG4gICAgc28gaWYgcG9zc2libGUgd2UgdXNlIGl0LiBTb21lIElFc1xuICAgIGFyZSB0aGUgb25seSBvbmVzIEkga25vdyBvZiB0aGF0XG4gICAgbmVlZCB0aGUgaWRpb3RpYyBzZWNvbmQgZnVuY3Rpb24sXG4gICAgZ2VuZXJhdGVkIGJ5IGFuIGlmIGNsYXVzZS4gICovXG4gICAgcmV0dXJuIChhICsgYikgJiAweGZmZmZmZmZmO1xuICB9XG59XG5cbmV4cG9ydCB7IG1kNSwgbWQ1QmluIH07XG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogRlBERiBpcyByZWxlYXNlZCB1bmRlciBhIHBlcm1pc3NpdmUgbGljZW5zZTogdGhlcmUgaXMgbm8gdXNhZ2UgcmVzdHJpY3Rpb24uXHJcbiAqIFlvdSBtYXkgZW1iZWQgaXQgZnJlZWx5IGluIHlvdXIgYXBwbGljYXRpb24gKGNvbW1lcmNpYWwgb3Igbm90KSwgd2l0aCBvclxyXG4gKiB3aXRob3V0IG1vZGlmaWNhdGlvbnMuXHJcbiAqXHJcbiAqIFJlZmVyZW5jZTogaHR0cDovL3d3dy5mcGRmLm9yZy9lbi9zY3JpcHQvc2NyaXB0MzcucGhwXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gcmVwZWF0KHN0ciwgbnVtKSB7XHJcbiAgcmV0dXJuIG5ldyBBcnJheShudW0gKyAxKS5qb2luKHN0cik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhIGJ5dGUgc3RyaW5nIHRvIGEgaGV4IHN0cmluZ1xyXG4gKlxyXG4gKiBAbmFtZSByYzRcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgQnl0ZSBzdHJpbmcgb2YgZW5jcnlwdGlvbiBrZXlcclxuICogQHBhcmFtIHtzdHJpbmd9IGRhdGEgQnl0ZSBzdHJpbmcgb2YgZGF0YSB0byBiZSBlbmNyeXB0ZWRcclxuICogQHJldHVybnMge3N0cmluZ30gRW5jcnlwdGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gcmM0KGtleSwgZGF0YSkge1xyXG4gIHZhciBsYXN0S2V5LCBsYXN0U3RhdGU7XHJcbiAgaWYgKGtleSAhPT0gbGFzdEtleSkge1xyXG4gICAgdmFyIGsgPSByZXBlYXQoa2V5LCAoKDI1NiAvIGtleS5sZW5ndGgpID4+IDApICsgMSk7XHJcbiAgICB2YXIgc3RhdGUgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcclxuICAgICAgc3RhdGVbaV0gPSBpO1xyXG4gICAgfVxyXG4gICAgdmFyIGogPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xyXG4gICAgICB2YXIgdCA9IHN0YXRlW2ldO1xyXG4gICAgICBqID0gKGogKyB0ICsgay5jaGFyQ29kZUF0KGkpKSAlIDI1NjtcclxuICAgICAgc3RhdGVbaV0gPSBzdGF0ZVtqXTtcclxuICAgICAgc3RhdGVbal0gPSB0O1xyXG4gICAgfVxyXG4gICAgbGFzdEtleSA9IGtleTtcclxuICAgIGxhc3RTdGF0ZSA9IHN0YXRlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzdGF0ZSA9IGxhc3RTdGF0ZTtcclxuICB9XHJcbiAgdmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xyXG4gIHZhciBhID0gMDtcclxuICB2YXIgYiA9IDA7XHJcbiAgdmFyIG91dCA9IFwiXCI7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgYSA9IChhICsgMSkgJSAyNTY7XHJcbiAgICB0ID0gc3RhdGVbYV07XHJcbiAgICBiID0gKGIgKyB0KSAlIDI1NjtcclxuICAgIHN0YXRlW2FdID0gc3RhdGVbYl07XHJcbiAgICBzdGF0ZVtiXSA9IHQ7XHJcbiAgICBrID0gc3RhdGVbKHN0YXRlW2FdICsgc3RhdGVbYl0pICUgMjU2XTtcclxuICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGEuY2hhckNvZGVBdChpKSBeIGspO1xyXG4gIH1cclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG5leHBvcnQgeyByYzQgfTtcclxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXHJcbiAqIEF1dGhvcjogT3dlbiBMZW9uZyAoQG93ZW5sMTMxKVxyXG4gKiBEYXRlOiAxNSBPY3QgMjAyMFxyXG4gKiBSZWZlcmVuY2VzOlxyXG4gKiBodHRwczovL3d3dy5jcy5jbXUuZWR1L35kc3QvQWRvYmUvR2FsbGVyeS9hbm9uMjFqdWwwMS1wZGYtZW5jcnlwdGlvbi50eHRcclxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZvbGlvanMvcGRma2l0L2Jsb2IvbWFzdGVyL2xpYi9zZWN1cml0eS5qc1xyXG4gKiBodHRwOi8vd3d3LmZwZGYub3JnL2VuL3NjcmlwdC9zY3JpcHQzNy5waHBcclxuICovXHJcblxyXG5pbXBvcnQgeyBtZDVCaW4gfSBmcm9tIFwiLi9tZDUuanNcIjtcclxuaW1wb3J0IHsgcmM0IH0gZnJvbSBcIi4vcmM0LmpzXCI7XHJcblxyXG52YXIgcGVybWlzc2lvbk9wdGlvbnMgPSB7XHJcbiAgcHJpbnQ6IDQsXHJcbiAgbW9kaWZ5OiA4LFxyXG4gIGNvcHk6IDE2LFxyXG4gIFwiYW5ub3QtZm9ybXNcIjogMzJcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplcyBlbmNyeXB0aW9uIHNldHRpbmdzXHJcbiAqXHJcbiAqIEBuYW1lIGNvbnN0cnVjdG9yXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge0FycmF5fSBwZXJtaXNzaW9ucyBQZXJtaXNzaW9ucyBhbGxvd2VkIGZvciB1c2VyLCBcInByaW50XCIsIFwibW9kaWZ5XCIsIFwiY29weVwiIGFuZCBcImFubm90LWZvcm1zXCIuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyUGFzc3dvcmQgUGVybWlzc2lvbnMgYXBwbHkgdG8gdGhpcyB1c2VyLiBMZWF2aW5nIHRoaXMgZW1wdHkgbWVhbnMgdGhlIGRvY3VtZW50XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgbm90IHBhc3N3b3JkIHByb3RlY3RlZCBidXQgdmlld2VyIGhhcyB0aGUgYWJvdmUgcGVybWlzc2lvbnMuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBvd25lclBhc3N3b3JkIE93bmVyIGhhcyBmdWxsIGZ1bmN0aW9uYWxpdGllcyB0byB0aGUgZmlsZS5cclxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBBcyBoZXggc3RyaW5nLCBzaG91bGQgYmUgc2FtZSBhcyB0aGUgZmlsZSBJRCBpbiB0aGUgdHJhaWxlci5cclxuICogQGV4YW1wbGVcclxuICogdmFyIHNlY3VyaXR5ID0gbmV3IFBERlNlY3VyaXR5KFtcInByaW50XCJdKVxyXG4gKi9cclxuZnVuY3Rpb24gUERGU2VjdXJpdHkocGVybWlzc2lvbnMsIHVzZXJQYXNzd29yZCwgb3duZXJQYXNzd29yZCwgZmlsZUlkKSB7XHJcbiAgdGhpcy52ID0gMTsgLy8gYWxnb3JpdGhtIDEsIGZ1dHVyZSB3b3JrIGNhbiBhZGQgaW4gbW9yZSByZWNlbnQgZW5jcnlwdGlvbiBzY2hlbWVzXHJcbiAgdGhpcy5yID0gMjsgLy8gcmV2aXNpb24gMlxyXG5cclxuICAvLyBzZXQgZmxhZ3MgZm9yIHdoYXQgZnVuY3Rpb25hbGl0aWVzIHRoZSB1c2VyIGNhbiBhY2Nlc3NcclxuICBsZXQgcHJvdGVjdGlvbiA9IDE5MjtcclxuICBwZXJtaXNzaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHBlcm0pIHtcclxuICAgIGlmICh0eXBlb2YgcGVybWlzc2lvbk9wdGlvbnMucGVybSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBlcm1pc3Npb246IFwiICsgcGVybSk7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0aW9uICs9IHBlcm1pc3Npb25PcHRpb25zW3Blcm1dO1xyXG4gIH0pO1xyXG5cclxuICAvLyBwYWRkaW5nIGlzIHVzZWQgdG8gcGFkIHRoZSBwYXNzd29yZHMgdG8gMzIgYnl0ZXMsIGFsc28gaXMgaGFzaGVkIGFuZCBzdG9yZWQgaW4gdGhlIGZpbmFsIFBERlxyXG4gIHRoaXMucGFkZGluZyA9XHJcbiAgICBcIlxceDI4XFx4QkZcXHg0RVxceDVFXFx4NEVcXHg3NVxceDhBXFx4NDFcXHg2NFxceDAwXFx4NEVcXHg1NlxceEZGXFx4RkFcXHgwMVxceDA4XCIgK1xyXG4gICAgXCJcXHgyRVxceDJFXFx4MDBcXHhCNlxceEQwXFx4NjhcXHgzRVxceDgwXFx4MkZcXHgwQ1xceEE5XFx4RkVcXHg2NFxceDUzXFx4NjlcXHg3QVwiO1xyXG4gIGxldCBwYWRkZWRVc2VyUGFzc3dvcmQgPSAodXNlclBhc3N3b3JkICsgdGhpcy5wYWRkaW5nKS5zdWJzdHIoMCwgMzIpO1xyXG4gIGxldCBwYWRkZWRPd25lclBhc3N3b3JkID0gKG93bmVyUGFzc3dvcmQgKyB0aGlzLnBhZGRpbmcpLnN1YnN0cigwLCAzMik7XHJcblxyXG4gIHRoaXMuTyA9IHRoaXMucHJvY2Vzc093bmVyUGFzc3dvcmQocGFkZGVkVXNlclBhc3N3b3JkLCBwYWRkZWRPd25lclBhc3N3b3JkKTtcclxuICB0aGlzLlAgPSAtKChwcm90ZWN0aW9uIF4gMjU1KSArIDEpO1xyXG4gIHRoaXMuZW5jcnlwdGlvbktleSA9IG1kNUJpbihcclxuICAgIHBhZGRlZFVzZXJQYXNzd29yZCArXHJcbiAgICAgIHRoaXMuTyArXHJcbiAgICAgIHRoaXMubHNiRmlyc3RXb3JkKHRoaXMuUCkgK1xyXG4gICAgICB0aGlzLmhleFRvQnl0ZXMoZmlsZUlkKVxyXG4gICkuc3Vic3RyKDAsIDUpO1xyXG4gIHRoaXMuVSA9IHJjNCh0aGlzLmVuY3J5cHRpb25LZXksIHRoaXMucGFkZGluZyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCcmVha3MgZG93biBhIDQtYnl0ZSBudW1iZXIgaW50byBpdHMgaW5kaXZpZHVhbCBieXRlcywgd2l0aCB0aGUgbGVhc3Qgc2lnbmlmaWNhbnQgYml0IGZpcnN0XHJcbiAqXHJcbiAqIEBuYW1lIGxzYkZpcnN0V29yZFxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IGRhdGEgMzItYml0IG51bWJlclxyXG4gKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAqL1xyXG5QREZTZWN1cml0eS5wcm90b3R5cGUubHNiRmlyc3RXb3JkID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKFxyXG4gICAgKGRhdGEgPj4gMCkgJiAweGZmLFxyXG4gICAgKGRhdGEgPj4gOCkgJiAweGZmLFxyXG4gICAgKGRhdGEgPj4gMTYpICYgMHhmZixcclxuICAgIChkYXRhID4+IDI0KSAmIDB4ZmZcclxuICApO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIGEgYnl0ZSBzdHJpbmcgdG8gYSBoZXggc3RyaW5nXHJcbiAqXHJcbiAqIEBuYW1lIHRvSGV4U3RyaW5nXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge1N0cmluZ30gYnl0ZVN0cmluZyBCeXRlIHN0cmluZ1xyXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxyXG4gKi9cclxuUERGU2VjdXJpdHkucHJvdG90eXBlLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24oYnl0ZVN0cmluZykge1xyXG4gIHJldHVybiBieXRlU3RyaW5nXHJcbiAgICAuc3BsaXQoXCJcIilcclxuICAgIC5tYXAoZnVuY3Rpb24oYnl0ZSkge1xyXG4gICAgICByZXR1cm4gKFwiMFwiICsgKGJ5dGUuY2hhckNvZGVBdCgwKSAmIDB4ZmYpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xyXG4gICAgfSlcclxuICAgIC5qb2luKFwiXCIpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIGEgaGV4IHN0cmluZyB0byBhIGJ5dGUgc3RyaW5nXHJcbiAqXHJcbiAqIEBuYW1lIGhleFRvQnl0ZXNcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZXggSGV4IHN0cmluZ1xyXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxyXG4gKi9cclxuUERGU2VjdXJpdHkucHJvdG90eXBlLmhleFRvQnl0ZXMgPSBmdW5jdGlvbihoZXgpIHtcclxuICBmb3IgKHZhciBieXRlcyA9IFtdLCBjID0gMDsgYyA8IGhleC5sZW5ndGg7IGMgKz0gMilcclxuICAgIGJ5dGVzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChoZXguc3Vic3RyKGMsIDIpLCAxNikpKTtcclxuICByZXR1cm4gYnl0ZXMuam9pbihcIlwiKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb21wdXRlcyB0aGUgJ08nIGZpZWxkIGluIHRoZSBlbmNyeXB0aW9uIGRpY3Rpb25hcnlcclxuICpcclxuICogQG5hbWUgcHJvY2Vzc093bmVyUGFzc3dvcmRcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYWRkZWRVc2VyUGFzc3dvcmQgQnl0ZSBzdHJpbmcgb2YgcGFkZGVkIHVzZXIgcGFzc3dvcmRcclxuICogQHBhcmFtIHtTdHJpbmd9IHBhZGRlZE93bmVyUGFzc3dvcmQgQnl0ZSBzdHJpbmcgb2YgcGFkZGVkIG93bmVyIHBhc3N3b3JkXHJcbiAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAqL1xyXG5QREZTZWN1cml0eS5wcm90b3R5cGUucHJvY2Vzc093bmVyUGFzc3dvcmQgPSBmdW5jdGlvbihcclxuICBwYWRkZWRVc2VyUGFzc3dvcmQsXHJcbiAgcGFkZGVkT3duZXJQYXNzd29yZFxyXG4pIHtcclxuICBsZXQga2V5ID0gbWQ1QmluKHBhZGRlZE93bmVyUGFzc3dvcmQpLnN1YnN0cigwLCA1KTtcclxuICByZXR1cm4gcmM0KGtleSwgcGFkZGVkVXNlclBhc3N3b3JkKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGVuY3J5cHRvciBmdW5jdGlvbiB3aGljaCBjYW4gdGFrZSBpbiBhIGJ5dGUgc3RyaW5nIGFuZCByZXR1cm5zIHRoZSBlbmNyeXB0ZWQgdmVyc2lvblxyXG4gKlxyXG4gKiBAbmFtZSBlbmNyeXB0b3JcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBvYmplY3RJZFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZ2VuZXJhdGlvbiBOb3Qgc3VyZSB3aGF0IHRoaXMgaXMgZm9yLCB5b3UgY2FuIHNldCBpdCB0byAwXHJcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cclxuICogQGV4YW1wbGVcclxuICogb3V0KFwic3RyZWFtXCIpO1xyXG4gKiBlbmNyeXB0b3IgPSBzZWN1cml0eS5lbmNyeXB0b3Iob2JqZWN0LmlkLCAwKTtcclxuICogb3V0KGVuY3J5cHRvcihkYXRhKSk7XHJcbiAqIG91dChcImVuZHN0cmVhbVwiKTtcclxuICovXHJcblBERlNlY3VyaXR5LnByb3RvdHlwZS5lbmNyeXB0b3IgPSBmdW5jdGlvbihvYmplY3RJZCwgZ2VuZXJhdGlvbikge1xyXG4gIGxldCBrZXkgPSBtZDVCaW4oXHJcbiAgICB0aGlzLmVuY3J5cHRpb25LZXkgK1xyXG4gICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKFxyXG4gICAgICAgIG9iamVjdElkICYgMHhmZixcclxuICAgICAgICAob2JqZWN0SWQgPj4gOCkgJiAweGZmLFxyXG4gICAgICAgIChvYmplY3RJZCA+PiAxNikgJiAweGZmLFxyXG4gICAgICAgIGdlbmVyYXRpb24gJiAweGZmLFxyXG4gICAgICAgIChnZW5lcmF0aW9uID4+IDgpICYgMHhmZlxyXG4gICAgICApXHJcbiAgKS5zdWJzdHIoMCwgMTApO1xyXG4gIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICByZXR1cm4gcmM0KGtleSwgZGF0YSk7XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCB7IFBERlNlY3VyaXR5IH07XHJcbiIsIi8qKlxuICogQ29udmVydCBzdHJpbmcgdG8gYFBERiBOYW1lIE9iamVjdGAuXG4gKiBEZXRhaWw6IFBERiBSZWZlcmVuY2UgMS4zIC0gQ2hhcHRlciAzLjIuNCBOYW1lIE9iamVjdFxuICogQHBhcmFtIHN0clxuICovXG5mdW5jdGlvbiB0b1BERk5hbWUoc3RyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gIGlmICgvW15cXHUwMDAwLVxcdTAwZmZdLy50ZXN0KHN0cikpIHtcbiAgICAvLyBub24gYXNjaWkgc3RyaW5nXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJJbnZhbGlkIFBERiBOYW1lIE9iamVjdDogXCIgKyBzdHIgKyBcIiwgT25seSBhY2NlcHQgQVNDSUkgY2hhcmFjdGVycy5cIlxuICAgICk7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFwiXCIsXG4gICAgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJMZW5ndGg7IGkrKykge1xuICAgIHZhciBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChcbiAgICAgIGNoYXJDb2RlIDwgMHgyMSB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4MjMgLyogIyAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4MjUgLyogJSAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4MjggLyogKCAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4MjkgLyogKSAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4MmYgLyogLyAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4M2MgLyogPCAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4M2UgLyogPiAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4NWIgLyogWyAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4NWQgLyogXSAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4N2IgLyogeyAqLyB8fFxuICAgICAgY2hhckNvZGUgPT09IDB4N2QgLyogfSAqLyB8fFxuICAgICAgY2hhckNvZGUgPiAweDdlXG4gICAgKSB7XG4gICAgICAvLyBDaGFyICAgIENoYXJDb2RlICAgIGhleFN0ciAgIHBhZGRpbmdIZXhTdHIgICAgUmVzdWx0XG4gICAgICAvLyBcIlxcdFwiICAgIDkgICAgICAgICAgIDkgICAgICAgIDA5ICAgICAgICAgICAgICAgIzA5XG4gICAgICAvLyBcIiBcIiAgICAgMzIgICAgICAgICAgMjAgICAgICAgMjAgICAgICAgICAgICAgICAjMjBcbiAgICAgIC8vIFwiwqlcIiAgICAgMTY5ICAgICAgICAgYTkgICAgICAgYTkgICAgICAgICAgICAgICAjYTlcbiAgICAgIHZhciBoZXhTdHIgPSBjaGFyQ29kZS50b1N0cmluZygxNiksXG4gICAgICAgIHBhZGRpbmdIZXhTdHIgPSAoXCIwXCIgKyBoZXhTdHIpLnNsaWNlKC0yKTtcblxuICAgICAgcmVzdWx0ICs9IFwiI1wiICsgcGFkZGluZ0hleFN0cjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3RoZXIgQVNDSUkgcHJpbnRhYmxlIGNoYXJhY3RlcnMgYmV0d2VlbiAweDIxIDw9IFggPD0gMHg3ZVxuICAgICAgcmVzdWx0ICs9IHN0cltpXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IHsgdG9QREZOYW1lIH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXHJcblxyXG5pbXBvcnQgeyBzYXZlQXMgfSBmcm9tIFwiLi9saWJzL0ZpbGVTYXZlci5qc1wiO1xyXG5pbXBvcnQgeyBnbG9iYWxPYmplY3QgfSBmcm9tIFwiLi9saWJzL2dsb2JhbE9iamVjdC5qc1wiO1xyXG5pbXBvcnQgeyBSR0JDb2xvciB9IGZyb20gXCIuL2xpYnMvcmdiY29sb3IuanNcIjtcclxuaW1wb3J0IHsgYnRvYSB9IGZyb20gXCIuL2xpYnMvQXRvYkJ0b2EuanNcIjtcclxuaW1wb3J0IHsgY29uc29sZSB9IGZyb20gXCIuL2xpYnMvY29uc29sZS5qc1wiO1xyXG5pbXBvcnQgeyBQREZTZWN1cml0eSB9IGZyb20gXCIuL2xpYnMvcGRmc2VjdXJpdHkuanNcIjtcclxuaW1wb3J0IHsgdG9QREZOYW1lIH0gZnJvbSBcIi4vbGlicy9wZGZuYW1lLmpzXCI7XHJcbi8qKlxyXG4gKiBqc1BERidzIEludGVybmFsIFB1YlN1YiBJbXBsZW1lbnRhdGlvbi5cclxuICogQmFja3dhcmQgY29tcGF0aWJsZSByZXdyaXR0ZW4gb24gMjAxNCBieVxyXG4gKiBEaWVnbyBDYXNvcnJhbiwgaHR0cHM6Ly9naXRodWIuY29tL2RpZWdvY3JcclxuICpcclxuICogQGNsYXNzXHJcbiAqIEBuYW1lIFB1YlN1YlxyXG4gKiBAaWdub3JlXHJcbiAqL1xyXG5mdW5jdGlvbiBQdWJTdWIoY29udGV4dCkge1xyXG4gIGlmICh0eXBlb2YgY29udGV4dCAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICBcIkludmFsaWQgQ29udGV4dCBwYXNzZWQgdG8gaW5pdGlhbGl6ZSBQdWJTdWIgKGpzUERGLW1vZHVsZSlcIlxyXG4gICAgKTtcclxuICB9XHJcbiAgdmFyIHRvcGljcyA9IHt9O1xyXG5cclxuICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uKHRvcGljLCBjYWxsYmFjaywgb25jZSkge1xyXG4gICAgb25jZSA9IG9uY2UgfHwgZmFsc2U7XHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiB0b3BpYyAhPT0gXCJzdHJpbmdcIiB8fFxyXG4gICAgICB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIiB8fFxyXG4gICAgICB0eXBlb2Ygb25jZSAhPT0gXCJib29sZWFuXCJcclxuICAgICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8gUHViU3ViLnN1YnNjcmliZSAoanNQREYtbW9kdWxlKVwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0b3BpY3MuaGFzT3duUHJvcGVydHkodG9waWMpKSB7XHJcbiAgICAgIHRvcGljc1t0b3BpY10gPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdG9rZW4gPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM1KTtcclxuICAgIHRvcGljc1t0b3BpY11bdG9rZW5dID0gW2NhbGxiYWNrLCAhIW9uY2VdO1xyXG5cclxuICAgIHJldHVybiB0b2tlbjtcclxuICB9O1xyXG5cclxuICB0aGlzLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24odG9rZW4pIHtcclxuICAgIGZvciAodmFyIHRvcGljIGluIHRvcGljcykge1xyXG4gICAgICBpZiAodG9waWNzW3RvcGljXVt0b2tlbl0pIHtcclxuICAgICAgICBkZWxldGUgdG9waWNzW3RvcGljXVt0b2tlbl07XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRvcGljc1t0b3BpY10pLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgZGVsZXRlIHRvcGljc1t0b3BpY107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxuXHJcbiAgdGhpcy5wdWJsaXNoID0gZnVuY3Rpb24odG9waWMpIHtcclxuICAgIGlmICh0b3BpY3MuaGFzT3duUHJvcGVydHkodG9waWMpKSB7XHJcbiAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcclxuICAgICAgICB0b2tlbnMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIHRva2VuIGluIHRvcGljc1t0b3BpY10pIHtcclxuICAgICAgICB2YXIgc3ViID0gdG9waWNzW3RvcGljXVt0b2tlbl07XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHN1YlswXS5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgaWYgKGdsb2JhbE9iamVjdC5jb25zb2xlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJqc1BERiBQdWJTdWIgRXJyb3JcIiwgZXgubWVzc2FnZSwgZXgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3ViWzFdKSB0b2tlbnMucHVzaCh0b2tlbik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRva2Vucy5sZW5ndGgpIHRva2Vucy5mb3JFYWNoKHRoaXMudW5zdWJzY3JpYmUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHRoaXMuZ2V0VG9waWNzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdG9waWNzO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdTdGF0ZShwYXJhbWV0ZXJzKSB7XHJcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEdTdGF0ZSkpIHtcclxuICAgIHJldHVybiBuZXcgR1N0YXRlKHBhcmFtZXRlcnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgR1N0YXRlI29wYWNpdHlcclxuICAgKiBAdHlwZSB7YW55fVxyXG4gICAqL1xyXG4gIC8qKlxyXG4gICAqIEBuYW1lIEdTdGF0ZSNzdHJva2Utb3BhY2l0eVxyXG4gICAqIEB0eXBlIHthbnl9XHJcbiAgICovXHJcbiAgdmFyIHN1cHBvcnRlZCA9IFwib3BhY2l0eSxzdHJva2Utb3BhY2l0eVwiLnNwbGl0KFwiLFwiKTtcclxuICBmb3IgKHZhciBwIGluIHBhcmFtZXRlcnMpIHtcclxuICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KHApICYmIHN1cHBvcnRlZC5pbmRleE9mKHApID49IDApIHtcclxuICAgICAgdGhpc1twXSA9IHBhcmFtZXRlcnNbcF07XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBuYW1lIEdTdGF0ZSNpZFxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgdGhpcy5pZCA9IFwiXCI7IC8vIHNldCBieSBhZGRHU3RhdGUoKVxyXG4gIC8qKlxyXG4gICAqIEBuYW1lIEdTdGF0ZSNvYmplY3ROdW1iZXJcclxuICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAqL1xyXG4gIHRoaXMub2JqZWN0TnVtYmVyID0gLTE7IC8vIHdpbGwgYmUgc2V0IGJ5IHB1dEdTdGF0ZSgpXHJcbn1cclxuXHJcbkdTdGF0ZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKG90aGVyKSB7XHJcbiAgdmFyIGlnbm9yZSA9IFwiaWQsb2JqZWN0TnVtYmVyLGVxdWFsc1wiO1xyXG4gIHZhciBwO1xyXG4gIGlmICghb3RoZXIgfHwgdHlwZW9mIG90aGVyICE9PSB0eXBlb2YgdGhpcykgcmV0dXJuIGZhbHNlO1xyXG4gIHZhciBjb3VudCA9IDA7XHJcbiAgZm9yIChwIGluIHRoaXMpIHtcclxuICAgIGlmIChpZ25vcmUuaW5kZXhPZihwKSA+PSAwKSBjb250aW51ZTtcclxuICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHApICYmICFvdGhlci5oYXNPd25Qcm9wZXJ0eShwKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKHRoaXNbcF0gIT09IG90aGVyW3BdKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb3VudCsrO1xyXG4gIH1cclxuICBmb3IgKHAgaW4gb3RoZXIpIHtcclxuICAgIGlmIChvdGhlci5oYXNPd25Qcm9wZXJ0eShwKSAmJiBpZ25vcmUuaW5kZXhPZihwKSA8IDApIGNvdW50LS07XHJcbiAgfVxyXG4gIHJldHVybiBjb3VudCA9PT0gMDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIFBhdHRlcm4oZ1N0YXRlLCBtYXRyaXgpIHtcclxuICB0aGlzLmdTdGF0ZSA9IGdTdGF0ZTtcclxuICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcclxuXHJcbiAgdGhpcy5pZCA9IFwiXCI7IC8vIHNldCBieSBhZGRQYXR0ZXJuKClcclxuICB0aGlzLm9iamVjdE51bWJlciA9IC0xOyAvLyB3aWxsIGJlIHNldCBieSBwdXRQYXR0ZXJuKClcclxufVxyXG5cclxuZnVuY3Rpb24gU2hhZGluZ1BhdHRlcm4odHlwZSwgY29vcmRzLCBjb2xvcnMsIGdTdGF0ZSwgbWF0cml4KSB7XHJcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNoYWRpbmdQYXR0ZXJuKSkge1xyXG4gICAgcmV0dXJuIG5ldyBTaGFkaW5nUGF0dGVybih0eXBlLCBjb29yZHMsIGNvbG9ycywgZ1N0YXRlLCBtYXRyaXgpO1xyXG4gIH1cclxuXHJcbiAgLy8gc2VlIHB1dFBhdHRlcm4oKSBmb3IgaW5mb3JtYXRpb24gaG93IHRoZXkgYXJlIHJlYWxpemVkXHJcbiAgdGhpcy50eXBlID0gdHlwZSA9PT0gXCJheGlhbFwiID8gMiA6IDM7XHJcbiAgdGhpcy5jb29yZHMgPSBjb29yZHM7XHJcbiAgdGhpcy5jb2xvcnMgPSBjb2xvcnM7XHJcblxyXG4gIFBhdHRlcm4uY2FsbCh0aGlzLCBnU3RhdGUsIG1hdHJpeCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFRpbGluZ1BhdHRlcm4oYm91bmRpbmdCb3gsIHhTdGVwLCB5U3RlcCwgZ1N0YXRlLCBtYXRyaXgpIHtcclxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVGlsaW5nUGF0dGVybikpIHtcclxuICAgIHJldHVybiBuZXcgVGlsaW5nUGF0dGVybihib3VuZGluZ0JveCwgeFN0ZXAsIHlTdGVwLCBnU3RhdGUsIG1hdHJpeCk7XHJcbiAgfVxyXG5cclxuICB0aGlzLmJvdW5kaW5nQm94ID0gYm91bmRpbmdCb3g7XHJcbiAgdGhpcy54U3RlcCA9IHhTdGVwO1xyXG4gIHRoaXMueVN0ZXAgPSB5U3RlcDtcclxuXHJcbiAgdGhpcy5zdHJlYW0gPSBcIlwiOyAvLyBzZXQgYnkgZW5kVGlsaW5nUGF0dGVybigpO1xyXG5cclxuICB0aGlzLmNsb25lSW5kZXggPSAwO1xyXG5cclxuICBQYXR0ZXJuLmNhbGwodGhpcywgZ1N0YXRlLCBtYXRyaXgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBuZXcganNQREYgZG9jdW1lbnQgb2JqZWN0IGluc3RhbmNlLlxyXG4gKiBAbmFtZSBqc1BERlxyXG4gKiBAY2xhc3NcclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIENvbGxlY3Rpb24gb2Ygc2V0dGluZ3MgaW5pdGlhbGl6aW5nIHRoZSBqc1BERi1pbnN0YW5jZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3JpZW50YXRpb249cG9ydHJhaXRdIC0gT3JpZW50YXRpb24gb2YgdGhlIGZpcnN0IHBhZ2UuIFBvc3NpYmxlIHZhbHVlcyBhcmUgXCJwb3J0cmFpdFwiIG9yIFwibGFuZHNjYXBlXCIgKG9yIHNob3J0Y3V0cyBcInBcIiBvciBcImxcIikuPGJyIC8+XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy51bml0PW1tXSBNZWFzdXJlbWVudCB1bml0IChiYXNlIHVuaXQpIHRvIGJlIHVzZWQgd2hlbiBjb29yZGluYXRlcyBhcmUgc3BlY2lmaWVkLjxiciAvPlxyXG4gKiBQb3NzaWJsZSB2YWx1ZXMgYXJlIFwicHRcIiAocG9pbnRzKSwgXCJtbVwiLCBcImNtXCIsIFwiaW5cIiwgXCJweFwiLCBcInBjXCIsIFwiZW1cIiBvciBcImV4XCIuIE5vdGUgdGhhdCBpbiBvcmRlciB0byBnZXQgdGhlIGNvcnJlY3Qgc2NhbGluZyBmb3IgXCJweFwiXHJcbiAqIHVuaXRzLCB5b3UgbmVlZCB0byBlbmFibGUgdGhlIGhvdGZpeCBcInB4X3NjYWxpbmdcIiBieSBzZXR0aW5nIG9wdGlvbnMuaG90Zml4ZXMgPSBbXCJweF9zY2FsaW5nXCJdLlxyXG4gKiBAcGFyYW0ge3N0cmluZy9BcnJheX0gW29wdGlvbnMuZm9ybWF0PWE0XSBUaGUgZm9ybWF0IG9mIHRoZSBmaXJzdCBwYWdlLiBDYW4gYmU6PHVsPjxsaT5hMCAtIGExMDwvbGk+PGxpPmIwIC0gYjEwPC9saT48bGk+YzAgLSBjMTA8L2xpPjxsaT5kbDwvbGk+PGxpPmxldHRlcjwvbGk+PGxpPmdvdmVybm1lbnQtbGV0dGVyPC9saT48bGk+bGVnYWw8L2xpPjxsaT5qdW5pb3ItbGVnYWw8L2xpPjxsaT5sZWRnZXI8L2xpPjxsaT50YWJsb2lkPC9saT48bGk+Y3JlZGl0LWNhcmQ8L2xpPjwvdWw+PGJyIC8+XHJcbiAqIERlZmF1bHQgaXMgXCJhNFwiLiBJZiB5b3Ugd2FudCB0byB1c2UgeW91ciBvd24gZm9ybWF0IGp1c3QgcGFzcyBpbnN0ZWFkIG9mIG9uZSBvZiB0aGUgYWJvdmUgcHJlZGVmaW5lZCBmb3JtYXRzIHRoZSBzaXplIGFzIGFuIG51bWJlci1hcnJheSwgZS5nLiBbNTk1LjI4LCA4NDEuODldXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucHV0T25seVVzZWRGb250cz1mYWxzZV0gT25seSBwdXQgZm9udHMgaW50byB0aGUgUERGLCB3aGljaCB3ZXJlIHVzZWQuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY29tcHJlc3M9ZmFsc2VdIENvbXByZXNzIHRoZSBnZW5lcmF0ZWQgUERGLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucHJlY2lzaW9uPTE2XSBQcmVjaXNpb24gb2YgdGhlIGVsZW1lbnQtcG9zaXRpb25zLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMudXNlclVuaXQ9MS4wXSBOb3QgdG8gYmUgY29uZnVzZWQgd2l0aCB0aGUgYmFzZSB1bml0LiBQbGVhc2UgaW5mb3JtIHlvdXJzZWxmIGJlZm9yZSB5b3UgdXNlIGl0LlxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBbb3B0aW9ucy5ob3RmaXhlc10gQW4gYXJyYXkgb2Ygc3RyaW5ncyB0byBlbmFibGUgaG90Zml4ZXMgc3VjaCBhcyBjb3JyZWN0IHBpeGVsIHNjYWxpbmcuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5lbmNyeXB0aW9uXVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZW5jcnlwdGlvbi51c2VyUGFzc3dvcmRdIFBhc3N3b3JkIGZvciB0aGUgdXNlciBib3VuZCBieSB0aGUgZ2l2ZW4gcGVybWlzc2lvbnMgbGlzdC5cclxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmVuY3J5cHRpb24ub3duZXJQYXNzd29yZF0gQm90aCB1c2VyUGFzc3dvcmQgYW5kIG93bmVyUGFzc3dvcmQgc2hvdWxkIGJlIHNldCBmb3IgcHJvcGVyIGF1dGhlbnRpY2F0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBbb3B0aW9ucy5lbmNyeXB0aW9uLnVzZXJQZXJtaXNzaW9uc10gQXJyYXkgb2YgcGVybWlzc2lvbnMgXCJwcmludFwiLCBcIm1vZGlmeVwiLCBcImNvcHlcIiwgXCJhbm5vdC1mb3Jtc1wiLCBhY2Nlc3NpYmxlIGJ5IHRoZSB1c2VyLlxyXG4gKiBAcGFyYW0ge251bWJlcnxcInNtYXJ0XCJ9IFtvcHRpb25zLmZsb2F0UHJlY2lzaW9uPTE2XVxyXG4gKiBAcmV0dXJucyB7anNQREZ9IGpzUERGLWluc3RhbmNlXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBgYGBcclxuICoge1xyXG4gKiAgb3JpZW50YXRpb246ICdwJyxcclxuICogIHVuaXQ6ICdtbScsXHJcbiAqICBmb3JtYXQ6ICdhNCcsXHJcbiAqICBwdXRPbmx5VXNlZEZvbnRzOnRydWUsXHJcbiAqICBmbG9hdFByZWNpc2lvbjogMTYgLy8gb3IgXCJzbWFydFwiLCBkZWZhdWx0IGlzIDE2XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24ganNQREYob3B0aW9ucykge1xyXG4gIHZhciBvcmllbnRhdGlvbiA9IHR5cGVvZiBhcmd1bWVudHNbMF0gPT09IFwic3RyaW5nXCIgPyBhcmd1bWVudHNbMF0gOiBcInBcIjtcclxuICB2YXIgdW5pdCA9IGFyZ3VtZW50c1sxXTtcclxuICB2YXIgZm9ybWF0ID0gYXJndW1lbnRzWzJdO1xyXG4gIHZhciBjb21wcmVzc1BkZiA9IGFyZ3VtZW50c1szXTtcclxuICB2YXIgZmlsdGVycyA9IFtdO1xyXG4gIHZhciB1c2VyVW5pdCA9IDEuMDtcclxuICB2YXIgcHJlY2lzaW9uO1xyXG4gIHZhciBmbG9hdFByZWNpc2lvbiA9IDE2O1xyXG4gIHZhciBkZWZhdWx0UGF0aE9wZXJhdGlvbiA9IFwiU1wiO1xyXG4gIHZhciBlbmNyeXB0aW9uT3B0aW9ucyA9IG51bGw7XHJcblxyXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIpIHtcclxuICAgIG9yaWVudGF0aW9uID0gb3B0aW9ucy5vcmllbnRhdGlvbjtcclxuICAgIHVuaXQgPSBvcHRpb25zLnVuaXQgfHwgdW5pdDtcclxuICAgIGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IGZvcm1hdDtcclxuICAgIGNvbXByZXNzUGRmID0gb3B0aW9ucy5jb21wcmVzcyB8fCBvcHRpb25zLmNvbXByZXNzUGRmIHx8IGNvbXByZXNzUGRmO1xyXG4gICAgZW5jcnlwdGlvbk9wdGlvbnMgPSBvcHRpb25zLmVuY3J5cHRpb24gfHwgbnVsbDtcclxuICAgIGlmIChlbmNyeXB0aW9uT3B0aW9ucyAhPT0gbnVsbCkge1xyXG4gICAgICBlbmNyeXB0aW9uT3B0aW9ucy51c2VyUGFzc3dvcmQgPSBlbmNyeXB0aW9uT3B0aW9ucy51c2VyUGFzc3dvcmQgfHwgXCJcIjtcclxuICAgICAgZW5jcnlwdGlvbk9wdGlvbnMub3duZXJQYXNzd29yZCA9IGVuY3J5cHRpb25PcHRpb25zLm93bmVyUGFzc3dvcmQgfHwgXCJcIjtcclxuICAgICAgZW5jcnlwdGlvbk9wdGlvbnMudXNlclBlcm1pc3Npb25zID1cclxuICAgICAgICBlbmNyeXB0aW9uT3B0aW9ucy51c2VyUGVybWlzc2lvbnMgfHwgW107XHJcbiAgICB9XHJcbiAgICB1c2VyVW5pdCA9XHJcbiAgICAgIHR5cGVvZiBvcHRpb25zLnVzZXJVbml0ID09PSBcIm51bWJlclwiID8gTWF0aC5hYnMob3B0aW9ucy51c2VyVW5pdCkgOiAxLjA7XHJcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJlY2lzaW9uICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgIHByZWNpc2lvbiA9IG9wdGlvbnMucHJlY2lzaW9uO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmZsb2F0UHJlY2lzaW9uICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgIGZsb2F0UHJlY2lzaW9uID0gb3B0aW9ucy5mbG9hdFByZWNpc2lvbjtcclxuICAgIH1cclxuICAgIGRlZmF1bHRQYXRoT3BlcmF0aW9uID0gb3B0aW9ucy5kZWZhdWx0UGF0aE9wZXJhdGlvbiB8fCBcIlNcIjtcclxuICB9XHJcblxyXG4gIGZpbHRlcnMgPVxyXG4gICAgb3B0aW9ucy5maWx0ZXJzIHx8IChjb21wcmVzc1BkZiA9PT0gdHJ1ZSA/IFtcIkZsYXRlRW5jb2RlXCJdIDogZmlsdGVycyk7XHJcblxyXG4gIHVuaXQgPSB1bml0IHx8IFwibW1cIjtcclxuICBvcmllbnRhdGlvbiA9IChcIlwiICsgKG9yaWVudGF0aW9uIHx8IFwiUFwiKSkudG9Mb3dlckNhc2UoKTtcclxuICB2YXIgcHV0T25seVVzZWRGb250cyA9IG9wdGlvbnMucHV0T25seVVzZWRGb250cyB8fCBmYWxzZTtcclxuICB2YXIgdXNlZEZvbnRzID0ge307XHJcblxyXG4gIHZhciBBUEkgPSB7XHJcbiAgICBpbnRlcm5hbDoge30sXHJcbiAgICBfX3ByaXZhdGVfXzoge31cclxuICB9O1xyXG5cclxuICBBUEkuX19wcml2YXRlX18uUHViU3ViID0gUHViU3ViO1xyXG5cclxuICB2YXIgcGRmVmVyc2lvbiA9IFwiMS4zXCI7XHJcbiAgdmFyIGdldFBkZlZlcnNpb24gPSAoQVBJLl9fcHJpdmF0ZV9fLmdldFBkZlZlcnNpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBwZGZWZXJzaW9uO1xyXG4gIH0pO1xyXG5cclxuICBBUEkuX19wcml2YXRlX18uc2V0UGRmVmVyc2lvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBwZGZWZXJzaW9uID0gdmFsdWU7XHJcbiAgfTtcclxuXHJcbiAgLy8gU2l6ZSBpbiBwdCBvZiB2YXJpb3VzIHBhcGVyIGZvcm1hdHNcclxuICB2YXIgcGFnZUZvcm1hdHMgPSB7XHJcbiAgICBhMDogWzIzODMuOTQsIDMzNzAuMzldLFxyXG4gICAgYTE6IFsxNjgzLjc4LCAyMzgzLjk0XSxcclxuICAgIGEyOiBbMTE5MC41NSwgMTY4My43OF0sXHJcbiAgICBhMzogWzg0MS44OSwgMTE5MC41NV0sXHJcbiAgICBhNDogWzU5NS4yOCwgODQxLjg5XSxcclxuICAgIGE1OiBbNDE5LjUzLCA1OTUuMjhdLFxyXG4gICAgYTY6IFsyOTcuNjQsIDQxOS41M10sXHJcbiAgICBhNzogWzIwOS43NiwgMjk3LjY0XSxcclxuICAgIGE4OiBbMTQ3LjQsIDIwOS43Nl0sXHJcbiAgICBhOTogWzEwNC44OCwgMTQ3LjRdLFxyXG4gICAgYTEwOiBbNzMuNywgMTA0Ljg4XSxcclxuICAgIGIwOiBbMjgzNC42NSwgNDAwOC4xOV0sXHJcbiAgICBiMTogWzIwMDQuMDksIDI4MzQuNjVdLFxyXG4gICAgYjI6IFsxNDE3LjMyLCAyMDA0LjA5XSxcclxuICAgIGIzOiBbMTAwMC42MywgMTQxNy4zMl0sXHJcbiAgICBiNDogWzcwOC42NiwgMTAwMC42M10sXHJcbiAgICBiNTogWzQ5OC45LCA3MDguNjZdLFxyXG4gICAgYjY6IFszNTQuMzMsIDQ5OC45XSxcclxuICAgIGI3OiBbMjQ5LjQ1LCAzNTQuMzNdLFxyXG4gICAgYjg6IFsxNzUuNzUsIDI0OS40NV0sXHJcbiAgICBiOTogWzEyNC43MiwgMTc1Ljc1XSxcclxuICAgIGIxMDogWzg3Ljg3LCAxMjQuNzJdLFxyXG4gICAgYzA6IFsyNTk5LjM3LCAzNjc2LjU0XSxcclxuICAgIGMxOiBbMTgzNi44NSwgMjU5OS4zN10sXHJcbiAgICBjMjogWzEyOTguMjcsIDE4MzYuODVdLFxyXG4gICAgYzM6IFs5MTguNDMsIDEyOTguMjddLFxyXG4gICAgYzQ6IFs2NDkuMTMsIDkxOC40M10sXHJcbiAgICBjNTogWzQ1OS4yMSwgNjQ5LjEzXSxcclxuICAgIGM2OiBbMzIzLjE1LCA0NTkuMjFdLFxyXG4gICAgYzc6IFsyMjkuNjEsIDMyMy4xNV0sXHJcbiAgICBjODogWzE2MS41NywgMjI5LjYxXSxcclxuICAgIGM5OiBbMTEzLjM5LCAxNjEuNTddLFxyXG4gICAgYzEwOiBbNzkuMzcsIDExMy4zOV0sXHJcbiAgICBkbDogWzMxMS44MSwgNjIzLjYyXSxcclxuICAgIGxldHRlcjogWzYxMiwgNzkyXSxcclxuICAgIFwiZ292ZXJubWVudC1sZXR0ZXJcIjogWzU3NiwgNzU2XSxcclxuICAgIGxlZ2FsOiBbNjEyLCAxMDA4XSxcclxuICAgIFwianVuaW9yLWxlZ2FsXCI6IFs1NzYsIDM2MF0sXHJcbiAgICBsZWRnZXI6IFsxMjI0LCA3OTJdLFxyXG4gICAgdGFibG9pZDogWzc5MiwgMTIyNF0sXHJcbiAgICBcImNyZWRpdC1jYXJkXCI6IFsxNTMsIDI0M11cclxuICB9O1xyXG5cclxuICBBUEkuX19wcml2YXRlX18uZ2V0UGFnZUZvcm1hdHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBwYWdlRm9ybWF0cztcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0UGFnZUZvcm1hdCA9IChBUEkuX19wcml2YXRlX18uZ2V0UGFnZUZvcm1hdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gcGFnZUZvcm1hdHNbdmFsdWVdO1xyXG4gIH0pO1xyXG5cclxuICBmb3JtYXQgPSBmb3JtYXQgfHwgXCJhNFwiO1xyXG5cclxuICB2YXIgQXBpTW9kZSA9IHtcclxuICAgIENPTVBBVDogXCJjb21wYXRcIixcclxuICAgIEFEVkFOQ0VEOiBcImFkdmFuY2VkXCJcclxuICB9O1xyXG4gIHZhciBhcGlNb2RlID0gQXBpTW9kZS5DT01QQVQ7XHJcblxyXG4gIGZ1bmN0aW9uIGFkdmFuY2VkQVBJKCkge1xyXG4gICAgLy8gcHJlcGVuZCBnbG9iYWwgY2hhbmdlIG9mIGJhc2lzIG1hdHJpeFxyXG4gICAgLy8gKE5vdywgaW5zdGVhZCBvZiBjb252ZXJ0aW5nIGV2ZXJ5IGNvb3JkaW5hdGUgdG8gdGhlIHBkZiBjb29yZGluYXRlIHN5c3RlbSwgd2UgYXBwbHkgYSBtYXRyaXhcclxuICAgIC8vIHRoYXQgZG9lcyB0aGlzIGpvYiBmb3IgdXMgKGhvd2V2ZXIsIHRleHRzLCBpbWFnZXMgYW5kIHNpbWlsYXIgb2JqZWN0cyBtdXN0IGJlIGRyYXduIGJvdHRvbSB1cCkpXHJcbiAgICB0aGlzLnNhdmVHcmFwaGljc1N0YXRlKCk7XHJcbiAgICBvdXQoXHJcbiAgICAgIG5ldyBNYXRyaXgoXHJcbiAgICAgICAgc2NhbGVGYWN0b3IsXHJcbiAgICAgICAgMCxcclxuICAgICAgICAwLFxyXG4gICAgICAgIC1zY2FsZUZhY3RvcixcclxuICAgICAgICAwLFxyXG4gICAgICAgIGdldFBhZ2VIZWlnaHQoKSAqIHNjYWxlRmFjdG9yXHJcbiAgICAgICkudG9TdHJpbmcoKSArIFwiIGNtXCJcclxuICAgICk7XHJcbiAgICB0aGlzLnNldEZvbnRTaXplKHRoaXMuZ2V0Rm9udFNpemUoKSAvIHNjYWxlRmFjdG9yKTtcclxuXHJcbiAgICAvLyBUaGUgZGVmYXVsdCBpbiBNclJpbydzIGltcGxlbWVudGF0aW9uIGlzIFwiU1wiIChzdHJva2UpLCB3aGVyZWFzIHRoZSBkZWZhdWx0IGluIHRoZSB5V29ya3MgaW1wbGVtZW50YXRpb25cclxuICAgIC8vIHdhcyBcIm5cIiAobm9uZSkuIEFsdGhvdWdoIHRoaXMgaGFzIG5vdGhpbmcgdG8gZG8gd2l0aCB0cmFuc2Zvcm1zLCB3ZSBzaG91bGQgdXNlIHRoZSBBUEkgc3dpdGNoIGhlcmUuXHJcbiAgICBkZWZhdWx0UGF0aE9wZXJhdGlvbiA9IFwiblwiO1xyXG5cclxuICAgIGFwaU1vZGUgPSBBcGlNb2RlLkFEVkFOQ0VEO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29tcGF0QVBJKCkge1xyXG4gICAgdGhpcy5yZXN0b3JlR3JhcGhpY3NTdGF0ZSgpO1xyXG4gICAgZGVmYXVsdFBhdGhPcGVyYXRpb24gPSBcIlNcIjtcclxuICAgIGFwaU1vZGUgPSBBcGlNb2RlLkNPTVBBVDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjb21iaW5lRm9udFN0eWxlQW5kRm9udFdlaWdodFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3R5bGUgRm9udHN0eWxlIG9yIHZhcmlhbnQuIEV4YW1wbGU6IFwiaXRhbGljXCIuXHJcbiAgICogQHBhcmFtIHtudW1iZXIgfCBzdHJpbmd9IGZvbnRXZWlnaHQgV2VpZ2h0IG9mIHRoZSBGb250LiBFeGFtcGxlOiBcIm5vcm1hbFwiIHwgNDAwXHJcbiAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHZhciBjb21iaW5lRm9udFN0eWxlQW5kRm9udFdlaWdodCA9IChBUEkuX19wcml2YXRlX18uY29tYmluZUZvbnRTdHlsZUFuZEZvbnRXZWlnaHQgPSBmdW5jdGlvbihcclxuICAgIGZvbnRTdHlsZSxcclxuICAgIGZvbnRXZWlnaHRcclxuICApIHtcclxuICAgIGlmIChcclxuICAgICAgKGZvbnRTdHlsZSA9PSBcImJvbGRcIiAmJiBmb250V2VpZ2h0ID09IFwibm9ybWFsXCIpIHx8XHJcbiAgICAgIChmb250U3R5bGUgPT0gXCJib2xkXCIgJiYgZm9udFdlaWdodCA9PSA0MDApIHx8XHJcbiAgICAgIChmb250U3R5bGUgPT0gXCJub3JtYWxcIiAmJiBmb250V2VpZ2h0ID09IFwiaXRhbGljXCIpIHx8XHJcbiAgICAgIChmb250U3R5bGUgPT0gXCJib2xkXCIgJiYgZm9udFdlaWdodCA9PSBcIml0YWxpY1wiKVxyXG4gICAgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQ29tYmluYXRpb24gb2YgZm9udHdlaWdodCBhbmQgZm9udHN0eWxlXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZvbnRXZWlnaHQpIHtcclxuICAgICAgZm9udFN0eWxlID1cclxuICAgICAgICBmb250V2VpZ2h0ID09IDQwMCB8fCBmb250V2VpZ2h0ID09PSBcIm5vcm1hbFwiXHJcbiAgICAgICAgICA/IGZvbnRTdHlsZSA9PT0gXCJpdGFsaWNcIlxyXG4gICAgICAgICAgICA/IFwiaXRhbGljXCJcclxuICAgICAgICAgICAgOiBcIm5vcm1hbFwiXHJcbiAgICAgICAgICA6IChmb250V2VpZ2h0ID09IDcwMCB8fCBmb250V2VpZ2h0ID09PSBcImJvbGRcIikgJiZcclxuICAgICAgICAgICAgZm9udFN0eWxlID09PSBcIm5vcm1hbFwiXHJcbiAgICAgICAgICA/IFwiYm9sZFwiXHJcbiAgICAgICAgICA6IChmb250V2VpZ2h0ID09IDcwMCA/IFwiYm9sZFwiIDogZm9udFdlaWdodCkgKyBcIlwiICsgZm9udFN0eWxlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZvbnRTdHlsZTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQGNhbGxiYWNrIEFwaVN3aXRjaEJvZHlcclxuICAgKiBAcGFyYW0ge2pzUERGfSBwZGZcclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogRm9yIGNvbXBhdGliaWxpdHkgcmVhc29ucyBqc1BERiBvZmZlcnMgdHdvIEFQSSBtb2RlcyB3aGljaCBkaWZmZXIgaW4gdGhlIHdheSB0aGV5IGNvbnZlcnQgYmV0d2VlbiB0aGUgdGhlIHVzdWFsXHJcbiAgICogc2NyZWVuIGNvb3JkaW5hdGVzIGFuZCB0aGUgUERGIGNvb3JkaW5hdGUgc3lzdGVtLlxyXG4gICAqICAgLSBcImNvbXBhdFwiOiBPZmZlcnMgZnVsbCBjb21wYXRpYmlsaXR5IGFjcm9zcyBhbGwgcGx1Z2lucyBidXQgZG9lcyBub3QgYWxsb3cgYXJiaXRyYXJ5IHRyYW5zZm9ybXNcclxuICAgKiAgIC0gXCJhZHZhbmNlZFwiOiBBbGxvd3MgYXJiaXRyYXJ5IHRyYW5zZm9ybXMgYW5kIG1vcmUgYWR2YW5jZWQgZmVhdHVyZXMgbGlrZSBwYXR0ZXJuIGZpbGxzLiBTb21lIHBsdWdpbnMgbWlnaHRcclxuICAgKiAgICAgbm90IHN1cHBvcnQgdGhpcyBtb2RlLCB0aG91Z2guXHJcbiAgICogSW5pdGlhbCBtb2RlIGlzIFwiY29tcGF0XCIuXHJcbiAgICpcclxuICAgKiBZb3UgY2FuIGVpdGhlciBwcm92aWRlIGEgY2FsbGJhY2sgdG8gdGhlIGJvZHkgYXJndW1lbnQsIHdoaWNoIG1lYW5zIHRoYXQganNQREYgd2lsbCBhdXRvbWF0aWNhbGx5IHN3aXRjaCBiYWNrIHRvXHJcbiAgICogdGhlIG9yaWdpbmFsIEFQSSBtb2RlIGFmdGVyd2FyZHM7IG9yIHlvdSBjYW4gb21pdCB0aGUgY2FsbGJhY2sgYW5kIHN3aXRjaCBiYWNrIG1hbnVhbGx5IHVzaW5nIHtAbGluayBjb21wYXRBUEl9LlxyXG4gICAqXHJcbiAgICogTm90ZSwgdGhhdCB0aGUgY2FsbHMgdG8ge0BsaW5rIHNhdmVHcmFwaGljc1N0YXRlfSBhbmQge0BsaW5rIHJlc3RvcmVHcmFwaGljc1N0YXRlfSBuZWVkIHRvIGJlIGJhbGFuY2VkIHdpdGhpbiB0aGVcclxuICAgKiBjYWxsYmFjayBvciBiZXR3ZWVuIGNhbGxzIG9mIHRoaXMgbWV0aG9kIGFuZCBpdHMgY291bnRlcnBhcnQge0BsaW5rIGNvbXBhdEFQSX0uIENhbGxzIHRvIHtAbGluayBiZWdpbkZvcm1PYmplY3R9XHJcbiAgICogb3Ige0BsaW5rIGJlZ2luVGlsaW5nUGF0dGVybn0gbmVlZCB0byBiZSBjbG9zZWQgYnkgdGhlaXIgY291bnRlcnBhcnRzIGJlZm9yZSBzd2l0Y2hpbmcgYmFjayB0byBcImNvbXBhdFwiIEFQSSBtb2RlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcGlTd2l0Y2hCb2R5PX0gYm9keSBXaGVuIHByb3ZpZGVkLCB0aGlzIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHRoZSBBUEkgbW9kZSBoYXMgYmVlbiBzd2l0Y2hlZC5cclxuICAgKiBUaGUgQVBJIG1vZGUgd2lsbCBiZSBzd2l0Y2hlZCBiYWNrIGF1dG9tYXRpY2FsbHkgYWZ0ZXJ3YXJkcy5cclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGFkdmFuY2VkQVBJXHJcbiAgICovXHJcbiAgQVBJLmFkdmFuY2VkQVBJID0gZnVuY3Rpb24oYm9keSkge1xyXG4gICAgdmFyIGRvU3dpdGNoID0gYXBpTW9kZSA9PT0gQXBpTW9kZS5DT01QQVQ7XHJcblxyXG4gICAgaWYgKGRvU3dpdGNoKSB7XHJcbiAgICAgIGFkdmFuY2VkQVBJLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBib2R5ICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgYm9keSh0aGlzKTtcclxuXHJcbiAgICBpZiAoZG9Td2l0Y2gpIHtcclxuICAgICAgY29tcGF0QVBJLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU3dpdGNoZXMgdG8gXCJjb21wYXRcIiBBUEkgbW9kZS4gU2VlIHtAbGluayBhZHZhbmNlZEFQSX0gZm9yIG1vcmUgZGV0YWlscy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXBpU3dpdGNoQm9keT19IGJvZHkgV2hlbiBwcm92aWRlZCwgdGhpcyBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBhZnRlciB0aGUgQVBJIG1vZGUgaGFzIGJlZW4gc3dpdGNoZWQuXHJcbiAgICogVGhlIEFQSSBtb2RlIHdpbGwgYmUgc3dpdGNoZWQgYmFjayBhdXRvbWF0aWNhbGx5IGFmdGVyd2FyZHMuXHJcbiAgICogQHJldHVybiB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGNvbXBhdEFwaVxyXG4gICAqL1xyXG4gIEFQSS5jb21wYXRBUEkgPSBmdW5jdGlvbihib2R5KSB7XHJcbiAgICB2YXIgZG9Td2l0Y2ggPSBhcGlNb2RlID09PSBBcGlNb2RlLkFEVkFOQ0VEO1xyXG5cclxuICAgIGlmIChkb1N3aXRjaCkge1xyXG4gICAgICBjb21wYXRBUEkuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGJvZHkgIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBib2R5KHRoaXMpO1xyXG5cclxuICAgIGlmIChkb1N3aXRjaCkge1xyXG4gICAgICBhZHZhbmNlZEFQSS5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWZmIHRoZSBjdXJyZW50IEFQSSBtb2RlIGlzIFwiYWR2YW5jZWRcIi4gU2VlIHtAbGluayBhZHZhbmNlZEFQSX0uXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGlzQWR2YW5jZWRBUElcclxuICAgKi9cclxuICBBUEkuaXNBZHZhbmNlZEFQSSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGFwaU1vZGUgPT09IEFwaU1vZGUuQURWQU5DRUQ7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGFkdmFuY2VkQXBpTW9kZVRyYXAgPSBmdW5jdGlvbihtZXRob2ROYW1lKSB7XHJcbiAgICBpZiAoYXBpTW9kZSAhPT0gQXBpTW9kZS5BRFZBTkNFRCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgbWV0aG9kTmFtZSArXHJcbiAgICAgICAgICBcIiBpcyBvbmx5IGF2YWlsYWJsZSBpbiAnYWR2YW5jZWQnIEFQSSBtb2RlLiBcIiArXHJcbiAgICAgICAgICBcIllvdSBuZWVkIHRvIGNhbGwgYWR2YW5jZWRBUEkoKSBmaXJzdC5cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciByb3VuZFRvUHJlY2lzaW9uID0gKEFQSS5yb3VuZFRvUHJlY2lzaW9uID0gQVBJLl9fcHJpdmF0ZV9fLnJvdW5kVG9QcmVjaXNpb24gPSBmdW5jdGlvbihcclxuICAgIG51bWJlcixcclxuICAgIHBhcm1QcmVjaXNpb25cclxuICApIHtcclxuICAgIHZhciB0bXBQcmVjaXNpb24gPSBwcmVjaXNpb24gfHwgcGFybVByZWNpc2lvbjtcclxuICAgIGlmIChpc05hTihudW1iZXIpIHx8IGlzTmFOKHRtcFByZWNpc2lvbikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8ganNQREYucm91bmRUb1ByZWNpc2lvblwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudW1iZXIudG9GaXhlZCh0bXBQcmVjaXNpb24pLnJlcGxhY2UoLzArJC8sIFwiXCIpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBoaWdoIHByZWNpc2lvbiBmbG9hdFxyXG4gIHZhciBocGY7XHJcbiAgaWYgKHR5cGVvZiBmbG9hdFByZWNpc2lvbiA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgaHBmID0gQVBJLmhwZiA9IEFQSS5fX3ByaXZhdGVfXy5ocGYgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgaWYgKGlzTmFOKG51bWJlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBqc1BERi5ocGZcIik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJvdW5kVG9QcmVjaXNpb24obnVtYmVyLCBmbG9hdFByZWNpc2lvbik7XHJcbiAgICB9O1xyXG4gIH0gZWxzZSBpZiAoZmxvYXRQcmVjaXNpb24gPT09IFwic21hcnRcIikge1xyXG4gICAgaHBmID0gQVBJLmhwZiA9IEFQSS5fX3ByaXZhdGVfXy5ocGYgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgaWYgKGlzTmFOKG51bWJlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBqc1BERi5ocGZcIik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG51bWJlciA+IC0xICYmIG51bWJlciA8IDEpIHtcclxuICAgICAgICByZXR1cm4gcm91bmRUb1ByZWNpc2lvbihudW1iZXIsIDE2KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcm91bmRUb1ByZWNpc2lvbihudW1iZXIsIDUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICBocGYgPSBBUEkuaHBmID0gQVBJLl9fcHJpdmF0ZV9fLmhwZiA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICBpZiAoaXNOYU4obnVtYmVyKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGpzUERGLmhwZlwiKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcm91bmRUb1ByZWNpc2lvbihudW1iZXIsIDE2KTtcclxuICAgIH07XHJcbiAgfVxyXG4gIHZhciBmMiA9IChBUEkuZjIgPSBBUEkuX19wcml2YXRlX18uZjIgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgIGlmIChpc05hTihudW1iZXIpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGpzUERGLmYyXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJvdW5kVG9QcmVjaXNpb24obnVtYmVyLCAyKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIGYzID0gKEFQSS5fX3ByaXZhdGVfXy5mMyA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgaWYgKGlzTmFOKG51bWJlcikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8ganNQREYuZjNcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcm91bmRUb1ByZWNpc2lvbihudW1iZXIsIDMpO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgc2NhbGUgPSAoQVBJLnNjYWxlID0gQVBJLl9fcHJpdmF0ZV9fLnNjYWxlID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICBpZiAoaXNOYU4obnVtYmVyKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBqc1BERi5zY2FsZVwiKTtcclxuICAgIH1cclxuICAgIGlmIChhcGlNb2RlID09PSBBcGlNb2RlLkNPTVBBVCkge1xyXG4gICAgICByZXR1cm4gbnVtYmVyICogc2NhbGVGYWN0b3I7XHJcbiAgICB9IGVsc2UgaWYgKGFwaU1vZGUgPT09IEFwaU1vZGUuQURWQU5DRUQpIHtcclxuICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgdmFyIHRyYW5zZm9ybVkgPSBmdW5jdGlvbih5KSB7XHJcbiAgICBpZiAoYXBpTW9kZSA9PT0gQXBpTW9kZS5DT01QQVQpIHtcclxuICAgICAgcmV0dXJuIGdldFBhZ2VIZWlnaHQoKSAtIHk7XHJcbiAgICB9IGVsc2UgaWYgKGFwaU1vZGUgPT09IEFwaU1vZGUuQURWQU5DRUQpIHtcclxuICAgICAgcmV0dXJuIHk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIHRyYW5zZm9ybVNjYWxlWSA9IGZ1bmN0aW9uKHkpIHtcclxuICAgIHJldHVybiBzY2FsZSh0cmFuc2Zvcm1ZKHkpKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBzZXRQcmVjaXNpb25cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByZWNpc2lvblxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uc2V0UHJlY2lzaW9uID0gQVBJLnNldFByZWNpc2lvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHBhcnNlSW50KHZhbHVlLCAxMCkgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgcHJlY2lzaW9uID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgZmlsZUlkID0gXCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiO1xyXG5cclxuICB2YXIgZ2V0RmlsZUlkID0gKEFQSS5fX3ByaXZhdGVfXy5nZXRGaWxlSWQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBmaWxlSWQ7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBzZXRGaWxlSWQgPSAoQVBJLl9fcHJpdmF0ZV9fLnNldEZpbGVJZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiICYmIC9eW2EtZkEtRjAtOV17MzJ9JC8udGVzdCh2YWx1ZSkpIHtcclxuICAgICAgZmlsZUlkID0gdmFsdWUudG9VcHBlckNhc2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZpbGVJZCA9IGZpbGVJZFxyXG4gICAgICAgIC5zcGxpdChcIlwiKVxyXG4gICAgICAgIC5tYXAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gXCJBQkNERUYwMTIzNDU2Nzg5XCIuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuam9pbihcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZW5jcnlwdGlvbk9wdGlvbnMgIT09IG51bGwpIHtcclxuICAgICAgZW5jcnlwdGlvbiA9IG5ldyBQREZTZWN1cml0eShcclxuICAgICAgICBlbmNyeXB0aW9uT3B0aW9ucy51c2VyUGVybWlzc2lvbnMsXHJcbiAgICAgICAgZW5jcnlwdGlvbk9wdGlvbnMudXNlclBhc3N3b3JkLFxyXG4gICAgICAgIGVuY3J5cHRpb25PcHRpb25zLm93bmVyUGFzc3dvcmQsXHJcbiAgICAgICAgZmlsZUlkXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlsZUlkO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBzZXRGaWxlSWRcclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIEdVSUQuXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqL1xyXG4gIEFQSS5zZXRGaWxlSWQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgc2V0RmlsZUlkKHZhbHVlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lIGdldEZpbGVJZFxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEdVSUQuXHJcbiAgICovXHJcbiAgQVBJLmdldEZpbGVJZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGdldEZpbGVJZCgpO1xyXG4gIH07XHJcblxyXG4gIHZhciBjcmVhdGlvbkRhdGU7XHJcblxyXG4gIHZhciBjb252ZXJ0RGF0ZVRvUERGRGF0ZSA9IChBUEkuX19wcml2YXRlX18uY29udmVydERhdGVUb1BERkRhdGUgPSBmdW5jdGlvbihcclxuICAgIHBhcm1EYXRlXHJcbiAgKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gXCJcIjtcclxuICAgIHZhciB0em9mZnNldCA9IHBhcm1EYXRlLmdldFRpbWV6b25lT2Zmc2V0KCksXHJcbiAgICAgIHR6c2lnbiA9IHR6b2Zmc2V0IDwgMCA/IFwiK1wiIDogXCItXCIsXHJcbiAgICAgIHR6aG91ciA9IE1hdGguZmxvb3IoTWF0aC5hYnModHpvZmZzZXQgLyA2MCkpLFxyXG4gICAgICB0em1pbiA9IE1hdGguYWJzKHR6b2Zmc2V0ICUgNjApLFxyXG4gICAgICB0aW1lWm9uZVN0cmluZyA9IFt0enNpZ24sIHBhZGQyKHR6aG91ciksIFwiJ1wiLCBwYWRkMih0em1pbiksIFwiJ1wiXS5qb2luKFwiXCIpO1xyXG5cclxuICAgIHJlc3VsdCA9IFtcclxuICAgICAgXCJEOlwiLFxyXG4gICAgICBwYXJtRGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICBwYWRkMihwYXJtRGF0ZS5nZXRNb250aCgpICsgMSksXHJcbiAgICAgIHBhZGQyKHBhcm1EYXRlLmdldERhdGUoKSksXHJcbiAgICAgIHBhZGQyKHBhcm1EYXRlLmdldEhvdXJzKCkpLFxyXG4gICAgICBwYWRkMihwYXJtRGF0ZS5nZXRNaW51dGVzKCkpLFxyXG4gICAgICBwYWRkMihwYXJtRGF0ZS5nZXRTZWNvbmRzKCkpLFxyXG4gICAgICB0aW1lWm9uZVN0cmluZ1xyXG4gICAgXS5qb2luKFwiXCIpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9KTtcclxuXHJcbiAgdmFyIGNvbnZlcnRQREZEYXRlVG9EYXRlID0gKEFQSS5fX3ByaXZhdGVfXy5jb252ZXJ0UERGRGF0ZVRvRGF0ZSA9IGZ1bmN0aW9uKFxyXG4gICAgcGFybVBERkRhdGVcclxuICApIHtcclxuICAgIHZhciB5ZWFyID0gcGFyc2VJbnQocGFybVBERkRhdGUuc3Vic3RyKDIsIDQpLCAxMCk7XHJcbiAgICB2YXIgbW9udGggPSBwYXJzZUludChwYXJtUERGRGF0ZS5zdWJzdHIoNiwgMiksIDEwKSAtIDE7XHJcbiAgICB2YXIgZGF0ZSA9IHBhcnNlSW50KHBhcm1QREZEYXRlLnN1YnN0cig4LCAyKSwgMTApO1xyXG4gICAgdmFyIGhvdXIgPSBwYXJzZUludChwYXJtUERGRGF0ZS5zdWJzdHIoMTAsIDIpLCAxMCk7XHJcbiAgICB2YXIgbWludXRlcyA9IHBhcnNlSW50KHBhcm1QREZEYXRlLnN1YnN0cigxMiwgMiksIDEwKTtcclxuICAgIHZhciBzZWNvbmRzID0gcGFyc2VJbnQocGFybVBERkRhdGUuc3Vic3RyKDE0LCAyKSwgMTApO1xyXG4gICAgLy8gdmFyIHRpbWVab25lSG91ciA9IHBhcnNlSW50KHBhcm1QREZEYXRlLnN1YnN0cigxNiwgMiksIDEwKTtcclxuICAgIC8vIHZhciB0aW1lWm9uZU1pbnV0ZXMgPSBwYXJzZUludChwYXJtUERGRGF0ZS5zdWJzdHIoMjAsIDIpLCAxMCk7XHJcblxyXG4gICAgdmFyIHJlc3VsdGluZ0RhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF0ZSwgaG91ciwgbWludXRlcywgc2Vjb25kcywgMCk7XHJcbiAgICByZXR1cm4gcmVzdWx0aW5nRGF0ZTtcclxuICB9KTtcclxuXHJcbiAgdmFyIHNldENyZWF0aW9uRGF0ZSA9IChBUEkuX19wcml2YXRlX18uc2V0Q3JlYXRpb25EYXRlID0gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgdmFyIHRtcENyZWF0aW9uRGF0ZVN0cmluZztcclxuICAgIHZhciByZWdleFBERkNyZWF0aW9uRGF0ZSA9IC9eRDooMjBbMC0yXVswLTldfDIwM1swLTddfDE5WzctOV1bMC05XSkoMFswLTldfDFbMC0yXSkoWzAtMl1bMC05XXwzWzAtMV0pKDBbMC05XXwxWzAtOV18MlswLTNdKSgwWzAtOV18WzEtNV1bMC05XSkoMFswLTldfFsxLTVdWzAtOV0pKFxcKzBbMC05XXxcXCsxWzAtNF18LTBbMC05XXwtMVswLTFdKScoMFswLTldfFsxLTVdWzAtOV0pJz8kLztcclxuICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgdG1wQ3JlYXRpb25EYXRlU3RyaW5nID0gY29udmVydERhdGVUb1BERkRhdGUoZGF0ZSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlZ2V4UERGQ3JlYXRpb25EYXRlLnRlc3QoZGF0ZSkpIHtcclxuICAgICAgdG1wQ3JlYXRpb25EYXRlU3RyaW5nID0gZGF0ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGpzUERGLnNldENyZWF0aW9uRGF0ZVwiKTtcclxuICAgIH1cclxuICAgIGNyZWF0aW9uRGF0ZSA9IHRtcENyZWF0aW9uRGF0ZVN0cmluZztcclxuICAgIHJldHVybiBjcmVhdGlvbkRhdGU7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBnZXRDcmVhdGlvbkRhdGUgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldENyZWF0aW9uRGF0ZSA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgIHZhciByZXN1bHQgPSBjcmVhdGlvbkRhdGU7XHJcbiAgICBpZiAodHlwZSA9PT0gXCJqc0RhdGVcIikge1xyXG4gICAgICByZXN1bHQgPSBjb252ZXJ0UERGRGF0ZVRvRGF0ZShjcmVhdGlvbkRhdGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgc2V0Q3JlYXRpb25EYXRlXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqL1xyXG4gIEFQSS5zZXRDcmVhdGlvbkRhdGUgPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICBzZXRDcmVhdGlvbkRhdGUoZGF0ZSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBnZXRDcmVhdGlvbkRhdGVcclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIEFQSS5nZXRDcmVhdGlvbkRhdGUgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICByZXR1cm4gZ2V0Q3JlYXRpb25EYXRlKHR5cGUpO1xyXG4gIH07XHJcblxyXG4gIHZhciBwYWRkMiA9IChBUEkuX19wcml2YXRlX18ucGFkZDIgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgIHJldHVybiAoXCIwXCIgKyBwYXJzZUludChudW1iZXIpKS5zbGljZSgtMik7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBwYWRkMkhleCA9IChBUEkuX19wcml2YXRlX18ucGFkZDJIZXggPSBmdW5jdGlvbihoZXhTdHJpbmcpIHtcclxuICAgIGhleFN0cmluZyA9IGhleFN0cmluZy50b1N0cmluZygpO1xyXG4gICAgcmV0dXJuIChcIjAwXCIgKyBoZXhTdHJpbmcpLnN1YnN0cihoZXhTdHJpbmcubGVuZ3RoKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIG9iamVjdE51bWJlciA9IDA7IC8vICduJyBDdXJyZW50IG9iamVjdCBudW1iZXJcclxuICB2YXIgb2Zmc2V0cyA9IFtdOyAvLyBMaXN0IG9mIG9mZnNldHMuIEFjdGl2YXRlZCBhbmQgcmVzZXQgYnkgYnVpbGREb2N1bWVudCgpLiBQdXB1bGF0ZWQgYnkgdmFyaW91cyBjYWxscyBidWlsZERvY3VtZW50IG1ha2VzLlxyXG4gIHZhciBjb250ZW50ID0gW107XHJcbiAgdmFyIGNvbnRlbnRMZW5ndGggPSAwO1xyXG4gIHZhciBhZGRpdGlvbmFsT2JqZWN0cyA9IFtdO1xyXG5cclxuICB2YXIgcGFnZXMgPSBbXTtcclxuICB2YXIgY3VycmVudFBhZ2U7XHJcbiAgdmFyIGhhc0N1c3RvbURlc3RpbmF0aW9uID0gZmFsc2U7XHJcbiAgdmFyIG91dHB1dERlc3RpbmF0aW9uID0gY29udGVudDtcclxuXHJcbiAgdmFyIHJlc2V0RG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vcmVzZXQgZmllbGRzIHJlbGV2YW50IGZvciBvYmplY3ROdW1iZXIgZ2VuZXJhdGlvbiBhbmQgeHJlZi5cclxuICAgIG9iamVjdE51bWJlciA9IDA7XHJcbiAgICBjb250ZW50TGVuZ3RoID0gMDtcclxuICAgIGNvbnRlbnQgPSBbXTtcclxuICAgIG9mZnNldHMgPSBbXTtcclxuICAgIGFkZGl0aW9uYWxPYmplY3RzID0gW107XHJcblxyXG4gICAgcm9vdERpY3Rpb25hcnlPYmpJZCA9IG5ld09iamVjdERlZmVycmVkKCk7XHJcbiAgICByZXNvdXJjZURpY3Rpb25hcnlPYmpJZCA9IG5ld09iamVjdERlZmVycmVkKCk7XHJcbiAgfTtcclxuXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnNldEN1c3RvbU91dHB1dERlc3RpbmF0aW9uID0gZnVuY3Rpb24oZGVzdGluYXRpb24pIHtcclxuICAgIGhhc0N1c3RvbURlc3RpbmF0aW9uID0gdHJ1ZTtcclxuICAgIG91dHB1dERlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XHJcbiAgfTtcclxuICB2YXIgc2V0T3V0cHV0RGVzdGluYXRpb24gPSBmdW5jdGlvbihkZXN0aW5hdGlvbikge1xyXG4gICAgaWYgKCFoYXNDdXN0b21EZXN0aW5hdGlvbikge1xyXG4gICAgICBvdXRwdXREZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIEFQSS5fX3ByaXZhdGVfXy5yZXNldEN1c3RvbU91dHB1dERlc3RpbmF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICBoYXNDdXN0b21EZXN0aW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgb3V0cHV0RGVzdGluYXRpb24gPSBjb250ZW50O1xyXG4gIH07XHJcblxyXG4gIHZhciBvdXQgPSAoQVBJLl9fcHJpdmF0ZV9fLm91dCA9IGZ1bmN0aW9uKHN0cmluZykge1xyXG4gICAgc3RyaW5nID0gc3RyaW5nLnRvU3RyaW5nKCk7XHJcbiAgICBjb250ZW50TGVuZ3RoICs9IHN0cmluZy5sZW5ndGggKyAxO1xyXG4gICAgb3V0cHV0RGVzdGluYXRpb24ucHVzaChzdHJpbmcpO1xyXG5cclxuICAgIHJldHVybiBvdXRwdXREZXN0aW5hdGlvbjtcclxuICB9KTtcclxuXHJcbiAgdmFyIHdyaXRlID0gKEFQSS5fX3ByaXZhdGVfXy53cml0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gb3V0KFxyXG4gICAgICBhcmd1bWVudHMubGVuZ3RoID09PSAxXHJcbiAgICAgICAgPyB2YWx1ZS50b1N0cmluZygpXHJcbiAgICAgICAgOiBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKGFyZ3VtZW50cywgXCIgXCIpXHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgZ2V0QXJyYXlCdWZmZXIgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldEFycmF5QnVmZmVyID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgdmFyIGxlbiA9IGRhdGEubGVuZ3RoLFxyXG4gICAgICBhYiA9IG5ldyBBcnJheUJ1ZmZlcihsZW4pLFxyXG4gICAgICB1OCA9IG5ldyBVaW50OEFycmF5KGFiKTtcclxuXHJcbiAgICB3aGlsZSAobGVuLS0pIHU4W2xlbl0gPSBkYXRhLmNoYXJDb2RlQXQobGVuKTtcclxuICAgIHJldHVybiBhYjtcclxuICB9KTtcclxuXHJcbiAgdmFyIHN0YW5kYXJkRm9udHMgPSBbXHJcbiAgICBbXCJIZWx2ZXRpY2FcIiwgXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIiwgXCJXaW5BbnNpRW5jb2RpbmdcIl0sXHJcbiAgICBbXCJIZWx2ZXRpY2EtQm9sZFwiLCBcImhlbHZldGljYVwiLCBcImJvbGRcIiwgXCJXaW5BbnNpRW5jb2RpbmdcIl0sXHJcbiAgICBbXCJIZWx2ZXRpY2EtT2JsaXF1ZVwiLCBcImhlbHZldGljYVwiLCBcIml0YWxpY1wiLCBcIldpbkFuc2lFbmNvZGluZ1wiXSxcclxuICAgIFtcIkhlbHZldGljYS1Cb2xkT2JsaXF1ZVwiLCBcImhlbHZldGljYVwiLCBcImJvbGRpdGFsaWNcIiwgXCJXaW5BbnNpRW5jb2RpbmdcIl0sXHJcbiAgICBbXCJDb3VyaWVyXCIsIFwiY291cmllclwiLCBcIm5vcm1hbFwiLCBcIldpbkFuc2lFbmNvZGluZ1wiXSxcclxuICAgIFtcIkNvdXJpZXItQm9sZFwiLCBcImNvdXJpZXJcIiwgXCJib2xkXCIsIFwiV2luQW5zaUVuY29kaW5nXCJdLFxyXG4gICAgW1wiQ291cmllci1PYmxpcXVlXCIsIFwiY291cmllclwiLCBcIml0YWxpY1wiLCBcIldpbkFuc2lFbmNvZGluZ1wiXSxcclxuICAgIFtcIkNvdXJpZXItQm9sZE9ibGlxdWVcIiwgXCJjb3VyaWVyXCIsIFwiYm9sZGl0YWxpY1wiLCBcIldpbkFuc2lFbmNvZGluZ1wiXSxcclxuICAgIFtcIlRpbWVzLVJvbWFuXCIsIFwidGltZXNcIiwgXCJub3JtYWxcIiwgXCJXaW5BbnNpRW5jb2RpbmdcIl0sXHJcbiAgICBbXCJUaW1lcy1Cb2xkXCIsIFwidGltZXNcIiwgXCJib2xkXCIsIFwiV2luQW5zaUVuY29kaW5nXCJdLFxyXG4gICAgW1wiVGltZXMtSXRhbGljXCIsIFwidGltZXNcIiwgXCJpdGFsaWNcIiwgXCJXaW5BbnNpRW5jb2RpbmdcIl0sXHJcbiAgICBbXCJUaW1lcy1Cb2xkSXRhbGljXCIsIFwidGltZXNcIiwgXCJib2xkaXRhbGljXCIsIFwiV2luQW5zaUVuY29kaW5nXCJdLFxyXG4gICAgW1wiWmFwZkRpbmdiYXRzXCIsIFwiemFwZmRpbmdiYXRzXCIsIFwibm9ybWFsXCIsIG51bGxdLFxyXG4gICAgW1wiU3ltYm9sXCIsIFwic3ltYm9sXCIsIFwibm9ybWFsXCIsIG51bGxdXHJcbiAgXTtcclxuXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLmdldFN0YW5kYXJkRm9udHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBzdGFuZGFyZEZvbnRzO1xyXG4gIH07XHJcblxyXG4gIHZhciBhY3RpdmVGb250U2l6ZSA9IG9wdGlvbnMuZm9udFNpemUgfHwgMTY7XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgZm9udCBzaXplIGZvciB1cGNvbWluZyB0ZXh0IGVsZW1lbnRzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgRm9udCBzaXplIGluIHBvaW50cy5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIHNldEZvbnRTaXplXHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnNldEZvbnRTaXplID0gQVBJLnNldEZvbnRTaXplID0gZnVuY3Rpb24oc2l6ZSkge1xyXG4gICAgaWYgKGFwaU1vZGUgPT09IEFwaU1vZGUuQURWQU5DRUQpIHtcclxuICAgICAgYWN0aXZlRm9udFNpemUgPSBzaXplIC8gc2NhbGVGYWN0b3I7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3RpdmVGb250U2l6ZSA9IHNpemU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBmb250c2l6ZSBmb3IgdXBjb21pbmcgdGV4dCBlbGVtZW50cy5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGdldEZvbnRTaXplXHJcbiAgICovXHJcbiAgdmFyIGdldEZvbnRTaXplID0gKEFQSS5fX3ByaXZhdGVfXy5nZXRGb250U2l6ZSA9IEFQSS5nZXRGb250U2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKGFwaU1vZGUgPT09IEFwaU1vZGUuQ09NUEFUKSB7XHJcbiAgICAgIHJldHVybiBhY3RpdmVGb250U2l6ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBhY3RpdmVGb250U2l6ZSAqIHNjYWxlRmFjdG9yO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICB2YXIgUjJMID0gb3B0aW9ucy5SMkwgfHwgZmFsc2U7XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB2YWx1ZSBvZiBSMkwgZnVuY3Rpb25hbGl0eS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7anNQREZ9IGpzUERGLWluc3RhbmNlXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIHNldFIyTFxyXG4gICAqL1xyXG4gIEFQSS5fX3ByaXZhdGVfXy5zZXRSMkwgPSBBUEkuc2V0UjJMID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIFIyTCA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHZhbHVlIG9mIFIyTCBmdW5jdGlvbmFsaXR5LlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IGpzUERGLWluc3RhbmNlXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGdldFIyTFxyXG4gICAqL1xyXG4gIEFQSS5fX3ByaXZhdGVfXy5nZXRSMkwgPSBBUEkuZ2V0UjJMID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gUjJMO1xyXG4gIH07XHJcblxyXG4gIHZhciB6b29tTW9kZTsgLy8gZGVmYXVsdDogMTtcclxuXHJcbiAgdmFyIHNldFpvb21Nb2RlID0gKEFQSS5fX3ByaXZhdGVfXy5zZXRab29tTW9kZSA9IGZ1bmN0aW9uKHpvb20pIHtcclxuICAgIHZhciB2YWxpZFpvb21Nb2RlcyA9IFtcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICBudWxsLFxyXG4gICAgICBcImZ1bGx3aWR0aFwiLFxyXG4gICAgICBcImZ1bGxoZWlnaHRcIixcclxuICAgICAgXCJmdWxscGFnZVwiLFxyXG4gICAgICBcIm9yaWdpbmFsXCJcclxuICAgIF07XHJcblxyXG4gICAgaWYgKC9eKD86XFxkK1xcLlxcZCp8XFxkKlxcLlxcZCt8XFxkKyklJC8udGVzdCh6b29tKSkge1xyXG4gICAgICB6b29tTW9kZSA9IHpvb207XHJcbiAgICB9IGVsc2UgaWYgKCFpc05hTih6b29tKSkge1xyXG4gICAgICB6b29tTW9kZSA9IHBhcnNlSW50KHpvb20sIDEwKTtcclxuICAgIH0gZWxzZSBpZiAodmFsaWRab29tTW9kZXMuaW5kZXhPZih6b29tKSAhPT0gLTEpIHtcclxuICAgICAgem9vbU1vZGUgPSB6b29tO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICd6b29tIG11c3QgYmUgSW50ZWdlciAoZS5nLiAyKSwgYSBwZXJjZW50YWdlIFZhbHVlIChlLmcuIDMwMCUpIG9yIGZ1bGx3aWR0aCwgZnVsbGhlaWdodCwgZnVsbHBhZ2UsIG9yaWdpbmFsLiBcIicgK1xyXG4gICAgICAgICAgem9vbSArXHJcbiAgICAgICAgICAnXCIgaXMgbm90IHJlY29nbml6ZWQuJ1xyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBBUEkuX19wcml2YXRlX18uZ2V0Wm9vbU1vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB6b29tTW9kZTtcclxuICB9O1xyXG5cclxuICB2YXIgcGFnZU1vZGU7IC8vIGRlZmF1bHQ6ICdVc2VPdXRsaW5lcyc7XHJcbiAgdmFyIHNldFBhZ2VNb2RlID0gKEFQSS5fX3ByaXZhdGVfXy5zZXRQYWdlTW9kZSA9IGZ1bmN0aW9uKHBtb2RlKSB7XHJcbiAgICB2YXIgdmFsaWRQYWdlTW9kZXMgPSBbXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgbnVsbCxcclxuICAgICAgXCJVc2VOb25lXCIsXHJcbiAgICAgIFwiVXNlT3V0bGluZXNcIixcclxuICAgICAgXCJVc2VUaHVtYnNcIixcclxuICAgICAgXCJGdWxsU2NyZWVuXCJcclxuICAgIF07XHJcblxyXG4gICAgaWYgKHZhbGlkUGFnZU1vZGVzLmluZGV4T2YocG1vZGUpID09IC0xKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAnUGFnZSBtb2RlIG11c3QgYmUgb25lIG9mIFVzZU5vbmUsIFVzZU91dGxpbmVzLCBVc2VUaHVtYnMsIG9yIEZ1bGxTY3JlZW4uIFwiJyArXHJcbiAgICAgICAgICBwbW9kZSArXHJcbiAgICAgICAgICAnXCIgaXMgbm90IHJlY29nbml6ZWQuJ1xyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcGFnZU1vZGUgPSBwbW9kZTtcclxuICB9KTtcclxuXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLmdldFBhZ2VNb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gcGFnZU1vZGU7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGxheW91dE1vZGU7IC8vIGRlZmF1bHQ6ICdjb250aW51b3VzJztcclxuICB2YXIgc2V0TGF5b3V0TW9kZSA9IChBUEkuX19wcml2YXRlX18uc2V0TGF5b3V0TW9kZSA9IGZ1bmN0aW9uKGxheW91dCkge1xyXG4gICAgdmFyIHZhbGlkTGF5b3V0TW9kZXMgPSBbXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgbnVsbCxcclxuICAgICAgXCJjb250aW51b3VzXCIsXHJcbiAgICAgIFwic2luZ2xlXCIsXHJcbiAgICAgIFwidHdvbGVmdFwiLFxyXG4gICAgICBcInR3b3JpZ2h0XCIsXHJcbiAgICAgIFwidHdvXCJcclxuICAgIF07XHJcblxyXG4gICAgaWYgKHZhbGlkTGF5b3V0TW9kZXMuaW5kZXhPZihsYXlvdXQpID09IC0xKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAnTGF5b3V0IG1vZGUgbXVzdCBiZSBvbmUgb2YgY29udGludW91cywgc2luZ2xlLCB0d29sZWZ0LCB0d29yaWdodC4gXCInICtcclxuICAgICAgICAgIGxheW91dCArXHJcbiAgICAgICAgICAnXCIgaXMgbm90IHJlY29nbml6ZWQuJ1xyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgbGF5b3V0TW9kZSA9IGxheW91dDtcclxuICB9KTtcclxuXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLmdldExheW91dE1vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBsYXlvdXRNb2RlO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB0aGUgZGlzcGxheSBtb2RlIG9wdGlvbnMgb2YgdGhlIHBhZ2UgbGlrZSB6b29tIGFuZCBsYXlvdXQuXHJcbiAgICpcclxuICAgKiBAbmFtZSBzZXREaXNwbGF5TW9kZVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcGFyYW0ge2ludGVnZXJ8U3RyaW5nfSB6b29tICAgWW91IGNhbiBwYXNzIGFuIGludGVnZXIgb3IgcGVyY2VudGFnZSBhc1xyXG4gICAqIGEgc3RyaW5nLiAyIHdpbGwgc2NhbGUgdGhlIGRvY3VtZW50IHVwIDJ4LCAnMjAwJScgd2lsbCBzY2FsZSB1cCBieSB0aGVcclxuICAgKiBzYW1lIGFtb3VudC4gWW91IGNhbiBhbHNvIHNldCBpdCB0byAnZnVsbHdpZHRoJywgJ2Z1bGxoZWlnaHQnLFxyXG4gICAqICdmdWxscGFnZScsIG9yICdvcmlnaW5hbCcuXHJcbiAgICpcclxuICAgKiBPbmx5IGNlcnRhaW4gUERGIHJlYWRlcnMgc3VwcG9ydCB0aGlzLCBzdWNoIGFzIEFkb2JlIEFjcm9iYXQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGF5b3V0IExheW91dCBtb2RlIGNhbiBiZTogJ2NvbnRpbnVvdXMnIC0gdGhpcyBpcyB0aGVcclxuICAgKiBkZWZhdWx0IGNvbnRpbnVvdXMgc2Nyb2xsLiAnc2luZ2xlJyAtIHRoZSBzaW5nbGUgcGFnZSBtb2RlIG9ubHkgc2hvd3Mgb25lXHJcbiAgICogcGFnZSBhdCBhIHRpbWUuICd0d29sZWZ0JyAtIHR3byBjb2x1bW4gbGVmdCBtb2RlLCBmaXJzdCBwYWdlIHN0YXJ0cyBvblxyXG4gICAqIHRoZSBsZWZ0LCBhbmQgJ3R3b3JpZ2h0JyAtIHBhZ2VzIGFyZSBsYWlkIG91dCBpbiB0d28gY29sdW1ucywgd2l0aCB0aGVcclxuICAgKiBmaXJzdCBwYWdlIG9uIHRoZSByaWdodC4gVGhpcyB3b3VsZCBiZSB1c2VkIGZvciBib29rcy5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG1vZGUgJ1VzZU91dGxpbmVzJyAtIGl0IHNob3dzIHRoZVxyXG4gICAqIG91dGxpbmUgb2YgdGhlIGRvY3VtZW50IG9uIHRoZSBsZWZ0LiAnVXNlVGh1bWJzJyAtIHNob3dzIHRodW1ibmFpbHMgYWxvbmdcclxuICAgKiB0aGUgbGVmdC4gJ0Z1bGxTY3JlZW4nIC0gcHJvbXB0cyB0aGUgdXNlciB0byBlbnRlciBmdWxsc2NyZWVuIG1vZGUuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnNldERpc3BsYXlNb2RlID0gQVBJLnNldERpc3BsYXlNb2RlID0gZnVuY3Rpb24oXHJcbiAgICB6b29tLFxyXG4gICAgbGF5b3V0LFxyXG4gICAgcG1vZGVcclxuICApIHtcclxuICAgIHNldFpvb21Nb2RlKHpvb20pO1xyXG4gICAgc2V0TGF5b3V0TW9kZShsYXlvdXQpO1xyXG4gICAgc2V0UGFnZU1vZGUocG1vZGUpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGRvY3VtZW50UHJvcGVydGllcyA9IHtcclxuICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgc3ViamVjdDogXCJcIixcclxuICAgIGF1dGhvcjogXCJcIixcclxuICAgIGtleXdvcmRzOiBcIlwiLFxyXG4gICAgY3JlYXRvcjogXCJcIlxyXG4gIH07XHJcblxyXG4gIEFQSS5fX3ByaXZhdGVfXy5nZXREb2N1bWVudFByb3BlcnR5ID0gZnVuY3Rpb24oa2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LmtleXMoZG9jdW1lbnRQcm9wZXJ0aWVzKS5pbmRleE9mKGtleSkgPT09IC0xKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGpzUERGLmdldERvY3VtZW50UHJvcGVydHlcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnRQcm9wZXJ0aWVzW2tleV07XHJcbiAgfTtcclxuXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLmdldERvY3VtZW50UHJvcGVydGllcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50UHJvcGVydGllcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgcHJvcGVydGllcyB0byB0aGUgUERGIGRvY3VtZW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IEEgcHJvcGVydHlfbmFtZS10by1wcm9wZXJ0eV92YWx1ZSBvYmplY3Qgc3RydWN0dXJlLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2V0RG9jdW1lbnRQcm9wZXJ0aWVzXHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnNldERvY3VtZW50UHJvcGVydGllcyA9IEFQSS5zZXRQcm9wZXJ0aWVzID0gQVBJLnNldERvY3VtZW50UHJvcGVydGllcyA9IGZ1bmN0aW9uKFxyXG4gICAgcHJvcGVydGllc1xyXG4gICkge1xyXG4gICAgLy8gY29weWluZyBvbmx5IHRob3NlIHByb3BlcnRpZXMgd2UgY2FuIHJlbmRlci5cclxuICAgIGZvciAodmFyIHByb3BlcnR5IGluIGRvY3VtZW50UHJvcGVydGllcykge1xyXG4gICAgICBpZiAoZG9jdW1lbnRQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSAmJiBwcm9wZXJ0aWVzW3Byb3BlcnR5XSkge1xyXG4gICAgICAgIGRvY3VtZW50UHJvcGVydGllc1twcm9wZXJ0eV0gPSBwcm9wZXJ0aWVzW3Byb3BlcnR5XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnNldERvY3VtZW50UHJvcGVydHkgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcbiAgICBpZiAoT2JqZWN0LmtleXMoZG9jdW1lbnRQcm9wZXJ0aWVzKS5pbmRleE9mKGtleSkgPT09IC0xKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5zZXREb2N1bWVudFByb3BlcnR5XCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChkb2N1bWVudFByb3BlcnRpZXNba2V5XSA9IHZhbHVlKTtcclxuICB9O1xyXG5cclxuICB2YXIgZm9udHMgPSB7fTsgLy8gY29sbGVjdGlvbiBvZiBmb250IG9iamVjdHMsIHdoZXJlIGtleSBpcyBmb250S2V5IC0gYSBkeW5hbWljYWxseSBjcmVhdGVkIGxhYmVsIGZvciBhIGdpdmVuIGZvbnQuXHJcbiAgdmFyIGZvbnRtYXAgPSB7fTsgLy8gbWFwcGluZyBzdHJ1Y3R1cmUgZm9udE5hbWUgPiBmb250U3R5bGUgPiBmb250IGtleSAtIHBlcmZvcm1hbmNlIGxheWVyLiBTZWUgYWRkRm9udCgpXHJcbiAgdmFyIGFjdGl2ZUZvbnRLZXk7IC8vIHdpbGwgYmUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgS0VZIG9mIHRoZSBmb250IGFzIGNvbWJpbmF0aW9uIG9mIGZvbnROYW1lICsgZm9udFN0eWxlXHJcbiAgdmFyIGZvbnRTdGF0ZVN0YWNrID0gW107IC8vXHJcbiAgdmFyIHBhdHRlcm5zID0ge307IC8vIGNvbGxlY3Rpb24gb2YgcGF0dGVybiBvYmplY3RzXHJcbiAgdmFyIHBhdHRlcm5NYXAgPSB7fTsgLy8gc2VlIGZvbnRzXHJcbiAgdmFyIGdTdGF0ZXMgPSB7fTsgLy8gY29sbGVjdGlvbiBvZiBncmFwaGljIHN0YXRlIG9iamVjdHNcclxuICB2YXIgZ1N0YXRlc01hcCA9IHt9OyAvLyBzZWUgZm9udHNcclxuICB2YXIgYWN0aXZlR1N0YXRlID0gbnVsbDtcclxuICB2YXIgc2NhbGVGYWN0b3I7IC8vIFNjYWxlIGZhY3RvclxyXG4gIHZhciBwYWdlID0gMDtcclxuICB2YXIgcGFnZXNDb250ZXh0ID0gW107XHJcbiAgdmFyIGV2ZW50cyA9IG5ldyBQdWJTdWIoQVBJKTtcclxuICB2YXIgaG90Zml4ZXMgPSBvcHRpb25zLmhvdGZpeGVzIHx8IFtdO1xyXG5cclxuICB2YXIgcmVuZGVyVGFyZ2V0cyA9IHt9O1xyXG4gIHZhciByZW5kZXJUYXJnZXRNYXAgPSB7fTtcclxuICB2YXIgcmVuZGVyVGFyZ2V0U3RhY2sgPSBbXTtcclxuICB2YXIgcGFnZVg7XHJcbiAgdmFyIHBhZ2VZO1xyXG4gIHZhciBwYWdlTWF0cml4OyAvLyBvbmx5IHVzZWQgZm9yIEZvcm1PYmplY3RzXHJcblxyXG4gIC8qKlxyXG4gICAqIEEgbWF0cml4IG9iamVjdCBmb3IgMkQgaG9tb2dlbm91cyB0cmFuc2Zvcm1hdGlvbnM6IDxicj5cclxuICAgKiB8IGEgYiAwIHwgPGJyPlxyXG4gICAqIHwgYyBkIDAgfCA8YnI+XHJcbiAgICogfCBlIGYgMSB8IDxicj5cclxuICAgKiBwZGYgbXVsdGlwbGllcyBtYXRyaWNlcyByaWdodGhhbmQ6IHYnID0gdiB4IG0xIHggbTIgeCAuLi5cclxuICAgKlxyXG4gICAqIEBjbGFzc1xyXG4gICAqIEBuYW1lIE1hdHJpeFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzeFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzaHlcclxuICAgKiBAcGFyYW0ge251bWJlcn0gc2h4XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN5XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHR4XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHR5XHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICovXHJcbiAgdmFyIE1hdHJpeCA9IGZ1bmN0aW9uKHN4LCBzaHksIHNoeCwgc3ksIHR4LCB0eSkge1xyXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE1hdHJpeCkpIHtcclxuICAgICAgcmV0dXJuIG5ldyBNYXRyaXgoc3gsIHNoeSwgc2h4LCBzeSwgdHgsIHR5KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNOYU4oc3gpKSBzeCA9IDE7XHJcbiAgICBpZiAoaXNOYU4oc2h5KSkgc2h5ID0gMDtcclxuICAgIGlmIChpc05hTihzaHgpKSBzaHggPSAwO1xyXG4gICAgaWYgKGlzTmFOKHN5KSkgc3kgPSAxO1xyXG4gICAgaWYgKGlzTmFOKHR4KSkgdHggPSAwO1xyXG4gICAgaWYgKGlzTmFOKHR5KSkgdHkgPSAwO1xyXG5cclxuICAgIHRoaXMuX21hdHJpeCA9IFtzeCwgc2h5LCBzaHgsIHN5LCB0eCwgdHldO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lIHN4XHJcbiAgICogQG1lbWJlcm9mIE1hdHJpeCNcclxuICAgKi9cclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4LnByb3RvdHlwZSwgXCJzeFwiLCB7XHJcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fbWF0cml4WzBdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgdGhpcy5fbWF0cml4WzBdID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lIHNoeVxyXG4gICAqIEBtZW1iZXJvZiBNYXRyaXgjXHJcbiAgICovXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeC5wcm90b3R5cGUsIFwic2h5XCIsIHtcclxuICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9tYXRyaXhbMV07XHJcbiAgICB9LFxyXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICB0aGlzLl9tYXRyaXhbMV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgc2h4XHJcbiAgICogQG1lbWJlcm9mIE1hdHJpeCNcclxuICAgKi9cclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4LnByb3RvdHlwZSwgXCJzaHhcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX21hdHJpeFsyXTtcclxuICAgIH0sXHJcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuX21hdHJpeFsyXSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBzeVxyXG4gICAqIEBtZW1iZXJvZiBNYXRyaXgjXHJcbiAgICovXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeC5wcm90b3R5cGUsIFwic3lcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX21hdHJpeFszXTtcclxuICAgIH0sXHJcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuX21hdHJpeFszXSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSB0eFxyXG4gICAqIEBtZW1iZXJvZiBNYXRyaXgjXHJcbiAgICovXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeC5wcm90b3R5cGUsIFwidHhcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX21hdHJpeFs0XTtcclxuICAgIH0sXHJcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuX21hdHJpeFs0XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSB0eVxyXG4gICAqIEBtZW1iZXJvZiBNYXRyaXgjXHJcbiAgICovXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeC5wcm90b3R5cGUsIFwidHlcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX21hdHJpeFs1XTtcclxuICAgIH0sXHJcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuX21hdHJpeFs1XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4LnByb3RvdHlwZSwgXCJhXCIsIHtcclxuICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9tYXRyaXhbMF07XHJcbiAgICB9LFxyXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICB0aGlzLl9tYXRyaXhbMF0gPSB2YWx1ZTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeC5wcm90b3R5cGUsIFwiYlwiLCB7XHJcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fbWF0cml4WzFdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgdGhpcy5fbWF0cml4WzFdID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXRyaXgucHJvdG90eXBlLCBcImNcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX21hdHJpeFsyXTtcclxuICAgIH0sXHJcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuX21hdHJpeFsyXSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4LnByb3RvdHlwZSwgXCJkXCIsIHtcclxuICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9tYXRyaXhbM107XHJcbiAgICB9LFxyXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICB0aGlzLl9tYXRyaXhbM10gPSB2YWx1ZTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeC5wcm90b3R5cGUsIFwiZVwiLCB7XHJcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fbWF0cml4WzRdO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgdGhpcy5fbWF0cml4WzRdID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXRyaXgucHJvdG90eXBlLCBcImZcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX21hdHJpeFs1XTtcclxuICAgIH0sXHJcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuX21hdHJpeFs1XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSByb3RhdGlvblxyXG4gICAqIEBtZW1iZXJvZiBNYXRyaXgjXHJcbiAgICovXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeC5wcm90b3R5cGUsIFwicm90YXRpb25cIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy5zaHgsIHRoaXMuc3gpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBzY2FsZVhcclxuICAgKiBAbWVtYmVyb2YgTWF0cml4I1xyXG4gICAqL1xyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXRyaXgucHJvdG90eXBlLCBcInNjYWxlWFwiLCB7XHJcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5kZWNvbXBvc2UoKS5zY2FsZS5zeDtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgc2NhbGVZXHJcbiAgICogQG1lbWJlcm9mIE1hdHJpeCNcclxuICAgKi9cclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4LnByb3RvdHlwZSwgXCJzY2FsZVlcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGVjb21wb3NlKCkuc2NhbGUuc3k7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lIGlzSWRlbnRpdHlcclxuICAgKiBAbWVtYmVyb2YgTWF0cml4I1xyXG4gICAqL1xyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXRyaXgucHJvdG90eXBlLCBcImlzSWRlbnRpdHlcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKHRoaXMuc3ggIT09IDEpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuc2h5ICE9PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNoeCAhPT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5zeSAhPT0gMSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy50eCAhPT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy50eSAhPT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogSm9pbiB0aGUgTWF0cml4IFZhbHVlcyB0byBhIFN0cmluZ1xyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGpvaW5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VwYXJhdG9yIFNwZWNpZmllcyBhIHN0cmluZyB0byBzZXBhcmF0ZSBlYWNoIHBhaXIgb2YgYWRqYWNlbnQgZWxlbWVudHMgb2YgdGhlIGFycmF5LiBUaGUgc2VwYXJhdG9yIGlzIGNvbnZlcnRlZCB0byBhIHN0cmluZyBpZiBuZWNlc3NhcnkuIElmIG9taXR0ZWQsIHRoZSBhcnJheSBlbGVtZW50cyBhcmUgc2VwYXJhdGVkIHdpdGggYSBjb21tYSAoXCIsXCIpLiBJZiBzZXBhcmF0b3IgaXMgYW4gZW1wdHkgc3RyaW5nLCBhbGwgZWxlbWVudHMgYXJlIGpvaW5lZCB3aXRob3V0IGFueSBjaGFyYWN0ZXJzIGluIGJldHdlZW4gdGhlbS5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyB3aXRoIGFsbCBhcnJheSBlbGVtZW50cyBqb2luZWQuXHJcbiAgICogQG1lbWJlcm9mIE1hdHJpeCNcclxuICAgKi9cclxuICBNYXRyaXgucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbihzZXBhcmF0b3IpIHtcclxuICAgIHJldHVybiBbdGhpcy5zeCwgdGhpcy5zaHksIHRoaXMuc2h4LCB0aGlzLnN5LCB0aGlzLnR4LCB0aGlzLnR5XVxyXG4gICAgICAubWFwKGhwZilcclxuICAgICAgLmpvaW4oc2VwYXJhdG9yKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNdWx0aXBseSB0aGUgbWF0cml4IHdpdGggZ2l2ZW4gTWF0cml4XHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gbXVsdGlwbHlcclxuICAgKiBAcGFyYW0gbWF0cml4XHJcbiAgICogQHJldHVybnMge01hdHJpeH1cclxuICAgKiBAbWVtYmVyb2YgTWF0cml4I1xyXG4gICAqL1xyXG4gIE1hdHJpeC5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbihtYXRyaXgpIHtcclxuICAgIHZhciBzeCA9IG1hdHJpeC5zeCAqIHRoaXMuc3ggKyBtYXRyaXguc2h5ICogdGhpcy5zaHg7XHJcbiAgICB2YXIgc2h5ID0gbWF0cml4LnN4ICogdGhpcy5zaHkgKyBtYXRyaXguc2h5ICogdGhpcy5zeTtcclxuICAgIHZhciBzaHggPSBtYXRyaXguc2h4ICogdGhpcy5zeCArIG1hdHJpeC5zeSAqIHRoaXMuc2h4O1xyXG4gICAgdmFyIHN5ID0gbWF0cml4LnNoeCAqIHRoaXMuc2h5ICsgbWF0cml4LnN5ICogdGhpcy5zeTtcclxuICAgIHZhciB0eCA9IG1hdHJpeC50eCAqIHRoaXMuc3ggKyBtYXRyaXgudHkgKiB0aGlzLnNoeCArIHRoaXMudHg7XHJcbiAgICB2YXIgdHkgPSBtYXRyaXgudHggKiB0aGlzLnNoeSArIG1hdHJpeC50eSAqIHRoaXMuc3kgKyB0aGlzLnR5O1xyXG5cclxuICAgIHJldHVybiBuZXcgTWF0cml4KHN4LCBzaHksIHNoeCwgc3ksIHR4LCB0eSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGRlY29tcG9zZVxyXG4gICAqIEBtZW1iZXJvZiBNYXRyaXgjXHJcbiAgICovXHJcbiAgTWF0cml4LnByb3RvdHlwZS5kZWNvbXBvc2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBhID0gdGhpcy5zeDtcclxuICAgIHZhciBiID0gdGhpcy5zaHk7XHJcbiAgICB2YXIgYyA9IHRoaXMuc2h4O1xyXG4gICAgdmFyIGQgPSB0aGlzLnN5O1xyXG4gICAgdmFyIGUgPSB0aGlzLnR4O1xyXG4gICAgdmFyIGYgPSB0aGlzLnR5O1xyXG5cclxuICAgIHZhciBzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYik7XHJcbiAgICBhIC89IHNjYWxlWDtcclxuICAgIGIgLz0gc2NhbGVYO1xyXG5cclxuICAgIHZhciBzaGVhciA9IGEgKiBjICsgYiAqIGQ7XHJcbiAgICBjIC09IGEgKiBzaGVhcjtcclxuICAgIGQgLT0gYiAqIHNoZWFyO1xyXG5cclxuICAgIHZhciBzY2FsZVkgPSBNYXRoLnNxcnQoYyAqIGMgKyBkICogZCk7XHJcbiAgICBjIC89IHNjYWxlWTtcclxuICAgIGQgLz0gc2NhbGVZO1xyXG4gICAgc2hlYXIgLz0gc2NhbGVZO1xyXG5cclxuICAgIGlmIChhICogZCA8IGIgKiBjKSB7XHJcbiAgICAgIGEgPSAtYTtcclxuICAgICAgYiA9IC1iO1xyXG4gICAgICBzaGVhciA9IC1zaGVhcjtcclxuICAgICAgc2NhbGVYID0gLXNjYWxlWDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzY2FsZTogbmV3IE1hdHJpeChzY2FsZVgsIDAsIDAsIHNjYWxlWSwgMCwgMCksXHJcbiAgICAgIHRyYW5zbGF0ZTogbmV3IE1hdHJpeCgxLCAwLCAwLCAxLCBlLCBmKSxcclxuICAgICAgcm90YXRlOiBuZXcgTWF0cml4KGEsIGIsIC1iLCBhLCAwLCAwKSxcclxuICAgICAgc2tldzogbmV3IE1hdHJpeCgxLCAwLCBzaGVhciwgMSwgMCwgMClcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHRvU3RyaW5nXHJcbiAgICogQG1lbWJlcm9mIE1hdHJpeCNcclxuICAgKi9cclxuICBNYXRyaXgucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ocGFybVByZWNpc2lvbikge1xyXG4gICAgcmV0dXJuIHRoaXMuam9pbihcIiBcIik7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGludmVyc2VkXHJcbiAgICogQG1lbWJlcm9mIE1hdHJpeCNcclxuICAgKi9cclxuICBNYXRyaXgucHJvdG90eXBlLmludmVyc2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgYSA9IHRoaXMuc3gsXHJcbiAgICAgIGIgPSB0aGlzLnNoeSxcclxuICAgICAgYyA9IHRoaXMuc2h4LFxyXG4gICAgICBkID0gdGhpcy5zeSxcclxuICAgICAgZSA9IHRoaXMudHgsXHJcbiAgICAgIGYgPSB0aGlzLnR5O1xyXG5cclxuICAgIHZhciBxdW90ID0gMSAvIChhICogZCAtIGIgKiBjKTtcclxuXHJcbiAgICB2YXIgYUludiA9IGQgKiBxdW90O1xyXG4gICAgdmFyIGJJbnYgPSAtYiAqIHF1b3Q7XHJcbiAgICB2YXIgY0ludiA9IC1jICogcXVvdDtcclxuICAgIHZhciBkSW52ID0gYSAqIHF1b3Q7XHJcbiAgICB2YXIgZUludiA9IC1hSW52ICogZSAtIGNJbnYgKiBmO1xyXG4gICAgdmFyIGZJbnYgPSAtYkludiAqIGUgLSBkSW52ICogZjtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1hdHJpeChhSW52LCBiSW52LCBjSW52LCBkSW52LCBlSW52LCBmSW52KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gYXBwbHlUb1BvaW50XHJcbiAgICogQG1lbWJlcm9mIE1hdHJpeCNcclxuICAgKi9cclxuICBNYXRyaXgucHJvdG90eXBlLmFwcGx5VG9Qb2ludCA9IGZ1bmN0aW9uKHB0KSB7XHJcbiAgICB2YXIgeCA9IHB0LnggKiB0aGlzLnN4ICsgcHQueSAqIHRoaXMuc2h4ICsgdGhpcy50eDtcclxuICAgIHZhciB5ID0gcHQueCAqIHRoaXMuc2h5ICsgcHQueSAqIHRoaXMuc3kgKyB0aGlzLnR5O1xyXG4gICAgcmV0dXJuIG5ldyBQb2ludCh4LCB5KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gYXBwbHlUb1JlY3RhbmdsZVxyXG4gICAqIEBtZW1iZXJvZiBNYXRyaXgjXHJcbiAgICovXHJcbiAgTWF0cml4LnByb3RvdHlwZS5hcHBseVRvUmVjdGFuZ2xlID0gZnVuY3Rpb24ocmVjdCkge1xyXG4gICAgdmFyIHB0MSA9IHRoaXMuYXBwbHlUb1BvaW50KHJlY3QpO1xyXG4gICAgdmFyIHB0MiA9IHRoaXMuYXBwbHlUb1BvaW50KG5ldyBQb2ludChyZWN0LnggKyByZWN0LncsIHJlY3QueSArIHJlY3QuaCkpO1xyXG4gICAgcmV0dXJuIG5ldyBSZWN0YW5nbGUocHQxLngsIHB0MS55LCBwdDIueCAtIHB0MS54LCBwdDIueSAtIHB0MS55KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDbG9uZSB0aGUgTWF0cml4XHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gY2xvbmVcclxuICAgKiBAbWVtYmVyb2YgTWF0cml4I1xyXG4gICAqIEBuYW1lIGNsb25lXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICovXHJcbiAgTWF0cml4LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHN4ID0gdGhpcy5zeDtcclxuICAgIHZhciBzaHkgPSB0aGlzLnNoeTtcclxuICAgIHZhciBzaHggPSB0aGlzLnNoeDtcclxuICAgIHZhciBzeSA9IHRoaXMuc3k7XHJcbiAgICB2YXIgdHggPSB0aGlzLnR4O1xyXG4gICAgdmFyIHR5ID0gdGhpcy50eTtcclxuXHJcbiAgICByZXR1cm4gbmV3IE1hdHJpeChzeCwgc2h5LCBzaHgsIHN5LCB0eCwgdHkpO1xyXG4gIH07XHJcblxyXG4gIEFQSS5NYXRyaXggPSBNYXRyaXg7XHJcblxyXG4gIC8qKlxyXG4gICAqIE11bHRpcGxpZXMgdHdvIG1hdHJpY2VzLiAoc2VlIHtAbGluayBNYXRyaXh9KVxyXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtMVxyXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtMlxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBtYXRyaXhNdWx0XHJcbiAgICovXHJcbiAgdmFyIG1hdHJpeE11bHQgPSAoQVBJLm1hdHJpeE11bHQgPSBmdW5jdGlvbihtMSwgbTIpIHtcclxuICAgIHJldHVybiBtMi5tdWx0aXBseShtMSk7XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBpZGVudGl0eSBtYXRyaXggKGVxdWl2YWxlbnQgdG8gbmV3IE1hdHJpeCgxLCAwLCAwLCAxLCAwLCAwKSkuXHJcbiAgICogQHR5cGUge01hdHJpeH1cclxuICAgKiBAbWVtYmVyb2YhIGpzUERGI1xyXG4gICAqIEBuYW1lIGlkZW50aXR5TWF0cml4XHJcbiAgICovXHJcbiAgdmFyIGlkZW50aXR5TWF0cml4ID0gbmV3IE1hdHJpeCgxLCAwLCAwLCAxLCAwLCAwKTtcclxuICBBUEkudW5pdE1hdHJpeCA9IEFQSS5pZGVudGl0eU1hdHJpeCA9IGlkZW50aXR5TWF0cml4O1xyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgbmV3IHBhdHRlcm4gZm9yIGxhdGVyIHVzZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgYnkgaXQgY2FuIGJlIHJlZmVyZW5jZWQgbGF0ZXIuIFRoZSBrZXlzIG11c3QgYmUgdW5pcXVlIVxyXG4gICAqIEBwYXJhbSB7QVBJLlBhdHRlcm59IHBhdHRlcm4gVGhlIHBhdHRlcm5cclxuICAgKi9cclxuICB2YXIgYWRkUGF0dGVybiA9IGZ1bmN0aW9uKGtleSwgcGF0dGVybikge1xyXG4gICAgLy8gb25seSBhZGQgaXQgaWYgaXQgaXMgbm90IGFscmVhZHkgcHJlc2VudCAodGhlIGtleXMgcHJvdmlkZWQgYnkgdGhlIHVzZXIgbXVzdCBiZSB1bmlxdWUhKVxyXG4gICAgaWYgKHBhdHRlcm5NYXBba2V5XSkgcmV0dXJuO1xyXG5cclxuICAgIHZhciBwcmVmaXggPSBwYXR0ZXJuIGluc3RhbmNlb2YgU2hhZGluZ1BhdHRlcm4gPyBcIlNoXCIgOiBcIlBcIjtcclxuICAgIHZhciBwYXR0ZXJuS2V5ID0gcHJlZml4ICsgKE9iamVjdC5rZXlzKHBhdHRlcm5zKS5sZW5ndGggKyAxKS50b1N0cmluZygxMCk7XHJcbiAgICBwYXR0ZXJuLmlkID0gcGF0dGVybktleTtcclxuXHJcbiAgICBwYXR0ZXJuTWFwW2tleV0gPSBwYXR0ZXJuS2V5O1xyXG4gICAgcGF0dGVybnNbcGF0dGVybktleV0gPSBwYXR0ZXJuO1xyXG5cclxuICAgIGV2ZW50cy5wdWJsaXNoKFwiYWRkUGF0dGVyblwiLCBwYXR0ZXJuKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBIHBhdHRlcm4gZGVzY3JpYmluZyBhIHNoYWRpbmcgcGF0dGVybi5cclxuICAgKlxyXG4gICAqIE9ubHkgYXZhaWxhYmxlIGluIFwiYWR2YW5jZWRcIiBBUEkgbW9kZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIE9uZSBvZiBcImF4aWFsXCIgb3IgXCJyYWRpYWxcIlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8TnVtYmVyPn0gY29vcmRzIEVpdGhlciBbeDEsIHkxLCB4MiwgeTJdIGZvciBcImF4aWFsXCIgdHlwZSBkZXNjcmliaW5nIHRoZSB0d28gaW50ZXJwb2xhdGlvbiBwb2ludHNcclxuICAgKiBvciBbeDEsIHkxLCByLCB4MiwgeTIsIHIyXSBmb3IgXCJyYWRpYWxcIiBkZXNjcmliaW5nIGlubmVyIGFuZCB0aGUgb3V0ZXIgY2lyY2xlLlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gY29sb3JzIEFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZmllbGRzIFwib2Zmc2V0XCIgYW5kIFwiY29sb3JcIi4gXCJvZmZzZXRcIiBkZXNjcmliZXNcclxuICAgKiB0aGUgb2Zmc2V0IGluIHBhcmFtZXRlciBzcGFjZSBbMCwgMV0uIFwiY29sb3JcIiBpcyBhbiBhcnJheSBvZiBsZW5ndGggMyBkZXNjcmliaW5nIFJHQiB2YWx1ZXMgaW4gWzAsIDI1NV0uXHJcbiAgICogQHBhcmFtIHtHU3RhdGU9fSBnU3RhdGUgQW4gYWRkaXRpb25hbCBncmFwaGljcyBzdGF0ZSB0aGF0IGdldHMgYXBwbGllZCB0byB0aGUgcGF0dGVybiAob3B0aW9uYWwpLlxyXG4gICAqIEBwYXJhbSB7TWF0cml4PX0gbWF0cml4IEEgbWF0cml4IHRoYXQgZGVzY3JpYmVzIHRoZSB0cmFuc2Zvcm1hdGlvbiBiZXR3ZWVuIHRoZSBwYXR0ZXJuIGNvb3JkaW5hdGUgc3lzdGVtXHJcbiAgICogYW5kIHRoZSB1c2UgY29vcmRpbmF0ZSBzeXN0ZW0gKG9wdGlvbmFsKS5cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAZXh0ZW5kcyBBUEkuUGF0dGVyblxyXG4gICAqL1xyXG4gIEFQSS5TaGFkaW5nUGF0dGVybiA9IFNoYWRpbmdQYXR0ZXJuO1xyXG5cclxuICAvKipcclxuICAgKiBBIFBERiBUaWxpbmcgcGF0dGVybi5cclxuICAgKlxyXG4gICAqIE9ubHkgYXZhaWxhYmxlIGluIFwiYWR2YW5jZWRcIiBBUEkgbW9kZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj59IGJvdW5kaW5nQm94IFRoZSBib3VuZGluZyBib3ggYXQgd2hpY2ggb25lIHBhdHRlcm4gY2VsbCBnZXRzIGNsaXBwZWQuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHhTdGVwIEhvcml6b250YWwgc3BhY2luZyBiZXR3ZWVuIHBhdHRlcm4gY2VsbHMuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHlTdGVwIFZlcnRpY2FsIHNwYWNpbmcgYmV0d2VlbiBwYXR0ZXJuIGNlbGxzLlxyXG4gICAqIEBwYXJhbSB7QVBJLkdTdGF0ZT19IGdTdGF0ZSBBbiBhZGRpdGlvbmFsIGdyYXBoaWNzIHN0YXRlIHRoYXQgZ2V0cyBhcHBsaWVkIHRvIHRoZSBwYXR0ZXJuIChvcHRpb25hbCkuXHJcbiAgICogQHBhcmFtIHtNYXRyaXg9fSBtYXRyaXggQSBtYXRyaXggdGhhdCBkZXNjcmliZXMgdGhlIHRyYW5zZm9ybWF0aW9uIGJldHdlZW4gdGhlIHBhdHRlcm4gY29vcmRpbmF0ZSBzeXN0ZW1cclxuICAgKiBhbmQgdGhlIHVzZSBjb29yZGluYXRlIHN5c3RlbSAob3B0aW9uYWwpLlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBleHRlbmRzIEFQSS5QYXR0ZXJuXHJcbiAgICovXHJcbiAgQVBJLlRpbGluZ1BhdHRlcm4gPSBUaWxpbmdQYXR0ZXJuO1xyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgbmV3IHtAbGluayBBUEkuU2hhZGluZ1BhdHRlcm59IGZvciBsYXRlciB1c2UuIE9ubHkgYXZhaWxhYmxlIGluIFwiYWR2YW5jZWRcIiBBUEkgbW9kZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XHJcbiAgICogQHBhcmFtIHtQYXR0ZXJufSBwYXR0ZXJuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBhZGRQYXR0ZXJuXHJcbiAgICovXHJcbiAgQVBJLmFkZFNoYWRpbmdQYXR0ZXJuID0gZnVuY3Rpb24oa2V5LCBwYXR0ZXJuKSB7XHJcbiAgICBhZHZhbmNlZEFwaU1vZGVUcmFwKFwiYWRkU2hhZGluZ1BhdHRlcm4oKVwiKTtcclxuXHJcbiAgICBhZGRQYXR0ZXJuKGtleSwgcGF0dGVybik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBCZWdpbnMgYSBuZXcgdGlsaW5nIHBhdHRlcm4uIEFsbCBzdWJzZXF1ZW50IHJlbmRlciBjYWxscyBhcmUgZHJhd24gdG8gdGhpcyBwYXR0ZXJuIHVudGlsIHtAbGluayBBUEkuZW5kVGlsaW5nUGF0dGVybn1cclxuICAgKiBnZXRzIGNhbGxlZC4gT25seSBhdmFpbGFibGUgaW4gXCJhZHZhbmNlZFwiIEFQSSBtb2RlLlxyXG4gICAqIEBwYXJhbSB7QVBJLlBhdHRlcm59IHBhdHRlcm5cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgYmVnaW5UaWxpbmdQYXR0ZXJuXHJcbiAgICovXHJcbiAgQVBJLmJlZ2luVGlsaW5nUGF0dGVybiA9IGZ1bmN0aW9uKHBhdHRlcm4pIHtcclxuICAgIGFkdmFuY2VkQXBpTW9kZVRyYXAoXCJiZWdpblRpbGluZ1BhdHRlcm4oKVwiKTtcclxuXHJcbiAgICBiZWdpbk5ld1JlbmRlclRhcmdldChcclxuICAgICAgcGF0dGVybi5ib3VuZGluZ0JveFswXSxcclxuICAgICAgcGF0dGVybi5ib3VuZGluZ0JveFsxXSxcclxuICAgICAgcGF0dGVybi5ib3VuZGluZ0JveFsyXSAtIHBhdHRlcm4uYm91bmRpbmdCb3hbMF0sXHJcbiAgICAgIHBhdHRlcm4uYm91bmRpbmdCb3hbM10gLSBwYXR0ZXJuLmJvdW5kaW5nQm94WzFdLFxyXG4gICAgICBwYXR0ZXJuLm1hdHJpeFxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBFbmRzIGEgdGlsaW5nIHBhdHRlcm4gYW5kIHNldHMgdGhlIHJlbmRlciB0YXJnZXQgdG8gdGhlIG9uZSBhY3RpdmUgYmVmb3JlIHtAbGluayBBUEkuYmVnaW5UaWxpbmdQYXR0ZXJufSBoYXMgYmVlbiBjYWxsZWQuXHJcbiAgICpcclxuICAgKiBPbmx5IGF2YWlsYWJsZSBpbiBcImFkdmFuY2VkXCIgQVBJIG1vZGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEEgdW5pcXVlIGtleSB0aGF0IGlzIHVzZWQgdG8gcmVmZXJlbmNlIHRoaXMgcGF0dGVybiBhdCBsYXRlciB1c2UuXHJcbiAgICogQHBhcmFtIHtBUEkuUGF0dGVybn0gcGF0dGVybiBUaGUgcGF0dGVybiB0byBlbmQuXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGVuZFRpbGluZ1BhdHRlcm5cclxuICAgKi9cclxuICBBUEkuZW5kVGlsaW5nUGF0dGVybiA9IGZ1bmN0aW9uKGtleSwgcGF0dGVybikge1xyXG4gICAgYWR2YW5jZWRBcGlNb2RlVHJhcChcImVuZFRpbGluZ1BhdHRlcm4oKVwiKTtcclxuXHJcbiAgICAvLyByZXRyaWV2ZSB0aGUgc3RyZWFtXHJcbiAgICBwYXR0ZXJuLnN0cmVhbSA9IHBhZ2VzW2N1cnJlbnRQYWdlXS5qb2luKFwiXFxuXCIpO1xyXG5cclxuICAgIGFkZFBhdHRlcm4oa2V5LCBwYXR0ZXJuKTtcclxuXHJcbiAgICBldmVudHMucHVibGlzaChcImVuZFRpbGluZ1BhdHRlcm5cIiwgcGF0dGVybik7XHJcblxyXG4gICAgLy8gcmVzdG9yZSBzdGF0ZSBmcm9tIHN0YWNrXHJcbiAgICByZW5kZXJUYXJnZXRTdGFjay5wb3AoKS5yZXN0b3JlKCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIG5ld09iamVjdCA9IChBUEkuX19wcml2YXRlX18ubmV3T2JqZWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgb2lkID0gbmV3T2JqZWN0RGVmZXJyZWQoKTtcclxuICAgIG5ld09iamVjdERlZmVycmVkQmVnaW4ob2lkLCB0cnVlKTtcclxuICAgIHJldHVybiBvaWQ7XHJcbiAgfSk7XHJcblxyXG4gIC8vIERvZXMgbm90IG91dHB1dCB0aGUgb2JqZWN0LiAgVGhlIGNhbGxlciBtdXN0IGNhbGwgbmV3T2JqZWN0RGVmZXJyZWRCZWdpbihvaWQpIGJlZm9yZSBvdXRwdXRpbmcgYW55IGRhdGFcclxuICB2YXIgbmV3T2JqZWN0RGVmZXJyZWQgPSAoQVBJLl9fcHJpdmF0ZV9fLm5ld09iamVjdERlZmVycmVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBvYmplY3ROdW1iZXIrKztcclxuICAgIG9mZnNldHNbb2JqZWN0TnVtYmVyXSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gY29udGVudExlbmd0aDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gb2JqZWN0TnVtYmVyO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgbmV3T2JqZWN0RGVmZXJyZWRCZWdpbiA9IGZ1bmN0aW9uKG9pZCwgZG9PdXRwdXQpIHtcclxuICAgIGRvT3V0cHV0ID0gdHlwZW9mIGRvT3V0cHV0ID09PSBcImJvb2xlYW5cIiA/IGRvT3V0cHV0IDogZmFsc2U7XHJcbiAgICBvZmZzZXRzW29pZF0gPSBjb250ZW50TGVuZ3RoO1xyXG4gICAgaWYgKGRvT3V0cHV0KSB7XHJcbiAgICAgIG91dChvaWQgKyBcIiAwIG9ialwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvaWQ7XHJcbiAgfTtcclxuICAvLyBEb2VzIG5vdCBvdXRwdXQgdGhlIG9iamVjdCB1bnRpbCBhZnRlciB0aGUgcGFnZXMgaGF2ZSBiZWVuIG91dHB1dC5cclxuICAvLyBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBvYmplY3RJZCBhbmQgY29udGVudC5cclxuICAvLyBBbGwgcGFnZXMgaGF2ZSBiZWVuIGFkZGVkIHNvIHRoZSBvYmplY3QgSUQgY2FuIGJlIGVzdGltYXRlZCB0byBzdGFydCByaWdodCBhZnRlci5cclxuICAvLyBUaGlzIGRvZXMgbm90IG1vZGlmeSB0aGUgY3VycmVudCBvYmplY3ROdW1iZXI7ICBJdCBtdXN0IGJlIHVwZGF0ZWQgYWZ0ZXIgdGhlIG5ld09iamVjdHMgYXJlIG91dHB1dC5cclxuICB2YXIgbmV3QWRkaXRpb25hbE9iamVjdCA9IChBUEkuX19wcml2YXRlX18ubmV3QWRkaXRpb25hbE9iamVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG9iaklkID0gbmV3T2JqZWN0RGVmZXJyZWQoKTtcclxuICAgIHZhciBvYmogPSB7XHJcbiAgICAgIG9iaklkOiBvYmpJZCxcclxuICAgICAgY29udGVudDogXCJcIlxyXG4gICAgfTtcclxuICAgIGFkZGl0aW9uYWxPYmplY3RzLnB1c2gob2JqKTtcclxuICAgIHJldHVybiBvYmo7XHJcbiAgfSk7XHJcblxyXG4gIHZhciByb290RGljdGlvbmFyeU9iaklkID0gbmV3T2JqZWN0RGVmZXJyZWQoKTtcclxuICB2YXIgcmVzb3VyY2VEaWN0aW9uYXJ5T2JqSWQgPSBuZXdPYmplY3REZWZlcnJlZCgpO1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBQcml2YXRlIGZ1bmN0aW9uc1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICB2YXIgZGVjb2RlQ29sb3JTdHJpbmcgPSAoQVBJLl9fcHJpdmF0ZV9fLmRlY29kZUNvbG9yU3RyaW5nID0gZnVuY3Rpb24oY29sb3IpIHtcclxuICAgIHZhciBjb2xvckVuY29kZWQgPSBjb2xvci5zcGxpdChcIiBcIik7XHJcbiAgICBpZiAoXHJcbiAgICAgIGNvbG9yRW5jb2RlZC5sZW5ndGggPT09IDIgJiZcclxuICAgICAgKGNvbG9yRW5jb2RlZFsxXSA9PT0gXCJnXCIgfHwgY29sb3JFbmNvZGVkWzFdID09PSBcIkdcIilcclxuICAgICkge1xyXG4gICAgICAvLyBjb252ZXJ0IGdyYXlzY2FsZSB2YWx1ZSB0byByZ2Igc28gdGhhdCBpdCBjYW4gYmUgY29udmVydGVkIHRvIGhleCBmb3IgY29uc2lzdGVuY3lcclxuICAgICAgdmFyIGZsb2F0VmFsID0gcGFyc2VGbG9hdChjb2xvckVuY29kZWRbMF0pO1xyXG4gICAgICBjb2xvckVuY29kZWQgPSBbZmxvYXRWYWwsIGZsb2F0VmFsLCBmbG9hdFZhbCwgXCJyXCJdO1xyXG4gICAgfSBlbHNlIGlmIChcclxuICAgICAgY29sb3JFbmNvZGVkLmxlbmd0aCA9PT0gNSAmJlxyXG4gICAgICAoY29sb3JFbmNvZGVkWzRdID09PSBcImtcIiB8fCBjb2xvckVuY29kZWRbNF0gPT09IFwiS1wiKVxyXG4gICAgKSB7XHJcbiAgICAgIC8vIGNvbnZlcnQgQ01ZSyB2YWx1ZXMgdG8gcmJnIHNvIHRoYXQgaXQgY2FuIGJlIGNvbnZlcnRlZCB0byBoZXggZm9yIGNvbnNpc3RlbmN5XHJcbiAgICAgIHZhciByZWQgPSAoMS4wIC0gY29sb3JFbmNvZGVkWzBdKSAqICgxLjAgLSBjb2xvckVuY29kZWRbM10pO1xyXG4gICAgICB2YXIgZ3JlZW4gPSAoMS4wIC0gY29sb3JFbmNvZGVkWzFdKSAqICgxLjAgLSBjb2xvckVuY29kZWRbM10pO1xyXG4gICAgICB2YXIgYmx1ZSA9ICgxLjAgLSBjb2xvckVuY29kZWRbMl0pICogKDEuMCAtIGNvbG9yRW5jb2RlZFszXSk7XHJcblxyXG4gICAgICBjb2xvckVuY29kZWQgPSBbcmVkLCBncmVlbiwgYmx1ZSwgXCJyXCJdO1xyXG4gICAgfVxyXG4gICAgdmFyIGNvbG9yQXNSR0IgPSBcIiNcIjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgIGNvbG9yQXNSR0IgKz0gKFxyXG4gICAgICAgIFwiMFwiICsgTWF0aC5mbG9vcihwYXJzZUZsb2F0KGNvbG9yRW5jb2RlZFtpXSkgKiAyNTUpLnRvU3RyaW5nKDE2KVxyXG4gICAgICApLnNsaWNlKC0yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb2xvckFzUkdCO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgZW5jb2RlQ29sb3JTdHJpbmcgPSAoQVBJLl9fcHJpdmF0ZV9fLmVuY29kZUNvbG9yU3RyaW5nID0gZnVuY3Rpb24oXHJcbiAgICBvcHRpb25zXHJcbiAgKSB7XHJcbiAgICB2YXIgY29sb3I7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgY2gxOiBvcHRpb25zXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICB2YXIgY2gxID0gb3B0aW9ucy5jaDE7XHJcbiAgICB2YXIgY2gyID0gb3B0aW9ucy5jaDI7XHJcbiAgICB2YXIgY2gzID0gb3B0aW9ucy5jaDM7XHJcbiAgICB2YXIgY2g0ID0gb3B0aW9ucy5jaDQ7XHJcbiAgICB2YXIgbGV0dGVyQXJyYXkgPVxyXG4gICAgICBvcHRpb25zLnBkZkNvbG9yVHlwZSA9PT0gXCJkcmF3XCIgPyBbXCJHXCIsIFwiUkdcIiwgXCJLXCJdIDogW1wiZ1wiLCBcInJnXCIsIFwia1wiXTtcclxuXHJcbiAgICBpZiAodHlwZW9mIGNoMSA9PT0gXCJzdHJpbmdcIiAmJiBjaDEuY2hhckF0KDApICE9PSBcIiNcIikge1xyXG4gICAgICB2YXIgcmdiQ29sb3IgPSBuZXcgUkdCQ29sb3IoY2gxKTtcclxuICAgICAgaWYgKHJnYkNvbG9yLm9rKSB7XHJcbiAgICAgICAgY2gxID0gcmdiQ29sb3IudG9IZXgoKTtcclxuICAgICAgfSBlbHNlIGlmICghL15cXGQqXFwuP1xcZCokLy50ZXN0KGNoMSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAnSW52YWxpZCBjb2xvciBcIicgKyBjaDEgKyAnXCIgcGFzc2VkIHRvIGpzUERGLmVuY29kZUNvbG9yU3RyaW5nLidcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL2NvbnZlcnQgc2hvcnQgcmdiIHRvIGxvbmcgZm9ybVxyXG4gICAgaWYgKHR5cGVvZiBjaDEgPT09IFwic3RyaW5nXCIgJiYgL14jWzAtOUEtRmEtZl17M30kLy50ZXN0KGNoMSkpIHtcclxuICAgICAgY2gxID0gXCIjXCIgKyBjaDFbMV0gKyBjaDFbMV0gKyBjaDFbMl0gKyBjaDFbMl0gKyBjaDFbM10gKyBjaDFbM107XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBjaDEgPT09IFwic3RyaW5nXCIgJiYgL14jWzAtOUEtRmEtZl17Nn0kLy50ZXN0KGNoMSkpIHtcclxuICAgICAgdmFyIGhleCA9IHBhcnNlSW50KGNoMS5zdWJzdHIoMSksIDE2KTtcclxuICAgICAgY2gxID0gKGhleCA+PiAxNikgJiAyNTU7XHJcbiAgICAgIGNoMiA9IChoZXggPj4gOCkgJiAyNTU7XHJcbiAgICAgIGNoMyA9IGhleCAmIDI1NTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiBjaDIgPT09IFwidW5kZWZpbmVkXCIgfHxcclxuICAgICAgKHR5cGVvZiBjaDQgPT09IFwidW5kZWZpbmVkXCIgJiYgY2gxID09PSBjaDIgJiYgY2gyID09PSBjaDMpXHJcbiAgICApIHtcclxuICAgICAgLy8gR3JheSBjb2xvciBzcGFjZS5cclxuICAgICAgaWYgKHR5cGVvZiBjaDEgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBjb2xvciA9IGNoMSArIFwiIFwiICsgbGV0dGVyQXJyYXlbMF07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLnByZWNpc2lvbikge1xyXG4gICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICBjb2xvciA9IGYyKGNoMSAvIDI1NSkgKyBcIiBcIiArIGxldHRlckFycmF5WzBdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbG9yID0gZjMoY2gxIC8gMjU1KSArIFwiIFwiICsgbGV0dGVyQXJyYXlbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjaDQgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGNoNCA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAvLyBhc3N1bWUgUkdCQVxyXG4gICAgICBpZiAoY2g0ICYmICFpc05hTihjaDQuYSkpIHtcclxuICAgICAgICAvL1RPRE8gSW1wbGVtZW50IHRyYW5zcGFyZW5jeS5cclxuICAgICAgICAvL1dPUktBUk9VTkQgdXNlIHdoaXRlIGZvciBub3csIGlmIHRyYW5zcGFyZW50LCBvdGhlcndpc2UgaGFuZGxlIGFzIHJnYlxyXG4gICAgICAgIGlmIChjaDQuYSA9PT0gMCkge1xyXG4gICAgICAgICAgY29sb3IgPSBbXCIxLlwiLCBcIjEuXCIsIFwiMS5cIiwgbGV0dGVyQXJyYXlbMV1dLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgICAgcmV0dXJuIGNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBhc3N1bWUgUkdCXHJcbiAgICAgIGlmICh0eXBlb2YgY2gxID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgY29sb3IgPSBbY2gxLCBjaDIsIGNoMywgbGV0dGVyQXJyYXlbMV1dLmpvaW4oXCIgXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5wcmVjaXNpb24pIHtcclxuICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgY29sb3IgPSBbXHJcbiAgICAgICAgICAgICAgZjIoY2gxIC8gMjU1KSxcclxuICAgICAgICAgICAgICBmMihjaDIgLyAyNTUpLFxyXG4gICAgICAgICAgICAgIGYyKGNoMyAvIDI1NSksXHJcbiAgICAgICAgICAgICAgbGV0dGVyQXJyYXlbMV1cclxuICAgICAgICAgICAgXS5qb2luKFwiIFwiKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICBjb2xvciA9IFtcclxuICAgICAgICAgICAgICBmMyhjaDEgLyAyNTUpLFxyXG4gICAgICAgICAgICAgIGYzKGNoMiAvIDI1NSksXHJcbiAgICAgICAgICAgICAgZjMoY2gzIC8gMjU1KSxcclxuICAgICAgICAgICAgICBsZXR0ZXJBcnJheVsxXVxyXG4gICAgICAgICAgICBdLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gYXNzdW1lIENNWUtcclxuICAgICAgaWYgKHR5cGVvZiBjaDEgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBjb2xvciA9IFtjaDEsIGNoMiwgY2gzLCBjaDQsIGxldHRlckFycmF5WzJdXS5qb2luKFwiIFwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMucHJlY2lzaW9uKSB7XHJcbiAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIGNvbG9yID0gW2YyKGNoMSksIGYyKGNoMiksIGYyKGNoMyksIGYyKGNoNCksIGxldHRlckFycmF5WzJdXS5qb2luKFxyXG4gICAgICAgICAgICAgIFwiIFwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgY29sb3IgPSBbZjMoY2gxKSwgZjMoY2gyKSwgZjMoY2gzKSwgZjMoY2g0KSwgbGV0dGVyQXJyYXlbMl1dLmpvaW4oXHJcbiAgICAgICAgICAgICAgXCIgXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjb2xvcjtcclxuICB9KTtcclxuXHJcbiAgdmFyIGdldEZpbHRlcnMgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldEZpbHRlcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBmaWx0ZXJzO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgcHV0U3RyZWFtID0gKEFQSS5fX3ByaXZhdGVfXy5wdXRTdHJlYW0gPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhIHx8IFwiXCI7XHJcbiAgICB2YXIgZmlsdGVycyA9IG9wdGlvbnMuZmlsdGVycyB8fCBnZXRGaWx0ZXJzKCk7XHJcbiAgICB2YXIgYWxyZWFkeUFwcGxpZWRGaWx0ZXJzID0gb3B0aW9ucy5hbHJlYWR5QXBwbGllZEZpbHRlcnMgfHwgW107XHJcbiAgICB2YXIgYWRkTGVuZ3RoMSA9IG9wdGlvbnMuYWRkTGVuZ3RoMSB8fCBmYWxzZTtcclxuICAgIHZhciB2YWx1ZU9mTGVuZ3RoMSA9IGRhdGEubGVuZ3RoO1xyXG4gICAgdmFyIG9iamVjdElkID0gb3B0aW9ucy5vYmplY3RJZDtcclxuICAgIHZhciBlbmNyeXB0b3IgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIGlmIChlbmNyeXB0aW9uT3B0aW9ucyAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqZWN0SWQgPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgXCJPYmplY3RJZCBtdXN0IGJlIHBhc3NlZCB0byBwdXRTdHJlYW0gZm9yIGZpbGUgZW5jcnlwdGlvblwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAoZW5jcnlwdGlvbk9wdGlvbnMgIT09IG51bGwpIHtcclxuICAgICAgZW5jcnlwdG9yID0gZW5jcnlwdGlvbi5lbmNyeXB0b3Iob2JqZWN0SWQsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBwcm9jZXNzZWREYXRhID0ge307XHJcbiAgICBpZiAoZmlsdGVycyA9PT0gdHJ1ZSkge1xyXG4gICAgICBmaWx0ZXJzID0gW1wiRmxhdGVFbmNvZGVcIl07XHJcbiAgICB9XHJcbiAgICB2YXIga2V5VmFsdWVzID0gb3B0aW9ucy5hZGRpdGlvbmFsS2V5VmFsdWVzIHx8IFtdO1xyXG4gICAgaWYgKHR5cGVvZiBqc1BERi5BUEkucHJvY2Vzc0RhdGFCeUZpbHRlcnMgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgcHJvY2Vzc2VkRGF0YSA9IGpzUERGLkFQSS5wcm9jZXNzRGF0YUJ5RmlsdGVycyhkYXRhLCBmaWx0ZXJzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHByb2Nlc3NlZERhdGEgPSB7IGRhdGE6IGRhdGEsIHJldmVyc2VDaGFpbjogW10gfTtcclxuICAgIH1cclxuICAgIHZhciBmaWx0ZXJBc1N0cmluZyA9XHJcbiAgICAgIHByb2Nlc3NlZERhdGEucmV2ZXJzZUNoYWluICtcclxuICAgICAgKEFycmF5LmlzQXJyYXkoYWxyZWFkeUFwcGxpZWRGaWx0ZXJzKVxyXG4gICAgICAgID8gYWxyZWFkeUFwcGxpZWRGaWx0ZXJzLmpvaW4oXCIgXCIpXHJcbiAgICAgICAgOiBhbHJlYWR5QXBwbGllZEZpbHRlcnMudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgaWYgKHByb2Nlc3NlZERhdGEuZGF0YS5sZW5ndGggIT09IDApIHtcclxuICAgICAga2V5VmFsdWVzLnB1c2goe1xyXG4gICAgICAgIGtleTogXCJMZW5ndGhcIixcclxuICAgICAgICB2YWx1ZTogcHJvY2Vzc2VkRGF0YS5kYXRhLmxlbmd0aFxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGFkZExlbmd0aDEgPT09IHRydWUpIHtcclxuICAgICAgICBrZXlWYWx1ZXMucHVzaCh7XHJcbiAgICAgICAgICBrZXk6IFwiTGVuZ3RoMVwiLFxyXG4gICAgICAgICAgdmFsdWU6IHZhbHVlT2ZMZW5ndGgxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZmlsdGVyQXNTdHJpbmcubGVuZ3RoICE9IDApIHtcclxuICAgICAgaWYgKGZpbHRlckFzU3RyaW5nLnNwbGl0KFwiL1wiKS5sZW5ndGggLSAxID09PSAxKSB7XHJcbiAgICAgICAga2V5VmFsdWVzLnB1c2goe1xyXG4gICAgICAgICAga2V5OiBcIkZpbHRlclwiLFxyXG4gICAgICAgICAgdmFsdWU6IGZpbHRlckFzU3RyaW5nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAga2V5VmFsdWVzLnB1c2goe1xyXG4gICAgICAgICAga2V5OiBcIkZpbHRlclwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwiW1wiICsgZmlsdGVyQXNTdHJpbmcgKyBcIl1cIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleVZhbHVlcy5sZW5ndGg7IGogKz0gMSkge1xyXG4gICAgICAgICAgaWYgKGtleVZhbHVlc1tqXS5rZXkgPT09IFwiRGVjb2RlUGFybXNcIikge1xyXG4gICAgICAgICAgICB2YXIgZGVjb2RlUGFybXNBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChcclxuICAgICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgICAgaSA8IHByb2Nlc3NlZERhdGEucmV2ZXJzZUNoYWluLnNwbGl0KFwiL1wiKS5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgIGkgKz0gMVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBkZWNvZGVQYXJtc0FycmF5LnB1c2goXCJudWxsXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZWNvZGVQYXJtc0FycmF5LnB1c2goa2V5VmFsdWVzW2pdLnZhbHVlKTtcclxuICAgICAgICAgICAga2V5VmFsdWVzW2pdLnZhbHVlID0gXCJbXCIgKyBkZWNvZGVQYXJtc0FycmF5LmpvaW4oXCIgXCIpICsgXCJdXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3V0KFwiPDxcIik7XHJcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleVZhbHVlcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICBvdXQoXCIvXCIgKyBrZXlWYWx1ZXNba10ua2V5ICsgXCIgXCIgKyBrZXlWYWx1ZXNba10udmFsdWUpO1xyXG4gICAgfVxyXG4gICAgb3V0KFwiPj5cIik7XHJcbiAgICBpZiAocHJvY2Vzc2VkRGF0YS5kYXRhLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICBvdXQoXCJzdHJlYW1cIik7XHJcbiAgICAgIG91dChlbmNyeXB0b3IocHJvY2Vzc2VkRGF0YS5kYXRhKSk7XHJcbiAgICAgIG91dChcImVuZHN0cmVhbVwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgdmFyIHB1dFBhZ2UgPSAoQVBJLl9fcHJpdmF0ZV9fLnB1dFBhZ2UgPSBmdW5jdGlvbihwYWdlKSB7XHJcbiAgICB2YXIgcGFnZU51bWJlciA9IHBhZ2UubnVtYmVyO1xyXG4gICAgdmFyIGRhdGEgPSBwYWdlLmRhdGE7XHJcbiAgICB2YXIgcGFnZU9iamVjdE51bWJlciA9IHBhZ2Uub2JqSWQ7XHJcbiAgICB2YXIgcGFnZUNvbnRlbnRzT2JqSWQgPSBwYWdlLmNvbnRlbnRzT2JqSWQ7XHJcblxyXG4gICAgbmV3T2JqZWN0RGVmZXJyZWRCZWdpbihwYWdlT2JqZWN0TnVtYmVyLCB0cnVlKTtcclxuICAgIG91dChcIjw8L1R5cGUgL1BhZ2VcIik7XHJcbiAgICBvdXQoXCIvUGFyZW50IFwiICsgcGFnZS5yb290RGljdGlvbmFyeU9iaklkICsgXCIgMCBSXCIpO1xyXG4gICAgb3V0KFwiL1Jlc291cmNlcyBcIiArIHBhZ2UucmVzb3VyY2VEaWN0aW9uYXJ5T2JqSWQgKyBcIiAwIFJcIik7XHJcbiAgICBvdXQoXHJcbiAgICAgIFwiL01lZGlhQm94IFtcIiArXHJcbiAgICAgICAgcGFyc2VGbG9hdChocGYocGFnZS5tZWRpYUJveC5ib3R0b21MZWZ0WCkpICtcclxuICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgcGFyc2VGbG9hdChocGYocGFnZS5tZWRpYUJveC5ib3R0b21MZWZ0WSkpICtcclxuICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgaHBmKHBhZ2UubWVkaWFCb3gudG9wUmlnaHRYKSArXHJcbiAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgIGhwZihwYWdlLm1lZGlhQm94LnRvcFJpZ2h0WSkgK1xyXG4gICAgICAgIFwiXVwiXHJcbiAgICApO1xyXG4gICAgaWYgKHBhZ2UuY3JvcEJveCAhPT0gbnVsbCkge1xyXG4gICAgICBvdXQoXHJcbiAgICAgICAgXCIvQ3JvcEJveCBbXCIgK1xyXG4gICAgICAgICAgaHBmKHBhZ2UuY3JvcEJveC5ib3R0b21MZWZ0WCkgK1xyXG4gICAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgICAgaHBmKHBhZ2UuY3JvcEJveC5ib3R0b21MZWZ0WSkgK1xyXG4gICAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgICAgaHBmKHBhZ2UuY3JvcEJveC50b3BSaWdodFgpICtcclxuICAgICAgICAgIFwiIFwiICtcclxuICAgICAgICAgIGhwZihwYWdlLmNyb3BCb3gudG9wUmlnaHRZKSArXHJcbiAgICAgICAgICBcIl1cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwYWdlLmJsZWVkQm94ICE9PSBudWxsKSB7XHJcbiAgICAgIG91dChcclxuICAgICAgICBcIi9CbGVlZEJveCBbXCIgK1xyXG4gICAgICAgICAgaHBmKHBhZ2UuYmxlZWRCb3guYm90dG9tTGVmdFgpICtcclxuICAgICAgICAgIFwiIFwiICtcclxuICAgICAgICAgIGhwZihwYWdlLmJsZWVkQm94LmJvdHRvbUxlZnRZKSArXHJcbiAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICBocGYocGFnZS5ibGVlZEJveC50b3BSaWdodFgpICtcclxuICAgICAgICAgIFwiIFwiICtcclxuICAgICAgICAgIGhwZihwYWdlLmJsZWVkQm94LnRvcFJpZ2h0WSkgK1xyXG4gICAgICAgICAgXCJdXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGFnZS50cmltQm94ICE9PSBudWxsKSB7XHJcbiAgICAgIG91dChcclxuICAgICAgICBcIi9UcmltQm94IFtcIiArXHJcbiAgICAgICAgICBocGYocGFnZS50cmltQm94LmJvdHRvbUxlZnRYKSArXHJcbiAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICBocGYocGFnZS50cmltQm94LmJvdHRvbUxlZnRZKSArXHJcbiAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICBocGYocGFnZS50cmltQm94LnRvcFJpZ2h0WCkgK1xyXG4gICAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgICAgaHBmKHBhZ2UudHJpbUJveC50b3BSaWdodFkpICtcclxuICAgICAgICAgIFwiXVwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhZ2UuYXJ0Qm94ICE9PSBudWxsKSB7XHJcbiAgICAgIG91dChcclxuICAgICAgICBcIi9BcnRCb3ggW1wiICtcclxuICAgICAgICAgIGhwZihwYWdlLmFydEJveC5ib3R0b21MZWZ0WCkgK1xyXG4gICAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgICAgaHBmKHBhZ2UuYXJ0Qm94LmJvdHRvbUxlZnRZKSArXHJcbiAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICBocGYocGFnZS5hcnRCb3gudG9wUmlnaHRYKSArXHJcbiAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICBocGYocGFnZS5hcnRCb3gudG9wUmlnaHRZKSArXHJcbiAgICAgICAgICBcIl1cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgcGFnZS51c2VyVW5pdCA9PT0gXCJudW1iZXJcIiAmJiBwYWdlLnVzZXJVbml0ICE9PSAxLjApIHtcclxuICAgICAgb3V0KFwiL1VzZXJVbml0IFwiICsgcGFnZS51c2VyVW5pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJwdXRQYWdlXCIsIHtcclxuICAgICAgb2JqSWQ6IHBhZ2VPYmplY3ROdW1iZXIsXHJcbiAgICAgIHBhZ2VDb250ZXh0OiBwYWdlc0NvbnRleHRbcGFnZU51bWJlcl0sXHJcbiAgICAgIHBhZ2VOdW1iZXI6IHBhZ2VOdW1iZXIsXHJcbiAgICAgIHBhZ2U6IGRhdGFcclxuICAgIH0pO1xyXG4gICAgb3V0KFwiL0NvbnRlbnRzIFwiICsgcGFnZUNvbnRlbnRzT2JqSWQgKyBcIiAwIFJcIik7XHJcbiAgICBvdXQoXCI+PlwiKTtcclxuICAgIG91dChcImVuZG9ialwiKTtcclxuICAgIC8vIFBhZ2UgY29udGVudFxyXG4gICAgdmFyIHBhZ2VDb250ZW50ID0gZGF0YS5qb2luKFwiXFxuXCIpO1xyXG5cclxuICAgIGlmIChhcGlNb2RlID09PSBBcGlNb2RlLkFEVkFOQ0VEKSB7XHJcbiAgICAgIC8vIGlmIHRoZSB1c2VyIGZvcmdvdCB0byBzd2l0Y2ggYmFjayB0byBDT01QQVQgbW9kZSwgd2UgbXVzdCBiYWxhbmNlIHRoZSBncmFwaGljcyBzdGFjayBhZ2FpblxyXG4gICAgICBwYWdlQ29udGVudCArPSBcIlxcblFcIjtcclxuICAgIH1cclxuXHJcbiAgICBuZXdPYmplY3REZWZlcnJlZEJlZ2luKHBhZ2VDb250ZW50c09iaklkLCB0cnVlKTtcclxuICAgIHB1dFN0cmVhbSh7XHJcbiAgICAgIGRhdGE6IHBhZ2VDb250ZW50LFxyXG4gICAgICBmaWx0ZXJzOiBnZXRGaWx0ZXJzKCksXHJcbiAgICAgIG9iamVjdElkOiBwYWdlQ29udGVudHNPYmpJZFxyXG4gICAgfSk7XHJcbiAgICBvdXQoXCJlbmRvYmpcIik7XHJcbiAgICByZXR1cm4gcGFnZU9iamVjdE51bWJlcjtcclxuICB9KTtcclxuXHJcbiAgdmFyIHB1dFBhZ2VzID0gKEFQSS5fX3ByaXZhdGVfXy5wdXRQYWdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG4sXHJcbiAgICAgIGksXHJcbiAgICAgIHBhZ2VPYmplY3ROdW1iZXJzID0gW107XHJcblxyXG4gICAgZm9yIChuID0gMTsgbiA8PSBwYWdlOyBuKyspIHtcclxuICAgICAgcGFnZXNDb250ZXh0W25dLm9iaklkID0gbmV3T2JqZWN0RGVmZXJyZWQoKTtcclxuICAgICAgcGFnZXNDb250ZXh0W25dLmNvbnRlbnRzT2JqSWQgPSBuZXdPYmplY3REZWZlcnJlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobiA9IDE7IG4gPD0gcGFnZTsgbisrKSB7XHJcbiAgICAgIHBhZ2VPYmplY3ROdW1iZXJzLnB1c2goXHJcbiAgICAgICAgcHV0UGFnZSh7XHJcbiAgICAgICAgICBudW1iZXI6IG4sXHJcbiAgICAgICAgICBkYXRhOiBwYWdlc1tuXSxcclxuICAgICAgICAgIG9iaklkOiBwYWdlc0NvbnRleHRbbl0ub2JqSWQsXHJcbiAgICAgICAgICBjb250ZW50c09iaklkOiBwYWdlc0NvbnRleHRbbl0uY29udGVudHNPYmpJZCxcclxuICAgICAgICAgIG1lZGlhQm94OiBwYWdlc0NvbnRleHRbbl0ubWVkaWFCb3gsXHJcbiAgICAgICAgICBjcm9wQm94OiBwYWdlc0NvbnRleHRbbl0uY3JvcEJveCxcclxuICAgICAgICAgIGJsZWVkQm94OiBwYWdlc0NvbnRleHRbbl0uYmxlZWRCb3gsXHJcbiAgICAgICAgICB0cmltQm94OiBwYWdlc0NvbnRleHRbbl0udHJpbUJveCxcclxuICAgICAgICAgIGFydEJveDogcGFnZXNDb250ZXh0W25dLmFydEJveCxcclxuICAgICAgICAgIHVzZXJVbml0OiBwYWdlc0NvbnRleHRbbl0udXNlclVuaXQsXHJcbiAgICAgICAgICByb290RGljdGlvbmFyeU9iaklkOiByb290RGljdGlvbmFyeU9iaklkLFxyXG4gICAgICAgICAgcmVzb3VyY2VEaWN0aW9uYXJ5T2JqSWQ6IHJlc291cmNlRGljdGlvbmFyeU9iaklkXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIG5ld09iamVjdERlZmVycmVkQmVnaW4ocm9vdERpY3Rpb25hcnlPYmpJZCwgdHJ1ZSk7XHJcbiAgICBvdXQoXCI8PC9UeXBlIC9QYWdlc1wiKTtcclxuICAgIHZhciBraWRzID0gXCIvS2lkcyBbXCI7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgcGFnZTsgaSsrKSB7XHJcbiAgICAgIGtpZHMgKz0gcGFnZU9iamVjdE51bWJlcnNbaV0gKyBcIiAwIFIgXCI7XHJcbiAgICB9XHJcbiAgICBvdXQoa2lkcyArIFwiXVwiKTtcclxuICAgIG91dChcIi9Db3VudCBcIiArIHBhZ2UpO1xyXG4gICAgb3V0KFwiPj5cIik7XHJcbiAgICBvdXQoXCJlbmRvYmpcIik7XHJcbiAgICBldmVudHMucHVibGlzaChcInBvc3RQdXRQYWdlc1wiKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIHB1dEZvbnQgPSBmdW5jdGlvbihmb250KSB7XHJcbiAgICBldmVudHMucHVibGlzaChcInB1dEZvbnRcIiwge1xyXG4gICAgICBmb250OiBmb250LFxyXG4gICAgICBvdXQ6IG91dCxcclxuICAgICAgbmV3T2JqZWN0OiBuZXdPYmplY3QsXHJcbiAgICAgIHB1dFN0cmVhbTogcHV0U3RyZWFtXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZm9udC5pc0FscmVhZHlQdXR0ZWQgIT09IHRydWUpIHtcclxuICAgICAgZm9udC5vYmplY3ROdW1iZXIgPSBuZXdPYmplY3QoKTtcclxuICAgICAgb3V0KFwiPDxcIik7XHJcbiAgICAgIG91dChcIi9UeXBlIC9Gb250XCIpO1xyXG4gICAgICBvdXQoXCIvQmFzZUZvbnQgL1wiICsgdG9QREZOYW1lKGZvbnQucG9zdFNjcmlwdE5hbWUpKTtcclxuICAgICAgb3V0KFwiL1N1YnR5cGUgL1R5cGUxXCIpO1xyXG4gICAgICBpZiAodHlwZW9mIGZvbnQuZW5jb2RpbmcgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBvdXQoXCIvRW5jb2RpbmcgL1wiICsgZm9udC5lbmNvZGluZyk7XHJcbiAgICAgIH1cclxuICAgICAgb3V0KFwiL0ZpcnN0Q2hhciAzMlwiKTtcclxuICAgICAgb3V0KFwiL0xhc3RDaGFyIDI1NVwiKTtcclxuICAgICAgb3V0KFwiPj5cIik7XHJcbiAgICAgIG91dChcImVuZG9ialwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcHV0Rm9udHMgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAodmFyIGZvbnRLZXkgaW4gZm9udHMpIHtcclxuICAgICAgaWYgKGZvbnRzLmhhc093blByb3BlcnR5KGZvbnRLZXkpKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgcHV0T25seVVzZWRGb250cyA9PT0gZmFsc2UgfHxcclxuICAgICAgICAgIChwdXRPbmx5VXNlZEZvbnRzID09PSB0cnVlICYmIHVzZWRGb250cy5oYXNPd25Qcm9wZXJ0eShmb250S2V5KSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHB1dEZvbnQoZm9udHNbZm9udEtleV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBwdXRYT2JqZWN0ID0gZnVuY3Rpb24oeE9iamVjdCkge1xyXG4gICAgeE9iamVjdC5vYmplY3ROdW1iZXIgPSBuZXdPYmplY3QoKTtcclxuXHJcbiAgICB2YXIgb3B0aW9ucyA9IFtdO1xyXG4gICAgb3B0aW9ucy5wdXNoKHsga2V5OiBcIlR5cGVcIiwgdmFsdWU6IFwiL1hPYmplY3RcIiB9KTtcclxuICAgIG9wdGlvbnMucHVzaCh7IGtleTogXCJTdWJ0eXBlXCIsIHZhbHVlOiBcIi9Gb3JtXCIgfSk7XHJcbiAgICBvcHRpb25zLnB1c2goe1xyXG4gICAgICBrZXk6IFwiQkJveFwiLFxyXG4gICAgICB2YWx1ZTpcclxuICAgICAgICBcIltcIiArXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgaHBmKHhPYmplY3QueCksXHJcbiAgICAgICAgICBocGYoeE9iamVjdC55KSxcclxuICAgICAgICAgIGhwZih4T2JqZWN0LnggKyB4T2JqZWN0LndpZHRoKSxcclxuICAgICAgICAgIGhwZih4T2JqZWN0LnkgKyB4T2JqZWN0LmhlaWdodClcclxuICAgICAgICBdLmpvaW4oXCIgXCIpICtcclxuICAgICAgICBcIl1cIlxyXG4gICAgfSk7XHJcbiAgICBvcHRpb25zLnB1c2goe1xyXG4gICAgICBrZXk6IFwiTWF0cml4XCIsXHJcbiAgICAgIHZhbHVlOiBcIltcIiArIHhPYmplY3QubWF0cml4LnRvU3RyaW5nKCkgKyBcIl1cIlxyXG4gICAgfSk7XHJcbiAgICAvLyBUT0RPOiAvUmVzb3VyY2VzXHJcblxyXG4gICAgdmFyIHN0cmVhbSA9IHhPYmplY3QucGFnZXNbMV0uam9pbihcIlxcblwiKTtcclxuICAgIHB1dFN0cmVhbSh7XHJcbiAgICAgIGRhdGE6IHN0cmVhbSxcclxuICAgICAgYWRkaXRpb25hbEtleVZhbHVlczogb3B0aW9ucyxcclxuICAgICAgb2JqZWN0SWQ6IHhPYmplY3Qub2JqZWN0TnVtYmVyXHJcbiAgICB9KTtcclxuICAgIG91dChcImVuZG9ialwiKTtcclxuICB9O1xyXG5cclxuICB2YXIgcHV0WE9iamVjdHMgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAodmFyIHhPYmplY3RLZXkgaW4gcmVuZGVyVGFyZ2V0cykge1xyXG4gICAgICBpZiAocmVuZGVyVGFyZ2V0cy5oYXNPd25Qcm9wZXJ0eSh4T2JqZWN0S2V5KSkge1xyXG4gICAgICAgIHB1dFhPYmplY3QocmVuZGVyVGFyZ2V0c1t4T2JqZWN0S2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgaW50ZXJwb2xhdGVBbmRFbmNvZGVSR0JTdHJlYW0gPSBmdW5jdGlvbihjb2xvcnMsIG51bWJlclNhbXBsZXMpIHtcclxuICAgIHZhciB0VmFsdWVzID0gW107XHJcbiAgICB2YXIgdDtcclxuICAgIHZhciBkVCA9IDEuMCAvIChudW1iZXJTYW1wbGVzIC0gMSk7XHJcbiAgICBmb3IgKHQgPSAwLjA7IHQgPCAxLjA7IHQgKz0gZFQpIHtcclxuICAgICAgdFZhbHVlcy5wdXNoKHQpO1xyXG4gICAgfVxyXG4gICAgdFZhbHVlcy5wdXNoKDEuMCk7XHJcbiAgICAvLyBhZGQgZmlyc3QgYW5kIGxhc3QgY29udHJvbCBwb2ludCBpZiBub3QgcHJlc2VudFxyXG4gICAgaWYgKGNvbG9yc1swXS5vZmZzZXQgIT0gMC4wKSB7XHJcbiAgICAgIHZhciBjMCA9IHtcclxuICAgICAgICBvZmZzZXQ6IDAuMCxcclxuICAgICAgICBjb2xvcjogY29sb3JzWzBdLmNvbG9yXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbG9ycy51bnNoaWZ0KGMwKTtcclxuICAgIH1cclxuICAgIGlmIChjb2xvcnNbY29sb3JzLmxlbmd0aCAtIDFdLm9mZnNldCAhPSAxLjApIHtcclxuICAgICAgdmFyIGMxID0ge1xyXG4gICAgICAgIG9mZnNldDogMS4wLFxyXG4gICAgICAgIGNvbG9yOiBjb2xvcnNbY29sb3JzLmxlbmd0aCAtIDFdLmNvbG9yXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbG9ycy5wdXNoKGMxKTtcclxuICAgIH1cclxuICAgIHZhciBvdXQgPSBcIlwiO1xyXG4gICAgdmFyIGluZGV4ID0gMDtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRWYWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdCA9IHRWYWx1ZXNbaV07XHJcbiAgICAgIHdoaWxlICh0ID4gY29sb3JzW2luZGV4ICsgMV0ub2Zmc2V0KSBpbmRleCsrO1xyXG4gICAgICB2YXIgYSA9IGNvbG9yc1tpbmRleF0ub2Zmc2V0O1xyXG4gICAgICB2YXIgYiA9IGNvbG9yc1tpbmRleCArIDFdLm9mZnNldDtcclxuICAgICAgdmFyIGQgPSAodCAtIGEpIC8gKGIgLSBhKTtcclxuXHJcbiAgICAgIHZhciBhQ29sb3IgPSBjb2xvcnNbaW5kZXhdLmNvbG9yO1xyXG4gICAgICB2YXIgYkNvbG9yID0gY29sb3JzW2luZGV4ICsgMV0uY29sb3I7XHJcblxyXG4gICAgICBvdXQgKz1cclxuICAgICAgICBwYWRkMkhleChNYXRoLnJvdW5kKCgxIC0gZCkgKiBhQ29sb3JbMF0gKyBkICogYkNvbG9yWzBdKS50b1N0cmluZygxNikpICtcclxuICAgICAgICBwYWRkMkhleChNYXRoLnJvdW5kKCgxIC0gZCkgKiBhQ29sb3JbMV0gKyBkICogYkNvbG9yWzFdKS50b1N0cmluZygxNikpICtcclxuICAgICAgICBwYWRkMkhleChNYXRoLnJvdW5kKCgxIC0gZCkgKiBhQ29sb3JbMl0gKyBkICogYkNvbG9yWzJdKS50b1N0cmluZygxNikpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC50cmltKCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHB1dFNoYWRpbmdQYXR0ZXJuID0gZnVuY3Rpb24ocGF0dGVybiwgbnVtYmVyU2FtcGxlcykge1xyXG4gICAgLypcclxuICAgICAgIEF4aWFsIHBhdHRlcm5zIHNoYWRlIGJldHdlZW4gdGhlIHR3byBwb2ludHMgc3BlY2lmaWVkIGluIGNvb3JkcywgcmFkaWFsIHBhdHRlcm5zIGJldHdlZW4gdGhlIGlubmVyXHJcbiAgICAgICBhbmQgb3V0ZXIgY2lyY2xlLlxyXG4gICAgICAgVGhlIHVzZXIgY2FuIHNwZWNpZnkgYW4gYXJyYXkgKGNvbG9ycykgdGhhdCBtYXBzIHQtVmFsdWVzIGluIFswLCAxXSB0byBSR0IgY29sb3JzLiBUaGVzZSBhcmUgbm93XHJcbiAgICAgICBpbnRlcnBvbGF0ZWQgdG8gZXF1aWRpc3RhbnQgc2FtcGxlcyBhbmQgd3JpdHRlbiB0byBwZGYgYXMgYSBzYW1wbGUgKHR5cGUgMCkgZnVuY3Rpb24uXHJcbiAgICAgICAqL1xyXG4gICAgLy8gVGhlIG51bWJlciBvZiBjb2xvciBzYW1wbGVzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZGVzY3JpYmUgdGhlIHNoYWRpbmcuXHJcbiAgICAvLyBUaGUgaGlnaGVyLCB0aGUgbW9yZSBhY2N1cmF0ZSB0aGUgZ3JhZGllbnQgd2lsbCBiZS5cclxuICAgIG51bWJlclNhbXBsZXMgfHwgKG51bWJlclNhbXBsZXMgPSAyMSk7XHJcbiAgICB2YXIgZnVuY09iamVjdE51bWJlciA9IG5ld09iamVjdCgpO1xyXG4gICAgdmFyIHN0cmVhbSA9IGludGVycG9sYXRlQW5kRW5jb2RlUkdCU3RyZWFtKHBhdHRlcm4uY29sb3JzLCBudW1iZXJTYW1wbGVzKTtcclxuXHJcbiAgICB2YXIgb3B0aW9ucyA9IFtdO1xyXG4gICAgb3B0aW9ucy5wdXNoKHsga2V5OiBcIkZ1bmN0aW9uVHlwZVwiLCB2YWx1ZTogXCIwXCIgfSk7XHJcbiAgICBvcHRpb25zLnB1c2goeyBrZXk6IFwiRG9tYWluXCIsIHZhbHVlOiBcIlswLjAgMS4wXVwiIH0pO1xyXG4gICAgb3B0aW9ucy5wdXNoKHsga2V5OiBcIlNpemVcIiwgdmFsdWU6IFwiW1wiICsgbnVtYmVyU2FtcGxlcyArIFwiXVwiIH0pO1xyXG4gICAgb3B0aW9ucy5wdXNoKHsga2V5OiBcIkJpdHNQZXJTYW1wbGVcIiwgdmFsdWU6IFwiOFwiIH0pO1xyXG4gICAgb3B0aW9ucy5wdXNoKHsga2V5OiBcIlJhbmdlXCIsIHZhbHVlOiBcIlswLjAgMS4wIDAuMCAxLjAgMC4wIDEuMF1cIiB9KTtcclxuICAgIG9wdGlvbnMucHVzaCh7IGtleTogXCJEZWNvZGVcIiwgdmFsdWU6IFwiWzAuMCAxLjAgMC4wIDEuMCAwLjAgMS4wXVwiIH0pO1xyXG5cclxuICAgIHB1dFN0cmVhbSh7XHJcbiAgICAgIGRhdGE6IHN0cmVhbSxcclxuICAgICAgYWRkaXRpb25hbEtleVZhbHVlczogb3B0aW9ucyxcclxuICAgICAgYWxyZWFkeUFwcGxpZWRGaWx0ZXJzOiBbXCIvQVNDSUlIZXhEZWNvZGVcIl0sXHJcbiAgICAgIG9iamVjdElkOiBmdW5jT2JqZWN0TnVtYmVyXHJcbiAgICB9KTtcclxuICAgIG91dChcImVuZG9ialwiKTtcclxuXHJcbiAgICBwYXR0ZXJuLm9iamVjdE51bWJlciA9IG5ld09iamVjdCgpO1xyXG4gICAgb3V0KFwiPDwgL1NoYWRpbmdUeXBlIFwiICsgcGF0dGVybi50eXBlKTtcclxuICAgIG91dChcIi9Db2xvclNwYWNlIC9EZXZpY2VSR0JcIik7XHJcbiAgICB2YXIgY29vcmRzID1cclxuICAgICAgXCIvQ29vcmRzIFtcIiArXHJcbiAgICAgIGhwZihwYXJzZUZsb2F0KHBhdHRlcm4uY29vcmRzWzBdKSkgK1xyXG4gICAgICBcIiBcIiArIC8vIHgxXHJcbiAgICAgIGhwZihwYXJzZUZsb2F0KHBhdHRlcm4uY29vcmRzWzFdKSkgK1xyXG4gICAgICBcIiBcIjsgLy8geTFcclxuICAgIGlmIChwYXR0ZXJuLnR5cGUgPT09IDIpIHtcclxuICAgICAgLy8gYXhpYWxcclxuICAgICAgY29vcmRzICs9XHJcbiAgICAgICAgaHBmKHBhcnNlRmxvYXQocGF0dGVybi5jb29yZHNbMl0pKSArXHJcbiAgICAgICAgXCIgXCIgKyAvLyB4MlxyXG4gICAgICAgIGhwZihwYXJzZUZsb2F0KHBhdHRlcm4uY29vcmRzWzNdKSk7IC8vIHkyXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyByYWRpYWxcclxuICAgICAgY29vcmRzICs9XHJcbiAgICAgICAgaHBmKHBhcnNlRmxvYXQocGF0dGVybi5jb29yZHNbMl0pKSArXHJcbiAgICAgICAgXCIgXCIgKyAvLyByMVxyXG4gICAgICAgIGhwZihwYXJzZUZsb2F0KHBhdHRlcm4uY29vcmRzWzNdKSkgK1xyXG4gICAgICAgIFwiIFwiICsgLy8geDJcclxuICAgICAgICBocGYocGFyc2VGbG9hdChwYXR0ZXJuLmNvb3Jkc1s0XSkpICtcclxuICAgICAgICBcIiBcIiArIC8vIHkyXHJcbiAgICAgICAgaHBmKHBhcnNlRmxvYXQocGF0dGVybi5jb29yZHNbNV0pKTsgLy8gcjJcclxuICAgIH1cclxuICAgIGNvb3JkcyArPSBcIl1cIjtcclxuICAgIG91dChjb29yZHMpO1xyXG5cclxuICAgIGlmIChwYXR0ZXJuLm1hdHJpeCkge1xyXG4gICAgICBvdXQoXCIvTWF0cml4IFtcIiArIHBhdHRlcm4ubWF0cml4LnRvU3RyaW5nKCkgKyBcIl1cIik7XHJcbiAgICB9XHJcbiAgICBvdXQoXCIvRnVuY3Rpb24gXCIgKyBmdW5jT2JqZWN0TnVtYmVyICsgXCIgMCBSXCIpO1xyXG4gICAgb3V0KFwiL0V4dGVuZCBbdHJ1ZSB0cnVlXVwiKTtcclxuICAgIG91dChcIj4+XCIpO1xyXG4gICAgb3V0KFwiZW5kb2JqXCIpO1xyXG4gIH07XHJcblxyXG4gIHZhciBwdXRUaWxpbmdQYXR0ZXJuID0gZnVuY3Rpb24ocGF0dGVybiwgZGVmZXJyZWRSZXNvdXJjZURpY3Rpb25hcnlJZHMpIHtcclxuICAgIHZhciByZXNvdXJjZXNPYmplY3RJZCA9IG5ld09iamVjdERlZmVycmVkKCk7XHJcbiAgICB2YXIgcGF0dGVybk9iamVjdElkID0gbmV3T2JqZWN0KCk7XHJcblxyXG4gICAgZGVmZXJyZWRSZXNvdXJjZURpY3Rpb25hcnlJZHMucHVzaCh7XHJcbiAgICAgIHJlc291cmNlc09pZDogcmVzb3VyY2VzT2JqZWN0SWQsXHJcbiAgICAgIG9iamVjdE9pZDogcGF0dGVybk9iamVjdElkXHJcbiAgICB9KTtcclxuXHJcbiAgICBwYXR0ZXJuLm9iamVjdE51bWJlciA9IHBhdHRlcm5PYmplY3RJZDtcclxuICAgIHZhciBvcHRpb25zID0gW107XHJcbiAgICBvcHRpb25zLnB1c2goeyBrZXk6IFwiVHlwZVwiLCB2YWx1ZTogXCIvUGF0dGVyblwiIH0pO1xyXG4gICAgb3B0aW9ucy5wdXNoKHsga2V5OiBcIlBhdHRlcm5UeXBlXCIsIHZhbHVlOiBcIjFcIiB9KTsgLy8gdGlsaW5nIHBhdHRlcm5cclxuICAgIG9wdGlvbnMucHVzaCh7IGtleTogXCJQYWludFR5cGVcIiwgdmFsdWU6IFwiMVwiIH0pOyAvLyBjb2xvcmVkIHRpbGluZyBwYXR0ZXJuXHJcbiAgICBvcHRpb25zLnB1c2goeyBrZXk6IFwiVGlsaW5nVHlwZVwiLCB2YWx1ZTogXCIxXCIgfSk7IC8vIGNvbnN0YW50IHNwYWNpbmdcclxuICAgIG9wdGlvbnMucHVzaCh7XHJcbiAgICAgIGtleTogXCJCQm94XCIsXHJcbiAgICAgIHZhbHVlOiBcIltcIiArIHBhdHRlcm4uYm91bmRpbmdCb3gubWFwKGhwZikuam9pbihcIiBcIikgKyBcIl1cIlxyXG4gICAgfSk7XHJcbiAgICBvcHRpb25zLnB1c2goeyBrZXk6IFwiWFN0ZXBcIiwgdmFsdWU6IGhwZihwYXR0ZXJuLnhTdGVwKSB9KTtcclxuICAgIG9wdGlvbnMucHVzaCh7IGtleTogXCJZU3RlcFwiLCB2YWx1ZTogaHBmKHBhdHRlcm4ueVN0ZXApIH0pO1xyXG4gICAgb3B0aW9ucy5wdXNoKHsga2V5OiBcIlJlc291cmNlc1wiLCB2YWx1ZTogcmVzb3VyY2VzT2JqZWN0SWQgKyBcIiAwIFJcIiB9KTtcclxuICAgIGlmIChwYXR0ZXJuLm1hdHJpeCkge1xyXG4gICAgICBvcHRpb25zLnB1c2goe1xyXG4gICAgICAgIGtleTogXCJNYXRyaXhcIixcclxuICAgICAgICB2YWx1ZTogXCJbXCIgKyBwYXR0ZXJuLm1hdHJpeC50b1N0cmluZygpICsgXCJdXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHV0U3RyZWFtKHtcclxuICAgICAgZGF0YTogcGF0dGVybi5zdHJlYW0sXHJcbiAgICAgIGFkZGl0aW9uYWxLZXlWYWx1ZXM6IG9wdGlvbnMsXHJcbiAgICAgIG9iamVjdElkOiBwYXR0ZXJuLm9iamVjdE51bWJlclxyXG4gICAgfSk7XHJcbiAgICBvdXQoXCJlbmRvYmpcIik7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHB1dFBhdHRlcm5zID0gZnVuY3Rpb24oZGVmZXJyZWRSZXNvdXJjZURpY3Rpb25hcnlJZHMpIHtcclxuICAgIHZhciBwYXR0ZXJuS2V5O1xyXG4gICAgZm9yIChwYXR0ZXJuS2V5IGluIHBhdHRlcm5zKSB7XHJcbiAgICAgIGlmIChwYXR0ZXJucy5oYXNPd25Qcm9wZXJ0eShwYXR0ZXJuS2V5KSkge1xyXG4gICAgICAgIGlmIChwYXR0ZXJuc1twYXR0ZXJuS2V5XSBpbnN0YW5jZW9mIFNoYWRpbmdQYXR0ZXJuKSB7XHJcbiAgICAgICAgICBwdXRTaGFkaW5nUGF0dGVybihwYXR0ZXJuc1twYXR0ZXJuS2V5XSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuc1twYXR0ZXJuS2V5XSBpbnN0YW5jZW9mIFRpbGluZ1BhdHRlcm4pIHtcclxuICAgICAgICAgIHB1dFRpbGluZ1BhdHRlcm4ocGF0dGVybnNbcGF0dGVybktleV0sIGRlZmVycmVkUmVzb3VyY2VEaWN0aW9uYXJ5SWRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcHV0R1N0YXRlID0gZnVuY3Rpb24oZ1N0YXRlKSB7XHJcbiAgICBnU3RhdGUub2JqZWN0TnVtYmVyID0gbmV3T2JqZWN0KCk7XHJcbiAgICBvdXQoXCI8PFwiKTtcclxuICAgIGZvciAodmFyIHAgaW4gZ1N0YXRlKSB7XHJcbiAgICAgIHN3aXRjaCAocCkge1xyXG4gICAgICAgIGNhc2UgXCJvcGFjaXR5XCI6XHJcbiAgICAgICAgICBvdXQoXCIvY2EgXCIgKyBmMihnU3RhdGVbcF0pKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJzdHJva2Utb3BhY2l0eVwiOlxyXG4gICAgICAgICAgb3V0KFwiL0NBIFwiICsgZjIoZ1N0YXRlW3BdKSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgb3V0KFwiPj5cIik7XHJcbiAgICBvdXQoXCJlbmRvYmpcIik7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHB1dEdTdGF0ZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBnU3RhdGVLZXk7XHJcbiAgICBmb3IgKGdTdGF0ZUtleSBpbiBnU3RhdGVzKSB7XHJcbiAgICAgIGlmIChnU3RhdGVzLmhhc093blByb3BlcnR5KGdTdGF0ZUtleSkpIHtcclxuICAgICAgICBwdXRHU3RhdGUoZ1N0YXRlc1tnU3RhdGVLZXldKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBwdXRYb2JqZWN0RGljdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgb3V0KFwiL1hPYmplY3QgPDxcIik7XHJcbiAgICBmb3IgKHZhciB4T2JqZWN0S2V5IGluIHJlbmRlclRhcmdldHMpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHJlbmRlclRhcmdldHMuaGFzT3duUHJvcGVydHkoeE9iamVjdEtleSkgJiZcclxuICAgICAgICByZW5kZXJUYXJnZXRzW3hPYmplY3RLZXldLm9iamVjdE51bWJlciA+PSAwXHJcbiAgICAgICkge1xyXG4gICAgICAgIG91dChcclxuICAgICAgICAgIFwiL1wiICtcclxuICAgICAgICAgICAgeE9iamVjdEtleSArXHJcbiAgICAgICAgICAgIFwiIFwiICtcclxuICAgICAgICAgICAgcmVuZGVyVGFyZ2V0c1t4T2JqZWN0S2V5XS5vYmplY3ROdW1iZXIgK1xyXG4gICAgICAgICAgICBcIiAwIFJcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggaW1hZ2VzLCBvciBvdGhlciBkYXRhIG9iamVjdHNcclxuICAgIGV2ZW50cy5wdWJsaXNoKFwicHV0WG9iamVjdERpY3RcIik7XHJcbiAgICBvdXQoXCI+PlwiKTtcclxuICB9O1xyXG5cclxuICB2YXIgcHV0RW5jcnlwdGlvbkRpY3QgPSBmdW5jdGlvbigpIHtcclxuICAgIGVuY3J5cHRpb24ub2lkID0gbmV3T2JqZWN0KCk7XHJcbiAgICBvdXQoXCI8PFwiKTtcclxuICAgIG91dChcIi9GaWx0ZXIgL1N0YW5kYXJkXCIpO1xyXG4gICAgb3V0KFwiL1YgXCIgKyBlbmNyeXB0aW9uLnYpO1xyXG4gICAgb3V0KFwiL1IgXCIgKyBlbmNyeXB0aW9uLnIpO1xyXG4gICAgb3V0KFwiL1UgPFwiICsgZW5jcnlwdGlvbi50b0hleFN0cmluZyhlbmNyeXB0aW9uLlUpICsgXCI+XCIpO1xyXG4gICAgb3V0KFwiL08gPFwiICsgZW5jcnlwdGlvbi50b0hleFN0cmluZyhlbmNyeXB0aW9uLk8pICsgXCI+XCIpO1xyXG4gICAgb3V0KFwiL1AgXCIgKyBlbmNyeXB0aW9uLlApO1xyXG4gICAgb3V0KFwiPj5cIik7XHJcbiAgICBvdXQoXCJlbmRvYmpcIik7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHB1dEZvbnREaWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBvdXQoXCIvRm9udCA8PFwiKTtcclxuXHJcbiAgICBmb3IgKHZhciBmb250S2V5IGluIGZvbnRzKSB7XHJcbiAgICAgIGlmIChmb250cy5oYXNPd25Qcm9wZXJ0eShmb250S2V5KSkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHB1dE9ubHlVc2VkRm9udHMgPT09IGZhbHNlIHx8XHJcbiAgICAgICAgICAocHV0T25seVVzZWRGb250cyA9PT0gdHJ1ZSAmJiB1c2VkRm9udHMuaGFzT3duUHJvcGVydHkoZm9udEtleSkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBvdXQoXCIvXCIgKyBmb250S2V5ICsgXCIgXCIgKyBmb250c1tmb250S2V5XS5vYmplY3ROdW1iZXIgKyBcIiAwIFJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBvdXQoXCI+PlwiKTtcclxuICB9O1xyXG5cclxuICB2YXIgcHV0U2hhZGluZ1BhdHRlcm5EaWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoT2JqZWN0LmtleXMocGF0dGVybnMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgb3V0KFwiL1NoYWRpbmcgPDxcIik7XHJcbiAgICAgIGZvciAodmFyIHBhdHRlcm5LZXkgaW4gcGF0dGVybnMpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBwYXR0ZXJucy5oYXNPd25Qcm9wZXJ0eShwYXR0ZXJuS2V5KSAmJlxyXG4gICAgICAgICAgcGF0dGVybnNbcGF0dGVybktleV0gaW5zdGFuY2VvZiBTaGFkaW5nUGF0dGVybiAmJlxyXG4gICAgICAgICAgcGF0dGVybnNbcGF0dGVybktleV0ub2JqZWN0TnVtYmVyID49IDBcclxuICAgICAgICApIHtcclxuICAgICAgICAgIG91dChcclxuICAgICAgICAgICAgXCIvXCIgKyBwYXR0ZXJuS2V5ICsgXCIgXCIgKyBwYXR0ZXJuc1twYXR0ZXJuS2V5XS5vYmplY3ROdW1iZXIgKyBcIiAwIFJcIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGV2ZW50cy5wdWJsaXNoKFwicHV0U2hhZGluZ1BhdHRlcm5EaWN0XCIpO1xyXG4gICAgICBvdXQoXCI+PlwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcHV0VGlsaW5nUGF0dGVybkRpY3QgPSBmdW5jdGlvbihvYmplY3RPaWQpIHtcclxuICAgIGlmIChPYmplY3Qua2V5cyhwYXR0ZXJucykubGVuZ3RoID4gMCkge1xyXG4gICAgICBvdXQoXCIvUGF0dGVybiA8PFwiKTtcclxuICAgICAgZm9yICh2YXIgcGF0dGVybktleSBpbiBwYXR0ZXJucykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHBhdHRlcm5zLmhhc093blByb3BlcnR5KHBhdHRlcm5LZXkpICYmXHJcbiAgICAgICAgICBwYXR0ZXJuc1twYXR0ZXJuS2V5XSBpbnN0YW5jZW9mIEFQSS5UaWxpbmdQYXR0ZXJuICYmXHJcbiAgICAgICAgICBwYXR0ZXJuc1twYXR0ZXJuS2V5XS5vYmplY3ROdW1iZXIgPj0gMCAmJlxyXG4gICAgICAgICAgcGF0dGVybnNbcGF0dGVybktleV0ub2JqZWN0TnVtYmVyIDwgb2JqZWN0T2lkIC8vIHByZXZlbnQgY3ljbGljIGRlcGVuZGVuY2llc1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgb3V0KFxyXG4gICAgICAgICAgICBcIi9cIiArIHBhdHRlcm5LZXkgKyBcIiBcIiArIHBhdHRlcm5zW3BhdHRlcm5LZXldLm9iamVjdE51bWJlciArIFwiIDAgUlwiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBldmVudHMucHVibGlzaChcInB1dFRpbGluZ1BhdHRlcm5EaWN0XCIpO1xyXG4gICAgICBvdXQoXCI+PlwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcHV0R1N0YXRlc0RpY3QgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmIChPYmplY3Qua2V5cyhnU3RhdGVzKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHZhciBnU3RhdGVLZXk7XHJcbiAgICAgIG91dChcIi9FeHRHU3RhdGUgPDxcIik7XHJcbiAgICAgIGZvciAoZ1N0YXRlS2V5IGluIGdTdGF0ZXMpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBnU3RhdGVzLmhhc093blByb3BlcnR5KGdTdGF0ZUtleSkgJiZcclxuICAgICAgICAgIGdTdGF0ZXNbZ1N0YXRlS2V5XS5vYmplY3ROdW1iZXIgPj0gMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgb3V0KFwiL1wiICsgZ1N0YXRlS2V5ICsgXCIgXCIgKyBnU3RhdGVzW2dTdGF0ZUtleV0ub2JqZWN0TnVtYmVyICsgXCIgMCBSXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZXZlbnRzLnB1Ymxpc2goXCJwdXRHU3RhdGVEaWN0XCIpO1xyXG4gICAgICBvdXQoXCI+PlwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcHV0UmVzb3VyY2VEaWN0aW9uYXJ5ID0gZnVuY3Rpb24ob2JqZWN0SWRzKSB7XHJcbiAgICBuZXdPYmplY3REZWZlcnJlZEJlZ2luKG9iamVjdElkcy5yZXNvdXJjZXNPaWQsIHRydWUpO1xyXG4gICAgb3V0KFwiPDxcIik7XHJcbiAgICBvdXQoXCIvUHJvY1NldCBbL1BERiAvVGV4dCAvSW1hZ2VCIC9JbWFnZUMgL0ltYWdlSV1cIik7XHJcbiAgICBwdXRGb250RGljdCgpO1xyXG4gICAgcHV0U2hhZGluZ1BhdHRlcm5EaWN0KCk7XHJcbiAgICBwdXRUaWxpbmdQYXR0ZXJuRGljdChvYmplY3RJZHMub2JqZWN0T2lkKTtcclxuICAgIHB1dEdTdGF0ZXNEaWN0KCk7XHJcbiAgICBwdXRYb2JqZWN0RGljdCgpO1xyXG4gICAgb3V0KFwiPj5cIik7XHJcbiAgICBvdXQoXCJlbmRvYmpcIik7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHB1dFJlc291cmNlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gRm9ybU9iamVjdHMsIFBhdHRlcm5zIGV0Yy4gbWlnaHQgdXNlIG90aGVyIEZvcm1PYmplY3RzL1BhdHRlcm5zL0ltYWdlc1xyXG4gICAgLy8gd2hpY2ggbWVhbnMgdGhlaXIgcmVzb3VyY2UgZGljdGlvbmFyaWVzIG11c3QgY29udGFpbiB0aGUgYWxyZWFkeSByZXNvbHZlZFxyXG4gICAgLy8gb2JqZWN0IGlkcy4gRm9yIHRoaXMgcmVhc29uIHdlIGRlZmVyIHRoZSBzZXJpYWxpemF0aW9uIG9mIHRoZSByZXNvdXJjZVxyXG4gICAgLy8gZGljdHMgdW50aWwgYWxsIG9iamVjdHMgaGF2ZSBiZWVuIHNlcmlhbGl6ZWQgYW5kIGhhdmUgb2JqZWN0IGlkcy5cclxuICAgIC8vXHJcbiAgICAvLyBJbiBvcmRlciB0byBwcmV2ZW50IGN5Y2xpYyBkZXBlbmRlbmNpZXMgKHdoaWNoIEFkb2JlIFJlYWRlciBkb2Vzbid0IGxpa2UpLFxyXG4gICAgLy8gd2Ugb25seSBwdXQgYWxsIG9pZHMgdGhhdCBhcmUgc21hbGxlciB0aGFuIHRoZSBvaWQgb2YgdGhlIG9iamVjdCB0aGVcclxuICAgIC8vIHJlc291cmNlIGRpY3QgYmVsb25ncyB0by4gVGhpcyBpcyBjb3JyZWN0IGJlaGF2aW9yLCBzaW5jZSB0aGUgc3RyZWFtc1xyXG4gICAgLy8gbWF5IG9ubHkgdXNlIG90aGVyIG9iamVjdHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFuZCB0aHVzIGFwcGVhclxyXG4gICAgLy8gZWFybGllciBpbiB0aGVpciByZXNwZWN0aXZlIGNvbGxlY3Rpb24uXHJcbiAgICAvLyBDdXJyZW50bHksIHRoaXMgb25seSBhZmZlY3RzIHRpbGluZyBwYXR0ZXJucywgYnV0IGEgKG1vcmUpIGNvcnJlY3RcclxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9mIEZvcm1PYmplY3RzIHdvdWxkIGFsc28gZGVmaW5lIHRoZWlyIG93biByZXNvdXJjZSBkaWN0cy5cclxuICAgIHZhciBkZWZlcnJlZFJlc291cmNlRGljdGlvbmFyeUlkcyA9IFtdO1xyXG5cclxuICAgIHB1dEZvbnRzKCk7XHJcbiAgICBwdXRHU3RhdGVzKCk7XHJcbiAgICBwdXRYT2JqZWN0cygpO1xyXG4gICAgcHV0UGF0dGVybnMoZGVmZXJyZWRSZXNvdXJjZURpY3Rpb25hcnlJZHMpO1xyXG5cclxuICAgIGV2ZW50cy5wdWJsaXNoKFwicHV0UmVzb3VyY2VzXCIpO1xyXG4gICAgZGVmZXJyZWRSZXNvdXJjZURpY3Rpb25hcnlJZHMuZm9yRWFjaChwdXRSZXNvdXJjZURpY3Rpb25hcnkpO1xyXG4gICAgcHV0UmVzb3VyY2VEaWN0aW9uYXJ5KHtcclxuICAgICAgcmVzb3VyY2VzT2lkOiByZXNvdXJjZURpY3Rpb25hcnlPYmpJZCxcclxuICAgICAgb2JqZWN0T2lkOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAvLyBvdXRwdXQgYWxsIG9iamVjdHNcclxuICAgIH0pO1xyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJwb3N0UHV0UmVzb3VyY2VzXCIpO1xyXG4gIH07XHJcblxyXG4gIHZhciBwdXRBZGRpdGlvbmFsT2JqZWN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJwdXRBZGRpdGlvbmFsT2JqZWN0c1wiKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWRkaXRpb25hbE9iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIG9iaiA9IGFkZGl0aW9uYWxPYmplY3RzW2ldO1xyXG4gICAgICBuZXdPYmplY3REZWZlcnJlZEJlZ2luKG9iai5vYmpJZCwgdHJ1ZSk7XHJcbiAgICAgIG91dChvYmouY29udGVudCk7XHJcbiAgICAgIG91dChcImVuZG9ialwiKTtcclxuICAgIH1cclxuICAgIGV2ZW50cy5wdWJsaXNoKFwicG9zdFB1dEFkZGl0aW9uYWxPYmplY3RzXCIpO1xyXG4gIH07XHJcblxyXG4gIHZhciBhZGRGb250VG9Gb250RGljdGlvbmFyeSA9IGZ1bmN0aW9uKGZvbnQpIHtcclxuICAgIGZvbnRtYXBbZm9udC5mb250TmFtZV0gPSBmb250bWFwW2ZvbnQuZm9udE5hbWVdIHx8IHt9O1xyXG4gICAgZm9udG1hcFtmb250LmZvbnROYW1lXVtmb250LmZvbnRTdHlsZV0gPSBmb250LmlkO1xyXG4gIH07XHJcblxyXG4gIHZhciBhZGRGb250ID0gZnVuY3Rpb24oXHJcbiAgICBwb3N0U2NyaXB0TmFtZSxcclxuICAgIGZvbnROYW1lLFxyXG4gICAgZm9udFN0eWxlLFxyXG4gICAgZW5jb2RpbmcsXHJcbiAgICBpc1N0YW5kYXJkRm9udFxyXG4gICkge1xyXG4gICAgdmFyIGZvbnQgPSB7XHJcbiAgICAgIGlkOiBcIkZcIiArIChPYmplY3Qua2V5cyhmb250cykubGVuZ3RoICsgMSkudG9TdHJpbmcoMTApLFxyXG4gICAgICBwb3N0U2NyaXB0TmFtZTogcG9zdFNjcmlwdE5hbWUsXHJcbiAgICAgIGZvbnROYW1lOiBmb250TmFtZSxcclxuICAgICAgZm9udFN0eWxlOiBmb250U3R5bGUsXHJcbiAgICAgIGVuY29kaW5nOiBlbmNvZGluZyxcclxuICAgICAgaXNTdGFuZGFyZEZvbnQ6IGlzU3RhbmRhcmRGb250IHx8IGZhbHNlLFxyXG4gICAgICBtZXRhZGF0YToge31cclxuICAgIH07XHJcblxyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJhZGRGb250XCIsIHtcclxuICAgICAgZm9udDogZm9udCxcclxuICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgIH0pO1xyXG5cclxuICAgIGZvbnRzW2ZvbnQuaWRdID0gZm9udDtcclxuICAgIGFkZEZvbnRUb0ZvbnREaWN0aW9uYXJ5KGZvbnQpO1xyXG4gICAgcmV0dXJuIGZvbnQuaWQ7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGFkZEZvbnRzID0gZnVuY3Rpb24oYXJyYXlPZkZvbnRzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YW5kYXJkRm9udHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIHZhciBmb250S2V5ID0gYWRkRm9udC5jYWxsKFxyXG4gICAgICAgIHRoaXMsXHJcbiAgICAgICAgYXJyYXlPZkZvbnRzW2ldWzBdLFxyXG4gICAgICAgIGFycmF5T2ZGb250c1tpXVsxXSxcclxuICAgICAgICBhcnJheU9mRm9udHNbaV1bMl0sXHJcbiAgICAgICAgc3RhbmRhcmRGb250c1tpXVszXSxcclxuICAgICAgICB0cnVlXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAocHV0T25seVVzZWRGb250cyA9PT0gZmFsc2UpIHtcclxuICAgICAgICB1c2VkRm9udHNbZm9udEtleV0gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGFkZGluZyBhbGlhc2VzIGZvciBzdGFuZGFyZCBmb250cywgdGhpcyB0aW1lIG1hdGNoaW5nIHRoZSBjYXBpdGFsaXphdGlvblxyXG4gICAgICB2YXIgcGFydHMgPSBhcnJheU9mRm9udHNbaV1bMF0uc3BsaXQoXCItXCIpO1xyXG4gICAgICBhZGRGb250VG9Gb250RGljdGlvbmFyeSh7XHJcbiAgICAgICAgaWQ6IGZvbnRLZXksXHJcbiAgICAgICAgZm9udE5hbWU6IHBhcnRzWzBdLFxyXG4gICAgICAgIGZvbnRTdHlsZTogcGFydHNbMV0gfHwgXCJcIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGV2ZW50cy5wdWJsaXNoKFwiYWRkRm9udHNcIiwge1xyXG4gICAgICBmb250czogZm9udHMsXHJcbiAgICAgIGRpY3Rpb25hcnk6IGZvbnRtYXBcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBTQUZFID0gZnVuY3Rpb24gX19zYWZlQ2FsbChmbikge1xyXG4gICAgZm4uZm9vID0gZnVuY3Rpb24gX19zYWZlQ2FsbFdyYXBwZXIoKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB2YXIgc3RhY2sgPSBlLnN0YWNrIHx8IFwiXCI7XHJcbiAgICAgICAgaWYgKH5zdGFjay5pbmRleE9mKFwiIGF0IFwiKSkgc3RhY2sgPSBzdGFjay5zcGxpdChcIiBhdCBcIilbMV07XHJcbiAgICAgICAgdmFyIG0gPVxyXG4gICAgICAgICAgXCJFcnJvciBpbiBmdW5jdGlvbiBcIiArXHJcbiAgICAgICAgICBzdGFjay5zcGxpdChcIlxcblwiKVswXS5zcGxpdChcIjxcIilbMF0gK1xyXG4gICAgICAgICAgXCI6IFwiICtcclxuICAgICAgICAgIGUubWVzc2FnZTtcclxuICAgICAgICBpZiAoZ2xvYmFsT2JqZWN0LmNvbnNvbGUpIHtcclxuICAgICAgICAgIGdsb2JhbE9iamVjdC5jb25zb2xlLmVycm9yKG0sIGUpO1xyXG4gICAgICAgICAgaWYgKGdsb2JhbE9iamVjdC5hbGVydCkgYWxlcnQobSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBmbi5mb28uYmFyID0gZm47XHJcbiAgICByZXR1cm4gZm4uZm9vO1xyXG4gIH07XHJcblxyXG4gIHZhciB0bzhiaXRTdHJlYW0gPSBmdW5jdGlvbih0ZXh0LCBmbGFncykge1xyXG4gICAgLyoqXHJcbiAgICAgKiBQREYgMS4zIHNwZWM6XHJcbiAgICAgKiBcIkZvciB0ZXh0IHN0cmluZ3MgZW5jb2RlZCBpbiBVbmljb2RlLCB0aGUgZmlyc3QgdHdvIGJ5dGVzIG11c3QgYmUgMjU0IGZvbGxvd2VkIGJ5XHJcbiAgICAgKiAyNTUsIHJlcHJlc2VudGluZyB0aGUgVW5pY29kZSBieXRlIG9yZGVyIG1hcmtlciwgVStGRUZGLiAoVGhpcyBzZXF1ZW5jZSBjb25mbGljdHNcclxuICAgICAqIHdpdGggdGhlIFBERkRvY0VuY29kaW5nIGNoYXJhY3RlciBzZXF1ZW5jZSB0aG9ybiB5ZGllcmVzaXMsIHdoaWNoIGlzIHVubGlrZWx5XHJcbiAgICAgKiB0byBiZSBhIG1lYW5pbmdmdWwgYmVnaW5uaW5nIG9mIGEgd29yZCBvciBwaHJhc2UuKSBUaGUgcmVtYWluZGVyIG9mIHRoZVxyXG4gICAgICogc3RyaW5nIGNvbnNpc3RzIG9mIFVuaWNvZGUgY2hhcmFjdGVyIGNvZGVzLCBhY2NvcmRpbmcgdG8gdGhlIFVURi0xNiBlbmNvZGluZ1xyXG4gICAgICogc3BlY2lmaWVkIGluIHRoZSBVbmljb2RlIHN0YW5kYXJkLCB2ZXJzaW9uIDIuMC4gQ29tbW9ubHkgdXNlZCBVbmljb2RlIHZhbHVlc1xyXG4gICAgICogYXJlIHJlcHJlc2VudGVkIGFzIDIgYnl0ZXMgcGVyIGNoYXJhY3Rlciwgd2l0aCB0aGUgaGlnaC1vcmRlciBieXRlIGFwcGVhcmluZyBmaXJzdFxyXG4gICAgICogaW4gdGhlIHN0cmluZy5cIlxyXG4gICAgICpcclxuICAgICAqIEluIG90aGVyIHdvcmRzLCBpZiB0aGVyZSBhcmUgY2hhcnMgaW4gYSBzdHJpbmcgd2l0aCBjaGFyIGNvZGUgYWJvdmUgMjU1LCB3ZVxyXG4gICAgICogcmVjb2RlIHRoZSBzdHJpbmcgdG8gVUNTMiBCRSAtIHN0cmluZyBkb3VibGVzIGluIGxlbmd0aCBhbmQgQk9NIGlzIHByZXBlbmRlZC5cclxuICAgICAqXHJcbiAgICAgKiBIT1dFVkVSIVxyXG4gICAgICogQWN0dWFsICpjb250ZW50KiAoYm9keSkgdGV4dCAoYXMgb3Bwb3NlZCB0byBzdHJpbmdzIHVzZWQgaW4gZG9jdW1lbnQgcHJvcGVydGllcyBldGMpXHJcbiAgICAgKiBkb2VzIE5PVCBleHBlY3QgQk9NLiBUaGVyZSwgaXQgaXMgdHJlYXRlZCBhcyBhIGxpdGVyYWwgR0lEIChHbHlwaCBJRClcclxuICAgICAqXHJcbiAgICAgKiBCZWNhdXNlIG9mIEFkb2JlJ3MgZm9jdXMgb24gXCJ5b3Ugc3Vic2V0IHlvdXIgZm9udHMhXCIgeW91IGFyZSBub3Qgc3VwcG9zZWQgdG8gaGF2ZVxyXG4gICAgICogYSBmb250IHRoYXQgbWFwcyBkaXJlY3RseSBVbmljb2RlIChVQ1MyIC8gVVRGMTZCRSkgY29kZSB0byBmb250IEdJRCwgYnV0IHlvdSBjb3VsZFxyXG4gICAgICogZnVkZ2UgaXQgd2l0aCBcIklkZW50aXR5LUhcIiBlbmNvZGluZyBhbmQgY3VzdG9tIENJRHRvR0lEIG1hcCB0aGF0IG1pbWljcyBVbmljb2RlXHJcbiAgICAgKiBjb2RlIHBhZ2UuIFRoZXJlLCBob3dldmVyLCBhbGwgY2hhcmFjdGVycyBpbiB0aGUgc3RyZWFtIGFyZSB0cmVhdGVkIGFzIEdJRHMsXHJcbiAgICAgKiBpbmNsdWRpbmcgQk9NLCB3aGljaCBpcyB0aGUgcmVhc29uIHdlIG5lZWQgdG8gc2tpcCBCT00gaW4gY29udGVudCB0ZXh0IChpLmUuIHRoYXRcclxuICAgICAqIHRoYXQgaXMgdGllZCB0byBhIGZvbnQpLlxyXG4gICAgICpcclxuICAgICAqIFRvIHNpZ25hbCB0aGlzIFwic3BlY2lhbFwiIFBERkVzY2FwZSAvIHRvOGJpdFN0cmVhbSBoYW5kbGluZyBtb2RlLFxyXG4gICAgICogQVBJLnRleHQoKSBmdW5jdGlvbiBzZXRzICh1bmxlc3MgeW91IG92ZXJ3cml0ZSBpdCB3aXRoIG1hbnVhbCB2YWx1ZXNcclxuICAgICAqIGdpdmVuIHRvIEFQSS50ZXh0KC4uLCBmbGFncykgKVxyXG4gICAgICogZmxhZ3MuYXV0b2VuY29kZSA9IHRydWVcclxuICAgICAqIGZsYWdzLm5vQk9NID0gdHJ1ZVxyXG4gICAgICpcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgKiBgZmxhZ3NgIHByb3BlcnRpZXMgcmVsaWVkIHVwb246XHJcbiAgICAgKiAgIC5zb3VyY2VFbmNvZGluZyA9IHN0cmluZyB3aXRoIGVuY29kaW5nIGxhYmVsLlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICBcIlVuaWNvZGVcIiBieSBkZWZhdWx0LiA9IGVuY29kaW5nIG9mIHRoZSBpbmNvbWluZyB0ZXh0LlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICBwYXNzIHNvbWUgbm9uLWV4aXN0aW5nIGVuY29kaW5nIG5hbWVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgKGV4OiAnRG8gbm90IHRvdWNoIG15IHN0cmluZ3MhIEkga25vdyB3aGF0IEkgYW0gZG9pbmcuJylcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgdG8gbWFrZSBlbmNvZGluZyBjb2RlIHNraXAgdGhlIGVuY29kaW5nIHN0ZXAuXHJcbiAgICAgKiAgIC5vdXRwdXRFbmNvZGluZyA9IEVpdGhlciB2YWxpZCBQREYgZW5jb2RpbmcgbmFtZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAobXVzdCBiZSBzdXBwb3J0ZWQgYnkganNQREYgZm9udCBtZXRyaWNzLCBvdGhlcndpc2Ugbm8gZW5jb2RpbmcpXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIG9yIGEgSlMgb2JqZWN0LCB3aGVyZSBrZXkgPSBzb3VyY2VDaGFyQ29kZSwgdmFsdWUgPSBvdXRwdXRDaGFyQ29kZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICBtaXNzaW5nIGtleXMgd2lsbCBiZSB0cmVhdGVkIGFzOiBzb3VyY2VDaGFyQ29kZSA9PT0gb3V0cHV0Q2hhckNvZGVcclxuICAgICAqICAgLm5vQk9NXHJcbiAgICAgKiAgICAgICBTZWUgY29tbWVudCBoaWdoZXIgYWJvdmUgZm9yIGV4cGxhbmF0aW9uIGZvciB3aHkgdGhpcyBpcyBpbXBvcnRhbnRcclxuICAgICAqICAgLmF1dG9lbmNvZGVcclxuICAgICAqICAgICAgIFNlZSBjb21tZW50IGhpZ2hlciBhYm92ZSBmb3IgZXhwbGFuYXRpb24gZm9yIHdoeSB0aGlzIGlzIGltcG9ydGFudFxyXG4gICAgICovXHJcblxyXG4gICAgdmFyIGksXHJcbiAgICAgIGwsXHJcbiAgICAgIHNvdXJjZUVuY29kaW5nLFxyXG4gICAgICBlbmNvZGluZ0Jsb2NrLFxyXG4gICAgICBvdXRwdXRFbmNvZGluZyxcclxuICAgICAgbmV3dGV4dCxcclxuICAgICAgaXNVbmljb2RlLFxyXG4gICAgICBjaCxcclxuICAgICAgYmNoO1xyXG5cclxuICAgIGZsYWdzID0gZmxhZ3MgfHwge307XHJcbiAgICBzb3VyY2VFbmNvZGluZyA9IGZsYWdzLnNvdXJjZUVuY29kaW5nIHx8IFwiVW5pY29kZVwiO1xyXG4gICAgb3V0cHV0RW5jb2RpbmcgPSBmbGFncy5vdXRwdXRFbmNvZGluZztcclxuXHJcbiAgICAvLyBUaGlzICdlbmNvZGluZycgc2VjdGlvbiByZWxpZXMgb24gZm9udCBtZXRyaWNzIGZvcm1hdFxyXG4gICAgLy8gYXR0YWNoZWQgdG8gZm9udCBvYmplY3RzIGJ5LCBhbW9uZyBvdGhlcnMsXHJcbiAgICAvLyBcIldpbGxvdyBTeXN0ZW1zJyBzdGFuZGFyZF9mb250X21ldHJpY3MgcGx1Z2luXCJcclxuICAgIC8vIHNlZSBqc3BkZi5wbHVnaW4uc3RhbmRhcmRfZm9udF9tZXRyaWNzLmpzIGZvciBmb3JtYXRcclxuICAgIC8vIG9mIHRoZSBmb250Lm1ldGFkYXRhLmVuY29kaW5nIE9iamVjdC5cclxuICAgIC8vIEl0IHNob3VsZCBiZSBzb21ldGhpbmcgbGlrZVxyXG4gICAgLy8gICAuZW5jb2RpbmcgPSB7J2NvZGVQYWdlcyc6WydXaW5BTlNJLi4uLiddLCAnV2luQU5TSS4uLic6e2NvZGU6Y29kZSwgLi4ufX1cclxuICAgIC8vICAgLndpZHRocyA9IHswOndpZHRoLCBjb2RlOndpZHRoLCAuLi4sICdmb2YnOmRpdmlzb3J9XHJcbiAgICAvLyAgIC5rZXJuaW5nID0ge2NvZGU6e3ByZXZpb3VzX2NoYXJfY29kZTpzaGlmdCwgLi4uLCAnZm9mJzotZGl2aXNvcn0sLi4ufVxyXG4gICAgaWYgKFxyXG4gICAgICAoZmxhZ3MuYXV0b2VuY29kZSB8fCBvdXRwdXRFbmNvZGluZykgJiZcclxuICAgICAgZm9udHNbYWN0aXZlRm9udEtleV0ubWV0YWRhdGEgJiZcclxuICAgICAgZm9udHNbYWN0aXZlRm9udEtleV0ubWV0YWRhdGFbc291cmNlRW5jb2RpbmddICYmXHJcbiAgICAgIGZvbnRzW2FjdGl2ZUZvbnRLZXldLm1ldGFkYXRhW3NvdXJjZUVuY29kaW5nXS5lbmNvZGluZ1xyXG4gICAgKSB7XHJcbiAgICAgIGVuY29kaW5nQmxvY2sgPSBmb250c1thY3RpdmVGb250S2V5XS5tZXRhZGF0YVtzb3VyY2VFbmNvZGluZ10uZW5jb2Rpbmc7XHJcblxyXG4gICAgICAvLyBlYWNoIGZvbnQgaGFzIGRlZmF1bHQgZW5jb2RpbmcuIFNvbWUgaGF2ZSBpdCBjbGVhcmx5IGRlZmluZWQuXHJcbiAgICAgIGlmICghb3V0cHV0RW5jb2RpbmcgJiYgZm9udHNbYWN0aXZlRm9udEtleV0uZW5jb2RpbmcpIHtcclxuICAgICAgICBvdXRwdXRFbmNvZGluZyA9IGZvbnRzW2FjdGl2ZUZvbnRLZXldLmVuY29kaW5nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBIbW1tLCB0aGUgYWJvdmUgZGlkIG5vdCB3b3JrPyBMZXQncyB0cnkgYWdhaW4sIGluIGRpZmZlcmVudCBwbGFjZS5cclxuICAgICAgaWYgKCFvdXRwdXRFbmNvZGluZyAmJiBlbmNvZGluZ0Jsb2NrLmNvZGVQYWdlcykge1xyXG4gICAgICAgIG91dHB1dEVuY29kaW5nID0gZW5jb2RpbmdCbG9jay5jb2RlUGFnZXNbMF07IC8vIGxldCdzIHNheSwgZmlyc3Qgb25lIGlzIHRoZSBkZWZhdWx0XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0eXBlb2Ygb3V0cHV0RW5jb2RpbmcgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBvdXRwdXRFbmNvZGluZyA9IGVuY29kaW5nQmxvY2tbb3V0cHV0RW5jb2RpbmddO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHdlIHdhbnQgb3V0cHV0IGVuY29kaW5nIHRvIGJlIGEgSlMgT2JqZWN0LCB3aGVyZVxyXG4gICAgICAvLyBrZXkgPSBzb3VyY2VFbmNvZGluZydzIGNoYXJhY3RlciBjb2RlIGFuZFxyXG4gICAgICAvLyB2YWx1ZSA9IG91dHB1dEVuY29kaW5nJ3MgY2hhcmFjdGVyIGNvZGUuXHJcbiAgICAgIGlmIChvdXRwdXRFbmNvZGluZykge1xyXG4gICAgICAgIGlzVW5pY29kZSA9IGZhbHNlO1xyXG4gICAgICAgIG5ld3RleHQgPSBbXTtcclxuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGV4dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgIGNoID0gb3V0cHV0RW5jb2RpbmdbdGV4dC5jaGFyQ29kZUF0KGkpXTtcclxuICAgICAgICAgIGlmIChjaCkge1xyXG4gICAgICAgICAgICBuZXd0ZXh0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShjaCkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3dGV4dC5wdXNoKHRleHRbaV0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIHNpbmNlIHdlIGFyZSBsb29waW5nIG92ZXIgY2hhcnMgYW55d2F5LCBtaWdodCBhcyB3ZWxsXHJcbiAgICAgICAgICAvLyBjaGVjayBmb3IgcmVzaWR1YWwgdW5pY29kZW5lc3NcclxuICAgICAgICAgIGlmIChuZXd0ZXh0W2ldLmNoYXJDb2RlQXQoMCkgPj4gOCkge1xyXG4gICAgICAgICAgICAvKiBtb3JlIHRoYW4gMjU1ICovXHJcbiAgICAgICAgICAgIGlzVW5pY29kZSA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRleHQgPSBuZXd0ZXh0LmpvaW4oXCJcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpID0gdGV4dC5sZW5ndGg7XHJcbiAgICAvLyBpc1VuaWNvZGUgbWF5IGJlIHNldCB0byBmYWxzZSBhYm92ZS4gSGVuY2UgdGhlIHRyaXBsZS1lcXVhbCB0byB1bmRlZmluZWRcclxuICAgIHdoaWxlIChpc1VuaWNvZGUgPT09IHVuZGVmaW5lZCAmJiBpICE9PSAwKSB7XHJcbiAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoaSAtIDEpID4+IDgpIHtcclxuICAgICAgICAvKiBtb3JlIHRoYW4gMjU1ICovXHJcbiAgICAgICAgaXNVbmljb2RlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpLS07XHJcbiAgICB9XHJcbiAgICBpZiAoIWlzVW5pY29kZSkge1xyXG4gICAgICByZXR1cm4gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBuZXd0ZXh0ID0gZmxhZ3Mubm9CT00gPyBbXSA6IFsyNTQsIDI1NV07XHJcbiAgICBmb3IgKGkgPSAwLCBsID0gdGV4dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgY2ggPSB0ZXh0LmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgIGJjaCA9IGNoID4+IDg7IC8vIGRpdmlkZSBieSAyNTZcclxuICAgICAgaWYgKGJjaCA+PiA4KSB7XHJcbiAgICAgICAgLyogc29tZXRoaW5nIGxlZnQgYWZ0ZXIgZGl2aWRpbmcgYnkgMjU2IHNlY29uZCB0aW1lICovXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgXCJDaGFyYWN0ZXIgYXQgcG9zaXRpb24gXCIgK1xyXG4gICAgICAgICAgICBpICtcclxuICAgICAgICAgICAgXCIgb2Ygc3RyaW5nICdcIiArXHJcbiAgICAgICAgICAgIHRleHQgK1xyXG4gICAgICAgICAgICBcIicgZXhjZWVkcyAxNmJpdHMuIENhbm5vdCBiZSBlbmNvZGVkIGludG8gVUNTLTIgQkVcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgbmV3dGV4dC5wdXNoKGJjaCk7XHJcbiAgICAgIG5ld3RleHQucHVzaChjaCAtIChiY2ggPDwgOCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkodW5kZWZpbmVkLCBuZXd0ZXh0KTtcclxuICB9O1xyXG5cclxuICB2YXIgcGRmRXNjYXBlID0gKEFQSS5fX3ByaXZhdGVfXy5wZGZFc2NhcGUgPSBBUEkucGRmRXNjYXBlID0gZnVuY3Rpb24oXHJcbiAgICB0ZXh0LFxyXG4gICAgZmxhZ3NcclxuICApIHtcclxuICAgIC8qKlxyXG4gICAgICogUmVwbGFjZSAnLycsICcoJywgYW5kICcpJyB3aXRoIHBkZi1zYWZlIHZlcnNpb25zXHJcbiAgICAgKlxyXG4gICAgICogRG9pbmcgdG84Yml0U3RyZWFtIGRvZXMgTk9UIG1ha2UgdGhpcyBQREYgZGlzcGxheSB1bmljb2RlIHRleHQuIEZvciB0aGF0XHJcbiAgICAgKiB3ZSBhbHNvIG5lZWQgdG8gcmVmZXJlbmNlIGEgdW5pY29kZSBmb250IGFuZCBlbWJlZCBpdCAtIHJveWFsIHBhaW4gaW4gdGhlIHJlYXIuXHJcbiAgICAgKlxyXG4gICAgICogVGhlcmUgaXMgc3RpbGwgYSBiZW5lZml0IHRvIHRvOGJpdFN0cmVhbSAtIFBERiBzaW1wbHkgY2Fubm90IGhhbmRsZSAxNmJpdCBjaGFycyxcclxuICAgICAqIHdoaWNoIEphdmFTY3JpcHQgU3RyaW5ncyBhcmUgaGFwcHkgdG8gcHJvdmlkZS4gU28sIHdoaWxlIHdlIHN0aWxsIGNhbm5vdCBkaXNwbGF5XHJcbiAgICAgKiAyLWJ5dGUgY2hhcmFjdGVycyBwcm9wZXJ0eSwgYXQgbGVhc3QgQ09ORElUSU9OQUxMWSBjb252ZXJ0aW5nIChlbnRpcmUgc3RyaW5nIGNvbnRhaW5pbmcpXHJcbiAgICAgKiAxNmJpdCBjaGFycyB0byAoVVNDLTItQkUpIDItYnl0ZXMgcGVyIGNoYXIgKyBCT00gc3RyZWFtcyB3ZSBlbnN1cmUgdGhhdCBlbnRpcmUgUERGXHJcbiAgICAgKiBpcyBzdGlsbCBwYXJzZWFibGUuXHJcbiAgICAgKiBUaGlzIHdpbGwgYWxsb3cgaW1tZWRpYXRlIHN1cHBvcnQgZm9yIHVuaWNvZGUgaW4gZG9jdW1lbnQgcHJvcGVydGllcyBzdHJpbmdzLlxyXG4gICAgICovXHJcbiAgICByZXR1cm4gdG84Yml0U3RyZWFtKHRleHQsIGZsYWdzKVxyXG4gICAgICAucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9cXCgvZywgXCJcXFxcKFwiKVxyXG4gICAgICAucmVwbGFjZSgvXFwpL2csIFwiXFxcXClcIik7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBiZWdpblBhZ2UgPSAoQVBJLl9fcHJpdmF0ZV9fLmJlZ2luUGFnZSA9IGZ1bmN0aW9uKGZvcm1hdCkge1xyXG4gICAgcGFnZXNbKytwYWdlXSA9IFtdO1xyXG4gICAgcGFnZXNDb250ZXh0W3BhZ2VdID0ge1xyXG4gICAgICBvYmpJZDogMCxcclxuICAgICAgY29udGVudHNPYmpJZDogMCxcclxuICAgICAgdXNlclVuaXQ6IE51bWJlcih1c2VyVW5pdCksXHJcbiAgICAgIGFydEJveDogbnVsbCxcclxuICAgICAgYmxlZWRCb3g6IG51bGwsXHJcbiAgICAgIGNyb3BCb3g6IG51bGwsXHJcbiAgICAgIHRyaW1Cb3g6IG51bGwsXHJcbiAgICAgIG1lZGlhQm94OiB7XHJcbiAgICAgICAgYm90dG9tTGVmdFg6IDAsXHJcbiAgICAgICAgYm90dG9tTGVmdFk6IDAsXHJcbiAgICAgICAgdG9wUmlnaHRYOiBOdW1iZXIoZm9ybWF0WzBdKSxcclxuICAgICAgICB0b3BSaWdodFk6IE51bWJlcihmb3JtYXRbMV0pXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBfc2V0UGFnZShwYWdlKTtcclxuICAgIHNldE91dHB1dERlc3RpbmF0aW9uKHBhZ2VzW2N1cnJlbnRQYWdlXSk7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBfYWRkUGFnZSA9IGZ1bmN0aW9uKHBhcm1Gb3JtYXQsIHBhcm1PcmllbnRhdGlvbikge1xyXG4gICAgdmFyIGRpbWVuc2lvbnMsIHdpZHRoLCBoZWlnaHQ7XHJcblxyXG4gICAgb3JpZW50YXRpb24gPSBwYXJtT3JpZW50YXRpb24gfHwgb3JpZW50YXRpb247XHJcblxyXG4gICAgaWYgKHR5cGVvZiBwYXJtRm9ybWF0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIGRpbWVuc2lvbnMgPSBnZXRQYWdlRm9ybWF0KHBhcm1Gb3JtYXQudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRpbWVuc2lvbnMpKSB7XHJcbiAgICAgICAgd2lkdGggPSBkaW1lbnNpb25zWzBdO1xyXG4gICAgICAgIGhlaWdodCA9IGRpbWVuc2lvbnNbMV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJtRm9ybWF0KSkge1xyXG4gICAgICB3aWR0aCA9IHBhcm1Gb3JtYXRbMF0gKiBzY2FsZUZhY3RvcjtcclxuICAgICAgaGVpZ2h0ID0gcGFybUZvcm1hdFsxXSAqIHNjYWxlRmFjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc05hTih3aWR0aCkpIHtcclxuICAgICAgd2lkdGggPSBmb3JtYXRbMF07XHJcbiAgICAgIGhlaWdodCA9IGZvcm1hdFsxXTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAod2lkdGggPiAxNDQwMCB8fCBoZWlnaHQgPiAxNDQwMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgXCJBIHBhZ2UgaW4gYSBQREYgY2FuIG5vdCBiZSB3aWRlciBvciB0YWxsZXIgdGhhbiAxNDQwMCB1c2VyVW5pdC4ganNQREYgbGltaXRzIHRoZSB3aWR0aC9oZWlnaHQgdG8gMTQ0MDBcIlxyXG4gICAgICApO1xyXG4gICAgICB3aWR0aCA9IE1hdGgubWluKDE0NDAwLCB3aWR0aCk7XHJcbiAgICAgIGhlaWdodCA9IE1hdGgubWluKDE0NDAwLCBoZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdCA9IFt3aWR0aCwgaGVpZ2h0XTtcclxuXHJcbiAgICBzd2l0Y2ggKG9yaWVudGF0aW9uLnN1YnN0cigwLCAxKSkge1xyXG4gICAgICBjYXNlIFwibFwiOlxyXG4gICAgICAgIGlmIChoZWlnaHQgPiB3aWR0aCkge1xyXG4gICAgICAgICAgZm9ybWF0ID0gW2hlaWdodCwgd2lkdGhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInBcIjpcclxuICAgICAgICBpZiAod2lkdGggPiBoZWlnaHQpIHtcclxuICAgICAgICAgIGZvcm1hdCA9IFtoZWlnaHQsIHdpZHRoXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgYmVnaW5QYWdlKGZvcm1hdCk7XHJcblxyXG4gICAgLy8gU2V0IGxpbmUgd2lkdGhcclxuICAgIHNldExpbmVXaWR0aChsaW5lV2lkdGgpO1xyXG4gICAgLy8gU2V0IGRyYXcgY29sb3JcclxuICAgIG91dChzdHJva2VDb2xvcik7XHJcbiAgICAvLyByZXN1cnJlY3Rpbmcgbm9uLWRlZmF1bHQgbGluZSBjYXBzLCBqb2luc1xyXG4gICAgaWYgKGxpbmVDYXBJRCAhPT0gMCkge1xyXG4gICAgICBvdXQobGluZUNhcElEICsgXCIgSlwiKTtcclxuICAgIH1cclxuICAgIGlmIChsaW5lSm9pbklEICE9PSAwKSB7XHJcbiAgICAgIG91dChsaW5lSm9pbklEICsgXCIgalwiKTtcclxuICAgIH1cclxuICAgIGV2ZW50cy5wdWJsaXNoKFwiYWRkUGFnZVwiLCB7XHJcbiAgICAgIHBhZ2VOdW1iZXI6IHBhZ2VcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBfZGVsZXRlUGFnZSA9IGZ1bmN0aW9uKG4pIHtcclxuICAgIGlmIChuID4gMCAmJiBuIDw9IHBhZ2UpIHtcclxuICAgICAgcGFnZXMuc3BsaWNlKG4sIDEpO1xyXG4gICAgICBwYWdlc0NvbnRleHQuc3BsaWNlKG4sIDEpO1xyXG4gICAgICBwYWdlLS07XHJcbiAgICAgIGlmIChjdXJyZW50UGFnZSA+IHBhZ2UpIHtcclxuICAgICAgICBjdXJyZW50UGFnZSA9IHBhZ2U7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXRQYWdlKGN1cnJlbnRQYWdlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgX3NldFBhZ2UgPSBmdW5jdGlvbihuKSB7XHJcbiAgICBpZiAobiA+IDAgJiYgbiA8PSBwYWdlKSB7XHJcbiAgICAgIGN1cnJlbnRQYWdlID0gbjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgZ2V0TnVtYmVyT2ZQYWdlcyA9IChBUEkuX19wcml2YXRlX18uZ2V0TnVtYmVyT2ZQYWdlcyA9IEFQSS5nZXROdW1iZXJPZlBhZ2VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gcGFnZXMubGVuZ3RoIC0gMTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIGRvY3VtZW50LXNwZWNpZmljIGZvbnQga2V5IC0gYSBsYWJlbCBhc3NpZ25lZCB0byBhXHJcbiAgICogZm9udCBuYW1lICsgZm9udCB0eXBlIGNvbWJpbmF0aW9uIGF0IHRoZSB0aW1lIHRoZSBmb250IHdhcyBhZGRlZFxyXG4gICAqIHRvIHRoZSBmb250IGludmVudG9yeS5cclxuICAgKlxyXG4gICAqIEZvbnQga2V5IGlzIHVzZWQgYXMgbGFiZWwgZm9yIHRoZSBkZXNpcmVkIGZvbnQgZm9yIGEgYmxvY2sgb2YgdGV4dFxyXG4gICAqIHRvIGJlIGFkZGVkIHRvIHRoZSBQREYgZG9jdW1lbnQgc3RyZWFtLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIGZvbnROYW1lIHtzdHJpbmd9IGNhbiBiZSB1bmRlZmluZWQgb24gXCJmYWx0aHlcIiB0byBpbmRpY2F0ZSBcInVzZSBjdXJyZW50XCJcclxuICAgKiBAcGFyYW0gZm9udFN0eWxlIHtzdHJpbmd9IGNhbiBiZSB1bmRlZmluZWQgb24gXCJmYWx0aHlcIiB0byBpbmRpY2F0ZSBcInVzZSBjdXJyZW50XCJcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBGb250IGtleS5cclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgdmFyIGdldEZvbnQgPSBmdW5jdGlvbihmb250TmFtZSwgZm9udFN0eWxlLCBvcHRpb25zKSB7XHJcbiAgICB2YXIga2V5ID0gdW5kZWZpbmVkLFxyXG4gICAgICBmb250TmFtZUxvd2VyQ2FzZTtcclxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgIGZvbnROYW1lID1cclxuICAgICAgZm9udE5hbWUgIT09IHVuZGVmaW5lZCA/IGZvbnROYW1lIDogZm9udHNbYWN0aXZlRm9udEtleV0uZm9udE5hbWU7XHJcbiAgICBmb250U3R5bGUgPVxyXG4gICAgICBmb250U3R5bGUgIT09IHVuZGVmaW5lZCA/IGZvbnRTdHlsZSA6IGZvbnRzW2FjdGl2ZUZvbnRLZXldLmZvbnRTdHlsZTtcclxuICAgIGZvbnROYW1lTG93ZXJDYXNlID0gZm9udE5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGZvbnRtYXBbZm9udE5hbWVMb3dlckNhc2VdICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgZm9udG1hcFtmb250TmFtZUxvd2VyQ2FzZV1bZm9udFN0eWxlXSAhPT0gdW5kZWZpbmVkXHJcbiAgICApIHtcclxuICAgICAga2V5ID0gZm9udG1hcFtmb250TmFtZUxvd2VyQ2FzZV1bZm9udFN0eWxlXTtcclxuICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgIGZvbnRtYXBbZm9udE5hbWVdICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgZm9udG1hcFtmb250TmFtZV1bZm9udFN0eWxlXSAhPT0gdW5kZWZpbmVkXHJcbiAgICApIHtcclxuICAgICAga2V5ID0gZm9udG1hcFtmb250TmFtZV1bZm9udFN0eWxlXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChvcHRpb25zLmRpc2FibGVXYXJuaW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgIFwiVW5hYmxlIHRvIGxvb2sgdXAgZm9udCBsYWJlbCBmb3IgZm9udCAnXCIgK1xyXG4gICAgICAgICAgICBmb250TmFtZSArXHJcbiAgICAgICAgICAgIFwiJywgJ1wiICtcclxuICAgICAgICAgICAgZm9udFN0eWxlICtcclxuICAgICAgICAgICAgXCInLiBSZWZlciB0byBnZXRGb250TGlzdCgpIGZvciBhdmFpbGFibGUgZm9udHMuXCJcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFrZXkgJiYgIW9wdGlvbnMubm9GYWxsYmFjaykge1xyXG4gICAgICBrZXkgPSBmb250bWFwW1widGltZXNcIl1bZm9udFN0eWxlXTtcclxuICAgICAgaWYgKGtleSA9PSBudWxsKSB7XHJcbiAgICAgICAga2V5ID0gZm9udG1hcFtcInRpbWVzXCJdW1wibm9ybWFsXCJdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ga2V5O1xyXG4gIH07XHJcblxyXG4gIHZhciBwdXRJbmZvID0gKEFQSS5fX3ByaXZhdGVfXy5wdXRJbmZvID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgb2JqZWN0SWQgPSBuZXdPYmplY3QoKTtcclxuICAgIHZhciBlbmNyeXB0b3IgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIGlmIChlbmNyeXB0aW9uT3B0aW9ucyAhPT0gbnVsbCkge1xyXG4gICAgICBlbmNyeXB0b3IgPSBlbmNyeXB0aW9uLmVuY3J5cHRvcihvYmplY3RJZCwgMCk7XHJcbiAgICB9XHJcbiAgICBvdXQoXCI8PFwiKTtcclxuICAgIG91dChcIi9Qcm9kdWNlciAoXCIgKyBwZGZFc2NhcGUoZW5jcnlwdG9yKFwianNQREYgXCIgKyBqc1BERi52ZXJzaW9uKSkgKyBcIilcIik7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gZG9jdW1lbnRQcm9wZXJ0aWVzKSB7XHJcbiAgICAgIGlmIChkb2N1bWVudFByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBkb2N1bWVudFByb3BlcnRpZXNba2V5XSkge1xyXG4gICAgICAgIG91dChcclxuICAgICAgICAgIFwiL1wiICtcclxuICAgICAgICAgICAga2V5LnN1YnN0cigwLCAxKS50b1VwcGVyQ2FzZSgpICtcclxuICAgICAgICAgICAga2V5LnN1YnN0cigxKSArXHJcbiAgICAgICAgICAgIFwiIChcIiArXHJcbiAgICAgICAgICAgIHBkZkVzY2FwZShlbmNyeXB0b3IoZG9jdW1lbnRQcm9wZXJ0aWVzW2tleV0pKSArXHJcbiAgICAgICAgICAgIFwiKVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgb3V0KFwiL0NyZWF0aW9uRGF0ZSAoXCIgKyBwZGZFc2NhcGUoZW5jcnlwdG9yKGNyZWF0aW9uRGF0ZSkpICsgXCIpXCIpO1xyXG4gICAgb3V0KFwiPj5cIik7XHJcbiAgICBvdXQoXCJlbmRvYmpcIik7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBwdXRDYXRhbG9nID0gKEFQSS5fX3ByaXZhdGVfXy5wdXRDYXRhbG9nID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICB2YXIgdG1wUm9vdERpY3Rpb25hcnlPYmpJZCA9XHJcbiAgICAgIG9wdGlvbnMucm9vdERpY3Rpb25hcnlPYmpJZCB8fCByb290RGljdGlvbmFyeU9iaklkO1xyXG4gICAgbmV3T2JqZWN0KCk7XHJcbiAgICBvdXQoXCI8PFwiKTtcclxuICAgIG91dChcIi9UeXBlIC9DYXRhbG9nXCIpO1xyXG4gICAgb3V0KFwiL1BhZ2VzIFwiICsgdG1wUm9vdERpY3Rpb25hcnlPYmpJZCArIFwiIDAgUlwiKTtcclxuICAgIC8vIFBERjEzcmVmIFNlY3Rpb24gNy4yLjFcclxuICAgIGlmICghem9vbU1vZGUpIHpvb21Nb2RlID0gXCJmdWxsd2lkdGhcIjtcclxuICAgIHN3aXRjaCAoem9vbU1vZGUpIHtcclxuICAgICAgY2FzZSBcImZ1bGx3aWR0aFwiOlxyXG4gICAgICAgIG91dChcIi9PcGVuQWN0aW9uIFszIDAgUiAvRml0SCBudWxsXVwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImZ1bGxoZWlnaHRcIjpcclxuICAgICAgICBvdXQoXCIvT3BlbkFjdGlvbiBbMyAwIFIgL0ZpdFYgbnVsbF1cIik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJmdWxscGFnZVwiOlxyXG4gICAgICAgIG91dChcIi9PcGVuQWN0aW9uIFszIDAgUiAvRml0XVwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIm9yaWdpbmFsXCI6XHJcbiAgICAgICAgb3V0KFwiL09wZW5BY3Rpb24gWzMgMCBSIC9YWVogbnVsbCBudWxsIDFdXCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHZhciBwY24gPSBcIlwiICsgem9vbU1vZGU7XHJcbiAgICAgICAgaWYgKHBjbi5zdWJzdHIocGNuLmxlbmd0aCAtIDEpID09PSBcIiVcIilcclxuICAgICAgICAgIHpvb21Nb2RlID0gcGFyc2VJbnQoem9vbU1vZGUpIC8gMTAwO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygem9vbU1vZGUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgIG91dChcIi9PcGVuQWN0aW9uIFszIDAgUiAvWFlaIG51bGwgbnVsbCBcIiArIGYyKHpvb21Nb2RlKSArIFwiXVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIWxheW91dE1vZGUpIGxheW91dE1vZGUgPSBcImNvbnRpbnVvdXNcIjtcclxuICAgIHN3aXRjaCAobGF5b3V0TW9kZSkge1xyXG4gICAgICBjYXNlIFwiY29udGludW91c1wiOlxyXG4gICAgICAgIG91dChcIi9QYWdlTGF5b3V0IC9PbmVDb2x1bW5cIik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJzaW5nbGVcIjpcclxuICAgICAgICBvdXQoXCIvUGFnZUxheW91dCAvU2luZ2xlUGFnZVwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInR3b1wiOlxyXG4gICAgICBjYXNlIFwidHdvbGVmdFwiOlxyXG4gICAgICAgIG91dChcIi9QYWdlTGF5b3V0IC9Ud29Db2x1bW5MZWZ0XCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwidHdvcmlnaHRcIjpcclxuICAgICAgICBvdXQoXCIvUGFnZUxheW91dCAvVHdvQ29sdW1uUmlnaHRcIik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBpZiAocGFnZU1vZGUpIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEEgbmFtZSBvYmplY3Qgc3BlY2lmeWluZyBob3cgdGhlIGRvY3VtZW50IHNob3VsZCBiZSBkaXNwbGF5ZWQgd2hlbiBvcGVuZWQ6XHJcbiAgICAgICAqIFVzZU5vbmUgICAgICA6IE5laXRoZXIgZG9jdW1lbnQgb3V0bGluZSBub3IgdGh1bWJuYWlsIGltYWdlcyB2aXNpYmxlIC0tIERFRkFVTFRcclxuICAgICAgICogVXNlT3V0bGluZXMgIDogRG9jdW1lbnQgb3V0bGluZSB2aXNpYmxlXHJcbiAgICAgICAqIFVzZVRodW1icyAgICA6IFRodW1ibmFpbCBpbWFnZXMgdmlzaWJsZVxyXG4gICAgICAgKiBGdWxsU2NyZWVuICAgOiBGdWxsLXNjcmVlbiBtb2RlLCB3aXRoIG5vIG1lbnUgYmFyLCB3aW5kb3cgY29udHJvbHMsIG9yIGFueSBvdGhlciB3aW5kb3cgdmlzaWJsZVxyXG4gICAgICAgKi9cclxuICAgICAgb3V0KFwiL1BhZ2VNb2RlIC9cIiArIHBhZ2VNb2RlKTtcclxuICAgIH1cclxuICAgIGV2ZW50cy5wdWJsaXNoKFwicHV0Q2F0YWxvZ1wiKTtcclxuICAgIG91dChcIj4+XCIpO1xyXG4gICAgb3V0KFwiZW5kb2JqXCIpO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgcHV0VHJhaWxlciA9IChBUEkuX19wcml2YXRlX18ucHV0VHJhaWxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgb3V0KFwidHJhaWxlclwiKTtcclxuICAgIG91dChcIjw8XCIpO1xyXG4gICAgb3V0KFwiL1NpemUgXCIgKyAob2JqZWN0TnVtYmVyICsgMSkpO1xyXG4gICAgLy8gUm9vdCBhbmQgSW5mbyBtdXN0IGJlIHRoZSBsYXN0IGFuZCBzZWNvbmQgbGFzdCBvYmplY3RzIHdyaXR0ZW4gcmVzcGVjdGl2ZWx5XHJcbiAgICBvdXQoXCIvUm9vdCBcIiArIG9iamVjdE51bWJlciArIFwiIDAgUlwiKTtcclxuICAgIG91dChcIi9JbmZvIFwiICsgKG9iamVjdE51bWJlciAtIDEpICsgXCIgMCBSXCIpO1xyXG4gICAgaWYgKGVuY3J5cHRpb25PcHRpb25zICE9PSBudWxsKSB7XHJcbiAgICAgIG91dChcIi9FbmNyeXB0IFwiICsgZW5jcnlwdGlvbi5vaWQgKyBcIiAwIFJcIik7XHJcbiAgICB9XHJcbiAgICBvdXQoXCIvSUQgWyA8XCIgKyBmaWxlSWQgKyBcIj4gPFwiICsgZmlsZUlkICsgXCI+IF1cIik7XHJcbiAgICBvdXQoXCI+PlwiKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIHB1dEhlYWRlciA9IChBUEkuX19wcml2YXRlX18ucHV0SGVhZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICBvdXQoXCIlUERGLVwiICsgcGRmVmVyc2lvbik7XHJcbiAgICBvdXQoXCIlXFx4QkFcXHhERlxceEFDXFx4RTBcIik7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBwdXRYUmVmID0gKEFQSS5fX3ByaXZhdGVfXy5wdXRYUmVmID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcCA9IFwiMDAwMDAwMDAwMFwiO1xyXG5cclxuICAgIG91dChcInhyZWZcIik7XHJcbiAgICBvdXQoXCIwIFwiICsgKG9iamVjdE51bWJlciArIDEpKTtcclxuICAgIG91dChcIjAwMDAwMDAwMDAgNjU1MzUgZiBcIik7XHJcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBvYmplY3ROdW1iZXI7IGkrKykge1xyXG4gICAgICB2YXIgb2Zmc2V0ID0gb2Zmc2V0c1tpXTtcclxuICAgICAgaWYgKHR5cGVvZiBvZmZzZXQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIG91dCgocCArIG9mZnNldHNbaV0oKSkuc2xpY2UoLTEwKSArIFwiIDAwMDAwIG4gXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb2Zmc2V0c1tpXSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgb3V0KChwICsgb2Zmc2V0c1tpXSkuc2xpY2UoLTEwKSArIFwiIDAwMDAwIG4gXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvdXQoXCIwMDAwMDAwMDAwIDAwMDAwIG4gXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICB2YXIgYnVpbGREb2N1bWVudCA9IChBUEkuX19wcml2YXRlX18uYnVpbGREb2N1bWVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmVzZXREb2N1bWVudCgpO1xyXG4gICAgc2V0T3V0cHV0RGVzdGluYXRpb24oY29udGVudCk7XHJcblxyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJidWlsZERvY3VtZW50XCIpO1xyXG5cclxuICAgIHB1dEhlYWRlcigpO1xyXG4gICAgcHV0UGFnZXMoKTtcclxuICAgIHB1dEFkZGl0aW9uYWxPYmplY3RzKCk7XHJcbiAgICBwdXRSZXNvdXJjZXMoKTtcclxuICAgIGlmIChlbmNyeXB0aW9uT3B0aW9ucyAhPT0gbnVsbCkgcHV0RW5jcnlwdGlvbkRpY3QoKTtcclxuICAgIHB1dEluZm8oKTtcclxuICAgIHB1dENhdGFsb2coKTtcclxuXHJcbiAgICB2YXIgb2Zmc2V0T2ZYUmVmID0gY29udGVudExlbmd0aDtcclxuICAgIHB1dFhSZWYoKTtcclxuICAgIHB1dFRyYWlsZXIoKTtcclxuICAgIG91dChcInN0YXJ0eHJlZlwiKTtcclxuICAgIG91dChcIlwiICsgb2Zmc2V0T2ZYUmVmKTtcclxuICAgIG91dChcIiUlRU9GXCIpO1xyXG5cclxuICAgIHNldE91dHB1dERlc3RpbmF0aW9uKHBhZ2VzW2N1cnJlbnRQYWdlXSk7XHJcblxyXG4gICAgcmV0dXJuIGNvbnRlbnQuam9pbihcIlxcblwiKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIGdldEJsb2IgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldEJsb2IgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IEJsb2IoW2dldEFycmF5QnVmZmVyKGRhdGEpXSwge1xyXG4gICAgICB0eXBlOiBcImFwcGxpY2F0aW9uL3BkZlwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIHRoZSBQREYgZG9jdW1lbnQuXHJcbiAgICpcclxuICAgKiBJZiBgdHlwZWAgYXJndW1lbnQgaXMgdW5kZWZpbmVkLCBvdXRwdXQgaXMgcmF3IGJvZHkgb2YgcmVzdWx0aW5nIFBERiByZXR1cm5lZCBhcyBhIHN0cmluZy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEEgc3RyaW5nIGlkZW50aWZ5aW5nIG9uZSBvZiB0aGUgcG9zc2libGUgb3V0cHV0IHR5cGVzLjxici8+XHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgUG9zc2libGUgdmFsdWVzIGFyZTogPGJyLz5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FycmF5YnVmZmVyJyAtPiAoQXJyYXlCdWZmZXIpPGJyLz5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Jsb2InIC0+IChCbG9iKTxici8+XHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICdibG9idXJpJy8nYmxvYnVybCcgLT4gKHN0cmluZyk8YnIvPlxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YXVyaXN0cmluZycvJ2RhdGF1cmxzdHJpbmcnIC0+IChzdHJpbmcpPGJyLz5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGF1cmknLydkYXRhdXJsJyAtPiAodW5kZWZpbmVkKSAtPiBjaGFuZ2UgbG9jYXRpb24gdG8gZ2VuZXJhdGVkIGRhdGF1cmlzdHJpbmcvZGF0YXVybHN0cmluZzxici8+XHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhdXJsbmV3d2luZG93JyAtPiAod2luZG93IHwgbnVsbCB8IHVuZGVmaW5lZCkgdGhyb3dzIGVycm9yIGlmIGdsb2JhbCBpc24ndCBhIHdpbmRvdyBvYmplY3Qobm9kZSk8YnIvPlxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAncGRmb2JqZWN0bmV3d2luZG93JyAtPiAod2luZG93IHwgbnVsbCkgdGhyb3dzIGVycm9yIGlmIGdsb2JhbCBpc24ndCBhIHdpbmRvdyBvYmplY3Qobm9kZSk8YnIvPlxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAncGRmanNuZXd3aW5kb3cnIC0+ICh3aW5kIHwgbnVsbClcclxuICAgKiBAcGFyYW0ge09iamVjdHxzdHJpbmd9IG9wdGlvbnMgQW4gb2JqZWN0IHByb3ZpZGluZyBzb21lIGFkZGl0aW9uYWwgc2lnbmFsbGluZyB0byBQREYgZ2VuZXJhdG9yLjxici8+XHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3NpYmxlIG9wdGlvbnMgYXJlICdmaWxlbmFtZScuPGJyLz5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQSBzdHJpbmcgY2FuIGJlIHBhc3NlZCBpbnN0ZWFkIG9mIHtmaWxlbmFtZTpzdHJpbmd9IGFuZCBkZWZhdWx0cyB0byAnZ2VuZXJhdGVkLnBkZidcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfHdpbmRvd3xBcnJheUJ1ZmZlcnxCbG9ifGpzUERGfG51bGx8dW5kZWZpbmVkfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBvdXRwdXRcclxuICAgKi9cclxuICB2YXIgb3V0cHV0ID0gKEFQSS5vdXRwdXQgPSBBUEkuX19wcml2YXRlX18ub3V0cHV0ID0gU0FGRShmdW5jdGlvbiBvdXRwdXQoXHJcbiAgICB0eXBlLFxyXG4gICAgb3B0aW9uc1xyXG4gICkge1xyXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgZmlsZW5hbWU6IG9wdGlvbnNcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9wdGlvbnMuZmlsZW5hbWUgPSBvcHRpb25zLmZpbGVuYW1lIHx8IFwiZ2VuZXJhdGVkLnBkZlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlIHVuZGVmaW5lZDpcclxuICAgICAgICByZXR1cm4gYnVpbGREb2N1bWVudCgpO1xyXG4gICAgICBjYXNlIFwic2F2ZVwiOlxyXG4gICAgICAgIEFQSS5zYXZlKG9wdGlvbnMuZmlsZW5hbWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiYXJyYXlidWZmZXJcIjpcclxuICAgICAgICByZXR1cm4gZ2V0QXJyYXlCdWZmZXIoYnVpbGREb2N1bWVudCgpKTtcclxuICAgICAgY2FzZSBcImJsb2JcIjpcclxuICAgICAgICByZXR1cm4gZ2V0QmxvYihidWlsZERvY3VtZW50KCkpO1xyXG4gICAgICBjYXNlIFwiYmxvYnVyaVwiOlxyXG4gICAgICBjYXNlIFwiYmxvYnVybFwiOlxyXG4gICAgICAgIC8vIERldmVsb3BlciBpcyByZXNwb25zaWJsZSBvZiBjYWxsaW5nIHJldm9rZU9iamVjdFVSTFxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHR5cGVvZiBnbG9iYWxPYmplY3QuVVJMICE9PSBcInVuZGVmaW5lZFwiICYmXHJcbiAgICAgICAgICB0eXBlb2YgZ2xvYmFsT2JqZWN0LlVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgKGdsb2JhbE9iamVjdC5VUkwgJiZcclxuICAgICAgICAgICAgICBnbG9iYWxPYmplY3QuVVJMLmNyZWF0ZU9iamVjdFVSTChnZXRCbG9iKGJ1aWxkRG9jdW1lbnQoKSkpKSB8fFxyXG4gICAgICAgICAgICB2b2lkIDBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgICAgXCJibG9idXJsIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBzeXN0ZW0sIGJlY2F1c2UgVVJMLmNyZWF0ZU9iamVjdFVSTCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3Nlci5cIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJkYXRhdXJpc3RyaW5nXCI6XHJcbiAgICAgIGNhc2UgXCJkYXRhdXJsc3RyaW5nXCI6XHJcbiAgICAgICAgdmFyIGRhdGFVUkkgPSBcIlwiO1xyXG4gICAgICAgIHZhciBwZGZEb2N1bWVudCA9IGJ1aWxkRG9jdW1lbnQoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZGF0YVVSSSA9IGJ0b2EocGRmRG9jdW1lbnQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGRhdGFVUkkgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChwZGZEb2N1bWVudCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIFwiZGF0YTphcHBsaWNhdGlvbi9wZGY7ZmlsZW5hbWU9XCIgK1xyXG4gICAgICAgICAgb3B0aW9ucy5maWxlbmFtZSArXHJcbiAgICAgICAgICBcIjtiYXNlNjQsXCIgK1xyXG4gICAgICAgICAgZGF0YVVSSVxyXG4gICAgICAgICk7XHJcbiAgICAgIGNhc2UgXCJwZGZvYmplY3RuZXd3aW5kb3dcIjpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsT2JqZWN0KSA9PT0gXCJbb2JqZWN0IFdpbmRvd11cIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdmFyIHBkZk9iamVjdFVybCA9XHJcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcGRmb2JqZWN0LzIuMS4xL3BkZm9iamVjdC5taW4uanNcIjtcclxuICAgICAgICAgIHZhciBpbnRlZ3JpdHkgPVxyXG4gICAgICAgICAgICAnIGludGVncml0eT1cInNoYTUxMi00emUvYTkvNGpxdSt0WDlkZk9xSllTdnlZZDVNNnF1bS8zSHBDTHIrL0pxZjB3aGMzN1ZVYmtwTkdIUjcvOHBTbkNGdzQ3VDFmbUlwd0JWN1V5U2gzZz09XCIgY3Jvc3NvcmlnaW49XCJhbm9ueW1vdXNcIic7XHJcblxyXG4gICAgICAgICAgaWYgKG9wdGlvbnMucGRmT2JqZWN0VXJsKSB7XHJcbiAgICAgICAgICAgIHBkZk9iamVjdFVybCA9IG9wdGlvbnMucGRmT2JqZWN0VXJsO1xyXG4gICAgICAgICAgICBpbnRlZ3JpdHkgPSBcIlwiO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBodG1sRm9yTmV3V2luZG93ID1cclxuICAgICAgICAgICAgXCI8aHRtbD5cIiArXHJcbiAgICAgICAgICAgICc8c3R5bGU+aHRtbCwgYm9keSB7IHBhZGRpbmc6IDA7IG1hcmdpbjogMDsgfSBpZnJhbWUgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBib3JkZXI6IDA7fSAgPC9zdHlsZT48Ym9keT48c2NyaXB0IHNyYz1cIicgK1xyXG4gICAgICAgICAgICBwZGZPYmplY3RVcmwgK1xyXG4gICAgICAgICAgICAnXCInICtcclxuICAgICAgICAgICAgaW50ZWdyaXR5ICtcclxuICAgICAgICAgICAgJz48L3NjcmlwdD48c2NyaXB0ID5QREZPYmplY3QuZW1iZWQoXCInICtcclxuICAgICAgICAgICAgdGhpcy5vdXRwdXQoXCJkYXRhdXJsc3RyaW5nXCIpICtcclxuICAgICAgICAgICAgJ1wiLCAnICtcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkob3B0aW9ucykgK1xyXG4gICAgICAgICAgICBcIik7PC9zY3JpcHQ+PC9ib2R5PjwvaHRtbD5cIjtcclxuICAgICAgICAgIHZhciBuVyA9IGdsb2JhbE9iamVjdC5vcGVuKCk7XHJcblxyXG4gICAgICAgICAgaWYgKG5XICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIG5XLmRvY3VtZW50LndyaXRlKGh0bWxGb3JOZXdXaW5kb3cpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIG5XO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgIFwiVGhlIG9wdGlvbiBwZGZvYmplY3RuZXd3aW5kb3cganVzdCB3b3JrcyBpbiBhIGJyb3dzZXItZW52aXJvbm1lbnQuXCJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlIFwicGRmanNuZXd3aW5kb3dcIjpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsT2JqZWN0KSA9PT0gXCJbb2JqZWN0IFdpbmRvd11cIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdmFyIHBkZkpzVXJsID0gb3B0aW9ucy5wZGZKc1VybCB8fCBcImV4YW1wbGVzL1BERi5qcy93ZWIvdmlld2VyLmh0bWxcIjtcclxuICAgICAgICAgIHZhciBodG1sRm9yUERGanNOZXdXaW5kb3cgPVxyXG4gICAgICAgICAgICBcIjxodG1sPlwiICtcclxuICAgICAgICAgICAgXCI8c3R5bGU+aHRtbCwgYm9keSB7IHBhZGRpbmc6IDA7IG1hcmdpbjogMDsgfSBpZnJhbWUgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBib3JkZXI6IDA7fSAgPC9zdHlsZT5cIiArXHJcbiAgICAgICAgICAgICc8Ym9keT48aWZyYW1lIGlkPVwicGRmVmlld2VyXCIgc3JjPVwiJyArXHJcbiAgICAgICAgICAgIHBkZkpzVXJsICtcclxuICAgICAgICAgICAgXCI/ZmlsZT0mZG93bmxvYWROYW1lPVwiICtcclxuICAgICAgICAgICAgb3B0aW9ucy5maWxlbmFtZSArXHJcbiAgICAgICAgICAgICdcIiB3aWR0aD1cIjUwMHB4XCIgaGVpZ2h0PVwiNDAwcHhcIiAvPicgK1xyXG4gICAgICAgICAgICBcIjwvYm9keT48L2h0bWw+XCI7XHJcbiAgICAgICAgICB2YXIgUERGanNOZXdXaW5kb3cgPSBnbG9iYWxPYmplY3Qub3BlbigpO1xyXG5cclxuICAgICAgICAgIGlmIChQREZqc05ld1dpbmRvdyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBQREZqc05ld1dpbmRvdy5kb2N1bWVudC53cml0ZShodG1sRm9yUERGanNOZXdXaW5kb3cpO1xyXG4gICAgICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xyXG4gICAgICAgICAgICBQREZqc05ld1dpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgICBcIiNwZGZWaWV3ZXJcIlxyXG4gICAgICAgICAgICApLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIFBERmpzTmV3V2luZG93LmRvY3VtZW50LnRpdGxlID0gb3B0aW9ucy5maWxlbmFtZTtcclxuICAgICAgICAgICAgICBQREZqc05ld1dpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI3BkZlZpZXdlclwiKVxyXG4gICAgICAgICAgICAgICAgLmNvbnRlbnRXaW5kb3cuUERGVmlld2VyQXBwbGljYXRpb24ub3BlbihcclxuICAgICAgICAgICAgICAgICAgc2NvcGUub3V0cHV0KFwiYmxvYnVybFwiKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBQREZqc05ld1dpbmRvdztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICBcIlRoZSBvcHRpb24gcGRmanNuZXd3aW5kb3cganVzdCB3b3JrcyBpbiBhIGJyb3dzZXItZW52aXJvbm1lbnQuXCJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlIFwiZGF0YXVybG5ld3dpbmRvd1wiOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWxPYmplY3QpID09PSBcIltvYmplY3QgV2luZG93XVwiXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB2YXIgaHRtbEZvckRhdGFVUkxOZXdXaW5kb3cgPVxyXG4gICAgICAgICAgICBcIjxodG1sPlwiICtcclxuICAgICAgICAgICAgXCI8c3R5bGU+aHRtbCwgYm9keSB7IHBhZGRpbmc6IDA7IG1hcmdpbjogMDsgfSBpZnJhbWUgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBib3JkZXI6IDA7fSAgPC9zdHlsZT5cIiArXHJcbiAgICAgICAgICAgIFwiPGJvZHk+XCIgK1xyXG4gICAgICAgICAgICAnPGlmcmFtZSBzcmM9XCInICtcclxuICAgICAgICAgICAgdGhpcy5vdXRwdXQoXCJkYXRhdXJpc3RyaW5nXCIsIG9wdGlvbnMpICtcclxuICAgICAgICAgICAgJ1wiPjwvaWZyYW1lPicgK1xyXG4gICAgICAgICAgICBcIjwvYm9keT48L2h0bWw+XCI7XHJcbiAgICAgICAgICB2YXIgZGF0YVVSTE5ld1dpbmRvdyA9IGdsb2JhbE9iamVjdC5vcGVuKCk7XHJcbiAgICAgICAgICBpZiAoZGF0YVVSTE5ld1dpbmRvdyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBkYXRhVVJMTmV3V2luZG93LmRvY3VtZW50LndyaXRlKGh0bWxGb3JEYXRhVVJMTmV3V2luZG93KTtcclxuICAgICAgICAgICAgZGF0YVVSTE5ld1dpbmRvdy5kb2N1bWVudC50aXRsZSA9IG9wdGlvbnMuZmlsZW5hbWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZGF0YVVSTE5ld1dpbmRvdyB8fCB0eXBlb2Ygc2FmYXJpID09PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVVSTE5ld1dpbmRvdztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICBcIlRoZSBvcHRpb24gZGF0YXVybG5ld3dpbmRvdyBqdXN0IHdvcmtzIGluIGEgYnJvd3Nlci1lbnZpcm9ubWVudC5cIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJkYXRhdXJpXCI6XHJcbiAgICAgIGNhc2UgXCJkYXRhdXJsXCI6XHJcbiAgICAgICAgcmV0dXJuIChnbG9iYWxPYmplY3QuZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHRoaXMub3V0cHV0KFxyXG4gICAgICAgICAgXCJkYXRhdXJpc3RyaW5nXCIsXHJcbiAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgKSk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSkpO1xyXG5cclxuICAvKipcclxuICAgKiBVc2VkIHRvIHNlZSBpZiBhIHN1cHBsaWVkIGhvdGZpeCB3YXMgcmVxdWVzdGVkIHdoZW4gdGhlIHBkZiBpbnN0YW5jZSB3YXMgY3JlYXRlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaG90Zml4TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBob3RmaXggdG8gY2hlY2suXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgdmFyIGhhc0hvdGZpeCA9IGZ1bmN0aW9uKGhvdGZpeE5hbWUpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIEFycmF5LmlzQXJyYXkoaG90Zml4ZXMpID09PSB0cnVlICYmIGhvdGZpeGVzLmluZGV4T2YoaG90Zml4TmFtZSkgPiAtMVxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICBzd2l0Y2ggKHVuaXQpIHtcclxuICAgIGNhc2UgXCJwdFwiOlxyXG4gICAgICBzY2FsZUZhY3RvciA9IDE7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIm1tXCI6XHJcbiAgICAgIHNjYWxlRmFjdG9yID0gNzIgLyAyNS40O1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJjbVwiOlxyXG4gICAgICBzY2FsZUZhY3RvciA9IDcyIC8gMi41NDtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiaW5cIjpcclxuICAgICAgc2NhbGVGYWN0b3IgPSA3MjtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwicHhcIjpcclxuICAgICAgaWYgKGhhc0hvdGZpeChcInB4X3NjYWxpbmdcIikgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHNjYWxlRmFjdG9yID0gNzIgLyA5NjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzY2FsZUZhY3RvciA9IDk2IC8gNzI7XHJcbiAgICAgIH1cclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwicGNcIjpcclxuICAgICAgc2NhbGVGYWN0b3IgPSAxMjtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiZW1cIjpcclxuICAgICAgc2NhbGVGYWN0b3IgPSAxMjtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiZXhcIjpcclxuICAgICAgc2NhbGVGYWN0b3IgPSA2O1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIGlmICh0eXBlb2YgdW5pdCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIHNjYWxlRmFjdG9yID0gdW5pdDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHVuaXQ6IFwiICsgdW5pdCk7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBlbmNyeXB0aW9uID0gbnVsbDtcclxuICBzZXRDcmVhdGlvbkRhdGUoKTtcclxuICBzZXRGaWxlSWQoKTtcclxuXHJcbiAgdmFyIGdldEVuY3J5cHRvciA9IGZ1bmN0aW9uKG9iamVjdElkKSB7XHJcbiAgICBpZiAoZW5jcnlwdGlvbk9wdGlvbnMgIT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIGVuY3J5cHRpb24uZW5jcnlwdG9yKG9iamVjdElkLCAwKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIFB1YmxpYyBBUElcclxuXHJcbiAgdmFyIGdldFBhZ2VJbmZvID0gKEFQSS5fX3ByaXZhdGVfXy5nZXRQYWdlSW5mbyA9IEFQSS5nZXRQYWdlSW5mbyA9IGZ1bmN0aW9uKFxyXG4gICAgcGFnZU51bWJlck9uZUJhc2VkXHJcbiAgKSB7XHJcbiAgICBpZiAoaXNOYU4ocGFnZU51bWJlck9uZUJhc2VkKSB8fCBwYWdlTnVtYmVyT25lQmFzZWQgJSAxICE9PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGpzUERGLmdldFBhZ2VJbmZvXCIpO1xyXG4gICAgfVxyXG4gICAgdmFyIG9iaklkID0gcGFnZXNDb250ZXh0W3BhZ2VOdW1iZXJPbmVCYXNlZF0ub2JqSWQ7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBvYmpJZDogb2JqSWQsXHJcbiAgICAgIHBhZ2VOdW1iZXI6IHBhZ2VOdW1iZXJPbmVCYXNlZCxcclxuICAgICAgcGFnZUNvbnRleHQ6IHBhZ2VzQ29udGV4dFtwYWdlTnVtYmVyT25lQmFzZWRdXHJcbiAgICB9O1xyXG4gIH0pO1xyXG5cclxuICB2YXIgZ2V0UGFnZUluZm9CeU9iaklkID0gKEFQSS5fX3ByaXZhdGVfXy5nZXRQYWdlSW5mb0J5T2JqSWQgPSBmdW5jdGlvbihcclxuICAgIG9iaklkXHJcbiAgKSB7XHJcbiAgICBpZiAoaXNOYU4ob2JqSWQpIHx8IG9iaklkICUgMSAhPT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBqc1BERi5nZXRQYWdlSW5mb0J5T2JqSWRcIik7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBwYWdlTnVtYmVyIGluIHBhZ2VzQ29udGV4dCkge1xyXG4gICAgICBpZiAocGFnZXNDb250ZXh0W3BhZ2VOdW1iZXJdLm9iaklkID09PSBvYmpJZCkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ2V0UGFnZUluZm8ocGFnZU51bWJlcik7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBnZXRDdXJyZW50UGFnZUluZm8gPSAoQVBJLl9fcHJpdmF0ZV9fLmdldEN1cnJlbnRQYWdlSW5mbyA9IEFQSS5nZXRDdXJyZW50UGFnZUluZm8gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG9iaklkOiBwYWdlc0NvbnRleHRbY3VycmVudFBhZ2VdLm9iaklkLFxyXG4gICAgICBwYWdlTnVtYmVyOiBjdXJyZW50UGFnZSxcclxuICAgICAgcGFnZUNvbnRleHQ6IHBhZ2VzQ29udGV4dFtjdXJyZW50UGFnZV1cclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgKGFuZCB0cmFuc2ZlcnMgdGhlIGZvY3VzIHRvKSBuZXcgcGFnZSB0byB0aGUgUERGIGRvY3VtZW50LlxyXG4gICAqIEBwYXJhbSBmb3JtYXQge1N0cmluZy9BcnJheX0gVGhlIGZvcm1hdCBvZiB0aGUgbmV3IHBhZ2UuIENhbiBiZTogPHVsPjxsaT5hMCAtIGExMDwvbGk+PGxpPmIwIC0gYjEwPC9saT48bGk+YzAgLSBjMTA8L2xpPjxsaT5kbDwvbGk+PGxpPmxldHRlcjwvbGk+PGxpPmdvdmVybm1lbnQtbGV0dGVyPC9saT48bGk+bGVnYWw8L2xpPjxsaT5qdW5pb3ItbGVnYWw8L2xpPjxsaT5sZWRnZXI8L2xpPjxsaT50YWJsb2lkPC9saT48bGk+Y3JlZGl0LWNhcmQ8L2xpPjwvdWw+PGJyIC8+XHJcbiAgICogRGVmYXVsdCBpcyBcImE0XCIuIElmIHlvdSB3YW50IHRvIHVzZSB5b3VyIG93biBmb3JtYXQganVzdCBwYXNzIGluc3RlYWQgb2Ygb25lIG9mIHRoZSBhYm92ZSBwcmVkZWZpbmVkIGZvcm1hdHMgdGhlIHNpemUgYXMgYW4gbnVtYmVyLWFycmF5LCBlLmcuIFs1OTUuMjgsIDg0MS44OV1cclxuICAgKiBAcGFyYW0gb3JpZW50YXRpb24ge3N0cmluZ30gT3JpZW50YXRpb24gb2YgdGhlIG5ldyBwYWdlLiBQb3NzaWJsZSB2YWx1ZXMgYXJlIFwicG9ydHJhaXRcIiBvciBcImxhbmRzY2FwZVwiIChvciBzaG9ydGN1dHMgXCJwXCIgKERlZmF1bHQpLCBcImxcIikuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGFkZFBhZ2VcclxuICAgKi9cclxuICBBUEkuYWRkUGFnZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX2FkZFBhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcbiAgLyoqXHJcbiAgICogQWRkcyAoYW5kIHRyYW5zZmVycyB0aGUgZm9jdXMgdG8pIG5ldyBwYWdlIHRvIHRoZSBQREYgZG9jdW1lbnQuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIHNldFBhZ2VcclxuICAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSBTd2l0Y2ggdGhlIGFjdGl2ZSBwYWdlIHRvIHRoZSBwYWdlIG51bWJlciBzcGVjaWZpZWQgKGluZGV4ZWQgc3RhcnRpbmcgYXQgMSkuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiBkb2MgPSBqc1BERigpXHJcbiAgICogZG9jLmFkZFBhZ2UoKVxyXG4gICAqIGRvYy5hZGRQYWdlKClcclxuICAgKiBkb2MudGV4dCgnSSBhbSBvbiBwYWdlIDMnLCAxMCwgMTApXHJcbiAgICogZG9jLnNldFBhZ2UoMSlcclxuICAgKiBkb2MudGV4dCgnSSBhbSBvbiBwYWdlIDEnLCAxMCwgMTApXHJcbiAgICovXHJcbiAgQVBJLnNldFBhZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIF9zZXRQYWdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICBzZXRPdXRwdXREZXN0aW5hdGlvbi5jYWxsKHRoaXMsIHBhZ2VzW2N1cnJlbnRQYWdlXSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBpbnNlcnRQYWdlXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGJlZm9yZVBhZ2VcclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICovXHJcbiAgQVBJLmluc2VydFBhZ2UgPSBmdW5jdGlvbihiZWZvcmVQYWdlKSB7XHJcbiAgICB0aGlzLmFkZFBhZ2UoKTtcclxuICAgIHRoaXMubW92ZVBhZ2UoY3VycmVudFBhZ2UsIGJlZm9yZVBhZ2UpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG5hbWUgbW92ZVBhZ2VcclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFBhZ2VcclxuICAgKiBAcGFyYW0ge251bWJlcn0gYmVmb3JlUGFnZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKi9cclxuICBBUEkubW92ZVBhZ2UgPSBmdW5jdGlvbih0YXJnZXRQYWdlLCBiZWZvcmVQYWdlKSB7XHJcbiAgICB2YXIgdG1wUGFnZXMsIHRtcFBhZ2VzQ29udGV4dDtcclxuICAgIGlmICh0YXJnZXRQYWdlID4gYmVmb3JlUGFnZSkge1xyXG4gICAgICB0bXBQYWdlcyA9IHBhZ2VzW3RhcmdldFBhZ2VdO1xyXG4gICAgICB0bXBQYWdlc0NvbnRleHQgPSBwYWdlc0NvbnRleHRbdGFyZ2V0UGFnZV07XHJcbiAgICAgIGZvciAodmFyIGkgPSB0YXJnZXRQYWdlOyBpID4gYmVmb3JlUGFnZTsgaS0tKSB7XHJcbiAgICAgICAgcGFnZXNbaV0gPSBwYWdlc1tpIC0gMV07XHJcbiAgICAgICAgcGFnZXNDb250ZXh0W2ldID0gcGFnZXNDb250ZXh0W2kgLSAxXTtcclxuICAgICAgfVxyXG4gICAgICBwYWdlc1tiZWZvcmVQYWdlXSA9IHRtcFBhZ2VzO1xyXG4gICAgICBwYWdlc0NvbnRleHRbYmVmb3JlUGFnZV0gPSB0bXBQYWdlc0NvbnRleHQ7XHJcbiAgICAgIHRoaXMuc2V0UGFnZShiZWZvcmVQYWdlKTtcclxuICAgIH0gZWxzZSBpZiAodGFyZ2V0UGFnZSA8IGJlZm9yZVBhZ2UpIHtcclxuICAgICAgdG1wUGFnZXMgPSBwYWdlc1t0YXJnZXRQYWdlXTtcclxuICAgICAgdG1wUGFnZXNDb250ZXh0ID0gcGFnZXNDb250ZXh0W3RhcmdldFBhZ2VdO1xyXG4gICAgICBmb3IgKHZhciBqID0gdGFyZ2V0UGFnZTsgaiA8IGJlZm9yZVBhZ2U7IGorKykge1xyXG4gICAgICAgIHBhZ2VzW2pdID0gcGFnZXNbaiArIDFdO1xyXG4gICAgICAgIHBhZ2VzQ29udGV4dFtqXSA9IHBhZ2VzQ29udGV4dFtqICsgMV07XHJcbiAgICAgIH1cclxuICAgICAgcGFnZXNbYmVmb3JlUGFnZV0gPSB0bXBQYWdlcztcclxuICAgICAgcGFnZXNDb250ZXh0W2JlZm9yZVBhZ2VdID0gdG1wUGFnZXNDb250ZXh0O1xyXG4gICAgICB0aGlzLnNldFBhZ2UoYmVmb3JlUGFnZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBEZWxldGVzIGEgcGFnZSBmcm9tIHRoZSBQREYuXHJcbiAgICogQG5hbWUgZGVsZXRlUGFnZVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UGFnZVxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKi9cclxuICBBUEkuZGVsZXRlUGFnZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX2RlbGV0ZVBhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgdGV4dCB0byBwYWdlLiBTdXBwb3J0cyBhZGRpbmcgbXVsdGlsaW5lIHRleHQgd2hlbiAndGV4dCcgYXJndW1lbnQgaXMgYW4gQXJyYXkgb2YgU3RyaW5ncy5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSB0ZXh0IFN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdzIHRvIGJlIGFkZGVkIHRvIHRoZSBwYWdlLiBFYWNoIGxpbmUgaXMgc2hpZnRlZCBvbmUgbGluZSBkb3duIHBlciBmb250LCBzcGFjaW5nIHNldHRpbmdzIGRlY2xhcmVkIGJlZm9yZSB0aGlzIGNhbGwuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCBsZWZ0IGVkZ2Ugb2YgdGhlIHBhZ2UuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCB1cHBlciBlZGdlIG9mIHRoZSBwYWdlLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBDb2xsZWN0aW9uIG9mIHNldHRpbmdzIHNpZ25hbGluZyBob3cgdGhlIHRleHQgbXVzdCBiZSBlbmNvZGVkLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5hbGlnbj1sZWZ0XSAtIFRoZSBhbGlnbm1lbnQgb2YgdGhlIHRleHQsIHBvc3NpYmxlIHZhbHVlczogbGVmdCwgY2VudGVyLCByaWdodCwganVzdGlmeS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuYmFzZWxpbmU9YWxwaGFiZXRpY10gLSBTZXRzIHRleHQgYmFzZWxpbmUgdXNlZCB3aGVuIGRyYXdpbmcgdGhlIHRleHQsIHBvc3NpYmxlIHZhbHVlczogYWxwaGFiZXRpYywgaWRlb2dyYXBoaWMsIGJvdHRvbSwgdG9wLCBtaWRkbGUsIGhhbmdpbmdcclxuICAgKiBAcGFyYW0ge251bWJlcnxNYXRyaXh9IFtvcHRpb25zLmFuZ2xlPTBdIC0gUm90YXRlIHRoZSB0ZXh0IGNsb2Nrd2lzZSBvciBjb3VudGVyY2xvY2t3aXNlLiBFeHBlY3RzIHRoZSBhbmdsZSBpbiBkZWdyZWUuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnJvdGF0aW9uRGlyZWN0aW9uPTFdIC0gRGlyZWN0aW9uIG9mIHRoZSByb3RhdGlvbi4gMCA9IGNsb2Nrd2lzZSwgMSA9IGNvdW50ZXJjbG9ja3dpc2UuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmNoYXJTcGFjZT0wXSAtIFRoZSBzcGFjZSBiZXR3ZWVuIGVhY2ggbGV0dGVyLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5ob3Jpem9udGFsU2NhbGU9MV0gLSBIb3Jpem9udGFsIHNjYWxlIG9mIHRoZSB0ZXh0IGFzIGEgZmFjdG9yIG9mIHRoZSByZWd1bGFyIHNpemUuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmxpbmVIZWlnaHRGYWN0b3I9MS4xNV0gLSBUaGUgbGluZWhlaWdodCBvZiBlYWNoIGxpbmUuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmZsYWdzXSAtIEZsYWdzIGZvciB0bzhiaXRTdHJlYW0uXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5mbGFncy5ub0JPTT10cnVlXSAtIERvbid0IGFkZCBCT00gdG8gVW5pY29kZS10ZXh0LlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZmxhZ3MuYXV0b2VuY29kZT10cnVlXSAtIEF1dG9lbmNvZGUgdGhlIFRleHQuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdpZHRoPTBdIC0gU3BsaXQgdGhlIHRleHQgYnkgZ2l2ZW4gd2lkdGgsIDAgPSBubyBzcGxpdC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucmVuZGVyaW5nTW9kZT1maWxsXSAtIFNldCBob3cgdGhlIHRleHQgc2hvdWxkIGJlIHJlbmRlcmVkLCBwb3NzaWJsZSB2YWx1ZXM6IGZpbGwsIHN0cm9rZSwgZmlsbFRoZW5TdHJva2UsIGludmlzaWJsZSwgZmlsbEFuZEFkZEZvckNsaXBwaW5nLCBzdHJva2VBbmRBZGRQYXRoRm9yQ2xpcHBpbmcsIGZpbGxUaGVuU3Ryb2tlQW5kQWRkVG9QYXRoRm9yQ2xpcHBpbmcsIGFkZFRvUGF0aEZvckNsaXBwaW5nLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaXNJbnB1dFZpc3VhbF0gLSBPcHRpb24gZm9yIHRoZSBCaWRpRW5naW5lXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pc091dHB1dFZpc3VhbF0gLSBPcHRpb24gZm9yIHRoZSBCaWRpRW5naW5lXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pc0lucHV0UnRsXSAtIE9wdGlvbiBmb3IgdGhlIEJpZGlFbmdpbmVcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmlzT3V0cHV0UnRsXSAtIE9wdGlvbiBmb3IgdGhlIEJpZGlFbmdpbmVcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmlzU3ltbWV0cmljU3dhcHBpbmddIC0gT3B0aW9uIGZvciB0aGUgQmlkaUVuZ2luZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfE1hdHJpeH0gdHJhbnNmb3JtIElmIHRyYW5zZm9ybSBpcyBhIG51bWJlciB0aGUgdGV4dCB3aWxsIGJlIHJvdGF0ZWQgYnkgdGhpcyB2YWx1ZSBhcm91bmQgdGhlIGFuY2hvciBzZXQgYnkgeCBhbmQgeS5cclxuICAgKlxyXG4gICAqIElmIGl0IGlzIGEgTWF0cml4LCB0aGlzIG1hdHJpeCBnZXRzIGRpcmVjdGx5IGFwcGxpZWQgdG8gdGhlIHRleHQsIHdoaWNoIGFsbG93cyBzaGVhcmluZ1xyXG4gICAqIGVmZmVjdHMgZXRjLjsgdGhlIHggYW5kIHkgb2Zmc2V0cyBhcmUgdGhlbiBhcHBsaWVkIEFGVEVSIHRoZSBjb29yZGluYXRlIHN5c3RlbSBoYXMgYmVlbiBlc3RhYmxpc2hlZCBieSB0aGlzXHJcbiAgICogbWF0cml4LiBUaGlzIG1lYW5zIHBhc3NpbmcgYSByb3RhdGlvbiBtYXRyaXggdGhhdCBpcyBlcXVpdmFsZW50IHRvIHNvbWUgcm90YXRpb24gYW5nbGUgd2lsbCBpbiBnZW5lcmFsIHlpZWxkIGFcclxuICAgKiBESUZGRVJFTlQgcmVzdWx0LiBBIG1hdHJpeCBpcyBvbmx5IGFsbG93ZWQgaW4gXCJhZHZhbmNlZFwiIEFQSSBtb2RlLlxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgdGV4dFxyXG4gICAqL1xyXG4gIEFQSS5fX3ByaXZhdGVfXy50ZXh0ID0gQVBJLnRleHQgPSBmdW5jdGlvbih0ZXh0LCB4LCB5LCBvcHRpb25zLCB0cmFuc2Zvcm0pIHtcclxuICAgIC8qXHJcbiAgICAgKiBJbnNlcnRzIHNvbWV0aGluZyBsaWtlIHRoaXMgaW50byBQREZcclxuICAgICAqICAgQlRcclxuICAgICAqICAgIC9GMSAxNiBUZiAgJSBGb250IG5hbWUgKyBzaXplXHJcbiAgICAgKiAgICAxNiBUTCAlIEhvdyBtYW55IHVuaXRzIGRvd24gZm9yIG5leHQgbGluZSBpbiBtdWx0aWxpbmUgdGV4dFxyXG4gICAgICogICAgMCBnICUgY29sb3JcclxuICAgICAqICAgIDI4LjM1IDgxMy41NCBUZCAlIHBvc2l0aW9uXHJcbiAgICAgKiAgICAobGluZSBvbmUpIFRqXHJcbiAgICAgKiAgICBUKiAobGluZSB0d28pIFRqXHJcbiAgICAgKiAgICBUKiAobGluZSB0aHJlZSkgVGpcclxuICAgICAqICAgRVRcclxuICAgICAqL1xyXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICB2YXIgc2NvcGUgPSBvcHRpb25zLnNjb3BlIHx8IHRoaXM7XHJcbiAgICB2YXIgcGF5bG9hZCwgZGEsIGFuZ2xlLCBhbGlnbiwgY2hhclNwYWNlLCBtYXhXaWR0aCwgZmxhZ3MsIGhvcml6b250YWxTY2FsZTtcclxuXHJcbiAgICAvLyBQcmUtQXVndXN0LTIwMTIgdGhlIG9yZGVyIG9mIGFyZ3VtZW50cyB3YXMgZnVuY3Rpb24oeCwgeSwgdGV4dCwgZmxhZ3MpXHJcbiAgICAvLyBpbiBlZmZvcnQgdG8gbWFrZSBhbGwgY2FsbHMgaGF2ZSBzaW1pbGFyIHNpZ25hdHVyZSBsaWtlXHJcbiAgICAvLyAgIGZ1bmN0aW9uKGRhdGEsIGNvb3JkaW5hdGVzLi4uICwgbWlzY2VsbGFuZW91cylcclxuICAgIC8vIHRoaXMgbWV0aG9kIGhhZCBpdHMgYXJncyBmbGlwcGVkLlxyXG4gICAgLy8gY29kZSBiZWxvdyBhbGxvd3MgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIG9sZCBhcmcgb3JkZXIuXHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiB0ZXh0ID09PSBcIm51bWJlclwiICYmXHJcbiAgICAgIHR5cGVvZiB4ID09PSBcIm51bWJlclwiICYmXHJcbiAgICAgICh0eXBlb2YgeSA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KHkpKVxyXG4gICAgKSB7XHJcbiAgICAgIHZhciB0bXAgPSB5O1xyXG4gICAgICB5ID0geDtcclxuICAgICAgeCA9IHRleHQ7XHJcbiAgICAgIHRleHQgPSB0bXA7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRyYW5zZm9ybWF0aW9uTWF0cml4O1xyXG5cclxuICAgIGlmIChhcmd1bWVudHNbM10gaW5zdGFuY2VvZiBNYXRyaXggPT09IGZhbHNlKSB7XHJcbiAgICAgIGZsYWdzID0gYXJndW1lbnRzWzNdO1xyXG4gICAgICBhbmdsZSA9IGFyZ3VtZW50c1s0XTtcclxuICAgICAgYWxpZ24gPSBhcmd1bWVudHNbNV07XHJcblxyXG4gICAgICBpZiAodHlwZW9mIGZsYWdzICE9PSBcIm9iamVjdFwiIHx8IGZsYWdzID09PSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhbmdsZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgYWxpZ24gPSBhbmdsZTtcclxuICAgICAgICAgIGFuZ2xlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmbGFncyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgYWxpZ24gPSBmbGFncztcclxuICAgICAgICAgIGZsYWdzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmbGFncyA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgYW5nbGUgPSBmbGFncztcclxuICAgICAgICAgIGZsYWdzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgIGZsYWdzOiBmbGFncyxcclxuICAgICAgICAgIGFuZ2xlOiBhbmdsZSxcclxuICAgICAgICAgIGFsaWduOiBhbGlnblxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFkdmFuY2VkQXBpTW9kZVRyYXAoXHJcbiAgICAgICAgXCJUaGUgdHJhbnNmb3JtIHBhcmFtZXRlciBvZiB0ZXh0KCkgd2l0aCBhIE1hdHJpeCB2YWx1ZVwiXHJcbiAgICAgICk7XHJcbiAgICAgIHRyYW5zZm9ybWF0aW9uTWF0cml4ID0gdHJhbnNmb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSB8fCB0eXBlb2YgdGV4dCA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi50ZXh0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gc2NvcGU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHh0cmEgPSBcIlwiO1xyXG4gICAgdmFyIGlzSGV4ID0gZmFsc2U7XHJcbiAgICB2YXIgbGluZUhlaWdodCA9XHJcbiAgICAgIHR5cGVvZiBvcHRpb25zLmxpbmVIZWlnaHRGYWN0b3IgPT09IFwibnVtYmVyXCJcclxuICAgICAgICA/IG9wdGlvbnMubGluZUhlaWdodEZhY3RvclxyXG4gICAgICAgIDogbGluZUhlaWdodEZhY3RvcjtcclxuICAgIHZhciBzY2FsZUZhY3RvciA9IHNjb3BlLmludGVybmFsLnNjYWxlRmFjdG9yO1xyXG5cclxuICAgIGZ1bmN0aW9uIEVTQyhzKSB7XHJcbiAgICAgIHMgPSBzLnNwbGl0KFwiXFx0XCIpLmpvaW4oQXJyYXkob3B0aW9ucy5UYWJMZW4gfHwgOSkuam9pbihcIiBcIikpO1xyXG4gICAgICByZXR1cm4gcGRmRXNjYXBlKHMsIGZsYWdzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1UZXh0VG9TcGVjaWFsQXJyYXkodGV4dCkge1xyXG4gICAgICAvL3dlIGRvbid0IHdhbnQgdG8gZGVzdHJveSBvcmlnaW5hbCB0ZXh0IGFycmF5LCBzbyBjbG9uaW5nIGl0XHJcbiAgICAgIHZhciBzYSA9IHRleHQuY29uY2F0KCk7XHJcbiAgICAgIHZhciBkYSA9IFtdO1xyXG4gICAgICB2YXIgbGVuID0gc2EubGVuZ3RoO1xyXG4gICAgICB2YXIgY3VyRGE7XHJcbiAgICAgIC8vd2UgZG8gYXJyYXkuam9pbigndGV4dCB0aGF0IG11c3Qgbm90IGJlIFBERmVzY2FwZWRcIilcclxuICAgICAgLy90aHVzLCBwZGZFc2NhcGUgZWFjaCBjb21wb25lbnQgc2VwYXJhdGVseVxyXG4gICAgICB3aGlsZSAobGVuLS0pIHtcclxuICAgICAgICBjdXJEYSA9IHNhLnNoaWZ0KCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJEYSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgZGEucHVzaChjdXJEYSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh0ZXh0KSAmJlxyXG4gICAgICAgICAgICAoY3VyRGEubGVuZ3RoID09PSAxIHx8XHJcbiAgICAgICAgICAgICAgKGN1ckRhWzFdID09PSB1bmRlZmluZWQgJiYgY3VyRGFbMl0gPT09IHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgZGEucHVzaChjdXJEYVswXSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYS5wdXNoKFtjdXJEYVswXSwgY3VyRGFbMV0sIGN1ckRhWzJdXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkYTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcm9jZXNzVGV4dEJ5RnVuY3Rpb24odGV4dCwgcHJvY2Vzc2luZ0Z1bmN0aW9uKSB7XHJcbiAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIHJlc3VsdCA9IHByb2Nlc3NpbmdGdW5jdGlvbih0ZXh0KVswXTtcclxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRleHQpKSB7XHJcbiAgICAgICAgLy93ZSBkb24ndCB3YW50IHRvIGRlc3Ryb3kgb3JpZ2luYWwgdGV4dCBhcnJheSwgc28gY2xvbmluZyBpdFxyXG4gICAgICAgIHZhciBzYSA9IHRleHQuY29uY2F0KCk7XHJcbiAgICAgICAgdmFyIGRhID0gW107XHJcbiAgICAgICAgdmFyIGxlbiA9IHNhLmxlbmd0aDtcclxuICAgICAgICB2YXIgY3VyRGE7XHJcbiAgICAgICAgdmFyIHRtcFJlc3VsdDtcclxuICAgICAgICAvL3dlIGRvIGFycmF5LmpvaW4oJ3RleHQgdGhhdCBtdXN0IG5vdCBiZSBQREZlc2NhcGVkXCIpXHJcbiAgICAgICAgLy90aHVzLCBwZGZFc2NhcGUgZWFjaCBjb21wb25lbnQgc2VwYXJhdGVseVxyXG4gICAgICAgIHdoaWxlIChsZW4tLSkge1xyXG4gICAgICAgICAgY3VyRGEgPSBzYS5zaGlmdCgpO1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBjdXJEYSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBkYS5wdXNoKHByb2Nlc3NpbmdGdW5jdGlvbihjdXJEYSlbMF0pO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGN1ckRhKSAmJiB0eXBlb2YgY3VyRGFbMF0gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgdG1wUmVzdWx0ID0gcHJvY2Vzc2luZ0Z1bmN0aW9uKGN1ckRhWzBdLCBjdXJEYVsxXSwgY3VyRGFbMl0pO1xyXG4gICAgICAgICAgICBkYS5wdXNoKFt0bXBSZXN1bHRbMF0sIHRtcFJlc3VsdFsxXSwgdG1wUmVzdWx0WzJdXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc3VsdCA9IGRhO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9DaGVjayBpZiB0ZXh0IGlzIG9mIHR5cGUgU3RyaW5nXHJcbiAgICB2YXIgdGV4dElzT2ZUeXBlU3RyaW5nID0gZmFsc2U7XHJcbiAgICB2YXIgdG1wVGV4dElzT2ZUeXBlU3RyaW5nID0gdHJ1ZTtcclxuXHJcbiAgICBpZiAodHlwZW9mIHRleHQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgdGV4dElzT2ZUeXBlU3RyaW5nID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0ZXh0KSkge1xyXG4gICAgICAvL3dlIGRvbid0IHdhbnQgdG8gZGVzdHJveSBvcmlnaW5hbCB0ZXh0IGFycmF5LCBzbyBjbG9uaW5nIGl0XHJcbiAgICAgIHZhciBzYSA9IHRleHQuY29uY2F0KCk7XHJcbiAgICAgIGRhID0gW107XHJcbiAgICAgIHZhciBsZW4gPSBzYS5sZW5ndGg7XHJcbiAgICAgIHZhciBjdXJEYTtcclxuICAgICAgLy93ZSBkbyBhcnJheS5qb2luKCd0ZXh0IHRoYXQgbXVzdCBub3QgYmUgUERGZXNjYXBlZFwiKVxyXG4gICAgICAvL3RodXMsIHBkZkVzY2FwZSBlYWNoIGNvbXBvbmVudCBzZXBhcmF0ZWx5XHJcbiAgICAgIHdoaWxlIChsZW4tLSkge1xyXG4gICAgICAgIGN1ckRhID0gc2Euc2hpZnQoKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgY3VyRGEgIT09IFwic3RyaW5nXCIgfHxcclxuICAgICAgICAgIChBcnJheS5pc0FycmF5KGN1ckRhKSAmJiB0eXBlb2YgY3VyRGFbMF0gIT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0bXBUZXh0SXNPZlR5cGVTdHJpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGV4dElzT2ZUeXBlU3RyaW5nID0gdG1wVGV4dElzT2ZUeXBlU3RyaW5nO1xyXG4gICAgfVxyXG4gICAgaWYgKHRleHRJc09mVHlwZVN0cmluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICdUeXBlIG9mIHRleHQgbXVzdCBiZSBzdHJpbmcgb3IgQXJyYXkuIFwiJyArXHJcbiAgICAgICAgICB0ZXh0ICtcclxuICAgICAgICAgICdcIiBpcyBub3QgcmVjb2duaXplZC4nXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9JZiB0aGVyZSBhcmUgYW55IG5ld2xpbmVzIGluIHRleHQsIHdlIGFzc3VtZVxyXG4gICAgLy90aGUgdXNlciB3YW50ZWQgdG8gcHJpbnQgbXVsdGlwbGUgbGluZXMsIHNvIGJyZWFrIHRoZVxyXG4gICAgLy90ZXh0IHVwIGludG8gYW4gYXJyYXkuIElmIHRoZSB0ZXh0IGlzIGFscmVhZHkgYW4gYXJyYXksXHJcbiAgICAvL3dlIGFzc3VtZSB0aGUgdXNlciBrbm93cyB3aGF0IHRoZXkgYXJlIGRvaW5nLlxyXG4gICAgLy9Db252ZXJ0IHRleHQgaW50byBhbiBhcnJheSBhbnl3YXkgdG8gc2ltcGxpZnlcclxuICAgIC8vbGF0ZXIgY29kZS5cclxuXHJcbiAgICBpZiAodHlwZW9mIHRleHQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgaWYgKHRleHQubWF0Y2goL1tcXHI/XFxuXS8pKSB7XHJcbiAgICAgICAgdGV4dCA9IHRleHQuc3BsaXQoL1xcclxcbnxcXHJ8XFxuL2cpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRleHQgPSBbdGV4dF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL2Jhc2VsaW5lXHJcbiAgICB2YXIgaGVpZ2h0ID0gYWN0aXZlRm9udFNpemUgLyBzY29wZS5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcclxuICAgIHZhciBkZXNjZW50ID0gaGVpZ2h0ICogKGxpbmVIZWlnaHQgLSAxKTtcclxuXHJcbiAgICBzd2l0Y2ggKG9wdGlvbnMuYmFzZWxpbmUpIHtcclxuICAgICAgY2FzZSBcImJvdHRvbVwiOlxyXG4gICAgICAgIHkgLT0gZGVzY2VudDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInRvcFwiOlxyXG4gICAgICAgIHkgKz0gaGVpZ2h0IC0gZGVzY2VudDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImhhbmdpbmdcIjpcclxuICAgICAgICB5ICs9IGhlaWdodCAtIDIgKiBkZXNjZW50O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwibWlkZGxlXCI6XHJcbiAgICAgICAgeSArPSBoZWlnaHQgLyAyIC0gZGVzY2VudDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImlkZW9ncmFwaGljXCI6XHJcbiAgICAgIGNhc2UgXCJhbHBoYWJldGljXCI6XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgLy8gZG8gbm90aGluZywgZXZlcnl0aGluZyBpcyBmaW5lXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgLy9tdWx0aWxpbmVcclxuICAgIG1heFdpZHRoID0gb3B0aW9ucy5tYXhXaWR0aCB8fCAwO1xyXG5cclxuICAgIGlmIChtYXhXaWR0aCA+IDApIHtcclxuICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgdGV4dCA9IHNjb3BlLnNwbGl0VGV4dFRvU2l6ZSh0ZXh0LCBtYXhXaWR0aCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRleHQpID09PSBcIltvYmplY3QgQXJyYXldXCIpIHtcclxuICAgICAgICB0ZXh0ID0gdGV4dC5yZWR1Y2UoZnVuY3Rpb24oYWNjLCB0ZXh0TGluZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoc2NvcGUuc3BsaXRUZXh0VG9TaXplKHRleHRMaW5lLCBtYXhXaWR0aCkpO1xyXG4gICAgICAgIH0sIFtdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vY3JlYXRpbmcgUGF5bG9hZC1PYmplY3QgdG8gbWFrZSB0ZXh0IGJ5UmVmXHJcbiAgICBwYXlsb2FkID0ge1xyXG4gICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICB4OiB4LFxyXG4gICAgICB5OiB5LFxyXG4gICAgICBvcHRpb25zOiBvcHRpb25zLFxyXG4gICAgICBtdXRleDoge1xyXG4gICAgICAgIHBkZkVzY2FwZTogcGRmRXNjYXBlLFxyXG4gICAgICAgIGFjdGl2ZUZvbnRLZXk6IGFjdGl2ZUZvbnRLZXksXHJcbiAgICAgICAgZm9udHM6IGZvbnRzLFxyXG4gICAgICAgIGFjdGl2ZUZvbnRTaXplOiBhY3RpdmVGb250U2l6ZVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJwcmVQcm9jZXNzVGV4dFwiLCBwYXlsb2FkKTtcclxuXHJcbiAgICB0ZXh0ID0gcGF5bG9hZC50ZXh0O1xyXG4gICAgb3B0aW9ucyA9IHBheWxvYWQub3B0aW9ucztcclxuXHJcbiAgICAvL2FuZ2xlXHJcbiAgICBhbmdsZSA9IG9wdGlvbnMuYW5nbGU7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB0cmFuc2Zvcm1hdGlvbk1hdHJpeCBpbnN0YW5jZW9mIE1hdHJpeCA9PT0gZmFsc2UgJiZcclxuICAgICAgYW5nbGUgJiZcclxuICAgICAgdHlwZW9mIGFuZ2xlID09PSBcIm51bWJlclwiXHJcbiAgICApIHtcclxuICAgICAgYW5nbGUgKj0gTWF0aC5QSSAvIDE4MDtcclxuXHJcbiAgICAgIGlmIChvcHRpb25zLnJvdGF0aW9uRGlyZWN0aW9uID09PSAwKSB7XHJcbiAgICAgICAgYW5nbGUgPSAtYW5nbGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChhcGlNb2RlID09PSBBcGlNb2RlLkFEVkFOQ0VEKSB7XHJcbiAgICAgICAgYW5nbGUgPSAtYW5nbGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBjID0gTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICB2YXIgcyA9IE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgdHJhbnNmb3JtYXRpb25NYXRyaXggPSBuZXcgTWF0cml4KGMsIHMsIC1zLCBjLCAwLCAwKTtcclxuICAgIH0gZWxzZSBpZiAoYW5nbGUgJiYgYW5nbGUgaW5zdGFuY2VvZiBNYXRyaXgpIHtcclxuICAgICAgdHJhbnNmb3JtYXRpb25NYXRyaXggPSBhbmdsZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXBpTW9kZSA9PT0gQXBpTW9kZS5BRFZBTkNFRCAmJiAhdHJhbnNmb3JtYXRpb25NYXRyaXgpIHtcclxuICAgICAgdHJhbnNmb3JtYXRpb25NYXRyaXggPSBpZGVudGl0eU1hdHJpeDtcclxuICAgIH1cclxuXHJcbiAgICAvL2NoYXJTcGFjZVxyXG5cclxuICAgIGNoYXJTcGFjZSA9IG9wdGlvbnMuY2hhclNwYWNlIHx8IGFjdGl2ZUNoYXJTcGFjZTtcclxuXHJcbiAgICBpZiAodHlwZW9mIGNoYXJTcGFjZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB4dHJhICs9IGhwZihzY2FsZShjaGFyU3BhY2UpKSArIFwiIFRjXFxuXCI7XHJcbiAgICAgIHRoaXMuc2V0Q2hhclNwYWNlKHRoaXMuZ2V0Q2hhclNwYWNlKCkgfHwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgaG9yaXpvbnRhbFNjYWxlID0gb3B0aW9ucy5ob3Jpem9udGFsU2NhbGU7XHJcbiAgICBpZiAodHlwZW9mIGhvcml6b250YWxTY2FsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB4dHJhICs9IGhwZihob3Jpem9udGFsU2NhbGUgKiAxMDApICsgXCIgVHpcXG5cIjtcclxuICAgIH1cclxuXHJcbiAgICAvL2xhbmdcclxuXHJcbiAgICB2YXIgbGFuZyA9IG9wdGlvbnMubGFuZztcclxuXHJcbiAgICBpZiAobGFuZykge1xyXG4gICAgICAvLyAgICB4dHJhICs9IFwiL0xhbmcgKFwiICsgbGFuZyArXCIpXFxuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLy9yZW5kZXJpbmdNb2RlXHJcbiAgICB2YXIgcmVuZGVyaW5nTW9kZSA9IC0xO1xyXG4gICAgdmFyIHBhcm1SZW5kZXJpbmdNb2RlID1cclxuICAgICAgdHlwZW9mIG9wdGlvbnMucmVuZGVyaW5nTW9kZSAhPT0gXCJ1bmRlZmluZWRcIlxyXG4gICAgICAgID8gb3B0aW9ucy5yZW5kZXJpbmdNb2RlXHJcbiAgICAgICAgOiBvcHRpb25zLnN0cm9rZTtcclxuICAgIHZhciBwYWdlQ29udGV4dCA9IHNjb3BlLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VDb250ZXh0O1xyXG5cclxuICAgIHN3aXRjaCAocGFybVJlbmRlcmluZ01vZGUpIHtcclxuICAgICAgY2FzZSAwOlxyXG4gICAgICBjYXNlIGZhbHNlOlxyXG4gICAgICBjYXNlIFwiZmlsbFwiOlxyXG4gICAgICAgIHJlbmRlcmluZ01vZGUgPSAwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgIGNhc2UgdHJ1ZTpcclxuICAgICAgY2FzZSBcInN0cm9rZVwiOlxyXG4gICAgICAgIHJlbmRlcmluZ01vZGUgPSAxO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDI6XHJcbiAgICAgIGNhc2UgXCJmaWxsVGhlblN0cm9rZVwiOlxyXG4gICAgICAgIHJlbmRlcmluZ01vZGUgPSAyO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDM6XHJcbiAgICAgIGNhc2UgXCJpbnZpc2libGVcIjpcclxuICAgICAgICByZW5kZXJpbmdNb2RlID0gMztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA0OlxyXG4gICAgICBjYXNlIFwiZmlsbEFuZEFkZEZvckNsaXBwaW5nXCI6XHJcbiAgICAgICAgcmVuZGVyaW5nTW9kZSA9IDQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNTpcclxuICAgICAgY2FzZSBcInN0cm9rZUFuZEFkZFBhdGhGb3JDbGlwcGluZ1wiOlxyXG4gICAgICAgIHJlbmRlcmluZ01vZGUgPSA1O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDY6XHJcbiAgICAgIGNhc2UgXCJmaWxsVGhlblN0cm9rZUFuZEFkZFRvUGF0aEZvckNsaXBwaW5nXCI6XHJcbiAgICAgICAgcmVuZGVyaW5nTW9kZSA9IDY7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNzpcclxuICAgICAgY2FzZSBcImFkZFRvUGF0aEZvckNsaXBwaW5nXCI6XHJcbiAgICAgICAgcmVuZGVyaW5nTW9kZSA9IDc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHVzZWRSZW5kZXJpbmdNb2RlID1cclxuICAgICAgdHlwZW9mIHBhZ2VDb250ZXh0LnVzZWRSZW5kZXJpbmdNb2RlICE9PSBcInVuZGVmaW5lZFwiXHJcbiAgICAgICAgPyBwYWdlQ29udGV4dC51c2VkUmVuZGVyaW5nTW9kZVxyXG4gICAgICAgIDogLTE7XHJcblxyXG4gICAgLy9pZiB0aGUgY29kZXIgd3JvdGUgaXQgZXhwbGljaXRseSB0byB1c2UgYSBzcGVjaWZpY1xyXG4gICAgLy9yZW5kZXJpbmdNb2RlLCB0aGVuIHVzZSBpdFxyXG4gICAgaWYgKHJlbmRlcmluZ01vZGUgIT09IC0xKSB7XHJcbiAgICAgIHh0cmEgKz0gcmVuZGVyaW5nTW9kZSArIFwiIFRyXFxuXCI7XHJcbiAgICAgIC8vb3RoZXJ3aXNlIGNoZWNrIGlmIHdlIHVzZWQgdGhlIHJlbmRlcmluZyBNb2RlIGFscmVhZHlcclxuICAgICAgLy9pZiBzbyB0aGVuIHNldCB0aGUgcmVuZGVyaW5nIE1vZGUuLi5cclxuICAgIH0gZWxzZSBpZiAodXNlZFJlbmRlcmluZ01vZGUgIT09IC0xKSB7XHJcbiAgICAgIHh0cmEgKz0gXCIwIFRyXFxuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlbmRlcmluZ01vZGUgIT09IC0xKSB7XHJcbiAgICAgIHBhZ2VDb250ZXh0LnVzZWRSZW5kZXJpbmdNb2RlID0gcmVuZGVyaW5nTW9kZTtcclxuICAgIH1cclxuXHJcbiAgICAvL2FsaWduXHJcbiAgICBhbGlnbiA9IG9wdGlvbnMuYWxpZ24gfHwgXCJsZWZ0XCI7XHJcbiAgICB2YXIgbGVhZGluZyA9IGFjdGl2ZUZvbnRTaXplICogbGluZUhlaWdodDtcclxuICAgIHZhciBwYWdlV2lkdGggPSBzY29wZS5pbnRlcm5hbC5wYWdlU2l6ZS5nZXRXaWR0aCgpO1xyXG4gICAgdmFyIGFjdGl2ZUZvbnQgPSBmb250c1thY3RpdmVGb250S2V5XTtcclxuICAgIGNoYXJTcGFjZSA9IG9wdGlvbnMuY2hhclNwYWNlIHx8IGFjdGl2ZUNoYXJTcGFjZTtcclxuICAgIG1heFdpZHRoID0gb3B0aW9ucy5tYXhXaWR0aCB8fCAwO1xyXG5cclxuICAgIHZhciBsaW5lV2lkdGhzO1xyXG4gICAgZmxhZ3MgPSBPYmplY3QuYXNzaWduKHsgYXV0b2VuY29kZTogdHJ1ZSwgbm9CT006IHRydWUgfSwgb3B0aW9ucy5mbGFncyk7XHJcblxyXG4gICAgdmFyIHdvcmRTcGFjaW5nUGVyTGluZSA9IFtdO1xyXG5cclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGV4dCkgPT09IFwiW29iamVjdCBBcnJheV1cIikge1xyXG4gICAgICBkYSA9IHRyYW5zZm9ybVRleHRUb1NwZWNpYWxBcnJheSh0ZXh0KTtcclxuICAgICAgdmFyIG5ld1k7XHJcbiAgICAgIGlmIChhbGlnbiAhPT0gXCJsZWZ0XCIpIHtcclxuICAgICAgICBsaW5lV2lkdGhzID0gZGEubWFwKGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIChzY29wZS5nZXRTdHJpbmdVbml0V2lkdGgodiwge1xyXG4gICAgICAgICAgICAgIGZvbnQ6IGFjdGl2ZUZvbnQsXHJcbiAgICAgICAgICAgICAgY2hhclNwYWNlOiBjaGFyU3BhY2UsXHJcbiAgICAgICAgICAgICAgZm9udFNpemU6IGFjdGl2ZUZvbnRTaXplLFxyXG4gICAgICAgICAgICAgIGRvS2VybmluZzogZmFsc2VcclxuICAgICAgICAgICAgfSkgKlxyXG4gICAgICAgICAgICAgIGFjdGl2ZUZvbnRTaXplKSAvXHJcbiAgICAgICAgICAgIHNjYWxlRmFjdG9yXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vVGhlIGZpcnN0IGxpbmUgdXNlcyB0aGUgXCJtYWluXCIgVGQgc2V0dGluZyxcclxuICAgICAgLy9hbmQgdGhlIHN1YnNlcXVlbnQgbGluZXMgYXJlIG9mZnNldCBieSB0aGVcclxuICAgICAgLy9wcmV2aW91cyBsaW5lJ3MgeCBjb29yZGluYXRlLlxyXG4gICAgICB2YXIgcHJldldpZHRoID0gMDtcclxuICAgICAgdmFyIG5ld1g7XHJcbiAgICAgIGlmIChhbGlnbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgLy9UaGUgcGFzc2VkIGluIHggY29vcmRpbmF0ZSBkZWZpbmVzIHRoZVxyXG4gICAgICAgIC8vcmlnaHRtb3N0IHBvaW50IG9mIHRoZSB0ZXh0LlxyXG4gICAgICAgIHggLT0gbGluZVdpZHRoc1swXTtcclxuICAgICAgICB0ZXh0ID0gW107XHJcbiAgICAgICAgbGVuID0gZGEubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZSh4KTtcclxuICAgICAgICAgICAgbmV3WSA9IGdldFZlcnRpY2FsQ29vcmRpbmF0ZSh5KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSBzY2FsZShwcmV2V2lkdGggLSBsaW5lV2lkdGhzW2ldKTtcclxuICAgICAgICAgICAgbmV3WSA9IC1sZWFkaW5nO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGV4dC5wdXNoKFtkYVtpXSwgbmV3WCwgbmV3WV0pO1xyXG4gICAgICAgICAgcHJldldpZHRoID0gbGluZVdpZHRoc1tpXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09IFwiY2VudGVyXCIpIHtcclxuICAgICAgICAvL1RoZSBwYXNzZWQgaW4geCBjb29yZGluYXRlIGRlZmluZXNcclxuICAgICAgICAvL3RoZSBjZW50ZXIgcG9pbnQuXHJcbiAgICAgICAgeCAtPSBsaW5lV2lkdGhzWzBdIC8gMjtcclxuICAgICAgICB0ZXh0ID0gW107XHJcbiAgICAgICAgbGVuID0gZGEubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgIGlmIChqID09PSAwKSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZSh4KTtcclxuICAgICAgICAgICAgbmV3WSA9IGdldFZlcnRpY2FsQ29vcmRpbmF0ZSh5KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld1ggPSBzY2FsZSgocHJldldpZHRoIC0gbGluZVdpZHRoc1tqXSkgLyAyKTtcclxuICAgICAgICAgICAgbmV3WSA9IC1sZWFkaW5nO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGV4dC5wdXNoKFtkYVtqXSwgbmV3WCwgbmV3WV0pO1xyXG4gICAgICAgICAgcHJldldpZHRoID0gbGluZVdpZHRoc1tqXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09IFwibGVmdFwiKSB7XHJcbiAgICAgICAgdGV4dCA9IFtdO1xyXG4gICAgICAgIGxlbiA9IGRhLmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciBoID0gMDsgaCA8IGxlbjsgaCsrKSB7XHJcbiAgICAgICAgICB0ZXh0LnB1c2goZGFbaF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gXCJqdXN0aWZ5XCIpIHtcclxuICAgICAgICB0ZXh0ID0gW107XHJcbiAgICAgICAgbGVuID0gZGEubGVuZ3RoO1xyXG4gICAgICAgIG1heFdpZHRoID0gbWF4V2lkdGggIT09IDAgPyBtYXhXaWR0aCA6IHBhZ2VXaWR0aDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBsZW47IGwrKykge1xyXG4gICAgICAgICAgbmV3WSA9IGwgPT09IDAgPyBnZXRWZXJ0aWNhbENvb3JkaW5hdGUoeSkgOiAtbGVhZGluZztcclxuICAgICAgICAgIG5ld1ggPSBsID09PSAwID8gZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGUoeCkgOiAwO1xyXG4gICAgICAgICAgaWYgKGwgPCBsZW4gLSAxKSB7XHJcbiAgICAgICAgICAgIHdvcmRTcGFjaW5nUGVyTGluZS5wdXNoKFxyXG4gICAgICAgICAgICAgIGhwZihcclxuICAgICAgICAgICAgICAgIHNjYWxlKFxyXG4gICAgICAgICAgICAgICAgICAobWF4V2lkdGggLSBsaW5lV2lkdGhzW2xdKSAvIChkYVtsXS5zcGxpdChcIiBcIikubGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3b3JkU3BhY2luZ1BlckxpbmUucHVzaCgwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRleHQucHVzaChbZGFbbF0sIG5ld1gsIG5ld1ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgJ1VucmVjb2duaXplZCBhbGlnbm1lbnQgb3B0aW9uLCB1c2UgXCJsZWZ0XCIsIFwiY2VudGVyXCIsIFwicmlnaHRcIiBvciBcImp1c3RpZnlcIi4nXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vUjJMXHJcbiAgICB2YXIgZG9SZXZlcnNpbmcgPSB0eXBlb2Ygb3B0aW9ucy5SMkwgPT09IFwiYm9vbGVhblwiID8gb3B0aW9ucy5SMkwgOiBSMkw7XHJcbiAgICBpZiAoZG9SZXZlcnNpbmcgPT09IHRydWUpIHtcclxuICAgICAgdGV4dCA9IHByb2Nlc3NUZXh0QnlGdW5jdGlvbih0ZXh0LCBmdW5jdGlvbih0ZXh0LCBwb3NYLCBwb3NZKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgLnNwbGl0KFwiXCIpXHJcbiAgICAgICAgICAgIC5yZXZlcnNlKClcclxuICAgICAgICAgICAgLmpvaW4oXCJcIiksXHJcbiAgICAgICAgICBwb3NYLFxyXG4gICAgICAgICAgcG9zWVxyXG4gICAgICAgIF07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vY3JlYXRpbmcgUGF5bG9hZC1PYmplY3QgdG8gbWFrZSB0ZXh0IGJ5UmVmXHJcbiAgICBwYXlsb2FkID0ge1xyXG4gICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICB4OiB4LFxyXG4gICAgICB5OiB5LFxyXG4gICAgICBvcHRpb25zOiBvcHRpb25zLFxyXG4gICAgICBtdXRleDoge1xyXG4gICAgICAgIHBkZkVzY2FwZTogcGRmRXNjYXBlLFxyXG4gICAgICAgIGFjdGl2ZUZvbnRLZXk6IGFjdGl2ZUZvbnRLZXksXHJcbiAgICAgICAgZm9udHM6IGZvbnRzLFxyXG4gICAgICAgIGFjdGl2ZUZvbnRTaXplOiBhY3RpdmVGb250U2l6ZVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJwb3N0UHJvY2Vzc1RleHRcIiwgcGF5bG9hZCk7XHJcblxyXG4gICAgdGV4dCA9IHBheWxvYWQudGV4dDtcclxuICAgIGlzSGV4ID0gcGF5bG9hZC5tdXRleC5pc0hleCB8fCBmYWxzZTtcclxuXHJcbiAgICAvL0VzY2FwaW5nXHJcbiAgICB2YXIgYWN0aXZlRm9udEVuY29kaW5nID0gZm9udHNbYWN0aXZlRm9udEtleV0uZW5jb2Rpbmc7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICBhY3RpdmVGb250RW5jb2RpbmcgPT09IFwiV2luQW5zaUVuY29kaW5nXCIgfHxcclxuICAgICAgYWN0aXZlRm9udEVuY29kaW5nID09PSBcIlN0YW5kYXJkRW5jb2RpbmdcIlxyXG4gICAgKSB7XHJcbiAgICAgIHRleHQgPSBwcm9jZXNzVGV4dEJ5RnVuY3Rpb24odGV4dCwgZnVuY3Rpb24odGV4dCwgcG9zWCwgcG9zWSkge1xyXG4gICAgICAgIHJldHVybiBbRVNDKHRleHQpLCBwb3NYLCBwb3NZXTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGEgPSB0cmFuc2Zvcm1UZXh0VG9TcGVjaWFsQXJyYXkodGV4dCk7XHJcblxyXG4gICAgdGV4dCA9IFtdO1xyXG4gICAgdmFyIFNUUklORyA9IDA7XHJcbiAgICB2YXIgQVJSQVkgPSAxO1xyXG4gICAgdmFyIHZhcmlhbnQgPSBBcnJheS5pc0FycmF5KGRhWzBdKSA/IEFSUkFZIDogU1RSSU5HO1xyXG4gICAgdmFyIHBvc1g7XHJcbiAgICB2YXIgcG9zWTtcclxuICAgIHZhciBjb250ZW50O1xyXG4gICAgdmFyIHdvcmRTcGFjaW5nID0gXCJcIjtcclxuXHJcbiAgICB2YXIgZ2VuZXJhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uKFxyXG4gICAgICBwYXJtUG9zWCxcclxuICAgICAgcGFybVBvc1ksXHJcbiAgICAgIHBhcm1UcmFuc2Zvcm1hdGlvbk1hdHJpeFxyXG4gICAgKSB7XHJcbiAgICAgIHZhciBwb3NpdGlvbiA9IFwiXCI7XHJcbiAgICAgIGlmIChwYXJtVHJhbnNmb3JtYXRpb25NYXRyaXggaW5zdGFuY2VvZiBNYXRyaXgpIHtcclxuICAgICAgICAvLyBJdCBpcyBraW5kIG9mIG1vcmUgaW50dWl0aXZlIHRvIGFwcGx5IGEgcGxhaW4gcm90YXRpb24gYXJvdW5kIHRoZSB0ZXh0IGFuY2hvciBzZXQgYnkgeCBhbmQgeVxyXG4gICAgICAgIC8vIGJ1dCB3aGVuIHRoZSB1c2VyIHN1cHBsaWVzIGFuIGFyYml0cmFyeSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXgsIHRoZSB4IGFuZCB5IG9mZnNldHMgc2hvdWxkIGJlIGFwcGxpZWRcclxuICAgICAgICAvLyBpbiB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gZXN0YWJsaXNoZWQgYnkgdGhpcyBtYXRyaXhcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYW5nbGUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgIHBhcm1UcmFuc2Zvcm1hdGlvbk1hdHJpeCA9IG1hdHJpeE11bHQoXHJcbiAgICAgICAgICAgIHBhcm1UcmFuc2Zvcm1hdGlvbk1hdHJpeCxcclxuICAgICAgICAgICAgbmV3IE1hdHJpeCgxLCAwLCAwLCAxLCBwYXJtUG9zWCwgcGFybVBvc1kpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwYXJtVHJhbnNmb3JtYXRpb25NYXRyaXggPSBtYXRyaXhNdWx0KFxyXG4gICAgICAgICAgICBuZXcgTWF0cml4KDEsIDAsIDAsIDEsIHBhcm1Qb3NYLCBwYXJtUG9zWSksXHJcbiAgICAgICAgICAgIHBhcm1UcmFuc2Zvcm1hdGlvbk1hdHJpeFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhcGlNb2RlID09PSBBcGlNb2RlLkFEVkFOQ0VEKSB7XHJcbiAgICAgICAgICBwYXJtVHJhbnNmb3JtYXRpb25NYXRyaXggPSBtYXRyaXhNdWx0KFxyXG4gICAgICAgICAgICBuZXcgTWF0cml4KDEsIDAsIDAsIC0xLCAwLCAwKSxcclxuICAgICAgICAgICAgcGFybVRyYW5zZm9ybWF0aW9uTWF0cml4XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9zaXRpb24gPSBwYXJtVHJhbnNmb3JtYXRpb25NYXRyaXguam9pbihcIiBcIikgKyBcIiBUbVxcblwiO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBvc2l0aW9uID0gaHBmKHBhcm1Qb3NYKSArIFwiIFwiICsgaHBmKHBhcm1Qb3NZKSArIFwiIFRkXFxuXCI7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gICAgfTtcclxuXHJcbiAgICBmb3IgKHZhciBsaW5lSW5kZXggPSAwOyBsaW5lSW5kZXggPCBkYS5sZW5ndGg7IGxpbmVJbmRleCsrKSB7XHJcbiAgICAgIHdvcmRTcGFjaW5nID0gXCJcIjtcclxuXHJcbiAgICAgIHN3aXRjaCAodmFyaWFudCkge1xyXG4gICAgICAgIGNhc2UgQVJSQVk6XHJcbiAgICAgICAgICBjb250ZW50ID1cclxuICAgICAgICAgICAgKGlzSGV4ID8gXCI8XCIgOiBcIihcIikgKyBkYVtsaW5lSW5kZXhdWzBdICsgKGlzSGV4ID8gXCI+XCIgOiBcIilcIik7XHJcbiAgICAgICAgICBwb3NYID0gcGFyc2VGbG9hdChkYVtsaW5lSW5kZXhdWzFdKTtcclxuICAgICAgICAgIHBvc1kgPSBwYXJzZUZsb2F0KGRhW2xpbmVJbmRleF1bMl0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBTVFJJTkc6XHJcbiAgICAgICAgICBjb250ZW50ID0gKGlzSGV4ID8gXCI8XCIgOiBcIihcIikgKyBkYVtsaW5lSW5kZXhdICsgKGlzSGV4ID8gXCI+XCIgOiBcIilcIik7XHJcbiAgICAgICAgICBwb3NYID0gZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGUoeCk7XHJcbiAgICAgICAgICBwb3NZID0gZ2V0VmVydGljYWxDb29yZGluYXRlKHkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICB0eXBlb2Ygd29yZFNwYWNpbmdQZXJMaW5lICE9PSBcInVuZGVmaW5lZFwiICYmXHJcbiAgICAgICAgdHlwZW9mIHdvcmRTcGFjaW5nUGVyTGluZVtsaW5lSW5kZXhdICE9PSBcInVuZGVmaW5lZFwiXHJcbiAgICAgICkge1xyXG4gICAgICAgIHdvcmRTcGFjaW5nID0gd29yZFNwYWNpbmdQZXJMaW5lW2xpbmVJbmRleF0gKyBcIiBUd1xcblwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobGluZUluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgdGV4dC5wdXNoKFxyXG4gICAgICAgICAgd29yZFNwYWNpbmcgK1xyXG4gICAgICAgICAgICBnZW5lcmF0ZVBvc2l0aW9uKHBvc1gsIHBvc1ksIHRyYW5zZm9ybWF0aW9uTWF0cml4KSArXHJcbiAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2UgaWYgKHZhcmlhbnQgPT09IFNUUklORykge1xyXG4gICAgICAgIHRleHQucHVzaCh3b3JkU3BhY2luZyArIGNvbnRlbnQpO1xyXG4gICAgICB9IGVsc2UgaWYgKHZhcmlhbnQgPT09IEFSUkFZKSB7XHJcbiAgICAgICAgdGV4dC5wdXNoKFxyXG4gICAgICAgICAgd29yZFNwYWNpbmcgK1xyXG4gICAgICAgICAgICBnZW5lcmF0ZVBvc2l0aW9uKHBvc1gsIHBvc1ksIHRyYW5zZm9ybWF0aW9uTWF0cml4KSArXHJcbiAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGV4dCA9IHZhcmlhbnQgPT09IFNUUklORyA/IHRleHQuam9pbihcIiBUalxcblQqIFwiKSA6IHRleHQuam9pbihcIiBUalxcblwiKTtcclxuICAgIHRleHQgKz0gXCIgVGpcXG5cIjtcclxuXHJcbiAgICB2YXIgcmVzdWx0ID0gXCJCVFxcbi9cIjtcclxuICAgIHJlc3VsdCArPSBhY3RpdmVGb250S2V5ICsgXCIgXCIgKyBhY3RpdmVGb250U2l6ZSArIFwiIFRmXFxuXCI7IC8vIGZvbnQgZmFjZSwgc3R5bGUsIHNpemVcclxuICAgIHJlc3VsdCArPSBocGYoYWN0aXZlRm9udFNpemUgKiBsaW5lSGVpZ2h0KSArIFwiIFRMXFxuXCI7IC8vIGxpbmUgc3BhY2luZ1xyXG4gICAgcmVzdWx0ICs9IHRleHRDb2xvciArIFwiXFxuXCI7XHJcbiAgICByZXN1bHQgKz0geHRyYTtcclxuICAgIHJlc3VsdCArPSB0ZXh0O1xyXG4gICAgcmVzdWx0ICs9IFwiRVRcIjtcclxuXHJcbiAgICBvdXQocmVzdWx0KTtcclxuICAgIHVzZWRGb250c1thY3RpdmVGb250S2V5XSA9IHRydWU7XHJcbiAgICByZXR1cm4gc2NvcGU7XHJcbiAgfTtcclxuXHJcbiAgLy8gUERGIHN1cHBvcnRzIHRoZXNlIHBhdGggcGFpbnRpbmcgYW5kIGNsaXAgcGF0aCBvcGVyYXRvcnM6XHJcbiAgLy9cclxuICAvLyBTIC0gc3Ryb2tlXHJcbiAgLy8gcyAtIGNsb3NlL3N0cm9rZVxyXG4gIC8vIGYgKEYpIC0gZmlsbCBub24temVyb1xyXG4gIC8vIGYqIC0gZmlsbCBldmVub2RkXHJcbiAgLy8gQiAtIGZpbGwgc3Ryb2tlIG5vbnplcm9cclxuICAvLyBCKiAtIGZpbGwgc3Ryb2tlIGV2ZW5vZGRcclxuICAvLyBiIC0gY2xvc2UgZmlsbCBzdHJva2Ugbm9uemVyb1xyXG4gIC8vIGIqIC0gY2xvc2UgZmlsbCBzdHJva2UgZXZlbm9kZFxyXG4gIC8vIG4gLSBub3RoaW5nIChjb25zdW1lIHBhdGgpXHJcbiAgLy8gVyAtIGNsaXAgbm9uemVyb1xyXG4gIC8vIFcqIC0gY2xpcCBldmVub2RkXHJcbiAgLy9cclxuICAvLyBJbiBvcmRlciB0byBrZWVwIHRoZSBBUEkgc21hbGwsIHdlIG9taXQgdGhlIGNsb3NlLWFuZC1maWxsL3N0cm9rZSBvcGVyYXRvcnMgYW5kIHByb3ZpZGUgYSBzZXBhcmF0ZSBjbG9zZSgpXHJcbiAgLy8gbWV0aG9kLlxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQG5hbWUgY2xpcFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlIE9ubHkgcG9zc2libGUgdmFsdWUgaXMgJ2V2ZW5vZGQnXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAZGVzY3JpcHRpb24gQWxsIC5jbGlwKCkgYWZ0ZXIgY2FsbGluZyBkcmF3aW5nIG9wcyB3aXRoIGEgc3R5bGUgYXJndW1lbnQgb2YgbnVsbC5cclxuICAgKi9cclxuICB2YXIgY2xpcCA9IChBUEkuX19wcml2YXRlX18uY2xpcCA9IEFQSS5jbGlwID0gZnVuY3Rpb24ocnVsZSkge1xyXG4gICAgLy8gQ2FsbCAuY2xpcCgpIGFmdGVyIGNhbGxpbmcgZHJhd2luZyBvcHMgd2l0aCBhIHN0eWxlIGFyZ3VtZW50IG9mIG51bGxcclxuICAgIC8vIFcgaXMgdGhlIFBERiBjbGlwcGluZyBvcFxyXG4gICAgaWYgKFwiZXZlbm9kZFwiID09PSBydWxlKSB7XHJcbiAgICAgIG91dChcIlcqXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb3V0KFwiV1wiKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBjbGlwRXZlbk9kZFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQGRlc2NyaXB0aW9uIE1vZGlmeSB0aGUgY3VycmVudCBjbGlwIHBhdGggYnkgaW50ZXJzZWN0aW5nIGl0IHdpdGggdGhlIGN1cnJlbnQgcGF0aCB1c2luZyB0aGUgZXZlbi1vZGQgcnVsZS4gTm90ZVxyXG4gICAqIHRoYXQgdGhpcyB3aWxsIE5PVCBjb25zdW1lIHRoZSBjdXJyZW50IHBhdGguIEluIG9yZGVyIHRvIG9ubHkgdXNlIHRoaXMgcGF0aCBmb3IgY2xpcHBpbmcgY2FsbFxyXG4gICAqIHtAbGluayBBUEkuZGlzY2FyZFBhdGh9IGFmdGVyd2FyZHMuXHJcbiAgICovXHJcbiAgQVBJLmNsaXBFdmVuT2RkID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gY2xpcChcImV2ZW5vZGRcIik7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3VtZXMgdGhlIGN1cnJlbnQgcGF0aCB3aXRob3V0IGFueSBlZmZlY3QuIE1haW5seSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGgge0BsaW5rIGNsaXB9IG9yXHJcbiAgICoge0BsaW5rIGNsaXBFdmVuT2RkfS4gVGhlIFBERiBcIm5cIiBvcGVyYXRvci5cclxuICAgKiBAbmFtZSBkaXNjYXJkUGF0aFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLmRpc2NhcmRQYXRoID0gQVBJLmRpc2NhcmRQYXRoID0gZnVuY3Rpb24oKSB7XHJcbiAgICBvdXQoXCJuXCIpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGlzVmFsaWRTdHlsZSA9IChBUEkuX19wcml2YXRlX18uaXNWYWxpZFN0eWxlID0gZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgIHZhciB2YWxpZFN0eWxlVmFyaWFudHMgPSBbXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgbnVsbCxcclxuICAgICAgXCJTXCIsXHJcbiAgICAgIFwiRFwiLFxyXG4gICAgICBcIkZcIixcclxuICAgICAgXCJERlwiLFxyXG4gICAgICBcIkZEXCIsXHJcbiAgICAgIFwiZlwiLFxyXG4gICAgICBcImYqXCIsXHJcbiAgICAgIFwiQlwiLFxyXG4gICAgICBcIkIqXCIsXHJcbiAgICAgIFwiblwiXHJcbiAgICBdO1xyXG4gICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgaWYgKHZhbGlkU3R5bGVWYXJpYW50cy5pbmRleE9mKHN0eWxlKSAhPT0gLTEpIHtcclxuICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSk7XHJcblxyXG4gIEFQSS5fX3ByaXZhdGVfXy5zZXREZWZhdWx0UGF0aE9wZXJhdGlvbiA9IEFQSS5zZXREZWZhdWx0UGF0aE9wZXJhdGlvbiA9IGZ1bmN0aW9uKFxyXG4gICAgb3BlcmF0b3JcclxuICApIHtcclxuICAgIGlmIChpc1ZhbGlkU3R5bGUob3BlcmF0b3IpKSB7XHJcbiAgICAgIGRlZmF1bHRQYXRoT3BlcmF0aW9uID0gb3BlcmF0b3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICB2YXIgZ2V0U3R5bGUgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldFN0eWxlID0gQVBJLmdldFN0eWxlID0gZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgIC8vIHNlZSBwYXRoLXBhaW50aW5nIG9wZXJhdG9ycyBpbiBQREYgc3BlY1xyXG4gICAgdmFyIG9wID0gZGVmYXVsdFBhdGhPcGVyYXRpb247IC8vIHN0cm9rZVxyXG5cclxuICAgIHN3aXRjaCAoc3R5bGUpIHtcclxuICAgICAgY2FzZSBcIkRcIjpcclxuICAgICAgY2FzZSBcIlNcIjpcclxuICAgICAgICBvcCA9IFwiU1wiOyAvLyBzdHJva2VcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIkZcIjpcclxuICAgICAgICBvcCA9IFwiZlwiOyAvLyBmaWxsXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJGRFwiOlxyXG4gICAgICBjYXNlIFwiREZcIjpcclxuICAgICAgICBvcCA9IFwiQlwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiZlwiOlxyXG4gICAgICBjYXNlIFwiZipcIjpcclxuICAgICAgY2FzZSBcIkJcIjpcclxuICAgICAgY2FzZSBcIkIqXCI6XHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgICAgQWxsb3cgZGlyZWN0IHVzZSBvZiB0aGVzZSBQREYgcGF0aC1wYWludGluZyBvcGVyYXRvcnM6XHJcbiAgICAgICAgICAgICAgIC0gZiAgICBmaWxsIHVzaW5nIG5vbnplcm8gd2luZGluZyBudW1iZXIgcnVsZVxyXG4gICAgICAgICAgICAgICAtIGYqICAgIGZpbGwgdXNpbmcgZXZlbi1vZGQgcnVsZVxyXG4gICAgICAgICAgICAgICAtIEIgICAgZmlsbCB0aGVuIHN0cm9rZSB3aXRoIGZpbGwgdXNpbmcgbm9uLXplcm8gd2luZGluZyBudW1iZXIgcnVsZVxyXG4gICAgICAgICAgICAgICAtIEIqICAgIGZpbGwgdGhlbiBzdHJva2Ugd2l0aCBmaWxsIHVzaW5nIGV2ZW4tb2RkIHJ1bGVcclxuICAgICAgICAgICAgICAgKi9cclxuICAgICAgICBvcCA9IHN0eWxlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBDbG9zZSB0aGUgY3VycmVudCBwYXRoLiBUaGUgUERGIFwiaFwiIG9wZXJhdG9yLlxyXG4gICAqIEBuYW1lIGNsb3NlXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKi9cclxuICB2YXIgY2xvc2UgPSAoQVBJLmNsb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBvdXQoXCJoXCIpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0cm9rZSB0aGUgcGF0aC4gVGhlIFBERiBcIlNcIiBvcGVyYXRvci5cclxuICAgKiBAbmFtZSBzdHJva2VcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqL1xyXG4gIEFQSS5zdHJva2UgPSBmdW5jdGlvbigpIHtcclxuICAgIG91dChcIlNcIik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBGaWxsIHRoZSBjdXJyZW50IHBhdGggdXNpbmcgdGhlIG5vbnplcm8gd2luZGluZyBudW1iZXIgcnVsZS4gSWYgYSBwYXR0ZXJuIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIGJlIGZpbGxlZFxyXG4gICAqIHdpdGggdGhpcyBwYXR0ZXJuLCBvdGhlcndpc2Ugd2l0aCB0aGUgY3VycmVudCBmaWxsIGNvbG9yLiBFcXVpdmFsZW50IHRvIHRoZSBQREYgXCJmXCIgb3BlcmF0b3IuXHJcbiAgICogQG5hbWUgZmlsbFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSB7UGF0dGVybkRhdGE9fSBwYXR0ZXJuIElmIHByb3ZpZGVkIHRoZSBwYXRoIHdpbGwgYmUgZmlsbGVkIHdpdGggdGhpcyBwYXR0ZXJuXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKi9cclxuICBBUEkuZmlsbCA9IGZ1bmN0aW9uKHBhdHRlcm4pIHtcclxuICAgIGZpbGxXaXRoT3B0aW9uYWxQYXR0ZXJuKFwiZlwiLCBwYXR0ZXJuKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEZpbGwgdGhlIGN1cnJlbnQgcGF0aCB1c2luZyB0aGUgZXZlbi1vZGQgcnVsZS4gVGhlIFBERiBmKiBvcGVyYXRvci5cclxuICAgKiBAc2VlIEFQSS5maWxsXHJcbiAgICogQG5hbWUgZmlsbEV2ZW5PZGRcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcGFyYW0ge1BhdHRlcm5EYXRhPX0gcGF0dGVybiBJZiBwcm92aWRlZCB0aGUgcGF0aCB3aWxsIGJlIGZpbGxlZCB3aXRoIHRoaXMgcGF0dGVyblxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICovXHJcbiAgQVBJLmZpbGxFdmVuT2RkID0gZnVuY3Rpb24ocGF0dGVybikge1xyXG4gICAgZmlsbFdpdGhPcHRpb25hbFBhdHRlcm4oXCJmKlwiLCBwYXR0ZXJuKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEZpbGwgdXNpbmcgdGhlIG5vbnplcm8gd2luZGluZyBudW1iZXIgcnVsZSBhbmQgdGhlbiBzdHJva2UgdGhlIGN1cnJlbnQgUGF0aC4gVGhlIFBERiBcIkJcIiBvcGVyYXRvci5cclxuICAgKiBAc2VlIEFQSS5maWxsXHJcbiAgICogQG5hbWUgZmlsbFN0cm9rZVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSB7UGF0dGVybkRhdGE9fSBwYXR0ZXJuIElmIHByb3ZpZGVkIHRoZSBwYXRoIHdpbGwgYmUgc3Ryb2tlZCB3aXRoIHRoaXMgcGF0dGVyblxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICovXHJcbiAgQVBJLmZpbGxTdHJva2UgPSBmdW5jdGlvbihwYXR0ZXJuKSB7XHJcbiAgICBmaWxsV2l0aE9wdGlvbmFsUGF0dGVybihcIkJcIiwgcGF0dGVybik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBGaWxsIHVzaW5nIHRoZSBldmVuLW9kZCBydWxlIGFuZCB0aGVuIHN0cm9rZSB0aGUgY3VycmVudCBQYXRoLiBUaGUgUERGIFwiQlwiIG9wZXJhdG9yLlxyXG4gICAqIEBzZWUgQVBJLmZpbGxcclxuICAgKiBAbmFtZSBmaWxsU3Ryb2tlRXZlbk9kZFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSB7UGF0dGVybkRhdGE9fSBwYXR0ZXJuIElmIHByb3ZpZGVkIHRoZSBwYXRoIHdpbGwgYmUgZmlsbC1zdHJva2VkIHdpdGggdGhpcyBwYXR0ZXJuXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKi9cclxuICBBUEkuZmlsbFN0cm9rZUV2ZW5PZGQgPSBmdW5jdGlvbihwYXR0ZXJuKSB7XHJcbiAgICBmaWxsV2l0aE9wdGlvbmFsUGF0dGVybihcIkIqXCIsIHBhdHRlcm4pO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGZpbGxXaXRoT3B0aW9uYWxQYXR0ZXJuID0gZnVuY3Rpb24oc3R5bGUsIHBhdHRlcm4pIHtcclxuICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICBmaWxsV2l0aFBhdHRlcm4ocGF0dGVybiwgc3R5bGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb3V0KHN0eWxlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcHV0U3R5bGUgPSBmdW5jdGlvbihzdHlsZSkge1xyXG4gICAgaWYgKFxyXG4gICAgICBzdHlsZSA9PT0gbnVsbCB8fFxyXG4gICAgICAoYXBpTW9kZSA9PT0gQXBpTW9kZS5BRFZBTkNFRCAmJiBzdHlsZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzdHlsZSA9IGdldFN0eWxlKHN0eWxlKTtcclxuXHJcbiAgICAvLyBzdHJva2luZyAvIGZpbGxpbmcgLyBib3RoIHRoZSBwYXRoXHJcbiAgICBvdXQoc3R5bGUpO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGNsb25lVGlsaW5nUGF0dGVybihwYXR0ZXJuS2V5LCBib3VuZGluZ0JveCwgeFN0ZXAsIHlTdGVwLCBtYXRyaXgpIHtcclxuICAgIHZhciBjbG9uZSA9IG5ldyBUaWxpbmdQYXR0ZXJuKFxyXG4gICAgICBib3VuZGluZ0JveCB8fCB0aGlzLmJvdW5kaW5nQm94LFxyXG4gICAgICB4U3RlcCB8fCB0aGlzLnhTdGVwLFxyXG4gICAgICB5U3RlcCB8fCB0aGlzLnlTdGVwLFxyXG4gICAgICB0aGlzLmdTdGF0ZSxcclxuICAgICAgbWF0cml4IHx8IHRoaXMubWF0cml4XHJcbiAgICApO1xyXG4gICAgY2xvbmUuc3RyZWFtID0gdGhpcy5zdHJlYW07XHJcbiAgICB2YXIga2V5ID0gcGF0dGVybktleSArIFwiJCRcIiArIHRoaXMuY2xvbmVJbmRleCsrICsgXCIkJFwiO1xyXG4gICAgYWRkUGF0dGVybihrZXksIGNsb25lKTtcclxuICAgIHJldHVybiBjbG9uZTtcclxuICB9XHJcblxyXG4gIHZhciBmaWxsV2l0aFBhdHRlcm4gPSBmdW5jdGlvbihwYXR0ZXJuRGF0YSwgc3R5bGUpIHtcclxuICAgIHZhciBwYXR0ZXJuSWQgPSBwYXR0ZXJuTWFwW3BhdHRlcm5EYXRhLmtleV07XHJcbiAgICB2YXIgcGF0dGVybiA9IHBhdHRlcm5zW3BhdHRlcm5JZF07XHJcblxyXG4gICAgaWYgKHBhdHRlcm4gaW5zdGFuY2VvZiBTaGFkaW5nUGF0dGVybikge1xyXG4gICAgICBvdXQoXCJxXCIpO1xyXG5cclxuICAgICAgb3V0KGNsaXBSdWxlRnJvbVN0eWxlKHN0eWxlKSk7XHJcblxyXG4gICAgICBpZiAocGF0dGVybi5nU3RhdGUpIHtcclxuICAgICAgICBBUEkuc2V0R1N0YXRlKHBhdHRlcm4uZ1N0YXRlKTtcclxuICAgICAgfVxyXG4gICAgICBvdXQocGF0dGVybkRhdGEubWF0cml4LnRvU3RyaW5nKCkgKyBcIiBjbVwiKTtcclxuICAgICAgb3V0KFwiL1wiICsgcGF0dGVybklkICsgXCIgc2hcIik7XHJcbiAgICAgIG91dChcIlFcIik7XHJcbiAgICB9IGVsc2UgaWYgKHBhdHRlcm4gaW5zdGFuY2VvZiBUaWxpbmdQYXR0ZXJuKSB7XHJcbiAgICAgIC8vIHBkZiBkcmF3cyBwYXR0ZXJucyBzdGFydGluZyBhdCB0aGUgYm90dG9tIGxlZnQgY29ybmVyIGFuZCB0aGV5IGFyZSBub3QgYWZmZWN0ZWQgYnkgdGhlIGdsb2JhbCB0cmFuc2Zvcm1hdGlvbixcclxuICAgICAgLy8gc28gd2UgbXVzdCBmbGlwIHRoZW1cclxuICAgICAgdmFyIG1hdHJpeCA9IG5ldyBNYXRyaXgoMSwgMCwgMCwgLTEsIDAsIGdldFBhZ2VIZWlnaHQoKSk7XHJcblxyXG4gICAgICBpZiAocGF0dGVybkRhdGEubWF0cml4KSB7XHJcbiAgICAgICAgbWF0cml4ID0gbWF0cml4Lm11bHRpcGx5KHBhdHRlcm5EYXRhLm1hdHJpeCB8fCBpZGVudGl0eU1hdHJpeCk7XHJcbiAgICAgICAgLy8gd2UgY2Fubm90IGFwcGx5IGEgbWF0cml4IHRvIHRoZSBwYXR0ZXJuIG9uIHVzZSBzbyB3ZSBtdXN0IGFidXNlIHRoZSBwYXR0ZXJuIG1hdHJpeCBhbmQgY3JlYXRlIG5ldyBpbnN0YW5jZXNcclxuICAgICAgICAvLyBmb3IgZWFjaCB1c2VcclxuICAgICAgICBwYXR0ZXJuSWQgPSBjbG9uZVRpbGluZ1BhdHRlcm4uY2FsbChcclxuICAgICAgICAgIHBhdHRlcm4sXHJcbiAgICAgICAgICBwYXR0ZXJuRGF0YS5rZXksXHJcbiAgICAgICAgICBwYXR0ZXJuRGF0YS5ib3VuZGluZ0JveCxcclxuICAgICAgICAgIHBhdHRlcm5EYXRhLnhTdGVwLFxyXG4gICAgICAgICAgcGF0dGVybkRhdGEueVN0ZXAsXHJcbiAgICAgICAgICBtYXRyaXhcclxuICAgICAgICApLmlkO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBvdXQoXCJxXCIpO1xyXG4gICAgICBvdXQoXCIvUGF0dGVybiBjc1wiKTtcclxuICAgICAgb3V0KFwiL1wiICsgcGF0dGVybklkICsgXCIgc2NuXCIpO1xyXG5cclxuICAgICAgaWYgKHBhdHRlcm4uZ1N0YXRlKSB7XHJcbiAgICAgICAgQVBJLnNldEdTdGF0ZShwYXR0ZXJuLmdTdGF0ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG91dChzdHlsZSk7XHJcbiAgICAgIG91dChcIlFcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIGNsaXBSdWxlRnJvbVN0eWxlID0gZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgIHN3aXRjaCAoc3R5bGUpIHtcclxuICAgICAgY2FzZSBcImZcIjpcclxuICAgICAgY2FzZSBcIkZcIjpcclxuICAgICAgICByZXR1cm4gXCJXIG5cIjtcclxuICAgICAgY2FzZSBcImYqXCI6XHJcbiAgICAgICAgcmV0dXJuIFwiVyogblwiO1xyXG4gICAgICBjYXNlIFwiQlwiOlxyXG4gICAgICAgIHJldHVybiBcIlcgU1wiO1xyXG4gICAgICBjYXNlIFwiQipcIjpcclxuICAgICAgICByZXR1cm4gXCJXKiBTXCI7XHJcblxyXG4gICAgICAvLyB0aGVzZSB0d28gYXJlIGZvciBjb21wYXRpYmlsaXR5IHJlYXNvbnMgKGluIHRoZSBwYXN0LCBjYWxsaW5nIGFueSBwcmltaXRpdmUgbWV0aG9kIHdpdGggYSBzaGFkaW5nIHBhdHRlcm5cclxuICAgICAgLy8gYW5kIFwiblwiL1wiU1wiIGFzIHN0eWxlIHdvdWxkIHN0aWxsIGZpbGwvZmlsbCBhbmQgc3Ryb2tlIHRoZSBwYXRoKVxyXG4gICAgICBjYXNlIFwiU1wiOlxyXG4gICAgICAgIHJldHVybiBcIlcgU1wiO1xyXG4gICAgICBjYXNlIFwiblwiOlxyXG4gICAgICAgIHJldHVybiBcIlcgblwiO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEJlZ2luIGEgbmV3IHN1YnBhdGggYnkgbW92aW5nIHRoZSBjdXJyZW50IHBvaW50IHRvIGNvb3JkaW5hdGVzICh4LCB5KS4gVGhlIFBERiBcIm1cIiBvcGVyYXRvci5cclxuICAgKiBAcGFyYW0ge251bWJlcn0geFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAgICogQG5hbWUgbW92ZVRvXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKi9cclxuICB2YXIgbW92ZVRvID0gKEFQSS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICBvdXQoaHBmKHNjYWxlKHgpKSArIFwiIFwiICsgaHBmKHRyYW5zZm9ybVNjYWxlWSh5KSkgKyBcIiBtXCIpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFwcGVuZCBhIHN0cmFpZ2h0IGxpbmUgc2VnbWVudCBmcm9tIHRoZSBjdXJyZW50IHBvaW50IHRvIHRoZSBwb2ludCAoeCwgeSkuIFRoZSBQREYgXCJsXCIgb3BlcmF0b3IuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcclxuICAgKiBAcGFyYW0ge251bWJlcn0geVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBsaW5lVG9cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqL1xyXG4gIHZhciBsaW5lVG8gPSAoQVBJLmxpbmVUbyA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIG91dChocGYoc2NhbGUoeCkpICsgXCIgXCIgKyBocGYodHJhbnNmb3JtU2NhbGVZKHkpKSArIFwiIGxcIik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogQXBwZW5kIGEgY3ViaWMgQsOpemllciBjdXJ2ZSB0byB0aGUgY3VycmVudCBwYXRoLiBUaGUgY3VydmUgc2hhbGwgZXh0ZW5kIGZyb20gdGhlIGN1cnJlbnQgcG9pbnQgdG8gdGhlIHBvaW50XHJcbiAgICogKHgzLCB5MyksIHVzaW5nICh4MSwgeTEpIGFuZCAoeDIsIHkyKSBhcyBCw6l6aWVyIGNvbnRyb2wgcG9pbnRzLiBUaGUgbmV3IGN1cnJlbnQgcG9pbnQgc2hhbGwgYmUgKHgzLCB4MykuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHgxXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkxXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHgyXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkyXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHgzXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkzXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGN1cnZlVG9cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqL1xyXG4gIHZhciBjdXJ2ZVRvID0gKEFQSS5jdXJ2ZVRvID0gZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIsIHgzLCB5Mykge1xyXG4gICAgb3V0KFxyXG4gICAgICBbXHJcbiAgICAgICAgaHBmKHNjYWxlKHgxKSksXHJcbiAgICAgICAgaHBmKHRyYW5zZm9ybVNjYWxlWSh5MSkpLFxyXG4gICAgICAgIGhwZihzY2FsZSh4MikpLFxyXG4gICAgICAgIGhwZih0cmFuc2Zvcm1TY2FsZVkoeTIpKSxcclxuICAgICAgICBocGYoc2NhbGUoeDMpKSxcclxuICAgICAgICBocGYodHJhbnNmb3JtU2NhbGVZKHkzKSksXHJcbiAgICAgICAgXCJjXCJcclxuICAgICAgXS5qb2luKFwiIFwiKVxyXG4gICAgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBEcmF3IGEgbGluZSBvbiB0aGUgY3VycmVudCBwYWdlLlxyXG4gICAqXHJcbiAgICogQG5hbWUgbGluZVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5MVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4MlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5MlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHlsZSBBIHN0cmluZyBzcGVjaWZ5aW5nIHRoZSBwYWludGluZyBzdHlsZSBvciBudWxsLiAgVmFsaWQgc3R5bGVzIGluY2x1ZGU6ICdTJyBbZGVmYXVsdF0gLSBzdHJva2UsICdGJyAtIGZpbGwsICBhbmQgJ0RGJyAob3IgJ0ZEJykgLSAgZmlsbCB0aGVuIHN0cm9rZS4gQSBudWxsIHZhbHVlIHBvc3Rwb25lcyBzZXR0aW5nIHRoZSBzdHlsZSBzbyB0aGF0IGEgc2hhcGUgbWF5IGJlIGNvbXBvc2VkIHVzaW5nIG11bHRpcGxlIG1ldGhvZCBjYWxscy4gVGhlIGxhc3QgZHJhd2luZyBtZXRob2QgY2FsbCB1c2VkIHRvIGRlZmluZSB0aGUgc2hhcGUgc2hvdWxkIG5vdCBoYXZlIGEgbnVsbCBzdHlsZSBhcmd1bWVudC4gZGVmYXVsdDogJ1MnXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18ubGluZSA9IEFQSS5saW5lID0gZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIsIHN0eWxlKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGlzTmFOKHgxKSB8fFxyXG4gICAgICBpc05hTih5MSkgfHxcclxuICAgICAgaXNOYU4oeDIpIHx8XHJcbiAgICAgIGlzTmFOKHkyKSB8fFxyXG4gICAgICAhaXNWYWxpZFN0eWxlKHN0eWxlKVxyXG4gICAgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5saW5lXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGFwaU1vZGUgPT09IEFwaU1vZGUuQ09NUEFUKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmxpbmVzKFtbeDIgLSB4MSwgeTIgLSB5MV1dLCB4MSwgeTEsIFsxLCAxXSwgc3R5bGUgfHwgXCJTXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMubGluZXMoW1t4MiAtIHgxLCB5MiAtIHkxXV0sIHgxLCB5MSwgWzEsIDFdKS5zdHJva2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBQYXR0ZXJuRGF0YVxyXG4gICAqIHtNYXRyaXh8dW5kZWZpbmVkfSBtYXRyaXhcclxuICAgKiB7TnVtYmVyfHVuZGVmaW5lZH0geFN0ZXBcclxuICAgKiB7TnVtYmVyfHVuZGVmaW5lZH0geVN0ZXBcclxuICAgKiB7QXJyYXkuPE51bWJlcj58dW5kZWZpbmVkfSBib3VuZGluZ0JveFxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiBBZGRzIHNlcmllcyBvZiBjdXJ2ZXMgKHN0cmFpZ2h0IGxpbmVzIG9yIGN1YmljIGJlemllciBjdXJ2ZXMpIHRvIGNhbnZhcywgc3RhcnRpbmcgYXQgYHhgLCBgeWAgY29vcmRpbmF0ZXMuXHJcbiAgICogQWxsIGRhdGEgcG9pbnRzIGluIGBsaW5lc2AgYXJlIHJlbGF0aXZlIHRvIGxhc3QgbGluZSBvcmlnaW4uXHJcbiAgICogYHhgLCBgeWAgYmVjb21lIHgxLHkxIGZvciBmaXJzdCBsaW5lIC8gY3VydmUgaW4gdGhlIHNldC5cclxuICAgKiBGb3IgbGluZXMgeW91IG9ubHkgbmVlZCB0byBzcGVjaWZ5IFt4MiwgeTJdIC0gKGVuZGluZyBwb2ludCkgdmVjdG9yIGFnYWluc3QgeDEsIHkxIHN0YXJ0aW5nIHBvaW50LlxyXG4gICAqIEZvciBiZXppZXIgY3VydmVzIHlvdSBuZWVkIHRvIHNwZWNpZnkgW3gyLHkyLHgzLHkzLHg0LHk0XSAtIHZlY3RvcnMgdG8gY29udHJvbCBwb2ludHMgMSwgMiwgZW5kaW5nIHBvaW50LiBBbGwgdmVjdG9ycyBhcmUgYWdhaW5zdCB0aGUgc3RhcnQgb2YgdGhlIGN1cnZlIC0geDEseTEuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAubGluZXMoW1syLDJdLFstMiwyXSxbMSwxLDIsMiwzLDNdLFsyLDFdXSwgMjEyLDExMCwgWzEsMV0sICdGJywgZmFsc2UpIC8vIGxpbmUsIGxpbmUsIGJlemllciBjdXJ2ZSwgbGluZVxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGxpbmVzIEFycmF5IG9mICp2ZWN0b3IqIHNoaWZ0cyBhcyBwYWlycyAobGluZXMpIG9yIHNleHRldHMgKGN1YmljIGJlemllciBjdXJ2ZXMpLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IENvb3JkaW5hdGUgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpIGFnYWluc3QgbGVmdCBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCB1cHBlciBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNjYWxlIChEZWZhdWx0cyB0byBbMS4wLDEuMF0pIHgseSBTY2FsaW5nIGZhY3RvciBmb3IgYWxsIHZlY3RvcnMuIEVsZW1lbnRzIGNhbiBiZSBhbnkgZmxvYXRpbmcgbnVtYmVyIFN1Yi1vbmUgbWFrZXMgZHJhd2luZyBzbWFsbGVyLiBPdmVyLW9uZSBncm93cyB0aGUgZHJhd2luZy4gTmVnYXRpdmUgZmxpcHMgdGhlIGRpcmVjdGlvbi5cclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHN0eWxlIEEgc3RyaW5nIHNwZWNpZnlpbmcgdGhlIHBhaW50aW5nIHN0eWxlIG9yIG51bGwuIFZhbGlkIHN0eWxlcyBpbmNsdWRlOlxyXG4gICAqICdTJyBbZGVmYXVsdF0gLSBzdHJva2UsXHJcbiAgICogJ0YnIC0gZmlsbCxcclxuICAgKiBhbmQgJ0RGJyAob3IgJ0ZEJykgLSAgZmlsbCB0aGVuIHN0cm9rZS5cclxuICAgKiBJbiBcImNvbXBhdFwiIEFQSSBtb2RlLCBhIG51bGwgdmFsdWUgcG9zdHBvbmVzIHNldHRpbmcgdGhlIHN0eWxlIHNvIHRoYXQgYSBzaGFwZSBtYXkgYmUgY29tcG9zZWQgdXNpbmcgbXVsdGlwbGVcclxuICAgKiBtZXRob2QgY2FsbHMuIFRoZSBsYXN0IGRyYXdpbmcgbWV0aG9kIGNhbGwgdXNlZCB0byBkZWZpbmUgdGhlIHNoYXBlIHNob3VsZCBub3QgaGF2ZSBhIG51bGwgc3R5bGUgYXJndW1lbnQuXHJcbiAgICpcclxuICAgKiBJbiBcImFkdmFuY2VkXCIgQVBJIG1vZGUgdGhpcyBwYXJhbWV0ZXIgaXMgZGVwcmVjYXRlZC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBjbG9zZWQgSWYgdHJ1ZSwgdGhlIHBhdGggaXMgY2xvc2VkIHdpdGggYSBzdHJhaWdodCBsaW5lIGZyb20gdGhlIGVuZCBvZiB0aGUgbGFzdCBjdXJ2ZSB0byB0aGUgc3RhcnRpbmcgcG9pbnQuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBsaW5lc1xyXG4gICAqL1xyXG4gIEFQSS5fX3ByaXZhdGVfXy5saW5lcyA9IEFQSS5saW5lcyA9IGZ1bmN0aW9uKFxyXG4gICAgbGluZXMsXHJcbiAgICB4LFxyXG4gICAgeSxcclxuICAgIHNjYWxlLFxyXG4gICAgc3R5bGUsXHJcbiAgICBjbG9zZWRcclxuICApIHtcclxuICAgIHZhciBzY2FsZXgsIHNjYWxleSwgaSwgbCwgbGVnLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCB0bXA7XHJcblxyXG4gICAgLy8gUHJlLUF1Z3VzdC0yMDEyIHRoZSBvcmRlciBvZiBhcmd1bWVudHMgd2FzIGZ1bmN0aW9uKHgsIHksIGxpbmVzLCBzY2FsZSwgc3R5bGUpXHJcbiAgICAvLyBpbiBlZmZvcnQgdG8gbWFrZSBhbGwgY2FsbHMgaGF2ZSBzaW1pbGFyIHNpZ25hdHVyZSBsaWtlXHJcbiAgICAvLyAgIGZ1bmN0aW9uKGNvbnRlbnQsIGNvb3JkaW5hdGVYLCBjb29yZGluYXRlWSAsIG1pc2NlbGxhbmVvdXMpXHJcbiAgICAvLyB0aGlzIG1ldGhvZCBoYWQgaXRzIGFyZ3MgZmxpcHBlZC5cclxuICAgIC8vIGNvZGUgYmVsb3cgYWxsb3dzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCBvbGQgYXJnIG9yZGVyLlxyXG4gICAgaWYgKHR5cGVvZiBsaW5lcyA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICB0bXAgPSB5O1xyXG4gICAgICB5ID0geDtcclxuICAgICAgeCA9IGxpbmVzO1xyXG4gICAgICBsaW5lcyA9IHRtcDtcclxuICAgIH1cclxuXHJcbiAgICBzY2FsZSA9IHNjYWxlIHx8IFsxLCAxXTtcclxuICAgIGNsb3NlZCA9IGNsb3NlZCB8fCBmYWxzZTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGlzTmFOKHgpIHx8XHJcbiAgICAgIGlzTmFOKHkpIHx8XHJcbiAgICAgICFBcnJheS5pc0FycmF5KGxpbmVzKSB8fFxyXG4gICAgICAhQXJyYXkuaXNBcnJheShzY2FsZSkgfHxcclxuICAgICAgIWlzVmFsaWRTdHlsZShzdHlsZSkgfHxcclxuICAgICAgdHlwZW9mIGNsb3NlZCAhPT0gXCJib29sZWFuXCJcclxuICAgICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYubGluZXNcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc3RhcnRpbmcgcG9pbnRcclxuICAgIG1vdmVUbyh4LCB5KTtcclxuXHJcbiAgICBzY2FsZXggPSBzY2FsZVswXTtcclxuICAgIHNjYWxleSA9IHNjYWxlWzFdO1xyXG4gICAgbCA9IGxpbmVzLmxlbmd0aDtcclxuICAgIC8vLCB4MiwgeTIgLy8gYmV6aWVyIG9ubHkuIEluIHBhZ2UgZGVmYXVsdCBtZWFzdXJlbWVudCBcInVuaXRzXCIsICphZnRlciogc2NhbGluZ1xyXG4gICAgLy8sIHgzLCB5MyAvLyBiZXppZXIgb25seS4gSW4gcGFnZSBkZWZhdWx0IG1lYXN1cmVtZW50IFwidW5pdHNcIiwgKmFmdGVyKiBzY2FsaW5nXHJcbiAgICAvLyBlbmRpbmcgcG9pbnQgZm9yIGFsbCwgbGluZXMgYW5kIGJlemllci4gLiBJbiBwYWdlIGRlZmF1bHQgbWVhc3VyZW1lbnQgXCJ1bml0c1wiLCAqYWZ0ZXIqIHNjYWxpbmdcclxuICAgIHg0ID0geDsgLy8gbGFzdCAvIGVuZGluZyBwb2ludCA9IHN0YXJ0aW5nIHBvaW50IGZvciBmaXJzdCBpdGVtLlxyXG4gICAgeTQgPSB5OyAvLyBsYXN0IC8gZW5kaW5nIHBvaW50ID0gc3RhcnRpbmcgcG9pbnQgZm9yIGZpcnN0IGl0ZW0uXHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICBsZWcgPSBsaW5lc1tpXTtcclxuICAgICAgaWYgKGxlZy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAvLyBzaW1wbGUgbGluZVxyXG4gICAgICAgIHg0ID0gbGVnWzBdICogc2NhbGV4ICsgeDQ7IC8vIGhlcmUgbGFzdCB4NCB3YXMgcHJpb3IgZW5kaW5nIHBvaW50XHJcbiAgICAgICAgeTQgPSBsZWdbMV0gKiBzY2FsZXkgKyB5NDsgLy8gaGVyZSBsYXN0IHk0IHdhcyBwcmlvciBlbmRpbmcgcG9pbnRcclxuICAgICAgICBsaW5lVG8oeDQsIHk0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBiZXppZXIgY3VydmVcclxuICAgICAgICB4MiA9IGxlZ1swXSAqIHNjYWxleCArIHg0OyAvLyBoZXJlIGxhc3QgeDQgaXMgcHJpb3IgZW5kaW5nIHBvaW50XHJcbiAgICAgICAgeTIgPSBsZWdbMV0gKiBzY2FsZXkgKyB5NDsgLy8gaGVyZSBsYXN0IHk0IGlzIHByaW9yIGVuZGluZyBwb2ludFxyXG4gICAgICAgIHgzID0gbGVnWzJdICogc2NhbGV4ICsgeDQ7IC8vIGhlcmUgbGFzdCB4NCBpcyBwcmlvciBlbmRpbmcgcG9pbnRcclxuICAgICAgICB5MyA9IGxlZ1szXSAqIHNjYWxleSArIHk0OyAvLyBoZXJlIGxhc3QgeTQgaXMgcHJpb3IgZW5kaW5nIHBvaW50XHJcbiAgICAgICAgeDQgPSBsZWdbNF0gKiBzY2FsZXggKyB4NDsgLy8gaGVyZSBsYXN0IHg0IHdhcyBwcmlvciBlbmRpbmcgcG9pbnRcclxuICAgICAgICB5NCA9IGxlZ1s1XSAqIHNjYWxleSArIHk0OyAvLyBoZXJlIGxhc3QgeTQgd2FzIHByaW9yIGVuZGluZyBwb2ludFxyXG4gICAgICAgIGN1cnZlVG8oeDIsIHkyLCB4MywgeTMsIHg0LCB5NCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2xvc2VkKSB7XHJcbiAgICAgIGNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHV0U3R5bGUoc3R5bGUpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2ltaWxhciB0byB7QGxpbmsgQVBJLmxpbmVzfSBidXQgYWxsIGNvb3JkaW5hdGVzIGFyZSBpbnRlcnByZXRlZCBhcyBhYnNvbHV0ZSBjb29yZGluYXRlcyBpbnN0ZWFkIG9mIHJlbGF0aXZlLlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gbGluZXMgQW4gYXJyYXkgb2Yge29wOiBvcGVyYXRvciwgYzogY29vcmRpbmF0ZXN9IG9iamVjdCwgd2hlcmUgb3AgaXMgb25lIG9mIFwibVwiIChtb3ZlIHRvKSwgXCJsXCIgKGxpbmUgdG8pXHJcbiAgICogXCJjXCIgKGN1YmljIGJlemllciBjdXJ2ZSkgYW5kIFwiaFwiIChjbG9zZSAoc3ViKXBhdGgpKS4gYyBpcyBhbiBhcnJheSBvZiBjb29yZGluYXRlcy4gXCJtXCIgYW5kIFwibFwiIGV4cGVjdCB0d28sIFwiY1wiXHJcbiAgICogc2l4IGFuZCBcImhcIiBhbiBlbXB0eSBhcnJheSAob3IgdW5kZWZpbmVkKS5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIHBhdGhcclxuICAgKi9cclxuICBBUEkucGF0aCA9IGZ1bmN0aW9uKGxpbmVzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBsZWcgPSBsaW5lc1tpXTtcclxuICAgICAgdmFyIGNvb3JkcyA9IGxlZy5jO1xyXG4gICAgICBzd2l0Y2ggKGxlZy5vcCkge1xyXG4gICAgICAgIGNhc2UgXCJtXCI6XHJcbiAgICAgICAgICBtb3ZlVG8oY29vcmRzWzBdLCBjb29yZHNbMV0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImxcIjpcclxuICAgICAgICAgIGxpbmVUbyhjb29yZHNbMF0sIGNvb3Jkc1sxXSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiY1wiOlxyXG4gICAgICAgICAgY3VydmVUby5hcHBseSh0aGlzLCBjb29yZHMpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImhcIjpcclxuICAgICAgICAgIGNsb3NlKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSByZWN0YW5nbGUgdG8gUERGLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCBsZWZ0IGVkZ2Ugb2YgdGhlIHBhZ2VcclxuICAgKiBAcGFyYW0ge251bWJlcn0geSBDb29yZGluYXRlIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KSBhZ2FpbnN0IHVwcGVyIGVkZ2Ugb2YgdGhlIHBhZ2VcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdyBXaWR0aCAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudClcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBzdHlsZSBBIHN0cmluZyBzcGVjaWZ5aW5nIHRoZSBwYWludGluZyBzdHlsZSBvciBudWxsLiBWYWxpZCBzdHlsZXMgaW5jbHVkZTpcclxuICAgKiAnUycgW2RlZmF1bHRdIC0gc3Ryb2tlLFxyXG4gICAqICdGJyAtIGZpbGwsXHJcbiAgICogYW5kICdERicgKG9yICdGRCcpIC0gIGZpbGwgdGhlbiBzdHJva2UuXHJcbiAgICogSW4gXCJjb21wYXRcIiBBUEkgbW9kZSwgYSBudWxsIHZhbHVlIHBvc3Rwb25lcyBzZXR0aW5nIHRoZSBzdHlsZSBzbyB0aGF0IGEgc2hhcGUgbWF5IGJlIGNvbXBvc2VkIHVzaW5nIG11bHRpcGxlXHJcbiAgICogbWV0aG9kIGNhbGxzLiBUaGUgbGFzdCBkcmF3aW5nIG1ldGhvZCBjYWxsIHVzZWQgdG8gZGVmaW5lIHRoZSBzaGFwZSBzaG91bGQgbm90IGhhdmUgYSBudWxsIHN0eWxlIGFyZ3VtZW50LlxyXG4gICAqXHJcbiAgICogSW4gXCJhZHZhbmNlZFwiIEFQSSBtb2RlIHRoaXMgcGFyYW1ldGVyIGlzIGRlcHJlY2F0ZWQuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSByZWN0XHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnJlY3QgPSBBUEkucmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgsIHN0eWxlKSB7XHJcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkgfHwgaXNOYU4odykgfHwgaXNOYU4oaCkgfHwgIWlzVmFsaWRTdHlsZShzdHlsZSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLnJlY3RcIik7XHJcbiAgICB9XHJcbiAgICBpZiAoYXBpTW9kZSA9PT0gQXBpTW9kZS5DT01QQVQpIHtcclxuICAgICAgaCA9IC1oO1xyXG4gICAgfVxyXG5cclxuICAgIG91dChcclxuICAgICAgW1xyXG4gICAgICAgIGhwZihzY2FsZSh4KSksXHJcbiAgICAgICAgaHBmKHRyYW5zZm9ybVNjYWxlWSh5KSksXHJcbiAgICAgICAgaHBmKHNjYWxlKHcpKSxcclxuICAgICAgICBocGYoc2NhbGUoaCkpLFxyXG4gICAgICAgIFwicmVcIlxyXG4gICAgICBdLmpvaW4oXCIgXCIpXHJcbiAgICApO1xyXG5cclxuICAgIHB1dFN0eWxlKHN0eWxlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSB0cmlhbmdsZSB0byBQREYuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0geDEgQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCBsZWZ0IGVkZ2Ugb2YgdGhlIHBhZ2VcclxuICAgKiBAcGFyYW0ge251bWJlcn0geTEgQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCB1cHBlciBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHgyIENvb3JkaW5hdGUgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpIGFnYWluc3QgbGVmdCBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkyIENvb3JkaW5hdGUgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpIGFnYWluc3QgdXBwZXIgZWRnZSBvZiB0aGUgcGFnZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4MyBDb29yZGluYXRlIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KSBhZ2FpbnN0IGxlZnQgZWRnZSBvZiB0aGUgcGFnZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5MyBDb29yZGluYXRlIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KSBhZ2FpbnN0IHVwcGVyIGVkZ2Ugb2YgdGhlIHBhZ2VcclxuICAgKiBAcGFyYW0ge3N0cmluZz19IHN0eWxlIEEgc3RyaW5nIHNwZWNpZnlpbmcgdGhlIHBhaW50aW5nIHN0eWxlIG9yIG51bGwuIFZhbGlkIHN0eWxlcyBpbmNsdWRlOlxyXG4gICAqICdTJyBbZGVmYXVsdF0gLSBzdHJva2UsXHJcbiAgICogJ0YnIC0gZmlsbCxcclxuICAgKiBhbmQgJ0RGJyAob3IgJ0ZEJykgLSAgZmlsbCB0aGVuIHN0cm9rZS5cclxuICAgKiBJbiBcImNvbXBhdFwiIEFQSSBtb2RlLCBhIG51bGwgdmFsdWUgcG9zdHBvbmVzIHNldHRpbmcgdGhlIHN0eWxlIHNvIHRoYXQgYSBzaGFwZSBtYXkgYmUgY29tcG9zZWQgdXNpbmcgbXVsdGlwbGVcclxuICAgKiBtZXRob2QgY2FsbHMuIFRoZSBsYXN0IGRyYXdpbmcgbWV0aG9kIGNhbGwgdXNlZCB0byBkZWZpbmUgdGhlIHNoYXBlIHNob3VsZCBub3QgaGF2ZSBhIG51bGwgc3R5bGUgYXJndW1lbnQuXHJcbiAgICpcclxuICAgKiBJbiBcImFkdmFuY2VkXCIgQVBJIG1vZGUgdGhpcyBwYXJhbWV0ZXIgaXMgZGVwcmVjYXRlZC5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIHRyaWFuZ2xlXHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnRyaWFuZ2xlID0gQVBJLnRyaWFuZ2xlID0gZnVuY3Rpb24oXHJcbiAgICB4MSxcclxuICAgIHkxLFxyXG4gICAgeDIsXHJcbiAgICB5MixcclxuICAgIHgzLFxyXG4gICAgeTMsXHJcbiAgICBzdHlsZVxyXG4gICkge1xyXG4gICAgaWYgKFxyXG4gICAgICBpc05hTih4MSkgfHxcclxuICAgICAgaXNOYU4oeTEpIHx8XHJcbiAgICAgIGlzTmFOKHgyKSB8fFxyXG4gICAgICBpc05hTih5MikgfHxcclxuICAgICAgaXNOYU4oeDMpIHx8XHJcbiAgICAgIGlzTmFOKHkzKSB8fFxyXG4gICAgICAhaXNWYWxpZFN0eWxlKHN0eWxlKVxyXG4gICAgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi50cmlhbmdsZVwiKTtcclxuICAgIH1cclxuICAgIHRoaXMubGluZXMoXHJcbiAgICAgIFtcclxuICAgICAgICBbeDIgLSB4MSwgeTIgLSB5MV0sIC8vIHZlY3RvciB0byBwb2ludCAyXHJcbiAgICAgICAgW3gzIC0geDIsIHkzIC0geTJdLCAvLyB2ZWN0b3IgdG8gcG9pbnQgM1xyXG4gICAgICAgIFt4MSAtIHgzLCB5MSAtIHkzXSAvLyBjbG9zaW5nIHZlY3RvciBiYWNrIHRvIHBvaW50IDFcclxuICAgICAgXSxcclxuICAgICAgeDEsXHJcbiAgICAgIHkxLCAvLyBzdGFydCBvZiBwYXRoXHJcbiAgICAgIFsxLCAxXSxcclxuICAgICAgc3R5bGUsXHJcbiAgICAgIHRydWVcclxuICAgICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgcmVjdGFuZ2xlIHdpdGggcm91bmRlZCBjb3JuZXJzIHRvIFBERi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IENvb3JkaW5hdGUgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpIGFnYWluc3QgbGVmdCBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCB1cHBlciBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGggKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGggSGVpZ2h0IChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByeCBSYWRpdXMgYWxvbmcgeCBheGlzIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByeSBSYWRpdXMgYWxvbmcgeSBheGlzIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc3R5bGUgQSBzdHJpbmcgc3BlY2lmeWluZyB0aGUgcGFpbnRpbmcgc3R5bGUgb3IgbnVsbC4gVmFsaWQgc3R5bGVzIGluY2x1ZGU6XHJcbiAgICogJ1MnIFtkZWZhdWx0XSAtIHN0cm9rZSxcclxuICAgKiAnRicgLSBmaWxsLFxyXG4gICAqIGFuZCAnREYnIChvciAnRkQnKSAtICBmaWxsIHRoZW4gc3Ryb2tlLlxyXG4gICAqIEluIFwiY29tcGF0XCIgQVBJIG1vZGUsIGEgbnVsbCB2YWx1ZSBwb3N0cG9uZXMgc2V0dGluZyB0aGUgc3R5bGUgc28gdGhhdCBhIHNoYXBlIG1heSBiZSBjb21wb3NlZCB1c2luZyBtdWx0aXBsZVxyXG4gICAqIG1ldGhvZCBjYWxscy4gVGhlIGxhc3QgZHJhd2luZyBtZXRob2QgY2FsbCB1c2VkIHRvIGRlZmluZSB0aGUgc2hhcGUgc2hvdWxkIG5vdCBoYXZlIGEgbnVsbCBzdHlsZSBhcmd1bWVudC5cclxuICAgKlxyXG4gICAqIEluIFwiYWR2YW5jZWRcIiBBUEkgbW9kZSB0aGlzIHBhcmFtZXRlciBpcyBkZXByZWNhdGVkLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgcm91bmRlZFJlY3RcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18ucm91bmRlZFJlY3QgPSBBUEkucm91bmRlZFJlY3QgPSBmdW5jdGlvbihcclxuICAgIHgsXHJcbiAgICB5LFxyXG4gICAgdyxcclxuICAgIGgsXHJcbiAgICByeCxcclxuICAgIHJ5LFxyXG4gICAgc3R5bGVcclxuICApIHtcclxuICAgIGlmIChcclxuICAgICAgaXNOYU4oeCkgfHxcclxuICAgICAgaXNOYU4oeSkgfHxcclxuICAgICAgaXNOYU4odykgfHxcclxuICAgICAgaXNOYU4oaCkgfHxcclxuICAgICAgaXNOYU4ocngpIHx8XHJcbiAgICAgIGlzTmFOKHJ5KSB8fFxyXG4gICAgICAhaXNWYWxpZFN0eWxlKHN0eWxlKVxyXG4gICAgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5yb3VuZGVkUmVjdFwiKTtcclxuICAgIH1cclxuICAgIHZhciBNeUFyYyA9ICg0IC8gMykgKiAoTWF0aC5TUVJUMiAtIDEpO1xyXG5cclxuICAgIHJ4ID0gTWF0aC5taW4ocngsIHcgKiAwLjUpO1xyXG4gICAgcnkgPSBNYXRoLm1pbihyeSwgaCAqIDAuNSk7XHJcblxyXG4gICAgdGhpcy5saW5lcyhcclxuICAgICAgW1xyXG4gICAgICAgIFt3IC0gMiAqIHJ4LCAwXSxcclxuICAgICAgICBbcnggKiBNeUFyYywgMCwgcngsIHJ5IC0gcnkgKiBNeUFyYywgcngsIHJ5XSxcclxuICAgICAgICBbMCwgaCAtIDIgKiByeV0sXHJcbiAgICAgICAgWzAsIHJ5ICogTXlBcmMsIC0ocnggKiBNeUFyYyksIHJ5LCAtcngsIHJ5XSxcclxuICAgICAgICBbLXcgKyAyICogcngsIDBdLFxyXG4gICAgICAgIFstKHJ4ICogTXlBcmMpLCAwLCAtcngsIC0ocnkgKiBNeUFyYyksIC1yeCwgLXJ5XSxcclxuICAgICAgICBbMCwgLWggKyAyICogcnldLFxyXG4gICAgICAgIFswLCAtKHJ5ICogTXlBcmMpLCByeCAqIE15QXJjLCAtcnksIHJ4LCAtcnldXHJcbiAgICAgIF0sXHJcbiAgICAgIHggKyByeCxcclxuICAgICAgeSwgLy8gc3RhcnQgb2YgcGF0aFxyXG4gICAgICBbMSwgMV0sXHJcbiAgICAgIHN0eWxlLFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhbiBlbGxpcHNlIHRvIFBERi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IENvb3JkaW5hdGUgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpIGFnYWluc3QgbGVmdCBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCB1cHBlciBlZGdlIG9mIHRoZSBwYWdlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJ4IFJhZGl1cyBhbG9uZyB4IGF4aXMgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJ5IFJhZGl1cyBhbG9uZyB5IGF4aXMgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBzdHlsZSBBIHN0cmluZyBzcGVjaWZ5aW5nIHRoZSBwYWludGluZyBzdHlsZSBvciBudWxsLiBWYWxpZCBzdHlsZXMgaW5jbHVkZTpcclxuICAgKiAnUycgW2RlZmF1bHRdIC0gc3Ryb2tlLFxyXG4gICAqICdGJyAtIGZpbGwsXHJcbiAgICogYW5kICdERicgKG9yICdGRCcpIC0gIGZpbGwgdGhlbiBzdHJva2UuXHJcbiAgICogSW4gXCJjb21wYXRcIiBBUEkgbW9kZSwgYSBudWxsIHZhbHVlIHBvc3Rwb25lcyBzZXR0aW5nIHRoZSBzdHlsZSBzbyB0aGF0IGEgc2hhcGUgbWF5IGJlIGNvbXBvc2VkIHVzaW5nIG11bHRpcGxlXHJcbiAgICogbWV0aG9kIGNhbGxzLiBUaGUgbGFzdCBkcmF3aW5nIG1ldGhvZCBjYWxsIHVzZWQgdG8gZGVmaW5lIHRoZSBzaGFwZSBzaG91bGQgbm90IGhhdmUgYSBudWxsIHN0eWxlIGFyZ3VtZW50LlxyXG4gICAqXHJcbiAgICogSW4gXCJhZHZhbmNlZFwiIEFQSSBtb2RlIHRoaXMgcGFyYW1ldGVyIGlzIGRlcHJlY2F0ZWQuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBlbGxpcHNlXHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLmVsbGlwc2UgPSBBUEkuZWxsaXBzZSA9IGZ1bmN0aW9uKHgsIHksIHJ4LCByeSwgc3R5bGUpIHtcclxuICAgIGlmIChcclxuICAgICAgaXNOYU4oeCkgfHxcclxuICAgICAgaXNOYU4oeSkgfHxcclxuICAgICAgaXNOYU4ocngpIHx8XHJcbiAgICAgIGlzTmFOKHJ5KSB8fFxyXG4gICAgICAhaXNWYWxpZFN0eWxlKHN0eWxlKVxyXG4gICAgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5lbGxpcHNlXCIpO1xyXG4gICAgfVxyXG4gICAgdmFyIGx4ID0gKDQgLyAzKSAqIChNYXRoLlNRUlQyIC0gMSkgKiByeCxcclxuICAgICAgbHkgPSAoNCAvIDMpICogKE1hdGguU1FSVDIgLSAxKSAqIHJ5O1xyXG5cclxuICAgIG1vdmVUbyh4ICsgcngsIHkpO1xyXG4gICAgY3VydmVUbyh4ICsgcngsIHkgLSBseSwgeCArIGx4LCB5IC0gcnksIHgsIHkgLSByeSk7XHJcbiAgICBjdXJ2ZVRvKHggLSBseCwgeSAtIHJ5LCB4IC0gcngsIHkgLSBseSwgeCAtIHJ4LCB5KTtcclxuICAgIGN1cnZlVG8oeCAtIHJ4LCB5ICsgbHksIHggLSBseCwgeSArIHJ5LCB4LCB5ICsgcnkpO1xyXG4gICAgY3VydmVUbyh4ICsgbHgsIHkgKyByeSwgeCArIHJ4LCB5ICsgbHksIHggKyByeCwgeSk7XHJcblxyXG4gICAgcHV0U3R5bGUoc3R5bGUpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhbiBjaXJjbGUgdG8gUERGLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCBsZWZ0IGVkZ2Ugb2YgdGhlIHBhZ2VcclxuICAgKiBAcGFyYW0ge251bWJlcn0geSBDb29yZGluYXRlIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KSBhZ2FpbnN0IHVwcGVyIGVkZ2Ugb2YgdGhlIHBhZ2VcclxuICAgKiBAcGFyYW0ge251bWJlcn0gciBSYWRpdXMgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpXHJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBzdHlsZSBBIHN0cmluZyBzcGVjaWZ5aW5nIHRoZSBwYWludGluZyBzdHlsZSBvciBudWxsLiBWYWxpZCBzdHlsZXMgaW5jbHVkZTpcclxuICAgKiAnUycgW2RlZmF1bHRdIC0gc3Ryb2tlLFxyXG4gICAqICdGJyAtIGZpbGwsXHJcbiAgICogYW5kICdERicgKG9yICdGRCcpIC0gIGZpbGwgdGhlbiBzdHJva2UuXHJcbiAgICogSW4gXCJjb21wYXRcIiBBUEkgbW9kZSwgYSBudWxsIHZhbHVlIHBvc3Rwb25lcyBzZXR0aW5nIHRoZSBzdHlsZSBzbyB0aGF0IGEgc2hhcGUgbWF5IGJlIGNvbXBvc2VkIHVzaW5nIG11bHRpcGxlXHJcbiAgICogbWV0aG9kIGNhbGxzLiBUaGUgbGFzdCBkcmF3aW5nIG1ldGhvZCBjYWxsIHVzZWQgdG8gZGVmaW5lIHRoZSBzaGFwZSBzaG91bGQgbm90IGhhdmUgYSBudWxsIHN0eWxlIGFyZ3VtZW50LlxyXG4gICAqXHJcbiAgICogSW4gXCJhZHZhbmNlZFwiIEFQSSBtb2RlIHRoaXMgcGFyYW1ldGVyIGlzIGRlcHJlY2F0ZWQuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBjaXJjbGVcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uY2lyY2xlID0gQVBJLmNpcmNsZSA9IGZ1bmN0aW9uKHgsIHksIHIsIHN0eWxlKSB7XHJcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkgfHwgaXNOYU4ocikgfHwgIWlzVmFsaWRTdHlsZShzdHlsZSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNpcmNsZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmVsbGlwc2UoeCwgeSwgciwgciwgc3R5bGUpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGV4dCBmb250IGZhY2UsIHZhcmlhbnQgZm9yIHVwY29taW5nIHRleHQgZWxlbWVudHMuXHJcbiAgICogU2VlIG91dHB1dCBvZiBqc1BERi5nZXRGb250TGlzdCgpIGZvciBwb3NzaWJsZSBmb250IG5hbWVzLCBzdHlsZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9udE5hbWUgRm9udCBuYW1lIG9yIGZhbWlseS4gRXhhbXBsZTogXCJ0aW1lc1wiLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3R5bGUgRm9udCBzdHlsZSBvciB2YXJpYW50LiBFeGFtcGxlOiBcIml0YWxpY1wiLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyIHwgc3RyaW5nfSBmb250V2VpZ2h0IFdlaWdodCBvZiB0aGUgRm9udC4gRXhhbXBsZTogXCJub3JtYWxcIiB8IDQwMFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2V0Rm9udFxyXG4gICAqL1xyXG4gIEFQSS5zZXRGb250ID0gZnVuY3Rpb24oZm9udE5hbWUsIGZvbnRTdHlsZSwgZm9udFdlaWdodCkge1xyXG4gICAgaWYgKGZvbnRXZWlnaHQpIHtcclxuICAgICAgZm9udFN0eWxlID0gY29tYmluZUZvbnRTdHlsZUFuZEZvbnRXZWlnaHQoZm9udFN0eWxlLCBmb250V2VpZ2h0KTtcclxuICAgIH1cclxuICAgIGFjdGl2ZUZvbnRLZXkgPSBnZXRGb250KGZvbnROYW1lLCBmb250U3R5bGUsIHtcclxuICAgICAgZGlzYWJsZVdhcm5pbmc6IGZhbHNlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGV4dCBmb250IGZhY2UsIHZhcmlhbnQgZm9yIHVwY29taW5nIHRleHQgZWxlbWVudHMuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBnZXRGb250XHJcbiAgICovXHJcbiAgdmFyIGdldEZvbnRFbnRyeSA9IChBUEkuX19wcml2YXRlX18uZ2V0Rm9udCA9IEFQSS5nZXRGb250ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZm9udHNbZ2V0Rm9udC5hcHBseShBUEksIGFyZ3VtZW50cyldO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCAtIGEgdHJlZSBvZiBmb250TmFtZSB0byBmb250U3R5bGUgcmVsYXRpb25zaGlwcyBhdmFpbGFibGUgdG9cclxuICAgKiBhY3RpdmUgUERGIGRvY3VtZW50LlxyXG4gICAqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IExpa2Ugeyd0aW1lcyc6Wydub3JtYWwnLCAnaXRhbGljJywgLi4uIF0sICdhcmlhbCc6Wydub3JtYWwnLCAnYm9sZCcsIC4uLiBdLCAuLi4gfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBnZXRGb250TGlzdFxyXG4gICAqL1xyXG4gIEFQSS5fX3ByaXZhdGVfXy5nZXRGb250TGlzdCA9IEFQSS5nZXRGb250TGlzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxpc3QgPSB7fSxcclxuICAgICAgZm9udE5hbWUsXHJcbiAgICAgIGZvbnRTdHlsZTtcclxuXHJcbiAgICBmb3IgKGZvbnROYW1lIGluIGZvbnRtYXApIHtcclxuICAgICAgaWYgKGZvbnRtYXAuaGFzT3duUHJvcGVydHkoZm9udE5hbWUpKSB7XHJcbiAgICAgICAgbGlzdFtmb250TmFtZV0gPSBbXTtcclxuICAgICAgICBmb3IgKGZvbnRTdHlsZSBpbiBmb250bWFwW2ZvbnROYW1lXSkge1xyXG4gICAgICAgICAgaWYgKGZvbnRtYXBbZm9udE5hbWVdLmhhc093blByb3BlcnR5KGZvbnRTdHlsZSkpIHtcclxuICAgICAgICAgICAgbGlzdFtmb250TmFtZV0ucHVzaChmb250U3R5bGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxpc3Q7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGEgY3VzdG9tIGZvbnQgdG8gdGhlIGN1cnJlbnQgaW5zdGFuY2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9zdFNjcmlwdE5hbWUgUERGIHNwZWNpZmljYXRpb24gZnVsbCBuYW1lIGZvciB0aGUgZm9udC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgUERGLWRvY3VtZW50LWluc3RhbmNlLXNwZWNpZmljIGxhYmVsIGFzc2luZ2VkIHRvIHRoZSBmb250LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3R5bGUgU3R5bGUgb2YgdGhlIEZvbnQuXHJcbiAgICogQHBhcmFtIHtudW1iZXIgfCBzdHJpbmd9IGZvbnRXZWlnaHQgV2VpZ2h0IG9mIHRoZSBGb250LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlbmNvZGluZyBFbmNvZGluZ19uYW1lLXRvLUZvbnRfbWV0cmljc19vYmplY3QgbWFwcGluZy5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgYWRkRm9udFxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGZvbnRJZFxyXG4gICAqL1xyXG4gIEFQSS5hZGRGb250ID0gZnVuY3Rpb24oXHJcbiAgICBwb3N0U2NyaXB0TmFtZSxcclxuICAgIGZvbnROYW1lLFxyXG4gICAgZm9udFN0eWxlLFxyXG4gICAgZm9udFdlaWdodCxcclxuICAgIGVuY29kaW5nXHJcbiAgKSB7XHJcbiAgICB2YXIgZW5jb2RpbmdPcHRpb25zID0gW1xyXG4gICAgICBcIlN0YW5kYXJkRW5jb2RpbmdcIixcclxuICAgICAgXCJNYWNSb21hbkVuY29kaW5nXCIsXHJcbiAgICAgIFwiSWRlbnRpdHktSFwiLFxyXG4gICAgICBcIldpbkFuc2lFbmNvZGluZ1wiXHJcbiAgICBdO1xyXG4gICAgaWYgKGFyZ3VtZW50c1szXSAmJiBlbmNvZGluZ09wdGlvbnMuaW5kZXhPZihhcmd1bWVudHNbM10pICE9PSAtMSkge1xyXG4gICAgICAvL0lFIDExIGZpeFxyXG4gICAgICBlbmNvZGluZyA9IGFyZ3VtZW50c1szXTtcclxuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzWzNdICYmIGVuY29kaW5nT3B0aW9ucy5pbmRleE9mKGFyZ3VtZW50c1szXSkgPT0gLTEpIHtcclxuICAgICAgZm9udFN0eWxlID0gY29tYmluZUZvbnRTdHlsZUFuZEZvbnRXZWlnaHQoZm9udFN0eWxlLCBmb250V2VpZ2h0KTtcclxuICAgIH1cclxuICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgXCJJZGVudGl0eS1IXCI7XHJcbiAgICByZXR1cm4gYWRkRm9udC5jYWxsKHRoaXMsIHBvc3RTY3JpcHROYW1lLCBmb250TmFtZSwgZm9udFN0eWxlLCBlbmNvZGluZyk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGxpbmVXaWR0aCA9IG9wdGlvbnMubGluZVdpZHRoIHx8IDAuMjAwMDI1OyAvLyAybW1cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBsaW5lIHdpZHRoLCBkZWZhdWx0OiAwLjIwMDAyNS5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IGxpbmVXaWR0aFxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBnZXRMaW5lV2lkdGhcclxuICAgKi9cclxuICB2YXIgZ2V0TGluZVdpZHRoID0gKEFQSS5fX3ByaXZhdGVfXy5nZXRMaW5lV2lkdGggPSBBUEkuZ2V0TGluZVdpZHRoID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbGluZVdpZHRoO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBTZXRzIGxpbmUgd2lkdGggZm9yIHVwY29taW5nIGxpbmVzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIExpbmUgd2lkdGggKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2V0TGluZVdpZHRoXHJcbiAgICovXHJcbiAgdmFyIHNldExpbmVXaWR0aCA9IChBUEkuX19wcml2YXRlX18uc2V0TGluZVdpZHRoID0gQVBJLnNldExpbmVXaWR0aCA9IGZ1bmN0aW9uKFxyXG4gICAgd2lkdGhcclxuICApIHtcclxuICAgIGxpbmVXaWR0aCA9IHdpZHRoO1xyXG4gICAgb3V0KGhwZihzY2FsZSh3aWR0aCkpICsgXCIgd1wiKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBkYXNoIHBhdHRlcm4gZm9yIHVwY29taW5nIGxpbmVzLlxyXG4gICAqXHJcbiAgICogVG8gcmVzZXQgdGhlIHNldHRpbmdzIHNpbXBseSBjYWxsIHRoZSBtZXRob2Qgd2l0aG91dCBhbnkgcGFyYW1ldGVycy5cclxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGRhc2hBcnJheSBBbiBhcnJheSBjb250YWluaW5nIDAtMiBudW1iZXJzLiBUaGUgZmlyc3QgbnVtYmVyIHNldHMgdGhlIGxlbmd0aCBvZiB0aGVcclxuICAgKiBkYXNoZXMsIHRoZSBzZWNvbmQgbnVtYmVyIHRoZSBsZW5ndGggb2YgdGhlIGdhcHMuIElmIHRoZSBzZWNvbmQgbnVtYmVyIGlzIG1pc3NpbmcsIHRoZSBnYXBzIGFyZSBjb25zaWRlcmVkXHJcbiAgICogdG8gYmUgYXMgbG9uZyBhcyB0aGUgZGFzaGVzLiBBbiBlbXB0eSBhcnJheSBtZWFucyBzb2xpZCwgdW5icm9rZW4gbGluZXMuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRhc2hQaGFzZSBUaGUgcGhhc2UgbGluZXMgc3RhcnQgd2l0aC5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIHNldExpbmVEYXNoUGF0dGVyblxyXG4gICAqL1xyXG4gIEFQSS5fX3ByaXZhdGVfXy5zZXRMaW5lRGFzaCA9IGpzUERGLkFQSS5zZXRMaW5lRGFzaCA9IGpzUERGLkFQSS5zZXRMaW5lRGFzaFBhdHRlcm4gPSBmdW5jdGlvbihcclxuICAgIGRhc2hBcnJheSxcclxuICAgIGRhc2hQaGFzZVxyXG4gICkge1xyXG4gICAgZGFzaEFycmF5ID0gZGFzaEFycmF5IHx8IFtdO1xyXG4gICAgZGFzaFBoYXNlID0gZGFzaFBoYXNlIHx8IDA7XHJcblxyXG4gICAgaWYgKGlzTmFOKGRhc2hQaGFzZSkgfHwgIUFycmF5LmlzQXJyYXkoZGFzaEFycmF5KSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuc2V0TGluZURhc2hcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZGFzaEFycmF5ID0gZGFzaEFycmF5XHJcbiAgICAgIC5tYXAoZnVuY3Rpb24oeCkge1xyXG4gICAgICAgIHJldHVybiBocGYoc2NhbGUoeCkpO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbihcIiBcIik7XHJcbiAgICBkYXNoUGhhc2UgPSBocGYoc2NhbGUoZGFzaFBoYXNlKSk7XHJcblxyXG4gICAgb3V0KFwiW1wiICsgZGFzaEFycmF5ICsgXCJdIFwiICsgZGFzaFBoYXNlICsgXCIgZFwiKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIHZhciBsaW5lSGVpZ2h0RmFjdG9yO1xyXG5cclxuICB2YXIgZ2V0TGluZUhlaWdodCA9IChBUEkuX19wcml2YXRlX18uZ2V0TGluZUhlaWdodCA9IEFQSS5nZXRMaW5lSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYWN0aXZlRm9udFNpemUgKiBsaW5lSGVpZ2h0RmFjdG9yO1xyXG4gIH0pO1xyXG5cclxuICBBUEkuX19wcml2YXRlX18uZ2V0TGluZUhlaWdodCA9IEFQSS5nZXRMaW5lSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYWN0aXZlRm9udFNpemUgKiBsaW5lSGVpZ2h0RmFjdG9yO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIExpbmVIZWlnaHRGYWN0b3Igb2YgcHJvcG9ydGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBMaW5lSGVpZ2h0RmFjdG9yIHZhbHVlLiBEZWZhdWx0OiAxLjE1LlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2V0TGluZUhlaWdodEZhY3RvclxyXG4gICAqL1xyXG4gIHZhciBzZXRMaW5lSGVpZ2h0RmFjdG9yID0gKEFQSS5fX3ByaXZhdGVfXy5zZXRMaW5lSGVpZ2h0RmFjdG9yID0gQVBJLnNldExpbmVIZWlnaHRGYWN0b3IgPSBmdW5jdGlvbihcclxuICAgIHZhbHVlXHJcbiAgKSB7XHJcbiAgICB2YWx1ZSA9IHZhbHVlIHx8IDEuMTU7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgIGxpbmVIZWlnaHRGYWN0b3IgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBMaW5lSGVpZ2h0RmFjdG9yLCBkZWZhdWx0OiAxLjE1LlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge251bWJlcn0gbGluZUhlaWdodEZhY3RvclxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBnZXRMaW5lSGVpZ2h0RmFjdG9yXHJcbiAgICovXHJcbiAgdmFyIGdldExpbmVIZWlnaHRGYWN0b3IgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldExpbmVIZWlnaHRGYWN0b3IgPSBBUEkuZ2V0TGluZUhlaWdodEZhY3RvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGxpbmVIZWlnaHRGYWN0b3I7XHJcbiAgfSk7XHJcblxyXG4gIHNldExpbmVIZWlnaHRGYWN0b3Iob3B0aW9ucy5saW5lSGVpZ2h0KTtcclxuXHJcbiAgdmFyIGdldEhvcml6b250YWxDb29yZGluYXRlID0gKEFQSS5fX3ByaXZhdGVfXy5nZXRIb3Jpem9udGFsQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uKFxyXG4gICAgdmFsdWVcclxuICApIHtcclxuICAgIHJldHVybiBzY2FsZSh2YWx1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBnZXRWZXJ0aWNhbENvb3JkaW5hdGUgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldFZlcnRpY2FsQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uKFxyXG4gICAgdmFsdWVcclxuICApIHtcclxuICAgIGlmIChhcGlNb2RlID09PSBBcGlNb2RlLkFEVkFOQ0VEKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBwYWdlSGVpZ2h0ID1cclxuICAgICAgICBwYWdlc0NvbnRleHRbY3VycmVudFBhZ2VdLm1lZGlhQm94LnRvcFJpZ2h0WSAtXHJcbiAgICAgICAgcGFnZXNDb250ZXh0W2N1cnJlbnRQYWdlXS5tZWRpYUJveC5ib3R0b21MZWZ0WTtcclxuICAgICAgcmV0dXJuIHBhZ2VIZWlnaHQgLSBzY2FsZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHZhciBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZVN0cmluZyA9IChBUEkuX19wcml2YXRlX18uZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcgPSBBUEkuZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcgPSBmdW5jdGlvbihcclxuICAgIHZhbHVlXHJcbiAgKSB7XHJcbiAgICByZXR1cm4gaHBmKGdldEhvcml6b250YWxDb29yZGluYXRlKHZhbHVlKSk7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBnZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZyA9IEFQSS5nZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcgPSBmdW5jdGlvbihcclxuICAgIHZhbHVlXHJcbiAgKSB7XHJcbiAgICByZXR1cm4gaHBmKGdldFZlcnRpY2FsQ29vcmRpbmF0ZSh2YWx1ZSkpO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgc3Ryb2tlQ29sb3IgPSBvcHRpb25zLnN0cm9rZUNvbG9yIHx8IFwiMCBHXCI7XHJcblxyXG4gIC8qKlxyXG4gICAqICBHZXRzIHRoZSBzdHJva2UgY29sb3IgZm9yIHVwY29taW5nIGVsZW1lbnRzLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge3N0cmluZ30gY29sb3JBc0hleFxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBnZXREcmF3Q29sb3JcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uZ2V0U3Ryb2tlQ29sb3IgPSBBUEkuZ2V0RHJhd0NvbG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZGVjb2RlQ29sb3JTdHJpbmcoc3Ryb2tlQ29sb3IpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHN0cm9rZSBjb2xvciBmb3IgdXBjb21pbmcgZWxlbWVudHMuXHJcbiAgICpcclxuICAgKiBEZXBlbmRpbmcgb24gdGhlIG51bWJlciBvZiBhcmd1bWVudHMgZ2l2ZW4sIEdyYXksIFJHQiwgb3IgQ01ZS1xyXG4gICAqIGNvbG9yIHNwYWNlIGlzIGltcGxpZWQuXHJcbiAgICpcclxuICAgKiBXaGVuIG9ubHkgY2gxIGlzIGdpdmVuLCBcIkdyYXlcIiBjb2xvciBzcGFjZSBpcyBpbXBsaWVkIGFuZCBpdFxyXG4gICAqIG11c3QgYmUgYSB2YWx1ZSBpbiB0aGUgcmFuZ2UgZnJvbSAwLjAwIChzb2xpZCBibGFjaykgdG8gdG8gMS4wMCAod2hpdGUpXHJcbiAgICogaWYgdmFsdWVzIGFyZSBjb21tdW5pY2F0ZWQgYXMgU3RyaW5nIHR5cGVzLCBvciBpbiByYW5nZSBmcm9tIDAgKGJsYWNrKVxyXG4gICAqIHRvIDI1NSAod2hpdGUpIGlmIGNvbW11bmljYXRlZCBhcyBOdW1iZXIgdHlwZS5cclxuICAgKiBUaGUgUkdCLWxpa2UgMC0yNTUgcmFuZ2UgaXMgcHJvdmlkZWQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXHJcbiAgICpcclxuICAgKiBXaGVuIG9ubHkgY2gxLGNoMixjaDMgYXJlIGdpdmVuLCBcIlJHQlwiIGNvbG9yIHNwYWNlIGlzIGltcGxpZWQgYW5kIGVhY2hcclxuICAgKiB2YWx1ZSBtdXN0IGJlIGluIHRoZSByYW5nZSBmcm9tIDAuMDAgKG1pbmltdW0gaW50ZW5zaXR5KSB0byB0byAxLjAwXHJcbiAgICogKG1heCBpbnRlbnNpdHkpIGlmIHZhbHVlcyBhcmUgY29tbXVuaWNhdGVkIGFzIFN0cmluZyB0eXBlcywgb3JcclxuICAgKiBmcm9tIDAgKG1pbiBpbnRlbnNpdHkpIHRvIHRvIDI1NSAobWF4IGludGVuc2l0eSkgaWYgdmFsdWVzIGFyZSBjb21tdW5pY2F0ZWRcclxuICAgKiBhcyBOdW1iZXIgdHlwZXMuXHJcbiAgICogVGhlIFJHQi1saWtlIDAtMjU1IHJhbmdlIGlzIHByb3ZpZGVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxyXG4gICAqXHJcbiAgICogV2hlbiBjaDEsY2gyLGNoMyxjaDQgYXJlIGdpdmVuLCBcIkNNWUtcIiBjb2xvciBzcGFjZSBpcyBpbXBsaWVkIGFuZCBlYWNoXHJcbiAgICogdmFsdWUgbXVzdCBiZSBhIGluIHRoZSByYW5nZSBmcm9tIDAuMDAgKDAlIGNvbmNlbnRyYXRpb24pIHRvIHRvXHJcbiAgICogMS4wMCAoMTAwJSBjb25jZW50cmF0aW9uKVxyXG4gICAqXHJcbiAgICogQmVjYXVzZSBKYXZhU2NyaXB0IHRyZWF0cyBmaXhlZCBwb2ludCBudW1iZXJzIGJhZGx5IChyb3VuZHMgdG9cclxuICAgKiBmbG9hdGluZyBwb2ludCBuZWFyZXN0IHRvIGJpbmFyeSByZXByZXNlbnRhdGlvbikgaXQgaXMgaGlnaGx5IGFkdmlzZWQgdG9cclxuICAgKiBjb21tdW5pY2F0ZSB0aGUgZnJhY3Rpb25hbCBudW1iZXJzIGFzIFN0cmluZyB0eXBlcywgbm90IEphdmFTY3JpcHQgTnVtYmVyIHR5cGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IGNoMSBDb2xvciBjaGFubmVsIHZhbHVlIG9yIHtzdHJpbmd9IGNoMSBjb2xvciB2YWx1ZSBpbiBoZXhhZGVjaW1hbCwgZXhhbXBsZTogJyNGRkZGRkYnLlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjaDIgQ29sb3IgY2hhbm5lbCB2YWx1ZS5cclxuICAgKiBAcGFyYW0ge051bWJlcn0gY2gzIENvbG9yIGNoYW5uZWwgdmFsdWUuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNoNCBDb2xvciBjaGFubmVsIHZhbHVlLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBzZXREcmF3Q29sb3JcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uc2V0U3Ryb2tlQ29sb3IgPSBBUEkuc2V0RHJhd0NvbG9yID0gZnVuY3Rpb24oXHJcbiAgICBjaDEsXHJcbiAgICBjaDIsXHJcbiAgICBjaDMsXHJcbiAgICBjaDRcclxuICApIHtcclxuICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICBjaDE6IGNoMSxcclxuICAgICAgY2gyOiBjaDIsXHJcbiAgICAgIGNoMzogY2gzLFxyXG4gICAgICBjaDQ6IGNoNCxcclxuICAgICAgcGRmQ29sb3JUeXBlOiBcImRyYXdcIixcclxuICAgICAgcHJlY2lzaW9uOiAyXHJcbiAgICB9O1xyXG5cclxuICAgIHN0cm9rZUNvbG9yID0gZW5jb2RlQ29sb3JTdHJpbmcob3B0aW9ucyk7XHJcbiAgICBvdXQoc3Ryb2tlQ29sb3IpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGZpbGxDb2xvciA9IG9wdGlvbnMuZmlsbENvbG9yIHx8IFwiMCBnXCI7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGhlIGZpbGwgY29sb3IgZm9yIHVwY29taW5nIGVsZW1lbnRzLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge3N0cmluZ30gY29sb3JBc0hleFxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBnZXRGaWxsQ29sb3JcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uZ2V0RmlsbENvbG9yID0gQVBJLmdldEZpbGxDb2xvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGRlY29kZUNvbG9yU3RyaW5nKGZpbGxDb2xvcik7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgZmlsbCBjb2xvciBmb3IgdXBjb21pbmcgZWxlbWVudHMuXHJcbiAgICpcclxuICAgKiBEZXBlbmRpbmcgb24gdGhlIG51bWJlciBvZiBhcmd1bWVudHMgZ2l2ZW4sIEdyYXksIFJHQiwgb3IgQ01ZS1xyXG4gICAqIGNvbG9yIHNwYWNlIGlzIGltcGxpZWQuXHJcbiAgICpcclxuICAgKiBXaGVuIG9ubHkgY2gxIGlzIGdpdmVuLCBcIkdyYXlcIiBjb2xvciBzcGFjZSBpcyBpbXBsaWVkIGFuZCBpdFxyXG4gICAqIG11c3QgYmUgYSB2YWx1ZSBpbiB0aGUgcmFuZ2UgZnJvbSAwLjAwIChzb2xpZCBibGFjaykgdG8gdG8gMS4wMCAod2hpdGUpXHJcbiAgICogaWYgdmFsdWVzIGFyZSBjb21tdW5pY2F0ZWQgYXMgU3RyaW5nIHR5cGVzLCBvciBpbiByYW5nZSBmcm9tIDAgKGJsYWNrKVxyXG4gICAqIHRvIDI1NSAod2hpdGUpIGlmIGNvbW11bmljYXRlZCBhcyBOdW1iZXIgdHlwZS5cclxuICAgKiBUaGUgUkdCLWxpa2UgMC0yNTUgcmFuZ2UgaXMgcHJvdmlkZWQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXHJcbiAgICpcclxuICAgKiBXaGVuIG9ubHkgY2gxLGNoMixjaDMgYXJlIGdpdmVuLCBcIlJHQlwiIGNvbG9yIHNwYWNlIGlzIGltcGxpZWQgYW5kIGVhY2hcclxuICAgKiB2YWx1ZSBtdXN0IGJlIGluIHRoZSByYW5nZSBmcm9tIDAuMDAgKG1pbmltdW0gaW50ZW5zaXR5KSB0byB0byAxLjAwXHJcbiAgICogKG1heCBpbnRlbnNpdHkpIGlmIHZhbHVlcyBhcmUgY29tbXVuaWNhdGVkIGFzIFN0cmluZyB0eXBlcywgb3JcclxuICAgKiBmcm9tIDAgKG1pbiBpbnRlbnNpdHkpIHRvIHRvIDI1NSAobWF4IGludGVuc2l0eSkgaWYgdmFsdWVzIGFyZSBjb21tdW5pY2F0ZWRcclxuICAgKiBhcyBOdW1iZXIgdHlwZXMuXHJcbiAgICogVGhlIFJHQi1saWtlIDAtMjU1IHJhbmdlIGlzIHByb3ZpZGVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxyXG4gICAqXHJcbiAgICogV2hlbiBjaDEsY2gyLGNoMyxjaDQgYXJlIGdpdmVuLCBcIkNNWUtcIiBjb2xvciBzcGFjZSBpcyBpbXBsaWVkIGFuZCBlYWNoXHJcbiAgICogdmFsdWUgbXVzdCBiZSBhIGluIHRoZSByYW5nZSBmcm9tIDAuMDAgKDAlIGNvbmNlbnRyYXRpb24pIHRvIHRvXHJcbiAgICogMS4wMCAoMTAwJSBjb25jZW50cmF0aW9uKVxyXG4gICAqXHJcbiAgICogQmVjYXVzZSBKYXZhU2NyaXB0IHRyZWF0cyBmaXhlZCBwb2ludCBudW1iZXJzIGJhZGx5IChyb3VuZHMgdG9cclxuICAgKiBmbG9hdGluZyBwb2ludCBuZWFyZXN0IHRvIGJpbmFyeSByZXByZXNlbnRhdGlvbikgaXQgaXMgaGlnaGx5IGFkdmlzZWQgdG9cclxuICAgKiBjb21tdW5pY2F0ZSB0aGUgZnJhY3Rpb25hbCBudW1iZXJzIGFzIFN0cmluZyB0eXBlcywgbm90IEphdmFTY3JpcHQgTnVtYmVyIHR5cGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IGNoMSBDb2xvciBjaGFubmVsIHZhbHVlIG9yIHtzdHJpbmd9IGNoMSBjb2xvciB2YWx1ZSBpbiBoZXhhZGVjaW1hbCwgZXhhbXBsZTogJyNGRkZGRkYnLlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjaDIgQ29sb3IgY2hhbm5lbCB2YWx1ZS5cclxuICAgKiBAcGFyYW0ge051bWJlcn0gY2gzIENvbG9yIGNoYW5uZWwgdmFsdWUuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNoNCBDb2xvciBjaGFubmVsIHZhbHVlLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBzZXRGaWxsQ29sb3JcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uc2V0RmlsbENvbG9yID0gQVBJLnNldEZpbGxDb2xvciA9IGZ1bmN0aW9uKFxyXG4gICAgY2gxLFxyXG4gICAgY2gyLFxyXG4gICAgY2gzLFxyXG4gICAgY2g0XHJcbiAgKSB7XHJcbiAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgY2gxOiBjaDEsXHJcbiAgICAgIGNoMjogY2gyLFxyXG4gICAgICBjaDM6IGNoMyxcclxuICAgICAgY2g0OiBjaDQsXHJcbiAgICAgIHBkZkNvbG9yVHlwZTogXCJmaWxsXCIsXHJcbiAgICAgIHByZWNpc2lvbjogMlxyXG4gICAgfTtcclxuXHJcbiAgICBmaWxsQ29sb3IgPSBlbmNvZGVDb2xvclN0cmluZyhvcHRpb25zKTtcclxuICAgIG91dChmaWxsQ29sb3IpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHRleHRDb2xvciA9IG9wdGlvbnMudGV4dENvbG9yIHx8IFwiMCBnXCI7XHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgdGV4dCBjb2xvciBmb3IgdXBjb21pbmcgZWxlbWVudHMuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb2xvckFzSGV4XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGdldFRleHRDb2xvclxyXG4gICAqL1xyXG4gIHZhciBnZXRUZXh0Q29sb3IgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldFRleHRDb2xvciA9IEFQSS5nZXRUZXh0Q29sb3IgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBkZWNvZGVDb2xvclN0cmluZyh0ZXh0Q29sb3IpO1xyXG4gIH0pO1xyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHRleHQgY29sb3IgZm9yIHVwY29taW5nIGVsZW1lbnRzLlxyXG4gICAqXHJcbiAgICogRGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGdpdmVuLCBHcmF5LCBSR0IsIG9yIENNWUtcclxuICAgKiBjb2xvciBzcGFjZSBpcyBpbXBsaWVkLlxyXG4gICAqXHJcbiAgICogV2hlbiBvbmx5IGNoMSBpcyBnaXZlbiwgXCJHcmF5XCIgY29sb3Igc3BhY2UgaXMgaW1wbGllZCBhbmQgaXRcclxuICAgKiBtdXN0IGJlIGEgdmFsdWUgaW4gdGhlIHJhbmdlIGZyb20gMC4wMCAoc29saWQgYmxhY2spIHRvIHRvIDEuMDAgKHdoaXRlKVxyXG4gICAqIGlmIHZhbHVlcyBhcmUgY29tbXVuaWNhdGVkIGFzIFN0cmluZyB0eXBlcywgb3IgaW4gcmFuZ2UgZnJvbSAwIChibGFjaylcclxuICAgKiB0byAyNTUgKHdoaXRlKSBpZiBjb21tdW5pY2F0ZWQgYXMgTnVtYmVyIHR5cGUuXHJcbiAgICogVGhlIFJHQi1saWtlIDAtMjU1IHJhbmdlIGlzIHByb3ZpZGVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxyXG4gICAqXHJcbiAgICogV2hlbiBvbmx5IGNoMSxjaDIsY2gzIGFyZSBnaXZlbiwgXCJSR0JcIiBjb2xvciBzcGFjZSBpcyBpbXBsaWVkIGFuZCBlYWNoXHJcbiAgICogdmFsdWUgbXVzdCBiZSBpbiB0aGUgcmFuZ2UgZnJvbSAwLjAwIChtaW5pbXVtIGludGVuc2l0eSkgdG8gdG8gMS4wMFxyXG4gICAqIChtYXggaW50ZW5zaXR5KSBpZiB2YWx1ZXMgYXJlIGNvbW11bmljYXRlZCBhcyBTdHJpbmcgdHlwZXMsIG9yXHJcbiAgICogZnJvbSAwIChtaW4gaW50ZW5zaXR5KSB0byB0byAyNTUgKG1heCBpbnRlbnNpdHkpIGlmIHZhbHVlcyBhcmUgY29tbXVuaWNhdGVkXHJcbiAgICogYXMgTnVtYmVyIHR5cGVzLlxyXG4gICAqIFRoZSBSR0ItbGlrZSAwLTI1NSByYW5nZSBpcyBwcm92aWRlZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cclxuICAgKlxyXG4gICAqIFdoZW4gY2gxLGNoMixjaDMsY2g0IGFyZSBnaXZlbiwgXCJDTVlLXCIgY29sb3Igc3BhY2UgaXMgaW1wbGllZCBhbmQgZWFjaFxyXG4gICAqIHZhbHVlIG11c3QgYmUgYSBpbiB0aGUgcmFuZ2UgZnJvbSAwLjAwICgwJSBjb25jZW50cmF0aW9uKSB0byB0b1xyXG4gICAqIDEuMDAgKDEwMCUgY29uY2VudHJhdGlvbilcclxuICAgKlxyXG4gICAqIEJlY2F1c2UgSmF2YVNjcmlwdCB0cmVhdHMgZml4ZWQgcG9pbnQgbnVtYmVycyBiYWRseSAocm91bmRzIHRvXHJcbiAgICogZmxvYXRpbmcgcG9pbnQgbmVhcmVzdCB0byBiaW5hcnkgcmVwcmVzZW50YXRpb24pIGl0IGlzIGhpZ2hseSBhZHZpc2VkIHRvXHJcbiAgICogY29tbXVuaWNhdGUgdGhlIGZyYWN0aW9uYWwgbnVtYmVycyBhcyBTdHJpbmcgdHlwZXMsIG5vdCBKYXZhU2NyaXB0IE51bWJlciB0eXBlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBjaDEgQ29sb3IgY2hhbm5lbCB2YWx1ZSBvciB7c3RyaW5nfSBjaDEgY29sb3IgdmFsdWUgaW4gaGV4YWRlY2ltYWwsIGV4YW1wbGU6ICcjRkZGRkZGJy5cclxuICAgKiBAcGFyYW0ge051bWJlcn0gY2gyIENvbG9yIGNoYW5uZWwgdmFsdWUuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNoMyBDb2xvciBjaGFubmVsIHZhbHVlLlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjaDQgQ29sb3IgY2hhbm5lbCB2YWx1ZS5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2V0VGV4dENvbG9yXHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnNldFRleHRDb2xvciA9IEFQSS5zZXRUZXh0Q29sb3IgPSBmdW5jdGlvbihcclxuICAgIGNoMSxcclxuICAgIGNoMixcclxuICAgIGNoMyxcclxuICAgIGNoNFxyXG4gICkge1xyXG4gICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgIGNoMTogY2gxLFxyXG4gICAgICBjaDI6IGNoMixcclxuICAgICAgY2gzOiBjaDMsXHJcbiAgICAgIGNoNDogY2g0LFxyXG4gICAgICBwZGZDb2xvclR5cGU6IFwidGV4dFwiLFxyXG4gICAgICBwcmVjaXNpb246IDNcclxuICAgIH07XHJcbiAgICB0ZXh0Q29sb3IgPSBlbmNvZGVDb2xvclN0cmluZyhvcHRpb25zKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICB2YXIgYWN0aXZlQ2hhclNwYWNlID0gb3B0aW9ucy5jaGFyU3BhY2U7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBnbG9iYWwgdmFsdWUgb2YgQ2hhclNwYWNlLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge251bWJlcn0gY2hhclNwYWNlXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGdldENoYXJTcGFjZVxyXG4gICAqL1xyXG4gIHZhciBnZXRDaGFyU3BhY2UgPSAoQVBJLl9fcHJpdmF0ZV9fLmdldENoYXJTcGFjZSA9IEFQSS5nZXRDaGFyU3BhY2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBwYXJzZUZsb2F0KGFjdGl2ZUNoYXJTcGFjZSB8fCAwKTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGdsb2JhbCB2YWx1ZSBvZiBDaGFyU3BhY2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gY2hhclNwYWNlXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfSBqc1BERi1pbnN0YW5jZVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBzZXRDaGFyU3BhY2VcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uc2V0Q2hhclNwYWNlID0gQVBJLnNldENoYXJTcGFjZSA9IGZ1bmN0aW9uKGNoYXJTcGFjZSkge1xyXG4gICAgaWYgKGlzTmFOKGNoYXJTcGFjZSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8ganNQREYuc2V0Q2hhclNwYWNlXCIpO1xyXG4gICAgfVxyXG4gICAgYWN0aXZlQ2hhclNwYWNlID0gY2hhclNwYWNlO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGxpbmVDYXBJRCA9IDA7XHJcbiAgLyoqXHJcbiAgICogSXMgYW4gT2JqZWN0IHByb3ZpZGluZyBhIG1hcHBpbmcgZnJvbSBodW1hbi1yZWFkYWJsZSB0b1xyXG4gICAqIGludGVnZXIgZmxhZyB2YWx1ZXMgZGVzaWduYXRpbmcgdGhlIHZhcmlldGllcyBvZiBsaW5lIGNhcFxyXG4gICAqIGFuZCBqb2luIHN0eWxlcy5cclxuICAgKlxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBDYXBKb2luU3R5bGVzXHJcbiAgICovXHJcbiAgQVBJLkNhcEpvaW5TdHlsZXMgPSB7XHJcbiAgICAwOiAwLFxyXG4gICAgYnV0dDogMCxcclxuICAgIGJ1dDogMCxcclxuICAgIG1pdGVyOiAwLFxyXG4gICAgMTogMSxcclxuICAgIHJvdW5kOiAxLFxyXG4gICAgcm91bmRlZDogMSxcclxuICAgIGNpcmNsZTogMSxcclxuICAgIDI6IDIsXHJcbiAgICBwcm9qZWN0aW5nOiAyLFxyXG4gICAgcHJvamVjdDogMixcclxuICAgIHNxdWFyZTogMixcclxuICAgIGJldmVsOiAyXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgbGluZSBjYXAgc3R5bGVzLlxyXG4gICAqIFNlZSB7anNQREYuQ2FwSm9pblN0eWxlc30gZm9yIHZhcmlhbnRzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBzdHlsZSBBIHN0cmluZyBvciBudW1iZXIgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2YgbGluZSBjYXAuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBzZXRMaW5lQ2FwXHJcbiAgICovXHJcbiAgQVBJLl9fcHJpdmF0ZV9fLnNldExpbmVDYXAgPSBBUEkuc2V0TGluZUNhcCA9IGZ1bmN0aW9uKHN0eWxlKSB7XHJcbiAgICB2YXIgaWQgPSBBUEkuQ2FwSm9pblN0eWxlc1tzdHlsZV07XHJcbiAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgXCJMaW5lIGNhcCBzdHlsZSBvZiAnXCIgK1xyXG4gICAgICAgICAgc3R5bGUgK1xyXG4gICAgICAgICAgXCInIGlzIG5vdCByZWNvZ25pemVkLiBTZWUgb3IgZXh0ZW5kIC5DYXBKb2luU3R5bGVzIHByb3BlcnR5IGZvciB2YWxpZCBzdHlsZXNcIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgbGluZUNhcElEID0gaWQ7XHJcbiAgICBvdXQoaWQgKyBcIiBKXCIpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIHZhciBsaW5lSm9pbklEID0gMDtcclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBsaW5lIGpvaW4gc3R5bGVzLlxyXG4gICAqIFNlZSB7anNQREYuQ2FwSm9pblN0eWxlc30gZm9yIHZhcmlhbnRzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBzdHlsZSBBIHN0cmluZyBvciBudW1iZXIgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2YgbGluZSBqb2luLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2V0TGluZUpvaW5cclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uc2V0TGluZUpvaW4gPSBBUEkuc2V0TGluZUpvaW4gPSBmdW5jdGlvbihzdHlsZSkge1xyXG4gICAgdmFyIGlkID0gQVBJLkNhcEpvaW5TdHlsZXNbc3R5bGVdO1xyXG4gICAgaWYgKGlkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIFwiTGluZSBqb2luIHN0eWxlIG9mICdcIiArXHJcbiAgICAgICAgICBzdHlsZSArXHJcbiAgICAgICAgICBcIicgaXMgbm90IHJlY29nbml6ZWQuIFNlZSBvciBleHRlbmQgLkNhcEpvaW5TdHlsZXMgcHJvcGVydHkgZm9yIHZhbGlkIHN0eWxlc1wiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBsaW5lSm9pbklEID0gaWQ7XHJcbiAgICBvdXQoaWQgKyBcIiBqXCIpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIHZhciBtaXRlckxpbWl0O1xyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIG1pdGVyTGltaXQgcHJvcGVydHksIHdoaWNoIGVmZmVjdHMgdGhlIG1heGltdW0gbWl0ZXIgbGVuZ3RoLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCBUaGUgbGVuZ3RoIG9mIHRoZSBtaXRlclxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2V0TGluZU1pdGVyTGltaXRcclxuICAgKi9cclxuICBBUEkuX19wcml2YXRlX18uc2V0TGluZU1pdGVyTGltaXQgPSBBUEkuX19wcml2YXRlX18uc2V0TWl0ZXJMaW1pdCA9IEFQSS5zZXRMaW5lTWl0ZXJMaW1pdCA9IEFQSS5zZXRNaXRlckxpbWl0ID0gZnVuY3Rpb24oXHJcbiAgICBsZW5ndGhcclxuICApIHtcclxuICAgIGxlbmd0aCA9IGxlbmd0aCB8fCAwO1xyXG4gICAgaWYgKGlzTmFOKGxlbmd0aCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8ganNQREYuc2V0TGluZU1pdGVyTGltaXRcIik7XHJcbiAgICB9XHJcbiAgICBvdXQoaHBmKHNjYWxlKGxlbmd0aCkpICsgXCIgTVwiKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGEgcGRmIGdyYXBoaWNzIHN0YXRlLlxyXG4gICAqIEBjbGFzcyBHU3RhdGVcclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcGFyYW1ldGVycyBBIHBhcmFtZXRlciBvYmplY3QgdGhhdCBjb250YWlucyBhbGwgcHJvcGVydGllcyB0aGlzIGdyYXBoaWNzIHN0YXRlIHdhbnRzIHRvIHNldC5cclxuICAgKiBTdXBwb3J0ZWQgYXJlOiBvcGFjaXR5LCBzdHJva2Utb3BhY2l0eVxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqL1xyXG4gIEFQSS5HU3RhdGUgPSBHU3RhdGU7XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgYSBlaXRoZXIgcHJldmlvdXNseSBhZGRlZCB7QGxpbmsgR1N0YXRlfSAodmlhIHtAbGluayBhZGRHU3RhdGV9KSBvciBhIG5ldyB7QGxpbmsgR1N0YXRlfS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ3xHU3RhdGV9IGdTdGF0ZSBJZiB0eXBlIGlzIHN0cmluZywgYSBwcmV2aW91c2x5IGFkZGVkIEdTdGF0ZSBpcyB1c2VkLCBpZiB0eXBlIGlzIEdTdGF0ZVxyXG4gICAqIGl0IHdpbGwgYmUgYWRkZWQgYmVmb3JlIHVzZS5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIHNldEdTdGF0ZVxyXG4gICAqL1xyXG4gIEFQSS5zZXRHU3RhdGUgPSBmdW5jdGlvbihnU3RhdGUpIHtcclxuICAgIGlmICh0eXBlb2YgZ1N0YXRlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIGdTdGF0ZSA9IGdTdGF0ZXNbZ1N0YXRlc01hcFtnU3RhdGVdXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGdTdGF0ZSA9IGFkZEdTdGF0ZShudWxsLCBnU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZ1N0YXRlLmVxdWFscyhhY3RpdmVHU3RhdGUpKSB7XHJcbiAgICAgIG91dChcIi9cIiArIGdTdGF0ZS5pZCArIFwiIGdzXCIpO1xyXG4gICAgICBhY3RpdmVHU3RhdGUgPSBnU3RhdGU7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIG5ldyBHcmFwaGljcyBTdGF0ZS4gRHVwbGljYXRlcyBhcmUgYXV0b21hdGljYWxseSBlbGltaW5hdGVkLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgTWlnaHQgYWxzbyBiZSBudWxsLCBpZiBubyBsYXRlciByZWZlcmVuY2UgdG8gdGhpcyBnU3RhdGUgaXMgbmVlZGVkXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGdTdGF0ZSBUaGUgZ1N0YXRlIG9iamVjdFxyXG4gICAqL1xyXG4gIHZhciBhZGRHU3RhdGUgPSBmdW5jdGlvbihrZXksIGdTdGF0ZSkge1xyXG4gICAgLy8gb25seSBhZGQgaXQgaWYgaXQgaXMgbm90IGFscmVhZHkgcHJlc2VudCAodGhlIGtleXMgcHJvdmlkZWQgYnkgdGhlIHVzZXIgbXVzdCBiZSB1bmlxdWUhKVxyXG4gICAgaWYgKGtleSAmJiBnU3RhdGVzTWFwW2tleV0pIHJldHVybjtcclxuICAgIHZhciBkdXBsaWNhdGUgPSBmYWxzZTtcclxuICAgIGZvciAodmFyIHMgaW4gZ1N0YXRlcykge1xyXG4gICAgICBpZiAoZ1N0YXRlcy5oYXNPd25Qcm9wZXJ0eShzKSkge1xyXG4gICAgICAgIGlmIChnU3RhdGVzW3NdLmVxdWFscyhnU3RhdGUpKSB7XHJcbiAgICAgICAgICBkdXBsaWNhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGR1cGxpY2F0ZSkge1xyXG4gICAgICBnU3RhdGUgPSBnU3RhdGVzW3NdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIGdTdGF0ZUtleSA9IFwiR1NcIiArIChPYmplY3Qua2V5cyhnU3RhdGVzKS5sZW5ndGggKyAxKS50b1N0cmluZygxMCk7XHJcbiAgICAgIGdTdGF0ZXNbZ1N0YXRlS2V5XSA9IGdTdGF0ZTtcclxuICAgICAgZ1N0YXRlLmlkID0gZ1N0YXRlS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldmVyYWwgdXNlciBrZXlzIG1heSBwb2ludCB0byB0aGUgc2FtZSBHU3RhdGUgb2JqZWN0XHJcbiAgICBrZXkgJiYgKGdTdGF0ZXNNYXBba2V5XSA9IGdTdGF0ZS5pZCk7XHJcblxyXG4gICAgZXZlbnRzLnB1Ymxpc2goXCJhZGRHU3RhdGVcIiwgZ1N0YXRlKTtcclxuXHJcbiAgICByZXR1cm4gZ1N0YXRlO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBuZXcge0BsaW5rIEdTdGF0ZX0gZm9yIGxhdGVyIHVzZS4gU2VlIHtAbGluayBzZXRHU3RhdGV9LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgKiBAcGFyYW0ge0dTdGF0ZX0gZ1N0YXRlXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqXHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGFkZEdTdGF0ZVxyXG4gICAqL1xyXG4gIEFQSS5hZGRHU3RhdGUgPSBmdW5jdGlvbihrZXksIGdTdGF0ZSkge1xyXG4gICAgYWRkR1N0YXRlKGtleSwgZ1N0YXRlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmVzIHRoZSBjdXJyZW50IGdyYXBoaWNzIHN0YXRlIChcInB1c2hlcyBpdCBvbiB0aGUgc3RhY2tcIikuIEl0IGNhbiBiZSByZXN0b3JlZCBieSB7QGxpbmsgcmVzdG9yZUdyYXBoaWNzU3RhdGV9XHJcbiAgICogbGF0ZXIuIEhlcmUsIHRoZSBnZW5lcmFsIHBkZiBncmFwaGljcyBzdGF0ZSBpcyBtZWFudCwgYWxzbyBpbmNsdWRpbmcgdGhlIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LFxyXG4gICAqIGZpbGwgYW5kIHN0cm9rZSBjb2xvcnMgZXRjLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2F2ZUdyYXBoaWNzU3RhdGVcclxuICAgKi9cclxuICBBUEkuc2F2ZUdyYXBoaWNzU3RhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIG91dChcInFcIik7XHJcbiAgICAvLyBhcyB3ZSBjYW5ub3Qgc2V0IGZvbnQga2V5IGFuZCBzaXplIGluZGVwZW5kZW50bHkgd2UgbXVzdCBrZWVwIHRyYWNrIG9mIGJvdGhcclxuICAgIGZvbnRTdGF0ZVN0YWNrLnB1c2goe1xyXG4gICAgICBrZXk6IGFjdGl2ZUZvbnRLZXksXHJcbiAgICAgIHNpemU6IGFjdGl2ZUZvbnRTaXplLFxyXG4gICAgICBjb2xvcjogdGV4dENvbG9yXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RvcmVzIGEgcHJldmlvdXNseSBzYXZlZCBncmFwaGljcyBzdGF0ZSBzYXZlZCBieSB7QGxpbmsgc2F2ZUdyYXBoaWNzU3RhdGV9IChcInBvcHMgdGhlIHN0YWNrXCIpLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgcmVzdG9yZUdyYXBoaWNzU3RhdGVcclxuICAgKi9cclxuICBBUEkucmVzdG9yZUdyYXBoaWNzU3RhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIG91dChcIlFcIik7XHJcblxyXG4gICAgLy8gcmVzdG9yZSBwcmV2aW91cyBmb250IHN0YXRlXHJcbiAgICB2YXIgZm9udFN0YXRlID0gZm9udFN0YXRlU3RhY2sucG9wKCk7XHJcbiAgICBhY3RpdmVGb250S2V5ID0gZm9udFN0YXRlLmtleTtcclxuICAgIGFjdGl2ZUZvbnRTaXplID0gZm9udFN0YXRlLnNpemU7XHJcbiAgICB0ZXh0Q29sb3IgPSBmb250U3RhdGUuY29sb3I7XHJcblxyXG4gICAgYWN0aXZlR1N0YXRlID0gbnVsbDtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBcHBlbmRzIHRoaXMgbWF0cml4IHRvIHRoZSBsZWZ0IG9mIGFsbCBwcmV2aW91c2x5IGFwcGxpZWQgbWF0cmljZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge01hdHJpeH0gbWF0cml4XHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBzZXRDdXJyZW50VHJhbnNmb3JtYXRpb25NYXRyaXhcclxuICAgKi9cclxuICBBUEkuc2V0Q3VycmVudFRyYW5zZm9ybWF0aW9uTWF0cml4ID0gZnVuY3Rpb24obWF0cml4KSB7XHJcbiAgICBvdXQobWF0cml4LnRvU3RyaW5nKCkgKyBcIiBjbVwiKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc2VydHMgYSBkZWJ1ZyBjb21tZW50IGludG8gdGhlIGdlbmVyYXRlZCBwZGYuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGNvbW1lbnRcclxuICAgKi9cclxuICBBUEkuY29tbWVudCA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgIG91dChcIiNcIiArIHRleHQpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUG9pbnRcclxuICAgKi9cclxuICB2YXIgUG9pbnQgPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICB2YXIgX3ggPSB4IHx8IDA7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ4XCIsIHtcclxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3g7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgX3ggPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBfeSA9IHkgfHwgMDtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInlcIiwge1xyXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfeTtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XHJcbiAgICAgICAgICBfeSA9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIF90eXBlID0gXCJwdFwiO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidHlwZVwiLCB7XHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF90eXBlO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgX3R5cGUgPSB2YWx1ZS50b1N0cmluZygpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlY3RhbmdsZVxyXG4gICAqL1xyXG4gIHZhciBSZWN0YW5nbGUgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7XHJcbiAgICBQb2ludC5jYWxsKHRoaXMsIHgsIHkpO1xyXG4gICAgdGhpcy50eXBlID0gXCJyZWN0XCI7XHJcblxyXG4gICAgdmFyIF93ID0gdyB8fCAwO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid1wiLCB7XHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF93O1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgIF93ID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgX2ggPSBoIHx8IDA7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoXCIsIHtcclxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX2g7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgX2ggPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1PYmplY3QvUmVuZGVyVGFyZ2V0XHJcbiAgICovXHJcblxyXG4gIHZhciBSZW5kZXJUYXJnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMucGFnZSA9IHBhZ2U7XHJcbiAgICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2U7XHJcbiAgICB0aGlzLnBhZ2VzID0gcGFnZXMuc2xpY2UoMCk7XHJcbiAgICB0aGlzLnBhZ2VzQ29udGV4dCA9IHBhZ2VzQ29udGV4dC5zbGljZSgwKTtcclxuICAgIHRoaXMueCA9IHBhZ2VYO1xyXG4gICAgdGhpcy55ID0gcGFnZVk7XHJcbiAgICB0aGlzLm1hdHJpeCA9IHBhZ2VNYXRyaXg7XHJcbiAgICB0aGlzLndpZHRoID0gZ2V0UGFnZVdpZHRoKGN1cnJlbnRQYWdlKTtcclxuICAgIHRoaXMuaGVpZ2h0ID0gZ2V0UGFnZUhlaWdodChjdXJyZW50UGFnZSk7XHJcbiAgICB0aGlzLm91dHB1dERlc3RpbmF0aW9uID0gb3V0cHV0RGVzdGluYXRpb247XHJcblxyXG4gICAgdGhpcy5pZCA9IFwiXCI7IC8vIHNldCBieSBlbmRGb3JtT2JqZWN0KClcclxuICAgIHRoaXMub2JqZWN0TnVtYmVyID0gLTE7IC8vIHdpbGwgYmUgc2V0IGJ5IHB1dFhPYmplY3QoKVxyXG4gIH07XHJcblxyXG4gIFJlbmRlclRhcmdldC5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcGFnZSA9IHRoaXMucGFnZTtcclxuICAgIGN1cnJlbnRQYWdlID0gdGhpcy5jdXJyZW50UGFnZTtcclxuICAgIHBhZ2VzQ29udGV4dCA9IHRoaXMucGFnZXNDb250ZXh0O1xyXG4gICAgcGFnZXMgPSB0aGlzLnBhZ2VzO1xyXG4gICAgcGFnZVggPSB0aGlzLng7XHJcbiAgICBwYWdlWSA9IHRoaXMueTtcclxuICAgIHBhZ2VNYXRyaXggPSB0aGlzLm1hdHJpeDtcclxuICAgIHNldFBhZ2VXaWR0aChjdXJyZW50UGFnZSwgdGhpcy53aWR0aCk7XHJcbiAgICBzZXRQYWdlSGVpZ2h0KGN1cnJlbnRQYWdlLCB0aGlzLmhlaWdodCk7XHJcbiAgICBvdXRwdXREZXN0aW5hdGlvbiA9IHRoaXMub3V0cHV0RGVzdGluYXRpb247XHJcbiAgfTtcclxuXHJcbiAgdmFyIGJlZ2luTmV3UmVuZGVyVGFyZ2V0ID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodCwgbWF0cml4KSB7XHJcbiAgICAvLyBzYXZlIGN1cnJlbnQgc3RhdGVcclxuICAgIHJlbmRlclRhcmdldFN0YWNrLnB1c2gobmV3IFJlbmRlclRhcmdldCgpKTtcclxuXHJcbiAgICAvLyBjbGVhciBwYWdlc1xyXG4gICAgcGFnZSA9IGN1cnJlbnRQYWdlID0gMDtcclxuICAgIHBhZ2VzID0gW107XHJcbiAgICBwYWdlWCA9IHg7XHJcbiAgICBwYWdlWSA9IHk7XHJcblxyXG4gICAgcGFnZU1hdHJpeCA9IG1hdHJpeDtcclxuXHJcbiAgICBiZWdpblBhZ2UoW3dpZHRoLCBoZWlnaHRdKTtcclxuICB9O1xyXG5cclxuICB2YXIgZW5kRm9ybU9iamVjdCA9IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgLy8gb25seSBhZGQgaXQgaWYgaXQgaXMgbm90IGFscmVhZHkgcHJlc2VudCAodGhlIGtleXMgcHJvdmlkZWQgYnkgdGhlIHVzZXIgbXVzdCBiZSB1bmlxdWUhKVxyXG4gICAgaWYgKHJlbmRlclRhcmdldE1hcFtrZXldKSB7XHJcbiAgICAgIHJlbmRlclRhcmdldFN0YWNrLnBvcCgpLnJlc3RvcmUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNhdmUgdGhlIGNyZWF0ZWQgeE9iamVjdFxyXG4gICAgdmFyIG5ld1hPYmplY3QgPSBuZXcgUmVuZGVyVGFyZ2V0KCk7XHJcblxyXG4gICAgdmFyIHhPYmplY3RJZCA9IFwiWG9cIiArIChPYmplY3Qua2V5cyhyZW5kZXJUYXJnZXRzKS5sZW5ndGggKyAxKS50b1N0cmluZygxMCk7XHJcbiAgICBuZXdYT2JqZWN0LmlkID0geE9iamVjdElkO1xyXG5cclxuICAgIHJlbmRlclRhcmdldE1hcFtrZXldID0geE9iamVjdElkO1xyXG4gICAgcmVuZGVyVGFyZ2V0c1t4T2JqZWN0SWRdID0gbmV3WE9iamVjdDtcclxuXHJcbiAgICBldmVudHMucHVibGlzaChcImFkZEZvcm1PYmplY3RcIiwgbmV3WE9iamVjdCk7XHJcblxyXG4gICAgLy8gcmVzdG9yZSBzdGF0ZSBmcm9tIHN0YWNrXHJcbiAgICByZW5kZXJUYXJnZXRTdGFjay5wb3AoKS5yZXN0b3JlKCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnRzIGEgbmV3IHBkZiBmb3JtIG9iamVjdCwgd2hpY2ggbWVhbnMgdGhhdCBhbGwgY29uc2VxdWVudCBkcmF3IGNhbGxzIHRhcmdldCBhIG5ldyBpbmRlcGVuZGVudCBvYmplY3RcclxuICAgKiB1bnRpbCB7QGxpbmsgZW5kRm9ybU9iamVjdH0gaXMgY2FsbGVkLiBUaGUgY3JlYXRlZCBvYmplY3QgY2FuIGJlIHJlZmVyZW5jZWQgYW5kIGRyYXduIGxhdGVyIHVzaW5nXHJcbiAgICoge0BsaW5rIGRvRm9ybU9iamVjdH0uIE5lc3RlZCBmb3JtIG9iamVjdHMgYXJlIHBvc3NpYmxlLlxyXG4gICAqIHgsIHksIHdpZHRoLCBoZWlnaHQgc2V0IHRoZSBib3VuZGluZyBib3ggdGhhdCBpcyB1c2VkIHRvIGNsaXAgdGhlIGNvbnRlbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0geFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxyXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXggVGhlIG1hdHJpeCB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byBjb252ZXJ0IHRoZSBmb3JtIG9iamVjdHMgY29vcmRpbmF0ZSBzeXN0ZW0gdG9cclxuICAgKiB0aGUgcGFyZW50J3MuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHJldHVybnMge2pzUERGfVxyXG4gICAqIEBtZW1iZXJvZiBqc1BERiNcclxuICAgKiBAbmFtZSBiZWdpbkZvcm1PYmplY3RcclxuICAgKi9cclxuICBBUEkuYmVnaW5Gb3JtT2JqZWN0ID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodCwgbWF0cml4KSB7XHJcbiAgICAvLyBUaGUgdXNlciBjYW4gc2V0IHRoZSBvdXRwdXQgdGFyZ2V0IHRvIGEgbmV3IGZvcm0gb2JqZWN0LiBOZXN0ZWQgZm9ybSBvYmplY3RzIGFyZSBwb3NzaWJsZS5cclxuICAgIC8vIEN1cnJlbnRseSwgdGhleSB1c2UgdGhlIHJlc291cmNlIGRpY3Rpb25hcnkgb2YgdGhlIHN1cnJvdW5kaW5nIHN0cmVhbS4gVGhpcyBzaG91bGQgYmUgY2hhbmdlZCwgYXNcclxuICAgIC8vIHRoZSBQREYtU3BlYyBzdGF0ZXM6XHJcbiAgICAvLyBcIkluIFBERiAxLjIgYW5kIGxhdGVyIHZlcnNpb25zLCBmb3JtIFhPYmplY3RzIG1heSBiZSBpbmRlcGVuZGVudCBvZiB0aGUgY29udGVudCBzdHJlYW1zIGluIHdoaWNoXHJcbiAgICAvLyB0aGV5IGFwcGVhciwgYW5kIHRoaXMgaXMgc3Ryb25nbHkgcmVjb21tZW5kZWQgYWx0aG91Z2ggbm90IHJlcXVpcmVkSW4gUERGIDEuMiBhbmQgbGF0ZXIgdmVyc2lvbnMsXHJcbiAgICAvLyBmb3JtIFhPYmplY3RzIG1heSBiZSBpbmRlcGVuZGVudCBvZiB0aGUgY29udGVudCBzdHJlYW1zIGluIHdoaWNoIHRoZXkgYXBwZWFyLCBhbmQgdGhpcyBpcyBzdHJvbmdseVxyXG4gICAgLy8gcmVjb21tZW5kZWQgYWx0aG91Z2ggbm90IHJlcXVpcmVkXCJcclxuICAgIGJlZ2luTmV3UmVuZGVyVGFyZ2V0KHgsIHksIHdpZHRoLCBoZWlnaHQsIG1hdHJpeCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDb21wbGV0ZXMgYW5kIHNhdmVzIHRoZSBmb3JtIG9iamVjdC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgYnkgd2hpY2ggdGhpcyBmb3JtIG9iamVjdCBjYW4gYmUgcmVmZXJlbmNlZC5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGVuZEZvcm1PYmplY3RcclxuICAgKi9cclxuICBBUEkuZW5kRm9ybU9iamVjdCA9IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgZW5kRm9ybU9iamVjdChrZXkpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogRHJhd3MgdGhlIHNwZWNpZmllZCBmb3JtIG9iamVjdCBieSByZWZlcmVuY2luZyB0byB0aGUgcmVzcGVjdGl2ZSBwZGYgWE9iamVjdCBjcmVhdGVkIHdpdGhcclxuICAgKiB7QGxpbmsgQVBJLmJlZ2luRm9ybU9iamVjdH0gYW5kIHtAbGluayBlbmRGb3JtT2JqZWN0fS5cclxuICAgKiBUaGUgbG9jYXRpb24gaXMgZGV0ZXJtaW5lZCBieSBtYXRyaXguXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgdG8gdGhlIGZvcm0gb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXggVGhlIG1hdHJpeCBhcHBsaWVkIGJlZm9yZSBkcmF3aW5nIHRoZSBmb3JtIG9iamVjdC5cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcmV0dXJucyB7anNQREZ9XHJcbiAgICogQG1lbWJlcm9mIGpzUERGI1xyXG4gICAqIEBuYW1lIGRvRm9ybU9iamVjdFxyXG4gICAqL1xyXG4gIEFQSS5kb0Zvcm1PYmplY3QgPSBmdW5jdGlvbihrZXksIG1hdHJpeCkge1xyXG4gICAgdmFyIHhPYmplY3QgPSByZW5kZXJUYXJnZXRzW3JlbmRlclRhcmdldE1hcFtrZXldXTtcclxuICAgIG91dChcInFcIik7XHJcbiAgICBvdXQobWF0cml4LnRvU3RyaW5nKCkgKyBcIiBjbVwiKTtcclxuICAgIG91dChcIi9cIiArIHhPYmplY3QuaWQgKyBcIiBEb1wiKTtcclxuICAgIG91dChcIlFcIik7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBmb3JtIG9iamVjdCBzcGVjaWZpZWQgYnkga2V5LlxyXG4gICAqIEBwYXJhbSBrZXkge1N0cmluZ31cclxuICAgKiBAcmV0dXJucyB7e3g6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgbWF0cml4OiBNYXRyaXh9fVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEByZXR1cm5zIHtqc1BERn1cclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgZ2V0Rm9ybU9iamVjdFxyXG4gICAqL1xyXG4gIEFQSS5nZXRGb3JtT2JqZWN0ID0gZnVuY3Rpb24oa2V5KSB7XHJcbiAgICB2YXIgeE9iamVjdCA9IHJlbmRlclRhcmdldHNbcmVuZGVyVGFyZ2V0TWFwW2tleV1dO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogeE9iamVjdC54LFxyXG4gICAgICB5OiB4T2JqZWN0LnksXHJcbiAgICAgIHdpZHRoOiB4T2JqZWN0LndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHhPYmplY3QuaGVpZ2h0LFxyXG4gICAgICBtYXRyaXg6IHhPYmplY3QubWF0cml4XHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmVzIGFzIFBERiBkb2N1bWVudC4gQW4gYWxpYXMgb2YganNQREYub3V0cHV0KCdzYXZlJywgJ2ZpbGVuYW1lLnBkZicpLlxyXG4gICAqIFVzZXMgRmlsZVNhdmVyLmpzLW1ldGhvZCBzYXZlQXMuXHJcbiAgICpcclxuICAgKiBAbWVtYmVyb2YganNQREYjXHJcbiAgICogQG5hbWUgc2F2ZVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZmlsZW5hbWUgVGhlIGZpbGVuYW1lIGluY2x1ZGluZyBleHRlbnNpb24uXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zIEFuIE9iamVjdCB3aXRoIGFkZGl0aW9uYWwgb3B0aW9ucywgcG9zc2libGUgb3B0aW9uczogJ3JldHVyblByb21pc2UnLlxyXG4gICAqIEByZXR1cm5zIHtqc1BERnxQcm9taXNlfSBqc1BERi1pbnN0YW5jZSAgICAgKi9cclxuICBBUEkuc2F2ZSA9IGZ1bmN0aW9uKGZpbGVuYW1lLCBvcHRpb25zKSB7XHJcbiAgICBmaWxlbmFtZSA9IGZpbGVuYW1lIHx8IFwiZ2VuZXJhdGVkLnBkZlwiO1xyXG5cclxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5yZXR1cm5Qcm9taXNlID0gb3B0aW9ucy5yZXR1cm5Qcm9taXNlIHx8IGZhbHNlO1xyXG5cclxuICAgIGlmIChvcHRpb25zLnJldHVyblByb21pc2UgPT09IGZhbHNlKSB7XHJcbiAgICAgIHNhdmVBcyhnZXRCbG9iKGJ1aWxkRG9jdW1lbnQoKSksIGZpbGVuYW1lKTtcclxuICAgICAgaWYgKHR5cGVvZiBzYXZlQXMudW5sb2FkID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICBpZiAoZ2xvYmFsT2JqZWN0LnNldFRpbWVvdXQpIHtcclxuICAgICAgICAgIHNldFRpbWVvdXQoc2F2ZUFzLnVubG9hZCwgOTExKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHZhciByZXN1bHQgPSBzYXZlQXMoZ2V0QmxvYihidWlsZERvY3VtZW50KCkpLCBmaWxlbmFtZSk7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHNhdmVBcy51bmxvYWQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICBpZiAoZ2xvYmFsT2JqZWN0LnNldFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNhdmVBcy51bmxvYWQsIDkxMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICByZWplY3QoZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9O1xyXG5cclxuICAvLyBhcHBseWluZyBwbHVnaW5zIChtb3JlIG1ldGhvZHMpIE9OIFRPUCBvZiBidWlsdC1pbiBBUEkuXHJcbiAgLy8gdGhpcyBpcyBpbnRlbnRpb25hbCBhcyB3ZSBhbGxvdyBwbHVnaW5zIHRvIG92ZXJyaWRlXHJcbiAgLy8gYnVpbHQtaW5zXHJcbiAgZm9yICh2YXIgcGx1Z2luIGluIGpzUERGLkFQSSkge1xyXG4gICAgaWYgKGpzUERGLkFQSS5oYXNPd25Qcm9wZXJ0eShwbHVnaW4pKSB7XHJcbiAgICAgIGlmIChwbHVnaW4gPT09IFwiZXZlbnRzXCIgJiYganNQREYuQVBJLmV2ZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAoZnVuY3Rpb24oZXZlbnRzLCBuZXdFdmVudHMpIHtcclxuICAgICAgICAgIC8vIGpzUERGLkFQSS5ldmVudHMgaXMgYSBKUyBBcnJheSBvZiBBcnJheXNcclxuICAgICAgICAgIC8vIHdoZXJlIGVhY2ggQXJyYXkgaXMgYSBwYWlyIG9mIGV2ZW50IG5hbWUsIGhhbmRsZXJcclxuICAgICAgICAgIC8vIEV2ZW50cyB3ZXJlIGFkZGVkIGJ5IHBsdWdpbnMgdG8gdGhlIGpzUERGIGluc3RhbnRpYXRvci5cclxuICAgICAgICAgIC8vIFRoZXNlIGFyZSBhbHdheXMgYWRkZWQgdG8gdGhlIG5ldyBpbnN0YW5jZSBhbmQgc29tZSByYW5cclxuICAgICAgICAgIC8vIGR1cmluZyBpbnN0YW50aWF0aW9uLlxyXG4gICAgICAgICAgdmFyIGV2ZW50bmFtZSwgaGFuZGxlcl9hbmRfYXJncywgaTtcclxuXHJcbiAgICAgICAgICBmb3IgKGkgPSBuZXdFdmVudHMubGVuZ3RoIC0gMTsgaSAhPT0gLTE7IGktLSkge1xyXG4gICAgICAgICAgICAvLyBzdWJzY3JpYmUgdGFrZXMgMyBhcmdzOiAndG9waWMnLCBmdW5jdGlvbiwgcnVub25jZV9mbGFnXHJcbiAgICAgICAgICAgIC8vIGlmIHVuZGVmaW5lZCwgcnVub25jZSBpcyBmYWxzZS5cclxuICAgICAgICAgICAgLy8gdXNlcnMgY2FuIGF0dGFjaCBjYWxsYmFjayBkaXJlY3RseSxcclxuICAgICAgICAgICAgLy8gb3IgdGhleSBjYW4gYXR0YWNoIGFuIGFycmF5IHdpdGggW2NhbGxiYWNrLCBydW5vbmNlX2ZsYWddXHJcbiAgICAgICAgICAgIC8vIHRoYXQncyB3aGF0IHRoZSBcImFwcGx5XCIgbWFnaWMgaXMgZm9yIGJlbG93LlxyXG4gICAgICAgICAgICBldmVudG5hbWUgPSBuZXdFdmVudHNbaV1bMF07XHJcbiAgICAgICAgICAgIGhhbmRsZXJfYW5kX2FyZ3MgPSBuZXdFdmVudHNbaV1bMV07XHJcbiAgICAgICAgICAgIGV2ZW50cy5zdWJzY3JpYmUuYXBwbHkoXHJcbiAgICAgICAgICAgICAgZXZlbnRzLFxyXG4gICAgICAgICAgICAgIFtldmVudG5hbWVdLmNvbmNhdChcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBoYW5kbGVyX2FuZF9hcmdzID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgPyBbaGFuZGxlcl9hbmRfYXJnc11cclxuICAgICAgICAgICAgICAgICAgOiBoYW5kbGVyX2FuZF9hcmdzXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pKGV2ZW50cywganNQREYuQVBJLmV2ZW50cyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgQVBJW3BsdWdpbl0gPSBqc1BERi5BUElbcGx1Z2luXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIGdldFBhZ2VXaWR0aCA9IChBUEkuZ2V0UGFnZVdpZHRoID0gZnVuY3Rpb24ocGFnZU51bWJlcikge1xyXG4gICAgcGFnZU51bWJlciA9IHBhZ2VOdW1iZXIgfHwgY3VycmVudFBhZ2U7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAocGFnZXNDb250ZXh0W3BhZ2VOdW1iZXJdLm1lZGlhQm94LnRvcFJpZ2h0WCAtXHJcbiAgICAgICAgcGFnZXNDb250ZXh0W3BhZ2VOdW1iZXJdLm1lZGlhQm94LmJvdHRvbUxlZnRYKSAvXHJcbiAgICAgIHNjYWxlRmFjdG9yXHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgc2V0UGFnZVdpZHRoID0gKEFQSS5zZXRQYWdlV2lkdGggPSBmdW5jdGlvbihwYWdlTnVtYmVyLCB2YWx1ZSkge1xyXG4gICAgcGFnZXNDb250ZXh0W3BhZ2VOdW1iZXJdLm1lZGlhQm94LnRvcFJpZ2h0WCA9XHJcbiAgICAgIHZhbHVlICogc2NhbGVGYWN0b3IgKyBwYWdlc0NvbnRleHRbcGFnZU51bWJlcl0ubWVkaWFCb3guYm90dG9tTGVmdFg7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBnZXRQYWdlSGVpZ2h0ID0gKEFQSS5nZXRQYWdlSGVpZ2h0ID0gZnVuY3Rpb24ocGFnZU51bWJlcikge1xyXG4gICAgcGFnZU51bWJlciA9IHBhZ2VOdW1iZXIgfHwgY3VycmVudFBhZ2U7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAocGFnZXNDb250ZXh0W3BhZ2VOdW1iZXJdLm1lZGlhQm94LnRvcFJpZ2h0WSAtXHJcbiAgICAgICAgcGFnZXNDb250ZXh0W3BhZ2VOdW1iZXJdLm1lZGlhQm94LmJvdHRvbUxlZnRZKSAvXHJcbiAgICAgIHNjYWxlRmFjdG9yXHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgc2V0UGFnZUhlaWdodCA9IChBUEkuc2V0UGFnZUhlaWdodCA9IGZ1bmN0aW9uKHBhZ2VOdW1iZXIsIHZhbHVlKSB7XHJcbiAgICBwYWdlc0NvbnRleHRbcGFnZU51bWJlcl0ubWVkaWFCb3gudG9wUmlnaHRZID1cclxuICAgICAgdmFsdWUgKiBzY2FsZUZhY3RvciArIHBhZ2VzQ29udGV4dFtwYWdlTnVtYmVyXS5tZWRpYUJveC5ib3R0b21MZWZ0WTtcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogT2JqZWN0IGV4cG9zaW5nIGludGVybmFsIEFQSSB0byBwbHVnaW5zXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBpZ25vcmVcclxuICAgKi9cclxuICBBUEkuaW50ZXJuYWwgPSB7XHJcbiAgICBwZGZFc2NhcGU6IHBkZkVzY2FwZSxcclxuICAgIGdldFN0eWxlOiBnZXRTdHlsZSxcclxuICAgIGdldEZvbnQ6IGdldEZvbnRFbnRyeSxcclxuICAgIGdldEZvbnRTaXplOiBnZXRGb250U2l6ZSxcclxuICAgIGdldENoYXJTcGFjZTogZ2V0Q2hhclNwYWNlLFxyXG4gICAgZ2V0VGV4dENvbG9yOiBnZXRUZXh0Q29sb3IsXHJcbiAgICBnZXRMaW5lSGVpZ2h0OiBnZXRMaW5lSGVpZ2h0LFxyXG4gICAgZ2V0TGluZUhlaWdodEZhY3RvcjogZ2V0TGluZUhlaWdodEZhY3RvcixcclxuICAgIGdldExpbmVXaWR0aDogZ2V0TGluZVdpZHRoLFxyXG4gICAgd3JpdGU6IHdyaXRlLFxyXG4gICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGU6IGdldEhvcml6b250YWxDb29yZGluYXRlLFxyXG4gICAgZ2V0VmVydGljYWxDb29yZGluYXRlOiBnZXRWZXJ0aWNhbENvb3JkaW5hdGUsXHJcbiAgICBnZXRDb29yZGluYXRlU3RyaW5nOiBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZVN0cmluZyxcclxuICAgIGdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZzogZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nLFxyXG4gICAgY29sbGVjdGlvbnM6IHt9LFxyXG4gICAgbmV3T2JqZWN0OiBuZXdPYmplY3QsXHJcbiAgICBuZXdBZGRpdGlvbmFsT2JqZWN0OiBuZXdBZGRpdGlvbmFsT2JqZWN0LFxyXG4gICAgbmV3T2JqZWN0RGVmZXJyZWQ6IG5ld09iamVjdERlZmVycmVkLFxyXG4gICAgbmV3T2JqZWN0RGVmZXJyZWRCZWdpbjogbmV3T2JqZWN0RGVmZXJyZWRCZWdpbixcclxuICAgIGdldEZpbHRlcnM6IGdldEZpbHRlcnMsXHJcbiAgICBwdXRTdHJlYW06IHB1dFN0cmVhbSxcclxuICAgIGV2ZW50czogZXZlbnRzLFxyXG4gICAgc2NhbGVGYWN0b3I6IHNjYWxlRmFjdG9yLFxyXG4gICAgcGFnZVNpemU6IHtcclxuICAgICAgZ2V0V2lkdGg6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBnZXRQYWdlV2lkdGgoY3VycmVudFBhZ2UpO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXRXaWR0aDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBzZXRQYWdlV2lkdGgoY3VycmVudFBhZ2UsIHZhbHVlKTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0SGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gZ2V0UGFnZUhlaWdodChjdXJyZW50UGFnZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldEhlaWdodDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBzZXRQYWdlSGVpZ2h0KGN1cnJlbnRQYWdlLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBlbmNyeXB0aW9uT3B0aW9uczogZW5jcnlwdGlvbk9wdGlvbnMsXHJcbiAgICBlbmNyeXB0aW9uOiBlbmNyeXB0aW9uLFxyXG4gICAgZ2V0RW5jcnlwdG9yOiBnZXRFbmNyeXB0b3IsXHJcbiAgICBvdXRwdXQ6IG91dHB1dCxcclxuICAgIGdldE51bWJlck9mUGFnZXM6IGdldE51bWJlck9mUGFnZXMsXHJcbiAgICBwYWdlczogcGFnZXMsXHJcbiAgICBvdXQ6IG91dCxcclxuICAgIGYyOiBmMixcclxuICAgIGYzOiBmMyxcclxuICAgIGdldFBhZ2VJbmZvOiBnZXRQYWdlSW5mbyxcclxuICAgIGdldFBhZ2VJbmZvQnlPYmpJZDogZ2V0UGFnZUluZm9CeU9iaklkLFxyXG4gICAgZ2V0Q3VycmVudFBhZ2VJbmZvOiBnZXRDdXJyZW50UGFnZUluZm8sXHJcbiAgICBnZXRQREZWZXJzaW9uOiBnZXRQZGZWZXJzaW9uLFxyXG4gICAgUG9pbnQ6IFBvaW50LFxyXG4gICAgUmVjdGFuZ2xlOiBSZWN0YW5nbGUsXHJcbiAgICBNYXRyaXg6IE1hdHJpeCxcclxuICAgIGhhc0hvdGZpeDogaGFzSG90Zml4IC8vRXhwb3NlIHRoZSBoYXNIb3RmaXggY2hlY2sgc28gcGx1Z2lucyBjYW4gYWxzbyBjaGVjayB0aGVtLlxyXG4gIH07XHJcblxyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBUEkuaW50ZXJuYWwucGFnZVNpemUsIFwid2lkdGhcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIGdldFBhZ2VXaWR0aChjdXJyZW50UGFnZSk7XHJcbiAgICB9LFxyXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICBzZXRQYWdlV2lkdGgoY3VycmVudFBhZ2UsIHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgfSk7XHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFQSS5pbnRlcm5hbC5wYWdlU2l6ZSwgXCJoZWlnaHRcIiwge1xyXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIGdldFBhZ2VIZWlnaHQoY3VycmVudFBhZ2UpO1xyXG4gICAgfSxcclxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgc2V0UGFnZUhlaWdodChjdXJyZW50UGFnZSwgdmFsdWUpO1xyXG4gICAgfSxcclxuICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICBjb25maWd1cmFibGU6IHRydWVcclxuICB9KTtcclxuXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gY29udGludWluZyBpbml0aWFsaXphdGlvbiBvZiBqc1BERiBEb2N1bWVudCBvYmplY3RcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyBBZGQgdGhlIGZpcnN0IHBhZ2UgYXV0b21hdGljYWxseVxyXG4gIGFkZEZvbnRzLmNhbGwoQVBJLCBzdGFuZGFyZEZvbnRzKTtcclxuICBhY3RpdmVGb250S2V5ID0gXCJGMVwiO1xyXG4gIF9hZGRQYWdlKGZvcm1hdCwgb3JpZW50YXRpb24pO1xyXG5cclxuICBldmVudHMucHVibGlzaChcImluaXRpYWxpemVkXCIpO1xyXG4gIHJldHVybiBBUEk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBqc1BERi5BUEkgaXMgYSBTVEFUSUMgcHJvcGVydHkgb2YganNQREYgY2xhc3MuXHJcbiAqIGpzUERGLkFQSSBpcyBhbiBvYmplY3QgeW91IGNhbiBhZGQgbWV0aG9kcyBhbmQgcHJvcGVydGllcyB0by5cclxuICogVGhlIG1ldGhvZHMgLyBwcm9wZXJ0aWVzIHlvdSBhZGQgd2lsbCBzaG93IHVwIGluIG5ldyBqc1BERiBvYmplY3RzLlxyXG4gKlxyXG4gKiBPbmUgcHJvcGVydHkgaXMgcHJlcG9wdWxhdGVkLiBJdCBpcyB0aGUgJ2V2ZW50cycgT2JqZWN0LiBQbHVnaW4gYXV0aG9ycyBjYW4gYWRkIHRvcGljcyxcclxuICogY2FsbGJhY2tzIHRvIHRoaXMgb2JqZWN0LiBUaGVzZSB3aWxsIGJlIHJlYXNzaWduZWQgdG8gYWxsIG5ldyBpbnN0YW5jZXMgb2YganNQREYuXHJcbiAqXHJcbiAqIEBzdGF0aWNcclxuICogQHB1YmxpY1xyXG4gKiBAbWVtYmVyb2YganNQREYjXHJcbiAqIEBuYW1lIEFQSVxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBqc1BERi5BUEkubXltZXRob2QgPSBmdW5jdGlvbigpe1xyXG4gKiAgIC8vICd0aGlzJyB3aWxsIGJlIHJlZiB0byBpbnRlcm5hbCBBUEkgb2JqZWN0LiBzZWUganNQREYgc291cmNlXHJcbiAqICAgLy8gLCBzbyB5b3UgY2FuIHJlZmVyIHRvIGJ1aWx0LWluIG1ldGhvZHMgbGlrZSBzbzpcclxuICogICAvLyAgICAgdGhpcy5saW5lKC4uLi4pXHJcbiAqICAgLy8gICAgIHRoaXMudGV4dCguLi4uKVxyXG4gKiB9XHJcbiAqIHZhciBwZGZkb2MgPSBuZXcganNQREYoKVxyXG4gKiBwZGZkb2MubXltZXRob2QoKSAvLyA8LSAhISEhISFcclxuICovXHJcbmpzUERGLkFQSSA9IHtcclxuICBldmVudHM6IFtdXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgdmVyc2lvbiBvZiBqc1BERi5cclxuICogQG5hbWUgdmVyc2lvblxyXG4gKiBAdHlwZSB7c3RyaW5nfVxyXG4gKiBAbWVtYmVyb2YganNQREYjXHJcbiAqL1xyXG5qc1BERi52ZXJzaW9uID0gXCIwLjAuMFwiO1xyXG5cclxuZXhwb3J0IHsganNQREYsIFNoYWRpbmdQYXR0ZXJuLCBUaWxpbmdQYXR0ZXJuLCBHU3RhdGUgfTtcclxuZXhwb3J0IGRlZmF1bHQganNQREY7XHJcbiIsIi8qIGdsb2JhbCBqc1BERiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE2IEFsZXhhbmRlciBXZWlkdCxcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9CaWdnQTk0XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiAqL1xuXG4vKipcbiAqIGpzUERGIEFjcm9Gb3JtIFBsdWdpblxuICogQG1vZHVsZSBBY3JvRm9ybVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5cbnZhciBqc1BERkFQSSA9IGpzUERGLkFQSTtcbnZhciBzY2FsZUZhY3RvciA9IDE7XG5cbnZhciBwZGZFc2NhcGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWVcbiAgICAucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpXG4gICAgLnJlcGxhY2UoL1xcKC9nLCBcIlxcXFwoXCIpXG4gICAgLnJlcGxhY2UoL1xcKS9nLCBcIlxcXFwpXCIpO1xufTtcbnZhciBwZGZVbmVzY2FwZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZVxuICAgIC5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcIlxcXFxcIilcbiAgICAucmVwbGFjZSgvXFxcXFxcKC9nLCBcIihcIilcbiAgICAucmVwbGFjZSgvXFxcXFxcKS9nLCBcIilcIik7XG59O1xuXG52YXIgZjIgPSBmdW5jdGlvbihudW1iZXIpIHtcbiAgcmV0dXJuIG51bWJlci50b0ZpeGVkKDIpOyAvLyBJZSwgJS4yZlxufTtcblxudmFyIGY1ID0gZnVuY3Rpb24obnVtYmVyKSB7XG4gIHJldHVybiBudW1iZXIudG9GaXhlZCg1KTsgLy8gSWUsICUuMmZcbn07XG5cbmpzUERGQVBJLl9fYWNyb2Zvcm1fXyA9IHt9O1xudmFyIGluaGVyaXQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7XG4gIGNoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG4gIGNoaWxkLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNoaWxkO1xufTtcblxudmFyIHNjYWxlID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4geCAqIHNjYWxlRmFjdG9yO1xufTtcblxudmFyIGNyZWF0ZUZvcm1YT2JqZWN0ID0gZnVuY3Rpb24oZm9ybU9iamVjdCkge1xuICB2YXIgeG9iaiA9IG5ldyBBY3JvRm9ybVhPYmplY3QoKTtcbiAgdmFyIGhlaWdodCA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgfHwgMDtcbiAgdmFyIHdpZHRoID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIHx8IDA7XG4gIHhvYmouQkJveCA9IFswLCAwLCBOdW1iZXIoZjIod2lkdGgpKSwgTnVtYmVyKGYyKGhlaWdodCkpXTtcbiAgcmV0dXJuIHhvYmo7XG59O1xuXG4vKipcbiAqIEJpdC1PcGVyYXRpb25zXG4gKi9cbnZhciBzZXRCaXQgPSAoanNQREZBUEkuX19hY3JvZm9ybV9fLnNldEJpdCA9IGZ1bmN0aW9uKG51bWJlciwgYml0UG9zaXRpb24pIHtcbiAgbnVtYmVyID0gbnVtYmVyIHx8IDA7XG4gIGJpdFBvc2l0aW9uID0gYml0UG9zaXRpb24gfHwgMDtcblxuICBpZiAoaXNOYU4obnVtYmVyKSB8fCBpc05hTihiaXRQb3NpdGlvbikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5BUEkuX19hY3JvZm9ybV9fLnNldEJpdFwiXG4gICAgKTtcbiAgfVxuICB2YXIgYml0TWFzayA9IDEgPDwgYml0UG9zaXRpb247XG5cbiAgbnVtYmVyIHw9IGJpdE1hc2s7XG5cbiAgcmV0dXJuIG51bWJlcjtcbn0pO1xuXG52YXIgY2xlYXJCaXQgPSAoanNQREZBUEkuX19hY3JvZm9ybV9fLmNsZWFyQml0ID0gZnVuY3Rpb24obnVtYmVyLCBiaXRQb3NpdGlvbikge1xuICBudW1iZXIgPSBudW1iZXIgfHwgMDtcbiAgYml0UG9zaXRpb24gPSBiaXRQb3NpdGlvbiB8fCAwO1xuXG4gIGlmIChpc05hTihudW1iZXIpIHx8IGlzTmFOKGJpdFBvc2l0aW9uKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLkFQSS5fX2Fjcm9mb3JtX18uY2xlYXJCaXRcIlxuICAgICk7XG4gIH1cbiAgdmFyIGJpdE1hc2sgPSAxIDw8IGJpdFBvc2l0aW9uO1xuXG4gIG51bWJlciAmPSB+Yml0TWFzaztcblxuICByZXR1cm4gbnVtYmVyO1xufSk7XG5cbnZhciBnZXRCaXQgPSAoanNQREZBUEkuX19hY3JvZm9ybV9fLmdldEJpdCA9IGZ1bmN0aW9uKG51bWJlciwgYml0UG9zaXRpb24pIHtcbiAgaWYgKGlzTmFOKG51bWJlcikgfHwgaXNOYU4oYml0UG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuQVBJLl9fYWNyb2Zvcm1fXy5nZXRCaXRcIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIChudW1iZXIgJiAoMSA8PCBiaXRQb3NpdGlvbikpID09PSAwID8gMCA6IDE7XG59KTtcblxuLypcbiAqIEZmIHN0YXJ0cyBjb3VudGluZyB0aGUgYml0IHBvc2l0aW9uIGF0IDEgYW5kIG5vdCBsaWtlIGphdmFzY3JpcHQgYXQgMFxuICovXG52YXIgZ2V0Qml0Rm9yUGRmID0gKGpzUERGQVBJLl9fYWNyb2Zvcm1fXy5nZXRCaXRGb3JQZGYgPSBmdW5jdGlvbihcbiAgbnVtYmVyLFxuICBiaXRQb3NpdGlvblxuKSB7XG4gIGlmIChpc05hTihudW1iZXIpIHx8IGlzTmFOKGJpdFBvc2l0aW9uKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLkFQSS5fX2Fjcm9mb3JtX18uZ2V0Qml0Rm9yUGRmXCJcbiAgICApO1xuICB9XG4gIHJldHVybiBnZXRCaXQobnVtYmVyLCBiaXRQb3NpdGlvbiAtIDEpO1xufSk7XG5cbnZhciBzZXRCaXRGb3JQZGYgPSAoanNQREZBUEkuX19hY3JvZm9ybV9fLnNldEJpdEZvclBkZiA9IGZ1bmN0aW9uKFxuICBudW1iZXIsXG4gIGJpdFBvc2l0aW9uXG4pIHtcbiAgaWYgKGlzTmFOKG51bWJlcikgfHwgaXNOYU4oYml0UG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuQVBJLl9fYWNyb2Zvcm1fXy5zZXRCaXRGb3JQZGZcIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHNldEJpdChudW1iZXIsIGJpdFBvc2l0aW9uIC0gMSk7XG59KTtcblxudmFyIGNsZWFyQml0Rm9yUGRmID0gKGpzUERGQVBJLl9fYWNyb2Zvcm1fXy5jbGVhckJpdEZvclBkZiA9IGZ1bmN0aW9uKFxuICBudW1iZXIsXG4gIGJpdFBvc2l0aW9uXG4pIHtcbiAgaWYgKGlzTmFOKG51bWJlcikgfHwgaXNOYU4oYml0UG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuQVBJLl9fYWNyb2Zvcm1fXy5jbGVhckJpdEZvclBkZlwiXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY2xlYXJCaXQobnVtYmVyLCBiaXRQb3NpdGlvbiAtIDEpO1xufSk7XG5cbnZhciBjYWxjdWxhdGVDb29yZGluYXRlcyA9IChqc1BERkFQSS5fX2Fjcm9mb3JtX18uY2FsY3VsYXRlQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbihcbiAgYXJncyxcbiAgc2NvcGVcbikge1xuICB2YXIgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGUgPSBzY29wZS5pbnRlcm5hbC5nZXRIb3Jpem9udGFsQ29vcmRpbmF0ZTtcbiAgdmFyIGdldFZlcnRpY2FsQ29vcmRpbmF0ZSA9IHNjb3BlLmludGVybmFsLmdldFZlcnRpY2FsQ29vcmRpbmF0ZTtcbiAgdmFyIHggPSBhcmdzWzBdO1xuICB2YXIgeSA9IGFyZ3NbMV07XG4gIHZhciB3ID0gYXJnc1syXTtcbiAgdmFyIGggPSBhcmdzWzNdO1xuXG4gIHZhciBjb29yZGluYXRlcyA9IHt9O1xuXG4gIGNvb3JkaW5hdGVzLmxvd2VyTGVmdF9YID0gZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGUoeCkgfHwgMDtcbiAgY29vcmRpbmF0ZXMubG93ZXJMZWZ0X1kgPSBnZXRWZXJ0aWNhbENvb3JkaW5hdGUoeSArIGgpIHx8IDA7XG4gIGNvb3JkaW5hdGVzLnVwcGVyUmlnaHRfWCA9IGdldEhvcml6b250YWxDb29yZGluYXRlKHggKyB3KSB8fCAwO1xuICBjb29yZGluYXRlcy51cHBlclJpZ2h0X1kgPSBnZXRWZXJ0aWNhbENvb3JkaW5hdGUoeSkgfHwgMDtcblxuICByZXR1cm4gW1xuICAgIE51bWJlcihmMihjb29yZGluYXRlcy5sb3dlckxlZnRfWCkpLFxuICAgIE51bWJlcihmMihjb29yZGluYXRlcy5sb3dlckxlZnRfWSkpLFxuICAgIE51bWJlcihmMihjb29yZGluYXRlcy51cHBlclJpZ2h0X1gpKSxcbiAgICBOdW1iZXIoZjIoY29vcmRpbmF0ZXMudXBwZXJSaWdodF9ZKSlcbiAgXTtcbn0pO1xuXG52YXIgY2FsY3VsYXRlQXBwZWFyYW5jZVN0cmVhbSA9IGZ1bmN0aW9uKGZvcm1PYmplY3QpIHtcbiAgaWYgKGZvcm1PYmplY3QuYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQpIHtcbiAgICByZXR1cm4gZm9ybU9iamVjdC5hcHBlYXJhbmNlU3RyZWFtQ29udGVudDtcbiAgfVxuXG4gIGlmICghZm9ybU9iamVjdC5WICYmICFmb3JtT2JqZWN0LkRWKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gZWxzZSBjYWxjdWxhdGUgaXRcblxuICB2YXIgc3RyZWFtID0gW107XG4gIHZhciB0ZXh0ID0gZm9ybU9iamVjdC5fViB8fCBmb3JtT2JqZWN0LkRWO1xuICB2YXIgY2FsY1JlcyA9IGNhbGN1bGF0ZVgoZm9ybU9iamVjdCwgdGV4dCk7XG4gIHZhciBmb250S2V5ID0gZm9ybU9iamVjdC5zY29wZS5pbnRlcm5hbC5nZXRGb250KFxuICAgIGZvcm1PYmplY3QuZm9udE5hbWUsXG4gICAgZm9ybU9iamVjdC5mb250U3R5bGVcbiAgKS5pZDtcblxuICAvL1BERiAzMjAwMC0xOjIwMDgsIHBhZ2UgNDQ0XG4gIHN0cmVhbS5wdXNoKFwiL1R4IEJNQ1wiKTtcbiAgc3RyZWFtLnB1c2goXCJxXCIpO1xuICBzdHJlYW0ucHVzaChcIkJUXCIpOyAvLyBCZWdpbiBUZXh0XG4gIHN0cmVhbS5wdXNoKGZvcm1PYmplY3Quc2NvcGUuX19wcml2YXRlX18uZW5jb2RlQ29sb3JTdHJpbmcoZm9ybU9iamVjdC5jb2xvcikpO1xuICBzdHJlYW0ucHVzaChcIi9cIiArIGZvbnRLZXkgKyBcIiBcIiArIGYyKGNhbGNSZXMuZm9udFNpemUpICsgXCIgVGZcIik7XG4gIHN0cmVhbS5wdXNoKFwiMSAwIDAgMSAwIDAgVG1cIik7IC8vIFRyYW5zZm9ybWF0aW9uIE1hdHJpeFxuICBzdHJlYW0ucHVzaChjYWxjUmVzLnRleHQpO1xuICBzdHJlYW0ucHVzaChcIkVUXCIpOyAvLyBFbmQgVGV4dFxuICBzdHJlYW0ucHVzaChcIlFcIik7XG4gIHN0cmVhbS5wdXNoKFwiRU1DXCIpO1xuXG4gIHZhciBhcHBlYXJhbmNlU3RyZWFtQ29udGVudCA9IGNyZWF0ZUZvcm1YT2JqZWN0KGZvcm1PYmplY3QpO1xuICBhcHBlYXJhbmNlU3RyZWFtQ29udGVudC5zY29wZSA9IGZvcm1PYmplY3Quc2NvcGU7XG4gIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50LnN0cmVhbSA9IHN0cmVhbS5qb2luKFwiXFxuXCIpO1xuICByZXR1cm4gYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQ7XG59O1xuXG52YXIgY2FsY3VsYXRlWCA9IGZ1bmN0aW9uKGZvcm1PYmplY3QsIHRleHQpIHtcbiAgdmFyIG1heEZvbnRTaXplID1cbiAgICBmb3JtT2JqZWN0LmZvbnRTaXplID09PSAwID8gZm9ybU9iamVjdC5tYXhGb250U2l6ZSA6IGZvcm1PYmplY3QuZm9udFNpemU7XG4gIHZhciByZXR1cm5WYWx1ZSA9IHtcbiAgICB0ZXh0OiBcIlwiLFxuICAgIGZvbnRTaXplOiBcIlwiXG4gIH07XG4gIC8vIFJlbW92ZSBCcmFja2V0c1xuICB0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgMSkgPT0gXCIoXCIgPyB0ZXh0LnN1YnN0cigxKSA6IHRleHQ7XG4gIHRleHQgPVxuICAgIHRleHQuc3Vic3RyKHRleHQubGVuZ3RoIC0gMSkgPT0gXCIpXCJcbiAgICAgID8gdGV4dC5zdWJzdHIoMCwgdGV4dC5sZW5ndGggLSAxKVxuICAgICAgOiB0ZXh0O1xuICAvLyBzcGxpdCBpbnRvIGFycmF5IG9mIHdvcmRzXG4gIHZhciB0ZXh0U3BsaXQgPSB0ZXh0LnNwbGl0KFwiIFwiKTtcbiAgaWYgKGZvcm1PYmplY3QubXVsdGlsaW5lKSB7XG4gICAgdGV4dFNwbGl0ID0gdGV4dFNwbGl0Lm1hcCh3b3JkID0+IHdvcmQuc3BsaXQoXCJcXG5cIikpO1xuICB9IGVsc2Uge1xuICAgIHRleHRTcGxpdCA9IHRleHRTcGxpdC5tYXAod29yZCA9PiBbd29yZF0pO1xuICB9XG5cbiAgdmFyIGZvbnRTaXplID0gbWF4Rm9udFNpemU7IC8vIFRoZSBTdGFydGluZyBmb250U2l6ZSAoVGhlIE1heGltdW0pXG4gIHZhciBsaW5lU3BhY2luZyA9IDI7XG4gIHZhciBib3JkZXJQYWRkaW5nID0gMjtcblxuICB2YXIgaGVpZ2h0ID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSB8fCAwO1xuICBoZWlnaHQgPSBoZWlnaHQgPCAwID8gLWhlaWdodCA6IGhlaWdodDtcbiAgdmFyIHdpZHRoID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIHx8IDA7XG4gIHdpZHRoID0gd2lkdGggPCAwID8gLXdpZHRoIDogd2lkdGg7XG5cbiAgdmFyIGlzU21hbGxlclRoYW5XaWR0aCA9IGZ1bmN0aW9uKGksIGxhc3RMaW5lLCBmb250U2l6ZSkge1xuICAgIGlmIChpICsgMSA8IHRleHRTcGxpdC5sZW5ndGgpIHtcbiAgICAgIHZhciB0bXAgPSBsYXN0TGluZSArIFwiIFwiICsgdGV4dFNwbGl0W2kgKyAxXVswXTtcbiAgICAgIHZhciBUZXh0V2lkdGggPSBjYWxjdWxhdGVGb250U3BhY2UodG1wLCBmb3JtT2JqZWN0LCBmb250U2l6ZSkud2lkdGg7XG4gICAgICB2YXIgRmllbGRXaWR0aCA9IHdpZHRoIC0gMiAqIGJvcmRlclBhZGRpbmc7XG4gICAgICByZXR1cm4gVGV4dFdpZHRoIDw9IEZpZWxkV2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgZm9udFNpemUrKztcbiAgRm9udFNpemU6IHdoaWxlIChmb250U2l6ZSA+IDApIHtcbiAgICB0ZXh0ID0gXCJcIjtcbiAgICBmb250U2l6ZS0tO1xuICAgIHZhciB0ZXh0SGVpZ2h0ID0gY2FsY3VsYXRlRm9udFNwYWNlKFwiM1wiLCBmb3JtT2JqZWN0LCBmb250U2l6ZSkuaGVpZ2h0O1xuICAgIHZhciBzdGFydFkgPSBmb3JtT2JqZWN0Lm11bHRpbGluZVxuICAgICAgPyBoZWlnaHQgLSBmb250U2l6ZVxuICAgICAgOiAoaGVpZ2h0IC0gdGV4dEhlaWdodCkgLyAyO1xuICAgIHN0YXJ0WSArPSBsaW5lU3BhY2luZztcbiAgICB2YXIgc3RhcnRYO1xuXG4gICAgdmFyIGxhc3RZID0gc3RhcnRZO1xuICAgIHZhciBmaXJzdFdvcmRJbkxpbmUgPSAwLFxuICAgICAgbGFzdFdvcmRJbkxpbmUgPSAwO1xuICAgIHZhciBsYXN0TGVuZ3RoO1xuICAgIHZhciBjdXJyV29yZCA9IDA7XG5cbiAgICBpZiAoZm9udFNpemUgPD0gMCkge1xuICAgICAgLy8gSW4gY2FzZSwgdGhlIFRleHQgZG9lc24ndCBmaXQgYXQgYWxsXG4gICAgICBmb250U2l6ZSA9IDEyO1xuICAgICAgdGV4dCA9IFwiKC4uLikgVGpcXG5cIjtcbiAgICAgIHRleHQgKz1cbiAgICAgICAgXCIlIFdpZHRoIG9mIFRleHQ6IFwiICtcbiAgICAgICAgY2FsY3VsYXRlRm9udFNwYWNlKHRleHQsIGZvcm1PYmplY3QsIGZvbnRTaXplKS53aWR0aCArXG4gICAgICAgIFwiLCBGaWVsZFdpZHRoOlwiICtcbiAgICAgICAgd2lkdGggK1xuICAgICAgICBcIlxcblwiO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdmFyIGxhc3RMaW5lID0gXCJcIjtcbiAgICB2YXIgbGluZUNvdW50ID0gMDtcbiAgICBMaW5lOiBmb3IgKHZhciBpID0gMDsgaSA8IHRleHRTcGxpdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRleHRTcGxpdC5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICBsZXQgaXNXaXRoTmV3TGluZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGV4dFNwbGl0W2ldLmxlbmd0aCAhPT0gMSAmJiBjdXJyV29yZCAhPT0gdGV4dFNwbGl0W2ldLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAodGV4dEhlaWdodCArIGxpbmVTcGFjaW5nKSAqIChsaW5lQ291bnQgKyAyKSArIGxpbmVTcGFjaW5nID5cbiAgICAgICAgICAgIGhlaWdodFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29udGludWUgRm9udFNpemU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGFzdExpbmUgKz0gdGV4dFNwbGl0W2ldW2N1cnJXb3JkXTtcbiAgICAgICAgICBpc1dpdGhOZXdMaW5lID0gdHJ1ZTtcbiAgICAgICAgICBsYXN0V29yZEluTGluZSA9IGk7XG4gICAgICAgICAgaS0tO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RMaW5lICs9IHRleHRTcGxpdFtpXVtjdXJyV29yZF0gKyBcIiBcIjtcbiAgICAgICAgICBsYXN0TGluZSA9XG4gICAgICAgICAgICBsYXN0TGluZS5zdWJzdHIobGFzdExpbmUubGVuZ3RoIC0gMSkgPT0gXCIgXCJcbiAgICAgICAgICAgICAgPyBsYXN0TGluZS5zdWJzdHIoMCwgbGFzdExpbmUubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgOiBsYXN0TGluZTtcbiAgICAgICAgICB2YXIga2V5ID0gcGFyc2VJbnQoaSk7XG4gICAgICAgICAgdmFyIG5leHRMaW5lSXNTbWFsbGVyID0gaXNTbWFsbGVyVGhhbldpZHRoKGtleSwgbGFzdExpbmUsIGZvbnRTaXplKTtcbiAgICAgICAgICB2YXIgaXNMYXN0V29yZCA9IGkgPj0gdGV4dFNwbGl0Lmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICBpZiAobmV4dExpbmVJc1NtYWxsZXIgJiYgIWlzTGFzdFdvcmQpIHtcbiAgICAgICAgICAgIGxhc3RMaW5lICs9IFwiIFwiO1xuICAgICAgICAgICAgY3VycldvcmQgPSAwO1xuICAgICAgICAgICAgY29udGludWU7IC8vIExpbmVcbiAgICAgICAgICB9IGVsc2UgaWYgKCFuZXh0TGluZUlzU21hbGxlciAmJiAhaXNMYXN0V29yZCkge1xuICAgICAgICAgICAgaWYgKCFmb3JtT2JqZWN0Lm11bHRpbGluZSkge1xuICAgICAgICAgICAgICBjb250aW51ZSBGb250U2l6ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAodGV4dEhlaWdodCArIGxpbmVTcGFjaW5nKSAqIChsaW5lQ291bnQgKyAyKSArIGxpbmVTcGFjaW5nID5cbiAgICAgICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIFRleHQgaXMgaGlnaGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gRmllbGRPYmplY3RcbiAgICAgICAgICAgICAgICBjb250aW51ZSBGb250U2l6ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsYXN0V29yZEluTGluZSA9IGtleTtcbiAgICAgICAgICAgICAgLy8gZ28gb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTGFzdFdvcmQpIHtcbiAgICAgICAgICAgIGxhc3RXb3JkSW5MaW5lID0ga2V5O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGZvcm1PYmplY3QubXVsdGlsaW5lICYmXG4gICAgICAgICAgICAgICh0ZXh0SGVpZ2h0ICsgbGluZVNwYWNpbmcpICogKGxpbmVDb3VudCArIDIpICsgbGluZVNwYWNpbmcgPlxuICAgICAgICAgICAgICAgIGhlaWdodFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBUZXh0IGlzIGhpZ2hlciB0aGFuIHRoZSBGaWVsZE9iamVjdFxuICAgICAgICAgICAgICBjb250aW51ZSBGb250U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIGxhc3QgYmxhbmtcblxuICAgICAgICB2YXIgbGluZSA9IFwiXCI7XG5cbiAgICAgICAgZm9yICh2YXIgeCA9IGZpcnN0V29yZEluTGluZTsgeCA8PSBsYXN0V29yZEluTGluZTsgeCsrKSB7XG4gICAgICAgICAgdmFyIGN1cnJMaW5lID0gdGV4dFNwbGl0W3hdO1xuICAgICAgICAgIGlmIChmb3JtT2JqZWN0Lm11bHRpbGluZSkge1xuICAgICAgICAgICAgaWYgKHggPT09IGxhc3RXb3JkSW5MaW5lKSB7XG4gICAgICAgICAgICAgIGxpbmUgKz0gY3VyckxpbmVbY3VycldvcmRdICsgXCIgXCI7XG4gICAgICAgICAgICAgIGN1cnJXb3JkID0gKGN1cnJXb3JkICsgMSkgJSBjdXJyTGluZS5sZW5ndGg7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHggPT09IGZpcnN0V29yZEluTGluZSkge1xuICAgICAgICAgICAgICBsaW5lICs9IGN1cnJMaW5lW2N1cnJMaW5lLmxlbmd0aCAtIDFdICsgXCIgXCI7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lICs9IGN1cnJMaW5lWzBdICsgXCIgXCI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgbGFzdCBibGFua1xuICAgICAgICBsaW5lID1cbiAgICAgICAgICBsaW5lLnN1YnN0cihsaW5lLmxlbmd0aCAtIDEpID09IFwiIFwiXG4gICAgICAgICAgICA/IGxpbmUuc3Vic3RyKDAsIGxpbmUubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIDogbGluZTtcbiAgICAgICAgLy8gbGFzdExlbmd0aCAtPSBibGFua1NwYWNlLndpZHRoO1xuICAgICAgICBsYXN0TGVuZ3RoID0gY2FsY3VsYXRlRm9udFNwYWNlKGxpbmUsIGZvcm1PYmplY3QsIGZvbnRTaXplKS53aWR0aDtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgc3RhcnRYXG4gICAgICAgIHN3aXRjaCAoZm9ybU9iamVjdC50ZXh0QWxpZ24pIHtcbiAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgIHN0YXJ0WCA9IHdpZHRoIC0gbGFzdExlbmd0aCAtIGJvcmRlclBhZGRpbmc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiY2VudGVyXCI6XG4gICAgICAgICAgICBzdGFydFggPSAod2lkdGggLSBsYXN0TGVuZ3RoKSAvIDI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBzdGFydFggPSBib3JkZXJQYWRkaW5nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCArPSBmMihzdGFydFgpICsgXCIgXCIgKyBmMihsYXN0WSkgKyBcIiBUZFxcblwiO1xuICAgICAgICB0ZXh0ICs9IFwiKFwiICsgcGRmRXNjYXBlKGxpbmUpICsgXCIpIFRqXFxuXCI7XG4gICAgICAgIC8vIHJlc2V0IFggaW4gUERGXG4gICAgICAgIHRleHQgKz0gLWYyKHN0YXJ0WCkgKyBcIiAwIFRkXFxuXCI7XG5cbiAgICAgICAgLy8gQWZ0ZXIgYSBMaW5lLCBhZGp1c3QgeSBwb3NpdGlvblxuICAgICAgICBsYXN0WSA9IC0oZm9udFNpemUgKyBsaW5lU3BhY2luZyk7XG5cbiAgICAgICAgLy8gUmVzZXQgZm9yIG5leHQgaXRlcmF0aW9uIHN0ZXBcbiAgICAgICAgbGFzdExlbmd0aCA9IDA7XG4gICAgICAgIGZpcnN0V29yZEluTGluZSA9IGlzV2l0aE5ld0xpbmUgPyBsYXN0V29yZEluTGluZSA6IGxhc3RXb3JkSW5MaW5lICsgMTtcbiAgICAgICAgbGluZUNvdW50Kys7XG5cbiAgICAgICAgbGFzdExpbmUgPSBcIlwiO1xuICAgICAgICBjb250aW51ZSBMaW5lO1xuICAgICAgfVxuICAgIH1cbiAgICBicmVhaztcbiAgfVxuXG4gIHJldHVyblZhbHVlLnRleHQgPSB0ZXh0O1xuICByZXR1cm5WYWx1ZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuXG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn07XG5cbi8qKlxuICogU21hbGwgd29ya2Fyb3VuZCBmb3IgY2FsY3VsYXRpbmcgdGhlIFRleHRNZXRyaWMgYXBwcm94aW1hdGVseS5cbiAqXG4gKiBAcGFyYW0gdGV4dFxuICogQHBhcmFtIGZvbnRzaXplXG4gKiBAcmV0dXJucyB7VGV4dE1ldHJpY3N9IChIYXMgSGVpZ2h0IGFuZCBXaWR0aClcbiAqL1xudmFyIGNhbGN1bGF0ZUZvbnRTcGFjZSA9IGZ1bmN0aW9uKHRleHQsIGZvcm1PYmplY3QsIGZvbnRTaXplKSB7XG4gIHZhciBmb250ID0gZm9ybU9iamVjdC5zY29wZS5pbnRlcm5hbC5nZXRGb250KFxuICAgIGZvcm1PYmplY3QuZm9udE5hbWUsXG4gICAgZm9ybU9iamVjdC5mb250U3R5bGVcbiAgKTtcbiAgdmFyIHdpZHRoID1cbiAgICBmb3JtT2JqZWN0LnNjb3BlLmdldFN0cmluZ1VuaXRXaWR0aCh0ZXh0LCB7XG4gICAgICBmb250OiBmb250LFxuICAgICAgZm9udFNpemU6IHBhcnNlRmxvYXQoZm9udFNpemUpLFxuICAgICAgY2hhclNwYWNlOiAwXG4gICAgfSkgKiBwYXJzZUZsb2F0KGZvbnRTaXplKTtcbiAgdmFyIGhlaWdodCA9XG4gICAgZm9ybU9iamVjdC5zY29wZS5nZXRTdHJpbmdVbml0V2lkdGgoXCIzXCIsIHtcbiAgICAgIGZvbnQ6IGZvbnQsXG4gICAgICBmb250U2l6ZTogcGFyc2VGbG9hdChmb250U2l6ZSksXG4gICAgICBjaGFyU3BhY2U6IDBcbiAgICB9KSAqXG4gICAgcGFyc2VGbG9hdChmb250U2l6ZSkgKlxuICAgIDEuNTtcbiAgcmV0dXJuIHsgaGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aCB9O1xufTtcblxudmFyIGFjcm9mb3JtUGx1Z2luVGVtcGxhdGUgPSB7XG4gIGZpZWxkczogW10sXG4gIHhGb3JtczogW10sXG4gIC8qKlxuICAgKiBhY3JvRm9ybURpY3Rpb25hcnlSb290IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBBY3JvRm9ybVxuICAgKiBEaWN0aW9uYXJ5IDA6IFRoZSBFdmVudC1Ub2tlbiwgdGhlIEFjcm9Gb3JtRGljdGlvbmFyeUNhbGxiYWNrIGhhc1xuICAgKiAxOiBUaGUgT2JqZWN0IElEIG9mIHRoZSBSb290XG4gICAqL1xuICBhY3JvRm9ybURpY3Rpb25hcnlSb290OiBudWxsLFxuICAvKipcbiAgICogQWZ0ZXIgdGhlIFBERiBnZXRzIGV2YWx1YXRlZCwgdGhlIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBoYXMgdG8gYmVcbiAgICogcmVzZXQsIHRoaXMgaW5kaWNhdGVzLCB3aGV0aGVyIHRoZSByb290IGhhcyBhbHJlYWR5IGJlZW4gcHJpbnRlZFxuICAgKiBvdXRcbiAgICovXG4gIHByaW50ZWRPdXQ6IGZhbHNlLFxuICBpbnRlcm5hbDogbnVsbCxcbiAgaXNJbml0aWFsaXplZDogZmFsc2Vcbn07XG5cbnZhciBhbm5vdFJlZmVyZW5jZUNhbGxiYWNrID0gZnVuY3Rpb24oc2NvcGUpIHtcbiAgLy9zZXQgb2JqSWQgdG8gdW5kZWZpbmVkIGFuZCBmb3JjZSBpdCB0byBnZXQgYSBuZXcgb2JqSWQgb24gYnVpbGREb2N1bWVudFxuICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290Lm9iaklkID0gdW5kZWZpbmVkO1xuICB2YXIgZmllbGRzID0gc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5GaWVsZHM7XG4gIGZvciAodmFyIGkgaW4gZmllbGRzKSB7XG4gICAgaWYgKGZpZWxkcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgdmFyIGZvcm1PYmplY3QgPSBmaWVsZHNbaV07XG4gICAgICAvL3NldCBvYmpJZCB0byB1bmRlZmluZWQgYW5kIGZvcmNlIGl0IHRvIGdldCBhIG5ldyBvYmpJZCBvbiBidWlsZERvY3VtZW50XG4gICAgICBmb3JtT2JqZWN0Lm9iaklkID0gdW5kZWZpbmVkO1xuICAgICAgLy8gYWRkIEFubm90IFJlZmVyZW5jZSFcbiAgICAgIGlmIChmb3JtT2JqZWN0Lmhhc0Fubm90YXRpb24pIHtcbiAgICAgICAgLy8gSWYgdGhlcmVzIGFuIEFubm90YXRpb24gV2lkZ2V0IGluIHRoZSBGb3JtIE9iamVjdCwgcHV0IHRoZVxuICAgICAgICAvLyBSZWZlcmVuY2UgaW4gdGhlIC9Bbm5vdCBhcnJheVxuICAgICAgICBjcmVhdGVBbm5vdGF0aW9uUmVmZXJlbmNlKGZvcm1PYmplY3QsIHNjb3BlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBwdXRGb3JtID0gZnVuY3Rpb24oZm9ybU9iamVjdCkge1xuICBpZiAoZm9ybU9iamVjdC5zY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5wcmludGVkT3V0KSB7XG4gICAgZm9ybU9iamVjdC5zY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5wcmludGVkT3V0ID0gZmFsc2U7XG4gICAgZm9ybU9iamVjdC5zY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290ID0gbnVsbDtcbiAgfVxuICBmb3JtT2JqZWN0LnNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3QuRmllbGRzLnB1c2goXG4gICAgZm9ybU9iamVjdFxuICApO1xufTtcbi8qKlxuICogQ3JlYXRlIHRoZSBSZWZlcmVuY2UgdG8gdGhlIHdpZGdldEFubm90YXRpb24sIHNvIHRoYXQgaXQgZ2V0cyByZWZlcmVuY2VkXG4gKiBpbiB0aGUgQW5ub3RbXSBpbnQgdGhlKyAoUmVxdWlyZXMgdGhlIEFubm90YXRpb24gUGx1Z2luKVxuICovXG52YXIgY3JlYXRlQW5ub3RhdGlvblJlZmVyZW5jZSA9IGZ1bmN0aW9uKG9iamVjdCwgc2NvcGUpIHtcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgdHlwZTogXCJyZWZlcmVuY2VcIixcbiAgICBvYmplY3Q6IG9iamVjdFxuICB9O1xuICB2YXIgZmluZEVudHJ5ID0gZnVuY3Rpb24oZW50cnkpIHtcbiAgICByZXR1cm4gZW50cnkudHlwZSA9PT0gb3B0aW9ucy50eXBlICYmIGVudHJ5Lm9iamVjdCA9PT0gb3B0aW9ucy5vYmplY3Q7XG4gIH07XG4gIGlmIChcbiAgICBzY29wZS5pbnRlcm5hbFxuICAgICAgLmdldFBhZ2VJbmZvKG9iamVjdC5wYWdlKVxuICAgICAgLnBhZ2VDb250ZXh0LmFubm90YXRpb25zLmZpbmQoZmluZEVudHJ5KSA9PT0gdW5kZWZpbmVkXG4gICkge1xuICAgIHNjb3BlLmludGVybmFsXG4gICAgICAuZ2V0UGFnZUluZm8ob2JqZWN0LnBhZ2UpXG4gICAgICAucGFnZUNvbnRleHQuYW5ub3RhdGlvbnMucHVzaChvcHRpb25zKTtcbiAgfVxufTtcblxuLy8gQ2FsbGJhY2tzXG5cbnZhciBwdXRDYXRhbG9nQ2FsbGJhY2sgPSBmdW5jdGlvbihzY29wZSkge1xuICAvLyBQdXQgcmVmZXJlbmNlIHRvIEFjcm9Gb3JtIHRvIERvY3VtZW50Q2F0YWxvZ1xuICBpZiAoXG4gICAgdHlwZW9mIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3QgIT09IFwidW5kZWZpbmVkXCJcbiAgKSB7XG4gICAgLy8gZm9yIHNhZmV0eSwgc2hvdWxkbid0IG5vcm1hbGx5IGJlIHRoZSBjYXNlXG4gICAgc2NvcGUuaW50ZXJuYWwud3JpdGUoXG4gICAgICBcIi9BY3JvRm9ybSBcIiArXG4gICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3Qub2JqSWQgK1xuICAgICAgICBcIiBcIiArXG4gICAgICAgIDAgK1xuICAgICAgICBcIiBSXCJcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcInB1dENhdGFsb2dDYWxsYmFjazogUm9vdCBtaXNzaW5nLlwiKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBZGRzIC9BY3JvZm9ybSBYIDAgUiB0byBEb2N1bWVudCBDYXRhbG9nLCBhbmQgY3JlYXRlcyB0aGUgQWNyb0Zvcm1cbiAqIERpY3Rpb25hcnlcbiAqL1xudmFyIEFjcm9Gb3JtRGljdGlvbmFyeUNhbGxiYWNrID0gZnVuY3Rpb24oc2NvcGUpIHtcbiAgLy8gUmVtb3ZlIGV2ZW50XG4gIHNjb3BlLmludGVybmFsLmV2ZW50cy51bnN1YnNjcmliZShcbiAgICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290Ll9ldmVudElEXG4gICk7XG4gIGRlbGV0ZSBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290Ll9ldmVudElEO1xuICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5wcmludGVkT3V0ID0gdHJ1ZTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgc2luZ2xlIEZpZWxkcyBhbmQgd3JpdGVzIHRoZW0gaW50byB0aGUgRG9jdW1lbnRcbiAqXG4gKiBJZiBmaWVsZEFycmF5IGlzIHNldCwgdXNlIHRoZSBmaWVsZHMgdGhhdCBhcmUgaW5zaWRlIGl0IGluc3RlYWQgb2YgdGhlXG4gKiBmaWVsZHMgZnJvbSB0aGUgQWNyb1Jvb3QgKGZvciB0aGUgRm9ybVhPYmplY3RzLi4uKVxuICovXG52YXIgY3JlYXRlRmllbGRDYWxsYmFjayA9IGZ1bmN0aW9uKGZpZWxkQXJyYXksIHNjb3BlKSB7XG4gIHZhciBzdGFuZGFyZEZpZWxkcyA9ICFmaWVsZEFycmF5O1xuXG4gIGlmICghZmllbGRBcnJheSkge1xuICAgIC8vIGluIGNhc2UgdGhlcmUgaXMgbm8gZmllbGRBcnJheSBzcGVjaWZpZWQsIHdlIHdhbnQgdG8gcHJpbnQgb3V0XG4gICAgLy8gdGhlIEZpZWxkcyBvZiB0aGUgQWNyb0Zvcm1cbiAgICAvLyBQcmludCBvdXQgUm9vdFxuICAgIHNjb3BlLmludGVybmFsLm5ld09iamVjdERlZmVycmVkQmVnaW4oXG4gICAgICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi5hY3JvRm9ybURpY3Rpb25hcnlSb290Lm9iaklkLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5wdXRTdHJlYW0oKTtcbiAgfVxuXG4gIGZpZWxkQXJyYXkgPVxuICAgIGZpZWxkQXJyYXkgfHwgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5LaWRzO1xuXG4gIGZvciAodmFyIGkgaW4gZmllbGRBcnJheSkge1xuICAgIGlmIChmaWVsZEFycmF5Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICB2YXIgZmllbGRPYmplY3QgPSBmaWVsZEFycmF5W2ldO1xuICAgICAgdmFyIGtleVZhbHVlTGlzdCA9IFtdO1xuICAgICAgdmFyIG9sZFJlY3QgPSBmaWVsZE9iamVjdC5SZWN0O1xuXG4gICAgICBpZiAoZmllbGRPYmplY3QuUmVjdCkge1xuICAgICAgICBmaWVsZE9iamVjdC5SZWN0ID0gY2FsY3VsYXRlQ29vcmRpbmF0ZXMoZmllbGRPYmplY3QuUmVjdCwgc2NvcGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGFydCBXcml0aW5nIHRoZSBPYmplY3RcbiAgICAgIHNjb3BlLmludGVybmFsLm5ld09iamVjdERlZmVycmVkQmVnaW4oZmllbGRPYmplY3Qub2JqSWQsIHRydWUpO1xuXG4gICAgICBmaWVsZE9iamVjdC5EQSA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5jcmVhdGVEZWZhdWx0QXBwZWFyYW5jZVN0cmVhbShcbiAgICAgICAgZmllbGRPYmplY3RcbiAgICAgICk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGZpZWxkT2JqZWN0ID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHR5cGVvZiBmaWVsZE9iamVjdC5nZXRLZXlWYWx1ZUxpc3RGb3JTdHJlYW0gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgKSB7XG4gICAgICAgIGtleVZhbHVlTGlzdCA9IGZpZWxkT2JqZWN0LmdldEtleVZhbHVlTGlzdEZvclN0cmVhbSgpO1xuICAgICAgfVxuXG4gICAgICBmaWVsZE9iamVjdC5SZWN0ID0gb2xkUmVjdDtcblxuICAgICAgaWYgKFxuICAgICAgICBmaWVsZE9iamVjdC5oYXNBcHBlYXJhbmNlU3RyZWFtICYmXG4gICAgICAgICFmaWVsZE9iamVjdC5hcHBlYXJhbmNlU3RyZWFtQ29udGVudFxuICAgICAgKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBBcHBlYXJhbmNlXG4gICAgICAgIHZhciBhcHBlYXJhbmNlID0gY2FsY3VsYXRlQXBwZWFyYW5jZVN0cmVhbShmaWVsZE9iamVjdCk7XG4gICAgICAgIGtleVZhbHVlTGlzdC5wdXNoKHsga2V5OiBcIkFQXCIsIHZhbHVlOiBcIjw8L04gXCIgKyBhcHBlYXJhbmNlICsgXCI+PlwiIH0pO1xuXG4gICAgICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLnhGb3Jtcy5wdXNoKGFwcGVhcmFuY2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBBc3N1bWUgQXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQgaXMgYSBBcnJheSB3aXRoIE4sUixEIChhdCBsZWFzdFxuICAgICAgLy8gb25lIG9mIHRoZW0hKVxuICAgICAgaWYgKGZpZWxkT2JqZWN0LmFwcGVhcmFuY2VTdHJlYW1Db250ZW50KSB7XG4gICAgICAgIHZhciBhcHBlYXJhbmNlU3RyZWFtU3RyaW5nID0gXCJcIjtcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIE4sUiBhbmQgRFxuICAgICAgICBmb3IgKHZhciBrIGluIGZpZWxkT2JqZWN0LmFwcGVhcmFuY2VTdHJlYW1Db250ZW50KSB7XG4gICAgICAgICAgaWYgKGZpZWxkT2JqZWN0LmFwcGVhcmFuY2VTdHJlYW1Db250ZW50Lmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBmaWVsZE9iamVjdC5hcHBlYXJhbmNlU3RyZWFtQ29udGVudFtrXTtcbiAgICAgICAgICAgIGFwcGVhcmFuY2VTdHJlYW1TdHJpbmcgKz0gXCIvXCIgKyBrICsgXCIgXCI7XG4gICAgICAgICAgICBhcHBlYXJhbmNlU3RyZWFtU3RyaW5nICs9IFwiPDxcIjtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID49IDEgfHwgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgLy8gYXBwZWFyYW5jZVN0cmVhbSBpcyBhbiBBcnJheSBvciBPYmplY3QhXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB2YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgRnVuY3Rpb24gaXMgcmVmZXJlbmNlZCwgY2FsbCBpdCBpbiBvcmRlclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBnZXQgdGhlIEZvcm1YT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IG9iai5jYWxsKHNjb3BlLCBmaWVsZE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlU3RyZWFtU3RyaW5nICs9IFwiL1wiICsgaSArIFwiIFwiICsgb2JqICsgXCIgXCI7XG5cbiAgICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgdGhlIFhGb3JtIGlzIGFscmVhZHkgdXNlZCwgZS5nLiBPZmZTdGF0ZVxuICAgICAgICAgICAgICAgICAgLy8gb2YgQ2hlY2tCb3hlcywgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgICAgICAgICBpZiAoIShzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi54Rm9ybXMuaW5kZXhPZihvYmopID49IDApKVxuICAgICAgICAgICAgICAgICAgICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi54Rm9ybXMucHVzaChvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb2JqID0gdmFsdWU7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBGdW5jdGlvbiBpcyByZWZlcmVuY2VkLCBjYWxsIGl0IGluIG9yZGVyIHRvXG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBGb3JtWE9iamVjdFxuICAgICAgICAgICAgICAgIG9iaiA9IG9iai5jYWxsKHNjb3BlLCBmaWVsZE9iamVjdCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXBwZWFyYW5jZVN0cmVhbVN0cmluZyArPSBcIi9cIiArIGkgKyBcIiBcIiArIG9iajtcbiAgICAgICAgICAgICAgaWYgKCEoc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4ueEZvcm1zLmluZGV4T2Yob2JqKSA+PSAwKSlcbiAgICAgICAgICAgICAgICBzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi54Rm9ybXMucHVzaChvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXBwZWFyYW5jZVN0cmVhbVN0cmluZyArPSBcIj4+XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXBwZWFyYW5jZSBzdHJlYW0gaXMgYSBub3JtYWwgT2JqZWN0Li5cbiAgICAgICAga2V5VmFsdWVMaXN0LnB1c2goe1xuICAgICAgICAgIGtleTogXCJBUFwiLFxuICAgICAgICAgIHZhbHVlOiBcIjw8XFxuXCIgKyBhcHBlYXJhbmNlU3RyZWFtU3RyaW5nICsgXCI+PlwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzY29wZS5pbnRlcm5hbC5wdXRTdHJlYW0oe1xuICAgICAgICBhZGRpdGlvbmFsS2V5VmFsdWVzOiBrZXlWYWx1ZUxpc3QsXG4gICAgICAgIG9iamVjdElkOiBmaWVsZE9iamVjdC5vYmpJZFxuICAgICAgfSk7XG5cbiAgICAgIHNjb3BlLmludGVybmFsLm91dChcImVuZG9ialwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKHN0YW5kYXJkRmllbGRzKSB7XG4gICAgY3JlYXRlWEZvcm1PYmplY3RDYWxsYmFjayhzY29wZS5pbnRlcm5hbC5hY3JvZm9ybVBsdWdpbi54Rm9ybXMsIHNjb3BlKTtcbiAgfVxufTtcblxudmFyIGNyZWF0ZVhGb3JtT2JqZWN0Q2FsbGJhY2sgPSBmdW5jdGlvbihmaWVsZEFycmF5LCBzY29wZSkge1xuICBmb3IgKHZhciBpIGluIGZpZWxkQXJyYXkpIHtcbiAgICBpZiAoZmllbGRBcnJheS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgdmFyIGtleSA9IGk7XG4gICAgICB2YXIgZmllbGRPYmplY3QgPSBmaWVsZEFycmF5W2ldO1xuICAgICAgLy8gU3RhcnQgV3JpdGluZyB0aGUgT2JqZWN0XG4gICAgICBzY29wZS5pbnRlcm5hbC5uZXdPYmplY3REZWZlcnJlZEJlZ2luKGZpZWxkT2JqZWN0Lm9iaklkLCB0cnVlKTtcblxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgZmllbGRPYmplY3QgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdHlwZW9mIGZpZWxkT2JqZWN0LnB1dFN0cmVhbSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICApIHtcbiAgICAgICAgZmllbGRPYmplY3QucHV0U3RyZWFtKCk7XG4gICAgICB9XG4gICAgICBkZWxldGUgZmllbGRBcnJheVtrZXldO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGluaXRpYWxpemVBY3JvRm9ybSA9IGZ1bmN0aW9uKHNjb3BlLCBmb3JtT2JqZWN0KSB7XG4gIGZvcm1PYmplY3Quc2NvcGUgPSBzY29wZTtcbiAgaWYgKFxuICAgIHNjb3BlLmludGVybmFsICE9PSB1bmRlZmluZWQgJiZcbiAgICAoc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4gPT09IHVuZGVmaW5lZCB8fFxuICAgICAgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uaXNJbml0aWFsaXplZCA9PT0gZmFsc2UpXG4gICkge1xuICAgIEFjcm9Gb3JtRmllbGQuRmllbGROdW0gPSAwO1xuICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luID0gSlNPTi5wYXJzZShcbiAgICAgIEpTT04uc3RyaW5naWZ5KGFjcm9mb3JtUGx1Z2luVGVtcGxhdGUpXG4gICAgKTtcbiAgICBpZiAoc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhjZXB0aW9uIHdoaWxlIGNyZWF0aW5nIEFjcm9mb3JtRGljdGlvbmFyeVwiKTtcbiAgICB9XG4gICAgc2NhbGVGYWN0b3IgPSBzY29wZS5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcbiAgICAvLyBUaGUgT2JqZWN0IE51bWJlciBvZiB0aGUgQWNyb0Zvcm0gRGljdGlvbmFyeVxuICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3QgPSBuZXcgQWNyb0Zvcm1EaWN0aW9uYXJ5KCk7XG4gICAgc2NvcGUuaW50ZXJuYWwuYWNyb2Zvcm1QbHVnaW4uYWNyb0Zvcm1EaWN0aW9uYXJ5Um9vdC5zY29wZSA9IHNjb3BlO1xuXG4gICAgLy8gYWRkIENhbGxiYWNrIGZvciBjcmVhdGluZyB0aGUgQWNyb0Zvcm0gRGljdGlvbmFyeVxuICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmFjcm9Gb3JtRGljdGlvbmFyeVJvb3QuX2V2ZW50SUQgPSBzY29wZS5pbnRlcm5hbC5ldmVudHMuc3Vic2NyaWJlKFxuICAgICAgXCJwb3N0UHV0UmVzb3VyY2VzXCIsXG4gICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgQWNyb0Zvcm1EaWN0aW9uYXJ5Q2FsbGJhY2soc2NvcGUpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBzY29wZS5pbnRlcm5hbC5ldmVudHMuc3Vic2NyaWJlKFwiYnVpbGREb2N1bWVudFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGFubm90UmVmZXJlbmNlQ2FsbGJhY2soc2NvcGUpO1xuICAgIH0pOyAvLyBidWlsZERvY3VtZW50XG5cbiAgICAvLyBSZWdpc3RlciBldmVudCwgdGhhdCBpcyB0cmlnZ2VyZWQgd2hlbiB0aGUgRG9jdW1lbnRDYXRhbG9nIGlzXG4gICAgLy8gd3JpdHRlbiwgaW4gb3JkZXIgdG8gYWRkIC9BY3JvRm9ybVxuXG4gICAgc2NvcGUuaW50ZXJuYWwuZXZlbnRzLnN1YnNjcmliZShcInB1dENhdGFsb2dcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBwdXRDYXRhbG9nQ2FsbGJhY2soc2NvcGUpO1xuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0ZXIgZXZlbnQsIHRoYXQgY3JlYXRlcyBhbGwgRmllbGRzXG4gICAgc2NvcGUuaW50ZXJuYWwuZXZlbnRzLnN1YnNjcmliZShcInBvc3RQdXRQYWdlc1wiLCBmdW5jdGlvbihmaWVsZEFycmF5KSB7XG4gICAgICBjcmVhdGVGaWVsZENhbGxiYWNrKGZpZWxkQXJyYXksIHNjb3BlKTtcbiAgICB9KTtcblxuICAgIHNjb3BlLmludGVybmFsLmFjcm9mb3JtUGx1Z2luLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9XG59O1xuXG4vL1BERiAzMjAwMC0xOjIwMDgsIHBhZ2UgMjYsIDcuMy42XG52YXIgYXJyYXlUb1BkZkFycmF5ID0gKGpzUERGQVBJLl9fYWNyb2Zvcm1fXy5hcnJheVRvUGRmQXJyYXkgPSBmdW5jdGlvbihcbiAgYXJyYXksXG4gIG9iaklkLFxuICBzY29wZVxuKSB7XG4gIHZhciBlbmNyeXB0b3IgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG4gIGlmIChBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgIHZhciBjb250ZW50ID0gXCJbXCI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgY29udGVudCArPSBcIiBcIjtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAodHlwZW9mIGFycmF5W2ldKSB7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgIGNvbnRlbnQgKz0gYXJyYXlbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgIGlmIChhcnJheVtpXS5zdWJzdHIoMCwgMSkgIT09IFwiL1wiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9iaklkICE9PSBcInVuZGVmaW5lZFwiICYmIHNjb3BlKVxuICAgICAgICAgICAgICBlbmNyeXB0b3IgPSBzY29wZS5pbnRlcm5hbC5nZXRFbmNyeXB0b3Iob2JqSWQpO1xuICAgICAgICAgICAgY29udGVudCArPSBcIihcIiArIHBkZkVzY2FwZShlbmNyeXB0b3IoYXJyYXlbaV0udG9TdHJpbmcoKSkpICsgXCIpXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYXJyYXlbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnRlbnQgKz0gXCJdXCI7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIFwiSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8ganNQREYuX19hY3JvZm9ybV9fLmFycmF5VG9QZGZBcnJheVwiXG4gICk7XG59KTtcbmZ1bmN0aW9uIGdldE1hdGNoZXMoc3RyaW5nLCByZWdleCwgaW5kZXgpIHtcbiAgaW5kZXggfHwgKGluZGV4ID0gMSk7IC8vIGRlZmF1bHQgdG8gdGhlIGZpcnN0IGNhcHR1cmluZyBncm91cFxuICB2YXIgbWF0Y2hlcyA9IFtdO1xuICB2YXIgbWF0Y2g7XG4gIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKHN0cmluZykpKSB7XG4gICAgbWF0Y2hlcy5wdXNoKG1hdGNoW2luZGV4XSk7XG4gIH1cbiAgcmV0dXJuIG1hdGNoZXM7XG59XG52YXIgcGRmQXJyYXlUb1N0cmluZ0FycmF5ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBpZiAodHlwZW9mIGFycmF5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmVzdWx0ID0gZ2V0TWF0Y2hlcyhhcnJheSwgL1xcKCguKj8pXFwpL2cpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgdG9QZGZTdHJpbmcgPSBmdW5jdGlvbihzdHJpbmcsIG9iaklkLCBzY29wZSkge1xuICB2YXIgZW5jcnlwdG9yID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHJldHVybiBkYXRhO1xuICB9O1xuICBpZiAodHlwZW9mIG9iaklkICE9PSBcInVuZGVmaW5lZFwiICYmIHNjb3BlKVxuICAgIGVuY3J5cHRvciA9IHNjb3BlLmludGVybmFsLmdldEVuY3J5cHRvcihvYmpJZCk7XG4gIHN0cmluZyA9IHN0cmluZyB8fCBcIlwiO1xuICBzdHJpbmcudG9TdHJpbmcoKTtcbiAgc3RyaW5nID0gXCIoXCIgKyBwZGZFc2NhcGUoZW5jcnlwdG9yKHN0cmluZykpICsgXCIpXCI7XG4gIHJldHVybiBzdHJpbmc7XG59O1xuXG4vLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuLy8gQ2xhc3Nlc1xuLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuLyoqXG4gKiBAY2xhc3MgQWNyb0Zvcm1QREZPYmplY3RcbiAqIEBjbGFzc2Rlc2MgQSBBY3JvRm9ybVBERk9iamVjdFxuICovXG52YXIgQWNyb0Zvcm1QREZPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fb2JqSWQgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3Njb3BlID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBAbmFtZSBBY3JvRm9ybVBERk9iamVjdCNvYmpJZFxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JqSWRcIiwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuX29iaklkID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5zY29wZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb2JqSWQgPSB0aGlzLnNjb3BlLmludGVybmFsLm5ld09iamVjdERlZmVycmVkKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fb2JqSWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB0aGlzLl9vYmpJZCA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjb3BlXCIsIHtcbiAgICB2YWx1ZTogdGhpcy5fc2NvcGUsXG4gICAgd3JpdGFibGU6IHRydWVcbiAgfSk7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvbiBBY3JvRm9ybVBERk9iamVjdC50b1N0cmluZ1xuICovXG5BY3JvRm9ybVBERk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMub2JqSWQgKyBcIiAwIFJcIjtcbn07XG5cbkFjcm9Gb3JtUERGT2JqZWN0LnByb3RvdHlwZS5wdXRTdHJlYW0gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGtleVZhbHVlTGlzdCA9IHRoaXMuZ2V0S2V5VmFsdWVMaXN0Rm9yU3RyZWFtKCk7XG4gIHRoaXMuc2NvcGUuaW50ZXJuYWwucHV0U3RyZWFtKHtcbiAgICBkYXRhOiB0aGlzLnN0cmVhbSxcbiAgICBhZGRpdGlvbmFsS2V5VmFsdWVzOiBrZXlWYWx1ZUxpc3QsXG4gICAgb2JqZWN0SWQ6IHRoaXMub2JqSWRcbiAgfSk7XG4gIHRoaXMuc2NvcGUuaW50ZXJuYWwub3V0KFwiZW5kb2JqXCIpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIGtleS12YWx1ZS1MaXN0IG9mIGFsbCBub24tY29uZmlndXJhYmxlIFZhcmlhYmxlcyBmcm9tIHRoZSBPYmplY3RcbiAqXG4gKiBAbmFtZSBnZXRLZXlWYWx1ZUxpc3RGb3JTdHJlYW1cbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbkFjcm9Gb3JtUERGT2JqZWN0LnByb3RvdHlwZS5nZXRLZXlWYWx1ZUxpc3RGb3JTdHJlYW0gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGtleVZhbHVlTGlzdCA9IFtdO1xuICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLmZpbHRlcihmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gKFxuICAgICAga2V5ICE9IFwiY29udGVudFwiICYmXG4gICAgICBrZXkgIT0gXCJhcHBlYXJhbmNlU3RyZWFtQ29udGVudFwiICYmXG4gICAgICBrZXkgIT0gXCJzY29wZVwiICYmXG4gICAgICBrZXkgIT0gXCJvYmpJZFwiICYmXG4gICAgICBrZXkuc3Vic3RyaW5nKDAsIDEpICE9IFwiX1wiXG4gICAgKTtcbiAgfSk7XG5cbiAgZm9yICh2YXIgaSBpbiBrZXlzKSB7XG4gICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGhpcywga2V5c1tpXSkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzW2tleV07XG5cbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBrZXlWYWx1ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHZhbHVlOiBhcnJheVRvUGRmQXJyYXkodmFsdWUsIHRoaXMub2JqSWQsIHRoaXMuc2NvcGUpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBY3JvRm9ybVBERk9iamVjdCkge1xuICAgICAgICAgIC8vIEluIGNhc2UgaXQgaXMgYSByZWZlcmVuY2UgdG8gYW5vdGhlciBQREZPYmplY3QsXG4gICAgICAgICAgLy8gdGFrZSB0aGUgcmVmZXJlbmNlIG51bWJlclxuICAgICAgICAgIHZhbHVlLnNjb3BlID0gdGhpcy5zY29wZTtcbiAgICAgICAgICBrZXlWYWx1ZUxpc3QucHVzaCh7IGtleToga2V5LCB2YWx1ZTogdmFsdWUub2JqSWQgKyBcIiAwIFJcIiB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGtleVZhbHVlTGlzdC5wdXNoKHsga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4ga2V5VmFsdWVMaXN0O1xufTtcblxudmFyIEFjcm9Gb3JtWE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICBBY3JvRm9ybVBERk9iamVjdC5jYWxsKHRoaXMpO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIlR5cGVcIiwge1xuICAgIHZhbHVlOiBcIi9YT2JqZWN0XCIsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJTdWJ0eXBlXCIsIHtcbiAgICB2YWx1ZTogXCIvRm9ybVwiLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgd3JpdGFibGU6IHRydWVcbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiRm9ybVR5cGVcIiwge1xuICAgIHZhbHVlOiAxLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgd3JpdGFibGU6IHRydWVcbiAgfSk7XG5cbiAgdmFyIF9CQm94ID0gW107XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkJCb3hcIiwge1xuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfQkJveDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9CQm94ID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJSZXNvdXJjZXNcIiwge1xuICAgIHZhbHVlOiBcIjIgMCBSXCIsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KTtcblxuICB2YXIgX3N0cmVhbTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX3N0cmVhbSA9IHZhbHVlLnRyaW0oKTtcbiAgICB9LFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoX3N0cmVhbSkge1xuICAgICAgICByZXR1cm4gX3N0cmVhbTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5pbmhlcml0KEFjcm9Gb3JtWE9iamVjdCwgQWNyb0Zvcm1QREZPYmplY3QpO1xuXG52YXIgQWNyb0Zvcm1EaWN0aW9uYXJ5ID0gZnVuY3Rpb24oKSB7XG4gIEFjcm9Gb3JtUERGT2JqZWN0LmNhbGwodGhpcyk7XG5cbiAgdmFyIF9LaWRzID0gW107XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiS2lkc1wiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoX0tpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gX0tpZHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkZpZWxkc1wiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9LaWRzO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gRGVmYXVsdCBBcHBlYXJhbmNlXG4gIHZhciBfREE7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkRBXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIV9EQSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdmFyIGVuY3J5cHRvciA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMuc2NvcGUpIGVuY3J5cHRvciA9IHRoaXMuc2NvcGUuaW50ZXJuYWwuZ2V0RW5jcnlwdG9yKHRoaXMub2JqSWQpO1xuICAgICAgcmV0dXJuIFwiKFwiICsgcGRmRXNjYXBlKGVuY3J5cHRvcihfREEpKSArIFwiKVwiO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX0RBID0gdmFsdWU7XG4gICAgfVxuICB9KTtcbn07XG5cbmluaGVyaXQoQWNyb0Zvcm1EaWN0aW9uYXJ5LCBBY3JvRm9ybVBERk9iamVjdCk7XG5cbi8qKlxuICogVGhlIEZpZWxkIE9iamVjdCBjb250YWlucyB0aGUgVmFyaWFibGVzLCB0aGF0IGV2ZXJ5IEZpZWxkIG5lZWRzXG4gKlxuICogQGNsYXNzIEFjcm9Gb3JtRmllbGRcbiAqIEBjbGFzc2Rlc2MgQW4gQWNyb0Zvcm0gRmllbGRPYmplY3RcbiAqL1xudmFyIEFjcm9Gb3JtRmllbGQgPSBmdW5jdGlvbigpIHtcbiAgQWNyb0Zvcm1QREZPYmplY3QuY2FsbCh0aGlzKTtcblxuICAvL0Fubm90YXRpb24tRmxhZyBTZWUgVGFibGUgMTY1XG4gIHZhciBfRiA9IDQ7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkZcIiwge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfRjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgIF9GID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ0ludmFsaWQgdmFsdWUgXCInICsgdmFsdWUgKyAnXCIgZm9yIGF0dHJpYnV0ZSBGIHN1cHBsaWVkLidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAoUERGIDEuMikgSWYgc2V0LCBwcmludCB0aGUgYW5ub3RhdGlvbiB3aGVuIHRoZSBwYWdlIGlzIHByaW50ZWQuIElmIGNsZWFyLCBuZXZlciBwcmludCB0aGUgYW5ub3RhdGlvbiwgcmVnYXJkbGVzcyBvZiB3ZXRoZXIgaXMgaXMgZGlzcGxheWVkIG9uIHRoZSBzY3JlZW4uXG4gICAqIE5PVEUgMiBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yIGFubm90YXRpb25zIHJlcHJlc2VudGluZyBpbnRlcmFjdGl2ZSBwdXNoYnV0dG9ucywgd2hpY2ggd291bGQgc2VydmUgbm8gbWVhbmluZ2Z1bCBwdXJwb3NlIG9uIHRoZSBwcmludGVkIHBhZ2UuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjc2hvd1doZW5QcmludGVkXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzaG93V2hlblByaW50ZWRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYoX0YsIDMpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkYgPSBzZXRCaXRGb3JQZGYoX0YsIDMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5GID0gY2xlYXJCaXRGb3JQZGYoX0YsIDMpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIF9GZiA9IDA7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkZmXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX0ZmO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgX0ZmID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ0ludmFsaWQgdmFsdWUgXCInICsgdmFsdWUgKyAnXCIgZm9yIGF0dHJpYnV0ZSBGZiBzdXBwbGllZC4nXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB2YXIgX1JlY3QgPSBbXTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiUmVjdFwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKF9SZWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9SZWN0O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBfUmVjdCA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX1JlY3QgPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgZmllbGQuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjeFxuICAgKiBAZGVmYXVsdCBudWxsXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ4XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFfUmVjdCB8fCBpc05hTihfUmVjdFswXSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gX1JlY3RbMF07XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfUmVjdFswXSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBmaWVsZC5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCN5XG4gICAqIEBkZWZhdWx0IG51bGxcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInlcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIV9SZWN0IHx8IGlzTmFOKF9SZWN0WzFdKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfUmVjdFsxXTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9SZWN0WzFdID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBmaWVsZC5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCN3aWR0aFxuICAgKiBAZGVmYXVsdCBudWxsXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3aWR0aFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghX1JlY3QgfHwgaXNOYU4oX1JlY3RbMl0pKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9SZWN0WzJdO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX1JlY3RbMl0gPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBmaWVsZC5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNoZWlnaHRcbiAgICogQGRlZmF1bHQgbnVsbFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGVpZ2h0XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFfUmVjdCB8fCBpc05hTihfUmVjdFszXSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gX1JlY3RbM107XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfUmVjdFszXSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIF9GVCA9IFwiXCI7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkZUXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfRlQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgIGNhc2UgXCIvQnRuXCI6XG4gICAgICAgIGNhc2UgXCIvVHhcIjpcbiAgICAgICAgY2FzZSBcIi9DaFwiOlxuICAgICAgICBjYXNlIFwiL1NpZ1wiOlxuICAgICAgICAgIF9GVCA9IHZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdJbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIGZvciBhdHRyaWJ1dGUgRlQgc3VwcGxpZWQuJ1xuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB2YXIgX1QgPSBudWxsO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIlRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFfVCB8fCBfVC5sZW5ndGggPCAxKSB7XG4gICAgICAgIC8vIEluIGNhc2Ugb2YgYSBDaGlsZCBmcm9tIGEgUmFkaW/CtEdyb3VwLCB5b3UgZG9uJ3QgbmVlZCBhIEZpZWxkTmFtZVxuICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQ2hpbGRDbGFzcykge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgX1QgPSBcIkZpZWxkT2JqZWN0XCIgKyBBY3JvRm9ybUZpZWxkLkZpZWxkTnVtKys7XG4gICAgICB9XG4gICAgICB2YXIgZW5jcnlwdG9yID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5zY29wZSkgZW5jcnlwdG9yID0gdGhpcy5zY29wZS5pbnRlcm5hbC5nZXRFbmNyeXB0b3IodGhpcy5vYmpJZCk7XG4gICAgICByZXR1cm4gXCIoXCIgKyBwZGZFc2NhcGUoZW5jcnlwdG9yKF9UKSkgKyBcIilcIjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9UID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAoT3B0aW9uYWwpIFRoZSBwYXJ0aWFsIGZpZWxkIG5hbWUgKHNlZSAxMi43LjMuMiwg4oCcRmllbGQgTmFtZXPigJ0pLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI2ZpZWxkTmFtZVxuICAgKiBAZGVmYXVsdCBudWxsXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaWVsZE5hbWVcIiwge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX1Q7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfVCA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIF9mb250TmFtZSA9IFwiaGVsdmV0aWNhXCI7XG4gIC8qKlxuICAgKiBUaGUgZm9udE5hbWUgb2YgdGhlIGZvbnQgdG8gYmUgdXNlZC5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNmb250TmFtZVxuICAgKiBAZGVmYXVsdCAnaGVsdmV0aWNhJ1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZm9udE5hbWVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX2ZvbnROYW1lO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX2ZvbnROYW1lID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICB2YXIgX2ZvbnRTdHlsZSA9IFwibm9ybWFsXCI7XG4gIC8qKlxuICAgKiBUaGUgZm9udFN0eWxlIG9mIHRoZSBmb250IHRvIGJlIHVzZWQuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjZm9udFN0eWxlXG4gICAqIEBkZWZhdWx0ICdub3JtYWwnXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmb250U3R5bGVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX2ZvbnRTdHlsZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9mb250U3R5bGUgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfZm9udFNpemUgPSAwO1xuICAvKipcbiAgICogVGhlIGZvbnRTaXplIG9mIHRoZSBmb250IHRvIGJlIHVzZWQuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjZm9udFNpemVcbiAgICogQGRlZmF1bHQgMCAoZm9yIGF1dG8pXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmb250U2l6ZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfZm9udFNpemU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfZm9udFNpemUgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfbWF4Rm9udFNpemUgPSB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBmb250U2l6ZSBvZiB0aGUgZm9udCB0byBiZSB1c2VkLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI21heEZvbnRTaXplXG4gICAqIEBkZWZhdWx0IDAgKGZvciBhdXRvKVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4Rm9udFNpemVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoX21heEZvbnRTaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gdXNlIHRoZSBvbGQgZGVmYXVsdCB2YWx1ZSBoZXJlIC0gdGhlIHZhbHVlIGlzIHNvbWUga2luZCBvZiByYW5kb20gYXMgaXQgZGVwZW5kcyBvbiB0aGUgc2NhbGVGYWN0b3IgKHVzZXIgdW5pdClcbiAgICAgICAgLy8gKFwiNTBcIiBpcyB0cmFuc2Zvcm1lZCB0byB0aGUgXCJ1c2VyIHNwYWNlXCIgYnV0IHRoZW4gdXNlZCBpbiBcInBkZiBzcGFjZVwiKVxuICAgICAgICByZXR1cm4gNTAgLyBzY2FsZUZhY3RvcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBfbWF4Rm9udFNpemU7XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfbWF4Rm9udFNpemUgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfY29sb3IgPSBcImJsYWNrXCI7XG4gIC8qKlxuICAgKiBUaGUgY29sb3Igb2YgdGhlIHRleHRcbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNjb2xvclxuICAgKiBAZGVmYXVsdCAnYmxhY2snXG4gICAqIEB0eXBlIHtzdHJpbmd8cmdiYX1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbG9yXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9jb2xvcjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9jb2xvciA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIF9EQSA9IFwiL0YxIDAgVGYgMCBnXCI7XG4gIC8vIERlZmluZXMgdGhlIGRlZmF1bHQgYXBwZWFyYW5jZSAoTmVlZGVkIGZvciB2YXJpYWJsZSBUZXh0KVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJEQVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoXG4gICAgICAgICFfREEgfHxcbiAgICAgICAgdGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQ2hpbGRDbGFzcyB8fFxuICAgICAgICB0aGlzIGluc3RhbmNlb2YgQWNyb0Zvcm1UZXh0RmllbGRcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRvUGRmU3RyaW5nKF9EQSwgdGhpcy5vYmpJZCwgdGhpcy5zY29wZSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICBfREEgPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfRFYgPSBudWxsO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJEVlwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFfRFYpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgQWNyb0Zvcm1CdXR0b24gPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0b1BkZlN0cmluZyhfRFYsIHRoaXMub2JqSWQsIHRoaXMuc2NvcGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9EVjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgQWNyb0Zvcm1CdXR0b24gPT09IGZhbHNlKSB7XG4gICAgICAgIGlmICh2YWx1ZS5zdWJzdHIoMCwgMSkgPT09IFwiKFwiKSB7XG4gICAgICAgICAgX0RWID0gcGRmVW5lc2NhcGUodmFsdWUuc3Vic3RyKDEsIHZhbHVlLmxlbmd0aCAtIDIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfRFYgPSBwZGZVbmVzY2FwZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9EViA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIChPcHRpb25hbDsgaW5oZXJpdGFibGUpIFRoZSBkZWZhdWx0IHZhbHVlIHRvIHdoaWNoIHRoZSBmaWVsZCByZXZlcnRzIHdoZW4gYSByZXNldC1mb3JtIGFjdGlvbiBpcyBleGVjdXRlZCAoc2VlIDEyLjcuNS4zLCDigJxSZXNldC1Gb3JtIEFjdGlvbuKAnSkuIFRoZSBmb3JtYXQgb2YgdGhpcyB2YWx1ZSBpcyB0aGUgc2FtZSBhcyB0aGF0IG9mIHZhbHVlLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI2RlZmF1bHRWYWx1ZVxuICAgKiBAZGVmYXVsdCBudWxsXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWZhdWx0VmFsdWVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIEFjcm9Gb3JtQnV0dG9uID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBwZGZVbmVzY2FwZShfRFYuc3Vic3RyKDEsIF9EVi5sZW5ndGggLSAxKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gX0RWO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gdHJ1ZSkge1xuICAgICAgICBfRFYgPSBcIi9cIiArIHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX0RWID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB2YXIgX1YgPSBudWxsO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfVlwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFfVikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9WO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdGhpcy5WID0gdmFsdWU7XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiVlwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFfVikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRvUGRmU3RyaW5nKF9WLCB0aGlzLm9iaklkLCB0aGlzLnNjb3BlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfVjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgQWNyb0Zvcm1CdXR0b24gPT09IGZhbHNlKSB7XG4gICAgICAgIGlmICh2YWx1ZS5zdWJzdHIoMCwgMSkgPT09IFwiKFwiKSB7XG4gICAgICAgICAgX1YgPSBwZGZVbmVzY2FwZSh2YWx1ZS5zdWJzdHIoMSwgdmFsdWUubGVuZ3RoIC0gMikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9WID0gcGRmVW5lc2NhcGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfViA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIChPcHRpb25hbDsgaW5oZXJpdGFibGUpIFRoZSBmaWVsZOKAmXMgdmFsdWUsIHdob3NlIGZvcm1hdCB2YXJpZXMgZGVwZW5kaW5nIG9uIHRoZSBmaWVsZCB0eXBlLiBTZWUgdGhlIGRlc2NyaXB0aW9ucyBvZiBpbmRpdmlkdWFsIGZpZWxkIHR5cGVzIGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI3ZhbHVlXG4gICAqIEBkZWZhdWx0IG51bGxcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBBY3JvRm9ybUJ1dHRvbiA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gcGRmVW5lc2NhcGUoX1Yuc3Vic3RyKDEsIF9WLmxlbmd0aCAtIDEpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBfVjtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgQWNyb0Zvcm1CdXR0b24gPT09IHRydWUpIHtcbiAgICAgICAgX1YgPSBcIi9cIiArIHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX1YgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBmaWVsZCBoYXMgYW5ub3RhdGlvbnNcbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNoYXNBbm5vdGF0aW9uXG4gICAqIEByZWFkb25seVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhc0Fubm90YXRpb25cIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5SZWN0O1xuICAgIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiVHlwZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXNBbm5vdGF0aW9uID8gXCIvQW5ub3RcIiA6IG51bGw7XG4gICAgfVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJTdWJ0eXBlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhc0Fubm90YXRpb24gPyBcIi9XaWRnZXRcIiA6IG51bGw7XG4gICAgfVxuICB9KTtcblxuICB2YXIgX2hhc0FwcGVhcmFuY2VTdHJlYW0gPSBmYWxzZTtcbiAgLyoqXG4gICAqIHRydWUgaWYgZmllbGQgaGFzIGFuIGFwcGVhcmFuY2VTdHJlYW1cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNoYXNBcHBlYXJhbmNlU3RyZWFtXG4gICAqIEByZWFkb25seVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhc0FwcGVhcmFuY2VTdHJlYW1cIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX2hhc0FwcGVhcmFuY2VTdHJlYW07XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9IEJvb2xlYW4odmFsdWUpO1xuICAgICAgX2hhc0FwcGVhcmFuY2VTdHJlYW0gPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUaGUgcGFnZSBvbiB3aGljaCB0aGUgQWNyb0Zvcm1GaWVsZCBpcyBwbGFjZWRcbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNwYWdlXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB2YXIgX3BhZ2U7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhZ2VcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIV9wYWdlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3BhZ2U7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfcGFnZSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIHVzZXIgbWF5IG5vdCBjaGFuZ2UgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZC4gQW55IGFzc29jaWF0ZWQgd2lkZ2V0IGFubm90YXRpb25zIHdpbGwgbm90IGludGVyYWN0IHdpdGggdGhlIHVzZXI7IHRoYXQgaXMsIHRoZXkgd2lsbCBub3QgcmVzcG9uZCB0byBtb3VzZSBjbGlja3Mgb3IgY2hhbmdlIHRoZWlyIGFwcGVhcmFuY2UgaW4gcmVzcG9uc2UgdG8gbW91c2UgbW90aW9ucy4gVGhpcyBmbGFnIGlzIHVzZWZ1bCBmb3IgZmllbGRzIHdob3NlIHZhbHVlcyBhcmUgY29tcHV0ZWQgb3IgaW1wb3J0ZWQgZnJvbSBhIGRhdGFiYXNlLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUZpZWxkI3JlYWRPbmx5XG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVhZE9ubHlcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMSkpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogSWYgc2V0LCB0aGUgZmllbGQgc2hhbGwgaGF2ZSBhIHZhbHVlIGF0IHRoZSB0aW1lIGl0IGlzIGV4cG9ydGVkIGJ5IGEgc3VibWl0Zm9ybSBhY3Rpb24gKHNlZSAxMi43LjUuMiwg4oCcU3VibWl0LUZvcm0gQWN0aW9u4oCdKS5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1GaWVsZCNyZXF1aXJlZFxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlcXVpcmVkXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDIpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGZpZWxkIHNoYWxsIG5vdCBiZSBleHBvcnRlZCBieSBhIHN1Ym1pdC1mb3JtIGFjdGlvbiAoc2VlIDEyLjcuNS4yLCDigJxTdWJtaXQtRm9ybSBBY3Rpb27igJ0pXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjbm9FeHBvcnRcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJub0V4cG9ydFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAzKSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfUSA9IG51bGw7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIlFcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKF9RID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gX1E7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoWzAsIDEsIDJdLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgICBfUSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdJbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIGZvciBhdHRyaWJ1dGUgUSBzdXBwbGllZC4nXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKE9wdGlvbmFsOyBpbmhlcml0YWJsZSkgQSBjb2RlIHNwZWNpZnlpbmcgdGhlIGZvcm0gb2YgcXVhZGRpbmcgKGp1c3RpZmljYXRpb24pIHRoYXQgc2hhbGwgYmUgdXNlZCBpbiBkaXNwbGF5aW5nIHRoZSB0ZXh0OlxuICAgKiAnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtRmllbGQjdGV4dEFsaWduXG4gICAqIEBkZWZhdWx0ICdsZWZ0J1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dEFsaWduXCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIHN3aXRjaCAoX1EpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlc3VsdCA9IFwibGVmdFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgcmVzdWx0ID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJlc3VsdCA9IFwicmlnaHRcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgX1EgPSAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY2VudGVyXCI6XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBfUSA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBfUSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbmluaGVyaXQoQWNyb0Zvcm1GaWVsZCwgQWNyb0Zvcm1QREZPYmplY3QpO1xuXG4vKipcbiAqIEBjbGFzcyBBY3JvRm9ybUNob2ljZUZpZWxkXG4gKiBAZXh0ZW5kcyBBY3JvRm9ybUZpZWxkXG4gKi9cbnZhciBBY3JvRm9ybUNob2ljZUZpZWxkID0gZnVuY3Rpb24oKSB7XG4gIEFjcm9Gb3JtRmllbGQuY2FsbCh0aGlzKTtcbiAgLy8gRmllbGQgVHlwZSA9IENob2ljZSBGaWVsZFxuICB0aGlzLkZUID0gXCIvQ2hcIjtcbiAgLy8gb3B0aW9uc1xuICB0aGlzLlYgPSBcIigpXCI7XG5cbiAgdGhpcy5mb250TmFtZSA9IFwiemFwZmRpbmdiYXRzXCI7XG4gIC8vIFRvcCBJbmRleFxuICB2YXIgX1RJID0gMDtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJUSVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX1RJO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX1RJID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKE9wdGlvbmFsKSBGb3Igc2Nyb2xsYWJsZSBsaXN0IGJveGVzLCB0aGUgdG9wIGluZGV4ICh0aGUgaW5kZXggaW4gdGhlIE9wdCBhcnJheSBvZiB0aGUgZmlyc3Qgb3B0aW9uIHZpc2libGUgaW4gdGhlIGxpc3QpLiBEZWZhdWx0IHZhbHVlOiAwLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI3RvcEluZGV4XG4gICAqIEBkZWZhdWx0IDBcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcEluZGV4XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9USTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9USSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIF9PcHQgPSBbXTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiT3B0XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhcnJheVRvUGRmQXJyYXkoX09wdCwgdGhpcy5vYmpJZCwgdGhpcy5zY29wZSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfT3B0ID0gcGRmQXJyYXlUb1N0cmluZ0FycmF5KHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyb2YgQWNyb0Zvcm1DaG9pY2VGaWVsZFxuICAgKiBAbmFtZSBnZXRPcHRpb25zXG4gICAqIEBmdW5jdGlvblxuICAgKiBAaW5zdGFuY2VcbiAgICogQHJldHVybnMge2FycmF5fSBhcnJheSBvZiBPcHRpb25zXG4gICAqL1xuICB0aGlzLmdldE9wdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gX09wdDtcbiAgfTtcblxuICAvKipcbiAgICogQG1lbWJlcm9mIEFjcm9Gb3JtQ2hvaWNlRmllbGRcbiAgICogQG5hbWUgc2V0T3B0aW9uc1xuICAgKiBAZnVuY3Rpb25cbiAgICogQGluc3RhbmNlXG4gICAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlXG4gICAqL1xuICB0aGlzLnNldE9wdGlvbnMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIF9PcHQgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5zb3J0KSB7XG4gICAgICBfT3B0LnNvcnQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJvZiBBY3JvRm9ybUNob2ljZUZpZWxkXG4gICAqIEBuYW1lIGFkZE9wdGlvblxuICAgKiBAZnVuY3Rpb25cbiAgICogQGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKi9cbiAgdGhpcy5hZGRPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhbHVlID0gdmFsdWUgfHwgXCJcIjtcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgX09wdC5wdXNoKHZhbHVlKTtcbiAgICBpZiAodGhpcy5zb3J0KSB7XG4gICAgICBfT3B0LnNvcnQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZW1iZXJvZiBBY3JvRm9ybUNob2ljZUZpZWxkXG4gICAqIEBuYW1lIHJlbW92ZU9wdGlvblxuICAgKiBAZnVuY3Rpb25cbiAgICogQGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFsbEVudHJpZXMgKGRlZmF1bHQ6IGZhbHNlKVxuICAgKi9cbiAgdGhpcy5yZW1vdmVPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSwgYWxsRW50cmllcykge1xuICAgIGFsbEVudHJpZXMgPSBhbGxFbnRyaWVzIHx8IGZhbHNlO1xuICAgIHZhbHVlID0gdmFsdWUgfHwgXCJcIjtcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cbiAgICB3aGlsZSAoX09wdC5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgIF9PcHQuc3BsaWNlKF9PcHQuaW5kZXhPZih2YWx1ZSksIDEpO1xuICAgICAgaWYgKGFsbEVudHJpZXMgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSWYgc2V0LCB0aGUgZmllbGQgaXMgYSBjb21ibyBib3g7IGlmIGNsZWFyLCB0aGUgZmllbGQgaXMgYSBsaXN0IGJveC5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1DaG9pY2VGaWVsZCNjb21ib1xuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbWJvXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE4KSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAxOCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMTgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGNvbWJvIGJveCBzaGFsbCBpbmNsdWRlIGFuIGVkaXRhYmxlIHRleHQgYm94IGFzIHdlbGwgYXMgYSBkcm9wLWRvd24gbGlzdDsgaWYgY2xlYXIsIGl0IHNoYWxsIGluY2x1ZGUgb25seSBhIGRyb3AtZG93biBsaXN0LiBUaGlzIGZsYWcgc2hhbGwgYmUgdXNlZCBvbmx5IGlmIHRoZSBDb21ibyBmbGFnIGlzIHNldC5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1DaG9pY2VGaWVsZCNlZGl0XG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZWRpdFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAxOSkpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgLy9QREYgMzIwMDAtMToyMDA4LCBwYWdlIDQ0NFxuICAgICAgaWYgKHRoaXMuY29tYm8gPT09IHRydWUpIHtcbiAgICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAxOSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDE5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGZpZWxk4oCZcyBvcHRpb24gaXRlbXMgc2hhbGwgYmUgc29ydGVkIGFscGhhYmV0aWNhbGx5LiBUaGlzIGZsYWcgaXMgaW50ZW5kZWQgZm9yIHVzZSBieSB3cml0ZXJzLCBub3QgYnkgcmVhZGVycy4gQ29uZm9ybWluZyByZWFkZXJzIHNoYWxsIGRpc3BsYXkgdGhlIG9wdGlvbnMgaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgb2NjdXIgaW4gdGhlIE9wdCBhcnJheSAoc2VlIFRhYmxlIDIzMSkuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtQ2hvaWNlRmllbGQjc29ydFxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNvcnRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjApKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIwKTtcbiAgICAgICAgX09wdC5zb3J0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMjApO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIChQREYgMS40KSBJZiBzZXQsIG1vcmUgdGhhbiBvbmUgb2YgdGhlIGZpZWxk4oCZcyBvcHRpb24gaXRlbXMgbWF5IGJlIHNlbGVjdGVkIHNpbXVsdGFuZW91c2x5OyBpZiBjbGVhciwgYXQgbW9zdCBvbmUgaXRlbSBzaGFsbCBiZSBzZWxlY3RlZFxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUNob2ljZUZpZWxkI211bHRpU2VsZWN0XG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibXVsdGlTZWxlY3RcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjIpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyMik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKFBERiAxLjQpIElmIHNldCwgdGV4dCBlbnRlcmVkIGluIHRoZSBmaWVsZCBzaGFsbCBub3QgYmUgc3BlbGxjaGVja2VkLiBUaGlzIGZsYWcgc2hhbGwgbm90IGJlIHVzZWQgdW5sZXNzIHRoZSBDb21ibyBhbmQgRWRpdCBmbGFncyBhcmUgYm90aCBzZXQuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtQ2hvaWNlRmllbGQjZG9Ob3RTcGVsbENoZWNrXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZG9Ob3RTcGVsbENoZWNrXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIzKSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAyMyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMjMpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIChQREYgMS41KSBJZiBzZXQsIHRoZSBuZXcgdmFsdWUgc2hhbGwgYmUgY29tbWl0dGVkIGFzIHNvb24gYXMgYSBzZWxlY3Rpb24gaXMgbWFkZSAoY29tbW9ubHkgd2l0aCB0aGUgcG9pbnRpbmcgZGV2aWNlKS4gSW4gdGhpcyBjYXNlLCBzdXBwbHlpbmcgYSB2YWx1ZSBmb3IgYSBmaWVsZCBpbnZvbHZlcyB0aHJlZSBhY3Rpb25zOiBzZWxlY3RpbmcgdGhlIGZpZWxkIGZvciBmaWxsLWluLCBzZWxlY3RpbmcgYSBjaG9pY2UgZm9yIHRoZSBmaWxsLWluIHZhbHVlLCBhbmQgbGVhdmluZyB0aGF0IGZpZWxkLCB3aGljaCBmaW5hbGl6ZXMgb3Ig4oCcY29tbWl0c+KAnSB0aGUgZGF0YSBjaG9pY2UgYW5kIHRyaWdnZXJzIGFueSBhY3Rpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZW50cnkgb3IgY2hhbmdpbmcgb2YgdGhpcyBkYXRhLiBJZiB0aGlzIGZsYWcgaXMgb24sIHRoZW4gcHJvY2Vzc2luZyBkb2VzIG5vdCB3YWl0IGZvciBsZWF2aW5nIHRoZSBmaWVsZCBhY3Rpb24gdG8gb2NjdXIsIGJ1dCBpbW1lZGlhdGVseSBwcm9jZWVkcyB0byB0aGUgdGhpcmQgc3RlcC5cbiAgICogVGhpcyBvcHRpb24gZW5hYmxlcyBhcHBsaWNhdGlvbnMgdG8gcGVyZm9ybSBhbiBhY3Rpb24gb25jZSBhIHNlbGVjdGlvbiBpcyBtYWRlLCB3aXRob3V0IHJlcXVpcmluZyB0aGUgdXNlciB0byBleGl0IHRoZSBmaWVsZC4gSWYgY2xlYXIsIHRoZSBuZXcgdmFsdWUgaXMgbm90IGNvbW1pdHRlZCB1bnRpbCB0aGUgdXNlciBleGl0cyB0aGUgZmllbGQuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtQ2hvaWNlRmllbGQjY29tbWl0T25TZWxDaGFuZ2VcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb21taXRPblNlbENoYW5nZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAyNykpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMjcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDI3KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHRoaXMuaGFzQXBwZWFyYW5jZVN0cmVhbSA9IGZhbHNlO1xufTtcbmluaGVyaXQoQWNyb0Zvcm1DaG9pY2VGaWVsZCwgQWNyb0Zvcm1GaWVsZCk7XG5cbi8qKlxuICogQGNsYXNzIEFjcm9Gb3JtTGlzdEJveFxuICogQGV4dGVuZHMgQWNyb0Zvcm1DaG9pY2VGaWVsZFxuICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICovXG52YXIgQWNyb0Zvcm1MaXN0Qm94ID0gZnVuY3Rpb24oKSB7XG4gIEFjcm9Gb3JtQ2hvaWNlRmllbGQuY2FsbCh0aGlzKTtcbiAgdGhpcy5mb250TmFtZSA9IFwiaGVsdmV0aWNhXCI7XG5cbiAgLy9QREYgMzIwMDAtMToyMDA4LCBwYWdlIDQ0NFxuICB0aGlzLmNvbWJvID0gZmFsc2U7XG59O1xuaW5oZXJpdChBY3JvRm9ybUxpc3RCb3gsIEFjcm9Gb3JtQ2hvaWNlRmllbGQpO1xuXG4vKipcbiAqIEBjbGFzcyBBY3JvRm9ybUNvbWJvQm94XG4gKiBAZXh0ZW5kcyBBY3JvRm9ybUxpc3RCb3hcbiAqIEBleHRlbmRzIEFjcm9Gb3JtQ2hvaWNlRmllbGRcbiAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAqL1xudmFyIEFjcm9Gb3JtQ29tYm9Cb3ggPSBmdW5jdGlvbigpIHtcbiAgQWNyb0Zvcm1MaXN0Qm94LmNhbGwodGhpcyk7XG4gIHRoaXMuY29tYm8gPSB0cnVlO1xufTtcbmluaGVyaXQoQWNyb0Zvcm1Db21ib0JveCwgQWNyb0Zvcm1MaXN0Qm94KTtcblxuLyoqXG4gKiBAY2xhc3MgQWNyb0Zvcm1FZGl0Qm94XG4gKiBAZXh0ZW5kcyBBY3JvRm9ybUNvbWJvQm94XG4gKiBAZXh0ZW5kcyBBY3JvRm9ybUxpc3RCb3hcbiAqIEBleHRlbmRzIEFjcm9Gb3JtQ2hvaWNlRmllbGRcbiAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAqL1xudmFyIEFjcm9Gb3JtRWRpdEJveCA9IGZ1bmN0aW9uKCkge1xuICBBY3JvRm9ybUNvbWJvQm94LmNhbGwodGhpcyk7XG4gIHRoaXMuZWRpdCA9IHRydWU7XG59O1xuaW5oZXJpdChBY3JvRm9ybUVkaXRCb3gsIEFjcm9Gb3JtQ29tYm9Cb3gpO1xuXG4vKipcbiAqIEBjbGFzcyBBY3JvRm9ybUJ1dHRvblxuICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICovXG52YXIgQWNyb0Zvcm1CdXR0b24gPSBmdW5jdGlvbigpIHtcbiAgQWNyb0Zvcm1GaWVsZC5jYWxsKHRoaXMpO1xuICB0aGlzLkZUID0gXCIvQnRuXCI7XG5cbiAgLyoqXG4gICAqIChSYWRpbyBidXR0b25zIG9ubHkpIElmIHNldCwgZXhhY3RseSBvbmUgcmFkaW8gYnV0dG9uIHNoYWxsIGJlIHNlbGVjdGVkIGF0IGFsbCB0aW1lczsgc2VsZWN0aW5nIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgYnV0dG9uIGhhcyBubyBlZmZlY3QuIElmIGNsZWFyLCBjbGlja2luZyB0aGUgc2VsZWN0ZWQgYnV0dG9uIGRlc2VsZWN0cyBpdCwgbGVhdmluZyBubyBidXR0b24gc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtQnV0dG9uI25vVG9nZ2xlVG9PZmZcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJub1RvZ2dsZVRvT2ZmXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE1KSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAxNSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMTUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGZpZWxkIGlzIGEgc2V0IG9mIHJhZGlvIGJ1dHRvbnM7IGlmIGNsZWFyLCB0aGUgZmllbGQgaXMgYSBjaGVja2JveC4gVGhpcyBmbGFnIG1heSBiZSBzZXQgb25seSBpZiB0aGUgUHVzaGJ1dHRvbiBmbGFnIGlzIGNsZWFyLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNyYWRpb1xuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJhZGlvXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE2KSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAxNik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMTYpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGZpZWxkIGlzIGEgcHVzaGJ1dHRvbiB0aGF0IGRvZXMgbm90IHJldGFpbiBhIHBlcm1hbmVudCB2YWx1ZS5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1CdXR0b24jcHVzaEJ1dHRvblxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInB1c2hCdXR0b25cIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMTcpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDE3KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAxNyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKFBERiAxLjUpIElmIHNldCwgYSBncm91cCBvZiByYWRpbyBidXR0b25zIHdpdGhpbiBhIHJhZGlvIGJ1dHRvbiBmaWVsZCB0aGF0IHVzZSB0aGUgc2FtZSB2YWx1ZSBmb3IgdGhlIG9uIHN0YXRlIHdpbGwgdHVybiBvbiBhbmQgb2ZmIGluIHVuaXNvbjsgdGhhdCBpcyBpZiBvbmUgaXMgY2hlY2tlZCwgdGhleSBhcmUgYWxsIGNoZWNrZWQuIElmIGNsZWFyLCB0aGUgYnV0dG9ucyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlICh0aGUgc2FtZSBiZWhhdmlvciBhcyBIVE1MIHJhZGlvIGJ1dHRvbnMpLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNyYWRpb0lzVW5pc29uXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmFkaW9Jc1VuaXNvblwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAyNikpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMjYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDI2KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfTUsgPSB7fTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiTUtcIiwge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlbmNyeXB0b3IgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfTtcbiAgICAgIGlmICh0aGlzLnNjb3BlKSBlbmNyeXB0b3IgPSB0aGlzLnNjb3BlLmludGVybmFsLmdldEVuY3J5cHRvcih0aGlzLm9iaklkKTtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhfTUspLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHJlc3VsdC5wdXNoKFwiPDxcIik7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIGZvciAoa2V5IGluIF9NSykge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKFwiL1wiICsga2V5ICsgXCIgKFwiICsgcGRmRXNjYXBlKGVuY3J5cHRvcihfTUtba2V5XSkpICsgXCIpXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5wdXNoKFwiPj5cIik7XG4gICAgICAgIHJldHVybiByZXN1bHQuam9pbihcIlxcblwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIF9NSyA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEZyb20gdGhlIFBERiByZWZlcmVuY2U6XG4gICAqIChPcHRpb25hbCwgYnV0dG9uIGZpZWxkcyBvbmx5KSBUaGUgd2lkZ2V0IGFubm90YXRpb24ncyBub3JtYWwgY2FwdGlvbiB3aGljaCBzaGFsbCBiZSBkaXNwbGF5ZWQgd2hlbiBpdCBpcyBub3QgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdXNlci5cbiAgICogVW5saWtlIHRoZSByZW1haW5pbmcgZW50cmllcyBsaXN0ZWQgaW4gdGhpcyBUYWJsZSB3aGljaCBhcHBseSBvbmx5IHRvIHdpZGdldCBhbm5vdGF0aW9ucyBhc3NvY2lhdGVkIHdpdGggcHVzaGJ1dHRvbiBmaWVsZHMgKHNlZSBQdXNoYnV0dG9ucyBpbiAxMi43LjQuMiwgXCJCdXR0b24gRmllbGRzXCIpLCB0aGUgQ0EgZW50cnkgbWF5IGJlIHVzZWQgd2l0aCBhbnkgdHlwZSBvZiBidXR0b24gZmllbGQsIGluY2x1ZGluZyBjaGVjayBib3hlcyAoc2VlIENoZWNrIEJveGVzIGluIDEyLjcuNC4yLCBcIkJ1dHRvbiBGaWVsZHNcIikgYW5kIHJhZGlvIGJ1dHRvbnMgKFJhZGlvIEJ1dHRvbnMgaW4gMTIuNy40LjIsIFwiQnV0dG9uIEZpZWxkc1wiKS5cbiAgICpcbiAgICogLSAnOCcgPSBDcm9zcyxcbiAgICogLSAnbCcgPSAgQ2lyY2xlLFxuICAgKiAtICcnID0gbm90aGluZ1xuICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNjYXB0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYXB0aW9uXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9NSy5DQSB8fCBcIlwiO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBfTUsuQ0EgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfQVM7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkFTXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX0FTO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX0FTID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKFJlcXVpcmVkIGlmIHRoZSBhcHBlYXJhbmNlIGRpY3Rpb25hcnkgQVAgY29udGFpbnMgb25lIG9yIG1vcmUgc3ViZGljdGlvbmFyaWVzOyBQREYgMS4yKSBUaGUgYW5ub3RhdGlvbidzIGFwcGVhcmFuY2Ugc3RhdGUsIHdoaWNoIHNlbGVjdHMgdGhlIGFwcGxpY2FibGUgYXBwZWFyYW5jZSBzdHJlYW0gZnJvbSBhbiBhcHBlYXJhbmNlIHN1YmRpY3Rpb25hcnkgKHNlZSBTZWN0aW9uIDEyLjUuNSwgXCJBcHBlYXJhbmNlIFN0cmVhbXNcIilcbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1CdXR0b24jYXBwZWFyYW5jZVN0YXRlXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcHBlYXJhbmNlU3RhdGVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX0FTLnN1YnN0cigxLCBfQVMubGVuZ3RoIC0gMSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfQVMgPSBcIi9cIiArIHZhbHVlO1xuICAgIH1cbiAgfSk7XG59O1xuaW5oZXJpdChBY3JvRm9ybUJ1dHRvbiwgQWNyb0Zvcm1GaWVsZCk7XG5cbi8qKlxuICogQGNsYXNzIEFjcm9Gb3JtUHVzaEJ1dHRvblxuICogQGV4dGVuZHMgQWNyb0Zvcm1CdXR0b25cbiAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAqL1xudmFyIEFjcm9Gb3JtUHVzaEJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuICBBY3JvRm9ybUJ1dHRvbi5jYWxsKHRoaXMpO1xuICB0aGlzLnB1c2hCdXR0b24gPSB0cnVlO1xufTtcbmluaGVyaXQoQWNyb0Zvcm1QdXNoQnV0dG9uLCBBY3JvRm9ybUJ1dHRvbik7XG5cbi8qKlxuICogQGNsYXNzIEFjcm9Gb3JtUmFkaW9CdXR0b25cbiAqIEBleHRlbmRzIEFjcm9Gb3JtQnV0dG9uXG4gKiBAZXh0ZW5kcyBBY3JvRm9ybUZpZWxkXG4gKi9cbnZhciBBY3JvRm9ybVJhZGlvQnV0dG9uID0gZnVuY3Rpb24oKSB7XG4gIEFjcm9Gb3JtQnV0dG9uLmNhbGwodGhpcyk7XG4gIHRoaXMucmFkaW8gPSB0cnVlO1xuICB0aGlzLnB1c2hCdXR0b24gPSBmYWxzZTtcblxuICB2YXIgX0tpZHMgPSBbXTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiS2lkc1wiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX0tpZHM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIF9LaWRzID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfS2lkcyA9IFtdO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuaW5oZXJpdChBY3JvRm9ybVJhZGlvQnV0dG9uLCBBY3JvRm9ybUJ1dHRvbik7XG5cbi8qKlxuICogVGhlIENoaWxkIGNsYXNzIG9mIGEgUmFkaW9CdXR0b24gKHRoZSByYWRpb0dyb3VwKSAtPiBUaGUgc2luZ2xlIEJ1dHRvbnNcbiAqXG4gKiBAY2xhc3MgQWNyb0Zvcm1DaGlsZENsYXNzXG4gKiBAZXh0ZW5kcyBBY3JvRm9ybUZpZWxkXG4gKiBAaWdub3JlXG4gKi9cbnZhciBBY3JvRm9ybUNoaWxkQ2xhc3MgPSBmdW5jdGlvbigpIHtcbiAgQWNyb0Zvcm1GaWVsZC5jYWxsKHRoaXMpO1xuXG4gIHZhciBfcGFyZW50O1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJQYXJlbnRcIiwge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfcGFyZW50O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX3BhcmVudCA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIF9vcHRpb25OYW1lO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25OYW1lXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfb3B0aW9uTmFtZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9vcHRpb25OYW1lID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICB2YXIgX01LID0ge307XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIk1LXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZW5jcnlwdG9yID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5zY29wZSkgZW5jcnlwdG9yID0gdGhpcy5zY29wZS5pbnRlcm5hbC5nZXRFbmNyeXB0b3IodGhpcy5vYmpJZCk7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICByZXN1bHQucHVzaChcIjw8XCIpO1xuICAgICAgdmFyIGtleTtcbiAgICAgIGZvciAoa2V5IGluIF9NSykge1xuICAgICAgICByZXN1bHQucHVzaChcIi9cIiArIGtleSArIFwiIChcIiArIHBkZkVzY2FwZShlbmNyeXB0b3IoX01LW2tleV0pKSArIFwiKVwiKTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5wdXNoKFwiPj5cIik7XG4gICAgICByZXR1cm4gcmVzdWx0LmpvaW4oXCJcXG5cIik7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIF9NSyA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEZyb20gdGhlIFBERiByZWZlcmVuY2U6XG4gICAqIChPcHRpb25hbCwgYnV0dG9uIGZpZWxkcyBvbmx5KSBUaGUgd2lkZ2V0IGFubm90YXRpb24ncyBub3JtYWwgY2FwdGlvbiB3aGljaCBzaGFsbCBiZSBkaXNwbGF5ZWQgd2hlbiBpdCBpcyBub3QgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdXNlci5cbiAgICogVW5saWtlIHRoZSByZW1haW5pbmcgZW50cmllcyBsaXN0ZWQgaW4gdGhpcyBUYWJsZSB3aGljaCBhcHBseSBvbmx5IHRvIHdpZGdldCBhbm5vdGF0aW9ucyBhc3NvY2lhdGVkIHdpdGggcHVzaGJ1dHRvbiBmaWVsZHMgKHNlZSBQdXNoYnV0dG9ucyBpbiAxMi43LjQuMiwgXCJCdXR0b24gRmllbGRzXCIpLCB0aGUgQ0EgZW50cnkgbWF5IGJlIHVzZWQgd2l0aCBhbnkgdHlwZSBvZiBidXR0b24gZmllbGQsIGluY2x1ZGluZyBjaGVjayBib3hlcyAoc2VlIENoZWNrIEJveGVzIGluIDEyLjcuNC4yLCBcIkJ1dHRvbiBGaWVsZHNcIikgYW5kIHJhZGlvIGJ1dHRvbnMgKFJhZGlvIEJ1dHRvbnMgaW4gMTIuNy40LjIsIFwiQnV0dG9uIEZpZWxkc1wiKS5cbiAgICpcbiAgICogLSAnOCcgPSBDcm9zcyxcbiAgICogLSAnbCcgPSAgQ2lyY2xlLFxuICAgKiAtICcnID0gbm90aGluZ1xuICAgKiBAbmFtZSBBY3JvRm9ybUJ1dHRvbiNjYXB0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYXB0aW9uXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9NSy5DQSB8fCBcIlwiO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBfTUsuQ0EgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfQVM7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkFTXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX0FTO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgX0FTID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKFJlcXVpcmVkIGlmIHRoZSBhcHBlYXJhbmNlIGRpY3Rpb25hcnkgQVAgY29udGFpbnMgb25lIG9yIG1vcmUgc3ViZGljdGlvbmFyaWVzOyBQREYgMS4yKSBUaGUgYW5ub3RhdGlvbidzIGFwcGVhcmFuY2Ugc3RhdGUsIHdoaWNoIHNlbGVjdHMgdGhlIGFwcGxpY2FibGUgYXBwZWFyYW5jZSBzdHJlYW0gZnJvbSBhbiBhcHBlYXJhbmNlIHN1YmRpY3Rpb25hcnkgKHNlZSBTZWN0aW9uIDEyLjUuNSwgXCJBcHBlYXJhbmNlIFN0cmVhbXNcIilcbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1CdXR0b24jYXBwZWFyYW5jZVN0YXRlXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcHBlYXJhbmNlU3RhdGVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX0FTLnN1YnN0cigxLCBfQVMubGVuZ3RoIC0gMSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBfQVMgPSBcIi9cIiArIHZhbHVlO1xuICAgIH1cbiAgfSk7XG4gIHRoaXMuY2FwdGlvbiA9IFwibFwiO1xuICB0aGlzLmFwcGVhcmFuY2VTdGF0ZSA9IFwiT2ZmXCI7XG4gIC8vIHRvZG86IHNldCBBcHBlYXJhbmNlVHlwZSBhcyB2YXJpYWJsZSB0aGF0IGNhbiBiZSBzZXQgZnJvbSB0aGVcbiAgLy8gb3V0c2lkZS4uLlxuICB0aGlzLl9BcHBlYXJhbmNlVHlwZSA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5SYWRpb0J1dHRvbi5DaXJjbGU7XG4gIC8vIFRoZSBEZWZhdWx0IGFwcGVhcmFuY2VUeXBlIGlzIHRoZSBDaXJjbGVcbiAgdGhpcy5hcHBlYXJhbmNlU3RyZWFtQ29udGVudCA9IHRoaXMuX0FwcGVhcmFuY2VUeXBlLmNyZWF0ZUFwcGVhcmFuY2VTdHJlYW0oXG4gICAgdGhpcy5vcHRpb25OYW1lXG4gICk7XG59O1xuaW5oZXJpdChBY3JvRm9ybUNoaWxkQ2xhc3MsIEFjcm9Gb3JtRmllbGQpO1xuXG5BY3JvRm9ybVJhZGlvQnV0dG9uLnByb3RvdHlwZS5zZXRBcHBlYXJhbmNlID0gZnVuY3Rpb24oYXBwZWFyYW5jZSkge1xuICBpZiAoIShcImNyZWF0ZUFwcGVhcmFuY2VTdHJlYW1cIiBpbiBhcHBlYXJhbmNlICYmIFwiZ2V0Q0FcIiBpbiBhcHBlYXJhbmNlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiQ291bGRuJ3QgYXNzaWduIEFwcGVhcmFuY2UgdG8gUmFkaW9CdXR0b24uIEFwcGVhcmFuY2Ugd2FzIEludmFsaWQhXCJcbiAgICApO1xuICB9XG4gIGZvciAodmFyIG9iaklkIGluIHRoaXMuS2lkcykge1xuICAgIGlmICh0aGlzLktpZHMuaGFzT3duUHJvcGVydHkob2JqSWQpKSB7XG4gICAgICB2YXIgY2hpbGQgPSB0aGlzLktpZHNbb2JqSWRdO1xuICAgICAgY2hpbGQuYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQgPSBhcHBlYXJhbmNlLmNyZWF0ZUFwcGVhcmFuY2VTdHJlYW0oXG4gICAgICAgIGNoaWxkLm9wdGlvbk5hbWVcbiAgICAgICk7XG4gICAgICBjaGlsZC5jYXB0aW9uID0gYXBwZWFyYW5jZS5nZXRDQSgpO1xuICAgIH1cbiAgfVxufTtcblxuQWNyb0Zvcm1SYWRpb0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlT3B0aW9uID0gZnVuY3Rpb24obmFtZSkge1xuICAvLyBDcmVhdGUgbmV3IENoaWxkIGZvciBSYWRpb0dyb3VwXG4gIHZhciBjaGlsZCA9IG5ldyBBY3JvRm9ybUNoaWxkQ2xhc3MoKTtcbiAgY2hpbGQuUGFyZW50ID0gdGhpcztcbiAgY2hpbGQub3B0aW9uTmFtZSA9IG5hbWU7XG4gIC8vIEFkZCB0byBQYXJlbnRcbiAgdGhpcy5LaWRzLnB1c2goY2hpbGQpO1xuXG4gIGFkZEZpZWxkLmNhbGwodGhpcy5zY29wZSwgY2hpbGQpO1xuXG4gIHJldHVybiBjaGlsZDtcbn07XG5cbi8qKlxuICogQGNsYXNzIEFjcm9Gb3JtQ2hlY2tCb3hcbiAqIEBleHRlbmRzIEFjcm9Gb3JtQnV0dG9uXG4gKiBAZXh0ZW5kcyBBY3JvRm9ybUZpZWxkXG4gKi9cbnZhciBBY3JvRm9ybUNoZWNrQm94ID0gZnVuY3Rpb24oKSB7XG4gIEFjcm9Gb3JtQnV0dG9uLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5mb250TmFtZSA9IFwiemFwZmRpbmdiYXRzXCI7XG4gIHRoaXMuY2FwdGlvbiA9IFwiM1wiO1xuICB0aGlzLmFwcGVhcmFuY2VTdGF0ZSA9IFwiT25cIjtcbiAgdGhpcy52YWx1ZSA9IFwiT25cIjtcbiAgdGhpcy50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICB0aGlzLmFwcGVhcmFuY2VTdHJlYW1Db250ZW50ID0gQWNyb0Zvcm1BcHBlYXJhbmNlLkNoZWNrQm94LmNyZWF0ZUFwcGVhcmFuY2VTdHJlYW0oKTtcbn07XG5pbmhlcml0KEFjcm9Gb3JtQ2hlY2tCb3gsIEFjcm9Gb3JtQnV0dG9uKTtcblxuLyoqXG4gKiBAY2xhc3MgQWNyb0Zvcm1UZXh0RmllbGRcbiAqIEBleHRlbmRzIEFjcm9Gb3JtRmllbGRcbiAqL1xudmFyIEFjcm9Gb3JtVGV4dEZpZWxkID0gZnVuY3Rpb24oKSB7XG4gIEFjcm9Gb3JtRmllbGQuY2FsbCh0aGlzKTtcbiAgdGhpcy5GVCA9IFwiL1R4XCI7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGZpZWxkIG1heSBjb250YWluIG11bHRpcGxlIGxpbmVzIG9mIHRleHQ7IGlmIGNsZWFyLCB0aGUgZmllbGTigJlzIHRleHQgc2hhbGwgYmUgcmVzdHJpY3RlZCB0byBhIHNpbmdsZSBsaW5lLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybVRleHRGaWVsZCNtdWx0aWxpbmVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtdWx0aWxpbmVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMTMpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDEzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAxMyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKFBERiAxLjQpIElmIHNldCwgdGhlIHRleHQgZW50ZXJlZCBpbiB0aGUgZmllbGQgcmVwcmVzZW50cyB0aGUgcGF0aG5hbWUgb2YgYSBmaWxlIHdob3NlIGNvbnRlbnRzIHNoYWxsIGJlIHN1Ym1pdHRlZCBhcyB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybVRleHRGaWVsZCNmaWxlU2VsZWN0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlsZVNlbGVjdFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAyMSkpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMjEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDIxKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAoUERGIDEuNCkgSWYgc2V0LCB0ZXh0IGVudGVyZWQgaW4gdGhlIGZpZWxkIHNoYWxsIG5vdCBiZSBzcGVsbC1jaGVja2VkLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybVRleHRGaWVsZCNkb05vdFNwZWxsQ2hlY2tcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkb05vdFNwZWxsQ2hlY2tcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjMpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDIzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyMyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKFBERiAxLjQpIElmIHNldCwgdGhlIGZpZWxkIHNoYWxsIG5vdCBzY3JvbGwgKGhvcml6b250YWxseSBmb3Igc2luZ2xlLWxpbmUgZmllbGRzLCB2ZXJ0aWNhbGx5IGZvciBtdWx0aXBsZS1saW5lIGZpZWxkcykgdG8gYWNjb21tb2RhdGUgbW9yZSB0ZXh0IHRoYW4gZml0cyB3aXRoaW4gaXRzIGFubm90YXRpb24gcmVjdGFuZ2xlLiBPbmNlIHRoZSBmaWVsZCBpcyBmdWxsLCBubyBmdXJ0aGVyIHRleHQgc2hhbGwgYmUgYWNjZXB0ZWQgZm9yIGludGVyYWN0aXZlIGZvcm0gZmlsbGluZzsgZm9yIG5vbmludGVyYWN0aXZlIGZvcm0gZmlsbGluZywgdGhlIGZpbGxlciBzaG91bGQgdGFrZSBjYXJlIG5vdCB0byBhZGQgbW9yZSBjaGFyYWN0ZXIgdGhhbiB3aWxsIHZpc2libHkgZml0IGluIHRoZSBkZWZpbmVkIGFyZWEuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI2RvTm90U2Nyb2xsXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZG9Ob3RTY3JvbGxcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjQpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDI0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyNCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogKFBERiAxLjUpIE1heSBiZSBzZXQgb25seSBpZiB0aGUgTWF4TGVuIGVudHJ5IGlzIHByZXNlbnQgaW4gdGhlIHRleHQgZmllbGQgZGljdGlvbmFyeSAoc2VlIFRhYmxlIDIyOSkgYW5kIGlmIHRoZSBNdWx0aWxpbmUsIFBhc3N3b3JkLCBhbmQgRmlsZVNlbGVjdCBmbGFncyBhcmUgY2xlYXIuIElmIHNldCwgdGhlIGZpZWxkIHNoYWxsIGJlIGF1dG9tYXRpY2FsbHkgZGl2aWRlZCBpbnRvIGFzIG1hbnkgZXF1YWxseSBzcGFjZWQgcG9zaXRpb25zLCBvciBjb21icywgYXMgdGhlIHZhbHVlIG9mIE1heExlbiwgYW5kIHRoZSB0ZXh0IGlzIGxhaWQgb3V0IGludG8gdGhvc2UgY29tYnMuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI2NvbWJcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb21iXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4oZ2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDI1KSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoQm9vbGVhbih2YWx1ZSkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5GZiA9IHNldEJpdEZvclBkZih0aGlzLkZmLCAyNSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZmID0gY2xlYXJCaXRGb3JQZGYodGhpcy5GZiwgMjUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIChQREYgMS41KSBJZiBzZXQsIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIHNoYWxsIGJlIGEgcmljaCB0ZXh0IHN0cmluZyAoc2VlIDEyLjcuMy40LCDigJxSaWNoIFRleHQgU3RyaW5nc+KAnSkuIElmIHRoZSBmaWVsZCBoYXMgYSB2YWx1ZSwgdGhlIFJWIGVudHJ5IG9mIHRoZSBmaWVsZCBkaWN0aW9uYXJ5IChUYWJsZSAyMjIpIHNoYWxsIHNwZWNpZnkgdGhlIHJpY2ggdGV4dCBzdHJpbmcuXG4gICAqXG4gICAqIEBuYW1lIEFjcm9Gb3JtVGV4dEZpZWxkI3JpY2hUZXh0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmljaFRleHRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihnZXRCaXRGb3JQZGYodGhpcy5GZiwgMjYpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChCb29sZWFuKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLkZmID0gc2V0Qml0Rm9yUGRmKHRoaXMuRmYsIDI2KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuRmYgPSBjbGVhckJpdEZvclBkZih0aGlzLkZmLCAyNik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB2YXIgX01heExlbiA9IG51bGw7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIk1heExlblwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX01heExlbjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIF9NYXhMZW4gPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiAoT3B0aW9uYWw7IGluaGVyaXRhYmxlKSBUaGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIGZpZWxk4oCZcyB0ZXh0LCBpbiBjaGFyYWN0ZXJzLlxuICAgKlxuICAgKiBAbmFtZSBBY3JvRm9ybVRleHRGaWVsZCNtYXhMZW5ndGhcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heExlbmd0aFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfTWF4TGVuO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgICAgIF9NYXhMZW4gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhc0FwcGVhcmFuY2VTdHJlYW1cIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5WIHx8IHRoaXMuRFY7XG4gICAgfVxuICB9KTtcbn07XG5pbmhlcml0KEFjcm9Gb3JtVGV4dEZpZWxkLCBBY3JvRm9ybUZpZWxkKTtcblxuLyoqXG4gKiBAY2xhc3MgQWNyb0Zvcm1QYXNzd29yZEZpZWxkXG4gKiBAZXh0ZW5kcyBBY3JvRm9ybVRleHRGaWVsZFxuICogQGV4dGVuZHMgQWNyb0Zvcm1GaWVsZFxuICovXG52YXIgQWNyb0Zvcm1QYXNzd29yZEZpZWxkID0gZnVuY3Rpb24oKSB7XG4gIEFjcm9Gb3JtVGV4dEZpZWxkLmNhbGwodGhpcyk7XG5cbiAgLyoqXG4gICAqIElmIHNldCwgdGhlIGZpZWxkIGlzIGludGVuZGVkIGZvciBlbnRlcmluZyBhIHNlY3VyZSBwYXNzd29yZCB0aGF0IHNob3VsZCBub3QgYmUgZWNob2VkIHZpc2libHkgdG8gdGhlIHNjcmVlbi4gQ2hhcmFjdGVycyB0eXBlZCBmcm9tIHRoZSBrZXlib2FyZCBzaGFsbCBpbnN0ZWFkIGJlIGVjaG9lZCBpbiBzb21lIHVucmVhZGFibGUgZm9ybSwgc3VjaCBhcyBhc3Rlcmlza3Mgb3IgYnVsbGV0IGNoYXJhY3RlcnMuXG4gICAqIE5PVEUgVG8gcHJvdGVjdCBwYXNzd29yZCBjb25maWRlbnRpYWxpdHksIHJlYWRlcnMgc2hvdWxkIG5ldmVyIHN0b3JlIHRoZSB2YWx1ZSBvZiB0aGUgdGV4dCBmaWVsZCBpbiB0aGUgUERGIGZpbGUgaWYgdGhpcyBmbGFnIGlzIHNldC5cbiAgICpcbiAgICogQG5hbWUgQWNyb0Zvcm1UZXh0RmllbGQjcGFzc3dvcmRcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXNzd29yZFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKGdldEJpdEZvclBkZih0aGlzLkZmLCAxNCkpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKEJvb2xlYW4odmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuRmYgPSBzZXRCaXRGb3JQZGYodGhpcy5GZiwgMTQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5GZiA9IGNsZWFyQml0Rm9yUGRmKHRoaXMuRmYsIDE0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICB0aGlzLnBhc3N3b3JkID0gdHJ1ZTtcbn07XG5pbmhlcml0KEFjcm9Gb3JtUGFzc3dvcmRGaWVsZCwgQWNyb0Zvcm1UZXh0RmllbGQpO1xuXG4vLyBDb250YWlucyBNZXRob2RzIGZvciBjcmVhdGluZyBzdGFuZGFyZCBhcHBlYXJhbmNlc1xudmFyIEFjcm9Gb3JtQXBwZWFyYW5jZSA9IHtcbiAgQ2hlY2tCb3g6IHtcbiAgICBjcmVhdGVBcHBlYXJhbmNlU3RyZWFtOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcHBlYXJhbmNlID0ge1xuICAgICAgICBOOiB7XG4gICAgICAgICAgT246IEFjcm9Gb3JtQXBwZWFyYW5jZS5DaGVja0JveC5ZZXNOb3JtYWxcbiAgICAgICAgfSxcbiAgICAgICAgRDoge1xuICAgICAgICAgIE9uOiBBY3JvRm9ybUFwcGVhcmFuY2UuQ2hlY2tCb3guWWVzUHVzaERvd24sXG4gICAgICAgICAgT2ZmOiBBY3JvRm9ybUFwcGVhcmFuY2UuQ2hlY2tCb3guT2ZmUHVzaERvd25cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGFwcGVhcmFuY2U7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGFuZGFyZCBPbiBBcHBlYXJhbmNlIGZvciBhIENoZWNrQm94XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7QWNyb0Zvcm1YT2JqZWN0fVxuICAgICAqL1xuICAgIFllc1B1c2hEb3duOiBmdW5jdGlvbihmb3JtT2JqZWN0KSB7XG4gICAgICB2YXIgeG9iaiA9IGNyZWF0ZUZvcm1YT2JqZWN0KGZvcm1PYmplY3QpO1xuICAgICAgeG9iai5zY29wZSA9IGZvcm1PYmplY3Quc2NvcGU7XG4gICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICB2YXIgZm9udEtleSA9IGZvcm1PYmplY3Quc2NvcGUuaW50ZXJuYWwuZ2V0Rm9udChcbiAgICAgICAgZm9ybU9iamVjdC5mb250TmFtZSxcbiAgICAgICAgZm9ybU9iamVjdC5mb250U3R5bGVcbiAgICAgICkuaWQ7XG4gICAgICB2YXIgZW5jb2RlZENvbG9yID0gZm9ybU9iamVjdC5zY29wZS5fX3ByaXZhdGVfXy5lbmNvZGVDb2xvclN0cmluZyhcbiAgICAgICAgZm9ybU9iamVjdC5jb2xvclxuICAgICAgKTtcbiAgICAgIHZhciBjYWxjUmVzID0gY2FsY3VsYXRlWChmb3JtT2JqZWN0LCBmb3JtT2JqZWN0LmNhcHRpb24pO1xuICAgICAgc3RyZWFtLnB1c2goXCIwLjc0OTAyMyBnXCIpO1xuICAgICAgc3RyZWFtLnB1c2goXG4gICAgICAgIFwiMCAwIFwiICtcbiAgICAgICAgICBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkpICtcbiAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgZjIoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSkgK1xuICAgICAgICAgIFwiIHJlXCJcbiAgICAgICk7XG4gICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICBzdHJlYW0ucHVzaChcIkJNQ1wiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFwicVwiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFwiMCAwIDEgcmdcIik7XG4gICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgXCIvXCIgKyBmb250S2V5ICsgXCIgXCIgKyBmMihjYWxjUmVzLmZvbnRTaXplKSArIFwiIFRmIFwiICsgZW5jb2RlZENvbG9yXG4gICAgICApO1xuICAgICAgc3RyZWFtLnB1c2goXCJCVFwiKTtcbiAgICAgIHN0cmVhbS5wdXNoKGNhbGNSZXMudGV4dCk7XG4gICAgICBzdHJlYW0ucHVzaChcIkVUXCIpO1xuICAgICAgc3RyZWFtLnB1c2goXCJRXCIpO1xuICAgICAgc3RyZWFtLnB1c2goXCJFTUNcIik7XG4gICAgICB4b2JqLnN0cmVhbSA9IHN0cmVhbS5qb2luKFwiXFxuXCIpO1xuICAgICAgcmV0dXJuIHhvYmo7XG4gICAgfSxcblxuICAgIFllc05vcm1hbDogZnVuY3Rpb24oZm9ybU9iamVjdCkge1xuICAgICAgdmFyIHhvYmogPSBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgIHhvYmouc2NvcGUgPSBmb3JtT2JqZWN0LnNjb3BlO1xuICAgICAgdmFyIGZvbnRLZXkgPSBmb3JtT2JqZWN0LnNjb3BlLmludGVybmFsLmdldEZvbnQoXG4gICAgICAgIGZvcm1PYmplY3QuZm9udE5hbWUsXG4gICAgICAgIGZvcm1PYmplY3QuZm9udFN0eWxlXG4gICAgICApLmlkO1xuICAgICAgdmFyIGVuY29kZWRDb2xvciA9IGZvcm1PYmplY3Quc2NvcGUuX19wcml2YXRlX18uZW5jb2RlQ29sb3JTdHJpbmcoXG4gICAgICAgIGZvcm1PYmplY3QuY29sb3JcbiAgICAgICk7XG4gICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICB2YXIgaGVpZ2h0ID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KTtcbiAgICAgIHZhciB3aWR0aCA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KTtcbiAgICAgIHZhciBjYWxjUmVzID0gY2FsY3VsYXRlWChmb3JtT2JqZWN0LCBmb3JtT2JqZWN0LmNhcHRpb24pO1xuICAgICAgc3RyZWFtLnB1c2goXCIxIGdcIik7XG4gICAgICBzdHJlYW0ucHVzaChcIjAgMCBcIiArIGYyKHdpZHRoKSArIFwiIFwiICsgZjIoaGVpZ2h0KSArIFwiIHJlXCIpO1xuICAgICAgc3RyZWFtLnB1c2goXCJmXCIpO1xuICAgICAgc3RyZWFtLnB1c2goXCJxXCIpO1xuICAgICAgc3RyZWFtLnB1c2goXCIwIDAgMSByZ1wiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFwiMCAwIFwiICsgZjIod2lkdGggLSAxKSArIFwiIFwiICsgZjIoaGVpZ2h0IC0gMSkgKyBcIiByZVwiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFwiV1wiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFwiblwiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFwiMCBnXCIpO1xuICAgICAgc3RyZWFtLnB1c2goXCJCVFwiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICBcIi9cIiArIGZvbnRLZXkgKyBcIiBcIiArIGYyKGNhbGNSZXMuZm9udFNpemUpICsgXCIgVGYgXCIgKyBlbmNvZGVkQ29sb3JcbiAgICAgICk7XG4gICAgICBzdHJlYW0ucHVzaChjYWxjUmVzLnRleHQpO1xuICAgICAgc3RyZWFtLnB1c2goXCJFVFwiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFwiUVwiKTtcbiAgICAgIHhvYmouc3RyZWFtID0gc3RyZWFtLmpvaW4oXCJcXG5cIik7XG4gICAgICByZXR1cm4geG9iajtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc3RhbmRhcmQgT2ZmIEFwcGVhcmFuY2UgZm9yIGEgQ2hlY2tCb3hcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtBY3JvRm9ybVhPYmplY3R9XG4gICAgICovXG4gICAgT2ZmUHVzaERvd246IGZ1bmN0aW9uKGZvcm1PYmplY3QpIHtcbiAgICAgIHZhciB4b2JqID0gY3JlYXRlRm9ybVhPYmplY3QoZm9ybU9iamVjdCk7XG4gICAgICB4b2JqLnNjb3BlID0gZm9ybU9iamVjdC5zY29wZTtcbiAgICAgIHZhciBzdHJlYW0gPSBbXTtcbiAgICAgIHN0cmVhbS5wdXNoKFwiMC43NDkwMjMgZ1wiKTtcbiAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICBcIjAgMCBcIiArXG4gICAgICAgICAgZjIoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpKSArXG4gICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkpICtcbiAgICAgICAgICBcIiByZVwiXG4gICAgICApO1xuICAgICAgc3RyZWFtLnB1c2goXCJmXCIpO1xuICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgIHJldHVybiB4b2JqO1xuICAgIH1cbiAgfSxcblxuICBSYWRpb0J1dHRvbjoge1xuICAgIENpcmNsZToge1xuICAgICAgY3JlYXRlQXBwZWFyYW5jZVN0cmVhbTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB2YXIgYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQgPSB7XG4gICAgICAgICAgRDoge1xuICAgICAgICAgICAgT2ZmOiBBY3JvRm9ybUFwcGVhcmFuY2UuUmFkaW9CdXR0b24uQ2lyY2xlLk9mZlB1c2hEb3duXG4gICAgICAgICAgfSxcbiAgICAgICAgICBOOiB7fVxuICAgICAgICB9O1xuICAgICAgICBhcHBlYXJhbmNlU3RyZWFtQ29udGVudC5OW25hbWVdID1cbiAgICAgICAgICBBY3JvRm9ybUFwcGVhcmFuY2UuUmFkaW9CdXR0b24uQ2lyY2xlLlllc05vcm1hbDtcbiAgICAgICAgYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQuRFtuYW1lXSA9XG4gICAgICAgICAgQWNyb0Zvcm1BcHBlYXJhbmNlLlJhZGlvQnV0dG9uLkNpcmNsZS5ZZXNQdXNoRG93bjtcbiAgICAgICAgcmV0dXJuIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50O1xuICAgICAgfSxcbiAgICAgIGdldENBOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFwibFwiO1xuICAgICAgfSxcblxuICAgICAgWWVzTm9ybWFsOiBmdW5jdGlvbihmb3JtT2JqZWN0KSB7XG4gICAgICAgIHZhciB4b2JqID0gY3JlYXRlRm9ybVhPYmplY3QoZm9ybU9iamVjdCk7XG4gICAgICAgIHhvYmouc2NvcGUgPSBmb3JtT2JqZWN0LnNjb3BlO1xuICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgIC8vIE1ha2UgdGhlIFJhZGl1cyBvZiB0aGUgQ2lyY2xlIHJlbGF0aXZlIHRvIG1pbihoZWlnaHQsIHdpZHRoKSBvZiBmb3JtT2JqZWN0XG4gICAgICAgIHZhciBEb3RSYWRpdXMgPVxuICAgICAgICAgIEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSA8PVxuICAgICAgICAgIEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdClcbiAgICAgICAgICAgID8gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIC8gNFxuICAgICAgICAgICAgOiBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpIC8gNDtcbiAgICAgICAgLy8gVGhlIEJvcmRlcnBhZGRpbmcuLi5cbiAgICAgICAgRG90UmFkaXVzID0gTnVtYmVyKChEb3RSYWRpdXMgKiAwLjkpLnRvRml4ZWQoNSkpO1xuICAgICAgICB2YXIgYyA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5CZXppZXJfQztcbiAgICAgICAgdmFyIERvdFJhZGl1c0JlemllciA9IE51bWJlcigoRG90UmFkaXVzICogYykudG9GaXhlZCg1KSk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZSBGb2xsb3dpbmcgaXMgYSBDaXJjbGUgY3JlYXRlZCB3aXRoIEJlemllci1DdXJ2ZXMuXG4gICAgICAgICAqL1xuICAgICAgICBzdHJlYW0ucHVzaChcInFcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICAgIFwiMSAwIDAgMSBcIiArXG4gICAgICAgICAgICBmNShBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgLyAyKSArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICBmNShBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpIC8gMikgK1xuICAgICAgICAgICAgXCIgY21cIlxuICAgICAgICApO1xuICAgICAgICBzdHJlYW0ucHVzaChEb3RSYWRpdXMgKyBcIiAwIG1cIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICBEb3RSYWRpdXNCZXppZXIgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzQmV6aWVyICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAwIFwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiBjXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXG4gICAgICAgICAgXCItXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzQmV6aWVyICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIERvdFJhZGl1c0JlemllciArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIDAgY1wiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzQmV6aWVyICtcbiAgICAgICAgICAgIFwiIC1cIiArXG4gICAgICAgICAgICBEb3RSYWRpdXNCZXppZXIgK1xuICAgICAgICAgICAgXCIgLVwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAwIC1cIiArXG4gICAgICAgICAgICBEb3RSYWRpdXMgK1xuICAgICAgICAgICAgXCIgY1wiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICAgIERvdFJhZGl1c0JlemllciArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzQmV6aWVyICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAwIGNcIlxuICAgICAgICApO1xuICAgICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwiUVwiKTtcbiAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgICB9LFxuICAgICAgWWVzUHVzaERvd246IGZ1bmN0aW9uKGZvcm1PYmplY3QpIHtcbiAgICAgICAgdmFyIHhvYmogPSBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgICAgeG9iai5zY29wZSA9IGZvcm1PYmplY3Quc2NvcGU7XG4gICAgICAgIHZhciBzdHJlYW0gPSBbXTtcbiAgICAgICAgdmFyIERvdFJhZGl1cyA9XG4gICAgICAgICAgQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIDw9XG4gICAgICAgICAgQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KVxuICAgICAgICAgICAgPyBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgLyA0XG4gICAgICAgICAgICA6IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgLyA0O1xuICAgICAgICAvLyBUaGUgQm9yZGVycGFkZGluZy4uLlxuICAgICAgICBEb3RSYWRpdXMgPSBOdW1iZXIoKERvdFJhZGl1cyAqIDAuOSkudG9GaXhlZCg1KSk7XG4gICAgICAgIC8vIFNhdmUgcmVzdWx0cyBmb3IgbGF0ZXIgdXNlOyBubyBuZWVkIHRvIHdhc3RlXG4gICAgICAgIC8vIHByb2Nlc3NvciB0aWNrcyBvbiBkb2luZyBtYXRoXG4gICAgICAgIHZhciBrID0gTnVtYmVyKChEb3RSYWRpdXMgKiAyKS50b0ZpeGVkKDUpKTtcbiAgICAgICAgdmFyIGtjID0gTnVtYmVyKChrICogQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLkJlemllcl9DKS50b0ZpeGVkKDUpKTtcbiAgICAgICAgdmFyIGRjID0gTnVtYmVyKFxuICAgICAgICAgIChEb3RSYWRpdXMgKiBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuQmV6aWVyX0MpLnRvRml4ZWQoNSlcbiAgICAgICAgKTtcblxuICAgICAgICBzdHJlYW0ucHVzaChcIjAuNzQ5MDIzIGdcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwicVwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXG4gICAgICAgICAgXCIxIDAgMCAxIFwiICtcbiAgICAgICAgICAgIGY1KEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAvIDIpICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIGY1KEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgLyAyKSArXG4gICAgICAgICAgICBcIiBjbVwiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKGsgKyBcIiAwIG1cIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKGsgKyBcIiBcIiArIGtjICsgXCIgXCIgKyBrYyArIFwiIFwiICsgayArIFwiIDAgXCIgKyBrICsgXCIgY1wiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXG4gICAgICAgICAgXCItXCIgKyBrYyArIFwiIFwiICsgayArIFwiIC1cIiArIGsgKyBcIiBcIiArIGtjICsgXCIgLVwiICsgayArIFwiIDAgY1wiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICAgIFwiLVwiICsgayArIFwiIC1cIiArIGtjICsgXCIgLVwiICsga2MgKyBcIiAtXCIgKyBrICsgXCIgMCAtXCIgKyBrICsgXCIgY1wiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKGtjICsgXCIgLVwiICsgayArIFwiIFwiICsgayArIFwiIC1cIiArIGtjICsgXCIgXCIgKyBrICsgXCIgMCBjXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcImZcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwiUVwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCIwIGdcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwicVwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXG4gICAgICAgICAgXCIxIDAgMCAxIFwiICtcbiAgICAgICAgICAgIGY1KEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAvIDIpICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIGY1KEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgLyAyKSArXG4gICAgICAgICAgICBcIiBjbVwiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKERvdFJhZGl1cyArIFwiIDAgbVwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXG4gICAgICAgICAgXCJcIiArXG4gICAgICAgICAgICBEb3RSYWRpdXMgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgZGMgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgZGMgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIDAgXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIGNcIlxuICAgICAgICApO1xuICAgICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgICBcIi1cIiArXG4gICAgICAgICAgICBkYyArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICBEb3RSYWRpdXMgK1xuICAgICAgICAgICAgXCIgLVwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICBkYyArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIDAgY1wiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgZGMgK1xuICAgICAgICAgICAgXCIgLVwiICtcbiAgICAgICAgICAgIGRjICtcbiAgICAgICAgICAgIFwiIC1cIiArXG4gICAgICAgICAgICBEb3RSYWRpdXMgK1xuICAgICAgICAgICAgXCIgMCAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIGNcIlxuICAgICAgICApO1xuICAgICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgICBkYyArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIERvdFJhZGl1cyArXG4gICAgICAgICAgICBcIiAtXCIgK1xuICAgICAgICAgICAgZGMgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgRG90UmFkaXVzICtcbiAgICAgICAgICAgIFwiIDAgY1wiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwiZlwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJRXCIpO1xuICAgICAgICB4b2JqLnN0cmVhbSA9IHN0cmVhbS5qb2luKFwiXFxuXCIpO1xuICAgICAgICByZXR1cm4geG9iajtcbiAgICAgIH0sXG4gICAgICBPZmZQdXNoRG93bjogZnVuY3Rpb24oZm9ybU9iamVjdCkge1xuICAgICAgICB2YXIgeG9iaiA9IGNyZWF0ZUZvcm1YT2JqZWN0KGZvcm1PYmplY3QpO1xuICAgICAgICB4b2JqLnNjb3BlID0gZm9ybU9iamVjdC5zY29wZTtcbiAgICAgICAgdmFyIHN0cmVhbSA9IFtdO1xuICAgICAgICB2YXIgRG90UmFkaXVzID1cbiAgICAgICAgICBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgPD1cbiAgICAgICAgICBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpXG4gICAgICAgICAgICA/IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAvIDRcbiAgICAgICAgICAgIDogQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSAvIDQ7XG4gICAgICAgIC8vIFRoZSBCb3JkZXJwYWRkaW5nLi4uXG4gICAgICAgIERvdFJhZGl1cyA9IE51bWJlcigoRG90UmFkaXVzICogMC45KS50b0ZpeGVkKDUpKTtcbiAgICAgICAgLy8gU2F2ZSByZXN1bHRzIGZvciBsYXRlciB1c2U7IG5vIG5lZWQgdG8gd2FzdGVcbiAgICAgICAgLy8gcHJvY2Vzc29yIHRpY2tzIG9uIGRvaW5nIG1hdGhcbiAgICAgICAgdmFyIGsgPSBOdW1iZXIoKERvdFJhZGl1cyAqIDIpLnRvRml4ZWQoNSkpO1xuICAgICAgICB2YXIga2MgPSBOdW1iZXIoKGsgKiBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuQmV6aWVyX0MpLnRvRml4ZWQoNSkpO1xuXG4gICAgICAgIHN0cmVhbS5wdXNoKFwiMC43NDkwMjMgZ1wiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJxXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgICBcIjEgMCAwIDEgXCIgK1xuICAgICAgICAgICAgZjUoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldFdpZHRoKGZvcm1PYmplY3QpIC8gMikgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgZjUoQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KSAvIDIpICtcbiAgICAgICAgICAgIFwiIGNtXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RyZWFtLnB1c2goayArIFwiIDAgbVwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goayArIFwiIFwiICsga2MgKyBcIiBcIiArIGtjICsgXCIgXCIgKyBrICsgXCIgMCBcIiArIGsgKyBcIiBjXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgICBcIi1cIiArIGtjICsgXCIgXCIgKyBrICsgXCIgLVwiICsgayArIFwiIFwiICsga2MgKyBcIiAtXCIgKyBrICsgXCIgMCBjXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXG4gICAgICAgICAgXCItXCIgKyBrICsgXCIgLVwiICsga2MgKyBcIiAtXCIgKyBrYyArIFwiIC1cIiArIGsgKyBcIiAwIC1cIiArIGsgKyBcIiBjXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RyZWFtLnB1c2goa2MgKyBcIiAtXCIgKyBrICsgXCIgXCIgKyBrICsgXCIgLVwiICsga2MgKyBcIiBcIiArIGsgKyBcIiAwIGNcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwiZlwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJRXCIpO1xuICAgICAgICB4b2JqLnN0cmVhbSA9IHN0cmVhbS5qb2luKFwiXFxuXCIpO1xuICAgICAgICByZXR1cm4geG9iajtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgQ3Jvc3M6IHtcbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyB0aGUgQWN0dWFsIEFwcGVhcmFuY2VEaWN0aW9uYXJ5LVJlZmVyZW5jZXNcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgICAqIEBpZ25vcmVcbiAgICAgICAqL1xuICAgICAgY3JlYXRlQXBwZWFyYW5jZVN0cmVhbTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB2YXIgYXBwZWFyYW5jZVN0cmVhbUNvbnRlbnQgPSB7XG4gICAgICAgICAgRDoge1xuICAgICAgICAgICAgT2ZmOiBBY3JvRm9ybUFwcGVhcmFuY2UuUmFkaW9CdXR0b24uQ3Jvc3MuT2ZmUHVzaERvd25cbiAgICAgICAgICB9LFxuICAgICAgICAgIE46IHt9XG4gICAgICAgIH07XG4gICAgICAgIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50Lk5bbmFtZV0gPVxuICAgICAgICAgIEFjcm9Gb3JtQXBwZWFyYW5jZS5SYWRpb0J1dHRvbi5Dcm9zcy5ZZXNOb3JtYWw7XG4gICAgICAgIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50LkRbbmFtZV0gPVxuICAgICAgICAgIEFjcm9Gb3JtQXBwZWFyYW5jZS5SYWRpb0J1dHRvbi5Dcm9zcy5ZZXNQdXNoRG93bjtcbiAgICAgICAgcmV0dXJuIGFwcGVhcmFuY2VTdHJlYW1Db250ZW50O1xuICAgICAgfSxcbiAgICAgIGdldENBOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFwiOFwiO1xuICAgICAgfSxcblxuICAgICAgWWVzTm9ybWFsOiBmdW5jdGlvbihmb3JtT2JqZWN0KSB7XG4gICAgICAgIHZhciB4b2JqID0gY3JlYXRlRm9ybVhPYmplY3QoZm9ybU9iamVjdCk7XG4gICAgICAgIHhvYmouc2NvcGUgPSBmb3JtT2JqZWN0LnNjb3BlO1xuICAgICAgICB2YXIgc3RyZWFtID0gW107XG4gICAgICAgIHZhciBjcm9zcyA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5jYWxjdWxhdGVDcm9zcyhmb3JtT2JqZWN0KTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJxXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgICBcIjEgMSBcIiArXG4gICAgICAgICAgICBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkgLSAyKSArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0KGZvcm1PYmplY3QpIC0gMikgK1xuICAgICAgICAgICAgXCIgcmVcIlxuICAgICAgICApO1xuICAgICAgICBzdHJlYW0ucHVzaChcIldcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwiblwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goZjIoY3Jvc3MueDEueCkgKyBcIiBcIiArIGYyKGNyb3NzLngxLnkpICsgXCIgbVwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goZjIoY3Jvc3MueDIueCkgKyBcIiBcIiArIGYyKGNyb3NzLngyLnkpICsgXCIgbFwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goZjIoY3Jvc3MueDQueCkgKyBcIiBcIiArIGYyKGNyb3NzLng0LnkpICsgXCIgbVwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goZjIoY3Jvc3MueDMueCkgKyBcIiBcIiArIGYyKGNyb3NzLngzLnkpICsgXCIgbFwiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJzXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcIlFcIik7XG4gICAgICAgIHhvYmouc3RyZWFtID0gc3RyZWFtLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIHJldHVybiB4b2JqO1xuICAgICAgfSxcbiAgICAgIFllc1B1c2hEb3duOiBmdW5jdGlvbihmb3JtT2JqZWN0KSB7XG4gICAgICAgIHZhciB4b2JqID0gY3JlYXRlRm9ybVhPYmplY3QoZm9ybU9iamVjdCk7XG4gICAgICAgIHhvYmouc2NvcGUgPSBmb3JtT2JqZWN0LnNjb3BlO1xuICAgICAgICB2YXIgY3Jvc3MgPSBBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuY2FsY3VsYXRlQ3Jvc3MoZm9ybU9iamVjdCk7XG4gICAgICAgIHZhciBzdHJlYW0gPSBbXTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCIwLjc0OTAyMyBnXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgICBcIjAgMCBcIiArXG4gICAgICAgICAgICBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkpICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkpICtcbiAgICAgICAgICAgIFwiIHJlXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJmXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcInFcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFxuICAgICAgICAgIFwiMSAxIFwiICtcbiAgICAgICAgICAgIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KSAtIDIpICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkgLSAyKSArXG4gICAgICAgICAgICBcIiByZVwiXG4gICAgICAgICk7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwiV1wiKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJuXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54MS54KSArIFwiIFwiICsgZjIoY3Jvc3MueDEueSkgKyBcIiBtXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54Mi54KSArIFwiIFwiICsgZjIoY3Jvc3MueDIueSkgKyBcIiBsXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54NC54KSArIFwiIFwiICsgZjIoY3Jvc3MueDQueSkgKyBcIiBtXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChmMihjcm9zcy54My54KSArIFwiIFwiICsgZjIoY3Jvc3MueDMueSkgKyBcIiBsXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcInNcIik7XG4gICAgICAgIHN0cmVhbS5wdXNoKFwiUVwiKTtcbiAgICAgICAgeG9iai5zdHJlYW0gPSBzdHJlYW0uam9pbihcIlxcblwiKTtcbiAgICAgICAgcmV0dXJuIHhvYmo7XG4gICAgICB9LFxuICAgICAgT2ZmUHVzaERvd246IGZ1bmN0aW9uKGZvcm1PYmplY3QpIHtcbiAgICAgICAgdmFyIHhvYmogPSBjcmVhdGVGb3JtWE9iamVjdChmb3JtT2JqZWN0KTtcbiAgICAgICAgeG9iai5zY29wZSA9IGZvcm1PYmplY3Quc2NvcGU7XG4gICAgICAgIHZhciBzdHJlYW0gPSBbXTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCIwLjc0OTAyMyBnXCIpO1xuICAgICAgICBzdHJlYW0ucHVzaChcbiAgICAgICAgICBcIjAgMCBcIiArXG4gICAgICAgICAgICBmMihBY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0V2lkdGgoZm9ybU9iamVjdCkpICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIGYyKEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRIZWlnaHQoZm9ybU9iamVjdCkpICtcbiAgICAgICAgICAgIFwiIHJlXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RyZWFtLnB1c2goXCJmXCIpO1xuICAgICAgICB4b2JqLnN0cmVhbSA9IHN0cmVhbS5qb2luKFwiXFxuXCIpO1xuICAgICAgICByZXR1cm4geG9iajtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHN0YW5kYXJkIEFwcGVhcmFuY2VcbiAgICpcbiAgICogQHJldHVybnMge0Fjcm9Gb3JtWE9iamVjdH1cbiAgICovXG4gIGNyZWF0ZURlZmF1bHRBcHBlYXJhbmNlU3RyZWFtOiBmdW5jdGlvbihmb3JtT2JqZWN0KSB7XG4gICAgLy8gU2V0IEhlbHZldGljYSB0byBTdGFuZGFyZCBGb250IChzaXplOiBhdXRvKVxuICAgIC8vIENvbG9yOiBCbGFja1xuICAgIHZhciBmb250S2V5ID0gZm9ybU9iamVjdC5zY29wZS5pbnRlcm5hbC5nZXRGb250KFxuICAgICAgZm9ybU9iamVjdC5mb250TmFtZSxcbiAgICAgIGZvcm1PYmplY3QuZm9udFN0eWxlXG4gICAgKS5pZDtcbiAgICB2YXIgZW5jb2RlZENvbG9yID0gZm9ybU9iamVjdC5zY29wZS5fX3ByaXZhdGVfXy5lbmNvZGVDb2xvclN0cmluZyhcbiAgICAgIGZvcm1PYmplY3QuY29sb3JcbiAgICApO1xuICAgIHZhciBmb250U2l6ZSA9IGZvcm1PYmplY3QuZm9udFNpemU7XG4gICAgdmFyIHJlc3VsdCA9IFwiL1wiICsgZm9udEtleSArIFwiIFwiICsgZm9udFNpemUgKyBcIiBUZiBcIiArIGVuY29kZWRDb2xvcjtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuXG5BY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwgPSB7XG4gIEJlemllcl9DOiAwLjU1MTkxNTAyNDQ5NCxcblxuICBjYWxjdWxhdGVDcm9zczogZnVuY3Rpb24oZm9ybU9iamVjdCkge1xuICAgIHZhciB3aWR0aCA9IEFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aChmb3JtT2JqZWN0KTtcbiAgICB2YXIgaGVpZ2h0ID0gQWNyb0Zvcm1BcHBlYXJhbmNlLmludGVybmFsLmdldEhlaWdodChmb3JtT2JqZWN0KTtcbiAgICB2YXIgYSA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGNyb3NzID0ge1xuICAgICAgeDE6IHtcbiAgICAgICAgLy8gdXBwZXJMZWZ0XG4gICAgICAgIHg6ICh3aWR0aCAtIGEpIC8gMixcbiAgICAgICAgeTogKGhlaWdodCAtIGEpIC8gMiArIGEgLy8gaGVpZ2h0IC0gYm9yZGVyUGFkZGluZ1xuICAgICAgfSxcbiAgICAgIHgyOiB7XG4gICAgICAgIC8vIGxvd2VyUmlnaHRcbiAgICAgICAgeDogKHdpZHRoIC0gYSkgLyAyICsgYSxcbiAgICAgICAgeTogKGhlaWdodCAtIGEpIC8gMiAvLyBib3JkZXJQYWRkaW5nXG4gICAgICB9LFxuICAgICAgeDM6IHtcbiAgICAgICAgLy8gbG93ZXJMZWZ0XG4gICAgICAgIHg6ICh3aWR0aCAtIGEpIC8gMixcbiAgICAgICAgeTogKGhlaWdodCAtIGEpIC8gMiAvLyBib3JkZXJQYWRkaW5nXG4gICAgICB9LFxuICAgICAgeDQ6IHtcbiAgICAgICAgLy8gdXBwZXJSaWdodFxuICAgICAgICB4OiAod2lkdGggLSBhKSAvIDIgKyBhLFxuICAgICAgICB5OiAoaGVpZ2h0IC0gYSkgLyAyICsgYSAvLyBoZWlnaHQgLSBib3JkZXJQYWRkaW5nXG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBjcm9zcztcbiAgfVxufTtcbkFjcm9Gb3JtQXBwZWFyYW5jZS5pbnRlcm5hbC5nZXRXaWR0aCA9IGZ1bmN0aW9uKGZvcm1PYmplY3QpIHtcbiAgdmFyIHJlc3VsdCA9IDA7XG4gIGlmICh0eXBlb2YgZm9ybU9iamVjdCA9PT0gXCJvYmplY3RcIikge1xuICAgIHJlc3VsdCA9IHNjYWxlKGZvcm1PYmplY3QuUmVjdFsyXSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5BY3JvRm9ybUFwcGVhcmFuY2UuaW50ZXJuYWwuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24oZm9ybU9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0gMDtcbiAgaWYgKHR5cGVvZiBmb3JtT2JqZWN0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmVzdWx0ID0gc2NhbGUoZm9ybU9iamVjdC5SZWN0WzNdKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gUHVibGljOlxuXG4vKipcbiAqIEFkZCBhbiBBY3JvRm9ybS1GaWVsZCB0byB0aGUganNQREYtaW5zdGFuY2VcbiAqXG4gKiBAbmFtZSBhZGRGaWVsZFxuICogQGZ1bmN0aW9uXG4gKiBAaW5zdGFuY2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZE9iamVjdFxuICogQHJldHVybnMge2pzUERGfVxuICovXG52YXIgYWRkRmllbGQgPSAoanNQREZBUEkuYWRkRmllbGQgPSBmdW5jdGlvbihmaWVsZE9iamVjdCkge1xuICBpbml0aWFsaXplQWNyb0Zvcm0odGhpcywgZmllbGRPYmplY3QpO1xuXG4gIGlmIChmaWVsZE9iamVjdCBpbnN0YW5jZW9mIEFjcm9Gb3JtRmllbGQpIHtcbiAgICBwdXRGb3JtKGZpZWxkT2JqZWN0KTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byBqc1BERi5hZGRGaWVsZC5cIik7XG4gIH1cbiAgZmllbGRPYmplY3QucGFnZSA9IGZpZWxkT2JqZWN0LnNjb3BlLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXI7XG4gIHJldHVybiB0aGlzO1xufSk7XG5cbmpzUERGQVBJLkFjcm9Gb3JtQ2hvaWNlRmllbGQgPSBBY3JvRm9ybUNob2ljZUZpZWxkO1xuanNQREZBUEkuQWNyb0Zvcm1MaXN0Qm94ID0gQWNyb0Zvcm1MaXN0Qm94O1xuanNQREZBUEkuQWNyb0Zvcm1Db21ib0JveCA9IEFjcm9Gb3JtQ29tYm9Cb3g7XG5qc1BERkFQSS5BY3JvRm9ybUVkaXRCb3ggPSBBY3JvRm9ybUVkaXRCb3g7XG5qc1BERkFQSS5BY3JvRm9ybUJ1dHRvbiA9IEFjcm9Gb3JtQnV0dG9uO1xuanNQREZBUEkuQWNyb0Zvcm1QdXNoQnV0dG9uID0gQWNyb0Zvcm1QdXNoQnV0dG9uO1xuanNQREZBUEkuQWNyb0Zvcm1SYWRpb0J1dHRvbiA9IEFjcm9Gb3JtUmFkaW9CdXR0b247XG5qc1BERkFQSS5BY3JvRm9ybUNoZWNrQm94ID0gQWNyb0Zvcm1DaGVja0JveDtcbmpzUERGQVBJLkFjcm9Gb3JtVGV4dEZpZWxkID0gQWNyb0Zvcm1UZXh0RmllbGQ7XG5qc1BERkFQSS5BY3JvRm9ybVBhc3N3b3JkRmllbGQgPSBBY3JvRm9ybVBhc3N3b3JkRmllbGQ7XG5qc1BERkFQSS5BY3JvRm9ybUFwcGVhcmFuY2UgPSBBY3JvRm9ybUFwcGVhcmFuY2U7XG5cbmpzUERGQVBJLkFjcm9Gb3JtID0ge1xuICBDaG9pY2VGaWVsZDogQWNyb0Zvcm1DaG9pY2VGaWVsZCxcbiAgTGlzdEJveDogQWNyb0Zvcm1MaXN0Qm94LFxuICBDb21ib0JveDogQWNyb0Zvcm1Db21ib0JveCxcbiAgRWRpdEJveDogQWNyb0Zvcm1FZGl0Qm94LFxuICBCdXR0b246IEFjcm9Gb3JtQnV0dG9uLFxuICBQdXNoQnV0dG9uOiBBY3JvRm9ybVB1c2hCdXR0b24sXG4gIFJhZGlvQnV0dG9uOiBBY3JvRm9ybVJhZGlvQnV0dG9uLFxuICBDaGVja0JveDogQWNyb0Zvcm1DaGVja0JveCxcbiAgVGV4dEZpZWxkOiBBY3JvRm9ybVRleHRGaWVsZCxcbiAgUGFzc3dvcmRGaWVsZDogQWNyb0Zvcm1QYXNzd29yZEZpZWxkLFxuICBBcHBlYXJhbmNlOiBBY3JvRm9ybUFwcGVhcmFuY2Vcbn07XG5cbmpzUERGLkFjcm9Gb3JtID0ge1xuICBDaG9pY2VGaWVsZDogQWNyb0Zvcm1DaG9pY2VGaWVsZCxcbiAgTGlzdEJveDogQWNyb0Zvcm1MaXN0Qm94LFxuICBDb21ib0JveDogQWNyb0Zvcm1Db21ib0JveCxcbiAgRWRpdEJveDogQWNyb0Zvcm1FZGl0Qm94LFxuICBCdXR0b246IEFjcm9Gb3JtQnV0dG9uLFxuICBQdXNoQnV0dG9uOiBBY3JvRm9ybVB1c2hCdXR0b24sXG4gIFJhZGlvQnV0dG9uOiBBY3JvRm9ybVJhZGlvQnV0dG9uLFxuICBDaGVja0JveDogQWNyb0Zvcm1DaGVja0JveCxcbiAgVGV4dEZpZWxkOiBBY3JvRm9ybVRleHRGaWVsZCxcbiAgUGFzc3dvcmRGaWVsZDogQWNyb0Zvcm1QYXNzd29yZEZpZWxkLFxuICBBcHBlYXJhbmNlOiBBY3JvRm9ybUFwcGVhcmFuY2Vcbn07XG5cbnZhciBBY3JvRm9ybSA9IGpzUERGLkFjcm9Gb3JtO1xuXG5leHBvcnQge1xuICBBY3JvRm9ybSxcbiAgQWNyb0Zvcm1DaG9pY2VGaWVsZCxcbiAgQWNyb0Zvcm1MaXN0Qm94LFxuICBBY3JvRm9ybUNvbWJvQm94LFxuICBBY3JvRm9ybUVkaXRCb3gsXG4gIEFjcm9Gb3JtQnV0dG9uLFxuICBBY3JvRm9ybVB1c2hCdXR0b24sXG4gIEFjcm9Gb3JtUmFkaW9CdXR0b24sXG4gIEFjcm9Gb3JtQ2hlY2tCb3gsXG4gIEFjcm9Gb3JtVGV4dEZpZWxkLFxuICBBY3JvRm9ybVBhc3N3b3JkRmllbGQsXG4gIEFjcm9Gb3JtQXBwZWFyYW5jZVxufTtcbiIsImZ1bmN0aW9uIHRvTG9va3VwKGFycikge1xuICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbihsb29rdXAsIG5hbWUsIGluZGV4KSB7XG4gICAgbG9va3VwW25hbWVdID0gaW5kZXg7XG5cbiAgICByZXR1cm4gbG9va3VwO1xuICB9LCB7fSk7XG59XG5cbnZhciBmb250U3R5bGVPcmRlciA9IHtcbiAgaXRhbGljOiBbXCJpdGFsaWNcIiwgXCJvYmxpcXVlXCIsIFwibm9ybWFsXCJdLFxuICBvYmxpcXVlOiBbXCJvYmxpcXVlXCIsIFwiaXRhbGljXCIsIFwibm9ybWFsXCJdLFxuICBub3JtYWw6IFtcIm5vcm1hbFwiLCBcIm9ibGlxdWVcIiwgXCJpdGFsaWNcIl1cbn07XG5cbnZhciBmb250U3RyZXRjaE9yZGVyID0gW1xuICBcInVsdHJhLWNvbmRlbnNlZFwiLFxuICBcImV4dHJhLWNvbmRlbnNlZFwiLFxuICBcImNvbmRlbnNlZFwiLFxuICBcInNlbWktY29uZGVuc2VkXCIsXG4gIFwibm9ybWFsXCIsXG4gIFwic2VtaS1leHBhbmRlZFwiLFxuICBcImV4cGFuZGVkXCIsXG4gIFwiZXh0cmEtZXhwYW5kZWRcIixcbiAgXCJ1bHRyYS1leHBhbmRlZFwiXG5dO1xuXG4vLyBGb3IgYSBnaXZlbiBmb250LXN0cmV0Y2ggdmFsdWUsIHdlIG5lZWQgdG8ga25vdyB3aGVyZSB0byBzdGFydCBvdXIgc2VhcmNoXG4vLyBmcm9tIGluIHRoZSBmb250U3RyZXRjaE9yZGVyIGxpc3QuXG52YXIgZm9udFN0cmV0Y2hMb29rdXAgPSB0b0xvb2t1cChmb250U3RyZXRjaE9yZGVyKTtcblxudmFyIGZvbnRXZWlnaHRzID0gWzEwMCwgMjAwLCAzMDAsIDQwMCwgNTAwLCA2MDAsIDcwMCwgODAwLCA5MDBdO1xudmFyIGZvbnRXZWlnaHRzTG9va3VwID0gdG9Mb29rdXAoZm9udFdlaWdodHMpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVGb250U3RyZXRjaChzdHJldGNoKSB7XG4gIHN0cmV0Y2ggPSBzdHJldGNoIHx8IFwibm9ybWFsXCI7XG5cbiAgcmV0dXJuIHR5cGVvZiBmb250U3RyZXRjaExvb2t1cFtzdHJldGNoXSA9PT0gXCJudW1iZXJcIiA/IHN0cmV0Y2ggOiBcIm5vcm1hbFwiO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVGb250U3R5bGUoc3R5bGUpIHtcbiAgc3R5bGUgPSBzdHlsZSB8fCBcIm5vcm1hbFwiO1xuXG4gIHJldHVybiBmb250U3R5bGVPcmRlcltzdHlsZV0gPyBzdHlsZSA6IFwibm9ybWFsXCI7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZvbnRXZWlnaHQod2VpZ2h0KSB7XG4gIGlmICghd2VpZ2h0KSB7XG4gICAgcmV0dXJuIDQwMDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygd2VpZ2h0ID09PSBcIm51bWJlclwiKSB7XG4gICAgLy8gSWdub3JlIHZhbHVlcyB3aGljaCBhcmVuJ3QgdmFsaWQgZm9udC13ZWlnaHRzLlxuICAgIHJldHVybiB3ZWlnaHQgPj0gMTAwICYmIHdlaWdodCA8PSA5MDAgJiYgd2VpZ2h0ICUgMTAwID09PSAwID8gd2VpZ2h0IDogNDAwO1xuICB9XG5cbiAgaWYgKC9eXFxkMDAkLy50ZXN0KHdlaWdodCkpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQod2VpZ2h0KTtcbiAgfVxuXG4gIHN3aXRjaCAod2VpZ2h0KSB7XG4gICAgY2FzZSBcImJvbGRcIjpcbiAgICAgIHJldHVybiA3MDA7XG5cbiAgICBjYXNlIFwibm9ybWFsXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiA0MDA7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUZvbnRGYWNlKGZvbnRGYWNlKSB7XG4gIHZhciBmYW1pbHkgPSBmb250RmFjZS5mYW1pbHkucmVwbGFjZSgvXCJ8Jy9nLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuXG4gIHZhciBzdHlsZSA9IG5vcm1hbGl6ZUZvbnRTdHlsZShmb250RmFjZS5zdHlsZSk7XG4gIHZhciB3ZWlnaHQgPSBub3JtYWxpemVGb250V2VpZ2h0KGZvbnRGYWNlLndlaWdodCk7XG4gIHZhciBzdHJldGNoID0gbm9ybWFsaXplRm9udFN0cmV0Y2goZm9udEZhY2Uuc3RyZXRjaCk7XG5cbiAgcmV0dXJuIHtcbiAgICBmYW1pbHk6IGZhbWlseSxcbiAgICBzdHlsZTogc3R5bGUsXG4gICAgd2VpZ2h0OiB3ZWlnaHQsXG4gICAgc3RyZXRjaDogc3RyZXRjaCxcbiAgICBzcmM6IGZvbnRGYWNlLnNyYyB8fCBbXSxcblxuICAgIC8vIFRoZSByZWYgcHJvcGVydHkgbWFwcyB0aGlzIGZvbnQtZmFjZSB0byB0aGUgZm9udFxuICAgIC8vIGFkZGVkIGJ5IHRoZSAuYWRkRm9udCgpIG1ldGhvZC5cbiAgICByZWY6IGZvbnRGYWNlLnJlZiB8fCB7XG4gICAgICBuYW1lOiBmYW1pbHksXG4gICAgICBzdHlsZTogW3N0cmV0Y2gsIHN0eWxlLCB3ZWlnaHRdLmpvaW4oXCIgXCIpXG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFR1cm5zIGEgbGlzdCBvZiBmb250LWZhY2VzIGludG8gYSBtYXAsIGZvciBlYXNpZXIgbG9va3VwIHdoZW4gcmVzb2x2aW5nXG4gKiBmb250cy5cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZvbnRGYWNlTWFwKGZvbnRGYWNlcykge1xuICB2YXIgbWFwID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb250RmFjZXMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZUZvbnRGYWNlKGZvbnRGYWNlc1tpXSk7XG5cbiAgICB2YXIgbmFtZSA9IG5vcm1hbGl6ZWQuZmFtaWx5O1xuICAgIHZhciBzdHJldGNoID0gbm9ybWFsaXplZC5zdHJldGNoO1xuICAgIHZhciBzdHlsZSA9IG5vcm1hbGl6ZWQuc3R5bGU7XG4gICAgdmFyIHdlaWdodCA9IG5vcm1hbGl6ZWQud2VpZ2h0O1xuXG4gICAgbWFwW25hbWVdID0gbWFwW25hbWVdIHx8IHt9O1xuXG4gICAgbWFwW25hbWVdW3N0cmV0Y2hdID0gbWFwW25hbWVdW3N0cmV0Y2hdIHx8IHt9O1xuICAgIG1hcFtuYW1lXVtzdHJldGNoXVtzdHlsZV0gPSBtYXBbbmFtZV1bc3RyZXRjaF1bc3R5bGVdIHx8IHt9O1xuICAgIG1hcFtuYW1lXVtzdHJldGNoXVtzdHlsZV1bd2VpZ2h0XSA9IG5vcm1hbGl6ZWQ7XG4gIH1cblxuICByZXR1cm4gbWFwO1xufVxuXG4vKipcbiAqIFNlYXJjaGVzIGEgbWFwIG9mIHN0cmV0Y2hlcywgd2VpZ2h0cywgZXRjLiBpbiB0aGUgZ2l2ZW4gZGlyZWN0aW9uIGFuZFxuICogdGhlbiwgaWYgbm8gbWF0Y2ggaGFzIGJlZW4gZm91bmQsIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIGFueT59IG1hdGNoaW5nU2V0IEEgbWFwIG9mIHRoZSB2YXJpb3VzIGZvbnQgdmFyaWF0aW9ucy5cbiAqIEBwYXJhbSB7YW55W119IG9yZGVyIFRoZSBvcmRlciBvZiB0aGUgZGlmZmVyZW50IHZhcmlhdGlvbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXZvdCBUaGUgc3RhcnRpbmcgcG9pbnQgb2YgdGhlIHNlYXJjaCBpbiB0aGUgb3JkZXIgbGlzdC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXIgVGhlIGluaXRpYWwgZGlyZWN0aW9uIG9mIHRoZSBzZWFyY2ggKGRlc2MgPSAtMSwgYXNjID0gMSlcbiAqIEBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2VhcmNoRnJvbVBpdm90KG1hdGNoaW5nU2V0LCBvcmRlciwgcGl2b3QsIGRpcikge1xuICB2YXIgaTtcblxuICBmb3IgKGkgPSBwaXZvdDsgaSA+PSAwICYmIGkgPCBvcmRlci5sZW5ndGg7IGkgKz0gZGlyKSB7XG4gICAgaWYgKG1hdGNoaW5nU2V0W29yZGVyW2ldXSkge1xuICAgICAgcmV0dXJuIG1hdGNoaW5nU2V0W29yZGVyW2ldXTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGkgPSBwaXZvdDsgaSA+PSAwICYmIGkgPCBvcmRlci5sZW5ndGg7IGkgLT0gZGlyKSB7XG4gICAgaWYgKG1hdGNoaW5nU2V0W29yZGVyW2ldXSkge1xuICAgICAgcmV0dXJuIG1hdGNoaW5nU2V0W29yZGVyW2ldXTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUZvbnRTdHJldGNoKHN0cmV0Y2gsIG1hdGNoaW5nU2V0KSB7XG4gIGlmIChtYXRjaGluZ1NldFtzdHJldGNoXSkge1xuICAgIHJldHVybiBtYXRjaGluZ1NldFtzdHJldGNoXTtcbiAgfVxuXG4gIHZhciBwaXZvdCA9IGZvbnRTdHJldGNoTG9va3VwW3N0cmV0Y2hdO1xuXG4gIC8vIElmIHRoZSBmb250LXN0cmV0Y2ggdmFsdWUgaXMgbm9ybWFsIG9yIG1vcmUgY29uZGVuc2VkLCB3ZSB3YW50IHRvXG4gIC8vIHN0YXJ0IHdpdGggYSBkZXNjZW5kaW5nIHNlYXJjaCwgb3RoZXJ3aXNlIHdlIHNob3VsZCBkbyBhc2NlbmRpbmcuXG4gIHZhciBkaXIgPSBwaXZvdCA8PSBmb250U3RyZXRjaExvb2t1cFtcIm5vcm1hbFwiXSA/IC0xIDogMTtcbiAgdmFyIG1hdGNoID0gc2VhcmNoRnJvbVBpdm90KG1hdGNoaW5nU2V0LCBmb250U3RyZXRjaE9yZGVyLCBwaXZvdCwgZGlyKTtcblxuICBpZiAoIW1hdGNoKSB7XG4gICAgLy8gU2luY2UgYSBmb250LWZhbWlseSBjYW5ub3QgZXhpc3Qgd2l0aG91dCBoYXZpbmcgYXQgbGVhc3Qgb25lIHN0cmV0Y2ggdmFsdWVcbiAgICAvLyB3ZSBzaG91bGQgbmV2ZXIgcmVhY2ggdGhpcyBwb2ludC5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkNvdWxkIG5vdCBmaW5kIGEgbWF0Y2hpbmcgZm9udC1zdHJldGNoIHZhbHVlIGZvciBcIiArIHN0cmV0Y2hcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG1hdGNoO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlRm9udFN0eWxlKGZvbnRTdHlsZSwgbWF0Y2hpbmdTZXQpIHtcbiAgaWYgKG1hdGNoaW5nU2V0W2ZvbnRTdHlsZV0pIHtcbiAgICByZXR1cm4gbWF0Y2hpbmdTZXRbZm9udFN0eWxlXTtcbiAgfVxuXG4gIHZhciBvcmRlcmluZyA9IGZvbnRTdHlsZU9yZGVyW2ZvbnRTdHlsZV07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlcmluZy5sZW5ndGg7ICsraSkge1xuICAgIGlmIChtYXRjaGluZ1NldFtvcmRlcmluZ1tpXV0pIHtcbiAgICAgIHJldHVybiBtYXRjaGluZ1NldFtvcmRlcmluZ1tpXV07XG4gICAgfVxuICB9XG5cbiAgLy8gU2luY2UgYSBmb250LWZhbWlseSBjYW5ub3QgZXhpc3Qgd2l0aG91dCBoYXZpbmcgYXQgbGVhc3Qgb25lIHN0eWxlIHZhbHVlXG4gIC8vIHdlIHNob3VsZCBuZXZlciByZWFjaCB0aGlzIHBvaW50LlxuICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBhIG1hdGNoaW5nIGZvbnQtc3R5bGUgZm9yIFwiICsgZm9udFN0eWxlKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUZvbnRXZWlnaHQod2VpZ2h0LCBtYXRjaGluZ1NldCkge1xuICBpZiAobWF0Y2hpbmdTZXRbd2VpZ2h0XSkge1xuICAgIHJldHVybiBtYXRjaGluZ1NldFt3ZWlnaHRdO1xuICB9XG5cbiAgaWYgKHdlaWdodCA9PT0gNDAwICYmIG1hdGNoaW5nU2V0WzUwMF0pIHtcbiAgICByZXR1cm4gbWF0Y2hpbmdTZXRbNTAwXTtcbiAgfVxuXG4gIGlmICh3ZWlnaHQgPT09IDUwMCAmJiBtYXRjaGluZ1NldFs0MDBdKSB7XG4gICAgcmV0dXJuIG1hdGNoaW5nU2V0WzQwMF07XG4gIH1cblxuICB2YXIgcGl2b3QgPSBmb250V2VpZ2h0c0xvb2t1cFt3ZWlnaHRdO1xuXG4gIC8vIElmIHRoZSBmb250LXN0cmV0Y2ggdmFsdWUgaXMgbm9ybWFsIG9yIG1vcmUgY29uZGVuc2VkLCB3ZSB3YW50IHRvXG4gIC8vIHN0YXJ0IHdpdGggYSBkZXNjZW5kaW5nIHNlYXJjaCwgb3RoZXJ3aXNlIHdlIHNob3VsZCBkbyBhc2NlbmRpbmcuXG4gIHZhciBkaXIgPSB3ZWlnaHQgPCA0MDAgPyAtMSA6IDE7XG4gIHZhciBtYXRjaCA9IHNlYXJjaEZyb21QaXZvdChtYXRjaGluZ1NldCwgZm9udFdlaWdodHMsIHBpdm90LCBkaXIpO1xuXG4gIGlmICghbWF0Y2gpIHtcbiAgICAvLyBTaW5jZSBhIGZvbnQtZmFtaWx5IGNhbm5vdCBleGlzdCB3aXRob3V0IGhhdmluZyBhdCBsZWFzdCBvbmUgc3RyZXRjaCB2YWx1ZVxuICAgIC8vIHdlIHNob3VsZCBuZXZlciByZWFjaCB0aGlzIHBvaW50LlxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiQ291bGQgbm90IGZpbmQgYSBtYXRjaGluZyBmb250LXdlaWdodCBmb3IgdmFsdWUgXCIgKyB3ZWlnaHRcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG1hdGNoO1xufVxuXG52YXIgZGVmYXVsdEdlbmVyaWNGb250RmFtaWxpZXMgPSB7XG4gIFwic2Fucy1zZXJpZlwiOiBcImhlbHZldGljYVwiLFxuICBmaXhlZDogXCJjb3VyaWVyXCIsXG4gIG1vbm9zcGFjZTogXCJjb3VyaWVyXCIsXG4gIHRlcm1pbmFsOiBcImNvdXJpZXJcIixcbiAgY3Vyc2l2ZTogXCJ0aW1lc1wiLFxuICBmYW50YXN5OiBcInRpbWVzXCIsXG4gIHNlcmlmOiBcInRpbWVzXCJcbn07XG5cbnZhciBzeXN0ZW1Gb250cyA9IHtcbiAgY2FwdGlvbjogXCJ0aW1lc1wiLFxuICBpY29uOiBcInRpbWVzXCIsXG4gIG1lbnU6IFwidGltZXNcIixcbiAgXCJtZXNzYWdlLWJveFwiOiBcInRpbWVzXCIsXG4gIFwic21hbGwtY2FwdGlvblwiOiBcInRpbWVzXCIsXG4gIFwic3RhdHVzLWJhclwiOiBcInRpbWVzXCJcbn07XG5cbmZ1bmN0aW9uIHJ1bGVUb1N0cmluZyhydWxlKSB7XG4gIHJldHVybiBbcnVsZS5zdHJldGNoLCBydWxlLnN0eWxlLCBydWxlLndlaWdodCwgcnVsZS5mYW1pbHldLmpvaW4oXCIgXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUZvbnRGYWNlKGZvbnRGYWNlTWFwLCBydWxlcywgb3B0cykge1xuICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICB2YXIgZGVmYXVsdEZvbnRGYW1pbHkgPSBvcHRzLmRlZmF1bHRGb250RmFtaWx5IHx8IFwidGltZXNcIjtcbiAgdmFyIGdlbmVyaWNGb250RmFtaWxpZXMgPSBPYmplY3QuYXNzaWduKFxuICAgIHt9LFxuICAgIGRlZmF1bHRHZW5lcmljRm9udEZhbWlsaWVzLFxuICAgIG9wdHMuZ2VuZXJpY0ZvbnRGYW1pbGllcyB8fCB7fVxuICApO1xuXG4gIHZhciBydWxlID0gbnVsbDtcbiAgdmFyIG1hdGNoZXMgPSBudWxsO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyArK2kpIHtcbiAgICBydWxlID0gbm9ybWFsaXplRm9udEZhY2UocnVsZXNbaV0pO1xuXG4gICAgaWYgKGdlbmVyaWNGb250RmFtaWxpZXNbcnVsZS5mYW1pbHldKSB7XG4gICAgICBydWxlLmZhbWlseSA9IGdlbmVyaWNGb250RmFtaWxpZXNbcnVsZS5mYW1pbHldO1xuICAgIH1cblxuICAgIGlmIChmb250RmFjZU1hcC5oYXNPd25Qcm9wZXJ0eShydWxlLmZhbWlseSkpIHtcbiAgICAgIG1hdGNoZXMgPSBmb250RmFjZU1hcFtydWxlLmZhbWlseV07XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFsd2F5cyBmYWxsYmFjayB0byBhIGtub3duIGZvbnQgZmFtaWx5LlxuICBtYXRjaGVzID0gbWF0Y2hlcyB8fCBmb250RmFjZU1hcFtkZWZhdWx0Rm9udEZhbWlseV07XG5cbiAgaWYgKCFtYXRjaGVzKSB7XG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBzaG91bGQgZGVmaW5pdGllbHkgaGF2ZSBhIGZvbnQgZmFtaWx5LCBidXQgaWYgd2VcbiAgICAvLyBkb24ndCB0aGVyZSBpcyBzb21ldGhpbmcgd3Jvbmcgd2l0aCBvdXIgY29uZmlndXJhdGlvblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiQ291bGQgbm90IGZpbmQgYSBmb250LWZhbWlseSBmb3IgdGhlIHJ1bGUgJ1wiICtcbiAgICAgICAgcnVsZVRvU3RyaW5nKHJ1bGUpICtcbiAgICAgICAgXCInIGFuZCBkZWZhdWx0IGZhbWlseSAnXCIgK1xuICAgICAgICBkZWZhdWx0Rm9udEZhbWlseSArXG4gICAgICAgIFwiJy5cIlxuICAgICk7XG4gIH1cblxuICBtYXRjaGVzID0gcmVzb2x2ZUZvbnRTdHJldGNoKHJ1bGUuc3RyZXRjaCwgbWF0Y2hlcyk7XG4gIG1hdGNoZXMgPSByZXNvbHZlRm9udFN0eWxlKHJ1bGUuc3R5bGUsIG1hdGNoZXMpO1xuICBtYXRjaGVzID0gcmVzb2x2ZUZvbnRXZWlnaHQocnVsZS53ZWlnaHQsIG1hdGNoZXMpO1xuXG4gIGlmICghbWF0Y2hlcykge1xuICAgIC8vIFdlIHNob3VsZCd2ZSBmb3VudFxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiRmFpbGVkIHRvIHJlc29sdmUgYSBmb250IGZvciB0aGUgcnVsZSAnXCIgKyBydWxlVG9TdHJpbmcocnVsZSkgKyBcIicuXCJcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG1hdGNoZXM7XG59XG5cbi8qKlxuICogQnVpbGRzIGEgc3R5bGUgaWQgZm9yIHVzZSB3aXRoIHRoZSBhZGRGb250KCkgbWV0aG9kLlxuICogQHBhcmFtIHtGb250RmFjZX0gZm9udFxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3R5bGVOYW1lKGZvbnQpIHtcbiAgcmV0dXJuIFtmb250LndlaWdodCwgZm9udC5zdHlsZSwgZm9udC5zdHJldGNoXS5qb2luKFwiIFwiKTtcbn1cblxuZnVuY3Rpb24gZWF0V2hpdGVTcGFjZShpbnB1dCkge1xuICByZXR1cm4gaW5wdXQudHJpbUxlZnQoKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VRdW90ZWRGb250RmFtaWx5KGlucHV0LCBxdW90ZSkge1xuICB2YXIgaW5kZXggPSAwO1xuXG4gIHdoaWxlIChpbmRleCA8IGlucHV0Lmxlbmd0aCkge1xuICAgIHZhciBjdXJyZW50ID0gaW5wdXQuY2hhckF0KGluZGV4KTtcblxuICAgIGlmIChjdXJyZW50ID09PSBxdW90ZSkge1xuICAgICAgcmV0dXJuIFtpbnB1dC5zdWJzdHJpbmcoMCwgaW5kZXgpLCBpbnB1dC5zdWJzdHJpbmcoaW5kZXggKyAxKV07XG4gICAgfVxuXG4gICAgaW5kZXggKz0gMTtcbiAgfVxuXG4gIC8vIFVuZXhwZWN0ZWQgZW5kIG9mIGlucHV0XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBwYXJzZU5vblF1b3RlZEZvbnRGYW1pbHkoaW5wdXQpIHtcbiAgLy8gSXQgaW1wbGVtZW50cyBwYXJ0IG9mIHRoZSBpZGVudGlmaWVyIHBhcnNlciBoZXJlOiBodHRwczovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI3ZhbHVlLWRlZi1pZGVudGlmaWVyXG4gIC8vXG4gIC8vIE5PVEU6IFRoaXMgcGFyc2VyIHByZXR0eSBtdWNoIGlnbm9yZXMgZXNjYXBlZCBpZGVudGlmaWVycyBhbmQgdGhhdCB0aGVyZSBpcyBhIHRoaW5nIGNhbGxlZCB1bmljb2RlLlxuICAvL1xuICAvLyBCcmVha2Rvd24gb2YgcmVnZXhwOlxuICAvLyAtW2Etel9dICAgICAtIHdoZW4gaWRlbnRpZmllciBzdGFydHMgd2l0aCBhIGh5cGhlbiwgeW91J3JlIG5vdCBhbGxvd2VkIHRvIGhhdmUgYW5vdGhlciBoeXBoZW4gb3IgYSBkaWdpdFxuICAvLyBbYS16X10gICAgICAtIGFsbG93IGEteiBhbmQgdW5kZXJzY29yZSBhdCBiZWdpbm5pbmcgb2YgaW5wdXRcbiAgLy8gW2EtejAtOV8tXSogLSBhZnRlciB0aGF0LCBhbnl0aGluZyBnb2VzXG4gIHZhciBtYXRjaCA9IGlucHV0Lm1hdGNoKC9eKC1bYS16X118W2Etel9dKVthLXowLTlfLV0qL2kpO1xuXG4gIC8vIG5vbiBxdW90ZWQgdmFsdWUgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzXG4gIGlmIChtYXRjaCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIFttYXRjaFswXSwgaW5wdXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCldO1xufVxuXG52YXIgZGVmYXVsdEZvbnQgPSBbXCJ0aW1lc1wiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRm9udEZhbWlseShpbnB1dCkge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBjaCwgcGFyc2VkO1xuICB2YXIgcmVtYWluaW5nID0gaW5wdXQudHJpbSgpO1xuXG4gIGlmIChyZW1haW5pbmcgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gZGVmYXVsdEZvbnQ7XG4gIH1cblxuICBpZiAocmVtYWluaW5nIGluIHN5c3RlbUZvbnRzKSB7XG4gICAgcmV0dXJuIFtzeXN0ZW1Gb250c1tyZW1haW5pbmddXTtcbiAgfVxuXG4gIHdoaWxlIChyZW1haW5pbmcgIT09IFwiXCIpIHtcbiAgICBwYXJzZWQgPSBudWxsO1xuICAgIHJlbWFpbmluZyA9IGVhdFdoaXRlU3BhY2UocmVtYWluaW5nKTtcbiAgICBjaCA9IHJlbWFpbmluZy5jaGFyQXQoMCk7XG5cbiAgICBzd2l0Y2ggKGNoKSB7XG4gICAgICBjYXNlICdcIic6XG4gICAgICBjYXNlIFwiJ1wiOlxuICAgICAgICBwYXJzZWQgPSBwYXJzZVF1b3RlZEZvbnRGYW1pbHkocmVtYWluaW5nLnN1YnN0cmluZygxKSwgY2gpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcGFyc2VkID0gcGFyc2VOb25RdW90ZWRGb250RmFtaWx5KHJlbWFpbmluZyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0Rm9udDtcbiAgICB9XG5cbiAgICByZXN1bHQucHVzaChwYXJzZWRbMF0pO1xuXG4gICAgcmVtYWluaW5nID0gZWF0V2hpdGVTcGFjZShwYXJzZWRbMV0pO1xuXG4gICAgLy8gV2UgZXhwZWN0IGVuZCBvZiBpbnB1dCBvciBhIGNvbW1hIHNlcGFyYXRvciBoZXJlXG4gICAgaWYgKHJlbWFpbmluZyAhPT0gXCJcIiAmJiByZW1haW5pbmcuY2hhckF0KDApICE9PSBcIixcIikge1xuICAgICAgcmV0dXJuIGRlZmF1bHRGb250O1xuICAgIH1cblxuICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5yZXBsYWNlKC9eLC8sIFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qKiBAbGljZW5zZVxuICoganNQREYgYWRkSW1hZ2UgcGx1Z2luXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSmFzb24gU2llZmtlbiwgaHR0cHM6Ly9naXRodWIuY29tL3NpZWZrZW5qL1xuICogICAgICAgICAgICAgICAyMDEzIENocmlzIERvd2xpbmcsIGh0dHBzOi8vZ2l0aHViLmNvbS9naW5nZXJjaHJpc1xuICogICAgICAgICAgICAgICAyMDEzIFRyaW5oIEhvLCBodHRwczovL2dpdGh1Yi5jb20vaW5lZWRmYXRcbiAqICAgICAgICAgICAgICAgMjAxMyBFZHdpbiBBbGVqYW5kcm8gUGVyZXosIGh0dHBzOi8vZ2l0aHViLmNvbS9lYXBhcmFuZ29cbiAqICAgICAgICAgICAgICAgMjAxMyBOb3JhaCBTbWl0aCwgaHR0cHM6Ly9naXRodWIuY29tL2J1cm5idXJucm9ja2V0XG4gKiAgICAgICAgICAgICAgIDIwMTQgRGllZ28gQ2Fzb3JyYW4sIGh0dHBzOi8vZ2l0aHViLmNvbS9kaWVnb2NyXG4gKiAgICAgICAgICAgICAgIDIwMTQgSmFtZXMgUm9iYiwgaHR0cHM6Ly9naXRodWIuY29tL2phbWVzYnJvYmJcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbiAqIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4gKiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xuICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICogTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRVxuICogTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuICogT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4gKiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKiBAbmFtZSBhZGRJbWFnZVxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5pbXBvcnQgeyBhdG9iLCBidG9hIH0gZnJvbSBcIi4uL2xpYnMvQXRvYkJ0b2EuanNcIjtcblxuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBuYW1lc3BhY2UgPSBcImFkZEltYWdlX1wiO1xuICBqc1BERkFQSS5fX2FkZGltYWdlX18gPSB7fTtcblxuICB2YXIgVU5LTk9XTiA9IFwiVU5LTk9XTlwiO1xuXG4gIC8vIEhldXJpc3RpYyBzZWxlY3Rpb24gb2YgYSBnb29kIGJhdGNoIGZvciBsYXJnZSBhcnJheSAuYXBwbHkuIE5vdCBsaW1pdGluZyBtYWtlIHRoZSBjYWxsIG92ZXJmbG93LlxuICAvLyBXaXRoIHRvbyBzbWFsbCBiYXRjaCBpdGVyYXRpb24gd2lsbCBiZSBzbG93IGFzIG1vcmUgY2FsbHMgYXJlIG1hZGUsXG4gIC8vIGhpZ2hlciB2YWx1ZXMgY2F1c2UgbGFyZ2VyIGFuZCBzbG93ZXIgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICB2YXIgQVJSQVlfQVBQTFlfQkFUQ0ggPSA4MTkyO1xuXG4gIHZhciBpbWFnZUZpbGVUeXBlSGVhZGVycyA9IHtcbiAgICBQTkc6IFtbMHg4OSwgMHg1MCwgMHg0ZSwgMHg0N11dLFxuICAgIFRJRkY6IFtcbiAgICAgIFsweDRkLCAweDRkLCAweDAwLCAweDJhXSwgLy9Nb3Rvcm9sYVxuICAgICAgWzB4NDksIDB4NDksIDB4MmEsIDB4MDBdIC8vSW50ZWxcbiAgICBdLFxuICAgIEpQRUc6IFtcbiAgICAgIFtcbiAgICAgICAgMHhmZixcbiAgICAgICAgMHhkOCxcbiAgICAgICAgMHhmZixcbiAgICAgICAgMHhlMCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIDB4NGEsXG4gICAgICAgIDB4NDYsXG4gICAgICAgIDB4NDksXG4gICAgICAgIDB4NDYsXG4gICAgICAgIDB4MDBcbiAgICAgIF0sIC8vSkZJRlxuICAgICAgW1xuICAgICAgICAweGZmLFxuICAgICAgICAweGQ4LFxuICAgICAgICAweGZmLFxuICAgICAgICAweGUxLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgMHg0NSxcbiAgICAgICAgMHg3OCxcbiAgICAgICAgMHg2OSxcbiAgICAgICAgMHg2NixcbiAgICAgICAgMHgwMCxcbiAgICAgICAgMHgwMFxuICAgICAgXSwgLy9FeGlmXG4gICAgICBbMHhmZiwgMHhkOCwgMHhmZiwgMHhkYl0sIC8vSlBFRyBSQVdcbiAgICAgIFsweGZmLCAweGQ4LCAweGZmLCAweGVlXSAvL0VYSUYgUkFXXG4gICAgXSxcbiAgICBKUEVHMjAwMDogW1sweDAwLCAweDAwLCAweDAwLCAweDBjLCAweDZhLCAweDUwLCAweDIwLCAweDIwXV0sXG4gICAgR0lGODdhOiBbWzB4NDcsIDB4NDksIDB4NDYsIDB4MzgsIDB4MzcsIDB4NjFdXSxcbiAgICBHSUY4OWE6IFtbMHg0NywgMHg0OSwgMHg0NiwgMHgzOCwgMHgzOSwgMHg2MV1dLFxuICAgIFdFQlA6IFtcbiAgICAgIFtcbiAgICAgICAgMHg1MixcbiAgICAgICAgMHg0OSxcbiAgICAgICAgMHg0NixcbiAgICAgICAgMHg0NixcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAweDU3LFxuICAgICAgICAweDQ1LFxuICAgICAgICAweDQyLFxuICAgICAgICAweDUwXG4gICAgICBdXG4gICAgXSxcbiAgICBCTVA6IFtcbiAgICAgIFsweDQyLCAweDRkXSwgLy9CTSAtIFdpbmRvd3MgMy4xeCwgOTUsIE5ULCAuLi4gZXRjLlxuICAgICAgWzB4NDIsIDB4NDFdLCAvL0JBIC0gT1MvMiBzdHJ1Y3QgYml0bWFwIGFycmF5XG4gICAgICBbMHg0MywgMHg0OV0sIC8vQ0kgLSBPUy8yIHN0cnVjdCBjb2xvciBpY29uXG4gICAgICBbMHg0MywgMHg1MF0sIC8vQ1AgLSBPUy8yIGNvbnN0IGNvbG9yIHBvaW50ZXJcbiAgICAgIFsweDQ5LCAweDQzXSwgLy9JQyAtIE9TLzIgc3RydWN0IGljb25cbiAgICAgIFsweDUwLCAweDU0XSAvL1BUIC0gT1MvMiBwb2ludGVyXG4gICAgXVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZWNvZ25pemUgZmlsZXR5cGUgb2YgSW1hZ2UgYnkgbWFnaWMtYnl0ZXNcbiAgICpcbiAgICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9maWxlX3NpZ25hdHVyZXNcbiAgICpcbiAgICogQG5hbWUgZ2V0SW1hZ2VGaWxlVHlwZUJ5SW1hZ2VEYXRhXG4gICAqIEBwdWJsaWNcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfGFycmF5YnVmZmVyfSBpbWFnZURhdGEgaW1hZ2VEYXRhIGFzIGJpbmFyeSBTdHJpbmcgb3IgYXJyYXlidWZmZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdCBmb3JtYXQgb2YgZmlsZSBpZiBmaWxldHlwZS1yZWNvZ25pdGlvbiBmYWlscywgZS5nLiAnSlBFRydcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gZmlsZXR5cGUgb2YgSW1hZ2VcbiAgICovXG4gIHZhciBnZXRJbWFnZUZpbGVUeXBlQnlJbWFnZURhdGEgPSAoanNQREZBUEkuX19hZGRpbWFnZV9fLmdldEltYWdlRmlsZVR5cGVCeUltYWdlRGF0YSA9IGZ1bmN0aW9uKFxuICAgIGltYWdlRGF0YSxcbiAgICBmYWxsYmFja0Zvcm1hdFxuICApIHtcbiAgICBmYWxsYmFja0Zvcm1hdCA9IGZhbGxiYWNrRm9ybWF0IHx8IFVOS05PV047XG4gICAgdmFyIGk7XG4gICAgdmFyIGo7XG4gICAgdmFyIHJlc3VsdCA9IFVOS05PV047XG4gICAgdmFyIGhlYWRlclNjaGVtYXRhO1xuICAgIHZhciBjb21wYXJlUmVzdWx0O1xuICAgIHZhciBmaWxlVHlwZTtcblxuICAgIGlmIChcbiAgICAgIGZhbGxiYWNrRm9ybWF0ID09PSBcIlJHQkFcIiB8fFxuICAgICAgKGltYWdlRGF0YS5kYXRhICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGEgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSAmJlxuICAgICAgICBcImhlaWdodFwiIGluIGltYWdlRGF0YSAmJlxuICAgICAgICBcIndpZHRoXCIgaW4gaW1hZ2VEYXRhKVxuICAgICkge1xuICAgICAgcmV0dXJuIFwiUkdCQVwiO1xuICAgIH1cblxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyhpbWFnZURhdGEpKSB7XG4gICAgICBmb3IgKGZpbGVUeXBlIGluIGltYWdlRmlsZVR5cGVIZWFkZXJzKSB7XG4gICAgICAgIGhlYWRlclNjaGVtYXRhID0gaW1hZ2VGaWxlVHlwZUhlYWRlcnNbZmlsZVR5cGVdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaGVhZGVyU2NoZW1hdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBjb21wYXJlUmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgaGVhZGVyU2NoZW1hdGFbaV0ubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgICAgIGlmIChoZWFkZXJTY2hlbWF0YVtpXVtqXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhlYWRlclNjaGVtYXRhW2ldW2pdICE9PSBpbWFnZURhdGFbal0pIHtcbiAgICAgICAgICAgICAgY29tcGFyZVJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbXBhcmVSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZpbGVUeXBlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoZmlsZVR5cGUgaW4gaW1hZ2VGaWxlVHlwZUhlYWRlcnMpIHtcbiAgICAgICAgaGVhZGVyU2NoZW1hdGEgPSBpbWFnZUZpbGVUeXBlSGVhZGVyc1tmaWxlVHlwZV07XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBoZWFkZXJTY2hlbWF0YS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbXBhcmVSZXN1bHQgPSB0cnVlO1xuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBoZWFkZXJTY2hlbWF0YVtpXS5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICAgICAgaWYgKGhlYWRlclNjaGVtYXRhW2ldW2pdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVhZGVyU2NoZW1hdGFbaV1bal0gIT09IGltYWdlRGF0YS5jaGFyQ29kZUF0KGopKSB7XG4gICAgICAgICAgICAgIGNvbXBhcmVSZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb21wYXJlUmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBmaWxlVHlwZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQgPT09IFVOS05PV04gJiYgZmFsbGJhY2tGb3JtYXQgIT09IFVOS05PV04pIHtcbiAgICAgIHJlc3VsdCA9IGZhbGxiYWNrRm9ybWF0O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcblxuICAvLyBJbWFnZSBmdW5jdGlvbmFsaXR5IHBvcnRlZCBmcm9tIHBkZi5qc1xuICB2YXIgcHV0SW1hZ2UgPSBmdW5jdGlvbihpbWFnZSkge1xuICAgIHZhciBvdXQgPSB0aGlzLmludGVybmFsLndyaXRlO1xuICAgIHZhciBwdXRTdHJlYW0gPSB0aGlzLmludGVybmFsLnB1dFN0cmVhbTtcbiAgICB2YXIgZ2V0RmlsdGVycyA9IHRoaXMuaW50ZXJuYWwuZ2V0RmlsdGVycztcblxuICAgIHZhciBmaWx0ZXIgPSBnZXRGaWx0ZXJzKCk7XG4gICAgd2hpbGUgKGZpbHRlci5pbmRleE9mKFwiRmxhdGVFbmNvZGVcIikgIT09IC0xKSB7XG4gICAgICBmaWx0ZXIuc3BsaWNlKGZpbHRlci5pbmRleE9mKFwiRmxhdGVFbmNvZGVcIiksIDEpO1xuICAgIH1cblxuICAgIGltYWdlLm9iamVjdElkID0gdGhpcy5pbnRlcm5hbC5uZXdPYmplY3QoKTtcblxuICAgIHZhciBhZGRpdGlvbmFsS2V5VmFsdWVzID0gW107XG4gICAgYWRkaXRpb25hbEtleVZhbHVlcy5wdXNoKHsga2V5OiBcIlR5cGVcIiwgdmFsdWU6IFwiL1hPYmplY3RcIiB9KTtcbiAgICBhZGRpdGlvbmFsS2V5VmFsdWVzLnB1c2goeyBrZXk6IFwiU3VidHlwZVwiLCB2YWx1ZTogXCIvSW1hZ2VcIiB9KTtcbiAgICBhZGRpdGlvbmFsS2V5VmFsdWVzLnB1c2goeyBrZXk6IFwiV2lkdGhcIiwgdmFsdWU6IGltYWdlLndpZHRoIH0pO1xuICAgIGFkZGl0aW9uYWxLZXlWYWx1ZXMucHVzaCh7IGtleTogXCJIZWlnaHRcIiwgdmFsdWU6IGltYWdlLmhlaWdodCB9KTtcblxuICAgIGlmIChpbWFnZS5jb2xvclNwYWNlID09PSBjb2xvcl9zcGFjZXMuSU5ERVhFRCkge1xuICAgICAgYWRkaXRpb25hbEtleVZhbHVlcy5wdXNoKHtcbiAgICAgICAga2V5OiBcIkNvbG9yU3BhY2VcIixcbiAgICAgICAgdmFsdWU6XG4gICAgICAgICAgXCJbL0luZGV4ZWQgL0RldmljZVJHQiBcIiArXG4gICAgICAgICAgLy8gaWYgYW4gaW5kZXhlZCBwbmcgZGVmaW5lcyBtb3JlIHRoYW4gb25lIGNvbG91ciB3aXRoIHRyYW5zcGFyZW5jeSwgd2UndmUgY3JlYXRlZCBhIHNNYXNrXG4gICAgICAgICAgKGltYWdlLnBhbGV0dGUubGVuZ3RoIC8gMyAtIDEpICtcbiAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgKFwic01hc2tcIiBpbiBpbWFnZSAmJiB0eXBlb2YgaW1hZ2Uuc01hc2sgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gaW1hZ2Uub2JqZWN0SWQgKyAyXG4gICAgICAgICAgICA6IGltYWdlLm9iamVjdElkICsgMSkgK1xuICAgICAgICAgIFwiIDAgUl1cIlxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZGl0aW9uYWxLZXlWYWx1ZXMucHVzaCh7XG4gICAgICAgIGtleTogXCJDb2xvclNwYWNlXCIsXG4gICAgICAgIHZhbHVlOiBcIi9cIiArIGltYWdlLmNvbG9yU3BhY2VcbiAgICAgIH0pO1xuICAgICAgaWYgKGltYWdlLmNvbG9yU3BhY2UgPT09IGNvbG9yX3NwYWNlcy5ERVZJQ0VfQ01ZSykge1xuICAgICAgICBhZGRpdGlvbmFsS2V5VmFsdWVzLnB1c2goeyBrZXk6IFwiRGVjb2RlXCIsIHZhbHVlOiBcIlsxIDAgMSAwIDEgMCAxIDBdXCIgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGFkZGl0aW9uYWxLZXlWYWx1ZXMucHVzaCh7XG4gICAgICBrZXk6IFwiQml0c1BlckNvbXBvbmVudFwiLFxuICAgICAgdmFsdWU6IGltYWdlLmJpdHNQZXJDb21wb25lbnRcbiAgICB9KTtcbiAgICBpZiAoXG4gICAgICBcImRlY29kZVBhcmFtZXRlcnNcIiBpbiBpbWFnZSAmJlxuICAgICAgdHlwZW9mIGltYWdlLmRlY29kZVBhcmFtZXRlcnMgIT09IFwidW5kZWZpbmVkXCJcbiAgICApIHtcbiAgICAgIGFkZGl0aW9uYWxLZXlWYWx1ZXMucHVzaCh7XG4gICAgICAgIGtleTogXCJEZWNvZGVQYXJtc1wiLFxuICAgICAgICB2YWx1ZTogXCI8PFwiICsgaW1hZ2UuZGVjb2RlUGFyYW1ldGVycyArIFwiPj5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChcInRyYW5zcGFyZW5jeVwiIGluIGltYWdlICYmIEFycmF5LmlzQXJyYXkoaW1hZ2UudHJhbnNwYXJlbmN5KSkge1xuICAgICAgdmFyIHRyYW5zcGFyZW5jeSA9IFwiXCIsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBsZW4gPSBpbWFnZS50cmFuc3BhcmVuY3kubGVuZ3RoO1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKylcbiAgICAgICAgdHJhbnNwYXJlbmN5ICs9XG4gICAgICAgICAgaW1hZ2UudHJhbnNwYXJlbmN5W2ldICsgXCIgXCIgKyBpbWFnZS50cmFuc3BhcmVuY3lbaV0gKyBcIiBcIjtcblxuICAgICAgYWRkaXRpb25hbEtleVZhbHVlcy5wdXNoKHtcbiAgICAgICAga2V5OiBcIk1hc2tcIixcbiAgICAgICAgdmFsdWU6IFwiW1wiICsgdHJhbnNwYXJlbmN5ICsgXCJdXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGltYWdlLnNNYXNrICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBhZGRpdGlvbmFsS2V5VmFsdWVzLnB1c2goe1xuICAgICAgICBrZXk6IFwiU01hc2tcIixcbiAgICAgICAgdmFsdWU6IGltYWdlLm9iamVjdElkICsgMSArIFwiIDAgUlwiXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUFwcGxpZWRGaWx0ZXJzID1cbiAgICAgIHR5cGVvZiBpbWFnZS5maWx0ZXIgIT09IFwidW5kZWZpbmVkXCIgPyBbXCIvXCIgKyBpbWFnZS5maWx0ZXJdIDogdW5kZWZpbmVkO1xuXG4gICAgcHV0U3RyZWFtKHtcbiAgICAgIGRhdGE6IGltYWdlLmRhdGEsXG4gICAgICBhZGRpdGlvbmFsS2V5VmFsdWVzOiBhZGRpdGlvbmFsS2V5VmFsdWVzLFxuICAgICAgYWxyZWFkeUFwcGxpZWRGaWx0ZXJzOiBhbHJlYWR5QXBwbGllZEZpbHRlcnMsXG4gICAgICBvYmplY3RJZDogaW1hZ2Uub2JqZWN0SWRcbiAgICB9KTtcblxuICAgIG91dChcImVuZG9ialwiKTtcblxuICAgIC8vIFNvZnQgbWFza1xuICAgIGlmIChcInNNYXNrXCIgaW4gaW1hZ2UgJiYgdHlwZW9mIGltYWdlLnNNYXNrICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB2YXIgZGVjb2RlUGFyYW1ldGVycyA9XG4gICAgICAgIFwiL1ByZWRpY3RvciBcIiArXG4gICAgICAgIGltYWdlLnByZWRpY3RvciArXG4gICAgICAgIFwiIC9Db2xvcnMgMSAvQml0c1BlckNvbXBvbmVudCBcIiArXG4gICAgICAgIGltYWdlLmJpdHNQZXJDb21wb25lbnQgK1xuICAgICAgICBcIiAvQ29sdW1ucyBcIiArXG4gICAgICAgIGltYWdlLndpZHRoO1xuICAgICAgdmFyIHNNYXNrID0ge1xuICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICBjb2xvclNwYWNlOiBcIkRldmljZUdyYXlcIixcbiAgICAgICAgYml0c1BlckNvbXBvbmVudDogaW1hZ2UuYml0c1BlckNvbXBvbmVudCxcbiAgICAgICAgZGVjb2RlUGFyYW1ldGVyczogZGVjb2RlUGFyYW1ldGVycyxcbiAgICAgICAgZGF0YTogaW1hZ2Uuc01hc2tcbiAgICAgIH07XG4gICAgICBpZiAoXCJmaWx0ZXJcIiBpbiBpbWFnZSkge1xuICAgICAgICBzTWFzay5maWx0ZXIgPSBpbWFnZS5maWx0ZXI7XG4gICAgICB9XG4gICAgICBwdXRJbWFnZS5jYWxsKHRoaXMsIHNNYXNrKTtcbiAgICB9XG5cbiAgICAvL1BhbGV0dGVcbiAgICBpZiAoaW1hZ2UuY29sb3JTcGFjZSA9PT0gY29sb3Jfc3BhY2VzLklOREVYRUQpIHtcbiAgICAgIHZhciBvYmpJZCA9IHRoaXMuaW50ZXJuYWwubmV3T2JqZWN0KCk7XG4gICAgICAvL291dCgnPDwgL0ZpbHRlciAvICcgKyBpbWdbJ2YnXSArJyAvTGVuZ3RoICcgKyBpbWdbJ3BhbCddLmxlbmd0aCArICc+PicpO1xuICAgICAgLy9wdXRTdHJlYW0oemxpYi5jb21wcmVzcyhpbWdbJ3BhbCddKSk7XG4gICAgICBwdXRTdHJlYW0oe1xuICAgICAgICBkYXRhOiBhcnJheUJ1ZmZlclRvQmluYXJ5U3RyaW5nKG5ldyBVaW50OEFycmF5KGltYWdlLnBhbGV0dGUpKSxcbiAgICAgICAgb2JqZWN0SWQ6IG9iaklkXG4gICAgICB9KTtcbiAgICAgIG91dChcImVuZG9ialwiKTtcbiAgICB9XG4gIH07XG4gIHZhciBwdXRSZXNvdXJjZXNDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbWFnZXMgPSB0aGlzLmludGVybmFsLmNvbGxlY3Rpb25zW25hbWVzcGFjZSArIFwiaW1hZ2VzXCJdO1xuICAgIGZvciAodmFyIGkgaW4gaW1hZ2VzKSB7XG4gICAgICBwdXRJbWFnZS5jYWxsKHRoaXMsIGltYWdlc1tpXSk7XG4gICAgfVxuICB9O1xuICB2YXIgcHV0WE9iamVjdHNEaWN0Q2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW1hZ2VzID0gdGhpcy5pbnRlcm5hbC5jb2xsZWN0aW9uc1tuYW1lc3BhY2UgKyBcImltYWdlc1wiXSxcbiAgICAgIG91dCA9IHRoaXMuaW50ZXJuYWwud3JpdGUsXG4gICAgICBpbWFnZTtcbiAgICBmb3IgKHZhciBpIGluIGltYWdlcykge1xuICAgICAgaW1hZ2UgPSBpbWFnZXNbaV07XG4gICAgICBvdXQoXCIvSVwiICsgaW1hZ2UuaW5kZXgsIGltYWdlLm9iamVjdElkLCBcIjBcIiwgXCJSXCIpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY2hlY2tDb21wcmVzc1ZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuIHZhbHVlIGluIGpzUERGQVBJLmltYWdlX2NvbXByZXNzaW9uID8gdmFsdWUgOiBpbWFnZV9jb21wcmVzc2lvbi5OT05FO1xuICB9O1xuXG4gIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmludGVybmFsLmNvbGxlY3Rpb25zW25hbWVzcGFjZSArIFwiaW1hZ2VzXCJdKSB7XG4gICAgICB0aGlzLmludGVybmFsLmNvbGxlY3Rpb25zW25hbWVzcGFjZSArIFwiaW1hZ2VzXCJdID0ge307XG4gICAgICB0aGlzLmludGVybmFsLmV2ZW50cy5zdWJzY3JpYmUoXCJwdXRSZXNvdXJjZXNcIiwgcHV0UmVzb3VyY2VzQ2FsbGJhY2spO1xuICAgICAgdGhpcy5pbnRlcm5hbC5ldmVudHMuc3Vic2NyaWJlKFwicHV0WG9iamVjdERpY3RcIiwgcHV0WE9iamVjdHNEaWN0Q2FsbGJhY2spO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZ2V0SW1hZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGltYWdlcyA9IHRoaXMuaW50ZXJuYWwuY29sbGVjdGlvbnNbbmFtZXNwYWNlICsgXCJpbWFnZXNcIl07XG4gICAgaW5pdGlhbGl6ZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiBpbWFnZXM7XG4gIH07XG4gIHZhciBnZXRJbWFnZUluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuaW50ZXJuYWwuY29sbGVjdGlvbnNbbmFtZXNwYWNlICsgXCJpbWFnZXNcIl0pLmxlbmd0aDtcbiAgfTtcbiAgdmFyIG5vdERlZmluZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUubGVuZ3RoID09PSAwO1xuICB9O1xuICB2YXIgZ2VuZXJhdGVBbGlhc0Zyb21JbWFnZURhdGEgPSBmdW5jdGlvbihpbWFnZURhdGEpIHtcbiAgICBpZiAodHlwZW9mIGltYWdlRGF0YSA9PT0gXCJzdHJpbmdcIiB8fCBpc0FycmF5QnVmZmVyVmlldyhpbWFnZURhdGEpKSB7XG4gICAgICByZXR1cm4gc0hhc2hDb2RlKGltYWdlRGF0YSk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5QnVmZmVyVmlldyhpbWFnZURhdGEuZGF0YSkpIHtcbiAgICAgIHJldHVybiBzSGFzaENvZGUoaW1hZ2VEYXRhLmRhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHZhciBpc0ltYWdlVHlwZVN1cHBvcnRlZCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIGpzUERGQVBJW1wicHJvY2Vzc1wiICsgdHlwZS50b1VwcGVyQ2FzZSgpXSA9PT0gXCJmdW5jdGlvblwiO1xuICB9O1xuXG4gIHZhciBpc0RPTUVsZW1lbnQgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gXCJvYmplY3RcIiAmJiBvYmplY3Qubm9kZVR5cGUgPT09IDE7XG4gIH07XG5cbiAgdmFyIGdldEltYWdlRGF0YUZyb21FbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCwgZm9ybWF0KSB7XG4gICAgLy9pZiBlbGVtZW50IGlzIGFuIGltYWdlIHdoaWNoIHVzZXMgZGF0YSB1cmwgZGVmaW5pdGlvbiwganVzdCByZXR1cm4gdGhlIGRhdGF1cmxcbiAgICBpZiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gXCJJTUdcIiAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZShcInNyY1wiKSkge1xuICAgICAgdmFyIHNyYyA9IFwiXCIgKyBlbGVtZW50LmdldEF0dHJpYnV0ZShcInNyY1wiKTtcblxuICAgICAgLy9pcyBiYXNlNjQgZW5jb2RlZCBkYXRhVXJsLCBkaXJlY3RseSBwcm9jZXNzIGl0XG4gICAgICBpZiAoc3JjLmluZGV4T2YoXCJkYXRhOmltYWdlL1wiKSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gYXRvYihcbiAgICAgICAgICB1bmVzY2FwZShzcmMpXG4gICAgICAgICAgICAuc3BsaXQoXCJiYXNlNjQsXCIpXG4gICAgICAgICAgICAucG9wKClcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy9pdCBpcyBwcm9iYWJseSBhbiB1cmwsIHRyeSB0byBsb2FkIGl0XG4gICAgICB2YXIgdG1wSW1hZ2VEYXRhID0ganNQREZBUEkubG9hZEZpbGUoc3JjLCB0cnVlKTtcbiAgICAgIGlmICh0bXBJbWFnZURhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdG1wSW1hZ2VEYXRhO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbGVtZW50Lm5vZGVOYW1lID09PSBcIkNBTlZBU1wiKSB7XG4gICAgICBpZiAoZWxlbWVudC53aWR0aCA9PT0gMCB8fCBlbGVtZW50LmhlaWdodCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJHaXZlbiBjYW52YXMgbXVzdCBoYXZlIGRhdGEuIENhbnZhcyB3aWR0aDogXCIgK1xuICAgICAgICAgICAgZWxlbWVudC53aWR0aCArXG4gICAgICAgICAgICBcIiwgaGVpZ2h0OiBcIiArXG4gICAgICAgICAgICBlbGVtZW50LmhlaWdodFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdmFyIG1pbWVUeXBlO1xuICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgY2FzZSBcIlBOR1wiOlxuICAgICAgICAgIG1pbWVUeXBlID0gXCJpbWFnZS9wbmdcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIldFQlBcIjpcbiAgICAgICAgICBtaW1lVHlwZSA9IFwiaW1hZ2Uvd2VicFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiSlBFR1wiOlxuICAgICAgICBjYXNlIFwiSlBHXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbWltZVR5cGUgPSBcImltYWdlL2pwZWdcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdG9iKFxuICAgICAgICBlbGVtZW50XG4gICAgICAgICAgLnRvRGF0YVVSTChtaW1lVHlwZSwgMS4wKVxuICAgICAgICAgIC5zcGxpdChcImJhc2U2NCxcIilcbiAgICAgICAgICAucG9wKClcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBjaGVja0ltYWdlc0ZvckFsaWFzID0gZnVuY3Rpb24oYWxpYXMpIHtcbiAgICB2YXIgaW1hZ2VzID0gdGhpcy5pbnRlcm5hbC5jb2xsZWN0aW9uc1tuYW1lc3BhY2UgKyBcImltYWdlc1wiXTtcbiAgICBpZiAoaW1hZ2VzKSB7XG4gICAgICBmb3IgKHZhciBlIGluIGltYWdlcykge1xuICAgICAgICBpZiAoYWxpYXMgPT09IGltYWdlc1tlXS5hbGlhcykge1xuICAgICAgICAgIHJldHVybiBpbWFnZXNbZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGRldGVybWluZVdpZHRoQW5kSGVpZ2h0ID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCwgaW1hZ2UpIHtcbiAgICBpZiAoIXdpZHRoICYmICFoZWlnaHQpIHtcbiAgICAgIHdpZHRoID0gLTk2O1xuICAgICAgaGVpZ2h0ID0gLTk2O1xuICAgIH1cbiAgICBpZiAod2lkdGggPCAwKSB7XG4gICAgICB3aWR0aCA9ICgtMSAqIGltYWdlLndpZHRoICogNzIpIC8gd2lkdGggLyB0aGlzLmludGVybmFsLnNjYWxlRmFjdG9yO1xuICAgIH1cbiAgICBpZiAoaGVpZ2h0IDwgMCkge1xuICAgICAgaGVpZ2h0ID0gKC0xICogaW1hZ2UuaGVpZ2h0ICogNzIpIC8gaGVpZ2h0IC8gdGhpcy5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcbiAgICB9XG4gICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICB3aWR0aCA9IChoZWlnaHQgKiBpbWFnZS53aWR0aCkgLyBpbWFnZS5oZWlnaHQ7XG4gICAgfVxuICAgIGlmIChoZWlnaHQgPT09IDApIHtcbiAgICAgIGhlaWdodCA9ICh3aWR0aCAqIGltYWdlLmhlaWdodCkgLyBpbWFnZS53aWR0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gW3dpZHRoLCBoZWlnaHRdO1xuICB9O1xuXG4gIHZhciB3cml0ZUltYWdlVG9QREYgPSBmdW5jdGlvbih4LCB5LCB3aWR0aCwgaGVpZ2h0LCBpbWFnZSwgcm90YXRpb24pIHtcbiAgICB2YXIgZGltcyA9IGRldGVybWluZVdpZHRoQW5kSGVpZ2h0LmNhbGwodGhpcywgd2lkdGgsIGhlaWdodCwgaW1hZ2UpLFxuICAgICAgY29vcmQgPSB0aGlzLmludGVybmFsLmdldENvb3JkaW5hdGVTdHJpbmcsXG4gICAgICB2Y29vcmQgPSB0aGlzLmludGVybmFsLmdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZztcblxuICAgIHZhciBpbWFnZXMgPSBnZXRJbWFnZXMuY2FsbCh0aGlzKTtcblxuICAgIHdpZHRoID0gZGltc1swXTtcbiAgICBoZWlnaHQgPSBkaW1zWzFdO1xuICAgIGltYWdlc1tpbWFnZS5pbmRleF0gPSBpbWFnZTtcblxuICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgcm90YXRpb24gKj0gTWF0aC5QSSAvIDE4MDtcbiAgICAgIHZhciBjID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgICAgdmFyIHMgPSBNYXRoLnNpbihyb3RhdGlvbik7XG4gICAgICAvL2xpa2UgaW4gcGRmIFJlZmVyZW5jZSBkbyBpdCA0IGRpZ2l0cyBpbnN0ZWFkIG9mIDJcbiAgICAgIHZhciBmNCA9IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICByZXR1cm4gbnVtYmVyLnRvRml4ZWQoNCk7XG4gICAgICB9O1xuICAgICAgdmFyIHJvdGF0aW9uVHJhbnNmb3JtYXRpb25NYXRyaXggPSBbXG4gICAgICAgIGY0KGMpLFxuICAgICAgICBmNChzKSxcbiAgICAgICAgZjQocyAqIC0xKSxcbiAgICAgICAgZjQoYyksXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIFwiY21cIlxuICAgICAgXTtcbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hbC53cml0ZShcInFcIik7IC8vU2F2ZSBncmFwaGljcyBzdGF0ZVxuICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgdGhpcy5pbnRlcm5hbC53cml0ZShcbiAgICAgICAgWzEsIFwiMFwiLCBcIjBcIiwgMSwgY29vcmQoeCksIHZjb29yZCh5ICsgaGVpZ2h0KSwgXCJjbVwiXS5qb2luKFwiIFwiKVxuICAgICAgKTsgLy9UcmFuc2xhdGVcbiAgICAgIHRoaXMuaW50ZXJuYWwud3JpdGUocm90YXRpb25UcmFuc2Zvcm1hdGlvbk1hdHJpeC5qb2luKFwiIFwiKSk7IC8vUm90YXRlXG4gICAgICB0aGlzLmludGVybmFsLndyaXRlKFxuICAgICAgICBbY29vcmQod2lkdGgpLCBcIjBcIiwgXCIwXCIsIGNvb3JkKGhlaWdodCksIFwiMFwiLCBcIjBcIiwgXCJjbVwiXS5qb2luKFwiIFwiKVxuICAgICAgKTsgLy9TY2FsZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmludGVybmFsLndyaXRlKFxuICAgICAgICBbXG4gICAgICAgICAgY29vcmQod2lkdGgpLFxuICAgICAgICAgIFwiMFwiLFxuICAgICAgICAgIFwiMFwiLFxuICAgICAgICAgIGNvb3JkKGhlaWdodCksXG4gICAgICAgICAgY29vcmQoeCksXG4gICAgICAgICAgdmNvb3JkKHkgKyBoZWlnaHQpLFxuICAgICAgICAgIFwiY21cIlxuICAgICAgICBdLmpvaW4oXCIgXCIpXG4gICAgICApOyAvL1RyYW5zbGF0ZSBhbmQgU2NhbGVcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0FkdmFuY2VkQVBJKCkpIHtcbiAgICAgIC8vIGRyYXcgaW1hZ2UgYm90dG9tIHVwIHdoZW4gaW4gXCJhZHZhbmNlZFwiIEFQSSBtb2RlXG4gICAgICB0aGlzLmludGVybmFsLndyaXRlKFsxLCAwLCAwLCAtMSwgMCwgMCwgXCJjbVwiXS5qb2luKFwiIFwiKSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbnRlcm5hbC53cml0ZShcIi9JXCIgKyBpbWFnZS5pbmRleCArIFwiIERvXCIpOyAvL1BhaW50IEltYWdlXG4gICAgdGhpcy5pbnRlcm5hbC53cml0ZShcIlFcIik7IC8vUmVzdG9yZSBncmFwaGljcyBzdGF0ZVxuICB9O1xuXG4gIC8qKlxuICAgKiBDT0xPUiBTUEFDRVNcbiAgICovXG4gIHZhciBjb2xvcl9zcGFjZXMgPSAoanNQREZBUEkuY29sb3Jfc3BhY2VzID0ge1xuICAgIERFVklDRV9SR0I6IFwiRGV2aWNlUkdCXCIsXG4gICAgREVWSUNFX0dSQVk6IFwiRGV2aWNlR3JheVwiLFxuICAgIERFVklDRV9DTVlLOiBcIkRldmljZUNNWUtcIixcbiAgICBDQUxfR1JFWTogXCJDYWxHcmF5XCIsXG4gICAgQ0FMX1JHQjogXCJDYWxSR0JcIixcbiAgICBMQUI6IFwiTGFiXCIsXG4gICAgSUNDX0JBU0VEOiBcIklDQ0Jhc2VkXCIsXG4gICAgSU5ERVhFRDogXCJJbmRleGVkXCIsXG4gICAgUEFUVEVSTjogXCJQYXR0ZXJuXCIsXG4gICAgU0VQQVJBVElPTjogXCJTZXBhcmF0aW9uXCIsXG4gICAgREVWSUNFX046IFwiRGV2aWNlTlwiXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBERUNPREUgTUVUSE9EU1xuICAgKi9cbiAganNQREZBUEkuZGVjb2RlID0ge1xuICAgIERDVF9ERUNPREU6IFwiRENURGVjb2RlXCIsXG4gICAgRkxBVEVfREVDT0RFOiBcIkZsYXRlRGVjb2RlXCIsXG4gICAgTFpXX0RFQ09ERTogXCJMWldEZWNvZGVcIixcbiAgICBKUFhfREVDT0RFOiBcIkpQWERlY29kZVwiLFxuICAgIEpCSUcyX0RFQ09ERTogXCJKQklHMkRlY29kZVwiLFxuICAgIEFTQ0lJODVfREVDT0RFOiBcIkFTQ0lJODVEZWNvZGVcIixcbiAgICBBU0NJSV9IRVhfREVDT0RFOiBcIkFTQ0lJSGV4RGVjb2RlXCIsXG4gICAgUlVOX0xFTkdUSF9ERUNPREU6IFwiUnVuTGVuZ3RoRGVjb2RlXCIsXG4gICAgQ0NJVFRfRkFYX0RFQ09ERTogXCJDQ0lUVEZheERlY29kZVwiXG4gIH07XG5cbiAgLyoqXG4gICAqIElNQUdFIENPTVBSRVNTSU9OIFRZUEVTXG4gICAqL1xuICB2YXIgaW1hZ2VfY29tcHJlc3Npb24gPSAoanNQREZBUEkuaW1hZ2VfY29tcHJlc3Npb24gPSB7XG4gICAgTk9ORTogXCJOT05FXCIsXG4gICAgRkFTVDogXCJGQVNUXCIsXG4gICAgTUVESVVNOiBcIk1FRElVTVwiLFxuICAgIFNMT1c6IFwiU0xPV1wiXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAbmFtZSBzSGFzaENvZGVcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICB2YXIgc0hhc2hDb2RlID0gKGpzUERGQVBJLl9fYWRkaW1hZ2VfXy5zSGFzaENvZGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIGhhc2ggPSAwLFxuICAgICAgaSxcbiAgICAgIGxlbjtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbGVuID0gZGF0YS5sZW5ndGg7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIGRhdGEuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICBsZW4gPSBkYXRhLmJ5dGVMZW5ndGggLyAyO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBkYXRhW2ldO1xuICAgICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGFzaDtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyBpZiBnaXZlbiBTdHJpbmcgaXMgYSB2YWxpZCBCYXNlNjQtU3RyaW5nXG4gICAqXG4gICAqIEBuYW1lIHZhbGlkYXRlU3RyaW5nQXNCYXNlNjRcbiAgICogQHB1YmxpY1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IHBvc3NpYmxlIEJhc2U2NC1TdHJpbmdcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICB2YXIgdmFsaWRhdGVTdHJpbmdBc0Jhc2U2NCA9IChqc1BERkFQSS5fX2FkZGltYWdlX18udmFsaWRhdGVTdHJpbmdBc0Jhc2U2NCA9IGZ1bmN0aW9uKFxuICAgIHBvc3NpYmxlQmFzZTY0U3RyaW5nXG4gICkge1xuICAgIHBvc3NpYmxlQmFzZTY0U3RyaW5nID0gcG9zc2libGVCYXNlNjRTdHJpbmcgfHwgXCJcIjtcbiAgICBwb3NzaWJsZUJhc2U2NFN0cmluZy50b1N0cmluZygpLnRyaW0oKTtcblxuICAgIHZhciByZXN1bHQgPSB0cnVlO1xuXG4gICAgaWYgKHBvc3NpYmxlQmFzZTY0U3RyaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHBvc3NpYmxlQmFzZTY0U3RyaW5nLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIC9eW0EtWmEtejAtOSsvXSskLy50ZXN0KFxuICAgICAgICBwb3NzaWJsZUJhc2U2NFN0cmluZy5zdWJzdHIoMCwgcG9zc2libGVCYXNlNjRTdHJpbmcubGVuZ3RoIC0gMilcbiAgICAgICkgPT09IGZhbHNlXG4gICAgKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAvXltBLVphLXowLTkvXVtBLVphLXowLTkrL118W0EtWmEtejAtOSsvXT18PT0kLy50ZXN0KFxuICAgICAgICBwb3NzaWJsZUJhc2U2NFN0cmluZy5zdWJzdHIoLTIpXG4gICAgICApID09PSBmYWxzZVxuICAgICkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBTdHJpcHMgb3V0IGFuZCByZXR1cm5zIGluZm8gZnJvbSBhIHZhbGlkIGJhc2U2NCBkYXRhIFVSSVxuICAgKlxuICAgKiBAbmFtZSBleHRyYWN0SW1hZ2VGcm9tRGF0YVVybFxuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFVcmwgYSB2YWxpZCBkYXRhIFVSSSBvZiBmb3JtYXQgJ2RhdGE6WzxNSU1FLXR5cGU+XVs7YmFzZTY0XSw8ZGF0YT4nXG4gICAqIEByZXR1cm5zIHtBcnJheX1hbiBBcnJheSBjb250YWluaW5nIHRoZSBmb2xsb3dpbmdcbiAgICogWzBdIHRoZSBjb21wbGV0ZSBkYXRhIFVSSVxuICAgKiBbMV0gPE1JTUUtdHlwZT5cbiAgICogWzJdIGZvcm1hdCAtIHRoZSBzZWNvbmQgcGFydCBvZiB0aGUgbWltZS10eXBlIGkuZSAncG5nJyBpbiAnaW1hZ2UvcG5nJ1xuICAgKiBbNF0gPGRhdGE+XG4gICAqL1xuICB2YXIgZXh0cmFjdEltYWdlRnJvbURhdGFVcmwgPSAoanNQREZBUEkuX19hZGRpbWFnZV9fLmV4dHJhY3RJbWFnZUZyb21EYXRhVXJsID0gZnVuY3Rpb24oXG4gICAgZGF0YVVybFxuICApIHtcbiAgICBkYXRhVXJsID0gZGF0YVVybCB8fCBcIlwiO1xuICAgIHZhciBkYXRhVXJsUGFydHMgPSBkYXRhVXJsLnNwbGl0KFwiYmFzZTY0LFwiKTtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcblxuICAgIGlmIChkYXRhVXJsUGFydHMubGVuZ3RoID09PSAyKSB7XG4gICAgICB2YXIgZXh0cmFjdGVkSW5mbyA9IC9eZGF0YTooXFx3KlxcL1xcdyopOyooY2hhcnNldD0oPyFjaGFyc2V0PSlbXFx3PS1dKikqOyokLy5leGVjKFxuICAgICAgICBkYXRhVXJsUGFydHNbMF1cbiAgICAgICk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShleHRyYWN0ZWRJbmZvKSkge1xuICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgbWltZVR5cGU6IGV4dHJhY3RlZEluZm9bMV0sXG4gICAgICAgICAgY2hhcnNldDogZXh0cmFjdGVkSW5mb1syXSxcbiAgICAgICAgICBkYXRhOiBkYXRhVXJsUGFydHNbMV1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENoZWNrIHRvIHNlZSBpZiBBcnJheUJ1ZmZlciBpcyBzdXBwb3J0ZWRcbiAgICpcbiAgICogQG5hbWUgc3VwcG9ydHNBcnJheUJ1ZmZlclxuICAgKiBAZnVuY3Rpb25cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICB2YXIgc3VwcG9ydHNBcnJheUJ1ZmZlciA9IChqc1BERkFQSS5fX2FkZGltYWdlX18uc3VwcG9ydHNBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0eXBlb2YgQXJyYXlCdWZmZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIFVpbnQ4QXJyYXkgIT09IFwidW5kZWZpbmVkXCJcbiAgICApO1xuICB9KTtcblxuICAvKipcbiAgICogVGVzdHMgc3VwcGxpZWQgb2JqZWN0IHRvIGRldGVybWluZSBpZiBBcnJheUJ1ZmZlclxuICAgKlxuICAgKiBAbmFtZSBpc0FycmF5QnVmZmVyXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IGFuIE9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGpzUERGQVBJLl9fYWRkaW1hZ2VfXy5pc0FycmF5QnVmZmVyID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIHN1cHBvcnRzQXJyYXlCdWZmZXIoKSAmJiBvYmplY3QgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdHMgc3VwcGxpZWQgb2JqZWN0IHRvIGRldGVybWluZSBpZiBpdCBpbXBsZW1lbnRzIHRoZSBBcnJheUJ1ZmZlclZpZXcgKFR5cGVkQXJyYXkpIGludGVyZmFjZVxuICAgKlxuICAgKiBAbmFtZSBpc0FycmF5QnVmZmVyVmlld1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBhbiBPYmplY3RcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICB2YXIgaXNBcnJheUJ1ZmZlclZpZXcgPSAoanNQREZBUEkuX19hZGRpbWFnZV9fLmlzQXJyYXlCdWZmZXJWaWV3ID0gZnVuY3Rpb24oXG4gICAgb2JqZWN0XG4gICkge1xuICAgIHJldHVybiAoXG4gICAgICBzdXBwb3J0c0FycmF5QnVmZmVyKCkgJiZcbiAgICAgIHR5cGVvZiBVaW50MzJBcnJheSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgKG9iamVjdCBpbnN0YW5jZW9mIEludDhBcnJheSB8fFxuICAgICAgICBvYmplY3QgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8XG4gICAgICAgICh0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICBvYmplY3QgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSkgfHxcbiAgICAgICAgb2JqZWN0IGluc3RhbmNlb2YgSW50MTZBcnJheSB8fFxuICAgICAgICBvYmplY3QgaW5zdGFuY2VvZiBVaW50MTZBcnJheSB8fFxuICAgICAgICBvYmplY3QgaW5zdGFuY2VvZiBJbnQzMkFycmF5IHx8XG4gICAgICAgIG9iamVjdCBpbnN0YW5jZW9mIFVpbnQzMkFycmF5IHx8XG4gICAgICAgIG9iamVjdCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSB8fFxuICAgICAgICBvYmplY3QgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpXG4gICAgKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgQmluYXJ5IFN0cmluZyB0byBBcnJheUJ1ZmZlclxuICAgKlxuICAgKiBAbmFtZSBiaW5hcnlTdHJpbmdUb1VpbnQ4QXJyYXlcbiAgICogQHB1YmxpY1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IEJpbmFyeVN0cmluZyB3aXRoIEltYWdlRGF0YVxuICAgKiBAcmV0dXJucyB7VWludDhBcnJheX1cbiAgICovXG4gIHZhciBiaW5hcnlTdHJpbmdUb1VpbnQ4QXJyYXkgPSAoanNQREZBUEkuX19hZGRpbWFnZV9fLmJpbmFyeVN0cmluZ1RvVWludDhBcnJheSA9IGZ1bmN0aW9uKFxuICAgIGJpbmFyeV9zdHJpbmdcbiAgKSB7XG4gICAgdmFyIGxlbiA9IGJpbmFyeV9zdHJpbmcubGVuZ3RoO1xuICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlfc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcztcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhlIEJ1ZmZlciB0byBhIEJpbmFyeSBTdHJpbmdcbiAgICpcbiAgICogQG5hbWUgYXJyYXlCdWZmZXJUb0JpbmFyeVN0cmluZ1xuICAgKiBAcHVibGljXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfEFycmF5QnVmZmVyVmlld30gQXJyYXlCdWZmZXIgYnVmZmVyIG9yIGJ1ZmZlclZpZXcgd2l0aCBJbWFnZURhdGFcbiAgICpcbiAgICogQHJldHVybnMge1N0cmluZ31cbiAgICovXG4gIHZhciBhcnJheUJ1ZmZlclRvQmluYXJ5U3RyaW5nID0gKGpzUERGQVBJLl9fYWRkaW1hZ2VfXy5hcnJheUJ1ZmZlclRvQmluYXJ5U3RyaW5nID0gZnVuY3Rpb24oXG4gICAgYnVmZmVyXG4gICkge1xuICAgIHZhciBvdXQgPSBcIlwiO1xuICAgIC8vIFRoZXJlIGFyZSBjYWxscyB3aXRoIGJvdGggQXJyYXlCdWZmZXIgYW5kIGFscmVhZHkgY29udmVydGVkIFVpbnQ4QXJyYXkgb3Igb3RoZXIgQnVmZmVyVmlldy5cbiAgICAvLyBEbyBub3QgY29weSB0aGUgYXJyYXkgaWYgaW5wdXQgaXMgYWxyZWFkeSBhbiBhcnJheS5cbiAgICB2YXIgYnVmID0gaXNBcnJheUJ1ZmZlclZpZXcoYnVmZmVyKSA/IGJ1ZmZlciA6IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyBpICs9IEFSUkFZX0FQUExZX0JBVENIKSB7XG4gICAgICAvLyBMaW1pdCB0aGUgYW1vdW50IG9mIGNoYXJhY3RlcnMgYmVpbmcgcGFyc2VkIHRvIHByZXZlbnQgb3ZlcmZsb3cuXG4gICAgICAvLyBOb3RlIHRoYXQgd2hpbGUgVGV4dERlY29kZXIgd291bGQgYmUgZmFzdGVyLCBpdCBkb2VzIG5vdCBoYXZlIHRoZSBzYW1lXG4gICAgICAvLyBmdW5jdGlvbmFsaXR5IGFzIGZyb21DaGFyQ29kZSB3aXRoIGFueSBwcm92aWRlZCBlbmNvZGluZ3MgYXMgb2YgMy8yMDIxLlxuICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICAgIG51bGwsXG4gICAgICAgIGJ1Zi5zdWJhcnJheShpLCBpICsgQVJSQVlfQVBQTFlfQkFUQ0gpXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9KTtcblxuICAvKipcbiAgICogUG9zc2libGUgcGFyYW1ldGVyIGZvciBhZGRJbWFnZSwgYW4gUkdCQSBidWZmZXIgd2l0aCBzaXplLlxuICAgKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBSR0JBRGF0YVxuICAgKiBAcHJvcGVydHkge1VpbnQ4Q2xhbXBlZEFycmF5fSBkYXRhIC0gU2luZ2xlIGRpbWVuc2lvbmFsIGFycmF5IG9mIFJHQkEgdmFsdWVzLiBGb3IgZXhhbXBsZSBmcm9tIGNhbnZhcyBnZXRJbWFnZURhdGEuXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWR0aCAtIEltYWdlIHdpZHRoIGFzIHRoZSBkYXRhIGRvZXMgbm90IGNhcnJ5IHRoaXMgaW5mb3JtYXRpb24gaW4gaXRzZWxmLlxuICAgKiBAcHJvcGVydHkge251bWJlcn0gaGVpZ2h0IC0gSW1hZ2UgaGVpZ2h0IGFzIHRoZSBkYXRhIGRvZXMgbm90IGNhcnJ5IHRoaXMgaW5mb3JtYXRpb24gaW4gaXRzZWxmLlxuICAgKi9cblxuICAvKipcbiAgICogQWRkcyBhbiBJbWFnZSB0byB0aGUgUERGLlxuICAgKlxuICAgKiBAbmFtZSBhZGRJbWFnZVxuICAgKiBAcHVibGljXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fFVpbnQ4QXJyYXl8UkdCQURhdGF9IGltYWdlRGF0YSBpbWFnZURhdGEgYXMgYmFzZTY0IGVuY29kZWQgRGF0YVVybCBvciBJbWFnZS1IVE1MRWxlbWVudCBvciBDYW52YXMtSFRNTEVsZW1lbnQgb3Igb2JqZWN0IGNvbnRhaW5pbmcgUkdCQSBhcnJheSAobGlrZSBvdXRwdXQgZnJvbSBjYW52YXMuZ2V0SW1hZ2VEYXRhKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdCBmb3JtYXQgb2YgZmlsZSBpZiBmaWxldHlwZS1yZWNvZ25pdGlvbiBmYWlscyBvciBpbiBjYXNlIG9mIGEgQ2FudmFzLUVsZW1lbnQgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIChkZWZhdWx0IGZvciBDYW52YXMgaXMgSlBFRyksIGUuZy4gJ0pQRUcnLCAnUE5HJywgJ1dFQlAnXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IHggQ29vcmRpbmF0ZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudCkgYWdhaW5zdCBsZWZ0IGVkZ2Ugb2YgdGhlIHBhZ2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgeSBDb29yZGluYXRlIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KSBhZ2FpbnN0IHVwcGVyIGVkZ2Ugb2YgdGhlIHBhZ2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIHdpZHRoIG9mIHRoZSBpbWFnZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudClcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBoZWlnaHQgb2YgdGhlIEltYWdlIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWxpYXMgYWxpYXMgb2YgdGhlIGltYWdlIChpZiB1c2VkIG11bHRpcGxlIHRpbWVzKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcHJlc3Npb24gY29tcHJlc3Npb24gb2YgdGhlIGdlbmVyYXRlZCBKUEVHLCBjYW4gaGF2ZSB0aGUgdmFsdWVzICdOT05FJywgJ0ZBU1QnLCAnTUVESVVNJyBhbmQgJ1NMT1cnXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiByb3RhdGlvbiBvZiB0aGUgaW1hZ2UgaW4gZGVncmVlcyAoMC0zNTkpXG4gICAqXG4gICAqIEByZXR1cm5zIGpzUERGXG4gICAqL1xuICBqc1BERkFQSS5hZGRJbWFnZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbWFnZURhdGEsIGZvcm1hdCwgeCwgeSwgdywgaCwgYWxpYXMsIGNvbXByZXNzaW9uLCByb3RhdGlvbjtcblxuICAgIGltYWdlRGF0YSA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgZm9ybWF0ID0gVU5LTk9XTjtcbiAgICAgIHggPSBhcmd1bWVudHNbMV07XG4gICAgICB5ID0gYXJndW1lbnRzWzJdO1xuICAgICAgdyA9IGFyZ3VtZW50c1szXTtcbiAgICAgIGggPSBhcmd1bWVudHNbNF07XG4gICAgICBhbGlhcyA9IGFyZ3VtZW50c1s1XTtcbiAgICAgIGNvbXByZXNzaW9uID0gYXJndW1lbnRzWzZdO1xuICAgICAgcm90YXRpb24gPSBhcmd1bWVudHNbN107XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdCA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIHggPSBhcmd1bWVudHNbMl07XG4gICAgICB5ID0gYXJndW1lbnRzWzNdO1xuICAgICAgdyA9IGFyZ3VtZW50c1s0XTtcbiAgICAgIGggPSBhcmd1bWVudHNbNV07XG4gICAgICBhbGlhcyA9IGFyZ3VtZW50c1s2XTtcbiAgICAgIGNvbXByZXNzaW9uID0gYXJndW1lbnRzWzddO1xuICAgICAgcm90YXRpb24gPSBhcmd1bWVudHNbOF07XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGltYWdlRGF0YSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgIWlzRE9NRWxlbWVudChpbWFnZURhdGEpICYmXG4gICAgICBcImltYWdlRGF0YVwiIGluIGltYWdlRGF0YVxuICAgICkge1xuICAgICAgdmFyIG9wdGlvbnMgPSBpbWFnZURhdGE7XG5cbiAgICAgIGltYWdlRGF0YSA9IG9wdGlvbnMuaW1hZ2VEYXRhO1xuICAgICAgZm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQgfHwgZm9ybWF0IHx8IFVOS05PV047XG4gICAgICB4ID0gb3B0aW9ucy54IHx8IHggfHwgMDtcbiAgICAgIHkgPSBvcHRpb25zLnkgfHwgeSB8fCAwO1xuICAgICAgdyA9IG9wdGlvbnMudyB8fCBvcHRpb25zLndpZHRoIHx8IHc7XG4gICAgICBoID0gb3B0aW9ucy5oIHx8IG9wdGlvbnMuaGVpZ2h0IHx8IGg7XG4gICAgICBhbGlhcyA9IG9wdGlvbnMuYWxpYXMgfHwgYWxpYXM7XG4gICAgICBjb21wcmVzc2lvbiA9IG9wdGlvbnMuY29tcHJlc3Npb24gfHwgY29tcHJlc3Npb247XG4gICAgICByb3RhdGlvbiA9IG9wdGlvbnMucm90YXRpb24gfHwgb3B0aW9ucy5hbmdsZSB8fCByb3RhdGlvbjtcbiAgICB9XG5cbiAgICAvL0lmIGNvbXByZXNzaW9uIGlzIG5vdCBleHBsaWNpdGx5IHNldCwgZGV0ZXJtaW5lIGlmIHdlIHNob3VsZCB1c2UgY29tcHJlc3Npb25cbiAgICB2YXIgZmlsdGVyID0gdGhpcy5pbnRlcm5hbC5nZXRGaWx0ZXJzKCk7XG4gICAgaWYgKGNvbXByZXNzaW9uID09PSB1bmRlZmluZWQgJiYgZmlsdGVyLmluZGV4T2YoXCJGbGF0ZUVuY29kZVwiKSAhPT0gLTEpIHtcbiAgICAgIGNvbXByZXNzaW9uID0gXCJTTE9XXCI7XG4gICAgfVxuXG4gICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvb3JkaW5hdGVzIHBhc3NlZCB0byBqc1BERi5hZGRJbWFnZVwiKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplLmNhbGwodGhpcyk7XG5cbiAgICB2YXIgaW1hZ2UgPSBwcm9jZXNzSW1hZ2VEYXRhLmNhbGwoXG4gICAgICB0aGlzLFxuICAgICAgaW1hZ2VEYXRhLFxuICAgICAgZm9ybWF0LFxuICAgICAgYWxpYXMsXG4gICAgICBjb21wcmVzc2lvblxuICAgICk7XG5cbiAgICB3cml0ZUltYWdlVG9QREYuY2FsbCh0aGlzLCB4LCB5LCB3LCBoLCBpbWFnZSwgcm90YXRpb24pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIHByb2Nlc3NJbWFnZURhdGEgPSBmdW5jdGlvbihpbWFnZURhdGEsIGZvcm1hdCwgYWxpYXMsIGNvbXByZXNzaW9uKSB7XG4gICAgdmFyIHJlc3VsdCwgZGF0YUFzQmluYXJ5U3RyaW5nO1xuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGltYWdlRGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgZ2V0SW1hZ2VGaWxlVHlwZUJ5SW1hZ2VEYXRhKGltYWdlRGF0YSkgPT09IFVOS05PV05cbiAgICApIHtcbiAgICAgIGltYWdlRGF0YSA9IHVuZXNjYXBlKGltYWdlRGF0YSk7XG4gICAgICB2YXIgdG1wSW1hZ2VEYXRhID0gY29udmVydEJhc2U2NFRvQmluYXJ5U3RyaW5nKGltYWdlRGF0YSwgZmFsc2UpO1xuXG4gICAgICBpZiAodG1wSW1hZ2VEYXRhICE9PSBcIlwiKSB7XG4gICAgICAgIGltYWdlRGF0YSA9IHRtcEltYWdlRGF0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRtcEltYWdlRGF0YSA9IGpzUERGQVBJLmxvYWRGaWxlKGltYWdlRGF0YSwgdHJ1ZSk7XG4gICAgICAgIGlmICh0bXBJbWFnZURhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGltYWdlRGF0YSA9IHRtcEltYWdlRGF0YTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0RPTUVsZW1lbnQoaW1hZ2VEYXRhKSkge1xuICAgICAgaW1hZ2VEYXRhID0gZ2V0SW1hZ2VEYXRhRnJvbUVsZW1lbnQoaW1hZ2VEYXRhLCBmb3JtYXQpO1xuICAgIH1cblxuICAgIGZvcm1hdCA9IGdldEltYWdlRmlsZVR5cGVCeUltYWdlRGF0YShpbWFnZURhdGEsIGZvcm1hdCk7XG4gICAgaWYgKCFpc0ltYWdlVHlwZVN1cHBvcnRlZChmb3JtYXQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiYWRkSW1hZ2UgZG9lcyBub3Qgc3VwcG9ydCBmaWxlcyBvZiB0eXBlICdcIiArXG4gICAgICAgICAgZm9ybWF0ICtcbiAgICAgICAgICBcIicsIHBsZWFzZSBlbnN1cmUgdGhhdCBhIHBsdWdpbiBmb3IgJ1wiICtcbiAgICAgICAgICBmb3JtYXQgK1xuICAgICAgICAgIFwiJyBzdXBwb3J0IGlzIGFkZGVkLlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIG5vdyBkbyB0aGUgaGVhdnkgbGlmdGluZ1xuXG4gICAgaWYgKG5vdERlZmluZWQoYWxpYXMpKSB7XG4gICAgICBhbGlhcyA9IGdlbmVyYXRlQWxpYXNGcm9tSW1hZ2VEYXRhKGltYWdlRGF0YSk7XG4gICAgfVxuICAgIHJlc3VsdCA9IGNoZWNrSW1hZ2VzRm9yQWxpYXMuY2FsbCh0aGlzLCBhbGlhcyk7XG5cbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgaWYgKHN1cHBvcnRzQXJyYXlCdWZmZXIoKSkge1xuICAgICAgICAvLyBubyBuZWVkIHRvIGNvbnZlcnQgaWYgaW1hZ2VEYXRhIGlzIGFscmVhZHkgdWludDhhcnJheVxuICAgICAgICBpZiAoIShpbWFnZURhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSAmJiBmb3JtYXQgIT09IFwiUkdCQVwiKSB7XG4gICAgICAgICAgZGF0YUFzQmluYXJ5U3RyaW5nID0gaW1hZ2VEYXRhO1xuICAgICAgICAgIGltYWdlRGF0YSA9IGJpbmFyeVN0cmluZ1RvVWludDhBcnJheShpbWFnZURhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdCA9IHRoaXNbXCJwcm9jZXNzXCIgKyBmb3JtYXQudG9VcHBlckNhc2UoKV0oXG4gICAgICAgIGltYWdlRGF0YSxcbiAgICAgICAgZ2V0SW1hZ2VJbmRleC5jYWxsKHRoaXMpLFxuICAgICAgICBhbGlhcyxcbiAgICAgICAgY2hlY2tDb21wcmVzc1ZhbHVlKGNvbXByZXNzaW9uKSxcbiAgICAgICAgZGF0YUFzQmluYXJ5U3RyaW5nXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxzdCBwcm9jZXNzaW5nIHRoZSBpbWFnZS5cIik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuYW1lIGNvbnZlcnRCYXNlNjRUb0JpbmFyeVN0cmluZ1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ0RhdGFcbiAgICogQHJldHVybnMge3N0cmluZ30gYmluYXJ5IHN0cmluZ1xuICAgKi9cbiAgdmFyIGNvbnZlcnRCYXNlNjRUb0JpbmFyeVN0cmluZyA9IChqc1BERkFQSS5fX2FkZGltYWdlX18uY29udmVydEJhc2U2NFRvQmluYXJ5U3RyaW5nID0gZnVuY3Rpb24oXG4gICAgc3RyaW5nRGF0YSxcbiAgICB0aHJvd0Vycm9yXG4gICkge1xuICAgIHRocm93RXJyb3IgPSB0eXBlb2YgdGhyb3dFcnJvciA9PT0gXCJib29sZWFuXCIgPyB0aHJvd0Vycm9yIDogdHJ1ZTtcbiAgICB2YXIgYmFzZTY0SW5mbztcbiAgICB2YXIgaW1hZ2VEYXRhID0gXCJcIjtcbiAgICB2YXIgcmF3RGF0YTtcblxuICAgIGlmICh0eXBlb2Ygc3RyaW5nRGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgYmFzZTY0SW5mbyA9IGV4dHJhY3RJbWFnZUZyb21EYXRhVXJsKHN0cmluZ0RhdGEpO1xuICAgICAgcmF3RGF0YSA9IGJhc2U2NEluZm8gIT09IG51bGwgPyBiYXNlNjRJbmZvLmRhdGEgOiBzdHJpbmdEYXRhO1xuXG4gICAgICB0cnkge1xuICAgICAgICBpbWFnZURhdGEgPSBhdG9iKHJhd0RhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAodGhyb3dFcnJvcikge1xuICAgICAgICAgIGlmICghdmFsaWRhdGVTdHJpbmdBc0Jhc2U2NChyYXdEYXRhKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcIlN1cHBsaWVkIERhdGEgaXMgbm90IGEgdmFsaWQgYmFzZTY0LVN0cmluZyBqc1BERi5jb252ZXJ0QmFzZTY0VG9CaW5hcnlTdHJpbmcgXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgXCJhdG9iLUVycm9yIGluIGpzUERGLmNvbnZlcnRCYXNlNjRUb0JpbmFyeVN0cmluZyBcIiArIGUubWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGltYWdlRGF0YTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEBuYW1lIGdldEltYWdlUHJvcGVydGllc1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IGltYWdlRGF0YVxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAganNQREZBUEkuZ2V0SW1hZ2VQcm9wZXJ0aWVzID0gZnVuY3Rpb24oaW1hZ2VEYXRhKSB7XG4gICAgdmFyIGltYWdlO1xuICAgIHZhciB0bXBJbWFnZURhdGEgPSBcIlwiO1xuICAgIHZhciBmb3JtYXQ7XG5cbiAgICBpZiAoaXNET01FbGVtZW50KGltYWdlRGF0YSkpIHtcbiAgICAgIGltYWdlRGF0YSA9IGdldEltYWdlRGF0YUZyb21FbGVtZW50KGltYWdlRGF0YSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGltYWdlRGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgZ2V0SW1hZ2VGaWxlVHlwZUJ5SW1hZ2VEYXRhKGltYWdlRGF0YSkgPT09IFVOS05PV05cbiAgICApIHtcbiAgICAgIHRtcEltYWdlRGF0YSA9IGNvbnZlcnRCYXNlNjRUb0JpbmFyeVN0cmluZyhpbWFnZURhdGEsIGZhbHNlKTtcblxuICAgICAgaWYgKHRtcEltYWdlRGF0YSA9PT0gXCJcIikge1xuICAgICAgICB0bXBJbWFnZURhdGEgPSBqc1BERkFQSS5sb2FkRmlsZShpbWFnZURhdGEpIHx8IFwiXCI7XG4gICAgICB9XG4gICAgICBpbWFnZURhdGEgPSB0bXBJbWFnZURhdGE7XG4gICAgfVxuXG4gICAgZm9ybWF0ID0gZ2V0SW1hZ2VGaWxlVHlwZUJ5SW1hZ2VEYXRhKGltYWdlRGF0YSk7XG4gICAgaWYgKCFpc0ltYWdlVHlwZVN1cHBvcnRlZChmb3JtYXQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiYWRkSW1hZ2UgZG9lcyBub3Qgc3VwcG9ydCBmaWxlcyBvZiB0eXBlICdcIiArXG4gICAgICAgICAgZm9ybWF0ICtcbiAgICAgICAgICBcIicsIHBsZWFzZSBlbnN1cmUgdGhhdCBhIHBsdWdpbiBmb3IgJ1wiICtcbiAgICAgICAgICBmb3JtYXQgK1xuICAgICAgICAgIFwiJyBzdXBwb3J0IGlzIGFkZGVkLlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChzdXBwb3J0c0FycmF5QnVmZmVyKCkgJiYgIShpbWFnZURhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgaW1hZ2VEYXRhID0gYmluYXJ5U3RyaW5nVG9VaW50OEFycmF5KGltYWdlRGF0YSk7XG4gICAgfVxuXG4gICAgaW1hZ2UgPSB0aGlzW1wicHJvY2Vzc1wiICsgZm9ybWF0LnRvVXBwZXJDYXNlKCldKGltYWdlRGF0YSk7XG5cbiAgICBpZiAoIWltYWdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxzdCBwcm9jZXNzaW5nIHRoZSBpbWFnZVwiKTtcbiAgICB9XG5cbiAgICBpbWFnZS5maWxlVHlwZSA9IGZvcm1hdDtcblxuICAgIHJldHVybiBpbWFnZTtcbiAgfTtcbn0pKGpzUERGLkFQSSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgU3RldmVuIFNwdW5naW4gKFR3ZWx2ZVRvbmUgTExDKSAgc3RldmVuQHR3ZWx2ZXRvbmUudHZcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiAqL1xuXG4vKipcbiAqIGpzUERGIEFubm90YXRpb25zIFBsdWdJblxuICpcbiAqIFRoZXJlIGFyZSBtYW55IHR5cGVzIG9mIGFubm90YXRpb25zIGluIGEgUERGIGRvY3VtZW50LiBBbm5vdGF0aW9ucyBhcmUgcGxhY2VkXG4gKiBvbiBhIHBhZ2UgYXQgYSBwYXJ0aWN1bGFyIGxvY2F0aW9uLiBUaGV5IGFyZSBub3QgJ2F0dGFjaGVkJyB0byBhbiBvYmplY3QuXG4gKiA8YnIgLz5cbiAqIFRoaXMgcGx1Z2luIGN1cnJlbnQgc3VwcG9ydHMgPGJyIC8+XG4gKiA8bGk+IEdvdG8gUGFnZSAoc2V0IHBhZ2VOdW1iZXIgYW5kIHRvcCBpbiBvcHRpb25zKVxuICogPGxpPiBHb3RvIE5hbWUgKHNldCBuYW1lIGFuZCB0b3AgaW4gb3B0aW9ucylcbiAqIDxsaT4gR290byBVUkwgKHNldCB1cmwgaW4gb3B0aW9ucylcbiAqIDxwPlxuICogXHRUaGUgZGVzdGluYXRpb24gbWFnbmlmaWNhdGlvbiBmYWN0b3IgY2FuIGFsc28gYmUgc3BlY2lmaWVkIHdoZW4gZ290byBpcyBhIHBhZ2UgbnVtYmVyIG9yIGEgbmFtZWQgZGVzdGluYXRpb24uIChzZWUgZG9jdW1lbnRhdGlvbiBiZWxvdylcbiAqICAoc2V0IG1hZ0ZhY3RvciBpbiBvcHRpb25zKS4gIFhZWiBpcyB0aGUgZGVmYXVsdC5cbiAqIDwvcD5cbiAqIDxwPlxuICogIExpbmtzLCBUZXh0LCBQb3B1cCwgYW5kIEZyZWVUZXh0IGFyZSBzdXBwb3J0ZWQuXG4gKiA8L3A+XG4gKiA8cD5cbiAqIE9wdGlvbnMgSW4gUERGIHNwZWMgTm90IEltcGxlbWVudGVkIFlldFxuICogPGxpPiBsaW5rIGJvcmRlclxuICogPGxpPiBuYW1lZCB0YXJnZXRcbiAqIDxsaT4gcGFnZSBjb29yZGluYXRlc1xuICogPGxpPiBkZXN0aW5hdGlvbiBwYWdlIHNjYWxpbmcgYW5kIGxheW91dFxuICogPGxpPiBhY3Rpb25zIG90aGVyIHRoYW4gVVJMIGFuZCBHb3RvUGFnZVxuICogPGxpPiBiYWNrZ3JvdW5kIC8gaG92ZXIgYWN0aW9uc1xuICogPC9wPlxuICogQG5hbWUgYW5ub3RhdGlvbnNcbiAqIEBtb2R1bGVcbiAqL1xuXG4vKlxuICAgIERlc3RpbmF0aW9uIE1hZ25pZmljYXRpb24gRmFjdG9yc1xuICAgIFNlZSBQREYgMS4zIFBhZ2UgMzg2IGZvciBtZWFuaW5ncyBhbmQgb3B0aW9uc1xuXG4gICAgW3N1cHBvcnRlZF1cblx0WFlaIChvcHRpb25zOyBsZWZ0IHRvcCB6b29tKVxuXHRGaXQgKG5vIG9wdGlvbnMpXG5cdEZpdEggKG9wdGlvbnM6IHRvcClcblx0Rml0ViAob3B0aW9uczogbGVmdClcblxuXHRbbm90IHN1cHBvcnRlZF1cblx0Rml0UlxuXHRGaXRCXG5cdEZpdEJIXG5cdEZpdEJWXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBub3RFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICh0eXBlb2Ygb2JqICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmIChvYmogIT0gXCJcIikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAganNQREYuQVBJLmV2ZW50cy5wdXNoKFtcbiAgICBcImFkZFBhZ2VcIixcbiAgICBmdW5jdGlvbihhZGRQYWdlRGF0YSkge1xuICAgICAgdmFyIHBhZ2VJbmZvID0gdGhpcy5pbnRlcm5hbC5nZXRQYWdlSW5mbyhhZGRQYWdlRGF0YS5wYWdlTnVtYmVyKTtcbiAgICAgIHBhZ2VJbmZvLnBhZ2VDb250ZXh0LmFubm90YXRpb25zID0gW107XG4gICAgfVxuICBdKTtcblxuICBqc1BERkFQSS5ldmVudHMucHVzaChbXG4gICAgXCJwdXRQYWdlXCIsXG4gICAgZnVuY3Rpb24ocHV0UGFnZURhdGEpIHtcbiAgICAgIHZhciBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZVN0cmluZyA9IHRoaXMuaW50ZXJuYWwuZ2V0Q29vcmRpbmF0ZVN0cmluZztcbiAgICAgIHZhciBnZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcgPSB0aGlzLmludGVybmFsXG4gICAgICAgIC5nZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmc7XG4gICAgICB2YXIgcGFnZUluZm8gPSB0aGlzLmludGVybmFsLmdldFBhZ2VJbmZvQnlPYmpJZChwdXRQYWdlRGF0YS5vYmpJZCk7XG4gICAgICB2YXIgcGFnZUFubm9zID0gcHV0UGFnZURhdGEucGFnZUNvbnRleHQuYW5ub3RhdGlvbnM7XG5cbiAgICAgIHZhciBhbm5vLCByZWN0LCBsaW5lO1xuICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHBhZ2VBbm5vcy5sZW5ndGggJiYgIWZvdW5kOyBhKyspIHtcbiAgICAgICAgYW5ubyA9IHBhZ2VBbm5vc1thXTtcbiAgICAgICAgc3dpdGNoIChhbm5vLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwibGlua1wiOlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBub3RFbXB0eShhbm5vLm9wdGlvbnMudXJsKSB8fFxuICAgICAgICAgICAgICBub3RFbXB0eShhbm5vLm9wdGlvbnMucGFnZU51bWJlcilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwicmVmZXJlbmNlXCI6XG4gICAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICBjYXNlIFwiZnJlZXRleHRcIjpcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQgPT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmludGVybmFsLndyaXRlKFwiL0Fubm90cyBbXCIpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlQW5ub3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYW5ubyA9IHBhZ2VBbm5vc1tpXTtcbiAgICAgICAgdmFyIGVzY2FwZSA9IHRoaXMuaW50ZXJuYWwucGRmRXNjYXBlO1xuICAgICAgICB2YXIgZW5jcnlwdG9yID0gdGhpcy5pbnRlcm5hbC5nZXRFbmNyeXB0b3IocHV0UGFnZURhdGEub2JqSWQpO1xuXG4gICAgICAgIHN3aXRjaCAoYW5uby50eXBlKSB7XG4gICAgICAgICAgY2FzZSBcInJlZmVyZW5jZVwiOlxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlcyB0byBXaWRnZXQgQW5ub3RhdGlvbnMgKGZvciBBY3JvRm9ybSBGaWVsZHMpXG4gICAgICAgICAgICB0aGlzLmludGVybmFsLndyaXRlKFwiIFwiICsgYW5uby5vYmplY3Qub2JqSWQgKyBcIiAwIFIgXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGFuIG9iamVjdCBmb3IgYm90aCB0aGUgdGV4dCBhbmQgdGhlIHBvcHVwXG4gICAgICAgICAgICB2YXIgb2JqVGV4dCA9IHRoaXMuaW50ZXJuYWwubmV3QWRkaXRpb25hbE9iamVjdCgpO1xuICAgICAgICAgICAgdmFyIG9ialBvcHVwID0gdGhpcy5pbnRlcm5hbC5uZXdBZGRpdGlvbmFsT2JqZWN0KCk7XG4gICAgICAgICAgICB2YXIgZW5jcnlwdG9yVGV4dCA9IHRoaXMuaW50ZXJuYWwuZ2V0RW5jcnlwdG9yKG9ialRleHQub2JqSWQpO1xuXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBhbm5vLnRpdGxlIHx8IFwiTm90ZVwiO1xuICAgICAgICAgICAgcmVjdCA9XG4gICAgICAgICAgICAgIFwiL1JlY3QgW1wiICtcbiAgICAgICAgICAgICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoYW5uby5ib3VuZHMueCkgK1xuICAgICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICAgIGdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZyhhbm5vLmJvdW5kcy55ICsgYW5uby5ib3VuZHMuaCkgK1xuICAgICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICAgIGdldEhvcml6b250YWxDb29yZGluYXRlU3RyaW5nKGFubm8uYm91bmRzLnggKyBhbm5vLmJvdW5kcy53KSArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nKGFubm8uYm91bmRzLnkpICtcbiAgICAgICAgICAgICAgXCJdIFwiO1xuXG4gICAgICAgICAgICBsaW5lID1cbiAgICAgICAgICAgICAgXCI8PC9UeXBlIC9Bbm5vdCAvU3VidHlwZSAvXCIgK1xuICAgICAgICAgICAgICBcIlRleHRcIiArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgcmVjdCArXG4gICAgICAgICAgICAgIFwiL0NvbnRlbnRzIChcIiArXG4gICAgICAgICAgICAgIGVzY2FwZShlbmNyeXB0b3JUZXh0KGFubm8uY29udGVudHMpKSArXG4gICAgICAgICAgICAgIFwiKVwiO1xuICAgICAgICAgICAgbGluZSArPSBcIiAvUG9wdXAgXCIgKyBvYmpQb3B1cC5vYmpJZCArIFwiIDAgUlwiO1xuICAgICAgICAgICAgbGluZSArPSBcIiAvUCBcIiArIHBhZ2VJbmZvLm9iaklkICsgXCIgMCBSXCI7XG4gICAgICAgICAgICBsaW5lICs9IFwiIC9UIChcIiArIGVzY2FwZShlbmNyeXB0b3JUZXh0KHRpdGxlKSkgKyBcIikgPj5cIjtcbiAgICAgICAgICAgIG9ialRleHQuY29udGVudCA9IGxpbmU7XG5cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBvYmpUZXh0Lm9iaklkICsgXCIgMCBSXCI7XG4gICAgICAgICAgICB2YXIgcG9wb2ZmID0gMzA7XG4gICAgICAgICAgICByZWN0ID1cbiAgICAgICAgICAgICAgXCIvUmVjdCBbXCIgK1xuICAgICAgICAgICAgICBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZVN0cmluZyhhbm5vLmJvdW5kcy54ICsgcG9wb2ZmKSArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nKGFubm8uYm91bmRzLnkgKyBhbm5vLmJvdW5kcy5oKSArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoXG4gICAgICAgICAgICAgICAgYW5uby5ib3VuZHMueCArIGFubm8uYm91bmRzLncgKyBwb3BvZmZcbiAgICAgICAgICAgICAgKSArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nKGFubm8uYm91bmRzLnkpICtcbiAgICAgICAgICAgICAgXCJdIFwiO1xuICAgICAgICAgICAgbGluZSA9XG4gICAgICAgICAgICAgIFwiPDwvVHlwZSAvQW5ub3QgL1N1YnR5cGUgL1wiICtcbiAgICAgICAgICAgICAgXCJQb3B1cFwiICtcbiAgICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgICByZWN0ICtcbiAgICAgICAgICAgICAgXCIgL1BhcmVudCBcIiArXG4gICAgICAgICAgICAgIHBhcmVudDtcbiAgICAgICAgICAgIGlmIChhbm5vLm9wZW4pIHtcbiAgICAgICAgICAgICAgbGluZSArPSBcIiAvT3BlbiB0cnVlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lICs9IFwiID4+XCI7XG4gICAgICAgICAgICBvYmpQb3B1cC5jb250ZW50ID0gbGluZTtcblxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbC53cml0ZShvYmpUZXh0Lm9iaklkLCBcIjAgUlwiLCBvYmpQb3B1cC5vYmpJZCwgXCIwIFJcIik7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJmcmVldGV4dFwiOlxuICAgICAgICAgICAgcmVjdCA9XG4gICAgICAgICAgICAgIFwiL1JlY3QgW1wiICtcbiAgICAgICAgICAgICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoYW5uby5ib3VuZHMueCkgK1xuICAgICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICAgIGdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZyhhbm5vLmJvdW5kcy55KSArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoYW5uby5ib3VuZHMueCArIGFubm8uYm91bmRzLncpICtcbiAgICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgICBnZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcoYW5uby5ib3VuZHMueSArIGFubm8uYm91bmRzLmgpICtcbiAgICAgICAgICAgICAgXCJdIFwiO1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gYW5uby5jb2xvciB8fCBcIiMwMDAwMDBcIjtcbiAgICAgICAgICAgIGxpbmUgPVxuICAgICAgICAgICAgICBcIjw8L1R5cGUgL0Fubm90IC9TdWJ0eXBlIC9cIiArXG4gICAgICAgICAgICAgIFwiRnJlZVRleHRcIiArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgcmVjdCArXG4gICAgICAgICAgICAgIFwiL0NvbnRlbnRzIChcIiArXG4gICAgICAgICAgICAgIGVzY2FwZShlbmNyeXB0b3IoYW5uby5jb250ZW50cykpICtcbiAgICAgICAgICAgICAgXCIpXCI7XG4gICAgICAgICAgICBsaW5lICs9XG4gICAgICAgICAgICAgIFwiIC9EUyhmb250OiBIZWx2ZXRpY2Esc2Fucy1zZXJpZiAxMi4wcHQ7IHRleHQtYWxpZ246bGVmdDsgY29sb3I6I1wiICtcbiAgICAgICAgICAgICAgY29sb3IgK1xuICAgICAgICAgICAgICBcIilcIjtcbiAgICAgICAgICAgIGxpbmUgKz0gXCIgL0JvcmRlciBbMCAwIDBdXCI7XG4gICAgICAgICAgICBsaW5lICs9IFwiID4+XCI7XG4gICAgICAgICAgICB0aGlzLmludGVybmFsLndyaXRlKGxpbmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImxpbmtcIjpcbiAgICAgICAgICAgIGlmIChhbm5vLm9wdGlvbnMubmFtZSkge1xuICAgICAgICAgICAgICB2YXIgbG9jID0gdGhpcy5hbm5vdGF0aW9ucy5fbmFtZU1hcFthbm5vLm9wdGlvbnMubmFtZV07XG4gICAgICAgICAgICAgIGFubm8ub3B0aW9ucy5wYWdlTnVtYmVyID0gbG9jLnBhZ2U7XG4gICAgICAgICAgICAgIGFubm8ub3B0aW9ucy50b3AgPSBsb2MueTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICghYW5uby5vcHRpb25zLnRvcCkge1xuICAgICAgICAgICAgICAgIGFubm8ub3B0aW9ucy50b3AgPSAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlY3QgPVxuICAgICAgICAgICAgICBcIi9SZWN0IFtcIiArXG4gICAgICAgICAgICAgIGFubm8uZmluYWxCb3VuZHMueCArXG4gICAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgICAgYW5uby5maW5hbEJvdW5kcy55ICtcbiAgICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgICBhbm5vLmZpbmFsQm91bmRzLncgK1xuICAgICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICAgIGFubm8uZmluYWxCb3VuZHMuaCArXG4gICAgICAgICAgICAgIFwiXSBcIjtcblxuICAgICAgICAgICAgbGluZSA9IFwiXCI7XG4gICAgICAgICAgICBpZiAoYW5uby5vcHRpb25zLnVybCkge1xuICAgICAgICAgICAgICBsaW5lID1cbiAgICAgICAgICAgICAgICBcIjw8L1R5cGUgL0Fubm90IC9TdWJ0eXBlIC9MaW5rIFwiICtcbiAgICAgICAgICAgICAgICByZWN0ICtcbiAgICAgICAgICAgICAgICBcIi9Cb3JkZXIgWzAgMCAwXSAvQSA8PC9TIC9VUkkgL1VSSSAoXCIgK1xuICAgICAgICAgICAgICAgIGVzY2FwZShlbmNyeXB0b3IoYW5uby5vcHRpb25zLnVybCkpICtcbiAgICAgICAgICAgICAgICBcIikgPj5cIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5uby5vcHRpb25zLnBhZ2VOdW1iZXIpIHtcbiAgICAgICAgICAgICAgLy8gZmlyc3QgcGFnZSBpcyAwXG4gICAgICAgICAgICAgIHZhciBpbmZvID0gdGhpcy5pbnRlcm5hbC5nZXRQYWdlSW5mbyhhbm5vLm9wdGlvbnMucGFnZU51bWJlcik7XG4gICAgICAgICAgICAgIGxpbmUgPVxuICAgICAgICAgICAgICAgIFwiPDwvVHlwZSAvQW5ub3QgL1N1YnR5cGUgL0xpbmsgXCIgK1xuICAgICAgICAgICAgICAgIHJlY3QgK1xuICAgICAgICAgICAgICAgIFwiL0JvcmRlciBbMCAwIDBdIC9EZXN0IFtcIiArXG4gICAgICAgICAgICAgICAgaW5mby5vYmpJZCArXG4gICAgICAgICAgICAgICAgXCIgMCBSXCI7XG4gICAgICAgICAgICAgIGFubm8ub3B0aW9ucy5tYWdGYWN0b3IgPSBhbm5vLm9wdGlvbnMubWFnRmFjdG9yIHx8IFwiWFlaXCI7XG4gICAgICAgICAgICAgIHN3aXRjaCAoYW5uby5vcHRpb25zLm1hZ0ZhY3Rvcikge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJGaXRcIjpcbiAgICAgICAgICAgICAgICAgIGxpbmUgKz0gXCIgL0ZpdF1cIjtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJGaXRIXCI6XG4gICAgICAgICAgICAgICAgICBsaW5lICs9IFwiIC9GaXRIIFwiICsgYW5uby5vcHRpb25zLnRvcCArIFwiXVwiO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkZpdFZcIjpcbiAgICAgICAgICAgICAgICAgIGFubm8ub3B0aW9ucy5sZWZ0ID0gYW5uby5vcHRpb25zLmxlZnQgfHwgMDtcbiAgICAgICAgICAgICAgICAgIGxpbmUgKz0gXCIgL0ZpdFYgXCIgKyBhbm5vLm9wdGlvbnMubGVmdCArIFwiXVwiO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlhZWlwiOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICB2YXIgdG9wID0gZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nKGFubm8ub3B0aW9ucy50b3ApO1xuICAgICAgICAgICAgICAgICAgYW5uby5vcHRpb25zLmxlZnQgPSBhbm5vLm9wdGlvbnMubGVmdCB8fCAwO1xuICAgICAgICAgICAgICAgICAgLy8gMCBvciBudWxsIHpvb20gd2lsbCBub3QgY2hhbmdlIHpvb20gZmFjdG9yXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFubm8ub3B0aW9ucy56b29tID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFubm8ub3B0aW9ucy56b29tID0gMDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGxpbmUgKz1cbiAgICAgICAgICAgICAgICAgICAgXCIgL1hZWiBcIiArXG4gICAgICAgICAgICAgICAgICAgIGFubm8ub3B0aW9ucy5sZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgICAgICAgICB0b3AgK1xuICAgICAgICAgICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICAgICAgICAgIGFubm8ub3B0aW9ucy56b29tICtcbiAgICAgICAgICAgICAgICAgICAgXCJdXCI7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGluZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgIGxpbmUgKz0gXCIgPj5cIjtcbiAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbC53cml0ZShsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmludGVybmFsLndyaXRlKFwiXVwiKTtcbiAgICB9XG4gIF0pO1xuXG4gIC8qKlxuICAgKiBAbmFtZSBjcmVhdGVBbm5vdGF0aW9uXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cbiAganNQREZBUEkuY3JlYXRlQW5ub3RhdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgcGFnZUluZm8gPSB0aGlzLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpO1xuICAgIHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XG4gICAgICBjYXNlIFwibGlua1wiOlxuICAgICAgICB0aGlzLmxpbmsoXG4gICAgICAgICAgb3B0aW9ucy5ib3VuZHMueCxcbiAgICAgICAgICBvcHRpb25zLmJvdW5kcy55LFxuICAgICAgICAgIG9wdGlvbnMuYm91bmRzLncsXG4gICAgICAgICAgb3B0aW9ucy5ib3VuZHMuaCxcbiAgICAgICAgICBvcHRpb25zXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgIGNhc2UgXCJmcmVldGV4dFwiOlxuICAgICAgICBwYWdlSW5mby5wYWdlQ29udGV4dC5hbm5vdGF0aW9ucy5wdXNoKG9wdGlvbnMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGxpbmtcbiAgICpcbiAgICogdmFsaWQgb3B0aW9uc1xuICAgKiA8bGk+IHBhZ2VOdW1iZXIgb3IgdXJsIFtyZXF1aXJlZF1cbiAgICogPHA+SWYgcGFnZU51bWJlciBpcyBzcGVjaWZpZWQsIHRvcCBhbmQgem9vbSBtYXkgYWxzbyBiZSBzcGVjaWZpZWQ8L3A+XG4gICAqIEBuYW1lIGxpbmtcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqL1xuICBqc1BERkFQSS5saW5rID0gZnVuY3Rpb24oeCwgeSwgdywgaCwgb3B0aW9ucykge1xuICAgIHZhciBwYWdlSW5mbyA9IHRoaXMuaW50ZXJuYWwuZ2V0Q3VycmVudFBhZ2VJbmZvKCk7XG4gICAgdmFyIGdldEhvcml6b250YWxDb29yZGluYXRlU3RyaW5nID0gdGhpcy5pbnRlcm5hbC5nZXRDb29yZGluYXRlU3RyaW5nO1xuICAgIHZhciBnZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcgPSB0aGlzLmludGVybmFsLmdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZztcblxuICAgIHBhZ2VJbmZvLnBhZ2VDb250ZXh0LmFubm90YXRpb25zLnB1c2goe1xuICAgICAgZmluYWxCb3VuZHM6IHtcbiAgICAgICAgeDogZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoeCksXG4gICAgICAgIHk6IGdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZyh5KSxcbiAgICAgICAgdzogZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoeCArIHcpLFxuICAgICAgICBoOiBnZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcoeSArIGgpXG4gICAgICB9LFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIHR5cGU6IFwibGlua1wiXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRzIHNpbmdsZSBsaW5lIHRleHQuXG4gICAqIFJldHVybnMgdGhlIHdpZHRoIG9mIHRoZSB0ZXh0L2xpbmtcbiAgICpcbiAgICogQG5hbWUgdGV4dFdpdGhMaW5rXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJucyB7bnVtYmVyfSB3aWR0aCB0aGUgd2lkdGggb2YgdGhlIHRleHQvbGlua1xuICAgKi9cbiAganNQREZBUEkudGV4dFdpdGhMaW5rID0gZnVuY3Rpb24odGV4dCwgeCwgeSwgb3B0aW9ucykge1xuICAgIHZhciB0b3RhbExpbmVXaWR0aCA9IHRoaXMuZ2V0VGV4dFdpZHRoKHRleHQpO1xuICAgIHZhciBsaW5lSGVpZ2h0ID0gdGhpcy5pbnRlcm5hbC5nZXRMaW5lSGVpZ2h0KCkgLyB0aGlzLmludGVybmFsLnNjYWxlRmFjdG9yO1xuICAgIHZhciBsaW5rSGVpZ2h0LCBsaW5rV2lkdGg7XG5cbiAgICAvLyBDaGVja2luZyBpZiBtYXhXaWR0aCBvcHRpb24gaXMgcGFzc2VkIHRvIGRldGVybWluZSBsaW5lV2lkdGggYW5kIG51bWJlciBvZiBsaW5lcyBmb3IgZWFjaCBsaW5lXG4gICAgaWYgKG9wdGlvbnMubWF4V2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIHsgbWF4V2lkdGggfSA9IG9wdGlvbnM7XG4gICAgICBsaW5rV2lkdGggPSBtYXhXaWR0aDtcbiAgICAgIHZhciBudW1PZkxpbmVzID0gdGhpcy5zcGxpdFRleHRUb1NpemUodGV4dCwgbGlua1dpZHRoKS5sZW5ndGg7XG4gICAgICBsaW5rSGVpZ2h0ID0gTWF0aC5jZWlsKGxpbmVIZWlnaHQgKiBudW1PZkxpbmVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlua1dpZHRoID0gdG90YWxMaW5lV2lkdGg7XG4gICAgICBsaW5rSGVpZ2h0ID0gbGluZUhlaWdodDtcbiAgICB9XG5cbiAgICB0aGlzLnRleHQodGV4dCwgeCwgeSwgb3B0aW9ucyk7XG5cbiAgICAvL1RPRE8gV2UgcmVhbGx5IG5lZWQgdGhlIHRleHQgYmFzZWxpbmUgaGVpZ2h0IHRvIGRvIHRoaXMgY29ycmVjdGx5LlxuICAgIC8vIE9yIGFiaWxpdHkgdG8gZHJhdyB0ZXh0IG9uIHRvcCwgYm90dG9tLCBjZW50ZXIsIG9yIGJhc2VsaW5lLlxuICAgIHkgKz0gbGluZUhlaWdodCAqIDAuMjtcbiAgICAvL2hhbmRsZSB4IHBvc2l0aW9uIGJhc2VkIG9uIHRoZSBhbGlnbiBvcHRpb25cbiAgICBpZiAob3B0aW9ucy5hbGlnbiA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgeCA9IHggLSB0b3RhbExpbmVXaWR0aCAvIDI7IC8vc2luY2Ugc3RhcnRpbmcgZnJvbSBjZW50ZXIgbW92ZSB0aGUgeCBwb3NpdGlvbiBieSBoYWxmIG9mIHRleHQgd2lkdGhcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuYWxpZ24gPT09IFwicmlnaHRcIikge1xuICAgICAgeCA9IHggLSB0b3RhbExpbmVXaWR0aDtcbiAgICB9XG4gICAgdGhpcy5saW5rKHgsIHkgLSBsaW5lSGVpZ2h0LCBsaW5rV2lkdGgsIGxpbmtIZWlnaHQsIG9wdGlvbnMpO1xuICAgIHJldHVybiB0b3RhbExpbmVXaWR0aDtcbiAgfTtcblxuICAvL1RPRE8gbW92ZSBpbnRvIGV4dGVybmFsIGxpYnJhcnlcbiAgLyoqXG4gICAqIEBuYW1lIGdldFRleHRXaWR0aFxuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICogQHJldHVybnMge251bWJlcn0gdHh0V2lkdGhcbiAgICovXG4gIGpzUERGQVBJLmdldFRleHRXaWR0aCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB2YXIgZm9udFNpemUgPSB0aGlzLmludGVybmFsLmdldEZvbnRTaXplKCk7XG4gICAgdmFyIHR4dFdpZHRoID1cbiAgICAgICh0aGlzLmdldFN0cmluZ1VuaXRXaWR0aCh0ZXh0KSAqIGZvbnRTaXplKSAvIHRoaXMuaW50ZXJuYWwuc2NhbGVGYWN0b3I7XG4gICAgcmV0dXJuIHR4dFdpZHRoO1xuICB9O1xuXG4gIHJldHVybiB0aGlzO1xufSkoanNQREYuQVBJKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBBcmFzIEFiYmFzaVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5cbi8qKlxuICoganNQREYgYXJhYmljIHBhcnNlciBQbHVnSW5cbiAqXG4gKiBAbmFtZSBhcmFiaWNcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qKlxuICAgKiBBcmFiaWMgc2hhcGUgc3Vic3RpdHV0aW9uczogY2hhciBjb2RlID0+IChpc29sYXRlZCwgZmluYWwsIGluaXRpYWwsIG1lZGlhbCkuXG4gICAqIEFyYWJpYyBTdWJzdGl0aW9uIEFcbiAgICovXG4gIHZhciBhcmFiaWNTdWJzdGl0aW9uQSA9IHtcbiAgICAweDA2MjE6IFsweGZlODBdLCAvLyBBUkFCSUMgTEVUVEVSIEhBTVpBXG4gICAgMHgwNjIyOiBbMHhmZTgxLCAweGZlODJdLCAvLyBBUkFCSUMgTEVUVEVSIEFMRUYgV0lUSCBNQUREQSBBQk9WRVxuICAgIDB4MDYyMzogWzB4ZmU4MywgMHhmZTg0XSwgLy8gQVJBQklDIExFVFRFUiBBTEVGIFdJVEggSEFNWkEgQUJPVkVcbiAgICAweDA2MjQ6IFsweGZlODUsIDB4ZmU4Nl0sIC8vIEFSQUJJQyBMRVRURVIgV0FXIFdJVEggSEFNWkEgQUJPVkVcbiAgICAweDA2MjU6IFsweGZlODcsIDB4ZmU4OF0sIC8vIEFSQUJJQyBMRVRURVIgQUxFRiBXSVRIIEhBTVpBIEJFTE9XXG4gICAgMHgwNjI2OiBbMHhmZTg5LCAweGZlOGEsIDB4ZmU4YiwgMHhmZThjXSwgLy8gQVJBQklDIExFVFRFUiBZRUggV0lUSCBIQU1aQSBBQk9WRVxuICAgIDB4MDYyNzogWzB4ZmU4ZCwgMHhmZThlXSwgLy8gQVJBQklDIExFVFRFUiBBTEVGXG4gICAgMHgwNjI4OiBbMHhmZThmLCAweGZlOTAsIDB4ZmU5MSwgMHhmZTkyXSwgLy8gQVJBQklDIExFVFRFUiBCRUhcbiAgICAweDA2Mjk6IFsweGZlOTMsIDB4ZmU5NF0sIC8vIEFSQUJJQyBMRVRURVIgVEVIIE1BUkJVVEFcbiAgICAweDA2MmE6IFsweGZlOTUsIDB4ZmU5NiwgMHhmZTk3LCAweGZlOThdLCAvLyBBUkFCSUMgTEVUVEVSIFRFSFxuICAgIDB4MDYyYjogWzB4ZmU5OSwgMHhmZTlhLCAweGZlOWIsIDB4ZmU5Y10sIC8vIEFSQUJJQyBMRVRURVIgVEhFSFxuICAgIDB4MDYyYzogWzB4ZmU5ZCwgMHhmZTllLCAweGZlOWYsIDB4ZmVhMF0sIC8vIEFSQUJJQyBMRVRURVIgSkVFTVxuICAgIDB4MDYyZDogWzB4ZmVhMSwgMHhmZWEyLCAweGZlYTMsIDB4ZmVhNF0sIC8vIEFSQUJJQyBMRVRURVIgSEFIXG4gICAgMHgwNjJlOiBbMHhmZWE1LCAweGZlYTYsIDB4ZmVhNywgMHhmZWE4XSwgLy8gQVJBQklDIExFVFRFUiBLSEFIXG4gICAgMHgwNjJmOiBbMHhmZWE5LCAweGZlYWFdLCAvLyBBUkFCSUMgTEVUVEVSIERBTFxuICAgIDB4MDYzMDogWzB4ZmVhYiwgMHhmZWFjXSwgLy8gQVJBQklDIExFVFRFUiBUSEFMXG4gICAgMHgwNjMxOiBbMHhmZWFkLCAweGZlYWVdLCAvLyBBUkFCSUMgTEVUVEVSIFJFSFxuICAgIDB4MDYzMjogWzB4ZmVhZiwgMHhmZWIwXSwgLy8gQVJBQklDIExFVFRFUiBaQUlOXG4gICAgMHgwNjMzOiBbMHhmZWIxLCAweGZlYjIsIDB4ZmViMywgMHhmZWI0XSwgLy8gQVJBQklDIExFVFRFUiBTRUVOXG4gICAgMHgwNjM0OiBbMHhmZWI1LCAweGZlYjYsIDB4ZmViNywgMHhmZWI4XSwgLy8gQVJBQklDIExFVFRFUiBTSEVFTlxuICAgIDB4MDYzNTogWzB4ZmViOSwgMHhmZWJhLCAweGZlYmIsIDB4ZmViY10sIC8vIEFSQUJJQyBMRVRURVIgU0FEXG4gICAgMHgwNjM2OiBbMHhmZWJkLCAweGZlYmUsIDB4ZmViZiwgMHhmZWMwXSwgLy8gQVJBQklDIExFVFRFUiBEQURcbiAgICAweDA2Mzc6IFsweGZlYzEsIDB4ZmVjMiwgMHhmZWMzLCAweGZlYzRdLCAvLyBBUkFCSUMgTEVUVEVSIFRBSFxuICAgIDB4MDYzODogWzB4ZmVjNSwgMHhmZWM2LCAweGZlYzcsIDB4ZmVjOF0sIC8vIEFSQUJJQyBMRVRURVIgWkFIXG4gICAgMHgwNjM5OiBbMHhmZWM5LCAweGZlY2EsIDB4ZmVjYiwgMHhmZWNjXSwgLy8gQVJBQklDIExFVFRFUiBBSU5cbiAgICAweDA2M2E6IFsweGZlY2QsIDB4ZmVjZSwgMHhmZWNmLCAweGZlZDBdLCAvLyBBUkFCSUMgTEVUVEVSIEdIQUlOXG4gICAgMHgwNjQxOiBbMHhmZWQxLCAweGZlZDIsIDB4ZmVkMywgMHhmZWQ0XSwgLy8gQVJBQklDIExFVFRFUiBGRUhcbiAgICAweDA2NDI6IFsweGZlZDUsIDB4ZmVkNiwgMHhmZWQ3LCAweGZlZDhdLCAvLyBBUkFCSUMgTEVUVEVSIFFBRlxuICAgIDB4MDY0MzogWzB4ZmVkOSwgMHhmZWRhLCAweGZlZGIsIDB4ZmVkY10sIC8vIEFSQUJJQyBMRVRURVIgS0FGXG4gICAgMHgwNjQ0OiBbMHhmZWRkLCAweGZlZGUsIDB4ZmVkZiwgMHhmZWUwXSwgLy8gQVJBQklDIExFVFRFUiBMQU1cbiAgICAweDA2NDU6IFsweGZlZTEsIDB4ZmVlMiwgMHhmZWUzLCAweGZlZTRdLCAvLyBBUkFCSUMgTEVUVEVSIE1FRU1cbiAgICAweDA2NDY6IFsweGZlZTUsIDB4ZmVlNiwgMHhmZWU3LCAweGZlZThdLCAvLyBBUkFCSUMgTEVUVEVSIE5PT05cbiAgICAweDA2NDc6IFsweGZlZTksIDB4ZmVlYSwgMHhmZWViLCAweGZlZWNdLCAvLyBBUkFCSUMgTEVUVEVSIEhFSFxuICAgIDB4MDY0ODogWzB4ZmVlZCwgMHhmZWVlXSwgLy8gQVJBQklDIExFVFRFUiBXQVdcbiAgICAweDA2NDk6IFsweGZlZWYsIDB4ZmVmMCwgNjQ0ODgsIDY0NDg5XSwgLy8gQVJBQklDIExFVFRFUiBBTEVGIE1BS1NVUkFcbiAgICAweDA2NGE6IFsweGZlZjEsIDB4ZmVmMiwgMHhmZWYzLCAweGZlZjRdLCAvLyBBUkFCSUMgTEVUVEVSIFlFSFxuICAgIDB4MDY3MTogWzB4ZmI1MCwgMHhmYjUxXSwgLy8gQVJBQklDIExFVFRFUiBBTEVGIFdBU0xBXG4gICAgMHgwNjc3OiBbMHhmYmRkXSwgLy8gQVJBQklDIExFVFRFUiBVIFdJVEggSEFNWkEgQUJPVkVcbiAgICAweDA2Nzk6IFsweGZiNjYsIDB4ZmI2NywgMHhmYjY4LCAweGZiNjldLCAvLyBBUkFCSUMgTEVUVEVSIFRURUhcbiAgICAweDA2N2E6IFsweGZiNWUsIDB4ZmI1ZiwgMHhmYjYwLCAweGZiNjFdLCAvLyBBUkFCSUMgTEVUVEVSIFRURUhFSFxuICAgIDB4MDY3YjogWzB4ZmI1MiwgMHhmYjUzLCAweGZiNTQsIDB4ZmI1NV0sIC8vIEFSQUJJQyBMRVRURVIgQkVFSFxuICAgIDB4MDY3ZTogWzB4ZmI1NiwgMHhmYjU3LCAweGZiNTgsIDB4ZmI1OV0sIC8vIEFSQUJJQyBMRVRURVIgUEVIXG4gICAgMHgwNjdmOiBbMHhmYjYyLCAweGZiNjMsIDB4ZmI2NCwgMHhmYjY1XSwgLy8gQVJBQklDIExFVFRFUiBURUhFSFxuICAgIDB4MDY4MDogWzB4ZmI1YSwgMHhmYjViLCAweGZiNWMsIDB4ZmI1ZF0sIC8vIEFSQUJJQyBMRVRURVIgQkVIRUhcbiAgICAweDA2ODM6IFsweGZiNzYsIDB4ZmI3NywgMHhmYjc4LCAweGZiNzldLCAvLyBBUkFCSUMgTEVUVEVSIE5ZRUhcbiAgICAweDA2ODQ6IFsweGZiNzIsIDB4ZmI3MywgMHhmYjc0LCAweGZiNzVdLCAvLyBBUkFCSUMgTEVUVEVSIERZRUhcbiAgICAweDA2ODY6IFsweGZiN2EsIDB4ZmI3YiwgMHhmYjdjLCAweGZiN2RdLCAvLyBBUkFCSUMgTEVUVEVSIFRDSEVIXG4gICAgMHgwNjg3OiBbMHhmYjdlLCAweGZiN2YsIDB4ZmI4MCwgMHhmYjgxXSwgLy8gQVJBQklDIExFVFRFUiBUQ0hFSEVIXG4gICAgMHgwNjg4OiBbMHhmYjg4LCAweGZiODldLCAvLyBBUkFCSUMgTEVUVEVSIEREQUxcbiAgICAweDA2OGM6IFsweGZiODQsIDB4ZmI4NV0sIC8vIEFSQUJJQyBMRVRURVIgREFIQUxcbiAgICAweDA2OGQ6IFsweGZiODIsIDB4ZmI4M10sIC8vIEFSQUJJQyBMRVRURVIgRERBSEFMXG4gICAgMHgwNjhlOiBbMHhmYjg2LCAweGZiODddLCAvLyBBUkFCSUMgTEVUVEVSIERVTFxuICAgIDB4MDY5MTogWzB4ZmI4YywgMHhmYjhkXSwgLy8gQVJBQklDIExFVFRFUiBSUkVIXG4gICAgMHgwNjk4OiBbMHhmYjhhLCAweGZiOGJdLCAvLyBBUkFCSUMgTEVUVEVSIEpFSFxuICAgIDB4MDZhNDogWzB4ZmI2YSwgMHhmYjZiLCAweGZiNmMsIDB4ZmI2ZF0sIC8vIEFSQUJJQyBMRVRURVIgVkVIXG4gICAgMHgwNmE2OiBbMHhmYjZlLCAweGZiNmYsIDB4ZmI3MCwgMHhmYjcxXSwgLy8gQVJBQklDIExFVFRFUiBQRUhFSFxuICAgIDB4MDZhOTogWzB4ZmI4ZSwgMHhmYjhmLCAweGZiOTAsIDB4ZmI5MV0sIC8vIEFSQUJJQyBMRVRURVIgS0VIRUhcbiAgICAweDA2YWQ6IFsweGZiZDMsIDB4ZmJkNCwgMHhmYmQ1LCAweGZiZDZdLCAvLyBBUkFCSUMgTEVUVEVSIE5HXG4gICAgMHgwNmFmOiBbMHhmYjkyLCAweGZiOTMsIDB4ZmI5NCwgMHhmYjk1XSwgLy8gQVJBQklDIExFVFRFUiBHQUZcbiAgICAweDA2YjE6IFsweGZiOWEsIDB4ZmI5YiwgMHhmYjljLCAweGZiOWRdLCAvLyBBUkFCSUMgTEVUVEVSIE5HT0VIXG4gICAgMHgwNmIzOiBbMHhmYjk2LCAweGZiOTcsIDB4ZmI5OCwgMHhmYjk5XSwgLy8gQVJBQklDIExFVFRFUiBHVUVIXG4gICAgMHgwNmJhOiBbMHhmYjllLCAweGZiOWZdLCAvLyBBUkFCSUMgTEVUVEVSIE5PT04gR0hVTk5BXG4gICAgMHgwNmJiOiBbMHhmYmEwLCAweGZiYTEsIDB4ZmJhMiwgMHhmYmEzXSwgLy8gQVJBQklDIExFVFRFUiBSTk9PTlxuICAgIDB4MDZiZTogWzB4ZmJhYSwgMHhmYmFiLCAweGZiYWMsIDB4ZmJhZF0sIC8vIEFSQUJJQyBMRVRURVIgSEVIIERPQUNIQVNITUVFXG4gICAgMHgwNmMwOiBbMHhmYmE0LCAweGZiYTVdLCAvLyBBUkFCSUMgTEVUVEVSIEhFSCBXSVRIIFlFSCBBQk9WRVxuICAgIDB4MDZjMTogWzB4ZmJhNiwgMHhmYmE3LCAweGZiYTgsIDB4ZmJhOV0sIC8vIEFSQUJJQyBMRVRURVIgSEVIIEdPQUxcbiAgICAweDA2YzU6IFsweGZiZTAsIDB4ZmJlMV0sIC8vIEFSQUJJQyBMRVRURVIgS0lSR0hJWiBPRVxuICAgIDB4MDZjNjogWzB4ZmJkOSwgMHhmYmRhXSwgLy8gQVJBQklDIExFVFRFUiBPRVxuICAgIDB4MDZjNzogWzB4ZmJkNywgMHhmYmQ4XSwgLy8gQVJBQklDIExFVFRFUiBVXG4gICAgMHgwNmM4OiBbMHhmYmRiLCAweGZiZGNdLCAvLyBBUkFCSUMgTEVUVEVSIFlVXG4gICAgMHgwNmM5OiBbMHhmYmUyLCAweGZiZTNdLCAvLyBBUkFCSUMgTEVUVEVSIEtJUkdISVogWVVcbiAgICAweDA2Y2I6IFsweGZiZGUsIDB4ZmJkZl0sIC8vIEFSQUJJQyBMRVRURVIgVkVcbiAgICAweDA2Y2M6IFsweGZiZmMsIDB4ZmJmZCwgMHhmYmZlLCAweGZiZmZdLCAvLyBBUkFCSUMgTEVUVEVSIEZBUlNJIFlFSFxuICAgIDB4MDZkMDogWzB4ZmJlNCwgMHhmYmU1LCAweGZiZTYsIDB4ZmJlN10sIC8vQVJBQklDIExFVFRFUiBFXG4gICAgMHgwNmQyOiBbMHhmYmFlLCAweGZiYWZdLCAvLyBBUkFCSUMgTEVUVEVSIFlFSCBCQVJSRUVcbiAgICAweDA2ZDM6IFsweGZiYjAsIDB4ZmJiMV0gLy8gQVJBQklDIExFVFRFUiBZRUggQkFSUkVFIFdJVEggSEFNWkEgQUJPVkVcbiAgfTtcblxuICAvKlxuICAgIHZhciBsaWdhdHVyZXNTdWJzdGl0dXRpb25BID0ge1xuICAgICAgICAweEZCRUE6IFtdLy8gQVJBQklDIExJR0FUVVJFIFlFSCBXSVRIIEhBTVpBIEFCT1ZFIFdJVEggQUxFRiBJU09MQVRFRCBGT1JNXG4gICAgfTtcbiAgICAqL1xuXG4gIHZhciBsaWdhdHVyZXMgPSB7XG4gICAgMHhmZWRmOiB7XG4gICAgICAweGZlODI6IDB4ZmVmNSwgLy8gQVJBQklDIExJR0FUVVJFIExBTSBXSVRIIEFMRUYgV0lUSCBNQUREQSBBQk9WRSBJU09MQVRFRCBGT1JNXG4gICAgICAweGZlODQ6IDB4ZmVmNywgLy8gQVJBQklDIExJR0FUVVJFIExBTSBXSVRIIEFMRUYgV0lUSCBIQU1aQSBBQk9WRSBJU09MQVRFRCBGT1JNXG4gICAgICAweGZlODg6IDB4ZmVmOSwgLy8gQVJBQklDIExJR0FUVVJFIExBTSBXSVRIIEFMRUYgV0lUSCBIQU1aQSBCRUxPVyBJU09MQVRFRCBGT1JNXG4gICAgICAweGZlOGU6IDB4ZmVmYiAvLyBBUkFCSUMgTElHQVRVUkUgTEFNIFdJVEggQUxFRiBJU09MQVRFRCBGT1JNXG4gICAgfSxcbiAgICAweGZlZTA6IHtcbiAgICAgIDB4ZmU4MjogMHhmZWY2LCAvLyBBUkFCSUMgTElHQVRVUkUgTEFNIFdJVEggQUxFRiBXSVRIIE1BRERBIEFCT1ZFIEZJTkFMIEZPUk1cbiAgICAgIDB4ZmU4NDogMHhmZWY4LCAvLyBBUkFCSUMgTElHQVRVUkUgTEFNIFdJVEggQUxFRiBXSVRIIEhBTVpBIEFCT1ZFIEZJTkFMIEZPUk1cbiAgICAgIDB4ZmU4ODogMHhmZWZhLCAvLyBBUkFCSUMgTElHQVRVUkUgTEFNIFdJVEggQUxFRiBXSVRIIEhBTVpBIEJFTE9XIEZJTkFMIEZPUk1cbiAgICAgIDB4ZmU4ZTogMHhmZWZjIC8vIEFSQUJJQyBMSUdBVFVSRSBMQU0gV0lUSCBBTEVGIEZJTkFMIEZPUk1cbiAgICB9LFxuICAgIDB4ZmU4ZDogeyAweGZlZGY6IHsgMHhmZWUwOiB7IDB4ZmVlYTogMHhmZGYyIH0gfSB9LCAvLyBBTExBSFxuICAgIDB4MDY1MToge1xuICAgICAgMHgwNjRjOiAweGZjNWUsIC8vIFNoYWRkYSArIERhbW1hdGFuXG4gICAgICAweDA2NGQ6IDB4ZmM1ZiwgLy8gU2hhZGRhICsgS2FzcmF0YW5cbiAgICAgIDB4MDY0ZTogMHhmYzYwLCAvLyBTaGFkZGEgKyBGYXRoYVxuICAgICAgMHgwNjRmOiAweGZjNjEsIC8vIFNoYWRkYSArIERhbW1hXG4gICAgICAweDA2NTA6IDB4ZmM2MiAvLyBTaGFkZGEgKyBLYXNyYVxuICAgIH1cbiAgfTtcblxuICB2YXIgYXJhYmljX2RpYWNyaXRpY3MgPSB7XG4gICAgMTYxMjogNjQ2MDYsIC8vIFNoYWRkYSArIERhbW1hdGFuXG4gICAgMTYxMzogNjQ2MDcsIC8vIFNoYWRkYSArIEthc3JhdGFuXG4gICAgMTYxNDogNjQ2MDgsIC8vIFNoYWRkYSArIEZhdGhhXG4gICAgMTYxNTogNjQ2MDksIC8vIFNoYWRkYSArIERhbW1hXG4gICAgMTYxNjogNjQ2MTAgLy8gU2hhZGRhICsgS2FzcmFcbiAgfTtcblxuICB2YXIgYWxmbGV0dGVyID0gWzE1NzAsIDE1NzEsIDE1NzMsIDE1NzVdO1xuXG4gIHZhciBub0NoYW5nZUluRm9ybSA9IC0xO1xuICB2YXIgaXNvbGF0ZWRGb3JtID0gMDtcbiAgdmFyIGZpbmFsRm9ybSA9IDE7XG4gIHZhciBpbml0aWFsRm9ybSA9IDI7XG4gIHZhciBtZWRpYWxGb3JtID0gMztcblxuICBqc1BERkFQSS5fX2FyYWJpY1BhcnNlcl9fID0ge307XG5cbiAgLy9wcml2YXRlXG4gIHZhciBpc0luQXJhYmljU3Vic3RpdHV0aW9uQSA9IChqc1BERkFQSS5fX2FyYWJpY1BhcnNlcl9fLmlzSW5BcmFiaWNTdWJzdGl0dXRpb25BID0gZnVuY3Rpb24oXG4gICAgbGV0dGVyXG4gICkge1xuICAgIHJldHVybiB0eXBlb2YgYXJhYmljU3Vic3RpdGlvbkFbbGV0dGVyLmNoYXJDb2RlQXQoMCldICE9PSBcInVuZGVmaW5lZFwiO1xuICB9KTtcblxuICB2YXIgaXNBcmFiaWNMZXR0ZXIgPSAoanNQREZBUEkuX19hcmFiaWNQYXJzZXJfXy5pc0FyYWJpY0xldHRlciA9IGZ1bmN0aW9uKFxuICAgIGxldHRlclxuICApIHtcbiAgICByZXR1cm4gKFxuICAgICAgdHlwZW9mIGxldHRlciA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgL15bXFx1MDYwMC1cXHUwNkZGXFx1MDc1MC1cXHUwNzdGXFx1MDhBMC1cXHUwOEZGXFx1RkI1MC1cXHVGREZGXFx1RkU3MC1cXHVGRUZGXSskLy50ZXN0KFxuICAgICAgICBsZXR0ZXJcbiAgICAgIClcbiAgICApO1xuICB9KTtcblxuICB2YXIgaXNBcmFiaWNFbmRMZXR0ZXIgPSAoanNQREZBUEkuX19hcmFiaWNQYXJzZXJfXy5pc0FyYWJpY0VuZExldHRlciA9IGZ1bmN0aW9uKFxuICAgIGxldHRlclxuICApIHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNBcmFiaWNMZXR0ZXIobGV0dGVyKSAmJlxuICAgICAgaXNJbkFyYWJpY1N1YnN0aXR1dGlvbkEobGV0dGVyKSAmJlxuICAgICAgYXJhYmljU3Vic3RpdGlvbkFbbGV0dGVyLmNoYXJDb2RlQXQoMCldLmxlbmd0aCA8PSAyXG4gICAgKTtcbiAgfSk7XG5cbiAgdmFyIGlzQXJhYmljQWxmTGV0dGVyID0gKGpzUERGQVBJLl9fYXJhYmljUGFyc2VyX18uaXNBcmFiaWNBbGZMZXR0ZXIgPSBmdW5jdGlvbihcbiAgICBsZXR0ZXJcbiAgKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzQXJhYmljTGV0dGVyKGxldHRlcikgJiYgYWxmbGV0dGVyLmluZGV4T2YobGV0dGVyLmNoYXJDb2RlQXQoMCkpID49IDBcbiAgICApO1xuICB9KTtcblxuICBqc1BERkFQSS5fX2FyYWJpY1BhcnNlcl9fLmFyYWJpY0xldHRlckhhc0lzb2xhdGVkRm9ybSA9IGZ1bmN0aW9uKGxldHRlcikge1xuICAgIHJldHVybiAoXG4gICAgICBpc0FyYWJpY0xldHRlcihsZXR0ZXIpICYmXG4gICAgICBpc0luQXJhYmljU3Vic3RpdHV0aW9uQShsZXR0ZXIpICYmXG4gICAgICBhcmFiaWNTdWJzdGl0aW9uQVtsZXR0ZXIuY2hhckNvZGVBdCgwKV0ubGVuZ3RoID49IDFcbiAgICApO1xuICB9O1xuXG4gIHZhciBhcmFiaWNMZXR0ZXJIYXNGaW5hbEZvcm0gPSAoanNQREZBUEkuX19hcmFiaWNQYXJzZXJfXy5hcmFiaWNMZXR0ZXJIYXNGaW5hbEZvcm0gPSBmdW5jdGlvbihcbiAgICBsZXR0ZXJcbiAgKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzQXJhYmljTGV0dGVyKGxldHRlcikgJiZcbiAgICAgIGlzSW5BcmFiaWNTdWJzdGl0dXRpb25BKGxldHRlcikgJiZcbiAgICAgIGFyYWJpY1N1YnN0aXRpb25BW2xldHRlci5jaGFyQ29kZUF0KDApXS5sZW5ndGggPj0gMlxuICAgICk7XG4gIH0pO1xuXG4gIGpzUERGQVBJLl9fYXJhYmljUGFyc2VyX18uYXJhYmljTGV0dGVySGFzSW5pdGlhbEZvcm0gPSBmdW5jdGlvbihsZXR0ZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgaXNBcmFiaWNMZXR0ZXIobGV0dGVyKSAmJlxuICAgICAgaXNJbkFyYWJpY1N1YnN0aXR1dGlvbkEobGV0dGVyKSAmJlxuICAgICAgYXJhYmljU3Vic3RpdGlvbkFbbGV0dGVyLmNoYXJDb2RlQXQoMCldLmxlbmd0aCA+PSAzXG4gICAgKTtcbiAgfTtcblxuICB2YXIgYXJhYmljTGV0dGVySGFzTWVkaWFsRm9ybSA9IChqc1BERkFQSS5fX2FyYWJpY1BhcnNlcl9fLmFyYWJpY0xldHRlckhhc01lZGlhbEZvcm0gPSBmdW5jdGlvbihcbiAgICBsZXR0ZXJcbiAgKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGlzQXJhYmljTGV0dGVyKGxldHRlcikgJiZcbiAgICAgIGlzSW5BcmFiaWNTdWJzdGl0dXRpb25BKGxldHRlcikgJiZcbiAgICAgIGFyYWJpY1N1YnN0aXRpb25BW2xldHRlci5jaGFyQ29kZUF0KDApXS5sZW5ndGggPT0gNFxuICAgICk7XG4gIH0pO1xuXG4gIHZhciByZXNvbHZlTGlnYXR1cmVzID0gKGpzUERGQVBJLl9fYXJhYmljUGFyc2VyX18ucmVzb2x2ZUxpZ2F0dXJlcyA9IGZ1bmN0aW9uKFxuICAgIGxldHRlcnNcbiAgKSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciB0bXBMaWdhdHVyZXMgPSBsaWdhdHVyZXM7XG4gICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgdmFyIGVmZmVjdGVkTGV0dGVycyA9IDA7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGV0dGVycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKHR5cGVvZiB0bXBMaWdhdHVyZXNbbGV0dGVycy5jaGFyQ29kZUF0KGkpXSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBlZmZlY3RlZExldHRlcnMrKztcbiAgICAgICAgdG1wTGlnYXR1cmVzID0gdG1wTGlnYXR1cmVzW2xldHRlcnMuY2hhckNvZGVBdChpKV07XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0bXBMaWdhdHVyZXMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0bXBMaWdhdHVyZXMpO1xuICAgICAgICAgIHRtcExpZ2F0dXJlcyA9IGxpZ2F0dXJlcztcbiAgICAgICAgICBlZmZlY3RlZExldHRlcnMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID09PSBsZXR0ZXJzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB0bXBMaWdhdHVyZXMgPSBsaWdhdHVyZXM7XG4gICAgICAgICAgcmVzdWx0ICs9IGxldHRlcnMuY2hhckF0KGkgLSAoZWZmZWN0ZWRMZXR0ZXJzIC0gMSkpO1xuICAgICAgICAgIGkgPSBpIC0gKGVmZmVjdGVkTGV0dGVycyAtIDEpO1xuICAgICAgICAgIGVmZmVjdGVkTGV0dGVycyA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRtcExpZ2F0dXJlcyA9IGxpZ2F0dXJlcztcbiAgICAgICAgcmVzdWx0ICs9IGxldHRlcnMuY2hhckF0KGkgLSBlZmZlY3RlZExldHRlcnMpO1xuICAgICAgICBpID0gaSAtIGVmZmVjdGVkTGV0dGVycztcbiAgICAgICAgZWZmZWN0ZWRMZXR0ZXJzID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcblxuICBqc1BERkFQSS5fX2FyYWJpY1BhcnNlcl9fLmlzQXJhYmljRGlhY3JpdGljID0gZnVuY3Rpb24obGV0dGVyKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGxldHRlciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICBhcmFiaWNfZGlhY3JpdGljc1tsZXR0ZXIuY2hhckNvZGVBdCgwKV0gIT09IHVuZGVmaW5lZFxuICAgICk7XG4gIH07XG5cbiAgdmFyIGdldENvcnJlY3RGb3JtID0gKGpzUERGQVBJLl9fYXJhYmljUGFyc2VyX18uZ2V0Q29ycmVjdEZvcm0gPSBmdW5jdGlvbihcbiAgICBjdXJyZW50Q2hhcixcbiAgICBiZWZvcmVDaGFyLFxuICAgIG5leHRDaGFyXG4gICkge1xuICAgIGlmICghaXNBcmFiaWNMZXR0ZXIoY3VycmVudENoYXIpKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgaWYgKGlzSW5BcmFiaWNTdWJzdGl0dXRpb25BKGN1cnJlbnRDaGFyKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBub0NoYW5nZUluRm9ybTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIWFyYWJpY0xldHRlckhhc0ZpbmFsRm9ybShjdXJyZW50Q2hhcikgfHxcbiAgICAgICghaXNBcmFiaWNMZXR0ZXIoYmVmb3JlQ2hhcikgJiYgIWlzQXJhYmljTGV0dGVyKG5leHRDaGFyKSkgfHxcbiAgICAgICghaXNBcmFiaWNMZXR0ZXIobmV4dENoYXIpICYmIGlzQXJhYmljRW5kTGV0dGVyKGJlZm9yZUNoYXIpKSB8fFxuICAgICAgKGlzQXJhYmljRW5kTGV0dGVyKGN1cnJlbnRDaGFyKSAmJiAhaXNBcmFiaWNMZXR0ZXIoYmVmb3JlQ2hhcikpIHx8XG4gICAgICAoaXNBcmFiaWNFbmRMZXR0ZXIoY3VycmVudENoYXIpICYmIGlzQXJhYmljQWxmTGV0dGVyKGJlZm9yZUNoYXIpKSB8fFxuICAgICAgKGlzQXJhYmljRW5kTGV0dGVyKGN1cnJlbnRDaGFyKSAmJiBpc0FyYWJpY0VuZExldHRlcihiZWZvcmVDaGFyKSlcbiAgICApIHtcbiAgICAgIHJldHVybiBpc29sYXRlZEZvcm07XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgYXJhYmljTGV0dGVySGFzTWVkaWFsRm9ybShjdXJyZW50Q2hhcikgJiZcbiAgICAgIGlzQXJhYmljTGV0dGVyKGJlZm9yZUNoYXIpICYmXG4gICAgICAhaXNBcmFiaWNFbmRMZXR0ZXIoYmVmb3JlQ2hhcikgJiZcbiAgICAgIGlzQXJhYmljTGV0dGVyKG5leHRDaGFyKSAmJlxuICAgICAgYXJhYmljTGV0dGVySGFzRmluYWxGb3JtKG5leHRDaGFyKVxuICAgICkge1xuICAgICAgcmV0dXJuIG1lZGlhbEZvcm07XG4gICAgfVxuXG4gICAgaWYgKGlzQXJhYmljRW5kTGV0dGVyKGN1cnJlbnRDaGFyKSB8fCAhaXNBcmFiaWNMZXR0ZXIobmV4dENoYXIpKSB7XG4gICAgICByZXR1cm4gZmluYWxGb3JtO1xuICAgIH1cbiAgICByZXR1cm4gaW5pdGlhbEZvcm07XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAbmFtZSBwcm9jZXNzQXJhYmljXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgdmFyIHBhcnNlQXJhYmljID0gZnVuY3Rpb24odGV4dCkge1xuICAgIHRleHQgPSB0ZXh0IHx8IFwiXCI7XG5cbiAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGogPSAwO1xuICAgIHZhciBwb3NpdGlvbiA9IDA7XG4gICAgdmFyIGN1cnJlbnRMZXR0ZXIgPSBcIlwiO1xuICAgIHZhciBwcmV2TGV0dGVyID0gXCJcIjtcbiAgICB2YXIgbmV4dExldHRlciA9IFwiXCI7XG5cbiAgICB2YXIgd29yZHMgPSB0ZXh0LnNwbGl0KFwiXFxcXHMrXCIpO1xuICAgIHZhciBuZXdXb3JkcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgbmV3V29yZHMucHVzaChcIlwiKTtcbiAgICAgIGZvciAoaiA9IDA7IGogPCB3b3Jkc1tpXS5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICBjdXJyZW50TGV0dGVyID0gd29yZHNbaV1bal07XG4gICAgICAgIHByZXZMZXR0ZXIgPSB3b3Jkc1tpXVtqIC0gMV07XG4gICAgICAgIG5leHRMZXR0ZXIgPSB3b3Jkc1tpXVtqICsgMV07XG4gICAgICAgIGlmIChpc0FyYWJpY0xldHRlcihjdXJyZW50TGV0dGVyKSkge1xuICAgICAgICAgIHBvc2l0aW9uID0gZ2V0Q29ycmVjdEZvcm0oY3VycmVudExldHRlciwgcHJldkxldHRlciwgbmV4dExldHRlcik7XG4gICAgICAgICAgaWYgKHBvc2l0aW9uICE9PSAtMSkge1xuICAgICAgICAgICAgbmV3V29yZHNbaV0gKz0gU3RyaW5nLmZyb21DaGFyQ29kZShcbiAgICAgICAgICAgICAgYXJhYmljU3Vic3RpdGlvbkFbY3VycmVudExldHRlci5jaGFyQ29kZUF0KDApXVtwb3NpdGlvbl1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1dvcmRzW2ldICs9IGN1cnJlbnRMZXR0ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1dvcmRzW2ldICs9IGN1cnJlbnRMZXR0ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbmV3V29yZHNbaV0gPSByZXNvbHZlTGlnYXR1cmVzKG5ld1dvcmRzW2ldKTtcbiAgICB9XG4gICAgcmVzdWx0ID0gbmV3V29yZHMuam9pbihcIiBcIik7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBwcm9jZXNzQXJhYmljID0gKGpzUERGQVBJLl9fYXJhYmljUGFyc2VyX18ucHJvY2Vzc0FyYWJpYyA9IGpzUERGQVBJLnByb2Nlc3NBcmFiaWMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGV4dCA9XG4gICAgICB0eXBlb2YgYXJndW1lbnRzWzBdID09PSBcInN0cmluZ1wiID8gYXJndW1lbnRzWzBdIDogYXJndW1lbnRzWzBdLnRleHQ7XG4gICAgdmFyIHRtcFRleHQgPSBbXTtcbiAgICB2YXIgcmVzdWx0O1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGV4dCkpIHtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIHRtcFRleHQgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRleHRbaV0pKSB7XG4gICAgICAgICAgdG1wVGV4dC5wdXNoKFtwYXJzZUFyYWJpYyh0ZXh0W2ldWzBdKSwgdGV4dFtpXVsxXSwgdGV4dFtpXVsyXV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRtcFRleHQucHVzaChbcGFyc2VBcmFiaWModGV4dFtpXSldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzdWx0ID0gdG1wVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gcGFyc2VBcmFiaWModGV4dCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBhcmd1bWVudHNbMF0udGV4dCA9IHJlc3VsdDtcbiAgICAgIHJldHVybiBhcmd1bWVudHNbMF07XG4gICAgfVxuICB9KTtcblxuICBqc1BERkFQSS5ldmVudHMucHVzaChbXCJwcmVQcm9jZXNzVGV4dFwiLCBwcm9jZXNzQXJhYmljXSk7XG59KShqc1BERi5BUEkpO1xuIiwiLyoqIEBsaWNlbnNlXG4gKiBqc1BERiBBdXRvcHJpbnQgUGx1Z2luXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBAbmFtZSBhdXRvcHJpbnRcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qKlxuICAgKiBNYWtlcyB0aGUgUERGIGF1dG9tYXRpY2FsbHkgb3BlbiB0aGUgcHJpbnQtRGlhbG9nIHdoZW4gb3BlbmVkIGluIGEgUERGLXZpZXdlci5cbiAgICpcbiAgICogQG5hbWUgYXV0b1ByaW50XG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAob3B0aW9uYWwpIFNldCB0aGUgYXR0cmlidXRlIHZhcmlhbnQgdG8gJ25vbi1jb25mb3JtJyAoZGVmYXVsdCkgb3IgJ2phdmFzY3JpcHQnIHRvIGFjdGl2YXRlIGRpZmZlcmVudCBtZXRob2RzIG9mIGF1dG9tYXRpYyBwcmludGluZyB3aGVuIG9wZW5pbmcgaW4gYSBQREYtdmlld2VyIC5cbiAgICogQHJldHVybnMge2pzUERGfVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgZG9jID0gbmV3IGpzUERGKCk7XG4gICAqIGRvYy50ZXh0KDEwLCAxMCwgJ1RoaXMgaXMgYSB0ZXN0Jyk7XG4gICAqIGRvYy5hdXRvUHJpbnQoe3ZhcmlhbnQ6ICdub24tY29uZm9ybSd9KTtcbiAgICogZG9jLnNhdmUoJ2F1dG9wcmludC5wZGYnKTtcbiAgICovXG4gIGpzUERGQVBJLmF1dG9QcmludCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgcmVmQXV0b1ByaW50VGFnO1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMudmFyaWFudCA9IG9wdGlvbnMudmFyaWFudCB8fCBcIm5vbi1jb25mb3JtXCI7XG5cbiAgICBzd2l0Y2ggKG9wdGlvbnMudmFyaWFudCkge1xuICAgICAgY2FzZSBcImphdmFzY3JpcHRcIjpcbiAgICAgICAgLy9odHRwczovL2dpdGh1Yi5jb20vUm9iLS1XL3BkZi5qcy9jb21taXQvYzY3NmVjYjVhMGY1NDY3N2I5ZjMzNDBjM2VmMmNmNDIyMjU0NTNiYlxuICAgICAgICB0aGlzLmFkZEpTKFwicHJpbnQoe30pO1wiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibm9uLWNvbmZvcm1cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuaW50ZXJuYWwuZXZlbnRzLnN1YnNjcmliZShcInBvc3RQdXRSZXNvdXJjZXNcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVmQXV0b1ByaW50VGFnID0gdGhpcy5pbnRlcm5hbC5uZXdPYmplY3QoKTtcbiAgICAgICAgICB0aGlzLmludGVybmFsLm91dChcIjw8XCIpO1xuICAgICAgICAgIHRoaXMuaW50ZXJuYWwub3V0KFwiL1MgL05hbWVkXCIpO1xuICAgICAgICAgIHRoaXMuaW50ZXJuYWwub3V0KFwiL1R5cGUgL0FjdGlvblwiKTtcbiAgICAgICAgICB0aGlzLmludGVybmFsLm91dChcIi9OIC9QcmludFwiKTtcbiAgICAgICAgICB0aGlzLmludGVybmFsLm91dChcIj4+XCIpO1xuICAgICAgICAgIHRoaXMuaW50ZXJuYWwub3V0KFwiZW5kb2JqXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmludGVybmFsLmV2ZW50cy5zdWJzY3JpYmUoXCJwdXRDYXRhbG9nXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJuYWwub3V0KFwiL09wZW5BY3Rpb24gXCIgKyByZWZBdXRvUHJpbnRUYWcgKyBcIiAwIFJcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59KShqc1BERi5BUEkpO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE0IFN0ZXZlbiBTcHVuZ2luIChUd2VsdmVUb25lIExMQykgIHN0ZXZlbkB0d2VsdmV0b25lLnR2XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBqc1BERiBDYW52YXMgUGx1Z0luXG4gKiBUaGlzIHBsdWdpbiBtaW1pY3MgdGhlIEhUTUw1IENhbnZhc1xuICpcbiAqIFRoZSBnb2FsIGlzIHRvIHByb3ZpZGUgYSB3YXkgZm9yIGN1cnJlbnQgY2FudmFzIHVzZXJzIHRvIHByaW50IGRpcmVjdGx5IHRvIGEgUERGLlxuICogQG5hbWUgY2FudmFzXG4gKiBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbihqc1BERkFQSSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvKipcbiAgICogQGNsYXNzIENhbnZhc1xuICAgKiBAY2xhc3NkZXNjIEEgQ2FudmFzIFdyYXBwZXIgZm9yIGpzUERGXG4gICAqL1xuICB2YXIgQ2FudmFzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGpzUGRmSW5zdGFuY2UgPSB1bmRlZmluZWQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGRmXCIsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBqc1BkZkluc3RhbmNlO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAganNQZGZJbnN0YW5jZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIF93aWR0aCA9IDE1MDtcbiAgICAvKipcbiAgICAgKiBUaGUgaGVpZ2h0IHByb3BlcnR5IGlzIGEgcG9zaXRpdmUgaW50ZWdlciByZWZsZWN0aW5nIHRoZSBoZWlnaHQgSFRNTCBhdHRyaWJ1dGUgb2YgdGhlIDxjYW52YXM+IGVsZW1lbnQgaW50ZXJwcmV0ZWQgaW4gQ1NTIHBpeGVscy4gV2hlbiB0aGUgYXR0cmlidXRlIGlzIG5vdCBzcGVjaWZpZWQsIG9yIGlmIGl0IGlzIHNldCB0byBhbiBpbnZhbGlkIHZhbHVlLCBsaWtlIGEgbmVnYXRpdmUsIHRoZSBkZWZhdWx0IHZhbHVlIG9mIDE1MCBpcyB1c2VkLlxuICAgICAqIFRoaXMgaXMgb25lIG9mIHRoZSB0d28gcHJvcGVydGllcywgdGhlIG90aGVyIGJlaW5nIHdpZHRoLCB0aGF0IGNvbnRyb2xzIHRoZSBzaXplIG9mIHRoZSBjYW52YXMuXG4gICAgICpcbiAgICAgKiBAbmFtZSB3aWR0aFxuICAgICAqL1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndpZHRoXCIsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfd2lkdGg7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoaXNOYU4odmFsdWUpIHx8IE51bWJlci5pc0ludGVnZXIodmFsdWUpID09PSBmYWxzZSB8fCB2YWx1ZSA8IDApIHtcbiAgICAgICAgICBfd2lkdGggPSAxNTA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3dpZHRoID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2V0Q29udGV4dChcIjJkXCIpLnBhZ2VXcmFwWEVuYWJsZWQpIHtcbiAgICAgICAgICB0aGlzLmdldENvbnRleHQoXCIyZFwiKS5wYWdlV3JhcFggPSBfd2lkdGggKyAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgX2hlaWdodCA9IDMwMDtcbiAgICAvKipcbiAgICAgKiBUaGUgd2lkdGggcHJvcGVydHkgaXMgYSBwb3NpdGl2ZSBpbnRlZ2VyIHJlZmxlY3RpbmcgdGhlIHdpZHRoIEhUTUwgYXR0cmlidXRlIG9mIHRoZSA8Y2FudmFzPiBlbGVtZW50IGludGVycHJldGVkIGluIENTUyBwaXhlbHMuIFdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBub3Qgc3BlY2lmaWVkLCBvciBpZiBpdCBpcyBzZXQgdG8gYW4gaW52YWxpZCB2YWx1ZSwgbGlrZSBhIG5lZ2F0aXZlLCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiAzMDAgaXMgdXNlZC5cbiAgICAgKiBUaGlzIGlzIG9uZSBvZiB0aGUgdHdvIHByb3BlcnRpZXMsIHRoZSBvdGhlciBiZWluZyBoZWlnaHQsIHRoYXQgY29udHJvbHMgdGhlIHNpemUgb2YgdGhlIGNhbnZhcy5cbiAgICAgKlxuICAgICAqIEBuYW1lIGhlaWdodFxuICAgICAqL1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlaWdodFwiLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2hlaWdodDtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmIChpc05hTih2YWx1ZSkgfHwgTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkgPT09IGZhbHNlIHx8IHZhbHVlIDwgMCkge1xuICAgICAgICAgIF9oZWlnaHQgPSAzMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2hlaWdodCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldENvbnRleHQoXCIyZFwiKS5wYWdlV3JhcFlFbmFibGVkKSB7XG4gICAgICAgICAgdGhpcy5nZXRDb250ZXh0KFwiMmRcIikucGFnZVdyYXBZID0gX2hlaWdodCArIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBfY2hpbGROb2RlcyA9IFtdO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNoaWxkTm9kZXNcIiwge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9jaGlsZE5vZGVzO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgX2NoaWxkTm9kZXMgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBfc3R5bGUgPSB7fTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHlsZVwiLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3N0eWxlO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgX3N0eWxlID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXJlbnROb2RlXCIsIHt9KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIGdldENvbnRleHQoKSBtZXRob2QgcmV0dXJucyBhIGRyYXdpbmcgY29udGV4dCBvbiB0aGUgY2FudmFzLCBvciBudWxsIGlmIHRoZSBjb250ZXh0IGlkZW50aWZpZXIgaXMgbm90IHN1cHBvcnRlZC5cbiAgICpcbiAgICogQG5hbWUgZ2V0Q29udGV4dFxuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRleHRUeXBlIElzIGEgU3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbnRleHQgaWRlbnRpZmllciBkZWZpbmluZyB0aGUgZHJhd2luZyBjb250ZXh0IGFzc29jaWF0ZWQgdG8gdGhlIGNhbnZhcy4gUG9zc2libGUgdmFsdWUgaXMgXCIyZFwiLCBsZWFkaW5nIHRvIHRoZSBjcmVhdGlvbiBvZiBhIENvbnRleHQyRCBvYmplY3QgcmVwcmVzZW50aW5nIGEgdHdvLWRpbWVuc2lvbmFsIHJlbmRlcmluZyBjb250ZXh0LlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dEF0dHJpYnV0ZXNcbiAgICovXG4gIENhbnZhcy5wcm90b3R5cGUuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uKGNvbnRleHRUeXBlLCBjb250ZXh0QXR0cmlidXRlcykge1xuICAgIGNvbnRleHRUeXBlID0gY29udGV4dFR5cGUgfHwgXCIyZFwiO1xuICAgIHZhciBrZXk7XG5cbiAgICBpZiAoY29udGV4dFR5cGUgIT09IFwiMmRcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZvciAoa2V5IGluIGNvbnRleHRBdHRyaWJ1dGVzKSB7XG4gICAgICBpZiAodGhpcy5wZGYuY29udGV4dDJkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdGhpcy5wZGYuY29udGV4dDJkW2tleV0gPSBjb250ZXh0QXR0cmlidXRlc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnBkZi5jb250ZXh0MmQuX2NhbnZhcyA9IHRoaXM7XG4gICAgcmV0dXJuIHRoaXMucGRmLmNvbnRleHQyZDtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIHRvRGF0YVVSTCgpIG1ldGhvZCBpcyBqdXN0IGEgc3R1YiB0byB0aHJvdyBhbiBlcnJvciBpZiBhY2NpZGVudGx5IGNhbGxlZC5cbiAgICpcbiAgICogQG5hbWUgdG9EYXRhVVJMXG4gICAqIEBmdW5jdGlvblxuICAgKi9cbiAgQ2FudmFzLnByb3RvdHlwZS50b0RhdGFVUkwgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0b0RhdGFVUkwgaXMgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgfTtcblxuICBqc1BERkFQSS5ldmVudHMucHVzaChbXG4gICAgXCJpbml0aWFsaXplZFwiLFxuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jYW52YXMgPSBuZXcgQ2FudmFzKCk7XG4gICAgICB0aGlzLmNhbnZhcy5wZGYgPSB0aGlzO1xuICAgIH1cbiAgXSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59KShqc1BERi5BUEkpO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAoYykgMjAxMyBZb3Vzc2VmIEJlZGRhZCwgeW91c3NlZi5iZWRkYWRAZ21haWwuY29tXG4gKiAgICAgICAgICAgICAgIDIwMTMgRWR1YXJkbyBNZW5lemVzIGRlIE1vcmFpcywgZWR1YXJkby5tb3JhaXNAdXNwLmJyXG4gKiAgICAgICAgICAgICAgIDIwMTMgTGVlIERyaXNjb2xsLCBodHRwczovL2dpdGh1Yi5jb20vbHNkcmlzY29sbFxuICogICAgICAgICAgICAgICAyMDE0IEp1YW4gUGFibG8gR2F2aXJpYSwgaHR0cHM6Ly9naXRodWIuY29tL2p1YW5wZ2F2aXJpYVxuICogICAgICAgICAgICAgICAyMDE0IEphbWVzIEhhbGwsIGphbWVzQHBhcmFsbC5heFxuICogICAgICAgICAgICAgICAyMDE0IERpZWdvIENhc29ycmFuLCBodHRwczovL2dpdGh1Yi5jb20vZGllZ29jclxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4gKiBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbiAqIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG4gKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0ZcbiAqIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG4gKiBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFXG4gKiBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4gKiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbiAqIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGNlbGxcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBOT19NQVJHSU5TID0geyBsZWZ0OiAwLCB0b3A6IDAsIGJvdHRvbTogMCwgcmlnaHQ6IDAgfTtcblxuICB2YXIgcHgycHQgPSAoMC4yNjQ1ODMgKiA3MikgLyAyNS40O1xuICB2YXIgcHJpbnRpbmdIZWFkZXJSb3cgPSBmYWxzZTtcblxuICB2YXIgX2luaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuaW50ZXJuYWwuX19jZWxsX18gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18gPSB7fTtcbiAgICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18ucGFkZGluZyA9IDM7XG4gICAgICB0aGlzLmludGVybmFsLl9fY2VsbF9fLmhlYWRlckZ1bmN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5tYXJnaW5zID0gT2JqZWN0LmFzc2lnbih7fSwgTk9fTUFSR0lOUyk7XG4gICAgICB0aGlzLmludGVybmFsLl9fY2VsbF9fLm1hcmdpbnMud2lkdGggPSB0aGlzLmdldFBhZ2VXaWR0aCgpO1xuICAgICAgX3Jlc2V0LmNhbGwodGhpcyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBfcmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmludGVybmFsLl9fY2VsbF9fLmxhc3RDZWxsID0gbmV3IENlbGwoKTtcbiAgICB0aGlzLmludGVybmFsLl9fY2VsbF9fLnBhZ2VzID0gMTtcbiAgfTtcblxuICB2YXIgQ2VsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfeCA9IGFyZ3VtZW50c1swXTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ4XCIsIHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3g7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfeCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBfeSA9IGFyZ3VtZW50c1sxXTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ5XCIsIHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3k7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfeSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBfd2lkdGggPSBhcmd1bWVudHNbMl07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid2lkdGhcIiwge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfd2lkdGg7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfd2lkdGggPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgX2hlaWdodCA9IGFyZ3VtZW50c1szXTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWlnaHRcIiwge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfaGVpZ2h0O1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgX2hlaWdodCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBfdGV4dCA9IGFyZ3VtZW50c1s0XTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZXh0XCIsIHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RleHQ7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfdGV4dCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBfbGluZU51bWJlciA9IGFyZ3VtZW50c1s1XTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsaW5lTnVtYmVyXCIsIHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX2xpbmVOdW1iZXI7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfbGluZU51bWJlciA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBfYWxpZ24gPSBhcmd1bWVudHNbNl07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYWxpZ25cIiwge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfYWxpZ247XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfYWxpZ24gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIENlbGwucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBDZWxsKFxuICAgICAgdGhpcy54LFxuICAgICAgdGhpcy55LFxuICAgICAgdGhpcy53aWR0aCxcbiAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICAgdGhpcy50ZXh0LFxuICAgICAgdGhpcy5saW5lTnVtYmVyLFxuICAgICAgdGhpcy5hbGlnblxuICAgICk7XG4gIH07XG5cbiAgQ2VsbC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLngsXG4gICAgICB0aGlzLnksXG4gICAgICB0aGlzLndpZHRoLFxuICAgICAgdGhpcy5oZWlnaHQsXG4gICAgICB0aGlzLnRleHQsXG4gICAgICB0aGlzLmxpbmVOdW1iZXIsXG4gICAgICB0aGlzLmFsaWduXG4gICAgXTtcbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgc2V0SGVhZGVyRnVuY3Rpb25cbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcbiAgICovXG4gIGpzUERGQVBJLnNldEhlYWRlckZ1bmN0aW9uID0gZnVuY3Rpb24oZnVuYykge1xuICAgIF9pbml0aWFsaXplLmNhbGwodGhpcyk7XG4gICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5oZWFkZXJGdW5jdGlvbiA9XG4gICAgICB0eXBlb2YgZnVuYyA9PT0gXCJmdW5jdGlvblwiID8gZnVuYyA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgZ2V0VGV4dERpbWVuc2lvbnNcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eHRcbiAgICogQHJldHVybnMge09iamVjdH0gZGltZW5zaW9uc1xuICAgKi9cbiAganNQREZBUEkuZ2V0VGV4dERpbWVuc2lvbnMgPSBmdW5jdGlvbih0ZXh0LCBvcHRpb25zKSB7XG4gICAgX2luaXRpYWxpemUuY2FsbCh0aGlzKTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZm9udFNpemUgPSBvcHRpb25zLmZvbnRTaXplIHx8IHRoaXMuZ2V0Rm9udFNpemUoKTtcbiAgICB2YXIgZm9udCA9IG9wdGlvbnMuZm9udCB8fCB0aGlzLmdldEZvbnQoKTtcbiAgICB2YXIgc2NhbGVGYWN0b3IgPSBvcHRpb25zLnNjYWxlRmFjdG9yIHx8IHRoaXMuaW50ZXJuYWwuc2NhbGVGYWN0b3I7XG4gICAgdmFyIHdpZHRoID0gMDtcbiAgICB2YXIgYW1vdW50T2ZMaW5lcyA9IDA7XG4gICAgdmFyIGhlaWdodCA9IDA7XG4gICAgdmFyIHRlbXBXaWR0aCA9IDA7XG4gICAgdmFyIHNjb3BlID0gdGhpcztcblxuICAgIGlmICghQXJyYXkuaXNBcnJheSh0ZXh0KSAmJiB0eXBlb2YgdGV4dCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHRleHQgPSBTdHJpbmcodGV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJnZXRUZXh0RGltZW5zaW9ucyBleHBlY3RzIHRleHQtcGFyYW1ldGVyIHRvIGJlIG9mIHR5cGUgU3RyaW5nIG9yIHR5cGUgTnVtYmVyIG9yIGFuIEFycmF5IG9mIFN0cmluZ3MuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IG9wdGlvbnMubWF4V2lkdGg7XG4gICAgaWYgKG1heFdpZHRoID4gMCkge1xuICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRleHQgPSB0aGlzLnNwbGl0VGV4dFRvU2l6ZSh0ZXh0LCBtYXhXaWR0aCk7XG4gICAgICB9IGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXh0KSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlZHVjZShmdW5jdGlvbihhY2MsIHRleHRMaW5lKSB7XG4gICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoc2NvcGUuc3BsaXRUZXh0VG9TaXplKHRleHRMaW5lLCBtYXhXaWR0aCkpO1xuICAgICAgICB9LCBbXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdpdGhvdXQgdGhlIGVsc2UgY2xhdXNlLCBpdCB3aWxsIG5vdCB3b3JrIGlmIHlvdSBkbyBub3QgcGFzcyBhbG9uZyBtYXhXaWR0aFxuICAgICAgdGV4dCA9IEFycmF5LmlzQXJyYXkodGV4dCkgPyB0ZXh0IDogW3RleHRdO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgdGVtcFdpZHRoID0gdGhpcy5nZXRTdHJpbmdVbml0V2lkdGgodGV4dFtpXSwgeyBmb250OiBmb250IH0pICogZm9udFNpemU7XG4gICAgICBpZiAod2lkdGggPCB0ZW1wV2lkdGgpIHtcbiAgICAgICAgd2lkdGggPSB0ZW1wV2lkdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHdpZHRoICE9PSAwKSB7XG4gICAgICBhbW91bnRPZkxpbmVzID0gdGV4dC5sZW5ndGg7XG4gICAgfVxuXG4gICAgd2lkdGggPSB3aWR0aCAvIHNjYWxlRmFjdG9yO1xuICAgIGhlaWdodCA9IE1hdGgubWF4KFxuICAgICAgKGFtb3VudE9mTGluZXMgKiBmb250U2l6ZSAqIHRoaXMuZ2V0TGluZUhlaWdodEZhY3RvcigpIC1cbiAgICAgICAgZm9udFNpemUgKiAodGhpcy5nZXRMaW5lSGVpZ2h0RmFjdG9yKCkgLSAxKSkgL1xuICAgICAgICBzY2FsZUZhY3RvcixcbiAgICAgIDBcbiAgICApO1xuICAgIHJldHVybiB7IHc6IHdpZHRoLCBoOiBoZWlnaHQgfTtcbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgY2VsbEFkZFBhZ2VcbiAgICogQGZ1bmN0aW9uXG4gICAqL1xuICBqc1BERkFQSS5jZWxsQWRkUGFnZSA9IGZ1bmN0aW9uKCkge1xuICAgIF9pbml0aWFsaXplLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLmFkZFBhZ2UoKTtcblxuICAgIHZhciBtYXJnaW5zID0gdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5tYXJnaW5zIHx8IE5PX01BUkdJTlM7XG4gICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5sYXN0Q2VsbCA9IG5ldyBDZWxsKFxuICAgICAgbWFyZ2lucy5sZWZ0LFxuICAgICAgbWFyZ2lucy50b3AsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWRcbiAgICApO1xuICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18ucGFnZXMgKz0gMTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmFtZSBjZWxsXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge251bWJlcn0gbGluZU51bWJlciBsaW5lTnVtYmVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhbGlnblxuICAgKiBAcmV0dXJuIHtqc1BERn0ganNQREYtaW5zdGFuY2VcbiAgICovXG4gIHZhciBjZWxsID0gKGpzUERGQVBJLmNlbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY3VycmVudENlbGw7XG5cbiAgICBpZiAoYXJndW1lbnRzWzBdIGluc3RhbmNlb2YgQ2VsbCkge1xuICAgICAgY3VycmVudENlbGwgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRDZWxsID0gbmV3IENlbGwoXG4gICAgICAgIGFyZ3VtZW50c1swXSxcbiAgICAgICAgYXJndW1lbnRzWzFdLFxuICAgICAgICBhcmd1bWVudHNbMl0sXG4gICAgICAgIGFyZ3VtZW50c1szXSxcbiAgICAgICAgYXJndW1lbnRzWzRdLFxuICAgICAgICBhcmd1bWVudHNbNV1cbiAgICAgICk7XG4gICAgfVxuICAgIF9pbml0aWFsaXplLmNhbGwodGhpcyk7XG4gICAgdmFyIGxhc3RDZWxsID0gdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5sYXN0Q2VsbDtcbiAgICB2YXIgcGFkZGluZyA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18ucGFkZGluZztcbiAgICB2YXIgbWFyZ2lucyA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18ubWFyZ2lucyB8fCBOT19NQVJHSU5TO1xuICAgIHZhciB0YWJsZUhlYWRlclJvdyA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18udGFibGVIZWFkZXJSb3c7XG4gICAgdmFyIHByaW50SGVhZGVycyA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18ucHJpbnRIZWFkZXJzO1xuICAgIC8vIElmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCBjZWxsLCB3ZSBtdXN0IGNoYW5nZSBpdHMgcG9zaXRpb25cbiAgICBpZiAodHlwZW9mIGxhc3RDZWxsLmxpbmVOdW1iZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmIChsYXN0Q2VsbC5saW5lTnVtYmVyID09PSBjdXJyZW50Q2VsbC5saW5lTnVtYmVyKSB7XG4gICAgICAgIC8vU2FtZSBsaW5lXG4gICAgICAgIGN1cnJlbnRDZWxsLnggPSAobGFzdENlbGwueCB8fCAwKSArIChsYXN0Q2VsbC53aWR0aCB8fCAwKTtcbiAgICAgICAgY3VycmVudENlbGwueSA9IGxhc3RDZWxsLnkgfHwgMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vTmV3IGxpbmVcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGxhc3RDZWxsLnkgKyBsYXN0Q2VsbC5oZWlnaHQgKyBjdXJyZW50Q2VsbC5oZWlnaHQgKyBtYXJnaW5zLmJvdHRvbSA+XG4gICAgICAgICAgdGhpcy5nZXRQYWdlSGVpZ2h0KClcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5jZWxsQWRkUGFnZSgpO1xuICAgICAgICAgIGN1cnJlbnRDZWxsLnkgPSBtYXJnaW5zLnRvcDtcbiAgICAgICAgICBpZiAocHJpbnRIZWFkZXJzICYmIHRhYmxlSGVhZGVyUm93KSB7XG4gICAgICAgICAgICB0aGlzLnByaW50SGVhZGVyUm93KGN1cnJlbnRDZWxsLmxpbmVOdW1iZXIsIHRydWUpO1xuICAgICAgICAgICAgY3VycmVudENlbGwueSArPSB0YWJsZUhlYWRlclJvd1swXS5oZWlnaHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRDZWxsLnkgPSBsYXN0Q2VsbC55ICsgbGFzdENlbGwuaGVpZ2h0IHx8IGN1cnJlbnRDZWxsLnk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGN1cnJlbnRDZWxsLnRleHRbMF0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMucmVjdChcbiAgICAgICAgY3VycmVudENlbGwueCxcbiAgICAgICAgY3VycmVudENlbGwueSxcbiAgICAgICAgY3VycmVudENlbGwud2lkdGgsXG4gICAgICAgIGN1cnJlbnRDZWxsLmhlaWdodCxcbiAgICAgICAgcHJpbnRpbmdIZWFkZXJSb3cgPT09IHRydWUgPyBcIkZEXCIgOiB1bmRlZmluZWRcbiAgICAgICk7XG4gICAgICBpZiAoY3VycmVudENlbGwuYWxpZ24gPT09IFwicmlnaHRcIikge1xuICAgICAgICB0aGlzLnRleHQoXG4gICAgICAgICAgY3VycmVudENlbGwudGV4dCxcbiAgICAgICAgICBjdXJyZW50Q2VsbC54ICsgY3VycmVudENlbGwud2lkdGggLSBwYWRkaW5nLFxuICAgICAgICAgIGN1cnJlbnRDZWxsLnkgKyBwYWRkaW5nLFxuICAgICAgICAgIHsgYWxpZ246IFwicmlnaHRcIiwgYmFzZWxpbmU6IFwidG9wXCIgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChjdXJyZW50Q2VsbC5hbGlnbiA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgICB0aGlzLnRleHQoXG4gICAgICAgICAgY3VycmVudENlbGwudGV4dCxcbiAgICAgICAgICBjdXJyZW50Q2VsbC54ICsgY3VycmVudENlbGwud2lkdGggLyAyLFxuICAgICAgICAgIGN1cnJlbnRDZWxsLnkgKyBwYWRkaW5nLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgYmFzZWxpbmU6IFwidG9wXCIsXG4gICAgICAgICAgICBtYXhXaWR0aDogY3VycmVudENlbGwud2lkdGggLSBwYWRkaW5nIC0gcGFkZGluZ1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGV4dChcbiAgICAgICAgICBjdXJyZW50Q2VsbC50ZXh0LFxuICAgICAgICAgIGN1cnJlbnRDZWxsLnggKyBwYWRkaW5nLFxuICAgICAgICAgIGN1cnJlbnRDZWxsLnkgKyBwYWRkaW5nLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcbiAgICAgICAgICAgIGJhc2VsaW5lOiBcInRvcFwiLFxuICAgICAgICAgICAgbWF4V2lkdGg6IGN1cnJlbnRDZWxsLndpZHRoIC0gcGFkZGluZyAtIHBhZGRpbmdcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18ubGFzdENlbGwgPSBjdXJyZW50Q2VsbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgLyoqXG4gICAgICogQ3JlYXRlIGEgdGFibGUgZnJvbSBhIHNldCBvZiBkYXRhLlxuICAgICAqIEBuYW1lIHRhYmxlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSBbeF0gOiBsZWZ0LXBvc2l0aW9uIGZvciB0b3AtbGVmdCBjb3JuZXIgb2YgdGFibGVcbiAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IFt5XSB0b3AtcG9zaXRpb24gZm9yIHRvcC1sZWZ0IGNvcm5lciBvZiB0YWJsZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IFtkYXRhXSBBbiBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcga2V5LXZhbHVlIHBhaXJzIGNvcnJlc3BvbmRpbmcgdG8gYSByb3cgb2YgZGF0YS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBbaGVhZGVyc10gT21pdCBvciBudWxsIHRvIGF1dG8tZ2VuZXJhdGUgaGVhZGVycyBhdCBhIHBlcmZvcm1hbmNlIGNvc3RcblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnLnByaW50SGVhZGVyc10gVHJ1ZSB0byBwcmludCBjb2x1bW4gaGVhZGVycyBhdCB0aGUgdG9wIG9mIGV2ZXJ5IHBhZ2VcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZy5hdXRvU2l6ZV0gVHJ1ZSB0byBkeW5hbWljYWxseSBzZXQgdGhlIGNvbHVtbiB3aWR0aHMgdG8gbWF0Y2ggdGhlIHdpZGVzdCBjZWxsIHZhbHVlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWcubWFyZ2luc10gbWFyZ2luIHZhbHVlcyBmb3IgbGVmdCwgdG9wLCBib3R0b20sIGFuZCB3aWR0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnLmZvbnRTaXplXSBJbnRlZ2VyIGZvbnRTaXplIHRvIHVzZSAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWcucGFkZGluZ10gY2VsbC1wYWRkaW5nIGluIHB0IHRvIHVzZSAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWcuaGVhZGVyQmFja2dyb3VuZENvbG9yXSBkZWZhdWx0IGlzICNjOGM4YzggKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnLmhlYWRlclRleHRDb2xvcl0gZGVmYXVsdCBpcyAjMDAwIChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZy5yb3dTdGFydF0gY2FsbGJhY2sgdG8gaGFuZGxlIGJlZm9yZSBwcmludCBlYWNoIHJvdyAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWcuY2VsbFN0YXJ0XSBjYWxsYmFjayB0byBoYW5kbGUgYmVmb3JlIHByaW50IGVhY2ggY2VsbCAob3B0aW9uYWwpXG4gICAgICogQHJldHVybnMge2pzUERGfSBqc1BERi1pbnN0YW5jZVxuICAgICAqL1xuXG4gIGpzUERGQVBJLnRhYmxlID0gZnVuY3Rpb24oeCwgeSwgZGF0YSwgaGVhZGVycywgY29uZmlnKSB7XG4gICAgX2luaXRpYWxpemUuY2FsbCh0aGlzKTtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGRhdGEgZm9yIFBERiB0YWJsZS5cIik7XG4gICAgfVxuXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXG4gICAgdmFyIGhlYWRlck5hbWVzID0gW10sXG4gICAgICBoZWFkZXJMYWJlbHMgPSBbXSxcbiAgICAgIGhlYWRlckFsaWducyA9IFtdLFxuICAgICAgaSxcbiAgICAgIGNvbHVtbk1hdHJpeCA9IHt9LFxuICAgICAgY29sdW1uV2lkdGhzID0ge30sXG4gICAgICBjb2x1bW4sXG4gICAgICBjb2x1bW5NaW5XaWR0aHMgPSBbXSxcbiAgICAgIGosXG4gICAgICB0YWJsZUhlYWRlckNvbmZpZ3MgPSBbXSxcbiAgICAgIC8vc2V0IHVwIGRlZmF1bHRzLiBJZiBhIHZhbHVlIGlzIHByb3ZpZGVkIGluIGNvbmZpZywgZGVmYXVsdHMgd2lsbCBiZSBvdmVyd3JpdHRlbjpcbiAgICAgIGF1dG9TaXplID0gY29uZmlnLmF1dG9TaXplIHx8IGZhbHNlLFxuICAgICAgcHJpbnRIZWFkZXJzID0gY29uZmlnLnByaW50SGVhZGVycyA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUsXG4gICAgICBmb250U2l6ZSA9XG4gICAgICAgIGNvbmZpZy5jc3MgJiYgdHlwZW9mIGNvbmZpZy5jc3NbXCJmb250LXNpemVcIl0gIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICA/IGNvbmZpZy5jc3NbXCJmb250LXNpemVcIl0gKiAxNlxuICAgICAgICAgIDogY29uZmlnLmZvbnRTaXplIHx8IDEyLFxuICAgICAgbWFyZ2lucyA9XG4gICAgICAgIGNvbmZpZy5tYXJnaW5zIHx8XG4gICAgICAgIE9iamVjdC5hc3NpZ24oeyB3aWR0aDogdGhpcy5nZXRQYWdlV2lkdGgoKSB9LCBOT19NQVJHSU5TKSxcbiAgICAgIHBhZGRpbmcgPSB0eXBlb2YgY29uZmlnLnBhZGRpbmcgPT09IFwibnVtYmVyXCIgPyBjb25maWcucGFkZGluZyA6IDMsXG4gICAgICBoZWFkZXJCYWNrZ3JvdW5kQ29sb3IgPSBjb25maWcuaGVhZGVyQmFja2dyb3VuZENvbG9yIHx8IFwiI2M4YzhjOFwiLFxuICAgICAgaGVhZGVyVGV4dENvbG9yID0gY29uZmlnLmhlYWRlclRleHRDb2xvciB8fCBcIiMwMDBcIjtcblxuICAgIF9yZXNldC5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5wcmludEhlYWRlcnMgPSBwcmludEhlYWRlcnM7XG4gICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5tYXJnaW5zID0gbWFyZ2lucztcbiAgICB0aGlzLmludGVybmFsLl9fY2VsbF9fLnRhYmxlX2ZvbnRfc2l6ZSA9IGZvbnRTaXplO1xuICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18ucGFkZGluZyA9IHBhZGRpbmc7XG4gICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5oZWFkZXJCYWNrZ3JvdW5kQ29sb3IgPSBoZWFkZXJCYWNrZ3JvdW5kQ29sb3I7XG4gICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5oZWFkZXJUZXh0Q29sb3IgPSBoZWFkZXJUZXh0Q29sb3I7XG4gICAgdGhpcy5zZXRGb250U2l6ZShmb250U2l6ZSk7XG5cbiAgICAvLyBTZXQgaGVhZGVyIHZhbHVlc1xuICAgIGlmIChoZWFkZXJzID09PSB1bmRlZmluZWQgfHwgaGVhZGVycyA9PT0gbnVsbCkge1xuICAgICAgLy8gTm8gaGVhZGVycyBkZWZpbmVkIHNvIHdlIGRlcml2ZSBmcm9tIGRhdGFcbiAgICAgIGhlYWRlck5hbWVzID0gT2JqZWN0LmtleXMoZGF0YVswXSk7XG4gICAgICBoZWFkZXJMYWJlbHMgPSBoZWFkZXJOYW1lcztcbiAgICAgIGhlYWRlckFsaWducyA9IGhlYWRlck5hbWVzLm1hcChmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFwibGVmdFwiO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpICYmIHR5cGVvZiBoZWFkZXJzWzBdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBoZWFkZXJOYW1lcyA9IGhlYWRlcnMubWFwKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgICByZXR1cm4gaGVhZGVyLm5hbWU7XG4gICAgICB9KTtcbiAgICAgIGhlYWRlckxhYmVscyA9IGhlYWRlcnMubWFwKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgICByZXR1cm4gaGVhZGVyLnByb21wdCB8fCBoZWFkZXIubmFtZSB8fCBcIlwiO1xuICAgICAgfSk7XG4gICAgICBoZWFkZXJBbGlnbnMgPSBoZWFkZXJzLm1hcChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgcmV0dXJuIGhlYWRlci5hbGlnbiB8fCBcImxlZnRcIjtcbiAgICAgIH0pO1xuICAgICAgLy8gU3BsaXQgaGVhZGVyIGNvbmZpZ3MgaW50byBuYW1lcyBhbmQgcHJvbXB0c1xuICAgICAgZm9yIChpID0gMDsgaSA8IGhlYWRlcnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29sdW1uV2lkdGhzW2hlYWRlcnNbaV0ubmFtZV0gPSBoZWFkZXJzW2ldLndpZHRoICogcHgycHQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpICYmIHR5cGVvZiBoZWFkZXJzWzBdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBoZWFkZXJOYW1lcyA9IGhlYWRlcnM7XG4gICAgICBoZWFkZXJMYWJlbHMgPSBoZWFkZXJOYW1lcztcbiAgICAgIGhlYWRlckFsaWducyA9IGhlYWRlck5hbWVzLm1hcChmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFwibGVmdFwiO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgYXV0b1NpemUgfHxcbiAgICAgIChBcnJheS5pc0FycmF5KGhlYWRlcnMpICYmIHR5cGVvZiBoZWFkZXJzWzBdID09PSBcInN0cmluZ1wiKVxuICAgICkge1xuICAgICAgdmFyIGhlYWRlck5hbWU7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgaGVhZGVyTmFtZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaGVhZGVyTmFtZSA9IGhlYWRlck5hbWVzW2ldO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIG1hdHJpeCBvZiBjb2x1bW5zIGUuZy4sIHtjb2x1bW5fdGl0bGU6IFtyb3cxX1JlY29yZCwgcm93Ml9SZWNvcmRdfVxuXG4gICAgICAgIGNvbHVtbk1hdHJpeFtoZWFkZXJOYW1lXSA9IGRhdGEubWFwKGZ1bmN0aW9uKHJlYykge1xuICAgICAgICAgIHJldHVybiByZWNbaGVhZGVyTmFtZV07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGdldCBoZWFkZXIgd2lkdGhcbiAgICAgICAgdGhpcy5zZXRGb250KHVuZGVmaW5lZCwgXCJib2xkXCIpO1xuICAgICAgICBjb2x1bW5NaW5XaWR0aHMucHVzaChcbiAgICAgICAgICB0aGlzLmdldFRleHREaW1lbnNpb25zKGhlYWRlckxhYmVsc1tpXSwge1xuICAgICAgICAgICAgZm9udFNpemU6IHRoaXMuaW50ZXJuYWwuX19jZWxsX18udGFibGVfZm9udF9zaXplLFxuICAgICAgICAgICAgc2NhbGVGYWN0b3I6IHRoaXMuaW50ZXJuYWwuc2NhbGVGYWN0b3JcbiAgICAgICAgICB9KS53XG4gICAgICAgICk7XG4gICAgICAgIGNvbHVtbiA9IGNvbHVtbk1hdHJpeFtoZWFkZXJOYW1lXTtcblxuICAgICAgICAvLyBnZXQgY2VsbCB3aWR0aHNcbiAgICAgICAgdGhpcy5zZXRGb250KHVuZGVmaW5lZCwgXCJub3JtYWxcIik7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBjb2x1bW4ubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgICBjb2x1bW5NaW5XaWR0aHMucHVzaChcbiAgICAgICAgICAgIHRoaXMuZ2V0VGV4dERpbWVuc2lvbnMoY29sdW1uW2pdLCB7XG4gICAgICAgICAgICAgIGZvbnRTaXplOiB0aGlzLmludGVybmFsLl9fY2VsbF9fLnRhYmxlX2ZvbnRfc2l6ZSxcbiAgICAgICAgICAgICAgc2NhbGVGYWN0b3I6IHRoaXMuaW50ZXJuYWwuc2NhbGVGYWN0b3JcbiAgICAgICAgICAgIH0pLndcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IGZpbmFsIGNvbHVtbiB3aWR0aFxuICAgICAgICBjb2x1bW5XaWR0aHNbaGVhZGVyTmFtZV0gPVxuICAgICAgICAgIE1hdGgubWF4LmFwcGx5KG51bGwsIGNvbHVtbk1pbldpZHRocykgKyBwYWRkaW5nICsgcGFkZGluZztcblxuICAgICAgICAvL2hhdmUgdG8gcmVzZXRcbiAgICAgICAgY29sdW1uTWluV2lkdGhzID0gW107XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0gQ29uc3RydWN0IHRoZSB0YWJsZVxuXG4gICAgaWYgKHByaW50SGVhZGVycykge1xuICAgICAgdmFyIHJvdyA9IHt9O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGhlYWRlck5hbWVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHJvd1toZWFkZXJOYW1lc1tpXV0gPSB7fTtcbiAgICAgICAgcm93W2hlYWRlck5hbWVzW2ldXS50ZXh0ID0gaGVhZGVyTGFiZWxzW2ldO1xuICAgICAgICByb3dbaGVhZGVyTmFtZXNbaV1dLmFsaWduID0gaGVhZGVyQWxpZ25zW2ldO1xuICAgICAgfVxuXG4gICAgICB2YXIgcm93SGVpZ2h0ID0gY2FsY3VsYXRlTGluZUhlaWdodC5jYWxsKHRoaXMsIHJvdywgY29sdW1uV2lkdGhzKTtcblxuICAgICAgLy8gQ29uc3RydWN0IHRoZSBoZWFkZXIgcm93XG4gICAgICB0YWJsZUhlYWRlckNvbmZpZ3MgPSBoZWFkZXJOYW1lcy5tYXAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDZWxsKFxuICAgICAgICAgIHgsXG4gICAgICAgICAgeSxcbiAgICAgICAgICBjb2x1bW5XaWR0aHNbdmFsdWVdLFxuICAgICAgICAgIHJvd0hlaWdodCxcbiAgICAgICAgICByb3dbdmFsdWVdLnRleHQsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHJvd1t2YWx1ZV0uYWxpZ25cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdG9yZSB0aGUgdGFibGUgaGVhZGVyIGNvbmZpZ1xuICAgICAgdGhpcy5zZXRUYWJsZUhlYWRlclJvdyh0YWJsZUhlYWRlckNvbmZpZ3MpO1xuXG4gICAgICAvLyBQcmludCB0aGUgaGVhZGVyIGZvciB0aGUgc3RhcnQgb2YgdGhlIHRhYmxlXG4gICAgICB0aGlzLnByaW50SGVhZGVyUm93KDEsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3QgdGhlIGRhdGEgcm93c1xuXG4gICAgdmFyIGFsaWduID0gaGVhZGVycy5yZWR1Y2UoZnVuY3Rpb24ocHYsIGN2KSB7XG4gICAgICBwdltjdi5uYW1lXSA9IGN2LmFsaWduO1xuICAgICAgcmV0dXJuIHB2O1xuICAgIH0sIHt9KTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKFwicm93U3RhcnRcIiBpbiBjb25maWcgJiYgY29uZmlnLnJvd1N0YXJ0IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgY29uZmlnLnJvd1N0YXJ0KFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvdzogaSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFbaV1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhciBsaW5lSGVpZ2h0ID0gY2FsY3VsYXRlTGluZUhlaWdodC5jYWxsKHRoaXMsIGRhdGFbaV0sIGNvbHVtbldpZHRocyk7XG5cbiAgICAgIGZvciAoaiA9IDA7IGogPCBoZWFkZXJOYW1lcy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICB2YXIgY2VsbERhdGEgPSBkYXRhW2ldW2hlYWRlck5hbWVzW2pdXTtcbiAgICAgICAgaWYgKFwiY2VsbFN0YXJ0XCIgaW4gY29uZmlnICYmIGNvbmZpZy5jZWxsU3RhcnQgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgIGNvbmZpZy5jZWxsU3RhcnQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJvdzogaSxcbiAgICAgICAgICAgICAgY29sOiBqLFxuICAgICAgICAgICAgICBkYXRhOiBjZWxsRGF0YVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNlbGwuY2FsbChcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIG5ldyBDZWxsKFxuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHksXG4gICAgICAgICAgICBjb2x1bW5XaWR0aHNbaGVhZGVyTmFtZXNbal1dLFxuICAgICAgICAgICAgbGluZUhlaWdodCxcbiAgICAgICAgICAgIGNlbGxEYXRhLFxuICAgICAgICAgICAgaSArIDIsXG4gICAgICAgICAgICBhbGlnbltoZWFkZXJOYW1lc1tqXV1cbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18udGFibGVfeCA9IHg7XG4gICAgdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy50YWJsZV95ID0geTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBoZWlnaHQgZm9yIGNvbnRhaW5pbmcgdGhlIGhpZ2hlc3QgY29sdW1uXG4gICAqXG4gICAqIEBuYW1lIGNhbGN1bGF0ZUxpbmVIZWlnaHRcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IG1vZGVsIGlzIHRoZSBsaW5lIG9mIGRhdGEgd2Ugd2FudCB0byBjYWxjdWxhdGUgdGhlIGhlaWdodCBvZlxuICAgKiBAcGFyYW0ge0ludGVnZXJbXX0gY29sdW1uV2lkdGhzIGlzIHNpemUgb2YgZWFjaCBjb2x1bW5cbiAgICogQHJldHVybnMge251bWJlcn0gbGluZUhlaWdodFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdmFyIGNhbGN1bGF0ZUxpbmVIZWlnaHQgPSBmdW5jdGlvbiBjYWxjdWxhdGVMaW5lSGVpZ2h0KG1vZGVsLCBjb2x1bW5XaWR0aHMpIHtcbiAgICB2YXIgcGFkZGluZyA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18ucGFkZGluZztcbiAgICB2YXIgZm9udFNpemUgPSB0aGlzLmludGVybmFsLl9fY2VsbF9fLnRhYmxlX2ZvbnRfc2l6ZTtcbiAgICB2YXIgc2NhbGVGYWN0b3IgPSB0aGlzLmludGVybmFsLnNjYWxlRmFjdG9yO1xuXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG1vZGVsKVxuICAgICAgLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbW9kZWxba2V5XTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXRUZXh0VG9TaXplKFxuICAgICAgICAgIHZhbHVlLmhhc093blByb3BlcnR5KFwidGV4dFwiKSA/IHZhbHVlLnRleHQgOiB2YWx1ZSxcbiAgICAgICAgICBjb2x1bW5XaWR0aHNba2V5XSAtIHBhZGRpbmcgLSBwYWRkaW5nXG4gICAgICAgICk7XG4gICAgICB9LCB0aGlzKVxuICAgICAgLm1hcChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICh0aGlzLmdldExpbmVIZWlnaHRGYWN0b3IoKSAqIHZhbHVlLmxlbmd0aCAqIGZvbnRTaXplKSAvIHNjYWxlRmFjdG9yICtcbiAgICAgICAgICBwYWRkaW5nICtcbiAgICAgICAgICBwYWRkaW5nXG4gICAgICAgICk7XG4gICAgICB9LCB0aGlzKVxuICAgICAgLnJlZHVjZShmdW5jdGlvbihwdiwgY3YpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHB2LCBjdik7XG4gICAgICB9LCAwKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcmUgdGhlIGNvbmZpZyBmb3Igb3V0cHV0dGluZyBhIHRhYmxlIGhlYWRlclxuICAgKlxuICAgKiBAbmFtZSBzZXRUYWJsZUhlYWRlclJvd1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3RbXX0gY29uZmlnXG4gICAqIEFuIGFycmF5IG9mIGNlbGwgY29uZmlncyB0aGF0IHdvdWxkIGRlZmluZSBhIGhlYWRlciByb3c6IEVhY2ggY29uZmlnIG1hdGNoZXMgdGhlIGNvbmZpZyB1c2VkIGJ5IGpzUERGQVBJLmNlbGxcbiAgICogZXhjZXB0IHRoZSBsaW5lTnVtYmVyIHBhcmFtZXRlciBpcyBleGNsdWRlZFxuICAgKi9cbiAganNQREZBUEkuc2V0VGFibGVIZWFkZXJSb3cgPSBmdW5jdGlvbihjb25maWcpIHtcbiAgICBfaW5pdGlhbGl6ZS5jYWxsKHRoaXMpO1xuICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18udGFibGVIZWFkZXJSb3cgPSBjb25maWc7XG4gIH07XG5cbiAgLyoqXG4gICAqIE91dHB1dCB0aGUgc3RvcmUgaGVhZGVyIHJvd1xuICAgKlxuICAgKiBAbmFtZSBwcmludEhlYWRlclJvd1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtudW1iZXJ9IGxpbmVOdW1iZXIgVGhlIGxpbmUgbnVtYmVyIHRvIG91dHB1dCB0aGUgaGVhZGVyIGF0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gbmV3X3BhZ2VcbiAgICovXG4gIGpzUERGQVBJLnByaW50SGVhZGVyUm93ID0gZnVuY3Rpb24obGluZU51bWJlciwgbmV3X3BhZ2UpIHtcbiAgICBfaW5pdGlhbGl6ZS5jYWxsKHRoaXMpO1xuICAgIGlmICghdGhpcy5pbnRlcm5hbC5fX2NlbGxfXy50YWJsZUhlYWRlclJvdykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvcGVydHkgdGFibGVIZWFkZXJSb3cgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgIH1cblxuICAgIHZhciB0YWJsZUhlYWRlckNlbGw7XG5cbiAgICBwcmludGluZ0hlYWRlclJvdyA9IHRydWU7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmludGVybmFsLl9fY2VsbF9fLmhlYWRlckZ1bmN0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18uaGVhZGVyRnVuY3Rpb24oXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHRoaXMuaW50ZXJuYWwuX19jZWxsX18ucGFnZXNcbiAgICAgICk7XG4gICAgICB0aGlzLmludGVybmFsLl9fY2VsbF9fLmxhc3RDZWxsID0gbmV3IENlbGwoXG4gICAgICAgIHBvc2l0aW9uWzBdLFxuICAgICAgICBwb3NpdGlvblsxXSxcbiAgICAgICAgcG9zaXRpb25bMl0sXG4gICAgICAgIHBvc2l0aW9uWzNdLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIC0xXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnNldEZvbnQodW5kZWZpbmVkLCBcImJvbGRcIik7XG5cbiAgICB2YXIgdGVtcEhlYWRlckNvbmYgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW50ZXJuYWwuX19jZWxsX18udGFibGVIZWFkZXJSb3cubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHRhYmxlSGVhZGVyQ2VsbCA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18udGFibGVIZWFkZXJSb3dbaV0uY2xvbmUoKTtcbiAgICAgIGlmIChuZXdfcGFnZSkge1xuICAgICAgICB0YWJsZUhlYWRlckNlbGwueSA9IHRoaXMuaW50ZXJuYWwuX19jZWxsX18ubWFyZ2lucy50b3AgfHwgMDtcbiAgICAgICAgdGVtcEhlYWRlckNvbmYucHVzaCh0YWJsZUhlYWRlckNlbGwpO1xuICAgICAgfVxuICAgICAgdGFibGVIZWFkZXJDZWxsLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyO1xuICAgICAgdmFyIGN1cnJlbnRUZXh0Q29sb3IgPSB0aGlzLmdldFRleHRDb2xvcigpO1xuICAgICAgdGhpcy5zZXRUZXh0Q29sb3IodGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5oZWFkZXJUZXh0Q29sb3IpO1xuICAgICAgdGhpcy5zZXRGaWxsQ29sb3IodGhpcy5pbnRlcm5hbC5fX2NlbGxfXy5oZWFkZXJCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgY2VsbC5jYWxsKHRoaXMsIHRhYmxlSGVhZGVyQ2VsbCk7XG4gICAgICB0aGlzLnNldFRleHRDb2xvcihjdXJyZW50VGV4dENvbG9yKTtcbiAgICB9XG4gICAgaWYgKHRlbXBIZWFkZXJDb25mLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0VGFibGVIZWFkZXJSb3codGVtcEhlYWRlckNvbmYpO1xuICAgIH1cbiAgICB0aGlzLnNldEZvbnQodW5kZWZpbmVkLCBcIm5vcm1hbFwiKTtcbiAgICBwcmludGluZ0hlYWRlclJvdyA9IGZhbHNlO1xuICB9O1xufSkoanNQREYuQVBJKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMgWW91c3NlZiBCZWRkYWQsIHlvdXNzZWYuYmVkZGFkQGdtYWlsLmNvbVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4gKiBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbiAqIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG4gKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0ZcbiAqIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG4gKiBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFXG4gKiBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4gKiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbiAqIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuXG4vKipcbiAqIGpzUERGIEphdmFTY3JpcHQgcGx1Z2luXG4gKlxuICogQG5hbWUgamF2YXNjcmlwdFxuICogQG1vZHVsZVxuICovXG4oZnVuY3Rpb24oanNQREZBUEkpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIHZhciBqc05hbWVzT2JqLCBqc0pzT2JqLCB0ZXh0O1xuICAvKipcbiAgICogQG5hbWUgYWRkSlNcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBqYXZhc2NyaXB0IFRoZSBqYXZhc2NyaXB0IHRvIGJlIGVtYmVkZGVkIGludG8gdGhlIFBERi1maWxlLlxuICAgKiBAcmV0dXJucyB7anNQREZ9XG4gICAqL1xuICBqc1BERkFQSS5hZGRKUyA9IGZ1bmN0aW9uKGphdmFzY3JpcHQpIHtcbiAgICB0ZXh0ID0gamF2YXNjcmlwdDtcbiAgICB0aGlzLmludGVybmFsLmV2ZW50cy5zdWJzY3JpYmUoXCJwb3N0UHV0UmVzb3VyY2VzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAganNOYW1lc09iaiA9IHRoaXMuaW50ZXJuYWwubmV3T2JqZWN0KCk7XG4gICAgICB0aGlzLmludGVybmFsLm91dChcIjw8XCIpO1xuICAgICAgdGhpcy5pbnRlcm5hbC5vdXQoXCIvTmFtZXMgWyhFbWJlZGRlZEpTKSBcIiArIChqc05hbWVzT2JqICsgMSkgKyBcIiAwIFJdXCIpO1xuICAgICAgdGhpcy5pbnRlcm5hbC5vdXQoXCI+PlwiKTtcbiAgICAgIHRoaXMuaW50ZXJuYWwub3V0KFwiZW5kb2JqXCIpO1xuXG4gICAgICBqc0pzT2JqID0gdGhpcy5pbnRlcm5hbC5uZXdPYmplY3QoKTtcbiAgICAgIHRoaXMuaW50ZXJuYWwub3V0KFwiPDxcIik7XG4gICAgICB0aGlzLmludGVybmFsLm91dChcIi9TIC9KYXZhU2NyaXB0XCIpO1xuICAgICAgdGhpcy5pbnRlcm5hbC5vdXQoXCIvSlMgKFwiICsgdGV4dCArIFwiKVwiKTtcbiAgICAgIHRoaXMuaW50ZXJuYWwub3V0KFwiPj5cIik7XG4gICAgICB0aGlzLmludGVybmFsLm91dChcImVuZG9ialwiKTtcbiAgICB9KTtcbiAgICB0aGlzLmludGVybmFsLmV2ZW50cy5zdWJzY3JpYmUoXCJwdXRDYXRhbG9nXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGpzTmFtZXNPYmogIT09IHVuZGVmaW5lZCAmJiBqc0pzT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pbnRlcm5hbC5vdXQoXCIvTmFtZXMgPDwvSmF2YVNjcmlwdCBcIiArIGpzTmFtZXNPYmogKyBcIiAwIFI+PlwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn0pKGpzUERGLkFQSSk7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1mYWxsdGhyb3VnaCAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXHJcbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBqc1BERiBDb250ZXh0MkQgUGx1Z0luIENvcHlyaWdodCAoYykgMjAxNCBTdGV2ZW4gU3B1bmdpbiAoVHdlbHZlVG9uZSBMTEMpIHN0ZXZlbkB0d2VsdmV0b25lLnR2XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcclxuaW1wb3J0IHsgUkdCQ29sb3IgfSBmcm9tIFwiLi4vbGlicy9yZ2Jjb2xvci5qc1wiO1xyXG5pbXBvcnQgeyBjb25zb2xlIH0gZnJvbSBcIi4uL2xpYnMvY29uc29sZS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGJ1aWxkRm9udEZhY2VNYXAsXHJcbiAgcGFyc2VGb250RmFtaWx5LFxyXG4gIHJlc29sdmVGb250RmFjZVxyXG59IGZyb20gXCIuLi9saWJzL2ZvbnRGYWNlLmpzXCI7XHJcblxyXG4vKipcclxuICogVGhpcyBwbHVnaW4gbWltaWNzIHRoZSBIVE1MNSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuXHJcbiAqXHJcbiAqIFRoZSBnb2FsIGlzIHRvIHByb3ZpZGUgYSB3YXkgZm9yIGN1cnJlbnQgY2FudmFzIGltcGxlbWVudGF0aW9ucyB0byBwcmludCBkaXJlY3RseSB0byBhIFBERi5cclxuICpcclxuICogQG5hbWUgY29udGV4dDJkXHJcbiAqIEBtb2R1bGVcclxuICovXHJcbihmdW5jdGlvbihqc1BERkFQSSkge1xyXG4gIFwidXNlIHN0cmljdFwiO1xyXG4gIHZhciBDb250ZXh0TGF5ZXIgPSBmdW5jdGlvbihjdHgpIHtcclxuICAgIGN0eCA9IGN0eCB8fCB7fTtcclxuICAgIHRoaXMuaXNTdHJva2VUcmFuc3BhcmVudCA9IGN0eC5pc1N0cm9rZVRyYW5zcGFyZW50IHx8IGZhbHNlO1xyXG4gICAgdGhpcy5zdHJva2VPcGFjaXR5ID0gY3R4LnN0cm9rZU9wYWNpdHkgfHwgMTtcclxuICAgIHRoaXMuc3Ryb2tlU3R5bGUgPSBjdHguc3Ryb2tlU3R5bGUgfHwgXCIjMDAwMDAwXCI7XHJcbiAgICB0aGlzLmZpbGxTdHlsZSA9IGN0eC5maWxsU3R5bGUgfHwgXCIjMDAwMDAwXCI7XHJcbiAgICB0aGlzLmlzRmlsbFRyYW5zcGFyZW50ID0gY3R4LmlzRmlsbFRyYW5zcGFyZW50IHx8IGZhbHNlO1xyXG4gICAgdGhpcy5maWxsT3BhY2l0eSA9IGN0eC5maWxsT3BhY2l0eSB8fCAxO1xyXG4gICAgdGhpcy5mb250ID0gY3R4LmZvbnQgfHwgXCIxMHB4IHNhbnMtc2VyaWZcIjtcclxuICAgIHRoaXMudGV4dEJhc2VsaW5lID0gY3R4LnRleHRCYXNlbGluZSB8fCBcImFscGhhYmV0aWNcIjtcclxuICAgIHRoaXMudGV4dEFsaWduID0gY3R4LnRleHRBbGlnbiB8fCBcImxlZnRcIjtcclxuICAgIHRoaXMubGluZVdpZHRoID0gY3R4LmxpbmVXaWR0aCB8fCAxO1xyXG4gICAgdGhpcy5saW5lSm9pbiA9IGN0eC5saW5lSm9pbiB8fCBcIm1pdGVyXCI7XHJcbiAgICB0aGlzLmxpbmVDYXAgPSBjdHgubGluZUNhcCB8fCBcImJ1dHRcIjtcclxuICAgIHRoaXMucGF0aCA9IGN0eC5wYXRoIHx8IFtdO1xyXG4gICAgdGhpcy50cmFuc2Zvcm0gPVxyXG4gICAgICB0eXBlb2YgY3R4LnRyYW5zZm9ybSAhPT0gXCJ1bmRlZmluZWRcIlxyXG4gICAgICAgID8gY3R4LnRyYW5zZm9ybS5jbG9uZSgpXHJcbiAgICAgICAgOiBuZXcgTWF0cml4KCk7XHJcbiAgICB0aGlzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gfHwgXCJub3JtYWxcIjtcclxuICAgIHRoaXMuZ2xvYmFsQWxwaGEgPSBjdHguZ2xvYmFsQWxwaGEgfHwgMS4wO1xyXG4gICAgdGhpcy5jbGlwX3BhdGggPSBjdHguY2xpcF9wYXRoIHx8IFtdO1xyXG4gICAgdGhpcy5jdXJyZW50UG9pbnQgPSBjdHguY3VycmVudFBvaW50IHx8IG5ldyBQb2ludCgpO1xyXG4gICAgdGhpcy5taXRlckxpbWl0ID0gY3R4Lm1pdGVyTGltaXQgfHwgMTAuMDtcclxuICAgIHRoaXMubGFzdFBvaW50ID0gY3R4Lmxhc3RQb2ludCB8fCBuZXcgUG9pbnQoKTtcclxuICAgIHRoaXMubGluZURhc2hPZmZzZXQgPSBjdHgubGluZURhc2hPZmZzZXQgfHwgMC4wO1xyXG4gICAgdGhpcy5saW5lRGFzaCA9IGN0eC5saW5lRGFzaCB8fCBbXTtcclxuICAgIHRoaXMubWFyZ2luID0gY3R4Lm1hcmdpbiB8fCBbMCwgMCwgMCwgMF07XHJcbiAgICB0aGlzLnByZXZQYWdlTGFzdEVsZW1PZmZzZXQgPSBjdHgucHJldlBhZ2VMYXN0RWxlbU9mZnNldCB8fCAwO1xyXG5cclxuICAgIHRoaXMuaWdub3JlQ2xlYXJSZWN0ID1cclxuICAgICAgdHlwZW9mIGN0eC5pZ25vcmVDbGVhclJlY3QgPT09IFwiYm9vbGVhblwiID8gY3R4Lmlnbm9yZUNsZWFyUmVjdCA6IHRydWU7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvL3N0dWJcclxuICB2YXIgZjIsXHJcbiAgICBnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZVN0cmluZyxcclxuICAgIGdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZyxcclxuICAgIGdldEhvcml6b250YWxDb29yZGluYXRlLFxyXG4gICAgZ2V0VmVydGljYWxDb29yZGluYXRlLFxyXG4gICAgUG9pbnQsXHJcbiAgICBSZWN0YW5nbGUsXHJcbiAgICBNYXRyaXgsXHJcbiAgICBfY3R4O1xyXG4gIGpzUERGQVBJLmV2ZW50cy5wdXNoKFtcclxuICAgIFwiaW5pdGlhbGl6ZWRcIixcclxuICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLmNvbnRleHQyZCA9IG5ldyBDb250ZXh0MkQodGhpcyk7XHJcblxyXG4gICAgICBmMiA9IHRoaXMuaW50ZXJuYWwuZjI7XHJcbiAgICAgIGdldEhvcml6b250YWxDb29yZGluYXRlU3RyaW5nID0gdGhpcy5pbnRlcm5hbC5nZXRDb29yZGluYXRlU3RyaW5nO1xyXG4gICAgICBnZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcgPSB0aGlzLmludGVybmFsLmdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZztcclxuICAgICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGUgPSB0aGlzLmludGVybmFsLmdldEhvcml6b250YWxDb29yZGluYXRlO1xyXG4gICAgICBnZXRWZXJ0aWNhbENvb3JkaW5hdGUgPSB0aGlzLmludGVybmFsLmdldFZlcnRpY2FsQ29vcmRpbmF0ZTtcclxuICAgICAgUG9pbnQgPSB0aGlzLmludGVybmFsLlBvaW50O1xyXG4gICAgICBSZWN0YW5nbGUgPSB0aGlzLmludGVybmFsLlJlY3RhbmdsZTtcclxuICAgICAgTWF0cml4ID0gdGhpcy5pbnRlcm5hbC5NYXRyaXg7XHJcbiAgICAgIF9jdHggPSBuZXcgQ29udGV4dExheWVyKCk7XHJcbiAgICB9XHJcbiAgXSk7XHJcblxyXG4gIHZhciBDb250ZXh0MkQgPSBmdW5jdGlvbihwZGYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbnZhc1wiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgcGFyZW50Tm9kZTogZmFsc2UsIHN0eWxlOiBmYWxzZSB9O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgX3BkZiA9IHBkZjtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBkZlwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9wZGY7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBfcGFnZVdyYXBYRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBwYWdlV3JhcFhFbmFibGVkXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqIEBkZWZhdWx0IGZhbHNlXHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhZ2VXcmFwWEVuYWJsZWRcIiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfcGFnZVdyYXBYRW5hYmxlZDtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIF9wYWdlV3JhcFhFbmFibGVkID0gQm9vbGVhbih2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBfcGFnZVdyYXBZRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBwYWdlV3JhcFlFbmFibGVkXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqIEBkZWZhdWx0IHRydWVcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGFnZVdyYXBZRW5hYmxlZFwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9wYWdlV3JhcFlFbmFibGVkO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgX3BhZ2VXcmFwWUVuYWJsZWQgPSBCb29sZWFuKHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIF9wb3NYID0gMDtcclxuICAgIC8qKlxyXG4gICAgICogQG5hbWUgcG9zWFxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBkZWZhdWx0IDBcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicG9zWFwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9wb3NYO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgIF9wb3NYID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgX3Bvc1kgPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBwb3NZXHJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICogQGRlZmF1bHQgMFxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwb3NZXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gX3Bvc1k7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgX3Bvc1kgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBvciBzZXRzIHRoZSBwYWdlIG1hcmdpbiB3aGVuIHVzaW5nIGF1dG8gcGFnaW5nLiBIYXMgbm8gZWZmZWN0IHdoZW4ge0BsaW5rIGF1dG9QYWdpbmd9IGlzIG9mZi5cclxuICAgICAqIEBuYW1lIG1hcmdpblxyXG4gICAgICogQHR5cGUge251bWJlcnxudW1iZXJbXX1cclxuICAgICAqIEBkZWZhdWx0IFswLCAwLCAwLCAwXVxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXJnaW5cIiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfY3R4Lm1hcmdpbjtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtYXJnaW47XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgbWFyZ2luID0gW3ZhbHVlLCB2YWx1ZSwgdmFsdWUsIHZhbHVlXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbWFyZ2luID0gbmV3IEFycmF5KDQpO1xyXG4gICAgICAgICAgbWFyZ2luWzBdID0gdmFsdWVbMF07XHJcbiAgICAgICAgICBtYXJnaW5bMV0gPSB2YWx1ZS5sZW5ndGggPj0gMiA/IHZhbHVlWzFdIDogbWFyZ2luWzBdO1xyXG4gICAgICAgICAgbWFyZ2luWzJdID0gdmFsdWUubGVuZ3RoID49IDMgPyB2YWx1ZVsyXSA6IG1hcmdpblswXTtcclxuICAgICAgICAgIG1hcmdpblszXSA9IHZhbHVlLmxlbmd0aCA+PSA0ID8gdmFsdWVbM10gOiBtYXJnaW5bMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9jdHgubWFyZ2luID0gbWFyZ2luO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgX2F1dG9QYWdpbmcgPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBvciBzZXRzIHRoZSBhdXRvIHBhZ2luZyBtb2RlLiBXaGVuIGF1dG8gcGFnaW5nIGlzIGVuYWJsZWQsIHRoZSBjb250ZXh0MmQgd2lsbCBhdXRvbWF0aWNhbGx5IGRyYXcgb24gdGhlXHJcbiAgICAgKiBuZXh0IHBhZ2UgaWYgYSBzaGFwZSBvciB0ZXh0IGNodW5rIGRvZXNuJ3QgZml0IGVudGlyZWx5IG9uIHRoZSBjdXJyZW50IHBhZ2UuIFRoZSBjb250ZXh0MmQgd2lsbCBjcmVhdGUgbmV3XHJcbiAgICAgKiBwYWdlcyBpZiByZXF1aXJlZC5cclxuICAgICAqXHJcbiAgICAgKiBDb250ZXh0MmQgc3VwcG9ydHMgZGlmZmVyZW50IG1vZGVzOlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPlxyXG4gICAgICogICA8Y29kZT5mYWxzZTwvY29kZT46IEF1dG8gcGFnaW5nIGlzIGRpc2FibGVkLlxyXG4gICAgICogPC9saT5cclxuICAgICAqIDxsaT5cclxuICAgICAqICAgPGNvZGU+dHJ1ZTwvY29kZT4gb3IgPGNvZGU+J3NsaWNlJzwvY29kZT46IFdpbGwgY3V0IHNoYXBlcyBvciB0ZXh0IGNodW5rcyBhY3Jvc3MgcGFnZSBicmVha3MuIFdpbGwgcG9zc2libHlcclxuICAgICAqICAgc2xpY2UgdGV4dCBpbiBoYWxmLCBtYWtpbmcgaXQgZGlmZmljdWx0IHRvIHJlYWQuXHJcbiAgICAgKiA8L2xpPlxyXG4gICAgICogPGxpPlxyXG4gICAgICogICA8Y29kZT4ndGV4dCc8L2NvZGU+OiBUcnlzIG5vdCB0byBjdXQgdGV4dCBpbiBoYWxmIGFjcm9zcyBwYWdlIGJyZWFrcy4gV29ya3MgYmVzdCBmb3IgZG9jdW1lbnRzIGNvbnNpc3RpbmdcclxuICAgICAqICAgbW9zdGx5IG9mIGEgc2luZ2xlIGNvbHVtbiBvZiB0ZXh0LlxyXG4gICAgICogPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAbmFtZSBDb250ZXh0MkQjYXV0b1BhZ2luZ1xyXG4gICAgICogQHR5cGUge2Jvb2xlYW58XCJzbGljZVwifFwidGV4dFwifVxyXG4gICAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b1BhZ2luZ1wiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9hdXRvUGFnaW5nO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgX2F1dG9QYWdpbmcgPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGxhc3RCcmVhayA9IDA7XHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIGxhc3RCcmVha1xyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBkZWZhdWx0IDBcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGFzdEJyZWFrXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbGFzdEJyZWFrO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgbGFzdEJyZWFrID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBwYWdlQnJlYWtzID0gW107XHJcbiAgICAvKipcclxuICAgICAqIFkgUG9zaXRpb24gb2YgcGFnZSBicmVha3MuXHJcbiAgICAgKiBAbmFtZSBwYWdlQnJlYWtzXHJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICogQGRlZmF1bHQgMFxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYWdlQnJlYWtzXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcGFnZUJyZWFrcztcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHBhZ2VCcmVha3MgPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBjdHhcclxuICAgICAqIEB0eXBlIHtvYmplY3R9XHJcbiAgICAgKiBAZGVmYXVsdCB7fVxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjdHhcIiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfY3R4O1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQ29udGV4dExheWVyKSB7XHJcbiAgICAgICAgICBfY3R4ID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lIHBhdGhcclxuICAgICAqIEB0eXBlIHthcnJheX1cclxuICAgICAqIEBkZWZhdWx0IFtdXHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhdGhcIiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfY3R4LnBhdGg7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBfY3R4LnBhdGggPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZSBjdHhTdGFja1xyXG4gICAgICogQHR5cGUge2FycmF5fVxyXG4gICAgICogQGRlZmF1bHQgW11cclxuICAgICAqL1xyXG4gICAgdmFyIF9jdHhTdGFjayA9IFtdO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY3R4U3RhY2tcIiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfY3R4U3RhY2s7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBfY3R4U3RhY2sgPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIG9yIHJldHVybnMgdGhlIGNvbG9yLCBncmFkaWVudCwgb3IgcGF0dGVybiB1c2VkIHRvIGZpbGwgdGhlIGRyYXdpbmdcclxuICAgICAqXHJcbiAgICAgKiBAbmFtZSBmaWxsU3R5bGVcclxuICAgICAqIEBkZWZhdWx0ICMwMDAwMDBcclxuICAgICAqIEBwcm9wZXJ0eSB7KGNvbG9yfGdyYWRpZW50fHBhdHRlcm4pfSB2YWx1ZSBUaGUgY29sb3Igb2YgdGhlIGRyYXdpbmcuIERlZmF1bHQgdmFsdWUgaXMgIzAwMDAwMDxiciAvPlxyXG4gICAgICogQSBncmFkaWVudCBvYmplY3QgKGxpbmVhciBvciByYWRpYWwpIHVzZWQgdG8gZmlsbCB0aGUgZHJhd2luZyAobm90IHN1cHBvcnRlZCBieSBjb250ZXh0MmQpPGJyIC8+XHJcbiAgICAgKiBBIHBhdHRlcm4gb2JqZWN0IHRvIHVzZSB0byBmaWxsIHRoZSBkcmF3aW5nIChub3Qgc3VwcG9ydGVkIGJ5IGNvbnRleHQyZClcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlsbFN0eWxlXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHguZmlsbFN0eWxlO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJnYmE7XHJcbiAgICAgICAgcmdiYSA9IGdldFJHQkEodmFsdWUpO1xyXG5cclxuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSByZ2JhLnN0eWxlO1xyXG4gICAgICAgIHRoaXMuY3R4LmlzRmlsbFRyYW5zcGFyZW50ID0gcmdiYS5hID09PSAwO1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxPcGFjaXR5ID0gcmdiYS5hO1xyXG5cclxuICAgICAgICB0aGlzLnBkZi5zZXRGaWxsQ29sb3IocmdiYS5yLCByZ2JhLmcsIHJnYmEuYiwgeyBhOiByZ2JhLmEgfSk7XHJcbiAgICAgICAgdGhpcy5wZGYuc2V0VGV4dENvbG9yKHJnYmEuciwgcmdiYS5nLCByZ2JhLmIsIHsgYTogcmdiYS5hIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgb3IgcmV0dXJucyB0aGUgY29sb3IsIGdyYWRpZW50LCBvciBwYXR0ZXJuIHVzZWQgZm9yIHN0cm9rZXNcclxuICAgICAqXHJcbiAgICAgKiBAbmFtZSBzdHJva2VTdHlsZVxyXG4gICAgICogQGRlZmF1bHQgIzAwMDAwMFxyXG4gICAgICogQHByb3BlcnR5IHtjb2xvcn0gY29sb3IgQSBDU1MgY29sb3IgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgdGhlIHN0cm9rZSBjb2xvciBvZiB0aGUgZHJhd2luZy4gRGVmYXVsdCB2YWx1ZSBpcyAjMDAwMDAwIChub3Qgc3VwcG9ydGVkIGJ5IGNvbnRleHQyZClcclxuICAgICAqIEBwcm9wZXJ0eSB7Z3JhZGllbnR9IGdyYWRpZW50IEEgZ3JhZGllbnQgb2JqZWN0IChsaW5lYXIgb3IgcmFkaWFsKSB1c2VkIHRvIGNyZWF0ZSBhIGdyYWRpZW50IHN0cm9rZSAobm90IHN1cHBvcnRlZCBieSBjb250ZXh0MmQpXHJcbiAgICAgKiBAcHJvcGVydHkge3BhdHRlcm59IHBhdHRlcm4gQSBwYXR0ZXJuIG9iamVjdCB1c2VkIHRvIGNyZWF0ZSBhIHBhdHRlcm4gc3Ryb2tlIChub3Qgc3VwcG9ydGVkIGJ5IGNvbnRleHQyZClcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3Ryb2tlU3R5bGVcIiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN0eC5zdHJva2VTdHlsZTtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHZhciByZ2JhID0gZ2V0UkdCQSh2YWx1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gcmdiYS5zdHlsZTtcclxuICAgICAgICB0aGlzLmN0eC5pc1N0cm9rZVRyYW5zcGFyZW50ID0gcmdiYS5hID09PSAwO1xyXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZU9wYWNpdHkgPSByZ2JhLmE7XHJcblxyXG4gICAgICAgIGlmIChyZ2JhLmEgPT09IDApIHtcclxuICAgICAgICAgIHRoaXMucGRmLnNldERyYXdDb2xvcigyNTUsIDI1NSwgMjU1KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJnYmEuYSA9PT0gMSkge1xyXG4gICAgICAgICAgdGhpcy5wZGYuc2V0RHJhd0NvbG9yKHJnYmEuciwgcmdiYS5nLCByZ2JhLmIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBkZi5zZXREcmF3Q29sb3IocmdiYS5yLCByZ2JhLmcsIHJnYmEuYik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgb3IgcmV0dXJucyB0aGUgc3R5bGUgb2YgdGhlIGVuZCBjYXBzIGZvciBhIGxpbmVcclxuICAgICAqXHJcbiAgICAgKiBAbmFtZSBsaW5lQ2FwXHJcbiAgICAgKiBAZGVmYXVsdCBidXR0XHJcbiAgICAgKiBAcHJvcGVydHkgeyhidXR0fHJvdW5kfHNxdWFyZSl9IGxpbmVDYXAgYnV0dCBBIGZsYXQgZWRnZSBpcyBhZGRlZCB0byBlYWNoIGVuZCBvZiB0aGUgbGluZSA8YnIvPlxyXG4gICAgICogcm91bmQgQSByb3VuZGVkIGVuZCBjYXAgaXMgYWRkZWQgdG8gZWFjaCBlbmQgb2YgdGhlIGxpbmU8YnIvPlxyXG4gICAgICogc3F1YXJlIEEgc3F1YXJlIGVuZCBjYXAgaXMgYWRkZWQgdG8gZWFjaCBlbmQgb2YgdGhlIGxpbmU8YnIvPlxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsaW5lQ2FwXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHgubGluZUNhcDtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIGlmIChbXCJidXR0XCIsIFwicm91bmRcIiwgXCJzcXVhcmVcIl0uaW5kZXhPZih2YWx1ZSkgIT09IC0xKSB7XHJcbiAgICAgICAgICB0aGlzLmN0eC5saW5lQ2FwID0gdmFsdWU7XHJcbiAgICAgICAgICB0aGlzLnBkZi5zZXRMaW5lQ2FwKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBvciByZXR1cm5zIHRoZSBjdXJyZW50IGxpbmUgd2lkdGhcclxuICAgICAqXHJcbiAgICAgKiBAbmFtZSBsaW5lV2lkdGhcclxuICAgICAqIEBkZWZhdWx0IDFcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lV2lkdGggVGhlIGN1cnJlbnQgbGluZSB3aWR0aCwgaW4gcGl4ZWxzXHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxpbmVXaWR0aFwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4LmxpbmVXaWR0aDtcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XHJcbiAgICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSB2YWx1ZTtcclxuICAgICAgICAgIHRoaXMucGRmLnNldExpbmVXaWR0aCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgb3IgcmV0dXJucyB0aGUgdHlwZSBvZiBjb3JuZXIgY3JlYXRlZCwgd2hlbiB0d28gbGluZXMgbWVldFxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsaW5lSm9pblwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4LmxpbmVKb2luO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKFtcImJldmVsXCIsIFwicm91bmRcIiwgXCJtaXRlclwiXS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICAgIHRoaXMuY3R4LmxpbmVKb2luID0gdmFsdWU7XHJcbiAgICAgICAgICB0aGlzLnBkZi5zZXRMaW5lSm9pbih2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgbnVtYmVyIHNwZWNpZnlpbmcgdGhlIG1pdGVyIGxpbWl0IHJhdGlvIGluIGNvb3JkaW5hdGUgc3BhY2UgdW5pdHMuIFplcm8sIG5lZ2F0aXZlLCBJbmZpbml0eSwgYW5kIE5hTiB2YWx1ZXMgYXJlIGlnbm9yZWQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIDEwLjAuXHJcbiAgICAgKlxyXG4gICAgICogQG5hbWUgbWl0ZXJMaW1pdFxyXG4gICAgICogQGRlZmF1bHQgMTBcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWl0ZXJMaW1pdFwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4Lm1pdGVyTGltaXQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgdGhpcy5jdHgubWl0ZXJMaW1pdCA9IHZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5wZGYuc2V0TWl0ZXJMaW1pdCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZXh0QmFzZWxpbmVcIiwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN0eC50ZXh0QmFzZWxpbmU7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLmN0eC50ZXh0QmFzZWxpbmUgPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dEFsaWduXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHgudGV4dEFsaWduO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKFtcInJpZ2h0XCIsIFwiZW5kXCIsIFwiY2VudGVyXCIsIFwibGVmdFwiLCBcInN0YXJ0XCJdLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xyXG4gICAgICAgICAgdGhpcy5jdHgudGV4dEFsaWduID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgX2ZvbnRGYWNlTWFwID0gbnVsbDtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRGb250RmFjZU1hcChwZGYsIGZvbnRGYWNlcykge1xyXG4gICAgICBpZiAoX2ZvbnRGYWNlTWFwID09PSBudWxsKSB7XHJcbiAgICAgICAgdmFyIGZvbnRNYXAgPSBwZGYuZ2V0Rm9udExpc3QoKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnZlcnRlZEZvbnRGYWNlcyA9IGNvbnZlcnRUb0ZvbnRGYWNlcyhmb250TWFwKTtcclxuXHJcbiAgICAgICAgX2ZvbnRGYWNlTWFwID0gYnVpbGRGb250RmFjZU1hcChjb252ZXJ0ZWRGb250RmFjZXMuY29uY2F0KGZvbnRGYWNlcykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gX2ZvbnRGYWNlTWFwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnZlcnRUb0ZvbnRGYWNlcyhmb250TWFwKSB7XHJcbiAgICAgIHZhciBmb250RmFjZXMgPSBbXTtcclxuXHJcbiAgICAgIE9iamVjdC5rZXlzKGZvbnRNYXApLmZvckVhY2goZnVuY3Rpb24oZmFtaWx5KSB7XHJcbiAgICAgICAgdmFyIHN0eWxlcyA9IGZvbnRNYXBbZmFtaWx5XTtcclxuXHJcbiAgICAgICAgc3R5bGVzLmZvckVhY2goZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgICAgICAgIHZhciBmb250RmFjZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgc3dpdGNoIChzdHlsZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiYm9sZFwiOlxyXG4gICAgICAgICAgICAgIGZvbnRGYWNlID0ge1xyXG4gICAgICAgICAgICAgICAgZmFtaWx5OiBmYW1pbHksXHJcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IFwiYm9sZFwiXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJpdGFsaWNcIjpcclxuICAgICAgICAgICAgICBmb250RmFjZSA9IHtcclxuICAgICAgICAgICAgICAgIGZhbWlseTogZmFtaWx5LFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwiaXRhbGljXCJcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcImJvbGRpdGFsaWNcIjpcclxuICAgICAgICAgICAgICBmb250RmFjZSA9IHtcclxuICAgICAgICAgICAgICAgIGZhbWlseTogZmFtaWx5LFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0OiBcImJvbGRcIixcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBcIml0YWxpY1wiXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJcIjpcclxuICAgICAgICAgICAgY2FzZSBcIm5vcm1hbFwiOlxyXG4gICAgICAgICAgICAgIGZvbnRGYWNlID0ge1xyXG4gICAgICAgICAgICAgICAgZmFtaWx5OiBmYW1pbHlcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIElmIGZvbnQtZmFjZSBpcyBzdGlsbCBudWxsIGhlcmUsIGl0IGlzIGEgZm9udCB3aXRoIHNvbWUgc3R5bGluZyB3ZSBkb24ndCByZWNvZ25pemUgYW5kXHJcbiAgICAgICAgICAvLyBjYW5ub3QgbWFwIG9yIGl0IGlzIGEgZm9udCBhZGRlZCB2aWEgdGhlIGZvbnRGYWNlcyBvcHRpb24gb2YgLmh0bWwoKS5cclxuICAgICAgICAgIGlmIChmb250RmFjZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBmb250RmFjZS5yZWYgPSB7XHJcbiAgICAgICAgICAgICAgbmFtZTogZmFtaWx5LFxyXG4gICAgICAgICAgICAgIHN0eWxlOiBzdHlsZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9udEZhY2VzLnB1c2goZm9udEZhY2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBmb250RmFjZXM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9mb250RmFjZXMgPSBudWxsO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIG1hcCBvZiBhdmFpbGFibGUgZm9udC1mYWNlcywgYXMgcGFzc2VkIGluIHRoZSBvcHRpb25zIG9mXHJcbiAgICAgKiAuaHRtbCgpLiBJZiBzZXQgYSBsaW1pdGVkIGltcGxlbWVudGF0aW9uIG9mIHRoZSBmb250IHN0eWxlIG1hdGNoaW5nXHJcbiAgICAgKiBhbGdvcml0aG0gZGVmaW5lZCBieSBodHRwczovL3d3dy53My5vcmcvVFIvY3NzLWZvbnRzLTMvI2ZvbnQtbWF0Y2hpbmctYWxnb3JpdGhtXHJcbiAgICAgKiB3aWxsIGJlIHVzZWQuIElmIG5vdCBzZXQgaXQgd2lsbCBmYWxsYmFjayB0byBwcmV2aW91cyBiZWhhdmlvci5cclxuICAgICAqL1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZvbnRGYWNlc1wiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIF9mb250RmFjZXM7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICBfZm9udEZhY2VNYXAgPSBudWxsO1xyXG4gICAgICAgIF9mb250RmFjZXMgPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZm9udFwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4LmZvbnQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLmN0eC5mb250ID0gdmFsdWU7XHJcbiAgICAgICAgdmFyIHJ4LCBtYXRjaGVzO1xyXG5cclxuICAgICAgICAvL3NvdXJjZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEwMTM2MDQxXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXHJcbiAgICAgICAgcnggPSAvXlxccyooPz0oPzooPzpbLWEtel0rXFxzKil7MCwyfShpdGFsaWN8b2JsaXF1ZSkpPykoPz0oPzooPzpbLWEtel0rXFxzKil7MCwyfShzbWFsbC1jYXBzKSk/KSg/PSg/Oig/OlstYS16XStcXHMqKXswLDJ9KGJvbGQoPzplcik/fGxpZ2h0ZXJ8WzEtOV0wMCkpPykoPzooPzpub3JtYWx8XFwxfFxcMnxcXDMpXFxzKil7MCwzfSgoPzp4eD8tKT8oPzpzbWFsbHxsYXJnZSl8bWVkaXVtfHNtYWxsZXJ8bGFyZ2VyfFsuXFxkXSsoPzpcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSkpKD86XFxzKlxcL1xccyoobm9ybWFsfFsuXFxkXSsoPzpcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSkpKT9cXHMqKFstXyxcXFwiXFwnXFxzYS16XSs/KVxccyokL2k7XHJcbiAgICAgICAgbWF0Y2hlcyA9IHJ4LmV4ZWModmFsdWUpO1xyXG4gICAgICAgIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICB2YXIgZm9udFN0eWxlID0gbWF0Y2hlc1sxXTtcclxuICAgICAgICAgIHZhciBmb250VmFyaWFudCA9IG1hdGNoZXNbMl07XHJcbiAgICAgICAgICB2YXIgZm9udFdlaWdodCA9IG1hdGNoZXNbM107XHJcbiAgICAgICAgICB2YXIgZm9udFNpemUgPSBtYXRjaGVzWzRdO1xyXG4gICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSBtYXRjaGVzWzVdO1xyXG4gICAgICAgICAgdmFyIGZvbnRGYW1pbHkgPSBtYXRjaGVzWzZdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByeEZvbnRTaXplID0gL14oWy5cXGRdKykoKD86JXxpbnxbY2VtXW18ZXh8cFtjdHhdKSkkL2k7XHJcbiAgICAgICAgdmFyIGZvbnRTaXplVW5pdCA9IHJ4Rm9udFNpemUuZXhlYyhmb250U2l6ZSlbMl07XHJcblxyXG4gICAgICAgIGlmIChcInB4XCIgPT09IGZvbnRTaXplVW5pdCkge1xyXG4gICAgICAgICAgZm9udFNpemUgPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGZvbnRTaXplKSAqIHRoaXMucGRmLmludGVybmFsLnNjYWxlRmFjdG9yXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXCJlbVwiID09PSBmb250U2l6ZVVuaXQpIHtcclxuICAgICAgICAgIGZvbnRTaXplID0gTWF0aC5mbG9vcihwYXJzZUZsb2F0KGZvbnRTaXplKSAqIHRoaXMucGRmLmdldEZvbnRTaXplKCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmb250U2l6ZSA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoZm9udFNpemUpICogdGhpcy5wZGYuaW50ZXJuYWwuc2NhbGVGYWN0b3JcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBkZi5zZXRGb250U2l6ZShmb250U2l6ZSk7XHJcbiAgICAgICAgdmFyIHBhcnRzID0gcGFyc2VGb250RmFtaWx5KGZvbnRGYW1pbHkpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mb250RmFjZXMpIHtcclxuICAgICAgICAgIHZhciBmb250RmFjZU1hcCA9IGdldEZvbnRGYWNlTWFwKHRoaXMucGRmLCB0aGlzLmZvbnRGYWNlcyk7XHJcblxyXG4gICAgICAgICAgdmFyIHJ1bGVzID0gcGFydHMubWFwKGZ1bmN0aW9uKGZmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgZmFtaWx5OiBmZixcclxuICAgICAgICAgICAgICBzdHJldGNoOiBcIm5vcm1hbFwiLCAvLyBUT0RPOiBFeHRyYWN0IGZvbnQtc3RyZXRjaCBmcm9tIGZvbnQgcnVsZSAocGVyaGFwcyB3cml0ZSBwcm9wZXIgcGFyc2VyIGZvciBpdD8pXHJcbiAgICAgICAgICAgICAgd2VpZ2h0OiBmb250V2VpZ2h0LFxyXG4gICAgICAgICAgICAgIHN0eWxlOiBmb250U3R5bGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHZhciBmb250ID0gcmVzb2x2ZUZvbnRGYWNlKGZvbnRGYWNlTWFwLCBydWxlcyk7XHJcbiAgICAgICAgICB0aGlzLnBkZi5zZXRGb250KGZvbnQucmVmLm5hbWUsIGZvbnQucmVmLnN0eWxlKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdHlsZSA9IFwiXCI7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgZm9udFdlaWdodCA9PT0gXCJib2xkXCIgfHxcclxuICAgICAgICAgIHBhcnNlSW50KGZvbnRXZWlnaHQsIDEwKSA+PSA3MDAgfHxcclxuICAgICAgICAgIGZvbnRTdHlsZSA9PT0gXCJib2xkXCJcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHN0eWxlID0gXCJib2xkXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZm9udFN0eWxlID09PSBcIml0YWxpY1wiKSB7XHJcbiAgICAgICAgICBzdHlsZSArPSBcIml0YWxpY1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0eWxlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgc3R5bGUgPSBcIm5vcm1hbFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIganNQZGZGb250TmFtZSA9IFwiXCI7XHJcblxyXG4gICAgICAgIHZhciBmYWxsYmFja0ZvbnRzID0ge1xyXG4gICAgICAgICAgYXJpYWw6IFwiSGVsdmV0aWNhXCIsXHJcbiAgICAgICAgICBBcmlhbDogXCJIZWx2ZXRpY2FcIixcclxuICAgICAgICAgIHZlcmRhbmE6IFwiSGVsdmV0aWNhXCIsXHJcbiAgICAgICAgICBWZXJkYW5hOiBcIkhlbHZldGljYVwiLFxyXG4gICAgICAgICAgaGVsdmV0aWNhOiBcIkhlbHZldGljYVwiLFxyXG4gICAgICAgICAgSGVsdmV0aWNhOiBcIkhlbHZldGljYVwiLFxyXG4gICAgICAgICAgXCJzYW5zLXNlcmlmXCI6IFwiSGVsdmV0aWNhXCIsXHJcbiAgICAgICAgICBmaXhlZDogXCJDb3VyaWVyXCIsXHJcbiAgICAgICAgICBtb25vc3BhY2U6IFwiQ291cmllclwiLFxyXG4gICAgICAgICAgdGVybWluYWw6IFwiQ291cmllclwiLFxyXG4gICAgICAgICAgY3Vyc2l2ZTogXCJUaW1lc1wiLFxyXG4gICAgICAgICAgZmFudGFzeTogXCJUaW1lc1wiLFxyXG4gICAgICAgICAgc2VyaWY6IFwiVGltZXNcIlxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wZGYuaW50ZXJuYWwuZ2V0Rm9udChwYXJ0c1tpXSwgc3R5bGUsIHtcclxuICAgICAgICAgICAgICBub0ZhbGxiYWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgIGRpc2FibGVXYXJuaW5nOiB0cnVlXHJcbiAgICAgICAgICAgIH0pICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBqc1BkZkZvbnROYW1lID0gcGFydHNbaV07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgc3R5bGUgPT09IFwiYm9sZGl0YWxpY1wiICYmXHJcbiAgICAgICAgICAgIHRoaXMucGRmLmludGVybmFsLmdldEZvbnQocGFydHNbaV0sIFwiYm9sZFwiLCB7XHJcbiAgICAgICAgICAgICAgbm9GYWxsYmFjazogdHJ1ZSxcclxuICAgICAgICAgICAgICBkaXNhYmxlV2FybmluZzogdHJ1ZVxyXG4gICAgICAgICAgICB9KSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAganNQZGZGb250TmFtZSA9IHBhcnRzW2ldO1xyXG4gICAgICAgICAgICBzdHlsZSA9IFwiYm9sZFwiO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgdGhpcy5wZGYuaW50ZXJuYWwuZ2V0Rm9udChwYXJ0c1tpXSwgXCJub3JtYWxcIiwge1xyXG4gICAgICAgICAgICAgIG5vRmFsbGJhY2s6IHRydWUsXHJcbiAgICAgICAgICAgICAgZGlzYWJsZVdhcm5pbmc6IHRydWVcclxuICAgICAgICAgICAgfSkgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGpzUGRmRm9udE5hbWUgPSBwYXJ0c1tpXTtcclxuICAgICAgICAgICAgc3R5bGUgPSBcIm5vcm1hbFwiO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGpzUGRmRm9udE5hbWUgPT09IFwiXCIpIHtcclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgaWYgKGZhbGxiYWNrRm9udHNbcGFydHNbal1dKSB7XHJcbiAgICAgICAgICAgICAganNQZGZGb250TmFtZSA9IGZhbGxiYWNrRm9udHNbcGFydHNbal1dO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGpzUGRmRm9udE5hbWUgPSBqc1BkZkZvbnROYW1lID09PSBcIlwiID8gXCJUaW1lc1wiIDoganNQZGZGb250TmFtZTtcclxuICAgICAgICB0aGlzLnBkZi5zZXRGb250KGpzUGRmRm9udE5hbWUsIHN0eWxlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdsb2JhbEFscGhhXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHguZ2xvYmFsQWxwaGE7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLmN0eC5nbG9iYWxBbHBoYSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgZmxvYXQgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRoZSBsaW5lIGRhc2ggb2Zmc2V0LiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyAwLjAuXHJcbiAgICAgKlxyXG4gICAgICogQG5hbWUgbGluZURhc2hPZmZzZXRcclxuICAgICAqIEBkZWZhdWx0IDAuMFxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsaW5lRGFzaE9mZnNldFwiLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4LmxpbmVEYXNoT2Zmc2V0O1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5jdHgubGluZURhc2hPZmZzZXQgPSB2YWx1ZTtcclxuICAgICAgICBzZXRMaW5lRGFzaC5jYWxsKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBOb3QgSFRNTCBBUElcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxpbmVEYXNoXCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHgubGluZURhc2g7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLmN0eC5saW5lRGFzaCA9IHZhbHVlO1xyXG4gICAgICAgIHNldExpbmVEYXNoLmNhbGwodGhpcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE5vdCBIVE1MIEFQSVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQ2xlYXJSZWN0XCIsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHguaWdub3JlQ2xlYXJSZWN0O1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5jdHguaWdub3JlQ2xlYXJSZWN0ID0gQm9vbGVhbih2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGxpbmUgZGFzaCBwYXR0ZXJuIHVzZWQgd2hlbiBzdHJva2luZyBsaW5lcy5cclxuICAgKiBAbmFtZSBzZXRMaW5lRGFzaFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiBJdCB1c2VzIGFuIGFycmF5IG9mIHZhbHVlcyB0aGF0IHNwZWNpZnkgYWx0ZXJuYXRpbmcgbGVuZ3RocyBvZiBsaW5lcyBhbmQgZ2FwcyB3aGljaCBkZXNjcmliZSB0aGUgcGF0dGVybi5cclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLnNldExpbmVEYXNoID0gZnVuY3Rpb24oZGFzaEFycmF5KSB7XHJcbiAgICB0aGlzLmxpbmVEYXNoID0gZGFzaEFycmF5O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldHMgdGhlIGN1cnJlbnQgbGluZSBkYXNoIHBhdHRlcm4uXHJcbiAgICogQG5hbWUgZ2V0TGluZURhc2hcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEFuIEFycmF5IG9mIG51bWJlcnMgdGhhdCBzcGVjaWZ5IGRpc3RhbmNlcyB0byBhbHRlcm5hdGVseSBkcmF3IGEgbGluZSBhbmQgYSBnYXAgKGluIGNvb3JkaW5hdGUgc3BhY2UgdW5pdHMpLiBJZiB0aGUgbnVtYmVyLCB3aGVuIHNldHRpbmcgdGhlIGVsZW1lbnRzLCBpcyBvZGQsIHRoZSBlbGVtZW50cyBvZiB0aGUgYXJyYXkgZ2V0IGNvcGllZCBhbmQgY29uY2F0ZW5hdGVkLiBGb3IgZXhhbXBsZSwgc2V0dGluZyB0aGUgbGluZSBkYXNoIHRvIFs1LCAxNSwgMjVdIHdpbGwgcmVzdWx0IGluIGdldHRpbmcgYmFjayBbNSwgMTUsIDI1LCA1LCAxNSwgMjVdLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuZ2V0TGluZURhc2ggPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmxpbmVEYXNoLmxlbmd0aCAlIDIpIHtcclxuICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9nZXRMaW5lRGFzaCNyZXR1cm5fdmFsdWVcclxuICAgICAgcmV0dXJuIHRoaXMubGluZURhc2guY29uY2F0KHRoaXMubGluZURhc2gpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVGhlIGNvcGllZCB2YWx1ZSBpcyByZXR1cm5lZCB0byBwcmV2ZW50IGNvbnRhbWluYXRpb24gZnJvbSBvdXRzaWRlLlxyXG4gICAgICByZXR1cm4gdGhpcy5saW5lRGFzaC5zbGljZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcGF0aFByZVByb2Nlc3MuY2FsbCh0aGlzLCBcImZpbGxcIiwgZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFjdHVhbGx5IGRyYXdzIHRoZSBwYXRoIHlvdSBoYXZlIGRlZmluZWRcclxuICAgKlxyXG4gICAqIEBuYW1lIHN0cm9rZVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgc3Ryb2tlKCkgbWV0aG9kIGFjdHVhbGx5IGRyYXdzIHRoZSBwYXRoIHlvdSBoYXZlIGRlZmluZWQgd2l0aCBhbGwgdGhvc2UgbW92ZVRvKCkgYW5kIGxpbmVUbygpIG1ldGhvZHMuIFRoZSBkZWZhdWx0IGNvbG9yIGlzIGJsYWNrLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuc3Ryb2tlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBwYXRoUHJlUHJvY2Vzcy5jYWxsKHRoaXMsIFwic3Ryb2tlXCIsIGZhbHNlKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBCZWdpbnMgYSBwYXRoLCBvciByZXNldHMgdGhlIGN1cnJlbnRcclxuICAgKlxyXG4gICAqIEBuYW1lIGJlZ2luUGF0aFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgYmVnaW5QYXRoKCkgbWV0aG9kIGJlZ2lucyBhIHBhdGgsIG9yIHJlc2V0cyB0aGUgY3VycmVudCBwYXRoLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuYmVnaW5QYXRoID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLnBhdGggPSBbXHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiBcImJlZ2luXCJcclxuICAgICAgfVxyXG4gICAgXTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNb3ZlcyB0aGUgcGF0aCB0byB0aGUgc3BlY2lmaWVkIHBvaW50IGluIHRoZSBjYW52YXMsIHdpdGhvdXQgY3JlYXRpbmcgYSBsaW5lXHJcbiAgICpcclxuICAgKiBAbmFtZSBtb3ZlVG9cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcGFyYW0geCB7TnVtYmVyfSBUaGUgeC1jb29yZGluYXRlIG9mIHdoZXJlIHRvIG1vdmUgdGhlIHBhdGggdG9cclxuICAgKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgeS1jb29yZGluYXRlIG9mIHdoZXJlIHRvIG1vdmUgdGhlIHBhdGggdG9cclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuY29udGV4dDJkLm1vdmVUbzogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5tb3ZlVG9cIik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHB0ID0gdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5VG9Qb2ludChuZXcgUG9pbnQoeCwgeSkpO1xyXG5cclxuICAgIHRoaXMucGF0aC5wdXNoKHtcclxuICAgICAgdHlwZTogXCJtdFwiLFxyXG4gICAgICB4OiBwdC54LFxyXG4gICAgICB5OiBwdC55XHJcbiAgICB9KTtcclxuICAgIHRoaXMuY3R4Lmxhc3RQb2ludCA9IG5ldyBQb2ludCh4LCB5KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgcGF0aCBmcm9tIHRoZSBjdXJyZW50IHBvaW50IGJhY2sgdG8gdGhlIHN0YXJ0aW5nIHBvaW50XHJcbiAgICpcclxuICAgKiBAbmFtZSBjbG9zZVBhdGhcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAZGVzY3JpcHRpb24gVGhlIGNsb3NlUGF0aCgpIG1ldGhvZCBjcmVhdGVzIGEgcGF0aCBmcm9tIHRoZSBjdXJyZW50IHBvaW50IGJhY2sgdG8gdGhlIHN0YXJ0aW5nIHBvaW50LlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuY2xvc2VQYXRoID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcGF0aEJlZ2luID0gbmV3IFBvaW50KDAsIDApO1xyXG4gICAgdmFyIGkgPSAwO1xyXG4gICAgZm9yIChpID0gdGhpcy5wYXRoLmxlbmd0aCAtIDE7IGkgIT09IC0xOyBpLS0pIHtcclxuICAgICAgaWYgKHRoaXMucGF0aFtpXS50eXBlID09PSBcImJlZ2luXCIpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0eXBlb2YgdGhpcy5wYXRoW2kgKyAxXSA9PT0gXCJvYmplY3RcIiAmJlxyXG4gICAgICAgICAgdHlwZW9mIHRoaXMucGF0aFtpICsgMV0ueCA9PT0gXCJudW1iZXJcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcGF0aEJlZ2luID0gbmV3IFBvaW50KHRoaXMucGF0aFtpICsgMV0ueCwgdGhpcy5wYXRoW2kgKyAxXS55KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5wYXRoLnB1c2goe1xyXG4gICAgICB0eXBlOiBcImNsb3NlXCJcclxuICAgIH0pO1xyXG4gICAgdGhpcy5jdHgubGFzdFBvaW50ID0gbmV3IFBvaW50KHBhdGhCZWdpbi54LCBwYXRoQmVnaW4ueSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIG5ldyBwb2ludCBhbmQgY3JlYXRlcyBhIGxpbmUgdG8gdGhhdCBwb2ludCBmcm9tIHRoZSBsYXN0IHNwZWNpZmllZCBwb2ludCBpbiB0aGUgY2FudmFzXHJcbiAgICpcclxuICAgKiBAbmFtZSBsaW5lVG9cclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcGFyYW0geCBUaGUgeC1jb29yZGluYXRlIG9mIHdoZXJlIHRvIGNyZWF0ZSB0aGUgbGluZSB0b1xyXG4gICAqIEBwYXJhbSB5IFRoZSB5LWNvb3JkaW5hdGUgb2Ygd2hlcmUgdG8gY3JlYXRlIHRoZSBsaW5lIHRvXHJcbiAgICogQGRlc2NyaXB0aW9uIFRoZSBsaW5lVG8oKSBtZXRob2QgYWRkcyBhIG5ldyBwb2ludCBhbmQgY3JlYXRlcyBhIGxpbmUgVE8gdGhhdCBwb2ludCBGUk9NIHRoZSBsYXN0IHNwZWNpZmllZCBwb2ludCBpbiB0aGUgY2FudmFzICh0aGlzIG1ldGhvZCBkb2VzIG5vdCBkcmF3IHRoZSBsaW5lKS5cclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLmxpbmVUbyA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuY29udGV4dDJkLmxpbmVUbzogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5saW5lVG9cIik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHB0ID0gdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5VG9Qb2ludChuZXcgUG9pbnQoeCwgeSkpO1xyXG5cclxuICAgIHRoaXMucGF0aC5wdXNoKHtcclxuICAgICAgdHlwZTogXCJsdFwiLFxyXG4gICAgICB4OiBwdC54LFxyXG4gICAgICB5OiBwdC55XHJcbiAgICB9KTtcclxuICAgIHRoaXMuY3R4Lmxhc3RQb2ludCA9IG5ldyBQb2ludChwdC54LCBwdC55KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDbGlwcyBhIHJlZ2lvbiBvZiBhbnkgc2hhcGUgYW5kIHNpemUgZnJvbSB0aGUgb3JpZ2luYWwgY2FudmFzXHJcbiAgICpcclxuICAgKiBAbmFtZSBjbGlwXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQGRlc2NyaXB0aW9uIFRoZSBjbGlwKCkgbWV0aG9kIGNsaXBzIGEgcmVnaW9uIG9mIGFueSBzaGFwZSBhbmQgc2l6ZSBmcm9tIHRoZSBvcmlnaW5hbCBjYW52YXMuXHJcbiAgICovXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5jbGlwID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmN0eC5jbGlwX3BhdGggPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGF0aCkpO1xyXG4gICAgcGF0aFByZVByb2Nlc3MuY2FsbCh0aGlzLCBudWxsLCB0cnVlKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgY3ViaWMgQsOpemllciBjdXJ2ZVxyXG4gICAqXHJcbiAgICogQG5hbWUgcXVhZHJhdGljQ3VydmVUb1xyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSBjcHgge051bWJlcn0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgQsOpemllciBjb250cm9sIHBvaW50XHJcbiAgICogQHBhcmFtIGNweSB7TnVtYmVyfSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBCw6l6aWVyIGNvbnRyb2wgcG9pbnRcclxuICAgKiBAcGFyYW0geCB7TnVtYmVyfSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBlbmRpbmcgcG9pbnRcclxuICAgKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBlbmRpbmcgcG9pbnRcclxuICAgKiBAZGVzY3JpcHRpb24gVGhlIHF1YWRyYXRpY0N1cnZlVG8oKSBtZXRob2QgYWRkcyBhIHBvaW50IHRvIHRoZSBjdXJyZW50IHBhdGggYnkgdXNpbmcgdGhlIHNwZWNpZmllZCBjb250cm9sIHBvaW50cyB0aGF0IHJlcHJlc2VudCBhIHF1YWRyYXRpYyBCw6l6aWVyIGN1cnZlLjxiciAvPjxiciAvPiBBIHF1YWRyYXRpYyBCw6l6aWVyIGN1cnZlIHJlcXVpcmVzIHR3byBwb2ludHMuIFRoZSBmaXJzdCBwb2ludCBpcyBhIGNvbnRyb2wgcG9pbnQgdGhhdCBpcyB1c2VkIGluIHRoZSBxdWFkcmF0aWMgQsOpemllciBjYWxjdWxhdGlvbiBhbmQgdGhlIHNlY29uZCBwb2ludCBpcyB0aGUgZW5kaW5nIHBvaW50IGZvciB0aGUgY3VydmUuIFRoZSBzdGFydGluZyBwb2ludCBmb3IgdGhlIGN1cnZlIGlzIHRoZSBsYXN0IHBvaW50IGluIHRoZSBjdXJyZW50IHBhdGguIElmIGEgcGF0aCBkb2VzIG5vdCBleGlzdCwgdXNlIHRoZSBiZWdpblBhdGgoKSBhbmQgbW92ZVRvKCkgbWV0aG9kcyB0byBkZWZpbmUgYSBzdGFydGluZyBwb2ludC5cclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLnF1YWRyYXRpY0N1cnZlVG8gPSBmdW5jdGlvbihjcHgsIGNweSwgeCwgeSkge1xyXG4gICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpIHx8IGlzTmFOKGNweCkgfHwgaXNOYU4oY3B5KSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgIFwianNQREYuY29udGV4dDJkLnF1YWRyYXRpY0N1cnZlVG86IEludmFsaWQgYXJndW1lbnRzXCIsXHJcbiAgICAgICAgYXJndW1lbnRzXHJcbiAgICAgICk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICBcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5jb250ZXh0MmQucXVhZHJhdGljQ3VydmVUb1wiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHB0MCA9IHRoaXMuY3R4LnRyYW5zZm9ybS5hcHBseVRvUG9pbnQobmV3IFBvaW50KHgsIHkpKTtcclxuICAgIHZhciBwdDEgPSB0aGlzLmN0eC50cmFuc2Zvcm0uYXBwbHlUb1BvaW50KG5ldyBQb2ludChjcHgsIGNweSkpO1xyXG5cclxuICAgIHRoaXMucGF0aC5wdXNoKHtcclxuICAgICAgdHlwZTogXCJxY3RcIixcclxuICAgICAgeDE6IHB0MS54LFxyXG4gICAgICB5MTogcHQxLnksXHJcbiAgICAgIHg6IHB0MC54LFxyXG4gICAgICB5OiBwdDAueVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmN0eC5sYXN0UG9pbnQgPSBuZXcgUG9pbnQocHQwLngsIHB0MC55KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgY3ViaWMgQsOpemllciBjdXJ2ZVxyXG4gICAqXHJcbiAgICogQG5hbWUgYmV6aWVyQ3VydmVUb1xyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSBjcDF4IHtOdW1iZXJ9IFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIGZpcnN0IELDqXppZXIgY29udHJvbCBwb2ludFxyXG4gICAqIEBwYXJhbSBjcDF5IHtOdW1iZXJ9IFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIGZpcnN0IELDqXppZXIgY29udHJvbCBwb2ludFxyXG4gICAqIEBwYXJhbSBjcDJ4IHtOdW1iZXJ9IFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIHNlY29uZCBCw6l6aWVyIGNvbnRyb2wgcG9pbnRcclxuICAgKiBAcGFyYW0gY3AyeSB7TnVtYmVyfSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBzZWNvbmQgQsOpemllciBjb250cm9sIHBvaW50XHJcbiAgICogQHBhcmFtIHgge051bWJlcn0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgZW5kaW5nIHBvaW50XHJcbiAgICogQHBhcmFtIHkge051bWJlcn0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgZW5kaW5nIHBvaW50XHJcbiAgICogQGRlc2NyaXB0aW9uIFRoZSBiZXppZXJDdXJ2ZVRvKCkgbWV0aG9kIGFkZHMgYSBwb2ludCB0byB0aGUgY3VycmVudCBwYXRoIGJ5IHVzaW5nIHRoZSBzcGVjaWZpZWQgY29udHJvbCBwb2ludHMgdGhhdCByZXByZXNlbnQgYSBjdWJpYyBCw6l6aWVyIGN1cnZlLiA8YnIgLz48YnIgLz5BIGN1YmljIGJlemllciBjdXJ2ZSByZXF1aXJlcyB0aHJlZSBwb2ludHMuIFRoZSBmaXJzdCB0d28gcG9pbnRzIGFyZSBjb250cm9sIHBvaW50cyB0aGF0IGFyZSB1c2VkIGluIHRoZSBjdWJpYyBCw6l6aWVyIGNhbGN1bGF0aW9uIGFuZCB0aGUgbGFzdCBwb2ludCBpcyB0aGUgZW5kaW5nIHBvaW50IGZvciB0aGUgY3VydmUuICBUaGUgc3RhcnRpbmcgcG9pbnQgZm9yIHRoZSBjdXJ2ZSBpcyB0aGUgbGFzdCBwb2ludCBpbiB0aGUgY3VycmVudCBwYXRoLiBJZiBhIHBhdGggZG9lcyBub3QgZXhpc3QsIHVzZSB0aGUgYmVnaW5QYXRoKCkgYW5kIG1vdmVUbygpIG1ldGhvZHMgdG8gZGVmaW5lIGEgc3RhcnRpbmcgcG9pbnQuXHJcbiAgICovXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5iZXppZXJDdXJ2ZVRvID0gZnVuY3Rpb24oY3AxeCwgY3AxeSwgY3AyeCwgY3AyeSwgeCwgeSkge1xyXG4gICAgaWYgKFxyXG4gICAgICBpc05hTih4KSB8fFxyXG4gICAgICBpc05hTih5KSB8fFxyXG4gICAgICBpc05hTihjcDF4KSB8fFxyXG4gICAgICBpc05hTihjcDF5KSB8fFxyXG4gICAgICBpc05hTihjcDJ4KSB8fFxyXG4gICAgICBpc05hTihjcDJ5KVxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgXCJqc1BERi5jb250ZXh0MmQuYmV6aWVyQ3VydmVUbzogSW52YWxpZCBhcmd1bWVudHNcIixcclxuICAgICAgICBhcmd1bWVudHNcclxuICAgICAgKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5iZXppZXJDdXJ2ZVRvXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHZhciBwdDAgPSB0aGlzLmN0eC50cmFuc2Zvcm0uYXBwbHlUb1BvaW50KG5ldyBQb2ludCh4LCB5KSk7XHJcbiAgICB2YXIgcHQxID0gdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5VG9Qb2ludChuZXcgUG9pbnQoY3AxeCwgY3AxeSkpO1xyXG4gICAgdmFyIHB0MiA9IHRoaXMuY3R4LnRyYW5zZm9ybS5hcHBseVRvUG9pbnQobmV3IFBvaW50KGNwMngsIGNwMnkpKTtcclxuXHJcbiAgICB0aGlzLnBhdGgucHVzaCh7XHJcbiAgICAgIHR5cGU6IFwiYmN0XCIsXHJcbiAgICAgIHgxOiBwdDEueCxcclxuICAgICAgeTE6IHB0MS55LFxyXG4gICAgICB4MjogcHQyLngsXHJcbiAgICAgIHkyOiBwdDIueSxcclxuICAgICAgeDogcHQwLngsXHJcbiAgICAgIHk6IHB0MC55XHJcbiAgICB9KTtcclxuICAgIHRoaXMuY3R4Lmxhc3RQb2ludCA9IG5ldyBQb2ludChwdDAueCwgcHQwLnkpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYW4gYXJjL2N1cnZlICh1c2VkIHRvIGNyZWF0ZSBjaXJjbGVzLCBvciBwYXJ0cyBvZiBjaXJjbGVzKVxyXG4gICAqXHJcbiAgICogQG5hbWUgYXJjXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHgge051bWJlcn0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcclxuICAgKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZVxyXG4gICAqIEBwYXJhbSByYWRpdXMge051bWJlcn0gVGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXHJcbiAgICogQHBhcmFtIHN0YXJ0QW5nbGUge051bWJlcn0gVGhlIHN0YXJ0aW5nIGFuZ2xlLCBpbiByYWRpYW5zICgwIGlzIGF0IHRoZSAzIG8nY2xvY2sgcG9zaXRpb24gb2YgdGhlIGFyYydzIGNpcmNsZSlcclxuICAgKiBAcGFyYW0gZW5kQW5nbGUge051bWJlcn0gVGhlIGVuZGluZyBhbmdsZSwgaW4gcmFkaWFuc1xyXG4gICAqIEBwYXJhbSBjb3VudGVyY2xvY2t3aXNlIHtCb29sZWFufSBPcHRpb25hbC4gU3BlY2lmaWVzIHdoZXRoZXIgdGhlIGRyYXdpbmcgc2hvdWxkIGJlIGNvdW50ZXJjbG9ja3dpc2Ugb3IgY2xvY2t3aXNlLiBGYWxzZSBpcyBkZWZhdWx0LCBhbmQgaW5kaWNhdGVzIGNsb2Nrd2lzZSwgd2hpbGUgdHJ1ZSBpbmRpY2F0ZXMgY291bnRlci1jbG9ja3dpc2UuXHJcbiAgICogQGRlc2NyaXB0aW9uIFRoZSBhcmMoKSBtZXRob2QgY3JlYXRlcyBhbiBhcmMvY3VydmUgKHVzZWQgdG8gY3JlYXRlIGNpcmNsZXMsIG9yIHBhcnRzIG9mIGNpcmNsZXMpLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuYXJjID0gZnVuY3Rpb24oXHJcbiAgICB4LFxyXG4gICAgeSxcclxuICAgIHJhZGl1cyxcclxuICAgIHN0YXJ0QW5nbGUsXHJcbiAgICBlbmRBbmdsZSxcclxuICAgIGNvdW50ZXJjbG9ja3dpc2VcclxuICApIHtcclxuICAgIGlmIChcclxuICAgICAgaXNOYU4oeCkgfHxcclxuICAgICAgaXNOYU4oeSkgfHxcclxuICAgICAgaXNOYU4ocmFkaXVzKSB8fFxyXG4gICAgICBpc05hTihzdGFydEFuZ2xlKSB8fFxyXG4gICAgICBpc05hTihlbmRBbmdsZSlcclxuICAgICkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuY29udGV4dDJkLmFyYzogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5hcmNcIik7XHJcbiAgICB9XHJcbiAgICBjb3VudGVyY2xvY2t3aXNlID0gQm9vbGVhbihjb3VudGVyY2xvY2t3aXNlKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuY3R4LnRyYW5zZm9ybS5pc0lkZW50aXR5KSB7XHJcbiAgICAgIHZhciB4cHQgPSB0aGlzLmN0eC50cmFuc2Zvcm0uYXBwbHlUb1BvaW50KG5ldyBQb2ludCh4LCB5KSk7XHJcbiAgICAgIHggPSB4cHQueDtcclxuICAgICAgeSA9IHhwdC55O1xyXG5cclxuICAgICAgdmFyIHhfcmFkUHQgPSB0aGlzLmN0eC50cmFuc2Zvcm0uYXBwbHlUb1BvaW50KG5ldyBQb2ludCgwLCByYWRpdXMpKTtcclxuICAgICAgdmFyIHhfcmFkUHQwID0gdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5VG9Qb2ludChuZXcgUG9pbnQoMCwgMCkpO1xyXG4gICAgICByYWRpdXMgPSBNYXRoLnNxcnQoXHJcbiAgICAgICAgTWF0aC5wb3coeF9yYWRQdC54IC0geF9yYWRQdDAueCwgMikgK1xyXG4gICAgICAgICAgTWF0aC5wb3coeF9yYWRQdC55IC0geF9yYWRQdDAueSwgMilcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGlmIChNYXRoLmFicyhlbmRBbmdsZSAtIHN0YXJ0QW5nbGUpID49IDIgKiBNYXRoLlBJKSB7XHJcbiAgICAgIHN0YXJ0QW5nbGUgPSAwO1xyXG4gICAgICBlbmRBbmdsZSA9IDIgKiBNYXRoLlBJO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucGF0aC5wdXNoKHtcclxuICAgICAgdHlwZTogXCJhcmNcIixcclxuICAgICAgeDogeCxcclxuICAgICAgeTogeSxcclxuICAgICAgcmFkaXVzOiByYWRpdXMsXHJcbiAgICAgIHN0YXJ0QW5nbGU6IHN0YXJ0QW5nbGUsXHJcbiAgICAgIGVuZEFuZ2xlOiBlbmRBbmdsZSxcclxuICAgICAgY291bnRlcmNsb2Nrd2lzZTogY291bnRlcmNsb2Nrd2lzZVxyXG4gICAgfSk7XHJcbiAgICAvLyB0aGlzLmN0eC5sYXN0UG9pbnQobmV3IFBvaW50KHB0LngscHQueSkpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYW4gYXJjL2N1cnZlIGJldHdlZW4gdHdvIHRhbmdlbnRzXHJcbiAgICpcclxuICAgKiBAbmFtZSBhcmNUb1xyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB4MSB7TnVtYmVyfSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBmaXJzdCB0YW5nZW50XHJcbiAgICogQHBhcmFtIHkxIHtOdW1iZXJ9IFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIGZpcnN0IHRhbmdlbnRcclxuICAgKiBAcGFyYW0geDIge051bWJlcn0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHRhbmdlbnRcclxuICAgKiBAcGFyYW0geTIge051bWJlcn0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHRhbmdlbnRcclxuICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIGFyY1xyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgYXJjVG8oKSBtZXRob2QgY3JlYXRlcyBhbiBhcmMvY3VydmUgYmV0d2VlbiB0d28gdGFuZ2VudHMgb24gdGhlIGNhbnZhcy5cclxuICAgKi9cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuICBDb250ZXh0MkQucHJvdG90eXBlLmFyY1RvID0gZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIsIHJhZGl1cykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYXJjVG8gbm90IGltcGxlbWVudGVkLlwiKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgcmVjdGFuZ2xlXHJcbiAgICpcclxuICAgKiBAbmFtZSByZWN0XHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHgge051bWJlcn0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHJlY3RhbmdsZVxyXG4gICAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSByZWN0YW5nbGVcclxuICAgKiBAcGFyYW0gdyB7TnVtYmVyfSBUaGUgd2lkdGggb2YgdGhlIHJlY3RhbmdsZSwgaW4gcGl4ZWxzXHJcbiAgICogQHBhcmFtIGgge051bWJlcn0gVGhlIGhlaWdodCBvZiB0aGUgcmVjdGFuZ2xlLCBpbiBwaXhlbHNcclxuICAgKiBAZGVzY3JpcHRpb24gVGhlIHJlY3QoKSBtZXRob2QgY3JlYXRlcyBhIHJlY3RhbmdsZS5cclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLnJlY3QgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7XHJcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkgfHwgaXNOYU4odykgfHwgaXNOYU4oaCkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcImpzUERGLmNvbnRleHQyZC5yZWN0OiBJbnZhbGlkIGFyZ3VtZW50c1wiLCBhcmd1bWVudHMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuY29udGV4dDJkLnJlY3RcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1vdmVUbyh4LCB5KTtcclxuICAgIHRoaXMubGluZVRvKHggKyB3LCB5KTtcclxuICAgIHRoaXMubGluZVRvKHggKyB3LCB5ICsgaCk7XHJcbiAgICB0aGlzLmxpbmVUbyh4LCB5ICsgaCk7XHJcbiAgICB0aGlzLmxpbmVUbyh4LCB5KTtcclxuICAgIHRoaXMubGluZVRvKHggKyB3LCB5KTtcclxuICAgIHRoaXMubGluZVRvKHgsIHkpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIGEgXCJmaWxsZWRcIiByZWN0YW5nbGVcclxuICAgKlxyXG4gICAqIEBuYW1lIGZpbGxSZWN0XHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHgge051bWJlcn0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHJlY3RhbmdsZVxyXG4gICAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSByZWN0YW5nbGVcclxuICAgKiBAcGFyYW0gdyB7TnVtYmVyfSBUaGUgd2lkdGggb2YgdGhlIHJlY3RhbmdsZSwgaW4gcGl4ZWxzXHJcbiAgICogQHBhcmFtIGgge051bWJlcn0gVGhlIGhlaWdodCBvZiB0aGUgcmVjdGFuZ2xlLCBpbiBwaXhlbHNcclxuICAgKiBAZGVzY3JpcHRpb24gVGhlIGZpbGxSZWN0KCkgbWV0aG9kIGRyYXdzIGEgXCJmaWxsZWRcIiByZWN0YW5nbGUuIFRoZSBkZWZhdWx0IGNvbG9yIG9mIHRoZSBmaWxsIGlzIGJsYWNrLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuZmlsbFJlY3QgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7XHJcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkgfHwgaXNOYU4odykgfHwgaXNOYU4oaCkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcImpzUERGLmNvbnRleHQyZC5maWxsUmVjdDogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5maWxsUmVjdFwiKTtcclxuICAgIH1cclxuICAgIGlmIChpc0ZpbGxUcmFuc3BhcmVudC5jYWxsKHRoaXMpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciB0bXAgPSB7fTtcclxuICAgIGlmICh0aGlzLmxpbmVDYXAgIT09IFwiYnV0dFwiKSB7XHJcbiAgICAgIHRtcC5saW5lQ2FwID0gdGhpcy5saW5lQ2FwO1xyXG4gICAgICB0aGlzLmxpbmVDYXAgPSBcImJ1dHRcIjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmxpbmVKb2luICE9PSBcIm1pdGVyXCIpIHtcclxuICAgICAgdG1wLmxpbmVKb2luID0gdGhpcy5saW5lSm9pbjtcclxuICAgICAgdGhpcy5saW5lSm9pbiA9IFwibWl0ZXJcIjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJlZ2luUGF0aCgpO1xyXG4gICAgdGhpcy5yZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgdGhpcy5maWxsKCk7XHJcblxyXG4gICAgaWYgKHRtcC5oYXNPd25Qcm9wZXJ0eShcImxpbmVDYXBcIikpIHtcclxuICAgICAgdGhpcy5saW5lQ2FwID0gdG1wLmxpbmVDYXA7XHJcbiAgICB9XHJcbiAgICBpZiAodG1wLmhhc093blByb3BlcnR5KFwibGluZUpvaW5cIikpIHtcclxuICAgICAgdGhpcy5saW5lSm9pbiA9IHRtcC5saW5lSm9pbjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiAgICAgRHJhd3MgYSByZWN0YW5nbGUgKG5vIGZpbGwpXHJcbiAgICpcclxuICAgKiBAbmFtZSBzdHJva2VSZWN0XHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHgge051bWJlcn0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHJlY3RhbmdsZVxyXG4gICAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSByZWN0YW5nbGVcclxuICAgKiBAcGFyYW0gdyB7TnVtYmVyfSBUaGUgd2lkdGggb2YgdGhlIHJlY3RhbmdsZSwgaW4gcGl4ZWxzXHJcbiAgICogQHBhcmFtIGgge051bWJlcn0gVGhlIGhlaWdodCBvZiB0aGUgcmVjdGFuZ2xlLCBpbiBwaXhlbHNcclxuICAgKiBAZGVzY3JpcHRpb24gVGhlIHN0cm9rZVJlY3QoKSBtZXRob2QgZHJhd3MgYSByZWN0YW5nbGUgKG5vIGZpbGwpLiBUaGUgZGVmYXVsdCBjb2xvciBvZiB0aGUgc3Ryb2tlIGlzIGJsYWNrLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuc3Ryb2tlUmVjdCA9IGZ1bmN0aW9uIHN0cm9rZVJlY3QoeCwgeSwgdywgaCkge1xyXG4gICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpIHx8IGlzTmFOKHcpIHx8IGlzTmFOKGgpKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJqc1BERi5jb250ZXh0MmQuc3Ryb2tlUmVjdDogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5zdHJva2VSZWN0XCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzU3Ryb2tlVHJhbnNwYXJlbnQuY2FsbCh0aGlzKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmJlZ2luUGF0aCgpO1xyXG4gICAgdGhpcy5yZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgdGhpcy5zdHJva2UoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDbGVhcnMgdGhlIHNwZWNpZmllZCBwaXhlbHMgd2l0aGluIGEgZ2l2ZW4gcmVjdGFuZ2xlXHJcbiAgICpcclxuICAgKiBAbmFtZSBjbGVhclJlY3RcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcGFyYW0geCB7TnVtYmVyfSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgcmVjdGFuZ2xlXHJcbiAgICogQHBhcmFtIHkge051bWJlcn0gVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIHJlY3RhbmdsZVxyXG4gICAqIEBwYXJhbSB3IHtOdW1iZXJ9IFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNsZWFyLCBpbiBwaXhlbHNcclxuICAgKiBAcGFyYW0gaCB7TnVtYmVyfSBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY2xlYXIsIGluIHBpeGVsc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBXZSBjYW5ub3QgY2xlYXIgUERGIGNvbW1hbmRzIHRoYXQgd2VyZSBhbHJlYWR5IHdyaXR0ZW4gdG8gUERGLCBzbyB3ZSB1c2Ugd2hpdGUgaW5zdGVhZC4gPGJyIC8+XHJcbiAgICogQXMgYSBzcGVjaWFsIGNhc2UsIHJlYWQgYSBzcGVjaWFsIGZsYWcgKGlnbm9yZUNsZWFyUmVjdCkgYW5kIGRvIG5vdGhpbmcgaWYgaXQgaXMgc2V0LlxyXG4gICAqIFRoaXMgcmVzdWx0cyBpbiBhbGwgY2FsbHMgdG8gY2xlYXJSZWN0KCkgdG8gZG8gbm90aGluZywgYW5kIGtlZXAgdGhlIGNhbnZhcyB0cmFuc3BhcmVudC5cclxuICAgKiBUaGlzIGZsYWcgaXMgc3RvcmVkIGluIHRoZSBzYXZlL3Jlc3RvcmUgY29udGV4dCBhbmQgaXMgbWFuYWdlZCB0aGUgc2FtZSB3YXkgYXMgb3RoZXIgZHJhd2luZyBzdGF0ZXMuXHJcbiAgICpcclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLmNsZWFyUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHtcclxuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSB8fCBpc05hTih3KSB8fCBpc05hTihoKSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuY29udGV4dDJkLmNsZWFyUmVjdDogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5jbGVhclJlY3RcIik7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5pZ25vcmVDbGVhclJlY3QpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZmlsbFN0eWxlID0gXCIjZmZmZmZmXCI7XHJcbiAgICB0aGlzLmZpbGxSZWN0KHgsIHksIHcsIGgpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNhdmVzIHRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCBjb250ZXh0XHJcbiAgICpcclxuICAgKiBAbmFtZSBzYXZlXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICovXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24oZG9TdGFja1B1c2gpIHtcclxuICAgIGRvU3RhY2tQdXNoID0gdHlwZW9mIGRvU3RhY2tQdXNoID09PSBcImJvb2xlYW5cIiA/IGRvU3RhY2tQdXNoIDogdHJ1ZTtcclxuICAgIHZhciB0bXBQYWdlTnVtYmVyID0gdGhpcy5wZGYuaW50ZXJuYWwuZ2V0Q3VycmVudFBhZ2VJbmZvKCkucGFnZU51bWJlcjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wZGYuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOyBpKyspIHtcclxuICAgICAgdGhpcy5wZGYuc2V0UGFnZShpICsgMSk7XHJcbiAgICAgIHRoaXMucGRmLmludGVybmFsLm91dChcInFcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBkZi5zZXRQYWdlKHRtcFBhZ2VOdW1iZXIpO1xyXG5cclxuICAgIGlmIChkb1N0YWNrUHVzaCkge1xyXG4gICAgICB0aGlzLmN0eC5mb250U2l6ZSA9IHRoaXMucGRmLmludGVybmFsLmdldEZvbnRTaXplKCk7XHJcbiAgICAgIHZhciBjdHggPSBuZXcgQ29udGV4dExheWVyKHRoaXMuY3R4KTtcclxuICAgICAgdGhpcy5jdHhTdGFjay5wdXNoKHRoaXMuY3R4KTtcclxuICAgICAgdGhpcy5jdHggPSBjdHg7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBwcmV2aW91c2x5IHNhdmVkIHBhdGggc3RhdGUgYW5kIGF0dHJpYnV0ZXNcclxuICAgKlxyXG4gICAqIEBuYW1lIHJlc3RvcmVcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbihkb1N0YWNrUG9wKSB7XHJcbiAgICBkb1N0YWNrUG9wID0gdHlwZW9mIGRvU3RhY2tQb3AgPT09IFwiYm9vbGVhblwiID8gZG9TdGFja1BvcCA6IHRydWU7XHJcbiAgICB2YXIgdG1wUGFnZU51bWJlciA9IHRoaXMucGRmLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXI7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGRmLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsgaSsrKSB7XHJcbiAgICAgIHRoaXMucGRmLnNldFBhZ2UoaSArIDEpO1xyXG4gICAgICB0aGlzLnBkZi5pbnRlcm5hbC5vdXQoXCJRXCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wZGYuc2V0UGFnZSh0bXBQYWdlTnVtYmVyKTtcclxuXHJcbiAgICBpZiAoZG9TdGFja1BvcCAmJiB0aGlzLmN0eFN0YWNrLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICB0aGlzLmN0eCA9IHRoaXMuY3R4U3RhY2sucG9wKCk7XHJcbiAgICAgIHRoaXMuZmlsbFN0eWxlID0gdGhpcy5jdHguZmlsbFN0eWxlO1xyXG4gICAgICB0aGlzLnN0cm9rZVN0eWxlID0gdGhpcy5jdHguc3Ryb2tlU3R5bGU7XHJcbiAgICAgIHRoaXMuZm9udCA9IHRoaXMuY3R4LmZvbnQ7XHJcbiAgICAgIHRoaXMubGluZUNhcCA9IHRoaXMuY3R4LmxpbmVDYXA7XHJcbiAgICAgIHRoaXMubGluZVdpZHRoID0gdGhpcy5jdHgubGluZVdpZHRoO1xyXG4gICAgICB0aGlzLmxpbmVKb2luID0gdGhpcy5jdHgubGluZUpvaW47XHJcbiAgICAgIHRoaXMubGluZURhc2ggPSB0aGlzLmN0eC5saW5lRGFzaDtcclxuICAgICAgdGhpcy5saW5lRGFzaE9mZnNldCA9IHRoaXMuY3R4LmxpbmVEYXNoT2Zmc2V0O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuYW1lIHRvRGF0YVVSTFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUudG9EYXRhVVJMID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0b0RhdGFVcmwgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICB9O1xyXG5cclxuICAvL2hlbHBlciBmdW5jdGlvbnNcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBkZWNpbWFsIHZhbHVlcyBvZiByLCBnLCBiIGFuZCBhXHJcbiAgICpcclxuICAgKiBAbmFtZSBnZXRSR0JBXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgdmFyIGdldFJHQkEgPSBmdW5jdGlvbihzdHlsZSkge1xyXG4gICAgdmFyIHJ4UmdiID0gL3JnYlxccypcXChcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKlxcKS87XHJcbiAgICB2YXIgcnhSZ2JhID0gL3JnYmFcXHMqXFwoXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihbXFxkLl0rKVxccypcXCkvO1xyXG4gICAgdmFyIHJ4VHJhbnNwYXJlbnQgPSAvdHJhbnNwYXJlbnR8cmdiYVxccypcXChcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqMCtcXHMqXFwpLztcclxuXHJcbiAgICB2YXIgciwgZywgYiwgYTtcclxuXHJcbiAgICBpZiAoc3R5bGUuaXNDYW52YXNHcmFkaWVudCA9PT0gdHJ1ZSkge1xyXG4gICAgICBzdHlsZSA9IHN0eWxlLmdldENvbG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFzdHlsZSkge1xyXG4gICAgICByZXR1cm4geyByOiAwLCBnOiAwLCBiOiAwLCBhOiAwLCBzdHlsZTogc3R5bGUgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocnhUcmFuc3BhcmVudC50ZXN0KHN0eWxlKSkge1xyXG4gICAgICByID0gMDtcclxuICAgICAgZyA9IDA7XHJcbiAgICAgIGIgPSAwO1xyXG4gICAgICBhID0gMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBtYXRjaGVzID0gcnhSZ2IuZXhlYyhzdHlsZSk7XHJcbiAgICAgIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XHJcbiAgICAgICAgciA9IHBhcnNlSW50KG1hdGNoZXNbMV0pO1xyXG4gICAgICAgIGcgPSBwYXJzZUludChtYXRjaGVzWzJdKTtcclxuICAgICAgICBiID0gcGFyc2VJbnQobWF0Y2hlc1szXSk7XHJcbiAgICAgICAgYSA9IDE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWF0Y2hlcyA9IHJ4UmdiYS5leGVjKHN0eWxlKTtcclxuICAgICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgciA9IHBhcnNlSW50KG1hdGNoZXNbMV0pO1xyXG4gICAgICAgICAgZyA9IHBhcnNlSW50KG1hdGNoZXNbMl0pO1xyXG4gICAgICAgICAgYiA9IHBhcnNlSW50KG1hdGNoZXNbM10pO1xyXG4gICAgICAgICAgYSA9IHBhcnNlRmxvYXQobWF0Y2hlc1s0XSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGEgPSAxO1xyXG5cclxuICAgICAgICAgIGlmICh0eXBlb2Ygc3R5bGUgPT09IFwic3RyaW5nXCIgJiYgc3R5bGUuY2hhckF0KDApICE9PSBcIiNcIikge1xyXG4gICAgICAgICAgICB2YXIgcmdiQ29sb3IgPSBuZXcgUkdCQ29sb3Ioc3R5bGUpO1xyXG4gICAgICAgICAgICBpZiAocmdiQ29sb3Iub2spIHtcclxuICAgICAgICAgICAgICBzdHlsZSA9IHJnYkNvbG9yLnRvSGV4KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc3R5bGUgPSBcIiMwMDAwMDBcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChzdHlsZS5sZW5ndGggPT09IDQpIHtcclxuICAgICAgICAgICAgciA9IHN0eWxlLnN1YnN0cmluZygxLCAyKTtcclxuICAgICAgICAgICAgciArPSByO1xyXG4gICAgICAgICAgICBnID0gc3R5bGUuc3Vic3RyaW5nKDIsIDMpO1xyXG4gICAgICAgICAgICBnICs9IGc7XHJcbiAgICAgICAgICAgIGIgPSBzdHlsZS5zdWJzdHJpbmcoMywgNCk7XHJcbiAgICAgICAgICAgIGIgKz0gYjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHIgPSBzdHlsZS5zdWJzdHJpbmcoMSwgMyk7XHJcbiAgICAgICAgICAgIGcgPSBzdHlsZS5zdWJzdHJpbmcoMywgNSk7XHJcbiAgICAgICAgICAgIGIgPSBzdHlsZS5zdWJzdHJpbmcoNSwgNyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByID0gcGFyc2VJbnQociwgMTYpO1xyXG4gICAgICAgICAgZyA9IHBhcnNlSW50KGcsIDE2KTtcclxuICAgICAgICAgIGIgPSBwYXJzZUludChiLCAxNik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyByOiByLCBnOiBnLCBiOiBiLCBhOiBhLCBzdHlsZTogc3R5bGUgfTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBpc0ZpbGxUcmFuc3BhcmVudFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQGlnbm9yZVxyXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICAqL1xyXG4gIHZhciBpc0ZpbGxUcmFuc3BhcmVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY3R4LmlzRmlsbFRyYW5zcGFyZW50IHx8IHRoaXMuZ2xvYmFsQWxwaGEgPT0gMDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbmFtZSBpc1N0cm9rZVRyYW5zcGFyZW50XHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAaWdub3JlXHJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICovXHJcbiAgdmFyIGlzU3Ryb2tlVHJhbnNwYXJlbnQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBCb29sZWFuKHRoaXMuY3R4LmlzU3Ryb2tlVHJhbnNwYXJlbnQgfHwgdGhpcy5nbG9iYWxBbHBoYSA9PSAwKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyBcImZpbGxlZFwiIHRleHQgb24gdGhlIGNhbnZhc1xyXG4gICAqXHJcbiAgICogQG5hbWUgZmlsbFRleHRcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcGFyYW0gdGV4dCB7U3RyaW5nfSBTcGVjaWZpZXMgdGhlIHRleHQgdGhhdCB3aWxsIGJlIHdyaXR0ZW4gb24gdGhlIGNhbnZhc1xyXG4gICAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSB4IGNvb3JkaW5hdGUgd2hlcmUgdG8gc3RhcnQgcGFpbnRpbmcgdGhlIHRleHQgKHJlbGF0aXZlIHRvIHRoZSBjYW52YXMpXHJcbiAgICogQHBhcmFtIHkge051bWJlcn0gVGhlIHkgY29vcmRpbmF0ZSB3aGVyZSB0byBzdGFydCBwYWludGluZyB0aGUgdGV4dCAocmVsYXRpdmUgdG8gdGhlIGNhbnZhcylcclxuICAgKiBAcGFyYW0gbWF4V2lkdGgge051bWJlcn0gT3B0aW9uYWwuIFRoZSBtYXhpbXVtIGFsbG93ZWQgd2lkdGggb2YgdGhlIHRleHQsIGluIHBpeGVsc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgZmlsbFRleHQoKSBtZXRob2QgZHJhd3MgZmlsbGVkIHRleHQgb24gdGhlIGNhbnZhcy4gVGhlIGRlZmF1bHQgY29sb3Igb2YgdGhlIHRleHQgaXMgYmxhY2suXHJcbiAgICovXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5maWxsVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHgsIHksIG1heFdpZHRoKSB7XHJcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkgfHwgdHlwZW9mIHRleHQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcImpzUERGLmNvbnRleHQyZC5maWxsVGV4dDogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5maWxsVGV4dFwiKTtcclxuICAgIH1cclxuICAgIG1heFdpZHRoID0gaXNOYU4obWF4V2lkdGgpID8gdW5kZWZpbmVkIDogbWF4V2lkdGg7XHJcbiAgICBpZiAoaXNGaWxsVHJhbnNwYXJlbnQuY2FsbCh0aGlzKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRlZ3MgPSByYWQyZGVnKHRoaXMuY3R4LnRyYW5zZm9ybS5yb3RhdGlvbik7XHJcblxyXG4gICAgLy8gV2Ugb25seSB1c2UgWCBheGlzIGFzIHNjYWxlIGhpbnRcclxuICAgIHZhciBzY2FsZSA9IHRoaXMuY3R4LnRyYW5zZm9ybS5zY2FsZVg7XHJcblxyXG4gICAgcHV0VGV4dC5jYWxsKHRoaXMsIHtcclxuICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgeDogeCxcclxuICAgICAgeTogeSxcclxuICAgICAgc2NhbGU6IHNjYWxlLFxyXG4gICAgICBhbmdsZTogZGVncyxcclxuICAgICAgYWxpZ246IHRoaXMudGV4dEFsaWduLFxyXG4gICAgICBtYXhXaWR0aDogbWF4V2lkdGhcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIHRleHQgb24gdGhlIGNhbnZhcyAobm8gZmlsbClcclxuICAgKlxyXG4gICAqIEBuYW1lIHN0cm9rZVRleHRcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcGFyYW0gdGV4dCB7U3RyaW5nfSBTcGVjaWZpZXMgdGhlIHRleHQgdGhhdCB3aWxsIGJlIHdyaXR0ZW4gb24gdGhlIGNhbnZhc1xyXG4gICAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSB4IGNvb3JkaW5hdGUgd2hlcmUgdG8gc3RhcnQgcGFpbnRpbmcgdGhlIHRleHQgKHJlbGF0aXZlIHRvIHRoZSBjYW52YXMpXHJcbiAgICogQHBhcmFtIHkge051bWJlcn0gVGhlIHkgY29vcmRpbmF0ZSB3aGVyZSB0byBzdGFydCBwYWludGluZyB0aGUgdGV4dCAocmVsYXRpdmUgdG8gdGhlIGNhbnZhcylcclxuICAgKiBAcGFyYW0gbWF4V2lkdGgge051bWJlcn0gT3B0aW9uYWwuIFRoZSBtYXhpbXVtIGFsbG93ZWQgd2lkdGggb2YgdGhlIHRleHQsIGluIHBpeGVsc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgc3Ryb2tlVGV4dCgpIG1ldGhvZCBkcmF3cyB0ZXh0ICh3aXRoIG5vIGZpbGwpIG9uIHRoZSBjYW52YXMuIFRoZSBkZWZhdWx0IGNvbG9yIG9mIHRoZSB0ZXh0IGlzIGJsYWNrLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuc3Ryb2tlVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHgsIHksIG1heFdpZHRoKSB7XHJcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkgfHwgdHlwZW9mIHRleHQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcImpzUERGLmNvbnRleHQyZC5zdHJva2VUZXh0OiBJbnZhbGlkIGFyZ3VtZW50c1wiLCBhcmd1bWVudHMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuY29udGV4dDJkLnN0cm9rZVRleHRcIik7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNTdHJva2VUcmFuc3BhcmVudC5jYWxsKHRoaXMpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBtYXhXaWR0aCA9IGlzTmFOKG1heFdpZHRoKSA/IHVuZGVmaW5lZCA6IG1heFdpZHRoO1xyXG5cclxuICAgIHZhciBkZWdzID0gcmFkMmRlZyh0aGlzLmN0eC50cmFuc2Zvcm0ucm90YXRpb24pO1xyXG4gICAgdmFyIHNjYWxlID0gdGhpcy5jdHgudHJhbnNmb3JtLnNjYWxlWDtcclxuXHJcbiAgICBwdXRUZXh0LmNhbGwodGhpcywge1xyXG4gICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICB4OiB4LFxyXG4gICAgICB5OiB5LFxyXG4gICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICAgIHJlbmRlcmluZ01vZGU6IFwic3Ryb2tlXCIsXHJcbiAgICAgIGFuZ2xlOiBkZWdzLFxyXG4gICAgICBhbGlnbjogdGhpcy50ZXh0QWxpZ24sXHJcbiAgICAgIG1heFdpZHRoOiBtYXhXaWR0aFxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgd2lkdGggb2YgdGhlIHNwZWNpZmllZCB0ZXh0XHJcbiAgICpcclxuICAgKiBAbmFtZSBtZWFzdXJlVGV4dFxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB0ZXh0IHtTdHJpbmd9IFRoZSB0ZXh0IHRvIGJlIG1lYXN1cmVkXHJcbiAgICogQGRlc2NyaXB0aW9uIFRoZSBtZWFzdXJlVGV4dCgpIG1ldGhvZCByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSB3aWR0aCBvZiB0aGUgc3BlY2lmaWVkIHRleHQsIGluIHBpeGVscy5cclxuICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUubWVhc3VyZVRleHQgPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICBpZiAodHlwZW9mIHRleHQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICBcImpzUERGLmNvbnRleHQyZC5tZWFzdXJlVGV4dDogSW52YWxpZCBhcmd1bWVudHNcIixcclxuICAgICAgICBhcmd1bWVudHNcclxuICAgICAgKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5tZWFzdXJlVGV4dFwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICB2YXIgcGRmID0gdGhpcy5wZGY7XHJcbiAgICB2YXIgayA9IHRoaXMucGRmLmludGVybmFsLnNjYWxlRmFjdG9yO1xyXG5cclxuICAgIHZhciBmb250U2l6ZSA9IHBkZi5pbnRlcm5hbC5nZXRGb250U2l6ZSgpO1xyXG4gICAgdmFyIHR4dFdpZHRoID1cclxuICAgICAgKHBkZi5nZXRTdHJpbmdVbml0V2lkdGgodGV4dCkgKiBmb250U2l6ZSkgLyBwZGYuaW50ZXJuYWwuc2NhbGVGYWN0b3I7XHJcbiAgICB0eHRXaWR0aCAqPSBNYXRoLnJvdW5kKCgoayAqIDk2KSAvIDcyKSAqIDEwMDAwKSAvIDEwMDAwO1xyXG5cclxuICAgIHZhciBUZXh0TWV0cmljcyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgIHZhciBfd2lkdGggPSBvcHRpb25zLndpZHRoIHx8IDA7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndpZHRoXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIF93aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gbmV3IFRleHRNZXRyaWNzKHsgd2lkdGg6IHR4dFdpZHRoIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vVHJhbnNmb3JtYXRpb25zXHJcblxyXG4gIC8qKlxyXG4gICAqIFNjYWxlcyB0aGUgY3VycmVudCBkcmF3aW5nIGJpZ2dlciBvciBzbWFsbGVyXHJcbiAgICpcclxuICAgKiBAbmFtZSBzY2FsZVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSBzY2FsZXdpZHRoIHtOdW1iZXJ9IFNjYWxlcyB0aGUgd2lkdGggb2YgdGhlIGN1cnJlbnQgZHJhd2luZyAoMT0xMDAlLCAwLjU9NTAlLCAyPTIwMCUsIGV0Yy4pXHJcbiAgICogQHBhcmFtIHNjYWxlaGVpZ2h0IHtOdW1iZXJ9IFNjYWxlcyB0aGUgaGVpZ2h0IG9mIHRoZSBjdXJyZW50IGRyYXdpbmcgKDE9MTAwJSwgMC41PTUwJSwgMj0yMDAlLCBldGMuKVxyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgc2NhbGUoKSBtZXRob2Qgc2NhbGVzIHRoZSBjdXJyZW50IGRyYXdpbmcsIGJpZ2dlciBvciBzbWFsbGVyLlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbihzY2FsZXdpZHRoLCBzY2FsZWhlaWdodCkge1xyXG4gICAgaWYgKGlzTmFOKHNjYWxld2lkdGgpIHx8IGlzTmFOKHNjYWxlaGVpZ2h0KSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuY29udGV4dDJkLnNjYWxlOiBJbnZhbGlkIGFyZ3VtZW50c1wiLCBhcmd1bWVudHMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cyBwYXNzZWQgdG8ganNQREYuY29udGV4dDJkLnNjYWxlXCIpO1xyXG4gICAgfVxyXG4gICAgdmFyIG1hdHJpeCA9IG5ldyBNYXRyaXgoc2NhbGV3aWR0aCwgMC4wLCAwLjAsIHNjYWxlaGVpZ2h0LCAwLjAsIDAuMCk7XHJcbiAgICB0aGlzLmN0eC50cmFuc2Zvcm0gPSB0aGlzLmN0eC50cmFuc2Zvcm0ubXVsdGlwbHkobWF0cml4KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSb3RhdGVzIHRoZSBjdXJyZW50IGRyYXdpbmdcclxuICAgKlxyXG4gICAqIEBuYW1lIHJvdGF0ZVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSBhbmdsZSB7TnVtYmVyfSBUaGUgcm90YXRpb24gYW5nbGUsIGluIHJhZGlhbnMuXHJcbiAgICogQGRlc2NyaXB0aW9uIFRvIGNhbGN1bGF0ZSBmcm9tIGRlZ3JlZXMgdG8gcmFkaWFuczogZGVncmVlcypNYXRoLlBJLzE4MC4gPGJyIC8+XHJcbiAgICogRXhhbXBsZTogdG8gcm90YXRlIDUgZGVncmVlcywgc3BlY2lmeSB0aGUgZm9sbG93aW5nOiA1Kk1hdGguUEkvMTgwXHJcbiAgICovXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbihhbmdsZSkge1xyXG4gICAgaWYgKGlzTmFOKGFuZ2xlKSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuY29udGV4dDJkLnJvdGF0ZTogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC5yb3RhdGVcIik7XHJcbiAgICB9XHJcbiAgICB2YXIgbWF0cml4ID0gbmV3IE1hdHJpeChcclxuICAgICAgTWF0aC5jb3MoYW5nbGUpLFxyXG4gICAgICBNYXRoLnNpbihhbmdsZSksXHJcbiAgICAgIC1NYXRoLnNpbihhbmdsZSksXHJcbiAgICAgIE1hdGguY29zKGFuZ2xlKSxcclxuICAgICAgMC4wLFxyXG4gICAgICAwLjBcclxuICAgICk7XHJcbiAgICB0aGlzLmN0eC50cmFuc2Zvcm0gPSB0aGlzLmN0eC50cmFuc2Zvcm0ubXVsdGlwbHkobWF0cml4KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZW1hcHMgdGhlICgwLDApIHBvc2l0aW9uIG9uIHRoZSBjYW52YXNcclxuICAgKlxyXG4gICAqIEBuYW1lIHRyYW5zbGF0ZVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSB2YWx1ZSB0byBhZGQgdG8gaG9yaXpvbnRhbCAoeCkgY29vcmRpbmF0ZXNcclxuICAgKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgdmFsdWUgdG8gYWRkIHRvIHZlcnRpY2FsICh5KSBjb29yZGluYXRlc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgdHJhbnNsYXRlKCkgbWV0aG9kIHJlbWFwcyB0aGUgKDAsMCkgcG9zaXRpb24gb24gdGhlIGNhbnZhcy5cclxuICAgKi9cclxuICBDb250ZXh0MkQucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuY29udGV4dDJkLnRyYW5zbGF0ZTogSW52YWxpZCBhcmd1bWVudHNcIiwgYXJndW1lbnRzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGpzUERGLmNvbnRleHQyZC50cmFuc2xhdGVcIik7XHJcbiAgICB9XHJcbiAgICB2YXIgbWF0cml4ID0gbmV3IE1hdHJpeCgxLjAsIDAuMCwgMC4wLCAxLjAsIHgsIHkpO1xyXG4gICAgdGhpcy5jdHgudHJhbnNmb3JtID0gdGhpcy5jdHgudHJhbnNmb3JtLm11bHRpcGx5KG1hdHJpeCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVwbGFjZXMgdGhlIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4IGZvciB0aGUgZHJhd2luZ1xyXG4gICAqXHJcbiAgICogQG5hbWUgdHJhbnNmb3JtXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIGEge051bWJlcn0gSG9yaXpvbnRhbCBzY2FsaW5nXHJcbiAgICogQHBhcmFtIGIge051bWJlcn0gSG9yaXpvbnRhbCBza2V3aW5nXHJcbiAgICogQHBhcmFtIGMge051bWJlcn0gVmVydGljYWwgc2tld2luZ1xyXG4gICAqIEBwYXJhbSBkIHtOdW1iZXJ9IFZlcnRpY2FsIHNjYWxpbmdcclxuICAgKiBAcGFyYW0gZSB7TnVtYmVyfSBIb3Jpem9udGFsIG1vdmluZ1xyXG4gICAqIEBwYXJhbSBmIHtOdW1iZXJ9IFZlcnRpY2FsIG1vdmluZ1xyXG4gICAqIEBkZXNjcmlwdGlvbiBFYWNoIG9iamVjdCBvbiB0aGUgY2FudmFzIGhhcyBhIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LjxiciAvPjxiciAvPlRoZSB0cmFuc2Zvcm0oKSBtZXRob2QgcmVwbGFjZXMgdGhlIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJdCBtdWx0aXBsaWVzIHRoZSBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCB3aXRoIHRoZSBtYXRyaXggZGVzY3JpYmVkIGJ5OjxiciAvPjxiciAvPjxiciAvPjxiciAvPmEgICAgYyAgICBlPGJyIC8+PGJyIC8+YiAgICBkICAgIGY8YnIgLz48YnIgLz4wICAgIDAgICAgMTxiciAvPjxiciAvPkluIG90aGVyIHdvcmRzLCB0aGUgdHJhbnNmb3JtKCkgbWV0aG9kIGxldHMgeW91IHNjYWxlLCByb3RhdGUsIG1vdmUsIGFuZCBza2V3IHRoZSBjdXJyZW50IGNvbnRleHQuXHJcbiAgICovXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbihhLCBiLCBjLCBkLCBlLCBmKSB7XHJcbiAgICBpZiAoaXNOYU4oYSkgfHwgaXNOYU4oYikgfHwgaXNOYU4oYykgfHwgaXNOYU4oZCkgfHwgaXNOYU4oZSkgfHwgaXNOYU4oZikpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcImpzUERGLmNvbnRleHQyZC50cmFuc2Zvcm06IEludmFsaWQgYXJndW1lbnRzXCIsIGFyZ3VtZW50cyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBqc1BERi5jb250ZXh0MmQudHJhbnNmb3JtXCIpO1xyXG4gICAgfVxyXG4gICAgdmFyIG1hdHJpeCA9IG5ldyBNYXRyaXgoYSwgYiwgYywgZCwgZSwgZik7XHJcbiAgICB0aGlzLmN0eC50cmFuc2Zvcm0gPSB0aGlzLmN0eC50cmFuc2Zvcm0ubXVsdGlwbHkobWF0cml4KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZXNldHMgdGhlIGN1cnJlbnQgdHJhbnNmb3JtIHRvIHRoZSBpZGVudGl0eSBtYXRyaXguIFRoZW4gcnVucyB0cmFuc2Zvcm0oKVxyXG4gICAqXHJcbiAgICogQG5hbWUgc2V0VHJhbnNmb3JtXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIGEge051bWJlcn0gSG9yaXpvbnRhbCBzY2FsaW5nXHJcbiAgICogQHBhcmFtIGIge051bWJlcn0gSG9yaXpvbnRhbCBza2V3aW5nXHJcbiAgICogQHBhcmFtIGMge051bWJlcn0gVmVydGljYWwgc2tld2luZ1xyXG4gICAqIEBwYXJhbSBkIHtOdW1iZXJ9IFZlcnRpY2FsIHNjYWxpbmdcclxuICAgKiBAcGFyYW0gZSB7TnVtYmVyfSBIb3Jpem9udGFsIG1vdmluZ1xyXG4gICAqIEBwYXJhbSBmIHtOdW1iZXJ9IFZlcnRpY2FsIG1vdmluZ1xyXG4gICAqIEBkZXNjcmlwdGlvbiBFYWNoIG9iamVjdCBvbiB0aGUgY2FudmFzIGhhcyBhIGN1cnJlbnQgdHJhbnNmb3JtYXRpb24gbWF0cml4LiA8YnIgLz48YnIgLz5UaGUgc2V0VHJhbnNmb3JtKCkgbWV0aG9kIHJlc2V0cyB0aGUgY3VycmVudCB0cmFuc2Zvcm0gdG8gdGhlIGlkZW50aXR5IG1hdHJpeCwgYW5kIHRoZW4gcnVucyB0cmFuc2Zvcm0oKSB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cy48YnIgLz48YnIgLz5JbiBvdGhlciB3b3JkcywgdGhlIHNldFRyYW5zZm9ybSgpIG1ldGhvZCBsZXRzIHlvdSBzY2FsZSwgcm90YXRlLCBtb3ZlLCBhbmQgc2tldyB0aGUgY3VycmVudCBjb250ZXh0LlxyXG4gICAqL1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24oYSwgYiwgYywgZCwgZSwgZikge1xyXG4gICAgYSA9IGlzTmFOKGEpID8gMSA6IGE7XHJcbiAgICBiID0gaXNOYU4oYikgPyAwIDogYjtcclxuICAgIGMgPSBpc05hTihjKSA/IDAgOiBjO1xyXG4gICAgZCA9IGlzTmFOKGQpID8gMSA6IGQ7XHJcbiAgICBlID0gaXNOYU4oZSkgPyAwIDogZTtcclxuICAgIGYgPSBpc05hTihmKSA/IDAgOiBmO1xyXG4gICAgdGhpcy5jdHgudHJhbnNmb3JtID0gbmV3IE1hdHJpeChhLCBiLCBjLCBkLCBlLCBmKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBTaG91bGQgb25seSBiZSB1c2VkIGlmIHBhZ2VXcmFwWUVuYWJsZWQgaXMgdHJ1ZVxyXG4gICAqXHJcbiAgICogQG5hbWUgc2V0UGFnZUJ5WVBvc2l0aW9uXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAaWdub3JlXHJcbiAgICogQHJldHVybnMgT25lLWJhc2VkIFBhZ2UgTnVtYmVyXHJcbiAgICovXHJcbiAgdmFyIHNldFBhZ2VCeVlQb3NpdGlvbiA9IGZ1bmN0aW9uKHkpIHtcclxuICAgIGlmICh0aGlzLnBhZ2VXcmFwWUVuYWJsZWQpIHtcclxuICAgICAgdGhpcy5sYXN0QnJlYWsgPSAwO1xyXG4gICAgICB2YXIgbWFudWFsQnJlYWtzID0gMDtcclxuICAgICAgdmFyIGF1dG9CcmVha3MgPSAwO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFnZUJyZWFrcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh5ID49IHRoaXMucGFnZUJyZWFrc1tpXSkge1xyXG4gICAgICAgICAgbWFudWFsQnJlYWtzKys7XHJcbiAgICAgICAgICBpZiAodGhpcy5sYXN0QnJlYWsgPT09IDApIHtcclxuICAgICAgICAgICAgYXV0b0JyZWFrcysrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIHNwYWNlQmV0d2Vlbkxhc3RCcmVhayA9IHRoaXMucGFnZUJyZWFrc1tpXSAtIHRoaXMubGFzdEJyZWFrO1xyXG4gICAgICAgICAgdGhpcy5sYXN0QnJlYWsgPSB0aGlzLnBhZ2VCcmVha3NbaV07XHJcbiAgICAgICAgICB2YXIgcGFnZXNTaW5jZUxhc3RCcmVhayA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2Vlbkxhc3RCcmVhayAvIHRoaXMucGFnZVdyYXBZXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgYXV0b0JyZWFrcyArPSBwYWdlc1NpbmNlTGFzdEJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5sYXN0QnJlYWsgPT09IDApIHtcclxuICAgICAgICB2YXIgcGFnZXNTaW5jZUxhc3RCcmVhayA9IE1hdGguZmxvb3IoeSAvIHRoaXMucGFnZVdyYXBZKSArIDE7XHJcbiAgICAgICAgYXV0b0JyZWFrcyArPSBwYWdlc1NpbmNlTGFzdEJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhdXRvQnJlYWtzICsgbWFudWFsQnJlYWtzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMucGRmLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXI7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIGhhc01hcmdpbnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHRoaXMubWFyZ2luWzBdID4gMCB8fFxyXG4gICAgICB0aGlzLm1hcmdpblsxXSA+IDAgfHxcclxuICAgICAgdGhpcy5tYXJnaW5bMl0gPiAwIHx8XHJcbiAgICAgIHRoaXMubWFyZ2luWzNdID4gMFxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyBhbiBpbWFnZSwgY2FudmFzLCBvciB2aWRlbyBvbnRvIHRoZSBjYW52YXNcclxuICAgKlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSBpbWcge30gU3BlY2lmaWVzIHRoZSBpbWFnZSwgY2FudmFzLCBvciB2aWRlbyBlbGVtZW50IHRvIHVzZVxyXG4gICAqIEBwYXJhbSBzeCB7TnVtYmVyfSBPcHRpb25hbC4gVGhlIHggY29vcmRpbmF0ZSB3aGVyZSB0byBzdGFydCBjbGlwcGluZ1xyXG4gICAqIEBwYXJhbSBzeSB7TnVtYmVyfSBPcHRpb25hbC4gVGhlIHkgY29vcmRpbmF0ZSB3aGVyZSB0byBzdGFydCBjbGlwcGluZ1xyXG4gICAqIEBwYXJhbSBzd2lkdGgge051bWJlcn0gT3B0aW9uYWwuIFRoZSB3aWR0aCBvZiB0aGUgY2xpcHBlZCBpbWFnZVxyXG4gICAqIEBwYXJhbSBzaGVpZ2h0IHtOdW1iZXJ9IE9wdGlvbmFsLiBUaGUgaGVpZ2h0IG9mIHRoZSBjbGlwcGVkIGltYWdlXHJcbiAgICogQHBhcmFtIHgge051bWJlcn0gVGhlIHggY29vcmRpbmF0ZSB3aGVyZSB0byBwbGFjZSB0aGUgaW1hZ2Ugb24gdGhlIGNhbnZhc1xyXG4gICAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSB5IGNvb3JkaW5hdGUgd2hlcmUgdG8gcGxhY2UgdGhlIGltYWdlIG9uIHRoZSBjYW52YXNcclxuICAgKiBAcGFyYW0gd2lkdGgge051bWJlcn0gT3B0aW9uYWwuIFRoZSB3aWR0aCBvZiB0aGUgaW1hZ2UgdG8gdXNlIChzdHJldGNoIG9yIHJlZHVjZSB0aGUgaW1hZ2UpXHJcbiAgICogQHBhcmFtIGhlaWdodCB7TnVtYmVyfSBPcHRpb25hbC4gVGhlIGhlaWdodCBvZiB0aGUgaW1hZ2UgdG8gdXNlIChzdHJldGNoIG9yIHJlZHVjZSB0aGUgaW1hZ2UpXHJcbiAgICovXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5kcmF3SW1hZ2UgPSBmdW5jdGlvbihcclxuICAgIGltZyxcclxuICAgIHN4LFxyXG4gICAgc3ksXHJcbiAgICBzd2lkdGgsXHJcbiAgICBzaGVpZ2h0LFxyXG4gICAgeCxcclxuICAgIHksXHJcbiAgICB3aWR0aCxcclxuICAgIGhlaWdodFxyXG4gICkge1xyXG4gICAgdmFyIGltYWdlUHJvcGVydGllcyA9IHRoaXMucGRmLmdldEltYWdlUHJvcGVydGllcyhpbWcpO1xyXG4gICAgdmFyIGZhY3RvclggPSAxO1xyXG4gICAgdmFyIGZhY3RvclkgPSAxO1xyXG4gICAgdmFyIGlzQ2xpcDtcclxuXHJcbiAgICB2YXIgY2xpcEZhY3RvclggPSAxO1xyXG4gICAgdmFyIGNsaXBGYWN0b3JZID0gMTtcclxuXHJcbiAgICBpZiAodHlwZW9mIHN3aWR0aCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2lkdGggIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgaXNDbGlwID0gdHJ1ZTtcclxuICAgICAgY2xpcEZhY3RvclggPSB3aWR0aCAvIHN3aWR0aDtcclxuICAgICAgY2xpcEZhY3RvclkgPSBoZWlnaHQgLyBzaGVpZ2h0O1xyXG4gICAgICBmYWN0b3JYID0gKChpbWFnZVByb3BlcnRpZXMud2lkdGggLyBzd2lkdGgpICogd2lkdGgpIC8gc3dpZHRoO1xyXG4gICAgICBmYWN0b3JZID0gKChpbWFnZVByb3BlcnRpZXMuaGVpZ2h0IC8gc2hlaWdodCkgKiBoZWlnaHQpIC8gc2hlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICAvL2lzIHN4IGFuZCBzeSBhcmUgc2V0IGFuZCB4IGFuZCB5IG5vdCwgc2V0IHggYW5kIHkgd2l0aCB2YWx1ZXMgb2Ygc3ggYW5kIHN5XHJcbiAgICBpZiAodHlwZW9mIHggPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgeCA9IHN4O1xyXG4gICAgICB5ID0gc3k7XHJcbiAgICAgIHN4ID0gMDtcclxuICAgICAgc3kgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2Ygc3dpZHRoICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aWR0aCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB3aWR0aCA9IHN3aWR0aDtcclxuICAgICAgaGVpZ2h0ID0gc2hlaWdodDtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygc3dpZHRoID09PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aWR0aCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICB3aWR0aCA9IGltYWdlUHJvcGVydGllcy53aWR0aDtcclxuICAgICAgaGVpZ2h0ID0gaW1hZ2VQcm9wZXJ0aWVzLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGVjb21wb3NlZFRyYW5zZm9ybWF0aW9uTWF0cml4ID0gdGhpcy5jdHgudHJhbnNmb3JtLmRlY29tcG9zZSgpO1xyXG4gICAgdmFyIGFuZ2xlID0gcmFkMmRlZyhkZWNvbXBvc2VkVHJhbnNmb3JtYXRpb25NYXRyaXgucm90YXRlLnNoeCk7XHJcbiAgICB2YXIgbWF0cml4ID0gbmV3IE1hdHJpeCgpO1xyXG4gICAgbWF0cml4ID0gbWF0cml4Lm11bHRpcGx5KGRlY29tcG9zZWRUcmFuc2Zvcm1hdGlvbk1hdHJpeC50cmFuc2xhdGUpO1xyXG4gICAgbWF0cml4ID0gbWF0cml4Lm11bHRpcGx5KGRlY29tcG9zZWRUcmFuc2Zvcm1hdGlvbk1hdHJpeC5za2V3KTtcclxuICAgIG1hdHJpeCA9IG1hdHJpeC5tdWx0aXBseShkZWNvbXBvc2VkVHJhbnNmb3JtYXRpb25NYXRyaXguc2NhbGUpO1xyXG4gICAgdmFyIHhSZWN0ID0gbWF0cml4LmFwcGx5VG9SZWN0YW5nbGUoXHJcbiAgICAgIG5ldyBSZWN0YW5nbGUoXHJcbiAgICAgICAgeCAtIHN4ICogY2xpcEZhY3RvclgsXHJcbiAgICAgICAgeSAtIHN5ICogY2xpcEZhY3RvclksXHJcbiAgICAgICAgc3dpZHRoICogZmFjdG9yWCxcclxuICAgICAgICBzaGVpZ2h0ICogZmFjdG9yWVxyXG4gICAgICApXHJcbiAgICApO1xyXG4gICAgdmFyIHBhZ2VBcnJheSA9IGdldFBhZ2VzQnlQYXRoLmNhbGwodGhpcywgeFJlY3QpO1xyXG4gICAgdmFyIHBhZ2VzID0gW107XHJcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgcGFnZUFycmF5Lmxlbmd0aDsgaWkgKz0gMSkge1xyXG4gICAgICBpZiAocGFnZXMuaW5kZXhPZihwYWdlQXJyYXlbaWldKSA9PT0gLTEpIHtcclxuICAgICAgICBwYWdlcy5wdXNoKHBhZ2VBcnJheVtpaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc29ydFBhZ2VzKHBhZ2VzKTtcclxuXHJcbiAgICB2YXIgY2xpcFBhdGg7XHJcbiAgICBpZiAodGhpcy5hdXRvUGFnaW5nKSB7XHJcbiAgICAgIHZhciBtaW4gPSBwYWdlc1swXTtcclxuICAgICAgdmFyIG1heCA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdO1xyXG4gICAgICBmb3IgKHZhciBpID0gbWluOyBpIDwgbWF4ICsgMTsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5wZGYuc2V0UGFnZShpKTtcclxuXHJcbiAgICAgICAgdmFyIHBhZ2VXaWR0aE1pbnVzTWFyZ2lucyA9XHJcbiAgICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIHRoaXMubWFyZ2luWzNdIC0gdGhpcy5tYXJnaW5bMV07XHJcbiAgICAgICAgdmFyIHRvcE1hcmdpbiA9IGkgPT09IDEgPyB0aGlzLnBvc1kgKyB0aGlzLm1hcmdpblswXSA6IHRoaXMubWFyZ2luWzBdO1xyXG4gICAgICAgIHZhciBmaXJzdFBhZ2VIZWlnaHQgPVxyXG4gICAgICAgICAgdGhpcy5wZGYuaW50ZXJuYWwucGFnZVNpemUuaGVpZ2h0IC1cclxuICAgICAgICAgIHRoaXMucG9zWSAtXHJcbiAgICAgICAgICB0aGlzLm1hcmdpblswXSAtXHJcbiAgICAgICAgICB0aGlzLm1hcmdpblsyXTtcclxuICAgICAgICB2YXIgcGFnZUhlaWdodE1pbnVzTWFyZ2lucyA9XHJcbiAgICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHQgLSB0aGlzLm1hcmdpblswXSAtIHRoaXMubWFyZ2luWzJdO1xyXG4gICAgICAgIHZhciBwcmV2aW91c1BhZ2VIZWlnaHRTdW0gPVxyXG4gICAgICAgICAgaSA9PT0gMSA/IDAgOiBmaXJzdFBhZ2VIZWlnaHQgKyAoaSAtIDIpICogcGFnZUhlaWdodE1pbnVzTWFyZ2lucztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3R4LmNsaXBfcGF0aC5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgIHZhciB0bXBQYXRocyA9IHRoaXMucGF0aDtcclxuICAgICAgICAgIGNsaXBQYXRoID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmN0eC5jbGlwX3BhdGgpKTtcclxuICAgICAgICAgIHRoaXMucGF0aCA9IHBhdGhQb3NpdGlvblJlZG8oXHJcbiAgICAgICAgICAgIGNsaXBQYXRoLFxyXG4gICAgICAgICAgICB0aGlzLnBvc1ggKyB0aGlzLm1hcmdpblszXSxcclxuICAgICAgICAgICAgLXByZXZpb3VzUGFnZUhlaWdodFN1bSArIHRvcE1hcmdpbiArIHRoaXMuY3R4LnByZXZQYWdlTGFzdEVsZW1PZmZzZXRcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBkcmF3UGF0aHMuY2FsbCh0aGlzLCBcImZpbGxcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLnBhdGggPSB0bXBQYXRocztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRtcFJlY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHhSZWN0KSk7XHJcbiAgICAgICAgdG1wUmVjdCA9IHBhdGhQb3NpdGlvblJlZG8oXHJcbiAgICAgICAgICBbdG1wUmVjdF0sXHJcbiAgICAgICAgICB0aGlzLnBvc1ggKyB0aGlzLm1hcmdpblszXSxcclxuICAgICAgICAgIC1wcmV2aW91c1BhZ2VIZWlnaHRTdW0gKyB0b3BNYXJnaW4gKyB0aGlzLmN0eC5wcmV2UGFnZUxhc3RFbGVtT2Zmc2V0XHJcbiAgICAgICAgKVswXTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVlZHNDbGlwcGluZyA9IChpID4gbWluIHx8IGkgPCBtYXgpICYmIGhhc01hcmdpbnMuY2FsbCh0aGlzKTtcclxuXHJcbiAgICAgICAgaWYgKG5lZWRzQ2xpcHBpbmcpIHtcclxuICAgICAgICAgIHRoaXMucGRmLnNhdmVHcmFwaGljc1N0YXRlKCk7XHJcbiAgICAgICAgICB0aGlzLnBkZlxyXG4gICAgICAgICAgICAucmVjdChcclxuICAgICAgICAgICAgICB0aGlzLm1hcmdpblszXSxcclxuICAgICAgICAgICAgICB0aGlzLm1hcmdpblswXSxcclxuICAgICAgICAgICAgICBwYWdlV2lkdGhNaW51c01hcmdpbnMsXHJcbiAgICAgICAgICAgICAgcGFnZUhlaWdodE1pbnVzTWFyZ2lucyxcclxuICAgICAgICAgICAgICBudWxsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmNsaXAoKVxyXG4gICAgICAgICAgICAuZGlzY2FyZFBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wZGYuYWRkSW1hZ2UoXHJcbiAgICAgICAgICBpbWcsXHJcbiAgICAgICAgICBcIkpQRUdcIixcclxuICAgICAgICAgIHRtcFJlY3QueCxcclxuICAgICAgICAgIHRtcFJlY3QueSxcclxuICAgICAgICAgIHRtcFJlY3QudyxcclxuICAgICAgICAgIHRtcFJlY3QuaCxcclxuICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgYW5nbGVcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChuZWVkc0NsaXBwaW5nKSB7XHJcbiAgICAgICAgICB0aGlzLnBkZi5yZXN0b3JlR3JhcGhpY3NTdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wZGYuYWRkSW1hZ2UoXHJcbiAgICAgICAgaW1nLFxyXG4gICAgICAgIFwiSlBFR1wiLFxyXG4gICAgICAgIHhSZWN0LngsXHJcbiAgICAgICAgeFJlY3QueSxcclxuICAgICAgICB4UmVjdC53LFxyXG4gICAgICAgIHhSZWN0LmgsXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIGFuZ2xlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldFBhZ2VzQnlQYXRoID0gZnVuY3Rpb24ocGF0aCwgcGFnZVdyYXBYLCBwYWdlV3JhcFkpIHtcclxuICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgIHBhZ2VXcmFwWCA9IHBhZ2VXcmFwWCB8fCB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aDtcclxuICAgIHBhZ2VXcmFwWSA9XHJcbiAgICAgIHBhZ2VXcmFwWSB8fFxyXG4gICAgICB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHQgLSB0aGlzLm1hcmdpblswXSAtIHRoaXMubWFyZ2luWzJdO1xyXG4gICAgdmFyIHlPZmZzZXQgPSB0aGlzLnBvc1kgKyB0aGlzLmN0eC5wcmV2UGFnZUxhc3RFbGVtT2Zmc2V0O1xyXG5cclxuICAgIHN3aXRjaCAocGF0aC50eXBlKSB7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgIGNhc2UgXCJtdFwiOlxyXG4gICAgICBjYXNlIFwibHRcIjpcclxuICAgICAgICByZXN1bHQucHVzaChNYXRoLmZsb29yKChwYXRoLnkgKyB5T2Zmc2V0KSAvIHBhZ2VXcmFwWSkgKyAxKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImFyY1wiOlxyXG4gICAgICAgIHJlc3VsdC5wdXNoKFxyXG4gICAgICAgICAgTWF0aC5mbG9vcigocGF0aC55ICsgeU9mZnNldCAtIHBhdGgucmFkaXVzKSAvIHBhZ2VXcmFwWSkgKyAxXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXN1bHQucHVzaChcclxuICAgICAgICAgIE1hdGguZmxvb3IoKHBhdGgueSArIHlPZmZzZXQgKyBwYXRoLnJhZGl1cykgLyBwYWdlV3JhcFkpICsgMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJxY3RcIjpcclxuICAgICAgICB2YXIgcmVjdE9mUXVhZHJhdGljQ3VydmUgPSBnZXRRdWFkcmF0aWNDdXJ2ZUJvdW5kYXJ5KFxyXG4gICAgICAgICAgdGhpcy5jdHgubGFzdFBvaW50LngsXHJcbiAgICAgICAgICB0aGlzLmN0eC5sYXN0UG9pbnQueSxcclxuICAgICAgICAgIHBhdGgueDEsXHJcbiAgICAgICAgICBwYXRoLnkxLFxyXG4gICAgICAgICAgcGF0aC54LFxyXG4gICAgICAgICAgcGF0aC55XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXN1bHQucHVzaChcclxuICAgICAgICAgIE1hdGguZmxvb3IoKHJlY3RPZlF1YWRyYXRpY0N1cnZlLnkgKyB5T2Zmc2V0KSAvIHBhZ2VXcmFwWSkgKyAxXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXN1bHQucHVzaChcclxuICAgICAgICAgIE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgIChyZWN0T2ZRdWFkcmF0aWNDdXJ2ZS55ICsgcmVjdE9mUXVhZHJhdGljQ3VydmUuaCArIHlPZmZzZXQpIC9cclxuICAgICAgICAgICAgICBwYWdlV3JhcFlcclxuICAgICAgICAgICkgKyAxXHJcbiAgICAgICAgKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImJjdFwiOlxyXG4gICAgICAgIHZhciByZWN0T2ZCZXppZXJDdXJ2ZSA9IGdldEJlemllckN1cnZlQm91bmRhcnkoXHJcbiAgICAgICAgICB0aGlzLmN0eC5sYXN0UG9pbnQueCxcclxuICAgICAgICAgIHRoaXMuY3R4Lmxhc3RQb2ludC55LFxyXG4gICAgICAgICAgcGF0aC54MSxcclxuICAgICAgICAgIHBhdGgueTEsXHJcbiAgICAgICAgICBwYXRoLngyLFxyXG4gICAgICAgICAgcGF0aC55MixcclxuICAgICAgICAgIHBhdGgueCxcclxuICAgICAgICAgIHBhdGgueVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICBNYXRoLmZsb29yKChyZWN0T2ZCZXppZXJDdXJ2ZS55ICsgeU9mZnNldCkgLyBwYWdlV3JhcFkpICsgMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICAocmVjdE9mQmV6aWVyQ3VydmUueSArIHJlY3RPZkJlemllckN1cnZlLmggKyB5T2Zmc2V0KSAvIHBhZ2VXcmFwWVxyXG4gICAgICAgICAgKSArIDFcclxuICAgICAgICApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicmVjdFwiOlxyXG4gICAgICAgIHJlc3VsdC5wdXNoKE1hdGguZmxvb3IoKHBhdGgueSArIHlPZmZzZXQpIC8gcGFnZVdyYXBZKSArIDEpO1xyXG4gICAgICAgIHJlc3VsdC5wdXNoKE1hdGguZmxvb3IoKHBhdGgueSArIHBhdGguaCArIHlPZmZzZXQpIC8gcGFnZVdyYXBZKSArIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgIHdoaWxlICh0aGlzLnBkZi5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCkgPCByZXN1bHRbaV0pIHtcclxuICAgICAgICBhZGRQYWdlLmNhbGwodGhpcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGFkZFBhZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBmaWxsU3R5bGUgPSB0aGlzLmZpbGxTdHlsZTtcclxuICAgIHZhciBzdHJva2VTdHlsZSA9IHRoaXMuc3Ryb2tlU3R5bGU7XHJcbiAgICB2YXIgZm9udCA9IHRoaXMuZm9udDtcclxuICAgIHZhciBsaW5lQ2FwID0gdGhpcy5saW5lQ2FwO1xyXG4gICAgdmFyIGxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgdmFyIGxpbmVKb2luID0gdGhpcy5saW5lSm9pbjtcclxuICAgIHRoaXMucGRmLmFkZFBhZ2UoKTtcclxuICAgIHRoaXMuZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG4gICAgdGhpcy5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xyXG4gICAgdGhpcy5mb250ID0gZm9udDtcclxuICAgIHRoaXMubGluZUNhcCA9IGxpbmVDYXA7XHJcbiAgICB0aGlzLmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcclxuICAgIHRoaXMubGluZUpvaW4gPSBsaW5lSm9pbjtcclxuICB9O1xyXG5cclxuICB2YXIgcGF0aFBvc2l0aW9uUmVkbyA9IGZ1bmN0aW9uKHBhdGhzLCB4LCB5KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHN3aXRjaCAocGF0aHNbaV0udHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJiY3RcIjpcclxuICAgICAgICAgIHBhdGhzW2ldLngyICs9IHg7XHJcbiAgICAgICAgICBwYXRoc1tpXS55MiArPSB5O1xyXG4gICAgICAgIGNhc2UgXCJxY3RcIjpcclxuICAgICAgICAgIHBhdGhzW2ldLngxICs9IHg7XHJcbiAgICAgICAgICBwYXRoc1tpXS55MSArPSB5O1xyXG4gICAgICAgIGNhc2UgXCJtdFwiOlxyXG4gICAgICAgIGNhc2UgXCJsdFwiOlxyXG4gICAgICAgIGNhc2UgXCJhcmNcIjpcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcGF0aHNbaV0ueCArPSB4O1xyXG4gICAgICAgICAgcGF0aHNbaV0ueSArPSB5O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aHM7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHNvcnRQYWdlcyA9IGZ1bmN0aW9uKHBhZ2VzKSB7XHJcbiAgICByZXR1cm4gcGFnZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgIHJldHVybiBhIC0gYjtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBwYXRoUHJlUHJvY2VzcyA9IGZ1bmN0aW9uKHJ1bGUsIGlzQ2xpcCkge1xyXG4gICAgdmFyIGZpbGxTdHlsZSA9IHRoaXMuZmlsbFN0eWxlO1xyXG4gICAgdmFyIHN0cm9rZVN0eWxlID0gdGhpcy5zdHJva2VTdHlsZTtcclxuICAgIHZhciBsaW5lQ2FwID0gdGhpcy5saW5lQ2FwO1xyXG4gICAgdmFyIG9sZExpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgdmFyIGxpbmVXaWR0aCA9IE1hdGguYWJzKG9sZExpbmVXaWR0aCAqIHRoaXMuY3R4LnRyYW5zZm9ybS5zY2FsZVgpO1xyXG4gICAgdmFyIGxpbmVKb2luID0gdGhpcy5saW5lSm9pbjtcclxuXHJcbiAgICB2YXIgb3JpZ1BhdGggPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGF0aCkpO1xyXG4gICAgdmFyIHhQYXRoID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBhdGgpKTtcclxuICAgIHZhciBjbGlwUGF0aDtcclxuICAgIHZhciB0bXBQYXRoO1xyXG4gICAgdmFyIHBhZ2VzID0gW107XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4UGF0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodHlwZW9mIHhQYXRoW2ldLnggIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICB2YXIgcGFnZSA9IGdldFBhZ2VzQnlQYXRoLmNhbGwodGhpcywgeFBhdGhbaV0pO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgcGFnZS5sZW5ndGg7IGlpICs9IDEpIHtcclxuICAgICAgICAgIGlmIChwYWdlcy5pbmRleE9mKHBhZ2VbaWldKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcGFnZXMucHVzaChwYWdlW2lpXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYWdlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICB3aGlsZSAodGhpcy5wZGYuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpIDwgcGFnZXNbal0pIHtcclxuICAgICAgICBhZGRQYWdlLmNhbGwodGhpcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNvcnRQYWdlcyhwYWdlcyk7XHJcblxyXG4gICAgaWYgKHRoaXMuYXV0b1BhZ2luZykge1xyXG4gICAgICB2YXIgbWluID0gcGFnZXNbMF07XHJcbiAgICAgIHZhciBtYXggPSBwYWdlc1twYWdlcy5sZW5ndGggLSAxXTtcclxuICAgICAgZm9yICh2YXIgayA9IG1pbjsgayA8IG1heCArIDE7IGsrKykge1xyXG4gICAgICAgIHRoaXMucGRmLnNldFBhZ2Uoayk7XHJcblxyXG4gICAgICAgIHRoaXMuZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xyXG4gICAgICAgIHRoaXMuc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcclxuICAgICAgICB0aGlzLmxpbmVDYXAgPSBsaW5lQ2FwO1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gbGluZVdpZHRoO1xyXG4gICAgICAgIHRoaXMubGluZUpvaW4gPSBsaW5lSm9pbjtcclxuXHJcbiAgICAgICAgdmFyIHBhZ2VXaWR0aE1pbnVzTWFyZ2lucyA9XHJcbiAgICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIHRoaXMubWFyZ2luWzNdIC0gdGhpcy5tYXJnaW5bMV07XHJcbiAgICAgICAgdmFyIHRvcE1hcmdpbiA9IGsgPT09IDEgPyB0aGlzLnBvc1kgKyB0aGlzLm1hcmdpblswXSA6IHRoaXMubWFyZ2luWzBdO1xyXG4gICAgICAgIHZhciBmaXJzdFBhZ2VIZWlnaHQgPVxyXG4gICAgICAgICAgdGhpcy5wZGYuaW50ZXJuYWwucGFnZVNpemUuaGVpZ2h0IC1cclxuICAgICAgICAgIHRoaXMucG9zWSAtXHJcbiAgICAgICAgICB0aGlzLm1hcmdpblswXSAtXHJcbiAgICAgICAgICB0aGlzLm1hcmdpblsyXTtcclxuICAgICAgICB2YXIgcGFnZUhlaWdodE1pbnVzTWFyZ2lucyA9XHJcbiAgICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHQgLSB0aGlzLm1hcmdpblswXSAtIHRoaXMubWFyZ2luWzJdO1xyXG4gICAgICAgIHZhciBwcmV2aW91c1BhZ2VIZWlnaHRTdW0gPVxyXG4gICAgICAgICAgayA9PT0gMSA/IDAgOiBmaXJzdFBhZ2VIZWlnaHQgKyAoayAtIDIpICogcGFnZUhlaWdodE1pbnVzTWFyZ2lucztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3R4LmNsaXBfcGF0aC5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgIHZhciB0bXBQYXRocyA9IHRoaXMucGF0aDtcclxuICAgICAgICAgIGNsaXBQYXRoID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmN0eC5jbGlwX3BhdGgpKTtcclxuICAgICAgICAgIHRoaXMucGF0aCA9IHBhdGhQb3NpdGlvblJlZG8oXHJcbiAgICAgICAgICAgIGNsaXBQYXRoLFxyXG4gICAgICAgICAgICB0aGlzLnBvc1ggKyB0aGlzLm1hcmdpblszXSxcclxuICAgICAgICAgICAgLXByZXZpb3VzUGFnZUhlaWdodFN1bSArIHRvcE1hcmdpbiArIHRoaXMuY3R4LnByZXZQYWdlTGFzdEVsZW1PZmZzZXRcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBkcmF3UGF0aHMuY2FsbCh0aGlzLCBydWxlLCB0cnVlKTtcclxuICAgICAgICAgIHRoaXMucGF0aCA9IHRtcFBhdGhzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0bXBQYXRoID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcmlnUGF0aCkpO1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGhQb3NpdGlvblJlZG8oXHJcbiAgICAgICAgICB0bXBQYXRoLFxyXG4gICAgICAgICAgdGhpcy5wb3NYICsgdGhpcy5tYXJnaW5bM10sXHJcbiAgICAgICAgICAtcHJldmlvdXNQYWdlSGVpZ2h0U3VtICsgdG9wTWFyZ2luICsgdGhpcy5jdHgucHJldlBhZ2VMYXN0RWxlbU9mZnNldFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKGlzQ2xpcCA9PT0gZmFsc2UgfHwgayA9PT0gMCkge1xyXG4gICAgICAgICAgY29uc3QgbmVlZHNDbGlwcGluZyA9IChrID4gbWluIHx8IGsgPCBtYXgpICYmIGhhc01hcmdpbnMuY2FsbCh0aGlzKTtcclxuICAgICAgICAgIGlmIChuZWVkc0NsaXBwaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGRmLnNhdmVHcmFwaGljc1N0YXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGRmXHJcbiAgICAgICAgICAgICAgLnJlY3QoXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmdpblszXSxcclxuICAgICAgICAgICAgICAgIHRoaXMubWFyZ2luWzBdLFxyXG4gICAgICAgICAgICAgICAgcGFnZVdpZHRoTWludXNNYXJnaW5zLFxyXG4gICAgICAgICAgICAgICAgcGFnZUhlaWdodE1pbnVzTWFyZ2lucyxcclxuICAgICAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgLmNsaXAoKVxyXG4gICAgICAgICAgICAgIC5kaXNjYXJkUGF0aCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZHJhd1BhdGhzLmNhbGwodGhpcywgcnVsZSwgaXNDbGlwKTtcclxuICAgICAgICAgIGlmIChuZWVkc0NsaXBwaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGRmLnJlc3RvcmVHcmFwaGljc1N0YXRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gb2xkTGluZVdpZHRoO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcclxuICAgICAgZHJhd1BhdGhzLmNhbGwodGhpcywgcnVsZSwgaXNDbGlwKTtcclxuICAgICAgdGhpcy5saW5lV2lkdGggPSBvbGRMaW5lV2lkdGg7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBhdGggPSBvcmlnUGF0aDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBQcm9jZXNzZXMgdGhlIHBhdGhzXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcGFyYW0gcnVsZSB7U3RyaW5nfVxyXG4gICAqIEBwYXJhbSBpc0NsaXAge0Jvb2xlYW59XHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAaWdub3JlXHJcbiAgICovXHJcbiAgdmFyIGRyYXdQYXRocyA9IGZ1bmN0aW9uKHJ1bGUsIGlzQ2xpcCkge1xyXG4gICAgaWYgKHJ1bGUgPT09IFwic3Ryb2tlXCIgJiYgIWlzQ2xpcCAmJiBpc1N0cm9rZVRyYW5zcGFyZW50LmNhbGwodGhpcykpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChydWxlICE9PSBcInN0cm9rZVwiICYmICFpc0NsaXAgJiYgaXNGaWxsVHJhbnNwYXJlbnQuY2FsbCh0aGlzKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1vdmVzID0gW107XHJcblxyXG4gICAgLy92YXIgYWxwaGEgPSAodGhpcy5jdHguZmlsbE9wYWNpdHkgPCAxKSA/IHRoaXMuY3R4LmZpbGxPcGFjaXR5IDogdGhpcy5jdHguZ2xvYmFsQWxwaGE7XHJcbiAgICB2YXIgZGVsdGE7XHJcbiAgICB2YXIgeFBhdGggPSB0aGlzLnBhdGg7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHhQYXRoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBwdCA9IHhQYXRoW2ldO1xyXG5cclxuICAgICAgc3dpdGNoIChwdC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcImJlZ2luXCI6XHJcbiAgICAgICAgICBtb3Zlcy5wdXNoKHtcclxuICAgICAgICAgICAgYmVnaW46IHRydWVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJjbG9zZVwiOlxyXG4gICAgICAgICAgbW92ZXMucHVzaCh7XHJcbiAgICAgICAgICAgIGNsb3NlOiB0cnVlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwibXRcIjpcclxuICAgICAgICAgIG1vdmVzLnB1c2goe1xyXG4gICAgICAgICAgICBzdGFydDogcHQsXHJcbiAgICAgICAgICAgIGRlbHRhczogW10sXHJcbiAgICAgICAgICAgIGFiczogW11cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJsdFwiOlxyXG4gICAgICAgICAgdmFyIGlpaSA9IG1vdmVzLmxlbmd0aDtcclxuICAgICAgICAgIGlmICh4UGF0aFtpIC0gMV0gJiYgIWlzTmFOKHhQYXRoW2kgLSAxXS54KSkge1xyXG4gICAgICAgICAgICBkZWx0YSA9IFtwdC54IC0geFBhdGhbaSAtIDFdLngsIHB0LnkgLSB4UGF0aFtpIC0gMV0ueV07XHJcbiAgICAgICAgICAgIGlmIChpaWkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgZm9yIChpaWk7IGlpaSA+PSAwOyBpaWktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBtb3Zlc1tpaWkgLSAxXS5jbG9zZSAhPT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICAgICAgICBtb3Zlc1tpaWkgLSAxXS5iZWdpbiAhPT0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgIG1vdmVzW2lpaSAtIDFdLmRlbHRhcy5wdXNoKGRlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgbW92ZXNbaWlpIC0gMV0uYWJzLnB1c2gocHQpO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiYmN0XCI6XHJcbiAgICAgICAgICBkZWx0YSA9IFtcclxuICAgICAgICAgICAgcHQueDEgLSB4UGF0aFtpIC0gMV0ueCxcclxuICAgICAgICAgICAgcHQueTEgLSB4UGF0aFtpIC0gMV0ueSxcclxuICAgICAgICAgICAgcHQueDIgLSB4UGF0aFtpIC0gMV0ueCxcclxuICAgICAgICAgICAgcHQueTIgLSB4UGF0aFtpIC0gMV0ueSxcclxuICAgICAgICAgICAgcHQueCAtIHhQYXRoW2kgLSAxXS54LFxyXG4gICAgICAgICAgICBwdC55IC0geFBhdGhbaSAtIDFdLnlcclxuICAgICAgICAgIF07XHJcbiAgICAgICAgICBtb3Zlc1ttb3Zlcy5sZW5ndGggLSAxXS5kZWx0YXMucHVzaChkZWx0YSk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcInFjdFwiOlxyXG4gICAgICAgICAgdmFyIHgxID0geFBhdGhbaSAtIDFdLnggKyAoMi4wIC8gMy4wKSAqIChwdC54MSAtIHhQYXRoW2kgLSAxXS54KTtcclxuICAgICAgICAgIHZhciB5MSA9IHhQYXRoW2kgLSAxXS55ICsgKDIuMCAvIDMuMCkgKiAocHQueTEgLSB4UGF0aFtpIC0gMV0ueSk7XHJcbiAgICAgICAgICB2YXIgeDIgPSBwdC54ICsgKDIuMCAvIDMuMCkgKiAocHQueDEgLSBwdC54KTtcclxuICAgICAgICAgIHZhciB5MiA9IHB0LnkgKyAoMi4wIC8gMy4wKSAqIChwdC55MSAtIHB0LnkpO1xyXG4gICAgICAgICAgdmFyIHgzID0gcHQueDtcclxuICAgICAgICAgIHZhciB5MyA9IHB0Lnk7XHJcbiAgICAgICAgICBkZWx0YSA9IFtcclxuICAgICAgICAgICAgeDEgLSB4UGF0aFtpIC0gMV0ueCxcclxuICAgICAgICAgICAgeTEgLSB4UGF0aFtpIC0gMV0ueSxcclxuICAgICAgICAgICAgeDIgLSB4UGF0aFtpIC0gMV0ueCxcclxuICAgICAgICAgICAgeTIgLSB4UGF0aFtpIC0gMV0ueSxcclxuICAgICAgICAgICAgeDMgLSB4UGF0aFtpIC0gMV0ueCxcclxuICAgICAgICAgICAgeTMgLSB4UGF0aFtpIC0gMV0ueVxyXG4gICAgICAgICAgXTtcclxuICAgICAgICAgIG1vdmVzW21vdmVzLmxlbmd0aCAtIDFdLmRlbHRhcy5wdXNoKGRlbHRhKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiYXJjXCI6XHJcbiAgICAgICAgICBtb3Zlcy5wdXNoKHtcclxuICAgICAgICAgICAgZGVsdGFzOiBbXSxcclxuICAgICAgICAgICAgYWJzOiBbXSxcclxuICAgICAgICAgICAgYXJjOiB0cnVlXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtb3Zlc1ttb3Zlcy5sZW5ndGggLSAxXS5hYnMpKSB7XHJcbiAgICAgICAgICAgIG1vdmVzW21vdmVzLmxlbmd0aCAtIDFdLmFicy5wdXNoKHB0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgc3R5bGU7XHJcbiAgICBpZiAoIWlzQ2xpcCkge1xyXG4gICAgICBpZiAocnVsZSA9PT0gXCJzdHJva2VcIikge1xyXG4gICAgICAgIHN0eWxlID0gXCJzdHJva2VcIjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdHlsZSA9IFwiZmlsbFwiO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdHlsZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJlZ2FuID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IG1vdmVzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgIGlmIChtb3Zlc1trXS5hcmMpIHtcclxuICAgICAgICB2YXIgYXJjcyA9IG1vdmVzW2tdLmFicztcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGFyY3MubGVuZ3RoOyBpaSsrKSB7XHJcbiAgICAgICAgICB2YXIgYXJjID0gYXJjc1tpaV07XHJcblxyXG4gICAgICAgICAgaWYgKGFyYy50eXBlID09PSBcImFyY1wiKSB7XHJcbiAgICAgICAgICAgIGRyYXdBcmMuY2FsbChcclxuICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgIGFyYy54LFxyXG4gICAgICAgICAgICAgIGFyYy55LFxyXG4gICAgICAgICAgICAgIGFyYy5yYWRpdXMsXHJcbiAgICAgICAgICAgICAgYXJjLnN0YXJ0QW5nbGUsXHJcbiAgICAgICAgICAgICAgYXJjLmVuZEFuZ2xlLFxyXG4gICAgICAgICAgICAgIGFyYy5jb3VudGVyY2xvY2t3aXNlLFxyXG4gICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICBpc0NsaXAsXHJcbiAgICAgICAgICAgICAgIWJlZ2FuXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkcmF3TGluZS5jYWxsKHRoaXMsIGFyYy54LCBhcmMueSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBiZWdhbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKG1vdmVzW2tdLmNsb3NlID09PSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5wZGYuaW50ZXJuYWwub3V0KFwiaFwiKTtcclxuICAgICAgICBiZWdhbiA9IGZhbHNlO1xyXG4gICAgICB9IGVsc2UgaWYgKG1vdmVzW2tdLmJlZ2luICE9PSB0cnVlKSB7XHJcbiAgICAgICAgdmFyIHggPSBtb3Zlc1trXS5zdGFydC54O1xyXG4gICAgICAgIHZhciB5ID0gbW92ZXNba10uc3RhcnQueTtcclxuICAgICAgICBkcmF3TGluZXMuY2FsbCh0aGlzLCBtb3Zlc1trXS5kZWx0YXMsIHgsIHkpO1xyXG4gICAgICAgIGJlZ2FuID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzdHlsZSkge1xyXG4gICAgICBwdXRTdHlsZS5jYWxsKHRoaXMsIHN0eWxlKTtcclxuICAgIH1cclxuICAgIGlmIChpc0NsaXApIHtcclxuICAgICAgZG9DbGlwLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldEJhc2VsaW5lID0gZnVuY3Rpb24oeSkge1xyXG4gICAgdmFyIGhlaWdodCA9XHJcbiAgICAgIHRoaXMucGRmLmludGVybmFsLmdldEZvbnRTaXplKCkgLyB0aGlzLnBkZi5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcclxuICAgIHZhciBkZXNjZW50ID0gaGVpZ2h0ICogKHRoaXMucGRmLmludGVybmFsLmdldExpbmVIZWlnaHRGYWN0b3IoKSAtIDEpO1xyXG4gICAgc3dpdGNoICh0aGlzLmN0eC50ZXh0QmFzZWxpbmUpIHtcclxuICAgICAgY2FzZSBcImJvdHRvbVwiOlxyXG4gICAgICAgIHJldHVybiB5IC0gZGVzY2VudDtcclxuICAgICAgY2FzZSBcInRvcFwiOlxyXG4gICAgICAgIHJldHVybiB5ICsgaGVpZ2h0IC0gZGVzY2VudDtcclxuICAgICAgY2FzZSBcImhhbmdpbmdcIjpcclxuICAgICAgICByZXR1cm4geSArIGhlaWdodCAtIDIgKiBkZXNjZW50O1xyXG4gICAgICBjYXNlIFwibWlkZGxlXCI6XHJcbiAgICAgICAgcmV0dXJuIHkgKyBoZWlnaHQgLyAyIC0gZGVzY2VudDtcclxuICAgICAgY2FzZSBcImlkZW9ncmFwaGljXCI6XHJcbiAgICAgICAgLy8gVE9ETyBub3QgaW1wbGVtZW50ZWRcclxuICAgICAgICByZXR1cm4geTtcclxuICAgICAgY2FzZSBcImFscGhhYmV0aWNcIjpcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4geTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgZ2V0VGV4dEJvdHRvbSA9IGZ1bmN0aW9uKHlCYXNlTGluZSkge1xyXG4gICAgdmFyIGhlaWdodCA9XHJcbiAgICAgIHRoaXMucGRmLmludGVybmFsLmdldEZvbnRTaXplKCkgLyB0aGlzLnBkZi5pbnRlcm5hbC5zY2FsZUZhY3RvcjtcclxuICAgIHZhciBkZXNjZW50ID0gaGVpZ2h0ICogKHRoaXMucGRmLmludGVybmFsLmdldExpbmVIZWlnaHRGYWN0b3IoKSAtIDEpO1xyXG4gICAgcmV0dXJuIHlCYXNlTGluZSArIGRlc2NlbnQ7XHJcbiAgfTtcclxuXHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5jcmVhdGVMaW5lYXJHcmFkaWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUxpbmVhckdyYWRpZW50KCkge1xyXG4gICAgdmFyIGNhbnZhc0dyYWRpZW50ID0gZnVuY3Rpb24gY2FudmFzR3JhZGllbnQoKSB7fTtcclxuXHJcbiAgICBjYW52YXNHcmFkaWVudC5jb2xvclN0b3BzID0gW107XHJcbiAgICBjYW52YXNHcmFkaWVudC5hZGRDb2xvclN0b3AgPSBmdW5jdGlvbihvZmZzZXQsIGNvbG9yKSB7XHJcbiAgICAgIHRoaXMuY29sb3JTdG9wcy5wdXNoKFtvZmZzZXQsIGNvbG9yXSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNhbnZhc0dyYWRpZW50LmdldENvbG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbG9yU3RvcHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiIzAwMDAwMFwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy5jb2xvclN0b3BzWzBdWzFdO1xyXG4gICAgfTtcclxuXHJcbiAgICBjYW52YXNHcmFkaWVudC5pc0NhbnZhc0dyYWRpZW50ID0gdHJ1ZTtcclxuICAgIHJldHVybiBjYW52YXNHcmFkaWVudDtcclxuICB9O1xyXG4gIENvbnRleHQyRC5wcm90b3R5cGUuY3JlYXRlUGF0dGVybiA9IGZ1bmN0aW9uIGNyZWF0ZVBhdHRlcm4oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVMaW5lYXJHcmFkaWVudCgpO1xyXG4gIH07XHJcbiAgQ29udGV4dDJELnByb3RvdHlwZS5jcmVhdGVSYWRpYWxHcmFkaWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVJhZGlhbEdyYWRpZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTGluZWFyR3JhZGllbnQoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB4IEVkZ2UgcG9pbnQgWFxyXG4gICAqIEBwYXJhbSB5IEVkZ2UgcG9pbnQgWVxyXG4gICAqIEBwYXJhbSByIFJhZGl1c1xyXG4gICAqIEBwYXJhbSBhMSBzdGFydCBhbmdsZVxyXG4gICAqIEBwYXJhbSBhMiBlbmQgYW5nbGVcclxuICAgKiBAcGFyYW0gY291bnRlcmNsb2Nrd2lzZVxyXG4gICAqIEBwYXJhbSBzdHlsZVxyXG4gICAqIEBwYXJhbSBpc0NsaXBcclxuICAgKi9cclxuICB2YXIgZHJhd0FyYyA9IGZ1bmN0aW9uKFxyXG4gICAgeCxcclxuICAgIHksXHJcbiAgICByLFxyXG4gICAgYTEsXHJcbiAgICBhMixcclxuICAgIGNvdW50ZXJjbG9ja3dpc2UsXHJcbiAgICBzdHlsZSxcclxuICAgIGlzQ2xpcCxcclxuICAgIGluY2x1ZGVNb3ZlXHJcbiAgKSB7XHJcbiAgICAvLyBodHRwOi8vaGFuc211bGxlci1mbGV4LmJsb2dzcG90LmNvbS8yMDExLzEwL21vcmUtYWJvdXQtYXBwcm94aW1hdGluZy1jaXJjdWxhci1hcmNzLmh0bWxcclxuICAgIHZhciBjdXJ2ZXMgPSBjcmVhdGVBcmMuY2FsbCh0aGlzLCByLCBhMSwgYTIsIGNvdW50ZXJjbG9ja3dpc2UpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VydmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBjdXJ2ZSA9IGN1cnZlc1tpXTtcclxuICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICBpZiAoaW5jbHVkZU1vdmUpIHtcclxuICAgICAgICAgIGRvTW92ZS5jYWxsKHRoaXMsIGN1cnZlLngxICsgeCwgY3VydmUueTEgKyB5KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZHJhd0xpbmUuY2FsbCh0aGlzLCBjdXJ2ZS54MSArIHgsIGN1cnZlLnkxICsgeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGRyYXdDdXJ2ZS5jYWxsKFxyXG4gICAgICAgIHRoaXMsXHJcbiAgICAgICAgeCxcclxuICAgICAgICB5LFxyXG4gICAgICAgIGN1cnZlLngyLFxyXG4gICAgICAgIGN1cnZlLnkyLFxyXG4gICAgICAgIGN1cnZlLngzLFxyXG4gICAgICAgIGN1cnZlLnkzLFxyXG4gICAgICAgIGN1cnZlLng0LFxyXG4gICAgICAgIGN1cnZlLnk0XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFpc0NsaXApIHtcclxuICAgICAgcHV0U3R5bGUuY2FsbCh0aGlzLCBzdHlsZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb0NsaXAuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcHV0U3R5bGUgPSBmdW5jdGlvbihzdHlsZSkge1xyXG4gICAgc3dpdGNoIChzdHlsZSkge1xyXG4gICAgICBjYXNlIFwic3Ryb2tlXCI6XHJcbiAgICAgICAgdGhpcy5wZGYuaW50ZXJuYWwub3V0KFwiU1wiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImZpbGxcIjpcclxuICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC5vdXQoXCJmXCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBkb0NsaXAgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMucGRmLmNsaXAoKTtcclxuICAgIHRoaXMucGRmLmRpc2NhcmRQYXRoKCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGRvTW92ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIHRoaXMucGRmLmludGVybmFsLm91dChcclxuICAgICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoeCkgK1xyXG4gICAgICAgIFwiIFwiICtcclxuICAgICAgICBnZXRWZXJ0aWNhbENvb3JkaW5hdGVTdHJpbmcoeSkgK1xyXG4gICAgICAgIFwiIG1cIlxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICB2YXIgcHV0VGV4dCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIHZhciB0ZXh0QWxpZ247XHJcbiAgICBzd2l0Y2ggKG9wdGlvbnMuYWxpZ24pIHtcclxuICAgICAgY2FzZSBcInJpZ2h0XCI6XHJcbiAgICAgIGNhc2UgXCJlbmRcIjpcclxuICAgICAgICB0ZXh0QWxpZ24gPSBcInJpZ2h0XCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJjZW50ZXJcIjpcclxuICAgICAgICB0ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwibGVmdFwiOlxyXG4gICAgICBjYXNlIFwic3RhcnRcIjpcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0ZXh0QWxpZ24gPSBcImxlZnRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGV4dERpbWVuc2lvbnMgPSB0aGlzLnBkZi5nZXRUZXh0RGltZW5zaW9ucyhvcHRpb25zLnRleHQpO1xyXG4gICAgdmFyIHlCYXNlTGluZSA9IGdldEJhc2VsaW5lLmNhbGwodGhpcywgb3B0aW9ucy55KTtcclxuICAgIHZhciB5Qm90dG9tID0gZ2V0VGV4dEJvdHRvbS5jYWxsKHRoaXMsIHlCYXNlTGluZSk7XHJcbiAgICB2YXIgeVRvcCA9IHlCb3R0b20gLSB0ZXh0RGltZW5zaW9ucy5oO1xyXG5cclxuICAgIHZhciBwdCA9IHRoaXMuY3R4LnRyYW5zZm9ybS5hcHBseVRvUG9pbnQobmV3IFBvaW50KG9wdGlvbnMueCwgeUJhc2VMaW5lKSk7XHJcbiAgICB2YXIgZGVjb21wb3NlZFRyYW5zZm9ybWF0aW9uTWF0cml4ID0gdGhpcy5jdHgudHJhbnNmb3JtLmRlY29tcG9zZSgpO1xyXG4gICAgdmFyIG1hdHJpeCA9IG5ldyBNYXRyaXgoKTtcclxuICAgIG1hdHJpeCA9IG1hdHJpeC5tdWx0aXBseShkZWNvbXBvc2VkVHJhbnNmb3JtYXRpb25NYXRyaXgudHJhbnNsYXRlKTtcclxuICAgIG1hdHJpeCA9IG1hdHJpeC5tdWx0aXBseShkZWNvbXBvc2VkVHJhbnNmb3JtYXRpb25NYXRyaXguc2tldyk7XHJcbiAgICBtYXRyaXggPSBtYXRyaXgubXVsdGlwbHkoZGVjb21wb3NlZFRyYW5zZm9ybWF0aW9uTWF0cml4LnNjYWxlKTtcclxuXHJcbiAgICB2YXIgYmFzZWxpbmVSZWN0ID0gdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5VG9SZWN0YW5nbGUoXHJcbiAgICAgIG5ldyBSZWN0YW5nbGUob3B0aW9ucy54LCB5QmFzZUxpbmUsIHRleHREaW1lbnNpb25zLncsIHRleHREaW1lbnNpb25zLmgpXHJcbiAgICApO1xyXG4gICAgdmFyIHRleHRCb3VuZHMgPSBtYXRyaXguYXBwbHlUb1JlY3RhbmdsZShcclxuICAgICAgbmV3IFJlY3RhbmdsZShvcHRpb25zLngsIHlUb3AsIHRleHREaW1lbnNpb25zLncsIHRleHREaW1lbnNpb25zLmgpXHJcbiAgICApO1xyXG4gICAgdmFyIHBhZ2VBcnJheSA9IGdldFBhZ2VzQnlQYXRoLmNhbGwodGhpcywgdGV4dEJvdW5kcyk7XHJcbiAgICB2YXIgcGFnZXMgPSBbXTtcclxuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBwYWdlQXJyYXkubGVuZ3RoOyBpaSArPSAxKSB7XHJcbiAgICAgIGlmIChwYWdlcy5pbmRleE9mKHBhZ2VBcnJheVtpaV0pID09PSAtMSkge1xyXG4gICAgICAgIHBhZ2VzLnB1c2gocGFnZUFycmF5W2lpXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzb3J0UGFnZXMocGFnZXMpO1xyXG5cclxuICAgIHZhciBjbGlwUGF0aCwgb2xkU2l6ZSwgb2xkTGluZVdpZHRoO1xyXG4gICAgaWYgKHRoaXMuYXV0b1BhZ2luZykge1xyXG4gICAgICB2YXIgbWluID0gcGFnZXNbMF07XHJcbiAgICAgIHZhciBtYXggPSBwYWdlc1twYWdlcy5sZW5ndGggLSAxXTtcclxuICAgICAgZm9yICh2YXIgaSA9IG1pbjsgaSA8IG1heCArIDE7IGkrKykge1xyXG4gICAgICAgIHRoaXMucGRmLnNldFBhZ2UoaSk7XHJcblxyXG4gICAgICAgIHZhciB0b3BNYXJnaW4gPSBpID09PSAxID8gdGhpcy5wb3NZICsgdGhpcy5tYXJnaW5bMF0gOiB0aGlzLm1hcmdpblswXTtcclxuICAgICAgICB2YXIgZmlyc3RQYWdlSGVpZ2h0ID1cclxuICAgICAgICAgIHRoaXMucGRmLmludGVybmFsLnBhZ2VTaXplLmhlaWdodCAtXHJcbiAgICAgICAgICB0aGlzLnBvc1kgLVxyXG4gICAgICAgICAgdGhpcy5tYXJnaW5bMF0gLVxyXG4gICAgICAgICAgdGhpcy5tYXJnaW5bMl07XHJcbiAgICAgICAgdmFyIHBhZ2VIZWlnaHRNaW51c0JvdHRvbU1hcmdpbiA9XHJcbiAgICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHQgLSB0aGlzLm1hcmdpblsyXTtcclxuICAgICAgICB2YXIgcGFnZUhlaWdodE1pbnVzTWFyZ2lucyA9XHJcbiAgICAgICAgICBwYWdlSGVpZ2h0TWludXNCb3R0b21NYXJnaW4gLSB0aGlzLm1hcmdpblswXTtcclxuICAgICAgICB2YXIgcGFnZVdpZHRoTWludXNSaWdodE1hcmdpbiA9XHJcbiAgICAgICAgICB0aGlzLnBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIHRoaXMubWFyZ2luWzFdO1xyXG4gICAgICAgIHZhciBwYWdlV2lkdGhNaW51c01hcmdpbnMgPSBwYWdlV2lkdGhNaW51c1JpZ2h0TWFyZ2luIC0gdGhpcy5tYXJnaW5bM107XHJcbiAgICAgICAgdmFyIHByZXZpb3VzUGFnZUhlaWdodFN1bSA9XHJcbiAgICAgICAgICBpID09PSAxID8gMCA6IGZpcnN0UGFnZUhlaWdodCArIChpIC0gMikgKiBwYWdlSGVpZ2h0TWludXNNYXJnaW5zO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jdHguY2xpcF9wYXRoLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgdmFyIHRtcFBhdGhzID0gdGhpcy5wYXRoO1xyXG4gICAgICAgICAgY2xpcFBhdGggPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY3R4LmNsaXBfcGF0aCkpO1xyXG4gICAgICAgICAgdGhpcy5wYXRoID0gcGF0aFBvc2l0aW9uUmVkbyhcclxuICAgICAgICAgICAgY2xpcFBhdGgsXHJcbiAgICAgICAgICAgIHRoaXMucG9zWCArIHRoaXMubWFyZ2luWzNdLFxyXG4gICAgICAgICAgICAtMSAqIHByZXZpb3VzUGFnZUhlaWdodFN1bSArIHRvcE1hcmdpblxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGRyYXdQYXRocy5jYWxsKHRoaXMsIFwiZmlsbFwiLCB0cnVlKTtcclxuICAgICAgICAgIHRoaXMucGF0aCA9IHRtcFBhdGhzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGV4dEJvdW5kc09uUGFnZSA9IHBhdGhQb3NpdGlvblJlZG8oXHJcbiAgICAgICAgICBbSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0ZXh0Qm91bmRzKSldLFxyXG4gICAgICAgICAgdGhpcy5wb3NYICsgdGhpcy5tYXJnaW5bM10sXHJcbiAgICAgICAgICAtcHJldmlvdXNQYWdlSGVpZ2h0U3VtICsgdG9wTWFyZ2luICsgdGhpcy5jdHgucHJldlBhZ2VMYXN0RWxlbU9mZnNldFxyXG4gICAgICAgIClbMF07XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLnNjYWxlID49IDAuMDEpIHtcclxuICAgICAgICAgIG9sZFNpemUgPSB0aGlzLnBkZi5pbnRlcm5hbC5nZXRGb250U2l6ZSgpO1xyXG4gICAgICAgICAgdGhpcy5wZGYuc2V0Rm9udFNpemUob2xkU2l6ZSAqIG9wdGlvbnMuc2NhbGUpO1xyXG4gICAgICAgICAgb2xkTGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9sZExpbmVXaWR0aCAqIG9wdGlvbnMuc2NhbGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZG9TbGljZSA9IHRoaXMuYXV0b1BhZ2luZyAhPT0gXCJ0ZXh0XCI7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGRvU2xpY2UgfHxcclxuICAgICAgICAgIHRleHRCb3VuZHNPblBhZ2UueSArIHRleHRCb3VuZHNPblBhZ2UuaCA8PSBwYWdlSGVpZ2h0TWludXNCb3R0b21NYXJnaW5cclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgZG9TbGljZSB8fFxyXG4gICAgICAgICAgICAodGV4dEJvdW5kc09uUGFnZS55ID49IHRvcE1hcmdpbiAmJlxyXG4gICAgICAgICAgICAgIHRleHRCb3VuZHNPblBhZ2UueCA8PSBwYWdlV2lkdGhNaW51c1JpZ2h0TWFyZ2luKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHZhciBjcm9wcGVkVGV4dCA9IGRvU2xpY2VcclxuICAgICAgICAgICAgICA/IG9wdGlvbnMudGV4dFxyXG4gICAgICAgICAgICAgIDogdGhpcy5wZGYuc3BsaXRUZXh0VG9TaXplKFxyXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnRleHQsXHJcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMubWF4V2lkdGggfHxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlV2lkdGhNaW51c1JpZ2h0TWFyZ2luIC0gdGV4dEJvdW5kc09uUGFnZS54XHJcbiAgICAgICAgICAgICAgICApWzBdO1xyXG4gICAgICAgICAgICB2YXIgYmFzZUxpbmVSZWN0T25QYWdlID0gcGF0aFBvc2l0aW9uUmVkbyhcclxuICAgICAgICAgICAgICBbSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShiYXNlbGluZVJlY3QpKV0sXHJcbiAgICAgICAgICAgICAgdGhpcy5wb3NYICsgdGhpcy5tYXJnaW5bM10sXHJcbiAgICAgICAgICAgICAgLXByZXZpb3VzUGFnZUhlaWdodFN1bSArXHJcbiAgICAgICAgICAgICAgICB0b3BNYXJnaW4gK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHgucHJldlBhZ2VMYXN0RWxlbU9mZnNldFxyXG4gICAgICAgICAgICApWzBdO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmVlZHNDbGlwcGluZyA9XHJcbiAgICAgICAgICAgICAgZG9TbGljZSAmJiAoaSA+IG1pbiB8fCBpIDwgbWF4KSAmJiBoYXNNYXJnaW5zLmNhbGwodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmVlZHNDbGlwcGluZykge1xyXG4gICAgICAgICAgICAgIHRoaXMucGRmLnNhdmVHcmFwaGljc1N0YXRlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5wZGZcclxuICAgICAgICAgICAgICAgIC5yZWN0KFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLm1hcmdpblszXSxcclxuICAgICAgICAgICAgICAgICAgdGhpcy5tYXJnaW5bMF0sXHJcbiAgICAgICAgICAgICAgICAgIHBhZ2VXaWR0aE1pbnVzTWFyZ2lucyxcclxuICAgICAgICAgICAgICAgICAgcGFnZUhlaWdodE1pbnVzTWFyZ2lucyxcclxuICAgICAgICAgICAgICAgICAgbnVsbFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLmNsaXAoKVxyXG4gICAgICAgICAgICAgICAgLmRpc2NhcmRQYXRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucGRmLnRleHQoXHJcbiAgICAgICAgICAgICAgY3JvcHBlZFRleHQsXHJcbiAgICAgICAgICAgICAgYmFzZUxpbmVSZWN0T25QYWdlLngsXHJcbiAgICAgICAgICAgICAgYmFzZUxpbmVSZWN0T25QYWdlLnksXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYW5nbGU6IG9wdGlvbnMuYW5nbGUsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogdGV4dEFsaWduLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyaW5nTW9kZTogb3B0aW9ucy5yZW5kZXJpbmdNb2RlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5lZWRzQ2xpcHBpbmcpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBkZi5yZXN0b3JlR3JhcGhpY3NTdGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIFRoaXMgdGV4dCBpcyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBwYWdlLCBidXQgaXQgZ290IGN1dCBvZmYgZHVlIHRvIHRoZSBtYXJnaW5cclxuICAgICAgICAgIC8vIHNvIHdlIHJlbmRlciBpdCBpbiB0aGUgbmV4dCBwYWdlXHJcblxyXG4gICAgICAgICAgaWYgKHRleHRCb3VuZHNPblBhZ2UueSA8IHBhZ2VIZWlnaHRNaW51c0JvdHRvbU1hcmdpbikge1xyXG4gICAgICAgICAgICAvLyBBcyBhIHJlc3VsdCwgYWxsIG90aGVyIGVsZW1lbnRzIGhhdmUgdGhlaXIgeSBvZmZzZXQgaW5jcmVhc2VkXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LnByZXZQYWdlTGFzdEVsZW1PZmZzZXQgKz1cclxuICAgICAgICAgICAgICBwYWdlSGVpZ2h0TWludXNCb3R0b21NYXJnaW4gLSB0ZXh0Qm91bmRzT25QYWdlLnk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob3B0aW9ucy5zY2FsZSA+PSAwLjAxKSB7XHJcbiAgICAgICAgICB0aGlzLnBkZi5zZXRGb250U2l6ZShvbGRTaXplKTtcclxuICAgICAgICAgIHRoaXMubGluZVdpZHRoID0gb2xkTGluZVdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKG9wdGlvbnMuc2NhbGUgPj0gMC4wMSkge1xyXG4gICAgICAgIG9sZFNpemUgPSB0aGlzLnBkZi5pbnRlcm5hbC5nZXRGb250U2l6ZSgpO1xyXG4gICAgICAgIHRoaXMucGRmLnNldEZvbnRTaXplKG9sZFNpemUgKiBvcHRpb25zLnNjYWxlKTtcclxuICAgICAgICBvbGRMaW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9sZExpbmVXaWR0aCAqIG9wdGlvbnMuc2NhbGU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wZGYudGV4dChvcHRpb25zLnRleHQsIHB0LnggKyB0aGlzLnBvc1gsIHB0LnkgKyB0aGlzLnBvc1ksIHtcclxuICAgICAgICBhbmdsZTogb3B0aW9ucy5hbmdsZSxcclxuICAgICAgICBhbGlnbjogdGV4dEFsaWduLFxyXG4gICAgICAgIHJlbmRlcmluZ01vZGU6IG9wdGlvbnMucmVuZGVyaW5nTW9kZSxcclxuICAgICAgICBtYXhXaWR0aDogb3B0aW9ucy5tYXhXaWR0aFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChvcHRpb25zLnNjYWxlID49IDAuMDEpIHtcclxuICAgICAgICB0aGlzLnBkZi5zZXRGb250U2l6ZShvbGRTaXplKTtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9sZExpbmVXaWR0aDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBkcmF3TGluZSA9IGZ1bmN0aW9uKHgsIHksIHByZXZYLCBwcmV2WSkge1xyXG4gICAgcHJldlggPSBwcmV2WCB8fCAwO1xyXG4gICAgcHJldlkgPSBwcmV2WSB8fCAwO1xyXG5cclxuICAgIHRoaXMucGRmLmludGVybmFsLm91dChcclxuICAgICAgZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGVTdHJpbmcoeCArIHByZXZYKSArXHJcbiAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgIGdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZyh5ICsgcHJldlkpICtcclxuICAgICAgICBcIiBsXCJcclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGRyYXdMaW5lcyA9IGZ1bmN0aW9uKGxpbmVzLCB4LCB5KSB7XHJcbiAgICByZXR1cm4gdGhpcy5wZGYubGluZXMobGluZXMsIHgsIHksIG51bGwsIG51bGwpO1xyXG4gIH07XHJcblxyXG4gIHZhciBkcmF3Q3VydmUgPSBmdW5jdGlvbih4LCB5LCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKSB7XHJcbiAgICB0aGlzLnBkZi5pbnRlcm5hbC5vdXQoXHJcbiAgICAgIFtcclxuICAgICAgICBmMihnZXRIb3Jpem9udGFsQ29vcmRpbmF0ZSh4MSArIHgpKSxcclxuICAgICAgICBmMihnZXRWZXJ0aWNhbENvb3JkaW5hdGUoeTEgKyB5KSksXHJcbiAgICAgICAgZjIoZ2V0SG9yaXpvbnRhbENvb3JkaW5hdGUoeDIgKyB4KSksXHJcbiAgICAgICAgZjIoZ2V0VmVydGljYWxDb29yZGluYXRlKHkyICsgeSkpLFxyXG4gICAgICAgIGYyKGdldEhvcml6b250YWxDb29yZGluYXRlKHgzICsgeCkpLFxyXG4gICAgICAgIGYyKGdldFZlcnRpY2FsQ29vcmRpbmF0ZSh5MyArIHkpKSxcclxuICAgICAgICBcImNcIlxyXG4gICAgICBdLmpvaW4oXCIgXCIpXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybiBhIGFycmF5IG9mIG9iamVjdHMgdGhhdCByZXByZXNlbnQgYmV6aWVyIGN1cnZlcyB3aGljaCBhcHByb3hpbWF0ZSB0aGUgY2lyY3VsYXIgYXJjIGNlbnRlcmVkIGF0IHRoZSBvcmlnaW4sIGZyb20gc3RhcnRBbmdsZSB0byBlbmRBbmdsZSAocmFkaWFucykgd2l0aCB0aGUgc3BlY2lmaWVkIHJhZGl1cy5cclxuICAgKlxyXG4gICAqIEVhY2ggYmV6aWVyIGN1cnZlIGlzIGFuIG9iamVjdCB3aXRoIGZvdXIgcG9pbnRzLCB3aGVyZSB4MSx5MSBhbmQgeDQseTQgYXJlIHRoZSBhcmMncyBlbmQgcG9pbnRzIGFuZCB4Mix5MiBhbmQgeDMseTMgYXJlIHRoZSBjdWJpYyBiZXppZXIncyBjb250cm9sIHBvaW50cy5cclxuICAgKiBAZnVuY3Rpb24gY3JlYXRlQXJjXHJcbiAgICovXHJcbiAgdmFyIGNyZWF0ZUFyYyA9IGZ1bmN0aW9uKHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGFudGljbG9ja3dpc2UpIHtcclxuICAgIHZhciBFUFNJTE9OID0gMC4wMDAwMTsgLy8gUm91Z2hseSAxLzEwMDB0aCBvZiBhIGRlZ3JlZSwgc2VlIGJlbG93XHJcbiAgICB2YXIgdHdvUGkgPSBNYXRoLlBJICogMjtcclxuICAgIHZhciBoYWxmUGkgPSBNYXRoLlBJIC8gMi4wO1xyXG5cclxuICAgIHdoaWxlIChzdGFydEFuZ2xlID4gZW5kQW5nbGUpIHtcclxuICAgICAgc3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGUgLSB0d29QaTtcclxuICAgIH1cclxuICAgIHZhciB0b3RhbEFuZ2xlID0gTWF0aC5hYnMoZW5kQW5nbGUgLSBzdGFydEFuZ2xlKTtcclxuICAgIGlmICh0b3RhbEFuZ2xlIDwgdHdvUGkpIHtcclxuICAgICAgaWYgKGFudGljbG9ja3dpc2UpIHtcclxuICAgICAgICB0b3RhbEFuZ2xlID0gdHdvUGkgLSB0b3RhbEFuZ2xlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29tcHV0ZSB0aGUgc2VxdWVuY2Ugb2YgYXJjIGN1cnZlcywgdXAgdG8gUEkvMiBhdCBhIHRpbWUuXHJcbiAgICB2YXIgY3VydmVzID0gW107XHJcblxyXG4gICAgLy8gY2xvY2t3aXNlIG9yIGNvdW50ZXJjbG9ja3dpc2VcclxuICAgIHZhciBzZ24gPSBhbnRpY2xvY2t3aXNlID8gLTEgOiArMTtcclxuXHJcbiAgICB2YXIgYTEgPSBzdGFydEFuZ2xlO1xyXG4gICAgZm9yICg7IHRvdGFsQW5nbGUgPiBFUFNJTE9OOyApIHtcclxuICAgICAgdmFyIHJlbWFpbiA9IHNnbiAqIE1hdGgubWluKHRvdGFsQW5nbGUsIGhhbGZQaSk7XHJcbiAgICAgIHZhciBhMiA9IGExICsgcmVtYWluO1xyXG4gICAgICBjdXJ2ZXMucHVzaChjcmVhdGVTbWFsbEFyYy5jYWxsKHRoaXMsIHJhZGl1cywgYTEsIGEyKSk7XHJcbiAgICAgIHRvdGFsQW5nbGUgLT0gTWF0aC5hYnMoYTIgLSBhMSk7XHJcbiAgICAgIGExID0gYTI7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGN1cnZlcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDdWJpYyBiZXppZXIgYXBwcm94aW1hdGlvbiBvZiBhIGNpcmN1bGFyIGFyYyBjZW50ZXJlZCBhdCB0aGUgb3JpZ2luLCBmcm9tIChyYWRpYW5zKSBhMSB0byBhMiwgd2hlcmUgYTItYTEgPCBwaS8yLiBUaGUgYXJjJ3MgcmFkaXVzIGlzIHIuXHJcbiAgICpcclxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGZvdXIgcG9pbnRzLCB3aGVyZSB4MSx5MSBhbmQgeDQseTQgYXJlIHRoZSBhcmMncyBlbmQgcG9pbnRzIGFuZCB4Mix5MiBhbmQgeDMseTMgYXJlIHRoZSBjdWJpYyBiZXppZXIncyBjb250cm9sIHBvaW50cy5cclxuICAgKlxyXG4gICAqIFRoaXMgYWxnb3JpdGhtIGlzIGJhc2VkIG9uIHRoZSBhcHByb2FjaCBkZXNjcmliZWQgaW46IEEuIFJpxaFrdXMsIFwiQXBwcm94aW1hdGlvbiBvZiBhIEN1YmljIEJlemllciBDdXJ2ZSBieSBDaXJjdWxhciBBcmNzIGFuZCBWaWNlIFZlcnNhLFwiIEluZm9ybWF0aW9uIFRlY2hub2xvZ3kgYW5kIENvbnRyb2wsIDM1KDQpLCAyMDA2IHBwLiAzNzEtMzc4LlxyXG4gICAqL1xyXG4gIHZhciBjcmVhdGVTbWFsbEFyYyA9IGZ1bmN0aW9uKHIsIGExLCBhMikge1xyXG4gICAgdmFyIGEgPSAoYTIgLSBhMSkgLyAyLjA7XHJcblxyXG4gICAgdmFyIHg0ID0gciAqIE1hdGguY29zKGEpO1xyXG4gICAgdmFyIHk0ID0gciAqIE1hdGguc2luKGEpO1xyXG4gICAgdmFyIHgxID0geDQ7XHJcbiAgICB2YXIgeTEgPSAteTQ7XHJcblxyXG4gICAgdmFyIHExID0geDEgKiB4MSArIHkxICogeTE7XHJcbiAgICB2YXIgcTIgPSBxMSArIHgxICogeDQgKyB5MSAqIHk0O1xyXG4gICAgdmFyIGsyID0gKCg0IC8gMykgKiAoTWF0aC5zcXJ0KDIgKiBxMSAqIHEyKSAtIHEyKSkgLyAoeDEgKiB5NCAtIHkxICogeDQpO1xyXG5cclxuICAgIHZhciB4MiA9IHgxIC0gazIgKiB5MTtcclxuICAgIHZhciB5MiA9IHkxICsgazIgKiB4MTtcclxuICAgIHZhciB4MyA9IHgyO1xyXG4gICAgdmFyIHkzID0gLXkyO1xyXG5cclxuICAgIHZhciBhciA9IGEgKyBhMTtcclxuICAgIHZhciBjb3NfYXIgPSBNYXRoLmNvcyhhcik7XHJcbiAgICB2YXIgc2luX2FyID0gTWF0aC5zaW4oYXIpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHgxOiByICogTWF0aC5jb3MoYTEpLFxyXG4gICAgICB5MTogciAqIE1hdGguc2luKGExKSxcclxuICAgICAgeDI6IHgyICogY29zX2FyIC0geTIgKiBzaW5fYXIsXHJcbiAgICAgIHkyOiB4MiAqIHNpbl9hciArIHkyICogY29zX2FyLFxyXG4gICAgICB4MzogeDMgKiBjb3NfYXIgLSB5MyAqIHNpbl9hcixcclxuICAgICAgeTM6IHgzICogc2luX2FyICsgeTMgKiBjb3NfYXIsXHJcbiAgICAgIHg0OiByICogTWF0aC5jb3MoYTIpLFxyXG4gICAgICB5NDogciAqIE1hdGguc2luKGEyKVxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICB2YXIgcmFkMmRlZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gKHZhbHVlICogMTgwKSAvIE1hdGguUEk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldFF1YWRyYXRpY0N1cnZlQm91bmRhcnkgPSBmdW5jdGlvbihzeCwgc3ksIGNweCwgY3B5LCBleCwgZXkpIHtcclxuICAgIHZhciBtaWRYMSA9IHN4ICsgKGNweCAtIHN4KSAqIDAuNTtcclxuICAgIHZhciBtaWRZMSA9IHN5ICsgKGNweSAtIHN5KSAqIDAuNTtcclxuICAgIHZhciBtaWRYMiA9IGV4ICsgKGNweCAtIGV4KSAqIDAuNTtcclxuICAgIHZhciBtaWRZMiA9IGV5ICsgKGNweSAtIGV5KSAqIDAuNTtcclxuICAgIHZhciByZXN1bHRYMSA9IE1hdGgubWluKHN4LCBleCwgbWlkWDEsIG1pZFgyKTtcclxuICAgIHZhciByZXN1bHRYMiA9IE1hdGgubWF4KHN4LCBleCwgbWlkWDEsIG1pZFgyKTtcclxuICAgIHZhciByZXN1bHRZMSA9IE1hdGgubWluKHN5LCBleSwgbWlkWTEsIG1pZFkyKTtcclxuICAgIHZhciByZXN1bHRZMiA9IE1hdGgubWF4KHN5LCBleSwgbWlkWTEsIG1pZFkyKTtcclxuICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlKFxyXG4gICAgICByZXN1bHRYMSxcclxuICAgICAgcmVzdWx0WTEsXHJcbiAgICAgIHJlc3VsdFgyIC0gcmVzdWx0WDEsXHJcbiAgICAgIHJlc3VsdFkyIC0gcmVzdWx0WTFcclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgLy9EZSBDYXN0ZWxqYXUgYWxnb3JpdGhtXHJcbiAgdmFyIGdldEJlemllckN1cnZlQm91bmRhcnkgPSBmdW5jdGlvbihheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBkeCwgZHkpIHtcclxuICAgIHZhciB0b2J4ID0gYnggLSBheDtcclxuICAgIHZhciB0b2J5ID0gYnkgLSBheTtcclxuICAgIHZhciB0b2N4ID0gY3ggLSBieDtcclxuICAgIHZhciB0b2N5ID0gY3kgLSBieTtcclxuICAgIHZhciB0b2R4ID0gZHggLSBjeDtcclxuICAgIHZhciB0b2R5ID0gZHkgLSBjeTtcclxuICAgIHZhciBwcmVjaXNpb24gPSA0MDtcclxuICAgIHZhciBkLFxyXG4gICAgICBpLFxyXG4gICAgICBweCxcclxuICAgICAgcHksXHJcbiAgICAgIHF4LFxyXG4gICAgICBxeSxcclxuICAgICAgcngsXHJcbiAgICAgIHJ5LFxyXG4gICAgICB0eCxcclxuICAgICAgdHksXHJcbiAgICAgIHN4LFxyXG4gICAgICBzeSxcclxuICAgICAgeCxcclxuICAgICAgeSxcclxuICAgICAgbWlueCxcclxuICAgICAgbWlueSxcclxuICAgICAgbWF4eCxcclxuICAgICAgbWF4eSxcclxuICAgICAgdG9xeCxcclxuICAgICAgdG9xeSxcclxuICAgICAgdG9yeCxcclxuICAgICAgdG9yeSxcclxuICAgICAgdG90eCxcclxuICAgICAgdG90eTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBwcmVjaXNpb24gKyAxOyBpKyspIHtcclxuICAgICAgZCA9IGkgLyBwcmVjaXNpb247XHJcbiAgICAgIHB4ID0gYXggKyBkICogdG9ieDtcclxuICAgICAgcHkgPSBheSArIGQgKiB0b2J5O1xyXG4gICAgICBxeCA9IGJ4ICsgZCAqIHRvY3g7XHJcbiAgICAgIHF5ID0gYnkgKyBkICogdG9jeTtcclxuICAgICAgcnggPSBjeCArIGQgKiB0b2R4O1xyXG4gICAgICByeSA9IGN5ICsgZCAqIHRvZHk7XHJcbiAgICAgIHRvcXggPSBxeCAtIHB4O1xyXG4gICAgICB0b3F5ID0gcXkgLSBweTtcclxuICAgICAgdG9yeCA9IHJ4IC0gcXg7XHJcbiAgICAgIHRvcnkgPSByeSAtIHF5O1xyXG5cclxuICAgICAgc3ggPSBweCArIGQgKiB0b3F4O1xyXG4gICAgICBzeSA9IHB5ICsgZCAqIHRvcXk7XHJcbiAgICAgIHR4ID0gcXggKyBkICogdG9yeDtcclxuICAgICAgdHkgPSBxeSArIGQgKiB0b3J5O1xyXG4gICAgICB0b3R4ID0gdHggLSBzeDtcclxuICAgICAgdG90eSA9IHR5IC0gc3k7XHJcblxyXG4gICAgICB4ID0gc3ggKyBkICogdG90eDtcclxuICAgICAgeSA9IHN5ICsgZCAqIHRvdHk7XHJcbiAgICAgIGlmIChpID09IDApIHtcclxuICAgICAgICBtaW54ID0geDtcclxuICAgICAgICBtaW55ID0geTtcclxuICAgICAgICBtYXh4ID0geDtcclxuICAgICAgICBtYXh5ID0geTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtaW54ID0gTWF0aC5taW4obWlueCwgeCk7XHJcbiAgICAgICAgbWlueSA9IE1hdGgubWluKG1pbnksIHkpO1xyXG4gICAgICAgIG1heHggPSBNYXRoLm1heChtYXh4LCB4KTtcclxuICAgICAgICBtYXh5ID0gTWF0aC5tYXgobWF4eSwgeSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlKFxyXG4gICAgICBNYXRoLnJvdW5kKG1pbngpLFxyXG4gICAgICBNYXRoLnJvdW5kKG1pbnkpLFxyXG4gICAgICBNYXRoLnJvdW5kKG1heHggLSBtaW54KSxcclxuICAgICAgTWF0aC5yb3VuZChtYXh5IC0gbWlueSlcclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldFByZXZMaW5lRGFzaFZhbHVlID0gZnVuY3Rpb24obGluZURhc2gsIGxpbmVEYXNoT2Zmc2V0KSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBsaW5lRGFzaDogbGluZURhc2gsXHJcbiAgICAgIGxpbmVEYXNoT2Zmc2V0OiBsaW5lRGFzaE9mZnNldFxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHNldExpbmVEYXNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBBdm9pZCB1bm5lY2Vzc2FyeSBsaW5lIGRhc2ggZGVjbGFyYXRpb25zLlxyXG4gICAgaWYgKFxyXG4gICAgICAhdGhpcy5wcmV2TGluZURhc2ggJiZcclxuICAgICAgIXRoaXMuY3R4LmxpbmVEYXNoLmxlbmd0aCAmJlxyXG4gICAgICAhdGhpcy5jdHgubGluZURhc2hPZmZzZXRcclxuICAgICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXZvaWQgdW5uZWNlc3NhcnkgbGluZSBkYXNoIGRlY2xhcmF0aW9ucy5cclxuICAgIGNvbnN0IG5leHRMaW5lRGFzaCA9IGdldFByZXZMaW5lRGFzaFZhbHVlKFxyXG4gICAgICB0aGlzLmN0eC5saW5lRGFzaCxcclxuICAgICAgdGhpcy5jdHgubGluZURhc2hPZmZzZXRcclxuICAgICk7XHJcbiAgICBpZiAodGhpcy5wcmV2TGluZURhc2ggIT09IG5leHRMaW5lRGFzaCkge1xyXG4gICAgICB0aGlzLnBkZi5zZXRMaW5lRGFzaCh0aGlzLmN0eC5saW5lRGFzaCwgdGhpcy5jdHgubGluZURhc2hPZmZzZXQpO1xyXG4gICAgICB0aGlzLnByZXZMaW5lRGFzaCA9IG5leHRMaW5lRGFzaDtcclxuICAgIH1cclxuICB9O1xyXG59KShqc1BERi5BUEkpO1xyXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBqc1BERiBmaWx0ZXJzIFBsdWdJblxuICogQ29weXJpZ2h0IChjKSAyMDE0IEFyYXMgQWJiYXNpXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcbmltcG9ydCB7IHpsaWJTeW5jIH0gZnJvbSBcIi4uL2xpYnMvZmZsYXRlLmpzXCI7XG5cbihmdW5jdGlvbihqc1BERkFQSSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgQVNDSUk4NUVuY29kZSA9IGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgYiwgYywgZCwgZSwgZiwgZywgaCwgaSwgaiwgaztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIGZvciAoXG4gICAgICAhL1teXFx4MDAtXFx4RkZdLy50ZXN0KGEpLFxuICAgICAgICBiID0gXCJcXHgwMFxceDAwXFx4MDBcXHgwMFwiLnNsaWNlKGEubGVuZ3RoICUgNCB8fCA0KSxcbiAgICAgICAgYSArPSBiLFxuICAgICAgICBjID0gW10sXG4gICAgICAgIGQgPSAwLFxuICAgICAgICBlID0gYS5sZW5ndGg7XG4gICAgICBlID4gZDtcbiAgICAgIGQgKz0gNFxuICAgIClcbiAgICAgIChmID1cbiAgICAgICAgKGEuY2hhckNvZGVBdChkKSA8PCAyNCkgK1xuICAgICAgICAoYS5jaGFyQ29kZUF0KGQgKyAxKSA8PCAxNikgK1xuICAgICAgICAoYS5jaGFyQ29kZUF0KGQgKyAyKSA8PCA4KSArXG4gICAgICAgIGEuY2hhckNvZGVBdChkICsgMykpLFxuICAgICAgICAwICE9PSBmXG4gICAgICAgICAgPyAoKGsgPSBmICUgODUpLFxuICAgICAgICAgICAgKGYgPSAoZiAtIGspIC8gODUpLFxuICAgICAgICAgICAgKGogPSBmICUgODUpLFxuICAgICAgICAgICAgKGYgPSAoZiAtIGopIC8gODUpLFxuICAgICAgICAgICAgKGkgPSBmICUgODUpLFxuICAgICAgICAgICAgKGYgPSAoZiAtIGkpIC8gODUpLFxuICAgICAgICAgICAgKGggPSBmICUgODUpLFxuICAgICAgICAgICAgKGYgPSAoZiAtIGgpIC8gODUpLFxuICAgICAgICAgICAgKGcgPSBmICUgODUpLFxuICAgICAgICAgICAgYy5wdXNoKGcgKyAzMywgaCArIDMzLCBpICsgMzMsIGogKyAzMywgayArIDMzKSlcbiAgICAgICAgICA6IGMucHVzaCgxMjIpO1xuICAgIHJldHVybiAoXG4gICAgICAoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICBmb3IgKHZhciBjID0gYjsgYyA+IDA7IGMtLSkgYS5wb3AoKTtcbiAgICAgIH0pKGMsIGIubGVuZ3RoKSxcbiAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjKSArIFwifj5cIlxuICAgICk7XG4gIH07XG5cbiAgdmFyIEFTQ0lJODVEZWNvZGUgPSBmdW5jdGlvbihhKSB7XG4gICAgdmFyIGMsXG4gICAgICBkLFxuICAgICAgZSxcbiAgICAgIGYsXG4gICAgICBnLFxuICAgICAgaCA9IFN0cmluZyxcbiAgICAgIGwgPSBcImxlbmd0aFwiLFxuICAgICAgdyA9IDI1NSxcbiAgICAgIHggPSBcImNoYXJDb2RlQXRcIixcbiAgICAgIHkgPSBcInNsaWNlXCIsXG4gICAgICB6ID0gXCJyZXBsYWNlXCI7XG4gICAgZm9yIChcbiAgICAgIFwifj5cIiA9PT0gYVt5XSgtMiksXG4gICAgICAgIGEgPSBhW3ldKDAsIC0yKVxuICAgICAgICAgIFt6XSgvXFxzL2csIFwiXCIpXG4gICAgICAgICAgW3pdKFwielwiLCBcIiEhISEhXCIpLFxuICAgICAgICBjID0gXCJ1dXV1dVwiW3ldKGFbbF0gJSA1IHx8IDUpLFxuICAgICAgICBhICs9IGMsXG4gICAgICAgIGUgPSBbXSxcbiAgICAgICAgZiA9IDAsXG4gICAgICAgIGcgPSBhW2xdO1xuICAgICAgZyA+IGY7XG4gICAgICBmICs9IDVcbiAgICApXG4gICAgICAoZCA9XG4gICAgICAgIDUyMjAwNjI1ICogKGFbeF0oZikgLSAzMykgK1xuICAgICAgICA2MTQxMjUgKiAoYVt4XShmICsgMSkgLSAzMykgK1xuICAgICAgICA3MjI1ICogKGFbeF0oZiArIDIpIC0gMzMpICtcbiAgICAgICAgODUgKiAoYVt4XShmICsgMykgLSAzMykgK1xuICAgICAgICAoYVt4XShmICsgNCkgLSAzMykpLFxuICAgICAgICBlLnB1c2godyAmIChkID4+IDI0KSwgdyAmIChkID4+IDE2KSwgdyAmIChkID4+IDgpLCB3ICYgZCk7XG4gICAgcmV0dXJuIChcbiAgICAgIChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgIGZvciAodmFyIGMgPSBiOyBjID4gMDsgYy0tKSBhLnBvcCgpO1xuICAgICAgfSkoZSwgY1tsXSksXG4gICAgICBoLmZyb21DaGFyQ29kZS5hcHBseShoLCBlKVxuICAgICk7XG4gIH07XG5cbiAgdmFyIEFTQ0lJSGV4RW5jb2RlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdmFsdWVcbiAgICAgICAgLnNwbGl0KFwiXCIpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gKFwiMFwiICsgdmFsdWUuY2hhckNvZGVBdCgpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbihcIlwiKSArIFwiPlwiXG4gICAgKTtcbiAgfTtcblxuICB2YXIgQVNDSUlIZXhEZWNvZGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZWdleENoZWNrSWZIZXggPSBuZXcgUmVnRXhwKC9eKFswLTlBLUZhLWZdezJ9KSskLyk7XG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHMvZywgXCJcIik7XG4gICAgaWYgKHZhbHVlLmluZGV4T2YoXCI+XCIpICE9PSAtMSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHIoMCwgdmFsdWUuaW5kZXhPZihcIj5cIikpO1xuICAgIH1cbiAgICBpZiAodmFsdWUubGVuZ3RoICUgMikge1xuICAgICAgdmFsdWUgKz0gXCIwXCI7XG4gICAgfVxuICAgIGlmIChyZWdleENoZWNrSWZIZXgudGVzdCh2YWx1ZSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIweFwiICsgKHZhbHVlW2ldICsgdmFsdWVbaSArIDFdKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIC8qXG4gIHZhciBGbGF0ZVByZWRpY3RvcnMgPSB7XG4gICAgICBOb25lOiAxLFxuICAgICAgVElGRjogMixcbiAgICAgIFBOR19Ob25lOiAxMCxcbiAgICAgIFBOR19TdWI6IDExLFxuICAgICAgUE5HX1VwOiAxMixcbiAgICAgIFBOR19BdmVyYWdlOiAxMyxcbiAgICAgIFBOR19QYWV0aDogMTQsXG4gICAgICBQTkdfT3B0aW11bTogMTVcbiAgfTtcbiAgKi9cblxuICB2YXIgRmxhdGVFbmNvZGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICB2YXIgaSA9IGRhdGEubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFycltpXSA9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgYXJyID0gemxpYlN5bmMoYXJyKTtcbiAgICBkYXRhID0gYXJyLnJlZHVjZShmdW5jdGlvbihkYXRhLCBieXRlKSB7XG4gICAgICByZXR1cm4gZGF0YSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSk7XG4gICAgfSwgXCJcIik7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAganNQREZBUEkucHJvY2Vzc0RhdGFCeUZpbHRlcnMgPSBmdW5jdGlvbihvcmlnRGF0YSwgZmlsdGVyQ2hhaW4pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGRhdGEgPSBvcmlnRGF0YSB8fCBcIlwiO1xuICAgIHZhciByZXZlcnNlQ2hhaW4gPSBbXTtcbiAgICBmaWx0ZXJDaGFpbiA9IGZpbHRlckNoYWluIHx8IFtdO1xuXG4gICAgaWYgKHR5cGVvZiBmaWx0ZXJDaGFpbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZmlsdGVyQ2hhaW4gPSBbZmlsdGVyQ2hhaW5dO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBmaWx0ZXJDaGFpbi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgc3dpdGNoIChmaWx0ZXJDaGFpbltpXSkge1xuICAgICAgICBjYXNlIFwiQVNDSUk4NURlY29kZVwiOlxuICAgICAgICBjYXNlIFwiL0FTQ0lJODVEZWNvZGVcIjpcbiAgICAgICAgICBkYXRhID0gQVNDSUk4NURlY29kZShkYXRhKTtcbiAgICAgICAgICByZXZlcnNlQ2hhaW4ucHVzaChcIi9BU0NJSTg1RW5jb2RlXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQVNDSUk4NUVuY29kZVwiOlxuICAgICAgICBjYXNlIFwiL0FTQ0lJODVFbmNvZGVcIjpcbiAgICAgICAgICBkYXRhID0gQVNDSUk4NUVuY29kZShkYXRhKTtcbiAgICAgICAgICByZXZlcnNlQ2hhaW4ucHVzaChcIi9BU0NJSTg1RGVjb2RlXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQVNDSUlIZXhEZWNvZGVcIjpcbiAgICAgICAgY2FzZSBcIi9BU0NJSUhleERlY29kZVwiOlxuICAgICAgICAgIGRhdGEgPSBBU0NJSUhleERlY29kZShkYXRhKTtcbiAgICAgICAgICByZXZlcnNlQ2hhaW4ucHVzaChcIi9BU0NJSUhleEVuY29kZVwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFTQ0lJSGV4RW5jb2RlXCI6XG4gICAgICAgIGNhc2UgXCIvQVNDSUlIZXhFbmNvZGVcIjpcbiAgICAgICAgICBkYXRhID0gQVNDSUlIZXhFbmNvZGUoZGF0YSk7XG4gICAgICAgICAgcmV2ZXJzZUNoYWluLnB1c2goXCIvQVNDSUlIZXhEZWNvZGVcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJGbGF0ZUVuY29kZVwiOlxuICAgICAgICBjYXNlIFwiL0ZsYXRlRW5jb2RlXCI6XG4gICAgICAgICAgZGF0YSA9IEZsYXRlRW5jb2RlKGRhdGEpO1xuICAgICAgICAgIHJldmVyc2VDaGFpbi5wdXNoKFwiL0ZsYXRlRGVjb2RlXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdUaGUgZmlsdGVyOiBcIicgKyBmaWx0ZXJDaGFpbltpXSArICdcIiBpcyBub3QgaW1wbGVtZW50ZWQnXG4gICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBkYXRhOiBkYXRhLCByZXZlcnNlQ2hhaW46IHJldmVyc2VDaGFpbi5yZXZlcnNlKCkuam9pbihcIiBcIikgfTtcbiAgfTtcbn0pKGpzUERGLkFQSSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBqc1BERiBmaWxlbG9hZGluZyBQbHVnSW5cbiAqIENvcHlyaWdodCAoYykgMjAxOCBBcmFzIEFiYmFzaSAoYXJhcy5hYmJhc2lAZ21haWwuY29tKVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgZmlsZWxvYWRpbmdcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qKlxuICAgKiBAbmFtZSBsb2FkRmlsZVxuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN5bmNcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IHJlc3VsdFxuICAgKi9cbiAganNQREZBUEkubG9hZEZpbGUgPSBmdW5jdGlvbih1cmwsIHN5bmMsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGJyb3dzZXJSZXF1ZXN0KHVybCwgc3luYywgY2FsbGJhY2spO1xuXG4gIH07XG5cbiAgLyoqXG4gICAqIEBuYW1lIGxvYWRJbWFnZUZpbGVcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3luY1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAganNQREZBUEkubG9hZEltYWdlRmlsZSA9IGpzUERGQVBJLmxvYWRGaWxlO1xuXG4gIGZ1bmN0aW9uIGJyb3dzZXJSZXF1ZXN0KHVybCwgc3luYywgY2FsbGJhY2spIHtcbiAgICBzeW5jID0gc3luYyA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gICAgY2FsbGJhY2sgPSB0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIiA/IGNhbGxiYWNrIDogZnVuY3Rpb24oKSB7fTtcbiAgICB2YXIgcmVzdWx0ID0gdW5kZWZpbmVkO1xuXG4gICAgdmFyIHhociA9IGZ1bmN0aW9uKHVybCwgc3luYywgY2FsbGJhY2spIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIHZhciBzYW5pdGl6ZVVuaWNvZGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICAgIHZhciBjaGFyQXJyYXkgPSBbXTtcbiAgICAgICAgdmFyIFN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG5cbiAgICAgICAgLy9UcmFuc2Zvcm0gVW5pY29kZSB0byBBU0NJSVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY2hhckFycmF5LnB1c2goU3RyaW5nRnJvbUNoYXJDb2RlKGRhdGEuY2hhckNvZGVBdChpKSAmIDB4ZmYpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhckFycmF5LmpvaW4oXCJcIik7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgdXJsLCAhc3luYyk7XG4gICAgICAvLyBYSFIgYmluYXJ5IGNoYXJzZXQgb3B0IGJ5IE1hcmN1cyBHcmFuYWRvIDIwMDYgW2h0dHA6Ly9tZ3Jhbi5ibG9nc3BvdC5jb21dXG4gICAgICByZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUoXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkXCIpO1xuXG4gICAgICBpZiAoc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgY2FsbGJhY2soc2FuaXRpemVVbmljb2RlKHRoaXMucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmVxdWVzdC5zZW5kKG51bGwpO1xuXG4gICAgICBpZiAoc3luYyAmJiByZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIHJldHVybiBzYW5pdGl6ZVVuaWNvZGUocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgfVxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IHhocih1cmwsIHN5bmMsIGNhbGxiYWNrKTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vZGVSZWFkRmlsZSh1cmwsIHN5bmMsIGNhbGxiYWNrKSB7XG4gICAgc3luYyA9IHN5bmMgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlO1xuICAgIHZhciByZXN1bHQgPSB1bmRlZmluZWQ7XG5cbiAgICB2YXIgZnMgPSByZXF1aXJlKFwiZnNcIik7XG4gICAgdmFyIHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcblxuICAgIHVybCA9IHBhdGgucmVzb2x2ZSh1cmwpO1xuICAgIGlmIChzeW5jKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBmcy5yZWFkRmlsZVN5bmModXJsLCB7IGVuY29kaW5nOiBcImxhdGluMVwiIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmcy5yZWFkRmlsZSh1cmwsIHsgZW5jb2Rpbmc6IFwibGF0aW4xXCIgfSwgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KShqc1BERi5BUEkpO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE4IEVyaWsgS29vcG1hbnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiAqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplRm9udEZhY2UgfSBmcm9tIFwiLi4vbGlicy9mb250RmFjZS5qc1wiO1xuaW1wb3J0IHsgZ2xvYmFsT2JqZWN0IH0gZnJvbSBcIi4uL2xpYnMvZ2xvYmFsT2JqZWN0LmpzXCI7XG5cbi8qKlxuICoganNQREYgaHRtbCBQbHVnSW5cbiAqXG4gKiBAbmFtZSBodG1sXG4gKiBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbihqc1BERkFQSSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBmdW5jdGlvbiBsb2FkSHRtbDJDYW52YXMoKSB7XG4gICAgcmV0dXJuIChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChnbG9iYWxPYmplY3RbXCJodG1sMmNhbnZhc1wiXSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGdsb2JhbE9iamVjdFtcImh0bWwyY2FudmFzXCJdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGltcG9ydChcImh0bWwyY2FudmFzXCIpO1xuXG4gICAgfSkoKVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkNvdWxkIG5vdCBsb2FkIGh0bWwyY2FudmFzOiBcIiArIGUpKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbihodG1sMmNhbnZhcykge1xuICAgICAgICByZXR1cm4gaHRtbDJjYW52YXMuZGVmYXVsdCA/IGh0bWwyY2FudmFzLmRlZmF1bHQgOiBodG1sMmNhbnZhcztcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9hZERvbVB1cmlmeSgpIHtcbiAgICByZXR1cm4gKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGdsb2JhbE9iamVjdFtcIkRPTVB1cmlmeVwiXSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGdsb2JhbE9iamVjdFtcIkRPTVB1cmlmeVwiXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbXBvcnQoXCJkb21wdXJpZnlcIik7XG5cbiAgICB9KSgpXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiQ291bGQgbm90IGxvYWQgZG9tcHVyaWZ5OiBcIiArIGUpKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbihkb21wdXJpZnkpIHtcbiAgICAgICAgcmV0dXJuIGRvbXB1cmlmeS5kZWZhdWx0ID8gZG9tcHVyaWZ5LmRlZmF1bHQgOiBkb21wdXJpZnk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSB2YXJpYWJsZS9vYmplY3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHZhciBvYmpUeXBlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIGlmICh0eXBlID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN0cmluZ1wiIHx8IG9iaiBpbnN0YW5jZW9mIFN0cmluZykgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJudW1iZXJcIiB8fCBvYmogaW5zdGFuY2VvZiBOdW1iZXIpIHJldHVybiBcIm51bWJlclwiO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCBvYmogaW5zdGFuY2VvZiBGdW5jdGlvbikgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICBlbHNlIGlmICghIW9iaiAmJiBvYmouY29uc3RydWN0b3IgPT09IEFycmF5KSByZXR1cm4gXCJhcnJheVwiO1xuICAgIGVsc2UgaWYgKG9iaiAmJiBvYmoubm9kZVR5cGUgPT09IDEpIHJldHVybiBcImVsZW1lbnRcIjtcbiAgICBlbHNlIGlmICh0eXBlID09PSBcIm9iamVjdFwiKSByZXR1cm4gXCJvYmplY3RcIjtcbiAgICBlbHNlIHJldHVybiBcInVua25vd25cIjtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIEhUTUwgZWxlbWVudCB3aXRoIG9wdGlvbmFsIGNsYXNzTmFtZSwgaW5uZXJIVE1MLCBhbmQgc3R5bGUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHZhciBjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24odGFnTmFtZSwgb3B0KSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgICBpZiAob3B0LmNsYXNzTmFtZSkgZWwuY2xhc3NOYW1lID0gb3B0LmNsYXNzTmFtZTtcbiAgICBpZiAob3B0LmlubmVySFRNTCAmJiBvcHQuZG9tcHVyaWZ5KSB7XG4gICAgICBlbC5pbm5lckhUTUwgPSBvcHQuZG9tcHVyaWZ5LnNhbml0aXplKG9wdC5pbm5lckhUTUwpO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gb3B0LnN0eWxlKSB7XG4gICAgICBlbC5zdHlsZVtrZXldID0gb3B0LnN0eWxlW2tleV07XG4gICAgfVxuICAgIHJldHVybiBlbDtcbiAgfTtcblxuICAvKipcbiAgICogRGVlcC1jbG9uZSBhIG5vZGUgYW5kIHByZXNlcnZlIGNvbnRlbnRzL3Byb3BlcnRpZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHZhciBjbG9uZU5vZGUgPSBmdW5jdGlvbihub2RlLCBqYXZhc2NyaXB0RW5hYmxlZCkge1xuICAgIC8vIFJlY3Vyc2l2ZWx5IGNsb25lIHRoZSBub2RlLlxuICAgIHZhciBjbG9uZSA9XG4gICAgICBub2RlLm5vZGVUeXBlID09PSAzXG4gICAgICAgID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobm9kZS5ub2RlVmFsdWUpXG4gICAgICAgIDogbm9kZS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgIGZvciAodmFyIGNoaWxkID0gbm9kZS5maXJzdENoaWxkOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZykge1xuICAgICAgaWYgKFxuICAgICAgICBqYXZhc2NyaXB0RW5hYmxlZCA9PT0gdHJ1ZSB8fFxuICAgICAgICBjaGlsZC5ub2RlVHlwZSAhPT0gMSB8fFxuICAgICAgICBjaGlsZC5ub2RlTmFtZSAhPT0gXCJTQ1JJUFRcIlxuICAgICAgKSB7XG4gICAgICAgIGNsb25lLmFwcGVuZENoaWxkKGNsb25lTm9kZShjaGlsZCwgamF2YXNjcmlwdEVuYWJsZWQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgLy8gUHJlc2VydmUgY29udGVudHMvcHJvcGVydGllcyBvZiBzcGVjaWFsIG5vZGVzLlxuICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT09IFwiQ0FOVkFTXCIpIHtcbiAgICAgICAgY2xvbmUud2lkdGggPSBub2RlLndpZHRoO1xuICAgICAgICBjbG9uZS5oZWlnaHQgPSBub2RlLmhlaWdodDtcbiAgICAgICAgY2xvbmUuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShub2RlLCAwLCAwKTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlTmFtZSA9PT0gXCJURVhUQVJFQVwiIHx8IG5vZGUubm9kZU5hbWUgPT09IFwiU0VMRUNUXCIpIHtcbiAgICAgICAgY2xvbmUudmFsdWUgPSBub2RlLnZhbHVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVzZXJ2ZSB0aGUgbm9kZSdzIHNjcm9sbCBwb3NpdGlvbiB3aGVuIGl0IGxvYWRzLlxuICAgICAgY2xvbmUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJsb2FkXCIsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNsb25lLnNjcm9sbFRvcCA9IG5vZGUuc2Nyb2xsVG9wO1xuICAgICAgICAgIGNsb25lLnNjcm9sbExlZnQgPSBub2RlLnNjcm9sbExlZnQ7XG4gICAgICAgIH0sXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBjbG9uZWQgbm9kZS5cbiAgICByZXR1cm4gY2xvbmU7XG4gIH07XG5cbiAgLyogLS0tLS0gQ09OU1RSVUNUT1IgLS0tLS0gKi9cblxuICB2YXIgV29ya2VyID0gZnVuY3Rpb24gV29ya2VyKG9wdCkge1xuICAgIC8vIENyZWF0ZSB0aGUgcm9vdCBwYXJlbnQgZm9yIHRoZSBwcm90byBjaGFpbiwgYW5kIHRoZSBzdGFydGluZyBXb3JrZXIuXG4gICAgdmFyIHJvb3QgPSBPYmplY3QuYXNzaWduKFxuICAgICAgV29ya2VyLmNvbnZlcnQoUHJvbWlzZS5yZXNvbHZlKCkpLFxuICAgICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShXb3JrZXIudGVtcGxhdGUpKVxuICAgICk7XG4gICAgdmFyIHNlbGYgPSBXb3JrZXIuY29udmVydChQcm9taXNlLnJlc29sdmUoKSwgcm9vdCk7XG5cbiAgICAvLyBTZXQgcHJvZ3Jlc3MsIG9wdGlvbmFsIHNldHRpbmdzLCBhbmQgcmV0dXJuLlxuICAgIHNlbGYgPSBzZWxmLnNldFByb2dyZXNzKDEsIFdvcmtlciwgMSwgW1dvcmtlcl0pO1xuICAgIHNlbGYgPSBzZWxmLnNldChvcHQpO1xuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIEJvaWxlcnBsYXRlIGZvciBzdWJjbGFzc2luZyBQcm9taXNlLlxuICBXb3JrZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQcm9taXNlLnByb3RvdHlwZSk7XG4gIFdvcmtlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBXb3JrZXI7XG5cbiAgLy8gQ29udmVydHMvY2FzdHMgcHJvbWlzZXMgaW50byBXb3JrZXJzLlxuICBXb3JrZXIuY29udmVydCA9IGZ1bmN0aW9uIGNvbnZlcnQocHJvbWlzZSwgaW5oZXJpdCkge1xuICAgIC8vIFVzZXMgcHJvdG90eXBhbCBpbmhlcml0YW5jZSB0byByZWNlaXZlIGNoYW5nZXMgbWFkZSB0byBhbmNlc3RvcnMnIHByb3BlcnRpZXMuXG4gICAgcHJvbWlzZS5fX3Byb3RvX18gPSBpbmhlcml0IHx8IFdvcmtlci5wcm90b3R5cGU7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG5cbiAgV29ya2VyLnRlbXBsYXRlID0ge1xuICAgIHByb3A6IHtcbiAgICAgIHNyYzogbnVsbCxcbiAgICAgIGNvbnRhaW5lcjogbnVsbCxcbiAgICAgIG92ZXJsYXk6IG51bGwsXG4gICAgICBjYW52YXM6IG51bGwsXG4gICAgICBpbWc6IG51bGwsXG4gICAgICBwZGY6IG51bGwsXG4gICAgICBwYWdlU2l6ZTogbnVsbCxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpIHt9XG4gICAgfSxcbiAgICBwcm9ncmVzczoge1xuICAgICAgdmFsOiAwLFxuICAgICAgc3RhdGU6IG51bGwsXG4gICAgICBuOiAwLFxuICAgICAgc3RhY2s6IFtdXG4gICAgfSxcbiAgICBvcHQ6IHtcbiAgICAgIGZpbGVuYW1lOiBcImZpbGUucGRmXCIsXG4gICAgICBtYXJnaW46IFswLCAwLCAwLCAwXSxcbiAgICAgIGVuYWJsZUxpbmtzOiB0cnVlLFxuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBodG1sMmNhbnZhczoge30sXG4gICAgICBqc1BERjoge30sXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIlxuICAgIH1cbiAgfTtcblxuICAvKiAtLS0tLSBGUk9NIC8gVE8gLS0tLS0gKi9cblxuICBXb3JrZXIucHJvdG90eXBlLmZyb20gPSBmdW5jdGlvbiBmcm9tKHNyYywgdHlwZSkge1xuICAgIGZ1bmN0aW9uIGdldFR5cGUoc3JjKSB7XG4gICAgICBzd2l0Y2ggKG9ialR5cGUoc3JjKSkge1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIGNhc2UgXCJlbGVtZW50XCI6XG4gICAgICAgICAgcmV0dXJuIHNyYy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImNhbnZhc1wiID8gXCJjYW52YXNcIiA6IFwiZWxlbWVudFwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBcInVua25vd25cIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uIGZyb21fbWFpbigpIHtcbiAgICAgIHR5cGUgPSB0eXBlIHx8IGdldFR5cGUoc3JjKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihsb2FkRG9tUHVyaWZ5KS50aGVuKGZ1bmN0aW9uKGRvbXB1cmlmeSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0KHtcbiAgICAgICAgICAgICAgc3JjOiBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgICAgICBpbm5lckhUTUw6IHNyYyxcbiAgICAgICAgICAgICAgICBkb21wdXJpZnk6IGRvbXB1cmlmeVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgXCJlbGVtZW50XCI6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2V0KHsgc3JjOiBzcmMgfSk7XG4gICAgICAgIGNhc2UgXCJjYW52YXNcIjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZXQoeyBjYW52YXM6IHNyYyB9KTtcbiAgICAgICAgY2FzZSBcImltZ1wiOlxuICAgICAgICAgIHJldHVybiB0aGlzLnNldCh7IGltZzogc3JjIH0pO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0aGlzLmVycm9yKFwiVW5rbm93biBzb3VyY2UgdHlwZS5cIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgV29ya2VyLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uIHRvKHRhcmdldCkge1xuICAgIC8vIFJvdXRlIHRoZSAndG8nIHJlcXVlc3QgdG8gdGhlIGFwcHJvcHJpYXRlIG1ldGhvZC5cbiAgICBzd2l0Y2ggKHRhcmdldCkge1xuICAgICAgY2FzZSBcImNvbnRhaW5lclwiOlxuICAgICAgICByZXR1cm4gdGhpcy50b0NvbnRhaW5lcigpO1xuICAgICAgY2FzZSBcImNhbnZhc1wiOlxuICAgICAgICByZXR1cm4gdGhpcy50b0NhbnZhcygpO1xuICAgICAgY2FzZSBcImltZ1wiOlxuICAgICAgICByZXR1cm4gdGhpcy50b0ltZygpO1xuICAgICAgY2FzZSBcInBkZlwiOlxuICAgICAgICByZXR1cm4gdGhpcy50b1BkZigpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoXCJJbnZhbGlkIHRhcmdldC5cIik7XG4gICAgfVxuICB9O1xuXG4gIFdvcmtlci5wcm90b3R5cGUudG9Db250YWluZXIgPSBmdW5jdGlvbiB0b0NvbnRhaW5lcigpIHtcbiAgICAvLyBTZXQgdXAgZnVuY3Rpb24gcHJlcmVxdWlzaXRlcy5cbiAgICB2YXIgcHJlcmVxcyA9IFtcbiAgICAgIGZ1bmN0aW9uIGNoZWNrU3JjKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHRoaXMucHJvcC5zcmMgfHwgdGhpcy5lcnJvcihcIkNhbm5vdCBkdXBsaWNhdGUgLSBubyBzb3VyY2UgSFRNTC5cIilcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiBjaGVja1BhZ2VTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wLnBhZ2VTaXplIHx8IHRoaXMuc2V0UGFnZVNpemUoKTtcbiAgICAgIH1cbiAgICBdO1xuICAgIHJldHVybiB0aGlzLnRoZW5MaXN0KHByZXJlcXMpLnRoZW4oZnVuY3Rpb24gdG9Db250YWluZXJfbWFpbigpIHtcbiAgICAgIC8vIERlZmluZSB0aGUgQ1NTIHN0eWxlcyBmb3IgdGhlIGNvbnRhaW5lciBhbmQgaXRzIG92ZXJsYXkgcGFyZW50LlxuICAgICAgdmFyIG92ZXJsYXlDU1MgPSB7XG4gICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICB6SW5kZXg6IDEwMDAsXG4gICAgICAgIGxlZnQ6IFwiLTEwMDAwMHB4XCIsXG4gICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICBib3R0b206IDAsXG4gICAgICAgIHRvcDogMFxuICAgICAgfTtcbiAgICAgIHZhciBjb250YWluZXJDU1MgPSB7XG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgIHdpZHRoOlxuICAgICAgICAgICh0eXBlb2YgdGhpcy5vcHQud2lkdGggPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgICAhaXNOYU4odGhpcy5vcHQud2lkdGgpICYmXG4gICAgICAgICAgdHlwZW9mIHRoaXMub3B0LndpbmRvd1dpZHRoID09PSBcIm51bWJlclwiICYmXG4gICAgICAgICAgIWlzTmFOKHRoaXMub3B0LndpbmRvd1dpZHRoKVxuICAgICAgICAgICAgPyB0aGlzLm9wdC53aW5kb3dXaWR0aFxuICAgICAgICAgICAgOiBNYXRoLm1heChcbiAgICAgICAgICAgICAgICB0aGlzLnByb3Auc3JjLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcC5zcmMuc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wLnNyYy5vZmZzZXRXaWR0aFxuICAgICAgICAgICAgICApKSArIFwicHhcIixcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbWFyZ2luOiBcImF1dG9cIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLm9wdC5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgIH07IC8vIFNldCB0aGUgb3ZlcmxheSB0byBoaWRkZW4gKGNvdWxkIGJlIGNoYW5nZWQgaW4gdGhlIGZ1dHVyZSB0byBwcm92aWRlIGEgcHJpbnQgcHJldmlldykuXG5cbiAgICAgIHZhciBzb3VyY2UgPSBjbG9uZU5vZGUoXG4gICAgICAgIHRoaXMucHJvcC5zcmMsXG4gICAgICAgIHRoaXMub3B0Lmh0bWwyY2FudmFzLmphdmFzY3JpcHRFbmFibGVkXG4gICAgICApO1xuXG4gICAgICBpZiAoc291cmNlLnRhZ05hbWUgPT09IFwiQk9EWVwiKSB7XG4gICAgICAgIGNvbnRhaW5lckNTUy5oZWlnaHQgPVxuICAgICAgICAgIE1hdGgubWF4KFxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodFxuICAgICAgICAgICkgKyBcInB4XCI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJvcC5vdmVybGF5ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJodG1sMnBkZl9fb3ZlcmxheVwiLFxuICAgICAgICBzdHlsZTogb3ZlcmxheUNTU1xuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3AuY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJodG1sMnBkZl9fY29udGFpbmVyXCIsXG4gICAgICAgIHN0eWxlOiBjb250YWluZXJDU1NcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wcm9wLmNvbnRhaW5lci5hcHBlbmRDaGlsZChzb3VyY2UpO1xuICAgICAgdGhpcy5wcm9wLmNvbnRhaW5lci5maXJzdENoaWxkLmFwcGVuZENoaWxkKFxuICAgICAgICBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgY2xlYXI6IFwiYm90aFwiLFxuICAgICAgICAgICAgYm9yZGVyOiBcIjAgbm9uZSB0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgICAgIGhlaWdodDogMFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICB0aGlzLnByb3AuY29udGFpbmVyLnN0eWxlLmZsb2F0ID0gXCJub25lXCI7XG4gICAgICB0aGlzLnByb3Aub3ZlcmxheS5hcHBlbmRDaGlsZCh0aGlzLnByb3AuY29udGFpbmVyKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5wcm9wLm92ZXJsYXkpO1xuICAgICAgdGhpcy5wcm9wLmNvbnRhaW5lci5maXJzdENoaWxkLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuICAgICAgdGhpcy5wcm9wLmNvbnRhaW5lci5oZWlnaHQgPVxuICAgICAgICBNYXRoLm1heChcbiAgICAgICAgICB0aGlzLnByb3AuY29udGFpbmVyLmZpcnN0Q2hpbGQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgIHRoaXMucHJvcC5jb250YWluZXIuZmlyc3RDaGlsZC5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgdGhpcy5wcm9wLmNvbnRhaW5lci5maXJzdENoaWxkLm9mZnNldEhlaWdodFxuICAgICAgICApICsgXCJweFwiO1xuICAgIH0pO1xuICB9O1xuXG4gIFdvcmtlci5wcm90b3R5cGUudG9DYW52YXMgPSBmdW5jdGlvbiB0b0NhbnZhcygpIHtcbiAgICAvLyBTZXQgdXAgZnVuY3Rpb24gcHJlcmVxdWlzaXRlcy5cbiAgICB2YXIgcHJlcmVxcyA9IFtcbiAgICAgIGZ1bmN0aW9uIGNoZWNrQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5wcm9wLmNvbnRhaW5lcikgfHwgdGhpcy50b0NvbnRhaW5lcigpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgXTtcblxuICAgIC8vIEZ1bGZpbGwgcHJlcmVxcyB0aGVuIGNyZWF0ZSB0aGUgY2FudmFzLlxuICAgIHJldHVybiB0aGlzLnRoZW5MaXN0KHByZXJlcXMpXG4gICAgICAudGhlbihsb2FkSHRtbDJDYW52YXMpXG4gICAgICAudGhlbihmdW5jdGlvbiB0b0NhbnZhc19tYWluKGh0bWwyY2FudmFzKSB7XG4gICAgICAgIC8vIEhhbmRsZSBvbGQtZmFzaGlvbmVkICdvbnJlbmRlcmVkJyBhcmd1bWVudC5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdC5odG1sMmNhbnZhcyk7XG4gICAgICAgIGRlbGV0ZSBvcHRpb25zLm9ucmVuZGVyZWQ7XG5cbiAgICAgICAgcmV0dXJuIGh0bWwyY2FudmFzKHRoaXMucHJvcC5jb250YWluZXIsIG9wdGlvbnMpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uIHRvQ2FudmFzX3Bvc3QoY2FudmFzKSB7XG4gICAgICAgIC8vIEhhbmRsZSBvbGQtZmFzaGlvbmVkICdvbnJlbmRlcmVkJyBhcmd1bWVudC5cbiAgICAgICAgdmFyIG9uUmVuZGVyZWQgPSB0aGlzLm9wdC5odG1sMmNhbnZhcy5vbnJlbmRlcmVkIHx8IGZ1bmN0aW9uKCkge307XG4gICAgICAgIG9uUmVuZGVyZWQoY2FudmFzKTtcblxuICAgICAgICB0aGlzLnByb3AuY2FudmFzID0gY2FudmFzO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMucHJvcC5vdmVybGF5KTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIFdvcmtlci5wcm90b3R5cGUudG9Db250ZXh0MmQgPSBmdW5jdGlvbiB0b0NvbnRleHQyZCgpIHtcbiAgICAvLyBTZXQgdXAgZnVuY3Rpb24gcHJlcmVxdWlzaXRlcy5cbiAgICB2YXIgcHJlcmVxcyA9IFtcbiAgICAgIGZ1bmN0aW9uIGNoZWNrQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5wcm9wLmNvbnRhaW5lcikgfHwgdGhpcy50b0NvbnRhaW5lcigpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgXTtcblxuICAgIC8vIEZ1bGZpbGwgcHJlcmVxcyB0aGVuIGNyZWF0ZSB0aGUgY2FudmFzLlxuICAgIHJldHVybiB0aGlzLnRoZW5MaXN0KHByZXJlcXMpXG4gICAgICAudGhlbihsb2FkSHRtbDJDYW52YXMpXG4gICAgICAudGhlbihmdW5jdGlvbiB0b0NvbnRleHQyZF9tYWluKGh0bWwyY2FudmFzKSB7XG4gICAgICAgIC8vIEhhbmRsZSBvbGQtZmFzaGlvbmVkICdvbnJlbmRlcmVkJyBhcmd1bWVudC5cblxuICAgICAgICB2YXIgcGRmID0gdGhpcy5vcHQuanNQREY7XG4gICAgICAgIHZhciBmb250RmFjZXMgPSB0aGlzLm9wdC5mb250RmFjZXM7XG5cbiAgICAgICAgdmFyIHNjYWxlID1cbiAgICAgICAgICB0eXBlb2YgdGhpcy5vcHQud2lkdGggPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgICAhaXNOYU4odGhpcy5vcHQud2lkdGgpICYmXG4gICAgICAgICAgdHlwZW9mIHRoaXMub3B0LndpbmRvd1dpZHRoID09PSBcIm51bWJlclwiICYmXG4gICAgICAgICAgIWlzTmFOKHRoaXMub3B0LndpbmRvd1dpZHRoKVxuICAgICAgICAgICAgPyB0aGlzLm9wdC53aWR0aCAvIHRoaXMub3B0LndpbmRvd1dpZHRoXG4gICAgICAgICAgICA6IDE7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dUYWludDogdHJ1ZSxcbiAgICAgICAgICAgIHNjYWxlOiBzY2FsZSxcbiAgICAgICAgICAgIHNjcm9sbFg6IHRoaXMub3B0LnNjcm9sbFggfHwgMCxcbiAgICAgICAgICAgIHNjcm9sbFk6IHRoaXMub3B0LnNjcm9sbFkgfHwgMCxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmZmZmZmXCIsXG4gICAgICAgICAgICBpbWFnZVRpbWVvdXQ6IDE1MDAwLFxuICAgICAgICAgICAgbG9nZ2luZzogdHJ1ZSxcbiAgICAgICAgICAgIHByb3h5OiBudWxsLFxuICAgICAgICAgICAgcmVtb3ZlQ29udGFpbmVyOiB0cnVlLFxuICAgICAgICAgICAgZm9yZWlnbk9iamVjdFJlbmRlcmluZzogZmFsc2UsXG4gICAgICAgICAgICB1c2VDT1JTOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhpcy5vcHQuaHRtbDJjYW52YXNcbiAgICAgICAgKTtcbiAgICAgICAgZGVsZXRlIG9wdGlvbnMub25yZW5kZXJlZDtcblxuICAgICAgICBwZGYuY29udGV4dDJkLmF1dG9QYWdpbmcgPVxuICAgICAgICAgIHR5cGVvZiB0aGlzLm9wdC5hdXRvUGFnaW5nID09PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgIDogdGhpcy5vcHQuYXV0b1BhZ2luZztcbiAgICAgICAgcGRmLmNvbnRleHQyZC5wb3NYID0gdGhpcy5vcHQueDtcbiAgICAgICAgcGRmLmNvbnRleHQyZC5wb3NZID0gdGhpcy5vcHQueTtcbiAgICAgICAgcGRmLmNvbnRleHQyZC5tYXJnaW4gPSB0aGlzLm9wdC5tYXJnaW47XG4gICAgICAgIHBkZi5jb250ZXh0MmQuZm9udEZhY2VzID0gZm9udEZhY2VzO1xuXG4gICAgICAgIGlmIChmb250RmFjZXMpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvbnRGYWNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSBmb250RmFjZXNbaV07XG4gICAgICAgICAgICB2YXIgc3JjID0gZm9udC5zcmMuZmluZChmdW5jdGlvbihzcmMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNyYy5mb3JtYXQgPT09IFwidHJ1ZXR5cGVcIjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgICAgIHBkZi5hZGRGb250KHNyYy51cmwsIGZvbnQucmVmLm5hbWUsIGZvbnQucmVmLnN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvcHRpb25zLndpbmRvd0hlaWdodCA9IG9wdGlvbnMud2luZG93SGVpZ2h0IHx8IDA7XG4gICAgICAgIG9wdGlvbnMud2luZG93SGVpZ2h0ID1cbiAgICAgICAgICBvcHRpb25zLndpbmRvd0hlaWdodCA9PSAwXG4gICAgICAgICAgICA/IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcC5jb250YWluZXIuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcC5jb250YWluZXIuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcC5jb250YWluZXIub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogb3B0aW9ucy53aW5kb3dIZWlnaHQ7XG5cbiAgICAgICAgcGRmLmNvbnRleHQyZC5zYXZlKHRydWUpO1xuICAgICAgICByZXR1cm4gaHRtbDJjYW52YXModGhpcy5wcm9wLmNvbnRhaW5lciwgb3B0aW9ucyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gdG9Db250ZXh0MmRfcG9zdChjYW52YXMpIHtcbiAgICAgICAgdGhpcy5vcHQuanNQREYuY29udGV4dDJkLnJlc3RvcmUodHJ1ZSk7XG5cbiAgICAgICAgLy8gSGFuZGxlIG9sZC1mYXNoaW9uZWQgJ29ucmVuZGVyZWQnIGFyZ3VtZW50LlxuICAgICAgICB2YXIgb25SZW5kZXJlZCA9IHRoaXMub3B0Lmh0bWwyY2FudmFzLm9ucmVuZGVyZWQgfHwgZnVuY3Rpb24oKSB7fTtcbiAgICAgICAgb25SZW5kZXJlZChjYW52YXMpO1xuXG4gICAgICAgIHRoaXMucHJvcC5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5wcm9wLm92ZXJsYXkpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgV29ya2VyLnByb3RvdHlwZS50b0ltZyA9IGZ1bmN0aW9uIHRvSW1nKCkge1xuICAgIC8vIFNldCB1cCBmdW5jdGlvbiBwcmVyZXF1aXNpdGVzLlxuICAgIHZhciBwcmVyZXFzID0gW1xuICAgICAgZnVuY3Rpb24gY2hlY2tDYW52YXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3AuY2FudmFzIHx8IHRoaXMudG9DYW52YXMoKTtcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgLy8gRnVsZmlsbCBwcmVyZXFzIHRoZW4gY3JlYXRlIHRoZSBpbWFnZS5cbiAgICByZXR1cm4gdGhpcy50aGVuTGlzdChwcmVyZXFzKS50aGVuKGZ1bmN0aW9uIHRvSW1nX21haW4oKSB7XG4gICAgICB2YXIgaW1nRGF0YSA9IHRoaXMucHJvcC5jYW52YXMudG9EYXRhVVJMKFxuICAgICAgICBcImltYWdlL1wiICsgdGhpcy5vcHQuaW1hZ2UudHlwZSxcbiAgICAgICAgdGhpcy5vcHQuaW1hZ2UucXVhbGl0eVxuICAgICAgKTtcbiAgICAgIHRoaXMucHJvcC5pbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgdGhpcy5wcm9wLmltZy5zcmMgPSBpbWdEYXRhO1xuICAgIH0pO1xuICB9O1xuXG4gIFdvcmtlci5wcm90b3R5cGUudG9QZGYgPSBmdW5jdGlvbiB0b1BkZigpIHtcbiAgICAvLyBTZXQgdXAgZnVuY3Rpb24gcHJlcmVxdWlzaXRlcy5cbiAgICB2YXIgcHJlcmVxcyA9IFtcbiAgICAgIGZ1bmN0aW9uIGNoZWNrQ29udGV4dDJkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b0NvbnRleHQyZCgpO1xuICAgICAgfVxuICAgICAgLy9mdW5jdGlvbiBjaGVja0NhbnZhcygpIHsgcmV0dXJuIHRoaXMucHJvcC5jYW52YXMgfHwgdGhpcy50b0NhbnZhcygpOyB9XG4gICAgXTtcblxuICAgIC8vIEZ1bGZpbGwgcHJlcmVxcyB0aGVuIGNyZWF0ZSB0aGUgaW1hZ2UuXG4gICAgcmV0dXJuIHRoaXMudGhlbkxpc3QocHJlcmVxcykudGhlbihmdW5jdGlvbiB0b1BkZl9tYWluKCkge1xuICAgICAgLy8gQ3JlYXRlIGxvY2FsIGNvcGllcyBvZiBmcmVxdWVudGx5IHVzZWQgcHJvcGVydGllcy5cbiAgICAgIHRoaXMucHJvcC5wZGYgPSB0aGlzLnByb3AucGRmIHx8IHRoaXMub3B0LmpzUERGO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qIC0tLS0tIE9VVFBVVCAvIFNBVkUgLS0tLS0gKi9cblxuICBXb3JrZXIucHJvdG90eXBlLm91dHB1dCA9IGZ1bmN0aW9uIG91dHB1dCh0eXBlLCBvcHRpb25zLCBzcmMpIHtcbiAgICAvLyBSZWRpcmVjdCByZXF1ZXN0cyB0byB0aGUgY29ycmVjdCBmdW5jdGlvbiAob3V0cHV0UGRmIC8gb3V0cHV0SW1nKS5cbiAgICBzcmMgPSBzcmMgfHwgXCJwZGZcIjtcbiAgICBpZiAoc3JjLnRvTG93ZXJDYXNlKCkgPT09IFwiaW1nXCIgfHwgc3JjLnRvTG93ZXJDYXNlKCkgPT09IFwiaW1hZ2VcIikge1xuICAgICAgcmV0dXJuIHRoaXMub3V0cHV0SW1nKHR5cGUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5vdXRwdXRQZGYodHlwZSwgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xuXG4gIFdvcmtlci5wcm90b3R5cGUub3V0cHV0UGRmID0gZnVuY3Rpb24gb3V0cHV0UGRmKHR5cGUsIG9wdGlvbnMpIHtcbiAgICAvLyBTZXQgdXAgZnVuY3Rpb24gcHJlcmVxdWlzaXRlcy5cbiAgICB2YXIgcHJlcmVxcyA9IFtcbiAgICAgIGZ1bmN0aW9uIGNoZWNrUGRmKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wLnBkZiB8fCB0aGlzLnRvUGRmKCk7XG4gICAgICB9XG4gICAgXTtcblxuICAgIC8vIEZ1bGZpbGwgcHJlcmVxcyB0aGVuIHBlcmZvcm0gdGhlIGFwcHJvcHJpYXRlIG91dHB1dC5cbiAgICByZXR1cm4gdGhpcy50aGVuTGlzdChwcmVyZXFzKS50aGVuKGZ1bmN0aW9uIG91dHB1dFBkZl9tYWluKCkge1xuICAgICAgLyogQ3VycmVudGx5IGltcGxlbWVudGVkIG91dHB1dCB0eXBlczpcbiAgICAgICAqICAgIGh0dHBzOi8vcmF3Z2l0LmNvbS9NclJpby9qc1BERi9tYXN0ZXIvZG9jcy9qc3BkZi5qcy5odG1sI2xpbmU5OTJcbiAgICAgICAqICBzYXZlKG9wdGlvbnMpLCBhcnJheWJ1ZmZlciwgYmxvYiwgYmxvYnVyaS9ibG9idXJsLFxuICAgICAgICogIGRhdGF1cmlzdHJpbmcvZGF0YXVybHN0cmluZywgZGF0YXVybG5ld3dpbmRvdywgZGF0YXVyaS9kYXRhdXJsXG4gICAgICAgKi9cbiAgICAgIHJldHVybiB0aGlzLnByb3AucGRmLm91dHB1dCh0eXBlLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLm91dHB1dEltZyA9IGZ1bmN0aW9uIG91dHB1dEltZyh0eXBlKSB7XG4gICAgLy8gU2V0IHVwIGZ1bmN0aW9uIHByZXJlcXVpc2l0ZXMuXG4gICAgdmFyIHByZXJlcXMgPSBbXG4gICAgICBmdW5jdGlvbiBjaGVja0ltZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcC5pbWcgfHwgdGhpcy50b0ltZygpO1xuICAgICAgfVxuICAgIF07XG5cbiAgICAvLyBGdWxmaWxsIHByZXJlcXMgdGhlbiBwZXJmb3JtIHRoZSBhcHByb3ByaWF0ZSBvdXRwdXQuXG4gICAgcmV0dXJuIHRoaXMudGhlbkxpc3QocHJlcmVxcykudGhlbihmdW5jdGlvbiBvdXRwdXRJbWdfbWFpbigpIHtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgY2FzZSBcImltZ1wiOlxuICAgICAgICAgIHJldHVybiB0aGlzLnByb3AuaW1nO1xuICAgICAgICBjYXNlIFwiZGF0YXVyaXN0cmluZ1wiOlxuICAgICAgICBjYXNlIFwiZGF0YXVybHN0cmluZ1wiOlxuICAgICAgICAgIHJldHVybiB0aGlzLnByb3AuaW1nLnNyYztcbiAgICAgICAgY2FzZSBcImRhdGF1cmlcIjpcbiAgICAgICAgY2FzZSBcImRhdGF1cmxcIjpcbiAgICAgICAgICByZXR1cm4gKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSB0aGlzLnByb3AuaW1nLnNyYyk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgJ0ltYWdlIG91dHB1dCB0eXBlIFwiJyArIHR5cGUgKyAnXCIgaXMgbm90IHN1cHBvcnRlZC4nO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIFdvcmtlci5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUoZmlsZW5hbWUpIHtcbiAgICAvLyBTZXQgdXAgZnVuY3Rpb24gcHJlcmVxdWlzaXRlcy5cbiAgICB2YXIgcHJlcmVxcyA9IFtcbiAgICAgIGZ1bmN0aW9uIGNoZWNrUGRmKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wLnBkZiB8fCB0aGlzLnRvUGRmKCk7XG4gICAgICB9XG4gICAgXTtcblxuICAgIC8vIEZ1bGZpbGwgcHJlcmVxcywgdXBkYXRlIHRoZSBmaWxlbmFtZSAoaWYgcHJvdmlkZWQpLCBhbmQgc2F2ZSB0aGUgUERGLlxuICAgIHJldHVybiB0aGlzLnRoZW5MaXN0KHByZXJlcXMpXG4gICAgICAuc2V0KGZpbGVuYW1lID8geyBmaWxlbmFtZTogZmlsZW5hbWUgfSA6IG51bGwpXG4gICAgICAudGhlbihmdW5jdGlvbiBzYXZlX21haW4oKSB7XG4gICAgICAgIHRoaXMucHJvcC5wZGYuc2F2ZSh0aGlzLm9wdC5maWxlbmFtZSk7XG4gICAgICB9KTtcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLmRvQ2FsbGJhY2sgPSBmdW5jdGlvbiBkb0NhbGxiYWNrKCkge1xuICAgIC8vIFNldCB1cCBmdW5jdGlvbiBwcmVyZXF1aXNpdGVzLlxuICAgIHZhciBwcmVyZXFzID0gW1xuICAgICAgZnVuY3Rpb24gY2hlY2tQZGYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3AucGRmIHx8IHRoaXMudG9QZGYoKTtcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgLy8gRnVsZmlsbCBwcmVyZXFzLCB1cGRhdGUgdGhlIGZpbGVuYW1lIChpZiBwcm92aWRlZCksIGFuZCBzYXZlIHRoZSBQREYuXG4gICAgcmV0dXJuIHRoaXMudGhlbkxpc3QocHJlcmVxcykudGhlbihmdW5jdGlvbiBkb0NhbGxiYWNrX21haW4oKSB7XG4gICAgICB0aGlzLnByb3AuY2FsbGJhY2sodGhpcy5wcm9wLnBkZik7XG4gICAgfSk7XG4gIH07XG5cbiAgLyogLS0tLS0gU0VUIC8gR0VUIC0tLS0tICovXG5cbiAgV29ya2VyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQob3B0KSB7XG4gICAgLy8gVE9ETzogSW1wbGVtZW50IG9yZGVyZWQgcGFpcnM/XG5cbiAgICAvLyBTaWxlbnRseSBpZ25vcmUgaW52YWxpZCBvciBlbXB0eSBpbnB1dC5cbiAgICBpZiAob2JqVHlwZShvcHQpICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBCdWlsZCBhbiBhcnJheSBvZiBzZXR0ZXIgZnVuY3Rpb25zIHRvIHF1ZXVlLlxuICAgIHZhciBmbnMgPSBPYmplY3Qua2V5cyhvcHQgfHwge30pLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIGlmIChrZXkgaW4gV29ya2VyLnRlbXBsYXRlLnByb3ApIHtcbiAgICAgICAgLy8gU2V0IHByZS1kZWZpbmVkIHByb3BlcnRpZXMuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRfcHJvcCgpIHtcbiAgICAgICAgICB0aGlzLnByb3Bba2V5XSA9IG9wdFtrZXldO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlIFwibWFyZ2luXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRNYXJnaW4uYmluZCh0aGlzLCBvcHQubWFyZ2luKTtcbiAgICAgICAgICBjYXNlIFwianNQREZcIjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRfanNQREYoKSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0LmpzUERGID0gb3B0LmpzUERGO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRQYWdlU2l6ZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICBjYXNlIFwicGFnZVNpemVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFBhZ2VTaXplLmJpbmQodGhpcywgb3B0LnBhZ2VTaXplKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgLy8gU2V0IGFueSBvdGhlciBwcm9wZXJ0aWVzIGluIG9wdC5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRfb3B0KCkge1xuICAgICAgICAgICAgICB0aGlzLm9wdFtrZXldID0gb3B0W2tleV07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG5cbiAgICAvLyBTZXQgcHJvcGVydGllcyB3aXRoaW4gdGhlIHByb21pc2UgY2hhaW4uXG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiBzZXRfbWFpbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRoZW5MaXN0KGZucyk7XG4gICAgfSk7XG4gIH07XG5cbiAgV29ya2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQoa2V5LCBjYmspIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uIGdldF9tYWluKCkge1xuICAgICAgLy8gRmV0Y2ggdGhlIHJlcXVlc3RlZCBwcm9wZXJ0eSwgZWl0aGVyIGFzIGEgcHJlZGVmaW5lZCBwcm9wIG9yIGluIG9wdC5cbiAgICAgIHZhciB2YWwgPSBrZXkgaW4gV29ya2VyLnRlbXBsYXRlLnByb3AgPyB0aGlzLnByb3Bba2V5XSA6IHRoaXMub3B0W2tleV07XG4gICAgICByZXR1cm4gY2JrID8gY2JrKHZhbCkgOiB2YWw7XG4gICAgfSk7XG4gIH07XG5cbiAgV29ya2VyLnByb3RvdHlwZS5zZXRNYXJnaW4gPSBmdW5jdGlvbiBzZXRNYXJnaW4obWFyZ2luKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiBzZXRNYXJnaW5fbWFpbigpIHtcbiAgICAgIC8vIFBhcnNlIHRoZSBtYXJnaW4gcHJvcGVydHkuXG4gICAgICBzd2l0Y2ggKG9ialR5cGUobWFyZ2luKSkge1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgbWFyZ2luID0gW21hcmdpbiwgbWFyZ2luLCBtYXJnaW4sIG1hcmdpbl07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1mYWxsdGhyb3VnaFxuICAgICAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgICAgICBpZiAobWFyZ2luLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgbWFyZ2luID0gW21hcmdpblswXSwgbWFyZ2luWzFdLCBtYXJnaW5bMF0sIG1hcmdpblsxXV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXJnaW4ubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1mYWxsdGhyb3VnaFxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0aGlzLmVycm9yKFwiSW52YWxpZCBtYXJnaW4gYXJyYXkuXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGhlIG1hcmdpbiBwcm9wZXJ0eSwgdGhlbiB1cGRhdGUgcGFnZVNpemUuXG4gICAgICB0aGlzLm9wdC5tYXJnaW4gPSBtYXJnaW47XG4gICAgfSkudGhlbih0aGlzLnNldFBhZ2VTaXplKTtcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLnNldFBhZ2VTaXplID0gZnVuY3Rpb24gc2V0UGFnZVNpemUocGFnZVNpemUpIHtcbiAgICBmdW5jdGlvbiB0b1B4KHZhbCwgaykge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKCh2YWwgKiBrKSAvIDcyKSAqIDk2KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uIHNldFBhZ2VTaXplX21haW4oKSB7XG4gICAgICAvLyBSZXRyaWV2ZSBwYWdlLXNpemUgYmFzZWQgb24ganNQREYgc2V0dGluZ3MsIGlmIG5vdCBleHBsaWNpdGx5IHByb3ZpZGVkLlxuICAgICAgcGFnZVNpemUgPSBwYWdlU2l6ZSB8fCBqc1BERi5nZXRQYWdlU2l6ZSh0aGlzLm9wdC5qc1BERik7XG5cbiAgICAgIC8vIEFkZCAnaW5uZXInIGZpZWxkIGlmIG5vdCBwcmVzZW50LlxuICAgICAgaWYgKCFwYWdlU2l6ZS5oYXNPd25Qcm9wZXJ0eShcImlubmVyXCIpKSB7XG4gICAgICAgIHBhZ2VTaXplLmlubmVyID0ge1xuICAgICAgICAgIHdpZHRoOiBwYWdlU2l6ZS53aWR0aCAtIHRoaXMub3B0Lm1hcmdpblsxXSAtIHRoaXMub3B0Lm1hcmdpblszXSxcbiAgICAgICAgICBoZWlnaHQ6IHBhZ2VTaXplLmhlaWdodCAtIHRoaXMub3B0Lm1hcmdpblswXSAtIHRoaXMub3B0Lm1hcmdpblsyXVxuICAgICAgICB9O1xuICAgICAgICBwYWdlU2l6ZS5pbm5lci5weCA9IHtcbiAgICAgICAgICB3aWR0aDogdG9QeChwYWdlU2l6ZS5pbm5lci53aWR0aCwgcGFnZVNpemUuayksXG4gICAgICAgICAgaGVpZ2h0OiB0b1B4KHBhZ2VTaXplLmlubmVyLmhlaWdodCwgcGFnZVNpemUuaylcbiAgICAgICAgfTtcbiAgICAgICAgcGFnZVNpemUuaW5uZXIucmF0aW8gPSBwYWdlU2l6ZS5pbm5lci5oZWlnaHQgLyBwYWdlU2l6ZS5pbm5lci53aWR0aDtcbiAgICAgIH1cblxuICAgICAgLy8gQXR0YWNoIHBhZ2VTaXplIHRvIHRoaXMuXG4gICAgICB0aGlzLnByb3AucGFnZVNpemUgPSBwYWdlU2l6ZTtcbiAgICB9KTtcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLnNldFByb2dyZXNzID0gZnVuY3Rpb24gc2V0UHJvZ3Jlc3ModmFsLCBzdGF0ZSwgbiwgc3RhY2spIHtcbiAgICAvLyBJbW1lZGlhdGVseSB1cGRhdGUgYWxsIHByb2dyZXNzIHZhbHVlcy5cbiAgICBpZiAodmFsICE9IG51bGwpIHRoaXMucHJvZ3Jlc3MudmFsID0gdmFsO1xuICAgIGlmIChzdGF0ZSAhPSBudWxsKSB0aGlzLnByb2dyZXNzLnN0YXRlID0gc3RhdGU7XG4gICAgaWYgKG4gIT0gbnVsbCkgdGhpcy5wcm9ncmVzcy5uID0gbjtcbiAgICBpZiAoc3RhY2sgIT0gbnVsbCkgdGhpcy5wcm9ncmVzcy5zdGFjayA9IHN0YWNrO1xuICAgIHRoaXMucHJvZ3Jlc3MucmF0aW8gPSB0aGlzLnByb2dyZXNzLnZhbCAvIHRoaXMucHJvZ3Jlc3Muc3RhdGU7XG5cbiAgICAvLyBSZXR1cm4gdGhpcyBmb3IgY29tbWFuZCBjaGFpbmluZy5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLnVwZGF0ZVByb2dyZXNzID0gZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoXG4gICAgdmFsLFxuICAgIHN0YXRlLFxuICAgIG4sXG4gICAgc3RhY2tcbiAgKSB7XG4gICAgLy8gSW1tZWRpYXRlbHkgdXBkYXRlIGFsbCBwcm9ncmVzcyB2YWx1ZXMsIHVzaW5nIHNldFByb2dyZXNzLlxuICAgIHJldHVybiB0aGlzLnNldFByb2dyZXNzKFxuICAgICAgdmFsID8gdGhpcy5wcm9ncmVzcy52YWwgKyB2YWwgOiBudWxsLFxuICAgICAgc3RhdGUgPyBzdGF0ZSA6IG51bGwsXG4gICAgICBuID8gdGhpcy5wcm9ncmVzcy5uICsgbiA6IG51bGwsXG4gICAgICBzdGFjayA/IHRoaXMucHJvZ3Jlc3Muc3RhY2suY29uY2F0KHN0YWNrKSA6IG51bGxcbiAgICApO1xuICB9O1xuXG4gIC8qIC0tLS0tIFBST01JU0UgTUFQUElORyAtLS0tLSAqL1xuXG4gIFdvcmtlci5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAvLyBXcmFwIGB0aGlzYCBmb3IgZW5jYXBzdWxhdGlvbi5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy50aGVuQ29yZShvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgZnVuY3Rpb24gdGhlbl9tYWluKFxuICAgICAgb25GdWxmaWxsZWQsXG4gICAgICBvblJlamVjdGVkXG4gICAgKSB7XG4gICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3Mgd2hpbGUgcXVldWluZywgY2FsbGluZywgYW5kIHJlc29sdmluZyBgdGhlbmAuXG4gICAgICBzZWxmLnVwZGF0ZVByb2dyZXNzKG51bGwsIG51bGwsIDEsIFtvbkZ1bGZpbGxlZF0pO1xuICAgICAgcmV0dXJuIFByb21pc2UucHJvdG90eXBlLnRoZW5cbiAgICAgICAgLmNhbGwodGhpcywgZnVuY3Rpb24gdGhlbl9wcmUodmFsKSB7XG4gICAgICAgICAgc2VsZi51cGRhdGVQcm9ncmVzcyhudWxsLCBvbkZ1bGZpbGxlZCk7XG4gICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIHRoZW5fcG9zdCh2YWwpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZVByb2dyZXNzKDEpO1xuICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIFdvcmtlci5wcm90b3R5cGUudGhlbkNvcmUgPSBmdW5jdGlvbiB0aGVuQ29yZShcbiAgICBvbkZ1bGZpbGxlZCxcbiAgICBvblJlamVjdGVkLFxuICAgIHRoZW5CYXNlXG4gICkge1xuICAgIC8vIEhhbmRsZSBvcHRpb25hbCB0aGVuQmFzZSBwYXJhbWV0ZXIuXG4gICAgdGhlbkJhc2UgPSB0aGVuQmFzZSB8fCBQcm9taXNlLnByb3RvdHlwZS50aGVuO1xuXG4gICAgLy8gV3JhcCBgdGhpc2AgZm9yIGVuY2Fwc3VsYXRpb24gYW5kIGJpbmQgaXQgdG8gdGhlIHByb21pc2UgaGFuZGxlcnMuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmIChvbkZ1bGZpbGxlZCkge1xuICAgICAgb25GdWxmaWxsZWQgPSBvbkZ1bGZpbGxlZC5iaW5kKHNlbGYpO1xuICAgIH1cbiAgICBpZiAob25SZWplY3RlZCkge1xuICAgICAgb25SZWplY3RlZCA9IG9uUmVqZWN0ZWQuYmluZChzZWxmKTtcbiAgICB9XG5cbiAgICAvLyBDYXN0IHNlbGYgaW50byBhIFByb21pc2UgdG8gYXZvaWQgcG9seWZpbGxzIHJlY3Vyc2l2ZWx5IGRlZmluaW5nIGB0aGVuYC5cbiAgICB2YXIgaXNOYXRpdmUgPVxuICAgICAgUHJvbWlzZS50b1N0cmluZygpLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpICE9PSAtMSAmJlxuICAgICAgUHJvbWlzZS5uYW1lID09PSBcIlByb21pc2VcIjtcbiAgICB2YXIgc2VsZlByb21pc2UgPSBpc05hdGl2ZVxuICAgICAgPyBzZWxmXG4gICAgICA6IFdvcmtlci5jb252ZXJ0KE9iamVjdC5hc3NpZ24oe30sIHNlbGYpLCBQcm9taXNlLnByb3RvdHlwZSk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIHByb21pc2UsIGFmdGVyIGNhc3RpbmcgaXQgaW50byBhIFdvcmtlciBhbmQgcHJlc2VydmluZyBwcm9wcy5cbiAgICB2YXIgcmV0dXJuVmFsID0gdGhlbkJhc2UuY2FsbChzZWxmUHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICAgIHJldHVybiBXb3JrZXIuY29udmVydChyZXR1cm5WYWwsIHNlbGYuX19wcm90b19fKTtcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLnRoZW5FeHRlcm5hbCA9IGZ1bmN0aW9uIHRoZW5FeHRlcm5hbChcbiAgICBvbkZ1bGZpbGxlZCxcbiAgICBvblJlamVjdGVkXG4gICkge1xuICAgIC8vIENhbGwgYHRoZW5gIGFuZCByZXR1cm4gYSBzdGFuZGFyZCBwcm9taXNlIChleGl0cyB0aGUgV29ya2VyIGNoYWluKS5cbiAgICByZXR1cm4gUHJvbWlzZS5wcm90b3R5cGUudGhlbi5jYWxsKHRoaXMsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLnRoZW5MaXN0ID0gZnVuY3Rpb24gdGhlbkxpc3QoZm5zKSB7XG4gICAgLy8gUXVldWUgYSBzZXJpZXMgb2YgcHJvbWlzZSAnZmFjdG9yaWVzJyBpbnRvIHRoZSBwcm9taXNlIGNoYWluLlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmbnMuZm9yRWFjaChmdW5jdGlvbiB0aGVuTGlzdF9mb3JFYWNoKGZuKSB7XG4gICAgICBzZWxmID0gc2VsZi50aGVuQ29yZShmbik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgV29ya2VyLnByb3RvdHlwZVtcImNhdGNoXCJdID0gZnVuY3Rpb24ob25SZWplY3RlZCkge1xuICAgIC8vIEJpbmQgYHRoaXNgIHRvIHRoZSBwcm9taXNlIGhhbmRsZXIsIGNhbGwgYGNhdGNoYCwgYW5kIHJldHVybiBhIFdvcmtlci5cbiAgICBpZiAob25SZWplY3RlZCkge1xuICAgICAgb25SZWplY3RlZCA9IG9uUmVqZWN0ZWQuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgdmFyIHJldHVyblZhbCA9IFByb21pc2UucHJvdG90eXBlW1wiY2F0Y2hcIl0uY2FsbCh0aGlzLCBvblJlamVjdGVkKTtcbiAgICByZXR1cm4gV29ya2VyLmNvbnZlcnQocmV0dXJuVmFsLCB0aGlzKTtcbiAgfTtcblxuICBXb3JrZXIucHJvdG90eXBlLmNhdGNoRXh0ZXJuYWwgPSBmdW5jdGlvbiBjYXRjaEV4dGVybmFsKG9uUmVqZWN0ZWQpIHtcbiAgICAvLyBDYWxsIGBjYXRjaGAgYW5kIHJldHVybiBhIHN0YW5kYXJkIHByb21pc2UgKGV4aXRzIHRoZSBXb3JrZXIgY2hhaW4pLlxuICAgIHJldHVybiBQcm9taXNlLnByb3RvdHlwZVtcImNhdGNoXCJdLmNhbGwodGhpcywgb25SZWplY3RlZCk7XG4gIH07XG5cbiAgV29ya2VyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKG1zZykge1xuICAgIC8vIFRocm93IHRoZSBlcnJvciBpbiB0aGUgUHJvbWlzZSBjaGFpbi5cbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uIGVycm9yX21haW4oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKiAtLS0tLSBBTElBU0VTIC0tLS0tICovXG5cbiAgV29ya2VyLnByb3RvdHlwZS51c2luZyA9IFdvcmtlci5wcm90b3R5cGUuc2V0O1xuICBXb3JrZXIucHJvdG90eXBlLnNhdmVBcyA9IFdvcmtlci5wcm90b3R5cGUuc2F2ZTtcbiAgV29ya2VyLnByb3RvdHlwZS5leHBvcnQgPSBXb3JrZXIucHJvdG90eXBlLm91dHB1dDtcbiAgV29ya2VyLnByb3RvdHlwZS5ydW4gPSBXb3JrZXIucHJvdG90eXBlLnRoZW47XG5cbiAgLy8gR2V0IGRpbWVuc2lvbnMgb2YgYSBQREYgcGFnZSwgYXMgZGV0ZXJtaW5lZCBieSBqc1BERi5cbiAganNQREYuZ2V0UGFnZVNpemUgPSBmdW5jdGlvbihvcmllbnRhdGlvbiwgdW5pdCwgZm9ybWF0KSB7XG4gICAgLy8gRGVjb2RlIG9wdGlvbnMgb2JqZWN0XG4gICAgaWYgKHR5cGVvZiBvcmllbnRhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdmFyIG9wdGlvbnMgPSBvcmllbnRhdGlvbjtcbiAgICAgIG9yaWVudGF0aW9uID0gb3B0aW9ucy5vcmllbnRhdGlvbjtcbiAgICAgIHVuaXQgPSBvcHRpb25zLnVuaXQgfHwgdW5pdDtcbiAgICAgIGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IGZvcm1hdDtcbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IG9wdGlvbnNcbiAgICB1bml0ID0gdW5pdCB8fCBcIm1tXCI7XG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8IFwiYTRcIjtcbiAgICBvcmllbnRhdGlvbiA9IChcIlwiICsgKG9yaWVudGF0aW9uIHx8IFwiUFwiKSkudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgZm9ybWF0X2FzX3N0cmluZyA9IChcIlwiICsgZm9ybWF0KS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gU2l6ZSBpbiBwdCBvZiB2YXJpb3VzIHBhcGVyIGZvcm1hdHNcbiAgICB2YXIgcGFnZUZvcm1hdHMgPSB7XG4gICAgICBhMDogWzIzODMuOTQsIDMzNzAuMzldLFxuICAgICAgYTE6IFsxNjgzLjc4LCAyMzgzLjk0XSxcbiAgICAgIGEyOiBbMTE5MC41NSwgMTY4My43OF0sXG4gICAgICBhMzogWzg0MS44OSwgMTE5MC41NV0sXG4gICAgICBhNDogWzU5NS4yOCwgODQxLjg5XSxcbiAgICAgIGE1OiBbNDE5LjUzLCA1OTUuMjhdLFxuICAgICAgYTY6IFsyOTcuNjQsIDQxOS41M10sXG4gICAgICBhNzogWzIwOS43NiwgMjk3LjY0XSxcbiAgICAgIGE4OiBbMTQ3LjQsIDIwOS43Nl0sXG4gICAgICBhOTogWzEwNC44OCwgMTQ3LjRdLFxuICAgICAgYTEwOiBbNzMuNywgMTA0Ljg4XSxcbiAgICAgIGIwOiBbMjgzNC42NSwgNDAwOC4xOV0sXG4gICAgICBiMTogWzIwMDQuMDksIDI4MzQuNjVdLFxuICAgICAgYjI6IFsxNDE3LjMyLCAyMDA0LjA5XSxcbiAgICAgIGIzOiBbMTAwMC42MywgMTQxNy4zMl0sXG4gICAgICBiNDogWzcwOC42NiwgMTAwMC42M10sXG4gICAgICBiNTogWzQ5OC45LCA3MDguNjZdLFxuICAgICAgYjY6IFszNTQuMzMsIDQ5OC45XSxcbiAgICAgIGI3OiBbMjQ5LjQ1LCAzNTQuMzNdLFxuICAgICAgYjg6IFsxNzUuNzUsIDI0OS40NV0sXG4gICAgICBiOTogWzEyNC43MiwgMTc1Ljc1XSxcbiAgICAgIGIxMDogWzg3Ljg3LCAxMjQuNzJdLFxuICAgICAgYzA6IFsyNTk5LjM3LCAzNjc2LjU0XSxcbiAgICAgIGMxOiBbMTgzNi44NSwgMjU5OS4zN10sXG4gICAgICBjMjogWzEyOTguMjcsIDE4MzYuODVdLFxuICAgICAgYzM6IFs5MTguNDMsIDEyOTguMjddLFxuICAgICAgYzQ6IFs2NDkuMTMsIDkxOC40M10sXG4gICAgICBjNTogWzQ1OS4yMSwgNjQ5LjEzXSxcbiAgICAgIGM2OiBbMzIzLjE1LCA0NTkuMjFdLFxuICAgICAgYzc6IFsyMjkuNjEsIDMyMy4xNV0sXG4gICAgICBjODogWzE2MS41NywgMjI5LjYxXSxcbiAgICAgIGM5OiBbMTEzLjM5LCAxNjEuNTddLFxuICAgICAgYzEwOiBbNzkuMzcsIDExMy4zOV0sXG4gICAgICBkbDogWzMxMS44MSwgNjIzLjYyXSxcbiAgICAgIGxldHRlcjogWzYxMiwgNzkyXSxcbiAgICAgIFwiZ292ZXJubWVudC1sZXR0ZXJcIjogWzU3NiwgNzU2XSxcbiAgICAgIGxlZ2FsOiBbNjEyLCAxMDA4XSxcbiAgICAgIFwianVuaW9yLWxlZ2FsXCI6IFs1NzYsIDM2MF0sXG4gICAgICBsZWRnZXI6IFsxMjI0LCA3OTJdLFxuICAgICAgdGFibG9pZDogWzc5MiwgMTIyNF0sXG4gICAgICBcImNyZWRpdC1jYXJkXCI6IFsxNTMsIDI0M11cbiAgICB9O1xuXG4gICAgdmFyIGs7XG4gICAgLy8gVW5pdCBjb252ZXJzaW9uXG4gICAgc3dpdGNoICh1bml0KSB7XG4gICAgICBjYXNlIFwicHRcIjpcbiAgICAgICAgayA9IDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm1tXCI6XG4gICAgICAgIGsgPSA3MiAvIDI1LjQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNtXCI6XG4gICAgICAgIGsgPSA3MiAvIDIuNTQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImluXCI6XG4gICAgICAgIGsgPSA3MjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHhcIjpcbiAgICAgICAgayA9IDcyIC8gOTY7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInBjXCI6XG4gICAgICAgIGsgPSAxMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZW1cIjpcbiAgICAgICAgayA9IDEyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJleFwiOlxuICAgICAgICBrID0gNjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBcIkludmFsaWQgdW5pdDogXCIgKyB1bml0O1xuICAgIH1cbiAgICB2YXIgcGFnZUhlaWdodCA9IDA7XG4gICAgdmFyIHBhZ2VXaWR0aCA9IDA7XG5cbiAgICAvLyBEaW1lbnNpb25zIGFyZSBzdG9yZWQgYXMgdXNlciB1bml0cyBhbmQgY29udmVydGVkIHRvIHBvaW50cyBvbiBvdXRwdXRcbiAgICBpZiAocGFnZUZvcm1hdHMuaGFzT3duUHJvcGVydHkoZm9ybWF0X2FzX3N0cmluZykpIHtcbiAgICAgIHBhZ2VIZWlnaHQgPSBwYWdlRm9ybWF0c1tmb3JtYXRfYXNfc3RyaW5nXVsxXSAvIGs7XG4gICAgICBwYWdlV2lkdGggPSBwYWdlRm9ybWF0c1tmb3JtYXRfYXNfc3RyaW5nXVswXSAvIGs7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBhZ2VIZWlnaHQgPSBmb3JtYXRbMV07XG4gICAgICAgIHBhZ2VXaWR0aCA9IGZvcm1hdFswXTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZvcm1hdDogXCIgKyBmb3JtYXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0bXA7XG4gICAgLy8gSGFuZGxlIHBhZ2Ugb3JpZW50YXRpb25cbiAgICBpZiAob3JpZW50YXRpb24gPT09IFwicFwiIHx8IG9yaWVudGF0aW9uID09PSBcInBvcnRyYWl0XCIpIHtcbiAgICAgIG9yaWVudGF0aW9uID0gXCJwXCI7XG4gICAgICBpZiAocGFnZVdpZHRoID4gcGFnZUhlaWdodCkge1xuICAgICAgICB0bXAgPSBwYWdlV2lkdGg7XG4gICAgICAgIHBhZ2VXaWR0aCA9IHBhZ2VIZWlnaHQ7XG4gICAgICAgIHBhZ2VIZWlnaHQgPSB0bXA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcmllbnRhdGlvbiA9PT0gXCJsXCIgfHwgb3JpZW50YXRpb24gPT09IFwibGFuZHNjYXBlXCIpIHtcbiAgICAgIG9yaWVudGF0aW9uID0gXCJsXCI7XG4gICAgICBpZiAocGFnZUhlaWdodCA+IHBhZ2VXaWR0aCkge1xuICAgICAgICB0bXAgPSBwYWdlV2lkdGg7XG4gICAgICAgIHBhZ2VXaWR0aCA9IHBhZ2VIZWlnaHQ7XG4gICAgICAgIHBhZ2VIZWlnaHQgPSB0bXA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiSW52YWxpZCBvcmllbnRhdGlvbjogXCIgKyBvcmllbnRhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gaW5mb3JtYXRpb24gKGsgaXMgdGhlIHVuaXQgY29udmVyc2lvbiByYXRpbyBmcm9tIHB0cylcbiAgICB2YXIgaW5mbyA9IHtcbiAgICAgIHdpZHRoOiBwYWdlV2lkdGgsXG4gICAgICBoZWlnaHQ6IHBhZ2VIZWlnaHQsXG4gICAgICB1bml0OiB1bml0LFxuICAgICAgazogayxcbiAgICAgIG9yaWVudGF0aW9uOiBvcmllbnRhdGlvblxuICAgIH07XG4gICAgcmV0dXJuIGluZm87XG4gIH07XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIEZvbnRGYWNlXG4gICAqXG4gICAqIFRoZSBmb250LWZhY2UgdHlwZSBpbXBsZW1lbnRzIGFuIGludGVyZmFjZSBzaW1pbGFyIHRvIHRoYXQgb2YgdGhlIGZvbnQtZmFjZSBDU1MgcnVsZSxcbiAgICogYW5kIGlzIHVzZWQgYnkganNQREYgdG8gbWF0Y2ggZm9udHMgd2hlbiB0aGUgZm9udCBwcm9wZXJ0eSBvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRcbiAgICogaXMgdXBkYXRlZC5cbiAgICpcbiAgICogQWxsIHByb3BlcnRpZXMgZXhwZWN0IHZhbHVlcyBzaW1pbGFyIHRvIHRob3NlIGluIHRoZSBmb250LWZhY2UgQ1NTIHJ1bGUuIEEgZGlmZmVyZW5jZVxuICAgKiBpcyB0aGUgZm9udC1mYW1pbHksIHdoaWNoIGRvIG5vdCBuZWVkIHRvIGJlIGVuY2xvc2VkIGluIGRvdWJsZS1xdW90ZXMgd2hlbiBjb250YWluaW5nXG4gICAqIHNwYWNlcyBsaWtlIGluIENTUy5cbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGZhbWlseSBUaGUgbmFtZSBvZiB0aGUgZm9udC1mYW1pbHkuXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfHVuZGVmaW5lZH0gc3R5bGUgVGhlIHN0eWxlIHRoYXQgdGhpcyBmb250LWZhY2UgZGVmaW5lcywgZS5nLiAnaXRhbGljJy5cbiAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVtYmVyfHVuZGVmaW5lZH0gd2VpZ2h0IFRoZSB3ZWlnaHQgb2YgdGhlIGZvbnQsIGVpdGhlciBhcyBhIHN0cmluZyBvciBhIG51bWJlciAoNDAwLCA1MDAsIDYwMCwgZS5nLilcbiAgICogQHByb3BlcnR5IHtzdHJpbmd8dW5kZWZpbmVkfSBzdHJldGNoIFRoZSBzdHJldGNoIG9mIHRoZSBmb250LCBlLmcuIGNvbmRlbnNlZCwgbm9ybWFsLCBleHBhbmRlZC5cbiAgICogQHByb3BlcnR5IHtPYmplY3RbXX0gc3JjIEEgbGlzdCBvZiBVUkxzIGZyb20gd2hlcmUgZm9udHMgb2YgdmFyaW91cyBmb3JtYXRzIGNhbiBiZSBmZXRjaGVkLlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3NyY10gdXJsIEEgVVJMIHRvIGEgZm9udCBvZiBhIHNwZWNpZmljIGZvcm1hdC5cbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzcmNdIGZvcm1hdCBGb3JtYXQgb2YgdGhlIGZvbnQgcmVmZXJlbmNlZCBieSB0aGUgVVJMLlxuICAgKi9cblxuICAvKipcbiAgICogR2VuZXJhdGUgYSBQREYgZnJvbSBhbiBIVE1MIGVsZW1lbnQgb3Igc3RyaW5nIHVzaW5nLlxuICAgKlxuICAgKiBAbmFtZSBodG1sXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gc291cmNlIFRoZSBzb3VyY2UgSFRNTEVsZW1lbnQgb3IgYSBzdHJpbmcgY29udGFpbmluZyBIVE1MLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIENvbGxlY3Rpb24gb2Ygc2V0dGluZ3NcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMuY2FsbGJhY2tdIFRoZSBtYW5kYXRvcnkgY2FsbGJhY2stZnVuY3Rpb24gZ2V0cyBhcyBmaXJzdCBwYXJhbWV0ZXIgdGhlIGN1cnJlbnQganNQREYgaW5zdGFuY2VcbiAgICogQHBhcmFtIHsobnVtYmVyfG51bWJlcltdKT19IFtvcHRpb25zLm1hcmdpbl0gUGFnZSBtYXJnaW5zIFt0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRdLiBEZWZhdWx0IGlzIDAuXG4gICAqIEBwYXJhbSB7KGJvb2xlYW58J3NsaWNlJ3wndGV4dCcpPX0gW29wdGlvbnMuYXV0b1BhZ2luZ10gVGhlIGF1dG8gcGFnaW5nIG1vZGUuXG4gICAqIDx1bD5cbiAgICogPGxpPlxuICAgKiAgIDxjb2RlPmZhbHNlPC9jb2RlPjogQXV0byBwYWdpbmcgaXMgZGlzYWJsZWQuXG4gICAqIDwvbGk+XG4gICAqIDxsaT5cbiAgICogICA8Y29kZT50cnVlPC9jb2RlPiBvciA8Y29kZT4nc2xpY2UnPC9jb2RlPjogV2lsbCBjdXQgc2hhcGVzIG9yIHRleHQgY2h1bmtzIGFjcm9zcyBwYWdlIGJyZWFrcy4gV2lsbCBwb3NzaWJseVxuICAgKiAgIHNsaWNlIHRleHQgaW4gaGFsZiwgbWFraW5nIGl0IGRpZmZpY3VsdCB0byByZWFkLlxuICAgKiA8L2xpPlxuICAgKiA8bGk+XG4gICAqICAgPGNvZGU+J3RleHQnPC9jb2RlPjogVHJ5cyBub3QgdG8gY3V0IHRleHQgaW4gaGFsZiBhY3Jvc3MgcGFnZSBicmVha3MuIFdvcmtzIGJlc3QgZm9yIGRvY3VtZW50cyBjb25zaXN0aW5nXG4gICAqICAgbW9zdGx5IG9mIGEgc2luZ2xlIGNvbHVtbiBvZiB0ZXh0LlxuICAgKiA8L2xpPlxuICAgKiA8L3VsPlxuICAgKiBEZWZhdWx0IGlzIDxjb2RlPnRydWU8L2NvZGU+LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZmlsZW5hbWVdIG5hbWUgb2YgdGhlIGZpbGVcbiAgICogQHBhcmFtIHtIVE1MT3B0aW9uSW1hZ2V9IFtvcHRpb25zLmltYWdlXSBpbWFnZSBzZXR0aW5ncyB3aGVuIGNvbnZlcnRpbmcgSFRNTCB0byBpbWFnZVxuICAgKiBAcGFyYW0ge0h0bWwyQ2FudmFzT3B0aW9uc30gW29wdGlvbnMuaHRtbDJjYW52YXNdIGh0bWwyY2FudmFzIG9wdGlvbnNcbiAgICogQHBhcmFtIHtGb250RmFjZVtdfSBbb3B0aW9ucy5mb250RmFjZXNdIEEgbGlzdCBvZiBmb250LWZhY2VzIHRvIG1hdGNoIHdoZW4gcmVzb2x2aW5nIGZvbnRzLiBGb250cyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBQREYgYmFzZWQgb24gdGhlIHNwZWNpZmllZCBVUkwuIElmIG9taXR0ZWQsIHRoZSBmb250IG1hdGNoIGFsZ29yaXRobSBmYWxscyBiYWNrIHRvIG9sZCBhbGdvcml0aG0uXG4gICAqIEBwYXJhbSB7anNQREZ9IFtvcHRpb25zLmpzUERGXSBqc1BERiBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge251bWJlcj19IFtvcHRpb25zLnhdIHggcG9zaXRpb24gb24gdGhlIFBERiBkb2N1bWVudCBpbiBqc1BERiB1bml0cy5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBbb3B0aW9ucy55XSB5IHBvc2l0aW9uIG9uIHRoZSBQREYgZG9jdW1lbnQgaW4ganNQREYgdW5pdHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gW29wdGlvbnMud2lkdGhdIFRoZSB0YXJnZXQgd2lkdGggaW4gdGhlIFBERiBkb2N1bWVudCBpbiBqc1BERiB1bml0cy4gVGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbCBiZVxuICAgKiBzY2FsZWQgc3VjaCB0aGF0IGl0IGZpdHMgaW50byB0aGUgc3BlY2lmaWVkIHdpZHRoLiBIYXMgbm8gZWZmZWN0IGlmIGVpdGhlciB0aGUgPGNvZGU+aHRtbDJjYW52YXMuc2NhbGU8Y29kZT4gaXNcbiAgICogc3BlY2lmaWVkIG9yIHRoZSA8Y29kZT53aW5kb3dXaWR0aDwvY29kZT4gb3B0aW9uIGlzIE5PVCBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gW29wdGlvbnMud2luZG93V2lkdGhdIFRoZSB3aW5kb3cgd2lkdGggaW4gQ1NTIHBpeGVscy4gSW4gY29udHJhc3QgdG8gdGhlXG4gICAqIDxjb2RlPmh0bWwyY2FudmFzLndpbmRvd1dpZHRoPC9jb2RlPiBvcHRpb24sIHRoaXMgb3B0aW9uIGFmZmVjdHMgdGhlIGFjdHVhbCBjb250YWluZXIgc2l6ZSB3aGlsZSByZW5kZXJpbmcgYW5kXG4gICAqIGRvZXMgTk9UIGFmZmVjdCBDU1MgbWVkaWEgcXVlcmllcy4gVGhpcyBvcHRpb24gb25seSBoYXMgYW4gZWZmZWN0LCBpZiB0aGUgPGNvZGU+d2lkdGg8Y29kZT4gb3B0aW9uIGlzIGFsc28gc3BlY2lmaWVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgZG9jID0gbmV3IGpzUERGKCk7XG4gICAqXG4gICAqIGRvYy5odG1sKGRvY3VtZW50LmJvZHksIHtcbiAgICogICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkb2MpIHtcbiAgICogICAgICBkb2Muc2F2ZSgpO1xuICAgKiAgICB9LFxuICAgKiAgICB4OiAxMCxcbiAgICogICAgeTogMTBcbiAgICogfSk7XG4gICAqL1xuICBqc1BERkFQSS5odG1sID0gZnVuY3Rpb24oc3JjLCBvcHRpb25zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBvcHRpb25zLmNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuICAgIG9wdGlvbnMuaHRtbDJjYW52YXMgPSBvcHRpb25zLmh0bWwyY2FudmFzIHx8IHt9O1xuICAgIG9wdGlvbnMuaHRtbDJjYW52YXMuY2FudmFzID0gb3B0aW9ucy5odG1sMmNhbnZhcy5jYW52YXMgfHwgdGhpcy5jYW52YXM7XG4gICAgb3B0aW9ucy5qc1BERiA9IG9wdGlvbnMuanNQREYgfHwgdGhpcztcbiAgICBvcHRpb25zLmZvbnRGYWNlcyA9IG9wdGlvbnMuZm9udEZhY2VzXG4gICAgICA/IG9wdGlvbnMuZm9udEZhY2VzLm1hcChub3JtYWxpemVGb250RmFjZSlcbiAgICAgIDogbnVsbDtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyB3b3JrZXIgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihvcHRpb25zKTtcblxuICAgIGlmICghb3B0aW9ucy53b3JrZXIpIHtcbiAgICAgIC8vIElmIHdvcmtlciBpcyBub3Qgc2V0IHRvIHRydWUsIHBlcmZvcm0gdGhlIHRyYWRpdGlvbmFsICdzaW1wbGUnIG9wZXJhdGlvbi5cbiAgICAgIHJldHVybiB3b3JrZXIuZnJvbShzcmMpLmRvQ2FsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3RoZXJ3aXNlLCByZXR1cm4gdGhlIHdvcmtlciBmb3IgbmV3IFByb21pc2UtYmFzZWQgb3BlcmF0aW9uLlxuICAgICAgcmV0dXJuIHdvcmtlcjtcbiAgICB9XG4gIH07XG59KShqc1BERi5BUEkpO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE0IFN0ZXZlbiBTcHVuZ2luIChUd2VsdmVUb25lIExMQykgIHN0ZXZlbkB0d2VsdmV0b25lLnR2XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBqc1BERiBPdXRsaW5lIFBsdWdJblxuICpcbiAqIEdlbmVyYXRlcyBhIFBERiBPdXRsaW5lXG4gKiBAbmFtZSBvdXRsaW5lXG4gKiBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbihqc1BERkFQSSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgbmFtZXNPaWQ7XG4gIC8vdmFyIGRlc3RzR290byA9IFtdO1xuXG4gIGpzUERGQVBJLmV2ZW50cy5wdXNoKFtcbiAgICBcInBvc3RQdXRSZXNvdXJjZXNcIixcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwZGYgPSB0aGlzO1xuICAgICAgdmFyIHJ4ID0gL14oXFxkKykgMCBvYmokLztcblxuICAgICAgLy8gV3JpdGUgYWN0aW9uIGdvdG8gb2JqZWN0cyBmb3IgZWFjaCBwYWdlXG4gICAgICAvLyB0aGlzLm91dGxpbmUuZGVzdHNHb3RvID0gW107XG4gICAgICAvLyBmb3IgKHZhciBpID0gMDsgaSA8IHRvdGFsUGFnZXM7IGkrKykge1xuICAgICAgLy8gdmFyIGlkID0gcGRmLmludGVybmFsLm5ld09iamVjdCgpO1xuICAgICAgLy8gdGhpcy5vdXRsaW5lLmRlc3RzR290by5wdXNoKGlkKTtcbiAgICAgIC8vIHBkZi5pbnRlcm5hbC53cml0ZShcIjw8L0RbXCIgKyAoaSAqIDIgKyAzKSArIFwiIDAgUiAvWFlaIG51bGxcbiAgICAgIC8vIG51bGwgbnVsbF0vUy9Hb1RvPj4gZW5kb2JqXCIpO1xuICAgICAgLy8gfVxuICAgICAgLy9cbiAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgZGVzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIHBkZi5pbnRlcm5hbC53cml0ZShcIihwYWdlX1wiICsgKGkgKyAxKSArIFwiKVwiICsgZGVzdHNbaV0gKyBcIiAwXG4gICAgICAvLyBSXCIpO1xuICAgICAgLy8gfVxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLm91dGxpbmUucm9vdC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBsaW5lcyA9IHBkZi5vdXRsaW5lLnJlbmRlcigpLnNwbGl0KC9cXHJcXG4vKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XG4gICAgICAgICAgdmFyIG0gPSByeC5leGVjKGxpbmUpO1xuICAgICAgICAgIGlmIChtICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBvaWQgPSBtWzFdO1xuICAgICAgICAgICAgcGRmLmludGVybmFsLm5ld09iamVjdERlZmVycmVkQmVnaW4ob2lkLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBkZi5pbnRlcm5hbC53cml0ZShsaW5lKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGlzIGNvZGUgd2lsbCB3cml0ZSBuYW1lZCBkZXN0aW5hdGlvbiBmb3IgZWFjaCBwYWdlIHJlZmVyZW5jZVxuICAgICAgLy8gKHBhZ2VfMSwgZXRjKVxuICAgICAgaWYgKHRoaXMub3V0bGluZS5jcmVhdGVOYW1lZERlc3RpbmF0aW9ucykge1xuICAgICAgICB2YXIgdG90YWxQYWdlcyA9IHRoaXMuaW50ZXJuYWwucGFnZXMubGVuZ3RoO1xuICAgICAgICAvLyBXQVJOSU5HOiB0aGlzIGFzc3VtZXMganNQREYgc3RhcnRzIG9uIHBhZ2UgMyBhbmQgcGFnZUlEc1xuICAgICAgICAvLyBmb2xsb3cgNSwgNywgOSwgZXRjXG4gICAgICAgIC8vIFdyaXRlIGRlc3RpbmF0aW9uIG9iamVjdHMgZm9yIGVhY2ggcGFnZVxuICAgICAgICB2YXIgZGVzdHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3RhbFBhZ2VzOyBpKyspIHtcbiAgICAgICAgICB2YXIgaWQgPSBwZGYuaW50ZXJuYWwubmV3T2JqZWN0KCk7XG4gICAgICAgICAgZGVzdHMucHVzaChpZCk7XG4gICAgICAgICAgdmFyIGluZm8gPSBwZGYuaW50ZXJuYWwuZ2V0UGFnZUluZm8oaSArIDEpO1xuICAgICAgICAgIHBkZi5pbnRlcm5hbC53cml0ZShcbiAgICAgICAgICAgIFwiPDwgL0RbXCIgKyBpbmZvLm9iaklkICsgXCIgMCBSIC9YWVogbnVsbCBudWxsIG51bGxdPj4gZW5kb2JqXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXNzaWduIGEgbmFtZSBmb3IgZWFjaCBkZXN0aW5hdGlvblxuICAgICAgICB2YXIgbmFtZXMyT2lkID0gcGRmLmludGVybmFsLm5ld09iamVjdCgpO1xuICAgICAgICBwZGYuaW50ZXJuYWwud3JpdGUoXCI8PCAvTmFtZXMgWyBcIik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBwZGYuaW50ZXJuYWwud3JpdGUoXCIocGFnZV9cIiArIChpICsgMSkgKyBcIilcIiArIGRlc3RzW2ldICsgXCIgMCBSXCIpO1xuICAgICAgICB9XG4gICAgICAgIHBkZi5pbnRlcm5hbC53cml0ZShcIiBdID4+XCIsIFwiZW5kb2JqXCIpO1xuXG4gICAgICAgIC8vIHZhciBraWRzID0gcGRmLmludGVybmFsLm5ld09iamVjdCgpO1xuICAgICAgICAvLyBwZGYuaW50ZXJuYWwud3JpdGUoJzw8IC9LaWRzIFsgJyArIG5hbWVzMk9pZCArICcgMCBSJyk7XG4gICAgICAgIC8vIHBkZi5pbnRlcm5hbC53cml0ZSgnIF0gPj4nLCAnZW5kb2JqJyk7XG5cbiAgICAgICAgbmFtZXNPaWQgPSBwZGYuaW50ZXJuYWwubmV3T2JqZWN0KCk7XG4gICAgICAgIHBkZi5pbnRlcm5hbC53cml0ZShcIjw8IC9EZXN0cyBcIiArIG5hbWVzMk9pZCArIFwiIDAgUlwiKTtcbiAgICAgICAgcGRmLmludGVybmFsLndyaXRlKFwiPj5cIiwgXCJlbmRvYmpcIik7XG4gICAgICB9XG4gICAgfVxuICBdKTtcblxuICBqc1BERkFQSS5ldmVudHMucHVzaChbXG4gICAgXCJwdXRDYXRhbG9nXCIsXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGRmID0gdGhpcztcbiAgICAgIGlmIChwZGYub3V0bGluZS5yb290LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGRmLmludGVybmFsLndyaXRlKFxuICAgICAgICAgIFwiL091dGxpbmVzXCIsXG4gICAgICAgICAgdGhpcy5vdXRsaW5lLm1ha2VSZWYodGhpcy5vdXRsaW5lLnJvb3QpXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0aGlzLm91dGxpbmUuY3JlYXRlTmFtZWREZXN0aW5hdGlvbnMpIHtcbiAgICAgICAgICBwZGYuaW50ZXJuYWwud3JpdGUoXCIvTmFtZXMgXCIgKyBuYW1lc09pZCArIFwiIDAgUlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPcGVuIHdpdGggQm9va21hcmtzIHNob3dpbmdcbiAgICAgICAgLy8gcGRmLmludGVybmFsLndyaXRlKFwiL1BhZ2VNb2RlIC9Vc2VPdXRsaW5lc1wiKTtcbiAgICAgIH1cbiAgICB9XG4gIF0pO1xuXG4gIGpzUERGQVBJLmV2ZW50cy5wdXNoKFtcbiAgICBcImluaXRpYWxpemVkXCIsXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGRmID0gdGhpcztcblxuICAgICAgcGRmLm91dGxpbmUgPSB7XG4gICAgICAgIGNyZWF0ZU5hbWVkRGVzdGluYXRpb25zOiBmYWxzZSxcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnM6IHBhZ2VOdW1iZXJcbiAgICAgICAqL1xuICAgICAgcGRmLm91dGxpbmUuYWRkID0gZnVuY3Rpb24ocGFyZW50LCB0aXRsZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgaXRlbSA9IHtcbiAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgcGFyZW50ID0gdGhpcy5yb290O1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH07XG5cbiAgICAgIHBkZi5vdXRsaW5lLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmN0eCA9IHt9O1xuICAgICAgICB0aGlzLmN0eC52YWwgPSBcIlwiO1xuICAgICAgICB0aGlzLmN0eC5wZGYgPSBwZGY7XG5cbiAgICAgICAgdGhpcy5nZW5JZHNfcih0aGlzLnJvb3QpO1xuICAgICAgICB0aGlzLnJlbmRlclJvb3QodGhpcy5yb290KTtcbiAgICAgICAgdGhpcy5yZW5kZXJJdGVtcyh0aGlzLnJvb3QpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmN0eC52YWw7XG4gICAgICB9O1xuXG4gICAgICBwZGYub3V0bGluZS5nZW5JZHNfciA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgbm9kZS5pZCA9IHBkZi5pbnRlcm5hbC5uZXdPYmplY3REZWZlcnJlZCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmdlbklkc19yKG5vZGUuY2hpbGRyZW5baV0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBwZGYub3V0bGluZS5yZW5kZXJSb290ID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB0aGlzLm9ialN0YXJ0KG5vZGUpO1xuICAgICAgICB0aGlzLmxpbmUoXCIvVHlwZSAvT3V0bGluZXNcIik7XG4gICAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmxpbmUoXCIvRmlyc3QgXCIgKyB0aGlzLm1ha2VSZWYobm9kZS5jaGlsZHJlblswXSkpO1xuICAgICAgICAgIHRoaXMubGluZShcbiAgICAgICAgICAgIFwiL0xhc3QgXCIgKyB0aGlzLm1ha2VSZWYobm9kZS5jaGlsZHJlbltub2RlLmNoaWxkcmVuLmxlbmd0aCAtIDFdKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saW5lKFxuICAgICAgICAgIFwiL0NvdW50IFwiICtcbiAgICAgICAgICAgIHRoaXMuY291bnRfcihcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvdW50OiAwXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5vYmpFbmQoKTtcbiAgICAgIH07XG5cbiAgICAgIHBkZi5vdXRsaW5lLnJlbmRlckl0ZW1zID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgZ2V0VmVydGljYWxDb29yZGluYXRlU3RyaW5nID0gdGhpcy5jdHgucGRmLmludGVybmFsXG4gICAgICAgICAgLmdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGl0ZW0gPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgIHRoaXMub2JqU3RhcnQoaXRlbSk7XG5cbiAgICAgICAgICB0aGlzLmxpbmUoXCIvVGl0bGUgXCIgKyB0aGlzLm1ha2VTdHJpbmcoaXRlbS50aXRsZSkpO1xuXG4gICAgICAgICAgdGhpcy5saW5lKFwiL1BhcmVudCBcIiArIHRoaXMubWFrZVJlZihub2RlKSk7XG4gICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmUoXCIvUHJldiBcIiArIHRoaXMubWFrZVJlZihub2RlLmNoaWxkcmVuW2kgLSAxXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5saW5lKFwiL05leHQgXCIgKyB0aGlzLm1ha2VSZWYobm9kZS5jaGlsZHJlbltpICsgMV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5saW5lKFwiL0ZpcnN0IFwiICsgdGhpcy5tYWtlUmVmKGl0ZW0uY2hpbGRyZW5bMF0pKTtcbiAgICAgICAgICAgIHRoaXMubGluZShcbiAgICAgICAgICAgICAgXCIvTGFzdCBcIiArIHRoaXMubWFrZVJlZihpdGVtLmNoaWxkcmVuW2l0ZW0uY2hpbGRyZW4ubGVuZ3RoIC0gMV0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBjb3VudCA9ICh0aGlzLmNvdW50ID0gdGhpcy5jb3VudF9yKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjb3VudDogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICApKTtcbiAgICAgICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmUoXCIvQ291bnQgXCIgKyBjb3VudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGl0ZW0ub3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGl0ZW0ub3B0aW9ucy5wYWdlTnVtYmVyKSB7XG4gICAgICAgICAgICAgIC8vIEV4cGxpY2l0IERlc3RpbmF0aW9uXG4gICAgICAgICAgICAgIC8vV0FSTklORyB0aGlzIGFzc3VtZXMgcGFnZSBpZHMgYXJlIDMsNSw3LCBldGMuXG4gICAgICAgICAgICAgIHZhciBpbmZvID0gcGRmLmludGVybmFsLmdldFBhZ2VJbmZvKGl0ZW0ub3B0aW9ucy5wYWdlTnVtYmVyKTtcbiAgICAgICAgICAgICAgdGhpcy5saW5lKFxuICAgICAgICAgICAgICAgIFwiL0Rlc3QgXCIgK1xuICAgICAgICAgICAgICAgICAgXCJbXCIgK1xuICAgICAgICAgICAgICAgICAgaW5mby5vYmpJZCArXG4gICAgICAgICAgICAgICAgICBcIiAwIFIgL1hZWiAwIFwiICtcbiAgICAgICAgICAgICAgICAgIGdldFZlcnRpY2FsQ29vcmRpbmF0ZVN0cmluZygwKSArXG4gICAgICAgICAgICAgICAgICBcIiAwXVwiXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIC8vIHRoaXMgbGluZSBkb2VzIG5vdCB3b3JrIG9uIGFsbCBjbGllbnRzIChwYWdlTnVtYmVyIGluc3RlYWQgb2YgcGFnZSByZWYpXG4gICAgICAgICAgICAgIC8vdGhpcy5saW5lKCcvRGVzdCAnICsgJ1snICsgKGl0ZW0ub3B0aW9ucy5wYWdlTnVtYmVyIC0gMSkgKyAnIC9YWVogMCAnICsgdGhpcy5jdHgucGRmLmludGVybmFsLnBhZ2VTaXplLmdldEhlaWdodCgpICsgJyAwXScpO1xuXG4gICAgICAgICAgICAgIC8vIE5hbWVkIERlc3RpbmF0aW9uXG4gICAgICAgICAgICAgIC8vIHRoaXMubGluZSgnL0Rlc3QgKHBhZ2VfJyArIChpdGVtLm9wdGlvbnMucGFnZU51bWJlcikgKyAnKScpO1xuXG4gICAgICAgICAgICAgIC8vIEFjdGlvbiBEZXN0aW5hdGlvblxuICAgICAgICAgICAgICAvLyB2YXIgaWQgPSBwZGYuaW50ZXJuYWwubmV3T2JqZWN0KCk7XG4gICAgICAgICAgICAgIC8vIHBkZi5pbnRlcm5hbC53cml0ZSgnPDwvRFsnICsgKGl0ZW0ub3B0aW9ucy5wYWdlTnVtYmVyIC0gMSkgKyAnIC9YWVogbnVsbCBudWxsIG51bGxdL1MvR29Ubz4+IGVuZG9iaicpO1xuICAgICAgICAgICAgICAvLyB0aGlzLmxpbmUoJy9BICcgKyBpZCArICcgMCBSJyApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9iakVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIHogPSAwOyB6IDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IHorKykge1xuICAgICAgICAgIHRoaXMucmVuZGVySXRlbXMobm9kZS5jaGlsZHJlblt6XSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHBkZi5vdXRsaW5lLmxpbmUgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgIHRoaXMuY3R4LnZhbCArPSB0ZXh0ICsgXCJcXHJcXG5cIjtcbiAgICAgIH07XG5cbiAgICAgIHBkZi5vdXRsaW5lLm1ha2VSZWYgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLmlkICsgXCIgMCBSXCI7XG4gICAgICB9O1xuXG4gICAgICBwZGYub3V0bGluZS5tYWtlU3RyaW5nID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHJldHVybiBcIihcIiArIHBkZi5pbnRlcm5hbC5wZGZFc2NhcGUodmFsKSArIFwiKVwiO1xuICAgICAgfTtcblxuICAgICAgcGRmLm91dGxpbmUub2JqU3RhcnQgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHRoaXMuY3R4LnZhbCArPSBcIlxcclxcblwiICsgbm9kZS5pZCArIFwiIDAgb2JqXCIgKyBcIlxcclxcbjw8XFxyXFxuXCI7XG4gICAgICB9O1xuXG4gICAgICBwZGYub3V0bGluZS5vYmpFbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jdHgudmFsICs9IFwiPj4gXFxyXFxuXCIgKyBcImVuZG9ialwiICsgXCJcXHJcXG5cIjtcbiAgICAgIH07XG5cbiAgICAgIHBkZi5vdXRsaW5lLmNvdW50X3IgPSBmdW5jdGlvbihjdHgsIG5vZGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY3R4LmNvdW50Kys7XG4gICAgICAgICAgdGhpcy5jb3VudF9yKGN0eCwgbm9kZS5jaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN0eC5jb3VudDtcbiAgICAgIH07XG4gICAgfVxuICBdKTtcblxuICByZXR1cm4gdGhpcztcbn0pKGpzUERGLkFQSSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBqc1BERiBqcGVnIFN1cHBvcnQgUGx1Z0luXG4gKlxuICogQG5hbWUganBlZ19zdXBwb3J0XG4gKiBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbihqc1BERkFQSSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvKipcbiAgICogMHhjMCAoU09GKSBIdWZmbWFuICAtIEJhc2VsaW5lIERDVFxuICAgKiAweGMxIChTT0YpIEh1ZmZtYW4gIC0gRXh0ZW5kZWQgc2VxdWVudGlhbCBEQ1RcbiAgICogMHhjMiBQcm9ncmVzc2l2ZSBEQ1QgKFNPRjIpXG4gICAqIDB4YzMgU3BhdGlhbCAoc2VxdWVudGlhbCkgbG9zc2xlc3MgKFNPRjMpXG4gICAqIDB4YzQgRGlmZmVyZW50aWFsIHNlcXVlbnRpYWwgRENUIChTT0Y1KVxuICAgKiAweGM1IERpZmZlcmVudGlhbCBwcm9ncmVzc2l2ZSBEQ1QgKFNPRjYpXG4gICAqIDB4YzYgRGlmZmVyZW50aWFsIHNwYXRpYWwgKFNPRjcpXG4gICAqIDB4YzdcbiAgICovXG4gIHZhciBtYXJrZXJzID0gWzB4YzAsIDB4YzEsIDB4YzIsIDB4YzMsIDB4YzQsIDB4YzUsIDB4YzYsIDB4YzddO1xuXG4gIC8vdGFrZXMgYSBzdHJpbmcgaW1nRGF0YSBjb250YWluaW5nIHRoZSByYXcgYnl0ZXMgb2ZcbiAgLy9hIGpwZWcgaW1hZ2UgYW5kIHJldHVybnMgW3dpZHRoLCBoZWlnaHRdXG4gIC8vQWxnb3JpdGhtIGZyb206IGh0dHA6Ly93d3cuNjRsaW5lcy5jb20vanBlZy13aWR0aC1oZWlnaHRcbiAgdmFyIGdldEpwZWdJbmZvID0gZnVuY3Rpb24oaW1nRGF0YSkge1xuICAgIHZhciB3aWR0aCwgaGVpZ2h0LCBudW1jb21wb25lbnRzO1xuICAgIHZhciBibG9ja0xlbmd0aCA9IGltZ0RhdGEuY2hhckNvZGVBdCg0KSAqIDI1NiArIGltZ0RhdGEuY2hhckNvZGVBdCg1KTtcbiAgICB2YXIgbGVuID0gaW1nRGF0YS5sZW5ndGg7XG4gICAgdmFyIHJlc3VsdCA9IHsgd2lkdGg6IDAsIGhlaWdodDogMCwgbnVtY29tcG9uZW50czogMSB9O1xuICAgIGZvciAodmFyIGkgPSA0OyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICAgIGkgKz0gYmxvY2tMZW5ndGg7XG4gICAgICBpZiAobWFya2Vycy5pbmRleE9mKGltZ0RhdGEuY2hhckNvZGVBdChpICsgMSkpICE9PSAtMSkge1xuICAgICAgICBoZWlnaHQgPSBpbWdEYXRhLmNoYXJDb2RlQXQoaSArIDUpICogMjU2ICsgaW1nRGF0YS5jaGFyQ29kZUF0KGkgKyA2KTtcbiAgICAgICAgd2lkdGggPSBpbWdEYXRhLmNoYXJDb2RlQXQoaSArIDcpICogMjU2ICsgaW1nRGF0YS5jaGFyQ29kZUF0KGkgKyA4KTtcbiAgICAgICAgbnVtY29tcG9uZW50cyA9IGltZ0RhdGEuY2hhckNvZGVBdChpICsgOSk7XG4gICAgICAgIHJlc3VsdCA9IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgbnVtY29tcG9uZW50czogbnVtY29tcG9uZW50cyB9O1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJsb2NrTGVuZ3RoID1cbiAgICAgICAgICBpbWdEYXRhLmNoYXJDb2RlQXQoaSArIDIpICogMjU2ICsgaW1nRGF0YS5jaGFyQ29kZUF0KGkgKyAzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAganNQREZBUEkucHJvY2Vzc0pQRUcgPSBmdW5jdGlvbihcbiAgICBkYXRhLFxuICAgIGluZGV4LFxuICAgIGFsaWFzLFxuICAgIGNvbXByZXNzaW9uLFxuICAgIGRhdGFBc0JpbmFyeVN0cmluZyxcbiAgICBjb2xvclNwYWNlXG4gICkge1xuICAgIHZhciBmaWx0ZXIgPSB0aGlzLmRlY29kZS5EQ1RfREVDT0RFLFxuICAgICAgYnBjID0gOCxcbiAgICAgIGRpbXMsXG4gICAgICByZXN1bHQgPSBudWxsO1xuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgIHRoaXMuX19hZGRpbWFnZV9fLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHRoaXMuX19hZGRpbWFnZV9fLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpXG4gICAgKSB7XG4gICAgICAvLyBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBzdG9yZWQgYmluYXJ5IHN0cmluZyByZXAgdXNlIHRoYXRcbiAgICAgIGRhdGEgPSBkYXRhQXNCaW5hcnlTdHJpbmcgfHwgZGF0YTtcbiAgICAgIGRhdGEgPSB0aGlzLl9fYWRkaW1hZ2VfXy5pc0FycmF5QnVmZmVyKGRhdGEpXG4gICAgICAgID8gbmV3IFVpbnQ4QXJyYXkoZGF0YSlcbiAgICAgICAgOiBkYXRhO1xuICAgICAgZGF0YSA9IHRoaXMuX19hZGRpbWFnZV9fLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpXG4gICAgICAgID8gdGhpcy5fX2FkZGltYWdlX18uYXJyYXlCdWZmZXJUb0JpbmFyeVN0cmluZyhkYXRhKVxuICAgICAgICA6IGRhdGE7XG5cbiAgICAgIGRpbXMgPSBnZXRKcGVnSW5mbyhkYXRhKTtcbiAgICAgIHN3aXRjaCAoZGltcy5udW1jb21wb25lbnRzKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBjb2xvclNwYWNlID0gdGhpcy5jb2xvcl9zcGFjZXMuREVWSUNFX0dSQVk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBjb2xvclNwYWNlID0gdGhpcy5jb2xvcl9zcGFjZXMuREVWSUNFX0NNWUs7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjb2xvclNwYWNlID0gdGhpcy5jb2xvcl9zcGFjZXMuREVWSUNFX1JHQjtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICB3aWR0aDogZGltcy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBkaW1zLmhlaWdodCxcbiAgICAgICAgY29sb3JTcGFjZTogY29sb3JTcGFjZSxcbiAgICAgICAgYml0c1BlckNvbXBvbmVudDogYnBjLFxuICAgICAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICBhbGlhczogYWxpYXNcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59KShqc1BERi5BUEkpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjQuMFxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBQTkcuanNcbiAqIENvcHlyaWdodCAoYykgMjAxMSBEZXZvbiBHb3ZldHRcbiAqIE1JVCBMSUNFTlNFXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsXG4gKiBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnNcbiAqIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvclxuICogc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HXG4gKiBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAqIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4gKiBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5pbXBvcnQgeyB1bnpsaWJTeW5jIH0gZnJvbSBcIi4vZmZsYXRlLmpzXCI7XG5pbXBvcnQgeyBnbG9iYWxPYmplY3QgfSBmcm9tIFwiLi9nbG9iYWxPYmplY3QuanNcIjtcblxudmFyIFBORyA9IChmdW5jdGlvbigpIHtcbiAgdmFyIEFQTkdfQkxFTkRfT1BfT1ZFUixcbiAgICBBUE5HX0JMRU5EX09QX1NPVVJDRSxcbiAgICBBUE5HX0RJU1BPU0VfT1BfQkFDS0dST1VORCxcbiAgICBBUE5HX0RJU1BPU0VfT1BfTk9ORSxcbiAgICBBUE5HX0RJU1BPU0VfT1BfUFJFVklPVVMsXG4gICAgbWFrZUltYWdlLFxuICAgIHNjcmF0Y2hDYW52YXMsXG4gICAgc2NyYXRjaEN0eDtcblxuICBBUE5HX0RJU1BPU0VfT1BfTk9ORSA9IDA7XG5cbiAgQVBOR19ESVNQT1NFX09QX0JBQ0tHUk9VTkQgPSAxO1xuXG4gIEFQTkdfRElTUE9TRV9PUF9QUkVWSU9VUyA9IDI7XG5cbiAgQVBOR19CTEVORF9PUF9TT1VSQ0UgPSAwO1xuXG4gIEFQTkdfQkxFTkRfT1BfT1ZFUiA9IDE7XG5cbiAgZnVuY3Rpb24gUE5HKGRhdGEpIHtcbiAgICB2YXIgY2h1bmtTaXplLFxuICAgICAgY29sb3JzLFxuICAgICAgcGFsTGVuLFxuICAgICAgZGVsYXlEZW4sXG4gICAgICBkZWxheU51bSxcbiAgICAgIGZyYW1lLFxuICAgICAgaSxcbiAgICAgIGluZGV4LFxuICAgICAga2V5LFxuICAgICAgc2VjdGlvbixcbiAgICAgIHBhbFNob3J0LFxuICAgICAgdGV4dCxcbiAgICAgIF9pLFxuICAgICAgX2osXG4gICAgICBfcmVmO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5wb3MgPSA4O1xuICAgIHRoaXMucGFsZXR0ZSA9IFtdO1xuICAgIHRoaXMuaW1nRGF0YSA9IFtdO1xuICAgIHRoaXMudHJhbnNwYXJlbmN5ID0ge307XG4gICAgdGhpcy5hbmltYXRpb24gPSBudWxsO1xuICAgIHRoaXMudGV4dCA9IHt9O1xuICAgIGZyYW1lID0gbnVsbDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY2h1bmtTaXplID0gdGhpcy5yZWFkVUludDMyKCk7XG4gICAgICBzZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfaSwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaSA9IF9pID0gMDsgX2kgPCA0OyBpID0gKytfaSkge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmRhdGFbdGhpcy5wb3MrK10pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9XG4gICAgICAgIC5jYWxsKHRoaXMpXG4gICAgICAgIC5qb2luKFwiXCIpO1xuICAgICAgc3dpdGNoIChzZWN0aW9uKSB7XG4gICAgICAgIGNhc2UgXCJJSERSXCI6XG4gICAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMucmVhZFVJbnQzMigpO1xuICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5yZWFkVUludDMyKCk7XG4gICAgICAgICAgdGhpcy5iaXRzID0gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICAgICAgICAgIHRoaXMuY29sb3JUeXBlID0gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICAgICAgICAgIHRoaXMuY29tcHJlc3Npb25NZXRob2QgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgdGhpcy5maWx0ZXJNZXRob2QgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgdGhpcy5pbnRlcmxhY2VNZXRob2QgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhY1RMXCI6XG4gICAgICAgICAgdGhpcy5hbmltYXRpb24gPSB7XG4gICAgICAgICAgICBudW1GcmFtZXM6IHRoaXMucmVhZFVJbnQzMigpLFxuICAgICAgICAgICAgbnVtUGxheXM6IHRoaXMucmVhZFVJbnQzMigpIHx8IEluZmluaXR5LFxuICAgICAgICAgICAgZnJhbWVzOiBbXVxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJQTFRFXCI6XG4gICAgICAgICAgdGhpcy5wYWxldHRlID0gdGhpcy5yZWFkKGNodW5rU2l6ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJmY1RMXCI6XG4gICAgICAgICAgaWYgKGZyYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbi5mcmFtZXMucHVzaChmcmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucG9zICs9IDQ7XG4gICAgICAgICAgZnJhbWUgPSB7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy5yZWFkVUludDMyKCksXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMucmVhZFVJbnQzMigpLFxuICAgICAgICAgICAgeE9mZnNldDogdGhpcy5yZWFkVUludDMyKCksXG4gICAgICAgICAgICB5T2Zmc2V0OiB0aGlzLnJlYWRVSW50MzIoKVxuICAgICAgICAgIH07XG4gICAgICAgICAgZGVsYXlOdW0gPSB0aGlzLnJlYWRVSW50MTYoKTtcbiAgICAgICAgICBkZWxheURlbiA9IHRoaXMucmVhZFVJbnQxNigpIHx8IDEwMDtcbiAgICAgICAgICBmcmFtZS5kZWxheSA9ICgxMDAwICogZGVsYXlOdW0pIC8gZGVsYXlEZW47XG4gICAgICAgICAgZnJhbWUuZGlzcG9zZU9wID0gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICAgICAgICAgIGZyYW1lLmJsZW5kT3AgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgZnJhbWUuZGF0YSA9IFtdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiSURBVFwiOlxuICAgICAgICBjYXNlIFwiZmRBVFwiOlxuICAgICAgICAgIGlmIChzZWN0aW9uID09PSBcImZkQVRcIikge1xuICAgICAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgICAgIGNodW5rU2l6ZSAtPSA0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhID0gKGZyYW1lICE9IG51bGwgPyBmcmFtZS5kYXRhIDogdm9pZCAwKSB8fCB0aGlzLmltZ0RhdGE7XG4gICAgICAgICAgZm9yIChcbiAgICAgICAgICAgIGkgPSBfaSA9IDA7XG4gICAgICAgICAgICAwIDw9IGNodW5rU2l6ZSA/IF9pIDwgY2h1bmtTaXplIDogX2kgPiBjaHVua1NpemU7XG4gICAgICAgICAgICBpID0gMCA8PSBjaHVua1NpemUgPyArK19pIDogLS1faVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGF0YS5wdXNoKHRoaXMuZGF0YVt0aGlzLnBvcysrXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidFJOU1wiOlxuICAgICAgICAgIHRoaXMudHJhbnNwYXJlbmN5ID0ge307XG4gICAgICAgICAgc3dpdGNoICh0aGlzLmNvbG9yVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICBwYWxMZW4gPSB0aGlzLnBhbGV0dGUubGVuZ3RoIC8gMztcbiAgICAgICAgICAgICAgdGhpcy50cmFuc3BhcmVuY3kuaW5kZXhlZCA9IHRoaXMucmVhZChjaHVua1NpemUpO1xuICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc3BhcmVuY3kuaW5kZXhlZC5sZW5ndGggPiBwYWxMZW4pXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTW9yZSB0cmFuc3BhcmVudCBjb2xvcnMgdGhhbiBwYWxldHRlIHNpemVcIik7XG4gICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAqIEFjY29yZGluZyB0byB0aGUgUE5HIHNwZWMgdHJucyBzaG91bGQgYmUgaW5jcmVhc2VkIHRvIHRoZSBzYW1lIHNpemUgYXMgcGFsZXR0ZSBpZiBzaG9ydGVyXG4gICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAvL3BhbFNob3J0ID0gMjU1IC0gdGhpcy50cmFuc3BhcmVuY3kuaW5kZXhlZC5sZW5ndGg7XG4gICAgICAgICAgICAgIHBhbFNob3J0ID0gcGFsTGVuIC0gdGhpcy50cmFuc3BhcmVuY3kuaW5kZXhlZC5sZW5ndGg7XG4gICAgICAgICAgICAgIGlmIChwYWxTaG9ydCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgICAgaSA9IF9qID0gMDtcbiAgICAgICAgICAgICAgICAgIDAgPD0gcGFsU2hvcnQgPyBfaiA8IHBhbFNob3J0IDogX2ogPiBwYWxTaG9ydDtcbiAgICAgICAgICAgICAgICAgIGkgPSAwIDw9IHBhbFNob3J0ID8gKytfaiA6IC0tX2pcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwYXJlbmN5LmluZGV4ZWQucHVzaCgyNTUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgdGhpcy50cmFuc3BhcmVuY3kuZ3JheXNjYWxlID0gdGhpcy5yZWFkKGNodW5rU2l6ZSlbMF07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICB0aGlzLnRyYW5zcGFyZW5jeS5yZ2IgPSB0aGlzLnJlYWQoY2h1bmtTaXplKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0RVh0XCI6XG4gICAgICAgICAgdGV4dCA9IHRoaXMucmVhZChjaHVua1NpemUpO1xuICAgICAgICAgIGluZGV4ID0gdGV4dC5pbmRleE9mKDApO1xuICAgICAgICAgIGtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCB0ZXh0LnNsaWNlKDAsIGluZGV4KSk7XG4gICAgICAgICAgdGhpcy50ZXh0W2tleV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgICAgICAgU3RyaW5nLFxuICAgICAgICAgICAgdGV4dC5zbGljZShpbmRleCArIDEpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIklFTkRcIjpcbiAgICAgICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLmZyYW1lcy5wdXNoKGZyYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jb2xvcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb2xvclR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfS5jYWxsKHRoaXMpO1xuICAgICAgICAgIHRoaXMuaGFzQWxwaGFDaGFubmVsID0gKF9yZWYgPSB0aGlzLmNvbG9yVHlwZSkgPT09IDQgfHwgX3JlZiA9PT0gNjtcbiAgICAgICAgICBjb2xvcnMgPSB0aGlzLmNvbG9ycyArICh0aGlzLmhhc0FscGhhQ2hhbm5lbCA/IDEgOiAwKTtcbiAgICAgICAgICB0aGlzLnBpeGVsQml0bGVuZ3RoID0gdGhpcy5iaXRzICogY29sb3JzO1xuICAgICAgICAgIHRoaXMuY29sb3JTcGFjZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmNvbG9ycykge1xuICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiRGV2aWNlR3JheVwiO1xuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiRGV2aWNlUkdCXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfS5jYWxsKHRoaXMpO1xuICAgICAgICAgIHRoaXMuaW1nRGF0YSA9IG5ldyBVaW50OEFycmF5KHRoaXMuaW1nRGF0YSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMucG9zICs9IGNodW5rU2l6ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMucG9zICs9IDQ7XG4gICAgICBpZiAodGhpcy5wb3MgPiB0aGlzLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29tcGxldGUgb3IgY29ycnVwdCBQTkcgZmlsZVwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBQTkcucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbihieXRlcykge1xuICAgIHZhciBpLCBfaSwgX3Jlc3VsdHM7XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKFxuICAgICAgaSA9IF9pID0gMDtcbiAgICAgIDAgPD0gYnl0ZXMgPyBfaSA8IGJ5dGVzIDogX2kgPiBieXRlcztcbiAgICAgIGkgPSAwIDw9IGJ5dGVzID8gKytfaSA6IC0tX2lcbiAgICApIHtcbiAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5kYXRhW3RoaXMucG9zKytdKTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9O1xuXG4gIFBORy5wcm90b3R5cGUucmVhZFVJbnQzMiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiMSwgYjIsIGIzLCBiNDtcbiAgICBiMSA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXSA8PCAyNDtcbiAgICBiMiA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXSA8PCAxNjtcbiAgICBiMyA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXSA8PCA4O1xuICAgIGI0ID0gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICAgIHJldHVybiBiMSB8IGIyIHwgYjMgfCBiNDtcbiAgfTtcblxuICBQTkcucHJvdG90eXBlLnJlYWRVSW50MTYgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYjEsIGIyO1xuICAgIGIxID0gdGhpcy5kYXRhW3RoaXMucG9zKytdIDw8IDg7XG4gICAgYjIgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgcmV0dXJuIGIxIHwgYjI7XG4gIH07XG5cbiAgUE5HLnByb3RvdHlwZS5kZWNvZGVQaXhlbHMgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIHBpeGVsQnl0ZXMgPSB0aGlzLnBpeGVsQml0bGVuZ3RoIC8gODtcbiAgICB2YXIgZnVsbFBpeGVscyA9IG5ldyBVaW50OEFycmF5KHRoaXMud2lkdGggKiB0aGlzLmhlaWdodCAqIHBpeGVsQnl0ZXMpO1xuICAgIHZhciBwb3MgPSAwO1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICBkYXRhID0gdGhpcy5pbWdEYXRhO1xuICAgIH1cbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcbiAgICB9XG5cbiAgICBkYXRhID0gdW56bGliU3luYyhkYXRhKTtcbiAgICBmdW5jdGlvbiBwYXNzKHgwLCB5MCwgZHgsIGR5KSB7XG4gICAgICB2YXIgYWJ5dGUsXG4gICAgICAgIGMsXG4gICAgICAgIGNvbCxcbiAgICAgICAgaSxcbiAgICAgICAgbGVmdCxcbiAgICAgICAgbGVuZ3RoLFxuICAgICAgICBwLFxuICAgICAgICBwYSxcbiAgICAgICAgcGFldGgsXG4gICAgICAgIHBiLFxuICAgICAgICBwYyxcbiAgICAgICAgcGl4ZWxzLFxuICAgICAgICByb3csXG4gICAgICAgIHNjYW5saW5lTGVuZ3RoLFxuICAgICAgICB1cHBlcixcbiAgICAgICAgdXBwZXJMZWZ0LFxuICAgICAgICBfaSxcbiAgICAgICAgX2osXG4gICAgICAgIF9rLFxuICAgICAgICBfbCxcbiAgICAgICAgX207XG4gICAgICB2YXIgdyA9IE1hdGguY2VpbCgoX3RoaXMud2lkdGggLSB4MCkgLyBkeCksXG4gICAgICAgIGggPSBNYXRoLmNlaWwoKF90aGlzLmhlaWdodCAtIHkwKSAvIGR5KTtcbiAgICAgIHZhciBpc0Z1bGwgPSBfdGhpcy53aWR0aCA9PSB3ICYmIF90aGlzLmhlaWdodCA9PSBoO1xuICAgICAgc2NhbmxpbmVMZW5ndGggPSBwaXhlbEJ5dGVzICogdztcbiAgICAgIHBpeGVscyA9IGlzRnVsbCA/IGZ1bGxQaXhlbHMgOiBuZXcgVWludDhBcnJheShzY2FubGluZUxlbmd0aCAqIGgpO1xuICAgICAgbGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICByb3cgPSAwO1xuICAgICAgYyA9IDA7XG4gICAgICB3aGlsZSAocm93IDwgaCAmJiBwb3MgPCBsZW5ndGgpIHtcbiAgICAgICAgc3dpdGNoIChkYXRhW3BvcysrXSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGZvciAoaSA9IF9pID0gMDsgX2kgPCBzY2FubGluZUxlbmd0aDsgaSA9IF9pICs9IDEpIHtcbiAgICAgICAgICAgICAgcGl4ZWxzW2MrK10gPSBkYXRhW3BvcysrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGZvciAoaSA9IF9qID0gMDsgX2ogPCBzY2FubGluZUxlbmd0aDsgaSA9IF9qICs9IDEpIHtcbiAgICAgICAgICAgICAgYWJ5dGUgPSBkYXRhW3BvcysrXTtcbiAgICAgICAgICAgICAgbGVmdCA9IGkgPCBwaXhlbEJ5dGVzID8gMCA6IHBpeGVsc1tjIC0gcGl4ZWxCeXRlc107XG4gICAgICAgICAgICAgIHBpeGVsc1tjKytdID0gKGFieXRlICsgbGVmdCkgJSAyNTY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBmb3IgKGkgPSBfayA9IDA7IF9rIDwgc2NhbmxpbmVMZW5ndGg7IGkgPSBfayArPSAxKSB7XG4gICAgICAgICAgICAgIGFieXRlID0gZGF0YVtwb3MrK107XG4gICAgICAgICAgICAgIGNvbCA9IChpIC0gKGkgJSBwaXhlbEJ5dGVzKSkgLyBwaXhlbEJ5dGVzO1xuICAgICAgICAgICAgICB1cHBlciA9XG4gICAgICAgICAgICAgICAgcm93ICYmXG4gICAgICAgICAgICAgICAgcGl4ZWxzW1xuICAgICAgICAgICAgICAgICAgKHJvdyAtIDEpICogc2NhbmxpbmVMZW5ndGggK1xuICAgICAgICAgICAgICAgICAgICBjb2wgKiBwaXhlbEJ5dGVzICtcbiAgICAgICAgICAgICAgICAgICAgKGkgJSBwaXhlbEJ5dGVzKVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgIHBpeGVsc1tjKytdID0gKHVwcGVyICsgYWJ5dGUpICUgMjU2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgZm9yIChpID0gX2wgPSAwOyBfbCA8IHNjYW5saW5lTGVuZ3RoOyBpID0gX2wgKz0gMSkge1xuICAgICAgICAgICAgICBhYnl0ZSA9IGRhdGFbcG9zKytdO1xuICAgICAgICAgICAgICBjb2wgPSAoaSAtIChpICUgcGl4ZWxCeXRlcykpIC8gcGl4ZWxCeXRlcztcbiAgICAgICAgICAgICAgbGVmdCA9IGkgPCBwaXhlbEJ5dGVzID8gMCA6IHBpeGVsc1tjIC0gcGl4ZWxCeXRlc107XG4gICAgICAgICAgICAgIHVwcGVyID1cbiAgICAgICAgICAgICAgICByb3cgJiZcbiAgICAgICAgICAgICAgICBwaXhlbHNbXG4gICAgICAgICAgICAgICAgICAocm93IC0gMSkgKiBzY2FubGluZUxlbmd0aCArXG4gICAgICAgICAgICAgICAgICAgIGNvbCAqIHBpeGVsQnl0ZXMgK1xuICAgICAgICAgICAgICAgICAgICAoaSAlIHBpeGVsQnl0ZXMpXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgcGl4ZWxzW2MrK10gPSAoYWJ5dGUgKyBNYXRoLmZsb29yKChsZWZ0ICsgdXBwZXIpIC8gMikpICUgMjU2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgZm9yIChpID0gX20gPSAwOyBfbSA8IHNjYW5saW5lTGVuZ3RoOyBpID0gX20gKz0gMSkge1xuICAgICAgICAgICAgICBhYnl0ZSA9IGRhdGFbcG9zKytdO1xuICAgICAgICAgICAgICBjb2wgPSAoaSAtIChpICUgcGl4ZWxCeXRlcykpIC8gcGl4ZWxCeXRlcztcbiAgICAgICAgICAgICAgbGVmdCA9IGkgPCBwaXhlbEJ5dGVzID8gMCA6IHBpeGVsc1tjIC0gcGl4ZWxCeXRlc107XG4gICAgICAgICAgICAgIGlmIChyb3cgPT09IDApIHtcbiAgICAgICAgICAgICAgICB1cHBlciA9IHVwcGVyTGVmdCA9IDA7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdXBwZXIgPVxuICAgICAgICAgICAgICAgICAgcGl4ZWxzW1xuICAgICAgICAgICAgICAgICAgICAocm93IC0gMSkgKiBzY2FubGluZUxlbmd0aCArXG4gICAgICAgICAgICAgICAgICAgICAgY29sICogcGl4ZWxCeXRlcyArXG4gICAgICAgICAgICAgICAgICAgICAgKGkgJSBwaXhlbEJ5dGVzKVxuICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB1cHBlckxlZnQgPVxuICAgICAgICAgICAgICAgICAgY29sICYmXG4gICAgICAgICAgICAgICAgICBwaXhlbHNbXG4gICAgICAgICAgICAgICAgICAgIChyb3cgLSAxKSAqIHNjYW5saW5lTGVuZ3RoICtcbiAgICAgICAgICAgICAgICAgICAgICAoY29sIC0gMSkgKiBwaXhlbEJ5dGVzICtcbiAgICAgICAgICAgICAgICAgICAgICAoaSAlIHBpeGVsQnl0ZXMpXG4gICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHAgPSBsZWZ0ICsgdXBwZXIgLSB1cHBlckxlZnQ7XG4gICAgICAgICAgICAgIHBhID0gTWF0aC5hYnMocCAtIGxlZnQpO1xuICAgICAgICAgICAgICBwYiA9IE1hdGguYWJzKHAgLSB1cHBlcik7XG4gICAgICAgICAgICAgIHBjID0gTWF0aC5hYnMocCAtIHVwcGVyTGVmdCk7XG4gICAgICAgICAgICAgIGlmIChwYSA8PSBwYiAmJiBwYSA8PSBwYykge1xuICAgICAgICAgICAgICAgIHBhZXRoID0gbGVmdDtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYiA8PSBwYykge1xuICAgICAgICAgICAgICAgIHBhZXRoID0gdXBwZXI7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFldGggPSB1cHBlckxlZnQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGl4ZWxzW2MrK10gPSAoYWJ5dGUgKyBwYWV0aCkgJSAyNTY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBmaWx0ZXIgYWxnb3JpdGhtOiBcIiArIGRhdGFbcG9zIC0gMV0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNGdWxsKSB7XG4gICAgICAgICAgdmFyIGZ1bGxQb3MgPSAoKHkwICsgcm93ICogZHkpICogX3RoaXMud2lkdGggKyB4MCkgKiBwaXhlbEJ5dGVzO1xuICAgICAgICAgIHZhciBwYXJ0UG9zID0gcm93ICogc2NhbmxpbmVMZW5ndGg7XG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IHc7IGkgKz0gMSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwaXhlbEJ5dGVzOyBqICs9IDEpXG4gICAgICAgICAgICAgIGZ1bGxQaXhlbHNbZnVsbFBvcysrXSA9IHBpeGVsc1twYXJ0UG9zKytdO1xuICAgICAgICAgICAgZnVsbFBvcyArPSAoZHggLSAxKSAqIHBpeGVsQnl0ZXM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJvdysrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoX3RoaXMuaW50ZXJsYWNlTWV0aG9kID09IDEpIHtcbiAgICAgIC8qXG4gICAgICAgICAgMSA2IDQgNiAyIDYgNCA2XG4gICAgICAgICAgNyA3IDcgNyA3IDcgNyA3XG4gICAgICAgICAgNSA2IDUgNiA1IDYgNSA2XG4gICAgICAgICAgNyA3IDcgNyA3IDcgNyA3XG4gICAgICAgICAgMyA2IDQgNiAzIDYgNCA2XG4gICAgICAgICAgNyA3IDcgNyA3IDcgNyA3XG4gICAgICAgICAgNSA2IDUgNiA1IDYgNSA2XG4gICAgICAgICAgNyA3IDcgNyA3IDcgNyA3XG4gICAgICAgICovXG4gICAgICBwYXNzKDAsIDAsIDgsIDgpOyAvLyAxXG4gICAgICAvKiBOT1RFIHRoZXNlIHNlZW0gdG8gZm9sbG93IHRoZSBwYXR0ZXJuOlxuICAgICAgICogcGFzcyh4LCAwLCAyKngsIDIqeCk7XG4gICAgICAgKiBwYXNzKDAsIHgsICAgeCwgMip4KTtcbiAgICAgICAqIHdpdGggeCBiZWluZyA0LCAyLCAxLlxuICAgICAgICovXG4gICAgICBwYXNzKDQsIDAsIDgsIDgpOyAvLyAyXG4gICAgICBwYXNzKDAsIDQsIDQsIDgpOyAvLyAzXG5cbiAgICAgIHBhc3MoMiwgMCwgNCwgNCk7IC8vIDRcbiAgICAgIHBhc3MoMCwgMiwgMiwgNCk7IC8vIDVcblxuICAgICAgcGFzcygxLCAwLCAyLCAyKTsgLy8gNlxuICAgICAgcGFzcygwLCAxLCAxLCAyKTsgLy8gN1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXNzKDAsIDAsIDEsIDEpO1xuICAgIH1cbiAgICByZXR1cm4gZnVsbFBpeGVscztcbiAgfTtcblxuICBQTkcucHJvdG90eXBlLmRlY29kZVBhbGV0dGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYywgaSwgbGVuZ3RoLCBwYWxldHRlLCBwb3MsIHJldCwgdHJhbnNwYXJlbmN5LCBfaSwgX3JlZiwgX3JlZjE7XG4gICAgcGFsZXR0ZSA9IHRoaXMucGFsZXR0ZTtcbiAgICB0cmFuc3BhcmVuY3kgPSB0aGlzLnRyYW5zcGFyZW5jeS5pbmRleGVkIHx8IFtdO1xuICAgIHJldCA9IG5ldyBVaW50OEFycmF5KCh0cmFuc3BhcmVuY3kubGVuZ3RoIHx8IDApICsgcGFsZXR0ZS5sZW5ndGgpO1xuICAgIHBvcyA9IDA7XG4gICAgbGVuZ3RoID0gcGFsZXR0ZS5sZW5ndGg7XG4gICAgYyA9IDA7XG4gICAgZm9yIChpID0gX2kgPSAwLCBfcmVmID0gbGVuZ3RoOyBfaSA8IF9yZWY7IGkgPSBfaSArPSAzKSB7XG4gICAgICByZXRbcG9zKytdID0gcGFsZXR0ZVtpXTtcbiAgICAgIHJldFtwb3MrK10gPSBwYWxldHRlW2kgKyAxXTtcbiAgICAgIHJldFtwb3MrK10gPSBwYWxldHRlW2kgKyAyXTtcbiAgICAgIHJldFtwb3MrK10gPSAoX3JlZjEgPSB0cmFuc3BhcmVuY3lbYysrXSkgIT0gbnVsbCA/IF9yZWYxIDogMjU1O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIFBORy5wcm90b3R5cGUuY29weVRvSW1hZ2VEYXRhID0gZnVuY3Rpb24oaW1hZ2VEYXRhLCBwaXhlbHMpIHtcbiAgICB2YXIgYWxwaGEsIGNvbG9ycywgZGF0YSwgaSwgaW5wdXQsIGosIGssIGxlbmd0aCwgcGFsZXR0ZSwgdiwgX3JlZjtcbiAgICBjb2xvcnMgPSB0aGlzLmNvbG9ycztcbiAgICBwYWxldHRlID0gbnVsbDtcbiAgICBhbHBoYSA9IHRoaXMuaGFzQWxwaGFDaGFubmVsO1xuICAgIGlmICh0aGlzLnBhbGV0dGUubGVuZ3RoKSB7XG4gICAgICBwYWxldHRlID1cbiAgICAgICAgKF9yZWYgPSB0aGlzLl9kZWNvZGVkUGFsZXR0ZSkgIT0gbnVsbFxuICAgICAgICAgID8gX3JlZlxuICAgICAgICAgIDogKHRoaXMuX2RlY29kZWRQYWxldHRlID0gdGhpcy5kZWNvZGVQYWxldHRlKCkpO1xuICAgICAgY29sb3JzID0gNDtcbiAgICAgIGFscGhhID0gdHJ1ZTtcbiAgICB9XG4gICAgZGF0YSA9IGltYWdlRGF0YS5kYXRhIHx8IGltYWdlRGF0YTtcbiAgICBsZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICBpbnB1dCA9IHBhbGV0dGUgfHwgcGl4ZWxzO1xuICAgIGkgPSBqID0gMDtcbiAgICBpZiAoY29sb3JzID09PSAxKSB7XG4gICAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgICAgICBrID0gcGFsZXR0ZSA/IHBpeGVsc1tpIC8gNF0gKiA0IDogajtcbiAgICAgICAgdiA9IGlucHV0W2srK107XG4gICAgICAgIGRhdGFbaSsrXSA9IHY7XG4gICAgICAgIGRhdGFbaSsrXSA9IHY7XG4gICAgICAgIGRhdGFbaSsrXSA9IHY7XG4gICAgICAgIGRhdGFbaSsrXSA9IGFscGhhID8gaW5wdXRbaysrXSA6IDI1NTtcbiAgICAgICAgaiA9IGs7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICAgIGsgPSBwYWxldHRlID8gcGl4ZWxzW2kgLyA0XSAqIDQgOiBqO1xuICAgICAgICBkYXRhW2krK10gPSBpbnB1dFtrKytdO1xuICAgICAgICBkYXRhW2krK10gPSBpbnB1dFtrKytdO1xuICAgICAgICBkYXRhW2krK10gPSBpbnB1dFtrKytdO1xuICAgICAgICBkYXRhW2krK10gPSBhbHBoYSA/IGlucHV0W2srK10gOiAyNTU7XG4gICAgICAgIGogPSBrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBQTkcucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQ7XG4gICAgcmV0ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0ICogNCk7XG4gICAgdGhpcy5jb3B5VG9JbWFnZURhdGEocmV0LCB0aGlzLmRlY29kZVBpeGVscygpKTtcbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIHZhciBoYXNCcm93c2VyQ2FudmFzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWxPYmplY3QpID09PSBcIltvYmplY3QgV2luZG93XVwiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzY3JhdGNoQ2FudmFzID0gZ2xvYmFsT2JqZWN0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIHNjcmF0Y2hDdHggPSBzY3JhdGNoQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBoYXNCcm93c2VyQ2FudmFzKCk7XG5cbiAgbWFrZUltYWdlID0gZnVuY3Rpb24oaW1hZ2VEYXRhKSB7XG4gICAgaWYgKGhhc0Jyb3dzZXJDYW52YXMoKSA9PT0gdHJ1ZSkge1xuICAgICAgdmFyIGltZztcbiAgICAgIHNjcmF0Y2hDdHgud2lkdGggPSBpbWFnZURhdGEud2lkdGg7XG4gICAgICBzY3JhdGNoQ3R4LmhlaWdodCA9IGltYWdlRGF0YS5oZWlnaHQ7XG4gICAgICBzY3JhdGNoQ3R4LmNsZWFyUmVjdCgwLCAwLCBpbWFnZURhdGEud2lkdGgsIGltYWdlRGF0YS5oZWlnaHQpO1xuICAgICAgc2NyYXRjaEN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1nLnNyYyA9IHNjcmF0Y2hDYW52YXMudG9EYXRhVVJMKCk7XG4gICAgICByZXR1cm4gaW1nO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCByZXF1aXJlcyBhIEJyb3dzZXIgd2l0aCBDYW52YXMtY2FwYWJpbGl0eS5cIik7XG4gIH07XG5cbiAgUE5HLnByb3RvdHlwZS5kZWNvZGVGcmFtZXMgPSBmdW5jdGlvbihjdHgpIHtcbiAgICB2YXIgZnJhbWUsIGksIGltYWdlRGF0YSwgcGl4ZWxzLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgaWYgKCF0aGlzLmFuaW1hdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfcmVmID0gdGhpcy5hbmltYXRpb24uZnJhbWVzO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgIGZyYW1lID0gX3JlZltpXTtcbiAgICAgIGltYWdlRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEoZnJhbWUud2lkdGgsIGZyYW1lLmhlaWdodCk7XG4gICAgICBwaXhlbHMgPSB0aGlzLmRlY29kZVBpeGVscyhuZXcgVWludDhBcnJheShmcmFtZS5kYXRhKSk7XG4gICAgICB0aGlzLmNvcHlUb0ltYWdlRGF0YShpbWFnZURhdGEsIHBpeGVscyk7XG4gICAgICBmcmFtZS5pbWFnZURhdGEgPSBpbWFnZURhdGE7XG4gICAgICBfcmVzdWx0cy5wdXNoKChmcmFtZS5pbWFnZSA9IG1ha2VJbWFnZShpbWFnZURhdGEpKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBQTkcucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24oY3R4LCBudW1iZXIpIHtcbiAgICB2YXIgZnJhbWUsIGZyYW1lcywgcHJldjtcbiAgICBmcmFtZXMgPSB0aGlzLmFuaW1hdGlvbi5mcmFtZXM7XG4gICAgZnJhbWUgPSBmcmFtZXNbbnVtYmVyXTtcbiAgICBwcmV2ID0gZnJhbWVzW251bWJlciAtIDFdO1xuICAgIGlmIChudW1iZXIgPT09IDApIHtcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAocHJldiAhPSBudWxsID8gcHJldi5kaXNwb3NlT3AgOiB2b2lkIDApID09PSBBUE5HX0RJU1BPU0VfT1BfQkFDS0dST1VORFxuICAgICkge1xuICAgICAgY3R4LmNsZWFyUmVjdChwcmV2LnhPZmZzZXQsIHByZXYueU9mZnNldCwgcHJldi53aWR0aCwgcHJldi5oZWlnaHQpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAocHJldiAhPSBudWxsID8gcHJldi5kaXNwb3NlT3AgOiB2b2lkIDApID09PSBBUE5HX0RJU1BPU0VfT1BfUFJFVklPVVNcbiAgICApIHtcbiAgICAgIGN0eC5wdXRJbWFnZURhdGEocHJldi5pbWFnZURhdGEsIHByZXYueE9mZnNldCwgcHJldi55T2Zmc2V0KTtcbiAgICB9XG4gICAgaWYgKGZyYW1lLmJsZW5kT3AgPT09IEFQTkdfQkxFTkRfT1BfU09VUkNFKSB7XG4gICAgICBjdHguY2xlYXJSZWN0KGZyYW1lLnhPZmZzZXQsIGZyYW1lLnlPZmZzZXQsIGZyYW1lLndpZHRoLCBmcmFtZS5oZWlnaHQpO1xuICAgIH1cbiAgICByZXR1cm4gY3R4LmRyYXdJbWFnZShmcmFtZS5pbWFnZSwgZnJhbWUueE9mZnNldCwgZnJhbWUueU9mZnNldCk7XG4gIH07XG5cbiAgUE5HLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgdmFyIGRvRnJhbWUsXG4gICAgICBmcmFtZU51bWJlcixcbiAgICAgIGZyYW1lcyxcbiAgICAgIG51bUZyYW1lcyxcbiAgICAgIG51bVBsYXlzLFxuICAgICAgX3JlZixcbiAgICAgIF90aGlzID0gdGhpcztcbiAgICBmcmFtZU51bWJlciA9IDA7XG4gICAgKF9yZWYgPSB0aGlzLmFuaW1hdGlvbiksXG4gICAgICAobnVtRnJhbWVzID0gX3JlZi5udW1GcmFtZXMpLFxuICAgICAgKGZyYW1lcyA9IF9yZWYuZnJhbWVzKSxcbiAgICAgIChudW1QbGF5cyA9IF9yZWYubnVtUGxheXMpO1xuICAgIHJldHVybiAoZG9GcmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGYsIGZyYW1lO1xuICAgICAgZiA9IGZyYW1lTnVtYmVyKysgJSBudW1GcmFtZXM7XG4gICAgICBmcmFtZSA9IGZyYW1lc1tmXTtcbiAgICAgIF90aGlzLnJlbmRlckZyYW1lKGN0eCwgZik7XG4gICAgICBpZiAobnVtRnJhbWVzID4gMSAmJiBmcmFtZU51bWJlciAvIG51bUZyYW1lcyA8IG51bVBsYXlzKSB7XG4gICAgICAgIHJldHVybiAoX3RoaXMuYW5pbWF0aW9uLl90aW1lb3V0ID0gc2V0VGltZW91dChkb0ZyYW1lLCBmcmFtZS5kZWxheSkpO1xuICAgICAgfVxuICAgIH0pKCk7XG4gIH07XG5cbiAgUE5HLnByb3RvdHlwZS5zdG9wQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9yZWY7XG4gICAgcmV0dXJuIGNsZWFyVGltZW91dChcbiAgICAgIChfcmVmID0gdGhpcy5hbmltYXRpb24pICE9IG51bGwgPyBfcmVmLl90aW1lb3V0IDogdm9pZCAwXG4gICAgKTtcbiAgfTtcblxuICBQTkcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKGNhbnZhcykge1xuICAgIHZhciBjdHgsIGRhdGE7XG4gICAgaWYgKGNhbnZhcy5fcG5nKSB7XG4gICAgICBjYW52YXMuX3BuZy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgfVxuICAgIGNhbnZhcy5fcG5nID0gdGhpcztcbiAgICBjYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGlmICh0aGlzLmFuaW1hdGlvbikge1xuICAgICAgdGhpcy5kZWNvZGVGcmFtZXMoY3R4KTtcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGUoY3R4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgdGhpcy5jb3B5VG9JbWFnZURhdGEoZGF0YSwgdGhpcy5kZWNvZGVQaXhlbHMoKSk7XG4gICAgICByZXR1cm4gY3R4LnB1dEltYWdlRGF0YShkYXRhLCAwLCAwKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFBORztcbn0pKCk7XG5cbmV4cG9ydCB7IFBORyB9O1xuIiwiLyoqIEBsaWNlbnNlXG4gKiBNSVQgbGljZW5zZS5cbiAqIENvcHlyaWdodCAoYykgMjAxMiBXaWxsb3cgU3lzdGVtcyBDb3Jwb3JhdGlvbiwgaHR0cHM6Ly9naXRodWIuY29tL3dpbGxvd3N5c3RlbXNcbiAqICAgICAgICAgICAgICAgMjAxNCBEaWVnbyBDYXNvcnJhbiwgaHR0cHM6Ly9naXRodWIuY29tL2RpZWdvY3JcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbiAqIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4gKiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xuICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICogTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRVxuICogTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuICogT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4gKiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBqc1BERiBzcGxpdF90ZXh0X3RvX3NpemUgcGx1Z2luXG4gKlxuICogQG5hbWUgc3BsaXRfdGV4dF90b19zaXplXG4gKiBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbihBUEkpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGxlbmd0aCBtYXRjaGluZyBsZW5ndGggb2YgdGhlICd3b3JkJyBzdHJpbmcsIHdpdGggZWFjaFxuICAgKiBjZWxsIG9jY3VwaWVkIGJ5IHRoZSB3aWR0aCBvZiB0aGUgY2hhciBpbiB0aGF0IHBvc2l0aW9uLlxuICAgKlxuICAgKiBAbmFtZSBnZXRDaGFyV2lkdGhzQXJyYXlcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICovXG4gIHZhciBnZXRDaGFyV2lkdGhzQXJyYXkgPSAoQVBJLmdldENoYXJXaWR0aHNBcnJheSA9IGZ1bmN0aW9uKHRleHQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHZhciBhY3RpdmVGb250ID0gb3B0aW9ucy5mb250IHx8IHRoaXMuaW50ZXJuYWwuZ2V0Rm9udCgpO1xuICAgIHZhciBmb250U2l6ZSA9IG9wdGlvbnMuZm9udFNpemUgfHwgdGhpcy5pbnRlcm5hbC5nZXRGb250U2l6ZSgpO1xuICAgIHZhciBjaGFyU3BhY2UgPSBvcHRpb25zLmNoYXJTcGFjZSB8fCB0aGlzLmludGVybmFsLmdldENoYXJTcGFjZSgpO1xuXG4gICAgdmFyIHdpZHRocyA9IG9wdGlvbnMud2lkdGhzXG4gICAgICA/IG9wdGlvbnMud2lkdGhzXG4gICAgICA6IGFjdGl2ZUZvbnQubWV0YWRhdGEuVW5pY29kZS53aWR0aHM7XG4gICAgdmFyIHdpZHRoc0ZyYWN0aW9uT2YgPSB3aWR0aHMuZm9mID8gd2lkdGhzLmZvZiA6IDE7XG4gICAgdmFyIGtlcm5pbmcgPSBvcHRpb25zLmtlcm5pbmdcbiAgICAgID8gb3B0aW9ucy5rZXJuaW5nXG4gICAgICA6IGFjdGl2ZUZvbnQubWV0YWRhdGEuVW5pY29kZS5rZXJuaW5nO1xuICAgIHZhciBrZXJuaW5nRnJhY3Rpb25PZiA9IGtlcm5pbmcuZm9mID8ga2VybmluZy5mb2YgOiAxO1xuICAgIHZhciBkb0tlcm5pbmcgPSBvcHRpb25zLmRvS2VybmluZyA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gICAgdmFyIGtlcm5pbmdWYWx1ZSA9IDA7XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgbGVuZ3RoID0gdGV4dC5sZW5ndGg7XG4gICAgdmFyIGNoYXJfY29kZTtcbiAgICB2YXIgcHJpb3JfY2hhcl9jb2RlID0gMDsgLy9mb3Iga2VybmluZ1xuICAgIHZhciBkZWZhdWx0X2NoYXJfd2lkdGggPSB3aWR0aHNbMF0gfHwgd2lkdGhzRnJhY3Rpb25PZjtcbiAgICB2YXIgb3V0cHV0ID0gW107XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXJfY29kZSA9IHRleHQuY2hhckNvZGVBdChpKTtcblxuICAgICAgaWYgKHR5cGVvZiBhY3RpdmVGb250Lm1ldGFkYXRhLndpZHRoT2ZTdHJpbmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBvdXRwdXQucHVzaChcbiAgICAgICAgICAoYWN0aXZlRm9udC5tZXRhZGF0YS53aWR0aE9mR2x5cGgoXG4gICAgICAgICAgICBhY3RpdmVGb250Lm1ldGFkYXRhLmNoYXJhY3RlclRvR2x5cGgoY2hhcl9jb2RlKVxuICAgICAgICAgICkgK1xuICAgICAgICAgICAgY2hhclNwYWNlICogKDEwMDAgLyBmb250U2l6ZSkgfHwgMCkgLyAxMDAwXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZG9LZXJuaW5nICYmXG4gICAgICAgICAgdHlwZW9mIGtlcm5pbmdbY2hhcl9jb2RlXSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICFpc05hTihwYXJzZUludChrZXJuaW5nW2NoYXJfY29kZV1bcHJpb3JfY2hhcl9jb2RlXSwgMTApKVxuICAgICAgICApIHtcbiAgICAgICAgICBrZXJuaW5nVmFsdWUgPVxuICAgICAgICAgICAga2VybmluZ1tjaGFyX2NvZGVdW3ByaW9yX2NoYXJfY29kZV0gLyBrZXJuaW5nRnJhY3Rpb25PZjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBrZXJuaW5nVmFsdWUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dC5wdXNoKFxuICAgICAgICAgICh3aWR0aHNbY2hhcl9jb2RlXSB8fCBkZWZhdWx0X2NoYXJfd2lkdGgpIC8gd2lkdGhzRnJhY3Rpb25PZiArXG4gICAgICAgICAgICBrZXJuaW5nVmFsdWVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHByaW9yX2NoYXJfY29kZSA9IGNoYXJfY29kZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9KTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHdpZHRocyBvZiBzdHJpbmcgaW4gYSBnaXZlbiBmb250LCBpZiB0aGUgZm9udCBzaXplIGlzIHNldCBhcyAxIHBvaW50LlxuICAgKlxuICAgKiBJbiBvdGhlciB3b3JkcywgdGhpcyBpcyBcInByb3BvcnRpb25hbFwiIHZhbHVlLiBGb3IgMSB1bml0IG9mIGZvbnQgc2l6ZSwgdGhlIGxlbmd0aFxuICAgKiBvZiB0aGUgc3RyaW5nIHdpbGwgYmUgdGhhdCBtdWNoLlxuICAgKlxuICAgKiBNdWx0aXBseSBieSBmb250IHNpemUgdG8gZ2V0IGFjdHVhbCB3aWR0aCBpbiAqcG9pbnRzKlxuICAgKiBUaGVuIGRpdmlkZSBieSA3MiB0byBnZXQgaW5jaGVzIG9yIGRpdmlkZSBieSAoNzIvMjUuNikgdG8gZ2V0ICdtbScgZXRjLlxuICAgKlxuICAgKiBAbmFtZSBnZXRTdHJpbmdVbml0V2lkdGhcbiAgICogQHB1YmxpY1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnNcbiAgICogQHJldHVybnMge251bWJlcn0gcmVzdWx0XG4gICAqL1xuICB2YXIgZ2V0U3RyaW5nVW5pdFdpZHRoID0gKEFQSS5nZXRTdHJpbmdVbml0V2lkdGggPSBmdW5jdGlvbih0ZXh0LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICB2YXIgZm9udFNpemUgPSBvcHRpb25zLmZvbnRTaXplIHx8IHRoaXMuaW50ZXJuYWwuZ2V0Rm9udFNpemUoKTtcbiAgICB2YXIgZm9udCA9IG9wdGlvbnMuZm9udCB8fCB0aGlzLmludGVybmFsLmdldEZvbnQoKTtcbiAgICB2YXIgY2hhclNwYWNlID0gb3B0aW9ucy5jaGFyU3BhY2UgfHwgdGhpcy5pbnRlcm5hbC5nZXRDaGFyU3BhY2UoKTtcbiAgICB2YXIgcmVzdWx0ID0gMDtcblxuICAgIGlmIChBUEkucHJvY2Vzc0FyYWJpYykge1xuICAgICAgdGV4dCA9IEFQSS5wcm9jZXNzQXJhYmljKHRleHQpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZm9udC5tZXRhZGF0YS53aWR0aE9mU3RyaW5nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJlc3VsdCA9XG4gICAgICAgIGZvbnQubWV0YWRhdGEud2lkdGhPZlN0cmluZyh0ZXh0LCBmb250U2l6ZSwgY2hhclNwYWNlKSAvIGZvbnRTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSBnZXRDaGFyV2lkdGhzQXJyYXlcbiAgICAgICAgLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgLnJlZHVjZShmdW5jdGlvbihwdiwgY3YpIHtcbiAgICAgICAgICByZXR1cm4gcHYgKyBjdjtcbiAgICAgICAgfSwgMCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xuXG4gIC8qKlxuICByZXR1cm5zIGFycmF5IG9mIGxpbmVzXG4gICovXG4gIHZhciBzcGxpdExvbmdXb3JkID0gZnVuY3Rpb24od29yZCwgd2lkdGhzX2FycmF5LCBmaXJzdExpbmVNYXhMZW4sIG1heExlbikge1xuICAgIHZhciBhbnN3ZXIgPSBbXTtcblxuICAgIC8vIDFzdCwgY2hvcCBvZmYgdGhlIHBpZWNlIHRoYXQgY2FuIGZpdCBvbiB0aGUgaGFuZ2luZyBsaW5lLlxuICAgIHZhciBpID0gMCxcbiAgICAgIGwgPSB3b3JkLmxlbmd0aCxcbiAgICAgIHdvcmtpbmdMZW4gPSAwO1xuICAgIHdoaWxlIChpICE9PSBsICYmIHdvcmtpbmdMZW4gKyB3aWR0aHNfYXJyYXlbaV0gPCBmaXJzdExpbmVNYXhMZW4pIHtcbiAgICAgIHdvcmtpbmdMZW4gKz0gd2lkdGhzX2FycmF5W2ldO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICAvLyB0aGlzIGlzIGZpcnN0IGxpbmUuXG4gICAgYW5zd2VyLnB1c2god29yZC5zbGljZSgwLCBpKSk7XG5cbiAgICAvLyAybmQuIFNwbGl0IHRoZSByZXN0IGludG8gbWF4TGVuIHBpZWNlcy5cbiAgICB2YXIgc3RhcnRPZkxpbmUgPSBpO1xuICAgIHdvcmtpbmdMZW4gPSAwO1xuICAgIHdoaWxlIChpICE9PSBsKSB7XG4gICAgICBpZiAod29ya2luZ0xlbiArIHdpZHRoc19hcnJheVtpXSA+IG1heExlbikge1xuICAgICAgICBhbnN3ZXIucHVzaCh3b3JkLnNsaWNlKHN0YXJ0T2ZMaW5lLCBpKSk7XG4gICAgICAgIHdvcmtpbmdMZW4gPSAwO1xuICAgICAgICBzdGFydE9mTGluZSA9IGk7XG4gICAgICB9XG4gICAgICB3b3JraW5nTGVuICs9IHdpZHRoc19hcnJheVtpXTtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgaWYgKHN0YXJ0T2ZMaW5lICE9PSBpKSB7XG4gICAgICBhbnN3ZXIucHVzaCh3b3JkLnNsaWNlKHN0YXJ0T2ZMaW5lLCBpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFuc3dlcjtcbiAgfTtcblxuICAvLyBOb3RlLCBhbGwgc2l6aW5nIGlucHV0cyBmb3IgdGhpcyBmdW5jdGlvbiBtdXN0IGJlIGluIFwiZm9udCBtZWFzdXJlbWVudCB1bml0c1wiXG4gIC8vIEJ5IGRlZmF1bHQsIGZvciBQREYsIGl0J3MgXCJwb2ludFwiLlxuICB2YXIgc3BsaXRQYXJhZ3JhcGhJbnRvTGluZXMgPSBmdW5jdGlvbih0ZXh0LCBtYXhsZW4sIG9wdGlvbnMpIHtcbiAgICAvLyBhdCB0aGlzIHRpbWUgd29ya3Mgb25seSBvbiBXZXN0ZXJuIHNjcmlwdHMsIG9uZXMgd2l0aCBzcGFjZSBjaGFyXG4gICAgLy8gc2VwYXJhdGluZyB0aGUgd29yZHMuIEZlZWwgZnJlZSB0byBleHBhbmQuXG5cbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgbGluZSA9IFtdLFxuICAgICAgbGluZXMgPSBbbGluZV0sXG4gICAgICBsaW5lX2xlbmd0aCA9IG9wdGlvbnMudGV4dEluZGVudCB8fCAwLFxuICAgICAgc2VwYXJhdG9yX2xlbmd0aCA9IDAsXG4gICAgICBjdXJyZW50X3dvcmRfbGVuZ3RoID0gMCxcbiAgICAgIHdvcmQsXG4gICAgICB3aWR0aHNfYXJyYXksXG4gICAgICB3b3JkcyA9IHRleHQuc3BsaXQoXCIgXCIpLFxuICAgICAgc3BhY2VDaGFyV2lkdGggPSBnZXRDaGFyV2lkdGhzQXJyYXkuYXBwbHkodGhpcywgW1wiIFwiLCBvcHRpb25zXSlbMF0sXG4gICAgICBpLFxuICAgICAgbCxcbiAgICAgIHRtcCxcbiAgICAgIGxpbmVJbmRlbnQ7XG5cbiAgICBpZiAob3B0aW9ucy5saW5lSW5kZW50ID09PSAtMSkge1xuICAgICAgbGluZUluZGVudCA9IHdvcmRzWzBdLmxlbmd0aCArIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpbmVJbmRlbnQgPSBvcHRpb25zLmxpbmVJbmRlbnQgfHwgMDtcbiAgICB9XG4gICAgaWYgKGxpbmVJbmRlbnQpIHtcbiAgICAgIHZhciBwYWQgPSBBcnJheShsaW5lSW5kZW50KS5qb2luKFwiIFwiKSxcbiAgICAgICAgd3JkcyA9IFtdO1xuICAgICAgd29yZHMubWFwKGZ1bmN0aW9uKHdyZCkge1xuICAgICAgICB3cmQgPSB3cmQuc3BsaXQoL1xccypcXG4vKTtcbiAgICAgICAgaWYgKHdyZC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgd3JkcyA9IHdyZHMuY29uY2F0KFxuICAgICAgICAgICAgd3JkLm1hcChmdW5jdGlvbih3cmQsIGlkeCkge1xuICAgICAgICAgICAgICByZXR1cm4gKGlkeCAmJiB3cmQubGVuZ3RoID8gXCJcXG5cIiA6IFwiXCIpICsgd3JkO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdyZHMucHVzaCh3cmRbMF0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHdvcmRzID0gd3JkcztcbiAgICAgIGxpbmVJbmRlbnQgPSBnZXRTdHJpbmdVbml0V2lkdGguYXBwbHkodGhpcywgW3BhZCwgb3B0aW9uc10pO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDAsIGwgPSB3b3Jkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBmb3JjZSA9IDA7XG5cbiAgICAgIHdvcmQgPSB3b3Jkc1tpXTtcbiAgICAgIGlmIChsaW5lSW5kZW50ICYmIHdvcmRbMF0gPT0gXCJcXG5cIikge1xuICAgICAgICB3b3JkID0gd29yZC5zdWJzdHIoMSk7XG4gICAgICAgIGZvcmNlID0gMTtcbiAgICAgIH1cbiAgICAgIHdpZHRoc19hcnJheSA9IGdldENoYXJXaWR0aHNBcnJheS5hcHBseSh0aGlzLCBbd29yZCwgb3B0aW9uc10pO1xuICAgICAgY3VycmVudF93b3JkX2xlbmd0aCA9IHdpZHRoc19hcnJheS5yZWR1Y2UoZnVuY3Rpb24ocHYsIGN2KSB7XG4gICAgICAgIHJldHVybiBwdiArIGN2O1xuICAgICAgfSwgMCk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgbGluZV9sZW5ndGggKyBzZXBhcmF0b3JfbGVuZ3RoICsgY3VycmVudF93b3JkX2xlbmd0aCA+IG1heGxlbiB8fFxuICAgICAgICBmb3JjZVxuICAgICAgKSB7XG4gICAgICAgIGlmIChjdXJyZW50X3dvcmRfbGVuZ3RoID4gbWF4bGVuKSB7XG4gICAgICAgICAgLy8gdGhpcyBoYXBwZW5zIHdoZW4geW91IGhhdmUgc3BhY2UtbGVzcyBsb25nIFVSTHMgZm9yIGV4YW1wbGUuXG4gICAgICAgICAgLy8gd2UganVzdCBjaG9wIHRoZXNlIHRvIHNpemUuIFdlIGRvIE5PVCBpbnNlcnQgaGlwaGVuc1xuICAgICAgICAgIHRtcCA9IHNwbGl0TG9uZ1dvcmQuYXBwbHkodGhpcywgW1xuICAgICAgICAgICAgd29yZCxcbiAgICAgICAgICAgIHdpZHRoc19hcnJheSxcbiAgICAgICAgICAgIG1heGxlbiAtIChsaW5lX2xlbmd0aCArIHNlcGFyYXRvcl9sZW5ndGgpLFxuICAgICAgICAgICAgbWF4bGVuXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgLy8gZmlyc3QgbGluZSB3ZSBhZGQgdG8gZXhpc3RpbmcgbGluZSBvYmplY3RcbiAgICAgICAgICBsaW5lLnB1c2godG1wLnNoaWZ0KCkpOyAvLyBpdCdzIG9rIHRvIGhhdmUgZXh0cmEgc3BhY2UgaW5kaWNhdG9yIHRoZXJlXG4gICAgICAgICAgLy8gbGFzdCBsaW5lIHdlIG1ha2UgaW50byBuZXcgbGluZSBvYmplY3RcbiAgICAgICAgICBsaW5lID0gW3RtcC5wb3AoKV07XG4gICAgICAgICAgLy8gbGluZXMgaW4gdGhlIG1pZGRsZSB3ZSBhcHBlZCB0byBsaW5lcyBvYmplY3QgYXMgd2hvbGUgbGluZXNcbiAgICAgICAgICB3aGlsZSAodG1wLmxlbmd0aCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChbdG1wLnNoaWZ0KCldKTsgLy8gc2luZ2xlIGZyYWdtZW50IG9jY3VwaWVzIHdob2xlIGxpbmVcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudF93b3JkX2xlbmd0aCA9IHdpZHRoc19hcnJheVxuICAgICAgICAgICAgLnNsaWNlKHdvcmQubGVuZ3RoIC0gKGxpbmVbMF0gPyBsaW5lWzBdLmxlbmd0aCA6IDApKVxuICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbihwdiwgY3YpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHB2ICsgY3Y7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBqdXN0IHB1dCBpdCBvbiBhIG5ldyBsaW5lXG4gICAgICAgICAgbGluZSA9IFt3b3JkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vdyB3ZSBhdHRhY2ggbmV3IGxpbmUgdG8gbGluZXNcbiAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgbGluZV9sZW5ndGggPSBjdXJyZW50X3dvcmRfbGVuZ3RoICsgbGluZUluZGVudDtcbiAgICAgICAgc2VwYXJhdG9yX2xlbmd0aCA9IHNwYWNlQ2hhcldpZHRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGluZS5wdXNoKHdvcmQpO1xuXG4gICAgICAgIGxpbmVfbGVuZ3RoICs9IHNlcGFyYXRvcl9sZW5ndGggKyBjdXJyZW50X3dvcmRfbGVuZ3RoO1xuICAgICAgICBzZXBhcmF0b3JfbGVuZ3RoID0gc3BhY2VDaGFyV2lkdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHBvc3RQcm9jZXNzO1xuICAgIGlmIChsaW5lSW5kZW50KSB7XG4gICAgICBwb3N0UHJvY2VzcyA9IGZ1bmN0aW9uKGxuLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIChpZHggPyBwYWQgOiBcIlwiKSArIGxuLmpvaW4oXCIgXCIpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9zdFByb2Nlc3MgPSBmdW5jdGlvbihsbikge1xuICAgICAgICByZXR1cm4gbG4uam9pbihcIiBcIik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5tYXAocG9zdFByb2Nlc3MpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTcGxpdHMgYSBnaXZlbiBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzLiBVc2VzICdzaXplJyB2YWx1ZVxuICAgKiAoaW4gbWVhc3VyZW1lbnQgdW5pdHMgZGVjbGFyZWQgYXMgZGVmYXVsdCBmb3IgdGhlIGpzUERGIGluc3RhbmNlKVxuICAgKiBhbmQgdGhlIGZvbnQncyBcIndpZHRoc1wiIGFuZCBcIktlcm5pbmdcIiB0YWJsZXMsIHdoZXJlIGF2YWlsYWJsZSwgdG9cbiAgICogZGV0ZXJtaW5lIGRpc3BsYXkgbGVuZ3RoIG9mIGEgZ2l2ZW4gc3RyaW5nIGZvciBhIGdpdmVuIGZvbnQuXG4gICAqXG4gICAqIFdlIHVzZSBjaGFyYWN0ZXIncyAxMDAlIG9mIHVuaXQgc2l6ZSAoaGVpZ2h0KSBhcyB3aWR0aCB3aGVuIFdpZHRoXG4gICAqIHRhYmxlIG9yIG90aGVyIGRlZmF1bHQgd2lkdGggaXMgbm90IGF2YWlsYWJsZS5cbiAgICpcbiAgICogQG5hbWUgc3BsaXRUZXh0VG9TaXplXG4gICAqIEBwdWJsaWNcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFVuZW5jb2RlZCwgcmVndWxhciBKYXZhU2NyaXB0IChVbmljb2RlLCBVVEYtMTYgLyBVQ1MtMikgc3RyaW5nLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBOb21pbmFsIG51bWJlciwgbWVhc3VyZWQgaW4gdW5pdHMgZGVmYXVsdCB0byB0aGlzIGluc3RhbmNlIG9mIGpzUERGLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25hbCBmbGFncyBuZWVkZWQgZm9yIGNob3BwZXIgdG8gZG8gdGhlIHJpZ2h0IHRoaW5nLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IGFycmF5IEFycmF5IHdpdGggc3RyaW5ncyBjaG9wcGVkIHRvIHNpemUuXG4gICAqL1xuICBBUEkuc3BsaXRUZXh0VG9TaXplID0gZnVuY3Rpb24odGV4dCwgbWF4bGVuLCBvcHRpb25zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHZhciBmc2l6ZSA9IG9wdGlvbnMuZm9udFNpemUgfHwgdGhpcy5pbnRlcm5hbC5nZXRGb250U2l6ZSgpLFxuICAgICAgbmV3T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHdpZHRocyA9IHtcbiAgICAgICAgICAgIDA6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIGtlcm5pbmcgPSB7fTtcblxuICAgICAgICBpZiAoIW9wdGlvbnMud2lkdGhzIHx8ICFvcHRpb25zLmtlcm5pbmcpIHtcbiAgICAgICAgICB2YXIgZiA9IHRoaXMuaW50ZXJuYWwuZ2V0Rm9udChvcHRpb25zLmZvbnROYW1lLCBvcHRpb25zLmZvbnRTdHlsZSksXG4gICAgICAgICAgICBlbmNvZGluZyA9IFwiVW5pY29kZVwiO1xuICAgICAgICAgIC8vIE5PVCBVVEY4LCBOT1QgVVRGMTZCRS9MRSwgTk9UIFVDUzJCRS9MRVxuICAgICAgICAgIC8vIEFjdHVhbCBKYXZhU2NyaXB0LW5hdGl2ZSBTdHJpbmcncyAxNmJpdCBjaGFyIGNvZGVzIHVzZWQuXG4gICAgICAgICAgLy8gbm8gbXVsdGktYnl0ZSBsb2dpYyBoZXJlXG5cbiAgICAgICAgICBpZiAoZi5tZXRhZGF0YVtlbmNvZGluZ10pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHdpZHRoczogZi5tZXRhZGF0YVtlbmNvZGluZ10ud2lkdGhzIHx8IHdpZHRocyxcbiAgICAgICAgICAgICAga2VybmluZzogZi5tZXRhZGF0YVtlbmNvZGluZ10ua2VybmluZyB8fCBrZXJuaW5nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBmb250OiBmLm1ldGFkYXRhLFxuICAgICAgICAgICAgICBmb250U2l6ZTogdGhpcy5pbnRlcm5hbC5nZXRGb250U2l6ZSgpLFxuICAgICAgICAgICAgICBjaGFyU3BhY2U6IHRoaXMuaW50ZXJuYWwuZ2V0Q2hhclNwYWNlKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aHM6IG9wdGlvbnMud2lkdGhzLFxuICAgICAgICAgICAga2VybmluZzogb3B0aW9ucy5rZXJuaW5nXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgLy8gZmlyc3Qgd2Ugc3BsaXQgb24gZW5kLW9mLWxpbmUgY2hhcnNcbiAgICB2YXIgcGFyYWdyYXBocztcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZXh0KSkge1xuICAgICAgcGFyYWdyYXBocyA9IHRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmFncmFwaHMgPSBTdHJpbmcodGV4dCkuc3BsaXQoL1xccj9cXG4vKTtcbiAgICB9XG5cbiAgICAvLyBub3cgd2UgY29udmVydCBzaXplIChtYXggbGVuZ3RoIG9mIGxpbmUpIGludG8gXCJmb250IHNpemUgdW5pdHNcIlxuICAgIC8vIGF0IHByZXNlbnQgdGltZSwgdGhlIFwiZm9udCBzaXplIHVuaXRcIiBpcyBhbHdheXMgJ3BvaW50J1xuICAgIC8vICdwcm9wb3J0aW9uYWwnIG1lYW5zLCBcImluIHByb3BvcnRpb24gdG8gZm9udCBzaXplXCJcbiAgICB2YXIgZm9udFVuaXRfbWF4TGVuID0gKDEuMCAqIHRoaXMuaW50ZXJuYWwuc2NhbGVGYWN0b3IgKiBtYXhsZW4pIC8gZnNpemU7XG4gICAgLy8gYXQgdGhpcyB0aW1lLCBmc2l6ZSBpcyBhbHdheXMgaW4gXCJwb2ludHNcIiByZWdhcmRsZXNzIG9mIHRoZSBkZWZhdWx0IG1lYXN1cmVtZW50IHVuaXQgb2YgdGhlIGRvYy5cbiAgICAvLyB0aGlzIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZT9cbiAgICAvLyB1bnRpbCB0aGVuLCBwcm9wb3J0aW9uYWxfbWF4bGVuIGlzIGxpa2VseSB0byBiZSBpbiAncG9pbnRzJ1xuXG4gICAgLy8gSWYgZmlyc3QgbGluZSBpcyB0byBiZSBpbmRlbnRlZCAoc2hvcnRlciBvciBsb25nZXIpIHRoYW4gbWF4TGVuXG4gICAgLy8gd2UgaW5kaWNhdGUgdGhhdCBieSB1c2luZyBDU1Mtc3R5bGUgXCJ0ZXh0LWluZGVudFwiIG9wdGlvbi5cbiAgICAvLyBoZXJlIGl0J3MgaW4gZm9udCB1bml0cyB0b28gKHdoaWNoIGlzIGxpa2VseSAncG9pbnRzJylcbiAgICAvLyBpdCBjYW4gYmUgbmVnYXRpdmUgKHdoaWNoIG1ha2VzIHRoZSBmaXJzdCBsaW5lIGxvbmdlciB0aGFuIG1heExlbilcbiAgICBuZXdPcHRpb25zLnRleHRJbmRlbnQgPSBvcHRpb25zLnRleHRJbmRlbnRcbiAgICAgID8gKG9wdGlvbnMudGV4dEluZGVudCAqIDEuMCAqIHRoaXMuaW50ZXJuYWwuc2NhbGVGYWN0b3IpIC8gZnNpemVcbiAgICAgIDogMDtcbiAgICBuZXdPcHRpb25zLmxpbmVJbmRlbnQgPSBvcHRpb25zLmxpbmVJbmRlbnQ7XG5cbiAgICB2YXIgaSxcbiAgICAgIGwsXG4gICAgICBvdXRwdXQgPSBbXTtcbiAgICBmb3IgKGkgPSAwLCBsID0gcGFyYWdyYXBocy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIG91dHB1dCA9IG91dHB1dC5jb25jYXQoXG4gICAgICAgIHNwbGl0UGFyYWdyYXBoSW50b0xpbmVzLmFwcGx5KHRoaXMsIFtcbiAgICAgICAgICBwYXJhZ3JhcGhzW2ldLFxuICAgICAgICAgIGZvbnRVbml0X21heExlbixcbiAgICAgICAgICBuZXdPcHRpb25zXG4gICAgICAgIF0pXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG59KShqc1BERi5BUEkpO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogKGMpIERlYW4gTWNOYW1lZSA8ZGVhbkBnbWFpbC5jb20+LCAyMDEzLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWFubS9vbWdnaWZcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0b1xuICogZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGVcbiAqIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vclxuICogc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HU1xuICogSU4gVEhFIFNPRlRXQVJFLlxuICpcbiAqIG9tZ2dpZiBpcyBhIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgYSBHSUYgODlhIGVuY29kZXIgYW5kIGRlY29kZXIsXG4gKiBpbmNsdWRpbmcgYW5pbWF0aW9uIGFuZCBjb21wcmVzc2lvbi4gIEl0IGRvZXMgbm90IHJlbHkgb24gYW55IHNwZWNpZmljXG4gKiB1bmRlcmx5aW5nIHN5c3RlbSwgc28gc2hvdWxkIHJ1biBpbiB0aGUgYnJvd3NlciwgTm9kZSwgb3IgUGxhc2suXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGNvbnNvbGUgfSBmcm9tIFwiLi9jb25zb2xlLmpzXCI7XG5cbmZ1bmN0aW9uIEdpZldyaXRlcihidWYsIHdpZHRoLCBoZWlnaHQsIGdvcHRzKSB7XG4gIHZhciBwID0gMDtcblxuICB2YXIgZ29wdHMgPSBnb3B0cyA9PT0gdW5kZWZpbmVkID8ge30gOiBnb3B0cztcbiAgdmFyIGxvb3BfY291bnQgPSBnb3B0cy5sb29wID09PSB1bmRlZmluZWQgPyBudWxsIDogZ29wdHMubG9vcDtcbiAgdmFyIGdsb2JhbF9wYWxldHRlID0gZ29wdHMucGFsZXR0ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGdvcHRzLnBhbGV0dGU7XG5cbiAgaWYgKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDAgfHwgd2lkdGggPiA2NTUzNSB8fCBoZWlnaHQgPiA2NTUzNSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJXaWR0aC9IZWlnaHQgaW52YWxpZC5cIik7XG5cbiAgZnVuY3Rpb24gY2hlY2tfcGFsZXR0ZV9hbmRfbnVtX2NvbG9ycyhwYWxldHRlKSB7XG4gICAgdmFyIG51bV9jb2xvcnMgPSBwYWxldHRlLmxlbmd0aDtcbiAgICBpZiAobnVtX2NvbG9ycyA8IDIgfHwgbnVtX2NvbG9ycyA+IDI1NiB8fCBudW1fY29sb3JzICYgKG51bV9jb2xvcnMgLSAxKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkludmFsaWQgY29kZS9jb2xvciBsZW5ndGgsIG11c3QgYmUgcG93ZXIgb2YgMiBhbmQgMiAuLiAyNTYuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBudW1fY29sb3JzO1xuICB9XG5cbiAgLy8gLSBIZWFkZXIuXG4gIGJ1ZltwKytdID0gMHg0NztcbiAgYnVmW3ArK10gPSAweDQ5O1xuICBidWZbcCsrXSA9IDB4NDY7IC8vIEdJRlxuICBidWZbcCsrXSA9IDB4Mzg7XG4gIGJ1ZltwKytdID0gMHgzOTtcbiAgYnVmW3ArK10gPSAweDYxOyAvLyA4OWFcblxuICAvLyBIYW5kbGluZyBvZiBHbG9iYWwgQ29sb3IgVGFibGUgKHBhbGV0dGUpIGFuZCBiYWNrZ3JvdW5kIGluZGV4LlxuICB2YXIgZ3BfbnVtX2NvbG9yc19wb3cyID0gMDtcbiAgdmFyIGJhY2tncm91bmQgPSAwO1xuICBpZiAoZ2xvYmFsX3BhbGV0dGUgIT09IG51bGwpIHtcbiAgICB2YXIgZ3BfbnVtX2NvbG9ycyA9IGNoZWNrX3BhbGV0dGVfYW5kX251bV9jb2xvcnMoZ2xvYmFsX3BhbGV0dGUpO1xuICAgIHdoaWxlICgoZ3BfbnVtX2NvbG9ycyA+Pj0gMSkpICsrZ3BfbnVtX2NvbG9yc19wb3cyO1xuICAgIGdwX251bV9jb2xvcnMgPSAxIDw8IGdwX251bV9jb2xvcnNfcG93MjtcbiAgICAtLWdwX251bV9jb2xvcnNfcG93MjtcbiAgICBpZiAoZ29wdHMuYmFja2dyb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBiYWNrZ3JvdW5kID0gZ29wdHMuYmFja2dyb3VuZDtcbiAgICAgIGlmIChiYWNrZ3JvdW5kID49IGdwX251bV9jb2xvcnMpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhY2tncm91bmQgaW5kZXggb3V0IG9mIHJhbmdlLlwiKTtcbiAgICAgIC8vIFRoZSBHSUYgc3BlYyBzdGF0ZXMgdGhhdCBhIGJhY2tncm91bmQgaW5kZXggb2YgMCBzaG91bGQgYmUgaWdub3JlZCwgc29cbiAgICAgIC8vIHRoaXMgaXMgcHJvYmFibHkgYSBtaXN0YWtlIGFuZCB5b3UgcmVhbGx5IHdhbnQgdG8gc2V0IGl0IHRvIGFub3RoZXJcbiAgICAgIC8vIHNsb3QgaW4gdGhlIHBhbGV0dGUuICBCdXQgYWN0dWFsbHkgaW4gdGhlIGVuZCBtb3N0IGJyb3dzZXJzLCBldGMgZW5kXG4gICAgICAvLyB1cCBpZ25vcmluZyB0aGlzIGFsbW9zdCBjb21wbGV0ZWx5IChpbmNsdWRpbmcgZm9yIGRpc3Bvc2UgYmFja2dyb3VuZCkuXG4gICAgICBpZiAoYmFja2dyb3VuZCA9PT0gMClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFja2dyb3VuZCBpbmRleCBleHBsaWNpdGx5IHBhc3NlZCBhcyAwLlwiKTtcbiAgICB9XG4gIH1cblxuICAvLyAtIExvZ2ljYWwgU2NyZWVuIERlc2NyaXB0b3IuXG4gIC8vIE5PVEUoZGVhbm0pOiB3L2ggYXBwYXJlbnRseSBpZ25vcmVkIGJ5IGltcGxlbWVudGF0aW9ucywgYnV0IHNldCBhbnl3YXkuXG4gIGJ1ZltwKytdID0gd2lkdGggJiAweGZmO1xuICBidWZbcCsrXSA9ICh3aWR0aCA+PiA4KSAmIDB4ZmY7XG4gIGJ1ZltwKytdID0gaGVpZ2h0ICYgMHhmZjtcbiAgYnVmW3ArK10gPSAoaGVpZ2h0ID4+IDgpICYgMHhmZjtcbiAgLy8gTk9URTogSW5kaWNhdGVzIDAtYnBwIG9yaWdpbmFsIGNvbG9yIHJlc29sdXRpb24gKHVudXNlZD8pLlxuICBidWZbcCsrXSA9IChnbG9iYWxfcGFsZXR0ZSAhPT0gbnVsbCA/IDB4ODAgOiAwKSB8IGdwX251bV9jb2xvcnNfcG93MjsgLy8gR2xvYmFsIENvbG9yIFRhYmxlIEZsYWcuIC8vIE5PVEU6IE5vIHNvcnQgZmxhZyAodW51c2VkPykuXG4gIGJ1ZltwKytdID0gYmFja2dyb3VuZDsgLy8gQmFja2dyb3VuZCBDb2xvciBJbmRleC5cbiAgYnVmW3ArK10gPSAwOyAvLyBQaXhlbCBhc3BlY3QgcmF0aW8gKHVudXNlZD8pLlxuXG4gIC8vIC0gR2xvYmFsIENvbG9yIFRhYmxlXG4gIGlmIChnbG9iYWxfcGFsZXR0ZSAhPT0gbnVsbCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGdsb2JhbF9wYWxldHRlLmxlbmd0aDsgaSA8IGlsOyArK2kpIHtcbiAgICAgIHZhciByZ2IgPSBnbG9iYWxfcGFsZXR0ZVtpXTtcbiAgICAgIGJ1ZltwKytdID0gKHJnYiA+PiAxNikgJiAweGZmO1xuICAgICAgYnVmW3ArK10gPSAocmdiID4+IDgpICYgMHhmZjtcbiAgICAgIGJ1ZltwKytdID0gcmdiICYgMHhmZjtcbiAgICB9XG4gIH1cblxuICBpZiAobG9vcF9jb3VudCAhPT0gbnVsbCkge1xuICAgIC8vIE5ldHNjYXBlIGJsb2NrIGZvciBsb29waW5nLlxuICAgIGlmIChsb29wX2NvdW50IDwgMCB8fCBsb29wX2NvdW50ID4gNjU1MzUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb29wIGNvdW50IGludmFsaWQuXCIpO1xuICAgIC8vIEV4dGVuc2lvbiBjb2RlLCBsYWJlbCwgYW5kIGxlbmd0aC5cbiAgICBidWZbcCsrXSA9IDB4MjE7XG4gICAgYnVmW3ArK10gPSAweGZmO1xuICAgIGJ1ZltwKytdID0gMHgwYjtcbiAgICAvLyBORVRTQ0FQRTIuMFxuICAgIGJ1ZltwKytdID0gMHg0ZTtcbiAgICBidWZbcCsrXSA9IDB4NDU7XG4gICAgYnVmW3ArK10gPSAweDU0O1xuICAgIGJ1ZltwKytdID0gMHg1MztcbiAgICBidWZbcCsrXSA9IDB4NDM7XG4gICAgYnVmW3ArK10gPSAweDQxO1xuICAgIGJ1ZltwKytdID0gMHg1MDtcbiAgICBidWZbcCsrXSA9IDB4NDU7XG4gICAgYnVmW3ArK10gPSAweDMyO1xuICAgIGJ1ZltwKytdID0gMHgyZTtcbiAgICBidWZbcCsrXSA9IDB4MzA7XG4gICAgLy8gU3ViLWJsb2NrXG4gICAgYnVmW3ArK10gPSAweDAzO1xuICAgIGJ1ZltwKytdID0gMHgwMTtcbiAgICBidWZbcCsrXSA9IGxvb3BfY291bnQgJiAweGZmO1xuICAgIGJ1ZltwKytdID0gKGxvb3BfY291bnQgPj4gOCkgJiAweGZmO1xuICAgIGJ1ZltwKytdID0gMHgwMDsgLy8gVGVybWluYXRvci5cbiAgfVxuXG4gIHZhciBlbmRlZCA9IGZhbHNlO1xuXG4gIHRoaXMuYWRkRnJhbWUgPSBmdW5jdGlvbih4LCB5LCB3LCBoLCBpbmRleGVkX3BpeGVscywgb3B0cykge1xuICAgIGlmIChlbmRlZCA9PT0gdHJ1ZSkge1xuICAgICAgLS1wO1xuICAgICAgZW5kZWQgPSBmYWxzZTtcbiAgICB9IC8vIFVuLWVuZC5cblxuICAgIG9wdHMgPSBvcHRzID09PSB1bmRlZmluZWQgPyB7fSA6IG9wdHM7XG5cbiAgICAvLyBUT0RPKGRlYW5tKTogQm91bmRzIGNoZWNrIHgsIHkuICBEbyB0aGV5IG5lZWQgdG8gYmUgd2l0aGluIHRoZSB2aXJ0dWFsXG4gICAgLy8gY2FudmFzIHdpZHRoL2hlaWdodCwgSSBpbWFnaW5lP1xuICAgIGlmICh4IDwgMCB8fCB5IDwgMCB8fCB4ID4gNjU1MzUgfHwgeSA+IDY1NTM1KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwieC95IGludmFsaWQuXCIpO1xuXG4gICAgaWYgKHcgPD0gMCB8fCBoIDw9IDAgfHwgdyA+IDY1NTM1IHx8IGggPiA2NTUzNSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldpZHRoL0hlaWdodCBpbnZhbGlkLlwiKTtcblxuICAgIGlmIChpbmRleGVkX3BpeGVscy5sZW5ndGggPCB3ICogaClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBlbm91Z2ggcGl4ZWxzIGZvciB0aGUgZnJhbWUgc2l6ZS5cIik7XG5cbiAgICB2YXIgdXNpbmdfbG9jYWxfcGFsZXR0ZSA9IHRydWU7XG4gICAgdmFyIHBhbGV0dGUgPSBvcHRzLnBhbGV0dGU7XG4gICAgaWYgKHBhbGV0dGUgPT09IHVuZGVmaW5lZCB8fCBwYWxldHRlID09PSBudWxsKSB7XG4gICAgICB1c2luZ19sb2NhbF9wYWxldHRlID0gZmFsc2U7XG4gICAgICBwYWxldHRlID0gZ2xvYmFsX3BhbGV0dGU7XG4gICAgfVxuXG4gICAgaWYgKHBhbGV0dGUgPT09IHVuZGVmaW5lZCB8fCBwYWxldHRlID09PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBzdXBwbHkgZWl0aGVyIGEgbG9jYWwgb3IgZ2xvYmFsIHBhbGV0dGUuXCIpO1xuXG4gICAgdmFyIG51bV9jb2xvcnMgPSBjaGVja19wYWxldHRlX2FuZF9udW1fY29sb3JzKHBhbGV0dGUpO1xuXG4gICAgLy8gQ29tcHV0ZSB0aGUgbWluX2NvZGVfc2l6ZSAocG93ZXIgb2YgMiksIGRlc3Ryb3lpbmcgbnVtX2NvbG9ycy5cbiAgICB2YXIgbWluX2NvZGVfc2l6ZSA9IDA7XG4gICAgd2hpbGUgKChudW1fY29sb3JzID4+PSAxKSkgKyttaW5fY29kZV9zaXplO1xuICAgIG51bV9jb2xvcnMgPSAxIDw8IG1pbl9jb2RlX3NpemU7IC8vIE5vdyB3ZSBjYW4gZWFzaWx5IGdldCBpdCBiYWNrLlxuXG4gICAgdmFyIGRlbGF5ID0gb3B0cy5kZWxheSA9PT0gdW5kZWZpbmVkID8gMCA6IG9wdHMuZGVsYXk7XG5cbiAgICAvLyBGcm9tIHRoZSBzcGVjOlxuICAgIC8vICAgICAwIC0gICBObyBkaXNwb3NhbCBzcGVjaWZpZWQuIFRoZSBkZWNvZGVyIGlzXG4gICAgLy8gICAgICAgICAgIG5vdCByZXF1aXJlZCB0byB0YWtlIGFueSBhY3Rpb24uXG4gICAgLy8gICAgIDEgLSAgIERvIG5vdCBkaXNwb3NlLiBUaGUgZ3JhcGhpYyBpcyB0byBiZSBsZWZ0XG4gICAgLy8gICAgICAgICAgIGluIHBsYWNlLlxuICAgIC8vICAgICAyIC0gICBSZXN0b3JlIHRvIGJhY2tncm91bmQgY29sb3IuIFRoZSBhcmVhIHVzZWQgYnkgdGhlXG4gICAgLy8gICAgICAgICAgIGdyYXBoaWMgbXVzdCBiZSByZXN0b3JlZCB0byB0aGUgYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAgICAgMyAtICAgUmVzdG9yZSB0byBwcmV2aW91cy4gVGhlIGRlY29kZXIgaXMgcmVxdWlyZWQgdG9cbiAgICAvLyAgICAgICAgICAgcmVzdG9yZSB0aGUgYXJlYSBvdmVyd3JpdHRlbiBieSB0aGUgZ3JhcGhpYyB3aXRoXG4gICAgLy8gICAgICAgICAgIHdoYXQgd2FzIHRoZXJlIHByaW9yIHRvIHJlbmRlcmluZyB0aGUgZ3JhcGhpYy5cbiAgICAvLyAgNC03IC0gICAgVG8gYmUgZGVmaW5lZC5cbiAgICAvLyBOT1RFKGRlYW5tKTogRGlzcG9zZSBiYWNrZ3JvdW5kIGRvZXNuJ3QgcmVhbGx5IHdvcmssIGFwcGFyZW50bHkgbW9zdFxuICAgIC8vIGJyb3dzZXJzIGlnbm9yZSB0aGUgYmFja2dyb3VuZCBwYWxldHRlIGluZGV4IGFuZCBjbGVhciB0byB0cmFuc3BhcmVuY3kuXG4gICAgdmFyIGRpc3Bvc2FsID0gb3B0cy5kaXNwb3NhbCA9PT0gdW5kZWZpbmVkID8gMCA6IG9wdHMuZGlzcG9zYWw7XG4gICAgaWYgKGRpc3Bvc2FsIDwgMCB8fCBkaXNwb3NhbCA+IDMpXG4gICAgICAvLyA0LTcgaXMgcmVzZXJ2ZWQuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaXNwb3NhbCBvdXQgb2YgcmFuZ2UuXCIpO1xuXG4gICAgdmFyIHVzZV90cmFuc3BhcmVuY3kgPSBmYWxzZTtcbiAgICB2YXIgdHJhbnNwYXJlbnRfaW5kZXggPSAwO1xuICAgIGlmIChvcHRzLnRyYW5zcGFyZW50ICE9PSB1bmRlZmluZWQgJiYgb3B0cy50cmFuc3BhcmVudCAhPT0gbnVsbCkge1xuICAgICAgdXNlX3RyYW5zcGFyZW5jeSA9IHRydWU7XG4gICAgICB0cmFuc3BhcmVudF9pbmRleCA9IG9wdHMudHJhbnNwYXJlbnQ7XG4gICAgICBpZiAodHJhbnNwYXJlbnRfaW5kZXggPCAwIHx8IHRyYW5zcGFyZW50X2luZGV4ID49IG51bV9jb2xvcnMpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zcGFyZW50IGNvbG9yIGluZGV4LlwiKTtcbiAgICB9XG5cbiAgICBpZiAoZGlzcG9zYWwgIT09IDAgfHwgdXNlX3RyYW5zcGFyZW5jeSB8fCBkZWxheSAhPT0gMCkge1xuICAgICAgLy8gLSBHcmFwaGljcyBDb250cm9sIEV4dGVuc2lvblxuICAgICAgYnVmW3ArK10gPSAweDIxO1xuICAgICAgYnVmW3ArK10gPSAweGY5OyAvLyBFeHRlbnNpb24gLyBMYWJlbC5cbiAgICAgIGJ1ZltwKytdID0gNDsgLy8gQnl0ZSBzaXplLlxuXG4gICAgICBidWZbcCsrXSA9IChkaXNwb3NhbCA8PCAyKSB8ICh1c2VfdHJhbnNwYXJlbmN5ID09PSB0cnVlID8gMSA6IDApO1xuICAgICAgYnVmW3ArK10gPSBkZWxheSAmIDB4ZmY7XG4gICAgICBidWZbcCsrXSA9IChkZWxheSA+PiA4KSAmIDB4ZmY7XG4gICAgICBidWZbcCsrXSA9IHRyYW5zcGFyZW50X2luZGV4OyAvLyBUcmFuc3BhcmVudCBjb2xvciBpbmRleC5cbiAgICAgIGJ1ZltwKytdID0gMDsgLy8gQmxvY2sgVGVybWluYXRvci5cbiAgICB9XG5cbiAgICAvLyAtIEltYWdlIERlc2NyaXB0b3JcbiAgICBidWZbcCsrXSA9IDB4MmM7IC8vIEltYWdlIFNlcGVyYXRvci5cbiAgICBidWZbcCsrXSA9IHggJiAweGZmO1xuICAgIGJ1ZltwKytdID0gKHggPj4gOCkgJiAweGZmOyAvLyBMZWZ0LlxuICAgIGJ1ZltwKytdID0geSAmIDB4ZmY7XG4gICAgYnVmW3ArK10gPSAoeSA+PiA4KSAmIDB4ZmY7IC8vIFRvcC5cbiAgICBidWZbcCsrXSA9IHcgJiAweGZmO1xuICAgIGJ1ZltwKytdID0gKHcgPj4gOCkgJiAweGZmO1xuICAgIGJ1ZltwKytdID0gaCAmIDB4ZmY7XG4gICAgYnVmW3ArK10gPSAoaCA+PiA4KSAmIDB4ZmY7XG4gICAgLy8gTk9URTogTm8gc29ydCBmbGFnICh1bnVzZWQ/KS5cbiAgICAvLyBUT0RPKGRlYW5tKTogU3VwcG9ydCBpbnRlcmxhY2UuXG4gICAgYnVmW3ArK10gPSB1c2luZ19sb2NhbF9wYWxldHRlID09PSB0cnVlID8gMHg4MCB8IChtaW5fY29kZV9zaXplIC0gMSkgOiAwO1xuXG4gICAgLy8gLSBMb2NhbCBDb2xvciBUYWJsZVxuICAgIGlmICh1c2luZ19sb2NhbF9wYWxldHRlID09PSB0cnVlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBwYWxldHRlLmxlbmd0aDsgaSA8IGlsOyArK2kpIHtcbiAgICAgICAgdmFyIHJnYiA9IHBhbGV0dGVbaV07XG4gICAgICAgIGJ1ZltwKytdID0gKHJnYiA+PiAxNikgJiAweGZmO1xuICAgICAgICBidWZbcCsrXSA9IChyZ2IgPj4gOCkgJiAweGZmO1xuICAgICAgICBidWZbcCsrXSA9IHJnYiAmIDB4ZmY7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcCA9IEdpZldyaXRlck91dHB1dExaV0NvZGVTdHJlYW0oXG4gICAgICBidWYsXG4gICAgICBwLFxuICAgICAgbWluX2NvZGVfc2l6ZSA8IDIgPyAyIDogbWluX2NvZGVfc2l6ZSxcbiAgICAgIGluZGV4ZWRfcGl4ZWxzXG4gICAgKTtcblxuICAgIHJldHVybiBwO1xuICB9O1xuXG4gIHRoaXMuZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGVuZGVkID09PSBmYWxzZSkge1xuICAgICAgYnVmW3ArK10gPSAweDNiOyAvLyBUcmFpbGVyLlxuICAgICAgZW5kZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfTtcblxuICB0aGlzLmdldE91dHB1dEJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBidWY7XG4gIH07XG4gIHRoaXMuc2V0T3V0cHV0QnVmZmVyID0gZnVuY3Rpb24odikge1xuICAgIGJ1ZiA9IHY7XG4gIH07XG4gIHRoaXMuZ2V0T3V0cHV0QnVmZmVyUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcDtcbiAgfTtcbiAgdGhpcy5zZXRPdXRwdXRCdWZmZXJQb3NpdGlvbiA9IGZ1bmN0aW9uKHYpIHtcbiAgICBwID0gdjtcbiAgfTtcbn1cblxuLy8gTWFpbiBjb21wcmVzc2lvbiByb3V0aW5lLCBwYWxldHRlIGluZGV4ZXMgLT4gTFpXIGNvZGUgc3RyZWFtLlxuLy8gfGluZGV4X3N0cmVhbXwgbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBlbnRyeS5cbmZ1bmN0aW9uIEdpZldyaXRlck91dHB1dExaV0NvZGVTdHJlYW0oYnVmLCBwLCBtaW5fY29kZV9zaXplLCBpbmRleF9zdHJlYW0pIHtcbiAgYnVmW3ArK10gPSBtaW5fY29kZV9zaXplO1xuICB2YXIgY3VyX3N1YmJsb2NrID0gcCsrOyAvLyBQb2ludGluZyBhdCB0aGUgbGVuZ3RoIGZpZWxkLlxuXG4gIHZhciBjbGVhcl9jb2RlID0gMSA8PCBtaW5fY29kZV9zaXplO1xuICB2YXIgY29kZV9tYXNrID0gY2xlYXJfY29kZSAtIDE7XG4gIHZhciBlb2lfY29kZSA9IGNsZWFyX2NvZGUgKyAxO1xuICB2YXIgbmV4dF9jb2RlID0gZW9pX2NvZGUgKyAxO1xuXG4gIHZhciBjdXJfY29kZV9zaXplID0gbWluX2NvZGVfc2l6ZSArIDE7IC8vIE51bWJlciBvZiBiaXRzIHBlciBjb2RlLlxuICB2YXIgY3VyX3NoaWZ0ID0gMDtcbiAgLy8gV2UgaGF2ZSBhdCBtb3N0IDEyLWJpdCBjb2Rlcywgc28gd2Ugc2hvdWxkIGhhdmUgdG8gaG9sZCBhIG1heCBvZiAxOVxuICAvLyBiaXRzIGhlcmUgKGFuZCB0aGVuIHdlIHdvdWxkIHdyaXRlIG91dCkuXG4gIHZhciBjdXIgPSAwO1xuXG4gIGZ1bmN0aW9uIGVtaXRfYnl0ZXNfdG9fYnVmZmVyKGJpdF9ibG9ja19zaXplKSB7XG4gICAgd2hpbGUgKGN1cl9zaGlmdCA+PSBiaXRfYmxvY2tfc2l6ZSkge1xuICAgICAgYnVmW3ArK10gPSBjdXIgJiAweGZmO1xuICAgICAgY3VyID4+PSA4O1xuICAgICAgY3VyX3NoaWZ0IC09IDg7XG4gICAgICBpZiAocCA9PT0gY3VyX3N1YmJsb2NrICsgMjU2KSB7XG4gICAgICAgIC8vIEZpbmlzaGVkIGEgc3ViYmxvY2suXG4gICAgICAgIGJ1ZltjdXJfc3ViYmxvY2tdID0gMjU1O1xuICAgICAgICBjdXJfc3ViYmxvY2sgPSBwKys7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZW1pdF9jb2RlKGMpIHtcbiAgICBjdXIgfD0gYyA8PCBjdXJfc2hpZnQ7XG4gICAgY3VyX3NoaWZ0ICs9IGN1cl9jb2RlX3NpemU7XG4gICAgZW1pdF9ieXRlc190b19idWZmZXIoOCk7XG4gIH1cblxuICAvLyBJIGFtIG5vdCBhbiBleHBlcnQgb24gdGhlIHRvcGljLCBhbmQgSSBkb24ndCB3YW50IHRvIHdyaXRlIGEgdGhlc2lzLlxuICAvLyBIb3dldmVyLCBpdCBpcyBnb29kIHRvIG91dGxpbmUgaGVyZSB0aGUgYmFzaWMgYWxnb3JpdGhtIGFuZCB0aGUgZmV3IGRhdGFcbiAgLy8gc3RydWN0dXJlcyBhbmQgb3B0aW1pemF0aW9ucyBoZXJlIHRoYXQgbWFrZSB0aGlzIGltcGxlbWVudGF0aW9uIGZhc3QuXG4gIC8vIFRoZSBiYXNpYyBpZGVhIGJlaGluZCBMWlcgaXMgdG8gYnVpbGQgYSB0YWJsZSBvZiBwcmV2aW91c2x5IHNlZW4gcnVuc1xuICAvLyBhZGRyZXNzZWQgYnkgYSBzaG9ydCBpZCAoaGVyZWluIGNhbGxlZCBvdXRwdXQgY29kZSkuICBBbGwgZGF0YSBpc1xuICAvLyByZWZlcmVuY2VkIGJ5IGEgY29kZSwgd2hpY2ggcmVwcmVzZW50cyBvbmUgb3IgbW9yZSB2YWx1ZXMgZnJvbSB0aGVcbiAgLy8gb3JpZ2luYWwgaW5wdXQgc3RyZWFtLiAgQWxsIGlucHV0IGJ5dGVzIGNhbiBiZSByZWZlcmVuY2VkIGFzIHRoZSBzYW1lXG4gIC8vIHZhbHVlIGFzIGFuIG91dHB1dCBjb2RlLiAgU28gaWYgeW91IGRpZG4ndCB3YW50IGFueSBjb21wcmVzc2lvbiwgeW91XG4gIC8vIGNvdWxkIG1vcmUgb3IgbGVzcyBqdXN0IG91dHB1dCB0aGUgb3JpZ2luYWwgYnl0ZXMgYXMgY29kZXMgKHRoZXJlIGFyZVxuICAvLyBzb21lIGRldGFpbHMgdG8gdGhpcywgYnV0IGl0IGlzIHRoZSBpZGVhKS4gIEluIG9yZGVyIHRvIGFjaGlldmVcbiAgLy8gY29tcHJlc3Npb24sIHZhbHVlcyBncmVhdGVyIHRoZW4gdGhlIGlucHV0IHJhbmdlIChjb2RlcyBjYW4gYmUgdXAgdG9cbiAgLy8gMTItYml0IHdoaWxlIGlucHV0IG9ubHkgOC1iaXQpIHJlcHJlc2VudCBhIHNlcXVlbmNlIG9mIHByZXZpb3VzbHkgc2VlblxuICAvLyBpbnB1dHMuICBUaGUgZGVjb21wcmVzc29yIGlzIGFibGUgdG8gYnVpbGQgdGhlIHNhbWUgbWFwcGluZyB3aGlsZVxuICAvLyBkZWNvZGluZywgc28gdGhlcmUgaXMgYWx3YXlzIGEgc2hhcmVkIGNvbW1vbiBrbm93bGVkZ2UgYmV0d2VlbiB0aGVcbiAgLy8gZW5jb2RpbmcgYW5kIGRlY29kZXIsIHdoaWNoIGlzIGFsc28gaW1wb3J0YW50IGZvciBcInRpbWluZ1wiIGFzcGVjdHMgbGlrZVxuICAvLyBob3cgdG8gaGFuZGxlIHZhcmlhYmxlIGJpdCB3aWR0aCBjb2RlIGVuY29kaW5nLlxuICAvL1xuICAvLyBPbmUgb2J2aW91cyBidXQgdmVyeSBpbXBvcnRhbnQgY29uc2VxdWVuY2Ugb2YgdGhlIHRhYmxlIHN5c3RlbSBpcyB0aGVyZVxuICAvLyBpcyBhbHdheXMgYSB1bmlxdWUgaWQgKGF0IG1vc3QgMTItYml0cykgdG8gbWFwIHRoZSBydW5zLiAgJ0EnIG1pZ2h0IGJlXG4gIC8vIDQsIHRoZW4gJ0FBJyBtaWdodCBiZSAxMCwgJ0FBQScgMTEsICdBQUFBJyAxMiwgZXRjLiAgVGhpcyByZWxhdGlvbnNoaXBcbiAgLy8gY2FuIGJlIHVzZWQgZm9yIGFuIGVmZmVjaWVudCBsb29rdXAgc3RyYXRlZ3kgZm9yIHRoZSBjb2RlIG1hcHBpbmcuICBXZVxuICAvLyBuZWVkIHRvIGtub3cgaWYgYSBydW4gaGFzIGJlZW4gc2VlbiBiZWZvcmUsIGFuZCBiZSBhYmxlIHRvIG1hcCB0aGF0IHJ1blxuICAvLyB0byB0aGUgb3V0cHV0IGNvZGUuICBTaW5jZSB3ZSBzdGFydCB3aXRoIGtub3duIHVuaXF1ZSBpZHMgKGlucHV0IGJ5dGVzKSxcbiAgLy8gYW5kIHRoZW4gZnJvbSB0aG9zZSBidWlsZCBtb3JlIHVuaXF1ZSBpZHMgKHRhYmxlIGVudHJpZXMpLCB3ZSBjYW5cbiAgLy8gY29udGludWUgdGhpcyBjaGFpbiAoYWxtb3N0IGxpa2UgYSBsaW5rZWQgbGlzdCkgdG8gYWx3YXlzIGhhdmUgc21hbGxcbiAgLy8gaW50ZWdlciB2YWx1ZXMgdGhhdCByZXByZXNlbnQgdGhlIGN1cnJlbnQgYnl0ZSBjaGFpbnMgaW4gdGhlIGVuY29kZXIuXG4gIC8vIFRoaXMgbWVhbnMgaW5zdGVhZCBvZiB0cmFja2luZyB0aGUgaW5wdXQgYnl0ZXMgKEFBQUFCQ0QpIHRvIGtub3cgb3VyXG4gIC8vIGN1cnJlbnQgc3RhdGUsIHdlIGNhbiB0cmFjayB0aGUgdGFibGUgZW50cnkgZm9yIEFBQUFCQyAoaXQgaXMgZ3VhcmFudGVlZFxuICAvLyB0byBleGlzdCBieSB0aGUgbmF0dXJlIG9mIHRoZSBhbGdvcml0aG0pIGFuZCB0aGUgbmV4dCBjaGFyYWN0ZXIgRC5cbiAgLy8gVGhlcmVmb3IgdGhlIHR1cGxlIG9mICh0YWJsZV9lbnRyeSwgYnl0ZSkgaXMgZ3VhcmFudGVlZCB0byBhbHNvIGJlXG4gIC8vIHVuaXF1ZS4gIFRoaXMgYWxsb3dzIHVzIHRvIGNyZWF0ZSBhIHNpbXBsZSBsb29rdXAga2V5IGZvciBtYXBwaW5nIGlucHV0XG4gIC8vIHNlcXVlbmNlcyB0byBjb2RlcyAodGFibGUgaW5kaWNlcykgd2l0aG91dCBoYXZpbmcgdG8gc3RvcmUgb3Igc2VhcmNoXG4gIC8vIGFueSBvZiB0aGUgY29kZSBzZXF1ZW5jZXMuICBTbyBpZiAnQUFBQScgaGFzIGEgdGFibGUgZW50cnkgb2YgMTIsIHRoZVxuICAvLyB0dXBsZSBvZiAoJ0FBQUEnLCBLKSBmb3IgYW55IGlucHV0IGJ5dGUgSyB3aWxsIGJlIHVuaXF1ZSwgYW5kIGNhbiBiZSBvdXJcbiAgLy8ga2V5LiAgVGhpcyBsZWFkcyB0byBhIGludGVnZXIgdmFsdWUgYXQgbW9zdCAyMC1iaXRzLCB3aGljaCBjYW4gYWx3YXlzXG4gIC8vIGZpdCBpbiBhbiBTTUkgdmFsdWUgYW5kIGJlIHVzZWQgYXMgYSBmYXN0IHNwYXJzZSBhcnJheSAvIG9iamVjdCBrZXkuXG5cbiAgLy8gT3V0cHV0IGNvZGUgZm9yIHRoZSBjdXJyZW50IGNvbnRlbnRzIG9mIHRoZSBpbmRleCBidWZmZXIuXG4gIHZhciBpYl9jb2RlID0gaW5kZXhfc3RyZWFtWzBdICYgY29kZV9tYXNrOyAvLyBMb2FkIGZpcnN0IGlucHV0IGluZGV4LlxuICB2YXIgY29kZV90YWJsZSA9IHt9OyAvLyBLZXknZCBvbiBvdXIgMjAtYml0IFwidHVwbGVcIi5cblxuICBlbWl0X2NvZGUoY2xlYXJfY29kZSk7IC8vIFNwZWMgc2F5cyBmaXJzdCBjb2RlIHNob3VsZCBiZSBhIGNsZWFyIGNvZGUuXG5cbiAgLy8gRmlyc3QgaW5kZXggYWxyZWFkeSBsb2FkZWQsIHByb2Nlc3MgdGhlIHJlc3Qgb2YgdGhlIHN0cmVhbS5cbiAgZm9yICh2YXIgaSA9IDEsIGlsID0gaW5kZXhfc3RyZWFtLmxlbmd0aDsgaSA8IGlsOyArK2kpIHtcbiAgICB2YXIgayA9IGluZGV4X3N0cmVhbVtpXSAmIGNvZGVfbWFzaztcbiAgICB2YXIgY3VyX2tleSA9IChpYl9jb2RlIDw8IDgpIHwgazsgLy8gKHByZXYsIGspIHVuaXF1ZSB0dXBsZS5cbiAgICB2YXIgY3VyX2NvZGUgPSBjb2RlX3RhYmxlW2N1cl9rZXldOyAvLyBidWZmZXIgKyBrLlxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSB0byBjcmVhdGUgYSBuZXcgY29kZSB0YWJsZSBlbnRyeS5cbiAgICBpZiAoY3VyX2NvZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gV2UgZG9uJ3QgaGF2ZSBidWZmZXIgKyBrLlxuICAgICAgLy8gRW1pdCBpbmRleCBidWZmZXIgKHdpdGhvdXQgaykuXG4gICAgICAvLyBUaGlzIGlzIGFuIGlubGluZSB2ZXJzaW9uIG9mIGVtaXRfY29kZSwgYmVjYXVzZSB0aGlzIGlzIHRoZSBjb3JlXG4gICAgICAvLyB3cml0aW5nIHJvdXRpbmUgb2YgdGhlIGNvbXByZXNzb3IgKGFuZCBWOCBjYW5ub3QgaW5saW5lIGVtaXRfY29kZVxuICAgICAgLy8gYmVjYXVzZSBpdCBpcyBhIGNsb3N1cmUgaGVyZSBpbiBhIGRpZmZlcmVudCBjb250ZXh0KS4gIEFkZGl0aW9uYWxseVxuICAgICAgLy8gd2UgY2FuIGNhbGwgZW1pdF9ieXRlX3RvX2J1ZmZlciBsZXNzIG9mdGVuLCBiZWNhdXNlIHdlIGNhbiBoYXZlXG4gICAgICAvLyAzMC1iaXRzIChmcm9tIG91ciAzMS1iaXQgc2lnbmVkIFNNSSksIGFuZCB3ZSBrbm93IG91ciBjb2RlcyB3aWxsIG9ubHlcbiAgICAgIC8vIGJlIDEyLWJpdHMsIHNvIGNhbiBzYWZlbHkgaGF2ZSAxOC1iaXRzIHRoZXJlIHdpdGhvdXQgb3ZlcmZsb3cuXG4gICAgICAvLyBlbWl0X2NvZGUoaWJfY29kZSk7XG4gICAgICBjdXIgfD0gaWJfY29kZSA8PCBjdXJfc2hpZnQ7XG4gICAgICBjdXJfc2hpZnQgKz0gY3VyX2NvZGVfc2l6ZTtcbiAgICAgIHdoaWxlIChjdXJfc2hpZnQgPj0gOCkge1xuICAgICAgICBidWZbcCsrXSA9IGN1ciAmIDB4ZmY7XG4gICAgICAgIGN1ciA+Pj0gODtcbiAgICAgICAgY3VyX3NoaWZ0IC09IDg7XG4gICAgICAgIGlmIChwID09PSBjdXJfc3ViYmxvY2sgKyAyNTYpIHtcbiAgICAgICAgICAvLyBGaW5pc2hlZCBhIHN1YmJsb2NrLlxuICAgICAgICAgIGJ1ZltjdXJfc3ViYmxvY2tdID0gMjU1O1xuICAgICAgICAgIGN1cl9zdWJibG9jayA9IHArKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobmV4dF9jb2RlID09PSA0MDk2KSB7XG4gICAgICAgIC8vIFRhYmxlIGZ1bGwsIG5lZWQgYSBjbGVhci5cbiAgICAgICAgZW1pdF9jb2RlKGNsZWFyX2NvZGUpO1xuICAgICAgICBuZXh0X2NvZGUgPSBlb2lfY29kZSArIDE7XG4gICAgICAgIGN1cl9jb2RlX3NpemUgPSBtaW5fY29kZV9zaXplICsgMTtcbiAgICAgICAgY29kZV90YWJsZSA9IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGFibGUgbm90IGZ1bGwsIGluc2VydCBhIG5ldyBlbnRyeS5cbiAgICAgICAgLy8gSW5jcmVhc2Ugb3VyIHZhcmlhYmxlIGJpdCBjb2RlIHNpemVzIGlmIG5lY2Vzc2FyeS4gIFRoaXMgaXMgYSBiaXRcbiAgICAgICAgLy8gdHJpY2t5IGFzIGl0IGlzIGJhc2VkIG9uIFwidGltaW5nXCIgYmV0d2VlbiB0aGUgZW5jb2RpbmcgYW5kXG4gICAgICAgIC8vIGRlY29kZXIuICBGcm9tIHRoZSBlbmNvZGVycyBwZXJzcGVjdGl2ZSB0aGlzIHNob3VsZCBoYXBwZW4gYWZ0ZXJcbiAgICAgICAgLy8gd2UndmUgYWxyZWFkeSBlbWl0dGVkIHRoZSBpbmRleCBidWZmZXIgYW5kIGFyZSBhYm91dCB0byBjcmVhdGUgdGhlXG4gICAgICAgIC8vIGZpcnN0IHRhYmxlIGVudHJ5IHRoYXQgd291bGQgb3ZlcmZsb3cgb3VyIGN1cnJlbnQgY29kZSBiaXQgc2l6ZS5cbiAgICAgICAgaWYgKG5leHRfY29kZSA+PSAxIDw8IGN1cl9jb2RlX3NpemUpICsrY3VyX2NvZGVfc2l6ZTtcbiAgICAgICAgY29kZV90YWJsZVtjdXJfa2V5XSA9IG5leHRfY29kZSsrOyAvLyBJbnNlcnQgaW50byBjb2RlIHRhYmxlLlxuICAgICAgfVxuXG4gICAgICBpYl9jb2RlID0gazsgLy8gSW5kZXggYnVmZmVyIHRvIHNpbmdsZSBpbnB1dCBrLlxuICAgIH0gZWxzZSB7XG4gICAgICBpYl9jb2RlID0gY3VyX2NvZGU7IC8vIEluZGV4IGJ1ZmZlciB0byBzZXF1ZW5jZSBpbiBjb2RlIHRhYmxlLlxuICAgIH1cbiAgfVxuXG4gIGVtaXRfY29kZShpYl9jb2RlKTsgLy8gVGhlcmUgd2lsbCBzdGlsbCBiZSBzb21ldGhpbmcgaW4gdGhlIGluZGV4IGJ1ZmZlci5cbiAgZW1pdF9jb2RlKGVvaV9jb2RlKTsgLy8gRW5kIE9mIEluZm9ybWF0aW9uLlxuXG4gIC8vIEZsdXNoIC8gZmluYWxpemUgdGhlIHN1Yi1ibG9ja3Mgc3RyZWFtIHRvIHRoZSBidWZmZXIuXG4gIGVtaXRfYnl0ZXNfdG9fYnVmZmVyKDEpO1xuXG4gIC8vIEZpbmlzaCB0aGUgc3ViLWJsb2Nrcywgd3JpdGluZyBvdXQgYW55IHVuZmluaXNoZWQgbGVuZ3RocyBhbmRcbiAgLy8gdGVybWluYXRpbmcgd2l0aCBhIHN1Yi1ibG9jayBvZiBsZW5ndGggMC4gIElmIHdlIGhhdmUgYWxyZWFkeSBzdGFydGVkXG4gIC8vIGJ1dCBub3QgeWV0IHVzZWQgYSBzdWItYmxvY2sgaXQgY2FuIGp1c3QgYmVjb21lIHRoZSB0ZXJtaW5hdG9yLlxuICBpZiAoY3VyX3N1YmJsb2NrICsgMSA9PT0gcCkge1xuICAgIC8vIFN0YXJ0ZWQgYnV0IHVudXNlZC5cbiAgICBidWZbY3VyX3N1YmJsb2NrXSA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gU3RhcnRlZCBhbmQgdXNlZCwgd3JpdGUgbGVuZ3RoIGFuZCBhZGRpdGlvbmFsIHRlcm1pbmF0b3IgYmxvY2suXG4gICAgYnVmW2N1cl9zdWJibG9ja10gPSBwIC0gY3VyX3N1YmJsb2NrIC0gMTtcbiAgICBidWZbcCsrXSA9IDA7XG4gIH1cbiAgcmV0dXJuIHA7XG59XG5cbmZ1bmN0aW9uIEdpZlJlYWRlcihidWYpIHtcbiAgdmFyIHAgPSAwO1xuXG4gIC8vIC0gSGVhZGVyIChHSUY4N2Egb3IgR0lGODlhKS5cbiAgaWYgKFxuICAgIGJ1ZltwKytdICE9PSAweDQ3IHx8XG4gICAgYnVmW3ArK10gIT09IDB4NDkgfHxcbiAgICBidWZbcCsrXSAhPT0gMHg0NiB8fFxuICAgIGJ1ZltwKytdICE9PSAweDM4IHx8XG4gICAgKChidWZbcCsrXSArIDEpICYgMHhmZCkgIT09IDB4MzggfHxcbiAgICBidWZbcCsrXSAhPT0gMHg2MVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEdJRiA4N2EvODlhIGhlYWRlci5cIik7XG4gIH1cblxuICAvLyAtIExvZ2ljYWwgU2NyZWVuIERlc2NyaXB0b3IuXG4gIHZhciB3aWR0aCA9IGJ1ZltwKytdIHwgKGJ1ZltwKytdIDw8IDgpO1xuICB2YXIgaGVpZ2h0ID0gYnVmW3ArK10gfCAoYnVmW3ArK10gPDwgOCk7XG4gIHZhciBwZjAgPSBidWZbcCsrXTsgLy8gPFBhY2tlZCBGaWVsZHM+LlxuICB2YXIgZ2xvYmFsX3BhbGV0dGVfZmxhZyA9IHBmMCA+PiA3O1xuICB2YXIgbnVtX2dsb2JhbF9jb2xvcnNfcG93MiA9IHBmMCAmIDB4NztcbiAgdmFyIG51bV9nbG9iYWxfY29sb3JzID0gMSA8PCAobnVtX2dsb2JhbF9jb2xvcnNfcG93MiArIDEpO1xuICB2YXIgYmFja2dyb3VuZCA9IGJ1ZltwKytdO1xuICBidWZbcCsrXTsgLy8gUGl4ZWwgYXNwZWN0IHJhdGlvICh1bnVzZWQ/KS5cblxuICB2YXIgZ2xvYmFsX3BhbGV0dGVfb2Zmc2V0ID0gbnVsbDtcbiAgdmFyIGdsb2JhbF9wYWxldHRlX3NpemUgPSBudWxsO1xuXG4gIGlmIChnbG9iYWxfcGFsZXR0ZV9mbGFnKSB7XG4gICAgZ2xvYmFsX3BhbGV0dGVfb2Zmc2V0ID0gcDtcbiAgICBnbG9iYWxfcGFsZXR0ZV9zaXplID0gbnVtX2dsb2JhbF9jb2xvcnM7XG4gICAgcCArPSBudW1fZ2xvYmFsX2NvbG9ycyAqIDM7IC8vIFNlZWsgcGFzdCBwYWxldHRlLlxuICB9XG5cbiAgdmFyIG5vX2VvZiA9IHRydWU7XG5cbiAgdmFyIGZyYW1lcyA9IFtdO1xuXG4gIHZhciBkZWxheSA9IDA7XG4gIHZhciB0cmFuc3BhcmVudF9pbmRleCA9IG51bGw7XG4gIHZhciBkaXNwb3NhbCA9IDA7IC8vIDAgLSBObyBkaXNwb3NhbCBzcGVjaWZpZWQuXG4gIHZhciBsb29wX2NvdW50ID0gbnVsbDtcblxuICB0aGlzLndpZHRoID0gd2lkdGg7XG4gIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gIHdoaWxlIChub19lb2YgJiYgcCA8IGJ1Zi5sZW5ndGgpIHtcbiAgICBzd2l0Y2ggKGJ1ZltwKytdKSB7XG4gICAgICBjYXNlIDB4MjE6IC8vIEdyYXBoaWNzIENvbnRyb2wgRXh0ZW5zaW9uIEJsb2NrXG4gICAgICAgIHN3aXRjaCAoYnVmW3ArK10pIHtcbiAgICAgICAgICBjYXNlIDB4ZmY6IC8vIEFwcGxpY2F0aW9uIHNwZWNpZmljIGJsb2NrXG4gICAgICAgICAgICAvLyBUcnkgaWYgaXQncyBhIE5ldHNjYXBlIGJsb2NrICh3aXRoIGFuaW1hdGlvbiBsb29wIGNvdW50ZXIpLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBidWZbcF0gIT09IDB4MGIgfHwgLy8gMjEgRkYgYWxyZWFkeSByZWFkLCBjaGVjayBibG9jayBzaXplLlxuICAgICAgICAgICAgICAvLyBORVRTQ0FQRTIuMFxuICAgICAgICAgICAgICAoYnVmW3AgKyAxXSA9PSAweDRlICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyAyXSA9PSAweDQ1ICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyAzXSA9PSAweDU0ICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyA0XSA9PSAweDUzICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyA1XSA9PSAweDQzICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyA2XSA9PSAweDQxICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyA3XSA9PSAweDUwICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyA4XSA9PSAweDQ1ICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyA5XSA9PSAweDMyICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyAxMF0gPT0gMHgyZSAmJlxuICAgICAgICAgICAgICAgIGJ1ZltwICsgMTFdID09IDB4MzAgJiZcbiAgICAgICAgICAgICAgICAvLyBTdWItYmxvY2tcbiAgICAgICAgICAgICAgICBidWZbcCArIDEyXSA9PSAweDAzICYmXG4gICAgICAgICAgICAgICAgYnVmW3AgKyAxM10gPT0gMHgwMSAmJlxuICAgICAgICAgICAgICAgIGJ1ZltwICsgMTZdID09IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcCArPSAxNDtcbiAgICAgICAgICAgICAgbG9vcF9jb3VudCA9IGJ1ZltwKytdIHwgKGJ1ZltwKytdIDw8IDgpO1xuICAgICAgICAgICAgICBwKys7IC8vIFNraXAgdGVybWluYXRvci5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFdlIGRvbid0IGtub3cgd2hhdCBpdCBpcywganVzdCB0cnkgdG8gZ2V0IHBhc3QgaXQuXG4gICAgICAgICAgICAgIHAgKz0gMTI7XG4gICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VlayB0aHJvdWdoIHN1YmJsb2Nrcy5cbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tfc2l6ZSA9IGJ1ZltwKytdO1xuICAgICAgICAgICAgICAgIC8vIEJhZCBibG9jayBzaXplIChleDogdW5kZWZpbmVkIGZyb20gYW4gb3V0IG9mIGJvdW5kcyByZWFkKS5cbiAgICAgICAgICAgICAgICBpZiAoIShibG9ja19zaXplID49IDApKSB0aHJvdyBFcnJvcihcIkludmFsaWQgYmxvY2sgc2l6ZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tfc2l6ZSA9PT0gMCkgYnJlYWs7IC8vIDAgc2l6ZSBpcyB0ZXJtaW5hdG9yXG4gICAgICAgICAgICAgICAgcCArPSBibG9ja19zaXplO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMHhmOTogLy8gR3JhcGhpY3MgQ29udHJvbCBFeHRlbnNpb25cbiAgICAgICAgICAgIGlmIChidWZbcCsrXSAhPT0gMHg0IHx8IGJ1ZltwICsgNF0gIT09IDApXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZ3JhcGhpY3MgZXh0ZW5zaW9uIGJsb2NrLlwiKTtcbiAgICAgICAgICAgIHZhciBwZjEgPSBidWZbcCsrXTtcbiAgICAgICAgICAgIGRlbGF5ID0gYnVmW3ArK10gfCAoYnVmW3ArK10gPDwgOCk7XG4gICAgICAgICAgICB0cmFuc3BhcmVudF9pbmRleCA9IGJ1ZltwKytdO1xuICAgICAgICAgICAgaWYgKChwZjEgJiAxKSA9PT0gMCkgdHJhbnNwYXJlbnRfaW5kZXggPSBudWxsO1xuICAgICAgICAgICAgZGlzcG9zYWwgPSAocGYxID4+IDIpICYgMHg3O1xuICAgICAgICAgICAgcCsrOyAvLyBTa2lwIHRlcm1pbmF0b3IuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMHhmZTogLy8gQ29tbWVudCBFeHRlbnNpb24uXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAvLyBTZWVrIHRocm91Z2ggc3ViYmxvY2tzLlxuICAgICAgICAgICAgICB2YXIgYmxvY2tfc2l6ZSA9IGJ1ZltwKytdO1xuICAgICAgICAgICAgICAvLyBCYWQgYmxvY2sgc2l6ZSAoZXg6IHVuZGVmaW5lZCBmcm9tIGFuIG91dCBvZiBib3VuZHMgcmVhZCkuXG4gICAgICAgICAgICAgIGlmICghKGJsb2NrX3NpemUgPj0gMCkpIHRocm93IEVycm9yKFwiSW52YWxpZCBibG9jayBzaXplXCIpO1xuICAgICAgICAgICAgICBpZiAoYmxvY2tfc2l6ZSA9PT0gMCkgYnJlYWs7IC8vIDAgc2l6ZSBpcyB0ZXJtaW5hdG9yXG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGJ1Zi5zbGljZShwLCBwK2Jsb2NrX3NpemUpLnRvU3RyaW5nKCdhc2NpaScpKTtcbiAgICAgICAgICAgICAgcCArPSBibG9ja19zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcIlVua25vd24gZ3JhcGhpYyBjb250cm9sIGxhYmVsOiAweFwiICsgYnVmW3AgLSAxXS50b1N0cmluZygxNilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgMHgyYzogLy8gSW1hZ2UgRGVzY3JpcHRvci5cbiAgICAgICAgdmFyIHggPSBidWZbcCsrXSB8IChidWZbcCsrXSA8PCA4KTtcbiAgICAgICAgdmFyIHkgPSBidWZbcCsrXSB8IChidWZbcCsrXSA8PCA4KTtcbiAgICAgICAgdmFyIHcgPSBidWZbcCsrXSB8IChidWZbcCsrXSA8PCA4KTtcbiAgICAgICAgdmFyIGggPSBidWZbcCsrXSB8IChidWZbcCsrXSA8PCA4KTtcbiAgICAgICAgdmFyIHBmMiA9IGJ1ZltwKytdO1xuICAgICAgICB2YXIgbG9jYWxfcGFsZXR0ZV9mbGFnID0gcGYyID4+IDc7XG4gICAgICAgIHZhciBpbnRlcmxhY2VfZmxhZyA9IChwZjIgPj4gNikgJiAxO1xuICAgICAgICB2YXIgbnVtX2xvY2FsX2NvbG9yc19wb3cyID0gcGYyICYgMHg3O1xuICAgICAgICB2YXIgbnVtX2xvY2FsX2NvbG9ycyA9IDEgPDwgKG51bV9sb2NhbF9jb2xvcnNfcG93MiArIDEpO1xuICAgICAgICB2YXIgcGFsZXR0ZV9vZmZzZXQgPSBnbG9iYWxfcGFsZXR0ZV9vZmZzZXQ7XG4gICAgICAgIHZhciBwYWxldHRlX3NpemUgPSBnbG9iYWxfcGFsZXR0ZV9zaXplO1xuICAgICAgICB2YXIgaGFzX2xvY2FsX3BhbGV0dGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKGxvY2FsX3BhbGV0dGVfZmxhZykge1xuICAgICAgICAgIHZhciBoYXNfbG9jYWxfcGFsZXR0ZSA9IHRydWU7XG4gICAgICAgICAgcGFsZXR0ZV9vZmZzZXQgPSBwOyAvLyBPdmVycmlkZSB3aXRoIGxvY2FsIHBhbGV0dGUuXG4gICAgICAgICAgcGFsZXR0ZV9zaXplID0gbnVtX2xvY2FsX2NvbG9ycztcbiAgICAgICAgICBwICs9IG51bV9sb2NhbF9jb2xvcnMgKiAzOyAvLyBTZWVrIHBhc3QgcGFsZXR0ZS5cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhX29mZnNldCA9IHA7XG5cbiAgICAgICAgcCsrOyAvLyBjb2Rlc2l6ZVxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIHZhciBibG9ja19zaXplID0gYnVmW3ArK107XG4gICAgICAgICAgLy8gQmFkIGJsb2NrIHNpemUgKGV4OiB1bmRlZmluZWQgZnJvbSBhbiBvdXQgb2YgYm91bmRzIHJlYWQpLlxuICAgICAgICAgIGlmICghKGJsb2NrX3NpemUgPj0gMCkpIHRocm93IEVycm9yKFwiSW52YWxpZCBibG9jayBzaXplXCIpO1xuICAgICAgICAgIGlmIChibG9ja19zaXplID09PSAwKSBicmVhazsgLy8gMCBzaXplIGlzIHRlcm1pbmF0b3JcbiAgICAgICAgICBwICs9IGJsb2NrX3NpemU7XG4gICAgICAgIH1cblxuICAgICAgICBmcmFtZXMucHVzaCh7XG4gICAgICAgICAgeDogeCxcbiAgICAgICAgICB5OiB5LFxuICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgIGhlaWdodDogaCxcbiAgICAgICAgICBoYXNfbG9jYWxfcGFsZXR0ZTogaGFzX2xvY2FsX3BhbGV0dGUsXG4gICAgICAgICAgcGFsZXR0ZV9vZmZzZXQ6IHBhbGV0dGVfb2Zmc2V0LFxuICAgICAgICAgIHBhbGV0dGVfc2l6ZTogcGFsZXR0ZV9zaXplLFxuICAgICAgICAgIGRhdGFfb2Zmc2V0OiBkYXRhX29mZnNldCxcbiAgICAgICAgICBkYXRhX2xlbmd0aDogcCAtIGRhdGFfb2Zmc2V0LFxuICAgICAgICAgIHRyYW5zcGFyZW50X2luZGV4OiB0cmFuc3BhcmVudF9pbmRleCxcbiAgICAgICAgICBpbnRlcmxhY2VkOiAhIWludGVybGFjZV9mbGFnLFxuICAgICAgICAgIGRlbGF5OiBkZWxheSxcbiAgICAgICAgICBkaXNwb3NhbDogZGlzcG9zYWxcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDB4M2I6IC8vIFRyYWlsZXIgTWFya2VyIChlbmQgb2YgZmlsZSkuXG4gICAgICAgIG5vX2VvZiA9IGZhbHNlO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBnaWYgYmxvY2s6IDB4XCIgKyBidWZbcCAtIDFdLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMubnVtRnJhbWVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZyYW1lcy5sZW5ndGg7XG4gIH07XG5cbiAgdGhpcy5sb29wQ291bnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbG9vcF9jb3VudDtcbiAgfTtcblxuICB0aGlzLmZyYW1lSW5mbyA9IGZ1bmN0aW9uKGZyYW1lX251bSkge1xuICAgIGlmIChmcmFtZV9udW0gPCAwIHx8IGZyYW1lX251bSA+PSBmcmFtZXMubGVuZ3RoKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJhbWUgaW5kZXggb3V0IG9mIHJhbmdlLlwiKTtcbiAgICByZXR1cm4gZnJhbWVzW2ZyYW1lX251bV07XG4gIH07XG5cbiAgdGhpcy5kZWNvZGVBbmRCbGl0RnJhbWVCR1JBID0gZnVuY3Rpb24oZnJhbWVfbnVtLCBwaXhlbHMpIHtcbiAgICB2YXIgZnJhbWUgPSB0aGlzLmZyYW1lSW5mbyhmcmFtZV9udW0pO1xuICAgIHZhciBudW1fcGl4ZWxzID0gZnJhbWUud2lkdGggKiBmcmFtZS5oZWlnaHQ7XG4gICAgdmFyIGluZGV4X3N0cmVhbSA9IG5ldyBVaW50OEFycmF5KG51bV9waXhlbHMpOyAvLyBBdCBtb3N0IDgtYml0IGluZGljZXMuXG4gICAgR2lmUmVhZGVyTFpXT3V0cHV0SW5kZXhTdHJlYW0oXG4gICAgICBidWYsXG4gICAgICBmcmFtZS5kYXRhX29mZnNldCxcbiAgICAgIGluZGV4X3N0cmVhbSxcbiAgICAgIG51bV9waXhlbHNcbiAgICApO1xuICAgIHZhciBwYWxldHRlX29mZnNldCA9IGZyYW1lLnBhbGV0dGVfb2Zmc2V0O1xuXG4gICAgLy8gTk9URShkZWFubSk6IEl0IHNlZW1zIHRvIGJlIG11Y2ggZmFzdGVyIHRvIGNvbXBhcmUgaW5kZXggdG8gMjU2IHRoYW5cbiAgICAvLyB0byA9PT0gbnVsbC4gIE5vdCBzdXJlIHdoeSwgYnV0IENvbXBhcmVTdHViX0VRX1NUUklDVCBzaG93cyB1cCBoaWdoIGluXG4gICAgLy8gdGhlIHByb2ZpbGUsIG5vdCBzdXJlIGlmIGl0J3MgcmVsYXRlZCB0byB1c2luZyBhIFVpbnQ4QXJyYXkuXG4gICAgdmFyIHRyYW5zID0gZnJhbWUudHJhbnNwYXJlbnRfaW5kZXg7XG4gICAgaWYgKHRyYW5zID09PSBudWxsKSB0cmFucyA9IDI1NjtcblxuICAgIC8vIFdlIGFyZSBwb3NzaWJseSBqdXN0IGJsaXR0aW5nIHRvIGEgcG9ydGlvbiBvZiB0aGUgZW50aXJlIGZyYW1lLlxuICAgIC8vIFRoYXQgaXMgYSBzdWJyZWN0IHdpdGhpbiB0aGUgZnJhbWVyZWN0LCBzbyB0aGUgYWRkaXRpb25hbCBwaXhlbHNcbiAgICAvLyBtdXN0IGJlIHNraXBwZWQgb3ZlciBhZnRlciB3ZSBmaW5pc2hlZCBhIHNjYW5saW5lLlxuICAgIHZhciBmcmFtZXdpZHRoID0gZnJhbWUud2lkdGg7XG4gICAgdmFyIGZyYW1lc3RyaWRlID0gd2lkdGggLSBmcmFtZXdpZHRoO1xuICAgIHZhciB4bGVmdCA9IGZyYW1ld2lkdGg7IC8vIE51bWJlciBvZiBzdWJyZWN0IHBpeGVscyBsZWZ0IGluIHNjYW5saW5lLlxuXG4gICAgLy8gT3V0cHV0IGluZGljZXMgb2YgdGhlIHRvcCBsZWZ0IGFuZCBib3R0b20gcmlnaHQgY29ybmVycyBvZiB0aGUgc3VicmVjdC5cbiAgICB2YXIgb3BiZWcgPSAoZnJhbWUueSAqIHdpZHRoICsgZnJhbWUueCkgKiA0O1xuICAgIHZhciBvcGVuZCA9ICgoZnJhbWUueSArIGZyYW1lLmhlaWdodCkgKiB3aWR0aCArIGZyYW1lLngpICogNDtcbiAgICB2YXIgb3AgPSBvcGJlZztcblxuICAgIHZhciBzY2Fuc3RyaWRlID0gZnJhbWVzdHJpZGUgKiA0O1xuXG4gICAgLy8gVXNlIHNjYW5zdHJpZGUgdG8gc2tpcCBwYXN0IHRoZSByb3dzIHdoZW4gaW50ZXJsYWNpbmcuICBUaGlzIGlzIHNraXBwaW5nXG4gICAgLy8gNyByb3dzIGZvciB0aGUgZmlyc3QgdHdvIHBhc3NlcywgdGhlbiAzIHRoZW4gMS5cbiAgICBpZiAoZnJhbWUuaW50ZXJsYWNlZCA9PT0gdHJ1ZSkge1xuICAgICAgc2NhbnN0cmlkZSArPSB3aWR0aCAqIDQgKiA3OyAvLyBQYXNzIDEuXG4gICAgfVxuXG4gICAgdmFyIGludGVybGFjZXNraXAgPSA4OyAvLyBUcmFja2luZyB0aGUgcm93IGludGVydmFsIGluIHRoZSBjdXJyZW50IHBhc3MuXG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBpbmRleF9zdHJlYW0ubGVuZ3RoOyBpIDwgaWw7ICsraSkge1xuICAgICAgdmFyIGluZGV4ID0gaW5kZXhfc3RyZWFtW2ldO1xuXG4gICAgICBpZiAoeGxlZnQgPT09IDApIHtcbiAgICAgICAgLy8gQmVnaW5uaW5nIG9mIG5ldyBzY2FuIGxpbmVcbiAgICAgICAgb3AgKz0gc2NhbnN0cmlkZTtcbiAgICAgICAgeGxlZnQgPSBmcmFtZXdpZHRoO1xuICAgICAgICBpZiAob3AgPj0gb3BlbmQpIHtcbiAgICAgICAgICAvLyBDYXRjaCB0aGUgd3JhcCB0byBzd2l0Y2ggcGFzc2VzIHdoZW4gaW50ZXJsYWNpbmcuXG4gICAgICAgICAgc2NhbnN0cmlkZSA9IGZyYW1lc3RyaWRlICogNCArIHdpZHRoICogNCAqIChpbnRlcmxhY2Vza2lwIC0gMSk7XG4gICAgICAgICAgLy8gaW50ZXJsYWNlc2tpcCAvIDIgKiA0IGlzIGludGVybGFjZXNraXAgPDwgMS5cbiAgICAgICAgICBvcCA9IG9wYmVnICsgKGZyYW1ld2lkdGggKyBmcmFtZXN0cmlkZSkgKiAoaW50ZXJsYWNlc2tpcCA8PCAxKTtcbiAgICAgICAgICBpbnRlcmxhY2Vza2lwID4+PSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmRleCA9PT0gdHJhbnMpIHtcbiAgICAgICAgb3AgKz0gNDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByID0gYnVmW3BhbGV0dGVfb2Zmc2V0ICsgaW5kZXggKiAzXTtcbiAgICAgICAgdmFyIGcgPSBidWZbcGFsZXR0ZV9vZmZzZXQgKyBpbmRleCAqIDMgKyAxXTtcbiAgICAgICAgdmFyIGIgPSBidWZbcGFsZXR0ZV9vZmZzZXQgKyBpbmRleCAqIDMgKyAyXTtcbiAgICAgICAgcGl4ZWxzW29wKytdID0gYjtcbiAgICAgICAgcGl4ZWxzW29wKytdID0gZztcbiAgICAgICAgcGl4ZWxzW29wKytdID0gcjtcbiAgICAgICAgcGl4ZWxzW29wKytdID0gMjU1O1xuICAgICAgfVxuICAgICAgLS14bGVmdDtcbiAgICB9XG4gIH07XG5cbiAgLy8gSSB3aWxsIGdvIHRvIGNvcHkgYW5kIHBhc3RlIGhlbGwgb25lIGRheS4uLlxuICB0aGlzLmRlY29kZUFuZEJsaXRGcmFtZVJHQkEgPSBmdW5jdGlvbihmcmFtZV9udW0sIHBpeGVscykge1xuICAgIHZhciBmcmFtZSA9IHRoaXMuZnJhbWVJbmZvKGZyYW1lX251bSk7XG4gICAgdmFyIG51bV9waXhlbHMgPSBmcmFtZS53aWR0aCAqIGZyYW1lLmhlaWdodDtcbiAgICB2YXIgaW5kZXhfc3RyZWFtID0gbmV3IFVpbnQ4QXJyYXkobnVtX3BpeGVscyk7IC8vIEF0IG1vc3QgOC1iaXQgaW5kaWNlcy5cbiAgICBHaWZSZWFkZXJMWldPdXRwdXRJbmRleFN0cmVhbShcbiAgICAgIGJ1ZixcbiAgICAgIGZyYW1lLmRhdGFfb2Zmc2V0LFxuICAgICAgaW5kZXhfc3RyZWFtLFxuICAgICAgbnVtX3BpeGVsc1xuICAgICk7XG4gICAgdmFyIHBhbGV0dGVfb2Zmc2V0ID0gZnJhbWUucGFsZXR0ZV9vZmZzZXQ7XG5cbiAgICAvLyBOT1RFKGRlYW5tKTogSXQgc2VlbXMgdG8gYmUgbXVjaCBmYXN0ZXIgdG8gY29tcGFyZSBpbmRleCB0byAyNTYgdGhhblxuICAgIC8vIHRvID09PSBudWxsLiAgTm90IHN1cmUgd2h5LCBidXQgQ29tcGFyZVN0dWJfRVFfU1RSSUNUIHNob3dzIHVwIGhpZ2ggaW5cbiAgICAvLyB0aGUgcHJvZmlsZSwgbm90IHN1cmUgaWYgaXQncyByZWxhdGVkIHRvIHVzaW5nIGEgVWludDhBcnJheS5cbiAgICB2YXIgdHJhbnMgPSBmcmFtZS50cmFuc3BhcmVudF9pbmRleDtcbiAgICBpZiAodHJhbnMgPT09IG51bGwpIHRyYW5zID0gMjU2O1xuXG4gICAgLy8gV2UgYXJlIHBvc3NpYmx5IGp1c3QgYmxpdHRpbmcgdG8gYSBwb3J0aW9uIG9mIHRoZSBlbnRpcmUgZnJhbWUuXG4gICAgLy8gVGhhdCBpcyBhIHN1YnJlY3Qgd2l0aGluIHRoZSBmcmFtZXJlY3QsIHNvIHRoZSBhZGRpdGlvbmFsIHBpeGVsc1xuICAgIC8vIG11c3QgYmUgc2tpcHBlZCBvdmVyIGFmdGVyIHdlIGZpbmlzaGVkIGEgc2NhbmxpbmUuXG4gICAgdmFyIGZyYW1ld2lkdGggPSBmcmFtZS53aWR0aDtcbiAgICB2YXIgZnJhbWVzdHJpZGUgPSB3aWR0aCAtIGZyYW1ld2lkdGg7XG4gICAgdmFyIHhsZWZ0ID0gZnJhbWV3aWR0aDsgLy8gTnVtYmVyIG9mIHN1YnJlY3QgcGl4ZWxzIGxlZnQgaW4gc2NhbmxpbmUuXG5cbiAgICAvLyBPdXRwdXQgaW5kaWNlcyBvZiB0aGUgdG9wIGxlZnQgYW5kIGJvdHRvbSByaWdodCBjb3JuZXJzIG9mIHRoZSBzdWJyZWN0LlxuICAgIHZhciBvcGJlZyA9IChmcmFtZS55ICogd2lkdGggKyBmcmFtZS54KSAqIDQ7XG4gICAgdmFyIG9wZW5kID0gKChmcmFtZS55ICsgZnJhbWUuaGVpZ2h0KSAqIHdpZHRoICsgZnJhbWUueCkgKiA0O1xuICAgIHZhciBvcCA9IG9wYmVnO1xuXG4gICAgdmFyIHNjYW5zdHJpZGUgPSBmcmFtZXN0cmlkZSAqIDQ7XG5cbiAgICAvLyBVc2Ugc2NhbnN0cmlkZSB0byBza2lwIHBhc3QgdGhlIHJvd3Mgd2hlbiBpbnRlcmxhY2luZy4gIFRoaXMgaXMgc2tpcHBpbmdcbiAgICAvLyA3IHJvd3MgZm9yIHRoZSBmaXJzdCB0d28gcGFzc2VzLCB0aGVuIDMgdGhlbiAxLlxuICAgIGlmIChmcmFtZS5pbnRlcmxhY2VkID09PSB0cnVlKSB7XG4gICAgICBzY2Fuc3RyaWRlICs9IHdpZHRoICogNCAqIDc7IC8vIFBhc3MgMS5cbiAgICB9XG5cbiAgICB2YXIgaW50ZXJsYWNlc2tpcCA9IDg7IC8vIFRyYWNraW5nIHRoZSByb3cgaW50ZXJ2YWwgaW4gdGhlIGN1cnJlbnQgcGFzcy5cblxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGluZGV4X3N0cmVhbS5sZW5ndGg7IGkgPCBpbDsgKytpKSB7XG4gICAgICB2YXIgaW5kZXggPSBpbmRleF9zdHJlYW1baV07XG5cbiAgICAgIGlmICh4bGVmdCA9PT0gMCkge1xuICAgICAgICAvLyBCZWdpbm5pbmcgb2YgbmV3IHNjYW4gbGluZVxuICAgICAgICBvcCArPSBzY2Fuc3RyaWRlO1xuICAgICAgICB4bGVmdCA9IGZyYW1ld2lkdGg7XG4gICAgICAgIGlmIChvcCA+PSBvcGVuZCkge1xuICAgICAgICAgIC8vIENhdGNoIHRoZSB3cmFwIHRvIHN3aXRjaCBwYXNzZXMgd2hlbiBpbnRlcmxhY2luZy5cbiAgICAgICAgICBzY2Fuc3RyaWRlID0gZnJhbWVzdHJpZGUgKiA0ICsgd2lkdGggKiA0ICogKGludGVybGFjZXNraXAgLSAxKTtcbiAgICAgICAgICAvLyBpbnRlcmxhY2Vza2lwIC8gMiAqIDQgaXMgaW50ZXJsYWNlc2tpcCA8PCAxLlxuICAgICAgICAgIG9wID0gb3BiZWcgKyAoZnJhbWV3aWR0aCArIGZyYW1lc3RyaWRlKSAqIChpbnRlcmxhY2Vza2lwIDw8IDEpO1xuICAgICAgICAgIGludGVybGFjZXNraXAgPj49IDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGluZGV4ID09PSB0cmFucykge1xuICAgICAgICBvcCArPSA0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHIgPSBidWZbcGFsZXR0ZV9vZmZzZXQgKyBpbmRleCAqIDNdO1xuICAgICAgICB2YXIgZyA9IGJ1ZltwYWxldHRlX29mZnNldCArIGluZGV4ICogMyArIDFdO1xuICAgICAgICB2YXIgYiA9IGJ1ZltwYWxldHRlX29mZnNldCArIGluZGV4ICogMyArIDJdO1xuICAgICAgICBwaXhlbHNbb3ArK10gPSByO1xuICAgICAgICBwaXhlbHNbb3ArK10gPSBnO1xuICAgICAgICBwaXhlbHNbb3ArK10gPSBiO1xuICAgICAgICBwaXhlbHNbb3ArK10gPSAyNTU7XG4gICAgICB9XG4gICAgICAtLXhsZWZ0O1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gR2lmUmVhZGVyTFpXT3V0cHV0SW5kZXhTdHJlYW0oY29kZV9zdHJlYW0sIHAsIG91dHB1dCwgb3V0cHV0X2xlbmd0aCkge1xuICB2YXIgbWluX2NvZGVfc2l6ZSA9IGNvZGVfc3RyZWFtW3ArK107XG5cbiAgdmFyIGNsZWFyX2NvZGUgPSAxIDw8IG1pbl9jb2RlX3NpemU7XG4gIHZhciBlb2lfY29kZSA9IGNsZWFyX2NvZGUgKyAxO1xuICB2YXIgbmV4dF9jb2RlID0gZW9pX2NvZGUgKyAxO1xuXG4gIHZhciBjdXJfY29kZV9zaXplID0gbWluX2NvZGVfc2l6ZSArIDE7IC8vIE51bWJlciBvZiBiaXRzIHBlciBjb2RlLlxuICAvLyBOT1RFOiBUaGlzIHNoYXJlcyB0aGUgc2FtZSBuYW1lIGFzIHRoZSBlbmNvZGVyLCBidXQgaGFzIGEgZGlmZmVyZW50XG4gIC8vIG1lYW5pbmcgaGVyZS4gIEhlcmUgdGhpcyBtYXNrcyBlYWNoIGNvZGUgY29taW5nIGZyb20gdGhlIGNvZGUgc3RyZWFtLlxuICB2YXIgY29kZV9tYXNrID0gKDEgPDwgY3VyX2NvZGVfc2l6ZSkgLSAxO1xuICB2YXIgY3VyX3NoaWZ0ID0gMDtcbiAgdmFyIGN1ciA9IDA7XG5cbiAgdmFyIG9wID0gMDsgLy8gT3V0cHV0IHBvaW50ZXIuXG5cbiAgdmFyIHN1YmJsb2NrX3NpemUgPSBjb2RlX3N0cmVhbVtwKytdO1xuXG4gIC8vIFRPRE8oZGVhbm0pOiBXb3VsZCB1c2luZyBhIFR5cGVkQXJyYXkgYmUgYW55IGZhc3Rlcj8gIEF0IGxlYXN0IGl0IHdvdWxkXG4gIC8vIHNvbHZlIHRoZSBmYXN0IG1vZGUgLyBiYWNraW5nIHN0b3JlIHVuY2VydGFpbnR5LlxuICAvLyB2YXIgY29kZV90YWJsZSA9IEFycmF5KDQwOTYpO1xuICB2YXIgY29kZV90YWJsZSA9IG5ldyBJbnQzMkFycmF5KDQwOTYpOyAvLyBDYW4gYmUgc2lnbmVkLCB3ZSBvbmx5IHVzZSAyMCBiaXRzLlxuXG4gIHZhciBwcmV2X2NvZGUgPSBudWxsOyAvLyBUcmFjayBjb2RlLTEuXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICAvLyBSZWFkIHVwIHRvIHR3byBieXRlcywgbWFraW5nIHN1cmUgd2UgYWx3YXlzIDEyLWJpdHMgZm9yIG1heCBzaXplZCBjb2RlLlxuICAgIHdoaWxlIChjdXJfc2hpZnQgPCAxNikge1xuICAgICAgaWYgKHN1YmJsb2NrX3NpemUgPT09IDApIGJyZWFrOyAvLyBObyBtb3JlIGRhdGEgdG8gYmUgcmVhZC5cblxuICAgICAgY3VyIHw9IGNvZGVfc3RyZWFtW3ArK10gPDwgY3VyX3NoaWZ0O1xuICAgICAgY3VyX3NoaWZ0ICs9IDg7XG5cbiAgICAgIGlmIChzdWJibG9ja19zaXplID09PSAxKSB7XG4gICAgICAgIC8vIE5ldmVyIGxldCBpdCBnZXQgdG8gMCB0byBob2xkIGxvZ2ljIGFib3ZlLlxuICAgICAgICBzdWJibG9ja19zaXplID0gY29kZV9zdHJlYW1bcCsrXTsgLy8gTmV4dCBzdWJibG9jay5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC0tc3ViYmxvY2tfc2l6ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPKGRlYW5tKTogV2Ugc2hvdWxkIG5ldmVyIHJlYWxseSBnZXQgaGVyZSwgd2Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWRcbiAgICAvLyBhbmQgRU9JLlxuICAgIGlmIChjdXJfc2hpZnQgPCBjdXJfY29kZV9zaXplKSBicmVhaztcblxuICAgIHZhciBjb2RlID0gY3VyICYgY29kZV9tYXNrO1xuICAgIGN1ciA+Pj0gY3VyX2NvZGVfc2l6ZTtcbiAgICBjdXJfc2hpZnQgLT0gY3VyX2NvZGVfc2l6ZTtcblxuICAgIC8vIFRPRE8oZGVhbm0pOiBNYXliZSBzaG91bGQgY2hlY2sgdGhhdCB0aGUgZmlyc3QgY29kZSB3YXMgYSBjbGVhciBjb2RlLFxuICAgIC8vIGF0IGxlYXN0IHRoaXMgaXMgd2hhdCB5b3UncmUgc3VwcG9zZWQgdG8gZG8uICBCdXQgYWN0dWFsbHkgb3VyIGVuY29kZXJcbiAgICAvLyBub3cgZG9lc24ndCBlbWl0IGEgY2xlYXIgY29kZSBmaXJzdCBhbnl3YXkuXG4gICAgaWYgKGNvZGUgPT09IGNsZWFyX2NvZGUpIHtcbiAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGhhdmUgdG8gY2xlYXIgdGhlIHRhYmxlLiAgVGhpcyBjb3VsZCBiZSBhIGdvb2QgaWRlYVxuICAgICAgLy8gZm9yIGdyZWF0ZXIgZXJyb3IgY2hlY2tpbmcsIGJ1dCB3ZSBkb24ndCByZWFsbHkgZG8gYW55IGFueXdheS4gIFdlXG4gICAgICAvLyB3aWxsIGp1c3QgdHJhY2sgaXQgd2l0aCBuZXh0X2NvZGUgYW5kIG92ZXJ3cml0ZSBvbGQgZW50cmllcy5cblxuICAgICAgbmV4dF9jb2RlID0gZW9pX2NvZGUgKyAxO1xuICAgICAgY3VyX2NvZGVfc2l6ZSA9IG1pbl9jb2RlX3NpemUgKyAxO1xuICAgICAgY29kZV9tYXNrID0gKDEgPDwgY3VyX2NvZGVfc2l6ZSkgLSAxO1xuXG4gICAgICAvLyBEb24ndCB1cGRhdGUgcHJldl9jb2RlID9cbiAgICAgIHByZXZfY29kZSA9IG51bGw7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKGNvZGUgPT09IGVvaV9jb2RlKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBXZSBoYXZlIGEgc2ltaWxhciBzaXR1YXRpb24gYXMgdGhlIGRlY29kZXIsIHdoZXJlIHdlIHdhbnQgdG8gc3RvcmVcbiAgICAvLyB2YXJpYWJsZSBsZW5ndGggZW50cmllcyAoY29kZSB0YWJsZSBlbnRyaWVzKSwgYnV0IHdlIHdhbnQgdG8gZG8gaW4gYVxuICAgIC8vIGZhc3RlciBtYW5uZXIgdGhhbiBhbiBhcnJheSBvZiBhcnJheXMuICBUaGUgY29kZSBiZWxvdyBzdG9yZXMgc29ydCBvZiBhXG4gICAgLy8gbGlua2VkIGxpc3Qgd2l0aGluIHRoZSBjb2RlIHRhYmxlLCBhbmQgdGhlbiBcImNoYXNlc1wiIHRocm91Z2ggaXQgdG9cbiAgICAvLyBjb25zdHJ1Y3QgdGhlIGRpY3Rpb25hcnkgZW50cmllcy4gIFdoZW4gYSBuZXcgZW50cnkgaXMgY3JlYXRlZCwganVzdCB0aGVcbiAgICAvLyBsYXN0IGJ5dGUgaXMgc3RvcmVkLCBhbmQgdGhlIHJlc3QgKHByZWZpeCkgb2YgdGhlIGVudHJ5IGlzIG9ubHlcbiAgICAvLyByZWZlcmVuY2VkIGJ5IGl0cyB0YWJsZSBlbnRyeS4gIFRoZW4gdGhlIGNvZGUgY2hhc2VzIHRocm91Z2ggdGhlXG4gICAgLy8gcHJlZml4ZXMgdW50aWwgaXQgcmVhY2hlcyBhIHNpbmdsZSBieXRlIGNvZGUuICBXZSBoYXZlIHRvIGNoYXNlIHR3aWNlLFxuICAgIC8vIGZpcnN0IHRvIGNvbXB1dGUgdGhlIGxlbmd0aCwgYW5kIHRoZW4gdG8gYWN0dWFsbHkgY29weSB0aGUgZGF0YSB0byB0aGVcbiAgICAvLyBvdXRwdXQgKGJhY2t3YXJkcywgc2luY2Ugd2Uga25vdyB0aGUgbGVuZ3RoKS4gIFRoZSBhbHRlcm5hdGl2ZSB3b3VsZCBiZVxuICAgIC8vIHN0b3Jpbmcgc29tZXRoaW5nIGluIGFuIGludGVybWVkaWF0ZSBzdGFjaywgYnV0IHRoYXQgZG9lc24ndCBtYWtlIGFueVxuICAgIC8vIG1vcmUgc2Vuc2UuICBJIGltcGxlbWVudGVkIGFuIGFwcHJvYWNoIHdoZXJlIGl0IGFsc28gc3RvcmVkIHRoZSBsZW5ndGhcbiAgICAvLyBpbiB0aGUgY29kZSB0YWJsZSwgYWx0aG91Z2ggaXQncyBhIGJpdCB0cmlja3kgYmVjYXVzZSB5b3UgcnVuIG91dCBvZlxuICAgIC8vIGJpdHMgKDEyICsgMTIgKyA4KSwgYnV0IEkgZGlkbid0IG1lYXN1cmUgbXVjaCBpbXByb3ZlbWVudHMgKHRoZSB0YWJsZVxuICAgIC8vIGVudHJpZXMgYXJlIGdlbmVyYWxseSBub3QgdGhlIGxvbmcpLiAgRXZlbiB3aGVuIEkgY3JlYXRlZCBiZW5jaG1hcmtzIGZvclxuICAgIC8vIHZlcnkgbG9uZyB0YWJsZSBlbnRyaWVzIHRoZSBjb21wbGV4aXR5IGRpZCBub3Qgc2VlbSB3b3J0aCBpdC5cbiAgICAvLyBUaGUgY29kZSB0YWJsZSBzdG9yZXMgdGhlIHByZWZpeCBlbnRyeSBpbiAxMiBiaXRzIGFuZCB0aGVuIHRoZSBzdWZmaXhcbiAgICAvLyBieXRlIGluIDggYml0cywgc28gZWFjaCBlbnRyeSBpcyAyMCBiaXRzLlxuXG4gICAgdmFyIGNoYXNlX2NvZGUgPSBjb2RlIDwgbmV4dF9jb2RlID8gY29kZSA6IHByZXZfY29kZTtcblxuICAgIC8vIENoYXNlIHdoYXQgd2Ugd2lsbCBvdXRwdXQsIGVpdGhlciB7Q09ERX0gb3Ige0NPREUtMX0uXG4gICAgdmFyIGNoYXNlX2xlbmd0aCA9IDA7XG4gICAgdmFyIGNoYXNlID0gY2hhc2VfY29kZTtcbiAgICB3aGlsZSAoY2hhc2UgPiBjbGVhcl9jb2RlKSB7XG4gICAgICBjaGFzZSA9IGNvZGVfdGFibGVbY2hhc2VdID4+IDg7XG4gICAgICArK2NoYXNlX2xlbmd0aDtcbiAgICB9XG5cbiAgICB2YXIgayA9IGNoYXNlO1xuXG4gICAgdmFyIG9wX2VuZCA9IG9wICsgY2hhc2VfbGVuZ3RoICsgKGNoYXNlX2NvZGUgIT09IGNvZGUgPyAxIDogMCk7XG4gICAgaWYgKG9wX2VuZCA+IG91dHB1dF9sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiV2FybmluZywgZ2lmIHN0cmVhbSBsb25nZXIgdGhhbiBleHBlY3RlZC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWxyZWFkeSBoYXZlIHRoZSBmaXJzdCBieXRlIGZyb20gdGhlIGNoYXNlLCBtaWdodCBhcyB3ZWxsIHdyaXRlIGl0IGZhc3QuXG4gICAgb3V0cHV0W29wKytdID0gaztcblxuICAgIG9wICs9IGNoYXNlX2xlbmd0aDtcbiAgICB2YXIgYiA9IG9wOyAvLyBUcmFjayBwb2ludGVyLCB3cml0aW5nIGJhY2t3YXJkcy5cblxuICAgIGlmIChjaGFzZV9jb2RlICE9PSBjb2RlKVxuICAgICAgLy8gVGhlIGNhc2Ugb2YgZW1pdHRpbmcge0NPREUtMX0gKyBrLlxuICAgICAgb3V0cHV0W29wKytdID0gaztcblxuICAgIGNoYXNlID0gY2hhc2VfY29kZTtcbiAgICB3aGlsZSAoY2hhc2VfbGVuZ3RoLS0pIHtcbiAgICAgIGNoYXNlID0gY29kZV90YWJsZVtjaGFzZV07XG4gICAgICBvdXRwdXRbLS1iXSA9IGNoYXNlICYgMHhmZjsgLy8gV3JpdGUgYmFja3dhcmRzLlxuICAgICAgY2hhc2UgPj49IDg7IC8vIFB1bGwgZG93biB0byB0aGUgcHJlZml4IGNvZGUuXG4gICAgfVxuXG4gICAgaWYgKHByZXZfY29kZSAhPT0gbnVsbCAmJiBuZXh0X2NvZGUgPCA0MDk2KSB7XG4gICAgICBjb2RlX3RhYmxlW25leHRfY29kZSsrXSA9IChwcmV2X2NvZGUgPDwgOCkgfCBrO1xuICAgICAgLy8gVE9ETyhkZWFubSk6IEZpZ3VyZSBvdXQgdGhpcyBjbGVhcmluZyB2cyBjb2RlIGdyb3d0aCBsb2dpYyBiZXR0ZXIuICBJXG4gICAgICAvLyBoYXZlIGFuIGZlZWxpbmcgdGhhdCBpdCBzaG91bGQganVzdCBoYXBwZW4gc29tZXdoZXJlIGVsc2UsIGZvciBub3cgaXRcbiAgICAgIC8vIGlzIGF3a3dhcmQgYmV0d2VlbiB3aGVuIHdlIGdyb3cgcGFzdCB0aGUgbWF4IGFuZCB0aGVuIGhpdCBhIGNsZWFyIGNvZGUuXG4gICAgICAvLyBGb3Igbm93IGp1c3QgY2hlY2sgaWYgd2UgaGl0IHRoZSBtYXggMTItYml0cyAodGhlbiBhIGNsZWFyIGNvZGUgc2hvdWxkXG4gICAgICAvLyBmb2xsb3csIGFsc28gb2YgY291cnNlIGVuY29kZWQgaW4gMTItYml0cykuXG4gICAgICBpZiAobmV4dF9jb2RlID49IGNvZGVfbWFzayArIDEgJiYgY3VyX2NvZGVfc2l6ZSA8IDEyKSB7XG4gICAgICAgICsrY3VyX2NvZGVfc2l6ZTtcbiAgICAgICAgY29kZV9tYXNrID0gKGNvZGVfbWFzayA8PCAxKSB8IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJldl9jb2RlID0gY29kZTtcbiAgfVxuXG4gIGlmIChvcCAhPT0gb3V0cHV0X2xlbmd0aCkge1xuICAgIGNvbnNvbGUubG9nKFwiV2FybmluZywgZ2lmIHN0cmVhbSBzaG9ydGVyIHRoYW4gZXhwZWN0ZWQuXCIpO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuZXhwb3J0IHsgR2lmUmVhZGVyLCBHaWZXcml0ZXIgfTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAgQ29weXJpZ2h0IChjKSAyMDA4LCBBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZFxuICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG4gIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBcbiAgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuICBtZXQ6XG5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gIFxuICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBcbiAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICBcbiAgKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkIG5vciB0aGUgbmFtZXMgb2YgaXRzIFxuICAgIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tIFxuICAgIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cbiAgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTXG4gIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sXG4gIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVJcbiAgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBPV05FUiBPUiBcbiAgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsXG4gIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTyxcbiAgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SXG4gIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0ZcbiAgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkdcbiAgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG4gIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cbi8qXG5KUEVHIGVuY29kZXIgcG9ydGVkIHRvIEphdmFTY3JpcHQgYW5kIG9wdGltaXplZCBieSBBbmRyZWFzIFJpdHRlciwgd3d3LmJ5dGVzdHJvbS5ldSwgMTEvMjAwOVxuXG5CYXNpYyBHVUkgYmxvY2tpbmcganBlZyBlbmNvZGVyXG4qL1xuXG5mdW5jdGlvbiBKUEVHRW5jb2RlcihxdWFsaXR5KSB7XG4gIHZhciBmZmxvb3IgPSBNYXRoLmZsb29yO1xuICB2YXIgWVRhYmxlID0gbmV3IEFycmF5KDY0KTtcbiAgdmFyIFVWVGFibGUgPSBuZXcgQXJyYXkoNjQpO1xuICB2YXIgZmR0YmxfWSA9IG5ldyBBcnJheSg2NCk7XG4gIHZhciBmZHRibF9VViA9IG5ldyBBcnJheSg2NCk7XG4gIHZhciBZRENfSFQ7XG4gIHZhciBVVkRDX0hUO1xuICB2YXIgWUFDX0hUO1xuICB2YXIgVVZBQ19IVDtcblxuICB2YXIgYml0Y29kZSA9IG5ldyBBcnJheSg2NTUzNSk7XG4gIHZhciBjYXRlZ29yeSA9IG5ldyBBcnJheSg2NTUzNSk7XG4gIHZhciBvdXRwdXRmRENUUXVhbnQgPSBuZXcgQXJyYXkoNjQpO1xuICB2YXIgRFUgPSBuZXcgQXJyYXkoNjQpO1xuICB2YXIgYnl0ZW91dCA9IFtdO1xuICB2YXIgYnl0ZW5ldyA9IDA7XG4gIHZhciBieXRlcG9zID0gNztcblxuICB2YXIgWURVID0gbmV3IEFycmF5KDY0KTtcbiAgdmFyIFVEVSA9IG5ldyBBcnJheSg2NCk7XG4gIHZhciBWRFUgPSBuZXcgQXJyYXkoNjQpO1xuICB2YXIgY2x0ID0gbmV3IEFycmF5KDI1Nik7XG4gIHZhciBSR0JfWVVWX1RBQkxFID0gbmV3IEFycmF5KDIwNDgpO1xuICB2YXIgY3VycmVudFF1YWxpdHk7XG5cbiAgdmFyIFppZ1phZyA9IFtcbiAgICAwLFxuICAgIDEsXG4gICAgNSxcbiAgICA2LFxuICAgIDE0LFxuICAgIDE1LFxuICAgIDI3LFxuICAgIDI4LFxuICAgIDIsXG4gICAgNCxcbiAgICA3LFxuICAgIDEzLFxuICAgIDE2LFxuICAgIDI2LFxuICAgIDI5LFxuICAgIDQyLFxuICAgIDMsXG4gICAgOCxcbiAgICAxMixcbiAgICAxNyxcbiAgICAyNSxcbiAgICAzMCxcbiAgICA0MSxcbiAgICA0MyxcbiAgICA5LFxuICAgIDExLFxuICAgIDE4LFxuICAgIDI0LFxuICAgIDMxLFxuICAgIDQwLFxuICAgIDQ0LFxuICAgIDUzLFxuICAgIDEwLFxuICAgIDE5LFxuICAgIDIzLFxuICAgIDMyLFxuICAgIDM5LFxuICAgIDQ1LFxuICAgIDUyLFxuICAgIDU0LFxuICAgIDIwLFxuICAgIDIyLFxuICAgIDMzLFxuICAgIDM4LFxuICAgIDQ2LFxuICAgIDUxLFxuICAgIDU1LFxuICAgIDYwLFxuICAgIDIxLFxuICAgIDM0LFxuICAgIDM3LFxuICAgIDQ3LFxuICAgIDUwLFxuICAgIDU2LFxuICAgIDU5LFxuICAgIDYxLFxuICAgIDM1LFxuICAgIDM2LFxuICAgIDQ4LFxuICAgIDQ5LFxuICAgIDU3LFxuICAgIDU4LFxuICAgIDYyLFxuICAgIDYzXG4gIF07XG5cbiAgdmFyIHN0ZF9kY19sdW1pbmFuY2VfbnJjb2RlcyA9IFtcbiAgICAwLFxuICAgIDAsXG4gICAgMSxcbiAgICA1LFxuICAgIDEsXG4gICAgMSxcbiAgICAxLFxuICAgIDEsXG4gICAgMSxcbiAgICAxLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDBcbiAgXTtcbiAgdmFyIHN0ZF9kY19sdW1pbmFuY2VfdmFsdWVzID0gWzAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMV07XG4gIHZhciBzdGRfYWNfbHVtaW5hbmNlX25yY29kZXMgPSBbXG4gICAgMCxcbiAgICAwLFxuICAgIDIsXG4gICAgMSxcbiAgICAzLFxuICAgIDMsXG4gICAgMixcbiAgICA0LFxuICAgIDMsXG4gICAgNSxcbiAgICA1LFxuICAgIDQsXG4gICAgNCxcbiAgICAwLFxuICAgIDAsXG4gICAgMSxcbiAgICAweDdkXG4gIF07XG4gIHZhciBzdGRfYWNfbHVtaW5hbmNlX3ZhbHVlcyA9IFtcbiAgICAweDAxLFxuICAgIDB4MDIsXG4gICAgMHgwMyxcbiAgICAweDAwLFxuICAgIDB4MDQsXG4gICAgMHgxMSxcbiAgICAweDA1LFxuICAgIDB4MTIsXG4gICAgMHgyMSxcbiAgICAweDMxLFxuICAgIDB4NDEsXG4gICAgMHgwNixcbiAgICAweDEzLFxuICAgIDB4NTEsXG4gICAgMHg2MSxcbiAgICAweDA3LFxuICAgIDB4MjIsXG4gICAgMHg3MSxcbiAgICAweDE0LFxuICAgIDB4MzIsXG4gICAgMHg4MSxcbiAgICAweDkxLFxuICAgIDB4YTEsXG4gICAgMHgwOCxcbiAgICAweDIzLFxuICAgIDB4NDIsXG4gICAgMHhiMSxcbiAgICAweGMxLFxuICAgIDB4MTUsXG4gICAgMHg1MixcbiAgICAweGQxLFxuICAgIDB4ZjAsXG4gICAgMHgyNCxcbiAgICAweDMzLFxuICAgIDB4NjIsXG4gICAgMHg3MixcbiAgICAweDgyLFxuICAgIDB4MDksXG4gICAgMHgwYSxcbiAgICAweDE2LFxuICAgIDB4MTcsXG4gICAgMHgxOCxcbiAgICAweDE5LFxuICAgIDB4MWEsXG4gICAgMHgyNSxcbiAgICAweDI2LFxuICAgIDB4MjcsXG4gICAgMHgyOCxcbiAgICAweDI5LFxuICAgIDB4MmEsXG4gICAgMHgzNCxcbiAgICAweDM1LFxuICAgIDB4MzYsXG4gICAgMHgzNyxcbiAgICAweDM4LFxuICAgIDB4MzksXG4gICAgMHgzYSxcbiAgICAweDQzLFxuICAgIDB4NDQsXG4gICAgMHg0NSxcbiAgICAweDQ2LFxuICAgIDB4NDcsXG4gICAgMHg0OCxcbiAgICAweDQ5LFxuICAgIDB4NGEsXG4gICAgMHg1MyxcbiAgICAweDU0LFxuICAgIDB4NTUsXG4gICAgMHg1NixcbiAgICAweDU3LFxuICAgIDB4NTgsXG4gICAgMHg1OSxcbiAgICAweDVhLFxuICAgIDB4NjMsXG4gICAgMHg2NCxcbiAgICAweDY1LFxuICAgIDB4NjYsXG4gICAgMHg2NyxcbiAgICAweDY4LFxuICAgIDB4NjksXG4gICAgMHg2YSxcbiAgICAweDczLFxuICAgIDB4NzQsXG4gICAgMHg3NSxcbiAgICAweDc2LFxuICAgIDB4NzcsXG4gICAgMHg3OCxcbiAgICAweDc5LFxuICAgIDB4N2EsXG4gICAgMHg4MyxcbiAgICAweDg0LFxuICAgIDB4ODUsXG4gICAgMHg4NixcbiAgICAweDg3LFxuICAgIDB4ODgsXG4gICAgMHg4OSxcbiAgICAweDhhLFxuICAgIDB4OTIsXG4gICAgMHg5MyxcbiAgICAweDk0LFxuICAgIDB4OTUsXG4gICAgMHg5NixcbiAgICAweDk3LFxuICAgIDB4OTgsXG4gICAgMHg5OSxcbiAgICAweDlhLFxuICAgIDB4YTIsXG4gICAgMHhhMyxcbiAgICAweGE0LFxuICAgIDB4YTUsXG4gICAgMHhhNixcbiAgICAweGE3LFxuICAgIDB4YTgsXG4gICAgMHhhOSxcbiAgICAweGFhLFxuICAgIDB4YjIsXG4gICAgMHhiMyxcbiAgICAweGI0LFxuICAgIDB4YjUsXG4gICAgMHhiNixcbiAgICAweGI3LFxuICAgIDB4YjgsXG4gICAgMHhiOSxcbiAgICAweGJhLFxuICAgIDB4YzIsXG4gICAgMHhjMyxcbiAgICAweGM0LFxuICAgIDB4YzUsXG4gICAgMHhjNixcbiAgICAweGM3LFxuICAgIDB4YzgsXG4gICAgMHhjOSxcbiAgICAweGNhLFxuICAgIDB4ZDIsXG4gICAgMHhkMyxcbiAgICAweGQ0LFxuICAgIDB4ZDUsXG4gICAgMHhkNixcbiAgICAweGQ3LFxuICAgIDB4ZDgsXG4gICAgMHhkOSxcbiAgICAweGRhLFxuICAgIDB4ZTEsXG4gICAgMHhlMixcbiAgICAweGUzLFxuICAgIDB4ZTQsXG4gICAgMHhlNSxcbiAgICAweGU2LFxuICAgIDB4ZTcsXG4gICAgMHhlOCxcbiAgICAweGU5LFxuICAgIDB4ZWEsXG4gICAgMHhmMSxcbiAgICAweGYyLFxuICAgIDB4ZjMsXG4gICAgMHhmNCxcbiAgICAweGY1LFxuICAgIDB4ZjYsXG4gICAgMHhmNyxcbiAgICAweGY4LFxuICAgIDB4ZjksXG4gICAgMHhmYVxuICBdO1xuXG4gIHZhciBzdGRfZGNfY2hyb21pbmFuY2VfbnJjb2RlcyA9IFtcbiAgICAwLFxuICAgIDAsXG4gICAgMyxcbiAgICAxLFxuICAgIDEsXG4gICAgMSxcbiAgICAxLFxuICAgIDEsXG4gICAgMSxcbiAgICAxLFxuICAgIDEsXG4gICAgMSxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDBcbiAgXTtcbiAgdmFyIHN0ZF9kY19jaHJvbWluYW5jZV92YWx1ZXMgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExXTtcbiAgdmFyIHN0ZF9hY19jaHJvbWluYW5jZV9ucmNvZGVzID0gW1xuICAgIDAsXG4gICAgMCxcbiAgICAyLFxuICAgIDEsXG4gICAgMixcbiAgICA0LFxuICAgIDQsXG4gICAgMyxcbiAgICA0LFxuICAgIDcsXG4gICAgNSxcbiAgICA0LFxuICAgIDQsXG4gICAgMCxcbiAgICAxLFxuICAgIDIsXG4gICAgMHg3N1xuICBdO1xuICB2YXIgc3RkX2FjX2Nocm9taW5hbmNlX3ZhbHVlcyA9IFtcbiAgICAweDAwLFxuICAgIDB4MDEsXG4gICAgMHgwMixcbiAgICAweDAzLFxuICAgIDB4MTEsXG4gICAgMHgwNCxcbiAgICAweDA1LFxuICAgIDB4MjEsXG4gICAgMHgzMSxcbiAgICAweDA2LFxuICAgIDB4MTIsXG4gICAgMHg0MSxcbiAgICAweDUxLFxuICAgIDB4MDcsXG4gICAgMHg2MSxcbiAgICAweDcxLFxuICAgIDB4MTMsXG4gICAgMHgyMixcbiAgICAweDMyLFxuICAgIDB4ODEsXG4gICAgMHgwOCxcbiAgICAweDE0LFxuICAgIDB4NDIsXG4gICAgMHg5MSxcbiAgICAweGExLFxuICAgIDB4YjEsXG4gICAgMHhjMSxcbiAgICAweDA5LFxuICAgIDB4MjMsXG4gICAgMHgzMyxcbiAgICAweDUyLFxuICAgIDB4ZjAsXG4gICAgMHgxNSxcbiAgICAweDYyLFxuICAgIDB4NzIsXG4gICAgMHhkMSxcbiAgICAweDBhLFxuICAgIDB4MTYsXG4gICAgMHgyNCxcbiAgICAweDM0LFxuICAgIDB4ZTEsXG4gICAgMHgyNSxcbiAgICAweGYxLFxuICAgIDB4MTcsXG4gICAgMHgxOCxcbiAgICAweDE5LFxuICAgIDB4MWEsXG4gICAgMHgyNixcbiAgICAweDI3LFxuICAgIDB4MjgsXG4gICAgMHgyOSxcbiAgICAweDJhLFxuICAgIDB4MzUsXG4gICAgMHgzNixcbiAgICAweDM3LFxuICAgIDB4MzgsXG4gICAgMHgzOSxcbiAgICAweDNhLFxuICAgIDB4NDMsXG4gICAgMHg0NCxcbiAgICAweDQ1LFxuICAgIDB4NDYsXG4gICAgMHg0NyxcbiAgICAweDQ4LFxuICAgIDB4NDksXG4gICAgMHg0YSxcbiAgICAweDUzLFxuICAgIDB4NTQsXG4gICAgMHg1NSxcbiAgICAweDU2LFxuICAgIDB4NTcsXG4gICAgMHg1OCxcbiAgICAweDU5LFxuICAgIDB4NWEsXG4gICAgMHg2MyxcbiAgICAweDY0LFxuICAgIDB4NjUsXG4gICAgMHg2NixcbiAgICAweDY3LFxuICAgIDB4NjgsXG4gICAgMHg2OSxcbiAgICAweDZhLFxuICAgIDB4NzMsXG4gICAgMHg3NCxcbiAgICAweDc1LFxuICAgIDB4NzYsXG4gICAgMHg3NyxcbiAgICAweDc4LFxuICAgIDB4NzksXG4gICAgMHg3YSxcbiAgICAweDgyLFxuICAgIDB4ODMsXG4gICAgMHg4NCxcbiAgICAweDg1LFxuICAgIDB4ODYsXG4gICAgMHg4NyxcbiAgICAweDg4LFxuICAgIDB4ODksXG4gICAgMHg4YSxcbiAgICAweDkyLFxuICAgIDB4OTMsXG4gICAgMHg5NCxcbiAgICAweDk1LFxuICAgIDB4OTYsXG4gICAgMHg5NyxcbiAgICAweDk4LFxuICAgIDB4OTksXG4gICAgMHg5YSxcbiAgICAweGEyLFxuICAgIDB4YTMsXG4gICAgMHhhNCxcbiAgICAweGE1LFxuICAgIDB4YTYsXG4gICAgMHhhNyxcbiAgICAweGE4LFxuICAgIDB4YTksXG4gICAgMHhhYSxcbiAgICAweGIyLFxuICAgIDB4YjMsXG4gICAgMHhiNCxcbiAgICAweGI1LFxuICAgIDB4YjYsXG4gICAgMHhiNyxcbiAgICAweGI4LFxuICAgIDB4YjksXG4gICAgMHhiYSxcbiAgICAweGMyLFxuICAgIDB4YzMsXG4gICAgMHhjNCxcbiAgICAweGM1LFxuICAgIDB4YzYsXG4gICAgMHhjNyxcbiAgICAweGM4LFxuICAgIDB4YzksXG4gICAgMHhjYSxcbiAgICAweGQyLFxuICAgIDB4ZDMsXG4gICAgMHhkNCxcbiAgICAweGQ1LFxuICAgIDB4ZDYsXG4gICAgMHhkNyxcbiAgICAweGQ4LFxuICAgIDB4ZDksXG4gICAgMHhkYSxcbiAgICAweGUyLFxuICAgIDB4ZTMsXG4gICAgMHhlNCxcbiAgICAweGU1LFxuICAgIDB4ZTYsXG4gICAgMHhlNyxcbiAgICAweGU4LFxuICAgIDB4ZTksXG4gICAgMHhlYSxcbiAgICAweGYyLFxuICAgIDB4ZjMsXG4gICAgMHhmNCxcbiAgICAweGY1LFxuICAgIDB4ZjYsXG4gICAgMHhmNyxcbiAgICAweGY4LFxuICAgIDB4ZjksXG4gICAgMHhmYVxuICBdO1xuXG4gIGZ1bmN0aW9uIGluaXRRdWFudFRhYmxlcyhzZikge1xuICAgIHZhciBZUVQgPSBbXG4gICAgICAxNixcbiAgICAgIDExLFxuICAgICAgMTAsXG4gICAgICAxNixcbiAgICAgIDI0LFxuICAgICAgNDAsXG4gICAgICA1MSxcbiAgICAgIDYxLFxuICAgICAgMTIsXG4gICAgICAxMixcbiAgICAgIDE0LFxuICAgICAgMTksXG4gICAgICAyNixcbiAgICAgIDU4LFxuICAgICAgNjAsXG4gICAgICA1NSxcbiAgICAgIDE0LFxuICAgICAgMTMsXG4gICAgICAxNixcbiAgICAgIDI0LFxuICAgICAgNDAsXG4gICAgICA1NyxcbiAgICAgIDY5LFxuICAgICAgNTYsXG4gICAgICAxNCxcbiAgICAgIDE3LFxuICAgICAgMjIsXG4gICAgICAyOSxcbiAgICAgIDUxLFxuICAgICAgODcsXG4gICAgICA4MCxcbiAgICAgIDYyLFxuICAgICAgMTgsXG4gICAgICAyMixcbiAgICAgIDM3LFxuICAgICAgNTYsXG4gICAgICA2OCxcbiAgICAgIDEwOSxcbiAgICAgIDEwMyxcbiAgICAgIDc3LFxuICAgICAgMjQsXG4gICAgICAzNSxcbiAgICAgIDU1LFxuICAgICAgNjQsXG4gICAgICA4MSxcbiAgICAgIDEwNCxcbiAgICAgIDExMyxcbiAgICAgIDkyLFxuICAgICAgNDksXG4gICAgICA2NCxcbiAgICAgIDc4LFxuICAgICAgODcsXG4gICAgICAxMDMsXG4gICAgICAxMjEsXG4gICAgICAxMjAsXG4gICAgICAxMDEsXG4gICAgICA3MixcbiAgICAgIDkyLFxuICAgICAgOTUsXG4gICAgICA5OCxcbiAgICAgIDExMixcbiAgICAgIDEwMCxcbiAgICAgIDEwMyxcbiAgICAgIDk5XG4gICAgXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjQ7IGkrKykge1xuICAgICAgdmFyIHQgPSBmZmxvb3IoKFlRVFtpXSAqIHNmICsgNTApIC8gMTAwKTtcbiAgICAgIHQgPSBNYXRoLm1pbihNYXRoLm1heCh0LCAxKSwgMjU1KTtcbiAgICAgIFlUYWJsZVtaaWdaYWdbaV1dID0gdDtcbiAgICB9XG4gICAgdmFyIFVWUVQgPSBbXG4gICAgICAxNyxcbiAgICAgIDE4LFxuICAgICAgMjQsXG4gICAgICA0NyxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgMTgsXG4gICAgICAyMSxcbiAgICAgIDI2LFxuICAgICAgNjYsXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDI0LFxuICAgICAgMjYsXG4gICAgICA1NixcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA0NyxcbiAgICAgIDY2LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OSxcbiAgICAgIDk5LFxuICAgICAgOTksXG4gICAgICA5OVxuICAgIF07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgaisrKSB7XG4gICAgICB2YXIgdSA9IGZmbG9vcigoVVZRVFtqXSAqIHNmICsgNTApIC8gMTAwKTtcbiAgICAgIHUgPSBNYXRoLm1pbihNYXRoLm1heCh1LCAxKSwgMjU1KTtcbiAgICAgIFVWVGFibGVbWmlnWmFnW2pdXSA9IHU7XG4gICAgfVxuICAgIHZhciBhYXNmID0gW1xuICAgICAgMS4wLFxuICAgICAgMS4zODcwMzk4NDUsXG4gICAgICAxLjMwNjU2Mjk2NSxcbiAgICAgIDEuMTc1ODc1NjAyLFxuICAgICAgMS4wLFxuICAgICAgMC43ODU2OTQ5NTgsXG4gICAgICAwLjU0MTE5NjEsXG4gICAgICAwLjI3NTg5OTM3OVxuICAgIF07XG4gICAgdmFyIGsgPSAwO1xuICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IDg7IHJvdysrKSB7XG4gICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCA4OyBjb2wrKykge1xuICAgICAgICBmZHRibF9ZW2tdID0gMS4wIC8gKFlUYWJsZVtaaWdaYWdba11dICogYWFzZltyb3ddICogYWFzZltjb2xdICogOC4wKTtcbiAgICAgICAgZmR0YmxfVVZba10gPSAxLjAgLyAoVVZUYWJsZVtaaWdaYWdba11dICogYWFzZltyb3ddICogYWFzZltjb2xdICogOC4wKTtcbiAgICAgICAgaysrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVIdWZmbWFuVGJsKG5yY29kZXMsIHN0ZF90YWJsZSkge1xuICAgIHZhciBjb2RldmFsdWUgPSAwO1xuICAgIHZhciBwb3NfaW5fdGFibGUgPSAwO1xuICAgIHZhciBIVCA9IG5ldyBBcnJheSgpO1xuICAgIGZvciAodmFyIGsgPSAxOyBrIDw9IDE2OyBrKyspIHtcbiAgICAgIGZvciAodmFyIGogPSAxOyBqIDw9IG5yY29kZXNba107IGorKykge1xuICAgICAgICBIVFtzdGRfdGFibGVbcG9zX2luX3RhYmxlXV0gPSBbXTtcbiAgICAgICAgSFRbc3RkX3RhYmxlW3Bvc19pbl90YWJsZV1dWzBdID0gY29kZXZhbHVlO1xuICAgICAgICBIVFtzdGRfdGFibGVbcG9zX2luX3RhYmxlXV1bMV0gPSBrO1xuICAgICAgICBwb3NfaW5fdGFibGUrKztcbiAgICAgICAgY29kZXZhbHVlKys7XG4gICAgICB9XG4gICAgICBjb2RldmFsdWUgKj0gMjtcbiAgICB9XG4gICAgcmV0dXJuIEhUO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdEh1ZmZtYW5UYmwoKSB7XG4gICAgWURDX0hUID0gY29tcHV0ZUh1ZmZtYW5UYmwoXG4gICAgICBzdGRfZGNfbHVtaW5hbmNlX25yY29kZXMsXG4gICAgICBzdGRfZGNfbHVtaW5hbmNlX3ZhbHVlc1xuICAgICk7XG4gICAgVVZEQ19IVCA9IGNvbXB1dGVIdWZmbWFuVGJsKFxuICAgICAgc3RkX2RjX2Nocm9taW5hbmNlX25yY29kZXMsXG4gICAgICBzdGRfZGNfY2hyb21pbmFuY2VfdmFsdWVzXG4gICAgKTtcbiAgICBZQUNfSFQgPSBjb21wdXRlSHVmZm1hblRibChcbiAgICAgIHN0ZF9hY19sdW1pbmFuY2VfbnJjb2RlcyxcbiAgICAgIHN0ZF9hY19sdW1pbmFuY2VfdmFsdWVzXG4gICAgKTtcbiAgICBVVkFDX0hUID0gY29tcHV0ZUh1ZmZtYW5UYmwoXG4gICAgICBzdGRfYWNfY2hyb21pbmFuY2VfbnJjb2RlcyxcbiAgICAgIHN0ZF9hY19jaHJvbWluYW5jZV92YWx1ZXNcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdENhdGVnb3J5TnVtYmVyKCkge1xuICAgIHZhciBucmxvd2VyID0gMTtcbiAgICB2YXIgbnJ1cHBlciA9IDI7XG4gICAgZm9yICh2YXIgY2F0ID0gMTsgY2F0IDw9IDE1OyBjYXQrKykge1xuICAgICAgLy9Qb3NpdGl2ZSBudW1iZXJzXG4gICAgICBmb3IgKHZhciBuciA9IG5ybG93ZXI7IG5yIDwgbnJ1cHBlcjsgbnIrKykge1xuICAgICAgICBjYXRlZ29yeVszMjc2NyArIG5yXSA9IGNhdDtcbiAgICAgICAgYml0Y29kZVszMjc2NyArIG5yXSA9IFtdO1xuICAgICAgICBiaXRjb2RlWzMyNzY3ICsgbnJdWzFdID0gY2F0O1xuICAgICAgICBiaXRjb2RlWzMyNzY3ICsgbnJdWzBdID0gbnI7XG4gICAgICB9XG4gICAgICAvL05lZ2F0aXZlIG51bWJlcnNcbiAgICAgIGZvciAodmFyIG5ybmVnID0gLShucnVwcGVyIC0gMSk7IG5ybmVnIDw9IC1ucmxvd2VyOyBucm5lZysrKSB7XG4gICAgICAgIGNhdGVnb3J5WzMyNzY3ICsgbnJuZWddID0gY2F0O1xuICAgICAgICBiaXRjb2RlWzMyNzY3ICsgbnJuZWddID0gW107XG4gICAgICAgIGJpdGNvZGVbMzI3NjcgKyBucm5lZ11bMV0gPSBjYXQ7XG4gICAgICAgIGJpdGNvZGVbMzI3NjcgKyBucm5lZ11bMF0gPSBucnVwcGVyIC0gMSArIG5ybmVnO1xuICAgICAgfVxuICAgICAgbnJsb3dlciA8PD0gMTtcbiAgICAgIG5ydXBwZXIgPDw9IDE7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5pdFJHQllVVlRhYmxlKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgIFJHQl9ZVVZfVEFCTEVbaV0gPSAxOTU5NSAqIGk7XG4gICAgICBSR0JfWVVWX1RBQkxFWyhpICsgMjU2KSA+PiAwXSA9IDM4NDcwICogaTtcbiAgICAgIFJHQl9ZVVZfVEFCTEVbKGkgKyA1MTIpID4+IDBdID0gNzQ3MSAqIGkgKyAweDgwMDA7XG4gICAgICBSR0JfWVVWX1RBQkxFWyhpICsgNzY4KSA+PiAwXSA9IC0xMTA1OSAqIGk7XG4gICAgICBSR0JfWVVWX1RBQkxFWyhpICsgMTAyNCkgPj4gMF0gPSAtMjE3MDkgKiBpO1xuICAgICAgUkdCX1lVVl9UQUJMRVsoaSArIDEyODApID4+IDBdID0gMzI3NjggKiBpICsgMHg4MDdmZmY7XG4gICAgICBSR0JfWVVWX1RBQkxFWyhpICsgMTUzNikgPj4gMF0gPSAtMjc0MzkgKiBpO1xuICAgICAgUkdCX1lVVl9UQUJMRVsoaSArIDE3OTIpID4+IDBdID0gLTUzMjkgKiBpO1xuICAgIH1cbiAgfVxuXG4gIC8vIElPIGZ1bmN0aW9uc1xuICBmdW5jdGlvbiB3cml0ZUJpdHMoYnMpIHtcbiAgICB2YXIgdmFsdWUgPSBic1swXTtcbiAgICB2YXIgcG9zdmFsID0gYnNbMV0gLSAxO1xuICAgIHdoaWxlIChwb3N2YWwgPj0gMCkge1xuICAgICAgaWYgKHZhbHVlICYgKDEgPDwgcG9zdmFsKSkge1xuICAgICAgICBieXRlbmV3IHw9IDEgPDwgYnl0ZXBvcztcbiAgICAgIH1cbiAgICAgIHBvc3ZhbC0tO1xuICAgICAgYnl0ZXBvcy0tO1xuICAgICAgaWYgKGJ5dGVwb3MgPCAwKSB7XG4gICAgICAgIGlmIChieXRlbmV3ID09IDB4ZmYpIHtcbiAgICAgICAgICB3cml0ZUJ5dGUoMHhmZik7XG4gICAgICAgICAgd3JpdGVCeXRlKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdyaXRlQnl0ZShieXRlbmV3KTtcbiAgICAgICAgfVxuICAgICAgICBieXRlcG9zID0gNztcbiAgICAgICAgYnl0ZW5ldyA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JpdGVCeXRlKHZhbHVlKSB7XG4gICAgLy9ieXRlb3V0LnB1c2goY2x0W3ZhbHVlXSk7IC8vIHdyaXRlIGNoYXIgZGlyZWN0bHkgaW5zdGVhZCBvZiBjb252ZXJ0aW5nIGxhdGVyXG4gICAgYnl0ZW91dC5wdXNoKHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyaXRlV29yZCh2YWx1ZSkge1xuICAgIHdyaXRlQnl0ZSgodmFsdWUgPj4gOCkgJiAweGZmKTtcbiAgICB3cml0ZUJ5dGUodmFsdWUgJiAweGZmKTtcbiAgfVxuXG4gIC8vIERDVCAmIHF1YW50aXphdGlvbiBjb3JlXG4gIGZ1bmN0aW9uIGZEQ1RRdWFudChkYXRhLCBmZHRibCkge1xuICAgIHZhciBkMCwgZDEsIGQyLCBkMywgZDQsIGQ1LCBkNiwgZDc7XG4gICAgLyogUGFzcyAxOiBwcm9jZXNzIHJvd3MuICovXG4gICAgdmFyIGRhdGFPZmYgPSAwO1xuICAgIHZhciBpO1xuICAgIHZhciBJOCA9IDg7XG4gICAgdmFyIEk2NCA9IDY0O1xuICAgIGZvciAoaSA9IDA7IGkgPCBJODsgKytpKSB7XG4gICAgICBkMCA9IGRhdGFbZGF0YU9mZl07XG4gICAgICBkMSA9IGRhdGFbZGF0YU9mZiArIDFdO1xuICAgICAgZDIgPSBkYXRhW2RhdGFPZmYgKyAyXTtcbiAgICAgIGQzID0gZGF0YVtkYXRhT2ZmICsgM107XG4gICAgICBkNCA9IGRhdGFbZGF0YU9mZiArIDRdO1xuICAgICAgZDUgPSBkYXRhW2RhdGFPZmYgKyA1XTtcbiAgICAgIGQ2ID0gZGF0YVtkYXRhT2ZmICsgNl07XG4gICAgICBkNyA9IGRhdGFbZGF0YU9mZiArIDddO1xuXG4gICAgICB2YXIgdG1wMCA9IGQwICsgZDc7XG4gICAgICB2YXIgdG1wNyA9IGQwIC0gZDc7XG4gICAgICB2YXIgdG1wMSA9IGQxICsgZDY7XG4gICAgICB2YXIgdG1wNiA9IGQxIC0gZDY7XG4gICAgICB2YXIgdG1wMiA9IGQyICsgZDU7XG4gICAgICB2YXIgdG1wNSA9IGQyIC0gZDU7XG4gICAgICB2YXIgdG1wMyA9IGQzICsgZDQ7XG4gICAgICB2YXIgdG1wNCA9IGQzIC0gZDQ7XG5cbiAgICAgIC8qIEV2ZW4gcGFydCAqL1xuICAgICAgdmFyIHRtcDEwID0gdG1wMCArIHRtcDM7IC8qIHBoYXNlIDIgKi9cbiAgICAgIHZhciB0bXAxMyA9IHRtcDAgLSB0bXAzO1xuICAgICAgdmFyIHRtcDExID0gdG1wMSArIHRtcDI7XG4gICAgICB2YXIgdG1wMTIgPSB0bXAxIC0gdG1wMjtcblxuICAgICAgZGF0YVtkYXRhT2ZmXSA9IHRtcDEwICsgdG1wMTE7IC8qIHBoYXNlIDMgKi9cbiAgICAgIGRhdGFbZGF0YU9mZiArIDRdID0gdG1wMTAgLSB0bXAxMTtcblxuICAgICAgdmFyIHoxID0gKHRtcDEyICsgdG1wMTMpICogMC43MDcxMDY3ODE7IC8qIGM0ICovXG4gICAgICBkYXRhW2RhdGFPZmYgKyAyXSA9IHRtcDEzICsgejE7IC8qIHBoYXNlIDUgKi9cbiAgICAgIGRhdGFbZGF0YU9mZiArIDZdID0gdG1wMTMgLSB6MTtcblxuICAgICAgLyogT2RkIHBhcnQgKi9cbiAgICAgIHRtcDEwID0gdG1wNCArIHRtcDU7IC8qIHBoYXNlIDIgKi9cbiAgICAgIHRtcDExID0gdG1wNSArIHRtcDY7XG4gICAgICB0bXAxMiA9IHRtcDYgKyB0bXA3O1xuXG4gICAgICAvKiBUaGUgcm90YXRvciBpcyBtb2RpZmllZCBmcm9tIGZpZyA0LTggdG8gYXZvaWQgZXh0cmEgbmVnYXRpb25zLiAqL1xuICAgICAgdmFyIHo1ID0gKHRtcDEwIC0gdG1wMTIpICogMC4zODI2ODM0MzM7IC8qIGM2ICovXG4gICAgICB2YXIgejIgPSAwLjU0MTE5NjEgKiB0bXAxMCArIHo1OyAvKiBjMi1jNiAqL1xuICAgICAgdmFyIHo0ID0gMS4zMDY1NjI5NjUgKiB0bXAxMiArIHo1OyAvKiBjMitjNiAqL1xuICAgICAgdmFyIHozID0gdG1wMTEgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cblxuICAgICAgdmFyIHoxMSA9IHRtcDcgKyB6MzsgLyogcGhhc2UgNSAqL1xuICAgICAgdmFyIHoxMyA9IHRtcDcgLSB6MztcblxuICAgICAgZGF0YVtkYXRhT2ZmICsgNV0gPSB6MTMgKyB6MjsgLyogcGhhc2UgNiAqL1xuICAgICAgZGF0YVtkYXRhT2ZmICsgM10gPSB6MTMgLSB6MjtcbiAgICAgIGRhdGFbZGF0YU9mZiArIDFdID0gejExICsgejQ7XG4gICAgICBkYXRhW2RhdGFPZmYgKyA3XSA9IHoxMSAtIHo0O1xuXG4gICAgICBkYXRhT2ZmICs9IDg7IC8qIGFkdmFuY2UgcG9pbnRlciB0byBuZXh0IHJvdyAqL1xuICAgIH1cblxuICAgIC8qIFBhc3MgMjogcHJvY2VzcyBjb2x1bW5zLiAqL1xuICAgIGRhdGFPZmYgPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCBJODsgKytpKSB7XG4gICAgICBkMCA9IGRhdGFbZGF0YU9mZl07XG4gICAgICBkMSA9IGRhdGFbZGF0YU9mZiArIDhdO1xuICAgICAgZDIgPSBkYXRhW2RhdGFPZmYgKyAxNl07XG4gICAgICBkMyA9IGRhdGFbZGF0YU9mZiArIDI0XTtcbiAgICAgIGQ0ID0gZGF0YVtkYXRhT2ZmICsgMzJdO1xuICAgICAgZDUgPSBkYXRhW2RhdGFPZmYgKyA0MF07XG4gICAgICBkNiA9IGRhdGFbZGF0YU9mZiArIDQ4XTtcbiAgICAgIGQ3ID0gZGF0YVtkYXRhT2ZmICsgNTZdO1xuXG4gICAgICB2YXIgdG1wMHAyID0gZDAgKyBkNztcbiAgICAgIHZhciB0bXA3cDIgPSBkMCAtIGQ3O1xuICAgICAgdmFyIHRtcDFwMiA9IGQxICsgZDY7XG4gICAgICB2YXIgdG1wNnAyID0gZDEgLSBkNjtcbiAgICAgIHZhciB0bXAycDIgPSBkMiArIGQ1O1xuICAgICAgdmFyIHRtcDVwMiA9IGQyIC0gZDU7XG4gICAgICB2YXIgdG1wM3AyID0gZDMgKyBkNDtcbiAgICAgIHZhciB0bXA0cDIgPSBkMyAtIGQ0O1xuXG4gICAgICAvKiBFdmVuIHBhcnQgKi9cbiAgICAgIHZhciB0bXAxMHAyID0gdG1wMHAyICsgdG1wM3AyOyAvKiBwaGFzZSAyICovXG4gICAgICB2YXIgdG1wMTNwMiA9IHRtcDBwMiAtIHRtcDNwMjtcbiAgICAgIHZhciB0bXAxMXAyID0gdG1wMXAyICsgdG1wMnAyO1xuICAgICAgdmFyIHRtcDEycDIgPSB0bXAxcDIgLSB0bXAycDI7XG5cbiAgICAgIGRhdGFbZGF0YU9mZl0gPSB0bXAxMHAyICsgdG1wMTFwMjsgLyogcGhhc2UgMyAqL1xuICAgICAgZGF0YVtkYXRhT2ZmICsgMzJdID0gdG1wMTBwMiAtIHRtcDExcDI7XG5cbiAgICAgIHZhciB6MXAyID0gKHRtcDEycDIgKyB0bXAxM3AyKSAqIDAuNzA3MTA2NzgxOyAvKiBjNCAqL1xuICAgICAgZGF0YVtkYXRhT2ZmICsgMTZdID0gdG1wMTNwMiArIHoxcDI7IC8qIHBoYXNlIDUgKi9cbiAgICAgIGRhdGFbZGF0YU9mZiArIDQ4XSA9IHRtcDEzcDIgLSB6MXAyO1xuXG4gICAgICAvKiBPZGQgcGFydCAqL1xuICAgICAgdG1wMTBwMiA9IHRtcDRwMiArIHRtcDVwMjsgLyogcGhhc2UgMiAqL1xuICAgICAgdG1wMTFwMiA9IHRtcDVwMiArIHRtcDZwMjtcbiAgICAgIHRtcDEycDIgPSB0bXA2cDIgKyB0bXA3cDI7XG5cbiAgICAgIC8qIFRoZSByb3RhdG9yIGlzIG1vZGlmaWVkIGZyb20gZmlnIDQtOCB0byBhdm9pZCBleHRyYSBuZWdhdGlvbnMuICovXG4gICAgICB2YXIgejVwMiA9ICh0bXAxMHAyIC0gdG1wMTJwMikgKiAwLjM4MjY4MzQzMzsgLyogYzYgKi9cbiAgICAgIHZhciB6MnAyID0gMC41NDExOTYxICogdG1wMTBwMiArIHo1cDI7IC8qIGMyLWM2ICovXG4gICAgICB2YXIgejRwMiA9IDEuMzA2NTYyOTY1ICogdG1wMTJwMiArIHo1cDI7IC8qIGMyK2M2ICovXG4gICAgICB2YXIgejNwMiA9IHRtcDExcDIgKiAwLjcwNzEwNjc4MTsgLyogYzQgKi9cblxuICAgICAgdmFyIHoxMXAyID0gdG1wN3AyICsgejNwMjsgLyogcGhhc2UgNSAqL1xuICAgICAgdmFyIHoxM3AyID0gdG1wN3AyIC0gejNwMjtcblxuICAgICAgZGF0YVtkYXRhT2ZmICsgNDBdID0gejEzcDIgKyB6MnAyOyAvKiBwaGFzZSA2ICovXG4gICAgICBkYXRhW2RhdGFPZmYgKyAyNF0gPSB6MTNwMiAtIHoycDI7XG4gICAgICBkYXRhW2RhdGFPZmYgKyA4XSA9IHoxMXAyICsgejRwMjtcbiAgICAgIGRhdGFbZGF0YU9mZiArIDU2XSA9IHoxMXAyIC0gejRwMjtcblxuICAgICAgZGF0YU9mZisrOyAvKiBhZHZhbmNlIHBvaW50ZXIgdG8gbmV4dCBjb2x1bW4gKi9cbiAgICB9XG5cbiAgICAvLyBRdWFudGl6ZS9kZXNjYWxlIHRoZSBjb2VmZmljaWVudHNcbiAgICB2YXIgZkRDVFF1YW50O1xuICAgIGZvciAoaSA9IDA7IGkgPCBJNjQ7ICsraSkge1xuICAgICAgLy8gQXBwbHkgdGhlIHF1YW50aXphdGlvbiBhbmQgc2NhbGluZyBmYWN0b3IgJiBSb3VuZCB0byBuZWFyZXN0IGludGVnZXJcbiAgICAgIGZEQ1RRdWFudCA9IGRhdGFbaV0gKiBmZHRibFtpXTtcbiAgICAgIG91dHB1dGZEQ1RRdWFudFtpXSA9XG4gICAgICAgIGZEQ1RRdWFudCA+IDAuMCA/IChmRENUUXVhbnQgKyAwLjUpIHwgMCA6IChmRENUUXVhbnQgLSAwLjUpIHwgMDtcbiAgICAgIC8vb3V0cHV0ZkRDVFF1YW50W2ldID0gZnJvdW5kKGZEQ1RRdWFudCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRmRENUUXVhbnQ7XG4gIH1cblxuICBmdW5jdGlvbiB3cml0ZUFQUDAoKSB7XG4gICAgd3JpdGVXb3JkKDB4ZmZlMCk7IC8vIG1hcmtlclxuICAgIHdyaXRlV29yZCgxNik7IC8vIGxlbmd0aFxuICAgIHdyaXRlQnl0ZSgweDRhKTsgLy8gSlxuICAgIHdyaXRlQnl0ZSgweDQ2KTsgLy8gRlxuICAgIHdyaXRlQnl0ZSgweDQ5KTsgLy8gSVxuICAgIHdyaXRlQnl0ZSgweDQ2KTsgLy8gRlxuICAgIHdyaXRlQnl0ZSgwKTsgLy8gPSBcIkpGSUZcIiwnXFwwJ1xuICAgIHdyaXRlQnl0ZSgxKTsgLy8gdmVyc2lvbmhpXG4gICAgd3JpdGVCeXRlKDEpOyAvLyB2ZXJzaW9ubG9cbiAgICB3cml0ZUJ5dGUoMCk7IC8vIHh5dW5pdHNcbiAgICB3cml0ZVdvcmQoMSk7IC8vIHhkZW5zaXR5XG4gICAgd3JpdGVXb3JkKDEpOyAvLyB5ZGVuc2l0eVxuICAgIHdyaXRlQnl0ZSgwKTsgLy8gdGh1bWJud2lkdGhcbiAgICB3cml0ZUJ5dGUoMCk7IC8vIHRodW1ibmhlaWdodFxuICB9XG5cbiAgZnVuY3Rpb24gd3JpdGVTT0YwKHdpZHRoLCBoZWlnaHQpIHtcbiAgICB3cml0ZVdvcmQoMHhmZmMwKTsgLy8gbWFya2VyXG4gICAgd3JpdGVXb3JkKDE3KTsgLy8gbGVuZ3RoLCB0cnVlY29sb3IgWVVWIEpQR1xuICAgIHdyaXRlQnl0ZSg4KTsgLy8gcHJlY2lzaW9uXG4gICAgd3JpdGVXb3JkKGhlaWdodCk7XG4gICAgd3JpdGVXb3JkKHdpZHRoKTtcbiAgICB3cml0ZUJ5dGUoMyk7IC8vIG5yb2Zjb21wb25lbnRzXG4gICAgd3JpdGVCeXRlKDEpOyAvLyBJZFlcbiAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWWVxuICAgIHdyaXRlQnl0ZSgwKTsgLy8gUVRZXG4gICAgd3JpdGVCeXRlKDIpOyAvLyBJZFVcbiAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWVVxuICAgIHdyaXRlQnl0ZSgxKTsgLy8gUVRVXG4gICAgd3JpdGVCeXRlKDMpOyAvLyBJZFZcbiAgICB3cml0ZUJ5dGUoMHgxMSk7IC8vIEhWVlxuICAgIHdyaXRlQnl0ZSgxKTsgLy8gUVRWXG4gIH1cblxuICBmdW5jdGlvbiB3cml0ZURRVCgpIHtcbiAgICB3cml0ZVdvcmQoMHhmZmRiKTsgLy8gbWFya2VyXG4gICAgd3JpdGVXb3JkKDEzMik7IC8vIGxlbmd0aFxuICAgIHdyaXRlQnl0ZSgwKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY0OyBpKyspIHtcbiAgICAgIHdyaXRlQnl0ZShZVGFibGVbaV0pO1xuICAgIH1cbiAgICB3cml0ZUJ5dGUoMSk7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgaisrKSB7XG4gICAgICB3cml0ZUJ5dGUoVVZUYWJsZVtqXSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JpdGVESFQoKSB7XG4gICAgd3JpdGVXb3JkKDB4ZmZjNCk7IC8vIG1hcmtlclxuICAgIHdyaXRlV29yZCgweDAxYTIpOyAvLyBsZW5ndGhcblxuICAgIHdyaXRlQnl0ZSgwKTsgLy8gSFRZRENpbmZvXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICB3cml0ZUJ5dGUoc3RkX2RjX2x1bWluYW5jZV9ucmNvZGVzW2kgKyAxXSk7XG4gICAgfVxuICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDExOyBqKyspIHtcbiAgICAgIHdyaXRlQnl0ZShzdGRfZGNfbHVtaW5hbmNlX3ZhbHVlc1tqXSk7XG4gICAgfVxuXG4gICAgd3JpdGVCeXRlKDB4MTApOyAvLyBIVFlBQ2luZm9cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IDE2OyBrKyspIHtcbiAgICAgIHdyaXRlQnl0ZShzdGRfYWNfbHVtaW5hbmNlX25yY29kZXNbayArIDFdKTtcbiAgICB9XG4gICAgZm9yICh2YXIgbCA9IDA7IGwgPD0gMTYxOyBsKyspIHtcbiAgICAgIHdyaXRlQnl0ZShzdGRfYWNfbHVtaW5hbmNlX3ZhbHVlc1tsXSk7XG4gICAgfVxuXG4gICAgd3JpdGVCeXRlKDEpOyAvLyBIVFVEQ2luZm9cbiAgICBmb3IgKHZhciBtID0gMDsgbSA8IDE2OyBtKyspIHtcbiAgICAgIHdyaXRlQnl0ZShzdGRfZGNfY2hyb21pbmFuY2VfbnJjb2Rlc1ttICsgMV0pO1xuICAgIH1cbiAgICBmb3IgKHZhciBuID0gMDsgbiA8PSAxMTsgbisrKSB7XG4gICAgICB3cml0ZUJ5dGUoc3RkX2RjX2Nocm9taW5hbmNlX3ZhbHVlc1tuXSk7XG4gICAgfVxuXG4gICAgd3JpdGVCeXRlKDB4MTEpOyAvLyBIVFVBQ2luZm9cbiAgICBmb3IgKHZhciBvID0gMDsgbyA8IDE2OyBvKyspIHtcbiAgICAgIHdyaXRlQnl0ZShzdGRfYWNfY2hyb21pbmFuY2VfbnJjb2Rlc1tvICsgMV0pO1xuICAgIH1cbiAgICBmb3IgKHZhciBwID0gMDsgcCA8PSAxNjE7IHArKykge1xuICAgICAgd3JpdGVCeXRlKHN0ZF9hY19jaHJvbWluYW5jZV92YWx1ZXNbcF0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHdyaXRlU09TKCkge1xuICAgIHdyaXRlV29yZCgweGZmZGEpOyAvLyBtYXJrZXJcbiAgICB3cml0ZVdvcmQoMTIpOyAvLyBsZW5ndGhcbiAgICB3cml0ZUJ5dGUoMyk7IC8vIG5yb2Zjb21wb25lbnRzXG4gICAgd3JpdGVCeXRlKDEpOyAvLyBJZFlcbiAgICB3cml0ZUJ5dGUoMCk7IC8vIEhUWVxuICAgIHdyaXRlQnl0ZSgyKTsgLy8gSWRVXG4gICAgd3JpdGVCeXRlKDB4MTEpOyAvLyBIVFVcbiAgICB3cml0ZUJ5dGUoMyk7IC8vIElkVlxuICAgIHdyaXRlQnl0ZSgweDExKTsgLy8gSFRWXG4gICAgd3JpdGVCeXRlKDApOyAvLyBTc1xuICAgIHdyaXRlQnl0ZSgweDNmKTsgLy8gU2VcbiAgICB3cml0ZUJ5dGUoMCk7IC8vIEJmXG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzRFUoQ0RVLCBmZHRibCwgREMsIEhUREMsIEhUQUMpIHtcbiAgICB2YXIgRU9CID0gSFRBQ1sweDAwXTtcbiAgICB2YXIgTTE2emVyb2VzID0gSFRBQ1sweGYwXTtcbiAgICB2YXIgcG9zO1xuICAgIHZhciBJMTYgPSAxNjtcbiAgICB2YXIgSTYzID0gNjM7XG4gICAgdmFyIEk2NCA9IDY0O1xuICAgIHZhciBEVV9EQ1QgPSBmRENUUXVhbnQoQ0RVLCBmZHRibCk7XG4gICAgLy9aaWdaYWcgcmVvcmRlclxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgSTY0OyArK2opIHtcbiAgICAgIERVW1ppZ1phZ1tqXV0gPSBEVV9EQ1Rbal07XG4gICAgfVxuICAgIHZhciBEaWZmID0gRFVbMF0gLSBEQztcbiAgICBEQyA9IERVWzBdO1xuICAgIC8vRW5jb2RlIERDXG4gICAgaWYgKERpZmYgPT0gMCkge1xuICAgICAgd3JpdGVCaXRzKEhURENbMF0pOyAvLyBEaWZmIG1pZ2h0IGJlIDBcbiAgICB9IGVsc2Uge1xuICAgICAgcG9zID0gMzI3NjcgKyBEaWZmO1xuICAgICAgd3JpdGVCaXRzKEhURENbY2F0ZWdvcnlbcG9zXV0pO1xuICAgICAgd3JpdGVCaXRzKGJpdGNvZGVbcG9zXSk7XG4gICAgfVxuICAgIC8vRW5jb2RlIEFDc1xuICAgIHZhciBlbmQwcG9zID0gNjM7IC8vIHdhcyBjb25zdC4uLiB3aGljaCBpcyBjcmF6eVxuICAgIHdoaWxlIChlbmQwcG9zID4gMCAmJiBEVVtlbmQwcG9zXSA9PSAwKSB7XG4gICAgICBlbmQwcG9zLS07XG4gICAgfVxuICAgIC8vZW5kMHBvcyA9IGZpcnN0IGVsZW1lbnQgaW4gcmV2ZXJzZSBvcmRlciAhPTBcbiAgICBpZiAoZW5kMHBvcyA9PSAwKSB7XG4gICAgICB3cml0ZUJpdHMoRU9CKTtcbiAgICAgIHJldHVybiBEQztcbiAgICB9XG4gICAgdmFyIGkgPSAxO1xuICAgIHZhciBsbmc7XG4gICAgd2hpbGUgKGkgPD0gZW5kMHBvcykge1xuICAgICAgdmFyIHN0YXJ0cG9zID0gaTtcbiAgICAgIHdoaWxlIChEVVtpXSA9PSAwICYmIGkgPD0gZW5kMHBvcykge1xuICAgICAgICArK2k7XG4gICAgICB9XG4gICAgICB2YXIgbnJ6ZXJvZXMgPSBpIC0gc3RhcnRwb3M7XG4gICAgICBpZiAobnJ6ZXJvZXMgPj0gSTE2KSB7XG4gICAgICAgIGxuZyA9IG5yemVyb2VzID4+IDQ7XG4gICAgICAgIGZvciAodmFyIG5ybWFya2VyID0gMTsgbnJtYXJrZXIgPD0gbG5nOyArK25ybWFya2VyKVxuICAgICAgICAgIHdyaXRlQml0cyhNMTZ6ZXJvZXMpO1xuICAgICAgICBucnplcm9lcyA9IG5yemVyb2VzICYgMHhmO1xuICAgICAgfVxuICAgICAgcG9zID0gMzI3NjcgKyBEVVtpXTtcbiAgICAgIHdyaXRlQml0cyhIVEFDWyhucnplcm9lcyA8PCA0KSArIGNhdGVnb3J5W3Bvc11dKTtcbiAgICAgIHdyaXRlQml0cyhiaXRjb2RlW3Bvc10pO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAoZW5kMHBvcyAhPSBJNjMpIHtcbiAgICAgIHdyaXRlQml0cyhFT0IpO1xuICAgIH1cbiAgICByZXR1cm4gREM7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0Q2hhckxvb2t1cFRhYmxlKCkge1xuICAgIHZhciBzZmNjID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICAvLy8vLyBBQ0hUVU5HIC8vIDI1NVxuICAgICAgY2x0W2ldID0gc2ZjYyhpKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmVuY29kZSA9IGZ1bmN0aW9uKFxuICAgIGltYWdlLFxuICAgIHF1YWxpdHkgLy8gaW1hZ2UgZGF0YSBvYmplY3RcbiAgKSB7XG4gICAgaWYgKHF1YWxpdHkpIHNldFF1YWxpdHkocXVhbGl0eSk7XG5cbiAgICAvLyBJbml0aWFsaXplIGJpdCB3cml0ZXJcbiAgICBieXRlb3V0ID0gbmV3IEFycmF5KCk7XG4gICAgYnl0ZW5ldyA9IDA7XG4gICAgYnl0ZXBvcyA9IDc7XG5cbiAgICAvLyBBZGQgSlBFRyBoZWFkZXJzXG4gICAgd3JpdGVXb3JkKDB4ZmZkOCk7IC8vIFNPSVxuICAgIHdyaXRlQVBQMCgpO1xuICAgIHdyaXRlRFFUKCk7XG4gICAgd3JpdGVTT0YwKGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpO1xuICAgIHdyaXRlREhUKCk7XG4gICAgd3JpdGVTT1MoKTtcblxuICAgIC8vIEVuY29kZSA4eDggbWFjcm9ibG9ja3NcbiAgICB2YXIgRENZID0gMDtcbiAgICB2YXIgRENVID0gMDtcbiAgICB2YXIgRENWID0gMDtcblxuICAgIGJ5dGVuZXcgPSAwO1xuICAgIGJ5dGVwb3MgPSA3O1xuXG4gICAgdGhpcy5lbmNvZGUuZGlzcGxheU5hbWUgPSBcIl9lbmNvZGVfXCI7XG5cbiAgICB2YXIgaW1hZ2VEYXRhID0gaW1hZ2UuZGF0YTtcbiAgICB2YXIgd2lkdGggPSBpbWFnZS53aWR0aDtcbiAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuXG4gICAgdmFyIHF1YWRXaWR0aCA9IHdpZHRoICogNDtcblxuICAgIHZhciB4LFxuICAgICAgeSA9IDA7XG4gICAgdmFyIHIsIGcsIGI7XG4gICAgdmFyIHN0YXJ0LCBwLCBjb2wsIHJvdywgcG9zO1xuICAgIHdoaWxlICh5IDwgaGVpZ2h0KSB7XG4gICAgICB4ID0gMDtcbiAgICAgIHdoaWxlICh4IDwgcXVhZFdpZHRoKSB7XG4gICAgICAgIHN0YXJ0ID0gcXVhZFdpZHRoICogeSArIHg7XG4gICAgICAgIGNvbCA9IC0xO1xuICAgICAgICByb3cgPSAwO1xuXG4gICAgICAgIGZvciAocG9zID0gMDsgcG9zIDwgNjQ7IHBvcysrKSB7XG4gICAgICAgICAgcm93ID0gcG9zID4+IDM7IC8vIC84XG4gICAgICAgICAgY29sID0gKHBvcyAmIDcpICogNDsgLy8gJThcbiAgICAgICAgICBwID0gc3RhcnQgKyByb3cgKiBxdWFkV2lkdGggKyBjb2w7XG5cbiAgICAgICAgICBpZiAoeSArIHJvdyA+PSBoZWlnaHQpIHtcbiAgICAgICAgICAgIC8vIHBhZGRpbmcgYm90dG9tXG4gICAgICAgICAgICBwIC09IHF1YWRXaWR0aCAqICh5ICsgMSArIHJvdyAtIGhlaWdodCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHggKyBjb2wgPj0gcXVhZFdpZHRoKSB7XG4gICAgICAgICAgICAvLyBwYWRkaW5nIHJpZ2h0XG4gICAgICAgICAgICBwIC09IHggKyBjb2wgLSBxdWFkV2lkdGggKyA0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHIgPSBpbWFnZURhdGFbcCsrXTtcbiAgICAgICAgICBnID0gaW1hZ2VEYXRhW3ArK107XG4gICAgICAgICAgYiA9IGltYWdlRGF0YVtwKytdO1xuXG4gICAgICAgICAgLyogLy8gY2FsY3VsYXRlIFlVViB2YWx1ZXMgZHluYW1pY2FsbHlcblx0XHRcdFx0XHRZRFVbcG9zXT0oKCggMC4yOTkwMCkqcisoIDAuNTg3MDApKmcrKCAwLjExNDAwKSpiKSktMTI4OyAvLy0weDgwXG5cdFx0XHRcdFx0VURVW3Bvc109KCgoLTAuMTY4NzQpKnIrKC0wLjMzMTI2KSpnKyggMC41MDAwMCkqYikpO1xuXHRcdFx0XHRcdFZEVVtwb3NdPSgoKCAwLjUwMDAwKSpyKygtMC40MTg2OSkqZysoLTAuMDgxMzEpKmIpKTtcblx0XHRcdFx0XHQqL1xuXG4gICAgICAgICAgLy8gdXNlIGxvb2t1cCB0YWJsZSAoc2xpZ2h0bHkgZmFzdGVyKVxuICAgICAgICAgIFlEVVtwb3NdID1cbiAgICAgICAgICAgICgoUkdCX1lVVl9UQUJMRVtyXSArXG4gICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGcgKyAyNTYpID4+IDBdICtcbiAgICAgICAgICAgICAgUkdCX1lVVl9UQUJMRVsoYiArIDUxMikgPj4gMF0pID4+XG4gICAgICAgICAgICAgIDE2KSAtXG4gICAgICAgICAgICAxMjg7XG4gICAgICAgICAgVURVW3Bvc10gPVxuICAgICAgICAgICAgKChSR0JfWVVWX1RBQkxFWyhyICsgNzY4KSA+PiAwXSArXG4gICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGcgKyAxMDI0KSA+PiAwXSArXG4gICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGIgKyAxMjgwKSA+PiAwXSkgPj5cbiAgICAgICAgICAgICAgMTYpIC1cbiAgICAgICAgICAgIDEyODtcbiAgICAgICAgICBWRFVbcG9zXSA9XG4gICAgICAgICAgICAoKFJHQl9ZVVZfVEFCTEVbKHIgKyAxMjgwKSA+PiAwXSArXG4gICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGcgKyAxNTM2KSA+PiAwXSArXG4gICAgICAgICAgICAgIFJHQl9ZVVZfVEFCTEVbKGIgKyAxNzkyKSA+PiAwXSkgPj5cbiAgICAgICAgICAgICAgMTYpIC1cbiAgICAgICAgICAgIDEyODtcbiAgICAgICAgfVxuXG4gICAgICAgIERDWSA9IHByb2Nlc3NEVShZRFUsIGZkdGJsX1ksIERDWSwgWURDX0hULCBZQUNfSFQpO1xuICAgICAgICBEQ1UgPSBwcm9jZXNzRFUoVURVLCBmZHRibF9VViwgRENVLCBVVkRDX0hULCBVVkFDX0hUKTtcbiAgICAgICAgRENWID0gcHJvY2Vzc0RVKFZEVSwgZmR0YmxfVVYsIERDViwgVVZEQ19IVCwgVVZBQ19IVCk7XG4gICAgICAgIHggKz0gMzI7XG4gICAgICB9XG4gICAgICB5ICs9IDg7XG4gICAgfVxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gRG8gdGhlIGJpdCBhbGlnbm1lbnQgb2YgdGhlIEVPSSBtYXJrZXJcbiAgICBpZiAoYnl0ZXBvcyA+PSAwKSB7XG4gICAgICB2YXIgZmlsbGJpdHMgPSBbXTtcbiAgICAgIGZpbGxiaXRzWzFdID0gYnl0ZXBvcyArIDE7XG4gICAgICBmaWxsYml0c1swXSA9ICgxIDw8IChieXRlcG9zICsgMSkpIC0gMTtcbiAgICAgIHdyaXRlQml0cyhmaWxsYml0cyk7XG4gICAgfVxuXG4gICAgd3JpdGVXb3JkKDB4ZmZkOSk7IC8vRU9JXG5cbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnl0ZW91dCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gc2V0UXVhbGl0eShxdWFsaXR5KSB7XG4gICAgcXVhbGl0eSA9IE1hdGgubWluKE1hdGgubWF4KHF1YWxpdHksIDEpLCAxMDApO1xuXG4gICAgaWYgKGN1cnJlbnRRdWFsaXR5ID09IHF1YWxpdHkpIHJldHVybjsgLy8gZG9uJ3QgcmVjYWxjIGlmIHVuY2hhbmdlZFxuXG4gICAgdmFyIHNmID1cbiAgICAgIHF1YWxpdHkgPCA1MCA/IE1hdGguZmxvb3IoNTAwMCAvIHF1YWxpdHkpIDogTWF0aC5mbG9vcigyMDAgLSBxdWFsaXR5ICogMik7XG5cbiAgICBpbml0UXVhbnRUYWJsZXMoc2YpO1xuICAgIGN1cnJlbnRRdWFsaXR5ID0gcXVhbGl0eTtcbiAgICAvL2NvbnNvbGUubG9nKCdRdWFsaXR5IHNldCB0bzogJytxdWFsaXR5ICsnJScpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBxdWFsaXR5ID0gcXVhbGl0eSB8fCA1MDtcbiAgICAvLyBDcmVhdGUgdGFibGVzXG4gICAgaW5pdENoYXJMb29rdXBUYWJsZSgpO1xuICAgIGluaXRIdWZmbWFuVGJsKCk7XG4gICAgaW5pdENhdGVnb3J5TnVtYmVyKCk7XG4gICAgaW5pdFJHQllVVlRhYmxlKCk7XG5cbiAgICBzZXRRdWFsaXR5KHF1YWxpdHkpO1xuICB9XG4gIGluaXQoKTtcbn1cblxuZXhwb3J0IHsgSlBFR0VuY29kZXIgfTtcbiIsIi8qKlxuICogQGF1dGhvciBzaGFvemlsZWVcbiAqXG4gKiBCbXAgZm9ybWF0IGRlY29kZXIsc3VwcG9ydCAxYml0IDRiaXQgOGJpdCAyNGJpdCBibXBcbiAqXG4gKi9cblxuaW1wb3J0IHsgY29uc29sZSB9IGZyb20gXCIuL2NvbnNvbGUuanNcIjtcblxuZnVuY3Rpb24gQm1wRGVjb2RlcihidWZmZXIsIGlzX3dpdGhfYWxwaGEpIHtcbiAgdGhpcy5wb3MgPSAwO1xuICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgdGhpcy5kYXRhdiA9IG5ldyBEYXRhVmlldyhidWZmZXIuYnVmZmVyKTtcbiAgdGhpcy5pc193aXRoX2FscGhhID0gISFpc193aXRoX2FscGhhO1xuICB0aGlzLmJvdHRvbV91cCA9IHRydWU7XG4gIHRoaXMuZmxhZyA9XG4gICAgU3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmJ1ZmZlclswXSkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuYnVmZmVyWzFdKTtcbiAgdGhpcy5wb3MgKz0gMjtcbiAgaWYgKFtcIkJNXCIsIFwiQkFcIiwgXCJDSVwiLCBcIkNQXCIsIFwiSUNcIiwgXCJQVFwiXS5pbmRleE9mKHRoaXMuZmxhZykgPT09IC0xKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQk1QIEZpbGVcIik7XG4gIHRoaXMucGFyc2VIZWFkZXIoKTtcbiAgdGhpcy5wYXJzZUJHUigpO1xufVxuXG5CbXBEZWNvZGVyLnByb3RvdHlwZS5wYXJzZUhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmZpbGVTaXplID0gdGhpcy5kYXRhdi5nZXRVaW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLnJlc2VydmVkID0gdGhpcy5kYXRhdi5nZXRVaW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLm9mZnNldCA9IHRoaXMuZGF0YXYuZ2V0VWludDMyKHRoaXMucG9zLCB0cnVlKTtcbiAgdGhpcy5wb3MgKz0gNDtcbiAgdGhpcy5oZWFkZXJTaXplID0gdGhpcy5kYXRhdi5nZXRVaW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLndpZHRoID0gdGhpcy5kYXRhdi5nZXRVaW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLmhlaWdodCA9IHRoaXMuZGF0YXYuZ2V0SW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLnBsYW5lcyA9IHRoaXMuZGF0YXYuZ2V0VWludDE2KHRoaXMucG9zLCB0cnVlKTtcbiAgdGhpcy5wb3MgKz0gMjtcbiAgdGhpcy5iaXRQUCA9IHRoaXMuZGF0YXYuZ2V0VWludDE2KHRoaXMucG9zLCB0cnVlKTtcbiAgdGhpcy5wb3MgKz0gMjtcbiAgdGhpcy5jb21wcmVzcyA9IHRoaXMuZGF0YXYuZ2V0VWludDMyKHRoaXMucG9zLCB0cnVlKTtcbiAgdGhpcy5wb3MgKz0gNDtcbiAgdGhpcy5yYXdTaXplID0gdGhpcy5kYXRhdi5nZXRVaW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLmhyID0gdGhpcy5kYXRhdi5nZXRVaW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLnZyID0gdGhpcy5kYXRhdi5nZXRVaW50MzIodGhpcy5wb3MsIHRydWUpO1xuICB0aGlzLnBvcyArPSA0O1xuICB0aGlzLmNvbG9ycyA9IHRoaXMuZGF0YXYuZ2V0VWludDMyKHRoaXMucG9zLCB0cnVlKTtcbiAgdGhpcy5wb3MgKz0gNDtcbiAgdGhpcy5pbXBvcnRhbnRDb2xvcnMgPSB0aGlzLmRhdGF2LmdldFVpbnQzMih0aGlzLnBvcywgdHJ1ZSk7XG4gIHRoaXMucG9zICs9IDQ7XG5cbiAgaWYgKHRoaXMuYml0UFAgPT09IDE2ICYmIHRoaXMuaXNfd2l0aF9hbHBoYSkge1xuICAgIHRoaXMuYml0UFAgPSAxNTtcbiAgfVxuICBpZiAodGhpcy5iaXRQUCA8IDE1KSB7XG4gICAgdmFyIGxlbiA9IHRoaXMuY29sb3JzID09PSAwID8gMSA8PCB0aGlzLmJpdFBQIDogdGhpcy5jb2xvcnM7XG4gICAgdGhpcy5wYWxldHRlID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGJsdWUgPSB0aGlzLmRhdGF2LmdldFVpbnQ4KHRoaXMucG9zKyssIHRydWUpO1xuICAgICAgdmFyIGdyZWVuID0gdGhpcy5kYXRhdi5nZXRVaW50OCh0aGlzLnBvcysrLCB0cnVlKTtcbiAgICAgIHZhciByZWQgPSB0aGlzLmRhdGF2LmdldFVpbnQ4KHRoaXMucG9zKyssIHRydWUpO1xuICAgICAgdmFyIHF1YWQgPSB0aGlzLmRhdGF2LmdldFVpbnQ4KHRoaXMucG9zKyssIHRydWUpO1xuICAgICAgdGhpcy5wYWxldHRlW2ldID0ge1xuICAgICAgICByZWQ6IHJlZCxcbiAgICAgICAgZ3JlZW46IGdyZWVuLFxuICAgICAgICBibHVlOiBibHVlLFxuICAgICAgICBxdWFkOiBxdWFkXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBpZiAodGhpcy5oZWlnaHQgPCAwKSB7XG4gICAgdGhpcy5oZWlnaHQgKj0gLTE7XG4gICAgdGhpcy5ib3R0b21fdXAgPSBmYWxzZTtcbiAgfVxufTtcblxuQm1wRGVjb2Rlci5wcm90b3R5cGUucGFyc2VCR1IgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5wb3MgPSB0aGlzLm9mZnNldDtcbiAgdHJ5IHtcbiAgICB2YXIgYml0biA9IFwiYml0XCIgKyB0aGlzLmJpdFBQO1xuICAgIHZhciBsZW4gPSB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQgKiA0O1xuICAgIHRoaXMuZGF0YSA9IG5ldyBVaW50OEFycmF5KGxlbik7XG5cbiAgICB0aGlzW2JpdG5dKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhcImJpdCBkZWNvZGUgZXJyb3I6XCIgKyBlKTtcbiAgfVxufTtcblxuQm1wRGVjb2Rlci5wcm90b3R5cGUuYml0MSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgeGxlbiA9IE1hdGguY2VpbCh0aGlzLndpZHRoIC8gOCk7XG4gIHZhciBtb2RlID0geGxlbiAlIDQ7XG4gIHZhciB5O1xuICBmb3IgKHkgPSB0aGlzLmhlaWdodCAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgdmFyIGxpbmUgPSB0aGlzLmJvdHRvbV91cCA/IHkgOiB0aGlzLmhlaWdodCAtIDEgLSB5O1xuICAgIGZvciAodmFyIHggPSAwOyB4IDwgeGxlbjsgeCsrKSB7XG4gICAgICB2YXIgYiA9IHRoaXMuZGF0YXYuZ2V0VWludDgodGhpcy5wb3MrKywgdHJ1ZSk7XG4gICAgICB2YXIgbG9jYXRpb24gPSBsaW5lICogdGhpcy53aWR0aCAqIDQgKyB4ICogOCAqIDQ7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICBpZiAoeCAqIDggKyBpIDwgdGhpcy53aWR0aCkge1xuICAgICAgICAgIHZhciByZ2IgPSB0aGlzLnBhbGV0dGVbKGIgPj4gKDcgLSBpKSkgJiAweDFdO1xuICAgICAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIGkgKiA0XSA9IHJnYi5ibHVlO1xuICAgICAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIGkgKiA0ICsgMV0gPSByZ2IuZ3JlZW47XG4gICAgICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgaSAqIDQgKyAyXSA9IHJnYi5yZWQ7XG4gICAgICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgaSAqIDQgKyAzXSA9IDB4ZmY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobW9kZSAhPT0gMCkge1xuICAgICAgdGhpcy5wb3MgKz0gNCAtIG1vZGU7XG4gICAgfVxuICB9XG59O1xuXG5CbXBEZWNvZGVyLnByb3RvdHlwZS5iaXQ0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciB4bGVuID0gTWF0aC5jZWlsKHRoaXMud2lkdGggLyAyKTtcbiAgdmFyIG1vZGUgPSB4bGVuICUgNDtcbiAgZm9yICh2YXIgeSA9IHRoaXMuaGVpZ2h0IC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgbGluZSA9IHRoaXMuYm90dG9tX3VwID8geSA6IHRoaXMuaGVpZ2h0IC0gMSAtIHk7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB4bGVuOyB4KyspIHtcbiAgICAgIHZhciBiID0gdGhpcy5kYXRhdi5nZXRVaW50OCh0aGlzLnBvcysrLCB0cnVlKTtcbiAgICAgIHZhciBsb2NhdGlvbiA9IGxpbmUgKiB0aGlzLndpZHRoICogNCArIHggKiAyICogNDtcblxuICAgICAgdmFyIGJlZm9yZSA9IGIgPj4gNDtcbiAgICAgIHZhciBhZnRlciA9IGIgJiAweDBmO1xuXG4gICAgICB2YXIgcmdiID0gdGhpcy5wYWxldHRlW2JlZm9yZV07XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb25dID0gcmdiLmJsdWU7XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyAxXSA9IHJnYi5ncmVlbjtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDJdID0gcmdiLnJlZDtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDNdID0gMHhmZjtcblxuICAgICAgaWYgKHggKiAyICsgMSA+PSB0aGlzLndpZHRoKSBicmVhaztcblxuICAgICAgcmdiID0gdGhpcy5wYWxldHRlW2FmdGVyXTtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDRdID0gcmdiLmJsdWU7XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyA0ICsgMV0gPSByZ2IuZ3JlZW47XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyA0ICsgMl0gPSByZ2IucmVkO1xuICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgNCArIDNdID0gMHhmZjtcbiAgICB9XG5cbiAgICBpZiAobW9kZSAhPT0gMCkge1xuICAgICAgdGhpcy5wb3MgKz0gNCAtIG1vZGU7XG4gICAgfVxuICB9XG59O1xuXG5CbXBEZWNvZGVyLnByb3RvdHlwZS5iaXQ4ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBtb2RlID0gdGhpcy53aWR0aCAlIDQ7XG4gIGZvciAodmFyIHkgPSB0aGlzLmhlaWdodCAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgdmFyIGxpbmUgPSB0aGlzLmJvdHRvbV91cCA/IHkgOiB0aGlzLmhlaWdodCAtIDEgLSB5O1xuICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XG4gICAgICB2YXIgYiA9IHRoaXMuZGF0YXYuZ2V0VWludDgodGhpcy5wb3MrKywgdHJ1ZSk7XG4gICAgICB2YXIgbG9jYXRpb24gPSBsaW5lICogdGhpcy53aWR0aCAqIDQgKyB4ICogNDtcbiAgICAgIGlmIChiIDwgdGhpcy5wYWxldHRlLmxlbmd0aCkge1xuICAgICAgICB2YXIgcmdiID0gdGhpcy5wYWxldHRlW2JdO1xuICAgICAgICB0aGlzLmRhdGFbbG9jYXRpb25dID0gcmdiLnJlZDtcbiAgICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgMV0gPSByZ2IuZ3JlZW47XG4gICAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDJdID0gcmdiLmJsdWU7XG4gICAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDNdID0gMHhmZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbl0gPSAweGZmO1xuICAgICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyAxXSA9IDB4ZmY7XG4gICAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDJdID0gMHhmZjtcbiAgICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgM10gPSAweGZmO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9kZSAhPT0gMCkge1xuICAgICAgdGhpcy5wb3MgKz0gNCAtIG1vZGU7XG4gICAgfVxuICB9XG59O1xuXG5CbXBEZWNvZGVyLnByb3RvdHlwZS5iaXQxNSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGlmX3cgPSB0aGlzLndpZHRoICUgMztcbiAgdmFyIF8xMTExMSA9IHBhcnNlSW50KFwiMTExMTFcIiwgMiksXG4gICAgXzFfNSA9IF8xMTExMTtcbiAgZm9yICh2YXIgeSA9IHRoaXMuaGVpZ2h0IC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgbGluZSA9IHRoaXMuYm90dG9tX3VwID8geSA6IHRoaXMuaGVpZ2h0IC0gMSAtIHk7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgIHZhciBCID0gdGhpcy5kYXRhdi5nZXRVaW50MTYodGhpcy5wb3MsIHRydWUpO1xuICAgICAgdGhpcy5wb3MgKz0gMjtcbiAgICAgIHZhciBibHVlID0gKCgoQiAmIF8xXzUpIC8gXzFfNSkgKiAyNTUpIHwgMDtcbiAgICAgIHZhciBncmVlbiA9ICgoKChCID4+IDUpICYgXzFfNSkgLyBfMV81KSAqIDI1NSkgfCAwO1xuICAgICAgdmFyIHJlZCA9ICgoKChCID4+IDEwKSAmIF8xXzUpIC8gXzFfNSkgKiAyNTUpIHwgMDtcbiAgICAgIHZhciBhbHBoYSA9IEIgPj4gMTUgPyAweGZmIDogMHgwMDtcblxuICAgICAgdmFyIGxvY2F0aW9uID0gbGluZSAqIHRoaXMud2lkdGggKiA0ICsgeCAqIDQ7XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb25dID0gcmVkO1xuICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgMV0gPSBncmVlbjtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDJdID0gYmx1ZTtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDNdID0gYWxwaGE7XG4gICAgfVxuICAgIC8vc2tpcCBleHRyYSBieXRlc1xuICAgIHRoaXMucG9zICs9IGRpZl93O1xuICB9XG59O1xuXG5CbXBEZWNvZGVyLnByb3RvdHlwZS5iaXQxNiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGlmX3cgPSB0aGlzLndpZHRoICUgMztcbiAgdmFyIF8xMTExMSA9IHBhcnNlSW50KFwiMTExMTFcIiwgMiksXG4gICAgXzFfNSA9IF8xMTExMTtcbiAgdmFyIF8xMTExMTEgPSBwYXJzZUludChcIjExMTExMVwiLCAyKSxcbiAgICBfMV82ID0gXzExMTExMTtcbiAgZm9yICh2YXIgeSA9IHRoaXMuaGVpZ2h0IC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgbGluZSA9IHRoaXMuYm90dG9tX3VwID8geSA6IHRoaXMuaGVpZ2h0IC0gMSAtIHk7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgIHZhciBCID0gdGhpcy5kYXRhdi5nZXRVaW50MTYodGhpcy5wb3MsIHRydWUpO1xuICAgICAgdGhpcy5wb3MgKz0gMjtcbiAgICAgIHZhciBhbHBoYSA9IDB4ZmY7XG4gICAgICB2YXIgYmx1ZSA9ICgoKEIgJiBfMV81KSAvIF8xXzUpICogMjU1KSB8IDA7XG4gICAgICB2YXIgZ3JlZW4gPSAoKCgoQiA+PiA1KSAmIF8xXzYpIC8gXzFfNikgKiAyNTUpIHwgMDtcbiAgICAgIHZhciByZWQgPSAoKChCID4+IDExKSAvIF8xXzUpICogMjU1KSB8IDA7XG5cbiAgICAgIHZhciBsb2NhdGlvbiA9IGxpbmUgKiB0aGlzLndpZHRoICogNCArIHggKiA0O1xuICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uXSA9IHJlZDtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDFdID0gZ3JlZW47XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyAyXSA9IGJsdWU7XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyAzXSA9IGFscGhhO1xuICAgIH1cbiAgICAvL3NraXAgZXh0cmEgYnl0ZXNcbiAgICB0aGlzLnBvcyArPSBkaWZfdztcbiAgfVxufTtcblxuQm1wRGVjb2Rlci5wcm90b3R5cGUuYml0MjQgPSBmdW5jdGlvbigpIHtcbiAgLy93aGVuIGhlaWdodCA+IDBcbiAgZm9yICh2YXIgeSA9IHRoaXMuaGVpZ2h0IC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgbGluZSA9IHRoaXMuYm90dG9tX3VwID8geSA6IHRoaXMuaGVpZ2h0IC0gMSAtIHk7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgIHZhciBibHVlID0gdGhpcy5kYXRhdi5nZXRVaW50OCh0aGlzLnBvcysrLCB0cnVlKTtcbiAgICAgIHZhciBncmVlbiA9IHRoaXMuZGF0YXYuZ2V0VWludDgodGhpcy5wb3MrKywgdHJ1ZSk7XG4gICAgICB2YXIgcmVkID0gdGhpcy5kYXRhdi5nZXRVaW50OCh0aGlzLnBvcysrLCB0cnVlKTtcbiAgICAgIHZhciBsb2NhdGlvbiA9IGxpbmUgKiB0aGlzLndpZHRoICogNCArIHggKiA0O1xuICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uXSA9IHJlZDtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbiArIDFdID0gZ3JlZW47XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyAyXSA9IGJsdWU7XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyAzXSA9IDB4ZmY7XG4gICAgfVxuICAgIC8vc2tpcCBleHRyYSBieXRlc1xuICAgIHRoaXMucG9zICs9IHRoaXMud2lkdGggJSA0O1xuICB9XG59O1xuXG4vKipcbiAqIGFkZCAzMmJpdCBkZWNvZGUgZnVuY1xuICogQGF1dGhvciBzb3Vib2tcbiAqL1xuQm1wRGVjb2Rlci5wcm90b3R5cGUuYml0MzIgPSBmdW5jdGlvbigpIHtcbiAgLy93aGVuIGhlaWdodCA+IDBcbiAgZm9yICh2YXIgeSA9IHRoaXMuaGVpZ2h0IC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgbGluZSA9IHRoaXMuYm90dG9tX3VwID8geSA6IHRoaXMuaGVpZ2h0IC0gMSAtIHk7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgIHZhciBibHVlID0gdGhpcy5kYXRhdi5nZXRVaW50OCh0aGlzLnBvcysrLCB0cnVlKTtcbiAgICAgIHZhciBncmVlbiA9IHRoaXMuZGF0YXYuZ2V0VWludDgodGhpcy5wb3MrKywgdHJ1ZSk7XG4gICAgICB2YXIgcmVkID0gdGhpcy5kYXRhdi5nZXRVaW50OCh0aGlzLnBvcysrLCB0cnVlKTtcbiAgICAgIHZhciBhbHBoYSA9IHRoaXMuZGF0YXYuZ2V0VWludDgodGhpcy5wb3MrKywgdHJ1ZSk7XG4gICAgICB2YXIgbG9jYXRpb24gPSBsaW5lICogdGhpcy53aWR0aCAqIDQgKyB4ICogNDtcbiAgICAgIHRoaXMuZGF0YVtsb2NhdGlvbl0gPSByZWQ7XG4gICAgICB0aGlzLmRhdGFbbG9jYXRpb24gKyAxXSA9IGdyZWVuO1xuICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgMl0gPSBibHVlO1xuICAgICAgdGhpcy5kYXRhW2xvY2F0aW9uICsgM10gPSBhbHBoYTtcbiAgICB9XG4gICAgLy9za2lwIGV4dHJhIGJ5dGVzXG4gICAgLy90aGlzLnBvcyArPSAodGhpcy53aWR0aCAlIDQpO1xuICB9XG59O1xuXG5CbXBEZWNvZGVyLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmRhdGE7XG59O1xuXG5leHBvcnQgeyBCbXBEZWNvZGVyIH07XG4iLCJmdW5jdGlvbiBXZWJQRGVjb2RlcihpbWFnZURhdGEpIHtcbiAgLyoqIEBsaWNlbnNlXG4gICAqIENvcHlyaWdodCAyMDExIEdvb2dsZSBJbmMuXG4gICAqXG4gICAqIFRoaXMgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgc2FtZSB0ZXJtcyBhcyBXZWJNOlxuICAgKiAgU29mdHdhcmUgTGljZW5zZSBBZ3JlZW1lbnQ6ICBodHRwOi8vd3d3LndlYm1wcm9qZWN0Lm9yZy9saWNlbnNlL3NvZnR3YXJlL1xuICAgKiAgQWRkaXRpb25hbCBJUCBSaWdodHMgR3JhbnQ6ICBodHRwOi8vd3d3LndlYm1wcm9qZWN0Lm9yZy9saWNlbnNlL2FkZGl0aW9uYWwvXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqXG4gICAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuICAgKiBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuICAgKiBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuXG4gICAqIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsXG4gICAqIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLFxuICAgKiBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuICAgKiBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZXG4gICAqIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HXG4gICAqIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSxcbiAgICogRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAgICpcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICpcbiAgICogQ29weXJpZ2h0IDIwMTEtMjAxNyBEb21pbmlrIEhvbWJlcmdlclxuICAgKiBMaWJ3ZWJwIEphdmFzY3JpcHQgLyBsaWJ3ZWJwanMgLSB0aGUgbGlid2VicCBpbXBsZW1lbnRhdGlvbiBpbiBqYXZhc2NyaXB0ICh2MC42LjApXG4gICAqXG4gICAqIEF1dGhvcjogRG9taW5payBIb21iZXJnZXIgKGRvbWluaWsuaG9tYmVyZ2VyQGdtYWlsLmNvbSlcbiAgICovXG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgVXBzYW1wbGVSZ2JMaW5lUGFpcixcbiAgICBVcHNhbXBsZUJnckxpbmVQYWlyLFxuICAgIFVwc2FtcGxlUmdiYUxpbmVQYWlyLFxuICAgIFVwc2FtcGxlQmdyYUxpbmVQYWlyLFxuICAgIFVwc2FtcGxlQXJnYkxpbmVQYWlyLFxuICAgIFVwc2FtcGxlQXJnYkxpbmVQYWlyLFxuICAgIFVwc2FtcGxlUmdiYTQ0NDRMaW5lUGFpcixcbiAgICBVcHNhbXBsZVJnYjU2NUxpbmVQYWlyO1xuXG4gIGZ1bmN0aW9uIHgoRikge1xuICAgIGlmICghRikgdGhyb3cgRXJyb3IoXCJhc3NlcnQgOlBcIik7XG4gIH1cbiAgZnVuY3Rpb24gZmEoRiwgTCwgSikge1xuICAgIGZvciAodmFyIEggPSAwOyA0ID4gSDsgSCsrKSBpZiAoRltMICsgSF0gIT0gSi5jaGFyQ29kZUF0KEgpKSByZXR1cm4gITA7XG4gICAgcmV0dXJuICExO1xuICB9XG4gIGZ1bmN0aW9uIEkoRiwgTCwgSiwgSCwgWikge1xuICAgIGZvciAodmFyIE8gPSAwOyBPIDwgWjsgTysrKSBGW0wgKyBPXSA9IEpbSCArIE9dO1xuICB9XG4gIGZ1bmN0aW9uIE0oRiwgTCwgSiwgSCkge1xuICAgIGZvciAodmFyIFogPSAwOyBaIDwgSDsgWisrKSBGW0wgKyBaXSA9IEo7XG4gIH1cbiAgZnVuY3Rpb24gVihGKSB7XG4gICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KEYpO1xuICB9XG4gIGZ1bmN0aW9uIHdhKEYsIEwpIHtcbiAgICBmb3IgKHZhciBKID0gW10sIEggPSAwOyBIIDwgRjsgSCsrKSBKLnB1c2gobmV3IEwoKSk7XG4gICAgcmV0dXJuIEo7XG4gIH1cbiAgZnVuY3Rpb24gd2IoKSB7XG4gICAgZnVuY3Rpb24gRihKLCBILCBaKSB7XG4gICAgICBmb3IgKHZhciBPID0gWltIXSwgTCA9IDA7IEwgPCBPOyBMKyspIHtcbiAgICAgICAgSi5wdXNoKFoubGVuZ3RoID4gSCArIDEgPyBbXSA6IDApO1xuICAgICAgICBpZiAoWi5sZW5ndGggPCBIICsgMSkgYnJlYWs7XG4gICAgICAgIEYoSltMXSwgSCArIDEsIFopO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgTCA9IFtdO1xuICAgIEYoTCwgMCwgWzMsIDExXSk7XG4gICAgcmV0dXJuIEw7XG4gIH1cbiAgZnVuY3Rpb24gRWQoRiwgTCkge1xuICAgIGZ1bmN0aW9uIEooSCwgTywgRikge1xuICAgICAgZm9yICh2YXIgWiA9IEZbT10sIG1hID0gMDsgbWEgPCBaOyBtYSsrKSB7XG4gICAgICAgIEgucHVzaChGLmxlbmd0aCA+IE8gKyAxID8gW10gOiBuZXcgTCgpKTtcbiAgICAgICAgaWYgKEYubGVuZ3RoIDwgTyArIDEpIGJyZWFrO1xuICAgICAgICBKKEhbbWFdLCBPICsgMSwgRik7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBIID0gW107XG4gICAgSihILCAwLCBGKTtcbiAgICByZXR1cm4gSDtcbiAgfVxuICB2YXIgX1dlYlBEZWNvZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIEYoKSB7XG4gICAgICBWKDU1KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTChhLCBiKSB7XG4gICAgICBmb3IgKHZhciBjID0gKDEgPDwgKGIgLSAxKSkgPj4+IDA7IGEgJiBjOyApIGMgPj4+PSAxO1xuICAgICAgcmV0dXJuIGMgPyAoYSAmIChjIC0gMSkpICsgYyA6IGE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEooYSwgYiwgYywgZCwgZSkge1xuICAgICAgeCghKGQgJSBjKSk7XG4gICAgICBkbyAoZCAtPSBjKSwgKGFbYiArIGRdID0gZSk7XG4gICAgICB3aGlsZSAoMCA8IGQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBIKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgIHZhciBnID0gYixcbiAgICAgICAgaCA9IDEgPDwgYyxcbiAgICAgICAgayxcbiAgICAgICAgbCxcbiAgICAgICAgbSA9IFYoMTYpLFxuICAgICAgICBuID0gVigxNik7XG4gICAgICB4KDAgIT0gZSk7XG4gICAgICB4KG51bGwgIT0gZCk7XG4gICAgICB4KG51bGwgIT0gYSk7XG4gICAgICB4KDAgPCBjKTtcbiAgICAgIGZvciAobCA9IDA7IGwgPCBlOyArK2wpIHtcbiAgICAgICAgaWYgKDE1IDwgZFtsXSkgcmV0dXJuIDA7XG4gICAgICAgICsrbVtkW2xdXTtcbiAgICAgIH1cbiAgICAgIGlmIChtWzBdID09IGUpIHJldHVybiAwO1xuICAgICAgblsxXSA9IDA7XG4gICAgICBmb3IgKGsgPSAxOyAxNSA+IGs7ICsraykge1xuICAgICAgICBpZiAobVtrXSA+IDEgPDwgaykgcmV0dXJuIDA7XG4gICAgICAgIG5bayArIDFdID0gbltrXSArIG1ba107XG4gICAgICB9XG4gICAgICBmb3IgKGwgPSAwOyBsIDwgZTsgKytsKSAoayA9IGRbbF0pLCAwIDwgZFtsXSAmJiAoZltuW2tdKytdID0gbCk7XG4gICAgICBpZiAoMSA9PSBuWzE1XSlcbiAgICAgICAgcmV0dXJuIChkID0gbmV3IE8oKSksIChkLmcgPSAwKSwgKGQudmFsdWUgPSBmWzBdKSwgSihhLCBnLCAxLCBoLCBkKSwgaDtcbiAgICAgIHZhciByID0gLTEsXG4gICAgICAgIHEgPSBoIC0gMSxcbiAgICAgICAgdCA9IDAsXG4gICAgICAgIHYgPSAxLFxuICAgICAgICBwID0gMSxcbiAgICAgICAgdSxcbiAgICAgICAgdyA9IDEgPDwgYztcbiAgICAgIGwgPSAwO1xuICAgICAgayA9IDE7XG4gICAgICBmb3IgKGUgPSAyOyBrIDw9IGM7ICsraywgZSA8PD0gMSkge1xuICAgICAgICBwIDw8PSAxO1xuICAgICAgICB2ICs9IHA7XG4gICAgICAgIHAgLT0gbVtrXTtcbiAgICAgICAgaWYgKDAgPiBwKSByZXR1cm4gMDtcbiAgICAgICAgZm9yICg7IDAgPCBtW2tdOyAtLW1ba10pXG4gICAgICAgICAgKGQgPSBuZXcgTygpKSxcbiAgICAgICAgICAgIChkLmcgPSBrKSxcbiAgICAgICAgICAgIChkLnZhbHVlID0gZltsKytdKSxcbiAgICAgICAgICAgIEooYSwgZyArIHQsIGUsIHcsIGQpLFxuICAgICAgICAgICAgKHQgPSBMKHQsIGspKTtcbiAgICAgIH1cbiAgICAgIGsgPSBjICsgMTtcbiAgICAgIGZvciAoZSA9IDI7IDE1ID49IGs7ICsraywgZSA8PD0gMSkge1xuICAgICAgICBwIDw8PSAxO1xuICAgICAgICB2ICs9IHA7XG4gICAgICAgIHAgLT0gbVtrXTtcbiAgICAgICAgaWYgKDAgPiBwKSByZXR1cm4gMDtcbiAgICAgICAgZm9yICg7IDAgPCBtW2tdOyAtLW1ba10pIHtcbiAgICAgICAgICBkID0gbmV3IE8oKTtcbiAgICAgICAgICBpZiAoKHQgJiBxKSAhPSByKSB7XG4gICAgICAgICAgICBnICs9IHc7XG4gICAgICAgICAgICByID0gaztcbiAgICAgICAgICAgIGZvciAodSA9IDEgPDwgKHIgLSBjKTsgMTUgPiByOyApIHtcbiAgICAgICAgICAgICAgdSAtPSBtW3JdO1xuICAgICAgICAgICAgICBpZiAoMCA+PSB1KSBicmVhaztcbiAgICAgICAgICAgICAgKytyO1xuICAgICAgICAgICAgICB1IDw8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdSA9IHIgLSBjO1xuICAgICAgICAgICAgdyA9IDEgPDwgdTtcbiAgICAgICAgICAgIGggKz0gdztcbiAgICAgICAgICAgIHIgPSB0ICYgcTtcbiAgICAgICAgICAgIGFbYiArIHJdLmcgPSB1ICsgYztcbiAgICAgICAgICAgIGFbYiArIHJdLnZhbHVlID0gZyAtIGIgLSByO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkLmcgPSBrIC0gYztcbiAgICAgICAgICBkLnZhbHVlID0gZltsKytdO1xuICAgICAgICAgIEooYSwgZyArICh0ID4+IGMpLCBlLCB3LCBkKTtcbiAgICAgICAgICB0ID0gTCh0LCBrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHYgIT0gMiAqIG5bMTVdIC0gMSA/IDAgOiBoO1xuICAgIH1cbiAgICBmdW5jdGlvbiBaKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIHgoMjMyOCA+PSBlKTtcbiAgICAgIGlmICg1MTIgPj0gZSkgdmFyIGYgPSBWKDUxMik7XG4gICAgICBlbHNlIGlmICgoKGYgPSBWKGUpKSwgbnVsbCA9PSBmKSkgcmV0dXJuIDA7XG4gICAgICByZXR1cm4gSChhLCBiLCBjLCBkLCBlLCBmKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTygpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmcgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBGZCgpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmcgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBVYigpIHtcbiAgICAgIHRoaXMuRyA9IHdhKDUsIE8pO1xuICAgICAgdGhpcy5IID0gVig1KTtcbiAgICAgIHRoaXMuamMgPSB0aGlzLlFiID0gdGhpcy5xYiA9IHRoaXMubmQgPSAwO1xuICAgICAgdGhpcy5wZCA9IHdhKHhiLCBGZCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hKGEsIGIsIGMsIGQpIHtcbiAgICAgIHgobnVsbCAhPSBhKTtcbiAgICAgIHgobnVsbCAhPSBiKTtcbiAgICAgIHgoMjE0NzQ4MzY0OCA+IGQpO1xuICAgICAgYS5DYSA9IDI1NDtcbiAgICAgIGEuSSA9IDA7XG4gICAgICBhLmIgPSAtODtcbiAgICAgIGEuS2EgPSAwO1xuICAgICAgYS5vYSA9IGI7XG4gICAgICBhLnBhID0gYztcbiAgICAgIGEuSmQgPSBiO1xuICAgICAgYS5ZYyA9IGMgKyBkO1xuICAgICAgYS5aYyA9IDQgPD0gZCA/IGMgKyBkIC0gNCArIDEgOiBjO1xuICAgICAgUWEoYSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5hKGEsIGIpIHtcbiAgICAgIGZvciAodmFyIGMgPSAwOyAwIDwgYi0tOyApIGMgfD0gSyhhLCAxMjgpIDw8IGI7XG4gICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gY2EoYSwgYikge1xuICAgICAgdmFyIGMgPSBuYShhLCBiKTtcbiAgICAgIHJldHVybiBHKGEpID8gLWMgOiBjO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjYihhLCBiLCBjLCBkKSB7XG4gICAgICB2YXIgZSxcbiAgICAgICAgZiA9IDA7XG4gICAgICB4KG51bGwgIT0gYSk7XG4gICAgICB4KG51bGwgIT0gYik7XG4gICAgICB4KDQyOTQ5NjcyODggPiBkKTtcbiAgICAgIGEuU2IgPSBkO1xuICAgICAgYS5SYSA9IDA7XG4gICAgICBhLnUgPSAwO1xuICAgICAgYS5oID0gMDtcbiAgICAgIDQgPCBkICYmIChkID0gNCk7XG4gICAgICBmb3IgKGUgPSAwOyBlIDwgZDsgKytlKSBmICs9IGJbYyArIGVdIDw8ICg4ICogZSk7XG4gICAgICBhLlJhID0gZjtcbiAgICAgIGEuYmIgPSBkO1xuICAgICAgYS5vYSA9IGI7XG4gICAgICBhLnBhID0gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gVmIoYSkge1xuICAgICAgZm9yICg7IDggPD0gYS51ICYmIGEuYmIgPCBhLlNiOyApXG4gICAgICAgIChhLlJhID4+Pj0gOCksXG4gICAgICAgICAgKGEuUmEgKz0gKGEub2FbYS5wYSArIGEuYmJdIDw8IChvYiAtIDgpKSA+Pj4gMCksXG4gICAgICAgICAgKythLmJiLFxuICAgICAgICAgIChhLnUgLT0gOCk7XG4gICAgICBkYihhKSAmJiAoKGEuaCA9IDEpLCAoYS51ID0gMCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBEKGEsIGIpIHtcbiAgICAgIHgoMCA8PSBiKTtcbiAgICAgIGlmICghYS5oICYmIGIgPD0gR2QpIHtcbiAgICAgICAgdmFyIGMgPSBwYihhKSAmIEhkW2JdO1xuICAgICAgICBhLnUgKz0gYjtcbiAgICAgICAgVmIoYSk7XG4gICAgICAgIHJldHVybiBjO1xuICAgICAgfVxuICAgICAgYS5oID0gMTtcbiAgICAgIHJldHVybiAoYS51ID0gMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFdiKCkge1xuICAgICAgdGhpcy5iID0gdGhpcy5DYSA9IHRoaXMuSSA9IDA7XG4gICAgICB0aGlzLm9hID0gW107XG4gICAgICB0aGlzLnBhID0gMDtcbiAgICAgIHRoaXMuSmQgPSBbXTtcbiAgICAgIHRoaXMuWWMgPSAwO1xuICAgICAgdGhpcy5aYyA9IFtdO1xuICAgICAgdGhpcy5LYSA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJhKCkge1xuICAgICAgdGhpcy5SYSA9IDA7XG4gICAgICB0aGlzLm9hID0gW107XG4gICAgICB0aGlzLmggPSB0aGlzLnUgPSB0aGlzLmJiID0gdGhpcy5TYiA9IHRoaXMucGEgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYihhKSB7XG4gICAgICByZXR1cm4gKGEuUmEgPj4+IChhLnUgJiAob2IgLSAxKSkpID4+PiAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkYihhKSB7XG4gICAgICB4KGEuYmIgPD0gYS5TYik7XG4gICAgICByZXR1cm4gYS5oIHx8IChhLmJiID09IGEuU2IgJiYgYS51ID4gb2IpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBxYihhLCBiKSB7XG4gICAgICBhLnUgPSBiO1xuICAgICAgYS5oID0gZGIoYSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFNhKGEpIHtcbiAgICAgIGEudSA+PSBYYiAmJiAoeChhLnUgPj0gWGIpLCBWYihhKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFFhKGEpIHtcbiAgICAgIHgobnVsbCAhPSBhICYmIG51bGwgIT0gYS5vYSk7XG4gICAgICBhLnBhIDwgYS5aY1xuICAgICAgICA/ICgoYS5JID0gKGEub2FbYS5wYSsrXSB8IChhLkkgPDwgOCkpID4+PiAwKSwgKGEuYiArPSA4KSlcbiAgICAgICAgOiAoeChudWxsICE9IGEgJiYgbnVsbCAhPSBhLm9hKSxcbiAgICAgICAgICBhLnBhIDwgYS5ZY1xuICAgICAgICAgICAgPyAoKGEuYiArPSA4KSwgKGEuSSA9IGEub2FbYS5wYSsrXSB8IChhLkkgPDwgOCkpKVxuICAgICAgICAgICAgOiBhLkthXG4gICAgICAgICAgICA/IChhLmIgPSAwKVxuICAgICAgICAgICAgOiAoKGEuSSA8PD0gOCksIChhLmIgKz0gOCksIChhLkthID0gMSkpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gRyhhKSB7XG4gICAgICByZXR1cm4gbmEoYSwgMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEsoYSwgYikge1xuICAgICAgdmFyIGMgPSBhLkNhO1xuICAgICAgMCA+IGEuYiAmJiBRYShhKTtcbiAgICAgIHZhciBkID0gYS5iLFxuICAgICAgICBlID0gKGMgKiBiKSA+Pj4gOCxcbiAgICAgICAgZiA9IChhLkkgPj4+IGQgPiBlKSArIDA7XG4gICAgICBmID8gKChjIC09IGUpLCAoYS5JIC09ICgoZSArIDEpIDw8IGQpID4+PiAwKSkgOiAoYyA9IGUgKyAxKTtcbiAgICAgIGQgPSBjO1xuICAgICAgZm9yIChlID0gMDsgMjU2IDw9IGQ7ICkgKGUgKz0gOCksIChkID4+PSA4KTtcbiAgICAgIGQgPSA3IF4gKGUgKyBJZFtkXSk7XG4gICAgICBhLmIgLT0gZDtcbiAgICAgIGEuQ2EgPSAoYyA8PCBkKSAtIDE7XG4gICAgICByZXR1cm4gZjtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmEoYSwgYiwgYykge1xuICAgICAgYVtiICsgMF0gPSAoYyA+PiAyNCkgJiAyNTU7XG4gICAgICBhW2IgKyAxXSA9IChjID4+IDE2KSAmIDI1NTtcbiAgICAgIGFbYiArIDJdID0gKGMgPj4gOCkgJiAyNTU7XG4gICAgICBhW2IgKyAzXSA9IChjID4+IDApICYgMjU1O1xuICAgIH1cbiAgICBmdW5jdGlvbiBUYShhLCBiKSB7XG4gICAgICByZXR1cm4gKGFbYiArIDBdIDw8IDApIHwgKGFbYiArIDFdIDw8IDgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBZYihhLCBiKSB7XG4gICAgICByZXR1cm4gVGEoYSwgYikgfCAoYVtiICsgMl0gPDwgMTYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBIYShhLCBiKSB7XG4gICAgICByZXR1cm4gVGEoYSwgYikgfCAoVGEoYSwgYiArIDIpIDw8IDE2KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gWmIoYSwgYikge1xuICAgICAgdmFyIGMgPSAxIDw8IGI7XG4gICAgICB4KG51bGwgIT0gYSk7XG4gICAgICB4KDAgPCBiKTtcbiAgICAgIGEuWCA9IFYoYyk7XG4gICAgICBpZiAobnVsbCA9PSBhLlgpIHJldHVybiAwO1xuICAgICAgYS5NYiA9IDMyIC0gYjtcbiAgICAgIGEuWGEgPSBiO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uICRiKGEsIGIpIHtcbiAgICAgIHgobnVsbCAhPSBhKTtcbiAgICAgIHgobnVsbCAhPSBiKTtcbiAgICAgIHgoYS5YYSA9PSBiLlhhKTtcbiAgICAgIEkoYi5YLCAwLCBhLlgsIDAsIDEgPDwgYi5YYSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFjKCkge1xuICAgICAgdGhpcy5YID0gW107XG4gICAgICB0aGlzLlhhID0gdGhpcy5NYiA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJjKGEsIGIsIGMsIGQpIHtcbiAgICAgIHgobnVsbCAhPSBjKTtcbiAgICAgIHgobnVsbCAhPSBkKTtcbiAgICAgIHZhciBlID0gY1swXSxcbiAgICAgICAgZiA9IGRbMF07XG4gICAgICAwID09IGUgJiYgKGUgPSAoYSAqIGYgKyBiIC8gMikgLyBiKTtcbiAgICAgIDAgPT0gZiAmJiAoZiA9IChiICogZSArIGEgLyAyKSAvIGEpO1xuICAgICAgaWYgKDAgPj0gZSB8fCAwID49IGYpIHJldHVybiAwO1xuICAgICAgY1swXSA9IGU7XG4gICAgICBkWzBdID0gZjtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiB4YShhLCBiKSB7XG4gICAgICByZXR1cm4gKGEgKyAoMSA8PCBiKSAtIDEpID4+PiBiO1xuICAgIH1cbiAgICBmdW5jdGlvbiB5YihhLCBiKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAoKCgoKGEgJiA0Mjc4MjU1MzYwKSArIChiICYgNDI3ODI1NTM2MCkpID4+PiAwKSAmIDQyNzgyNTUzNjApICtcbiAgICAgICAgICAoKCgoYSAmIDE2NzExOTM1KSArIChiICYgMTY3MTE5MzUpKSA+Pj4gMCkgJiAxNjcxMTkzNSkpID4+PlxuICAgICAgICAwXG4gICAgICApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBYKGEsIGIpIHtcbiAgICAgIHNlbGZbYl0gPSBmdW5jdGlvbihiLCBkLCBlLCBmLCBnLCBoLCBrKSB7XG4gICAgICAgIHZhciBjO1xuICAgICAgICBmb3IgKGMgPSAwOyBjIDwgZzsgKytjKSB7XG4gICAgICAgICAgdmFyIG0gPSBzZWxmW2FdKGhbayArIGMgLSAxXSwgZSwgZiArIGMpO1xuICAgICAgICAgIGhbayArIGNdID0geWIoYltkICsgY10sIG0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBKZCgpIHtcbiAgICAgIHRoaXMudWQgPSB0aGlzLmhkID0gdGhpcy5qZCA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFhKGEsIGIpIHtcbiAgICAgIHJldHVybiAoKCgoYSBeIGIpICYgNDI3ODEyNDI4NikgPj4+IDEpICsgKGEgJiBiKSkgPj4+IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNhKGEpIHtcbiAgICAgIGlmICgwIDw9IGEgJiYgMjU2ID4gYSkgcmV0dXJuIGE7XG4gICAgICBpZiAoMCA+IGEpIHJldHVybiAwO1xuICAgICAgaWYgKDI1NSA8IGEpIHJldHVybiAyNTU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGViKGEsIGIpIHtcbiAgICAgIHJldHVybiBzYShhICsgKChhIC0gYiArIDAuNSkgPj4gMSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBJYShhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gTWF0aC5hYnMoYiAtIGMpIC0gTWF0aC5hYnMoYSAtIGMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjYyhhLCBiLCBjLCBkLCBlLCBmLCBnKSB7XG4gICAgICBkID0gZltnIC0gMV07XG4gICAgICBmb3IgKGMgPSAwOyBjIDwgZTsgKytjKSBmW2cgKyBjXSA9IGQgPSB5YihhW2IgKyBjXSwgZCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEtkKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIHZhciBmO1xuICAgICAgZm9yIChmID0gMDsgZiA8IGM7ICsrZikge1xuICAgICAgICB2YXIgZyA9IGFbYiArIGZdLFxuICAgICAgICAgIGggPSAoZyA+PiA4KSAmIDI1NSxcbiAgICAgICAgICBrID0gZyAmIDE2NzExOTM1LFxuICAgICAgICAgIGsgPSBrICsgKChoIDw8IDE2KSArIGgpLFxuICAgICAgICAgIGsgPSBrICYgMTY3MTE5MzU7XG4gICAgICAgIGRbZSArIGZdID0gKChnICYgNDI3ODI1NTM2MCkgKyBrKSA+Pj4gMDtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZGMoYSwgYikge1xuICAgICAgYi5qZCA9IChhID4+IDApICYgMjU1O1xuICAgICAgYi5oZCA9IChhID4+IDgpICYgMjU1O1xuICAgICAgYi51ZCA9IChhID4+IDE2KSAmIDI1NTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTGQoYSwgYiwgYywgZCwgZSwgZikge1xuICAgICAgdmFyIGc7XG4gICAgICBmb3IgKGcgPSAwOyBnIDwgZDsgKytnKSB7XG4gICAgICAgIHZhciBoID0gYltjICsgZ10sXG4gICAgICAgICAgayA9IGggPj4+IDgsXG4gICAgICAgICAgbCA9IGggPj4+IDE2LFxuICAgICAgICAgIG0gPSBoLFxuICAgICAgICAgIGwgPSBsICsgKCgoKGEuamQgPDwgMjQpID4+IDI0KSAqICgoayA8PCAyNCkgPj4gMjQpKSA+Pj4gNSksXG4gICAgICAgICAgbCA9IGwgJiAyNTUsXG4gICAgICAgICAgbSA9IG0gKyAoKCgoYS5oZCA8PCAyNCkgPj4gMjQpICogKChrIDw8IDI0KSA+PiAyNCkpID4+PiA1KSxcbiAgICAgICAgICBtID0gbSArICgoKChhLnVkIDw8IDI0KSA+PiAyNCkgKiAoKGwgPDwgMjQpID4+IDI0KSkgPj4+IDUpLFxuICAgICAgICAgIG0gPSBtICYgMjU1O1xuICAgICAgICBlW2YgKyBnXSA9IChoICYgNDI3ODI1NTM2MCkgKyAobCA8PCAxNikgKyBtO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBlYyhhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBzZWxmW2JdID0gZnVuY3Rpb24oYSwgYiwgYywgaywgbCwgbSwgbiwgciwgcSkge1xuICAgICAgICBmb3IgKGsgPSBuOyBrIDwgcjsgKytrKVxuICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBxOyArK24pIGxbbSsrXSA9IGUoY1tkKGFbYisrXSldKTtcbiAgICAgIH07XG4gICAgICBzZWxmW2FdID0gZnVuY3Rpb24oYSwgYiwgaCwgaywgbCwgbSwgbikge1xuICAgICAgICB2YXIgZiA9IDggPj4gYS5iLFxuICAgICAgICAgIGcgPSBhLkVhLFxuICAgICAgICAgIHQgPSBhLktbMF0sXG4gICAgICAgICAgdiA9IGEudztcbiAgICAgICAgaWYgKDggPiBmKVxuICAgICAgICAgIGZvciAoYSA9ICgxIDw8IGEuYikgLSAxLCB2ID0gKDEgPDwgZikgLSAxOyBiIDwgaDsgKytiKSB7XG4gICAgICAgICAgICB2YXIgcCA9IDAsXG4gICAgICAgICAgICAgIHU7XG4gICAgICAgICAgICBmb3IgKHUgPSAwOyB1IDwgZzsgKyt1KVxuICAgICAgICAgICAgICB1ICYgYSB8fCAocCA9IGQoa1tsKytdKSksIChtW24rK10gPSBlKHRbcCAmIHZdKSksIChwID4+PSBmKTtcbiAgICAgICAgICB9XG4gICAgICAgIGVsc2Ugc2VsZltcIlZQOExNYXBDb2xvclwiICsgY10oaywgbCwgdCwgdiwgbSwgbiwgYiwgaCwgZyk7XG4gICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBNZChhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBmb3IgKGMgPSBiICsgYzsgYiA8IGM7ICkge1xuICAgICAgICB2YXIgZiA9IGFbYisrXTtcbiAgICAgICAgZFtlKytdID0gKGYgPj4gMTYpICYgMjU1O1xuICAgICAgICBkW2UrK10gPSAoZiA+PiA4KSAmIDI1NTtcbiAgICAgICAgZFtlKytdID0gKGYgPj4gMCkgJiAyNTU7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIE5kKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIGZvciAoYyA9IGIgKyBjOyBiIDwgYzsgKSB7XG4gICAgICAgIHZhciBmID0gYVtiKytdO1xuICAgICAgICBkW2UrK10gPSAoZiA+PiAxNikgJiAyNTU7XG4gICAgICAgIGRbZSsrXSA9IChmID4+IDgpICYgMjU1O1xuICAgICAgICBkW2UrK10gPSAoZiA+PiAwKSAmIDI1NTtcbiAgICAgICAgZFtlKytdID0gKGYgPj4gMjQpICYgMjU1O1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBPZChhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBmb3IgKGMgPSBiICsgYzsgYiA8IGM7ICkge1xuICAgICAgICB2YXIgZiA9IGFbYisrXSxcbiAgICAgICAgICBnID0gKChmID4+IDE2KSAmIDI0MCkgfCAoKGYgPj4gMTIpICYgMTUpLFxuICAgICAgICAgIGYgPSAoKGYgPj4gMCkgJiAyNDApIHwgKChmID4+IDI4KSAmIDE1KTtcbiAgICAgICAgZFtlKytdID0gZztcbiAgICAgICAgZFtlKytdID0gZjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gUGQoYSwgYiwgYywgZCwgZSkge1xuICAgICAgZm9yIChjID0gYiArIGM7IGIgPCBjOyApIHtcbiAgICAgICAgdmFyIGYgPSBhW2IrK10sXG4gICAgICAgICAgZyA9ICgoZiA+PiAxNikgJiAyNDgpIHwgKChmID4+IDEzKSAmIDcpLFxuICAgICAgICAgIGYgPSAoKGYgPj4gNSkgJiAyMjQpIHwgKChmID4+IDMpICYgMzEpO1xuICAgICAgICBkW2UrK10gPSBnO1xuICAgICAgICBkW2UrK10gPSBmO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBRZChhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBmb3IgKGMgPSBiICsgYzsgYiA8IGM7ICkge1xuICAgICAgICB2YXIgZiA9IGFbYisrXTtcbiAgICAgICAgZFtlKytdID0gKGYgPj4gMCkgJiAyNTU7XG4gICAgICAgIGRbZSsrXSA9IChmID4+IDgpICYgMjU1O1xuICAgICAgICBkW2UrK10gPSAoZiA+PiAxNikgJiAyNTU7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZiKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgIGlmICgwID09IGYpXG4gICAgICAgIGZvciAoYyA9IGIgKyBjOyBiIDwgYzsgKVxuICAgICAgICAgIChmID0gYVtiKytdKSxcbiAgICAgICAgICAgIHJhKFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgICAoKGZbMF0gPj4gMjQpIHxcbiAgICAgICAgICAgICAgICAoKGZbMV0gPj4gOCkgJiA2NTI4MCkgfFxuICAgICAgICAgICAgICAgICgoZlsyXSA8PCA4KSAmIDE2NzExNjgwKSB8XG4gICAgICAgICAgICAgICAgKGZbM10gPDwgMjQpKSA+Pj5cbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgKGUgKz0gMzIpO1xuICAgICAgZWxzZSBJKGQsIGUsIGEsIGIsIGMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnYihhLCBiKSB7XG4gICAgICBzZWxmW2JdWzBdID0gc2VsZlthICsgXCIwXCJdO1xuICAgICAgc2VsZltiXVsxXSA9IHNlbGZbYSArIFwiMVwiXTtcbiAgICAgIHNlbGZbYl1bMl0gPSBzZWxmW2EgKyBcIjJcIl07XG4gICAgICBzZWxmW2JdWzNdID0gc2VsZlthICsgXCIzXCJdO1xuICAgICAgc2VsZltiXVs0XSA9IHNlbGZbYSArIFwiNFwiXTtcbiAgICAgIHNlbGZbYl1bNV0gPSBzZWxmW2EgKyBcIjVcIl07XG4gICAgICBzZWxmW2JdWzZdID0gc2VsZlthICsgXCI2XCJdO1xuICAgICAgc2VsZltiXVs3XSA9IHNlbGZbYSArIFwiN1wiXTtcbiAgICAgIHNlbGZbYl1bOF0gPSBzZWxmW2EgKyBcIjhcIl07XG4gICAgICBzZWxmW2JdWzldID0gc2VsZlthICsgXCI5XCJdO1xuICAgICAgc2VsZltiXVsxMF0gPSBzZWxmW2EgKyBcIjEwXCJdO1xuICAgICAgc2VsZltiXVsxMV0gPSBzZWxmW2EgKyBcIjExXCJdO1xuICAgICAgc2VsZltiXVsxMl0gPSBzZWxmW2EgKyBcIjEyXCJdO1xuICAgICAgc2VsZltiXVsxM10gPSBzZWxmW2EgKyBcIjEzXCJdO1xuICAgICAgc2VsZltiXVsxNF0gPSBzZWxmW2EgKyBcIjBcIl07XG4gICAgICBzZWxmW2JdWzE1XSA9IHNlbGZbYSArIFwiMFwiXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGIoYSkge1xuICAgICAgcmV0dXJuIGEgPT0gemIgfHwgYSA9PSBBYiB8fCBhID09IEphIHx8IGEgPT0gQmI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJkKCkge1xuICAgICAgdGhpcy5lYiA9IFtdO1xuICAgICAgdGhpcy5zaXplID0gdGhpcy5BID0gdGhpcy5mYiA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFNkKCkge1xuICAgICAgdGhpcy55ID0gW107XG4gICAgICB0aGlzLmYgPSBbXTtcbiAgICAgIHRoaXMuZWEgPSBbXTtcbiAgICAgIHRoaXMuRiA9IFtdO1xuICAgICAgdGhpcy5UYyA9IHRoaXMuRWQgPSB0aGlzLkNkID0gdGhpcy5GZCA9IHRoaXMubGIgPSB0aGlzLkRiID0gdGhpcy5BYiA9IHRoaXMuZmEgPSB0aGlzLkogPSB0aGlzLlcgPSB0aGlzLk4gPSB0aGlzLk8gPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBDYigpIHtcbiAgICAgIHRoaXMuUmQgPSB0aGlzLmhlaWdodCA9IHRoaXMud2lkdGggPSB0aGlzLlMgPSAwO1xuICAgICAgdGhpcy5mID0ge307XG4gICAgICB0aGlzLmYuUkdCQSA9IG5ldyBSZCgpO1xuICAgICAgdGhpcy5mLmtiID0gbmV3IFNkKCk7XG4gICAgICB0aGlzLnNkID0gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gVGQoKSB7XG4gICAgICB0aGlzLndpZHRoID0gWzBdO1xuICAgICAgdGhpcy5oZWlnaHQgPSBbMF07XG4gICAgICB0aGlzLlBkID0gWzBdO1xuICAgICAgdGhpcy5RZCA9IFswXTtcbiAgICAgIHRoaXMuZm9ybWF0ID0gWzBdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBVZCgpIHtcbiAgICAgIHRoaXMuSWQgPSB0aGlzLmZkID0gdGhpcy5NZCA9IHRoaXMuaGIgPSB0aGlzLmliID0gdGhpcy5kYSA9IHRoaXMuYmQgPSB0aGlzLmNkID0gdGhpcy5qID0gdGhpcy52ID0gdGhpcy5EYSA9IHRoaXMuU2QgPSB0aGlzLm9iID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gVmQoYSkge1xuICAgICAgYWxlcnQoXCJ0b2RvOldlYlBTYW1wbGVyUHJvY2Vzc1BsYW5lXCIpO1xuICAgICAgcmV0dXJuIGEuVDtcbiAgICB9XG4gICAgZnVuY3Rpb24gV2QoYSwgYikge1xuICAgICAgdmFyIGMgPSBhLlQsXG4gICAgICAgIGQgPSBiLmJhLmYuUkdCQSxcbiAgICAgICAgZSA9IGQuZWIsXG4gICAgICAgIGYgPSBkLmZiICsgYS5rYSAqIGQuQSxcbiAgICAgICAgZyA9IFBbYi5iYS5TXSxcbiAgICAgICAgaCA9IGEueSxcbiAgICAgICAgayA9IGEuTyxcbiAgICAgICAgbCA9IGEuZixcbiAgICAgICAgbSA9IGEuTixcbiAgICAgICAgbiA9IGEuZWEsXG4gICAgICAgIHIgPSBhLlcsXG4gICAgICAgIHEgPSBiLmNjLFxuICAgICAgICB0ID0gYi5kYyxcbiAgICAgICAgdiA9IGIuTWMsXG4gICAgICAgIHAgPSBiLk5jLFxuICAgICAgICB1ID0gYS5rYSxcbiAgICAgICAgdyA9IGEua2EgKyBhLlQsXG4gICAgICAgIHkgPSBhLlUsXG4gICAgICAgIEEgPSAoeSArIDEpID4+IDE7XG4gICAgICAwID09IHVcbiAgICAgICAgPyBnKGgsIGssIG51bGwsIG51bGwsIGwsIG0sIG4sIHIsIGwsIG0sIG4sIHIsIGUsIGYsIG51bGwsIG51bGwsIHkpXG4gICAgICAgIDogKGcoYi5lYywgYi5mYywgaCwgaywgcSwgdCwgdiwgcCwgbCwgbSwgbiwgciwgZSwgZiAtIGQuQSwgZSwgZiwgeSksXG4gICAgICAgICAgKytjKTtcbiAgICAgIGZvciAoOyB1ICsgMiA8IHc7IHUgKz0gMilcbiAgICAgICAgKHEgPSBsKSxcbiAgICAgICAgICAodCA9IG0pLFxuICAgICAgICAgICh2ID0gbiksXG4gICAgICAgICAgKHAgPSByKSxcbiAgICAgICAgICAobSArPSBhLlJjKSxcbiAgICAgICAgICAociArPSBhLlJjKSxcbiAgICAgICAgICAoZiArPSAyICogZC5BKSxcbiAgICAgICAgICAoayArPSAyICogYS5mYSksXG4gICAgICAgICAgZyhoLCBrIC0gYS5mYSwgaCwgaywgcSwgdCwgdiwgcCwgbCwgbSwgbiwgciwgZSwgZiAtIGQuQSwgZSwgZiwgeSk7XG4gICAgICBrICs9IGEuZmE7XG4gICAgICBhLmogKyB3IDwgYS5vXG4gICAgICAgID8gKEkoYi5lYywgYi5mYywgaCwgaywgeSksXG4gICAgICAgICAgSShiLmNjLCBiLmRjLCBsLCBtLCBBKSxcbiAgICAgICAgICBJKGIuTWMsIGIuTmMsIG4sIHIsIEEpLFxuICAgICAgICAgIGMtLSlcbiAgICAgICAgOiB3ICYgMSB8fFxuICAgICAgICAgIGcoXG4gICAgICAgICAgICBoLFxuICAgICAgICAgICAgayxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgbCxcbiAgICAgICAgICAgIG0sXG4gICAgICAgICAgICBuLFxuICAgICAgICAgICAgcixcbiAgICAgICAgICAgIGwsXG4gICAgICAgICAgICBtLFxuICAgICAgICAgICAgbixcbiAgICAgICAgICAgIHIsXG4gICAgICAgICAgICBlLFxuICAgICAgICAgICAgZiArIGQuQSxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgeVxuICAgICAgICAgICk7XG4gICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gWGQoYSwgYiwgYykge1xuICAgICAgdmFyIGQgPSBhLkYsXG4gICAgICAgIGUgPSBbYS5KXTtcbiAgICAgIGlmIChudWxsICE9IGQpIHtcbiAgICAgICAgdmFyIGYgPSBhLlUsXG4gICAgICAgICAgZyA9IGIuYmEuUyxcbiAgICAgICAgICBoID0gZyA9PSB5YSB8fCBnID09IEphO1xuICAgICAgICBiID0gYi5iYS5mLlJHQkE7XG4gICAgICAgIHZhciBrID0gWzBdLFxuICAgICAgICAgIGwgPSBhLmthO1xuICAgICAgICBrWzBdID0gYS5UO1xuICAgICAgICBhLktiICYmXG4gICAgICAgICAgKDAgPT0gbCA/IC0ta1swXSA6ICgtLWwsIChlWzBdIC09IGEud2lkdGgpKSxcbiAgICAgICAgICBhLmogKyBhLmthICsgYS5UID09IGEubyAmJiAoa1swXSA9IGEubyAtIGEuaiAtIGwpKTtcbiAgICAgICAgdmFyIG0gPSBiLmViLFxuICAgICAgICAgIGwgPSBiLmZiICsgbCAqIGIuQTtcbiAgICAgICAgYSA9IGZjKGQsIGVbMF0sIGEud2lkdGgsIGYsIGssIG0sIGwgKyAoaCA/IDAgOiAzKSwgYi5BKTtcbiAgICAgICAgeChjID09IGspO1xuICAgICAgICBhICYmIGhiKGcpICYmIHphKG0sIGwsIGgsIGYsIGssIGIuQSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2MoYSkge1xuICAgICAgdmFyIGIgPSBhLm1hLFxuICAgICAgICBjID0gYi5iYS5TLFxuICAgICAgICBkID0gMTEgPiBjLFxuICAgICAgICBlID0gYyA9PSBVYSB8fCBjID09IFZhIHx8IGMgPT0geWEgfHwgYyA9PSBEYiB8fCAxMiA9PSBjIHx8IGhiKGMpO1xuICAgICAgYi5tZW1vcnkgPSBudWxsO1xuICAgICAgYi5JYiA9IG51bGw7XG4gICAgICBiLkpiID0gbnVsbDtcbiAgICAgIGIuTmQgPSBudWxsO1xuICAgICAgaWYgKCFoYyhiLk9hLCBhLCBlID8gMTEgOiAxMikpIHJldHVybiAwO1xuICAgICAgZSAmJiBoYihjKSAmJiBpYygpO1xuICAgICAgaWYgKGEuZGEpIGFsZXJ0KFwidG9kbzp1c2Vfc2NhbGluZ1wiKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAoZCkge1xuICAgICAgICAgIGlmICgoKGIuSWIgPSBWZCksIGEuS2IpKSB7XG4gICAgICAgICAgICBjID0gKGEuVSArIDEpID4+IDE7XG4gICAgICAgICAgICBiLm1lbW9yeSA9IFYoYS5VICsgMiAqIGMpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gYi5tZW1vcnkpIHJldHVybiAwO1xuICAgICAgICAgICAgYi5lYyA9IGIubWVtb3J5O1xuICAgICAgICAgICAgYi5mYyA9IDA7XG4gICAgICAgICAgICBiLmNjID0gYi5lYztcbiAgICAgICAgICAgIGIuZGMgPSBiLmZjICsgYS5VO1xuICAgICAgICAgICAgYi5NYyA9IGIuY2M7XG4gICAgICAgICAgICBiLk5jID0gYi5kYyArIGM7XG4gICAgICAgICAgICBiLkliID0gV2Q7XG4gICAgICAgICAgICBpYygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGFsZXJ0KFwidG9kbzpFbWl0WVVWXCIpO1xuICAgICAgICBlICYmICgoYi5KYiA9IFhkKSwgZCAmJiBBYSgpKTtcbiAgICAgIH1cbiAgICAgIGlmIChkICYmICFqYykge1xuICAgICAgICBmb3IgKGEgPSAwOyAyNTYgPiBhOyArK2EpXG4gICAgICAgICAgKFlkW2FdID0gKDg5ODU4ICogKGEgLSAxMjgpICsgQmEpID4+IFdhKSxcbiAgICAgICAgICAgIChaZFthXSA9IC0yMjAxNCAqIChhIC0gMTI4KSArIEJhKSxcbiAgICAgICAgICAgICgkZFthXSA9IC00NTc3MyAqIChhIC0gMTI4KSksXG4gICAgICAgICAgICAoYWVbYV0gPSAoMTEzNjE4ICogKGEgLSAxMjgpICsgQmEpID4+IFdhKTtcbiAgICAgICAgZm9yIChhID0gdGE7IGEgPCBFYjsgKythKVxuICAgICAgICAgIChiID0gKDc2MjgzICogKGEgLSAxNikgKyBCYSkgPj4gV2EpLFxuICAgICAgICAgICAgKGJlW2EgLSB0YV0gPSBnYShiLCAyNTUpKSxcbiAgICAgICAgICAgIChjZVthIC0gdGFdID0gZ2EoKGIgKyA4KSA+PiA0LCAxNSkpO1xuICAgICAgICBqYyA9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZnVuY3Rpb24ga2MoYSkge1xuICAgICAgdmFyIGIgPSBhLm1hLFxuICAgICAgICBjID0gYS5VLFxuICAgICAgICBkID0gYS5UO1xuICAgICAgeCghKGEua2EgJiAxKSk7XG4gICAgICBpZiAoMCA+PSBjIHx8IDAgPj0gZCkgcmV0dXJuIDA7XG4gICAgICBjID0gYi5JYihhLCBiKTtcbiAgICAgIG51bGwgIT0gYi5KYiAmJiBiLkpiKGEsIGIsIGMpO1xuICAgICAgYi5EYyArPSBjO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxjKGEpIHtcbiAgICAgIGEubWEubWVtb3J5ID0gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWMoYSwgYiwgYywgZCkge1xuICAgICAgaWYgKDQ3ICE9IEQoYSwgOCkpIHJldHVybiAwO1xuICAgICAgYlswXSA9IEQoYSwgMTQpICsgMTtcbiAgICAgIGNbMF0gPSBEKGEsIDE0KSArIDE7XG4gICAgICBkWzBdID0gRChhLCAxKTtcbiAgICAgIHJldHVybiAwICE9IEQoYSwgMykgPyAwIDogIWEuaDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaWIoYSwgYikge1xuICAgICAgaWYgKDQgPiBhKSByZXR1cm4gYSArIDE7XG4gICAgICB2YXIgYyA9IChhIC0gMikgPj4gMTtcbiAgICAgIHJldHVybiAoKDIgKyAoYSAmIDEpKSA8PCBjKSArIEQoYiwgYykgKyAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBuYyhhLCBiKSB7XG4gICAgICBpZiAoMTIwIDwgYikgcmV0dXJuIGIgLSAxMjA7XG4gICAgICB2YXIgYyA9IGRlW2IgLSAxXSxcbiAgICAgICAgYyA9IChjID4+IDQpICogYSArICg4IC0gKGMgJiAxNSkpO1xuICAgICAgcmV0dXJuIDEgPD0gYyA/IGMgOiAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1YShhLCBiLCBjKSB7XG4gICAgICB2YXIgZCA9IHBiKGMpO1xuICAgICAgYiArPSBkICYgMjU1O1xuICAgICAgdmFyIGUgPSBhW2JdLmcgLSA4O1xuICAgICAgMCA8IGUgJiZcbiAgICAgICAgKHFiKGMsIGMudSArIDgpLFxuICAgICAgICAoZCA9IHBiKGMpKSxcbiAgICAgICAgKGIgKz0gYVtiXS52YWx1ZSksXG4gICAgICAgIChiICs9IGQgJiAoKDEgPDwgZSkgLSAxKSkpO1xuICAgICAgcWIoYywgYy51ICsgYVtiXS5nKTtcbiAgICAgIHJldHVybiBhW2JdLnZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1YihhLCBiLCBjKSB7XG4gICAgICBjLmcgKz0gYS5nO1xuICAgICAgYy52YWx1ZSArPSAoYS52YWx1ZSA8PCBiKSA+Pj4gMDtcbiAgICAgIHgoOCA+PSBjLmcpO1xuICAgICAgcmV0dXJuIGEuZztcbiAgICB9XG4gICAgZnVuY3Rpb24gaGEoYSwgYiwgYykge1xuICAgICAgdmFyIGQgPSBhLnhjO1xuICAgICAgYiA9IDAgPT0gZCA/IDAgOiBhLnZjW2EubWQgKiAoYyA+PiBkKSArIChiID4+IGQpXTtcbiAgICAgIHgoYiA8IGEuV2IpO1xuICAgICAgcmV0dXJuIGEuWWFbYl07XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9jKGEsIGIsIGMsIGQpIHtcbiAgICAgIHZhciBlID0gYS5hYixcbiAgICAgICAgZiA9IGEuYyAqIGIsXG4gICAgICAgIGcgPSBhLkM7XG4gICAgICBiID0gZyArIGI7XG4gICAgICB2YXIgaCA9IGMsXG4gICAgICAgIGsgPSBkO1xuICAgICAgZCA9IGEuVGE7XG4gICAgICBmb3IgKGMgPSBhLlVhOyAwIDwgZS0tOyApIHtcbiAgICAgICAgdmFyIGwgPSBhLmdjW2VdLFxuICAgICAgICAgIG0gPSBnLFxuICAgICAgICAgIG4gPSBiLFxuICAgICAgICAgIHIgPSBoLFxuICAgICAgICAgIHEgPSBrLFxuICAgICAgICAgIGsgPSBkLFxuICAgICAgICAgIGggPSBjLFxuICAgICAgICAgIHQgPSBsLkVhO1xuICAgICAgICB4KG0gPCBuKTtcbiAgICAgICAgeChuIDw9IGwubmMpO1xuICAgICAgICBzd2l0Y2ggKGwuaGMpIHtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBwYyhyLCBxLCAobiAtIG0pICogdCwgaywgaCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB2YXIgdiA9IGwsXG4gICAgICAgICAgICAgIHAgPSBtLFxuICAgICAgICAgICAgICB1ID0gbixcbiAgICAgICAgICAgICAgdyA9IGssXG4gICAgICAgICAgICAgIHkgPSBoLFxuICAgICAgICAgICAgICBBID0gdi5FYTtcbiAgICAgICAgICAgIDAgPT0gcCAmJlxuICAgICAgICAgICAgICAoZWUociwgcSwgbnVsbCwgbnVsbCwgMSwgdywgeSksXG4gICAgICAgICAgICAgIGNjKHIsIHEgKyAxLCAwLCAwLCBBIC0gMSwgdywgeSArIDEpLFxuICAgICAgICAgICAgICAocSArPSBBKSxcbiAgICAgICAgICAgICAgKHkgKz0gQSksXG4gICAgICAgICAgICAgICsrcCk7XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICB2YXIgRSA9IDEgPDwgdi5iLFxuICAgICAgICAgICAgICAgIEIgPSBFIC0gMSxcbiAgICAgICAgICAgICAgICBDID0geGEoQSwgdi5iKSxcbiAgICAgICAgICAgICAgICBOID0gdi5LLFxuICAgICAgICAgICAgICAgIHYgPSB2LncgKyAocCA+PiB2LmIpICogQztcbiAgICAgICAgICAgICAgcCA8IHU7XG5cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB2YXIgeiA9IE4sXG4gICAgICAgICAgICAgICAgUSA9IHYsXG4gICAgICAgICAgICAgICAgUyA9IDE7XG4gICAgICAgICAgICAgIGZvciAoZmUociwgcSwgdywgeSAtIEEsIDEsIHcsIHkpOyBTIDwgQTsgKSB7XG4gICAgICAgICAgICAgICAgdmFyIEsgPSBxY1soeltRKytdID4+IDgpICYgMTVdLFxuICAgICAgICAgICAgICAgICAgRCA9IChTICYgfkIpICsgRTtcbiAgICAgICAgICAgICAgICBEID4gQSAmJiAoRCA9IEEpO1xuICAgICAgICAgICAgICAgIEsociwgcSArICtTLCB3LCB5ICsgUyAtIEEsIEQgLSBTLCB3LCB5ICsgUyk7XG4gICAgICAgICAgICAgICAgUyA9IEQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcSArPSBBO1xuICAgICAgICAgICAgICB5ICs9IEE7XG4gICAgICAgICAgICAgICsrcDtcbiAgICAgICAgICAgICAgcCAmIEIgfHwgKHYgKz0gQyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuICE9IGwubmMgJiYgSShrLCBoIC0gdCwgaywgaCArIChuIC0gbSAtIDEpICogdCwgdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0ID0gcjtcbiAgICAgICAgICAgIHUgPSBxO1xuICAgICAgICAgICAgciA9IGwuRWE7XG4gICAgICAgICAgICBxID0gMSA8PCBsLmI7XG4gICAgICAgICAgICB3ID0gcSAtIDE7XG4gICAgICAgICAgICB5ID0gciAmIH53O1xuICAgICAgICAgICAgQSA9IHIgLSB5O1xuICAgICAgICAgICAgcCA9IHhhKHIsIGwuYik7XG4gICAgICAgICAgICBFID0gbC5LO1xuICAgICAgICAgICAgZm9yIChsID0gbC53ICsgKG0gPj4gbC5iKSAqIHA7IG0gPCBuOyApIHtcbiAgICAgICAgICAgICAgQiA9IEU7XG4gICAgICAgICAgICAgIEMgPSBsO1xuICAgICAgICAgICAgICBOID0gbmV3IEpkKCk7XG4gICAgICAgICAgICAgIHYgPSB1ICsgeTtcbiAgICAgICAgICAgICAgZm9yICh6ID0gdSArIHI7IHUgPCB2OyApXG4gICAgICAgICAgICAgICAgZGMoQltDKytdLCBOKSwgRmIoTiwgdCwgdSwgcSwgaywgaCksICh1ICs9IHEpLCAoaCArPSBxKTtcbiAgICAgICAgICAgICAgdSA8IHogJiZcbiAgICAgICAgICAgICAgICAoZGMoQltDKytdLCBOKSwgRmIoTiwgdCwgdSwgQSwgaywgaCksICh1ICs9IEEpLCAoaCArPSBBKSk7XG4gICAgICAgICAgICAgICsrbTtcbiAgICAgICAgICAgICAgbSAmIHcgfHwgKGwgKz0gcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBpZiAociA9PSBrICYmIHEgPT0gaCAmJiAwIDwgbC5iKSB7XG4gICAgICAgICAgICAgIHkgPSAobiAtIG0pICogeGEobC5FYSwgbC5iKTtcbiAgICAgICAgICAgICAgdCA9IGggKyAobiAtIG0pICogdCAtIHk7XG4gICAgICAgICAgICAgIHUgPSBrO1xuICAgICAgICAgICAgICByID0gdDtcbiAgICAgICAgICAgICAgcSA9IGs7XG4gICAgICAgICAgICAgIHcgPSBoO1xuICAgICAgICAgICAgICBBID0geTtcbiAgICAgICAgICAgICAgcCA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHkgPSBBIC0gMTsgMCA8PSB5OyAtLXkpIHBbeV0gPSBxW3cgKyB5XTtcbiAgICAgICAgICAgICAgZm9yICh5ID0gQSAtIDE7IDAgPD0geTsgLS15KSB1W3IgKyB5XSA9IHBbeV07XG4gICAgICAgICAgICAgIHJjKGwsIG0sIG4sIGssIHQsIGssIGgpO1xuICAgICAgICAgICAgfSBlbHNlIHJjKGwsIG0sIG4sIHIsIHEsIGssIGgpO1xuICAgICAgICB9XG4gICAgICAgIGggPSBkO1xuICAgICAgICBrID0gYztcbiAgICAgIH1cbiAgICAgIGsgIT0gYyAmJiBJKGQsIGMsIGgsIGssIGYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZShhLCBiKSB7XG4gICAgICB2YXIgYyA9IGEuVixcbiAgICAgICAgZCA9IGEuQmEgKyBhLmMgKiBhLkMsXG4gICAgICAgIGUgPSBiIC0gYS5DO1xuICAgICAgeChiIDw9IGEubC5vKTtcbiAgICAgIHgoMTYgPj0gZSk7XG4gICAgICBpZiAoMCA8IGUpIHtcbiAgICAgICAgdmFyIGYgPSBhLmwsXG4gICAgICAgICAgZyA9IGEuVGEsXG4gICAgICAgICAgaCA9IGEuVWEsXG4gICAgICAgICAgayA9IGYud2lkdGg7XG4gICAgICAgIG9jKGEsIGUsIGMsIGQpO1xuICAgICAgICBoID0gW2hdO1xuICAgICAgICBjID0gYS5DO1xuICAgICAgICBkID0gYjtcbiAgICAgICAgZSA9IGg7XG4gICAgICAgIHgoYyA8IGQpO1xuICAgICAgICB4KGYudiA8IGYudmEpO1xuICAgICAgICBkID4gZi5vICYmIChkID0gZi5vKTtcbiAgICAgICAgaWYgKGMgPCBmLmopIHtcbiAgICAgICAgICB2YXIgbCA9IGYuaiAtIGMsXG4gICAgICAgICAgICBjID0gZi5qO1xuICAgICAgICAgIGVbMF0gKz0gbCAqIGs7XG4gICAgICAgIH1cbiAgICAgICAgYyA+PSBkXG4gICAgICAgICAgPyAoYyA9IDApXG4gICAgICAgICAgOiAoKGVbMF0gKz0gNCAqIGYudiksXG4gICAgICAgICAgICAoZi5rYSA9IGMgLSBmLmopLFxuICAgICAgICAgICAgKGYuVSA9IGYudmEgLSBmLnYpLFxuICAgICAgICAgICAgKGYuVCA9IGQgLSBjKSxcbiAgICAgICAgICAgIChjID0gMSkpO1xuICAgICAgICBpZiAoYykge1xuICAgICAgICAgIGggPSBoWzBdO1xuICAgICAgICAgIGMgPSBhLmNhO1xuICAgICAgICAgIGlmICgxMSA+IGMuUykge1xuICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgdmFyIG0gPSBjLmYuUkdCQSxcbiAgICAgICAgICAgICAgICBkID0gYy5TLFxuICAgICAgICAgICAgICAgIGUgPSBmLlUsXG4gICAgICAgICAgICAgICAgZiA9IGYuVCxcbiAgICAgICAgICAgICAgICBsID0gbS5lYixcbiAgICAgICAgICAgICAgICBuID0gbS5BLFxuICAgICAgICAgICAgICAgIHIgPSBmLFxuICAgICAgICAgICAgICAgIG0gPSBtLmZiICsgYS5NYSAqIG0uQTtcbiAgICAgICAgICAgICAgMCA8IHItLTtcblxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHZhciBxID0gZyxcbiAgICAgICAgICAgICAgICB0ID0gaCxcbiAgICAgICAgICAgICAgICB2ID0gZSxcbiAgICAgICAgICAgICAgICBwID0gbCxcbiAgICAgICAgICAgICAgICB1ID0gbTtcbiAgICAgICAgICAgICAgc3dpdGNoIChkKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDYTpcbiAgICAgICAgICAgICAgICAgIHNjKHEsIHQsIHYsIHAsIHUpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBVYTpcbiAgICAgICAgICAgICAgICAgIEdiKHEsIHQsIHYsIHAsIHUpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB6YjpcbiAgICAgICAgICAgICAgICAgIEdiKHEsIHQsIHYsIHAsIHUpO1xuICAgICAgICAgICAgICAgICAgemEocCwgdSwgMCwgdiwgMSwgMCk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRjOlxuICAgICAgICAgICAgICAgICAgdWMocSwgdCwgdiwgcCwgdSk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFZhOlxuICAgICAgICAgICAgICAgICAgZmIocSwgdCwgdiwgcCwgdSwgMSk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEFiOlxuICAgICAgICAgICAgICAgICAgZmIocSwgdCwgdiwgcCwgdSwgMSk7XG4gICAgICAgICAgICAgICAgICB6YShwLCB1LCAwLCB2LCAxLCAwKTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgeWE6XG4gICAgICAgICAgICAgICAgICBmYihxLCB0LCB2LCBwLCB1LCAwKTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgSmE6XG4gICAgICAgICAgICAgICAgICBmYihxLCB0LCB2LCBwLCB1LCAwKTtcbiAgICAgICAgICAgICAgICAgIHphKHAsIHUsIDEsIHYsIDEsIDApO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEYjpcbiAgICAgICAgICAgICAgICAgIEhiKHEsIHQsIHYsIHAsIHUpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBCYjpcbiAgICAgICAgICAgICAgICAgIEhiKHEsIHQsIHYsIHAsIHUpO1xuICAgICAgICAgICAgICAgICAgdmMocCwgdSwgdiwgMSwgMCk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHdjOlxuICAgICAgICAgICAgICAgICAgeGMocSwgdCwgdiwgcCwgdSk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgeCgwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBoICs9IGs7XG4gICAgICAgICAgICAgIG0gKz0gbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGEuTWEgKz0gZjtcbiAgICAgICAgICB9IGVsc2UgYWxlcnQoXCJ0b2RvOkVtaXRSZXNjYWxlZFJvd3NZVVZBXCIpO1xuICAgICAgICAgIHgoYS5NYSA8PSBjLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGEuQyA9IGI7XG4gICAgICB4KGEuQyA8PSBhLmkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB5YyhhKSB7XG4gICAgICB2YXIgYjtcbiAgICAgIGlmICgwIDwgYS51YSkgcmV0dXJuIDA7XG4gICAgICBmb3IgKGIgPSAwOyBiIDwgYS5XYjsgKytiKSB7XG4gICAgICAgIHZhciBjID0gYS5ZYVtiXS5HLFxuICAgICAgICAgIGQgPSBhLllhW2JdLkg7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAwIDwgY1sxXVtkWzFdICsgMF0uZyB8fFxuICAgICAgICAgIDAgPCBjWzJdW2RbMl0gKyAwXS5nIHx8XG4gICAgICAgICAgMCA8IGNbM11bZFszXSArIDBdLmdcbiAgICAgICAgKVxuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHpjKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgIGlmICgwICE9IGEuWikge1xuICAgICAgICB2YXIgZyA9IGEucWQsXG4gICAgICAgICAgaCA9IGEucmQ7XG4gICAgICAgIGZvciAoeChudWxsICE9IGlhW2EuWl0pOyBiIDwgYzsgKytiKVxuICAgICAgICAgIGlhW2EuWl0oZywgaCwgZCwgZSwgZCwgZSwgZiksIChnID0gZCksIChoID0gZSksIChlICs9IGYpO1xuICAgICAgICBhLnFkID0gZztcbiAgICAgICAgYS5yZCA9IGg7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIEliKGEsIGIpIHtcbiAgICAgIHZhciBjID0gYS5sLm1hLFxuICAgICAgICBkID0gMCA9PSBjLlogfHwgMSA9PSBjLlogPyBhLmwuaiA6IGEuQyxcbiAgICAgICAgZCA9IGEuQyA8IGQgPyBkIDogYS5DO1xuICAgICAgeChiIDw9IGEubC5vKTtcbiAgICAgIGlmIChiID4gZCkge1xuICAgICAgICB2YXIgZSA9IGEubC53aWR0aCxcbiAgICAgICAgICBmID0gYy5jYSxcbiAgICAgICAgICBnID0gYy50YiArIGUgKiBkLFxuICAgICAgICAgIGggPSBhLlYsXG4gICAgICAgICAgayA9IGEuQmEgKyBhLmMgKiBkLFxuICAgICAgICAgIGwgPSBhLmdjO1xuICAgICAgICB4KDEgPT0gYS5hYik7XG4gICAgICAgIHgoMyA9PSBsWzBdLmhjKTtcbiAgICAgICAgaGUobFswXSwgZCwgYiwgaCwgaywgZiwgZyk7XG4gICAgICAgIHpjKGMsIGQsIGIsIGYsIGcsIGUpO1xuICAgICAgfVxuICAgICAgYS5DID0gYS5NYSA9IGI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEpiKGEsIGIsIGMsIGQsIGUsIGYsIGcpIHtcbiAgICAgIHZhciBoID0gYS4kIC8gZCxcbiAgICAgICAgayA9IGEuJCAlIGQsXG4gICAgICAgIGwgPSBhLm0sXG4gICAgICAgIG0gPSBhLnMsXG4gICAgICAgIG4gPSBjICsgYS4kLFxuICAgICAgICByID0gbjtcbiAgICAgIGUgPSBjICsgZCAqIGU7XG4gICAgICB2YXIgcSA9IGMgKyBkICogZixcbiAgICAgICAgdCA9IDI4MCArIG0udWEsXG4gICAgICAgIHYgPSBhLlBiID8gaCA6IDE2Nzc3MjE2LFxuICAgICAgICBwID0gMCA8IG0udWEgPyBtLldhIDogbnVsbCxcbiAgICAgICAgdSA9IG0ud2MsXG4gICAgICAgIHcgPSBuIDwgcSA/IGhhKG0sIGssIGgpIDogbnVsbDtcbiAgICAgIHgoYS5DIDwgZik7XG4gICAgICB4KHEgPD0gZSk7XG4gICAgICB2YXIgeSA9ICExO1xuICAgICAgYTogZm9yICg7Oykge1xuICAgICAgICBmb3IgKDsgeSB8fCBuIDwgcTsgKSB7XG4gICAgICAgICAgdmFyIEEgPSAwO1xuICAgICAgICAgIGlmIChoID49IHYpIHtcbiAgICAgICAgICAgIHZhciB2ID0gYSxcbiAgICAgICAgICAgICAgRSA9IG4gLSBjO1xuICAgICAgICAgICAgeCh2LlBiKTtcbiAgICAgICAgICAgIHYud2QgPSB2Lm07XG4gICAgICAgICAgICB2LnhkID0gRTtcbiAgICAgICAgICAgIDAgPCB2LnMudWEgJiYgJGIodi5zLldhLCB2LnMudmIpO1xuICAgICAgICAgICAgdiA9IGggKyBpZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgayAmIHUgfHwgKHcgPSBoYShtLCBrLCBoKSk7XG4gICAgICAgICAgeChudWxsICE9IHcpO1xuICAgICAgICAgIHcuUWIgJiYgKChiW25dID0gdy5xYiksICh5ID0gITApKTtcbiAgICAgICAgICBpZiAoIXkpXG4gICAgICAgICAgICBpZiAoKFNhKGwpLCB3LmpjKSkge1xuICAgICAgICAgICAgICB2YXIgQSA9IGwsXG4gICAgICAgICAgICAgICAgRSA9IGIsXG4gICAgICAgICAgICAgICAgQiA9IG4sXG4gICAgICAgICAgICAgICAgQyA9IHcucGRbcGIoQSkgJiAoeGIgLSAxKV07XG4gICAgICAgICAgICAgIHgody5qYyk7XG4gICAgICAgICAgICAgIDI1NiA+IEMuZ1xuICAgICAgICAgICAgICAgID8gKHFiKEEsIEEudSArIEMuZyksIChFW0JdID0gQy52YWx1ZSksIChBID0gMCkpXG4gICAgICAgICAgICAgICAgOiAocWIoQSwgQS51ICsgQy5nIC0gMjU2KSwgeCgyNTYgPD0gQy52YWx1ZSksIChBID0gQy52YWx1ZSkpO1xuICAgICAgICAgICAgICAwID09IEEgJiYgKHkgPSAhMCk7XG4gICAgICAgICAgICB9IGVsc2UgQSA9IHVhKHcuR1swXSwgdy5IWzBdLCBsKTtcbiAgICAgICAgICBpZiAobC5oKSBicmVhaztcbiAgICAgICAgICBpZiAoeSB8fCAyNTYgPiBBKSB7XG4gICAgICAgICAgICBpZiAoIXkpXG4gICAgICAgICAgICAgIGlmICh3Lm5kKSBiW25dID0gKHcucWIgfCAoQSA8PCA4KSkgPj4+IDA7XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFNhKGwpO1xuICAgICAgICAgICAgICAgIHkgPSB1YSh3LkdbMV0sIHcuSFsxXSwgbCk7XG4gICAgICAgICAgICAgICAgU2EobCk7XG4gICAgICAgICAgICAgICAgRSA9IHVhKHcuR1syXSwgdy5IWzJdLCBsKTtcbiAgICAgICAgICAgICAgICBCID0gdWEody5HWzNdLCB3LkhbM10sIGwpO1xuICAgICAgICAgICAgICAgIGlmIChsLmgpIGJyZWFrO1xuICAgICAgICAgICAgICAgIGJbbl0gPSAoKEIgPDwgMjQpIHwgKHkgPDwgMTYpIHwgKEEgPDwgOCkgfCBFKSA+Pj4gMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgeSA9ICExO1xuICAgICAgICAgICAgKytuO1xuICAgICAgICAgICAgKytrO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBrID49IGQgJiZcbiAgICAgICAgICAgICAgKChrID0gMCksXG4gICAgICAgICAgICAgICsraCxcbiAgICAgICAgICAgICAgbnVsbCAhPSBnICYmIGggPD0gZiAmJiAhKGggJSAxNikgJiYgZyhhLCBoKSxcbiAgICAgICAgICAgICAgbnVsbCAhPSBwKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBmb3IgKDsgciA8IG47IClcbiAgICAgICAgICAgICAgICAoQSA9IGJbcisrXSksXG4gICAgICAgICAgICAgICAgICAocC5YWygoNTA2ODMyODI5ICogQSkgJiA0Mjk0OTY3Mjk1KSA+Pj4gcC5NYl0gPSBBKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKDI4MCA+IEEpIHtcbiAgICAgICAgICAgIEEgPSBpYihBIC0gMjU2LCBsKTtcbiAgICAgICAgICAgIEUgPSB1YSh3LkdbNF0sIHcuSFs0XSwgbCk7XG4gICAgICAgICAgICBTYShsKTtcbiAgICAgICAgICAgIEUgPSBpYihFLCBsKTtcbiAgICAgICAgICAgIEUgPSBuYyhkLCBFKTtcbiAgICAgICAgICAgIGlmIChsLmgpIGJyZWFrO1xuICAgICAgICAgICAgaWYgKG4gLSBjIDwgRSB8fCBlIC0gbiA8IEEpIGJyZWFrIGE7XG4gICAgICAgICAgICBlbHNlIGZvciAoQiA9IDA7IEIgPCBBOyArK0IpIGJbbiArIEJdID0gYltuICsgQiAtIEVdO1xuICAgICAgICAgICAgbiArPSBBO1xuICAgICAgICAgICAgZm9yIChrICs9IEE7IGsgPj0gZDsgKVxuICAgICAgICAgICAgICAoayAtPSBkKSwgKytoLCBudWxsICE9IGcgJiYgaCA8PSBmICYmICEoaCAlIDE2KSAmJiBnKGEsIGgpO1xuICAgICAgICAgICAgeChuIDw9IGUpO1xuICAgICAgICAgICAgayAmIHUgJiYgKHcgPSBoYShtLCBrLCBoKSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBwKVxuICAgICAgICAgICAgICBmb3IgKDsgciA8IG47IClcbiAgICAgICAgICAgICAgICAoQSA9IGJbcisrXSksXG4gICAgICAgICAgICAgICAgICAocC5YWygoNTA2ODMyODI5ICogQSkgJiA0Mjk0OTY3Mjk1KSA+Pj4gcC5NYl0gPSBBKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEEgPCB0KSB7XG4gICAgICAgICAgICB5ID0gQSAtIDI4MDtcbiAgICAgICAgICAgIGZvciAoeChudWxsICE9IHApOyByIDwgbjsgKVxuICAgICAgICAgICAgICAoQSA9IGJbcisrXSksIChwLlhbKCg1MDY4MzI4MjkgKiBBKSAmIDQyOTQ5NjcyOTUpID4+PiBwLk1iXSA9IEEpO1xuICAgICAgICAgICAgQSA9IG47XG4gICAgICAgICAgICBFID0gcDtcbiAgICAgICAgICAgIHgoISh5ID4+PiBFLlhhKSk7XG4gICAgICAgICAgICBiW0FdID0gRS5YW3ldO1xuICAgICAgICAgICAgeSA9ICEwO1xuICAgICAgICAgIH0gZWxzZSBicmVhayBhO1xuICAgICAgICAgIHkgfHwgeChsLmggPT0gZGIobCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhLlBiICYmIGwuaCAmJiBuIDwgZSlcbiAgICAgICAgICB4KGEubS5oKSxcbiAgICAgICAgICAgIChhLmEgPSA1KSxcbiAgICAgICAgICAgIChhLm0gPSBhLndkKSxcbiAgICAgICAgICAgIChhLiQgPSBhLnhkKSxcbiAgICAgICAgICAgIDAgPCBhLnMudWEgJiYgJGIoYS5zLnZiLCBhLnMuV2EpO1xuICAgICAgICBlbHNlIGlmIChsLmgpIGJyZWFrIGE7XG4gICAgICAgIGVsc2UgbnVsbCAhPSBnICYmIGcoYSwgaCA+IGYgPyBmIDogaCksIChhLmEgPSAwKSwgKGEuJCA9IG4gLSBjKTtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICAgICBhLmEgPSAzO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEFjKGEpIHtcbiAgICAgIHgobnVsbCAhPSBhKTtcbiAgICAgIGEudmMgPSBudWxsO1xuICAgICAgYS55YyA9IG51bGw7XG4gICAgICBhLllhID0gbnVsbDtcbiAgICAgIHZhciBiID0gYS5XYTtcbiAgICAgIG51bGwgIT0gYiAmJiAoYi5YID0gbnVsbCk7XG4gICAgICBhLnZiID0gbnVsbDtcbiAgICAgIHgobnVsbCAhPSBhKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQmMoKSB7XG4gICAgICB2YXIgYSA9IG5ldyBqZSgpO1xuICAgICAgaWYgKG51bGwgPT0gYSkgcmV0dXJuIG51bGw7XG4gICAgICBhLmEgPSAwO1xuICAgICAgYS54YiA9IENjO1xuICAgICAgZ2IoXCJQcmVkaWN0b3JcIiwgXCJWUDhMUHJlZGljdG9yc1wiKTtcbiAgICAgIGdiKFwiUHJlZGljdG9yXCIsIFwiVlA4TFByZWRpY3RvcnNfQ1wiKTtcbiAgICAgIGdiKFwiUHJlZGljdG9yQWRkXCIsIFwiVlA4TFByZWRpY3RvcnNBZGRcIik7XG4gICAgICBnYihcIlByZWRpY3RvckFkZFwiLCBcIlZQOExQcmVkaWN0b3JzQWRkX0NcIik7XG4gICAgICBwYyA9IEtkO1xuICAgICAgRmIgPSBMZDtcbiAgICAgIHNjID0gTWQ7XG4gICAgICBHYiA9IE5kO1xuICAgICAgSGIgPSBPZDtcbiAgICAgIHhjID0gUGQ7XG4gICAgICB1YyA9IFFkO1xuICAgICAgc2VsZi5WUDhMTWFwQ29sb3IzMmIgPSBrZTtcbiAgICAgIHNlbGYuVlA4TE1hcENvbG9yOGIgPSBsZTtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICBmdW5jdGlvbiByYihhLCBiLCBjLCBkLCBlKSB7XG4gICAgICB2YXIgZiA9IDEsXG4gICAgICAgIGcgPSBbYV0sXG4gICAgICAgIGggPSBbYl0sXG4gICAgICAgIGsgPSBkLm0sXG4gICAgICAgIGwgPSBkLnMsXG4gICAgICAgIG0gPSBudWxsLFxuICAgICAgICBuID0gMDtcbiAgICAgIGE6IGZvciAoOzspIHtcbiAgICAgICAgaWYgKGMpXG4gICAgICAgICAgZm9yICg7IGYgJiYgRChrLCAxKTsgKSB7XG4gICAgICAgICAgICB2YXIgciA9IGcsXG4gICAgICAgICAgICAgIHEgPSBoLFxuICAgICAgICAgICAgICB0ID0gZCxcbiAgICAgICAgICAgICAgdiA9IDEsXG4gICAgICAgICAgICAgIHAgPSB0Lm0sXG4gICAgICAgICAgICAgIHUgPSB0LmdjW3QuYWJdLFxuICAgICAgICAgICAgICB3ID0gRChwLCAyKTtcbiAgICAgICAgICAgIGlmICh0Lk9jICYgKDEgPDwgdykpIGYgPSAwO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHQuT2MgfD0gMSA8PCB3O1xuICAgICAgICAgICAgICB1LmhjID0gdztcbiAgICAgICAgICAgICAgdS5FYSA9IHJbMF07XG4gICAgICAgICAgICAgIHUubmMgPSBxWzBdO1xuICAgICAgICAgICAgICB1LksgPSBbbnVsbF07XG4gICAgICAgICAgICAgICsrdC5hYjtcbiAgICAgICAgICAgICAgeCg0ID49IHQuYWIpO1xuICAgICAgICAgICAgICBzd2l0Y2ggKHcpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgdS5iID0gRChwLCAzKSArIDI7XG4gICAgICAgICAgICAgICAgICB2ID0gcmIoeGEodS5FYSwgdS5iKSwgeGEodS5uYywgdS5iKSwgMCwgdCwgdS5LKTtcbiAgICAgICAgICAgICAgICAgIHUuSyA9IHUuS1swXTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgIHZhciB5ID0gRChwLCA4KSArIDEsXG4gICAgICAgICAgICAgICAgICAgIEEgPSAxNiA8IHkgPyAwIDogNCA8IHkgPyAxIDogMiA8IHkgPyAyIDogMztcbiAgICAgICAgICAgICAgICAgIHJbMF0gPSB4YSh1LkVhLCBBKTtcbiAgICAgICAgICAgICAgICAgIHUuYiA9IEE7XG4gICAgICAgICAgICAgICAgICB2YXIgdiA9IHJiKHksIDEsIDAsIHQsIHUuSyksXG4gICAgICAgICAgICAgICAgICAgIEU7XG4gICAgICAgICAgICAgICAgICBpZiAoKEUgPSB2KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgQixcbiAgICAgICAgICAgICAgICAgICAgICBDID0geSxcbiAgICAgICAgICAgICAgICAgICAgICBOID0gdSxcbiAgICAgICAgICAgICAgICAgICAgICB6ID0gMSA8PCAoOCA+PiBOLmIpLFxuICAgICAgICAgICAgICAgICAgICAgIFEgPSBWKHopO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBRKSBFID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIFMgPSBOLktbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBLID0gTi53O1xuICAgICAgICAgICAgICAgICAgICAgIFFbMF0gPSBOLktbMF1bMF07XG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChCID0gMTsgQiA8IDEgKiBDOyArK0IpIFFbQl0gPSB5YihTW0sgKyBCXSwgUVtCIC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBCIDwgNCAqIHo7ICsrQikgUVtCXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgTi5LWzBdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICBOLktbMF0gPSBRO1xuICAgICAgICAgICAgICAgICAgICAgIEUgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB2ID0gRTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICB4KDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGYgPSB2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgZyA9IGdbMF07XG4gICAgICAgIGggPSBoWzBdO1xuICAgICAgICBpZiAoZiAmJiBEKGssIDEpICYmICgobiA9IEQoaywgNCkpLCAoZiA9IDEgPD0gbiAmJiAxMSA+PSBuKSwgIWYpKSB7XG4gICAgICAgICAgZC5hID0gMztcbiAgICAgICAgICBicmVhayBhO1xuICAgICAgICB9XG4gICAgICAgIHZhciBIO1xuICAgICAgICBpZiAoKEggPSBmKSlcbiAgICAgICAgICBiOiB7XG4gICAgICAgICAgICB2YXIgRiA9IGQsXG4gICAgICAgICAgICAgIEcgPSBnLFxuICAgICAgICAgICAgICBMID0gaCxcbiAgICAgICAgICAgICAgSiA9IG4sXG4gICAgICAgICAgICAgIFQgPSBjLFxuICAgICAgICAgICAgICBEYSxcbiAgICAgICAgICAgICAgYmEsXG4gICAgICAgICAgICAgIFggPSBGLm0sXG4gICAgICAgICAgICAgIFIgPSBGLnMsXG4gICAgICAgICAgICAgIFAgPSBbbnVsbF0sXG4gICAgICAgICAgICAgIFUsXG4gICAgICAgICAgICAgIFcgPSAxLFxuICAgICAgICAgICAgICBhYSA9IDAsXG4gICAgICAgICAgICAgIG5hID0gbWVbSl07XG4gICAgICAgICAgICBjOiBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgIGlmIChUICYmIEQoWCwgMSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2EgPSBEKFgsIDMpICsgMixcbiAgICAgICAgICAgICAgICAgIGdhID0geGEoRywgY2EpLFxuICAgICAgICAgICAgICAgICAga2EgPSB4YShMLCBjYSksXG4gICAgICAgICAgICAgICAgICBxYSA9IGdhICoga2E7XG4gICAgICAgICAgICAgICAgaWYgKCFyYihnYSwga2EsIDAsIEYsIFApKSBicmVhayBjO1xuICAgICAgICAgICAgICAgIFAgPSBQWzBdO1xuICAgICAgICAgICAgICAgIFIueGMgPSBjYTtcbiAgICAgICAgICAgICAgICBmb3IgKERhID0gMDsgRGEgPCBxYTsgKytEYSkge1xuICAgICAgICAgICAgICAgICAgdmFyIGlhID0gKFBbRGFdID4+IDgpICYgNjU1MzU7XG4gICAgICAgICAgICAgICAgICBQW0RhXSA9IGlhO1xuICAgICAgICAgICAgICAgICAgaWEgPj0gVyAmJiAoVyA9IGlhICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChYLmgpIGJyZWFrIGM7XG4gICAgICAgICAgICAgIGZvciAoYmEgPSAwOyA1ID4gYmE7ICsrYmEpIHtcbiAgICAgICAgICAgICAgICB2YXIgWSA9IERjW2JhXTtcbiAgICAgICAgICAgICAgICAhYmEgJiYgMCA8IEogJiYgKFkgKz0gMSA8PCBKKTtcbiAgICAgICAgICAgICAgICBhYSA8IFkgJiYgKGFhID0gWSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIG1hID0gd2EoVyAqIG5hLCBPKTtcbiAgICAgICAgICAgICAgdmFyIHVhID0gVyxcbiAgICAgICAgICAgICAgICB2YSA9IHdhKHVhLCBVYik7XG4gICAgICAgICAgICAgIGlmIChudWxsID09IHZhKSB2YXIgbGEgPSBudWxsO1xuICAgICAgICAgICAgICBlbHNlIHgoNjU1MzYgPj0gdWEpLCAobGEgPSB2YSk7XG4gICAgICAgICAgICAgIHZhciBoYSA9IFYoYWEpO1xuICAgICAgICAgICAgICBpZiAobnVsbCA9PSBsYSB8fCBudWxsID09IGhhIHx8IG51bGwgPT0gbWEpIHtcbiAgICAgICAgICAgICAgICBGLmEgPSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrIGM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIHBhID0gbWE7XG4gICAgICAgICAgICAgIGZvciAoRGEgPSBVID0gMDsgRGEgPCBXOyArK0RhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGphID0gbGFbRGFdLFxuICAgICAgICAgICAgICAgICAgZGEgPSBqYS5HLFxuICAgICAgICAgICAgICAgICAgZWEgPSBqYS5ILFxuICAgICAgICAgICAgICAgICAgRmEgPSAwLFxuICAgICAgICAgICAgICAgICAgcmEgPSAxLFxuICAgICAgICAgICAgICAgICAgSGEgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAoYmEgPSAwOyA1ID4gYmE7ICsrYmEpIHtcbiAgICAgICAgICAgICAgICAgIFkgPSBEY1tiYV07XG4gICAgICAgICAgICAgICAgICBkYVtiYV0gPSBwYTtcbiAgICAgICAgICAgICAgICAgIGVhW2JhXSA9IFU7XG4gICAgICAgICAgICAgICAgICAhYmEgJiYgMCA8IEogJiYgKFkgKz0gMSA8PCBKKTtcbiAgICAgICAgICAgICAgICAgIGQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNhLFxuICAgICAgICAgICAgICAgICAgICAgIHphID0gWSxcbiAgICAgICAgICAgICAgICAgICAgICB0YSA9IEYsXG4gICAgICAgICAgICAgICAgICAgICAgb2EgPSBoYSxcbiAgICAgICAgICAgICAgICAgICAgICBkYiA9IHBhLFxuICAgICAgICAgICAgICAgICAgICAgIGViID0gVSxcbiAgICAgICAgICAgICAgICAgICAgICBJYSA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgS2EgPSB0YS5tLFxuICAgICAgICAgICAgICAgICAgICAgIGZiID0gRChLYSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIE0ob2EsIDAsIDAsIHphKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGdiID0gRChLYSwgMSkgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGIgPSBEKEthLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEphID0gRChLYSwgMCA9PSBoYiA/IDEgOiA4KTtcbiAgICAgICAgICAgICAgICAgICAgICBvYVtKYV0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgIDIgPT0gZ2IgJiYgKChKYSA9IEQoS2EsIDgpKSwgKG9hW0phXSA9IDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgeWEgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBVYSA9IFYoMTkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgVmEgPSBEKEthLCA0KSArIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKDE5IDwgVmEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhLmEgPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFhID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGQ7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGZvciAoc2EgPSAwOyBzYSA8IFZhOyArK3NhKSBVYVtuZVtzYV1dID0gRChLYSwgMyk7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIEJhID0gdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2IgPSB2b2lkIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBXYSA9IHRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWIgPSBVYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIENhID0gemEsXG4gICAgICAgICAgICAgICAgICAgICAgICBYYSA9IG9hLFxuICAgICAgICAgICAgICAgICAgICAgICAgT2EgPSAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgTGEgPSBXYS5tLFxuICAgICAgICAgICAgICAgICAgICAgICAgWWEgPSA4LFxuICAgICAgICAgICAgICAgICAgICAgICAgWmEgPSB3YSgxMjgsIE8pO1xuICAgICAgICAgICAgICAgICAgICAgIGU6IGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghWihaYSwgMCwgNywgaWIsIDE5KSkgYnJlYWsgZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEKExhLCAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2IgPSAyICsgMiAqIEQoTGEsIDMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhID0gMiArIEQoTGEsIGtiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEJhID4gQ2EpIGJyZWFrIGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgQmEgPSBDYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoc2IgPSAwOyBzYiA8IENhICYmIEJhLS07ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBTYShMYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkYSA9IFphWzAgKyAocGIoTGEpICYgMTI3KV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHFiKExhLCBMYS51ICsgJGEuZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqYiA9ICRhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMTYgPiBqYikgKFhhW3NiKytdID0gamIpLCAwICE9IGpiICYmIChZYSA9IGpiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxiID0gMTYgPT0gamIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYiA9IGpiIC0gMTYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYiA9IG9lW2FiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJiID0gRChMYSwgcGVbYWJdKSArIG1iO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYiArIGJiID4gQ2EpIGJyZWFrIGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmIgPSBsYiA/IFlhIDogMDsgMCA8IGJiLS07IClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWGFbc2IrK10gPSBuYjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgT2EgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgT2EgfHwgKFdhLmEgPSAzKTtcbiAgICAgICAgICAgICAgICAgICAgICB5YSA9IE9hO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICh5YSA9IHlhICYmICFLYS5oKSAmJiAoSWEgPSBaKGRiLCBlYiwgOCwgb2EsIHphKSk7XG4gICAgICAgICAgICAgICAgICAgIHlhICYmIDAgIT0gSWEgPyAoQWEgPSBJYSkgOiAoKHRhLmEgPSAzKSwgKEFhID0gMCkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gQWEpIGJyZWFrIGM7XG4gICAgICAgICAgICAgICAgICByYSAmJiAxID09IHFlW2JhXSAmJiAocmEgPSAwID09IHBhW1VdLmcpO1xuICAgICAgICAgICAgICAgICAgRmEgKz0gcGFbVV0uZztcbiAgICAgICAgICAgICAgICAgIFUgKz0gQWE7XG4gICAgICAgICAgICAgICAgICBpZiAoMyA+PSBiYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgUGEgPSBoYVswXSxcbiAgICAgICAgICAgICAgICAgICAgICB0YjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh0YiA9IDE7IHRiIDwgWTsgKyt0YikgaGFbdGJdID4gUGEgJiYgKFBhID0gaGFbdGJdKTtcbiAgICAgICAgICAgICAgICAgICAgSGEgKz0gUGE7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGphLm5kID0gcmE7XG4gICAgICAgICAgICAgICAgamEuUWIgPSAwO1xuICAgICAgICAgICAgICAgIHJhICYmXG4gICAgICAgICAgICAgICAgICAoKGphLnFiID1cbiAgICAgICAgICAgICAgICAgICAgKChkYVszXVtlYVszXSArIDBdLnZhbHVlIDw8IDI0KSB8XG4gICAgICAgICAgICAgICAgICAgICAgKGRhWzFdW2VhWzFdICsgMF0udmFsdWUgPDwgMTYpIHxcbiAgICAgICAgICAgICAgICAgICAgICBkYVsyXVtlYVsyXSArIDBdLnZhbHVlKSA+Pj5cbiAgICAgICAgICAgICAgICAgICAgMCksXG4gICAgICAgICAgICAgICAgICAwID09IEZhICYmXG4gICAgICAgICAgICAgICAgICAgIDI1NiA+IGRhWzBdW2VhWzBdICsgMF0udmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgKChqYS5RYiA9IDEpLCAoamEucWIgKz0gZGFbMF1bZWFbMF0gKyAwXS52YWx1ZSA8PCA4KSkpO1xuICAgICAgICAgICAgICAgIGphLmpjID0gIWphLlFiICYmIDYgPiBIYTtcbiAgICAgICAgICAgICAgICBpZiAoamEuamMpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBHYSxcbiAgICAgICAgICAgICAgICAgICAgRWEgPSBqYTtcbiAgICAgICAgICAgICAgICAgIGZvciAoR2EgPSAwOyBHYSA8IHhiOyArK0dhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBNYSA9IEdhLFxuICAgICAgICAgICAgICAgICAgICAgIE5hID0gRWEucGRbTWFdLFxuICAgICAgICAgICAgICAgICAgICAgIHZiID0gRWEuR1swXVtFYS5IWzBdICsgTWFdO1xuICAgICAgICAgICAgICAgICAgICAyNTYgPD0gdmIudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICA/ICgoTmEuZyA9IHZiLmcgKyAyNTYpLCAoTmEudmFsdWUgPSB2Yi52YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgOiAoKE5hLmcgPSAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChOYS52YWx1ZSA9IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgKE1hID4+PSB1Yih2YiwgOCwgTmEpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChNYSA+Pj0gdWIoRWEuR1sxXVtFYS5IWzFdICsgTWFdLCAxNiwgTmEpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChNYSA+Pj0gdWIoRWEuR1syXVtFYS5IWzJdICsgTWFdLCAwLCBOYSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdWIoRWEuR1szXVtFYS5IWzNdICsgTWFdLCAyNCwgTmEpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgUi52YyA9IFA7XG4gICAgICAgICAgICAgIFIuV2IgPSBXO1xuICAgICAgICAgICAgICBSLllhID0gbGE7XG4gICAgICAgICAgICAgIFIueWMgPSBtYTtcbiAgICAgICAgICAgICAgSCA9IDE7XG4gICAgICAgICAgICAgIGJyZWFrIGI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBIID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIGYgPSBIO1xuICAgICAgICBpZiAoIWYpIHtcbiAgICAgICAgICBkLmEgPSAzO1xuICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDAgPCBuKSB7XG4gICAgICAgICAgaWYgKCgobC51YSA9IDEgPDwgbiksICFaYihsLldhLCBuKSkpIHtcbiAgICAgICAgICAgIGQuYSA9IDE7XG4gICAgICAgICAgICBmID0gMDtcbiAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgbC51YSA9IDA7XG4gICAgICAgIHZhciBRYSA9IGQsXG4gICAgICAgICAgY2IgPSBnLFxuICAgICAgICAgIG9iID0gaCxcbiAgICAgICAgICBSYSA9IFFhLnMsXG4gICAgICAgICAgVGEgPSBSYS54YztcbiAgICAgICAgUWEuYyA9IGNiO1xuICAgICAgICBRYS5pID0gb2I7XG4gICAgICAgIFJhLm1kID0geGEoY2IsIFRhKTtcbiAgICAgICAgUmEud2MgPSAwID09IFRhID8gLTEgOiAoMSA8PCBUYSkgLSAxO1xuICAgICAgICBpZiAoYykge1xuICAgICAgICAgIGQueGIgPSByZTtcbiAgICAgICAgICBicmVhayBhO1xuICAgICAgICB9XG4gICAgICAgIG0gPSBWKGcgKiBoKTtcbiAgICAgICAgaWYgKG51bGwgPT0gbSkge1xuICAgICAgICAgIGQuYSA9IDE7XG4gICAgICAgICAgZiA9IDA7XG4gICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgfVxuICAgICAgICBmID0gKGYgPSBKYihkLCBtLCAwLCBnLCBoLCBoLCBudWxsKSkgJiYgIWsuaDtcbiAgICAgICAgYnJlYWsgYTtcbiAgICAgIH1cbiAgICAgIGZcbiAgICAgICAgPyAobnVsbCAhPSBlID8gKGVbMF0gPSBtKSA6ICh4KG51bGwgPT0gbSksIHgoYykpLCAoZC4kID0gMCksIGMgfHwgQWMobCkpXG4gICAgICAgIDogQWMobCk7XG4gICAgICByZXR1cm4gZjtcbiAgICB9XG4gICAgZnVuY3Rpb24gRWMoYSwgYikge1xuICAgICAgdmFyIGMgPSBhLmMgKiBhLmksXG4gICAgICAgIGQgPSBjICsgYiArIDE2ICogYjtcbiAgICAgIHgoYS5jIDw9IGIpO1xuICAgICAgYS5WID0gVihkKTtcbiAgICAgIGlmIChudWxsID09IGEuVikgcmV0dXJuIChhLlRhID0gbnVsbCksIChhLlVhID0gMCksIChhLmEgPSAxKSwgMDtcbiAgICAgIGEuVGEgPSBhLlY7XG4gICAgICBhLlVhID0gYS5CYSArIGMgKyBiO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNlKGEsIGIpIHtcbiAgICAgIHZhciBjID0gYS5DLFxuICAgICAgICBkID0gYiAtIGMsXG4gICAgICAgIGUgPSBhLlYsXG4gICAgICAgIGYgPSBhLkJhICsgYS5jICogYztcbiAgICAgIGZvciAoeChiIDw9IGEubC5vKTsgMCA8IGQ7ICkge1xuICAgICAgICB2YXIgZyA9IDE2IDwgZCA/IDE2IDogZCxcbiAgICAgICAgICBoID0gYS5sLm1hLFxuICAgICAgICAgIGsgPSBhLmwud2lkdGgsXG4gICAgICAgICAgbCA9IGsgKiBnLFxuICAgICAgICAgIG0gPSBoLmNhLFxuICAgICAgICAgIG4gPSBoLnRiICsgayAqIGMsXG4gICAgICAgICAgciA9IGEuVGEsXG4gICAgICAgICAgcSA9IGEuVWE7XG4gICAgICAgIG9jKGEsIGcsIGUsIGYpO1xuICAgICAgICBGYyhyLCBxLCBtLCBuLCBsKTtcbiAgICAgICAgemMoaCwgYywgYyArIGcsIG0sIG4sIGspO1xuICAgICAgICBkIC09IGc7XG4gICAgICAgIGUgKz0gZyAqIGEuYztcbiAgICAgICAgYyArPSBnO1xuICAgICAgfVxuICAgICAgeChjID09IGIpO1xuICAgICAgYS5DID0gYS5NYSA9IGI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlKGEsIGIpIHtcbiAgICAgIHZhciBjID0gWzBdLFxuICAgICAgICBkID0gWzBdLFxuICAgICAgICBlID0gWzBdO1xuICAgICAgYTogZm9yICg7Oykge1xuICAgICAgICBpZiAobnVsbCA9PSBhKSByZXR1cm4gMDtcbiAgICAgICAgaWYgKG51bGwgPT0gYikgcmV0dXJuIChhLmEgPSAyKSwgMDtcbiAgICAgICAgYS5sID0gYjtcbiAgICAgICAgYS5hID0gMDtcbiAgICAgICAgY2IoYS5tLCBiLmRhdGEsIGIudywgYi5oYSk7XG4gICAgICAgIGlmICghbWMoYS5tLCBjLCBkLCBlKSkge1xuICAgICAgICAgIGEuYSA9IDM7XG4gICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgfVxuICAgICAgICBhLnhiID0gQ2M7XG4gICAgICAgIGIud2lkdGggPSBjWzBdO1xuICAgICAgICBiLmhlaWdodCA9IGRbMF07XG4gICAgICAgIGlmICghcmIoY1swXSwgZFswXSwgMSwgYSwgbnVsbCkpIGJyZWFrIGE7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgeCgwICE9IGEuYSk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdWUoKSB7XG4gICAgICB0aGlzLnViID0gdGhpcy55ZCA9IHRoaXMudGQgPSB0aGlzLlJiID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gdmUoKSB7XG4gICAgICB0aGlzLktkID0gdGhpcy5MZCA9IHRoaXMuVWQgPSB0aGlzLlRkID0gdGhpcy5pID0gdGhpcy5jID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gd2UoKSB7XG4gICAgICB0aGlzLkZiID0gdGhpcy5CYiA9IHRoaXMuQ2IgPSAwO1xuICAgICAgdGhpcy5aYiA9IFYoNCk7XG4gICAgICB0aGlzLkxiID0gVig0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gR2MoKSB7XG4gICAgICB0aGlzLlliID0gd2IoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24geGUoKSB7XG4gICAgICB0aGlzLmpiID0gVigzKTtcbiAgICAgIHRoaXMuV2MgPSBFZChbNCwgOF0sIEdjKTtcbiAgICAgIHRoaXMuWGMgPSBFZChbNCwgMTddLCBHYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHllKCkge1xuICAgICAgdGhpcy5QYyA9IHRoaXMud2IgPSB0aGlzLlRiID0gdGhpcy56ZCA9IDA7XG4gICAgICB0aGlzLnZkID0gbmV3IFYoNCk7XG4gICAgICB0aGlzLm9kID0gbmV3IFYoNCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFhhKCkge1xuICAgICAgdGhpcy5sZCA9IHRoaXMuTGEgPSB0aGlzLmRkID0gdGhpcy50YyA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEhjKCkge1xuICAgICAgdGhpcy5OYSA9IHRoaXMubGEgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6ZSgpIHtcbiAgICAgIHRoaXMuU2MgPSBbMCwgMF07XG4gICAgICB0aGlzLkViID0gWzAsIDBdO1xuICAgICAgdGhpcy5RYyA9IFswLCAwXTtcbiAgICAgIHRoaXMuaWEgPSB0aGlzLmxjID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gS2IoKSB7XG4gICAgICB0aGlzLmFkID0gVigzODQpO1xuICAgICAgdGhpcy5aYSA9IDA7XG4gICAgICB0aGlzLk9iID0gVigxNik7XG4gICAgICB0aGlzLiRiID0gdGhpcy5BZCA9IHRoaXMuaWEgPSB0aGlzLkdjID0gdGhpcy5IYyA9IHRoaXMuRGQgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBBZSgpIHtcbiAgICAgIHRoaXMudWMgPSB0aGlzLk0gPSB0aGlzLk5iID0gMDtcbiAgICAgIHRoaXMud2EgPSBBcnJheShuZXcgWGEoKSk7XG4gICAgICB0aGlzLlkgPSAwO1xuICAgICAgdGhpcy55YSA9IEFycmF5KG5ldyBLYigpKTtcbiAgICAgIHRoaXMuYWEgPSAwO1xuICAgICAgdGhpcy5sID0gbmV3IE9hKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEljKCkge1xuICAgICAgdGhpcy55ID0gVigxNik7XG4gICAgICB0aGlzLmYgPSBWKDgpO1xuICAgICAgdGhpcy5lYSA9IFYoOCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEJlKCkge1xuICAgICAgdGhpcy5jYiA9IHRoaXMuYSA9IDA7XG4gICAgICB0aGlzLnNjID0gXCJcIjtcbiAgICAgIHRoaXMubSA9IG5ldyBXYigpO1xuICAgICAgdGhpcy5PZCA9IG5ldyB1ZSgpO1xuICAgICAgdGhpcy5LYyA9IG5ldyB2ZSgpO1xuICAgICAgdGhpcy5lZCA9IG5ldyB5ZSgpO1xuICAgICAgdGhpcy5RYSA9IG5ldyB3ZSgpO1xuICAgICAgdGhpcy5JYyA9IHRoaXMuJGMgPSB0aGlzLkFhID0gMDtcbiAgICAgIHRoaXMuRCA9IG5ldyBBZSgpO1xuICAgICAgdGhpcy5YYiA9IHRoaXMuVmEgPSB0aGlzLkhiID0gdGhpcy56YiA9IHRoaXMueWIgPSB0aGlzLlViID0gdGhpcy56YSA9IDA7XG4gICAgICB0aGlzLkpjID0gd2EoOCwgV2IpO1xuICAgICAgdGhpcy5pYSA9IDA7XG4gICAgICBuZXcgRigpO1xuICAgICAgdGhpcy5wYiA9IHdhKDQsIHplKTtcbiAgICAgIHRoaXMuUGEgPSBuZXcgeGUoKTtcbiAgICAgIHRoaXMuQmQgPSB0aGlzLmtjID0gMDtcbiAgICAgIHRoaXMuQWMgPSBbXTtcbiAgICAgIHRoaXMuQmMgPSAwO1xuICAgICAgdGhpcy56YyA9IFswLCAwLCAwLCAwXTtcbiAgICAgIHRoaXMuR2QgPSBBcnJheShuZXcgSWMoKSk7XG4gICAgICB0aGlzLkhkID0gMDtcbiAgICAgIHRoaXMucmIgPSBBcnJheShuZXcgSGMoKSk7XG4gICAgICB0aGlzLnNiID0gMDtcbiAgICAgIHRoaXMud2EgPSBBcnJheShuZXcgWGEoKSk7XG4gICAgICB0aGlzLlkgPSAwO1xuICAgICAgdGhpcy5vYyA9IFtdO1xuICAgICAgdGhpcy5wYyA9IDA7XG4gICAgICB0aGlzLnNhID0gW107XG4gICAgICB0aGlzLnRhID0gMDtcbiAgICAgIHRoaXMucWEgPSBbXTtcbiAgICAgIHRoaXMucmEgPSAwO1xuICAgICAgdGhpcy5IYSA9IFtdO1xuICAgICAgdGhpcy5CID0gdGhpcy5SID0gdGhpcy5JYSA9IDA7XG4gICAgICB0aGlzLkVjID0gW107XG4gICAgICB0aGlzLk0gPSB0aGlzLmphID0gdGhpcy5WYiA9IHRoaXMuRmMgPSAwO1xuICAgICAgdGhpcy55YSA9IEFycmF5KG5ldyBLYigpKTtcbiAgICAgIHRoaXMuTCA9IHRoaXMuYWEgPSAwO1xuICAgICAgdGhpcy5nZCA9IEVkKFs0LCAyXSwgWGEpO1xuICAgICAgdGhpcy5nYSA9IG51bGw7XG4gICAgICB0aGlzLkZhID0gW107XG4gICAgICB0aGlzLkNjID0gdGhpcy5xYyA9IHRoaXMuUCA9IDA7XG4gICAgICB0aGlzLkdiID0gW107XG4gICAgICB0aGlzLlVjID0gMDtcbiAgICAgIHRoaXMubWIgPSBbXTtcbiAgICAgIHRoaXMubmIgPSAwO1xuICAgICAgdGhpcy5yYyA9IFtdO1xuICAgICAgdGhpcy5HYSA9IHRoaXMuVmMgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnYShhLCBiKSB7XG4gICAgICByZXR1cm4gMCA+IGEgPyAwIDogYSA+IGIgPyBiIDogYTtcbiAgICB9XG4gICAgZnVuY3Rpb24gT2EoKSB7XG4gICAgICB0aGlzLlQgPSB0aGlzLlUgPSB0aGlzLmthID0gdGhpcy5oZWlnaHQgPSB0aGlzLndpZHRoID0gMDtcbiAgICAgIHRoaXMueSA9IFtdO1xuICAgICAgdGhpcy5mID0gW107XG4gICAgICB0aGlzLmVhID0gW107XG4gICAgICB0aGlzLlJjID0gdGhpcy5mYSA9IHRoaXMuVyA9IHRoaXMuTiA9IHRoaXMuTyA9IDA7XG4gICAgICB0aGlzLm1hID0gXCJ2b2lkXCI7XG4gICAgICB0aGlzLnB1dCA9IFwiVlA4SW9QdXRIb29rXCI7XG4gICAgICB0aGlzLmFjID0gXCJWUDhJb1NldHVwSG9va1wiO1xuICAgICAgdGhpcy5iYyA9IFwiVlA4SW9UZWFyZG93bkhvb2tcIjtcbiAgICAgIHRoaXMuaGEgPSB0aGlzLktiID0gMDtcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5oYiA9IHRoaXMuaWIgPSB0aGlzLmRhID0gdGhpcy5vID0gdGhpcy5qID0gdGhpcy52YSA9IHRoaXMudiA9IHRoaXMuRGEgPSB0aGlzLm9iID0gdGhpcy53ID0gMDtcbiAgICAgIHRoaXMuRiA9IFtdO1xuICAgICAgdGhpcy5KID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ2UoKSB7XG4gICAgICB2YXIgYSA9IG5ldyBCZSgpO1xuICAgICAgbnVsbCAhPSBhICYmXG4gICAgICAgICgoYS5hID0gMCksIChhLnNjID0gXCJPS1wiKSwgKGEuY2IgPSAwKSwgKGEuWGIgPSAwKSwgb2EgfHwgKG9hID0gRGUpKTtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICBmdW5jdGlvbiBUKGEsIGIsIGMpIHtcbiAgICAgIDAgPT0gYS5hICYmICgoYS5hID0gYiksIChhLnNjID0gYyksIChhLmNiID0gMCkpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEpjKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiAzIDw9IGMgJiYgMTU3ID09IGFbYiArIDBdICYmIDEgPT0gYVtiICsgMV0gJiYgNDIgPT0gYVtiICsgMl07XG4gICAgfVxuICAgIGZ1bmN0aW9uIEtjKGEsIGIpIHtcbiAgICAgIGlmIChudWxsID09IGEpIHJldHVybiAwO1xuICAgICAgYS5hID0gMDtcbiAgICAgIGEuc2MgPSBcIk9LXCI7XG4gICAgICBpZiAobnVsbCA9PSBiKSByZXR1cm4gVChhLCAyLCBcIm51bGwgVlA4SW8gcGFzc2VkIHRvIFZQOEdldEhlYWRlcnMoKVwiKTtcbiAgICAgIHZhciBjID0gYi5kYXRhO1xuICAgICAgdmFyIGQgPSBiLnc7XG4gICAgICB2YXIgZSA9IGIuaGE7XG4gICAgICBpZiAoNCA+IGUpIHJldHVybiBUKGEsIDcsIFwiVHJ1bmNhdGVkIGhlYWRlci5cIik7XG4gICAgICB2YXIgZiA9IGNbZCArIDBdIHwgKGNbZCArIDFdIDw8IDgpIHwgKGNbZCArIDJdIDw8IDE2KTtcbiAgICAgIHZhciBnID0gYS5PZDtcbiAgICAgIGcuUmIgPSAhKGYgJiAxKTtcbiAgICAgIGcudGQgPSAoZiA+PiAxKSAmIDc7XG4gICAgICBnLnlkID0gKGYgPj4gNCkgJiAxO1xuICAgICAgZy51YiA9IGYgPj4gNTtcbiAgICAgIGlmICgzIDwgZy50ZCkgcmV0dXJuIFQoYSwgMywgXCJJbmNvcnJlY3Qga2V5ZnJhbWUgcGFyYW1ldGVycy5cIik7XG4gICAgICBpZiAoIWcueWQpIHJldHVybiBUKGEsIDQsIFwiRnJhbWUgbm90IGRpc3BsYXlhYmxlLlwiKTtcbiAgICAgIGQgKz0gMztcbiAgICAgIGUgLT0gMztcbiAgICAgIHZhciBoID0gYS5LYztcbiAgICAgIGlmIChnLlJiKSB7XG4gICAgICAgIGlmICg3ID4gZSkgcmV0dXJuIFQoYSwgNywgXCJjYW5ub3QgcGFyc2UgcGljdHVyZSBoZWFkZXJcIik7XG4gICAgICAgIGlmICghSmMoYywgZCwgZSkpIHJldHVybiBUKGEsIDMsIFwiQmFkIGNvZGUgd29yZFwiKTtcbiAgICAgICAgaC5jID0gKChjW2QgKyA0XSA8PCA4KSB8IGNbZCArIDNdKSAmIDE2MzgzO1xuICAgICAgICBoLlRkID0gY1tkICsgNF0gPj4gNjtcbiAgICAgICAgaC5pID0gKChjW2QgKyA2XSA8PCA4KSB8IGNbZCArIDVdKSAmIDE2MzgzO1xuICAgICAgICBoLlVkID0gY1tkICsgNl0gPj4gNjtcbiAgICAgICAgZCArPSA3O1xuICAgICAgICBlIC09IDc7XG4gICAgICAgIGEuemEgPSAoaC5jICsgMTUpID4+IDQ7XG4gICAgICAgIGEuVWIgPSAoaC5pICsgMTUpID4+IDQ7XG4gICAgICAgIGIud2lkdGggPSBoLmM7XG4gICAgICAgIGIuaGVpZ2h0ID0gaC5pO1xuICAgICAgICBiLkRhID0gMDtcbiAgICAgICAgYi5qID0gMDtcbiAgICAgICAgYi52ID0gMDtcbiAgICAgICAgYi52YSA9IGIud2lkdGg7XG4gICAgICAgIGIubyA9IGIuaGVpZ2h0O1xuICAgICAgICBiLmRhID0gMDtcbiAgICAgICAgYi5pYiA9IGIud2lkdGg7XG4gICAgICAgIGIuaGIgPSBiLmhlaWdodDtcbiAgICAgICAgYi5VID0gYi53aWR0aDtcbiAgICAgICAgYi5UID0gYi5oZWlnaHQ7XG4gICAgICAgIGYgPSBhLlBhO1xuICAgICAgICBNKGYuamIsIDAsIDI1NSwgZi5qYi5sZW5ndGgpO1xuICAgICAgICBmID0gYS5RYTtcbiAgICAgICAgeChudWxsICE9IGYpO1xuICAgICAgICBmLkNiID0gMDtcbiAgICAgICAgZi5CYiA9IDA7XG4gICAgICAgIGYuRmIgPSAxO1xuICAgICAgICBNKGYuWmIsIDAsIDAsIGYuWmIubGVuZ3RoKTtcbiAgICAgICAgTShmLkxiLCAwLCAwLCBmLkxiKTtcbiAgICAgIH1cbiAgICAgIGlmIChnLnViID4gZSkgcmV0dXJuIFQoYSwgNywgXCJiYWQgcGFydGl0aW9uIGxlbmd0aFwiKTtcbiAgICAgIGYgPSBhLm07XG4gICAgICBtYShmLCBjLCBkLCBnLnViKTtcbiAgICAgIGQgKz0gZy51YjtcbiAgICAgIGUgLT0gZy51YjtcbiAgICAgIGcuUmIgJiYgKChoLkxkID0gRyhmKSksIChoLktkID0gRyhmKSkpO1xuICAgICAgaCA9IGEuUWE7XG4gICAgICB2YXIgayA9IGEuUGEsXG4gICAgICAgIGw7XG4gICAgICB4KG51bGwgIT0gZik7XG4gICAgICB4KG51bGwgIT0gaCk7XG4gICAgICBoLkNiID0gRyhmKTtcbiAgICAgIGlmIChoLkNiKSB7XG4gICAgICAgIGguQmIgPSBHKGYpO1xuICAgICAgICBpZiAoRyhmKSkge1xuICAgICAgICAgIGguRmIgPSBHKGYpO1xuICAgICAgICAgIGZvciAobCA9IDA7IDQgPiBsOyArK2wpIGguWmJbbF0gPSBHKGYpID8gY2EoZiwgNykgOiAwO1xuICAgICAgICAgIGZvciAobCA9IDA7IDQgPiBsOyArK2wpIGguTGJbbF0gPSBHKGYpID8gY2EoZiwgNikgOiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoLkJiKSBmb3IgKGwgPSAwOyAzID4gbDsgKytsKSBrLmpiW2xdID0gRyhmKSA/IG5hKGYsIDgpIDogMjU1O1xuICAgICAgfSBlbHNlIGguQmIgPSAwO1xuICAgICAgaWYgKGYuS2EpIHJldHVybiBUKGEsIDMsIFwiY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyXCIpO1xuICAgICAgaCA9IGEuZWQ7XG4gICAgICBoLnpkID0gRyhmKTtcbiAgICAgIGguVGIgPSBuYShmLCA2KTtcbiAgICAgIGgud2IgPSBuYShmLCAzKTtcbiAgICAgIGguUGMgPSBHKGYpO1xuICAgICAgaWYgKGguUGMgJiYgRyhmKSkge1xuICAgICAgICBmb3IgKGsgPSAwOyA0ID4gazsgKytrKSBHKGYpICYmIChoLnZkW2tdID0gY2EoZiwgNikpO1xuICAgICAgICBmb3IgKGsgPSAwOyA0ID4gazsgKytrKSBHKGYpICYmIChoLm9kW2tdID0gY2EoZiwgNikpO1xuICAgICAgfVxuICAgICAgYS5MID0gMCA9PSBoLlRiID8gMCA6IGguemQgPyAxIDogMjtcbiAgICAgIGlmIChmLkthKSByZXR1cm4gVChhLCAzLCBcImNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyXCIpO1xuICAgICAgbCA9IGQ7XG4gICAgICB2YXIgbSA9IGU7XG4gICAgICBlID0gbDtcbiAgICAgIGQgPSBsICsgbTtcbiAgICAgIGggPSBtO1xuICAgICAgYS5YYiA9ICgxIDw8IG5hKGEubSwgMikpIC0gMTtcbiAgICAgIGsgPSBhLlhiO1xuICAgICAgaWYgKG0gPCAzICogaykgYyA9IDc7XG4gICAgICBlbHNlIHtcbiAgICAgICAgbCArPSAzICogaztcbiAgICAgICAgaCAtPSAzICogaztcbiAgICAgICAgZm9yIChtID0gMDsgbSA8IGs7ICsrbSkge1xuICAgICAgICAgIHZhciBuID0gY1tlICsgMF0gfCAoY1tlICsgMV0gPDwgOCkgfCAoY1tlICsgMl0gPDwgMTYpO1xuICAgICAgICAgIG4gPiBoICYmIChuID0gaCk7XG4gICAgICAgICAgbWEoYS5KY1srbV0sIGMsIGwsIG4pO1xuICAgICAgICAgIGwgKz0gbjtcbiAgICAgICAgICBoIC09IG47XG4gICAgICAgICAgZSArPSAzO1xuICAgICAgICB9XG4gICAgICAgIG1hKGEuSmNbK2tdLCBjLCBsLCBoKTtcbiAgICAgICAgYyA9IGwgPCBkID8gMCA6IDU7XG4gICAgICB9XG4gICAgICBpZiAoMCAhPSBjKSByZXR1cm4gVChhLCBjLCBcImNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zXCIpO1xuICAgICAgbCA9IGEubTtcbiAgICAgIGMgPSBuYShsLCA3KTtcbiAgICAgIGUgPSBHKGwpID8gY2EobCwgNCkgOiAwO1xuICAgICAgZCA9IEcobCkgPyBjYShsLCA0KSA6IDA7XG4gICAgICBoID0gRyhsKSA/IGNhKGwsIDQpIDogMDtcbiAgICAgIGsgPSBHKGwpID8gY2EobCwgNCkgOiAwO1xuICAgICAgbCA9IEcobCkgPyBjYShsLCA0KSA6IDA7XG4gICAgICBtID0gYS5RYTtcbiAgICAgIGZvciAobiA9IDA7IDQgPiBuOyArK24pIHtcbiAgICAgICAgaWYgKG0uQ2IpIHtcbiAgICAgICAgICB2YXIgciA9IG0uWmJbbl07XG4gICAgICAgICAgbS5GYiB8fCAociArPSBjKTtcbiAgICAgICAgfSBlbHNlIGlmICgwIDwgbikge1xuICAgICAgICAgIGEucGJbbl0gPSBhLnBiWzBdO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2UgciA9IGM7XG4gICAgICAgIHZhciBxID0gYS5wYltuXTtcbiAgICAgICAgcS5TY1swXSA9IExiW2dhKHIgKyBlLCAxMjcpXTtcbiAgICAgICAgcS5TY1sxXSA9IE1iW2dhKHIgKyAwLCAxMjcpXTtcbiAgICAgICAgcS5FYlswXSA9IDIgKiBMYltnYShyICsgZCwgMTI3KV07XG4gICAgICAgIHEuRWJbMV0gPSAoMTAxNTgxICogTWJbZ2EociArIGgsIDEyNyldKSA+PiAxNjtcbiAgICAgICAgOCA+IHEuRWJbMV0gJiYgKHEuRWJbMV0gPSA4KTtcbiAgICAgICAgcS5RY1swXSA9IExiW2dhKHIgKyBrLCAxMTcpXTtcbiAgICAgICAgcS5RY1sxXSA9IE1iW2dhKHIgKyBsLCAxMjcpXTtcbiAgICAgICAgcS5sYyA9IHIgKyBsO1xuICAgICAgfVxuICAgICAgaWYgKCFnLlJiKSByZXR1cm4gVChhLCA0LCBcIk5vdCBhIGtleSBmcmFtZS5cIik7XG4gICAgICBHKGYpO1xuICAgICAgZyA9IGEuUGE7XG4gICAgICBmb3IgKGMgPSAwOyA0ID4gYzsgKytjKSB7XG4gICAgICAgIGZvciAoZSA9IDA7IDggPiBlOyArK2UpXG4gICAgICAgICAgZm9yIChkID0gMDsgMyA+IGQ7ICsrZClcbiAgICAgICAgICAgIGZvciAoaCA9IDA7IDExID4gaDsgKytoKVxuICAgICAgICAgICAgICAoayA9IEsoZiwgRWVbY11bZV1bZF1baF0pID8gbmEoZiwgOCkgOiBGZVtjXVtlXVtkXVtoXSksXG4gICAgICAgICAgICAgICAgKGcuV2NbY11bZV0uWWJbZF1baF0gPSBrKTtcbiAgICAgICAgZm9yIChlID0gMDsgMTcgPiBlOyArK2UpIGcuWGNbY11bZV0gPSBnLldjW2NdW0dlW2VdXTtcbiAgICAgIH1cbiAgICAgIGEua2MgPSBHKGYpO1xuICAgICAgYS5rYyAmJiAoYS5CZCA9IG5hKGYsIDgpKTtcbiAgICAgIHJldHVybiAoYS5jYiA9IDEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBEZShhLCBiLCBjLCBkLCBlLCBmLCBnKSB7XG4gICAgICB2YXIgaCA9IGJbZV0uWWJbY107XG4gICAgICBmb3IgKGMgPSAwOyAxNiA+IGU7ICsrZSkge1xuICAgICAgICBpZiAoIUsoYSwgaFtjICsgMF0pKSByZXR1cm4gZTtcbiAgICAgICAgZm9yICg7ICFLKGEsIGhbYyArIDFdKTsgKVxuICAgICAgICAgIGlmICgoKGggPSBiWysrZV0uWWJbMF0pLCAoYyA9IDApLCAxNiA9PSBlKSkgcmV0dXJuIDE2O1xuICAgICAgICB2YXIgayA9IGJbZSArIDFdLlliO1xuICAgICAgICBpZiAoSyhhLCBoW2MgKyAyXSkpIHtcbiAgICAgICAgICB2YXIgbCA9IGEsXG4gICAgICAgICAgICBtID0gaCxcbiAgICAgICAgICAgIG4gPSBjO1xuICAgICAgICAgIHZhciByID0gMDtcbiAgICAgICAgICBpZiAoSyhsLCBtW24gKyAzXSkpXG4gICAgICAgICAgICBpZiAoSyhsLCBtW24gKyA2XSkpIHtcbiAgICAgICAgICAgICAgaCA9IDA7XG4gICAgICAgICAgICAgIHIgPSBLKGwsIG1bbiArIDhdKTtcbiAgICAgICAgICAgICAgbSA9IEsobCwgbVtuICsgOSArIHJdKTtcbiAgICAgICAgICAgICAgbiA9IDIgKiByICsgbTtcbiAgICAgICAgICAgICAgciA9IDA7XG4gICAgICAgICAgICAgIGZvciAobSA9IEhlW25dOyBtW2hdOyArK2gpIHIgKz0gciArIEsobCwgbVtoXSk7XG4gICAgICAgICAgICAgIHIgKz0gMyArICg4IDw8IG4pO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgIEsobCwgbVtuICsgN10pXG4gICAgICAgICAgICAgICAgPyAoKHIgPSA3ICsgMiAqIEsobCwgMTY1KSksIChyICs9IEsobCwgMTQ1KSkpXG4gICAgICAgICAgICAgICAgOiAociA9IDUgKyBLKGwsIDE1OSkpO1xuICAgICAgICAgIGVsc2UgSyhsLCBtW24gKyA0XSkgPyAociA9IDMgKyBLKGwsIG1bbiArIDVdKSkgOiAociA9IDIpO1xuICAgICAgICAgIGggPSBrWzJdO1xuICAgICAgICB9IGVsc2UgKHIgPSAxKSwgKGggPSBrWzFdKTtcbiAgICAgICAgayA9IGcgKyBJZVtlXTtcbiAgICAgICAgbCA9IGE7XG4gICAgICAgIDAgPiBsLmIgJiYgUWEobCk7XG4gICAgICAgIHZhciBtID0gbC5iLFxuICAgICAgICAgIG4gPSBsLkNhID4+IDEsXG4gICAgICAgICAgcSA9IChuIC0gKGwuSSA+PiBtKSkgPj4gMzE7XG4gICAgICAgIC0tbC5iO1xuICAgICAgICBsLkNhICs9IHE7XG4gICAgICAgIGwuQ2EgfD0gMTtcbiAgICAgICAgbC5JIC09ICgobiArIDEpICYgcSkgPDwgbTtcbiAgICAgICAgZltrXSA9ICgociBeIHEpIC0gcSkgKiBkWygwIDwgZSkgKyAwXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAxNjtcbiAgICB9XG4gICAgZnVuY3Rpb24gTGMoYSkge1xuICAgICAgdmFyIGIgPSBhLnJiW2Euc2IgLSAxXTtcbiAgICAgIGIubGEgPSAwO1xuICAgICAgYi5OYSA9IDA7XG4gICAgICBNKGEuemMsIDAsIDAsIGEuemMubGVuZ3RoKTtcbiAgICAgIGEuamEgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBKZShhLCBiKSB7XG4gICAgICBmb3IgKGEuTSA9IDA7IGEuTSA8IGEuVmE7ICsrYS5NKSB7XG4gICAgICAgIHZhciBjID0gYS5KY1thLk0gJiBhLlhiXSxcbiAgICAgICAgICBkID0gYS5tLFxuICAgICAgICAgIGUgPSBhLFxuICAgICAgICAgIGY7XG4gICAgICAgIGZvciAoZiA9IDA7IGYgPCBlLnphOyArK2YpIHtcbiAgICAgICAgICB2YXIgZyA9IGQ7XG4gICAgICAgICAgdmFyIGggPSBlO1xuICAgICAgICAgIHZhciBrID0gaC5BYyxcbiAgICAgICAgICAgIGwgPSBoLkJjICsgNCAqIGYsXG4gICAgICAgICAgICBtID0gaC56YyxcbiAgICAgICAgICAgIG4gPSBoLnlhW2guYWEgKyBmXTtcbiAgICAgICAgICBoLlFhLkJiXG4gICAgICAgICAgICA/IChuLiRiID0gSyhnLCBoLlBhLmpiWzBdKVxuICAgICAgICAgICAgICAgID8gMiArIEsoZywgaC5QYS5qYlsyXSlcbiAgICAgICAgICAgICAgICA6IEsoZywgaC5QYS5qYlsxXSkpXG4gICAgICAgICAgICA6IChuLiRiID0gMCk7XG4gICAgICAgICAgaC5rYyAmJiAobi5BZCA9IEsoZywgaC5CZCkpO1xuICAgICAgICAgIG4uWmEgPSAhSyhnLCAxNDUpICsgMDtcbiAgICAgICAgICBpZiAobi5aYSkge1xuICAgICAgICAgICAgdmFyIHIgPSBuLk9iLFxuICAgICAgICAgICAgICBxID0gMDtcbiAgICAgICAgICAgIGZvciAoaCA9IDA7IDQgPiBoOyArK2gpIHtcbiAgICAgICAgICAgICAgdmFyIHQgPSBtWzAgKyBoXTtcbiAgICAgICAgICAgICAgdmFyIHY7XG4gICAgICAgICAgICAgIGZvciAodiA9IDA7IDQgPiB2OyArK3YpIHtcbiAgICAgICAgICAgICAgICB0ID0gS2Vba1tsICsgdl1dW3RdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSBNY1tLKGcsIHRbMF0pXTsgMCA8IHA7IClcbiAgICAgICAgICAgICAgICAgIHAgPSBNY1syICogcCArIEsoZywgdFtwXSldO1xuICAgICAgICAgICAgICAgIHQgPSAtcDtcbiAgICAgICAgICAgICAgICBrW2wgKyB2XSA9IHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgSShyLCBxLCBrLCBsLCA0KTtcbiAgICAgICAgICAgICAgcSArPSA0O1xuICAgICAgICAgICAgICBtWzAgKyBoXSA9IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAodCA9IEsoZywgMTU2KSA/IChLKGcsIDEyOCkgPyAxIDogMykgOiBLKGcsIDE2MykgPyAyIDogMCksXG4gICAgICAgICAgICAgIChuLk9iWzBdID0gdCksXG4gICAgICAgICAgICAgIE0oaywgbCwgdCwgNCksXG4gICAgICAgICAgICAgIE0obSwgMCwgdCwgNCk7XG4gICAgICAgICAgbi5EZCA9IEsoZywgMTQyKSA/IChLKGcsIDExNCkgPyAoSyhnLCAxODMpID8gMSA6IDMpIDogMikgOiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLm0uS2EpIHJldHVybiBUKGEsIDcsIFwiUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLlwiKTtcbiAgICAgICAgZm9yICg7IGEuamEgPCBhLnphOyArK2EuamEpIHtcbiAgICAgICAgICBkID0gYTtcbiAgICAgICAgICBlID0gYztcbiAgICAgICAgICBnID0gZC5yYltkLnNiIC0gMV07XG4gICAgICAgICAgayA9IGQucmJbZC5zYiArIGQuamFdO1xuICAgICAgICAgIGYgPSBkLnlhW2QuYWEgKyBkLmphXTtcbiAgICAgICAgICBpZiAoKGwgPSBkLmtjID8gZi5BZCA6IDApKVxuICAgICAgICAgICAgKGcubGEgPSBrLmxhID0gMCksXG4gICAgICAgICAgICAgIGYuWmEgfHwgKGcuTmEgPSBrLk5hID0gMCksXG4gICAgICAgICAgICAgIChmLkhjID0gMCksXG4gICAgICAgICAgICAgIChmLkdjID0gMCksXG4gICAgICAgICAgICAgIChmLmlhID0gMCk7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdSxcbiAgICAgICAgICAgICAgdyxcbiAgICAgICAgICAgICAgZyA9IGssXG4gICAgICAgICAgICAgIGsgPSBlLFxuICAgICAgICAgICAgICBsID0gZC5QYS5YYyxcbiAgICAgICAgICAgICAgbSA9IGQueWFbZC5hYSArIGQuamFdLFxuICAgICAgICAgICAgICBuID0gZC5wYlttLiRiXTtcbiAgICAgICAgICAgIGggPSBtLmFkO1xuICAgICAgICAgICAgciA9IDA7XG4gICAgICAgICAgICBxID0gZC5yYltkLnNiIC0gMV07XG4gICAgICAgICAgICB0ID0gdiA9IDA7XG4gICAgICAgICAgICBNKGgsIHIsIDAsIDM4NCk7XG4gICAgICAgICAgICBpZiAobS5aYSkge1xuICAgICAgICAgICAgICB2YXIgeSA9IDA7XG4gICAgICAgICAgICAgIHZhciBBID0gbFszXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHAgPSBWKDE2KTtcbiAgICAgICAgICAgICAgdmFyIEUgPSBnLk5hICsgcS5OYTtcbiAgICAgICAgICAgICAgRSA9IG9hKGssIGxbMV0sIEUsIG4uRWIsIDAsIHAsIDApO1xuICAgICAgICAgICAgICBnLk5hID0gcS5OYSA9ICgwIDwgRSkgKyAwO1xuICAgICAgICAgICAgICBpZiAoMSA8IEUpIE5jKHAsIDAsIGgsIHIpO1xuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgQiA9IChwWzBdICsgMykgPj4gMztcbiAgICAgICAgICAgICAgICBmb3IgKHAgPSAwOyAyNTYgPiBwOyBwICs9IDE2KSBoW3IgKyBwXSA9IEI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeSA9IDE7XG4gICAgICAgICAgICAgIEEgPSBsWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIEMgPSBnLmxhICYgMTU7XG4gICAgICAgICAgICB2YXIgTiA9IHEubGEgJiAxNTtcbiAgICAgICAgICAgIGZvciAocCA9IDA7IDQgPiBwOyArK3ApIHtcbiAgICAgICAgICAgICAgdmFyIHogPSBOICYgMTtcbiAgICAgICAgICAgICAgZm9yIChCID0gdyA9IDA7IDQgPiBCOyArK0IpXG4gICAgICAgICAgICAgICAgKEUgPSB6ICsgKEMgJiAxKSksXG4gICAgICAgICAgICAgICAgICAoRSA9IG9hKGssIEEsIEUsIG4uU2MsIHksIGgsIHIpKSxcbiAgICAgICAgICAgICAgICAgICh6ID0gRSA+IHkpLFxuICAgICAgICAgICAgICAgICAgKEMgPSAoQyA+PiAxKSB8ICh6IDw8IDcpKSxcbiAgICAgICAgICAgICAgICAgICh3ID0gKHcgPDwgMikgfCAoMyA8IEUgPyAzIDogMSA8IEUgPyAyIDogMCAhPSBoW3IgKyAwXSkpLFxuICAgICAgICAgICAgICAgICAgKHIgKz0gMTYpO1xuICAgICAgICAgICAgICBDID4+PSA0O1xuICAgICAgICAgICAgICBOID0gKE4gPj4gMSkgfCAoeiA8PCA3KTtcbiAgICAgICAgICAgICAgdiA9ICgodiA8PCA4KSB8IHcpID4+PiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQSA9IEM7XG4gICAgICAgICAgICB5ID0gTiA+PiA0O1xuICAgICAgICAgICAgZm9yICh1ID0gMDsgNCA+IHU7IHUgKz0gMikge1xuICAgICAgICAgICAgICB3ID0gMDtcbiAgICAgICAgICAgICAgQyA9IGcubGEgPj4gKDQgKyB1KTtcbiAgICAgICAgICAgICAgTiA9IHEubGEgPj4gKDQgKyB1KTtcbiAgICAgICAgICAgICAgZm9yIChwID0gMDsgMiA+IHA7ICsrcCkge1xuICAgICAgICAgICAgICAgIHogPSBOICYgMTtcbiAgICAgICAgICAgICAgICBmb3IgKEIgPSAwOyAyID4gQjsgKytCKVxuICAgICAgICAgICAgICAgICAgKEUgPSB6ICsgKEMgJiAxKSksXG4gICAgICAgICAgICAgICAgICAgIChFID0gb2EoaywgbFsyXSwgRSwgbi5RYywgMCwgaCwgcikpLFxuICAgICAgICAgICAgICAgICAgICAoeiA9IDAgPCBFKSxcbiAgICAgICAgICAgICAgICAgICAgKEMgPSAoQyA+PiAxKSB8ICh6IDw8IDMpKSxcbiAgICAgICAgICAgICAgICAgICAgKHcgPSAodyA8PCAyKSB8ICgzIDwgRSA/IDMgOiAxIDwgRSA/IDIgOiAwICE9IGhbciArIDBdKSksXG4gICAgICAgICAgICAgICAgICAgIChyICs9IDE2KTtcbiAgICAgICAgICAgICAgICBDID4+PSAyO1xuICAgICAgICAgICAgICAgIE4gPSAoTiA+PiAxKSB8ICh6IDw8IDUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHQgfD0gdyA8PCAoNCAqIHUpO1xuICAgICAgICAgICAgICBBIHw9IChDIDw8IDQpIDw8IHU7XG4gICAgICAgICAgICAgIHkgfD0gKE4gJiAyNDApIDw8IHU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnLmxhID0gQTtcbiAgICAgICAgICAgIHEubGEgPSB5O1xuICAgICAgICAgICAgbS5IYyA9IHY7XG4gICAgICAgICAgICBtLkdjID0gdDtcbiAgICAgICAgICAgIG0uaWEgPSB0ICYgNDM2OTAgPyAwIDogbi5pYTtcbiAgICAgICAgICAgIGwgPSAhKHYgfCB0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgMCA8IGQuTCAmJlxuICAgICAgICAgICAgKChkLndhW2QuWSArIGQuamFdID0gZC5nZFtmLiRiXVtmLlphXSksXG4gICAgICAgICAgICAoZC53YVtkLlkgKyBkLmphXS5MYSB8PSAhbCkpO1xuICAgICAgICAgIGlmIChlLkthKSByZXR1cm4gVChhLCA3LCBcIlByZW1hdHVyZSBlbmQtb2YtZmlsZSBlbmNvdW50ZXJlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgTGMoYSk7XG4gICAgICAgIGMgPSBhO1xuICAgICAgICBkID0gYjtcbiAgICAgICAgZSA9IDE7XG4gICAgICAgIGYgPSBjLkQ7XG4gICAgICAgIGcgPSAwIDwgYy5MICYmIGMuTSA+PSBjLnpiICYmIGMuTSA8PSBjLlZhO1xuICAgICAgICBpZiAoMCA9PSBjLkFhKVxuICAgICAgICAgIGE6IHtcbiAgICAgICAgICAgIChmLk0gPSBjLk0pLCAoZi51YyA9IGcpLCBPYyhjLCBmKSwgKGUgPSAxKTtcbiAgICAgICAgICAgIHcgPSBjLkQ7XG4gICAgICAgICAgICBmID0gdy5OYjtcbiAgICAgICAgICAgIHQgPSBZYVtjLkxdO1xuICAgICAgICAgICAgZyA9IHQgKiBjLlI7XG4gICAgICAgICAgICBrID0gKHQgLyAyKSAqIGMuQjtcbiAgICAgICAgICAgIHAgPSAxNiAqIGYgKiBjLlI7XG4gICAgICAgICAgICBCID0gOCAqIGYgKiBjLkI7XG4gICAgICAgICAgICBsID0gYy5zYTtcbiAgICAgICAgICAgIG0gPSBjLnRhIC0gZyArIHA7XG4gICAgICAgICAgICBuID0gYy5xYTtcbiAgICAgICAgICAgIGggPSBjLnJhIC0gayArIEI7XG4gICAgICAgICAgICByID0gYy5IYTtcbiAgICAgICAgICAgIHEgPSBjLklhIC0gayArIEI7XG4gICAgICAgICAgICBDID0gdy5NO1xuICAgICAgICAgICAgTiA9IDAgPT0gQztcbiAgICAgICAgICAgIHYgPSBDID49IGMuVmEgLSAxO1xuICAgICAgICAgICAgMiA9PSBjLkFhICYmIE9jKGMsIHcpO1xuICAgICAgICAgICAgaWYgKHcudWMpXG4gICAgICAgICAgICAgIGZvciAoRSA9IGMsIHogPSBFLkQuTSwgeChFLkQudWMpLCB3ID0gRS55YjsgdyA8IEUuSGI7ICsrdykge1xuICAgICAgICAgICAgICAgIHZhciBRID0gRTtcbiAgICAgICAgICAgICAgICB5ID0gdztcbiAgICAgICAgICAgICAgICBBID0gejtcbiAgICAgICAgICAgICAgICB2YXIgUyA9IFEuRCxcbiAgICAgICAgICAgICAgICAgIEQgPSBTLk5iO1xuICAgICAgICAgICAgICAgIHUgPSBRLlI7XG4gICAgICAgICAgICAgICAgdmFyIFMgPSBTLndhW1MuWSArIHldLFxuICAgICAgICAgICAgICAgICAgRiA9IFEuc2EsXG4gICAgICAgICAgICAgICAgICBIID0gUS50YSArIDE2ICogRCAqIHUgKyAxNiAqIHksXG4gICAgICAgICAgICAgICAgICBKID0gUy5kZCxcbiAgICAgICAgICAgICAgICAgIEcgPSBTLnRjO1xuICAgICAgICAgICAgICAgIGlmICgwICE9IEcpXG4gICAgICAgICAgICAgICAgICBpZiAoKHgoMyA8PSBHKSwgMSA9PSBRLkwpKVxuICAgICAgICAgICAgICAgICAgICAwIDwgeSAmJiBQYyhGLCBILCB1LCBHICsgNCksXG4gICAgICAgICAgICAgICAgICAgICAgUy5MYSAmJiBRYyhGLCBILCB1LCBHKSxcbiAgICAgICAgICAgICAgICAgICAgICAwIDwgQSAmJiBSYyhGLCBILCB1LCBHICsgNCksXG4gICAgICAgICAgICAgICAgICAgICAgUy5MYSAmJiBTYyhGLCBILCB1LCBHKTtcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgTCA9IFEuQixcbiAgICAgICAgICAgICAgICAgICAgICBPID0gUS5xYSxcbiAgICAgICAgICAgICAgICAgICAgICBQID0gUS5yYSArIDggKiBEICogTCArIDggKiB5LFxuICAgICAgICAgICAgICAgICAgICAgIFIgPSBRLkhhLFxuICAgICAgICAgICAgICAgICAgICAgIFEgPSBRLklhICsgOCAqIEQgKiBMICsgOCAqIHksXG4gICAgICAgICAgICAgICAgICAgICAgRCA9IFMubGQ7XG4gICAgICAgICAgICAgICAgICAgIDAgPCB5ICYmXG4gICAgICAgICAgICAgICAgICAgICAgKFRjKEYsIEgsIHUsIEcgKyA0LCBKLCBEKSxcbiAgICAgICAgICAgICAgICAgICAgICBVYyhPLCBQLCBSLCBRLCBMLCBHICsgNCwgSiwgRCkpO1xuICAgICAgICAgICAgICAgICAgICBTLkxhICYmIChWYyhGLCBILCB1LCBHLCBKLCBEKSwgV2MoTywgUCwgUiwgUSwgTCwgRywgSiwgRCkpO1xuICAgICAgICAgICAgICAgICAgICAwIDwgQSAmJlxuICAgICAgICAgICAgICAgICAgICAgIChYYyhGLCBILCB1LCBHICsgNCwgSiwgRCksXG4gICAgICAgICAgICAgICAgICAgICAgWWMoTywgUCwgUiwgUSwgTCwgRyArIDQsIEosIEQpKTtcbiAgICAgICAgICAgICAgICAgICAgUy5MYSAmJiAoWmMoRiwgSCwgdSwgRywgSiwgRCksICRjKE8sIFAsIFIsIFEsIEwsIEcsIEosIEQpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYy5pYSAmJiBhbGVydChcInRvZG86RGl0aGVyUm93XCIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gZC5wdXQpIHtcbiAgICAgICAgICAgICAgdyA9IDE2ICogQztcbiAgICAgICAgICAgICAgQyA9IDE2ICogKEMgKyAxKTtcbiAgICAgICAgICAgICAgTlxuICAgICAgICAgICAgICAgID8gKChkLnkgPSBjLnNhKSxcbiAgICAgICAgICAgICAgICAgIChkLk8gPSBjLnRhICsgcCksXG4gICAgICAgICAgICAgICAgICAoZC5mID0gYy5xYSksXG4gICAgICAgICAgICAgICAgICAoZC5OID0gYy5yYSArIEIpLFxuICAgICAgICAgICAgICAgICAgKGQuZWEgPSBjLkhhKSxcbiAgICAgICAgICAgICAgICAgIChkLlcgPSBjLklhICsgQikpXG4gICAgICAgICAgICAgICAgOiAoKHcgLT0gdCksXG4gICAgICAgICAgICAgICAgICAoZC55ID0gbCksXG4gICAgICAgICAgICAgICAgICAoZC5PID0gbSksXG4gICAgICAgICAgICAgICAgICAoZC5mID0gbiksXG4gICAgICAgICAgICAgICAgICAoZC5OID0gaCksXG4gICAgICAgICAgICAgICAgICAoZC5lYSA9IHIpLFxuICAgICAgICAgICAgICAgICAgKGQuVyA9IHEpKTtcbiAgICAgICAgICAgICAgdiB8fCAoQyAtPSB0KTtcbiAgICAgICAgICAgICAgQyA+IGQubyAmJiAoQyA9IGQubyk7XG4gICAgICAgICAgICAgIGQuRiA9IG51bGw7XG4gICAgICAgICAgICAgIGQuSiA9IG51bGw7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBudWxsICE9IGMuRmEgJiZcbiAgICAgICAgICAgICAgICAwIDwgYy5GYS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICB3IDwgQyAmJlxuICAgICAgICAgICAgICAgICgoZC5KID0gTGUoYywgZCwgdywgQyAtIHcpKSxcbiAgICAgICAgICAgICAgICAoZC5GID0gYy5tYiksXG4gICAgICAgICAgICAgICAgbnVsbCA9PSBkLkYgJiYgMCA9PSBkLkYubGVuZ3RoKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBlID0gVChjLCAzLCBcIkNvdWxkIG5vdCBkZWNvZGUgYWxwaGEgZGF0YS5cIik7XG4gICAgICAgICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3IDwgZC5qICYmXG4gICAgICAgICAgICAgICAgKCh0ID0gZC5qIC0gdyksXG4gICAgICAgICAgICAgICAgKHcgPSBkLmopLFxuICAgICAgICAgICAgICAgIHgoISh0ICYgMSkpLFxuICAgICAgICAgICAgICAgIChkLk8gKz0gYy5SICogdCksXG4gICAgICAgICAgICAgICAgKGQuTiArPSBjLkIgKiAodCA+PiAxKSksXG4gICAgICAgICAgICAgICAgKGQuVyArPSBjLkIgKiAodCA+PiAxKSksXG4gICAgICAgICAgICAgICAgbnVsbCAhPSBkLkYgJiYgKGQuSiArPSBkLndpZHRoICogdCkpO1xuICAgICAgICAgICAgICB3IDwgQyAmJlxuICAgICAgICAgICAgICAgICgoZC5PICs9IGQudiksXG4gICAgICAgICAgICAgICAgKGQuTiArPSBkLnYgPj4gMSksXG4gICAgICAgICAgICAgICAgKGQuVyArPSBkLnYgPj4gMSksXG4gICAgICAgICAgICAgICAgbnVsbCAhPSBkLkYgJiYgKGQuSiArPSBkLnYpLFxuICAgICAgICAgICAgICAgIChkLmthID0gdyAtIGQuaiksXG4gICAgICAgICAgICAgICAgKGQuVSA9IGQudmEgLSBkLnYpLFxuICAgICAgICAgICAgICAgIChkLlQgPSBDIC0gdyksXG4gICAgICAgICAgICAgICAgKGUgPSBkLnB1dChkKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZiArIDEgIT0gYy5JYyB8fFxuICAgICAgICAgICAgICB2IHx8XG4gICAgICAgICAgICAgIChJKGMuc2EsIGMudGEgLSBnLCBsLCBtICsgMTYgKiBjLlIsIGcpLFxuICAgICAgICAgICAgICBJKGMucWEsIGMucmEgLSBrLCBuLCBoICsgOCAqIGMuQiwgayksXG4gICAgICAgICAgICAgIEkoYy5IYSwgYy5JYSAtIGssIHIsIHEgKyA4ICogYy5CLCBrKSk7XG4gICAgICAgICAgfVxuICAgICAgICBpZiAoIWUpIHJldHVybiBUKGEsIDYsIFwiT3V0cHV0IGFib3J0ZWQuXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIE1lKGEsIGIpIHtcbiAgICAgIGlmIChudWxsID09IGEpIHJldHVybiAwO1xuICAgICAgaWYgKG51bGwgPT0gYikgcmV0dXJuIFQoYSwgMiwgXCJOVUxMIFZQOElvIHBhcmFtZXRlciBpbiBWUDhEZWNvZGUoKS5cIik7XG4gICAgICBpZiAoIWEuY2IgJiYgIUtjKGEsIGIpKSByZXR1cm4gMDtcbiAgICAgIHgoYS5jYik7XG4gICAgICBpZiAobnVsbCA9PSBiLmFjIHx8IGIuYWMoYikpIHtcbiAgICAgICAgYi5vYiAmJiAoYS5MID0gMCk7XG4gICAgICAgIHZhciBjID0gWWFbYS5MXTtcbiAgICAgICAgMiA9PSBhLkxcbiAgICAgICAgICA/ICgoYS55YiA9IDApLCAoYS56YiA9IDApKVxuICAgICAgICAgIDogKChhLnliID0gKGIudiAtIGMpID4+IDQpLFxuICAgICAgICAgICAgKGEuemIgPSAoYi5qIC0gYykgPj4gNCksXG4gICAgICAgICAgICAwID4gYS55YiAmJiAoYS55YiA9IDApLFxuICAgICAgICAgICAgMCA+IGEuemIgJiYgKGEuemIgPSAwKSk7XG4gICAgICAgIGEuVmEgPSAoYi5vICsgMTUgKyBjKSA+PiA0O1xuICAgICAgICBhLkhiID0gKGIudmEgKyAxNSArIGMpID4+IDQ7XG4gICAgICAgIGEuSGIgPiBhLnphICYmIChhLkhiID0gYS56YSk7XG4gICAgICAgIGEuVmEgPiBhLlViICYmIChhLlZhID0gYS5VYik7XG4gICAgICAgIGlmICgwIDwgYS5MKSB7XG4gICAgICAgICAgdmFyIGQgPSBhLmVkO1xuICAgICAgICAgIGZvciAoYyA9IDA7IDQgPiBjOyArK2MpIHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKGEuUWEuQ2IpIHtcbiAgICAgICAgICAgICAgdmFyIGYgPSBhLlFhLkxiW2NdO1xuICAgICAgICAgICAgICBhLlFhLkZiIHx8IChmICs9IGQuVGIpO1xuICAgICAgICAgICAgfSBlbHNlIGYgPSBkLlRiO1xuICAgICAgICAgICAgZm9yIChlID0gMDsgMSA+PSBlOyArK2UpIHtcbiAgICAgICAgICAgICAgdmFyIGcgPSBhLmdkW2NdW2VdLFxuICAgICAgICAgICAgICAgIGggPSBmO1xuICAgICAgICAgICAgICBkLlBjICYmICgoaCArPSBkLnZkWzBdKSwgZSAmJiAoaCArPSBkLm9kWzBdKSk7XG4gICAgICAgICAgICAgIGggPSAwID4gaCA/IDAgOiA2MyA8IGggPyA2MyA6IGg7XG4gICAgICAgICAgICAgIGlmICgwIDwgaCkge1xuICAgICAgICAgICAgICAgIHZhciBrID0gaDtcbiAgICAgICAgICAgICAgICAwIDwgZC53YiAmJlxuICAgICAgICAgICAgICAgICAgKChrID0gNCA8IGQud2IgPyBrID4+IDIgOiBrID4+IDEpLFxuICAgICAgICAgICAgICAgICAgayA+IDkgLSBkLndiICYmIChrID0gOSAtIGQud2IpKTtcbiAgICAgICAgICAgICAgICAxID4gayAmJiAoayA9IDEpO1xuICAgICAgICAgICAgICAgIGcuZGQgPSBrO1xuICAgICAgICAgICAgICAgIGcudGMgPSAyICogaCArIGs7XG4gICAgICAgICAgICAgICAgZy5sZCA9IDQwIDw9IGggPyAyIDogMTUgPD0gaCA/IDEgOiAwO1xuICAgICAgICAgICAgICB9IGVsc2UgZy50YyA9IDA7XG4gICAgICAgICAgICAgIGcuTGEgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjID0gMDtcbiAgICAgIH0gZWxzZSBUKGEsIDYsIFwiRnJhbWUgc2V0dXAgZmFpbGVkXCIpLCAoYyA9IGEuYSk7XG4gICAgICBpZiAoKGMgPSAwID09IGMpKSB7XG4gICAgICAgIGlmIChjKSB7XG4gICAgICAgICAgYS4kYyA9IDA7XG4gICAgICAgICAgMCA8IGEuQWEgfHwgKGEuSWMgPSBOZSk7XG4gICAgICAgICAgYjoge1xuICAgICAgICAgICAgYyA9IGEuSWM7XG4gICAgICAgICAgICB2YXIgayA9IGEuemEsXG4gICAgICAgICAgICAgIGQgPSA0ICogayxcbiAgICAgICAgICAgICAgbCA9IDMyICogayxcbiAgICAgICAgICAgICAgbSA9IGsgKyAxLFxuICAgICAgICAgICAgICBuID0gMCA8IGEuTCA/IGsgKiAoMCA8IGEuQWEgPyAyIDogMSkgOiAwLFxuICAgICAgICAgICAgICByID0gKDIgPT0gYS5BYSA/IDIgOiAxKSAqIGs7XG4gICAgICAgICAgICBlID0gKCgzICogKDE2ICogYyArIFlhW2EuTF0pKSAvIDIpICogbDtcbiAgICAgICAgICAgIGYgPSBudWxsICE9IGEuRmEgJiYgMCA8IGEuRmEubGVuZ3RoID8gYS5LYy5jICogYS5LYy5pIDogMDtcbiAgICAgICAgICAgIGcgPSBkICsgODMyICsgZSArIGY7XG4gICAgICAgICAgICBpZiAoZyAhPSBnKSBjID0gMDtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoZyA+IGEuVmIpIHtcbiAgICAgICAgICAgICAgICBhLlZiID0gMDtcbiAgICAgICAgICAgICAgICBhLkVjID0gVihnKTtcbiAgICAgICAgICAgICAgICBhLkZjID0gMDtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBhLkVjKSB7XG4gICAgICAgICAgICAgICAgICBjID0gVChhLCAxLCBcIm5vIG1lbW9yeSBkdXJpbmcgZnJhbWUgaW5pdGlhbGl6YXRpb24uXCIpO1xuICAgICAgICAgICAgICAgICAgYnJlYWsgYjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYS5WYiA9IGc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZyA9IGEuRWM7XG4gICAgICAgICAgICAgIGggPSBhLkZjO1xuICAgICAgICAgICAgICBhLkFjID0gZztcbiAgICAgICAgICAgICAgYS5CYyA9IGg7XG4gICAgICAgICAgICAgIGggKz0gZDtcbiAgICAgICAgICAgICAgYS5HZCA9IHdhKGwsIEljKTtcbiAgICAgICAgICAgICAgYS5IZCA9IDA7XG4gICAgICAgICAgICAgIGEucmIgPSB3YShtICsgMSwgSGMpO1xuICAgICAgICAgICAgICBhLnNiID0gMTtcbiAgICAgICAgICAgICAgYS53YSA9IG4gPyB3YShuLCBYYSkgOiBudWxsO1xuICAgICAgICAgICAgICBhLlkgPSAwO1xuICAgICAgICAgICAgICBhLkQuTmIgPSAwO1xuICAgICAgICAgICAgICBhLkQud2EgPSBhLndhO1xuICAgICAgICAgICAgICBhLkQuWSA9IGEuWTtcbiAgICAgICAgICAgICAgMCA8IGEuQWEgJiYgKGEuRC5ZICs9IGspO1xuICAgICAgICAgICAgICB4KCEwKTtcbiAgICAgICAgICAgICAgYS5vYyA9IGc7XG4gICAgICAgICAgICAgIGEucGMgPSBoO1xuICAgICAgICAgICAgICBoICs9IDgzMjtcbiAgICAgICAgICAgICAgYS55YSA9IHdhKHIsIEtiKTtcbiAgICAgICAgICAgICAgYS5hYSA9IDA7XG4gICAgICAgICAgICAgIGEuRC55YSA9IGEueWE7XG4gICAgICAgICAgICAgIGEuRC5hYSA9IGEuYWE7XG4gICAgICAgICAgICAgIDIgPT0gYS5BYSAmJiAoYS5ELmFhICs9IGspO1xuICAgICAgICAgICAgICBhLlIgPSAxNiAqIGs7XG4gICAgICAgICAgICAgIGEuQiA9IDggKiBrO1xuICAgICAgICAgICAgICBsID0gWWFbYS5MXTtcbiAgICAgICAgICAgICAgayA9IGwgKiBhLlI7XG4gICAgICAgICAgICAgIGwgPSAobCAvIDIpICogYS5CO1xuICAgICAgICAgICAgICBhLnNhID0gZztcbiAgICAgICAgICAgICAgYS50YSA9IGggKyBrO1xuICAgICAgICAgICAgICBhLnFhID0gYS5zYTtcbiAgICAgICAgICAgICAgYS5yYSA9IGEudGEgKyAxNiAqIGMgKiBhLlIgKyBsO1xuICAgICAgICAgICAgICBhLkhhID0gYS5xYTtcbiAgICAgICAgICAgICAgYS5JYSA9IGEucmEgKyA4ICogYyAqIGEuQiArIGw7XG4gICAgICAgICAgICAgIGEuJGMgPSAwO1xuICAgICAgICAgICAgICBoICs9IGU7XG4gICAgICAgICAgICAgIGEubWIgPSBmID8gZyA6IG51bGw7XG4gICAgICAgICAgICAgIGEubmIgPSBmID8gaCA6IG51bGw7XG4gICAgICAgICAgICAgIHgoaCArIGYgPD0gYS5GYyArIGEuVmIpO1xuICAgICAgICAgICAgICBMYyhhKTtcbiAgICAgICAgICAgICAgTShhLkFjLCBhLkJjLCAwLCBkKTtcbiAgICAgICAgICAgICAgYyA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjKSB7XG4gICAgICAgICAgICBiLmthID0gMDtcbiAgICAgICAgICAgIGIueSA9IGEuc2E7XG4gICAgICAgICAgICBiLk8gPSBhLnRhO1xuICAgICAgICAgICAgYi5mID0gYS5xYTtcbiAgICAgICAgICAgIGIuTiA9IGEucmE7XG4gICAgICAgICAgICBiLmVhID0gYS5IYTtcbiAgICAgICAgICAgIGIuVmQgPSBhLklhO1xuICAgICAgICAgICAgYi5mYSA9IGEuUjtcbiAgICAgICAgICAgIGIuUmMgPSBhLkI7XG4gICAgICAgICAgICBiLkYgPSBudWxsO1xuICAgICAgICAgICAgYi5KID0gMDtcbiAgICAgICAgICAgIGlmICghYWQpIHtcbiAgICAgICAgICAgICAgZm9yIChjID0gLTI1NTsgMjU1ID49IGM7ICsrYykgYmRbMjU1ICsgY10gPSAwID4gYyA/IC1jIDogYztcbiAgICAgICAgICAgICAgZm9yIChjID0gLTEwMjA7IDEwMjAgPj0gYzsgKytjKVxuICAgICAgICAgICAgICAgIGNkWzEwMjAgKyBjXSA9IC0xMjggPiBjID8gLTEyOCA6IDEyNyA8IGMgPyAxMjcgOiBjO1xuICAgICAgICAgICAgICBmb3IgKGMgPSAtMTEyOyAxMTIgPj0gYzsgKytjKVxuICAgICAgICAgICAgICAgIGRkWzExMiArIGNdID0gLTE2ID4gYyA/IC0xNiA6IDE1IDwgYyA/IDE1IDogYztcbiAgICAgICAgICAgICAgZm9yIChjID0gLTI1NTsgNTEwID49IGM7ICsrYylcbiAgICAgICAgICAgICAgICBlZFsyNTUgKyBjXSA9IDAgPiBjID8gMCA6IDI1NSA8IGMgPyAyNTUgOiBjO1xuICAgICAgICAgICAgICBhZCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBOYyA9IE9lO1xuICAgICAgICAgICAgWmEgPSBQZTtcbiAgICAgICAgICAgIE5iID0gUWU7XG4gICAgICAgICAgICBwYSA9IFJlO1xuICAgICAgICAgICAgT2IgPSBTZTtcbiAgICAgICAgICAgIGZkID0gVGU7XG4gICAgICAgICAgICBYYyA9IFVlO1xuICAgICAgICAgICAgVGMgPSBWZTtcbiAgICAgICAgICAgIFljID0gV2U7XG4gICAgICAgICAgICBVYyA9IFhlO1xuICAgICAgICAgICAgWmMgPSBZZTtcbiAgICAgICAgICAgIFZjID0gWmU7XG4gICAgICAgICAgICAkYyA9ICRlO1xuICAgICAgICAgICAgV2MgPSBhZjtcbiAgICAgICAgICAgIFJjID0gZ2Q7XG4gICAgICAgICAgICBQYyA9IGhkO1xuICAgICAgICAgICAgU2MgPSBiZjtcbiAgICAgICAgICAgIFFjID0gY2Y7XG4gICAgICAgICAgICBXWzBdID0gZGY7XG4gICAgICAgICAgICBXWzFdID0gZWY7XG4gICAgICAgICAgICBXWzJdID0gZmY7XG4gICAgICAgICAgICBXWzNdID0gZ2Y7XG4gICAgICAgICAgICBXWzRdID0gaGY7XG4gICAgICAgICAgICBXWzVdID0gamY7XG4gICAgICAgICAgICBXWzZdID0ga2Y7XG4gICAgICAgICAgICBXWzddID0gbGY7XG4gICAgICAgICAgICBXWzhdID0gbWY7XG4gICAgICAgICAgICBXWzldID0gbmY7XG4gICAgICAgICAgICBZWzBdID0gb2Y7XG4gICAgICAgICAgICBZWzFdID0gcGY7XG4gICAgICAgICAgICBZWzJdID0gcWY7XG4gICAgICAgICAgICBZWzNdID0gcmY7XG4gICAgICAgICAgICBZWzRdID0gc2Y7XG4gICAgICAgICAgICBZWzVdID0gdGY7XG4gICAgICAgICAgICBZWzZdID0gdWY7XG4gICAgICAgICAgICBrYVswXSA9IHZmO1xuICAgICAgICAgICAga2FbMV0gPSB3ZjtcbiAgICAgICAgICAgIGthWzJdID0geGY7XG4gICAgICAgICAgICBrYVszXSA9IHlmO1xuICAgICAgICAgICAga2FbNF0gPSB6ZjtcbiAgICAgICAgICAgIGthWzVdID0gQWY7XG4gICAgICAgICAgICBrYVs2XSA9IEJmO1xuICAgICAgICAgICAgYyA9IDE7XG4gICAgICAgICAgfSBlbHNlIGMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGMgJiYgKGMgPSBKZShhLCBiKSk7XG4gICAgICAgIG51bGwgIT0gYi5iYyAmJiBiLmJjKGIpO1xuICAgICAgICBjICY9IDE7XG4gICAgICB9XG4gICAgICBpZiAoIWMpIHJldHVybiAwO1xuICAgICAgYS5jYiA9IDA7XG4gICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gcWEoYSwgYiwgYywgZCwgZSkge1xuICAgICAgZSA9IGFbYiArIGMgKyAzMiAqIGRdICsgKGUgPj4gMyk7XG4gICAgICBhW2IgKyBjICsgMzIgKiBkXSA9IGUgJiAtMjU2ID8gKDAgPiBlID8gMCA6IDI1NSkgOiBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBrYihhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgICBxYShhLCBiLCAwLCBjLCBkICsgZSk7XG4gICAgICBxYShhLCBiLCAxLCBjLCBkICsgZik7XG4gICAgICBxYShhLCBiLCAyLCBjLCBkIC0gZik7XG4gICAgICBxYShhLCBiLCAzLCBjLCBkIC0gZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRhKGEpIHtcbiAgICAgIHJldHVybiAoKDIwMDkxICogYSkgPj4gMTYpICsgYTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaWQoYSwgYiwgYywgZCkge1xuICAgICAgdmFyIGUgPSAwLFxuICAgICAgICBmO1xuICAgICAgdmFyIGcgPSBWKDE2KTtcbiAgICAgIGZvciAoZiA9IDA7IDQgPiBmOyArK2YpIHtcbiAgICAgICAgdmFyIGggPSBhW2IgKyAwXSArIGFbYiArIDhdO1xuICAgICAgICB2YXIgayA9IGFbYiArIDBdIC0gYVtiICsgOF07XG4gICAgICAgIHZhciBsID0gKCgzNTQ2OCAqIGFbYiArIDRdKSA+PiAxNikgLSBkYShhW2IgKyAxMl0pO1xuICAgICAgICB2YXIgbSA9IGRhKGFbYiArIDRdKSArICgoMzU0NjggKiBhW2IgKyAxMl0pID4+IDE2KTtcbiAgICAgICAgZ1tlICsgMF0gPSBoICsgbTtcbiAgICAgICAgZ1tlICsgMV0gPSBrICsgbDtcbiAgICAgICAgZ1tlICsgMl0gPSBrIC0gbDtcbiAgICAgICAgZ1tlICsgM10gPSBoIC0gbTtcbiAgICAgICAgZSArPSA0O1xuICAgICAgICBiKys7XG4gICAgICB9XG4gICAgICBmb3IgKGYgPSBlID0gMDsgNCA+IGY7ICsrZilcbiAgICAgICAgKGEgPSBnW2UgKyAwXSArIDQpLFxuICAgICAgICAgIChoID0gYSArIGdbZSArIDhdKSxcbiAgICAgICAgICAoayA9IGEgLSBnW2UgKyA4XSksXG4gICAgICAgICAgKGwgPSAoKDM1NDY4ICogZ1tlICsgNF0pID4+IDE2KSAtIGRhKGdbZSArIDEyXSkpLFxuICAgICAgICAgIChtID0gZGEoZ1tlICsgNF0pICsgKCgzNTQ2OCAqIGdbZSArIDEyXSkgPj4gMTYpKSxcbiAgICAgICAgICBxYShjLCBkLCAwLCAwLCBoICsgbSksXG4gICAgICAgICAgcWEoYywgZCwgMSwgMCwgayArIGwpLFxuICAgICAgICAgIHFhKGMsIGQsIDIsIDAsIGsgLSBsKSxcbiAgICAgICAgICBxYShjLCBkLCAzLCAwLCBoIC0gbSksXG4gICAgICAgICAgZSsrLFxuICAgICAgICAgIChkICs9IDMyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVGUoYSwgYiwgYywgZCkge1xuICAgICAgdmFyIGUgPSBhW2IgKyAwXSArIDQsXG4gICAgICAgIGYgPSAoMzU0NjggKiBhW2IgKyA0XSkgPj4gMTYsXG4gICAgICAgIGcgPSBkYShhW2IgKyA0XSksXG4gICAgICAgIGggPSAoMzU0NjggKiBhW2IgKyAxXSkgPj4gMTY7XG4gICAgICBhID0gZGEoYVtiICsgMV0pO1xuICAgICAga2IoYywgZCwgMCwgZSArIGcsIGEsIGgpO1xuICAgICAga2IoYywgZCwgMSwgZSArIGYsIGEsIGgpO1xuICAgICAga2IoYywgZCwgMiwgZSAtIGYsIGEsIGgpO1xuICAgICAga2IoYywgZCwgMywgZSAtIGcsIGEsIGgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBQZShhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBpZChhLCBiLCBjLCBkKTtcbiAgICAgIGUgJiYgaWQoYSwgYiArIDE2LCBjLCBkICsgNCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFFlKGEsIGIsIGMsIGQpIHtcbiAgICAgIFphKGEsIGIgKyAwLCBjLCBkLCAxKTtcbiAgICAgIFphKGEsIGIgKyAzMiwgYywgZCArIDEyOCwgMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJlKGEsIGIsIGMsIGQpIHtcbiAgICAgIGEgPSBhW2IgKyAwXSArIDQ7XG4gICAgICB2YXIgZTtcbiAgICAgIGZvciAoZSA9IDA7IDQgPiBlOyArK2UpIGZvciAoYiA9IDA7IDQgPiBiOyArK2IpIHFhKGMsIGQsIGIsIGUsIGEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBTZShhLCBiLCBjLCBkKSB7XG4gICAgICBhW2IgKyAwXSAmJiBwYShhLCBiICsgMCwgYywgZCk7XG4gICAgICBhW2IgKyAxNl0gJiYgcGEoYSwgYiArIDE2LCBjLCBkICsgNCk7XG4gICAgICBhW2IgKyAzMl0gJiYgcGEoYSwgYiArIDMyLCBjLCBkICsgMTI4KTtcbiAgICAgIGFbYiArIDQ4XSAmJiBwYShhLCBiICsgNDgsIGMsIGQgKyAxMjggKyA0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gT2UoYSwgYiwgYywgZCkge1xuICAgICAgdmFyIGUgPSBWKDE2KSxcbiAgICAgICAgZjtcbiAgICAgIGZvciAoZiA9IDA7IDQgPiBmOyArK2YpIHtcbiAgICAgICAgdmFyIGcgPSBhW2IgKyAwICsgZl0gKyBhW2IgKyAxMiArIGZdO1xuICAgICAgICB2YXIgaCA9IGFbYiArIDQgKyBmXSArIGFbYiArIDggKyBmXTtcbiAgICAgICAgdmFyIGsgPSBhW2IgKyA0ICsgZl0gLSBhW2IgKyA4ICsgZl07XG4gICAgICAgIHZhciBsID0gYVtiICsgMCArIGZdIC0gYVtiICsgMTIgKyBmXTtcbiAgICAgICAgZVswICsgZl0gPSBnICsgaDtcbiAgICAgICAgZVs4ICsgZl0gPSBnIC0gaDtcbiAgICAgICAgZVs0ICsgZl0gPSBsICsgaztcbiAgICAgICAgZVsxMiArIGZdID0gbCAtIGs7XG4gICAgICB9XG4gICAgICBmb3IgKGYgPSAwOyA0ID4gZjsgKytmKVxuICAgICAgICAoYSA9IGVbMCArIDQgKiBmXSArIDMpLFxuICAgICAgICAgIChnID0gYSArIGVbMyArIDQgKiBmXSksXG4gICAgICAgICAgKGggPSBlWzEgKyA0ICogZl0gKyBlWzIgKyA0ICogZl0pLFxuICAgICAgICAgIChrID0gZVsxICsgNCAqIGZdIC0gZVsyICsgNCAqIGZdKSxcbiAgICAgICAgICAobCA9IGEgLSBlWzMgKyA0ICogZl0pLFxuICAgICAgICAgIChjW2QgKyAwXSA9IChnICsgaCkgPj4gMyksXG4gICAgICAgICAgKGNbZCArIDE2XSA9IChsICsgaykgPj4gMyksXG4gICAgICAgICAgKGNbZCArIDMyXSA9IChnIC0gaCkgPj4gMyksXG4gICAgICAgICAgKGNbZCArIDQ4XSA9IChsIC0gaykgPj4gMyksXG4gICAgICAgICAgKGQgKz0gNjQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBQYihhLCBiLCBjKSB7XG4gICAgICB2YXIgZCA9IGIgLSAzMixcbiAgICAgICAgZSA9IFIsXG4gICAgICAgIGYgPSAyNTUgLSBhW2QgLSAxXSxcbiAgICAgICAgZztcbiAgICAgIGZvciAoZyA9IDA7IGcgPCBjOyArK2cpIHtcbiAgICAgICAgdmFyIGggPSBlLFxuICAgICAgICAgIGsgPSBmICsgYVtiIC0gMV0sXG4gICAgICAgICAgbDtcbiAgICAgICAgZm9yIChsID0gMDsgbCA8IGM7ICsrbCkgYVtiICsgbF0gPSBoW2sgKyBhW2QgKyBsXV07XG4gICAgICAgIGIgKz0gMzI7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVmKGEsIGIpIHtcbiAgICAgIFBiKGEsIGIsIDQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB3ZihhLCBiKSB7XG4gICAgICBQYihhLCBiLCA4KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGYoYSwgYikge1xuICAgICAgUGIoYSwgYiwgMTYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBxZihhLCBiKSB7XG4gICAgICB2YXIgYztcbiAgICAgIGZvciAoYyA9IDA7IDE2ID4gYzsgKytjKSBJKGEsIGIgKyAzMiAqIGMsIGEsIGIgLSAzMiwgMTYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZihhLCBiKSB7XG4gICAgICB2YXIgYztcbiAgICAgIGZvciAoYyA9IDE2OyAwIDwgYzsgLS1jKSBNKGEsIGIsIGFbYiAtIDFdLCAxNiksIChiICs9IDMyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gJGEoYSwgYiwgYykge1xuICAgICAgdmFyIGQ7XG4gICAgICBmb3IgKGQgPSAwOyAxNiA+IGQ7ICsrZCkgTShiLCBjICsgMzIgKiBkLCBhLCAxNik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9mKGEsIGIpIHtcbiAgICAgIHZhciBjID0gMTYsXG4gICAgICAgIGQ7XG4gICAgICBmb3IgKGQgPSAwOyAxNiA+IGQ7ICsrZCkgYyArPSBhW2IgLSAxICsgMzIgKiBkXSArIGFbYiArIGQgLSAzMl07XG4gICAgICAkYShjID4+IDUsIGEsIGIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZihhLCBiKSB7XG4gICAgICB2YXIgYyA9IDgsXG4gICAgICAgIGQ7XG4gICAgICBmb3IgKGQgPSAwOyAxNiA+IGQ7ICsrZCkgYyArPSBhW2IgLSAxICsgMzIgKiBkXTtcbiAgICAgICRhKGMgPj4gNCwgYSwgYik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRmKGEsIGIpIHtcbiAgICAgIHZhciBjID0gOCxcbiAgICAgICAgZDtcbiAgICAgIGZvciAoZCA9IDA7IDE2ID4gZDsgKytkKSBjICs9IGFbYiArIGQgLSAzMl07XG4gICAgICAkYShjID4+IDQsIGEsIGIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1ZihhLCBiKSB7XG4gICAgICAkYSgxMjgsIGEsIGIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6KGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiAoYSArIDIgKiBiICsgYyArIDIpID4+IDI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZmKGEsIGIpIHtcbiAgICAgIHZhciBjID0gYiAtIDMyLFxuICAgICAgICBjID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAgIHooYVtjIC0gMV0sIGFbYyArIDBdLCBhW2MgKyAxXSksXG4gICAgICAgICAgeihhW2MgKyAwXSwgYVtjICsgMV0sIGFbYyArIDJdKSxcbiAgICAgICAgICB6KGFbYyArIDFdLCBhW2MgKyAyXSwgYVtjICsgM10pLFxuICAgICAgICAgIHooYVtjICsgMl0sIGFbYyArIDNdLCBhW2MgKyA0XSlcbiAgICAgICAgXSksXG4gICAgICAgIGQ7XG4gICAgICBmb3IgKGQgPSAwOyA0ID4gZDsgKytkKSBJKGEsIGIgKyAzMiAqIGQsIGMsIDAsIGMubGVuZ3RoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2YoYSwgYikge1xuICAgICAgdmFyIGMgPSBhW2IgLSAxXSxcbiAgICAgICAgZCA9IGFbYiAtIDEgKyAzMl0sXG4gICAgICAgIGUgPSBhW2IgLSAxICsgNjRdLFxuICAgICAgICBmID0gYVtiIC0gMSArIDk2XTtcbiAgICAgIHJhKGEsIGIgKyAwLCAxNjg0MzAwOSAqIHooYVtiIC0gMSAtIDMyXSwgYywgZCkpO1xuICAgICAgcmEoYSwgYiArIDMyLCAxNjg0MzAwOSAqIHooYywgZCwgZSkpO1xuICAgICAgcmEoYSwgYiArIDY0LCAxNjg0MzAwOSAqIHooZCwgZSwgZikpO1xuICAgICAgcmEoYSwgYiArIDk2LCAxNjg0MzAwOSAqIHooZSwgZiwgZikpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZihhLCBiKSB7XG4gICAgICB2YXIgYyA9IDQsXG4gICAgICAgIGQ7XG4gICAgICBmb3IgKGQgPSAwOyA0ID4gZDsgKytkKSBjICs9IGFbYiArIGQgLSAzMl0gKyBhW2IgLSAxICsgMzIgKiBkXTtcbiAgICAgIGMgPj49IDM7XG4gICAgICBmb3IgKGQgPSAwOyA0ID4gZDsgKytkKSBNKGEsIGIgKyAzMiAqIGQsIGMsIDQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoZihhLCBiKSB7XG4gICAgICB2YXIgYyA9IGFbYiAtIDEgKyAwXSxcbiAgICAgICAgZCA9IGFbYiAtIDEgKyAzMl0sXG4gICAgICAgIGUgPSBhW2IgLSAxICsgNjRdLFxuICAgICAgICBmID0gYVtiIC0gMSAtIDMyXSxcbiAgICAgICAgZyA9IGFbYiArIDAgLSAzMl0sXG4gICAgICAgIGggPSBhW2IgKyAxIC0gMzJdLFxuICAgICAgICBrID0gYVtiICsgMiAtIDMyXSxcbiAgICAgICAgbCA9IGFbYiArIDMgLSAzMl07XG4gICAgICBhW2IgKyAwICsgOTZdID0geihkLCBlLCBhW2IgLSAxICsgOTZdKTtcbiAgICAgIGFbYiArIDEgKyA5Nl0gPSBhW2IgKyAwICsgNjRdID0geihjLCBkLCBlKTtcbiAgICAgIGFbYiArIDIgKyA5Nl0gPSBhW2IgKyAxICsgNjRdID0gYVtiICsgMCArIDMyXSA9IHooZiwgYywgZCk7XG4gICAgICBhW2IgKyAzICsgOTZdID0gYVtiICsgMiArIDY0XSA9IGFbYiArIDEgKyAzMl0gPSBhW2IgKyAwICsgMF0gPSB6KGcsIGYsIGMpO1xuICAgICAgYVtiICsgMyArIDY0XSA9IGFbYiArIDIgKyAzMl0gPSBhW2IgKyAxICsgMF0gPSB6KGgsIGcsIGYpO1xuICAgICAgYVtiICsgMyArIDMyXSA9IGFbYiArIDIgKyAwXSA9IHooaywgaCwgZyk7XG4gICAgICBhW2IgKyAzICsgMF0gPSB6KGwsIGssIGgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBrZihhLCBiKSB7XG4gICAgICB2YXIgYyA9IGFbYiArIDEgLSAzMl0sXG4gICAgICAgIGQgPSBhW2IgKyAyIC0gMzJdLFxuICAgICAgICBlID0gYVtiICsgMyAtIDMyXSxcbiAgICAgICAgZiA9IGFbYiArIDQgLSAzMl0sXG4gICAgICAgIGcgPSBhW2IgKyA1IC0gMzJdLFxuICAgICAgICBoID0gYVtiICsgNiAtIDMyXSxcbiAgICAgICAgayA9IGFbYiArIDcgLSAzMl07XG4gICAgICBhW2IgKyAwICsgMF0gPSB6KGFbYiArIDAgLSAzMl0sIGMsIGQpO1xuICAgICAgYVtiICsgMSArIDBdID0gYVtiICsgMCArIDMyXSA9IHooYywgZCwgZSk7XG4gICAgICBhW2IgKyAyICsgMF0gPSBhW2IgKyAxICsgMzJdID0gYVtiICsgMCArIDY0XSA9IHooZCwgZSwgZik7XG4gICAgICBhW2IgKyAzICsgMF0gPSBhW2IgKyAyICsgMzJdID0gYVtiICsgMSArIDY0XSA9IGFbYiArIDAgKyA5Nl0gPSB6KGUsIGYsIGcpO1xuICAgICAgYVtiICsgMyArIDMyXSA9IGFbYiArIDIgKyA2NF0gPSBhW2IgKyAxICsgOTZdID0geihmLCBnLCBoKTtcbiAgICAgIGFbYiArIDMgKyA2NF0gPSBhW2IgKyAyICsgOTZdID0geihnLCBoLCBrKTtcbiAgICAgIGFbYiArIDMgKyA5Nl0gPSB6KGgsIGssIGspO1xuICAgIH1cbiAgICBmdW5jdGlvbiBqZihhLCBiKSB7XG4gICAgICB2YXIgYyA9IGFbYiAtIDEgKyAwXSxcbiAgICAgICAgZCA9IGFbYiAtIDEgKyAzMl0sXG4gICAgICAgIGUgPSBhW2IgLSAxICsgNjRdLFxuICAgICAgICBmID0gYVtiIC0gMSAtIDMyXSxcbiAgICAgICAgZyA9IGFbYiArIDAgLSAzMl0sXG4gICAgICAgIGggPSBhW2IgKyAxIC0gMzJdLFxuICAgICAgICBrID0gYVtiICsgMiAtIDMyXSxcbiAgICAgICAgbCA9IGFbYiArIDMgLSAzMl07XG4gICAgICBhW2IgKyAwICsgMF0gPSBhW2IgKyAxICsgNjRdID0gKGYgKyBnICsgMSkgPj4gMTtcbiAgICAgIGFbYiArIDEgKyAwXSA9IGFbYiArIDIgKyA2NF0gPSAoZyArIGggKyAxKSA+PiAxO1xuICAgICAgYVtiICsgMiArIDBdID0gYVtiICsgMyArIDY0XSA9IChoICsgayArIDEpID4+IDE7XG4gICAgICBhW2IgKyAzICsgMF0gPSAoayArIGwgKyAxKSA+PiAxO1xuICAgICAgYVtiICsgMCArIDk2XSA9IHooZSwgZCwgYyk7XG4gICAgICBhW2IgKyAwICsgNjRdID0geihkLCBjLCBmKTtcbiAgICAgIGFbYiArIDAgKyAzMl0gPSBhW2IgKyAxICsgOTZdID0geihjLCBmLCBnKTtcbiAgICAgIGFbYiArIDEgKyAzMl0gPSBhW2IgKyAyICsgOTZdID0geihmLCBnLCBoKTtcbiAgICAgIGFbYiArIDIgKyAzMl0gPSBhW2IgKyAzICsgOTZdID0geihnLCBoLCBrKTtcbiAgICAgIGFbYiArIDMgKyAzMl0gPSB6KGgsIGssIGwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsZihhLCBiKSB7XG4gICAgICB2YXIgYyA9IGFbYiArIDAgLSAzMl0sXG4gICAgICAgIGQgPSBhW2IgKyAxIC0gMzJdLFxuICAgICAgICBlID0gYVtiICsgMiAtIDMyXSxcbiAgICAgICAgZiA9IGFbYiArIDMgLSAzMl0sXG4gICAgICAgIGcgPSBhW2IgKyA0IC0gMzJdLFxuICAgICAgICBoID0gYVtiICsgNSAtIDMyXSxcbiAgICAgICAgayA9IGFbYiArIDYgLSAzMl0sXG4gICAgICAgIGwgPSBhW2IgKyA3IC0gMzJdO1xuICAgICAgYVtiICsgMCArIDBdID0gKGMgKyBkICsgMSkgPj4gMTtcbiAgICAgIGFbYiArIDEgKyAwXSA9IGFbYiArIDAgKyA2NF0gPSAoZCArIGUgKyAxKSA+PiAxO1xuICAgICAgYVtiICsgMiArIDBdID0gYVtiICsgMSArIDY0XSA9IChlICsgZiArIDEpID4+IDE7XG4gICAgICBhW2IgKyAzICsgMF0gPSBhW2IgKyAyICsgNjRdID0gKGYgKyBnICsgMSkgPj4gMTtcbiAgICAgIGFbYiArIDAgKyAzMl0gPSB6KGMsIGQsIGUpO1xuICAgICAgYVtiICsgMSArIDMyXSA9IGFbYiArIDAgKyA5Nl0gPSB6KGQsIGUsIGYpO1xuICAgICAgYVtiICsgMiArIDMyXSA9IGFbYiArIDEgKyA5Nl0gPSB6KGUsIGYsIGcpO1xuICAgICAgYVtiICsgMyArIDMyXSA9IGFbYiArIDIgKyA5Nl0gPSB6KGYsIGcsIGgpO1xuICAgICAgYVtiICsgMyArIDY0XSA9IHooZywgaCwgayk7XG4gICAgICBhW2IgKyAzICsgOTZdID0geihoLCBrLCBsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbmYoYSwgYikge1xuICAgICAgdmFyIGMgPSBhW2IgLSAxICsgMF0sXG4gICAgICAgIGQgPSBhW2IgLSAxICsgMzJdLFxuICAgICAgICBlID0gYVtiIC0gMSArIDY0XSxcbiAgICAgICAgZiA9IGFbYiAtIDEgKyA5Nl07XG4gICAgICBhW2IgKyAwICsgMF0gPSAoYyArIGQgKyAxKSA+PiAxO1xuICAgICAgYVtiICsgMiArIDBdID0gYVtiICsgMCArIDMyXSA9IChkICsgZSArIDEpID4+IDE7XG4gICAgICBhW2IgKyAyICsgMzJdID0gYVtiICsgMCArIDY0XSA9IChlICsgZiArIDEpID4+IDE7XG4gICAgICBhW2IgKyAxICsgMF0gPSB6KGMsIGQsIGUpO1xuICAgICAgYVtiICsgMyArIDBdID0gYVtiICsgMSArIDMyXSA9IHooZCwgZSwgZik7XG4gICAgICBhW2IgKyAzICsgMzJdID0gYVtiICsgMSArIDY0XSA9IHooZSwgZiwgZik7XG4gICAgICBhW2IgKyAzICsgNjRdID0gYVtiICsgMiArIDY0XSA9IGFbYiArIDAgKyA5Nl0gPSBhW2IgKyAxICsgOTZdID0gYVtcbiAgICAgICAgYiArIDIgKyA5NlxuICAgICAgXSA9IGFbYiArIDMgKyA5Nl0gPSBmO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtZihhLCBiKSB7XG4gICAgICB2YXIgYyA9IGFbYiAtIDEgKyAwXSxcbiAgICAgICAgZCA9IGFbYiAtIDEgKyAzMl0sXG4gICAgICAgIGUgPSBhW2IgLSAxICsgNjRdLFxuICAgICAgICBmID0gYVtiIC0gMSArIDk2XSxcbiAgICAgICAgZyA9IGFbYiAtIDEgLSAzMl0sXG4gICAgICAgIGggPSBhW2IgKyAwIC0gMzJdLFxuICAgICAgICBrID0gYVtiICsgMSAtIDMyXSxcbiAgICAgICAgbCA9IGFbYiArIDIgLSAzMl07XG4gICAgICBhW2IgKyAwICsgMF0gPSBhW2IgKyAyICsgMzJdID0gKGMgKyBnICsgMSkgPj4gMTtcbiAgICAgIGFbYiArIDAgKyAzMl0gPSBhW2IgKyAyICsgNjRdID0gKGQgKyBjICsgMSkgPj4gMTtcbiAgICAgIGFbYiArIDAgKyA2NF0gPSBhW2IgKyAyICsgOTZdID0gKGUgKyBkICsgMSkgPj4gMTtcbiAgICAgIGFbYiArIDAgKyA5Nl0gPSAoZiArIGUgKyAxKSA+PiAxO1xuICAgICAgYVtiICsgMyArIDBdID0geihoLCBrLCBsKTtcbiAgICAgIGFbYiArIDIgKyAwXSA9IHooZywgaCwgayk7XG4gICAgICBhW2IgKyAxICsgMF0gPSBhW2IgKyAzICsgMzJdID0geihjLCBnLCBoKTtcbiAgICAgIGFbYiArIDEgKyAzMl0gPSBhW2IgKyAzICsgNjRdID0geihkLCBjLCBnKTtcbiAgICAgIGFbYiArIDEgKyA2NF0gPSBhW2IgKyAzICsgOTZdID0geihlLCBkLCBjKTtcbiAgICAgIGFbYiArIDEgKyA5Nl0gPSB6KGYsIGUsIGQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB4ZihhLCBiKSB7XG4gICAgICB2YXIgYztcbiAgICAgIGZvciAoYyA9IDA7IDggPiBjOyArK2MpIEkoYSwgYiArIDMyICogYywgYSwgYiAtIDMyLCA4KTtcbiAgICB9XG4gICAgZnVuY3Rpb24geWYoYSwgYikge1xuICAgICAgdmFyIGM7XG4gICAgICBmb3IgKGMgPSAwOyA4ID4gYzsgKytjKSBNKGEsIGIsIGFbYiAtIDFdLCA4KSwgKGIgKz0gMzIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsYihhLCBiLCBjKSB7XG4gICAgICB2YXIgZDtcbiAgICAgIGZvciAoZCA9IDA7IDggPiBkOyArK2QpIE0oYiwgYyArIDMyICogZCwgYSwgOCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZmKGEsIGIpIHtcbiAgICAgIHZhciBjID0gOCxcbiAgICAgICAgZDtcbiAgICAgIGZvciAoZCA9IDA7IDggPiBkOyArK2QpIGMgKz0gYVtiICsgZCAtIDMyXSArIGFbYiAtIDEgKyAzMiAqIGRdO1xuICAgICAgbGIoYyA+PiA0LCBhLCBiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQWYoYSwgYikge1xuICAgICAgdmFyIGMgPSA0LFxuICAgICAgICBkO1xuICAgICAgZm9yIChkID0gMDsgOCA+IGQ7ICsrZCkgYyArPSBhW2IgKyBkIC0gMzJdO1xuICAgICAgbGIoYyA+PiAzLCBhLCBiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gemYoYSwgYikge1xuICAgICAgdmFyIGMgPSA0LFxuICAgICAgICBkO1xuICAgICAgZm9yIChkID0gMDsgOCA+IGQ7ICsrZCkgYyArPSBhW2IgLSAxICsgMzIgKiBkXTtcbiAgICAgIGxiKGMgPj4gMywgYSwgYik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEJmKGEsIGIpIHtcbiAgICAgIGxiKDEyOCwgYSwgYik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFiKGEsIGIsIGMpIHtcbiAgICAgIHZhciBkID0gYVtiIC0gY10sXG4gICAgICAgIGUgPSBhW2IgKyAwXSxcbiAgICAgICAgZiA9IDMgKiAoZSAtIGQpICsgUWJbMTAyMCArIGFbYiAtIDIgKiBjXSAtIGFbYiArIGNdXSxcbiAgICAgICAgZyA9IG1iWzExMiArICgoZiArIDQpID4+IDMpXTtcbiAgICAgIGFbYiAtIGNdID0gUlsyNTUgKyBkICsgbWJbMTEyICsgKChmICsgMykgPj4gMyldXTtcbiAgICAgIGFbYiArIDBdID0gUlsyNTUgKyBlIC0gZ107XG4gICAgfVxuICAgIGZ1bmN0aW9uIGpkKGEsIGIsIGMsIGQpIHtcbiAgICAgIHZhciBlID0gYVtiICsgMF0sXG4gICAgICAgIGYgPSBhW2IgKyBjXTtcbiAgICAgIHJldHVybiBVWzI1NSArIGFbYiAtIDIgKiBjXSAtIGFbYiAtIGNdXSA+IGQgfHwgVVsyNTUgKyBmIC0gZV0gPiBkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBrZChhLCBiLCBjLCBkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA0ICogVVsyNTUgKyBhW2IgLSBjXSAtIGFbYiArIDBdXSArIFVbMjU1ICsgYVtiIC0gMiAqIGNdIC0gYVtiICsgY11dIDw9IGRcbiAgICAgICk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxkKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIHZhciBmID0gYVtiIC0gMyAqIGNdLFxuICAgICAgICBnID0gYVtiIC0gMiAqIGNdLFxuICAgICAgICBoID0gYVtiIC0gY10sXG4gICAgICAgIGsgPSBhW2IgKyAwXSxcbiAgICAgICAgbCA9IGFbYiArIGNdLFxuICAgICAgICBtID0gYVtiICsgMiAqIGNdLFxuICAgICAgICBuID0gYVtiICsgMyAqIGNdO1xuICAgICAgcmV0dXJuIDQgKiBVWzI1NSArIGggLSBrXSArIFVbMjU1ICsgZyAtIGxdID4gZFxuICAgICAgICA/IDBcbiAgICAgICAgOiBVWzI1NSArIGFbYiAtIDQgKiBjXSAtIGZdIDw9IGUgJiZcbiAgICAgICAgICAgIFVbMjU1ICsgZiAtIGddIDw9IGUgJiZcbiAgICAgICAgICAgIFVbMjU1ICsgZyAtIGhdIDw9IGUgJiZcbiAgICAgICAgICAgIFVbMjU1ICsgbiAtIG1dIDw9IGUgJiZcbiAgICAgICAgICAgIFVbMjU1ICsgbSAtIGxdIDw9IGUgJiZcbiAgICAgICAgICAgIFVbMjU1ICsgbCAtIGtdIDw9IGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdkKGEsIGIsIGMsIGQpIHtcbiAgICAgIHZhciBlID0gMiAqIGQgKyAxO1xuICAgICAgZm9yIChkID0gMDsgMTYgPiBkOyArK2QpIGtkKGEsIGIgKyBkLCBjLCBlKSAmJiBhYihhLCBiICsgZCwgYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhkKGEsIGIsIGMsIGQpIHtcbiAgICAgIHZhciBlID0gMiAqIGQgKyAxO1xuICAgICAgZm9yIChkID0gMDsgMTYgPiBkOyArK2QpIGtkKGEsIGIgKyBkICogYywgMSwgZSkgJiYgYWIoYSwgYiArIGQgKiBjLCAxKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmYoYSwgYiwgYywgZCkge1xuICAgICAgdmFyIGU7XG4gICAgICBmb3IgKGUgPSAzOyAwIDwgZTsgLS1lKSAoYiArPSA0ICogYyksIGdkKGEsIGIsIGMsIGQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjZihhLCBiLCBjLCBkKSB7XG4gICAgICB2YXIgZTtcbiAgICAgIGZvciAoZSA9IDM7IDAgPCBlOyAtLWUpIChiICs9IDQpLCBoZChhLCBiLCBjLCBkKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZWEoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkge1xuICAgICAgZm9yIChmID0gMiAqIGYgKyAxOyAwIDwgZS0tOyApIHtcbiAgICAgICAgaWYgKGxkKGEsIGIsIGMsIGYsIGcpKVxuICAgICAgICAgIGlmIChqZChhLCBiLCBjLCBoKSkgYWIoYSwgYiwgYyk7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgayA9IGEsXG4gICAgICAgICAgICAgIGwgPSBiLFxuICAgICAgICAgICAgICBtID0gYyxcbiAgICAgICAgICAgICAgbiA9IGtbbCAtIDIgKiBtXSxcbiAgICAgICAgICAgICAgciA9IGtbbCAtIG1dLFxuICAgICAgICAgICAgICBxID0ga1tsICsgMF0sXG4gICAgICAgICAgICAgIHQgPSBrW2wgKyBtXSxcbiAgICAgICAgICAgICAgdiA9IGtbbCArIDIgKiBtXSxcbiAgICAgICAgICAgICAgcCA9IFFiWzEwMjAgKyAzICogKHEgLSByKSArIFFiWzEwMjAgKyBuIC0gdF1dLFxuICAgICAgICAgICAgICB1ID0gKDI3ICogcCArIDYzKSA+PiA3LFxuICAgICAgICAgICAgICB3ID0gKDE4ICogcCArIDYzKSA+PiA3LFxuICAgICAgICAgICAgICBwID0gKDkgKiBwICsgNjMpID4+IDc7XG4gICAgICAgICAgICBrW2wgLSAzICogbV0gPSBSWzI1NSArIGtbbCAtIDMgKiBtXSArIHBdO1xuICAgICAgICAgICAga1tsIC0gMiAqIG1dID0gUlsyNTUgKyBuICsgd107XG4gICAgICAgICAgICBrW2wgLSBtXSA9IFJbMjU1ICsgciArIHVdO1xuICAgICAgICAgICAga1tsICsgMF0gPSBSWzI1NSArIHEgLSB1XTtcbiAgICAgICAgICAgIGtbbCArIG1dID0gUlsyNTUgKyB0IC0gd107XG4gICAgICAgICAgICBrW2wgKyAyICogbV0gPSBSWzI1NSArIHYgLSBwXTtcbiAgICAgICAgICB9XG4gICAgICAgIGIgKz0gZDtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gRmEoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkge1xuICAgICAgZm9yIChmID0gMiAqIGYgKyAxOyAwIDwgZS0tOyApIHtcbiAgICAgICAgaWYgKGxkKGEsIGIsIGMsIGYsIGcpKVxuICAgICAgICAgIGlmIChqZChhLCBiLCBjLCBoKSkgYWIoYSwgYiwgYyk7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgayA9IGEsXG4gICAgICAgICAgICAgIGwgPSBiLFxuICAgICAgICAgICAgICBtID0gYyxcbiAgICAgICAgICAgICAgbiA9IGtbbCAtIG1dLFxuICAgICAgICAgICAgICByID0ga1tsICsgMF0sXG4gICAgICAgICAgICAgIHEgPSBrW2wgKyBtXSxcbiAgICAgICAgICAgICAgdCA9IDMgKiAociAtIG4pLFxuICAgICAgICAgICAgICB2ID0gbWJbMTEyICsgKCh0ICsgNCkgPj4gMyldLFxuICAgICAgICAgICAgICB0ID0gbWJbMTEyICsgKCh0ICsgMykgPj4gMyldLFxuICAgICAgICAgICAgICBwID0gKHYgKyAxKSA+PiAxO1xuICAgICAgICAgICAga1tsIC0gMiAqIG1dID0gUlsyNTUgKyBrW2wgLSAyICogbV0gKyBwXTtcbiAgICAgICAgICAgIGtbbCAtIG1dID0gUlsyNTUgKyBuICsgdF07XG4gICAgICAgICAgICBrW2wgKyAwXSA9IFJbMjU1ICsgciAtIHZdO1xuICAgICAgICAgICAga1tsICsgbV0gPSBSWzI1NSArIHEgLSBwXTtcbiAgICAgICAgICB9XG4gICAgICAgIGIgKz0gZDtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gVWUoYSwgYiwgYywgZCwgZSwgZikge1xuICAgICAgZWEoYSwgYiwgYywgMSwgMTYsIGQsIGUsIGYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBWZShhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgICBlYShhLCBiLCAxLCBjLCAxNiwgZCwgZSwgZik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFllKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgIHZhciBnO1xuICAgICAgZm9yIChnID0gMzsgMCA8IGc7IC0tZykgKGIgKz0gNCAqIGMpLCBGYShhLCBiLCBjLCAxLCAxNiwgZCwgZSwgZik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFplKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgIHZhciBnO1xuICAgICAgZm9yIChnID0gMzsgMCA8IGc7IC0tZykgKGIgKz0gNCksIEZhKGEsIGIsIDEsIGMsIDE2LCBkLCBlLCBmKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gV2UoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkge1xuICAgICAgZWEoYSwgYiwgZSwgMSwgOCwgZiwgZywgaCk7XG4gICAgICBlYShjLCBkLCBlLCAxLCA4LCBmLCBnLCBoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gWGUoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkge1xuICAgICAgZWEoYSwgYiwgMSwgZSwgOCwgZiwgZywgaCk7XG4gICAgICBlYShjLCBkLCAxLCBlLCA4LCBmLCBnLCBoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gJGUoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkge1xuICAgICAgRmEoYSwgYiArIDQgKiBlLCBlLCAxLCA4LCBmLCBnLCBoKTtcbiAgICAgIEZhKGMsIGQgKyA0ICogZSwgZSwgMSwgOCwgZiwgZywgaCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFmKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpIHtcbiAgICAgIEZhKGEsIGIgKyA0LCAxLCBlLCA4LCBmLCBnLCBoKTtcbiAgICAgIEZhKGMsIGQgKyA0LCAxLCBlLCA4LCBmLCBnLCBoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ2YoKSB7XG4gICAgICB0aGlzLmJhID0gbmV3IENiKCk7XG4gICAgICB0aGlzLmVjID0gW107XG4gICAgICB0aGlzLmNjID0gW107XG4gICAgICB0aGlzLk1jID0gW107XG4gICAgICB0aGlzLkRjID0gdGhpcy5OYyA9IHRoaXMuZGMgPSB0aGlzLmZjID0gMDtcbiAgICAgIHRoaXMuT2EgPSBuZXcgVWQoKTtcbiAgICAgIHRoaXMubWVtb3J5ID0gMDtcbiAgICAgIHRoaXMuSWIgPSBcIk91dHB1dEZ1bmNcIjtcbiAgICAgIHRoaXMuSmIgPSBcIk91dHB1dEFscGhhRnVuY1wiO1xuICAgICAgdGhpcy5OZCA9IFwiT3V0cHV0Um93RnVuY1wiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtZCgpIHtcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmtkID0gdGhpcy5oYSA9IHRoaXMudyA9IDA7XG4gICAgICB0aGlzLm5hID0gW107XG4gICAgICB0aGlzLnhhID0gdGhpcy5nYiA9IHRoaXMuSmEgPSB0aGlzLlNhID0gdGhpcy5QID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gRGYoKSB7XG4gICAgICB0aGlzLm5jID0gdGhpcy5FYSA9IHRoaXMuYiA9IHRoaXMuaGMgPSAwO1xuICAgICAgdGhpcy5LID0gW107XG4gICAgICB0aGlzLncgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBFZigpIHtcbiAgICAgIHRoaXMudWEgPSAwO1xuICAgICAgdGhpcy5XYSA9IG5ldyBhYygpO1xuICAgICAgdGhpcy52YiA9IG5ldyBhYygpO1xuICAgICAgdGhpcy5tZCA9IHRoaXMueGMgPSB0aGlzLndjID0gMDtcbiAgICAgIHRoaXMudmMgPSBbXTtcbiAgICAgIHRoaXMuV2IgPSAwO1xuICAgICAgdGhpcy5ZYSA9IG5ldyBVYigpO1xuICAgICAgdGhpcy55YyA9IG5ldyBPKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGplKCkge1xuICAgICAgdGhpcy54YiA9IHRoaXMuYSA9IDA7XG4gICAgICB0aGlzLmwgPSBuZXcgT2EoKTtcbiAgICAgIHRoaXMuY2EgPSBuZXcgQ2IoKTtcbiAgICAgIHRoaXMuViA9IFtdO1xuICAgICAgdGhpcy5CYSA9IDA7XG4gICAgICB0aGlzLlRhID0gW107XG4gICAgICB0aGlzLlVhID0gMDtcbiAgICAgIHRoaXMubSA9IG5ldyBSYSgpO1xuICAgICAgdGhpcy5QYiA9IDA7XG4gICAgICB0aGlzLndkID0gbmV3IFJhKCk7XG4gICAgICB0aGlzLk1hID0gdGhpcy4kID0gdGhpcy5DID0gdGhpcy5pID0gdGhpcy5jID0gdGhpcy54ZCA9IDA7XG4gICAgICB0aGlzLnMgPSBuZXcgRWYoKTtcbiAgICAgIHRoaXMuYWIgPSAwO1xuICAgICAgdGhpcy5nYyA9IHdhKDQsIERmKTtcbiAgICAgIHRoaXMuT2MgPSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBGZigpIHtcbiAgICAgIHRoaXMuTGMgPSB0aGlzLlogPSB0aGlzLiRhID0gdGhpcy5pID0gdGhpcy5jID0gMDtcbiAgICAgIHRoaXMubCA9IG5ldyBPYSgpO1xuICAgICAgdGhpcy5pYyA9IDA7XG4gICAgICB0aGlzLmNhID0gW107XG4gICAgICB0aGlzLnRiID0gMDtcbiAgICAgIHRoaXMucWQgPSBudWxsO1xuICAgICAgdGhpcy5yZCA9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJiKGEsIGIsIGMsIGQsIGUsIGYsIGcpIHtcbiAgICAgIGEgPSBudWxsID09IGEgPyAwIDogYVtiICsgMF07XG4gICAgICBmb3IgKGIgPSAwOyBiIDwgZzsgKytiKSAoZVtmICsgYl0gPSAoYSArIGNbZCArIGJdKSAmIDI1NSksIChhID0gZVtmICsgYl0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBHZihhLCBiLCBjLCBkLCBlLCBmLCBnKSB7XG4gICAgICBpZiAobnVsbCA9PSBhKSBSYihudWxsLCBudWxsLCBjLCBkLCBlLCBmLCBnKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICB2YXIgaDtcbiAgICAgICAgZm9yIChoID0gMDsgaCA8IGc7ICsraCkgZVtmICsgaF0gPSAoYVtiICsgaF0gKyBjW2QgKyBoXSkgJiAyNTU7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIEhmKGEsIGIsIGMsIGQsIGUsIGYsIGcpIHtcbiAgICAgIGlmIChudWxsID09IGEpIFJiKG51bGwsIG51bGwsIGMsIGQsIGUsIGYsIGcpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBoID0gYVtiICsgMF0sXG4gICAgICAgICAgayA9IGgsXG4gICAgICAgICAgbCA9IGgsXG4gICAgICAgICAgbTtcbiAgICAgICAgZm9yIChtID0gMDsgbSA8IGc7ICsrbSlcbiAgICAgICAgICAoaCA9IGFbYiArIG1dKSxcbiAgICAgICAgICAgIChrID0gbCArIGggLSBrKSxcbiAgICAgICAgICAgIChsID0gKGNbZCArIG1dICsgKGsgJiAtMjU2ID8gKDAgPiBrID8gMCA6IDI1NSkgOiBrKSkgJiAyNTUpLFxuICAgICAgICAgICAgKGsgPSBoKSxcbiAgICAgICAgICAgIChlW2YgKyBtXSA9IGwpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBMZShhLCBiLCBjLCBkKSB7XG4gICAgICB2YXIgZSA9IGIud2lkdGgsXG4gICAgICAgIGYgPSBiLm87XG4gICAgICB4KG51bGwgIT0gYSAmJiBudWxsICE9IGIpO1xuICAgICAgaWYgKDAgPiBjIHx8IDAgPj0gZCB8fCBjICsgZCA+IGYpIHJldHVybiBudWxsO1xuICAgICAgaWYgKCFhLkNjKSB7XG4gICAgICAgIGlmIChudWxsID09IGEuZ2EpIHtcbiAgICAgICAgICBhLmdhID0gbmV3IEZmKCk7XG4gICAgICAgICAgdmFyIGc7XG4gICAgICAgICAgKGcgPSBudWxsID09IGEuZ2EpIHx8XG4gICAgICAgICAgICAoKGcgPSBiLndpZHRoICogYi5vKSxcbiAgICAgICAgICAgIHgoMCA9PSBhLkdiLmxlbmd0aCksXG4gICAgICAgICAgICAoYS5HYiA9IFYoZykpLFxuICAgICAgICAgICAgKGEuVWMgPSAwKSxcbiAgICAgICAgICAgIG51bGwgPT0gYS5HYlxuICAgICAgICAgICAgICA/IChnID0gMClcbiAgICAgICAgICAgICAgOiAoKGEubWIgPSBhLkdiKSwgKGEubmIgPSBhLlVjKSwgKGEucmMgPSBudWxsKSwgKGcgPSAxKSksXG4gICAgICAgICAgICAoZyA9ICFnKSk7XG4gICAgICAgICAgaWYgKCFnKSB7XG4gICAgICAgICAgICBnID0gYS5nYTtcbiAgICAgICAgICAgIHZhciBoID0gYS5GYSxcbiAgICAgICAgICAgICAgayA9IGEuUCxcbiAgICAgICAgICAgICAgbCA9IGEucWMsXG4gICAgICAgICAgICAgIG0gPSBhLm1iLFxuICAgICAgICAgICAgICBuID0gYS5uYixcbiAgICAgICAgICAgICAgciA9IGsgKyAxLFxuICAgICAgICAgICAgICBxID0gbCAtIDEsXG4gICAgICAgICAgICAgIHQgPSBnLmw7XG4gICAgICAgICAgICB4KG51bGwgIT0gaCAmJiBudWxsICE9IG0gJiYgbnVsbCAhPSBiKTtcbiAgICAgICAgICAgIGlhWzBdID0gbnVsbDtcbiAgICAgICAgICAgIGlhWzFdID0gUmI7XG4gICAgICAgICAgICBpYVsyXSA9IEdmO1xuICAgICAgICAgICAgaWFbM10gPSBIZjtcbiAgICAgICAgICAgIGcuY2EgPSBtO1xuICAgICAgICAgICAgZy50YiA9IG47XG4gICAgICAgICAgICBnLmMgPSBiLndpZHRoO1xuICAgICAgICAgICAgZy5pID0gYi5oZWlnaHQ7XG4gICAgICAgICAgICB4KDAgPCBnLmMgJiYgMCA8IGcuaSk7XG4gICAgICAgICAgICBpZiAoMSA+PSBsKSBiID0gMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgICAgICAoKGcuJGEgPSAoaFtrICsgMF0gPj4gMCkgJiAzKSxcbiAgICAgICAgICAgICAgKGcuWiA9IChoW2sgKyAwXSA+PiAyKSAmIDMpLFxuICAgICAgICAgICAgICAoZy5MYyA9IChoW2sgKyAwXSA+PiA0KSAmIDMpLFxuICAgICAgICAgICAgICAoayA9IChoW2sgKyAwXSA+PiA2KSAmIDMpLFxuICAgICAgICAgICAgICAwID4gZy4kYSB8fCAxIDwgZy4kYSB8fCA0IDw9IGcuWiB8fCAxIDwgZy5MYyB8fCBrKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBiID0gMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgICAgICAoKHQucHV0ID0ga2MpLFxuICAgICAgICAgICAgICAodC5hYyA9IGdjKSxcbiAgICAgICAgICAgICAgKHQuYmMgPSBsYyksXG4gICAgICAgICAgICAgICh0Lm1hID0gZyksXG4gICAgICAgICAgICAgICh0LndpZHRoID0gYi53aWR0aCksXG4gICAgICAgICAgICAgICh0LmhlaWdodCA9IGIuaGVpZ2h0KSxcbiAgICAgICAgICAgICAgKHQuRGEgPSBiLkRhKSxcbiAgICAgICAgICAgICAgKHQudiA9IGIudiksXG4gICAgICAgICAgICAgICh0LnZhID0gYi52YSksXG4gICAgICAgICAgICAgICh0LmogPSBiLmopLFxuICAgICAgICAgICAgICAodC5vID0gYi5vKSxcbiAgICAgICAgICAgICAgZy4kYSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgYjoge1xuICAgICAgICAgICAgICAgIHgoMSA9PSBnLiRhKSwgKGIgPSBCYygpKTtcbiAgICAgICAgICAgICAgICBjOiBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBiKSB7XG4gICAgICAgICAgICAgICAgICAgIGIgPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhayBiO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgeChudWxsICE9IGcpO1xuICAgICAgICAgICAgICAgICAgZy5tYyA9IGI7XG4gICAgICAgICAgICAgICAgICBiLmMgPSBnLmM7XG4gICAgICAgICAgICAgICAgICBiLmkgPSBnLmk7XG4gICAgICAgICAgICAgICAgICBiLmwgPSBnLmw7XG4gICAgICAgICAgICAgICAgICBiLmwubWEgPSBnO1xuICAgICAgICAgICAgICAgICAgYi5sLndpZHRoID0gZy5jO1xuICAgICAgICAgICAgICAgICAgYi5sLmhlaWdodCA9IGcuaTtcbiAgICAgICAgICAgICAgICAgIGIuYSA9IDA7XG4gICAgICAgICAgICAgICAgICBjYihiLm0sIGgsIHIsIHEpO1xuICAgICAgICAgICAgICAgICAgaWYgKCFyYihnLmMsIGcuaSwgMSwgYiwgbnVsbCkpIGJyZWFrIGM7XG4gICAgICAgICAgICAgICAgICAxID09IGIuYWIgJiYgMyA9PSBiLmdjWzBdLmhjICYmIHljKGIucylcbiAgICAgICAgICAgICAgICAgICAgPyAoKGcuaWMgPSAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAoaCA9IGIuYyAqIGIuaSksXG4gICAgICAgICAgICAgICAgICAgICAgKGIuVGEgPSBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICAoYi5VYSA9IDApLFxuICAgICAgICAgICAgICAgICAgICAgIChiLlYgPSBWKGgpKSxcbiAgICAgICAgICAgICAgICAgICAgICAoYi5CYSA9IDApLFxuICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gYi5WID8gKChiLmEgPSAxKSwgKGIgPSAwKSkgOiAoYiA9IDEpKVxuICAgICAgICAgICAgICAgICAgICA6ICgoZy5pYyA9IDApLCAoYiA9IEVjKGIsIGcuYykpKTtcbiAgICAgICAgICAgICAgICAgIGlmICghYikgYnJlYWsgYztcbiAgICAgICAgICAgICAgICAgIGIgPSAxO1xuICAgICAgICAgICAgICAgICAgYnJlYWsgYjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZy5tYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgYiA9IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgYiA9IHEgPj0gZy5jICogZy5pO1xuICAgICAgICAgICAgZyA9ICFiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZykgcmV0dXJuIG51bGw7XG4gICAgICAgICAgMSAhPSBhLmdhLkxjID8gKGEuR2EgPSAwKSA6IChkID0gZiAtIGMpO1xuICAgICAgICB9XG4gICAgICAgIHgobnVsbCAhPSBhLmdhKTtcbiAgICAgICAgeChjICsgZCA8PSBmKTtcbiAgICAgICAgYToge1xuICAgICAgICAgIGggPSBhLmdhO1xuICAgICAgICAgIGIgPSBoLmM7XG4gICAgICAgICAgZiA9IGgubC5vO1xuICAgICAgICAgIGlmICgwID09IGguJGEpIHtcbiAgICAgICAgICAgIHIgPSBhLnJjO1xuICAgICAgICAgICAgcSA9IGEuVmM7XG4gICAgICAgICAgICB0ID0gYS5GYTtcbiAgICAgICAgICAgIGsgPSBhLlAgKyAxICsgYyAqIGI7XG4gICAgICAgICAgICBsID0gYS5tYjtcbiAgICAgICAgICAgIG0gPSBhLm5iICsgYyAqIGI7XG4gICAgICAgICAgICB4KGsgPD0gYS5QICsgYS5xYyk7XG4gICAgICAgICAgICBpZiAoMCAhPSBoLlopXG4gICAgICAgICAgICAgIGZvciAoeChudWxsICE9IGlhW2guWl0pLCBnID0gMDsgZyA8IGQ7ICsrZylcbiAgICAgICAgICAgICAgICBpYVtoLlpdKHIsIHEsIHQsIGssIGwsIG0sIGIpLFxuICAgICAgICAgICAgICAgICAgKHIgPSBsKSxcbiAgICAgICAgICAgICAgICAgIChxID0gbSksXG4gICAgICAgICAgICAgICAgICAobSArPSBiKSxcbiAgICAgICAgICAgICAgICAgIChrICs9IGIpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBmb3IgKGcgPSAwOyBnIDwgZDsgKytnKVxuICAgICAgICAgICAgICAgIEkobCwgbSwgdCwgaywgYiksIChyID0gbCksIChxID0gbSksIChtICs9IGIpLCAoayArPSBiKTtcbiAgICAgICAgICAgIGEucmMgPSByO1xuICAgICAgICAgICAgYS5WYyA9IHE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHgobnVsbCAhPSBoLm1jKTtcbiAgICAgICAgICAgIGIgPSBjICsgZDtcbiAgICAgICAgICAgIGcgPSBoLm1jO1xuICAgICAgICAgICAgeChudWxsICE9IGcpO1xuICAgICAgICAgICAgeChiIDw9IGcuaSk7XG4gICAgICAgICAgICBpZiAoZy5DID49IGIpIGIgPSAxO1xuICAgICAgICAgICAgZWxzZSBpZiAoKGguaWMgfHwgQWEoKSwgaC5pYykpIHtcbiAgICAgICAgICAgICAgdmFyIGggPSBnLlYsXG4gICAgICAgICAgICAgICAgciA9IGcuQmEsXG4gICAgICAgICAgICAgICAgcSA9IGcuYyxcbiAgICAgICAgICAgICAgICB2ID0gZy5pLFxuICAgICAgICAgICAgICAgIHQgPSAxLFxuICAgICAgICAgICAgICAgIGsgPSBnLiQgLyBxLFxuICAgICAgICAgICAgICAgIGwgPSBnLiQgJSBxLFxuICAgICAgICAgICAgICAgIG0gPSBnLm0sXG4gICAgICAgICAgICAgICAgbiA9IGcucyxcbiAgICAgICAgICAgICAgICBwID0gZy4kLFxuICAgICAgICAgICAgICAgIHUgPSBxICogdixcbiAgICAgICAgICAgICAgICB3ID0gcSAqIGIsXG4gICAgICAgICAgICAgICAgeSA9IG4ud2MsXG4gICAgICAgICAgICAgICAgQSA9IHAgPCB3ID8gaGEobiwgbCwgaykgOiBudWxsO1xuICAgICAgICAgICAgICB4KHAgPD0gdSk7XG4gICAgICAgICAgICAgIHgoYiA8PSB2KTtcbiAgICAgICAgICAgICAgeCh5YyhuKSk7XG4gICAgICAgICAgICAgIGM6IGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBmb3IgKDsgIW0uaCAmJiBwIDwgdzsgKSB7XG4gICAgICAgICAgICAgICAgICBsICYgeSB8fCAoQSA9IGhhKG4sIGwsIGspKTtcbiAgICAgICAgICAgICAgICAgIHgobnVsbCAhPSBBKTtcbiAgICAgICAgICAgICAgICAgIFNhKG0pO1xuICAgICAgICAgICAgICAgICAgdiA9IHVhKEEuR1swXSwgQS5IWzBdLCBtKTtcbiAgICAgICAgICAgICAgICAgIGlmICgyNTYgPiB2KVxuICAgICAgICAgICAgICAgICAgICAoaFtyICsgcF0gPSB2KSxcbiAgICAgICAgICAgICAgICAgICAgICArK3AsXG4gICAgICAgICAgICAgICAgICAgICAgKytsLFxuICAgICAgICAgICAgICAgICAgICAgIGwgPj0gcSAmJiAoKGwgPSAwKSwgKytrLCBrIDw9IGIgJiYgIShrICUgMTYpICYmIEliKGcsIGspKTtcbiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKDI4MCA+IHYpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBpYih2IC0gMjU2LCBtKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIEUgPSB1YShBLkdbNF0sIEEuSFs0XSwgbSk7XG4gICAgICAgICAgICAgICAgICAgIFNhKG0pO1xuICAgICAgICAgICAgICAgICAgICBFID0gaWIoRSwgbSk7XG4gICAgICAgICAgICAgICAgICAgIEUgPSBuYyhxLCBFKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgPj0gRSAmJiB1IC0gcCA+PSB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIEI7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChCID0gMDsgQiA8IHY7ICsrQikgaFtyICsgcCArIEJdID0gaFtyICsgcCArIEIgLSBFXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICB0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhayBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHAgKz0gdjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsICs9IHY7IGwgPj0gcTsgKVxuICAgICAgICAgICAgICAgICAgICAgIChsIC09IHEpLCArK2ssIGsgPD0gYiAmJiAhKGsgJSAxNikgJiYgSWIoZywgayk7XG4gICAgICAgICAgICAgICAgICAgIHAgPCB3ICYmIGwgJiB5ICYmIChBID0gaGEobiwgbCwgaykpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrIGM7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB4KG0uaCA9PSBkYihtKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEliKGcsIGsgPiBiID8gYiA6IGspO1xuICAgICAgICAgICAgICAgIGJyZWFrIGM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIXQgfHwgKG0uaCAmJiBwIDwgdSkgPyAoKHQgPSAwKSwgKGcuYSA9IG0uaCA/IDUgOiAzKSkgOiAoZy4kID0gcCk7XG4gICAgICAgICAgICAgIGIgPSB0O1xuICAgICAgICAgICAgfSBlbHNlIGIgPSBKYihnLCBnLlYsIGcuQmEsIGcuYywgZy5pLCBiLCBzZSk7XG4gICAgICAgICAgICBpZiAoIWIpIHtcbiAgICAgICAgICAgICAgZCA9IDA7XG4gICAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGMgKyBkID49IGYgJiYgKGEuQ2MgPSAxKTtcbiAgICAgICAgICBkID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWQpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYS5DYyAmJlxuICAgICAgICAgICgoZCA9IGEuZ2EpLCBudWxsICE9IGQgJiYgKGQubWMgPSBudWxsKSwgKGEuZ2EgPSBudWxsKSwgMCA8IGEuR2EpXG4gICAgICAgIClcbiAgICAgICAgICByZXR1cm4gYWxlcnQoXCJ0b2RvOldlYlBEZXF1YW50aXplTGV2ZWxzXCIpLCBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGEubmIgKyBjICogZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gSWYoYSwgYiwgYywgZCwgZSwgZikge1xuICAgICAgZm9yICg7IDAgPCBlLS07ICkge1xuICAgICAgICB2YXIgZyA9IGEsXG4gICAgICAgICAgaCA9IGIgKyAoYyA/IDEgOiAwKSxcbiAgICAgICAgICBrID0gYSxcbiAgICAgICAgICBsID0gYiArIChjID8gMCA6IDMpLFxuICAgICAgICAgIG07XG4gICAgICAgIGZvciAobSA9IDA7IG0gPCBkOyArK20pIHtcbiAgICAgICAgICB2YXIgbiA9IGtbbCArIDQgKiBtXTtcbiAgICAgICAgICAyNTUgIT0gbiAmJlxuICAgICAgICAgICAgKChuICo9IDMyODk3KSxcbiAgICAgICAgICAgIChnW2ggKyA0ICogbSArIDBdID0gKGdbaCArIDQgKiBtICsgMF0gKiBuKSA+PiAyMyksXG4gICAgICAgICAgICAoZ1toICsgNCAqIG0gKyAxXSA9IChnW2ggKyA0ICogbSArIDFdICogbikgPj4gMjMpLFxuICAgICAgICAgICAgKGdbaCArIDQgKiBtICsgMl0gPSAoZ1toICsgNCAqIG0gKyAyXSAqIG4pID4+IDIzKSk7XG4gICAgICAgIH1cbiAgICAgICAgYiArPSBmO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBKZihhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBmb3IgKDsgMCA8IGQtLTsgKSB7XG4gICAgICAgIHZhciBmO1xuICAgICAgICBmb3IgKGYgPSAwOyBmIDwgYzsgKytmKSB7XG4gICAgICAgICAgdmFyIGcgPSBhW2IgKyAyICogZiArIDBdLFxuICAgICAgICAgICAgaCA9IGFbYiArIDIgKiBmICsgMV0sXG4gICAgICAgICAgICBrID0gaCAmIDE1LFxuICAgICAgICAgICAgbCA9IDQzNjkgKiBrLFxuICAgICAgICAgICAgaCA9ICgoKGggJiAyNDApIHwgKGggPj4gNCkpICogbCkgPj4gMTY7XG4gICAgICAgICAgYVtiICsgMiAqIGYgKyAwXSA9XG4gICAgICAgICAgICAoKCgoKGcgJiAyNDApIHwgKGcgPj4gNCkpICogbCkgPj4gMTYpICYgMjQwKSB8XG4gICAgICAgICAgICAoKCgoKChnICYgMTUpIHwgKGcgPDwgNCkpICogbCkgPj4gMTYpID4+IDQpICYgMTUpO1xuICAgICAgICAgIGFbYiArIDIgKiBmICsgMV0gPSAoaCAmIDI0MCkgfCBrO1xuICAgICAgICB9XG4gICAgICAgIGIgKz0gZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gS2YoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkge1xuICAgICAgdmFyIGsgPSAyNTUsXG4gICAgICAgIGwsXG4gICAgICAgIG07XG4gICAgICBmb3IgKG0gPSAwOyBtIDwgZTsgKyttKSB7XG4gICAgICAgIGZvciAobCA9IDA7IGwgPCBkOyArK2wpIHtcbiAgICAgICAgICB2YXIgbiA9IGFbYiArIGxdO1xuICAgICAgICAgIGZbZyArIDQgKiBsXSA9IG47XG4gICAgICAgICAgayAmPSBuO1xuICAgICAgICB9XG4gICAgICAgIGIgKz0gYztcbiAgICAgICAgZyArPSBoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDI1NSAhPSBrO1xuICAgIH1cbiAgICBmdW5jdGlvbiBMZihhLCBiLCBjLCBkLCBlKSB7XG4gICAgICB2YXIgZjtcbiAgICAgIGZvciAoZiA9IDA7IGYgPCBlOyArK2YpIGNbZCArIGZdID0gYVtiICsgZl0gPj4gODtcbiAgICB9XG4gICAgZnVuY3Rpb24gQWEoKSB7XG4gICAgICB6YSA9IElmO1xuICAgICAgdmMgPSBKZjtcbiAgICAgIGZjID0gS2Y7XG4gICAgICBGYyA9IExmO1xuICAgIH1cbiAgICBmdW5jdGlvbiB2YShhLCBiLCBjKSB7XG4gICAgICBzZWxmW2FdID0gZnVuY3Rpb24oYSwgZSwgZiwgZywgaCwgaywgbCwgbSwgbiwgciwgcSwgdCwgdiwgcCwgdSwgdywgeSkge1xuICAgICAgICB2YXIgZCxcbiAgICAgICAgICBFID0gKHkgLSAxKSA+PiAxO1xuICAgICAgICB2YXIgQiA9IGhbayArIDBdIHwgKGxbbSArIDBdIDw8IDE2KTtcbiAgICAgICAgdmFyIEMgPSBuW3IgKyAwXSB8IChxW3QgKyAwXSA8PCAxNik7XG4gICAgICAgIHgobnVsbCAhPSBhKTtcbiAgICAgICAgdmFyIHogPSAoMyAqIEIgKyBDICsgMTMxMDc0KSA+PiAyO1xuICAgICAgICBiKGFbZSArIDBdLCB6ICYgMjU1LCB6ID4+IDE2LCB2LCBwKTtcbiAgICAgICAgbnVsbCAhPSBmICYmXG4gICAgICAgICAgKCh6ID0gKDMgKiBDICsgQiArIDEzMTA3NCkgPj4gMiksXG4gICAgICAgICAgYihmW2cgKyAwXSwgeiAmIDI1NSwgeiA+PiAxNiwgdSwgdykpO1xuICAgICAgICBmb3IgKGQgPSAxOyBkIDw9IEU7ICsrZCkge1xuICAgICAgICAgIHZhciBEID0gaFtrICsgZF0gfCAobFttICsgZF0gPDwgMTYpO1xuICAgICAgICAgIHZhciBHID0gbltyICsgZF0gfCAocVt0ICsgZF0gPDwgMTYpO1xuICAgICAgICAgIHZhciBGID0gQiArIEQgKyBDICsgRyArIDUyNDI5NjtcbiAgICAgICAgICB2YXIgSCA9IChGICsgMiAqIChEICsgQykpID4+IDM7XG4gICAgICAgICAgRiA9IChGICsgMiAqIChCICsgRykpID4+IDM7XG4gICAgICAgICAgeiA9IChIICsgQikgPj4gMTtcbiAgICAgICAgICBCID0gKEYgKyBEKSA+PiAxO1xuICAgICAgICAgIGIoYVtlICsgMiAqIGQgLSAxXSwgeiAmIDI1NSwgeiA+PiAxNiwgdiwgcCArICgyICogZCAtIDEpICogYyk7XG4gICAgICAgICAgYihhW2UgKyAyICogZCAtIDBdLCBCICYgMjU1LCBCID4+IDE2LCB2LCBwICsgKDIgKiBkIC0gMCkgKiBjKTtcbiAgICAgICAgICBudWxsICE9IGYgJiZcbiAgICAgICAgICAgICgoeiA9IChGICsgQykgPj4gMSksXG4gICAgICAgICAgICAoQiA9IChIICsgRykgPj4gMSksXG4gICAgICAgICAgICBiKGZbZyArIDIgKiBkIC0gMV0sIHogJiAyNTUsIHogPj4gMTYsIHUsIHcgKyAoMiAqIGQgLSAxKSAqIGMpLFxuICAgICAgICAgICAgYihmW2cgKyAyICogZCArIDBdLCBCICYgMjU1LCBCID4+IDE2LCB1LCB3ICsgKDIgKiBkICsgMCkgKiBjKSk7XG4gICAgICAgICAgQiA9IEQ7XG4gICAgICAgICAgQyA9IEc7XG4gICAgICAgIH1cbiAgICAgICAgeSAmIDEgfHxcbiAgICAgICAgICAoKHogPSAoMyAqIEIgKyBDICsgMTMxMDc0KSA+PiAyKSxcbiAgICAgICAgICBiKGFbZSArIHkgLSAxXSwgeiAmIDI1NSwgeiA+PiAxNiwgdiwgcCArICh5IC0gMSkgKiBjKSxcbiAgICAgICAgICBudWxsICE9IGYgJiZcbiAgICAgICAgICAgICgoeiA9ICgzICogQyArIEIgKyAxMzEwNzQpID4+IDIpLFxuICAgICAgICAgICAgYihmW2cgKyB5IC0gMV0sIHogJiAyNTUsIHogPj4gMTYsIHUsIHcgKyAoeSAtIDEpICogYykpKTtcbiAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGljKCkge1xuICAgICAgUFtDYV0gPSBNZjtcbiAgICAgIFBbVWFdID0gbmQ7XG4gICAgICBQW3RjXSA9IE5mO1xuICAgICAgUFtWYV0gPSBvZDtcbiAgICAgIFBbeWFdID0gcGQ7XG4gICAgICBQW0RiXSA9IHFkO1xuICAgICAgUFt3Y10gPSBPZjtcbiAgICAgIFBbemJdID0gbmQ7XG4gICAgICBQW0FiXSA9IG9kO1xuICAgICAgUFtKYV0gPSBwZDtcbiAgICAgIFBbQmJdID0gcWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFNiKGEpIHtcbiAgICAgIHJldHVybiBhICYgflBmID8gKDAgPiBhID8gMCA6IDI1NSkgOiBhID4+IHJkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiYihhLCBiKSB7XG4gICAgICByZXR1cm4gU2IoKCgxOTA3NyAqIGEpID4+IDgpICsgKCgyNjE0OSAqIGIpID4+IDgpIC0gMTQyMzQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBuYihhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gU2IoXG4gICAgICAgICgoMTkwNzcgKiBhKSA+PiA4KSAtICgoNjQxOSAqIGIpID4+IDgpIC0gKCgxMzMyMCAqIGMpID4+IDgpICsgODcwOFxuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gUGEoYSwgYikge1xuICAgICAgcmV0dXJuIFNiKCgoMTkwNzcgKiBhKSA+PiA4KSArICgoMzMwNTAgKiBiKSA+PiA4KSAtIDE3Njg1KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gR2EoYSwgYiwgYywgZCwgZSkge1xuICAgICAgZFtlICsgMF0gPSBiYihhLCBjKTtcbiAgICAgIGRbZSArIDFdID0gbmIoYSwgYiwgYyk7XG4gICAgICBkW2UgKyAyXSA9IFBhKGEsIGIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBUYihhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBkW2UgKyAwXSA9IFBhKGEsIGIpO1xuICAgICAgZFtlICsgMV0gPSBuYihhLCBiLCBjKTtcbiAgICAgIGRbZSArIDJdID0gYmIoYSwgYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNkKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIHZhciBmID0gbmIoYSwgYiwgYyk7XG4gICAgICBiID0gKChmIDw8IDMpICYgMjI0KSB8IChQYShhLCBiKSA+PiAzKTtcbiAgICAgIGRbZSArIDBdID0gKGJiKGEsIGMpICYgMjQ4KSB8IChmID4+IDUpO1xuICAgICAgZFtlICsgMV0gPSBiO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0ZChhLCBiLCBjLCBkLCBlKSB7XG4gICAgICB2YXIgZiA9IChQYShhLCBiKSAmIDI0MCkgfCAxNTtcbiAgICAgIGRbZSArIDBdID0gKGJiKGEsIGMpICYgMjQwKSB8IChuYihhLCBiLCBjKSA+PiA0KTtcbiAgICAgIGRbZSArIDFdID0gZjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdWQoYSwgYiwgYywgZCwgZSkge1xuICAgICAgZFtlICsgMF0gPSAyNTU7XG4gICAgICBHYShhLCBiLCBjLCBkLCBlICsgMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZkKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIFRiKGEsIGIsIGMsIGQsIGUpO1xuICAgICAgZFtlICsgM10gPSAyNTU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHdkKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIEdhKGEsIGIsIGMsIGQsIGUpO1xuICAgICAgZFtlICsgM10gPSAyNTU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdhKGEsIGIpIHtcbiAgICAgIHJldHVybiAwID4gYSA/IDAgOiBhID4gYiA/IGIgOiBhO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsYShhLCBiLCBjKSB7XG4gICAgICBzZWxmW2FdID0gZnVuY3Rpb24oYSwgZSwgZiwgZywgaCwgaywgbCwgbSwgbikge1xuICAgICAgICBmb3IgKHZhciBkID0gbSArIChuICYgLTIpICogYzsgbSAhPSBkOyApXG4gICAgICAgICAgYihhW2UgKyAwXSwgZltnICsgMF0sIGhbayArIDBdLCBsLCBtKSxcbiAgICAgICAgICAgIGIoYVtlICsgMV0sIGZbZyArIDBdLCBoW2sgKyAwXSwgbCwgbSArIGMpLFxuICAgICAgICAgICAgKGUgKz0gMiksXG4gICAgICAgICAgICArK2csXG4gICAgICAgICAgICArK2ssXG4gICAgICAgICAgICAobSArPSAyICogYyk7XG4gICAgICAgIG4gJiAxICYmIGIoYVtlICsgMF0sIGZbZyArIDBdLCBoW2sgKyAwXSwgbCwgbSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiB4ZChhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gMCA9PSBjID8gKDAgPT0gYSA/ICgwID09IGIgPyA2IDogNSkgOiAwID09IGIgPyA0IDogMCkgOiBjO1xuICAgIH1cbiAgICBmdW5jdGlvbiB5ZChhLCBiLCBjLCBkLCBlKSB7XG4gICAgICBzd2l0Y2ggKGEgPj4+IDMwKSB7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBaYShiLCBjLCBkLCBlLCAwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGZkKGIsIGMsIGQsIGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgcGEoYiwgYywgZCwgZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIE9jKGEsIGIpIHtcbiAgICAgIHZhciBjLFxuICAgICAgICBkLFxuICAgICAgICBlID0gYi5NLFxuICAgICAgICBmID0gYi5OYixcbiAgICAgICAgZyA9IGEub2MsXG4gICAgICAgIGggPSBhLnBjICsgNDAsXG4gICAgICAgIGsgPSBhLm9jLFxuICAgICAgICBsID0gYS5wYyArIDU4NCxcbiAgICAgICAgbSA9IGEub2MsXG4gICAgICAgIG4gPSBhLnBjICsgNjAwO1xuICAgICAgZm9yIChjID0gMDsgMTYgPiBjOyArK2MpIGdbaCArIDMyICogYyAtIDFdID0gMTI5O1xuICAgICAgZm9yIChjID0gMDsgOCA+IGM7ICsrYylcbiAgICAgICAgKGtbbCArIDMyICogYyAtIDFdID0gMTI5KSwgKG1bbiArIDMyICogYyAtIDFdID0gMTI5KTtcbiAgICAgIDAgPCBlXG4gICAgICAgID8gKGdbaCAtIDEgLSAzMl0gPSBrW2wgLSAxIC0gMzJdID0gbVtuIC0gMSAtIDMyXSA9IDEyOSlcbiAgICAgICAgOiAoTShnLCBoIC0gMzIgLSAxLCAxMjcsIDIxKSxcbiAgICAgICAgICBNKGssIGwgLSAzMiAtIDEsIDEyNywgOSksXG4gICAgICAgICAgTShtLCBuIC0gMzIgLSAxLCAxMjcsIDkpKTtcbiAgICAgIGZvciAoZCA9IDA7IGQgPCBhLnphOyArK2QpIHtcbiAgICAgICAgdmFyIHIgPSBiLnlhW2IuYWEgKyBkXTtcbiAgICAgICAgaWYgKDAgPCBkKSB7XG4gICAgICAgICAgZm9yIChjID0gLTE7IDE2ID4gYzsgKytjKSBJKGcsIGggKyAzMiAqIGMgLSA0LCBnLCBoICsgMzIgKiBjICsgMTIsIDQpO1xuICAgICAgICAgIGZvciAoYyA9IC0xOyA4ID4gYzsgKytjKVxuICAgICAgICAgICAgSShrLCBsICsgMzIgKiBjIC0gNCwgaywgbCArIDMyICogYyArIDQsIDQpLFxuICAgICAgICAgICAgICBJKG0sIG4gKyAzMiAqIGMgLSA0LCBtLCBuICsgMzIgKiBjICsgNCwgNCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHEgPSBhLkdkLFxuICAgICAgICAgIHQgPSBhLkhkICsgZCxcbiAgICAgICAgICB2ID0gci5hZCxcbiAgICAgICAgICBwID0gci5IYztcbiAgICAgICAgMCA8IGUgJiZcbiAgICAgICAgICAoSShnLCBoIC0gMzIsIHFbdF0ueSwgMCwgMTYpLFxuICAgICAgICAgIEkoaywgbCAtIDMyLCBxW3RdLmYsIDAsIDgpLFxuICAgICAgICAgIEkobSwgbiAtIDMyLCBxW3RdLmVhLCAwLCA4KSk7XG4gICAgICAgIGlmIChyLlphKSB7XG4gICAgICAgICAgdmFyIHUgPSBnO1xuICAgICAgICAgIHZhciB3ID0gaCAtIDMyICsgMTY7XG4gICAgICAgICAgMCA8IGUgJiZcbiAgICAgICAgICAgIChkID49IGEuemEgLSAxXG4gICAgICAgICAgICAgID8gTSh1LCB3LCBxW3RdLnlbMTVdLCA0KVxuICAgICAgICAgICAgICA6IEkodSwgdywgcVt0ICsgMV0ueSwgMCwgNCkpO1xuICAgICAgICAgIGZvciAoYyA9IDA7IDQgPiBjOyBjKyspXG4gICAgICAgICAgICB1W3cgKyAxMjggKyBjXSA9IHVbdyArIDI1NiArIGNdID0gdVt3ICsgMzg0ICsgY10gPSB1W3cgKyAwICsgY107XG4gICAgICAgICAgZm9yIChjID0gMDsgMTYgPiBjOyArK2MsIHAgPDw9IDIpXG4gICAgICAgICAgICAodSA9IGcpLCAodyA9IGggKyB6ZFtjXSksIFdbci5PYltjXV0odSwgdyksIHlkKHAsIHYsIDE2ICogK2MsIHUsIHcpO1xuICAgICAgICB9IGVsc2UgaWYgKCgodSA9IHhkKGQsIGUsIHIuT2JbMF0pKSwgWVt1XShnLCBoKSwgMCAhPSBwKSlcbiAgICAgICAgICBmb3IgKGMgPSAwOyAxNiA+IGM7ICsrYywgcCA8PD0gMikgeWQocCwgdiwgMTYgKiArYywgZywgaCArIHpkW2NdKTtcbiAgICAgICAgYyA9IHIuR2M7XG4gICAgICAgIHUgPSB4ZChkLCBlLCByLkRkKTtcbiAgICAgICAga2FbdV0oaywgbCk7XG4gICAgICAgIGthW3VdKG0sIG4pO1xuICAgICAgICByID0gYyA+PiAwO1xuICAgICAgICBwID0gdjtcbiAgICAgICAgdSA9IGs7XG4gICAgICAgIHcgPSBsO1xuICAgICAgICByICYgMjU1ICYmIChyICYgMTcwID8gTmIocCwgMjU2LCB1LCB3KSA6IE9iKHAsIDI1NiwgdSwgdykpO1xuICAgICAgICBjID4+PSA4O1xuICAgICAgICByID0gbTtcbiAgICAgICAgcCA9IG47XG4gICAgICAgIGMgJiAyNTUgJiYgKGMgJiAxNzAgPyBOYih2LCAzMjAsIHIsIHApIDogT2IodiwgMzIwLCByLCBwKSk7XG4gICAgICAgIGUgPCBhLlViIC0gMSAmJlxuICAgICAgICAgIChJKHFbdF0ueSwgMCwgZywgaCArIDQ4MCwgMTYpLFxuICAgICAgICAgIEkocVt0XS5mLCAwLCBrLCBsICsgMjI0LCA4KSxcbiAgICAgICAgICBJKHFbdF0uZWEsIDAsIG0sIG4gKyAyMjQsIDgpKTtcbiAgICAgICAgYyA9IDggKiBmICogYS5CO1xuICAgICAgICBxID0gYS5zYTtcbiAgICAgICAgdCA9IGEudGEgKyAxNiAqIGQgKyAxNiAqIGYgKiBhLlI7XG4gICAgICAgIHYgPSBhLnFhO1xuICAgICAgICByID0gYS5yYSArIDggKiBkICsgYztcbiAgICAgICAgcCA9IGEuSGE7XG4gICAgICAgIHUgPSBhLklhICsgOCAqIGQgKyBjO1xuICAgICAgICBmb3IgKGMgPSAwOyAxNiA+IGM7ICsrYykgSShxLCB0ICsgYyAqIGEuUiwgZywgaCArIDMyICogYywgMTYpO1xuICAgICAgICBmb3IgKGMgPSAwOyA4ID4gYzsgKytjKVxuICAgICAgICAgIEkodiwgciArIGMgKiBhLkIsIGssIGwgKyAzMiAqIGMsIDgpLFxuICAgICAgICAgICAgSShwLCB1ICsgYyAqIGEuQiwgbSwgbiArIDMyICogYywgOCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIEFkKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgsIGspIHtcbiAgICAgIHZhciBsID0gWzBdLFxuICAgICAgICBtID0gWzBdLFxuICAgICAgICBuID0gMCxcbiAgICAgICAgciA9IG51bGwgIT0gayA/IGsua2QgOiAwLFxuICAgICAgICBxID0gbnVsbCAhPSBrID8gayA6IG5ldyBtZCgpO1xuICAgICAgaWYgKG51bGwgPT0gYSB8fCAxMiA+IGMpIHJldHVybiA3O1xuICAgICAgcS5kYXRhID0gYTtcbiAgICAgIHEudyA9IGI7XG4gICAgICBxLmhhID0gYztcbiAgICAgIGIgPSBbYl07XG4gICAgICBjID0gW2NdO1xuICAgICAgcS5nYiA9IFtxLmdiXTtcbiAgICAgIGE6IHtcbiAgICAgICAgdmFyIHQgPSBiO1xuICAgICAgICB2YXIgdiA9IGM7XG4gICAgICAgIHZhciBwID0gcS5nYjtcbiAgICAgICAgeChudWxsICE9IGEpO1xuICAgICAgICB4KG51bGwgIT0gdik7XG4gICAgICAgIHgobnVsbCAhPSBwKTtcbiAgICAgICAgcFswXSA9IDA7XG4gICAgICAgIGlmICgxMiA8PSB2WzBdICYmICFmYShhLCB0WzBdLCBcIlJJRkZcIikpIHtcbiAgICAgICAgICBpZiAoZmEoYSwgdFswXSArIDgsIFwiV0VCUFwiKSkge1xuICAgICAgICAgICAgcCA9IDM7XG4gICAgICAgICAgICBicmVhayBhO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdSA9IEhhKGEsIHRbMF0gKyA0KTtcbiAgICAgICAgICBpZiAoMTIgPiB1IHx8IDQyOTQ5NjcyODYgPCB1KSB7XG4gICAgICAgICAgICBwID0gMztcbiAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyICYmIHUgPiB2WzBdIC0gOCkge1xuICAgICAgICAgICAgcCA9IDc7XG4gICAgICAgICAgICBicmVhayBhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwWzBdID0gdTtcbiAgICAgICAgICB0WzBdICs9IDEyO1xuICAgICAgICAgIHZbMF0gLT0gMTI7XG4gICAgICAgIH1cbiAgICAgICAgcCA9IDA7XG4gICAgICB9XG4gICAgICBpZiAoMCAhPSBwKSByZXR1cm4gcDtcbiAgICAgIHUgPSAwIDwgcS5nYlswXTtcbiAgICAgIGZvciAoYyA9IGNbMF07IDsgKSB7XG4gICAgICAgIHQgPSBbMF07XG4gICAgICAgIG4gPSBbbl07XG4gICAgICAgIGE6IHtcbiAgICAgICAgICB2YXIgdyA9IGE7XG4gICAgICAgICAgdiA9IGI7XG4gICAgICAgICAgcCA9IGM7XG4gICAgICAgICAgdmFyIHkgPSBuLFxuICAgICAgICAgICAgQSA9IGwsXG4gICAgICAgICAgICB6ID0gbSxcbiAgICAgICAgICAgIEIgPSB0O1xuICAgICAgICAgIHlbMF0gPSAwO1xuICAgICAgICAgIGlmICg4ID4gcFswXSkgcCA9IDc7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWZhKHcsIHZbMF0sIFwiVlA4WFwiKSkge1xuICAgICAgICAgICAgICBpZiAoMTAgIT0gSGEodywgdlswXSArIDQpKSB7XG4gICAgICAgICAgICAgICAgcCA9IDM7XG4gICAgICAgICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoMTggPiBwWzBdKSB7XG4gICAgICAgICAgICAgICAgcCA9IDc7XG4gICAgICAgICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2YXIgQyA9IEhhKHcsIHZbMF0gKyA4KTtcbiAgICAgICAgICAgICAgdmFyIEQgPSAxICsgWWIodywgdlswXSArIDEyKTtcbiAgICAgICAgICAgICAgdyA9IDEgKyBZYih3LCB2WzBdICsgMTUpO1xuICAgICAgICAgICAgICBpZiAoMjE0NzQ4MzY0OCA8PSBEICogdykge1xuICAgICAgICAgICAgICAgIHAgPSAzO1xuICAgICAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbnVsbCAhPSBCICYmIChCWzBdID0gQyk7XG4gICAgICAgICAgICAgIG51bGwgIT0gQSAmJiAoQVswXSA9IEQpO1xuICAgICAgICAgICAgICBudWxsICE9IHogJiYgKHpbMF0gPSB3KTtcbiAgICAgICAgICAgICAgdlswXSArPSAxODtcbiAgICAgICAgICAgICAgcFswXSAtPSAxODtcbiAgICAgICAgICAgICAgeVswXSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbiA9IG5bMF07XG4gICAgICAgIHQgPSB0WzBdO1xuICAgICAgICBpZiAoMCAhPSBwKSByZXR1cm4gcDtcbiAgICAgICAgdiA9ICEhKHQgJiAyKTtcbiAgICAgICAgaWYgKCF1ICYmIG4pIHJldHVybiAzO1xuICAgICAgICBudWxsICE9IGYgJiYgKGZbMF0gPSAhISh0ICYgMTYpKTtcbiAgICAgICAgbnVsbCAhPSBnICYmIChnWzBdID0gdik7XG4gICAgICAgIG51bGwgIT0gaCAmJiAoaFswXSA9IDApO1xuICAgICAgICBnID0gbFswXTtcbiAgICAgICAgdCA9IG1bMF07XG4gICAgICAgIGlmIChuICYmIHYgJiYgbnVsbCA9PSBrKSB7XG4gICAgICAgICAgcCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDQgPiBjKSB7XG4gICAgICAgICAgcCA9IDc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh1ICYmIG4pIHx8ICghdSAmJiAhbiAmJiAhZmEoYSwgYlswXSwgXCJBTFBIXCIpKSkge1xuICAgICAgICAgIGMgPSBbY107XG4gICAgICAgICAgcS5uYSA9IFtxLm5hXTtcbiAgICAgICAgICBxLlAgPSBbcS5QXTtcbiAgICAgICAgICBxLlNhID0gW3EuU2FdO1xuICAgICAgICAgIGE6IHtcbiAgICAgICAgICAgIEMgPSBhO1xuICAgICAgICAgICAgcCA9IGI7XG4gICAgICAgICAgICB1ID0gYztcbiAgICAgICAgICAgIHZhciB5ID0gcS5nYixcbiAgICAgICAgICAgICAgQSA9IHEubmEsXG4gICAgICAgICAgICAgIHogPSBxLlAsXG4gICAgICAgICAgICAgIEIgPSBxLlNhO1xuICAgICAgICAgICAgRCA9IDIyO1xuICAgICAgICAgICAgeChudWxsICE9IEMpO1xuICAgICAgICAgICAgeChudWxsICE9IHUpO1xuICAgICAgICAgICAgdyA9IHBbMF07XG4gICAgICAgICAgICB2YXIgRiA9IHVbMF07XG4gICAgICAgICAgICB4KG51bGwgIT0gQSk7XG4gICAgICAgICAgICB4KG51bGwgIT0gQik7XG4gICAgICAgICAgICBBWzBdID0gbnVsbDtcbiAgICAgICAgICAgIHpbMF0gPSBudWxsO1xuICAgICAgICAgICAgZm9yIChCWzBdID0gMDsgOyApIHtcbiAgICAgICAgICAgICAgcFswXSA9IHc7XG4gICAgICAgICAgICAgIHVbMF0gPSBGO1xuICAgICAgICAgICAgICBpZiAoOCA+IEYpIHtcbiAgICAgICAgICAgICAgICBwID0gNztcbiAgICAgICAgICAgICAgICBicmVhayBhO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhciBHID0gSGEoQywgdyArIDQpO1xuICAgICAgICAgICAgICBpZiAoNDI5NDk2NzI4NiA8IEcpIHtcbiAgICAgICAgICAgICAgICBwID0gMztcbiAgICAgICAgICAgICAgICBicmVhayBhO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhciBIID0gKDggKyBHICsgMSkgJiAtMjtcbiAgICAgICAgICAgICAgRCArPSBIO1xuICAgICAgICAgICAgICBpZiAoMCA8IHkgJiYgRCA+IHkpIHtcbiAgICAgICAgICAgICAgICBwID0gMztcbiAgICAgICAgICAgICAgICBicmVhayBhO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICghZmEoQywgdywgXCJWUDggXCIpIHx8ICFmYShDLCB3LCBcIlZQOExcIikpIHtcbiAgICAgICAgICAgICAgICBwID0gMDtcbiAgICAgICAgICAgICAgICBicmVhayBhO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChGWzBdIDwgSCkge1xuICAgICAgICAgICAgICAgIHAgPSA3O1xuICAgICAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZmEoQywgdywgXCJBTFBIXCIpIHx8ICgoQVswXSA9IEMpLCAoelswXSA9IHcgKyA4KSwgKEJbMF0gPSBHKSk7XG4gICAgICAgICAgICAgIHcgKz0gSDtcbiAgICAgICAgICAgICAgRiAtPSBIO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjID0gY1swXTtcbiAgICAgICAgICBxLm5hID0gcS5uYVswXTtcbiAgICAgICAgICBxLlAgPSBxLlBbMF07XG4gICAgICAgICAgcS5TYSA9IHEuU2FbMF07XG4gICAgICAgICAgaWYgKDAgIT0gcCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYyA9IFtjXTtcbiAgICAgICAgcS5KYSA9IFtxLkphXTtcbiAgICAgICAgcS54YSA9IFtxLnhhXTtcbiAgICAgICAgYTogaWYgKFxuICAgICAgICAgICgoeSA9IGEpLFxuICAgICAgICAgIChwID0gYiksXG4gICAgICAgICAgKHUgPSBjKSxcbiAgICAgICAgICAoQSA9IHEuZ2JbMF0pLFxuICAgICAgICAgICh6ID0gcS5KYSksXG4gICAgICAgICAgKEIgPSBxLnhhKSxcbiAgICAgICAgICAoQyA9IHBbMF0pLFxuICAgICAgICAgICh3ID0gIWZhKHksIEMsIFwiVlA4IFwiKSksXG4gICAgICAgICAgKEQgPSAhZmEoeSwgQywgXCJWUDhMXCIpKSxcbiAgICAgICAgICB4KG51bGwgIT0geSksXG4gICAgICAgICAgeChudWxsICE9IHUpLFxuICAgICAgICAgIHgobnVsbCAhPSB6KSxcbiAgICAgICAgICB4KG51bGwgIT0gQiksXG4gICAgICAgICAgOCA+IHVbMF0pXG4gICAgICAgIClcbiAgICAgICAgICBwID0gNztcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKHcgfHwgRCkge1xuICAgICAgICAgICAgeSA9IEhhKHksIEMgKyA0KTtcbiAgICAgICAgICAgIGlmICgxMiA8PSBBICYmIHkgPiBBIC0gMTIpIHtcbiAgICAgICAgICAgICAgcCA9IDM7XG4gICAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAociAmJiB5ID4gdVswXSAtIDgpIHtcbiAgICAgICAgICAgICAgcCA9IDc7XG4gICAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB6WzBdID0geTtcbiAgICAgICAgICAgIHBbMF0gKz0gODtcbiAgICAgICAgICAgIHVbMF0gLT0gODtcbiAgICAgICAgICAgIEJbMF0gPSBEO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgKEJbMF0gPSA1IDw9IHVbMF0gJiYgNDcgPT0geVtDICsgMF0gJiYgISh5W0MgKyA0XSA+PiA1KSksXG4gICAgICAgICAgICAgICh6WzBdID0gdVswXSk7XG4gICAgICAgICAgcCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgYyA9IGNbMF07XG4gICAgICAgIHEuSmEgPSBxLkphWzBdO1xuICAgICAgICBxLnhhID0gcS54YVswXTtcbiAgICAgICAgYiA9IGJbMF07XG4gICAgICAgIGlmICgwICE9IHApIGJyZWFrO1xuICAgICAgICBpZiAoNDI5NDk2NzI4NiA8IHEuSmEpIHJldHVybiAzO1xuICAgICAgICBudWxsID09IGggfHwgdiB8fCAoaFswXSA9IHEueGEgPyAyIDogMSk7XG4gICAgICAgIGcgPSBbZ107XG4gICAgICAgIHQgPSBbdF07XG4gICAgICAgIGlmIChxLnhhKSB7XG4gICAgICAgICAgaWYgKDUgPiBjKSB7XG4gICAgICAgICAgICBwID0gNztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoID0gZztcbiAgICAgICAgICByID0gdDtcbiAgICAgICAgICB2ID0gZjtcbiAgICAgICAgICBudWxsID09IGEgfHwgNSA+IGNcbiAgICAgICAgICAgID8gKGEgPSAwKVxuICAgICAgICAgICAgOiA1IDw9IGMgJiYgNDcgPT0gYVtiICsgMF0gJiYgIShhW2IgKyA0XSA+PiA1KVxuICAgICAgICAgICAgPyAoKHUgPSBbMF0pLFxuICAgICAgICAgICAgICAoeSA9IFswXSksXG4gICAgICAgICAgICAgIChBID0gWzBdKSxcbiAgICAgICAgICAgICAgKHogPSBuZXcgUmEoKSksXG4gICAgICAgICAgICAgIGNiKHosIGEsIGIsIGMpLFxuICAgICAgICAgICAgICBtYyh6LCB1LCB5LCBBKVxuICAgICAgICAgICAgICAgID8gKG51bGwgIT0gaCAmJiAoaFswXSA9IHVbMF0pLFxuICAgICAgICAgICAgICAgICAgbnVsbCAhPSByICYmIChyWzBdID0geVswXSksXG4gICAgICAgICAgICAgICAgICBudWxsICE9IHYgJiYgKHZbMF0gPSBBWzBdKSxcbiAgICAgICAgICAgICAgICAgIChhID0gMSkpXG4gICAgICAgICAgICAgICAgOiAoYSA9IDApKVxuICAgICAgICAgICAgOiAoYSA9IDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICgxMCA+IGMpIHtcbiAgICAgICAgICAgIHAgPSA3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGggPSB0O1xuICAgICAgICAgIG51bGwgPT0gYSB8fCAxMCA+IGMgfHwgIUpjKGEsIGIgKyAzLCBjIC0gMylcbiAgICAgICAgICAgID8gKGEgPSAwKVxuICAgICAgICAgICAgOiAoKHIgPSBhW2IgKyAwXSB8IChhW2IgKyAxXSA8PCA4KSB8IChhW2IgKyAyXSA8PCAxNikpLFxuICAgICAgICAgICAgICAodiA9ICgoYVtiICsgN10gPDwgOCkgfCBhW2IgKyA2XSkgJiAxNjM4MyksXG4gICAgICAgICAgICAgIChhID0gKChhW2IgKyA5XSA8PCA4KSB8IGFbYiArIDhdKSAmIDE2MzgzKSxcbiAgICAgICAgICAgICAgciAmIDEgfHxcbiAgICAgICAgICAgICAgMyA8ICgociA+PiAxKSAmIDcpIHx8XG4gICAgICAgICAgICAgICEoKHIgPj4gNCkgJiAxKSB8fFxuICAgICAgICAgICAgICByID4+IDUgPj0gcS5KYSB8fFxuICAgICAgICAgICAgICAhdiB8fFxuICAgICAgICAgICAgICAhYVxuICAgICAgICAgICAgICAgID8gKGEgPSAwKVxuICAgICAgICAgICAgICAgIDogKGcgJiYgKGdbMF0gPSB2KSwgaCAmJiAoaFswXSA9IGEpLCAoYSA9IDEpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhKSByZXR1cm4gMztcbiAgICAgICAgZyA9IGdbMF07XG4gICAgICAgIHQgPSB0WzBdO1xuICAgICAgICBpZiAobiAmJiAobFswXSAhPSBnIHx8IG1bMF0gIT0gdCkpIHJldHVybiAzO1xuICAgICAgICBudWxsICE9IGsgJiZcbiAgICAgICAgICAoKGtbMF0gPSBxKSxcbiAgICAgICAgICAoay5vZmZzZXQgPSBiIC0gay53KSxcbiAgICAgICAgICB4KDQyOTQ5NjcyODYgPiBiIC0gay53KSxcbiAgICAgICAgICB4KGsub2Zmc2V0ID09IGsuaGEgLSBjKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDAgPT0gcCB8fCAoNyA9PSBwICYmIG4gJiYgbnVsbCA9PSBrKVxuICAgICAgICA/IChudWxsICE9IGYgJiYgKGZbMF0gfD0gbnVsbCAhPSBxLm5hICYmIDAgPCBxLm5hLmxlbmd0aCksXG4gICAgICAgICAgbnVsbCAhPSBkICYmIChkWzBdID0gZyksXG4gICAgICAgICAgbnVsbCAhPSBlICYmIChlWzBdID0gdCksXG4gICAgICAgICAgMClcbiAgICAgICAgOiBwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYyhhLCBiLCBjKSB7XG4gICAgICB2YXIgZCA9IGIud2lkdGgsXG4gICAgICAgIGUgPSBiLmhlaWdodCxcbiAgICAgICAgZiA9IDAsXG4gICAgICAgIGcgPSAwLFxuICAgICAgICBoID0gZCxcbiAgICAgICAgayA9IGU7XG4gICAgICBiLkRhID0gbnVsbCAhPSBhICYmIDAgPCBhLkRhO1xuICAgICAgaWYgKFxuICAgICAgICBiLkRhICYmXG4gICAgICAgICgoaCA9IGEuY2QpLFxuICAgICAgICAoayA9IGEuYmQpLFxuICAgICAgICAoZiA9IGEudiksXG4gICAgICAgIChnID0gYS5qKSxcbiAgICAgICAgMTEgPiBjIHx8ICgoZiAmPSAtMiksIChnICY9IC0yKSksXG4gICAgICAgIDAgPiBmIHx8IDAgPiBnIHx8IDAgPj0gaCB8fCAwID49IGsgfHwgZiArIGggPiBkIHx8IGcgKyBrID4gZSlcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICBiLnYgPSBmO1xuICAgICAgYi5qID0gZztcbiAgICAgIGIudmEgPSBmICsgaDtcbiAgICAgIGIubyA9IGcgKyBrO1xuICAgICAgYi5VID0gaDtcbiAgICAgIGIuVCA9IGs7XG4gICAgICBiLmRhID0gbnVsbCAhPSBhICYmIDAgPCBhLmRhO1xuICAgICAgaWYgKGIuZGEpIHtcbiAgICAgICAgYyA9IFthLmliXTtcbiAgICAgICAgZiA9IFthLmhiXTtcbiAgICAgICAgaWYgKCFiYyhoLCBrLCBjLCBmKSkgcmV0dXJuIDA7XG4gICAgICAgIGIuaWIgPSBjWzBdO1xuICAgICAgICBiLmhiID0gZlswXTtcbiAgICAgIH1cbiAgICAgIGIub2IgPSBudWxsICE9IGEgJiYgYS5vYjtcbiAgICAgIGIuS2IgPSBudWxsID09IGEgfHwgIWEuU2Q7XG4gICAgICBiLmRhICYmICgoYi5vYiA9IGIuaWIgPCAoMyAqIGQpIC8gNCAmJiBiLmhiIDwgKDMgKiBlKSAvIDQpLCAoYi5LYiA9IDApKTtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBCZChhKSB7XG4gICAgICBpZiAobnVsbCA9PSBhKSByZXR1cm4gMjtcbiAgICAgIGlmICgxMSA+IGEuUykge1xuICAgICAgICB2YXIgYiA9IGEuZi5SR0JBO1xuICAgICAgICBiLmZiICs9IChhLmhlaWdodCAtIDEpICogYi5BO1xuICAgICAgICBiLkEgPSAtYi5BO1xuICAgICAgfSBlbHNlXG4gICAgICAgIChiID0gYS5mLmtiKSxcbiAgICAgICAgICAoYSA9IGEuaGVpZ2h0KSxcbiAgICAgICAgICAoYi5PICs9IChhIC0gMSkgKiBiLmZhKSxcbiAgICAgICAgICAoYi5mYSA9IC1iLmZhKSxcbiAgICAgICAgICAoYi5OICs9ICgoYSAtIDEpID4+IDEpICogYi5BYiksXG4gICAgICAgICAgKGIuQWIgPSAtYi5BYiksXG4gICAgICAgICAgKGIuVyArPSAoKGEgLSAxKSA+PiAxKSAqIGIuRGIpLFxuICAgICAgICAgIChiLkRiID0gLWIuRGIpLFxuICAgICAgICAgIG51bGwgIT0gYi5GICYmICgoYi5KICs9IChhIC0gMSkgKiBiLmxiKSwgKGIubGIgPSAtYi5sYikpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIENkKGEsIGIsIGMsIGQpIHtcbiAgICAgIGlmIChudWxsID09IGQgfHwgMCA+PSBhIHx8IDAgPj0gYikgcmV0dXJuIDI7XG4gICAgICBpZiAobnVsbCAhPSBjKSB7XG4gICAgICAgIGlmIChjLkRhKSB7XG4gICAgICAgICAgdmFyIGUgPSBjLmNkLFxuICAgICAgICAgICAgZiA9IGMuYmQsXG4gICAgICAgICAgICBnID0gYy52ICYgLTIsXG4gICAgICAgICAgICBoID0gYy5qICYgLTI7XG4gICAgICAgICAgaWYgKDAgPiBnIHx8IDAgPiBoIHx8IDAgPj0gZSB8fCAwID49IGYgfHwgZyArIGUgPiBhIHx8IGggKyBmID4gYilcbiAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgIGEgPSBlO1xuICAgICAgICAgIGIgPSBmO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjLmRhKSB7XG4gICAgICAgICAgZSA9IFtjLmliXTtcbiAgICAgICAgICBmID0gW2MuaGJdO1xuICAgICAgICAgIGlmICghYmMoYSwgYiwgZSwgZikpIHJldHVybiAyO1xuICAgICAgICAgIGEgPSBlWzBdO1xuICAgICAgICAgIGIgPSBmWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkLndpZHRoID0gYTtcbiAgICAgIGQuaGVpZ2h0ID0gYjtcbiAgICAgIGE6IHtcbiAgICAgICAgdmFyIGsgPSBkLndpZHRoO1xuICAgICAgICB2YXIgbCA9IGQuaGVpZ2h0O1xuICAgICAgICBhID0gZC5TO1xuICAgICAgICBpZiAoMCA+PSBrIHx8IDAgPj0gbCB8fCAhKGEgPj0gQ2EgJiYgMTMgPiBhKSkgYSA9IDI7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlmICgwID49IGQuUmQgJiYgbnVsbCA9PSBkLnNkKSB7XG4gICAgICAgICAgICB2YXIgZyA9IChmID0gZSA9IGIgPSAwKSxcbiAgICAgICAgICAgICAgaCA9IGsgKiBEZFthXSxcbiAgICAgICAgICAgICAgbSA9IGggKiBsO1xuICAgICAgICAgICAgMTEgPiBhIHx8XG4gICAgICAgICAgICAgICgoYiA9IChrICsgMSkgLyAyKSxcbiAgICAgICAgICAgICAgKGYgPSAoKGwgKyAxKSAvIDIpICogYiksXG4gICAgICAgICAgICAgIDEyID09IGEgJiYgKChlID0gayksIChnID0gZSAqIGwpKSk7XG4gICAgICAgICAgICBsID0gVihtICsgMiAqIGYgKyBnKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGwpIHtcbiAgICAgICAgICAgICAgYSA9IDE7XG4gICAgICAgICAgICAgIGJyZWFrIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkLnNkID0gbDtcbiAgICAgICAgICAgIDExID4gYVxuICAgICAgICAgICAgICA/ICgoayA9IGQuZi5SR0JBKSxcbiAgICAgICAgICAgICAgICAoay5lYiA9IGwpLFxuICAgICAgICAgICAgICAgIChrLmZiID0gMCksXG4gICAgICAgICAgICAgICAgKGsuQSA9IGgpLFxuICAgICAgICAgICAgICAgIChrLnNpemUgPSBtKSlcbiAgICAgICAgICAgICAgOiAoKGsgPSBkLmYua2IpLFxuICAgICAgICAgICAgICAgIChrLnkgPSBsKSxcbiAgICAgICAgICAgICAgICAoay5PID0gMCksXG4gICAgICAgICAgICAgICAgKGsuZmEgPSBoKSxcbiAgICAgICAgICAgICAgICAoay5GZCA9IG0pLFxuICAgICAgICAgICAgICAgIChrLmYgPSBsKSxcbiAgICAgICAgICAgICAgICAoay5OID0gMCArIG0pLFxuICAgICAgICAgICAgICAgIChrLkFiID0gYiksXG4gICAgICAgICAgICAgICAgKGsuQ2QgPSBmKSxcbiAgICAgICAgICAgICAgICAoay5lYSA9IGwpLFxuICAgICAgICAgICAgICAgIChrLlcgPSAwICsgbSArIGYpLFxuICAgICAgICAgICAgICAgIChrLkRiID0gYiksXG4gICAgICAgICAgICAgICAgKGsuRWQgPSBmKSxcbiAgICAgICAgICAgICAgICAxMiA9PSBhICYmICgoay5GID0gbCksIChrLkogPSAwICsgbSArIDIgKiBmKSksXG4gICAgICAgICAgICAgICAgKGsuVGMgPSBnKSxcbiAgICAgICAgICAgICAgICAoay5sYiA9IGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYiA9IDE7XG4gICAgICAgICAgZSA9IGQuUztcbiAgICAgICAgICBmID0gZC53aWR0aDtcbiAgICAgICAgICBnID0gZC5oZWlnaHQ7XG4gICAgICAgICAgaWYgKGUgPj0gQ2EgJiYgMTMgPiBlKVxuICAgICAgICAgICAgaWYgKDExID4gZSlcbiAgICAgICAgICAgICAgKGEgPSBkLmYuUkdCQSksXG4gICAgICAgICAgICAgICAgKGggPSBNYXRoLmFicyhhLkEpKSxcbiAgICAgICAgICAgICAgICAoYiAmPSBoICogKGcgLSAxKSArIGYgPD0gYS5zaXplKSxcbiAgICAgICAgICAgICAgICAoYiAmPSBoID49IGYgKiBEZFtlXSksXG4gICAgICAgICAgICAgICAgKGIgJj0gbnVsbCAhPSBhLmViKTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBhID0gZC5mLmtiO1xuICAgICAgICAgICAgICBoID0gKGYgKyAxKSAvIDI7XG4gICAgICAgICAgICAgIG0gPSAoZyArIDEpIC8gMjtcbiAgICAgICAgICAgICAgayA9IE1hdGguYWJzKGEuZmEpO1xuICAgICAgICAgICAgICB2YXIgbCA9IE1hdGguYWJzKGEuQWIpLFxuICAgICAgICAgICAgICAgIG4gPSBNYXRoLmFicyhhLkRiKSxcbiAgICAgICAgICAgICAgICByID0gTWF0aC5hYnMoYS5sYiksXG4gICAgICAgICAgICAgICAgcSA9IHIgKiAoZyAtIDEpICsgZjtcbiAgICAgICAgICAgICAgYiAmPSBrICogKGcgLSAxKSArIGYgPD0gYS5GZDtcbiAgICAgICAgICAgICAgYiAmPSBsICogKG0gLSAxKSArIGggPD0gYS5DZDtcbiAgICAgICAgICAgICAgYiAmPSBuICogKG0gLSAxKSArIGggPD0gYS5FZDtcbiAgICAgICAgICAgICAgYiA9IGIgJiAoayA+PSBmKSAmIChsID49IGgpICYgKG4gPj0gaCk7XG4gICAgICAgICAgICAgIGIgJj0gbnVsbCAhPSBhLnk7XG4gICAgICAgICAgICAgIGIgJj0gbnVsbCAhPSBhLmY7XG4gICAgICAgICAgICAgIGIgJj0gbnVsbCAhPSBhLmVhO1xuICAgICAgICAgICAgICAxMiA9PSBlICYmICgoYiAmPSByID49IGYpLCAoYiAmPSBxIDw9IGEuVGMpLCAoYiAmPSBudWxsICE9IGEuRikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgYiA9IDA7XG4gICAgICAgICAgYSA9IGIgPyAwIDogMjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKDAgIT0gYSkgcmV0dXJuIGE7XG4gICAgICBudWxsICE9IGMgJiYgYy5mZCAmJiAoYSA9IEJkKGQpKTtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICB2YXIgeGIgPSA2NCxcbiAgICAgIEhkID0gW1xuICAgICAgICAwLFxuICAgICAgICAxLFxuICAgICAgICAzLFxuICAgICAgICA3LFxuICAgICAgICAxNSxcbiAgICAgICAgMzEsXG4gICAgICAgIDYzLFxuICAgICAgICAxMjcsXG4gICAgICAgIDI1NSxcbiAgICAgICAgNTExLFxuICAgICAgICAxMDIzLFxuICAgICAgICAyMDQ3LFxuICAgICAgICA0MDk1LFxuICAgICAgICA4MTkxLFxuICAgICAgICAxNjM4MyxcbiAgICAgICAgMzI3NjcsXG4gICAgICAgIDY1NTM1LFxuICAgICAgICAxMzEwNzEsXG4gICAgICAgIDI2MjE0MyxcbiAgICAgICAgNTI0Mjg3LFxuICAgICAgICAxMDQ4NTc1LFxuICAgICAgICAyMDk3MTUxLFxuICAgICAgICA0MTk0MzAzLFxuICAgICAgICA4Mzg4NjA3LFxuICAgICAgICAxNjc3NzIxNVxuICAgICAgXSxcbiAgICAgIEdkID0gMjQsXG4gICAgICBvYiA9IDMyLFxuICAgICAgWGIgPSA4LFxuICAgICAgSWQgPSBbXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDMsXG4gICAgICAgIDMsXG4gICAgICAgIDMsXG4gICAgICAgIDMsXG4gICAgICAgIDMsXG4gICAgICAgIDMsXG4gICAgICAgIDMsXG4gICAgICAgIDMsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDQsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDUsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDYsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDcsXG4gICAgICAgIDdcbiAgICAgIF07XG4gICAgWChcIlByZWRpY3RvcjBcIiwgXCJQcmVkaWN0b3JBZGQwXCIpO1xuICAgIHNlbGYuUHJlZGljdG9yMCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIDQyNzgxOTAwODA7XG4gICAgfTtcbiAgICBzZWxmLlByZWRpY3RvcjEgPSBmdW5jdGlvbihhKSB7XG4gICAgICByZXR1cm4gYTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yMiA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiBiW2MgKyAwXTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yMyA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiBiW2MgKyAxXTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yNCA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiBiW2MgLSAxXTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yNSA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiBhYShhYShhLCBiW2MgKyAxXSksIGJbYyArIDBdKTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yNiA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgIHJldHVybiBhYShhLCBiW2MgLSAxXSk7XG4gICAgfTtcbiAgICBzZWxmLlByZWRpY3RvcjcgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gYWEoYSwgYltjICsgMF0pO1xuICAgIH07XG4gICAgc2VsZi5QcmVkaWN0b3I4ID0gZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAgcmV0dXJuIGFhKGJbYyAtIDFdLCBiW2MgKyAwXSk7XG4gICAgfTtcbiAgICBzZWxmLlByZWRpY3RvcjkgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gYWEoYltjICsgMF0sIGJbYyArIDFdKTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yMTAgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gYWEoYWEoYSwgYltjIC0gMV0pLCBhYShiW2MgKyAwXSwgYltjICsgMV0pKTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yMTEgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICB2YXIgZCA9IGJbYyArIDBdO1xuICAgICAgYiA9IGJbYyAtIDFdO1xuICAgICAgcmV0dXJuIDAgPj1cbiAgICAgICAgSWEoKGQgPj4gMjQpICYgMjU1LCAoYSA+PiAyNCkgJiAyNTUsIChiID4+IDI0KSAmIDI1NSkgK1xuICAgICAgICAgIElhKChkID4+IDE2KSAmIDI1NSwgKGEgPj4gMTYpICYgMjU1LCAoYiA+PiAxNikgJiAyNTUpICtcbiAgICAgICAgICBJYSgoZCA+PiA4KSAmIDI1NSwgKGEgPj4gOCkgJiAyNTUsIChiID4+IDgpICYgMjU1KSArXG4gICAgICAgICAgSWEoZCAmIDI1NSwgYSAmIDI1NSwgYiAmIDI1NSlcbiAgICAgICAgPyBkXG4gICAgICAgIDogYTtcbiAgICB9O1xuICAgIHNlbGYuUHJlZGljdG9yMTIgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICB2YXIgZCA9IGJbYyArIDBdO1xuICAgICAgYiA9IGJbYyAtIDFdO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgKChzYSgoKGEgPj4gMjQpICYgMjU1KSArICgoZCA+PiAyNCkgJiAyNTUpIC0gKChiID4+IDI0KSAmIDI1NSkpIDw8IDI0KSB8XG4gICAgICAgICAgKHNhKCgoYSA+PiAxNikgJiAyNTUpICsgKChkID4+IDE2KSAmIDI1NSkgLSAoKGIgPj4gMTYpICYgMjU1KSkgPDxcbiAgICAgICAgICAgIDE2KSB8XG4gICAgICAgICAgKHNhKCgoYSA+PiA4KSAmIDI1NSkgKyAoKGQgPj4gOCkgJiAyNTUpIC0gKChiID4+IDgpICYgMjU1KSkgPDwgOCkgfFxuICAgICAgICAgIHNhKChhICYgMjU1KSArIChkICYgMjU1KSAtIChiICYgMjU1KSkpID4+PlxuICAgICAgICAwXG4gICAgICApO1xuICAgIH07XG4gICAgc2VsZi5QcmVkaWN0b3IxMyA9IGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgIHZhciBkID0gYltjIC0gMV07XG4gICAgICBhID0gYWEoYSwgYltjICsgMF0pO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgKChlYigoYSA+PiAyNCkgJiAyNTUsIChkID4+IDI0KSAmIDI1NSkgPDwgMjQpIHxcbiAgICAgICAgICAoZWIoKGEgPj4gMTYpICYgMjU1LCAoZCA+PiAxNikgJiAyNTUpIDw8IDE2KSB8XG4gICAgICAgICAgKGViKChhID4+IDgpICYgMjU1LCAoZCA+PiA4KSAmIDI1NSkgPDwgOCkgfFxuICAgICAgICAgIGViKChhID4+IDApICYgMjU1LCAoZCA+PiAwKSAmIDI1NSkpID4+PlxuICAgICAgICAwXG4gICAgICApO1xuICAgIH07XG4gICAgdmFyIGVlID0gc2VsZi5QcmVkaWN0b3JBZGQwO1xuICAgIHNlbGYuUHJlZGljdG9yQWRkMSA9IGNjO1xuICAgIFgoXCJQcmVkaWN0b3IyXCIsIFwiUHJlZGljdG9yQWRkMlwiKTtcbiAgICBYKFwiUHJlZGljdG9yM1wiLCBcIlByZWRpY3RvckFkZDNcIik7XG4gICAgWChcIlByZWRpY3RvcjRcIiwgXCJQcmVkaWN0b3JBZGQ0XCIpO1xuICAgIFgoXCJQcmVkaWN0b3I1XCIsIFwiUHJlZGljdG9yQWRkNVwiKTtcbiAgICBYKFwiUHJlZGljdG9yNlwiLCBcIlByZWRpY3RvckFkZDZcIik7XG4gICAgWChcIlByZWRpY3RvcjdcIiwgXCJQcmVkaWN0b3JBZGQ3XCIpO1xuICAgIFgoXCJQcmVkaWN0b3I4XCIsIFwiUHJlZGljdG9yQWRkOFwiKTtcbiAgICBYKFwiUHJlZGljdG9yOVwiLCBcIlByZWRpY3RvckFkZDlcIik7XG4gICAgWChcIlByZWRpY3RvcjEwXCIsIFwiUHJlZGljdG9yQWRkMTBcIik7XG4gICAgWChcIlByZWRpY3RvcjExXCIsIFwiUHJlZGljdG9yQWRkMTFcIik7XG4gICAgWChcIlByZWRpY3RvcjEyXCIsIFwiUHJlZGljdG9yQWRkMTJcIik7XG4gICAgWChcIlByZWRpY3RvcjEzXCIsIFwiUHJlZGljdG9yQWRkMTNcIik7XG4gICAgdmFyIGZlID0gc2VsZi5QcmVkaWN0b3JBZGQyO1xuICAgIGVjKFxuICAgICAgXCJDb2xvckluZGV4SW52ZXJzZVRyYW5zZm9ybVwiLFxuICAgICAgXCJNYXBBUkdCXCIsXG4gICAgICBcIjMyYlwiLFxuICAgICAgZnVuY3Rpb24oYSkge1xuICAgICAgICByZXR1cm4gKGEgPj4gOCkgJiAyNTU7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oYSkge1xuICAgICAgICByZXR1cm4gYTtcbiAgICAgIH1cbiAgICApO1xuICAgIGVjKFxuICAgICAgXCJWUDhMQ29sb3JJbmRleEludmVyc2VUcmFuc2Zvcm1BbHBoYVwiLFxuICAgICAgXCJNYXBBbHBoYVwiLFxuICAgICAgXCI4YlwiLFxuICAgICAgZnVuY3Rpb24oYSkge1xuICAgICAgICByZXR1cm4gYTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihhKSB7XG4gICAgICAgIHJldHVybiAoYSA+PiA4KSAmIDI1NTtcbiAgICAgIH1cbiAgICApO1xuICAgIHZhciByYyA9IHNlbGYuQ29sb3JJbmRleEludmVyc2VUcmFuc2Zvcm0sXG4gICAgICBrZSA9IHNlbGYuTWFwQVJHQixcbiAgICAgIGhlID0gc2VsZi5WUDhMQ29sb3JJbmRleEludmVyc2VUcmFuc2Zvcm1BbHBoYSxcbiAgICAgIGxlID0gc2VsZi5NYXBBbHBoYSxcbiAgICAgIHBjLFxuICAgICAgcWMgPSAoc2VsZi5WUDhMUHJlZGljdG9yc0FkZCA9IFtdKTtcbiAgICBxYy5sZW5ndGggPSAxNjtcbiAgICAoc2VsZi5WUDhMUHJlZGljdG9ycyA9IFtdKS5sZW5ndGggPSAxNjtcbiAgICAoc2VsZi5WUDhMUHJlZGljdG9yc0FkZF9DID0gW10pLmxlbmd0aCA9IDE2O1xuICAgIChzZWxmLlZQOExQcmVkaWN0b3JzX0MgPSBbXSkubGVuZ3RoID0gMTY7XG4gICAgdmFyIEZiLFxuICAgICAgc2MsXG4gICAgICBHYixcbiAgICAgIEhiLFxuICAgICAgeGMsXG4gICAgICB1YyxcbiAgICAgIGJkID0gVig1MTEpLFxuICAgICAgY2QgPSBWKDIwNDEpLFxuICAgICAgZGQgPSBWKDIyNSksXG4gICAgICBlZCA9IFYoNzY3KSxcbiAgICAgIGFkID0gMCxcbiAgICAgIFFiID0gY2QsXG4gICAgICBtYiA9IGRkLFxuICAgICAgUiA9IGVkLFxuICAgICAgVSA9IGJkLFxuICAgICAgQ2EgPSAwLFxuICAgICAgVWEgPSAxLFxuICAgICAgdGMgPSAyLFxuICAgICAgVmEgPSAzLFxuICAgICAgeWEgPSA0LFxuICAgICAgRGIgPSA1LFxuICAgICAgd2MgPSA2LFxuICAgICAgemIgPSA3LFxuICAgICAgQWIgPSA4LFxuICAgICAgSmEgPSA5LFxuICAgICAgQmIgPSAxMCxcbiAgICAgIHBlID0gWzIsIDMsIDddLFxuICAgICAgb2UgPSBbMywgMywgMTFdLFxuICAgICAgRGMgPSBbMjgwLCAyNTYsIDI1NiwgMjU2LCA0MF0sXG4gICAgICBxZSA9IFswLCAxLCAxLCAxLCAwXSxcbiAgICAgIG5lID0gWzE3LCAxOCwgMCwgMSwgMiwgMywgNCwgNSwgMTYsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTVdLFxuICAgICAgZGUgPSBbXG4gICAgICAgIDI0LFxuICAgICAgICA3LFxuICAgICAgICAyMyxcbiAgICAgICAgMjUsXG4gICAgICAgIDQwLFxuICAgICAgICA2LFxuICAgICAgICAzOSxcbiAgICAgICAgNDEsXG4gICAgICAgIDIyLFxuICAgICAgICAyNixcbiAgICAgICAgMzgsXG4gICAgICAgIDQyLFxuICAgICAgICA1NixcbiAgICAgICAgNSxcbiAgICAgICAgNTUsXG4gICAgICAgIDU3LFxuICAgICAgICAyMSxcbiAgICAgICAgMjcsXG4gICAgICAgIDU0LFxuICAgICAgICA1OCxcbiAgICAgICAgMzcsXG4gICAgICAgIDQzLFxuICAgICAgICA3MixcbiAgICAgICAgNCxcbiAgICAgICAgNzEsXG4gICAgICAgIDczLFxuICAgICAgICAyMCxcbiAgICAgICAgMjgsXG4gICAgICAgIDUzLFxuICAgICAgICA1OSxcbiAgICAgICAgNzAsXG4gICAgICAgIDc0LFxuICAgICAgICAzNixcbiAgICAgICAgNDQsXG4gICAgICAgIDg4LFxuICAgICAgICA2OSxcbiAgICAgICAgNzUsXG4gICAgICAgIDUyLFxuICAgICAgICA2MCxcbiAgICAgICAgMyxcbiAgICAgICAgODcsXG4gICAgICAgIDg5LFxuICAgICAgICAxOSxcbiAgICAgICAgMjksXG4gICAgICAgIDg2LFxuICAgICAgICA5MCxcbiAgICAgICAgMzUsXG4gICAgICAgIDQ1LFxuICAgICAgICA2OCxcbiAgICAgICAgNzYsXG4gICAgICAgIDg1LFxuICAgICAgICA5MSxcbiAgICAgICAgNTEsXG4gICAgICAgIDYxLFxuICAgICAgICAxMDQsXG4gICAgICAgIDIsXG4gICAgICAgIDEwMyxcbiAgICAgICAgMTA1LFxuICAgICAgICAxOCxcbiAgICAgICAgMzAsXG4gICAgICAgIDEwMixcbiAgICAgICAgMTA2LFxuICAgICAgICAzNCxcbiAgICAgICAgNDYsXG4gICAgICAgIDg0LFxuICAgICAgICA5MixcbiAgICAgICAgNjcsXG4gICAgICAgIDc3LFxuICAgICAgICAxMDEsXG4gICAgICAgIDEwNyxcbiAgICAgICAgNTAsXG4gICAgICAgIDYyLFxuICAgICAgICAxMjAsXG4gICAgICAgIDEsXG4gICAgICAgIDExOSxcbiAgICAgICAgMTIxLFxuICAgICAgICA4MyxcbiAgICAgICAgOTMsXG4gICAgICAgIDE3LFxuICAgICAgICAzMSxcbiAgICAgICAgMTAwLFxuICAgICAgICAxMDgsXG4gICAgICAgIDY2LFxuICAgICAgICA3OCxcbiAgICAgICAgMTE4LFxuICAgICAgICAxMjIsXG4gICAgICAgIDMzLFxuICAgICAgICA0NyxcbiAgICAgICAgMTE3LFxuICAgICAgICAxMjMsXG4gICAgICAgIDQ5LFxuICAgICAgICA2MyxcbiAgICAgICAgOTksXG4gICAgICAgIDEwOSxcbiAgICAgICAgODIsXG4gICAgICAgIDk0LFxuICAgICAgICAwLFxuICAgICAgICAxMTYsXG4gICAgICAgIDEyNCxcbiAgICAgICAgNjUsXG4gICAgICAgIDc5LFxuICAgICAgICAxNixcbiAgICAgICAgMzIsXG4gICAgICAgIDk4LFxuICAgICAgICAxMTAsXG4gICAgICAgIDQ4LFxuICAgICAgICAxMTUsXG4gICAgICAgIDEyNSxcbiAgICAgICAgODEsXG4gICAgICAgIDk1LFxuICAgICAgICA2NCxcbiAgICAgICAgMTE0LFxuICAgICAgICAxMjYsXG4gICAgICAgIDk3LFxuICAgICAgICAxMTEsXG4gICAgICAgIDgwLFxuICAgICAgICAxMTMsXG4gICAgICAgIDEyNyxcbiAgICAgICAgOTYsXG4gICAgICAgIDExMlxuICAgICAgXSxcbiAgICAgIG1lID0gW1xuICAgICAgICAyOTU0LFxuICAgICAgICAyOTU2LFxuICAgICAgICAyOTU4LFxuICAgICAgICAyOTYyLFxuICAgICAgICAyOTcwLFxuICAgICAgICAyOTg2LFxuICAgICAgICAzMDE4LFxuICAgICAgICAzMDgyLFxuICAgICAgICAzMjEyLFxuICAgICAgICAzNDY4LFxuICAgICAgICAzOTgwLFxuICAgICAgICA1MDA0XG4gICAgICBdLFxuICAgICAgaWUgPSA4LFxuICAgICAgTGIgPSBbXG4gICAgICAgIDQsXG4gICAgICAgIDUsXG4gICAgICAgIDYsXG4gICAgICAgIDcsXG4gICAgICAgIDgsXG4gICAgICAgIDksXG4gICAgICAgIDEwLFxuICAgICAgICAxMCxcbiAgICAgICAgMTEsXG4gICAgICAgIDEyLFxuICAgICAgICAxMyxcbiAgICAgICAgMTQsXG4gICAgICAgIDE1LFxuICAgICAgICAxNixcbiAgICAgICAgMTcsXG4gICAgICAgIDE3LFxuICAgICAgICAxOCxcbiAgICAgICAgMTksXG4gICAgICAgIDIwLFxuICAgICAgICAyMCxcbiAgICAgICAgMjEsXG4gICAgICAgIDIxLFxuICAgICAgICAyMixcbiAgICAgICAgMjIsXG4gICAgICAgIDIzLFxuICAgICAgICAyMyxcbiAgICAgICAgMjQsXG4gICAgICAgIDI1LFxuICAgICAgICAyNSxcbiAgICAgICAgMjYsXG4gICAgICAgIDI3LFxuICAgICAgICAyOCxcbiAgICAgICAgMjksXG4gICAgICAgIDMwLFxuICAgICAgICAzMSxcbiAgICAgICAgMzIsXG4gICAgICAgIDMzLFxuICAgICAgICAzNCxcbiAgICAgICAgMzUsXG4gICAgICAgIDM2LFxuICAgICAgICAzNyxcbiAgICAgICAgMzcsXG4gICAgICAgIDM4LFxuICAgICAgICAzOSxcbiAgICAgICAgNDAsXG4gICAgICAgIDQxLFxuICAgICAgICA0MixcbiAgICAgICAgNDMsXG4gICAgICAgIDQ0LFxuICAgICAgICA0NSxcbiAgICAgICAgNDYsXG4gICAgICAgIDQ2LFxuICAgICAgICA0NyxcbiAgICAgICAgNDgsXG4gICAgICAgIDQ5LFxuICAgICAgICA1MCxcbiAgICAgICAgNTEsXG4gICAgICAgIDUyLFxuICAgICAgICA1MyxcbiAgICAgICAgNTQsXG4gICAgICAgIDU1LFxuICAgICAgICA1NixcbiAgICAgICAgNTcsXG4gICAgICAgIDU4LFxuICAgICAgICA1OSxcbiAgICAgICAgNjAsXG4gICAgICAgIDYxLFxuICAgICAgICA2MixcbiAgICAgICAgNjMsXG4gICAgICAgIDY0LFxuICAgICAgICA2NSxcbiAgICAgICAgNjYsXG4gICAgICAgIDY3LFxuICAgICAgICA2OCxcbiAgICAgICAgNjksXG4gICAgICAgIDcwLFxuICAgICAgICA3MSxcbiAgICAgICAgNzIsXG4gICAgICAgIDczLFxuICAgICAgICA3NCxcbiAgICAgICAgNzUsXG4gICAgICAgIDc2LFxuICAgICAgICA3NixcbiAgICAgICAgNzcsXG4gICAgICAgIDc4LFxuICAgICAgICA3OSxcbiAgICAgICAgODAsXG4gICAgICAgIDgxLFxuICAgICAgICA4MixcbiAgICAgICAgODMsXG4gICAgICAgIDg0LFxuICAgICAgICA4NSxcbiAgICAgICAgODYsXG4gICAgICAgIDg3LFxuICAgICAgICA4OCxcbiAgICAgICAgODksXG4gICAgICAgIDkxLFxuICAgICAgICA5MyxcbiAgICAgICAgOTUsXG4gICAgICAgIDk2LFxuICAgICAgICA5OCxcbiAgICAgICAgMTAwLFxuICAgICAgICAxMDEsXG4gICAgICAgIDEwMixcbiAgICAgICAgMTA0LFxuICAgICAgICAxMDYsXG4gICAgICAgIDEwOCxcbiAgICAgICAgMTEwLFxuICAgICAgICAxMTIsXG4gICAgICAgIDExNCxcbiAgICAgICAgMTE2LFxuICAgICAgICAxMTgsXG4gICAgICAgIDEyMixcbiAgICAgICAgMTI0LFxuICAgICAgICAxMjYsXG4gICAgICAgIDEyOCxcbiAgICAgICAgMTMwLFxuICAgICAgICAxMzIsXG4gICAgICAgIDEzNCxcbiAgICAgICAgMTM2LFxuICAgICAgICAxMzgsXG4gICAgICAgIDE0MCxcbiAgICAgICAgMTQzLFxuICAgICAgICAxNDUsXG4gICAgICAgIDE0OCxcbiAgICAgICAgMTUxLFxuICAgICAgICAxNTQsXG4gICAgICAgIDE1N1xuICAgICAgXSxcbiAgICAgIE1iID0gW1xuICAgICAgICA0LFxuICAgICAgICA1LFxuICAgICAgICA2LFxuICAgICAgICA3LFxuICAgICAgICA4LFxuICAgICAgICA5LFxuICAgICAgICAxMCxcbiAgICAgICAgMTEsXG4gICAgICAgIDEyLFxuICAgICAgICAxMyxcbiAgICAgICAgMTQsXG4gICAgICAgIDE1LFxuICAgICAgICAxNixcbiAgICAgICAgMTcsXG4gICAgICAgIDE4LFxuICAgICAgICAxOSxcbiAgICAgICAgMjAsXG4gICAgICAgIDIxLFxuICAgICAgICAyMixcbiAgICAgICAgMjMsXG4gICAgICAgIDI0LFxuICAgICAgICAyNSxcbiAgICAgICAgMjYsXG4gICAgICAgIDI3LFxuICAgICAgICAyOCxcbiAgICAgICAgMjksXG4gICAgICAgIDMwLFxuICAgICAgICAzMSxcbiAgICAgICAgMzIsXG4gICAgICAgIDMzLFxuICAgICAgICAzNCxcbiAgICAgICAgMzUsXG4gICAgICAgIDM2LFxuICAgICAgICAzNyxcbiAgICAgICAgMzgsXG4gICAgICAgIDM5LFxuICAgICAgICA0MCxcbiAgICAgICAgNDEsXG4gICAgICAgIDQyLFxuICAgICAgICA0MyxcbiAgICAgICAgNDQsXG4gICAgICAgIDQ1LFxuICAgICAgICA0NixcbiAgICAgICAgNDcsXG4gICAgICAgIDQ4LFxuICAgICAgICA0OSxcbiAgICAgICAgNTAsXG4gICAgICAgIDUxLFxuICAgICAgICA1MixcbiAgICAgICAgNTMsXG4gICAgICAgIDU0LFxuICAgICAgICA1NSxcbiAgICAgICAgNTYsXG4gICAgICAgIDU3LFxuICAgICAgICA1OCxcbiAgICAgICAgNjAsXG4gICAgICAgIDYyLFxuICAgICAgICA2NCxcbiAgICAgICAgNjYsXG4gICAgICAgIDY4LFxuICAgICAgICA3MCxcbiAgICAgICAgNzIsXG4gICAgICAgIDc0LFxuICAgICAgICA3NixcbiAgICAgICAgNzgsXG4gICAgICAgIDgwLFxuICAgICAgICA4MixcbiAgICAgICAgODQsXG4gICAgICAgIDg2LFxuICAgICAgICA4OCxcbiAgICAgICAgOTAsXG4gICAgICAgIDkyLFxuICAgICAgICA5NCxcbiAgICAgICAgOTYsXG4gICAgICAgIDk4LFxuICAgICAgICAxMDAsXG4gICAgICAgIDEwMixcbiAgICAgICAgMTA0LFxuICAgICAgICAxMDYsXG4gICAgICAgIDEwOCxcbiAgICAgICAgMTEwLFxuICAgICAgICAxMTIsXG4gICAgICAgIDExNCxcbiAgICAgICAgMTE2LFxuICAgICAgICAxMTksXG4gICAgICAgIDEyMixcbiAgICAgICAgMTI1LFxuICAgICAgICAxMjgsXG4gICAgICAgIDEzMSxcbiAgICAgICAgMTM0LFxuICAgICAgICAxMzcsXG4gICAgICAgIDE0MCxcbiAgICAgICAgMTQzLFxuICAgICAgICAxNDYsXG4gICAgICAgIDE0OSxcbiAgICAgICAgMTUyLFxuICAgICAgICAxNTUsXG4gICAgICAgIDE1OCxcbiAgICAgICAgMTYxLFxuICAgICAgICAxNjQsXG4gICAgICAgIDE2NyxcbiAgICAgICAgMTcwLFxuICAgICAgICAxNzMsXG4gICAgICAgIDE3NyxcbiAgICAgICAgMTgxLFxuICAgICAgICAxODUsXG4gICAgICAgIDE4OSxcbiAgICAgICAgMTkzLFxuICAgICAgICAxOTcsXG4gICAgICAgIDIwMSxcbiAgICAgICAgMjA1LFxuICAgICAgICAyMDksXG4gICAgICAgIDIxMyxcbiAgICAgICAgMjE3LFxuICAgICAgICAyMjEsXG4gICAgICAgIDIyNSxcbiAgICAgICAgMjI5LFxuICAgICAgICAyMzQsXG4gICAgICAgIDIzOSxcbiAgICAgICAgMjQ1LFxuICAgICAgICAyNDksXG4gICAgICAgIDI1NCxcbiAgICAgICAgMjU5LFxuICAgICAgICAyNjQsXG4gICAgICAgIDI2OSxcbiAgICAgICAgMjc0LFxuICAgICAgICAyNzksXG4gICAgICAgIDI4NFxuICAgICAgXSxcbiAgICAgIG9hID0gbnVsbCxcbiAgICAgIEhlID0gW1xuICAgICAgICBbMTczLCAxNDgsIDE0MCwgMF0sXG4gICAgICAgIFsxNzYsIDE1NSwgMTQwLCAxMzUsIDBdLFxuICAgICAgICBbMTgwLCAxNTcsIDE0MSwgMTM0LCAxMzAsIDBdLFxuICAgICAgICBbMjU0LCAyNTQsIDI0MywgMjMwLCAxOTYsIDE3NywgMTUzLCAxNDAsIDEzMywgMTMwLCAxMjksIDBdXG4gICAgICBdLFxuICAgICAgSWUgPSBbMCwgMSwgNCwgOCwgNSwgMiwgMywgNiwgOSwgMTIsIDEzLCAxMCwgNywgMTEsIDE0LCAxNV0sXG4gICAgICBNYyA9IFstMCwgMSwgLTEsIDIsIC0yLCAzLCA0LCA2LCAtMywgNSwgLTQsIC01LCAtNiwgNywgLTcsIDgsIC04LCAtOV0sXG4gICAgICBGZSA9IFtcbiAgICAgICAgW1xuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1MywgMTM2LCAyNTQsIDI1NSwgMjI4LCAyMTksIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxODksIDEyOSwgMjQyLCAyNTUsIDIyNywgMjEzLCAyNTUsIDIxOSwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTA2LCAxMjYsIDIyNywgMjUyLCAyMTQsIDIwOSwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgOTgsIDI0OCwgMjU1LCAyMzYsIDIyNiwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzE4MSwgMTMzLCAyMzgsIDI1NCwgMjIxLCAyMzQsIDI1NSwgMTU0LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFs3OCwgMTM0LCAyMDIsIDI0NywgMTk4LCAxODAsIDI1NSwgMjE5LCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEsIDE4NSwgMjQ5LCAyNTUsIDI0MywgMjU1LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTg0LCAxNTAsIDI0NywgMjU1LCAyMzYsIDIyNCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzc3LCAxMTAsIDIxNiwgMjU1LCAyMzYsIDIzMCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgMTAxLCAyNTEsIDI1NSwgMjQxLCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxNzAsIDEzOSwgMjQxLCAyNTIsIDIzNiwgMjA5LCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMzcsIDExNiwgMTk2LCAyNDMsIDIyOCwgMjU1LCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAyMDQsIDI1NCwgMjU1LCAyNDUsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzIwNywgMTYwLCAyNTAsIDI1NSwgMjM4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxMDIsIDEwMywgMjMxLCAyNTUsIDIxMSwgMTcxLCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxNTIsIDI1MiwgMjU1LCAyNDAsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzE3NywgMTM1LCAyNDMsIDI1NSwgMjM0LCAyMjUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFs4MCwgMTI5LCAyMTEsIDI1NSwgMTk0LCAyMjQsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEsIDEsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzI0NiwgMSwgMjU1LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMjU1LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXVxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzE5OCwgMzUsIDIzNywgMjIzLCAxOTMsIDE4NywgMTYyLCAxNjAsIDE0NSwgMTU1LCA2Ml0sXG4gICAgICAgICAgICBbMTMxLCA0NSwgMTk4LCAyMjEsIDE3MiwgMTc2LCAyMjAsIDE1NywgMjUyLCAyMjEsIDFdLFxuICAgICAgICAgICAgWzY4LCA0NywgMTQ2LCAyMDgsIDE0OSwgMTY3LCAyMjEsIDE2MiwgMjU1LCAyMjMsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxNDksIDI0MSwgMjU1LCAyMjEsIDIyNCwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzE4NCwgMTQxLCAyMzQsIDI1MywgMjIyLCAyMjAsIDI1NSwgMTk5LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFs4MSwgOTksIDE4MSwgMjQyLCAxNzYsIDE5MCwgMjQ5LCAyMDIsIDI1NSwgMjU1LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgMTI5LCAyMzIsIDI1MywgMjE0LCAxOTcsIDI0MiwgMTk2LCAyNTUsIDI1NSwgMTI4XSxcbiAgICAgICAgICAgIFs5OSwgMTIxLCAyMTAsIDI1MCwgMjAxLCAxOTgsIDI1NSwgMjAyLCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsyMywgOTEsIDE2MywgMjQyLCAxNzAsIDE4NywgMjQ3LCAyMTAsIDI1NSwgMjU1LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgMjAwLCAyNDYsIDI1NSwgMjM0LCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxMDksIDE3OCwgMjQxLCAyNTUsIDIzMSwgMjQ1LCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbNDQsIDEzMCwgMjAxLCAyNTMsIDIwNSwgMTkyLCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxMzIsIDIzOSwgMjUxLCAyMTksIDIwOSwgMjU1LCAxNjUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzk0LCAxMzYsIDIyNSwgMjUxLCAyMTgsIDE5MCwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzIyLCAxMDAsIDE3NCwgMjQ1LCAxODYsIDE2MSwgMjU1LCAxOTksIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgMTgyLCAyNDksIDI1NSwgMjMyLCAyMzUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxMjQsIDE0MywgMjQxLCAyNTUsIDIyNywgMjM0LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMzUsIDc3LCAxODEsIDI1MSwgMTkzLCAyMTEsIDI1NSwgMjA1LCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEsIDE1NywgMjQ3LCAyNTUsIDIzNiwgMjMxLCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTIxLCAxNDEsIDIzNSwgMjU1LCAyMjUsIDIyNywgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzQ1LCA5OSwgMTg4LCAyNTEsIDE5NSwgMjE3LCAyNTUsIDIyNCwgMTI4LCAxMjgsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxLCAyNTEsIDI1NSwgMjEzLCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsyMDMsIDEsIDI0OCwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzEzNywgMSwgMTc3LCAyNTUsIDIyNCwgMjU1LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF1cbiAgICAgICAgICBdXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjUzLCA5LCAyNDgsIDI1MSwgMjA3LCAyMDgsIDI1NSwgMTkyLCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxNzUsIDEzLCAyMjQsIDI0MywgMTkzLCAxODUsIDI0OSwgMTk4LCAyNTUsIDI1NSwgMTI4XSxcbiAgICAgICAgICAgIFs3MywgMTcsIDE3MSwgMjIxLCAxNjEsIDE3OSwgMjM2LCAxNjcsIDI1NSwgMjM0LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgOTUsIDI0NywgMjUzLCAyMTIsIDE4MywgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzIzOSwgOTAsIDI0NCwgMjUwLCAyMTEsIDIwOSwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzE1NSwgNzcsIDE5NSwgMjQ4LCAxODgsIDE5NSwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgMjQsIDIzOSwgMjUxLCAyMTgsIDIxOSwgMjU1LCAyMDUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzIwMSwgNTEsIDIxOSwgMjU1LCAxOTYsIDE4NiwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzY5LCA0NiwgMTkwLCAyMzksIDIwMSwgMjE4LCAyNTUsIDIyOCwgMTI4LCAxMjgsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxOTEsIDI1MSwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzIyMywgMTY1LCAyNDksIDI1NSwgMjEzLCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxNDEsIDEyNCwgMjQ4LCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxNiwgMjQ4LCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTkwLCAzNiwgMjMwLCAyNTUsIDIzNiwgMjU1LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTQ5LCAxLCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEsIDIyNiwgMjU1LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMjQ3LCAxOTIsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzI0MCwgMTI4LCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEsIDEzNCwgMjUyLCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMjEzLCA2MiwgMjUwLCAyNTUsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbNTUsIDkzLCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXVxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzIwMiwgMjQsIDIxMywgMjM1LCAxODYsIDE5MSwgMjIwLCAxNjAsIDI0MCwgMTc1LCAyNTVdLFxuICAgICAgICAgICAgWzEyNiwgMzgsIDE4MiwgMjMyLCAxNjksIDE4NCwgMjI4LCAxNzQsIDI1NSwgMTg3LCAxMjhdLFxuICAgICAgICAgICAgWzYxLCA0NiwgMTM4LCAyMTksIDE1MSwgMTc4LCAyNDAsIDE3MCwgMjU1LCAyMTYsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxMTIsIDIzMCwgMjUwLCAxOTksIDE5MSwgMjQ3LCAxNTksIDI1NSwgMjU1LCAxMjhdLFxuICAgICAgICAgICAgWzE2NiwgMTA5LCAyMjgsIDI1MiwgMjExLCAyMTUsIDI1NSwgMTc0LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFszOSwgNzcsIDE2MiwgMjMyLCAxNzIsIDE4MCwgMjQ1LCAxNzgsIDI1NSwgMjU1LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgNTIsIDIyMCwgMjQ2LCAxOTgsIDE5OSwgMjQ5LCAyMjAsIDI1NSwgMjU1LCAxMjhdLFxuICAgICAgICAgICAgWzEyNCwgNzQsIDE5MSwgMjQzLCAxODMsIDE5MywgMjUwLCAyMjEsIDI1NSwgMjU1LCAxMjhdLFxuICAgICAgICAgICAgWzI0LCA3MSwgMTMwLCAyMTksIDE1NCwgMTcwLCAyNDMsIDE4MiwgMjU1LCAyNTUsIDEyOF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxLCAxODIsIDIyNSwgMjQ5LCAyMTksIDI0MCwgMjU1LCAyMjQsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzE0OSwgMTUwLCAyMjYsIDI1MiwgMjE2LCAyMDUsIDI1NSwgMTcxLCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsyOCwgMTA4LCAxNzAsIDI0MiwgMTgzLCAxOTQsIDI1NCwgMjIzLCAyNTUsIDI1NSwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEsIDgxLCAyMzAsIDI1MiwgMjA0LCAyMDMsIDI1NSwgMTkyLCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxMjMsIDEwMiwgMjA5LCAyNDcsIDE4OCwgMTk2LCAyNTUsIDIzMywgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMjAsIDk1LCAxNTMsIDI0MywgMTY0LCAxNzMsIDI1NSwgMjAzLCAxMjgsIDEyOCwgMTI4XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzEsIDIyMiwgMjQ4LCAyNTUsIDIxNiwgMjEzLCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMTY4LCAxNzUsIDI0NiwgMjUyLCAyMzUsIDIwNSwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdLFxuICAgICAgICAgICAgWzQ3LCAxMTYsIDIxNSwgMjU1LCAyMTEsIDIxMiwgMjU1LCAyNTUsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgMTIxLCAyMzYsIDI1MywgMjEyLCAyMTQsIDI1NSwgMjU1LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsxNDEsIDg0LCAyMTMsIDI1MiwgMjAxLCAyMDIsIDI1NSwgMjE5LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFs0MiwgODAsIDE2MCwgMjQwLCAxNjIsIDE4NSwgMjU1LCAyMDUsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMSwgMSwgMjU1LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOF0sXG4gICAgICAgICAgICBbMjQ0LCAxLCAyNTUsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4XSxcbiAgICAgICAgICAgIFsyMzgsIDEsIDI1NSwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjgsIDEyOCwgMTI4LCAxMjhdXG4gICAgICAgICAgXVxuICAgICAgICBdXG4gICAgICBdLFxuICAgICAgS2UgPSBbXG4gICAgICAgIFtcbiAgICAgICAgICBbMjMxLCAxMjAsIDQ4LCA4OSwgMTE1LCAxMTMsIDEyMCwgMTUyLCAxMTJdLFxuICAgICAgICAgIFsxNTIsIDE3OSwgNjQsIDEyNiwgMTcwLCAxMTgsIDQ2LCA3MCwgOTVdLFxuICAgICAgICAgIFsxNzUsIDY5LCAxNDMsIDgwLCA4NSwgODIsIDcyLCAxNTUsIDEwM10sXG4gICAgICAgICAgWzU2LCA1OCwgMTAsIDE3MSwgMjE4LCAxODksIDE3LCAxMywgMTUyXSxcbiAgICAgICAgICBbMTE0LCAyNiwgMTcsIDE2MywgNDQsIDE5NSwgMjEsIDEwLCAxNzNdLFxuICAgICAgICAgIFsxMjEsIDI0LCA4MCwgMTk1LCAyNiwgNjIsIDQ0LCA2NCwgODVdLFxuICAgICAgICAgIFsxNDQsIDcxLCAxMCwgMzgsIDE3MSwgMjEzLCAxNDQsIDM0LCAyNl0sXG4gICAgICAgICAgWzE3MCwgNDYsIDU1LCAxOSwgMTM2LCAxNjAsIDMzLCAyMDYsIDcxXSxcbiAgICAgICAgICBbNjMsIDIwLCA4LCAxMTQsIDExNCwgMjA4LCAxMiwgOSwgMjI2XSxcbiAgICAgICAgICBbODEsIDQwLCAxMSwgOTYsIDE4MiwgODQsIDI5LCAxNiwgMzZdXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbMTM0LCAxODMsIDg5LCAxMzcsIDk4LCAxMDEsIDEwNiwgMTY1LCAxNDhdLFxuICAgICAgICAgIFs3MiwgMTg3LCAxMDAsIDEzMCwgMTU3LCAxMTEsIDMyLCA3NSwgODBdLFxuICAgICAgICAgIFs2NiwgMTAyLCAxNjcsIDk5LCA3NCwgNjIsIDQwLCAyMzQsIDEyOF0sXG4gICAgICAgICAgWzQxLCA1MywgOSwgMTc4LCAyNDEsIDE0MSwgMjYsIDgsIDEwN10sXG4gICAgICAgICAgWzc0LCA0MywgMjYsIDE0NiwgNzMsIDE2NiwgNDksIDIzLCAxNTddLFxuICAgICAgICAgIFs2NSwgMzgsIDEwNSwgMTYwLCA1MSwgNTIsIDMxLCAxMTUsIDEyOF0sXG4gICAgICAgICAgWzEwNCwgNzksIDEyLCAyNywgMjE3LCAyNTUsIDg3LCAxNywgN10sXG4gICAgICAgICAgWzg3LCA2OCwgNzEsIDQ0LCAxMTQsIDUxLCAxNSwgMTg2LCAyM10sXG4gICAgICAgICAgWzQ3LCA0MSwgMTQsIDExMCwgMTgyLCAxODMsIDIxLCAxNywgMTk0XSxcbiAgICAgICAgICBbNjYsIDQ1LCAyNSwgMTAyLCAxOTcsIDE4OSwgMjMsIDE4LCAyMl1cbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFs4OCwgODgsIDE0NywgMTUwLCA0MiwgNDYsIDQ1LCAxOTYsIDIwNV0sXG4gICAgICAgICAgWzQzLCA5NywgMTgzLCAxMTcsIDg1LCAzOCwgMzUsIDE3OSwgNjFdLFxuICAgICAgICAgIFszOSwgNTMsIDIwMCwgODcsIDI2LCAyMSwgNDMsIDIzMiwgMTcxXSxcbiAgICAgICAgICBbNTYsIDM0LCA1MSwgMTA0LCAxMTQsIDEwMiwgMjksIDkzLCA3N10sXG4gICAgICAgICAgWzM5LCAyOCwgODUsIDE3MSwgNTgsIDE2NSwgOTAsIDk4LCA2NF0sXG4gICAgICAgICAgWzM0LCAyMiwgMTE2LCAyMDYsIDIzLCAzNCwgNDMsIDE2NiwgNzNdLFxuICAgICAgICAgIFsxMDcsIDU0LCAzMiwgMjYsIDUxLCAxLCA4MSwgNDMsIDMxXSxcbiAgICAgICAgICBbNjgsIDI1LCAxMDYsIDIyLCA2NCwgMTcxLCAzNiwgMjI1LCAxMTRdLFxuICAgICAgICAgIFszNCwgMTksIDIxLCAxMDIsIDEzMiwgMTg4LCAxNiwgNzYsIDEyNF0sXG4gICAgICAgICAgWzYyLCAxOCwgNzgsIDk1LCA4NSwgNTcsIDUwLCA0OCwgNTFdXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbMTkzLCAxMDEsIDM1LCAxNTksIDIxNSwgMTExLCA4OSwgNDYsIDExMV0sXG4gICAgICAgICAgWzYwLCAxNDgsIDMxLCAxNzIsIDIxOSwgMjI4LCAyMSwgMTgsIDExMV0sXG4gICAgICAgICAgWzExMiwgMTEzLCA3NywgODUsIDE3OSwgMjU1LCAzOCwgMTIwLCAxMTRdLFxuICAgICAgICAgIFs0MCwgNDIsIDEsIDE5NiwgMjQ1LCAyMDksIDEwLCAyNSwgMTA5XSxcbiAgICAgICAgICBbODgsIDQzLCAyOSwgMTQwLCAxNjYsIDIxMywgMzcsIDQzLCAxNTRdLFxuICAgICAgICAgIFs2MSwgNjMsIDMwLCAxNTUsIDY3LCA0NSwgNjgsIDEsIDIwOV0sXG4gICAgICAgICAgWzEwMCwgODAsIDgsIDQzLCAxNTQsIDEsIDUxLCAyNiwgNzFdLFxuICAgICAgICAgIFsxNDIsIDc4LCA3OCwgMTYsIDI1NSwgMTI4LCAzNCwgMTk3LCAxNzFdLFxuICAgICAgICAgIFs0MSwgNDAsIDUsIDEwMiwgMjExLCAxODMsIDQsIDEsIDIyMV0sXG4gICAgICAgICAgWzUxLCA1MCwgMTcsIDE2OCwgMjA5LCAxOTIsIDIzLCAyNSwgODJdXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbMTM4LCAzMSwgMzYsIDE3MSwgMjcsIDE2NiwgMzgsIDQ0LCAyMjldLFxuICAgICAgICAgIFs2NywgODcsIDU4LCAxNjksIDgyLCAxMTUsIDI2LCA1OSwgMTc5XSxcbiAgICAgICAgICBbNjMsIDU5LCA5MCwgMTgwLCA1OSwgMTY2LCA5MywgNzMsIDE1NF0sXG4gICAgICAgICAgWzQwLCA0MCwgMjEsIDExNiwgMTQzLCAyMDksIDM0LCAzOSwgMTc1XSxcbiAgICAgICAgICBbNDcsIDE1LCAxNiwgMTgzLCAzNCwgMjIzLCA0OSwgNDUsIDE4M10sXG4gICAgICAgICAgWzQ2LCAxNywgMzMsIDE4MywgNiwgOTgsIDE1LCAzMiwgMTgzXSxcbiAgICAgICAgICBbNTcsIDQ2LCAyMiwgMjQsIDEyOCwgMSwgNTQsIDE3LCAzN10sXG4gICAgICAgICAgWzY1LCAzMiwgNzMsIDExNSwgMjgsIDEyOCwgMjMsIDEyOCwgMjA1XSxcbiAgICAgICAgICBbNDAsIDMsIDksIDExNSwgNTEsIDE5MiwgMTgsIDYsIDIyM10sXG4gICAgICAgICAgWzg3LCAzNywgOSwgMTE1LCA1OSwgNzcsIDY0LCAyMSwgNDddXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbMTA0LCA1NSwgNDQsIDIxOCwgOSwgNTQsIDUzLCAxMzAsIDIyNl0sXG4gICAgICAgICAgWzY0LCA5MCwgNzAsIDIwNSwgNDAsIDQxLCAyMywgMjYsIDU3XSxcbiAgICAgICAgICBbNTQsIDU3LCAxMTIsIDE4NCwgNSwgNDEsIDM4LCAxNjYsIDIxM10sXG4gICAgICAgICAgWzMwLCAzNCwgMjYsIDEzMywgMTUyLCAxMTYsIDEwLCAzMiwgMTM0XSxcbiAgICAgICAgICBbMzksIDE5LCA1MywgMjIxLCAyNiwgMTE0LCAzMiwgNzMsIDI1NV0sXG4gICAgICAgICAgWzMxLCA5LCA2NSwgMjM0LCAyLCAxNSwgMSwgMTE4LCA3M10sXG4gICAgICAgICAgWzc1LCAzMiwgMTIsIDUxLCAxOTIsIDI1NSwgMTYwLCA0MywgNTFdLFxuICAgICAgICAgIFs4OCwgMzEsIDM1LCA2NywgMTAyLCA4NSwgNTUsIDE4NiwgODVdLFxuICAgICAgICAgIFs1NiwgMjEsIDIzLCAxMTEsIDU5LCAyMDUsIDQ1LCAzNywgMTkyXSxcbiAgICAgICAgICBbNTUsIDM4LCA3MCwgMTI0LCA3MywgMTAyLCAxLCAzNCwgOThdXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbMTI1LCA5OCwgNDIsIDg4LCAxMDQsIDg1LCAxMTcsIDE3NSwgODJdLFxuICAgICAgICAgIFs5NSwgODQsIDUzLCA4OSwgMTI4LCAxMDAsIDExMywgMTAxLCA0NV0sXG4gICAgICAgICAgWzc1LCA3OSwgMTIzLCA0NywgNTEsIDEyOCwgODEsIDE3MSwgMV0sXG4gICAgICAgICAgWzU3LCAxNywgNSwgNzEsIDEwMiwgNTcsIDUzLCA0MSwgNDldLFxuICAgICAgICAgIFszOCwgMzMsIDEzLCAxMjEsIDU3LCA3MywgMjYsIDEsIDg1XSxcbiAgICAgICAgICBbNDEsIDEwLCA2NywgMTM4LCA3NywgMTEwLCA5MCwgNDcsIDExNF0sXG4gICAgICAgICAgWzExNSwgMjEsIDIsIDEwLCAxMDIsIDI1NSwgMTY2LCAyMywgNl0sXG4gICAgICAgICAgWzEwMSwgMjksIDE2LCAxMCwgODUsIDEyOCwgMTAxLCAxOTYsIDI2XSxcbiAgICAgICAgICBbNTcsIDE4LCAxMCwgMTAyLCAxMDIsIDIxMywgMzQsIDIwLCA0M10sXG4gICAgICAgICAgWzExNywgMjAsIDE1LCAzNiwgMTYzLCAxMjgsIDY4LCAxLCAyNl1cbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFsxMDIsIDYxLCA3MSwgMzcsIDM0LCA1MywgMzEsIDI0MywgMTkyXSxcbiAgICAgICAgICBbNjksIDYwLCA3MSwgMzgsIDczLCAxMTksIDI4LCAyMjIsIDM3XSxcbiAgICAgICAgICBbNjgsIDQ1LCAxMjgsIDM0LCAxLCA0NywgMTEsIDI0NSwgMTcxXSxcbiAgICAgICAgICBbNjIsIDE3LCAxOSwgNzAsIDE0NiwgODUsIDU1LCA2MiwgNzBdLFxuICAgICAgICAgIFszNywgNDMsIDM3LCAxNTQsIDEwMCwgMTYzLCA4NSwgMTYwLCAxXSxcbiAgICAgICAgICBbNjMsIDksIDkyLCAxMzYsIDI4LCA2NCwgMzIsIDIwMSwgODVdLFxuICAgICAgICAgIFs3NSwgMTUsIDksIDksIDY0LCAyNTUsIDE4NCwgMTE5LCAxNl0sXG4gICAgICAgICAgWzg2LCA2LCAyOCwgNSwgNjQsIDI1NSwgMjUsIDI0OCwgMV0sXG4gICAgICAgICAgWzU2LCA4LCAxNywgMTMyLCAxMzcsIDI1NSwgNTUsIDExNiwgMTI4XSxcbiAgICAgICAgICBbNTgsIDE1LCAyMCwgODIsIDEzNSwgNTcsIDI2LCAxMjEsIDQwXVxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgWzE2NCwgNTAsIDMxLCAxMzcsIDE1NCwgMTMzLCAyNSwgMzUsIDIxOF0sXG4gICAgICAgICAgWzUxLCAxMDMsIDQ0LCAxMzEsIDEzMSwgMTIzLCAzMSwgNiwgMTU4XSxcbiAgICAgICAgICBbODYsIDQwLCA2NCwgMTM1LCAxNDgsIDIyNCwgNDUsIDE4MywgMTI4XSxcbiAgICAgICAgICBbMjIsIDI2LCAxNywgMTMxLCAyNDAsIDE1NCwgMTQsIDEsIDIwOV0sXG4gICAgICAgICAgWzQ1LCAxNiwgMjEsIDkxLCA2NCwgMjIyLCA3LCAxLCAxOTddLFxuICAgICAgICAgIFs1NiwgMjEsIDM5LCAxNTUsIDYwLCAxMzgsIDIzLCAxMDIsIDIxM10sXG4gICAgICAgICAgWzgzLCAxMiwgMTMsIDU0LCAxOTIsIDI1NSwgNjgsIDQ3LCAyOF0sXG4gICAgICAgICAgWzg1LCAyNiwgODUsIDg1LCAxMjgsIDEyOCwgMzIsIDE0NiwgMTcxXSxcbiAgICAgICAgICBbMTgsIDExLCA3LCA2MywgMTQ0LCAxNzEsIDQsIDQsIDI0Nl0sXG4gICAgICAgICAgWzM1LCAyNywgMTAsIDE0NiwgMTc0LCAxNzEsIDEyLCAyNiwgMTI4XVxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgWzE5MCwgODAsIDM1LCA5OSwgMTgwLCA4MCwgMTI2LCA1NCwgNDVdLFxuICAgICAgICAgIFs4NSwgMTI2LCA0NywgODcsIDE3NiwgNTEsIDQxLCAyMCwgMzJdLFxuICAgICAgICAgIFsxMDEsIDc1LCAxMjgsIDEzOSwgMTE4LCAxNDYsIDExNiwgMTI4LCA4NV0sXG4gICAgICAgICAgWzU2LCA0MSwgMTUsIDE3NiwgMjM2LCA4NSwgMzcsIDksIDYyXSxcbiAgICAgICAgICBbNzEsIDMwLCAxNywgMTE5LCAxMTgsIDI1NSwgMTcsIDE4LCAxMzhdLFxuICAgICAgICAgIFsxMDEsIDM4LCA2MCwgMTM4LCA1NSwgNzAsIDQzLCAyNiwgMTQyXSxcbiAgICAgICAgICBbMTQ2LCAzNiwgMTksIDMwLCAxNzEsIDI1NSwgOTcsIDI3LCAyMF0sXG4gICAgICAgICAgWzEzOCwgNDUsIDYxLCA2MiwgMjE5LCAxLCA4MSwgMTg4LCA2NF0sXG4gICAgICAgICAgWzMyLCA0MSwgMjAsIDExNywgMTUxLCAxNDIsIDIwLCAyMSwgMTYzXSxcbiAgICAgICAgICBbMTEyLCAxOSwgMTIsIDYxLCAxOTUsIDEyOCwgNDgsIDQsIDI0XVxuICAgICAgICBdXG4gICAgICBdLFxuICAgICAgRWUgPSBbXG4gICAgICAgIFtcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsxNzYsIDI0NiwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjIzLCAyNDEsIDI1MiwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI0OSwgMjUzLCAyNTMsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjQ0LCAyNTIsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyMzQsIDI1NCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjUzLCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNDYsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzIzOSwgMjUzLCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTQsIDI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI0OCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjUxLCAyNTUsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjUzLCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTEsIDI1NCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU0LCAyNTUsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTQsIDI1MywgMjU1LCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1MCwgMjU1LCAyNTQsIDI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF1cbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyMTcsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjI1LCAyNTIsIDI0MSwgMjUzLCAyNTUsIDI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzIzNCwgMjUwLCAyNDEsIDI1MCwgMjUzLCAyNTUsIDI1MywgMjU0LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyMjMsIDI1NCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjM4LCAyNTMsIDI1NCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNDgsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI0OSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1MywgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjQ3LCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjUzLCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTIsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTQsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1MywgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1NCwgMjUzLCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjUwLCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXVxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzE4NiwgMjUxLCAyNTAsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyMzQsIDI1MSwgMjQ0LCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjUxLCAyNTEsIDI0MywgMjUzLCAyNTQsIDI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTMsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzIzNiwgMjUzLCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTEsIDI1MywgMjUzLCAyNTQsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1NCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU0LCAyNTQsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTQsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjQ4LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1MCwgMjU0LCAyNTIsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNDgsIDI1NCwgMjQ5LCAyNTMsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1MywgMjUzLCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjQ2LCAyNTMsIDI1MywgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1MiwgMjU0LCAyNTEsIDI1NCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjU0LCAyNTIsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNDgsIDI1NCwgMjUzLCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjUzLCAyNTUsIDI1NCwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTEsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI0NSwgMjUxLCAyNTQsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTMsIDI1MywgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1MSwgMjUzLCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjUyLCAyNTMsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF0sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgWzI1NSwgMjUyLCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNDksIDI1NSwgMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1NCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdXG4gICAgICAgICAgXSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBbMjU1LCAyNTUsIDI1MywgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1MCwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICBbMjU0LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgWzI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1XVxuICAgICAgICAgIF1cbiAgICAgICAgXVxuICAgICAgXSxcbiAgICAgIEdlID0gWzAsIDEsIDIsIDMsIDYsIDQsIDUsIDYsIDYsIDYsIDYsIDYsIDYsIDYsIDYsIDcsIDBdLFxuICAgICAgTmMsXG4gICAgICBZID0gW10sXG4gICAgICBXID0gW10sXG4gICAgICBrYSA9IFtdLFxuICAgICAgWmEsXG4gICAgICBmZCxcbiAgICAgIE5iLFxuICAgICAgcGEsXG4gICAgICBPYixcbiAgICAgIFhjLFxuICAgICAgVGMsXG4gICAgICBZYyxcbiAgICAgIFVjLFxuICAgICAgWmMsXG4gICAgICBWYyxcbiAgICAgICRjLFxuICAgICAgV2MsXG4gICAgICBSYyxcbiAgICAgIFBjLFxuICAgICAgU2MsXG4gICAgICBRYyxcbiAgICAgIHJlID0gMSxcbiAgICAgIENjID0gMixcbiAgICAgIGlhID0gW10sXG4gICAgICB6YSxcbiAgICAgIHZjLFxuICAgICAgZmMsXG4gICAgICBGYyxcbiAgICAgIFAgPSBbXTtcbiAgICB2YShcIlVwc2FtcGxlUmdiTGluZVBhaXJcIiwgR2EsIDMpO1xuICAgIHZhKFwiVXBzYW1wbGVCZ3JMaW5lUGFpclwiLCBUYiwgMyk7XG4gICAgdmEoXCJVcHNhbXBsZVJnYmFMaW5lUGFpclwiLCB3ZCwgNCk7XG4gICAgdmEoXCJVcHNhbXBsZUJncmFMaW5lUGFpclwiLCB2ZCwgNCk7XG4gICAgdmEoXCJVcHNhbXBsZUFyZ2JMaW5lUGFpclwiLCB1ZCwgNCk7XG4gICAgdmEoXCJVcHNhbXBsZVJnYmE0NDQ0TGluZVBhaXJcIiwgdGQsIDIpO1xuICAgIHZhKFwiVXBzYW1wbGVSZ2I1NjVMaW5lUGFpclwiLCBzZCwgMik7XG4gICAgdmFyIE1mID0gc2VsZi5VcHNhbXBsZVJnYkxpbmVQYWlyLFxuICAgICAgTmYgPSBzZWxmLlVwc2FtcGxlQmdyTGluZVBhaXIsXG4gICAgICBuZCA9IHNlbGYuVXBzYW1wbGVSZ2JhTGluZVBhaXIsXG4gICAgICBvZCA9IHNlbGYuVXBzYW1wbGVCZ3JhTGluZVBhaXIsXG4gICAgICBwZCA9IHNlbGYuVXBzYW1wbGVBcmdiTGluZVBhaXIsXG4gICAgICBxZCA9IHNlbGYuVXBzYW1wbGVSZ2JhNDQ0NExpbmVQYWlyLFxuICAgICAgT2YgPSBzZWxmLlVwc2FtcGxlUmdiNTY1TGluZVBhaXIsXG4gICAgICBXYSA9IDE2LFxuICAgICAgQmEgPSAxIDw8IChXYSAtIDEpLFxuICAgICAgdGEgPSAtMjI3LFxuICAgICAgRWIgPSA0ODIsXG4gICAgICByZCA9IDYsXG4gICAgICBQZiA9ICgyNTYgPDwgcmQpIC0gMSxcbiAgICAgIGpjID0gMCxcbiAgICAgIFlkID0gVigyNTYpLFxuICAgICAgYWUgPSBWKDI1NiksXG4gICAgICAkZCA9IFYoMjU2KSxcbiAgICAgIFpkID0gVigyNTYpLFxuICAgICAgYmUgPSBWKEViIC0gdGEpLFxuICAgICAgY2UgPSBWKEViIC0gdGEpO1xuICAgIGxhKFwiWXV2VG9SZ2JSb3dcIiwgR2EsIDMpO1xuICAgIGxhKFwiWXV2VG9CZ3JSb3dcIiwgVGIsIDMpO1xuICAgIGxhKFwiWXV2VG9SZ2JhUm93XCIsIHdkLCA0KTtcbiAgICBsYShcIll1dlRvQmdyYVJvd1wiLCB2ZCwgNCk7XG4gICAgbGEoXCJZdXZUb0FyZ2JSb3dcIiwgdWQsIDQpO1xuICAgIGxhKFwiWXV2VG9SZ2JhNDQ0NFJvd1wiLCB0ZCwgMik7XG4gICAgbGEoXCJZdXZUb1JnYjU2NVJvd1wiLCBzZCwgMik7XG4gICAgdmFyIHpkID0gW1xuICAgICAgICAwLFxuICAgICAgICA0LFxuICAgICAgICA4LFxuICAgICAgICAxMixcbiAgICAgICAgMTI4LFxuICAgICAgICAxMzIsXG4gICAgICAgIDEzNixcbiAgICAgICAgMTQwLFxuICAgICAgICAyNTYsXG4gICAgICAgIDI2MCxcbiAgICAgICAgMjY0LFxuICAgICAgICAyNjgsXG4gICAgICAgIDM4NCxcbiAgICAgICAgMzg4LFxuICAgICAgICAzOTIsXG4gICAgICAgIDM5NlxuICAgICAgXSxcbiAgICAgIFlhID0gWzAsIDIsIDhdLFxuICAgICAgUWYgPSBbOCwgNywgNiwgNCwgNCwgMiwgMiwgMiwgMSwgMSwgMSwgMV0sXG4gICAgICBOZSA9IDE7XG4gICAgdGhpcy5XZWJQRGVjb2RlUkdCQSA9IGZ1bmN0aW9uKGEsIGIsIGMsIGQsIGUpIHtcbiAgICAgIHZhciBmID0gVWE7XG4gICAgICB2YXIgZyA9IG5ldyBDZigpLFxuICAgICAgICBoID0gbmV3IENiKCk7XG4gICAgICBnLmJhID0gaDtcbiAgICAgIGguUyA9IGY7XG4gICAgICBoLndpZHRoID0gW2gud2lkdGhdO1xuICAgICAgaC5oZWlnaHQgPSBbaC5oZWlnaHRdO1xuICAgICAgdmFyIGsgPSBoLndpZHRoO1xuICAgICAgdmFyIGwgPSBoLmhlaWdodCxcbiAgICAgICAgbSA9IG5ldyBUZCgpO1xuICAgICAgaWYgKG51bGwgPT0gbSB8fCBudWxsID09IGEpIHZhciBuID0gMjtcbiAgICAgIGVsc2VcbiAgICAgICAgeChudWxsICE9IG0pLFxuICAgICAgICAgIChuID0gQWQoYSwgYiwgYywgbS53aWR0aCwgbS5oZWlnaHQsIG0uUGQsIG0uUWQsIG0uZm9ybWF0LCBudWxsKSk7XG4gICAgICAwICE9IG5cbiAgICAgICAgPyAoayA9IDApXG4gICAgICAgIDogKG51bGwgIT0gayAmJiAoa1swXSA9IG0ud2lkdGhbMF0pLFxuICAgICAgICAgIG51bGwgIT0gbCAmJiAobFswXSA9IG0uaGVpZ2h0WzBdKSxcbiAgICAgICAgICAoayA9IDEpKTtcbiAgICAgIGlmIChrKSB7XG4gICAgICAgIGgud2lkdGggPSBoLndpZHRoWzBdO1xuICAgICAgICBoLmhlaWdodCA9IGguaGVpZ2h0WzBdO1xuICAgICAgICBudWxsICE9IGQgJiYgKGRbMF0gPSBoLndpZHRoKTtcbiAgICAgICAgbnVsbCAhPSBlICYmIChlWzBdID0gaC5oZWlnaHQpO1xuICAgICAgICBiOiB7XG4gICAgICAgICAgZCA9IG5ldyBPYSgpO1xuICAgICAgICAgIGUgPSBuZXcgbWQoKTtcbiAgICAgICAgICBlLmRhdGEgPSBhO1xuICAgICAgICAgIGUudyA9IGI7XG4gICAgICAgICAgZS5oYSA9IGM7XG4gICAgICAgICAgZS5rZCA9IDE7XG4gICAgICAgICAgYiA9IFswXTtcbiAgICAgICAgICB4KG51bGwgIT0gZSk7XG4gICAgICAgICAgYSA9IEFkKGUuZGF0YSwgZS53LCBlLmhhLCBudWxsLCBudWxsLCBudWxsLCBiLCBudWxsLCBlKTtcbiAgICAgICAgICAoMCA9PSBhIHx8IDcgPT0gYSkgJiYgYlswXSAmJiAoYSA9IDQpO1xuICAgICAgICAgIGIgPSBhO1xuICAgICAgICAgIGlmICgwID09IGIpIHtcbiAgICAgICAgICAgIHgobnVsbCAhPSBnKTtcbiAgICAgICAgICAgIGQuZGF0YSA9IGUuZGF0YTtcbiAgICAgICAgICAgIGQudyA9IGUudyArIGUub2Zmc2V0O1xuICAgICAgICAgICAgZC5oYSA9IGUuaGEgLSBlLm9mZnNldDtcbiAgICAgICAgICAgIGQucHV0ID0ga2M7XG4gICAgICAgICAgICBkLmFjID0gZ2M7XG4gICAgICAgICAgICBkLmJjID0gbGM7XG4gICAgICAgICAgICBkLm1hID0gZztcbiAgICAgICAgICAgIGlmIChlLnhhKSB7XG4gICAgICAgICAgICAgIGEgPSBCYygpO1xuICAgICAgICAgICAgICBpZiAobnVsbCA9PSBhKSB7XG4gICAgICAgICAgICAgICAgZyA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWsgYjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodGUoYSwgZCkpIHtcbiAgICAgICAgICAgICAgICBiID0gQ2QoZC53aWR0aCwgZC5oZWlnaHQsIGcuT2EsIGcuYmEpO1xuICAgICAgICAgICAgICAgIGlmICgoZCA9IDAgPT0gYikpIHtcbiAgICAgICAgICAgICAgICAgIGM6IHtcbiAgICAgICAgICAgICAgICAgICAgZCA9IGE7XG4gICAgICAgICAgICAgICAgICAgIGQ6IGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGM7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHgobnVsbCAhPSBkLnMueWMpO1xuICAgICAgICAgICAgICAgICAgICAgIHgobnVsbCAhPSBkLnMuWWEpO1xuICAgICAgICAgICAgICAgICAgICAgIHgoMCA8IGQucy5XYik7XG4gICAgICAgICAgICAgICAgICAgICAgYyA9IGQubDtcbiAgICAgICAgICAgICAgICAgICAgICB4KG51bGwgIT0gYyk7XG4gICAgICAgICAgICAgICAgICAgICAgZSA9IGMubWE7XG4gICAgICAgICAgICAgICAgICAgICAgeChudWxsICE9IGUpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICgwICE9IGQueGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQuY2EgPSBlLmJhO1xuICAgICAgICAgICAgICAgICAgICAgICAgZC50YiA9IGUudGI7XG4gICAgICAgICAgICAgICAgICAgICAgICB4KG51bGwgIT0gZC5jYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhjKGUuT2EsIGMsIFZhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkLmEgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFFYyhkLCBjLndpZHRoKSkgYnJlYWsgZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjLmRhKSBicmVhayBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgKGMuZGEgfHwgaGIoZC5jYS5TKSkgJiYgQWEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIDExID4gZC5jYS5TIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIChhbGVydChcInRvZG86V2ViUEluaXRDb252ZXJ0QVJHQlRvWVVWXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGQuY2EuZi5rYi5GICYmIEFhKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkLlBiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDAgPCBkLnMudWEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSBkLnMudmIuWCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAhWmIoZC5zLnZiLCBkLnMuV2EuWGEpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZC5hID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGQueGIgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIUpiKGQsIGQuViwgZC5CYSwgZC5jLCBkLmksIGMubywgZ2UpKSBicmVhayBkO1xuICAgICAgICAgICAgICAgICAgICAgIGUuRGMgPSBkLk1hO1xuICAgICAgICAgICAgICAgICAgICAgIGQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgeCgwICE9IGQuYSk7XG4gICAgICAgICAgICAgICAgICAgIGQgPSAwO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZCA9ICFkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkICYmIChiID0gYS5hKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGIgPSBhLmE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhID0gbmV3IENlKCk7XG4gICAgICAgICAgICAgIGlmIChudWxsID09IGEpIHtcbiAgICAgICAgICAgICAgICBnID0gMTtcbiAgICAgICAgICAgICAgICBicmVhayBiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGEuRmEgPSBlLm5hO1xuICAgICAgICAgICAgICBhLlAgPSBlLlA7XG4gICAgICAgICAgICAgIGEucWMgPSBlLlNhO1xuICAgICAgICAgICAgICBpZiAoS2MoYSwgZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKChiID0gQ2QoZC53aWR0aCwgZC5oZWlnaHQsIGcuT2EsIGcuYmEpKSwgMCA9PSBiKSkge1xuICAgICAgICAgICAgICAgICAgYS5BYSA9IDA7XG4gICAgICAgICAgICAgICAgICBjID0gZy5PYTtcbiAgICAgICAgICAgICAgICAgIGUgPSBhO1xuICAgICAgICAgICAgICAgICAgeChudWxsICE9IGUpO1xuICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gYykge1xuICAgICAgICAgICAgICAgICAgICBrID0gYy5NZDtcbiAgICAgICAgICAgICAgICAgICAgayA9IDAgPiBrID8gMCA6IDEwMCA8IGsgPyAyNTUgOiAoMjU1ICogaykgLyAxMDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgwIDwgaykge1xuICAgICAgICAgICAgICAgICAgICAgIGZvciAobCA9IG0gPSAwOyA0ID4gbDsgKytsKVxuICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBlLnBiW2xdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgMTIgPiBuLmxjICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4uaWEgPSAoayAqIFFmWzAgPiBuLmxjID8gMCA6IG4ubGNdKSA+PiAzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKG0gfD0gbi5pYSk7XG4gICAgICAgICAgICAgICAgICAgICAgbSAmJiAoYWxlcnQoXCJ0b2RvOlZQOEluaXRSYW5kb21cIiksIChlLmlhID0gMSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGUuR2EgPSBjLklkO1xuICAgICAgICAgICAgICAgICAgICAxMDAgPCBlLkdhID8gKGUuR2EgPSAxMDApIDogMCA+IGUuR2EgJiYgKGUuR2EgPSAwKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIE1lKGEsIGQpIHx8IChiID0gYS5hKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBiID0gYS5hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgMCA9PSBiICYmIG51bGwgIT0gZy5PYSAmJiBnLk9hLmZkICYmIChiID0gQmQoZy5iYSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBnID0gYjtcbiAgICAgICAgfVxuICAgICAgICBmID0gMCAhPSBnID8gbnVsbCA6IDExID4gZiA/IGguZi5SR0JBLmViIDogaC5mLmtiLnk7XG4gICAgICB9IGVsc2UgZiA9IG51bGw7XG4gICAgICByZXR1cm4gZjtcbiAgICB9O1xuICAgIHZhciBEZCA9IFszLCA0LCAzLCA0LCA0LCAyLCAyLCA0LCA0LCA0LCAyLCAxLCAxXTtcbiAgfTtcbiAgbmV3IF9XZWJQRGVjb2RlcigpO1xuXG4gIC8qKiBAbGljZW5zZVxuICAgKiBDb3B5cmlnaHQgKGMpIDIwMTcgRG9taW5payBIb21iZXJnZXJcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5odHRwczovL3dlYnBqcy5hcHBzcG90LmNvbVxuV2ViUFJpZmZQYXJzZXIgZG9taW5pa2hsYmdAZ21haWwuY29tXG4qL1xuXG4gIGZ1bmN0aW9uIG1lbWNtcChkYXRhLCBkYXRhX29mZiwgc3RyLCBzaXplKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspXG4gICAgICBpZiAoZGF0YVtkYXRhX29mZiArIGldICE9IHN0ci5jaGFyQ29kZUF0KGkpKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBHZXRUYWcoZGF0YSwgZGF0YV9vZmYpIHtcbiAgICB2YXIgc3RyID0gXCJcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZGF0YVtkYXRhX29mZisrXSk7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuXG4gIGZ1bmN0aW9uIEdldExFMTYoZGF0YSwgZGF0YV9vZmYpIHtcbiAgICByZXR1cm4gKGRhdGFbZGF0YV9vZmYgKyAwXSA8PCAwKSB8IChkYXRhW2RhdGFfb2ZmICsgMV0gPDwgOCk7XG4gIH1cblxuICBmdW5jdGlvbiBHZXRMRTI0KGRhdGEsIGRhdGFfb2ZmKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICgoZGF0YVtkYXRhX29mZiArIDBdIDw8IDApIHxcbiAgICAgICAgKGRhdGFbZGF0YV9vZmYgKyAxXSA8PCA4KSB8XG4gICAgICAgIChkYXRhW2RhdGFfb2ZmICsgMl0gPDwgMTYpKSA+Pj5cbiAgICAgIDBcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gR2V0TEUzMihkYXRhLCBkYXRhX29mZikge1xuICAgIHJldHVybiAoXG4gICAgICAoKGRhdGFbZGF0YV9vZmYgKyAwXSA8PCAwKSB8XG4gICAgICAgIChkYXRhW2RhdGFfb2ZmICsgMV0gPDwgOCkgfFxuICAgICAgICAoZGF0YVtkYXRhX29mZiArIDJdIDw8IDE2KSB8XG4gICAgICAgIChkYXRhW2RhdGFfb2ZmICsgM10gPDwgMjQpKSA+Pj5cbiAgICAgIDBcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gV2ViUFJpZmZQYXJzZXIoc3JjLCBzcmNfb2ZmKSB7XG4gICAgdmFyIGltYWdlYXJyYXkgPSB7fTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGFscGhhX2NodW5rID0gZmFsc2U7XG4gICAgdmFyIGFscGhhX3NpemUgPSAwO1xuICAgIHZhciBhbHBoYV9vZmZzZXQgPSAwO1xuICAgIGltYWdlYXJyYXlbXCJmcmFtZXNcIl0gPSBbXTtcbiAgICBpZiAobWVtY21wKHNyYywgc3JjX29mZiwgXCJSSUZGXCIsIDQpKSByZXR1cm47XG4gICAgc3JjX29mZiArPSA0O1xuICAgIHZhciByaWZmX3NpemUgPSBHZXRMRTMyKHNyYywgc3JjX29mZikgKyA4O1xuICAgIHNyY19vZmYgKz0gODtcblxuICAgIHdoaWxlIChzcmNfb2ZmIDwgc3JjLmxlbmd0aCkge1xuICAgICAgdmFyIGZvdXJjYyA9IEdldFRhZyhzcmMsIHNyY19vZmYpO1xuICAgICAgc3JjX29mZiArPSA0O1xuXG4gICAgICB2YXIgcGF5bG9hZF9zaXplID0gR2V0TEUzMihzcmMsIHNyY19vZmYpO1xuICAgICAgc3JjX29mZiArPSA0O1xuICAgICAgdmFyIHBheWxvYWRfc2l6ZV9wYWRkZWQgPSBwYXlsb2FkX3NpemUgKyAocGF5bG9hZF9zaXplICYgMSk7XG5cbiAgICAgIHN3aXRjaCAoZm91cmNjKSB7XG4gICAgICAgIGNhc2UgXCJWUDggXCI6XG4gICAgICAgIGNhc2UgXCJWUDhMXCI6XG4gICAgICAgICAgaWYgKHR5cGVvZiBpbWFnZWFycmF5W1wiZnJhbWVzXCJdW2ldID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgaW1hZ2VhcnJheVtcImZyYW1lc1wiXVtpXSA9IHt9O1xuICAgICAgICAgIHZhciBvYmogPSBpbWFnZWFycmF5W1wiZnJhbWVzXCJdW2ldO1xuICAgICAgICAgIHZhciBoZWlnaHQgPSBbMF07XG4gICAgICAgICAgdmFyIHdpZHRoID0gWzBdO1xuICAgICAgICAgIG9ialtcInNyY19vZmZcIl0gPSBhbHBoYV9jaHVuayA/IGFscGhhX29mZnNldCA6IHNyY19vZmYgLSA4O1xuICAgICAgICAgIG9ialtcInNyY19zaXplXCJdID0gYWxwaGFfc2l6ZSArIHBheWxvYWRfc2l6ZSArIDg7XG4gICAgICAgICAgLy92YXIgcmdiYSA9IHdlYnBkZWNvZGVyLldlYlBEZWNvZGVSR0JBKHNyYywoYWxwaGFfY2h1bms/YWxwaGFfb2Zmc2V0OnNyY19vZmYtOCksYWxwaGFfc2l6ZStwYXlsb2FkX3NpemUrOCx3aWR0aCxoZWlnaHQpO1xuICAgICAgICAgIC8vaW1hZ2VhcnJheVtpXT17J3JnYmEnOnJnYmEsJ3dpZHRoJzp3aWR0aFswXSwnaGVpZ2h0JzpoZWlnaHRbMF19O1xuICAgICAgICAgIGkrKztcbiAgICAgICAgICBpZiAoYWxwaGFfY2h1bmspIHtcbiAgICAgICAgICAgIGFscGhhX2NodW5rID0gZmFsc2U7XG4gICAgICAgICAgICBhbHBoYV9zaXplID0gMDtcbiAgICAgICAgICAgIGFscGhhX29mZnNldCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiVlA4WFwiOlxuICAgICAgICAgIHZhciBvYmogPSAoaW1hZ2VhcnJheVtcImhlYWRlclwiXSA9IHt9KTtcbiAgICAgICAgICB2YXIgZmVhdHVyZV9mbGFncyA9IChvYmpbXCJmZWF0dXJlX2ZsYWdzXCJdID0gc3JjW3NyY19vZmZdKTtcbiAgICAgICAgICB2YXIgc3JjX29mZl8gPSBzcmNfb2ZmICsgNDtcbiAgICAgICAgICB2YXIgY2FudmFzX3dpZHRoID0gKG9ialtcImNhbnZhc193aWR0aFwiXSA9IDEgKyBHZXRMRTI0KHNyYywgc3JjX29mZl8pKTtcbiAgICAgICAgICBzcmNfb2ZmXyArPSAzO1xuICAgICAgICAgIHZhciBjYW52YXNfaGVpZ2h0ID0gKG9ialtcImNhbnZhc19oZWlnaHRcIl0gPVxuICAgICAgICAgICAgMSArIEdldExFMjQoc3JjLCBzcmNfb2ZmXykpO1xuICAgICAgICAgIHNyY19vZmZfICs9IDM7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBTFBIXCI6XG4gICAgICAgICAgYWxwaGFfY2h1bmsgPSB0cnVlO1xuICAgICAgICAgIGFscGhhX3NpemUgPSBwYXlsb2FkX3NpemVfcGFkZGVkICsgODtcbiAgICAgICAgICBhbHBoYV9vZmZzZXQgPSBzcmNfb2ZmIC0gODtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiQU5JTVwiOlxuICAgICAgICAgIHZhciBvYmogPSBpbWFnZWFycmF5W1wiaGVhZGVyXCJdO1xuICAgICAgICAgIHZhciBiZ2NvbG9yID0gKG9ialtcImJnY29sb3JcIl0gPSBHZXRMRTMyKHNyYywgc3JjX29mZikpO1xuICAgICAgICAgIHNyY19vZmZfID0gc3JjX29mZiArIDQ7XG5cbiAgICAgICAgICB2YXIgbG9vcF9jb3VudCA9IChvYmpbXCJsb29wX2NvdW50XCJdID0gR2V0TEUxNihzcmMsIHNyY19vZmZfKSk7XG4gICAgICAgICAgc3JjX29mZl8gKz0gMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFOTUZcIjpcbiAgICAgICAgICB2YXIgb2Zmc2V0X3ggPSAwLFxuICAgICAgICAgICAgb2Zmc2V0X3kgPSAwLFxuICAgICAgICAgICAgd2lkdGggPSAwLFxuICAgICAgICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgICAgICAgIGR1cmF0aW9uID0gMCxcbiAgICAgICAgICAgIGJsZW5kID0gMCxcbiAgICAgICAgICAgIGRpc3Bvc2UgPSAwLFxuICAgICAgICAgICAgdGVtcCA9IDA7XG4gICAgICAgICAgdmFyIG9iaiA9IChpbWFnZWFycmF5W1wiZnJhbWVzXCJdW2ldID0ge30pO1xuICAgICAgICAgIG9ialtcIm9mZnNldF94XCJdID0gb2Zmc2V0X3ggPSAyICogR2V0TEUyNChzcmMsIHNyY19vZmYpO1xuICAgICAgICAgIHNyY19vZmYgKz0gMztcbiAgICAgICAgICBvYmpbXCJvZmZzZXRfeVwiXSA9IG9mZnNldF95ID0gMiAqIEdldExFMjQoc3JjLCBzcmNfb2ZmKTtcbiAgICAgICAgICBzcmNfb2ZmICs9IDM7XG4gICAgICAgICAgb2JqW1wid2lkdGhcIl0gPSB3aWR0aCA9IDEgKyBHZXRMRTI0KHNyYywgc3JjX29mZik7XG4gICAgICAgICAgc3JjX29mZiArPSAzO1xuICAgICAgICAgIG9ialtcImhlaWdodFwiXSA9IGhlaWdodCA9IDEgKyBHZXRMRTI0KHNyYywgc3JjX29mZik7XG4gICAgICAgICAgc3JjX29mZiArPSAzO1xuICAgICAgICAgIG9ialtcImR1cmF0aW9uXCJdID0gZHVyYXRpb24gPSBHZXRMRTI0KHNyYywgc3JjX29mZik7XG4gICAgICAgICAgc3JjX29mZiArPSAzO1xuICAgICAgICAgIHRlbXAgPSBzcmNbc3JjX29mZisrXTtcbiAgICAgICAgICBvYmpbXCJkaXNwb3NlXCJdID0gZGlzcG9zZSA9IHRlbXAgJiAxO1xuICAgICAgICAgIG9ialtcImJsZW5kXCJdID0gYmxlbmQgPSAodGVtcCA+PiAxKSAmIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICB9XG4gICAgICBpZiAoZm91cmNjICE9IFwiQU5NRlwiKSBzcmNfb2ZmICs9IHBheWxvYWRfc2l6ZV9wYWRkZWQ7XG4gICAgfVxuICAgIHJldHVybiBpbWFnZWFycmF5O1xuICB9XG5cbiAgdmFyIGhlaWdodCA9IFswXTtcbiAgdmFyIHdpZHRoID0gWzBdO1xuICB2YXIgcGl4ZWxzID0gW107XG4gIHZhciB3ZWJwZGVjb2RlciA9IG5ldyBfV2ViUERlY29kZXIoKTtcblxuICB2YXIgcmVzcG9uc2UgPSBpbWFnZURhdGE7XG4gIHZhciBpbWFnZWFycmF5ID0gV2ViUFJpZmZQYXJzZXIocmVzcG9uc2UsIDApO1xuICBpbWFnZWFycmF5W1wicmVzcG9uc2VcIl0gPSByZXNwb25zZTtcbiAgaW1hZ2VhcnJheVtcInJnYmFvdXRwdXRcIl0gPSB0cnVlO1xuICBpbWFnZWFycmF5W1wiZGF0YXVybFwiXSA9IGZhbHNlO1xuXG4gIHZhciBoZWFkZXIgPSBpbWFnZWFycmF5W1wiaGVhZGVyXCJdID8gaW1hZ2VhcnJheVtcImhlYWRlclwiXSA6IG51bGw7XG4gIHZhciBmcmFtZXMgPSBpbWFnZWFycmF5W1wiZnJhbWVzXCJdID8gaW1hZ2VhcnJheVtcImZyYW1lc1wiXSA6IG51bGw7XG5cbiAgaWYgKGhlYWRlcikge1xuICAgIGhlYWRlcltcImxvb3BfY291bnRlclwiXSA9IGhlYWRlcltcImxvb3BfY291bnRcIl07XG4gICAgaGVpZ2h0ID0gW2hlYWRlcltcImNhbnZhc19oZWlnaHRcIl1dO1xuICAgIHdpZHRoID0gW2hlYWRlcltcImNhbnZhc193aWR0aFwiXV07XG5cbiAgICB2YXIgYmxlbmQgPSBmYWxzZTtcbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZyYW1lcy5sZW5ndGg7IGYrKylcbiAgICAgIGlmIChmcmFtZXNbZl1bXCJibGVuZFwiXSA9PSAwKSB7XG4gICAgICAgIGJsZW5kID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gIH1cblxuICB2YXIgZnJhbWUgPSBmcmFtZXNbMF07XG4gIHZhciByZ2JhID0gd2VicGRlY29kZXIuV2ViUERlY29kZVJHQkEoXG4gICAgcmVzcG9uc2UsXG4gICAgZnJhbWVbXCJzcmNfb2ZmXCJdLFxuICAgIGZyYW1lW1wic3JjX3NpemVcIl0sXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0XG4gICk7XG4gIGZyYW1lW1wicmdiYVwiXSA9IHJnYmE7XG4gIGZyYW1lW1wiaW1nd2lkdGhcIl0gPSB3aWR0aFswXTtcbiAgZnJhbWVbXCJpbWdoZWlnaHRcIl0gPSBoZWlnaHRbMF07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aFswXSAqIGhlaWdodFswXSAqIDQ7IGkrKykge1xuICAgIHBpeGVsc1tpXSA9IHJnYmFbaV07XG4gIH1cblxuICB0aGlzLndpZHRoID0gd2lkdGg7XG4gIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB0aGlzLmRhdGEgPSBwaXhlbHM7XG4gIHJldHVybiB0aGlzO1xufVxuXG5XZWJQRGVjb2Rlci5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5kYXRhO1xufTtcblxuZXhwb3J0IHsgV2ViUERlY29kZXIgfTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgSmFtZXMgUm9iYiwgaHR0cHM6Ly9naXRodWIuY29tL2phbWVzYnJvYmJcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbiAqIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4gKiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xuICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICogTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRVxuICogTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuICogT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4gKiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcbmltcG9ydCB7IHpsaWJTeW5jIH0gZnJvbSBcIi4uL2xpYnMvZmZsYXRlLmpzXCI7XG5pbXBvcnQgeyBQTkcgfSBmcm9tIFwiLi4vbGlicy9wbmcuanNcIjtcblxuLyoqXG4gKiBqc1BERiBQTkcgUGx1Z0luXG4gKiBAbmFtZSBwbmdfc3VwcG9ydFxuICogQG1vZHVsZVxuICovXG4oZnVuY3Rpb24oanNQREZBUEkpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLypcbiAgICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9QTkctQ2h1bmtzLmh0bWxcbiAgICpcbiAgIENvbG9yICAgIEFsbG93ZWQgICAgICBJbnRlcnByZXRhdGlvblxuICAgVHlwZSAgICAgQml0IERlcHRoc1xuXG4gICAgIDAgICAgICAgMSwyLDQsOCwxNiAgRWFjaCBwaXhlbCBpcyBhIGdyYXlzY2FsZSBzYW1wbGUuXG5cbiAgICAgMiAgICAgICA4LDE2ICAgICAgICBFYWNoIHBpeGVsIGlzIGFuIFIsRyxCIHRyaXBsZS5cblxuICAgICAzICAgICAgIDEsMiw0LDggICAgIEVhY2ggcGl4ZWwgaXMgYSBwYWxldHRlIGluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgIGEgUExURSBjaHVuayBtdXN0IGFwcGVhci5cblxuICAgICA0ICAgICAgIDgsMTYgICAgICAgIEVhY2ggcGl4ZWwgaXMgYSBncmF5c2NhbGUgc2FtcGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGxvd2VkIGJ5IGFuIGFscGhhIHNhbXBsZS5cblxuICAgICA2ICAgICAgIDgsMTYgICAgICAgIEVhY2ggcGl4ZWwgaXMgYW4gUixHLEIgdHJpcGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGxvd2VkIGJ5IGFuIGFscGhhIHNhbXBsZS5cbiAgKi9cblxuICAvKlxuICAgKiBQTkcgZmlsdGVyIG1ldGhvZCB0eXBlc1xuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL1BORy1GaWx0ZXJzLmh0bWxcbiAgICogQHNlZSBodHRwOi8vd3d3LmxpYnBuZy5vcmcvcHViL3BuZy9ib29rL2NoYXB0ZXIwOS5odG1sXG4gICAqXG4gICAqIFRoaXMgaXMgd2hhdCB0aGUgdmFsdWUgJ1ByZWRpY3RvcicgaW4gZGVjb2RlIHBhcmFtcyByZWxhdGVzIHRvXG4gICAqXG4gICAqIDE1IGlzIFwib3B0aW1hbCBwcmVkaWN0aW9uXCIsIHdoaWNoIG1lYW5zIHRoZSBwcmVkaWN0aW9uIGFsZ29yaXRobSBjYW4gY2hhbmdlIGZyb20gbGluZSB0byBsaW5lLlxuICAgKiBJbiB0aGF0IGNhc2UsIHlvdSBhY3R1YWxseSBoYXZlIHRvIHJlYWQgdGhlIGZpcnN0IGJ5dGUgb2ZmIGVhY2ggbGluZSBmb3IgdGhlIHByZWRpY3Rpb24gYWxnb3J0aGltICh3aGljaCBzaG91bGQgYmUgMC00LCBjb3JyZXNwb25kaW5nIHRvIFBERiAxMC0xNCkgYW5kIHNlbGVjdCB0aGUgYXBwcm9wcmlhdGUgdW5wcmVkaWN0aW9uIGFsZ29yaXRobSBiYXNlZCBvbiB0aGF0IGJ5dGUuXG4gICAqXG4gICAgIDAgICAgICAgTm9uZVxuICAgICAxICAgICAgIFN1YlxuICAgICAyICAgICAgIFVwXG4gICAgIDMgICAgICAgQXZlcmFnZVxuICAgICA0ICAgICAgIFBhZXRoXG4gICAqL1xuXG4gIHZhciBjYW5Db21wcmVzcyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBqc1BERkFQSS5pbWFnZV9jb21wcmVzc2lvbi5OT05FICYmIGhhc0NvbXByZXNzaW9uSlMoKTtcbiAgfTtcblxuICB2YXIgaGFzQ29tcHJlc3Npb25KUyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0eXBlb2YgemxpYlN5bmMgPT09IFwiZnVuY3Rpb25cIjtcbiAgfTtcbiAgdmFyIGNvbXByZXNzQnl0ZXMgPSBmdW5jdGlvbihieXRlcywgbGluZUxlbmd0aCwgY29sb3JzUGVyUGl4ZWwsIGNvbXByZXNzaW9uKSB7XG4gICAgdmFyIGxldmVsID0gNDtcbiAgICB2YXIgZmlsdGVyX21ldGhvZCA9IGZpbHRlclVwO1xuXG4gICAgc3dpdGNoIChjb21wcmVzc2lvbikge1xuICAgICAgY2FzZSBqc1BERkFQSS5pbWFnZV9jb21wcmVzc2lvbi5GQVNUOlxuICAgICAgICBsZXZlbCA9IDE7XG4gICAgICAgIGZpbHRlcl9tZXRob2QgPSBmaWx0ZXJTdWI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGpzUERGQVBJLmltYWdlX2NvbXByZXNzaW9uLk1FRElVTTpcbiAgICAgICAgbGV2ZWwgPSA2O1xuICAgICAgICBmaWx0ZXJfbWV0aG9kID0gZmlsdGVyQXZlcmFnZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UganNQREZBUEkuaW1hZ2VfY29tcHJlc3Npb24uU0xPVzpcbiAgICAgICAgbGV2ZWwgPSA5O1xuICAgICAgICBmaWx0ZXJfbWV0aG9kID0gZmlsdGVyUGFldGg7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGJ5dGVzID0gYXBwbHlQbmdGaWx0ZXJNZXRob2QoXG4gICAgICBieXRlcyxcbiAgICAgIGxpbmVMZW5ndGgsXG4gICAgICBjb2xvcnNQZXJQaXhlbCxcbiAgICAgIGZpbHRlcl9tZXRob2RcbiAgICApO1xuICAgIHZhciBkYXQgPSB6bGliU3luYyhieXRlcywgeyBsZXZlbDogbGV2ZWwgfSk7XG4gICAgcmV0dXJuIGpzUERGQVBJLl9fYWRkaW1hZ2VfXy5hcnJheUJ1ZmZlclRvQmluYXJ5U3RyaW5nKGRhdCk7XG4gIH07XG5cbiAgdmFyIGFwcGx5UG5nRmlsdGVyTWV0aG9kID0gZnVuY3Rpb24oXG4gICAgYnl0ZXMsXG4gICAgbGluZUxlbmd0aCxcbiAgICBjb2xvcnNQZXJQaXhlbCxcbiAgICBmaWx0ZXJfbWV0aG9kXG4gICkge1xuICAgIHZhciBsaW5lcyA9IGJ5dGVzLmxlbmd0aCAvIGxpbmVMZW5ndGgsXG4gICAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheShieXRlcy5sZW5ndGggKyBsaW5lcyksXG4gICAgICBmaWx0ZXJfbWV0aG9kcyA9IGdldEZpbHRlck1ldGhvZHMoKSxcbiAgICAgIGxpbmUsXG4gICAgICBwcmV2TGluZSxcbiAgICAgIG9mZnNldDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXM7IGkgKz0gMSkge1xuICAgICAgb2Zmc2V0ID0gaSAqIGxpbmVMZW5ndGg7XG4gICAgICBsaW5lID0gYnl0ZXMuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBsaW5lTGVuZ3RoKTtcblxuICAgICAgaWYgKGZpbHRlcl9tZXRob2QpIHtcbiAgICAgICAgcmVzdWx0LnNldChmaWx0ZXJfbWV0aG9kKGxpbmUsIGNvbG9yc1BlclBpeGVsLCBwcmV2TGluZSksIG9mZnNldCArIGkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGxlbiA9IGZpbHRlcl9tZXRob2RzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHRzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgajsgaiA8IGxlbjsgaiArPSAxKSB7XG4gICAgICAgICAgcmVzdWx0c1tqXSA9IGZpbHRlcl9tZXRob2RzW2pdKGxpbmUsIGNvbG9yc1BlclBpeGVsLCBwcmV2TGluZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW5kID0gZ2V0SW5kZXhPZlNtYWxsZXN0U3VtKHJlc3VsdHMuY29uY2F0KCkpO1xuXG4gICAgICAgIHJlc3VsdC5zZXQocmVzdWx0c1tpbmRdLCBvZmZzZXQgKyBpKTtcbiAgICAgIH1cblxuICAgICAgcHJldkxpbmUgPSBsaW5lO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIGZpbHRlck5vbmUgPSBmdW5jdGlvbihsaW5lKSB7XG4gICAgLyp2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGluZS5sZW5ndGggKyAxKTtcbiAgICByZXN1bHRbMF0gPSAwO1xuICAgIHJlc3VsdC5zZXQobGluZSwgMSk7Ki9cblxuICAgIHZhciByZXN1bHQgPSBBcnJheS5hcHBseShbXSwgbGluZSk7XG4gICAgcmVzdWx0LnVuc2hpZnQoMCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBmaWx0ZXJTdWIgPSBmdW5jdGlvbihsaW5lLCBjb2xvcnNQZXJQaXhlbCkge1xuICAgIHZhciByZXN1bHQgPSBbXSxcbiAgICAgIGxlbiA9IGxpbmUubGVuZ3RoLFxuICAgICAgbGVmdDtcblxuICAgIHJlc3VsdFswXSA9IDE7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBsZWZ0ID0gbGluZVtpIC0gY29sb3JzUGVyUGl4ZWxdIHx8IDA7XG4gICAgICByZXN1bHRbaSArIDFdID0gKGxpbmVbaV0gLSBsZWZ0ICsgMHgwMTAwKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB2YXIgZmlsdGVyVXAgPSBmdW5jdGlvbihsaW5lLCBjb2xvcnNQZXJQaXhlbCwgcHJldkxpbmUpIHtcbiAgICB2YXIgcmVzdWx0ID0gW10sXG4gICAgICBsZW4gPSBsaW5lLmxlbmd0aCxcbiAgICAgIHVwO1xuXG4gICAgcmVzdWx0WzBdID0gMjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIHVwID0gKHByZXZMaW5lICYmIHByZXZMaW5lW2ldKSB8fCAwO1xuICAgICAgcmVzdWx0W2kgKyAxXSA9IChsaW5lW2ldIC0gdXAgKyAweDAxMDApICYgMHhmZjtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBmaWx0ZXJBdmVyYWdlID0gZnVuY3Rpb24obGluZSwgY29sb3JzUGVyUGl4ZWwsIHByZXZMaW5lKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgbGVuID0gbGluZS5sZW5ndGgsXG4gICAgICBsZWZ0LFxuICAgICAgdXA7XG5cbiAgICByZXN1bHRbMF0gPSAzO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgbGVmdCA9IGxpbmVbaSAtIGNvbG9yc1BlclBpeGVsXSB8fCAwO1xuICAgICAgdXAgPSAocHJldkxpbmUgJiYgcHJldkxpbmVbaV0pIHx8IDA7XG4gICAgICByZXN1bHRbaSArIDFdID0gKGxpbmVbaV0gKyAweDAxMDAgLSAoKGxlZnQgKyB1cCkgPj4+IDEpKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB2YXIgZmlsdGVyUGFldGggPSBmdW5jdGlvbihsaW5lLCBjb2xvcnNQZXJQaXhlbCwgcHJldkxpbmUpIHtcbiAgICB2YXIgcmVzdWx0ID0gW10sXG4gICAgICBsZW4gPSBsaW5lLmxlbmd0aCxcbiAgICAgIGxlZnQsXG4gICAgICB1cCxcbiAgICAgIHVwTGVmdCxcbiAgICAgIHBhZXRoO1xuXG4gICAgcmVzdWx0WzBdID0gNDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIGxlZnQgPSBsaW5lW2kgLSBjb2xvcnNQZXJQaXhlbF0gfHwgMDtcbiAgICAgIHVwID0gKHByZXZMaW5lICYmIHByZXZMaW5lW2ldKSB8fCAwO1xuICAgICAgdXBMZWZ0ID0gKHByZXZMaW5lICYmIHByZXZMaW5lW2kgLSBjb2xvcnNQZXJQaXhlbF0pIHx8IDA7XG4gICAgICBwYWV0aCA9IHBhZXRoUHJlZGljdG9yKGxlZnQsIHVwLCB1cExlZnQpO1xuICAgICAgcmVzdWx0W2kgKyAxXSA9IChsaW5lW2ldIC0gcGFldGggKyAweDAxMDApICYgMHhmZjtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBwYWV0aFByZWRpY3RvciA9IGZ1bmN0aW9uKGxlZnQsIHVwLCB1cExlZnQpIHtcbiAgICBpZiAobGVmdCA9PT0gdXAgJiYgdXAgPT09IHVwTGVmdCkge1xuICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgfVxuICAgIHZhciBwTGVmdCA9IE1hdGguYWJzKHVwIC0gdXBMZWZ0KSxcbiAgICAgIHBVcCA9IE1hdGguYWJzKGxlZnQgLSB1cExlZnQpLFxuICAgICAgcFVwTGVmdCA9IE1hdGguYWJzKGxlZnQgKyB1cCAtIHVwTGVmdCAtIHVwTGVmdCk7XG4gICAgcmV0dXJuIHBMZWZ0IDw9IHBVcCAmJiBwTGVmdCA8PSBwVXBMZWZ0XG4gICAgICA/IGxlZnRcbiAgICAgIDogcFVwIDw9IHBVcExlZnRcbiAgICAgID8gdXBcbiAgICAgIDogdXBMZWZ0O1xuICB9O1xuXG4gIHZhciBnZXRGaWx0ZXJNZXRob2RzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFtmaWx0ZXJOb25lLCBmaWx0ZXJTdWIsIGZpbHRlclVwLCBmaWx0ZXJBdmVyYWdlLCBmaWx0ZXJQYWV0aF07XG4gIH07XG5cbiAgdmFyIGdldEluZGV4T2ZTbWFsbGVzdFN1bSA9IGZ1bmN0aW9uKGFycmF5cykge1xuICAgIHZhciBzdW0gPSBhcnJheXMubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUucmVkdWNlKGZ1bmN0aW9uKHB2LCBjdikge1xuICAgICAgICByZXR1cm4gcHYgKyBNYXRoLmFicyhjdik7XG4gICAgICB9LCAwKTtcbiAgICB9KTtcbiAgICByZXR1cm4gc3VtLmluZGV4T2YoTWF0aC5taW4uYXBwbHkobnVsbCwgc3VtKSk7XG4gIH07XG5cbiAgdmFyIGdldFByZWRpY3RvckZyb21Db21wcmVzc2lvbiA9IGZ1bmN0aW9uKGNvbXByZXNzaW9uKSB7XG4gICAgdmFyIHByZWRpY3RvcjtcbiAgICBzd2l0Y2ggKGNvbXByZXNzaW9uKSB7XG4gICAgICBjYXNlIGpzUERGQVBJLmltYWdlX2NvbXByZXNzaW9uLkZBU1Q6XG4gICAgICAgIHByZWRpY3RvciA9IDExO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBqc1BERkFQSS5pbWFnZV9jb21wcmVzc2lvbi5NRURJVU06XG4gICAgICAgIHByZWRpY3RvciA9IDEzO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBqc1BERkFQSS5pbWFnZV9jb21wcmVzc2lvbi5TTE9XOlxuICAgICAgICBwcmVkaWN0b3IgPSAxNDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHByZWRpY3RvciA9IDEyO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHByZWRpY3RvcjtcbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgcHJvY2Vzc1BOR1xuICAgKiBAZnVuY3Rpb25cbiAgICogQGlnbm9yZVxuICAgKi9cbiAganNQREZBUEkucHJvY2Vzc1BORyA9IGZ1bmN0aW9uKGltYWdlRGF0YSwgaW5kZXgsIGFsaWFzLCBjb21wcmVzc2lvbikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGNvbG9yU3BhY2UsXG4gICAgICBmaWx0ZXIgPSB0aGlzLmRlY29kZS5GTEFURV9ERUNPREUsXG4gICAgICBiaXRzUGVyQ29tcG9uZW50LFxuICAgICAgaW1hZ2UsXG4gICAgICBkZWNvZGVQYXJhbWV0ZXJzID0gXCJcIixcbiAgICAgIHRybnMsXG4gICAgICBjb2xvcnMsXG4gICAgICBwYWwsXG4gICAgICBzbWFzayxcbiAgICAgIHBpeGVscyxcbiAgICAgIGxlbixcbiAgICAgIGFscGhhRGF0YSxcbiAgICAgIGltZ0RhdGEsXG4gICAgICBoYXNDb2xvcnMsXG4gICAgICBwaXhlbCxcbiAgICAgIGksXG4gICAgICBuO1xuXG4gICAgaWYgKHRoaXMuX19hZGRpbWFnZV9fLmlzQXJyYXlCdWZmZXIoaW1hZ2VEYXRhKSlcbiAgICAgIGltYWdlRGF0YSA9IG5ldyBVaW50OEFycmF5KGltYWdlRGF0YSk7XG5cbiAgICBpZiAodGhpcy5fX2FkZGltYWdlX18uaXNBcnJheUJ1ZmZlclZpZXcoaW1hZ2VEYXRhKSkge1xuICAgICAgaW1hZ2UgPSBuZXcgUE5HKGltYWdlRGF0YSk7XG4gICAgICBpbWFnZURhdGEgPSBpbWFnZS5pbWdEYXRhO1xuICAgICAgYml0c1BlckNvbXBvbmVudCA9IGltYWdlLmJpdHM7XG4gICAgICBjb2xvclNwYWNlID0gaW1hZ2UuY29sb3JTcGFjZTtcbiAgICAgIGNvbG9ycyA9IGltYWdlLmNvbG9ycztcblxuICAgICAgLypcbiAgICAgICAqIGNvbG9yVHlwZSA2IC0gRWFjaCBwaXhlbCBpcyBhbiBSLEcsQiB0cmlwbGUsIGZvbGxvd2VkIGJ5IGFuIGFscGhhIHNhbXBsZS5cbiAgICAgICAqXG4gICAgICAgKiBjb2xvclR5cGUgNCAtIEVhY2ggcGl4ZWwgaXMgYSBncmF5c2NhbGUgc2FtcGxlLCBmb2xsb3dlZCBieSBhbiBhbHBoYSBzYW1wbGUuXG4gICAgICAgKlxuICAgICAgICogRXh0cmFjdCBhbHBoYSB0byBjcmVhdGUgdHdvIHNlcGFyYXRlIGltYWdlcywgdXNpbmcgdGhlIGFscGhhIGFzIGEgc01hc2tcbiAgICAgICAqL1xuICAgICAgaWYgKFs0LCA2XS5pbmRleE9mKGltYWdlLmNvbG9yVHlwZSkgIT09IC0xKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIHByb2Nlc3NlcyA4IGJpdCBSR0JBIGFuZCBncmF5c2NhbGUgKyBhbHBoYSBpbWFnZXNcbiAgICAgICAgICovXG4gICAgICAgIGlmIChpbWFnZS5iaXRzID09PSA4KSB7XG4gICAgICAgICAgcGl4ZWxzID1cbiAgICAgICAgICAgIGltYWdlLnBpeGVsQml0bGVuZ3RoID09IDMyXG4gICAgICAgICAgICAgID8gbmV3IFVpbnQzMkFycmF5KGltYWdlLmRlY29kZVBpeGVscygpLmJ1ZmZlcilcbiAgICAgICAgICAgICAgOiBpbWFnZS5waXhlbEJpdGxlbmd0aCA9PSAxNlxuICAgICAgICAgICAgICA/IG5ldyBVaW50MTZBcnJheShpbWFnZS5kZWNvZGVQaXhlbHMoKS5idWZmZXIpXG4gICAgICAgICAgICAgIDogbmV3IFVpbnQ4QXJyYXkoaW1hZ2UuZGVjb2RlUGl4ZWxzKCkuYnVmZmVyKTtcbiAgICAgICAgICBsZW4gPSBwaXhlbHMubGVuZ3RoO1xuICAgICAgICAgIGltZ0RhdGEgPSBuZXcgVWludDhBcnJheShsZW4gKiBpbWFnZS5jb2xvcnMpO1xuICAgICAgICAgIGFscGhhRGF0YSA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgICAgICAgdmFyIHBEaWZmID0gaW1hZ2UucGl4ZWxCaXRsZW5ndGggLSBpbWFnZS5iaXRzO1xuICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgIHZhciBwYmw7XG5cbiAgICAgICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBwaXhlbCA9IHBpeGVsc1tpXTtcbiAgICAgICAgICAgIHBibCA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChwYmwgPCBwRGlmZikge1xuICAgICAgICAgICAgICBpbWdEYXRhW24rK10gPSAocGl4ZWwgPj4+IHBibCkgJiAweGZmO1xuICAgICAgICAgICAgICBwYmwgPSBwYmwgKyBpbWFnZS5iaXRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbHBoYURhdGFbaV0gPSAocGl4ZWwgPj4+IHBibCkgJiAweGZmO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIHByb2Nlc3NlcyAxNiBiaXQgUkdCQSBhbmQgZ3JheXNjYWxlICsgYWxwaGEgaW1hZ2VzXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoaW1hZ2UuYml0cyA9PT0gMTYpIHtcbiAgICAgICAgICBwaXhlbHMgPSBuZXcgVWludDMyQXJyYXkoaW1hZ2UuZGVjb2RlUGl4ZWxzKCkuYnVmZmVyKTtcbiAgICAgICAgICBsZW4gPSBwaXhlbHMubGVuZ3RoO1xuICAgICAgICAgIGltZ0RhdGEgPSBuZXcgVWludDhBcnJheShcbiAgICAgICAgICAgIGxlbiAqICgzMiAvIGltYWdlLnBpeGVsQml0bGVuZ3RoKSAqIGltYWdlLmNvbG9yc1xuICAgICAgICAgICk7XG4gICAgICAgICAgYWxwaGFEYXRhID0gbmV3IFVpbnQ4QXJyYXkobGVuICogKDMyIC8gaW1hZ2UucGl4ZWxCaXRsZW5ndGgpKTtcbiAgICAgICAgICBoYXNDb2xvcnMgPSBpbWFnZS5jb2xvcnMgPiAxO1xuICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgIHZhciBhID0gMDtcblxuICAgICAgICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgICAgICBwaXhlbCA9IHBpeGVsc1tpKytdO1xuXG4gICAgICAgICAgICBpbWdEYXRhW24rK10gPSAocGl4ZWwgPj4+IDApICYgMHhmZjtcblxuICAgICAgICAgICAgaWYgKGhhc0NvbG9ycykge1xuICAgICAgICAgICAgICBpbWdEYXRhW24rK10gPSAocGl4ZWwgPj4+IDE2KSAmIDB4ZmY7XG5cbiAgICAgICAgICAgICAgcGl4ZWwgPSBwaXhlbHNbaSsrXTtcbiAgICAgICAgICAgICAgaW1nRGF0YVtuKytdID0gKHBpeGVsID4+PiAwKSAmIDB4ZmY7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFscGhhRGF0YVthKytdID0gKHBpeGVsID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiaXRzUGVyQ29tcG9uZW50ID0gODtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYW5Db21wcmVzcyhjb21wcmVzc2lvbikpIHtcbiAgICAgICAgICBpbWFnZURhdGEgPSBjb21wcmVzc0J5dGVzKFxuICAgICAgICAgICAgaW1nRGF0YSxcbiAgICAgICAgICAgIGltYWdlLndpZHRoICogaW1hZ2UuY29sb3JzLFxuICAgICAgICAgICAgaW1hZ2UuY29sb3JzLFxuICAgICAgICAgICAgY29tcHJlc3Npb25cbiAgICAgICAgICApO1xuICAgICAgICAgIHNtYXNrID0gY29tcHJlc3NCeXRlcyhhbHBoYURhdGEsIGltYWdlLndpZHRoLCAxLCBjb21wcmVzc2lvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW1hZ2VEYXRhID0gaW1nRGF0YTtcbiAgICAgICAgICBzbWFzayA9IGFscGhhRGF0YTtcbiAgICAgICAgICBmaWx0ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLypcbiAgICAgICAqIEluZGV4ZWQgcG5nLiBFYWNoIHBpeGVsIGlzIGEgcGFsZXR0ZSBpbmRleC5cbiAgICAgICAqL1xuICAgICAgaWYgKGltYWdlLmNvbG9yVHlwZSA9PT0gMykge1xuICAgICAgICBjb2xvclNwYWNlID0gdGhpcy5jb2xvcl9zcGFjZXMuSU5ERVhFRDtcbiAgICAgICAgcGFsID0gaW1hZ2UucGFsZXR0ZTtcblxuICAgICAgICBpZiAoaW1hZ2UudHJhbnNwYXJlbmN5LmluZGV4ZWQpIHtcbiAgICAgICAgICB2YXIgdHJhbnMgPSBpbWFnZS50cmFuc3BhcmVuY3kuaW5kZXhlZDtcbiAgICAgICAgICB2YXIgdG90YWwgPSAwO1xuICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgIGxlbiA9IHRyYW5zLmxlbmd0aDtcblxuICAgICAgICAgIGZvciAoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHRvdGFsICs9IHRyYW5zW2ldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRvdGFsID0gdG90YWwgLyAyNTU7XG5cbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIGEgc2luZ2xlIGNvbG9yIGlzIHNwZWNpZmllZCBhcyAxMDAlIHRyYW5zcGFyZW50ICgwKSxcbiAgICAgICAgICAgKiBzbyB3ZSBzZXQgdHJucyB0byB1c2UgYSAvTWFzayB3aXRoIHRoYXQgaW5kZXhcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAodG90YWwgPT09IGxlbiAtIDEgJiYgdHJhbnMuaW5kZXhPZigwKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRybnMgPSBbdHJhbnMuaW5kZXhPZigwKV07XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgY29sb3VyIHdpdGhpbiB0aGUgcGFsZXR0ZSB0aGF0IHNwZWNpZmllc1xuICAgICAgICAgICAgICogYSB0cmFuc3BhcmVuY3kgdmFsdWUgbGVzcyB0aGFuIDI1NSwgc28gd2UgdW5yb2xsIHRoZSBwaXhlbHMgdG8gY3JlYXRlIGFuIGltYWdlIHNNYXNrXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICB9IGVsc2UgaWYgKHRvdGFsICE9PSBsZW4pIHtcbiAgICAgICAgICAgIHBpeGVscyA9IGltYWdlLmRlY29kZVBpeGVscygpO1xuICAgICAgICAgICAgYWxwaGFEYXRhID0gbmV3IFVpbnQ4QXJyYXkocGl4ZWxzLmxlbmd0aCk7XG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIGxlbiA9IHBpeGVscy5sZW5ndGg7XG5cbiAgICAgICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgYWxwaGFEYXRhW2ldID0gdHJhbnNbcGl4ZWxzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc21hc2sgPSBjb21wcmVzc0J5dGVzKGFscGhhRGF0YSwgaW1hZ2Uud2lkdGgsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgcHJlZGljdG9yID0gZ2V0UHJlZGljdG9yRnJvbUNvbXByZXNzaW9uKGNvbXByZXNzaW9uKTtcblxuICAgICAgaWYgKGZpbHRlciA9PT0gdGhpcy5kZWNvZGUuRkxBVEVfREVDT0RFKSB7XG4gICAgICAgIGRlY29kZVBhcmFtZXRlcnMgPSBcIi9QcmVkaWN0b3IgXCIgKyBwcmVkaWN0b3IgKyBcIiBcIjtcbiAgICAgIH1cbiAgICAgIGRlY29kZVBhcmFtZXRlcnMgKz1cbiAgICAgICAgXCIvQ29sb3JzIFwiICtcbiAgICAgICAgY29sb3JzICtcbiAgICAgICAgXCIgL0JpdHNQZXJDb21wb25lbnQgXCIgK1xuICAgICAgICBiaXRzUGVyQ29tcG9uZW50ICtcbiAgICAgICAgXCIgL0NvbHVtbnMgXCIgK1xuICAgICAgICBpbWFnZS53aWR0aDtcblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLl9fYWRkaW1hZ2VfXy5pc0FycmF5QnVmZmVyKGltYWdlRGF0YSkgfHxcbiAgICAgICAgdGhpcy5fX2FkZGltYWdlX18uaXNBcnJheUJ1ZmZlclZpZXcoaW1hZ2VEYXRhKVxuICAgICAgKSB7XG4gICAgICAgIGltYWdlRGF0YSA9IHRoaXMuX19hZGRpbWFnZV9fLmFycmF5QnVmZmVyVG9CaW5hcnlTdHJpbmcoaW1hZ2VEYXRhKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAoc21hc2sgJiYgdGhpcy5fX2FkZGltYWdlX18uaXNBcnJheUJ1ZmZlcihzbWFzaykpIHx8XG4gICAgICAgIHRoaXMuX19hZGRpbWFnZV9fLmlzQXJyYXlCdWZmZXJWaWV3KHNtYXNrKVxuICAgICAgKSB7XG4gICAgICAgIHNtYXNrID0gdGhpcy5fX2FkZGltYWdlX18uYXJyYXlCdWZmZXJUb0JpbmFyeVN0cmluZyhzbWFzayk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFsaWFzOiBhbGlhcyxcbiAgICAgICAgZGF0YTogaW1hZ2VEYXRhLFxuICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgIGZpbHRlcjogZmlsdGVyLFxuICAgICAgICBkZWNvZGVQYXJhbWV0ZXJzOiBkZWNvZGVQYXJhbWV0ZXJzLFxuICAgICAgICB0cmFuc3BhcmVuY3k6IHRybnMsXG4gICAgICAgIHBhbGV0dGU6IHBhbCxcbiAgICAgICAgc01hc2s6IHNtYXNrLFxuICAgICAgICBwcmVkaWN0b3I6IHByZWRpY3RvcixcbiAgICAgICAgd2lkdGg6IGltYWdlLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IGltYWdlLmhlaWdodCxcbiAgICAgICAgYml0c1BlckNvbXBvbmVudDogYml0c1BlckNvbXBvbmVudCxcbiAgICAgICAgY29sb3JTcGFjZTogY29sb3JTcGFjZVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59KShqc1BERi5BUEkpO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IEFyYXMgQWJiYXNpXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcbmltcG9ydCB7IEdpZlJlYWRlciB9IGZyb20gXCIuLi9saWJzL29tZ2dpZi5qc1wiO1xuaW1wb3J0IHsgSlBFR0VuY29kZXIgfSBmcm9tIFwiLi4vbGlicy9KUEVHRW5jb2Rlci5qc1wiO1xuXG4vKipcbiAqIGpzUERGIEdpZiBTdXBwb3J0IFBsdWdJblxuICpcbiAqIEBuYW1lIGdpZl9zdXBwb3J0XG4gKiBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbihqc1BERkFQSSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBqc1BERkFQSS5wcm9jZXNzR0lGODlBID0gZnVuY3Rpb24oaW1hZ2VEYXRhLCBpbmRleCwgYWxpYXMsIGNvbXByZXNzaW9uKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBHaWZSZWFkZXIoaW1hZ2VEYXRhKTtcbiAgICB2YXIgd2lkdGggPSByZWFkZXIud2lkdGgsXG4gICAgICBoZWlnaHQgPSByZWFkZXIuaGVpZ2h0O1xuICAgIHZhciBxdSA9IDEwMDtcbiAgICB2YXIgcGl4ZWxzID0gW107XG5cbiAgICByZWFkZXIuZGVjb2RlQW5kQmxpdEZyYW1lUkdCQSgwLCBwaXhlbHMpO1xuICAgIHZhciByYXdJbWFnZURhdGEgPSB7XG4gICAgICBkYXRhOiBwaXhlbHMsXG4gICAgICB3aWR0aDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH07XG5cbiAgICB2YXIgZW5jb2RlciA9IG5ldyBKUEVHRW5jb2RlcihxdSk7XG4gICAgdmFyIGRhdGEgPSBlbmNvZGVyLmVuY29kZShyYXdJbWFnZURhdGEsIHF1KTtcbiAgICByZXR1cm4ganNQREZBUEkucHJvY2Vzc0pQRUcuY2FsbCh0aGlzLCBkYXRhLCBpbmRleCwgYWxpYXMsIGNvbXByZXNzaW9uKTtcbiAgfTtcblxuICBqc1BERkFQSS5wcm9jZXNzR0lGODdBID0ganNQREZBUEkucHJvY2Vzc0dJRjg5QTtcbn0pKGpzUERGLkFQSSk7XG4iLCJpbXBvcnQgeyBKUEVHRW5jb2RlciB9IGZyb20gXCIuLi9saWJzL0pQRUdFbmNvZGVyLmpzXCI7XG5pbXBvcnQgeyBCbXBEZWNvZGVyIH0gZnJvbSBcIi4uL2xpYnMvQk1QRGVjb2Rlci5qc1wiO1xuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE4IEFyYXMgQWJiYXNpXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuLyoqXG4gKiBqc1BERiBibXAgU3VwcG9ydCBQbHVnSW5cbiAqIEBuYW1lIGJtcF9zdXBwb3J0XG4gKiBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbihqc1BERkFQSSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBqc1BERkFQSS5wcm9jZXNzQk1QID0gZnVuY3Rpb24oaW1hZ2VEYXRhLCBpbmRleCwgYWxpYXMsIGNvbXByZXNzaW9uKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBCbXBEZWNvZGVyKGltYWdlRGF0YSwgZmFsc2UpO1xuICAgIHZhciB3aWR0aCA9IHJlYWRlci53aWR0aCxcbiAgICAgIGhlaWdodCA9IHJlYWRlci5oZWlnaHQ7XG4gICAgdmFyIHF1ID0gMTAwO1xuICAgIHZhciBwaXhlbHMgPSByZWFkZXIuZ2V0RGF0YSgpO1xuXG4gICAgdmFyIHJhd0ltYWdlRGF0YSA9IHtcbiAgICAgIGRhdGE6IHBpeGVscyxcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgfTtcblxuICAgIHZhciBlbmNvZGVyID0gbmV3IEpQRUdFbmNvZGVyKHF1KTtcbiAgICB2YXIgZGF0YSA9IGVuY29kZXIuZW5jb2RlKHJhd0ltYWdlRGF0YSwgcXUpO1xuICAgIHJldHVybiBqc1BERkFQSS5wcm9jZXNzSlBFRy5jYWxsKHRoaXMsIGRhdGEsIGluZGV4LCBhbGlhcywgY29tcHJlc3Npb24pO1xuICB9O1xufSkoanNQREYuQVBJKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxOSBBcmFzIEFiYmFzaVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5pbXBvcnQgeyBKUEVHRW5jb2RlciB9IGZyb20gXCIuLi9saWJzL0pQRUdFbmNvZGVyLmpzXCI7XG5pbXBvcnQgeyBXZWJQRGVjb2RlciB9IGZyb20gXCIuLi9saWJzL1dlYlBEZWNvZGVyLmpzXCI7XG5cbi8qKlxuICoganNQREYgd2VicCBTdXBwb3J0IFBsdWdJblxuICpcbiAqIEBuYW1lIHdlYnBfc3VwcG9ydFxuICogQG1vZHVsZVxuICovXG4oZnVuY3Rpb24oanNQREZBUEkpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAganNQREZBUEkucHJvY2Vzc1dFQlAgPSBmdW5jdGlvbihpbWFnZURhdGEsIGluZGV4LCBhbGlhcywgY29tcHJlc3Npb24pIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IFdlYlBEZWNvZGVyKGltYWdlRGF0YSwgZmFsc2UpO1xuICAgIHZhciB3aWR0aCA9IHJlYWRlci53aWR0aCxcbiAgICAgIGhlaWdodCA9IHJlYWRlci5oZWlnaHQ7XG4gICAgdmFyIHF1ID0gMTAwO1xuICAgIHZhciBwaXhlbHMgPSByZWFkZXIuZ2V0RGF0YSgpO1xuXG4gICAgdmFyIHJhd0ltYWdlRGF0YSA9IHtcbiAgICAgIGRhdGE6IHBpeGVscyxcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgfTtcblxuICAgIHZhciBlbmNvZGVyID0gbmV3IEpQRUdFbmNvZGVyKHF1KTtcbiAgICB2YXIgZGF0YSA9IGVuY29kZXIuZW5jb2RlKHJhd0ltYWdlRGF0YSwgcXUpO1xuICAgIHJldHVybiBqc1BERkFQSS5wcm9jZXNzSlBFRy5jYWxsKHRoaXMsIGRhdGEsIGluZGV4LCBhbGlhcywgY29tcHJlc3Npb24pO1xuICB9O1xufSkoanNQREYuQVBJKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgQW50dGkgUGFsb2xhLCBodHRwczovL2dpdGh1Yi5jb20vUGFudHVyYVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4gKiBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbiAqIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG4gKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0ZcbiAqIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG4gKiBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFXG4gKiBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4gKiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbiAqIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuXG4vKipcbiAqIGpzUERGIFJHQkEgYXJyYXkgUGx1Z0luXG4gKiBAbmFtZSByZ2JhX3N1cHBvcnRcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qKlxuICAgKiBAbmFtZSBwcm9jZXNzUkdCQVxuICAgKiBAZnVuY3Rpb25cbiAgICpcbiAgICogUHJvY2VzcyBSR0JBIEFycmF5LiBUaGlzIGlzIGEgb25lLWRpbWVuc2lvbiBhcnJheSB3aXRoIHBpeGVsIGRhdGEgW3JlZCwgZ3JlZW4sIGJsdWUsIGFscGhhLCByZWQsIGdyZWVuLCAuLi5dLlxuICAgKiBSR0JBIGFycmF5IGRhdGEgY2FuIGJlIG9idGFpbmVkIGZyb20gRE9NIGNhbnZhcyBnZXRJbWFnZURhdGEuXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGpzUERGQVBJLnByb2Nlc3NSR0JBID0gZnVuY3Rpb24oaW1hZ2VEYXRhLCBpbmRleCwgYWxpYXMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBpbWFnZVBpeGVscyA9IGltYWdlRGF0YS5kYXRhO1xuICAgIHZhciBsZW5ndGggPSBpbWFnZVBpeGVscy5sZW5ndGg7XG4gICAgLy8ganNQREYgdGFrZXMgYWxwaGEgZGF0YSBzZXBhcmF0ZWx5IHNvIGV4dHJhY3QgdGhhdC5cbiAgICB2YXIgcmdiT3V0ID0gbmV3IFVpbnQ4QXJyYXkoKGxlbmd0aCAvIDQpICogMyk7XG4gICAgdmFyIGFscGhhT3V0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoIC8gNCk7XG4gICAgdmFyIG91dEluZGV4ID0gMDtcbiAgICB2YXIgYWxwaGFJbmRleCA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSA0KSB7XG4gICAgICB2YXIgciA9IGltYWdlUGl4ZWxzW2ldO1xuICAgICAgdmFyIGcgPSBpbWFnZVBpeGVsc1tpICsgMV07XG4gICAgICB2YXIgYiA9IGltYWdlUGl4ZWxzW2kgKyAyXTtcbiAgICAgIHZhciBhbHBoYSA9IGltYWdlUGl4ZWxzW2kgKyAzXTtcbiAgICAgIHJnYk91dFtvdXRJbmRleCsrXSA9IHI7XG4gICAgICByZ2JPdXRbb3V0SW5kZXgrK10gPSBnO1xuICAgICAgcmdiT3V0W291dEluZGV4KytdID0gYjtcbiAgICAgIGFscGhhT3V0W2FscGhhSW5kZXgrK10gPSBhbHBoYTtcbiAgICB9XG5cbiAgICB2YXIgcmdiRGF0YSA9IHRoaXMuX19hZGRpbWFnZV9fLmFycmF5QnVmZmVyVG9CaW5hcnlTdHJpbmcocmdiT3V0KTtcbiAgICB2YXIgYWxwaGFEYXRhID0gdGhpcy5fX2FkZGltYWdlX18uYXJyYXlCdWZmZXJUb0JpbmFyeVN0cmluZyhhbHBoYU91dCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWxwaGE6IGFscGhhRGF0YSxcbiAgICAgIGRhdGE6IHJnYkRhdGEsXG4gICAgICBpbmRleDogaW5kZXgsXG4gICAgICBhbGlhczogYWxpYXMsXG4gICAgICBjb2xvclNwYWNlOiBcIkRldmljZVJHQlwiLFxuICAgICAgYml0c1BlckNvbXBvbmVudDogOCxcbiAgICAgIHdpZHRoOiBpbWFnZURhdGEud2lkdGgsXG4gICAgICBoZWlnaHQ6IGltYWdlRGF0YS5oZWlnaHRcbiAgICB9O1xuICB9O1xufSkoanNQREYuQVBJKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5cbi8qKlxuICoganNQREYgc2V0TGFuZ3VhZ2UgUGx1Z2luXG4gKlxuICogQG5hbWUgc2V0TGFuZ3VhZ2VcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qKlxuICAgKiBBZGQgTGFuZ3VhZ2UgVGFnIHRvIHRoZSBnZW5lcmF0ZWQgUERGXG4gICAqXG4gICAqIEBuYW1lIHNldExhbmd1YWdlXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ0NvZGUgVGhlIExhbmd1YWdlIGNvZGUgYXMgSVNPLTYzOS0xIChlLmcuICdlbicpIG9yIGFzIGNvdW50cnkgbGFuZ3VhZ2UgY29kZSAoZS5nLiAnZW4tR0InKS5cbiAgICogQHJldHVybnMge2pzUERGfVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgZG9jID0gbmV3IGpzUERGKClcbiAgICogZG9jLnRleHQoMTAsIDEwLCAnVGhpcyBpcyBhIHRlc3QnKVxuICAgKiBkb2Muc2V0TGFuZ3VhZ2UoXCJlbi1VU1wiKVxuICAgKiBkb2Muc2F2ZSgnZW5nbGlzaC5wZGYnKVxuICAgKi9cbiAganNQREZBUEkuc2V0TGFuZ3VhZ2UgPSBmdW5jdGlvbihsYW5nQ29kZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGxhbmdDb2RlcyA9IHtcbiAgICAgIGFmOiBcIkFmcmlrYWFuc1wiLFxuICAgICAgc3E6IFwiQWxiYW5pYW5cIixcbiAgICAgIGFyOiBcIkFyYWJpYyAoU3RhbmRhcmQpXCIsXG4gICAgICBcImFyLURaXCI6IFwiQXJhYmljIChBbGdlcmlhKVwiLFxuICAgICAgXCJhci1CSFwiOiBcIkFyYWJpYyAoQmFocmFpbilcIixcbiAgICAgIFwiYXItRUdcIjogXCJBcmFiaWMgKEVneXB0KVwiLFxuICAgICAgXCJhci1JUVwiOiBcIkFyYWJpYyAoSXJhcSlcIixcbiAgICAgIFwiYXItSk9cIjogXCJBcmFiaWMgKEpvcmRhbilcIixcbiAgICAgIFwiYXItS1dcIjogXCJBcmFiaWMgKEt1d2FpdClcIixcbiAgICAgIFwiYXItTEJcIjogXCJBcmFiaWMgKExlYmFub24pXCIsXG4gICAgICBcImFyLUxZXCI6IFwiQXJhYmljIChMaWJ5YSlcIixcbiAgICAgIFwiYXItTUFcIjogXCJBcmFiaWMgKE1vcm9jY28pXCIsXG4gICAgICBcImFyLU9NXCI6IFwiQXJhYmljIChPbWFuKVwiLFxuICAgICAgXCJhci1RQVwiOiBcIkFyYWJpYyAoUWF0YXIpXCIsXG4gICAgICBcImFyLVNBXCI6IFwiQXJhYmljIChTYXVkaSBBcmFiaWEpXCIsXG4gICAgICBcImFyLVNZXCI6IFwiQXJhYmljIChTeXJpYSlcIixcbiAgICAgIFwiYXItVE5cIjogXCJBcmFiaWMgKFR1bmlzaWEpXCIsXG4gICAgICBcImFyLUFFXCI6IFwiQXJhYmljIChVLkEuRS4pXCIsXG4gICAgICBcImFyLVlFXCI6IFwiQXJhYmljIChZZW1lbilcIixcbiAgICAgIGFuOiBcIkFyYWdvbmVzZVwiLFxuICAgICAgaHk6IFwiQXJtZW5pYW5cIixcbiAgICAgIGFzOiBcIkFzc2FtZXNlXCIsXG4gICAgICBhc3Q6IFwiQXN0dXJpYW5cIixcbiAgICAgIGF6OiBcIkF6ZXJiYWlqYW5pXCIsXG4gICAgICBldTogXCJCYXNxdWVcIixcbiAgICAgIGJlOiBcIkJlbGFydXNpYW5cIixcbiAgICAgIGJuOiBcIkJlbmdhbGlcIixcbiAgICAgIGJzOiBcIkJvc25pYW5cIixcbiAgICAgIGJyOiBcIkJyZXRvblwiLFxuICAgICAgYmc6IFwiQnVsZ2FyaWFuXCIsXG4gICAgICBteTogXCJCdXJtZXNlXCIsXG4gICAgICBjYTogXCJDYXRhbGFuXCIsXG4gICAgICBjaDogXCJDaGFtb3Jyb1wiLFxuICAgICAgY2U6IFwiQ2hlY2hlblwiLFxuICAgICAgemg6IFwiQ2hpbmVzZVwiLFxuICAgICAgXCJ6aC1IS1wiOiBcIkNoaW5lc2UgKEhvbmcgS29uZylcIixcbiAgICAgIFwiemgtQ05cIjogXCJDaGluZXNlIChQUkMpXCIsXG4gICAgICBcInpoLVNHXCI6IFwiQ2hpbmVzZSAoU2luZ2Fwb3JlKVwiLFxuICAgICAgXCJ6aC1UV1wiOiBcIkNoaW5lc2UgKFRhaXdhbilcIixcbiAgICAgIGN2OiBcIkNodXZhc2hcIixcbiAgICAgIGNvOiBcIkNvcnNpY2FuXCIsXG4gICAgICBjcjogXCJDcmVlXCIsXG4gICAgICBocjogXCJDcm9hdGlhblwiLFxuICAgICAgY3M6IFwiQ3plY2hcIixcbiAgICAgIGRhOiBcIkRhbmlzaFwiLFxuICAgICAgbmw6IFwiRHV0Y2ggKFN0YW5kYXJkKVwiLFxuICAgICAgXCJubC1CRVwiOiBcIkR1dGNoIChCZWxnaWFuKVwiLFxuICAgICAgZW46IFwiRW5nbGlzaFwiLFxuICAgICAgXCJlbi1BVVwiOiBcIkVuZ2xpc2ggKEF1c3RyYWxpYSlcIixcbiAgICAgIFwiZW4tQlpcIjogXCJFbmdsaXNoIChCZWxpemUpXCIsXG4gICAgICBcImVuLUNBXCI6IFwiRW5nbGlzaCAoQ2FuYWRhKVwiLFxuICAgICAgXCJlbi1JRVwiOiBcIkVuZ2xpc2ggKElyZWxhbmQpXCIsXG4gICAgICBcImVuLUpNXCI6IFwiRW5nbGlzaCAoSmFtYWljYSlcIixcbiAgICAgIFwiZW4tTlpcIjogXCJFbmdsaXNoIChOZXcgWmVhbGFuZClcIixcbiAgICAgIFwiZW4tUEhcIjogXCJFbmdsaXNoIChQaGlsaXBwaW5lcylcIixcbiAgICAgIFwiZW4tWkFcIjogXCJFbmdsaXNoIChTb3V0aCBBZnJpY2EpXCIsXG4gICAgICBcImVuLVRUXCI6IFwiRW5nbGlzaCAoVHJpbmlkYWQgJiBUb2JhZ28pXCIsXG4gICAgICBcImVuLUdCXCI6IFwiRW5nbGlzaCAoVW5pdGVkIEtpbmdkb20pXCIsXG4gICAgICBcImVuLVVTXCI6IFwiRW5nbGlzaCAoVW5pdGVkIFN0YXRlcylcIixcbiAgICAgIFwiZW4tWldcIjogXCJFbmdsaXNoIChaaW1iYWJ3ZSlcIixcbiAgICAgIGVvOiBcIkVzcGVyYW50b1wiLFxuICAgICAgZXQ6IFwiRXN0b25pYW5cIixcbiAgICAgIGZvOiBcIkZhZXJvZXNlXCIsXG4gICAgICBmajogXCJGaWppYW5cIixcbiAgICAgIGZpOiBcIkZpbm5pc2hcIixcbiAgICAgIGZyOiBcIkZyZW5jaCAoU3RhbmRhcmQpXCIsXG4gICAgICBcImZyLUJFXCI6IFwiRnJlbmNoIChCZWxnaXVtKVwiLFxuICAgICAgXCJmci1DQVwiOiBcIkZyZW5jaCAoQ2FuYWRhKVwiLFxuICAgICAgXCJmci1GUlwiOiBcIkZyZW5jaCAoRnJhbmNlKVwiLFxuICAgICAgXCJmci1MVVwiOiBcIkZyZW5jaCAoTHV4ZW1ib3VyZylcIixcbiAgICAgIFwiZnItTUNcIjogXCJGcmVuY2ggKE1vbmFjbylcIixcbiAgICAgIFwiZnItQ0hcIjogXCJGcmVuY2ggKFN3aXR6ZXJsYW5kKVwiLFxuICAgICAgZnk6IFwiRnJpc2lhblwiLFxuICAgICAgZnVyOiBcIkZyaXVsaWFuXCIsXG4gICAgICBnZDogXCJHYWVsaWMgKFNjb3RzKVwiLFxuICAgICAgXCJnZC1JRVwiOiBcIkdhZWxpYyAoSXJpc2gpXCIsXG4gICAgICBnbDogXCJHYWxhY2lhblwiLFxuICAgICAga2E6IFwiR2VvcmdpYW5cIixcbiAgICAgIGRlOiBcIkdlcm1hbiAoU3RhbmRhcmQpXCIsXG4gICAgICBcImRlLUFUXCI6IFwiR2VybWFuIChBdXN0cmlhKVwiLFxuICAgICAgXCJkZS1ERVwiOiBcIkdlcm1hbiAoR2VybWFueSlcIixcbiAgICAgIFwiZGUtTElcIjogXCJHZXJtYW4gKExpZWNodGVuc3RlaW4pXCIsXG4gICAgICBcImRlLUxVXCI6IFwiR2VybWFuIChMdXhlbWJvdXJnKVwiLFxuICAgICAgXCJkZS1DSFwiOiBcIkdlcm1hbiAoU3dpdHplcmxhbmQpXCIsXG4gICAgICBlbDogXCJHcmVla1wiLFxuICAgICAgZ3U6IFwiR3VqdXJhdGlcIixcbiAgICAgIGh0OiBcIkhhaXRpYW5cIixcbiAgICAgIGhlOiBcIkhlYnJld1wiLFxuICAgICAgaGk6IFwiSGluZGlcIixcbiAgICAgIGh1OiBcIkh1bmdhcmlhblwiLFxuICAgICAgaXM6IFwiSWNlbGFuZGljXCIsXG4gICAgICBpZDogXCJJbmRvbmVzaWFuXCIsXG4gICAgICBpdTogXCJJbnVrdGl0dXRcIixcbiAgICAgIGdhOiBcIklyaXNoXCIsXG4gICAgICBpdDogXCJJdGFsaWFuIChTdGFuZGFyZClcIixcbiAgICAgIFwiaXQtQ0hcIjogXCJJdGFsaWFuIChTd2l0emVybGFuZClcIixcbiAgICAgIGphOiBcIkphcGFuZXNlXCIsXG4gICAgICBrbjogXCJLYW5uYWRhXCIsXG4gICAgICBrczogXCJLYXNobWlyaVwiLFxuICAgICAga2s6IFwiS2F6YWtoXCIsXG4gICAgICBrbTogXCJLaG1lclwiLFxuICAgICAga3k6IFwiS2lyZ2hpelwiLFxuICAgICAgdGxoOiBcIktsaW5nb25cIixcbiAgICAgIGtvOiBcIktvcmVhblwiLFxuICAgICAgXCJrby1LUFwiOiBcIktvcmVhbiAoTm9ydGggS29yZWEpXCIsXG4gICAgICBcImtvLUtSXCI6IFwiS29yZWFuIChTb3V0aCBLb3JlYSlcIixcbiAgICAgIGxhOiBcIkxhdGluXCIsXG4gICAgICBsdjogXCJMYXR2aWFuXCIsXG4gICAgICBsdDogXCJMaXRodWFuaWFuXCIsXG4gICAgICBsYjogXCJMdXhlbWJvdXJnaXNoXCIsXG4gICAgICBtazogXCJOb3J0aCBNYWNlZG9uaWFcIixcbiAgICAgIG1zOiBcIk1hbGF5XCIsXG4gICAgICBtbDogXCJNYWxheWFsYW1cIixcbiAgICAgIG10OiBcIk1hbHRlc2VcIixcbiAgICAgIG1pOiBcIk1hb3JpXCIsXG4gICAgICBtcjogXCJNYXJhdGhpXCIsXG4gICAgICBtbzogXCJNb2xkYXZpYW5cIixcbiAgICAgIG52OiBcIk5hdmFqb1wiLFxuICAgICAgbmc6IFwiTmRvbmdhXCIsXG4gICAgICBuZTogXCJOZXBhbGlcIixcbiAgICAgIG5vOiBcIk5vcndlZ2lhblwiLFxuICAgICAgbmI6IFwiTm9yd2VnaWFuIChCb2ttYWwpXCIsXG4gICAgICBubjogXCJOb3J3ZWdpYW4gKE55bm9yc2spXCIsXG4gICAgICBvYzogXCJPY2NpdGFuXCIsXG4gICAgICBvcjogXCJPcml5YVwiLFxuICAgICAgb206IFwiT3JvbW9cIixcbiAgICAgIGZhOiBcIlBlcnNpYW5cIixcbiAgICAgIFwiZmEtSVJcIjogXCJQZXJzaWFuL0lyYW5cIixcbiAgICAgIHBsOiBcIlBvbGlzaFwiLFxuICAgICAgcHQ6IFwiUG9ydHVndWVzZVwiLFxuICAgICAgXCJwdC1CUlwiOiBcIlBvcnR1Z3Vlc2UgKEJyYXppbClcIixcbiAgICAgIHBhOiBcIlB1bmphYmlcIixcbiAgICAgIFwicGEtSU5cIjogXCJQdW5qYWJpIChJbmRpYSlcIixcbiAgICAgIFwicGEtUEtcIjogXCJQdW5qYWJpIChQYWtpc3RhbilcIixcbiAgICAgIHF1OiBcIlF1ZWNodWFcIixcbiAgICAgIHJtOiBcIlJoYWV0by1Sb21hbmljXCIsXG4gICAgICBybzogXCJSb21hbmlhblwiLFxuICAgICAgXCJyby1NT1wiOiBcIlJvbWFuaWFuIChNb2xkYXZpYSlcIixcbiAgICAgIHJ1OiBcIlJ1c3NpYW5cIixcbiAgICAgIFwicnUtTU9cIjogXCJSdXNzaWFuIChNb2xkYXZpYSlcIixcbiAgICAgIHN6OiBcIlNhbWkgKExhcHBpc2gpXCIsXG4gICAgICBzZzogXCJTYW5nb1wiLFxuICAgICAgc2E6IFwiU2Fuc2tyaXRcIixcbiAgICAgIHNjOiBcIlNhcmRpbmlhblwiLFxuICAgICAgc2Q6IFwiU2luZGhpXCIsXG4gICAgICBzaTogXCJTaW5naGFsZXNlXCIsXG4gICAgICBzcjogXCJTZXJiaWFuXCIsXG4gICAgICBzazogXCJTbG92YWtcIixcbiAgICAgIHNsOiBcIlNsb3ZlbmlhblwiLFxuICAgICAgc286IFwiU29tYW5pXCIsXG4gICAgICBzYjogXCJTb3JiaWFuXCIsXG4gICAgICBlczogXCJTcGFuaXNoXCIsXG4gICAgICBcImVzLUFSXCI6IFwiU3BhbmlzaCAoQXJnZW50aW5hKVwiLFxuICAgICAgXCJlcy1CT1wiOiBcIlNwYW5pc2ggKEJvbGl2aWEpXCIsXG4gICAgICBcImVzLUNMXCI6IFwiU3BhbmlzaCAoQ2hpbGUpXCIsXG4gICAgICBcImVzLUNPXCI6IFwiU3BhbmlzaCAoQ29sb21iaWEpXCIsXG4gICAgICBcImVzLUNSXCI6IFwiU3BhbmlzaCAoQ29zdGEgUmljYSlcIixcbiAgICAgIFwiZXMtRE9cIjogXCJTcGFuaXNoIChEb21pbmljYW4gUmVwdWJsaWMpXCIsXG4gICAgICBcImVzLUVDXCI6IFwiU3BhbmlzaCAoRWN1YWRvcilcIixcbiAgICAgIFwiZXMtU1ZcIjogXCJTcGFuaXNoIChFbCBTYWx2YWRvcilcIixcbiAgICAgIFwiZXMtR1RcIjogXCJTcGFuaXNoIChHdWF0ZW1hbGEpXCIsXG4gICAgICBcImVzLUhOXCI6IFwiU3BhbmlzaCAoSG9uZHVyYXMpXCIsXG4gICAgICBcImVzLU1YXCI6IFwiU3BhbmlzaCAoTWV4aWNvKVwiLFxuICAgICAgXCJlcy1OSVwiOiBcIlNwYW5pc2ggKE5pY2FyYWd1YSlcIixcbiAgICAgIFwiZXMtUEFcIjogXCJTcGFuaXNoIChQYW5hbWEpXCIsXG4gICAgICBcImVzLVBZXCI6IFwiU3BhbmlzaCAoUGFyYWd1YXkpXCIsXG4gICAgICBcImVzLVBFXCI6IFwiU3BhbmlzaCAoUGVydSlcIixcbiAgICAgIFwiZXMtUFJcIjogXCJTcGFuaXNoIChQdWVydG8gUmljbylcIixcbiAgICAgIFwiZXMtRVNcIjogXCJTcGFuaXNoIChTcGFpbilcIixcbiAgICAgIFwiZXMtVVlcIjogXCJTcGFuaXNoIChVcnVndWF5KVwiLFxuICAgICAgXCJlcy1WRVwiOiBcIlNwYW5pc2ggKFZlbmV6dWVsYSlcIixcbiAgICAgIHN4OiBcIlN1dHVcIixcbiAgICAgIHN3OiBcIlN3YWhpbGlcIixcbiAgICAgIHN2OiBcIlN3ZWRpc2hcIixcbiAgICAgIFwic3YtRklcIjogXCJTd2VkaXNoIChGaW5sYW5kKVwiLFxuICAgICAgXCJzdi1TVlwiOiBcIlN3ZWRpc2ggKFN3ZWRlbilcIixcbiAgICAgIHRhOiBcIlRhbWlsXCIsXG4gICAgICB0dDogXCJUYXRhclwiLFxuICAgICAgdGU6IFwiVGVsdWdhXCIsXG4gICAgICB0aDogXCJUaGFpXCIsXG4gICAgICB0aWc6IFwiVGlncmVcIixcbiAgICAgIHRzOiBcIlRzb25nYVwiLFxuICAgICAgdG46IFwiVHN3YW5hXCIsXG4gICAgICB0cjogXCJUdXJraXNoXCIsXG4gICAgICB0azogXCJUdXJrbWVuXCIsXG4gICAgICB1azogXCJVa3JhaW5pYW5cIixcbiAgICAgIGhzYjogXCJVcHBlciBTb3JiaWFuXCIsXG4gICAgICB1cjogXCJVcmR1XCIsXG4gICAgICB2ZTogXCJWZW5kYVwiLFxuICAgICAgdmk6IFwiVmlldG5hbWVzZVwiLFxuICAgICAgdm86IFwiVm9sYXB1a1wiLFxuICAgICAgd2E6IFwiV2FsbG9vblwiLFxuICAgICAgY3k6IFwiV2Vsc2hcIixcbiAgICAgIHhoOiBcIlhob3NhXCIsXG4gICAgICBqaTogXCJZaWRkaXNoXCIsXG4gICAgICB6dTogXCJadWx1XCJcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuaW50ZXJuYWwubGFuZ3VhZ2VTZXR0aW5ncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmludGVybmFsLmxhbmd1YWdlU2V0dGluZ3MgPSB7fTtcbiAgICAgIHRoaXMuaW50ZXJuYWwubGFuZ3VhZ2VTZXR0aW5ncy5pc1N1YnNjcmliZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAobGFuZ0NvZGVzW2xhbmdDb2RlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmludGVybmFsLmxhbmd1YWdlU2V0dGluZ3MubGFuZ3VhZ2VDb2RlID0gbGFuZ0NvZGU7XG4gICAgICBpZiAodGhpcy5pbnRlcm5hbC5sYW5ndWFnZVNldHRpbmdzLmlzU3Vic2NyaWJlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5pbnRlcm5hbC5ldmVudHMuc3Vic2NyaWJlKFwicHV0Q2F0YWxvZ1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aGlzLmludGVybmFsLndyaXRlKFxuICAgICAgICAgICAgXCIvTGFuZyAoXCIgKyB0aGlzLmludGVybmFsLmxhbmd1YWdlU2V0dGluZ3MubGFuZ3VhZ2VDb2RlICsgXCIpXCJcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbnRlcm5hbC5sYW5ndWFnZVNldHRpbmdzLmlzU3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufSkoanNQREYuQVBJKTtcbiIsIi8qKiBAbGljZW5zZVxuIGpzUERGIHN0YW5kYXJkX2ZvbnRzX21ldHJpY3MgcGx1Z2luXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgV2lsbG93IFN5c3RlbXMgQ29ycG9yYXRpb24sIGh0dHBzOi8vZ2l0aHViLmNvbS93aWxsb3dzeXN0ZW1zXG4gKiBNSVQgbGljZW5zZS5cbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4gKiBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbiAqIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG4gKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiBcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqIFxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuICogTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAqIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkVcbiAqIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbiAqIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuICogV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5cbi8qKlxuICogVGhpcyBmaWxlIGFkZHMgdGhlIHN0YW5kYXJkIGZvbnQgbWV0cmljcyB0byBqc1BERi5cbiAqXG4gKiBGb250IG1ldHJpY3MgZGF0YSBpcyByZXByb2Nlc3NlZCBkZXJpdmF0aXZlIG9mIGNvbnRlbnRzIG9mXG4gKiBcIkZvbnQgTWV0cmljcyBmb3IgUERGIENvcmUgMTQgRm9udHNcIiBwYWNrYWdlLCB3aGljaCBleGhpYml0cyB0aGUgZm9sbG93aW5nIGNvcHlyaWdodCBhbmQgbGljZW5zZTpcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDE5ODksIDE5OTAsIDE5OTEsIDE5OTIsIDE5OTMsIDE5OTcgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBmaWxlIGFuZCB0aGUgMTQgUG9zdFNjcmlwdChSKSBBRk0gZmlsZXMgaXQgYWNjb21wYW5pZXMgbWF5IGJlIHVzZWQsXG4gKiBjb3BpZWQsIGFuZCBkaXN0cmlidXRlZCBmb3IgYW55IHB1cnBvc2UgYW5kIHdpdGhvdXQgY2hhcmdlLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgcHJvdmlkZWQgdGhhdCBhbGwgY29weXJpZ2h0IG5vdGljZXMgYXJlIHJldGFpbmVkOyB0aGF0IHRoZSBBRk1cbiAqIGZpbGVzIGFyZSBub3QgZGlzdHJpYnV0ZWQgd2l0aG91dCB0aGlzIGZpbGU7IHRoYXQgYWxsIG1vZGlmaWNhdGlvbnMgdG8gdGhpc1xuICogZmlsZSBvciBhbnkgb2YgdGhlIEFGTSBmaWxlcyBhcmUgcHJvbWluZW50bHkgbm90ZWQgaW4gdGhlIG1vZGlmaWVkIGZpbGUocyk7XG4gKiBhbmQgdGhhdCB0aGlzIHBhcmFncmFwaCBpcyBub3QgbW9kaWZpZWQuIEFkb2JlIFN5c3RlbXMgaGFzIG5vIHJlc3BvbnNpYmlsaXR5XG4gKiBvciBvYmxpZ2F0aW9uIHRvIHN1cHBvcnQgdGhlIHVzZSBvZiB0aGUgQUZNIGZpbGVzLlxuICpcbiAqIEBuYW1lIHN0YW5kYXJkX2ZvbnRzX21ldHJpY3NcbiAqIEBtb2R1bGVcbiAqL1xuXG4oZnVuY3Rpb24oQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICBBUEkuX19mb250bWV0cmljc19fID0gQVBJLl9fZm9udG1ldHJpY3NfXyB8fCB7fTtcblxuICB2YXIgZGVjb2RlZCA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiLFxuICAgIGVuY29kZWQgPSBcImtsbW5vcHFyc3R1dnd4eXpcIixcbiAgICBtYXBwaW5nVW5jb21wcmVzcyA9IHt9LFxuICAgIG1hcHBpbmdDb21wcmVzcyA9IHt9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZW5jb2RlZC5sZW5ndGg7IGkrKykge1xuICAgIG1hcHBpbmdVbmNvbXByZXNzW2VuY29kZWRbaV1dID0gZGVjb2RlZFtpXTtcbiAgICBtYXBwaW5nQ29tcHJlc3NbZGVjb2RlZFtpXV0gPSBlbmNvZGVkW2ldO1xuICB9XG5cbiAgdmFyIGhleCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIFwiMHhcIiArIHBhcnNlSW50KHZhbHVlLCAxMCkudG9TdHJpbmcoMTYpO1xuICB9O1xuXG4gIHZhciBjb21wcmVzcyA9IChBUEkuX19mb250bWV0cmljc19fLmNvbXByZXNzID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHZhciB2YWxzID0gW1wie1wiXTtcbiAgICB2YXIgdmFsdWUsIGtleXN0cmluZywgdmFsdWVzdHJpbmcsIG51bWJlcnByZWZpeDtcblxuICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICB2YWx1ZSA9IGRhdGFba2V5XTtcblxuICAgICAgaWYgKCFpc05hTihwYXJzZUludChrZXksIDEwKSkpIHtcbiAgICAgICAga2V5ID0gcGFyc2VJbnQoa2V5LCAxMCk7XG4gICAgICAgIGtleXN0cmluZyA9IGhleChrZXkpLnNsaWNlKDIpO1xuICAgICAgICBrZXlzdHJpbmcgPVxuICAgICAgICAgIGtleXN0cmluZy5zbGljZSgwLCAtMSkgKyBtYXBwaW5nQ29tcHJlc3Nba2V5c3RyaW5nLnNsaWNlKC0xKV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrZXlzdHJpbmcgPSBcIidcIiArIGtleSArIFwiJ1wiO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICAgIHZhbHVlc3RyaW5nID0gaGV4KHZhbHVlKS5zbGljZSgzKTtcbiAgICAgICAgICBudW1iZXJwcmVmaXggPSBcIi1cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZXN0cmluZyA9IGhleCh2YWx1ZSkuc2xpY2UoMik7XG4gICAgICAgICAgbnVtYmVycHJlZml4ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXN0cmluZyA9XG4gICAgICAgICAgbnVtYmVycHJlZml4ICtcbiAgICAgICAgICB2YWx1ZXN0cmluZy5zbGljZSgwLCAtMSkgK1xuICAgICAgICAgIG1hcHBpbmdDb21wcmVzc1t2YWx1ZXN0cmluZy5zbGljZSgtMSldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHZhbHVlc3RyaW5nID0gY29tcHJlc3ModmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIFwiRG9uJ3Qga25vdyB3aGF0IHRvIGRvIHdpdGggdmFsdWUgdHlwZSBcIiArIHR5cGVvZiB2YWx1ZSArIFwiLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFscy5wdXNoKGtleXN0cmluZyArIHZhbHVlc3RyaW5nKTtcbiAgICB9XG4gICAgdmFscy5wdXNoKFwifVwiKTtcbiAgICByZXR1cm4gdmFscy5qb2luKFwiXCIpO1xuICB9KTtcblxuICAvKipcbiAgICogVW5jb21wcmVzc2VzIGRhdGEgY29tcHJlc3NlZCBpbnRvIGN1c3RvbSwgYmFzZTE2LWxpa2UgZm9ybWF0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW1cbiAgICogQHJldHVybnMge1R5cGV9XG4gICAqL1xuICB2YXIgdW5jb21wcmVzcyA9IChBUEkuX19mb250bWV0cmljc19fLnVuY29tcHJlc3MgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IHBhc3NlZCB0byB1bmNvbXByZXNzLlwiKTtcbiAgICB9XG5cbiAgICB2YXIgb3V0cHV0ID0ge30sXG4gICAgICBzaWduID0gMSxcbiAgICAgIHN0cmluZ3BhcnRzLCAvLyB1bmRlZi4gd2lsbCBiZSBbXSBpbiBzdHJpbmcgbW9kZVxuICAgICAgYWN0aXZlb2JqZWN0ID0gb3V0cHV0LFxuICAgICAgcGFyZW50Y2hhaW4gPSBbXSxcbiAgICAgIHBhcmVudF9rZXlfcGFpcixcbiAgICAgIGtleXBhcnRzID0gXCJcIixcbiAgICAgIHZhbHVlcGFydHMgPSBcIlwiLFxuICAgICAga2V5LCAvLyB1bmRlZi4gd2lsbCBiZSBUcnV0aHkgd2hlbiBLZXkgaXMgcmVzb2x2ZWQuXG4gICAgICBkYXRhbGVuID0gZGF0YS5sZW5ndGggLSAxLCAvLyBzdHJpcHBpbmcgZW5kaW5nIH1cbiAgICAgIGNoO1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBkYXRhbGVuOyBpICs9IDEpIHtcbiAgICAgIC8vIC0geyB9ICcgYXJlIHNwZWNpYWwuXG5cbiAgICAgIGNoID0gZGF0YVtpXTtcblxuICAgICAgaWYgKGNoID09IFwiJ1wiKSB7XG4gICAgICAgIGlmIChzdHJpbmdwYXJ0cykge1xuICAgICAgICAgIC8vIGVuZCBvZiBzdHJpbmcgbW9kZVxuICAgICAgICAgIGtleSA9IHN0cmluZ3BhcnRzLmpvaW4oXCJcIik7XG4gICAgICAgICAgc3RyaW5ncGFydHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gc3RhcnQgb2Ygc3RyaW5nIG1vZGVcbiAgICAgICAgICBzdHJpbmdwYXJ0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0cmluZ3BhcnRzKSB7XG4gICAgICAgIHN0cmluZ3BhcnRzLnB1c2goY2gpO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PSBcIntcIikge1xuICAgICAgICAvLyBzdGFydCBvZiBvYmplY3RcbiAgICAgICAgcGFyZW50Y2hhaW4ucHVzaChbYWN0aXZlb2JqZWN0LCBrZXldKTtcbiAgICAgICAgYWN0aXZlb2JqZWN0ID0ge307XG4gICAgICAgIGtleSA9IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT0gXCJ9XCIpIHtcbiAgICAgICAgLy8gZW5kIG9mIG9iamVjdFxuICAgICAgICBwYXJlbnRfa2V5X3BhaXIgPSBwYXJlbnRjaGFpbi5wb3AoKTtcbiAgICAgICAgcGFyZW50X2tleV9wYWlyWzBdW3BhcmVudF9rZXlfcGFpclsxXV0gPSBhY3RpdmVvYmplY3Q7XG4gICAgICAgIGtleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgYWN0aXZlb2JqZWN0ID0gcGFyZW50X2tleV9wYWlyWzBdO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PSBcIi1cIikge1xuICAgICAgICBzaWduID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBtdXN0IGJlIG51bWJlclxuICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAobWFwcGluZ1VuY29tcHJlc3MuaGFzT3duUHJvcGVydHkoY2gpKSB7XG4gICAgICAgICAgICBrZXlwYXJ0cyArPSBtYXBwaW5nVW5jb21wcmVzc1tjaF07XG4gICAgICAgICAgICBrZXkgPSBwYXJzZUludChrZXlwYXJ0cywgMTYpICogc2lnbjtcbiAgICAgICAgICAgIHNpZ24gPSArMTtcbiAgICAgICAgICAgIGtleXBhcnRzID0gXCJcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAga2V5cGFydHMgKz0gY2g7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChtYXBwaW5nVW5jb21wcmVzcy5oYXNPd25Qcm9wZXJ0eShjaCkpIHtcbiAgICAgICAgICAgIHZhbHVlcGFydHMgKz0gbWFwcGluZ1VuY29tcHJlc3NbY2hdO1xuICAgICAgICAgICAgYWN0aXZlb2JqZWN0W2tleV0gPSBwYXJzZUludCh2YWx1ZXBhcnRzLCAxNikgKiBzaWduO1xuICAgICAgICAgICAgc2lnbiA9ICsxO1xuICAgICAgICAgICAga2V5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFsdWVwYXJ0cyA9IFwiXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlcGFydHMgKz0gY2g7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH0pO1xuXG4gIC8vIGVuY29kaW5nID0gJ1VuaWNvZGUnXG4gIC8vIE5PVCBVVEY4LCBOT1QgVVRGMTZCRS9MRSwgTk9UIFVDUzJCRS9MRS4gTk8gY2xldmVyIEJPTSBiZWhhdmlvclxuICAvLyBBY3R1YWwgMTZiaXQgY2hhciBjb2RlcyB1c2VkLlxuICAvLyBubyBtdWx0aS1ieXRlIGxvZ2ljIGhlcmVcblxuICAvLyBVbmljb2RlIGNoYXJhY3RlcnMgdG8gV2luQW5zaUVuY29kaW5nOlxuICAvLyB7NDAyOiAxMzEsIDgyMTE6IDE1MCwgODIxMjogMTUxLCA4MjE2OiAxNDUsIDgyMTc6IDE0NiwgODIxODogMTMwLCA4MjIwOiAxNDcsIDgyMjE6IDE0OCwgODIyMjogMTMyLCA4MjI0OiAxMzQsIDgyMjU6IDEzNSwgODIyNjogMTQ5LCA4MjMwOiAxMzMsIDgzNjQ6IDEyOCwgODI0MDoxMzcsIDgyNDk6IDEzOSwgODI1MDogMTU1LCA3MTA6IDEzNiwgODQ4MjogMTUzLCAzMzg6IDE0MCwgMzM5OiAxNTYsIDczMjogMTUyLCAzNTI6IDEzOCwgMzUzOiAxNTQsIDM3NjogMTU5LCAzODE6IDE0MiwgMzgyOiAxNTh9XG4gIC8vIGFzIHlvdSBjYW4gc2VlLCBhbGwgVW5pY29kZSBjaGFycyBhcmUgb3V0c2lkZSBvZiAwLTI1NSByYW5nZS4gTm8gY2hhciBjb2RlIGNvbmZsaWN0cy5cbiAgLy8gdGhpcyBtZWFucyB0aGF0IHlvdSBjYW4gZ2l2ZSBXaW4gY3AxMjUyIGVuY29kZWQgc3RyaW5ncyB0byBqc1BERiBmb3IgcmVuZGVyaW5nIGRpcmVjdGx5XG4gIC8vIGFzIHdlbGwgYXMgZ2l2ZSBzdHJpbmdzIHdpdGggc29tZSAoc3VwcG9ydGVkIGJ5IHRoZXNlIGZvbnRzKSBVbmljb2RlIGNoYXJhY3RlcnMgYW5kXG4gIC8vIHRoZXNlIHdpbGwgYmUgbWFwcGVkIHRvIHdpbiBjcDEyNTJcbiAgLy8gZm9yIGV4YW1wbGUsIHlvdSBjYW4gc2VuZCBjaGFyIGNvZGUgKGNwMTI1MikgMHg4MCBvciAodW5pY29kZSkgMHgyMEFDLCBnZXR0aW5nIFwiRXVyb1wiIGdseXBoIGRpc3BsYXllZCBpbiBib3RoIGNhc2VzLlxuXG4gIHZhciBlbmNvZGluZ0Jsb2NrID0ge1xuICAgIGNvZGVQYWdlczogW1wiV2luQW5zaUVuY29kaW5nXCJdLFxuICAgIFdpbkFuc2lFbmNvZGluZzogdW5jb21wcmVzcyhcbiAgICAgIFwiezE5bThuMjAxbjlxMjAxbzlyMjAxczlsMjAxdDltMjAxdThtMjAxdzluMjAxeDlvMjAxeThvMjAyazhxMjAybDhyMjAybTlwMjAycThwMjBhdzhrMjAzazh0MjAzdDh2MjAzdTl2MmNxOHMyMTJtOXQxNW04dzE1bjl3MmR3OXMxNms4dTE2bDl1MTdzOXoxN3g4eTE3eTl5fVwiXG4gICAgKVxuICB9O1xuICB2YXIgZW5jb2RpbmdzID0ge1xuICAgIFVuaWNvZGU6IHtcbiAgICAgIENvdXJpZXI6IGVuY29kaW5nQmxvY2ssXG4gICAgICBcIkNvdXJpZXItQm9sZFwiOiBlbmNvZGluZ0Jsb2NrLFxuICAgICAgXCJDb3VyaWVyLUJvbGRPYmxpcXVlXCI6IGVuY29kaW5nQmxvY2ssXG4gICAgICBcIkNvdXJpZXItT2JsaXF1ZVwiOiBlbmNvZGluZ0Jsb2NrLFxuICAgICAgSGVsdmV0aWNhOiBlbmNvZGluZ0Jsb2NrLFxuICAgICAgXCJIZWx2ZXRpY2EtQm9sZFwiOiBlbmNvZGluZ0Jsb2NrLFxuICAgICAgXCJIZWx2ZXRpY2EtQm9sZE9ibGlxdWVcIjogZW5jb2RpbmdCbG9jayxcbiAgICAgIFwiSGVsdmV0aWNhLU9ibGlxdWVcIjogZW5jb2RpbmdCbG9jayxcbiAgICAgIFwiVGltZXMtUm9tYW5cIjogZW5jb2RpbmdCbG9jayxcbiAgICAgIFwiVGltZXMtQm9sZFwiOiBlbmNvZGluZ0Jsb2NrLFxuICAgICAgXCJUaW1lcy1Cb2xkSXRhbGljXCI6IGVuY29kaW5nQmxvY2ssXG4gICAgICBcIlRpbWVzLUl0YWxpY1wiOiBlbmNvZGluZ0Jsb2NrXG4gICAgICAvL1x0LCAnU3ltYm9sJ1xuICAgICAgLy9cdCwgJ1phcGZEaW5nYmF0cydcbiAgICB9XG4gIH07XG5cbiAgdmFyIGZvbnRNZXRyaWNzID0ge1xuICAgIFVuaWNvZGU6IHtcbiAgICAgIC8vIGFsbCBzaXppbmcgbnVtYmVycyBhcmUgbi9mb250TWV0cmljc0ZyYWN0aW9uT2YgPSBvbmUgZm9udCBzaXplIHVuaXRcbiAgICAgIC8vIHRoaXMgbWVhbnMgdGhhdCBpZiBmb250TWV0cmljc0ZyYWN0aW9uT2YgPSAxMDAwLCBhbmQgbGV0dGVyIEEncyB3aWR0aCBpcyA0NzYsIGl0J3NcbiAgICAgIC8vIHdpZHRoIGlzIDQ3Ni8xMDAwIG9yIDQ3LjYlIG9mIGl0cyBoZWlnaHQgKHJlZ2FyZGxlc3Mgb2YgZm9udCBzaXplKVxuICAgICAgLy8gQXQgdGhpcyB0aW1lIHRoaXMgdmFsdWUgYXBwbGllcyB0byBcIndpZHRoc1wiIGFuZCBcImtlcm5pbmdcIiBudW1iZXJzLlxuXG4gICAgICAvLyBjaGFyIGNvZGUgMCByZXByZXNlbnRzIFwiZGVmYXVsdFwiIChhdmVyYWdlKSB3aWR0aCAtIHVzZSBpdCBmb3IgY2hhcnMgbWlzc2luZyBpbiB0aGlzIHRhYmxlLlxuICAgICAgLy8ga2V5ICdmb2YnIHJlcHJlc2VudHMgdGhlIFwiZm9udE1ldHJpY3NGcmFjdGlvbk9mXCIgdmFsdWVcblxuICAgICAgXCJDb3VyaWVyLU9ibGlxdWVcIjogdW5jb21wcmVzcyhcbiAgICAgICAgXCJ7J3dpZHRocyd7azN3J2ZvZic2b30na2VybmluZyd7J2ZvZictNm99fVwiXG4gICAgICApLFxuICAgICAgXCJUaW1lcy1Cb2xkSXRhbGljXCI6IHVuY29tcHJlc3MoXG4gICAgICAgIFwieyd3aWR0aHMne2szbzJxNHljeDJyMjAxbjNtMjAxbzZvMjAxczJsMjAxdDJsMjAxdTJsMjAxdzNtMjAxeDNtMjAxeTNtMmsxdDJsMnIyMDJtMm4ybjNtMm8zbTJwNW4yMDJxNm8ycjF3MnMybDJ0MmwydTNtMnYzdDJ3MXQyeDJsMnkxdDJ6MXczazNtM2wzbTNtM20zbjNtM28zbTNwM20zcTNtM3IzbTNzM20yMDN0MmwyMDN1MmwzdjJsM3czdDN4M3QzeTN0M3ozbTRrNW40bDRtNG00bTRuNG00bzRzNHA0bTRxNG00cjRzNHM0eTR0MnI0dTNtNHY0bTR3M3g0eDV0NHk0czR6NHM1azN4NWw0czVtNG01bjNyNW8zeDVwNHM1cTRtNXI1dDVzNG01dDN4NXUzeDV2Mmw1dzF3NXgybDV5M3Q1ejNtNmsybDZsM202bTNtNm4ydzZvM202cDJ3NnEybDZyM202czNyNnQxdzZ1MXc2djNtNncxdzZ4NHk2eTNyNnozbTdrM203bDNtN20ycjduMnI3bzF3N3AzcjdxMnc3cjRtN3MzbTd0Mnc3dTJyN3Yybjd3MXE3eDJuN3kzdDIwMmwzbWNsNG1hbDJyYW0zbWFuM21hbzNtYXAzbWFyM21hczJsYXQ0dWF1MXVhdjNtYXczd2F5NHVhejJsYmsyc2JsM3QnZm9mJzZvYm8ybGJwM3RicTNtYnIxdGJzMmxidTF5YnYzbWJ6M21jazRtMjAyazNtY200bWNuNG1jbzRtY3A0bWNxNXljcjRtY3M0bWN0NG1jdTRtY3Y0bWN3MnIybTNyY3kycmN6MnJkbDRzZG00c2RuNHNkbzRzZHA0c2RxNHNkczRzZHQ0c2R1NHNkdjRzZHc0c2R6M21lazNtZWwzbWVtM21lbjNtZW8zbWVwM21lcTRzZXIyd2VzMndldDJ3ZXUyd2V2MndldzF3ZXgxd2V5MXdlejF3ZmwzcmZtM21mbjNtZm8zbWZwM21mcTNtZnIzdGZzM21mdDNyZnUzcmZ2M3JmdzNyZnoydzIwM2s2bzIxMm02bzJkdzJsMmNxMmwzdDNtM3UybDE3czN4MTltM219J2tlcm5pbmcne2NsezRxdTVrdDVxdDVyczE3c3M1dHN9MjAxc3syMDFzc30yMDF0e2NrczRsc2Ntc2Nuc2Nvc2Nwc2NsczJ3dTJ5dTIwMXRzfTIwMXh7Mnd1Mnl1fTJrezIwMXRzfTJ3ezRxeDVreDVvdTVxeDVyczE3c3U1dHV9Mnh7MTdzdTV0dTVvdX0yeXs0cXg1a3g1b3U1cXg1cnMxN3NzNXRzfSdmb2YnLTZvZm57MTdzdzV0dzVvdTVxdzVyc303dHtja3NjbHNjbXNjbnNjb3NjcHM0bHN9M3V7MTdzdTV0dTVvczVxc30zdnsxN3N1NXR1NW9zNXFzfTdwezE3c3U1dHV9Y2t7NHF1NWt0NXF0NXJzMTdzczV0c300bHs0cXU1a3Q1cXQ1cnMxN3NzNXRzfWNtezRxdTVrdDVxdDVyczE3c3M1dHN9Y257NHF1NWt0NXF0NXJzMTdzczV0c31jb3s0cXU1a3Q1cXQ1cnMxN3NzNXRzfWNwezRxdTVrdDVxdDVyczE3c3M1dHN9Nmx7NHF1NW91NXF3NXJ0MTdzdTV0dX01cXtja3VjbHVjbXVjbnVjb3VjcHU0bHV9NXJ7Y2t1Y2x1Y211Y251Y291Y3B1NGx1fTdxe2Nrc2Nsc2Ntc2Nuc2Nvc2NwczRsc302cHs0cXU1b3U1cXc1cnQxN3N3NXR3fWVrezRxdTVvdTVxdzVydDE3c3U1dHV9ZWx7NHF1NW91NXF3NXJ0MTdzdTV0dX1lbXs0cXU1b3U1cXc1cnQxN3N1NXR1fWVuezRxdTVvdTVxdzVydDE3c3U1dHV9ZW97NHF1NW91NXF3NXJ0MTdzdTV0dX1lcHs0cXU1b3U1cXc1cnQxN3N1NXR1fWVzezE3c3M1dHM1cXM0cXV9ZXR7NHF1NW91NXF3NXJ0MTdzdzV0d31ldXs0cXU1b3U1cXc1cnQxN3NzNXRzfWV2ezE3c3M1dHM1cXM0cXV9Nnp7MTdzdzV0dzVvdTVxdzVyc31mbXsxN3N3NXR3NW91NXF3NXJzfTduezIwMXRzfWZvezE3c3c1dHc1b3U1cXc1cnN9ZnB7MTdzdzV0dzVvdTVxdzVyc31mcXsxN3N3NXR3NW91NXF3NXJzfTdye2Nrc2Nsc2Ntc2Nuc2Nvc2NwczRsc31mc3sxN3N3NXR3NW91NXF3NXJzfWZ0ezE3c3U1dHV9ZnV7MTdzdTV0dX1mdnsxN3N1NXR1fWZ3ezE3c3U1dHV9Znp7Y2tzY2xzY21zY25zY29zY3BzNGxzfX19XCJcbiAgICAgICksXG4gICAgICBcIkhlbHZldGljYS1Cb2xkXCI6IHVuY29tcHJlc3MoXG4gICAgICAgIFwieyd3aWR0aHMne2szczJxNHNjeDF3MjAxbjNyMjAxbzZvMjAxczF3MjAxdDF3MjAxdTF3MjAxdzNtMjAxeDNtMjAxeTNtMmsxdzJsMmwyMDJtMm4ybjNyMm8zcjJwNXQyMDJxNm8ycjFzMnMybDJ0MmwydTJyMnYzdTJ3MXcyeDJsMnkxdzJ6MXczazNyM2wzcjNtM3IzbjNyM28zcjNwM3IzcTNyM3IzcjNzM3IyMDN0MmwyMDN1MmwzdjJsM3czdTN4M3UzeTN1M3ozeDRrNmw0bDRzNG00czRuNHM0bzRzNHA0bTRxM3g0cjR5NHM0czR0MXc0dTNyNHY0czR3M3g0eDVuNHk0czR6NHk1azRtNWw0eTVtNHM1bjRtNW8zeDVwNHM1cTRtNXI1eTVzNG01dDRtNXUzeDV2Mmw1dzF3NXgybDV5M3U1ejNyNmsybDZsM3I2bTN4Nm4zcjZvM3g2cDNyNnEybDZyM3g2czN4NnQxdzZ1MXc2djNyNncxdzZ4NXQ2eTN4NnozeDdrM3g3bDN4N20ycjduM3I3bzJsN3AzeDdxM3I3cjR5N3Mzcjd0M3I3dTNtN3Yycjd3MXc3eDJyN3kzdTIwMmwzcmNsNHNhbDJsYW0zcmFuM3JhbzNyYXAzcmFyM3JhczJsYXQ0dGF1MnBhdjNyYXczdWF5NHRhejJsYmsyc2JsM3UnZm9mJzZvYm8ybGJwM3hicTNyYnIxd2JzMmxidTJvYnYzcmJ6M3hjazRzMjAyazNyY200c2NuNHNjbzRzY3A0c2NxNm9jcjRzY3M0bWN0NG1jdTRtY3Y0bWN3MXcybTJ6Y3kxd2N6MXdkbDRzZG00eWRuNHlkbzR5ZHA0eWRxNHlkczR5ZHQ0c2R1NHNkdjRzZHc0c2R6M3hlazNyZWwzcmVtM3JlbjNyZW8zcmVwM3JlcTV0ZXIzcmVzM3JldDNyZXUzcmV2M3JldzF3ZXgxd2V5MXdlejF3ZmwzeGZtM3hmbjN4Zm8zeGZwM3hmcTN4ZnIzdWZzM3hmdDN4ZnUzeGZ2M3hmdzN4ZnozcjIwM2s2bzIxMm02bzJkdzJsMmNxMmwzdDNyM3UybDE3czRtMTltM3J9J2tlcm5pbmcne2NsezRxczVrdTVvdDVxczE3c3Y1dHZ9MjAxdHsyd3c0d3kyeXd9MjAxd3sya3N9MjAxeHsyd3c0d3kyeXd9Mmt7MjAxdHMyMDF4c30yd3s3cXM0cXU1a3c1b3M1cXc1cnMxN3N1NXR1N3RzZnpzfTJ4ezVvdzVxc30yeXs3cXM0cXU1a3c1b3M1cXc1cnMxN3N1NXR1N3RzZnpzfSdmb2YnLTZvN3B7MTdzdTV0dTVvdH1ja3s0cXM1a3U1b3Q1cXMxN3N2NXR2fTRsezRxczVrdTVvdDVxczE3c3Y1dHZ9Y217NHFzNWt1NW90NXFzMTdzdjV0dn1jbns0cXM1a3U1b3Q1cXMxN3N2NXR2fWNvezRxczVrdTVvdDVxczE3c3Y1dHZ9Y3B7NHFzNWt1NW90NXFzMTdzdjV0dn02bHsxN3N0NXR0NW9zfTE3c3sya3djbHZjbXZjbnZjb3ZjcHY0bHY0d3dja3Z9NW97Mmt1Y2x0Y210Y250Y290Y3B0NGx0NHd0Y2t0fTVxezJrc2Nsc2Ntc2Nuc2Nvc2NwczRsczR3dmNrc301cnsya3M0d3N9NXR7Mmt3Y2x2Y212Y252Y292Y3B2NGx2NHd3Y2t2fWVvezE3c3Q1dHQ1b3N9ZnV7MTdzdTV0dTVvdH02cHsxN3NzNXRzfWVrezE3c3Q1dHQ1b3N9ZWx7MTdzdDV0dDVvc31lbXsxN3N0NXR0NW9zfWVuezE3c3Q1dHQ1b3N9Nm97MjAxdHN9ZXB7MTdzdDV0dDVvc31lc3sxN3NzNXRzfWV0ezE3c3M1dHN9ZXV7MTdzczV0c31ldnsxN3NzNXRzfTZ6ezE3c3U1dHU1b3M1cXR9Zm17MTdzdTV0dTVvczVxdH1mbnsxN3N1NXR1NW9zNXF0fWZvezE3c3U1dHU1b3M1cXR9ZnB7MTdzdTV0dTVvczVxdH1mcXsxN3N1NXR1NW9zNXF0fWZzezE3c3U1dHU1b3M1cXR9ZnR7MTdzdTV0dTVvdH03bXs1b3N9ZnZ7MTdzdTV0dTVvdH1md3sxN3N1NXR1NW90fX19XCJcbiAgICAgICksXG4gICAgICBDb3VyaWVyOiB1bmNvbXByZXNzKFwieyd3aWR0aHMne2szdydmb2YnNm99J2tlcm5pbmcneydmb2YnLTZvfX1cIiksXG4gICAgICBcIkNvdXJpZXItQm9sZE9ibGlxdWVcIjogdW5jb21wcmVzcyhcbiAgICAgICAgXCJ7J3dpZHRocyd7azN3J2ZvZic2b30na2VybmluZyd7J2ZvZictNm99fVwiXG4gICAgICApLFxuICAgICAgXCJUaW1lcy1Cb2xkXCI6IHVuY29tcHJlc3MoXG4gICAgICAgIFwieyd3aWR0aHMne2szcTJxNW5jeDJyMjAxbjNtMjAxbzZvMjAxczJsMjAxdDJsMjAxdTJsMjAxdzNtMjAxeDNtMjAxeTNtMmsxdDJsMmwyMDJtMm4ybjNtMm8zbTJwNm8yMDJxNm8ycjF3MnMybDJ0MmwydTNtMnYzdDJ3MXQyeDJsMnkxdDJ6MXczazNtM2wzbTNtM20zbjNtM28zbTNwM20zcTNtM3IzbTNzM20yMDN0MmwyMDN1MmwzdjJsM3czdDN4M3QzeTN0M3ozbTRrNXg0bDRzNG00bTRuNHM0bzRzNHA0bTRxM3g0cjR5NHM0eTR0MnI0dTNtNHY0eTR3NG00eDV5NHk0czR6NHk1azN4NWw0eTVtNHM1bjNyNW80bTVwNHM1cTRzNXI2bzVzNHM1dDRzNXU0bTV2Mmw1dzF3NXgybDV5M3U1ejNtNmsybDZsM202bTNyNm4ydzZvM3I2cDJ3NnEybDZyM202czNyNnQxdzZ1Mmw2djNyNncxdzZ4NW42eTNyNnozbTdrM3I3bDNyN20ydzduMnI3bzJsN3AzcjdxM203cjRzN3MzbTd0M203dTJ3N3Yycjd3MXE3eDJyN3kzbzIwMmwzbWNsNHNhbDJsYW0zbWFuM21hbzNtYXAzbWFyM21hczJsYXQ0dWF1MXlhdjNtYXczdGF5NHVhejJsYmsyc2JsM3QnZm9mJzZvYm8ybGJwM3JicjF0YnMybGJ1MmxidjNtYnozbWNrNHMyMDJrM21jbTRzY240c2NvNHNjcDRzY3E2b2NyNHNjczRtY3Q0bWN1NG1jdjRtY3cycjJtM3JjeTJyY3oycmRsNHNkbTR5ZG40eWRvNHlkcDR5ZHE0eWRzNHlkdDRzZHU0c2R2NHNkdzRzZHozcmVrM21lbDNtZW0zbWVuM21lbzNtZXAzbWVxNHNlcjJ3ZXMyd2V0MndldTJ3ZXYyd2V3MXdleDF3ZXkxd2V6MXdmbDNyZm0zbWZuM21mbzNtZnAzbWZxM21mcjN0ZnMzbWZ0M3JmdTNyZnYzcmZ3M3JmejNtMjAzazZvMjEybTZvMmR3MmwyY3EybDN0M20zdTJsMTdzNHMxOW0zbX0na2VybmluZyd7Y2x7NHF0NWtzNW90NXF5NXJ3MTdzdjV0dn0yMDF0e2NrczRsc2Ntc2Nuc2Nvc2Nwc2NsczR3dn0ya3syMDF0c30yd3s0cXU1a3U3bXU1b3M1cXg1cnUxN3N1NXR1fTJ4ezE3c3U1dHU1b3U1cXN9Mnl7NHF2NWt2N211NW90NXF6NXJ1MTdzdTV0dX0nZm9mJy02bzd0e2Nrc2Nsc2Ntc2Nuc2Nvc2NwczRsc30zdXsxN3N1NXR1NW9zNXF1fTN2ezE3c3U1dHU1b3M1cXV9ZnV7MTdzdTV0dTVvdTVxdX03cHsxN3N1NXR1NW91NXF1fWNrezRxdDVrczVvdDVxeTVydzE3c3Y1dHZ9NGx7NHF0NWtzNW90NXF5NXJ3MTdzdjV0dn1jbXs0cXQ1a3M1b3Q1cXk1cncxN3N2NXR2fWNuezRxdDVrczVvdDVxeTVydzE3c3Y1dHZ9Y297NHF0NWtzNW90NXF5NXJ3MTdzdjV0dn1jcHs0cXQ1a3M1b3Q1cXk1cncxN3N2NXR2fTZsezE3c3Q1dHQ1b3U1cXV9MTdze2NrdWNsdWNtdWNudWNvdWNwdTRsdTR3dX01b3tja3VjbHVjbXVjbnVjb3VjcHU0bHU0d3V9NXF7Y2t6Y2x6Y216Y256Y296Y3B6NGx6NHd1fTVye2NreGNseGNteGNueGNveGNweDRseDR3dX01dHtja3VjbHVjbXVjbnVjb3VjcHU0bHU0d3V9N3F7Y2t1Y2x1Y211Y251Y291Y3B1NGx1fTZwezE3c3c1dHc1b3U1cXV9ZWt7MTdzdDV0dDVxdX1lbHsxN3N0NXR0NW91NXF1fWVtezE3c3Q1dHQ1cXV9ZW57MTdzdDV0dDVxdX1lb3sxN3N0NXR0NXF1fWVwezE3c3Q1dHQ1b3U1cXV9ZXN7MTdzczV0czVxdX1ldHsxN3N3NXR3NW91NXF1fWV1ezE3c3c1dHc1b3U1cXV9ZXZ7MTdzczV0czVxdX02ensxN3N3NXR3NW91NXF1NXJzfWZtezE3c3c1dHc1b3U1cXU1cnN9Zm57MTdzdzV0dzVvdTVxdTVyc31mb3sxN3N3NXR3NW91NXF1NXJzfWZwezE3c3c1dHc1b3U1cXU1cnN9ZnF7MTdzdzV0dzVvdTVxdTVyc303cntja3RjbHRjbXRjbnRjb3RjcHQ0bHQ1b3N9ZnN7MTdzdzV0dzVvdTVxdTVyc31mdHsxN3N1NXR1NW91NXF1fTdtezVvc31mdnsxN3N1NXR1NW91NXF1fWZ3ezE3c3U1dHU1b3U1cXV9Znp7Y2tzY2xzY21zY25zY29zY3BzNGxzfX19XCJcbiAgICAgICksXG4gICAgICBTeW1ib2w6IHVuY29tcHJlc3MoXG4gICAgICAgIFwieyd3aWR0aHMne2szdWF3NHIxOW0zbTJrMXQybDJsMjAybTJ5Mm4zbTJwNW4yMDJxNm8zazNtMnMybDJ0MmwydjNyMncxdDNtM20yeTF0Mnoxd2JrMnNibDNyJ2ZvZic2bzNuM20zbzNtM3AzbTNxM20zcjNtM3MzbTN0M20zdTF3M3YxdzN3M3IzeDNyM3kzcjN6MndicDN0M2wzbTV2Mmw1eDJsNXozbTJxNHlmcjNyN3Yzazd3MW83eDNrfSdrZXJuaW5nJ3snZm9mJy02b319XCJcbiAgICAgICksXG4gICAgICBIZWx2ZXRpY2E6IHVuY29tcHJlc3MoXG4gICAgICAgIFwieyd3aWR0aHMne2szcDJxNG1jeDF3MjAxbjNyMjAxbzZvMjAxczFxMjAxdDFxMjAxdTFxMjAxdzJsMjAxeDJsMjAxeTJsMmsxdzJsMXcyMDJtMm4ybjNyMm8zcjJwNXQyMDJxNm8ycjFuMnMybDJ0MmwydTJyMnYzdTJ3MXcyeDJsMnkxdzJ6MXczazNyM2wzcjNtM3IzbjNyM28zcjNwM3IzcTNyM3IzcjNzM3IyMDN0MmwyMDN1MmwzdjF3M3czdTN4M3UzeTN1M3ozcjRrNnA0bDRtNG00bTRuNHM0bzRzNHA0bTRxM3g0cjR5NHM0czR0MXc0dTNtNHY0bTR3M3I0eDVuNHk0czR6NHk1azRtNWw0eTVtNHM1bjRtNW8zeDVwNHM1cTRtNXI1eTVzNG01dDRtNXUzeDV2MXc1dzF3NXgxdzV5Mno1ejNyNmsybDZsM3I2bTNyNm4zbTZvM3I2cDNyNnExdzZyM3I2czNyNnQxcTZ1MXE2djNtNncxcTZ4NW42eTNyNnozcjdrM3I3bDNyN20ybDduM203bzF3N3AzcjdxM203cjRzN3MzbTd0M203dTNtN3YybDd3MXU3eDJsN3kzdTIwMmwzcmNsNG1hbDJsYW0zcmFuM3JhbzNyYXAzcmFyM3JhczJsYXQ0dGF1MnBhdjNyYXczdWF5NHRhejJsYmsyc2JsM3UnZm9mJzZvYm8ybGJwM3JicjF3YnMybGJ1Mm9idjNyYnozeGNrNG0yMDJrM3JjbTRtY240bWNvNG1jcDRtY3E2b2NyNHNjczRtY3Q0bWN1NG1jdjRtY3cxdzJtMm5jeTF3Y3oxd2RsNHNkbTR5ZG40eWRvNHlkcDR5ZHE0eWRzNHlkdDRzZHU0c2R2NHNkdzRzZHozeGVrM3JlbDNyZW0zcmVuM3JlbzNyZXAzcmVxNXRlcjNtZXMzcmV0M3JldTNyZXYzcmV3MXdleDF3ZXkxd2V6MXdmbDNyZm0zcmZuM3JmbzNyZnAzcmZxM3JmcjN1ZnMzeGZ0M3JmdTNyZnYzcmZ3M3JmejNtMjAzazZvMjEybTZvMmR3MmwyY3EybDN0M3IzdTF3MTdzNG0xOW0zcn0na2VybmluZyd7NXF7NHd2fWNsezRxczVrdzVvdzVxczE3c3Y1dHZ9MjAxdHsyd3U0dzFrMnl1fTIwMXh7Mnd1NHd5Mnl1fTE3c3sya3RjbHVjbXVjbnU0b3RjcHU0bHU0d3ljb3Vja3V9Mnd7N3FzNHF6NWsxbTE3c3k1b3c1cXg1cnNmc3U1dHk3dHVmenV9Mnh7MTdzeTV0eTVveTVxc30yeXs3cXM0cXo1azFtMTdzeTVvdzVxeDVyc2ZzdTV0eTd0dWZ6dX0nZm9mJy02bzdwezE3c3Y1dHY1b3d9Y2t7NHFzNWt3NW93NXFzMTdzdjV0dn00bHs0cXM1a3c1b3c1cXMxN3N2NXR2fWNtezRxczVrdzVvdzVxczE3c3Y1dHZ9Y257NHFzNWt3NW93NXFzMTdzdjV0dn1jb3s0cXM1a3c1b3c1cXMxN3N2NXR2fWNwezRxczVrdzVvdzVxczE3c3Y1dHZ9Nmx7MTdzeTV0eTVvd31kb3sxN3N0NXR0fTR6ezE3c3Q1dHR9N3N7ZnN0fWRtezE3c3Q1dHR9ZG57MTdzdDV0dH01b3tja3djbHdjbXdjbndjb3djcHc0bHc0d3Z9ZHB7MTdzdDV0dH1kcXsxN3N0NXR0fTd0ezVvd31kc3sxN3N0NXR0fTV0ezJrdGNsdWNtdWNudTRvdGNwdTRsdTR3eWNvdWNrdX1mdXsxN3N2NXR2NW93fTZwezE3c3k1dHk1b3c1cXN9ZWt7MTdzeTV0eTVvd31lbHsxN3N5NXR5NW93fWVtezE3c3k1dHk1b3d9ZW57NXR5fWVvezE3c3k1dHk1b3d9ZXB7MTdzeTV0eTVvd31lc3sxN3N5NXR5NXFzfWV0ezE3c3k1dHk1b3c1cXN9ZXV7MTdzeTV0eTVvdzVxc31ldnsxN3N5NXR5NW93NXFzfTZ6ezE3c3k1dHk1b3c1cXN9Zm17MTdzeTV0eTVvdzVxc31mbnsxN3N5NXR5NW93NXFzfWZvezE3c3k1dHk1b3c1cXN9ZnB7MTdzeTV0eTVxc31mcXsxN3N5NXR5NW93NXFzfTdyezVvd31mc3sxN3N5NXR5NW93NXFzfWZ0ezE3c3Y1dHY1b3d9N217NW93fWZ2ezE3c3Y1dHY1b3d9Znd7MTdzdjV0djVvd319fVwiXG4gICAgICApLFxuICAgICAgXCJIZWx2ZXRpY2EtQm9sZE9ibGlxdWVcIjogdW5jb21wcmVzcyhcbiAgICAgICAgXCJ7J3dpZHRocyd7azNzMnE0c2N4MXcyMDFuM3IyMDFvNm8yMDFzMXcyMDF0MXcyMDF1MXcyMDF3M20yMDF4M20yMDF5M20yazF3MmwybDIwMm0ybjJuM3IybzNyMnA1dDIwMnE2bzJyMXMyczJsMnQybDJ1MnIydjN1MncxdzJ4MmwyeTF3MnoxdzNrM3IzbDNyM20zcjNuM3IzbzNyM3AzcjNxM3IzcjNyM3MzcjIwM3QybDIwM3UybDN2MmwzdzN1M3gzdTN5M3UzejN4NGs2bDRsNHM0bTRzNG40czRvNHM0cDRtNHEzeDRyNHk0czRzNHQxdzR1M3I0djRzNHczeDR4NW40eTRzNHo0eTVrNG01bDR5NW00czVuNG01bzN4NXA0czVxNG01cjV5NXM0bTV0NG01dTN4NXYybDV3MXc1eDJsNXkzdTV6M3I2azJsNmwzcjZtM3g2bjNyNm8zeDZwM3I2cTJsNnIzeDZzM3g2dDF3NnUxdzZ2M3I2dzF3Nng1dDZ5M3g2ejN4N2szeDdsM3g3bTJyN24zcjdvMmw3cDN4N3EzcjdyNHk3czNyN3Qzcjd1M203djJyN3cxdzd4MnI3eTN1MjAybDNyY2w0c2FsMmxhbTNyYW4zcmFvM3JhcDNyYXIzcmFzMmxhdDR0YXUycGF2M3JhdzN1YXk0dGF6MmxiazJzYmwzdSdmb2YnNm9ibzJsYnAzeGJxM3JicjF3YnMybGJ1Mm9idjNyYnozeGNrNHMyMDJrM3JjbTRzY240c2NvNHNjcDRzY3E2b2NyNHNjczRtY3Q0bWN1NG1jdjRtY3cxdzJtMnpjeTF3Y3oxd2RsNHNkbTR5ZG40eWRvNHlkcDR5ZHE0eWRzNHlkdDRzZHU0c2R2NHNkdzRzZHozeGVrM3JlbDNyZW0zcmVuM3JlbzNyZXAzcmVxNXRlcjNyZXMzcmV0M3JldTNyZXYzcmV3MXdleDF3ZXkxd2V6MXdmbDN4Zm0zeGZuM3hmbzN4ZnAzeGZxM3hmcjN1ZnMzeGZ0M3hmdTN4ZnYzeGZ3M3hmejNyMjAzazZvMjEybTZvMmR3MmwyY3EybDN0M3IzdTJsMTdzNG0xOW0zcn0na2VybmluZyd7Y2x7NHFzNWt1NW90NXFzMTdzdjV0dn0yMDF0ezJ3dzR3eTJ5d30yMDF3ezJrc30yMDF4ezJ3dzR3eTJ5d30ya3syMDF0czIwMXhzfTJ3ezdxczRxdTVrdzVvczVxdzVyczE3c3U1dHU3dHNmenN9Mnh7NW93NXFzfTJ5ezdxczRxdTVrdzVvczVxdzVyczE3c3U1dHU3dHNmenN9J2ZvZictNm83cHsxN3N1NXR1NW90fWNrezRxczVrdTVvdDVxczE3c3Y1dHZ9NGx7NHFzNWt1NW90NXFzMTdzdjV0dn1jbXs0cXM1a3U1b3Q1cXMxN3N2NXR2fWNuezRxczVrdTVvdDVxczE3c3Y1dHZ9Y297NHFzNWt1NW90NXFzMTdzdjV0dn1jcHs0cXM1a3U1b3Q1cXMxN3N2NXR2fTZsezE3c3Q1dHQ1b3N9MTdzezJrd2NsdmNtdmNudmNvdmNwdjRsdjR3d2Nrdn01b3sya3VjbHRjbXRjbnRjb3RjcHQ0bHQ0d3Rja3R9NXF7MmtzY2xzY21zY25zY29zY3BzNGxzNHd2Y2tzfTVyezJrczR3c301dHsya3djbHZjbXZjbnZjb3ZjcHY0bHY0d3dja3Z9ZW97MTdzdDV0dDVvc31mdXsxN3N1NXR1NW90fTZwezE3c3M1dHN9ZWt7MTdzdDV0dDVvc31lbHsxN3N0NXR0NW9zfWVtezE3c3Q1dHQ1b3N9ZW57MTdzdDV0dDVvc302b3syMDF0c31lcHsxN3N0NXR0NW9zfWVzezE3c3M1dHN9ZXR7MTdzczV0c31ldXsxN3NzNXRzfWV2ezE3c3M1dHN9Nnp7MTdzdTV0dTVvczVxdH1mbXsxN3N1NXR1NW9zNXF0fWZuezE3c3U1dHU1b3M1cXR9Zm97MTdzdTV0dTVvczVxdH1mcHsxN3N1NXR1NW9zNXF0fWZxezE3c3U1dHU1b3M1cXR9ZnN7MTdzdTV0dTVvczVxdH1mdHsxN3N1NXR1NW90fTdtezVvc31mdnsxN3N1NXR1NW90fWZ3ezE3c3U1dHU1b3R9fX1cIlxuICAgICAgKSxcbiAgICAgIFphcGZEaW5nYmF0czogdW5jb21wcmVzcyhcInsnd2lkdGhzJ3trNHUyazF3J2ZvZic2b30na2VybmluZyd7J2ZvZictNm99fVwiKSxcbiAgICAgIFwiQ291cmllci1Cb2xkXCI6IHVuY29tcHJlc3MoXCJ7J3dpZHRocyd7azN3J2ZvZic2b30na2VybmluZyd7J2ZvZictNm99fVwiKSxcbiAgICAgIFwiVGltZXMtSXRhbGljXCI6IHVuY29tcHJlc3MoXG4gICAgICAgIFwieyd3aWR0aHMne2szbjJxNHljeDJsMjAxbjNtMjAxbzV0MjAxczJsMjAxdDJsMjAxdTJsMjAxdzNyMjAxeDNyMjAxeTNyMmsxdDJsMmwyMDJtMm4ybjNtMm8zbTJwNW4yMDJxNXQycjFwMnMybDJ0MmwydTNtMnY0bjJ3MXQyeDJsMnkxdDJ6MXczazNtM2wzbTNtM20zbjNtM28zbTNwM20zcTNtM3IzbTNzM20yMDN0MmwyMDN1MmwzdjJsM3c0bjN4NG4zeTRuM3ozbTRrNXc0bDN4NG0zeDRuNG00bzRzNHAzeDRxM3g0cjRzNHM0czR0Mmw0dTJ3NHY0bTR3M3I0eDVuNHk0bTR6NHM1azN4NWw0czVtM3g1bjNtNW8zcjVwNHM1cTN4NXI1bjVzM3g1dDNyNXUzcjV2MnI1dzF3NXgycjV5MnU1ejNtNmsybDZsM202bTNtNm4ydzZvM202cDJ3NnExdzZyM202czNtNnQxdzZ1MXc2djJ3NncxdzZ4NHM2eTNtNnozbTdrM203bDNtN20ycjduMnI3bzF3N3AzbTdxMnc3cjRtN3Mydzd0Mnc3dTJyN3Yyczd3MXY3eDJzN3kzcTIwMmwzbWNsM3hhbDJyYW0zbWFuM21hbzNtYXAzbWFyM21hczJsYXQ0d2F1MXZhdjNtYXc0bmF5NHdhejJsYmsyc2JsNG4nZm9mJzZvYm8ybGJwM21icTNvYnIxdGJzMmxidTF6YnYzbWJ6M21jazN4MjAyazNtY20zeGNuM3hjbzN4Y3AzeGNxNXRjcjRtY3MzeGN0M3hjdTN4Y3YzeGN3MmwybTJ1Y3kybGN6MmxkbDRtZG00c2RuNHNkbzRzZHA0c2RxNHNkczRzZHQ0c2R1NHNkdjRzZHc0c2R6M21lazNtZWwzbWVtM21lbjNtZW8zbWVwM21lcTRtZXIyd2VzMndldDJ3ZXUyd2V2MndldzF3ZXgxd2V5MXdlejF3ZmwzbWZtM21mbjNtZm8zbWZwM21mcTNtZnI0bmZzM21mdDNtZnUzbWZ2M21mdzNtZnoydzIwM2s2bzIxMm02bTJkdzJsMmNxMmwzdDNtM3UybDE3czNyMTltM219J2tlcm5pbmcne2NsezVrdDRxd30yMDFzezIwMXN3fTIwMXR7MjAxdHcyd3kyeXk2cS10fTIwMXh7Mnd5Mnl5fTJrezIwMXR3fTJ3ezdxczRxeTdyczVreTdtdzVvczVxeDVydTE3c3U1dHV9Mnh7MTdzczV0czVvc30yeXs3cXM0cXk3cnM1a3k3bXc1b3M1cXg1cnUxN3N1NXR1fSdmb2YnLTZvNnR7MTdzczV0czVxc303dHs1b3N9M3Z7NXFzfTdwezE3c3U1dHU1cXN9Y2t7NWt0NHF3fTRsezVrdDRxd31jbXs1a3Q0cXd9Y257NWt0NHF3fWNvezVrdDRxd31jcHs1a3Q0cXd9Nmx7NHFzNWtzNW91NXF3NXJ1MTdzdTV0dX0xN3N7MmtzfTVxe2NrdmNsdmNtdmNudmNvdmNwdjRsdn01cntja3VjbHVjbXVjbnVjb3VjcHU0bHV9NXR7MmtzfTZwezRxczVrczVvdTVxdzVydTE3c3U1dHV9ZWt7NHFzNWtzNW91NXF3NXJ1MTdzdTV0dX1lbHs0cXM1a3M1b3U1cXc1cnUxN3N1NXR1fWVtezRxczVrczVvdTVxdzVydTE3c3U1dHV9ZW57NHFzNWtzNW91NXF3NXJ1MTdzdTV0dX1lb3s0cXM1a3M1b3U1cXc1cnUxN3N1NXR1fWVwezRxczVrczVvdTVxdzVydTE3c3U1dHV9ZXN7NWtzNXFzNHFzfWV0ezRxczVrczVvdTVxdzVydTE3c3U1dHV9ZXV7NHFzNWtzNXF3NXJ1MTdzdTV0dX1ldns1a3M1cXM0cXN9ZXh7MTdzczV0czVxc302ens0cXY1a3M1b3U1cXc1cnUxN3N1NXR1fWZtezRxdjVrczVvdTVxdzVydTE3c3U1dHV9Zm57NHF2NWtzNW91NXF3NXJ1MTdzdTV0dX1mb3s0cXY1a3M1b3U1cXc1cnUxN3N1NXR1fWZwezRxdjVrczVvdTVxdzVydTE3c3U1dHV9ZnF7NHF2NWtzNW91NXF3NXJ1MTdzdTV0dX03cns1b3N9ZnN7NHF2NWtzNW91NXF3NXJ1MTdzdTV0dX1mdHsxN3N1NXR1NXFzfWZ1ezE3c3U1dHU1cXN9ZnZ7MTdzdTV0dTVxc31md3sxN3N1NXR1NXFzfX19XCJcbiAgICAgICksXG4gICAgICBcIlRpbWVzLVJvbWFuXCI6IHVuY29tcHJlc3MoXG4gICAgICAgIFwieyd3aWR0aHMne2szbjJxNHljeDJsMjAxbjNtMjAxbzZvMjAxczJsMjAxdDJsMjAxdTJsMjAxdzJ3MjAxeDJ3MjAxeTJ3MmsxdDJsMmwyMDJtMm4ybjNtMm8zbTJwNW4yMDJxNm8ycjFtMnMybDJ0MmwydTNtMnYzczJ3MXQyeDJsMnkxdDJ6MXczazNtM2wzbTNtM20zbjNtM28zbTNwM20zcTNtM3IzbTNzM20yMDN0MmwyMDN1MmwzdjF3M3czczN4M3MzeTNzM3oydzRrNXc0bDRzNG00bTRuNG00bzRzNHAzeDRxM3I0cjRzNHM0czR0Mmw0dTJyNHY0czR3M3g0eDV0NHk0czR6NHM1azNyNWw0czVtNG01bjNyNW8zeDVwNHM1cTRzNXI1eTVzNHM1dDRzNXUzeDV2Mmw1dzF3NXgybDV5Mno1ejNtNmsybDZsMnc2bTNtNm4ydzZvM202cDJ3NnEybDZyM202czNtNnQxdzZ1MXc2djNtNncxdzZ4NHk2eTNtNnozbTdrM203bDNtN20ybDduMnI3bzF3N3AzbTdxM203cjRzN3MzbTd0M203dTJ3N3Yzazd3MW83eDNrN3kzcTIwMmwzbWNsNHNhbDJsYW0zbWFuM21hbzNtYXAzbWFyM21hczJsYXQ0d2F1MXZhdjNtYXczc2F5NHdhejJsYmsyc2JsM3MnZm9mJzZvYm8ybGJwM21icTJ4YnIxdGJzMmxidTF6YnYzbWJ6MndjazRzMjAyazNtY200c2NuNHNjbzRzY3A0c2NxNXRjcjRtY3MzeGN0M3hjdTN4Y3YzeGN3MmwybTJ0Y3kybGN6MmxkbDRzZG00c2RuNHNkbzRzZHA0c2RxNHNkczRzZHQ0c2R1NHNkdjRzZHc0c2R6M21lazJ3ZWwyd2VtMndlbjJ3ZW8yd2VwMndlcTRtZXIyd2VzMndldDJ3ZXUyd2V2MndldzF3ZXgxd2V5MXdlejF3ZmwzbWZtM21mbjNtZm8zbWZwM21mcTNtZnIzc2ZzM21mdDNtZnUzbWZ2M21mdzNtZnozbTIwM2s2bzIxMm02bTJkdzJsMmNxMmwzdDNtM3UxdzE3czRzMTltM219J2tlcm5pbmcne2NsezRxczVrdTE3c3c1b3U1cXk1cncyMDFzczV0dzIwMXdzfTIwMXN7MjAxc3N9MjAxdHtja3c0bHdjbXdjbndjb3djcHdjbHc0d3UyMDF0c30ya3syMDF0c30yd3s0cXM1a3c1b3M1cXg1cnUxN3N4NXR4fTJ4ezE3c3c1dHc1b3U1cXV9Mnl7NHFzNWt3NW9zNXF4NXJ1MTdzeDV0eH0nZm9mJy02bzd0e2NrdWNsdWNtdWNudWNvdWNwdTRsdTVvczVyc30zdXsxN3N1NXR1NXFzfTN2ezE3c3U1dHU1cXN9N3B7MTdzdzV0dzVxc31ja3s0cXM1a3UxN3N3NW91NXF5NXJ3MjAxc3M1dHcyMDF3c300bHs0cXM1a3UxN3N3NW91NXF5NXJ3MjAxc3M1dHcyMDF3c31jbXs0cXM1a3UxN3N3NW91NXF5NXJ3MjAxc3M1dHcyMDF3c31jbns0cXM1a3UxN3N3NW91NXF5NXJ3MjAxc3M1dHcyMDF3c31jb3s0cXM1a3UxN3N3NW91NXF5NXJ3MjAxc3M1dHcyMDF3c31jcHs0cXM1a3UxN3N3NW91NXF5NXJ3MjAxc3M1dHcyMDF3c302bHsxN3N1NXR1NW9zNXF3NXJzfTE3c3sya3RjbHZjbXZjbnZjb3ZjcHY0bHY0d3Vja3Z9NW97Y2t3Y2x3Y213Y253Y293Y3B3NGx3NHd1fTVxe2NreWNseWNteWNueWNveWNweTRseTR3dTVtc301cntja3RjbHRjbXRjbnRjb3RjcHQ0bHQ0d3N9NXR7Mmt0Y2x2Y212Y252Y292Y3B2NGx2NHd1Y2t2fTdxe2Nrc2Nsc2Ntc2Nuc2Nvc2NwczRsc302cHsxN3N1NXR1NXF3NXJzfWVrezVxczVyc31lbHsxN3N1NXR1NW9zNXF3NXJzfWVtezE3c3U1dHU1b3M1cXM1cnN9ZW57MTdzdTVxczVyc31lb3s1cXM1cnN9ZXB7MTdzdTV0dTVvczVxdzVyc31lc3s1cXN9ZXR7MTdzdTV0dTVxdzVyc31ldXsxN3N1NXR1NXFzNXJzfWV2ezVxc302ensxN3N2NXR2NW9zNXF4NXJzfWZtezVvczVxdDVyc31mbnsxN3N2NXR2NW9zNXF4NXJzfWZvezE3c3Y1dHY1b3M1cXg1cnN9ZnB7NW9zNXF0NXJzfWZxezVvczVxdDVyc303cntja3VjbHVjbXVjbnVjb3VjcHU0bHU1b3N9ZnN7MTdzdjV0djVvczVxeDVyc31mdHsxN3NzNXRzNXFzfWZ1ezE3c3c1dHc1cXN9ZnZ7MTdzdzV0dzVxc31md3sxN3NzNXRzNXFzfWZ6e2NrdWNsdWNtdWNudWNvdWNwdTRsdTVvczVyc319fVwiXG4gICAgICApLFxuICAgICAgXCJIZWx2ZXRpY2EtT2JsaXF1ZVwiOiB1bmNvbXByZXNzKFxuICAgICAgICBcInsnd2lkdGhzJ3trM3AycTRtY3gxdzIwMW4zcjIwMW82bzIwMXMxcTIwMXQxcTIwMXUxcTIwMXcybDIwMXgybDIwMXkybDJrMXcybDF3MjAybTJuMm4zcjJvM3IycDV0MjAycTZvMnIxbjJzMmwydDJsMnUycjJ2M3UydzF3MngybDJ5MXcyejF3M2szcjNsM3IzbTNyM24zcjNvM3IzcDNyM3EzcjNyM3IzczNyMjAzdDJsMjAzdTJsM3YxdzN3M3UzeDN1M3kzdTN6M3I0azZwNGw0bTRtNG00bjRzNG80czRwNG00cTN4NHI0eTRzNHM0dDF3NHUzbTR2NG00dzNyNHg1bjR5NHM0ejR5NWs0bTVsNHk1bTRzNW40bTVvM3g1cDRzNXE0bTVyNXk1czRtNXQ0bTV1M3g1djF3NXcxdzV4MXc1eTJ6NXozcjZrMmw2bDNyNm0zcjZuM202bzNyNnAzcjZxMXc2cjNyNnMzcjZ0MXE2dTFxNnYzbTZ3MXE2eDVuNnkzcjZ6M3I3azNyN2wzcjdtMmw3bjNtN28xdzdwM3I3cTNtN3I0czdzM203dDNtN3UzbTd2Mmw3dzF1N3gybDd5M3UyMDJsM3JjbDRtYWwybGFtM3JhbjNyYW8zcmFwM3JhcjNyYXMybGF0NHRhdTJwYXYzcmF3M3VheTR0YXoybGJrMnNibDN1J2ZvZic2b2JvMmxicDNyYnIxd2JzMmxidTJvYnYzcmJ6M3hjazRtMjAyazNyY200bWNuNG1jbzRtY3A0bWNxNm9jcjRzY3M0bWN0NG1jdTRtY3Y0bWN3MXcybTJuY3kxd2N6MXdkbDRzZG00eWRuNHlkbzR5ZHA0eWRxNHlkczR5ZHQ0c2R1NHNkdjRzZHc0c2R6M3hlazNyZWwzcmVtM3JlbjNyZW8zcmVwM3JlcTV0ZXIzbWVzM3JldDNyZXUzcmV2M3JldzF3ZXgxd2V5MXdlejF3ZmwzcmZtM3JmbjNyZm8zcmZwM3JmcTNyZnIzdWZzM3hmdDNyZnUzcmZ2M3JmdzNyZnozbTIwM2s2bzIxMm02bzJkdzJsMmNxMmwzdDNyM3UxdzE3czRtMTltM3J9J2tlcm5pbmcnezVxezR3dn1jbHs0cXM1a3c1b3c1cXMxN3N2NXR2fTIwMXR7Mnd1NHcxazJ5dX0yMDF4ezJ3dTR3eTJ5dX0xN3N7Mmt0Y2x1Y211Y251NG90Y3B1NGx1NHd5Y291Y2t1fTJ3ezdxczRxejVrMW0xN3N5NW93NXF4NXJzZnN1NXR5N3R1Znp1fTJ4ezE3c3k1dHk1b3k1cXN9Mnl7N3FzNHF6NWsxbTE3c3k1b3c1cXg1cnNmc3U1dHk3dHVmenV9J2ZvZictNm83cHsxN3N2NXR2NW93fWNrezRxczVrdzVvdzVxczE3c3Y1dHZ9NGx7NHFzNWt3NW93NXFzMTdzdjV0dn1jbXs0cXM1a3c1b3c1cXMxN3N2NXR2fWNuezRxczVrdzVvdzVxczE3c3Y1dHZ9Y297NHFzNWt3NW93NXFzMTdzdjV0dn1jcHs0cXM1a3c1b3c1cXMxN3N2NXR2fTZsezE3c3k1dHk1b3d9ZG97MTdzdDV0dH00ensxN3N0NXR0fTdze2ZzdH1kbXsxN3N0NXR0fWRuezE3c3Q1dHR9NW97Y2t3Y2x3Y213Y253Y293Y3B3NGx3NHd2fWRwezE3c3Q1dHR9ZHF7MTdzdDV0dH03dHs1b3d9ZHN7MTdzdDV0dH01dHsya3RjbHVjbXVjbnU0b3RjcHU0bHU0d3ljb3Vja3V9ZnV7MTdzdjV0djVvd302cHsxN3N5NXR5NW93NXFzfWVrezE3c3k1dHk1b3d9ZWx7MTdzeTV0eTVvd31lbXsxN3N5NXR5NW93fWVuezV0eX1lb3sxN3N5NXR5NW93fWVwezE3c3k1dHk1b3d9ZXN7MTdzeTV0eTVxc31ldHsxN3N5NXR5NW93NXFzfWV1ezE3c3k1dHk1b3c1cXN9ZXZ7MTdzeTV0eTVvdzVxc302ensxN3N5NXR5NW93NXFzfWZtezE3c3k1dHk1b3c1cXN9Zm57MTdzeTV0eTVvdzVxc31mb3sxN3N5NXR5NW93NXFzfWZwezE3c3k1dHk1cXN9ZnF7MTdzeTV0eTVvdzVxc303cns1b3d9ZnN7MTdzeTV0eTVvdzVxc31mdHsxN3N2NXR2NW93fTdtezVvd31mdnsxN3N2NXR2NW93fWZ3ezE3c3Y1dHY1b3d9fX1cIlxuICAgICAgKVxuICAgIH1cbiAgfTtcblxuICAvKlxuXHRUaGlzIGV2ZW50IGhhbmRsZXIgaXMgZmlyZWQgd2hlbiBhIG5ldyBqc1BERiBvYmplY3QgaXMgaW5pdGlhbGl6ZWRcblx0VGhpcyBldmVudCBoYW5kbGVyIGFwcGVuZHMgbWV0cmljcyBkYXRhIHRvIHN0YW5kYXJkIGZvbnRzIHdpdGhpblxuXHR0aGF0IGpzUERGIGluc3RhbmNlLiBUaGUgbWV0cmljcyBhcmUgbWFwcGVkIG92ZXIgVW5pY29kZSBjaGFyYWN0ZXJcblx0Y29kZXMsIE5PVCBDSURzIG9yIG90aGVyIGNvZGVzIG1hdGNoaW5nIHRoZSBTdGFuZGFyZEVuY29kaW5nIHRhYmxlIG9mIHRoZVxuXHRzdGFuZGFyZCBQREYgZm9udHMuXG5cdEZ1dHVyZTpcblx0QWxzbyBpbmNsdWRlZCBpcyB0aGUgZW5jb2RpbmcgbWFwaW5nIHRhYmxlLCBjb252ZXJ0aW5nIFVuaWNvZGUgKFVDUy0yLCBVVEYtMTYpXG5cdGNoYXIgY29kZXMgdG8gU3RhbmRhcmRFbmNvZGluZyBjaGFyYWN0ZXIgY29kZXMuIFRoZSBlbmNvZGluZyB0YWJsZSBpcyB0byBiZSB1c2VkXG5cdHNvbWV3aGVyZSBhcm91bmQgXCJwZGZFc2NhcGVcIiBjYWxsLlxuXHQqL1xuICBBUEkuZXZlbnRzLnB1c2goW1xuICAgIFwiYWRkRm9udFwiLFxuICAgIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBmb250ID0gZGF0YS5mb250O1xuXG4gICAgICB2YXIgbWV0cmljcyA9IGZvbnRNZXRyaWNzW1wiVW5pY29kZVwiXVtmb250LnBvc3RTY3JpcHROYW1lXTtcbiAgICAgIGlmIChtZXRyaWNzKSB7XG4gICAgICAgIGZvbnQubWV0YWRhdGFbXCJVbmljb2RlXCJdID0ge307XG4gICAgICAgIGZvbnQubWV0YWRhdGFbXCJVbmljb2RlXCJdLndpZHRocyA9IG1ldHJpY3Mud2lkdGhzO1xuICAgICAgICBmb250Lm1ldGFkYXRhW1wiVW5pY29kZVwiXS5rZXJuaW5nID0gbWV0cmljcy5rZXJuaW5nO1xuICAgICAgfVxuXG4gICAgICB2YXIgZW5jb2RpbmdCbG9jayA9IGVuY29kaW5nc1tcIlVuaWNvZGVcIl1bZm9udC5wb3N0U2NyaXB0TmFtZV07XG4gICAgICBpZiAoZW5jb2RpbmdCbG9jaykge1xuICAgICAgICBmb250Lm1ldGFkYXRhW1wiVW5pY29kZVwiXS5lbmNvZGluZyA9IGVuY29kaW5nQmxvY2s7XG4gICAgICAgIGZvbnQuZW5jb2RpbmcgPSBlbmNvZGluZ0Jsb2NrLmNvZGVQYWdlc1swXTtcbiAgICAgIH1cbiAgICB9XG4gIF0pOyAvLyBlbmQgb2YgYWRkaW5nIGV2ZW50IGhhbmRsZXJcbn0pKGpzUERGLkFQSSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiAqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuaW1wb3J0IHsgYXRvYiB9IGZyb20gXCIuLi9saWJzL0F0b2JCdG9hLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgdHRmc3VwcG9ydFxuICogQG1vZHVsZVxuICovXG4oZnVuY3Rpb24oanNQREYpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGJpbmFyeVN0cmluZ1RvVWludDhBcnJheSA9IGZ1bmN0aW9uKGJpbmFyeV9zdHJpbmcpIHtcbiAgICB2YXIgbGVuID0gYmluYXJ5X3N0cmluZy5sZW5ndGg7XG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBieXRlc1tpXSA9IGJpbmFyeV9zdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzO1xuICB9O1xuXG4gIHZhciBhZGRGb250ID0gZnVuY3Rpb24oZm9udCwgZmlsZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgaWYgKC9eXFx4MDBcXHgwMVxceDAwXFx4MDAvLnRlc3QoZmlsZSkpIHtcbiAgICAgIGZpbGUgPSBiaW5hcnlTdHJpbmdUb1VpbnQ4QXJyYXkoZmlsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbGUgPSBiaW5hcnlTdHJpbmdUb1VpbnQ4QXJyYXkoYXRvYihmaWxlKSk7XG4gICAgfVxuICAgIGZvbnQubWV0YWRhdGEgPSBqc1BERi5BUEkuVFRGRm9udC5vcGVuKGZpbGUpO1xuICAgIGZvbnQubWV0YWRhdGEuVW5pY29kZSA9IGZvbnQubWV0YWRhdGEuVW5pY29kZSB8fCB7XG4gICAgICBlbmNvZGluZzoge30sXG4gICAgICBrZXJuaW5nOiB7fSxcbiAgICAgIHdpZHRoczogW11cbiAgICB9O1xuICAgIGZvbnQubWV0YWRhdGEuZ2x5SWRzVXNlZCA9IFswXTtcbiAgfTtcblxuICBqc1BERi5BUEkuZXZlbnRzLnB1c2goW1xuICAgIFwiYWRkRm9udFwiLFxuICAgIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBmaWxlID0gdW5kZWZpbmVkO1xuICAgICAgdmFyIGZvbnQgPSBkYXRhLmZvbnQ7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBkYXRhLmluc3RhbmNlO1xuICAgICAgaWYgKGZvbnQuaXNTdGFuZGFyZEZvbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpbnN0YW5jZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAoaW5zdGFuY2UuZXhpc3RzRmlsZUluVkZTKGZvbnQucG9zdFNjcmlwdE5hbWUpID09PSBmYWxzZSkge1xuICAgICAgICAgIGZpbGUgPSBpbnN0YW5jZS5sb2FkRmlsZShmb250LnBvc3RTY3JpcHROYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaWxlID0gaW5zdGFuY2UuZ2V0RmlsZUZyb21WRlMoZm9udC5wb3N0U2NyaXB0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJGb250IGlzIG5vdCBzdG9yZWQgYXMgc3RyaW5nLWRhdGEgaW4gdkZTLCBpbXBvcnQgZm9udHMgb3IgcmVtb3ZlIGRlY2xhcmF0aW9uIGRvYy5hZGRGb250KCdcIiArXG4gICAgICAgICAgICAgIGZvbnQucG9zdFNjcmlwdE5hbWUgK1xuICAgICAgICAgICAgICBcIicpLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBhZGRGb250KGZvbnQsIGZpbGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiRm9udCBkb2VzIG5vdCBleGlzdCBpbiB2RlMsIGltcG9ydCBmb250cyBvciByZW1vdmUgZGVjbGFyYXRpb24gZG9jLmFkZEZvbnQoJ1wiICtcbiAgICAgICAgICAgIGZvbnQucG9zdFNjcmlwdE5hbWUgK1xuICAgICAgICAgICAgXCInKS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgXSk7IC8vIGVuZCBvZiBhZGRpbmcgZXZlbnQgaGFuZGxlclxufSkoanNQREYpO1xuIiwiLyoqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgV2lsbG93IFN5c3RlbXMgQ29ycG9yYXRpb24sIGh0dHBzOi8vZ2l0aHViLmNvbS93aWxsb3dzeXN0ZW1zXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nXG4gKiBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbiAqIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuICogd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuICogZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG9cbiAqIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuICogTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbiAqIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkVcbiAqIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbiAqIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuICogV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcIi4uL2pzcGRmLmpzXCI7XG5pbXBvcnQgeyBjb25zb2xlIH0gZnJvbSBcIi4uL2xpYnMvY29uc29sZS5qc1wiO1xuaW1wb3J0IHsgZ2xvYmFsT2JqZWN0IH0gZnJvbSBcIi4uL2xpYnMvZ2xvYmFsT2JqZWN0LmpzXCI7XG5cbi8qKlxuICoganNQREYgU1ZHIHBsdWdpblxuICpcbiAqIEBuYW1lIHN2Z1xuICogQG1vZHVsZVxuICovXG4oZnVuY3Rpb24oanNQREZBUEkpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgZnVuY3Rpb24gbG9hZENhbnZnKCkge1xuICAgIHJldHVybiAoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZ2xvYmFsT2JqZWN0W1wiY2FudmdcIl0pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShnbG9iYWxPYmplY3RbXCJjYW52Z1wiXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbXBvcnQoXCJjYW52Z1wiKTtcblxuICAgIH0pKClcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJDb3VsZCBub3QgbG9hZCBjYW52ZzogXCIgKyBlKSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oY2FudmcpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZnLmRlZmF1bHQgPyBjYW52Zy5kZWZhdWx0IDogY2Fudmc7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgU1ZHIFhNTCBhbmQgc2F2ZXMgaXQgYXMgaW1hZ2UgaW50byB0aGUgUERGLlxuICAgKlxuICAgKiBEZXBlbmRzIG9uIGNhbnZhcy1lbGVtZW50IGFuZCBjYW52Z1xuICAgKlxuICAgKiBAbmFtZSBhZGRTdmdBc0ltYWdlXG4gICAqIEBwdWJsaWNcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBTVkctRGF0YSBhcyBUZXh0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IENvb3JkaW5hdGUgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpIGFnYWluc3QgbGVmdCBlZGdlIG9mIHRoZSBwYWdlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IENvb3JkaW5hdGUgKGluIHVuaXRzIGRlY2xhcmVkIGF0IGluY2VwdGlvbiBvZiBQREYgZG9jdW1lbnQpIGFnYWluc3QgdXBwZXIgZWRnZSBvZiB0aGUgcGFnZVxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggb2YgU1ZHLUltYWdlIChpbiB1bml0cyBkZWNsYXJlZCBhdCBpbmNlcHRpb24gb2YgUERGIGRvY3VtZW50KVxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IG9mIFNWRy1JbWFnZSAoaW4gdW5pdHMgZGVjbGFyZWQgYXQgaW5jZXB0aW9uIG9mIFBERiBkb2N1bWVudClcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFsaWFzIG9mIFNWRy1JbWFnZSAoaWYgdXNlZCBtdWx0aXBsZSB0aW1lcylcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXByZXNzaW9uIG9mIHRoZSBnZW5lcmF0ZWQgSlBFRywgY2FuIGhhdmUgdGhlIHZhbHVlcyAnTk9ORScsICdGQVNUJywgJ01FRElVTScgYW5kICdTTE9XJ1xuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gb2YgdGhlIGltYWdlIGluIGRlZ3JlZXMgKDAtMzU5KVxuICAgKlxuICAgKiBAcmV0dXJucyBqc1BERiBqc1BERi1pbnN0YW5jZVxuICAgKi9cbiAganNQREZBUEkuYWRkU3ZnQXNJbWFnZSA9IGZ1bmN0aW9uKFxuICAgIHN2ZyxcbiAgICB4LFxuICAgIHksXG4gICAgdyxcbiAgICBoLFxuICAgIGFsaWFzLFxuICAgIGNvbXByZXNzaW9uLFxuICAgIHJvdGF0aW9uXG4gICkge1xuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xuICAgICAgY29uc29sZS5lcnJvcihcImpzUERGLmFkZFN2Z0FzSW1hZ2U6IEludmFsaWQgY29vcmRpbmF0ZXNcIiwgYXJndW1lbnRzKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29vcmRpbmF0ZXMgcGFzc2VkIHRvIGpzUERGLmFkZFN2Z0FzSW1hZ2VcIik7XG4gICAgfVxuXG4gICAgaWYgKGlzTmFOKHcpIHx8IGlzTmFOKGgpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwianNQREYuYWRkU3ZnQXNJbWFnZTogSW52YWxpZCBtZWFzdXJlbWVudHNcIiwgYXJndW1lbnRzKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJJbnZhbGlkIG1lYXN1cmVtZW50cyAod2lkdGggYW5kL29yIGhlaWdodCkgcGFzc2VkIHRvIGpzUERGLmFkZFN2Z0FzSW1hZ2VcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICBjYW52YXMud2lkdGggPSB3O1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoO1xuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBcIiNmZmZcIjsgLy8vIHNldCB3aGl0ZSBmaWxsIHN0eWxlXG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIGlnbm9yZU1vdXNlOiB0cnVlLFxuICAgICAgaWdub3JlQW5pbWF0aW9uOiB0cnVlLFxuICAgICAgaWdub3JlRGltZW5zaW9uczogdHJ1ZVxuICAgIH07XG4gICAgdmFyIGRvYyA9IHRoaXM7XG4gICAgcmV0dXJuIGxvYWRDYW52ZygpXG4gICAgICAudGhlbihcbiAgICAgICAgZnVuY3Rpb24oY2FudmcpIHtcbiAgICAgICAgICByZXR1cm4gY2FudmcuZnJvbVN0cmluZyhjdHgsIHN2Zywgb3B0aW9ucyk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJDb3VsZCBub3QgbG9hZCBjYW52Zy5cIikpO1xuICAgICAgICB9XG4gICAgICApXG4gICAgICAudGhlbihmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UucmVuZGVyKG9wdGlvbnMpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBkb2MuYWRkSW1hZ2UoXG4gICAgICAgICAgY2FudmFzLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiwgMS4wKSxcbiAgICAgICAgICB4LFxuICAgICAgICAgIHksXG4gICAgICAgICAgdyxcbiAgICAgICAgICBoLFxuICAgICAgICAgIGNvbXByZXNzaW9uLFxuICAgICAgICAgIHJvdGF0aW9uXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgfTtcbn0pKGpzUERGLkFQSSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IChjKSAyMDEzIEVkdWFyZG8gTWVuZXplcyBkZSBNb3JhaXMsIGVkdWFyZG8ubW9yYWlzQHVzcC5iclxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4gKiBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbiAqIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG4gKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0ZcbiAqIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG4gKiBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFXG4gKiBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4gKiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cbiAqIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuXG4vKipcbiAqIGpzUERGIHRvdGFsX3BhZ2VzIHBsdWdpblxuICogQG5hbWUgdG90YWxfcGFnZXNcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICAvKipcbiAgICogQG5hbWUgcHV0VG90YWxQYWdlc1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhZ2VFeHByZXNzaW9uIFJlZ3VsYXIgRXhwcmVzc2lvblxuICAgKiBAcmV0dXJucyB7anNQREZ9IGpzUERGLWluc3RhbmNlXG4gICAqL1xuXG4gIGpzUERGQVBJLnB1dFRvdGFsUGFnZXMgPSBmdW5jdGlvbihwYWdlRXhwcmVzc2lvbikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHJlcGxhY2VFeHByZXNzaW9uO1xuICAgIHZhciB0b3RhbE51bWJlck9mUGFnZXMgPSAwO1xuICAgIGlmIChwYXJzZUludCh0aGlzLmludGVybmFsLmdldEZvbnQoKS5pZC5zdWJzdHIoMSksIDEwKSA8IDE1KSB7XG4gICAgICByZXBsYWNlRXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAocGFnZUV4cHJlc3Npb24sIFwiZ1wiKTtcbiAgICAgIHRvdGFsTnVtYmVyT2ZQYWdlcyA9IHRoaXMuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXBsYWNlRXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAoXG4gICAgICAgIHRoaXMucGRmRXNjYXBlMTYocGFnZUV4cHJlc3Npb24sIHRoaXMuaW50ZXJuYWwuZ2V0Rm9udCgpKSxcbiAgICAgICAgXCJnXCJcbiAgICAgICk7XG4gICAgICB0b3RhbE51bWJlck9mUGFnZXMgPSB0aGlzLnBkZkVzY2FwZTE2KFxuICAgICAgICB0aGlzLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKSArIFwiXCIsXG4gICAgICAgIHRoaXMuaW50ZXJuYWwuZ2V0Rm9udCgpXG4gICAgICApO1xuICAgIH1cblxuICAgIGZvciAodmFyIG4gPSAxOyBuIDw9IHRoaXMuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOyBuKyspIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbnRlcm5hbC5wYWdlc1tuXS5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmludGVybmFsLnBhZ2VzW25dW2ldID0gdGhpcy5pbnRlcm5hbC5wYWdlc1tuXVtpXS5yZXBsYWNlKFxuICAgICAgICAgIHJlcGxhY2VFeHByZXNzaW9uLFxuICAgICAgICAgIHRvdGFsTnVtYmVyT2ZQYWdlc1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufSkoanNQREYuQVBJKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIGpzUERGIHZpZXdlclByZWZlcmVuY2VzIFBsdWdpblxuICogQGF1dGhvciBBcmFzIEFiYmFzaSAoZ2l0aHViLmNvbS9hcmFzYWJiYXNpKVxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBBZGRzIHRoZSBhYmlsaXR5IHRvIHNldCBWaWV3ZXJQcmVmZXJlbmNlcyBhbmQgYnkgdGh1c1xuICogY29udHJvbGxpbmcgdGhlIHdheSB0aGUgZG9jdW1lbnQgaXMgdG8gYmUgcHJlc2VudGVkIG9uIHRoZVxuICogc2NyZWVuIG9yIGluIHByaW50LlxuICogQG5hbWUgdmlld2VycHJlZmVyZW5jZXNcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICAvKipcbiAgICogU2V0IHRoZSBWaWV3ZXJQcmVmZXJlbmNlcyBvZiB0aGUgZ2VuZXJhdGVkIFBERlxuICAgKlxuICAgKiBAbmFtZSB2aWV3ZXJQcmVmZXJlbmNlc1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBBcnJheSB3aXRoIHRoZSBWaWV3ZXJQcmVmZXJlbmNlczxiciAvPlxuICAgKiBFeGFtcGxlOiBkb2Mudmlld2VyUHJlZmVyZW5jZXMoe1wiRml0V2luZG93XCI6dHJ1ZX0pOzxiciAvPlxuICAgKiA8YnIgLz5cbiAgICogWW91IGNhbiBzZXQgZm9sbG93aW5nIHByZWZlcmVuY2VzOjxiciAvPlxuICAgKiA8YnIvPlxuICAgKiA8Yj5IaWRlVG9vbGJhcjwvYj4gPGk+KGJvb2xlYW4pPC9pPjxiciAvPlxuICAgKiBEZWZhdWx0IHZhbHVlOiBmYWxzZTxiciAvPlxuICAgKiA8YnIgLz5cbiAgICogPGI+SGlkZU1lbnViYXI8L2I+IDxpPihib29sZWFuKTwvaT48YnIgLz5cbiAgICogRGVmYXVsdCB2YWx1ZTogZmFsc2UuPGJyIC8+XG4gICAqIDxiciAvPlxuICAgKiA8Yj5IaWRlV2luZG93VUk8L2I+IDxpPihib29sZWFuKTwvaT48YnIgLz5cbiAgICogRGVmYXVsdCB2YWx1ZTogZmFsc2UuPGJyIC8+XG4gICAqIDxiciAvPlxuICAgKiA8Yj5GaXRXaW5kb3c8L2I+IDxpPihib29sZWFuKTwvaT48YnIgLz5cbiAgICogRGVmYXVsdCB2YWx1ZTogZmFsc2UuPGJyIC8+XG4gICAqIDxiciAvPlxuICAgKiA8Yj5DZW50ZXJXaW5kb3c8L2I+IDxpPihib29sZWFuKTwvaT48YnIgLz5cbiAgICogRGVmYXVsdCB2YWx1ZTogZmFsc2U8YnIgLz5cbiAgICogPGJyIC8+XG4gICAqIDxiPkRpc3BsYXlEb2NUaXRsZTwvYj4gPGk+KGJvb2xlYW4pPC9pPjxiciAvPlxuICAgKiBEZWZhdWx0IHZhbHVlOiBmYWxzZS48YnIgLz5cbiAgICogPGJyIC8+XG4gICAqIDxiPk5vbkZ1bGxTY3JlZW5QYWdlTW9kZTwvYj4gPGk+KHN0cmluZyk8L2k+PGJyIC8+XG4gICAqIFBvc3NpYmxlIHZhbHVlczogVXNlTm9uZSwgVXNlT3V0bGluZXMsIFVzZVRodW1icywgVXNlT0M8YnIgLz5cbiAgICogRGVmYXVsdCB2YWx1ZTogVXNlTm9uZTxici8+XG4gICAqIDxiciAvPlxuICAgKiA8Yj5EaXJlY3Rpb248L2I+IDxpPihzdHJpbmcpPC9pPjxiciAvPlxuICAgKiBQb3NzaWJsZSB2YWx1ZXM6IEwyUiwgUjJMPGJyIC8+XG4gICAqIERlZmF1bHQgdmFsdWU6IEwyUi48YnIgLz5cbiAgICogPGJyIC8+XG4gICAqIDxiPlZpZXdBcmVhPC9iPiA8aT4oc3RyaW5nKTwvaT48YnIgLz5cbiAgICogUG9zc2libGUgdmFsdWVzOiBNZWRpYUJveCwgQ3JvcEJveCwgVHJpbUJveCwgQmxlZWRCb3gsIEFydEJveDxiciAvPlxuICAgKiBEZWZhdWx0IHZhbHVlOiBDcm9wQm94LjxiciAvPlxuICAgKiA8YnIgLz5cbiAgICogPGI+Vmlld0NsaXA8L2I+IDxpPihzdHJpbmcpPC9pPjxiciAvPlxuICAgKiBQb3NzaWJsZSB2YWx1ZXM6IE1lZGlhQm94LCBDcm9wQm94LCBUcmltQm94LCBCbGVlZEJveCwgQXJ0Qm94PGJyIC8+XG4gICAqIERlZmF1bHQgdmFsdWU6IENyb3BCb3g8YnIgLz5cbiAgICogPGJyIC8+XG4gICAqIDxiPlByaW50QXJlYTwvYj4gPGk+KHN0cmluZyk8L2k+PGJyIC8+XG4gICAqIFBvc3NpYmxlIHZhbHVlczogTWVkaWFCb3gsIENyb3BCb3gsIFRyaW1Cb3gsIEJsZWVkQm94LCBBcnRCb3g8YnIgLz5cbiAgICogRGVmYXVsdCB2YWx1ZTogQ3JvcEJveDxiciAvPlxuICAgKiA8YnIgLz5cbiAgICogPGI+UHJpbnRDbGlwPC9iPiA8aT4oc3RyaW5nKTwvaT48YnIgLz5cbiAgICogUG9zc2libGUgdmFsdWVzOiBNZWRpYUJveCwgQ3JvcEJveCwgVHJpbUJveCwgQmxlZWRCb3gsIEFydEJveDxiciAvPlxuICAgKiBEZWZhdWx0IHZhbHVlOiBDcm9wQm94LjxiciAvPlxuICAgKiA8YnIgLz5cbiAgICogPGI+UHJpbnRTY2FsaW5nPC9iPiA8aT4oc3RyaW5nKTwvaT48YnIgLz5cbiAgICogUG9zc2libGUgdmFsdWVzOiBBcHBEZWZhdWx0LCBOb25lPGJyIC8+XG4gICAqIERlZmF1bHQgdmFsdWU6IEFwcERlZmF1bHQuPGJyIC8+XG4gICAqIDxiciAvPlxuICAgKiA8Yj5EdXBsZXg8L2I+IDxpPihzdHJpbmcpPC9pPjxiciAvPlxuICAgKiBQb3NzaWJsZSB2YWx1ZXM6IFNpbXBsZXgsIER1cGxleEZsaXBMb25nRWRnZSwgRHVwbGV4RmxpcFNob3J0RWRnZVxuICAgKiBEZWZhdWx0IHZhbHVlOiBub25lPGJyIC8+XG4gICAqIDxiciAvPlxuICAgKiA8Yj5QaWNrVHJheUJ5UERGU2l6ZTwvYj4gPGk+KGJvb2xlYW4pPC9pPjxiciAvPlxuICAgKiBEZWZhdWx0IHZhbHVlOiBmYWxzZTxiciAvPlxuICAgKiA8YnIgLz5cbiAgICogPGI+UHJpbnRQYWdlUmFuZ2U8L2I+IDxpPihBcnJheSk8L2k+PGJyIC8+XG4gICAqIEV4YW1wbGU6IFtbMSw1XSwgWzcsOV1dPGJyIC8+XG4gICAqIERlZmF1bHQgdmFsdWU6IGFzIGRlZmluZWQgYnkgUERGIHZpZXdlciBhcHBsaWNhdGlvbjxiciAvPlxuICAgKiA8YnIgLz5cbiAgICogPGI+TnVtQ29waWVzPC9iPiA8aT4oTnVtYmVyKTwvaT48YnIgLz5cbiAgICogUG9zc2libGUgdmFsdWVzOiAxLCAyLCAzLCA0LCA1PGJyIC8+XG4gICAqIERlZmF1bHQgdmFsdWU6IDE8YnIgLz5cbiAgICogPGJyIC8+XG4gICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSB0aGUgUERGIFJlZmVyZW5jZSwgc2l4dGggZWRpdGlvbiBvbiBQYWdlIDU3N1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRvUmVzZXQgVHJ1ZSB0byByZXNldCB0aGUgc2V0dGluZ3NcbiAgICogQGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIGpzUERGIGpzUERGLWluc3RhbmNlXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBkb2MgPSBuZXcganNQREYoKVxuICAgKiBkb2MudGV4dCgnVGhpcyBpcyBhIHRlc3QnLCAxMCwgMTApXG4gICAqIGRvYy52aWV3ZXJQcmVmZXJlbmNlcyh7J0ZpdFdpbmRvdyc6IHRydWV9LCB0cnVlKVxuICAgKiBkb2Muc2F2ZShcInZpZXdlclByZWZlcmVuY2VzLnBkZlwiKVxuICAgKlxuICAgKiAvLyBFeGFtcGxlIHByaW50aW5nIDEwIGNvcGllcywgdXNpbmcgY3JvcGJveCwgYW5kIGhpZGluZyBVSS5cbiAgICogZG9jLnZpZXdlclByZWZlcmVuY2VzKHtcbiAgICogICAnSGlkZVdpbmRvd1VJJzogdHJ1ZSxcbiAgICogICAnUHJpbnRBcmVhJzogJ0Nyb3BCb3gnLFxuICAgKiAgICdOdW1Db3BpZXMnOiAxMFxuICAgKiB9KVxuICAgKi9cbiAganNQREZBUEkudmlld2VyUHJlZmVyZW5jZXMgPSBmdW5jdGlvbihvcHRpb25zLCBkb1Jlc2V0KSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgZG9SZXNldCA9IGRvUmVzZXQgfHwgZmFsc2U7XG5cbiAgICB2YXIgY29uZmlndXJhdGlvbjtcbiAgICB2YXIgY29uZmlndXJhdGlvblRlbXBsYXRlID0ge1xuICAgICAgSGlkZVRvb2xiYXI6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogW3RydWUsIGZhbHNlXSxcbiAgICAgICAgcGRmVmVyc2lvbjogMS4zXG4gICAgICB9LFxuICAgICAgSGlkZU1lbnViYXI6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogW3RydWUsIGZhbHNlXSxcbiAgICAgICAgcGRmVmVyc2lvbjogMS4zXG4gICAgICB9LFxuICAgICAgSGlkZVdpbmRvd1VJOiB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIGV4cGxpY2l0U2V0OiBmYWxzZSxcbiAgICAgICAgdmFsdWVTZXQ6IFt0cnVlLCBmYWxzZV0sXG4gICAgICAgIHBkZlZlcnNpb246IDEuM1xuICAgICAgfSxcbiAgICAgIEZpdFdpbmRvdzoge1xuICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICBleHBsaWNpdFNldDogZmFsc2UsXG4gICAgICAgIHZhbHVlU2V0OiBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICBwZGZWZXJzaW9uOiAxLjNcbiAgICAgIH0sXG4gICAgICBDZW50ZXJXaW5kb3c6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogW3RydWUsIGZhbHNlXSxcbiAgICAgICAgcGRmVmVyc2lvbjogMS4zXG4gICAgICB9LFxuICAgICAgRGlzcGxheURvY1RpdGxlOiB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIGV4cGxpY2l0U2V0OiBmYWxzZSxcbiAgICAgICAgdmFsdWVTZXQ6IFt0cnVlLCBmYWxzZV0sXG4gICAgICAgIHBkZlZlcnNpb246IDEuNFxuICAgICAgfSxcbiAgICAgIE5vbkZ1bGxTY3JlZW5QYWdlTW9kZToge1xuICAgICAgICBkZWZhdWx0VmFsdWU6IFwiVXNlTm9uZVwiLFxuICAgICAgICB2YWx1ZTogXCJVc2VOb25lXCIsXG4gICAgICAgIHR5cGU6IFwibmFtZVwiLFxuICAgICAgICBleHBsaWNpdFNldDogZmFsc2UsXG4gICAgICAgIHZhbHVlU2V0OiBbXCJVc2VOb25lXCIsIFwiVXNlT3V0bGluZXNcIiwgXCJVc2VUaHVtYnNcIiwgXCJVc2VPQ1wiXSxcbiAgICAgICAgcGRmVmVyc2lvbjogMS4zXG4gICAgICB9LFxuICAgICAgRGlyZWN0aW9uOiB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogXCJMMlJcIixcbiAgICAgICAgdmFsdWU6IFwiTDJSXCIsXG4gICAgICAgIHR5cGU6IFwibmFtZVwiLFxuICAgICAgICBleHBsaWNpdFNldDogZmFsc2UsXG4gICAgICAgIHZhbHVlU2V0OiBbXCJMMlJcIiwgXCJSMkxcIl0sXG4gICAgICAgIHBkZlZlcnNpb246IDEuM1xuICAgICAgfSxcbiAgICAgIFZpZXdBcmVhOiB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogXCJDcm9wQm94XCIsXG4gICAgICAgIHZhbHVlOiBcIkNyb3BCb3hcIixcbiAgICAgICAgdHlwZTogXCJuYW1lXCIsXG4gICAgICAgIGV4cGxpY2l0U2V0OiBmYWxzZSxcbiAgICAgICAgdmFsdWVTZXQ6IFtcIk1lZGlhQm94XCIsIFwiQ3JvcEJveFwiLCBcIlRyaW1Cb3hcIiwgXCJCbGVlZEJveFwiLCBcIkFydEJveFwiXSxcbiAgICAgICAgcGRmVmVyc2lvbjogMS40XG4gICAgICB9LFxuICAgICAgVmlld0NsaXA6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcIkNyb3BCb3hcIixcbiAgICAgICAgdmFsdWU6IFwiQ3JvcEJveFwiLFxuICAgICAgICB0eXBlOiBcIm5hbWVcIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogW1wiTWVkaWFCb3hcIiwgXCJDcm9wQm94XCIsIFwiVHJpbUJveFwiLCBcIkJsZWVkQm94XCIsIFwiQXJ0Qm94XCJdLFxuICAgICAgICBwZGZWZXJzaW9uOiAxLjRcbiAgICAgIH0sXG4gICAgICBQcmludEFyZWE6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcIkNyb3BCb3hcIixcbiAgICAgICAgdmFsdWU6IFwiQ3JvcEJveFwiLFxuICAgICAgICB0eXBlOiBcIm5hbWVcIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogW1wiTWVkaWFCb3hcIiwgXCJDcm9wQm94XCIsIFwiVHJpbUJveFwiLCBcIkJsZWVkQm94XCIsIFwiQXJ0Qm94XCJdLFxuICAgICAgICBwZGZWZXJzaW9uOiAxLjRcbiAgICAgIH0sXG4gICAgICBQcmludENsaXA6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcIkNyb3BCb3hcIixcbiAgICAgICAgdmFsdWU6IFwiQ3JvcEJveFwiLFxuICAgICAgICB0eXBlOiBcIm5hbWVcIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogW1wiTWVkaWFCb3hcIiwgXCJDcm9wQm94XCIsIFwiVHJpbUJveFwiLCBcIkJsZWVkQm94XCIsIFwiQXJ0Qm94XCJdLFxuICAgICAgICBwZGZWZXJzaW9uOiAxLjRcbiAgICAgIH0sXG4gICAgICBQcmludFNjYWxpbmc6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcIkFwcERlZmF1bHRcIixcbiAgICAgICAgdmFsdWU6IFwiQXBwRGVmYXVsdFwiLFxuICAgICAgICB0eXBlOiBcIm5hbWVcIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogW1wiQXBwRGVmYXVsdFwiLCBcIk5vbmVcIl0sXG4gICAgICAgIHBkZlZlcnNpb246IDEuNlxuICAgICAgfSxcbiAgICAgIER1cGxleDoge1xuICAgICAgICBkZWZhdWx0VmFsdWU6IFwiXCIsXG4gICAgICAgIHZhbHVlOiBcIm5vbmVcIixcbiAgICAgICAgdHlwZTogXCJuYW1lXCIsXG4gICAgICAgIGV4cGxpY2l0U2V0OiBmYWxzZSxcbiAgICAgICAgdmFsdWVTZXQ6IFtcbiAgICAgICAgICBcIlNpbXBsZXhcIixcbiAgICAgICAgICBcIkR1cGxleEZsaXBTaG9ydEVkZ2VcIixcbiAgICAgICAgICBcIkR1cGxleEZsaXBMb25nRWRnZVwiLFxuICAgICAgICAgIFwibm9uZVwiXG4gICAgICAgIF0sXG4gICAgICAgIHBkZlZlcnNpb246IDEuN1xuICAgICAgfSxcbiAgICAgIFBpY2tUcmF5QnlQREZTaXplOiB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIGV4cGxpY2l0U2V0OiBmYWxzZSxcbiAgICAgICAgdmFsdWVTZXQ6IFt0cnVlLCBmYWxzZV0sXG4gICAgICAgIHBkZlZlcnNpb246IDEuN1xuICAgICAgfSxcbiAgICAgIFByaW50UGFnZVJhbmdlOiB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogXCJcIixcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgZXhwbGljaXRTZXQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZVNldDogbnVsbCxcbiAgICAgICAgcGRmVmVyc2lvbjogMS43XG4gICAgICB9LFxuICAgICAgTnVtQ29waWVzOiB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogMSxcbiAgICAgICAgdmFsdWU6IDEsXG4gICAgICAgIHR5cGU6IFwiaW50ZWdlclwiLFxuICAgICAgICBleHBsaWNpdFNldDogZmFsc2UsXG4gICAgICAgIHZhbHVlU2V0OiBudWxsLFxuICAgICAgICBwZGZWZXJzaW9uOiAxLjdcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNvbmZpZ3VyYXRpb25LZXlzID0gT2JqZWN0LmtleXMoY29uZmlndXJhdGlvblRlbXBsYXRlKTtcblxuICAgIHZhciByYW5nZUFycmF5ID0gW107XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBqID0gMDtcbiAgICB2YXIgayA9IDA7XG4gICAgdmFyIGlzVmFsaWQ7XG5cbiAgICB2YXIgbWV0aG9kO1xuICAgIHZhciB2YWx1ZTtcblxuICAgIGZ1bmN0aW9uIGFycmF5Q29udGFpbnNFbGVtZW50KGFycmF5LCBlbGVtZW50KSB7XG4gICAgICB2YXIgaXRlcmF0b3I7XG4gICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgIGZvciAoaXRlcmF0b3IgPSAwOyBpdGVyYXRvciA8IGFycmF5Lmxlbmd0aDsgaXRlcmF0b3IgKz0gMSkge1xuICAgICAgICBpZiAoYXJyYXlbaXRlcmF0b3JdID09PSBlbGVtZW50KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnRlcm5hbC52aWV3ZXJwcmVmZXJlbmNlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmludGVybmFsLnZpZXdlcnByZWZlcmVuY2VzID0ge307XG4gICAgICB0aGlzLmludGVybmFsLnZpZXdlcnByZWZlcmVuY2VzLmNvbmZpZ3VyYXRpb24gPSBKU09OLnBhcnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeShjb25maWd1cmF0aW9uVGVtcGxhdGUpXG4gICAgICApO1xuICAgICAgdGhpcy5pbnRlcm5hbC52aWV3ZXJwcmVmZXJlbmNlcy5pc1N1YnNjcmliZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uZmlndXJhdGlvbiA9IHRoaXMuaW50ZXJuYWwudmlld2VycHJlZmVyZW5jZXMuY29uZmlndXJhdGlvbjtcblxuICAgIGlmIChvcHRpb25zID09PSBcInJlc2V0XCIgfHwgZG9SZXNldCA9PT0gdHJ1ZSkge1xuICAgICAgdmFyIGxlbiA9IGNvbmZpZ3VyYXRpb25LZXlzLmxlbmd0aDtcblxuICAgICAgZm9yIChrID0gMDsgayA8IGxlbjsgayArPSAxKSB7XG4gICAgICAgIGNvbmZpZ3VyYXRpb25bY29uZmlndXJhdGlvbktleXNba11dLnZhbHVlID1cbiAgICAgICAgICBjb25maWd1cmF0aW9uW2NvbmZpZ3VyYXRpb25LZXlzW2tdXS5kZWZhdWx0VmFsdWU7XG4gICAgICAgIGNvbmZpZ3VyYXRpb25bY29uZmlndXJhdGlvbktleXNba11dLmV4cGxpY2l0U2V0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBmb3IgKG1ldGhvZCBpbiBvcHRpb25zKSB7XG4gICAgICAgIHZhbHVlID0gb3B0aW9uc1ttZXRob2RdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYXJyYXlDb250YWluc0VsZW1lbnQoY29uZmlndXJhdGlvbktleXMsIG1ldGhvZCkgJiZcbiAgICAgICAgICB2YWx1ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb25bbWV0aG9kXS50eXBlID09PSBcImJvb2xlYW5cIiAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uZmlndXJhdGlvblttZXRob2RdLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb25bbWV0aG9kXS50eXBlID09PSBcIm5hbWVcIiAmJlxuICAgICAgICAgICAgYXJyYXlDb250YWluc0VsZW1lbnQoY29uZmlndXJhdGlvblttZXRob2RdLnZhbHVlU2V0LCB2YWx1ZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb25bbWV0aG9kXS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uW21ldGhvZF0udHlwZSA9PT0gXCJpbnRlZ2VyXCIgJiZcbiAgICAgICAgICAgIE51bWJlci5pc0ludGVnZXIodmFsdWUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25maWd1cmF0aW9uW21ldGhvZF0udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZ3VyYXRpb25bbWV0aG9kXS50eXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlW2ldLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgdmFsdWVbaV1bMF0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICByYW5nZUFycmF5LnB1c2goU3RyaW5nKHZhbHVlW2ldIC0gMSkpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlW2ldLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdmFsdWVbaV0ubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWVbaV1bal0gIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgcmFuZ2VBcnJheS5wdXNoKFt2YWx1ZVtpXVswXSAtIDEsIHZhbHVlW2ldWzFdIC0gMV0uam9pbihcIiBcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlndXJhdGlvblttZXRob2RdLnZhbHVlID0gXCJbXCIgKyByYW5nZUFycmF5LmpvaW4oXCIgXCIpICsgXCJdXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb25bbWV0aG9kXS52YWx1ZSA9IGNvbmZpZ3VyYXRpb25bbWV0aG9kXS5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uZmlndXJhdGlvblttZXRob2RdLmV4cGxpY2l0U2V0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmludGVybmFsLnZpZXdlcnByZWZlcmVuY2VzLmlzU3Vic2NyaWJlZCA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuaW50ZXJuYWwuZXZlbnRzLnN1YnNjcmliZShcInB1dENhdGFsb2dcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwZGZEaWN0ID0gW107XG4gICAgICAgIHZhciB2UHJlZjtcbiAgICAgICAgZm9yICh2UHJlZiBpbiBjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb25bdlByZWZdLmV4cGxpY2l0U2V0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvblt2UHJlZl0udHlwZSA9PT0gXCJuYW1lXCIpIHtcbiAgICAgICAgICAgICAgcGRmRGljdC5wdXNoKFwiL1wiICsgdlByZWYgKyBcIiAvXCIgKyBjb25maWd1cmF0aW9uW3ZQcmVmXS52YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwZGZEaWN0LnB1c2goXCIvXCIgKyB2UHJlZiArIFwiIFwiICsgY29uZmlndXJhdGlvblt2UHJlZl0udmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGRmRGljdC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICB0aGlzLmludGVybmFsLndyaXRlKFxuICAgICAgICAgICAgXCIvVmlld2VyUHJlZmVyZW5jZXNcXG48PFxcblwiICsgcGRmRGljdC5qb2luKFwiXFxuXCIpICsgXCJcXG4+PlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmludGVybmFsLnZpZXdlcnByZWZlcmVuY2VzLmlzU3Vic2NyaWJlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5pbnRlcm5hbC52aWV3ZXJwcmVmZXJlbmNlcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn0pKGpzUERGLkFQSSk7XG4iLCIvKiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEBsaWNlbnNlXG4gKiBqc1BERiBYTVAgbWV0YWRhdGEgcGx1Z2luXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgSnVzc2kgVXR1bmVuLCB1LWp1c3NpQHN1b21pMjQuZmlcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcbiAqIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4gKiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0b1xuICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuICogTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRVxuICogTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTlxuICogT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4gKiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuLyoqXG4gKiBAbmFtZSB4bXBfbWV0YWRhdGFcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGQVBJKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwb3N0UHV0UmVzb3VyY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHhtcG1ldGFfYmVnaW5uaW5nID0gJzx4OnhtcG1ldGEgeG1sbnM6eD1cImFkb2JlOm5zOm1ldGEvXCI+JztcbiAgICB2YXIgcmRmX2JlZ2lubmluZyA9XG4gICAgICAnPHJkZjpSREYgeG1sbnM6cmRmPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zI1wiPjxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PVwiXCIgeG1sbnM6anNwZGY9XCInICtcbiAgICAgIHRoaXMuaW50ZXJuYWwuX19tZXRhZGF0YV9fLm5hbWVzcGFjZXVyaSArXG4gICAgICAnXCI+PGpzcGRmOm1ldGFkYXRhPic7XG4gICAgdmFyIHJkZl9lbmRpbmcgPSBcIjwvanNwZGY6bWV0YWRhdGE+PC9yZGY6RGVzY3JpcHRpb24+PC9yZGY6UkRGPlwiO1xuICAgIHZhciB4bXBtZXRhX2VuZGluZyA9IFwiPC94OnhtcG1ldGE+XCI7XG4gICAgdmFyIHV0ZjhfeG1wbWV0YV9iZWdpbm5pbmcgPSB1bmVzY2FwZShcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudCh4bXBtZXRhX2JlZ2lubmluZylcbiAgICApO1xuICAgIHZhciB1dGY4X3JkZl9iZWdpbm5pbmcgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQocmRmX2JlZ2lubmluZykpO1xuICAgIHZhciB1dGY4X21ldGFkYXRhID0gdW5lc2NhcGUoXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5pbnRlcm5hbC5fX21ldGFkYXRhX18ubWV0YWRhdGEpXG4gICAgKTtcbiAgICB2YXIgdXRmOF9yZGZfZW5kaW5nID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHJkZl9lbmRpbmcpKTtcbiAgICB2YXIgdXRmOF94bXBtZXRhX2VuZGluZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh4bXBtZXRhX2VuZGluZykpO1xuXG4gICAgdmFyIHRvdGFsX2xlbiA9XG4gICAgICB1dGY4X3JkZl9iZWdpbm5pbmcubGVuZ3RoICtcbiAgICAgIHV0ZjhfbWV0YWRhdGEubGVuZ3RoICtcbiAgICAgIHV0ZjhfcmRmX2VuZGluZy5sZW5ndGggK1xuICAgICAgdXRmOF94bXBtZXRhX2JlZ2lubmluZy5sZW5ndGggK1xuICAgICAgdXRmOF94bXBtZXRhX2VuZGluZy5sZW5ndGg7XG5cbiAgICB0aGlzLmludGVybmFsLl9fbWV0YWRhdGFfXy5tZXRhZGF0YV9vYmplY3RfbnVtYmVyID0gdGhpcy5pbnRlcm5hbC5uZXdPYmplY3QoKTtcbiAgICB0aGlzLmludGVybmFsLndyaXRlKFxuICAgICAgXCI8PCAvVHlwZSAvTWV0YWRhdGEgL1N1YnR5cGUgL1hNTCAvTGVuZ3RoIFwiICsgdG90YWxfbGVuICsgXCIgPj5cIlxuICAgICk7XG4gICAgdGhpcy5pbnRlcm5hbC53cml0ZShcInN0cmVhbVwiKTtcbiAgICB0aGlzLmludGVybmFsLndyaXRlKFxuICAgICAgdXRmOF94bXBtZXRhX2JlZ2lubmluZyArXG4gICAgICAgIHV0ZjhfcmRmX2JlZ2lubmluZyArXG4gICAgICAgIHV0ZjhfbWV0YWRhdGEgK1xuICAgICAgICB1dGY4X3JkZl9lbmRpbmcgK1xuICAgICAgICB1dGY4X3htcG1ldGFfZW5kaW5nXG4gICAgKTtcbiAgICB0aGlzLmludGVybmFsLndyaXRlKFwiZW5kc3RyZWFtXCIpO1xuICAgIHRoaXMuaW50ZXJuYWwud3JpdGUoXCJlbmRvYmpcIik7XG4gIH07XG5cbiAgdmFyIHB1dENhdGFsb2cgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5pbnRlcm5hbC5fX21ldGFkYXRhX18ubWV0YWRhdGFfb2JqZWN0X251bWJlcikge1xuICAgICAgdGhpcy5pbnRlcm5hbC53cml0ZShcbiAgICAgICAgXCIvTWV0YWRhdGEgXCIgK1xuICAgICAgICAgIHRoaXMuaW50ZXJuYWwuX19tZXRhZGF0YV9fLm1ldGFkYXRhX29iamVjdF9udW1iZXIgK1xuICAgICAgICAgIFwiIDAgUlwiXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBYTVAgZm9ybWF0dGVkIG1ldGFkYXRhIHRvIFBERlxuICAgKlxuICAgKiBAbmFtZSBhZGRNZXRhZGF0YVxuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGFkYXRhIFRoZSBhY3R1YWwgbWV0YWRhdGEgdG8gYmUgYWRkZWQuIFRoZSBtZXRhZGF0YSBzaGFsbCBiZSBzdG9yZWQgYXMgWE1QIHNpbXBsZSB2YWx1ZS4gTm90ZSB0aGF0IGlmIHRoZSBtZXRhZGF0YSBzdHJpbmcgY29udGFpbnMgWE1MIG1hcmt1cCBjaGFyYWN0ZXJzIFwiPFwiLCBcIj5cIiBvciBcIiZcIiwgdGhvc2UgY2hhcmFjdGVycyBzaG91bGQgYmUgd3JpdHRlbiB1c2luZyBYTUwgZW50aXRpZXMuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2V1cmkgU2V0cyB0aGUgbmFtZXNwYWNlIFVSSSBmb3IgdGhlIG1ldGFkYXRhLiBMYXN0IGNoYXJhY3RlciBzaG91bGQgYmUgc2xhc2ggb3IgaGFzaC5cbiAgICogQHJldHVybnMge2pzUERGfSBqc1BERi1pbnN0YW5jZVxuICAgKi9cbiAganNQREZBUEkuYWRkTWV0YWRhdGEgPSBmdW5jdGlvbihtZXRhZGF0YSwgbmFtZXNwYWNldXJpKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmludGVybmFsLl9fbWV0YWRhdGFfXyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5pbnRlcm5hbC5fX21ldGFkYXRhX18gPSB7XG4gICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICAgICAgbmFtZXNwYWNldXJpOiBuYW1lc3BhY2V1cmkgfHwgXCJodHRwOi8vanNwZGYuZGVmYXVsdC5uYW1lc3BhY2V1cmkvXCJcbiAgICAgIH07XG4gICAgICB0aGlzLmludGVybmFsLmV2ZW50cy5zdWJzY3JpYmUoXCJwdXRDYXRhbG9nXCIsIHB1dENhdGFsb2cpO1xuXG4gICAgICB0aGlzLmludGVybmFsLmV2ZW50cy5zdWJzY3JpYmUoXCJwb3N0UHV0UmVzb3VyY2VzXCIsIHBvc3RQdXRSZXNvdXJjZXMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn0pKGpzUERGLkFQSSk7XG4iLCJpbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuaW1wb3J0IHsgdG9QREZOYW1lIH0gZnJvbSBcIi4uL2xpYnMvcGRmbmFtZS5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIHV0ZjhcbiAqIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGpzUERGKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIganNQREZBUEkgPSBqc1BERi5BUEk7XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLyogZnVuY3Rpb24gOiBwZGZFc2NhcGUxNiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogY29tbWVudCA6IFRoZSBjaGFyYWN0ZXIgaWQgb2YgYSAyLWJ5dGUgc3RyaW5nIGlzIGNvbnZlcnRlZCB0byBhIGhleGFkZWNpbWFsIG51bWJlciBieSBvYnRhaW5pbmcgKi9cbiAgLyogICB0aGUgY29ycmVzcG9uZGluZyBnbHlwaCBpZCBhbmQgd2lkdGgsIGFuZCB0aGVuIGFkZGluZyBwYWRkaW5nIHRvIHRoZSBzdHJpbmcuICAgICAgICAgICAgICAgICAgKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgdmFyIHBkZkVzY2FwZTE2ID0gKGpzUERGQVBJLnBkZkVzY2FwZTE2ID0gZnVuY3Rpb24odGV4dCwgZm9udCkge1xuICAgIHZhciB3aWR0aHMgPSBmb250Lm1ldGFkYXRhLlVuaWNvZGUud2lkdGhzO1xuICAgIHZhciBwYWR6ID0gW1wiXCIsIFwiMFwiLCBcIjAwXCIsIFwiMDAwXCIsIFwiMDAwMFwiXTtcbiAgICB2YXIgYXIgPSBbXCJcIl07XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0ZXh0Lmxlbmd0aCwgdDsgaSA8IGw7ICsraSkge1xuICAgICAgdCA9IGZvbnQubWV0YWRhdGEuY2hhcmFjdGVyVG9HbHlwaCh0ZXh0LmNoYXJDb2RlQXQoaSkpO1xuICAgICAgZm9udC5tZXRhZGF0YS5nbHlJZHNVc2VkLnB1c2godCk7XG4gICAgICBmb250Lm1ldGFkYXRhLnRvVW5pY29kZVt0XSA9IHRleHQuY2hhckNvZGVBdChpKTtcbiAgICAgIGlmICh3aWR0aHMuaW5kZXhPZih0KSA9PSAtMSkge1xuICAgICAgICB3aWR0aHMucHVzaCh0KTtcbiAgICAgICAgd2lkdGhzLnB1c2goW3BhcnNlSW50KGZvbnQubWV0YWRhdGEud2lkdGhPZkdseXBoKHQpLCAxMCldKTtcbiAgICAgIH1cbiAgICAgIGlmICh0ID09IFwiMFwiKSB7XG4gICAgICAgIC8vU3BhY2VzIGFyZSBub3QgYWxsb3dlZCBpbiBjbWFwLlxuICAgICAgICByZXR1cm4gYXIuam9pbihcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHQgPSB0LnRvU3RyaW5nKDE2KTtcbiAgICAgICAgYXIucHVzaChwYWR6WzQgLSB0Lmxlbmd0aF0sIHQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXIuam9pbihcIlwiKTtcbiAgfSk7XG5cbiAgdmFyIHRvVW5pY29kZUNtYXAgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgY29kZSwgY29kZXMsIHJhbmdlLCB1bmljb2RlLCB1bmljb2RlTWFwLCBfaSwgX2xlbjtcbiAgICB1bmljb2RlTWFwID1cbiAgICAgIFwiL0NJREluaXQgL1Byb2NTZXQgZmluZHJlc291cmNlIGJlZ2luXFxuMTIgZGljdCBiZWdpblxcbmJlZ2luY21hcFxcbi9DSURTeXN0ZW1JbmZvIDw8XFxuICAvUmVnaXN0cnkgKEFkb2JlKVxcbiAgL09yZGVyaW5nIChVQ1MpXFxuICAvU3VwcGxlbWVudCAwXFxuPj4gZGVmXFxuL0NNYXBOYW1lIC9BZG9iZS1JZGVudGl0eS1VQ1MgZGVmXFxuL0NNYXBUeXBlIDIgZGVmXFxuMSBiZWdpbmNvZGVzcGFjZXJhbmdlXFxuPDAwMDA+PGZmZmY+XFxuZW5kY29kZXNwYWNlcmFuZ2VcIjtcbiAgICBjb2RlcyA9IE9iamVjdC5rZXlzKG1hcCkuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYSAtIGI7XG4gICAgfSk7XG5cbiAgICByYW5nZSA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gY29kZXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGNvZGUgPSBjb2Rlc1tfaV07XG4gICAgICBpZiAocmFuZ2UubGVuZ3RoID49IDEwMCkge1xuICAgICAgICB1bmljb2RlTWFwICs9XG4gICAgICAgICAgXCJcXG5cIiArXG4gICAgICAgICAgcmFuZ2UubGVuZ3RoICtcbiAgICAgICAgICBcIiBiZWdpbmJmY2hhclxcblwiICtcbiAgICAgICAgICByYW5nZS5qb2luKFwiXFxuXCIpICtcbiAgICAgICAgICBcIlxcbmVuZGJmY2hhclwiO1xuICAgICAgICByYW5nZSA9IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIG1hcFtjb2RlXSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIG1hcFtjb2RlXSAhPT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgbWFwW2NvZGVdLnRvU3RyaW5nID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICkge1xuICAgICAgICB1bmljb2RlID0gKFwiMDAwMFwiICsgbWFwW2NvZGVdLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO1xuICAgICAgICBjb2RlID0gKFwiMDAwMFwiICsgKCtjb2RlKS50b1N0cmluZygxNikpLnNsaWNlKC00KTtcbiAgICAgICAgcmFuZ2UucHVzaChcIjxcIiArIGNvZGUgKyBcIj48XCIgKyB1bmljb2RlICsgXCI+XCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyYW5nZS5sZW5ndGgpIHtcbiAgICAgIHVuaWNvZGVNYXAgKz1cbiAgICAgICAgXCJcXG5cIiArXG4gICAgICAgIHJhbmdlLmxlbmd0aCArXG4gICAgICAgIFwiIGJlZ2luYmZjaGFyXFxuXCIgK1xuICAgICAgICByYW5nZS5qb2luKFwiXFxuXCIpICtcbiAgICAgICAgXCJcXG5lbmRiZmNoYXJcXG5cIjtcbiAgICB9XG4gICAgdW5pY29kZU1hcCArPVxuICAgICAgXCJlbmRjbWFwXFxuQ01hcE5hbWUgY3VycmVudGRpY3QgL0NNYXAgZGVmaW5lcmVzb3VyY2UgcG9wXFxuZW5kXFxuZW5kXCI7XG4gICAgcmV0dXJuIHVuaWNvZGVNYXA7XG4gIH07XG5cbiAgdmFyIGlkZW50aXR5SEZ1bmN0aW9uID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBmb250ID0gb3B0aW9ucy5mb250O1xuICAgIHZhciBvdXQgPSBvcHRpb25zLm91dDtcbiAgICB2YXIgbmV3T2JqZWN0ID0gb3B0aW9ucy5uZXdPYmplY3Q7XG4gICAgdmFyIHB1dFN0cmVhbSA9IG9wdGlvbnMucHV0U3RyZWFtO1xuXG4gICAgaWYgKFxuICAgICAgZm9udC5tZXRhZGF0YSBpbnN0YW5jZW9mIGpzUERGLkFQSS5UVEZGb250ICYmXG4gICAgICBmb250LmVuY29kaW5nID09PSBcIklkZW50aXR5LUhcIlxuICAgICkge1xuICAgICAgLy9UYWcgd2l0aCBJZGVudGl0eS1IXG4gICAgICB2YXIgd2lkdGhzID0gZm9udC5tZXRhZGF0YS5Vbmljb2RlLndpZHRocztcbiAgICAgIHZhciBkYXRhID0gZm9udC5tZXRhZGF0YS5zdWJzZXQuZW5jb2RlKGZvbnQubWV0YWRhdGEuZ2x5SWRzVXNlZCwgMSk7XG4gICAgICB2YXIgcGRmT3V0cHV0ID0gZGF0YTtcbiAgICAgIHZhciBwZGZPdXRwdXQyID0gXCJcIjtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGRmT3V0cHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBkZk91dHB1dDIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShwZGZPdXRwdXRbaV0pO1xuICAgICAgfVxuICAgICAgdmFyIGZvbnRUYWJsZSA9IG5ld09iamVjdCgpO1xuICAgICAgcHV0U3RyZWFtKHsgZGF0YTogcGRmT3V0cHV0MiwgYWRkTGVuZ3RoMTogdHJ1ZSwgb2JqZWN0SWQ6IGZvbnRUYWJsZSB9KTtcbiAgICAgIG91dChcImVuZG9ialwiKTtcblxuICAgICAgdmFyIGNtYXAgPSBuZXdPYmplY3QoKTtcbiAgICAgIHZhciBjbWFwRGF0YSA9IHRvVW5pY29kZUNtYXAoZm9udC5tZXRhZGF0YS50b1VuaWNvZGUpO1xuICAgICAgcHV0U3RyZWFtKHsgZGF0YTogY21hcERhdGEsIGFkZExlbmd0aDE6IHRydWUsIG9iamVjdElkOiBjbWFwIH0pO1xuICAgICAgb3V0KFwiZW5kb2JqXCIpO1xuXG4gICAgICB2YXIgZm9udERlc2NyaXB0b3IgPSBuZXdPYmplY3QoKTtcbiAgICAgIG91dChcIjw8XCIpO1xuICAgICAgb3V0KFwiL1R5cGUgL0ZvbnREZXNjcmlwdG9yXCIpO1xuICAgICAgb3V0KFwiL0ZvbnROYW1lIC9cIiArIHRvUERGTmFtZShmb250LmZvbnROYW1lKSk7XG4gICAgICBvdXQoXCIvRm9udEZpbGUyIFwiICsgZm9udFRhYmxlICsgXCIgMCBSXCIpO1xuICAgICAgb3V0KFwiL0ZvbnRCQm94IFwiICsganNQREYuQVBJLlBERk9iamVjdC5jb252ZXJ0KGZvbnQubWV0YWRhdGEuYmJveCkpO1xuICAgICAgb3V0KFwiL0ZsYWdzIFwiICsgZm9udC5tZXRhZGF0YS5mbGFncyk7XG4gICAgICBvdXQoXCIvU3RlbVYgXCIgKyBmb250Lm1ldGFkYXRhLnN0ZW1WKTtcbiAgICAgIG91dChcIi9JdGFsaWNBbmdsZSBcIiArIGZvbnQubWV0YWRhdGEuaXRhbGljQW5nbGUpO1xuICAgICAgb3V0KFwiL0FzY2VudCBcIiArIGZvbnQubWV0YWRhdGEuYXNjZW5kZXIpO1xuICAgICAgb3V0KFwiL0Rlc2NlbnQgXCIgKyBmb250Lm1ldGFkYXRhLmRlY2VuZGVyKTtcbiAgICAgIG91dChcIi9DYXBIZWlnaHQgXCIgKyBmb250Lm1ldGFkYXRhLmNhcEhlaWdodCk7XG4gICAgICBvdXQoXCI+PlwiKTtcbiAgICAgIG91dChcImVuZG9ialwiKTtcblxuICAgICAgdmFyIERlc2NlbmRhbnRGb250ID0gbmV3T2JqZWN0KCk7XG4gICAgICBvdXQoXCI8PFwiKTtcbiAgICAgIG91dChcIi9UeXBlIC9Gb250XCIpO1xuICAgICAgb3V0KFwiL0Jhc2VGb250IC9cIiArIHRvUERGTmFtZShmb250LmZvbnROYW1lKSk7XG4gICAgICBvdXQoXCIvRm9udERlc2NyaXB0b3IgXCIgKyBmb250RGVzY3JpcHRvciArIFwiIDAgUlwiKTtcbiAgICAgIG91dChcIi9XIFwiICsganNQREYuQVBJLlBERk9iamVjdC5jb252ZXJ0KHdpZHRocykpO1xuICAgICAgb3V0KFwiL0NJRFRvR0lETWFwIC9JZGVudGl0eVwiKTtcbiAgICAgIG91dChcIi9EVyAxMDAwXCIpO1xuICAgICAgb3V0KFwiL1N1YnR5cGUgL0NJREZvbnRUeXBlMlwiKTtcbiAgICAgIG91dChcIi9DSURTeXN0ZW1JbmZvXCIpO1xuICAgICAgb3V0KFwiPDxcIik7XG4gICAgICBvdXQoXCIvU3VwcGxlbWVudCAwXCIpO1xuICAgICAgb3V0KFwiL1JlZ2lzdHJ5IChBZG9iZSlcIik7XG4gICAgICBvdXQoXCIvT3JkZXJpbmcgKFwiICsgZm9udC5lbmNvZGluZyArIFwiKVwiKTtcbiAgICAgIG91dChcIj4+XCIpO1xuICAgICAgb3V0KFwiPj5cIik7XG4gICAgICBvdXQoXCJlbmRvYmpcIik7XG5cbiAgICAgIGZvbnQub2JqZWN0TnVtYmVyID0gbmV3T2JqZWN0KCk7XG4gICAgICBvdXQoXCI8PFwiKTtcbiAgICAgIG91dChcIi9UeXBlIC9Gb250XCIpO1xuICAgICAgb3V0KFwiL1N1YnR5cGUgL1R5cGUwXCIpO1xuICAgICAgb3V0KFwiL1RvVW5pY29kZSBcIiArIGNtYXAgKyBcIiAwIFJcIik7XG4gICAgICBvdXQoXCIvQmFzZUZvbnQgL1wiICsgdG9QREZOYW1lKGZvbnQuZm9udE5hbWUpKTtcbiAgICAgIG91dChcIi9FbmNvZGluZyAvXCIgKyBmb250LmVuY29kaW5nKTtcbiAgICAgIG91dChcIi9EZXNjZW5kYW50Rm9udHMgW1wiICsgRGVzY2VuZGFudEZvbnQgKyBcIiAwIFJdXCIpO1xuICAgICAgb3V0KFwiPj5cIik7XG4gICAgICBvdXQoXCJlbmRvYmpcIik7XG5cbiAgICAgIGZvbnQuaXNBbHJlYWR5UHV0dGVkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAganNQREZBUEkuZXZlbnRzLnB1c2goW1xuICAgIFwicHV0Rm9udFwiLFxuICAgIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgIGlkZW50aXR5SEZ1bmN0aW9uKGFyZ3MpO1xuICAgIH1cbiAgXSk7XG5cbiAgdmFyIHdpbkFuc2lFbmNvZGluZ0Z1bmN0aW9uID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBmb250ID0gb3B0aW9ucy5mb250O1xuICAgIHZhciBvdXQgPSBvcHRpb25zLm91dDtcbiAgICB2YXIgbmV3T2JqZWN0ID0gb3B0aW9ucy5uZXdPYmplY3Q7XG4gICAgdmFyIHB1dFN0cmVhbSA9IG9wdGlvbnMucHV0U3RyZWFtO1xuXG4gICAgaWYgKFxuICAgICAgZm9udC5tZXRhZGF0YSBpbnN0YW5jZW9mIGpzUERGLkFQSS5UVEZGb250ICYmXG4gICAgICBmb250LmVuY29kaW5nID09PSBcIldpbkFuc2lFbmNvZGluZ1wiXG4gICAgKSB7XG4gICAgICAvL1RhZyB3aXRoIFdpbkFuc2kgZW5jb2RpbmdcbiAgICAgIHZhciBkYXRhID0gZm9udC5tZXRhZGF0YS5yYXdEYXRhO1xuICAgICAgdmFyIHBkZk91dHB1dCA9IGRhdGE7XG4gICAgICB2YXIgcGRmT3V0cHV0MiA9IFwiXCI7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBkZk91dHB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgICBwZGZPdXRwdXQyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGRmT3V0cHV0W2ldKTtcbiAgICAgIH1cbiAgICAgIHZhciBmb250VGFibGUgPSBuZXdPYmplY3QoKTtcbiAgICAgIHB1dFN0cmVhbSh7IGRhdGE6IHBkZk91dHB1dDIsIGFkZExlbmd0aDE6IHRydWUsIG9iamVjdElkOiBmb250VGFibGUgfSk7XG4gICAgICBvdXQoXCJlbmRvYmpcIik7XG5cbiAgICAgIHZhciBjbWFwID0gbmV3T2JqZWN0KCk7XG4gICAgICB2YXIgY21hcERhdGEgPSB0b1VuaWNvZGVDbWFwKGZvbnQubWV0YWRhdGEudG9Vbmljb2RlKTtcbiAgICAgIHB1dFN0cmVhbSh7IGRhdGE6IGNtYXBEYXRhLCBhZGRMZW5ndGgxOiB0cnVlLCBvYmplY3RJZDogY21hcCB9KTtcbiAgICAgIG91dChcImVuZG9ialwiKTtcblxuICAgICAgdmFyIGZvbnREZXNjcmlwdG9yID0gbmV3T2JqZWN0KCk7XG4gICAgICBvdXQoXCI8PFwiKTtcbiAgICAgIG91dChcIi9EZXNjZW50IFwiICsgZm9udC5tZXRhZGF0YS5kZWNlbmRlcik7XG4gICAgICBvdXQoXCIvQ2FwSGVpZ2h0IFwiICsgZm9udC5tZXRhZGF0YS5jYXBIZWlnaHQpO1xuICAgICAgb3V0KFwiL1N0ZW1WIFwiICsgZm9udC5tZXRhZGF0YS5zdGVtVik7XG4gICAgICBvdXQoXCIvVHlwZSAvRm9udERlc2NyaXB0b3JcIik7XG4gICAgICBvdXQoXCIvRm9udEZpbGUyIFwiICsgZm9udFRhYmxlICsgXCIgMCBSXCIpO1xuICAgICAgb3V0KFwiL0ZsYWdzIDk2XCIpO1xuICAgICAgb3V0KFwiL0ZvbnRCQm94IFwiICsganNQREYuQVBJLlBERk9iamVjdC5jb252ZXJ0KGZvbnQubWV0YWRhdGEuYmJveCkpO1xuICAgICAgb3V0KFwiL0ZvbnROYW1lIC9cIiArIHRvUERGTmFtZShmb250LmZvbnROYW1lKSk7XG4gICAgICBvdXQoXCIvSXRhbGljQW5nbGUgXCIgKyBmb250Lm1ldGFkYXRhLml0YWxpY0FuZ2xlKTtcbiAgICAgIG91dChcIi9Bc2NlbnQgXCIgKyBmb250Lm1ldGFkYXRhLmFzY2VuZGVyKTtcbiAgICAgIG91dChcIj4+XCIpO1xuICAgICAgb3V0KFwiZW5kb2JqXCIpO1xuICAgICAgZm9udC5vYmplY3ROdW1iZXIgPSBuZXdPYmplY3QoKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZm9udC5tZXRhZGF0YS5obXR4LndpZHRocy5sZW5ndGg7IGorKykge1xuICAgICAgICBmb250Lm1ldGFkYXRhLmhtdHgud2lkdGhzW2pdID0gcGFyc2VJbnQoXG4gICAgICAgICAgZm9udC5tZXRhZGF0YS5obXR4LndpZHRoc1tqXSAqICgxMDAwIC8gZm9udC5tZXRhZGF0YS5oZWFkLnVuaXRzUGVyRW0pXG4gICAgICAgICk7IC8vQ2hhbmdlIHRoZSB3aWR0aCBvZiBFbSB1bml0cyB0byBQb2ludCB1bml0cy5cbiAgICAgIH1cbiAgICAgIG91dChcbiAgICAgICAgXCI8PC9TdWJ0eXBlL1RydWVUeXBlL1R5cGUvRm9udC9Ub1VuaWNvZGUgXCIgK1xuICAgICAgICAgIGNtYXAgK1xuICAgICAgICAgIFwiIDAgUi9CYXNlRm9udC9cIiArXG4gICAgICAgICAgdG9QREZOYW1lKGZvbnQuZm9udE5hbWUpICtcbiAgICAgICAgICBcIi9Gb250RGVzY3JpcHRvciBcIiArXG4gICAgICAgICAgZm9udERlc2NyaXB0b3IgK1xuICAgICAgICAgIFwiIDAgUlwiICtcbiAgICAgICAgICBcIi9FbmNvZGluZy9cIiArXG4gICAgICAgICAgZm9udC5lbmNvZGluZyArXG4gICAgICAgICAgXCIgL0ZpcnN0Q2hhciAyOSAvTGFzdENoYXIgMjU1IC9XaWR0aHMgXCIgK1xuICAgICAgICAgIGpzUERGLkFQSS5QREZPYmplY3QuY29udmVydChmb250Lm1ldGFkYXRhLmhtdHgud2lkdGhzKSArXG4gICAgICAgICAgXCI+PlwiXG4gICAgICApO1xuICAgICAgb3V0KFwiZW5kb2JqXCIpO1xuICAgICAgZm9udC5pc0FscmVhZHlQdXR0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBqc1BERkFQSS5ldmVudHMucHVzaChbXG4gICAgXCJwdXRGb250XCIsXG4gICAgZnVuY3Rpb24oYXJncykge1xuICAgICAgd2luQW5zaUVuY29kaW5nRnVuY3Rpb24oYXJncyk7XG4gICAgfVxuICBdKTtcblxuICB2YXIgdXRmOFRleHRGdW5jdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICB2YXIgdGV4dCA9IGFyZ3MudGV4dCB8fCBcIlwiO1xuICAgIHZhciB4ID0gYXJncy54O1xuICAgIHZhciB5ID0gYXJncy55O1xuICAgIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zIHx8IHt9O1xuICAgIHZhciBtdXRleCA9IGFyZ3MubXV0ZXggfHwge307XG5cbiAgICB2YXIgcGRmRXNjYXBlID0gbXV0ZXgucGRmRXNjYXBlO1xuICAgIHZhciBhY3RpdmVGb250S2V5ID0gbXV0ZXguYWN0aXZlRm9udEtleTtcbiAgICB2YXIgZm9udHMgPSBtdXRleC5mb250cztcbiAgICB2YXIga2V5ID0gYWN0aXZlRm9udEtleTtcblxuICAgIHZhciBzdHIgPSBcIlwiLFxuICAgICAgcyA9IDAsXG4gICAgICBjbWFwQ29uZmlybTtcbiAgICB2YXIgc3RyVGV4dCA9IFwiXCI7XG4gICAgdmFyIGVuY29kaW5nID0gZm9udHNba2V5XS5lbmNvZGluZztcblxuICAgIGlmIChmb250c1trZXldLmVuY29kaW5nICE9PSBcIklkZW50aXR5LUhcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgeDogeCxcbiAgICAgICAgeTogeSxcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgbXV0ZXg6IG11dGV4XG4gICAgICB9O1xuICAgIH1cbiAgICBzdHJUZXh0ID0gdGV4dDtcblxuICAgIGtleSA9IGFjdGl2ZUZvbnRLZXk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGV4dCkpIHtcbiAgICAgIHN0clRleHQgPSB0ZXh0WzBdO1xuICAgIH1cbiAgICBmb3IgKHMgPSAwOyBzIDwgc3RyVGV4dC5sZW5ndGg7IHMgKz0gMSkge1xuICAgICAgaWYgKGZvbnRzW2tleV0ubWV0YWRhdGEuaGFzT3duUHJvcGVydHkoXCJjbWFwXCIpKSB7XG4gICAgICAgIGNtYXBDb25maXJtID1cbiAgICAgICAgICBmb250c1trZXldLm1ldGFkYXRhLmNtYXAudW5pY29kZS5jb2RlTWFwW3N0clRleHRbc10uY2hhckNvZGVBdCgwKV07XG4gICAgICAgIC8qXG4gICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXh0KSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgIC8vIGZvciAoaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGV4dFtzXSkgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtYXBDb25maXJtID0gZm9udHNba2V5XS5tZXRhZGF0YS5jbWFwLnVuaWNvZGUuY29kZU1hcFtzdHJUZXh0W3NdWzBdLmNoYXJDb2RlQXQoMCldOyAvL01ha2Ugc3VyZSB0aGUgY21hcCBoYXMgdGhlIGNvcnJlc3BvbmRpbmcgZ2x5cGggaWRcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy99XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY21hcENvbmZpcm0gPSBmb250c1trZXldLm1ldGFkYXRhLmNtYXAudW5pY29kZS5jb2RlTWFwW3N0clRleHRbc10uY2hhckNvZGVBdCgwKV07IC8vTWFrZSBzdXJlIHRoZSBjbWFwIGhhcyB0aGUgY29ycmVzcG9uZGluZyBnbHlwaCBpZFxuICAgICAgICAgICAgfSovXG4gICAgICB9XG4gICAgICBpZiAoIWNtYXBDb25maXJtKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzdHJUZXh0W3NdLmNoYXJDb2RlQXQoMCkgPCAyNTYgJiZcbiAgICAgICAgICBmb250c1trZXldLm1ldGFkYXRhLmhhc093blByb3BlcnR5KFwiVW5pY29kZVwiKVxuICAgICAgICApIHtcbiAgICAgICAgICBzdHIgKz0gc3RyVGV4dFtzXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgKz0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyICs9IHN0clRleHRbc107XG4gICAgICB9XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBcIlwiO1xuICAgIGlmIChwYXJzZUludChrZXkuc2xpY2UoMSkpIDwgMTQgfHwgZW5jb2RpbmcgPT09IFwiV2luQW5zaUVuY29kaW5nXCIpIHtcbiAgICAgIC8vRm9yIHRoZSBkZWZhdWx0IDEzIGZvbnRcbiAgICAgIHJlc3VsdCA9IHBkZkVzY2FwZShzdHIsIGtleSlcbiAgICAgICAgLnNwbGl0KFwiXCIpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24oY3YpIHtcbiAgICAgICAgICByZXR1cm4gY3YuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKFwiXCIpO1xuICAgIH0gZWxzZSBpZiAoZW5jb2RpbmcgPT09IFwiSWRlbnRpdHktSFwiKSB7XG4gICAgICByZXN1bHQgPSBwZGZFc2NhcGUxNihzdHIsIGZvbnRzW2tleV0pO1xuICAgIH1cbiAgICBtdXRleC5pc0hleCA9IHRydWU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogcmVzdWx0LFxuICAgICAgeDogeCxcbiAgICAgIHk6IHksXG4gICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgbXV0ZXg6IG11dGV4XG4gICAgfTtcbiAgfTtcblxuICB2YXIgdXRmOEVzY2FwZUZ1bmN0aW9uID0gZnVuY3Rpb24ocGFybXMpIHtcbiAgICB2YXIgdGV4dCA9IHBhcm1zLnRleHQgfHwgXCJcIixcbiAgICAgIHggPSBwYXJtcy54LFxuICAgICAgeSA9IHBhcm1zLnksXG4gICAgICBvcHRpb25zID0gcGFybXMub3B0aW9ucyxcbiAgICAgIG11dGV4ID0gcGFybXMubXV0ZXg7XG4gICAgdmFyIHRtcFRleHQgPSBbXTtcbiAgICB2YXIgYXJncyA9IHtcbiAgICAgIHRleHQ6IHRleHQsXG4gICAgICB4OiB4LFxuICAgICAgeTogeSxcbiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICBtdXRleDogbXV0ZXhcbiAgICB9O1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGV4dCkpIHtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRleHRbaV0pKSB7XG4gICAgICAgICAgaWYgKHRleHRbaV0ubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICB0bXBUZXh0LnB1c2goW1xuICAgICAgICAgICAgICB1dGY4VGV4dEZ1bmN0aW9uKE9iamVjdC5hc3NpZ24oe30sIGFyZ3MsIHsgdGV4dDogdGV4dFtpXVswXSB9KSlcbiAgICAgICAgICAgICAgICAudGV4dCxcbiAgICAgICAgICAgICAgdGV4dFtpXVsxXSxcbiAgICAgICAgICAgICAgdGV4dFtpXVsyXVxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRtcFRleHQucHVzaChcbiAgICAgICAgICAgICAgdXRmOFRleHRGdW5jdGlvbihPYmplY3QuYXNzaWduKHt9LCBhcmdzLCB7IHRleHQ6IHRleHRbaV0gfSkpLnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRtcFRleHQucHVzaChcbiAgICAgICAgICAgIHV0ZjhUZXh0RnVuY3Rpb24oT2JqZWN0LmFzc2lnbih7fSwgYXJncywgeyB0ZXh0OiB0ZXh0W2ldIH0pKS50ZXh0XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcGFybXMudGV4dCA9IHRtcFRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcm1zLnRleHQgPSB1dGY4VGV4dEZ1bmN0aW9uKFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCBhcmdzLCB7IHRleHQ6IHRleHQgfSlcbiAgICAgICkudGV4dDtcbiAgICB9XG4gIH07XG5cbiAganNQREZBUEkuZXZlbnRzLnB1c2goW1wicG9zdFByb2Nlc3NUZXh0XCIsIHV0ZjhFc2NhcGVGdW5jdGlvbl0pO1xufSkoanNQREYpO1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICoganNQREYgdmlydHVhbCBGaWxlU3lzdGVtIGZ1bmN0aW9uYWxpdHlcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiAqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuXG4vKipcbiAqIFVzZSB0aGUgdkZTIHRvIGhhbmRsZSBmaWxlc1xuICpcbiAqIEBuYW1lIHZGU1xuICogQG1vZHVsZVxuICovXG4oZnVuY3Rpb24oanNQREZBUEkpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsaXplVkZTID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmludGVybmFsLnZGUyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5pbnRlcm5hbC52RlMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBmaWxlIGV4aXN0cyBpbiB0aGUgdkZTXG4gICAqXG4gICAqIEBuYW1lIGV4aXN0c0ZpbGVJblZGU1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFBvc3NpYmxlIGZpbGVuYW1lIGluIHRoZSB2RlMuXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKiBAZXhhbXBsZVxuICAgKiBkb2MuZXhpc3RzRmlsZUluVkZTKFwic29tZUZpbGUudHh0XCIpO1xuICAgKi9cbiAganNQREZBUEkuZXhpc3RzRmlsZUluVkZTID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICBfaW5pdGlhbGl6ZVZGUy5jYWxsKHRoaXMpO1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5pbnRlcm5hbC52RlNbZmlsZW5hbWVdICE9PSBcInVuZGVmaW5lZFwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYSBmaWxlIHRvIHRoZSB2RlNcbiAgICpcbiAgICogQG5hbWUgYWRkRmlsZVRvVkZTXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWUgVGhlIG5hbWUgb2YgdGhlIGZpbGUgd2hpY2ggc2hvdWxkIGJlIGFkZGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZWNvbnRlbnQgVGhlIGNvbnRlbnQgb2YgdGhlIGZpbGUuXG4gICAqIEByZXR1cm5zIHtqc1BERn1cbiAgICogQGV4YW1wbGVcbiAgICogZG9jLmFkZEZpbGVUb1ZGUyhcInNvbWVGaWxlLnR4dFwiLCBcIkJBREZBQ0UxXCIpO1xuICAgKi9cbiAganNQREZBUEkuYWRkRmlsZVRvVkZTID0gZnVuY3Rpb24oZmlsZW5hbWUsIGZpbGVjb250ZW50KSB7XG4gICAgX2luaXRpYWxpemVWRlMuY2FsbCh0aGlzKTtcbiAgICB0aGlzLmludGVybmFsLnZGU1tmaWxlbmFtZV0gPSBmaWxlY29udGVudDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBmaWxlIGZyb20gdGhlIHZGU1xuICAgKlxuICAgKiBAbmFtZSBnZXRGaWxlRnJvbVZGU1xuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFRoZSBuYW1lIG9mIHRoZSBmaWxlIHdoaWNoIGdldHMgcmVxdWVzdGVkLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKiBAZXhhbXBsZVxuICAgKiBkb2MuZ2V0RmlsZUZyb21WRlMoXCJzb21lRmlsZS50eHRcIik7XG4gICAqL1xuICBqc1BERkFQSS5nZXRGaWxlRnJvbVZGUyA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gICAgX2luaXRpYWxpemVWRlMuY2FsbCh0aGlzKTtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5pbnRlcm5hbC52RlNbZmlsZW5hbWVdICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbC52RlNbZmlsZW5hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn0pKGpzUERGLkFQSSk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBVbmljb2RlIEJpZGkgRW5naW5lIGJhc2VkIG9uIHRoZSB3b3JrIG9mIEFsZXggU2hlbnNpcyAoQGFzdGhlbnNpcylcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuaW1wb3J0IHsganNQREYgfSBmcm9tIFwiLi4vanNwZGYuanNcIjtcblxuKGZ1bmN0aW9uKGpzUERGKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICAvKipcbiAgICogVGFibGUgb2YgVW5pY29kZSB0eXBlcy5cbiAgICpcbiAgICogR2VuZXJhdGVkIGJ5OlxuICAgKlxuICAgKiB2YXIgYmlkaSA9IHJlcXVpcmUoXCIuL2JpZGkvaW5kZXhcIik7XG4gICAqIHZhciBiaWRpX2FjY3VtdWxhdGUgPSBiaWRpLnNsaWNlKDAsIDI1NikuY29uY2F0KGJpZGkuc2xpY2UoMHgwNTAwLCAweDA1MDAgKyAyNTYgKiAzKSkuXG4gICAqIGNvbmNhdChiaWRpLnNsaWNlKDB4MjAwMCwgMHgyMDAwICsgMjU2KSkuY29uY2F0KGJpZGkuc2xpY2UoMHhGQjAwLCAweEZCMDAgKyAyNTYpKS5cbiAgICogY29uY2F0KGJpZGkuc2xpY2UoMHhGRTAwLCAweEZFMDAgKyAyICogMjU2KSk7XG4gICAqXG4gICAqIGZvciggdmFyIGkgPSAwOyBpIDwgYmlkaV9hY2N1bXVsYXRlLmxlbmd0aDsgaSsrKSB7XG4gICAqIFx0aWYoYmlkaV9hY2N1bXVsYXRlW2ldID09PSB1bmRlZmluZWQgfHwgYmlkaV9hY2N1bXVsYXRlW2ldID09PSAnT04nKVxuICAgKiBcdFx0YmlkaV9hY2N1bXVsYXRlW2ldID0gJ04nOyAvL21hcmsgYXMgbmV1dHJhbCB0byBjb25zZXJ2ZSBzcGFjZSBhbmQgc3Vic3RpdHV0ZSB1bmRlZmluZWRcbiAgICogfVxuICAgKiB2YXIgYmlkaUFjY3VtdWxhdGVTdHIgPSAncmV0dXJuIFsgXCInICsgYmlkaV9hY2N1bXVsYXRlLnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAnXCIsIFwiJykgKyAnXCIgXTsnO1xuICAgKiByZXF1aXJlKFwiZnNcIikud3JpdGVGaWxlKCd1bmljb2RlLXR5cGVzLmpzJywgYmlkaUFjY3VtdWxhdGVTdHIpO1xuICAgKlxuICAgKiBCYXNlZCBvbjpcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL21hdGhpYXNieW5lbnMvdW5pY29kZS04LjAuMFxuICAgKi9cbiAgdmFyIGJpZGlVbmljb2RlVHlwZXMgPSBbXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJTXCIsXG4gICAgXCJCXCIsXG4gICAgXCJTXCIsXG4gICAgXCJXU1wiLFxuICAgIFwiQlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCXCIsXG4gICAgXCJCXCIsXG4gICAgXCJCXCIsXG4gICAgXCJTXCIsXG4gICAgXCJXU1wiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiRVNcIixcbiAgICBcIkNTXCIsXG4gICAgXCJFU1wiLFxuICAgIFwiQ1NcIixcbiAgICBcIkNTXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiQ1NcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJcIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQ1NcIixcbiAgICBcIk5cIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIk5cIixcbiAgICBcIkxcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiUlwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJSXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiUlwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIlJcIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiQU5cIixcbiAgICBcIkFOXCIsXG4gICAgXCJBTlwiLFxuICAgIFwiQU5cIixcbiAgICBcIkFOXCIsXG4gICAgXCJBTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiQUxcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkNTXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiTlwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiQU5cIixcbiAgICBcIkFOXCIsXG4gICAgXCJBTlwiLFxuICAgIFwiQU5cIixcbiAgICBcIkFOXCIsXG4gICAgXCJBTlwiLFxuICAgIFwiQU5cIixcbiAgICBcIkFOXCIsXG4gICAgXCJBTlwiLFxuICAgIFwiQU5cIixcbiAgICBcIkVUXCIsXG4gICAgXCJBTlwiLFxuICAgIFwiQU5cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIk5TTVwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIkFOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiTlwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJOU01cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIkFMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJSXCIsXG4gICAgXCJSXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJSXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJXU1wiLFxuICAgIFwiV1NcIixcbiAgICBcIldTXCIsXG4gICAgXCJXU1wiLFxuICAgIFwiV1NcIixcbiAgICBcIldTXCIsXG4gICAgXCJXU1wiLFxuICAgIFwiV1NcIixcbiAgICBcIldTXCIsXG4gICAgXCJXU1wiLFxuICAgIFwiV1NcIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkxcIixcbiAgICBcIlJcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIldTXCIsXG4gICAgXCJCXCIsXG4gICAgXCJMUkVcIixcbiAgICBcIlJMRVwiLFxuICAgIFwiUERGXCIsXG4gICAgXCJMUk9cIixcbiAgICBcIlJMT1wiLFxuICAgIFwiQ1NcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiQ1NcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIldTXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIk5cIixcbiAgICBcIkxSSVwiLFxuICAgIFwiUkxJXCIsXG4gICAgXCJGU0lcIixcbiAgICBcIlBESVwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIkJOXCIsXG4gICAgXCJCTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkxcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVTXCIsXG4gICAgXCJFU1wiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTFwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVTXCIsXG4gICAgXCJFU1wiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIkxcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIlJcIixcbiAgICBcIk5TTVwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiUlwiLFxuICAgIFwiRVNcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIk5cIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIk5cIixcbiAgICBcIlJcIixcbiAgICBcIk5cIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIk5cIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIk5cIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIlJcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOU01cIixcbiAgICBcIk5TTVwiLFxuICAgIFwiTlNNXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJDU1wiLFxuICAgIFwiTlwiLFxuICAgIFwiQ1NcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkNTXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiRVNcIixcbiAgICBcIkVTXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiTlwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiQUxcIixcbiAgICBcIkFMXCIsXG4gICAgXCJBTFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiQk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkVTXCIsXG4gICAgXCJDU1wiLFxuICAgIFwiRVNcIixcbiAgICBcIkNTXCIsXG4gICAgXCJDU1wiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkVOXCIsXG4gICAgXCJFTlwiLFxuICAgIFwiRU5cIixcbiAgICBcIkNTXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJMXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJOXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiRVRcIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIk5cIixcbiAgICBcIkVUXCIsXG4gICAgXCJFVFwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiLFxuICAgIFwiTlwiXG4gIF07XG5cbiAgLyoqXG4gICAqIFVuaWNvZGUgQmlkaSBhbGdvcml0aG0gY29tcGxpYW50IEJpZGkgZW5naW5lLlxuICAgKiBGb3IgcmVmZXJlbmNlIHNlZSBodHRwOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb25zdHJ1Y3RvciAoIG9wdGlvbnMgKVxuICAgKlxuICAgKiBJbml0aWFsaXplcyBCaWRpIGVuZ2luZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gU2VlICdzZXRPcHRpb25zJyBiZWxvdyBmb3IgZGV0YWlsZWQgZGVzY3JpcHRpb24uXG4gICAqIG9wdGlvbnMgYXJlIGNhc2hlZCBiZXR3ZWVuIGludm9jYXRpb24gb2YgJ2RvQmlkaVJlb3JkZXInIG1ldGhvZFxuICAgKlxuICAgKiBzYW1wbGUgdXNhZ2UgcGF0dGVybiBvZiBCaWRpRW5naW5lOlxuICAgKiB2YXIgb3B0ID0ge1xuICAgKiBcdGlzSW5wdXRWaXN1YWw6IHRydWUsXG4gICAqIFx0aXNJbnB1dFJ0bDogZmFsc2UsXG4gICAqIFx0aXNPdXRwdXRWaXN1YWw6IGZhbHNlLFxuICAgKiBcdGlzT3V0cHV0UnRsOiBmYWxzZSxcbiAgICogXHRpc1N5bW1ldHJpY1N3YXBwaW5nOiB0cnVlXG4gICAqIH1cbiAgICogdmFyIHNvdXJjZVRvVGFyZ2V0ID0gW10sIGxldmVscyA9IFtdO1xuICAgKiB2YXIgYmlkaUVuZyA9IEdsb2JhbGl6ZS5iaWRpRW5naW5lKG9wdCk7XG4gICAqIHZhciBzcmMgPSBcInRleHQgc3RyaW5nIHRvIGJlIHJlb3JkZXJlZFwiO1xuICAgKiB2YXIgcmV0ID0gYmlkaUVuZy5kb0JpZGlSZW9yZGVyKHNyYywgc291cmNlVG9UYXJnZXQsIGxldmVscyk7XG4gICAqL1xuXG4gIGpzUERGLl9fYmlkaUVuZ2luZV9fID0ganNQREYucHJvdG90eXBlLl9fYmlkaUVuZ2luZV9fID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBfVU5JQ09ERV9UWVBFUyA9IF9iaWRpVW5pY29kZVR5cGVzO1xuXG4gICAgdmFyIF9TVEFURV9UQUJMRV9MVFIgPSBbXG4gICAgICBbMCwgMywgMCwgMSwgMCwgMCwgMF0sXG4gICAgICBbMCwgMywgMCwgMSwgMiwgMiwgMF0sXG4gICAgICBbMCwgMywgMCwgMHgxMSwgMiwgMCwgMV0sXG4gICAgICBbMCwgMywgNSwgNSwgNCwgMSwgMF0sXG4gICAgICBbMCwgMywgMHgxNSwgMHgxNSwgNCwgMCwgMV0sXG4gICAgICBbMCwgMywgNSwgNSwgNCwgMiwgMF1cbiAgICBdO1xuXG4gICAgdmFyIF9TVEFURV9UQUJMRV9SVEwgPSBbXG4gICAgICBbMiwgMCwgMSwgMSwgMCwgMSwgMF0sXG4gICAgICBbMiwgMCwgMSwgMSwgMCwgMiwgMF0sXG4gICAgICBbMiwgMCwgMiwgMSwgMywgMiwgMF0sXG4gICAgICBbMiwgMCwgMiwgMHgyMSwgMywgMSwgMV1cbiAgICBdO1xuXG4gICAgdmFyIF9UWVBFX05BTUVTX01BUCA9IHsgTDogMCwgUjogMSwgRU46IDIsIEFOOiAzLCBOOiA0LCBCOiA1LCBTOiA2IH07XG5cbiAgICB2YXIgX1VOSUNPREVfUkFOR0VTX01BUCA9IHtcbiAgICAgIDA6IDAsXG4gICAgICA1OiAxLFxuICAgICAgNjogMixcbiAgICAgIDc6IDMsXG4gICAgICAweDIwOiA0LFxuICAgICAgMHhmYjogNSxcbiAgICAgIDB4ZmU6IDYsXG4gICAgICAweGZmOiA3XG4gICAgfTtcblxuICAgIHZhciBfU1dBUF9UQUJMRSA9IFtcbiAgICAgIFwiXFx1MDAyOFwiLFxuICAgICAgXCJcXHUwMDI5XCIsXG4gICAgICBcIlxcdTAwMjhcIixcbiAgICAgIFwiXFx1MDAzQ1wiLFxuICAgICAgXCJcXHUwMDNFXCIsXG4gICAgICBcIlxcdTAwM0NcIixcbiAgICAgIFwiXFx1MDA1QlwiLFxuICAgICAgXCJcXHUwMDVEXCIsXG4gICAgICBcIlxcdTAwNUJcIixcbiAgICAgIFwiXFx1MDA3QlwiLFxuICAgICAgXCJcXHUwMDdEXCIsXG4gICAgICBcIlxcdTAwN0JcIixcbiAgICAgIFwiXFx1MDBBQlwiLFxuICAgICAgXCJcXHUwMEJCXCIsXG4gICAgICBcIlxcdTAwQUJcIixcbiAgICAgIFwiXFx1MjAzOVwiLFxuICAgICAgXCJcXHUyMDNBXCIsXG4gICAgICBcIlxcdTIwMzlcIixcbiAgICAgIFwiXFx1MjA0NVwiLFxuICAgICAgXCJcXHUyMDQ2XCIsXG4gICAgICBcIlxcdTIwNDVcIixcbiAgICAgIFwiXFx1MjA3RFwiLFxuICAgICAgXCJcXHUyMDdFXCIsXG4gICAgICBcIlxcdTIwN0RcIixcbiAgICAgIFwiXFx1MjA4RFwiLFxuICAgICAgXCJcXHUyMDhFXCIsXG4gICAgICBcIlxcdTIwOERcIixcbiAgICAgIFwiXFx1MjI2NFwiLFxuICAgICAgXCJcXHUyMjY1XCIsXG4gICAgICBcIlxcdTIyNjRcIixcbiAgICAgIFwiXFx1MjMyOVwiLFxuICAgICAgXCJcXHUyMzJBXCIsXG4gICAgICBcIlxcdTIzMjlcIixcbiAgICAgIFwiXFx1RkU1OVwiLFxuICAgICAgXCJcXHVGRTVBXCIsXG4gICAgICBcIlxcdUZFNTlcIixcbiAgICAgIFwiXFx1RkU1QlwiLFxuICAgICAgXCJcXHVGRTVDXCIsXG4gICAgICBcIlxcdUZFNUJcIixcbiAgICAgIFwiXFx1RkU1RFwiLFxuICAgICAgXCJcXHVGRTVFXCIsXG4gICAgICBcIlxcdUZFNURcIixcbiAgICAgIFwiXFx1RkU2NFwiLFxuICAgICAgXCJcXHVGRTY1XCIsXG4gICAgICBcIlxcdUZFNjRcIlxuICAgIF07XG5cbiAgICB2YXIgX0xUUl9SQU5HRVNfUkVHX0VYUFIgPSBuZXcgUmVnRXhwKFxuICAgICAgL14oWzEtNHw5XXwxWzAtOV18MlswLTldfDNbMDE2OF18NFswNDU4OV18NVswMTJdfDdbNzhdfDE1OXwxNlswLTldfDE3WzAtMl18MjFbNTY5XXwyMlswMzQ4OV18MjUwKSQvXG4gICAgKTtcblxuICAgIHZhciBfbGFzdEFyYWJpYyA9IGZhbHNlLFxuICAgICAgX2hhc1ViYXRBbCxcbiAgICAgIF9oYXNVYmF0QixcbiAgICAgIF9oYXNVYmF0UyxcbiAgICAgIERJUl9MVFIgPSAwLFxuICAgICAgRElSX1JUTCA9IDEsXG4gICAgICBfaXNJblZpc3VhbCxcbiAgICAgIF9pc0luUnRsLFxuICAgICAgX2lzT3V0VmlzdWFsLFxuICAgICAgX2lzT3V0UnRsLFxuICAgICAgX2lzU3ltbWV0cmljU3dhcHBpbmcsXG4gICAgICBfZGlyID0gRElSX0xUUjtcblxuICAgIHRoaXMuX19iaWRpRW5naW5lX18gPSB7fTtcblxuICAgIHZhciBfaW5pdCA9IGZ1bmN0aW9uKHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwKSB7XG4gICAgICBpZiAoc291cmNlVG9UYXJnZXRNYXApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc291cmNlVG9UYXJnZXRNYXBbaV0gPSBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoX2lzSW5SdGwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBfaXNJblJ0bCA9IF9pc0NvbnRleHR1YWxEaXJSdGwodGV4dCk7XG4gICAgICB9XG4gICAgICBpZiAoX2lzT3V0UnRsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgX2lzT3V0UnRsID0gX2lzQ29udGV4dHVhbERpclJ0bCh0ZXh0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gZm9yIHJlZmVyZW5jZSBzZWUgMy4yIGluIGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcnRzL3RyOS9cbiAgICAvL1xuICAgIHZhciBfZ2V0Q2hhclR5cGUgPSBmdW5jdGlvbihjaCkge1xuICAgICAgdmFyIGNoYXJDb2RlID0gY2guY2hhckNvZGVBdCgpLFxuICAgICAgICByYW5nZSA9IGNoYXJDb2RlID4+IDgsXG4gICAgICAgIHJhbmdlSWR4ID0gX1VOSUNPREVfUkFOR0VTX01BUFtyYW5nZV07XG5cbiAgICAgIGlmIChyYW5nZUlkeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBfVU5JQ09ERV9UWVBFU1tyYW5nZUlkeCAqIDI1NiArIChjaGFyQ29kZSAmIDB4ZmYpXTtcbiAgICAgIH0gZWxzZSBpZiAocmFuZ2UgPT09IDB4ZmMgfHwgcmFuZ2UgPT09IDB4ZmQpIHtcbiAgICAgICAgcmV0dXJuIFwiQUxcIjtcbiAgICAgIH0gZWxzZSBpZiAoX0xUUl9SQU5HRVNfUkVHX0VYUFIudGVzdChyYW5nZSkpIHtcbiAgICAgICAgLy91bmxpa2VseSBjYXNlXG4gICAgICAgIHJldHVybiBcIkxcIjtcbiAgICAgIH0gZWxzZSBpZiAocmFuZ2UgPT09IDgpIHtcbiAgICAgICAgLy8gZXZlbiBsZXNzIGxpa2VseVxuICAgICAgICByZXR1cm4gXCJSXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJOXCI7IC8vdW5kZWZpbmVkIHR5cGUsIG1hcmsgYXMgbmV1dHJhbFxuICAgIH07XG5cbiAgICB2YXIgX2lzQ29udGV4dHVhbERpclJ0bCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBjaGFyVHlwZTsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2hhclR5cGUgPSBfZ2V0Q2hhclR5cGUodGV4dC5jaGFyQXQoaSkpO1xuICAgICAgICBpZiAoY2hhclR5cGUgPT09IFwiTFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXJUeXBlID09PSBcIlJcIikge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8vIGZvciByZWZlcmVuY2Ugc2VlIDMuMy40ICYgMy4zLjUgaW4gaHR0cDovL3VuaWNvZGUub3JnL3JlcG9ydHMvdHI5L1xuICAgIC8vXG4gICAgdmFyIF9yZXNvbHZlQ2hhclR5cGUgPSBmdW5jdGlvbihjaGFycywgdHlwZXMsIHJlc29sdmVkVHlwZXMsIGluZGV4KSB7XG4gICAgICB2YXIgY1R5cGUgPSB0eXBlc1tpbmRleF0sXG4gICAgICAgIHdUeXBlLFxuICAgICAgICBuVHlwZSxcbiAgICAgICAgaSxcbiAgICAgICAgbGVuO1xuICAgICAgc3dpdGNoIChjVHlwZSkge1xuICAgICAgICBjYXNlIFwiTFwiOlxuICAgICAgICBjYXNlIFwiUlwiOlxuICAgICAgICAgIF9sYXN0QXJhYmljID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJOXCI6XG4gICAgICAgIGNhc2UgXCJBTlwiOlxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJFTlwiOlxuICAgICAgICAgIGlmIChfbGFzdEFyYWJpYykge1xuICAgICAgICAgICAgY1R5cGUgPSBcIkFOXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJBTFwiOlxuICAgICAgICAgIF9sYXN0QXJhYmljID0gdHJ1ZTtcbiAgICAgICAgICBfaGFzVWJhdEFsID0gdHJ1ZTtcbiAgICAgICAgICBjVHlwZSA9IFwiUlwiO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJXU1wiOlxuICAgICAgICAgIGNUeXBlID0gXCJOXCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkNTXCI6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgaW5kZXggPCAxIHx8XG4gICAgICAgICAgICBpbmRleCArIDEgPj0gdHlwZXMubGVuZ3RoIHx8XG4gICAgICAgICAgICAoKHdUeXBlID0gcmVzb2x2ZWRUeXBlc1tpbmRleCAtIDFdKSAhPT0gXCJFTlwiICYmIHdUeXBlICE9PSBcIkFOXCIpIHx8XG4gICAgICAgICAgICAoKG5UeXBlID0gdHlwZXNbaW5kZXggKyAxXSkgIT09IFwiRU5cIiAmJiBuVHlwZSAhPT0gXCJBTlwiKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY1R5cGUgPSBcIk5cIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKF9sYXN0QXJhYmljKSB7XG4gICAgICAgICAgICBuVHlwZSA9IFwiQU5cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY1R5cGUgPSBuVHlwZSA9PT0gd1R5cGUgPyBuVHlwZSA6IFwiTlwiO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJFU1wiOlxuICAgICAgICAgIHdUeXBlID0gaW5kZXggPiAwID8gcmVzb2x2ZWRUeXBlc1tpbmRleCAtIDFdIDogXCJCXCI7XG4gICAgICAgICAgY1R5cGUgPVxuICAgICAgICAgICAgd1R5cGUgPT09IFwiRU5cIiAmJlxuICAgICAgICAgICAgaW5kZXggKyAxIDwgdHlwZXMubGVuZ3RoICYmXG4gICAgICAgICAgICB0eXBlc1tpbmRleCArIDFdID09PSBcIkVOXCJcbiAgICAgICAgICAgICAgPyBcIkVOXCJcbiAgICAgICAgICAgICAgOiBcIk5cIjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiRVRcIjpcbiAgICAgICAgICBpZiAoaW5kZXggPiAwICYmIHJlc29sdmVkVHlwZXNbaW5kZXggLSAxXSA9PT0gXCJFTlwiKSB7XG4gICAgICAgICAgICBjVHlwZSA9IFwiRU5cIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gZWxzZSBpZiAoX2xhc3RBcmFiaWMpIHtcbiAgICAgICAgICAgIGNUeXBlID0gXCJOXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaSA9IGluZGV4ICsgMTtcbiAgICAgICAgICBsZW4gPSB0eXBlcy5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKGkgPCBsZW4gJiYgdHlwZXNbaV0gPT09IFwiRVRcIikge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaSA8IGxlbiAmJiB0eXBlc1tpXSA9PT0gXCJFTlwiKSB7XG4gICAgICAgICAgICBjVHlwZSA9IFwiRU5cIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY1R5cGUgPSBcIk5cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIk5TTVwiOlxuICAgICAgICAgIGlmIChfaXNJblZpc3VhbCAmJiAhX2lzSW5SdGwpIHtcbiAgICAgICAgICAgIC8vVi0+TFxuICAgICAgICAgICAgbGVuID0gdHlwZXMubGVuZ3RoO1xuICAgICAgICAgICAgaSA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbGVuICYmIHR5cGVzW2ldID09PSBcIk5TTVwiKSB7XG4gICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpIDwgbGVuKSB7XG4gICAgICAgICAgICAgIHZhciBjID0gY2hhcnNbaW5kZXhdO1xuICAgICAgICAgICAgICB2YXIgcnRsQ2FuZGlkYXRlID0gKGMgPj0gMHgwNTkxICYmIGMgPD0gMHgwOGZmKSB8fCBjID09PSAweGZiMWU7XG4gICAgICAgICAgICAgIHdUeXBlID0gdHlwZXNbaV07XG4gICAgICAgICAgICAgIGlmIChydGxDYW5kaWRhdGUgJiYgKHdUeXBlID09PSBcIlJcIiB8fCB3VHlwZSA9PT0gXCJBTFwiKSkge1xuICAgICAgICAgICAgICAgIGNUeXBlID0gXCJSXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGluZGV4IDwgMSB8fCAod1R5cGUgPSB0eXBlc1tpbmRleCAtIDFdKSA9PT0gXCJCXCIpIHtcbiAgICAgICAgICAgIGNUeXBlID0gXCJOXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNUeXBlID0gcmVzb2x2ZWRUeXBlc1tpbmRleCAtIDFdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiQlwiOlxuICAgICAgICAgIF9sYXN0QXJhYmljID0gZmFsc2U7XG4gICAgICAgICAgX2hhc1ViYXRCID0gdHJ1ZTtcbiAgICAgICAgICBjVHlwZSA9IF9kaXI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICBfaGFzVWJhdFMgPSB0cnVlO1xuICAgICAgICAgIGNUeXBlID0gXCJOXCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkxSRVwiOlxuICAgICAgICBjYXNlIFwiUkxFXCI6XG4gICAgICAgIGNhc2UgXCJMUk9cIjpcbiAgICAgICAgY2FzZSBcIlJMT1wiOlxuICAgICAgICBjYXNlIFwiUERGXCI6XG4gICAgICAgICAgX2xhc3RBcmFiaWMgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkJOXCI6XG4gICAgICAgICAgY1R5cGUgPSBcIk5cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjVHlwZTtcbiAgICB9O1xuXG4gICAgdmFyIF9oYW5kbGVVYmF0UyA9IGZ1bmN0aW9uKHR5cGVzLCBsZXZlbHMsIGxlbmd0aCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodHlwZXNbaV0gPT09IFwiU1wiKSB7XG4gICAgICAgICAgbGV2ZWxzW2ldID0gX2RpcjtcbiAgICAgICAgICBmb3IgKHZhciBqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICBpZiAodHlwZXNbal0gPT09IFwiV1NcIikge1xuICAgICAgICAgICAgICBsZXZlbHNbal0gPSBfZGlyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfaW52ZXJ0U3RyaW5nID0gZnVuY3Rpb24odGV4dCwgc291cmNlVG9UYXJnZXRNYXAsIGxldmVscykge1xuICAgICAgdmFyIGNoYXJBcnJheSA9IHRleHQuc3BsaXQoXCJcIik7XG4gICAgICBpZiAobGV2ZWxzKSB7XG4gICAgICAgIF9jb21wdXRlTGV2ZWxzKGNoYXJBcnJheSwgbGV2ZWxzLCB7IGhpTGV2ZWw6IF9kaXIgfSk7XG4gICAgICB9XG4gICAgICBjaGFyQXJyYXkucmV2ZXJzZSgpO1xuICAgICAgc291cmNlVG9UYXJnZXRNYXAgJiYgc291cmNlVG9UYXJnZXRNYXAucmV2ZXJzZSgpO1xuICAgICAgcmV0dXJuIGNoYXJBcnJheS5qb2luKFwiXCIpO1xuICAgIH07XG5cbiAgICAvLyBGb3IgcmVmZXJlbmNlIHNlZSAzLjMgaW4gaHR0cDovL3VuaWNvZGUub3JnL3JlcG9ydHMvdHI5L1xuICAgIC8vXG4gICAgdmFyIF9jb21wdXRlTGV2ZWxzID0gZnVuY3Rpb24oY2hhcnMsIGxldmVscywgcGFyYW1zKSB7XG4gICAgICB2YXIgYWN0aW9uLFxuICAgICAgICBjb25kaXRpb24sXG4gICAgICAgIGksXG4gICAgICAgIGluZGV4LFxuICAgICAgICBuZXdMZXZlbCxcbiAgICAgICAgcHJldlN0YXRlLFxuICAgICAgICBjb25kUG9zID0gLTEsXG4gICAgICAgIGxlbiA9IGNoYXJzLmxlbmd0aCxcbiAgICAgICAgbmV3U3RhdGUgPSAwLFxuICAgICAgICByZXNvbHZlZFR5cGVzID0gW10sXG4gICAgICAgIHN0YXRlVGFibGUgPSBfZGlyID8gX1NUQVRFX1RBQkxFX1JUTCA6IF9TVEFURV9UQUJMRV9MVFIsXG4gICAgICAgIHR5cGVzID0gW107XG5cbiAgICAgIF9sYXN0QXJhYmljID0gZmFsc2U7XG4gICAgICBfaGFzVWJhdEFsID0gZmFsc2U7XG4gICAgICBfaGFzVWJhdEIgPSBmYWxzZTtcbiAgICAgIF9oYXNVYmF0UyA9IGZhbHNlO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHR5cGVzW2ldID0gX2dldENoYXJUeXBlKGNoYXJzW2ldKTtcbiAgICAgIH1cbiAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGxlbjsgaW5kZXgrKykge1xuICAgICAgICBwcmV2U3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgICAgcmVzb2x2ZWRUeXBlc1tpbmRleF0gPSBfcmVzb2x2ZUNoYXJUeXBlKFxuICAgICAgICAgIGNoYXJzLFxuICAgICAgICAgIHR5cGVzLFxuICAgICAgICAgIHJlc29sdmVkVHlwZXMsXG4gICAgICAgICAgaW5kZXhcbiAgICAgICAgKTtcbiAgICAgICAgbmV3U3RhdGUgPSBzdGF0ZVRhYmxlW3ByZXZTdGF0ZV1bX1RZUEVfTkFNRVNfTUFQW3Jlc29sdmVkVHlwZXNbaW5kZXhdXV07XG4gICAgICAgIGFjdGlvbiA9IG5ld1N0YXRlICYgMHhmMDtcbiAgICAgICAgbmV3U3RhdGUgJj0gMHgwZjtcbiAgICAgICAgbGV2ZWxzW2luZGV4XSA9IG5ld0xldmVsID0gc3RhdGVUYWJsZVtuZXdTdGF0ZV1bNV07XG4gICAgICAgIGlmIChhY3Rpb24gPiAwKSB7XG4gICAgICAgICAgaWYgKGFjdGlvbiA9PT0gMHgxMCkge1xuICAgICAgICAgICAgZm9yIChpID0gY29uZFBvczsgaSA8IGluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgbGV2ZWxzW2ldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmRQb3MgPSAtMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uZFBvcyA9IC0xO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25kaXRpb24gPSBzdGF0ZVRhYmxlW25ld1N0YXRlXVs2XTtcbiAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgIGlmIChjb25kUG9zID09PSAtMSkge1xuICAgICAgICAgICAgY29uZFBvcyA9IGluZGV4O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY29uZFBvcyA+IC0xKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSBjb25kUG9zOyBpIDwgaW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICBsZXZlbHNbaV0gPSBuZXdMZXZlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmRQb3MgPSAtMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVzW2luZGV4XSA9PT0gXCJCXCIpIHtcbiAgICAgICAgICBsZXZlbHNbaW5kZXhdID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwYXJhbXMuaGlMZXZlbCB8PSBuZXdMZXZlbDtcbiAgICAgIH1cbiAgICAgIGlmIChfaGFzVWJhdFMpIHtcbiAgICAgICAgX2hhbmRsZVViYXRTKHR5cGVzLCBsZXZlbHMsIGxlbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIGZvciByZWZlcmVuY2Ugc2VlIDMuNCBpbiBodHRwOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvXG4gICAgLy9cbiAgICB2YXIgX2ludmVydEJ5TGV2ZWwgPSBmdW5jdGlvbihcbiAgICAgIGxldmVsLFxuICAgICAgY2hhckFycmF5LFxuICAgICAgc291cmNlVG9UYXJnZXRNYXAsXG4gICAgICBsZXZlbHMsXG4gICAgICBwYXJhbXNcbiAgICApIHtcbiAgICAgIGlmIChwYXJhbXMuaGlMZXZlbCA8IGxldmVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChsZXZlbCA9PT0gMSAmJiBfZGlyID09PSBESVJfUlRMICYmICFfaGFzVWJhdEIpIHtcbiAgICAgICAgY2hhckFycmF5LnJldmVyc2UoKTtcbiAgICAgICAgc291cmNlVG9UYXJnZXRNYXAgJiYgc291cmNlVG9UYXJnZXRNYXAucmV2ZXJzZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgY2gsXG4gICAgICAgIGhpZ2gsXG4gICAgICAgIGVuZCxcbiAgICAgICAgbG93LFxuICAgICAgICBsZW4gPSBjaGFyQXJyYXkubGVuZ3RoLFxuICAgICAgICBzdGFydCA9IDA7XG5cbiAgICAgIHdoaWxlIChzdGFydCA8IGxlbikge1xuICAgICAgICBpZiAobGV2ZWxzW3N0YXJ0XSA+PSBsZXZlbCkge1xuICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgMTtcbiAgICAgICAgICB3aGlsZSAoZW5kIDwgbGVuICYmIGxldmVsc1tlbmRdID49IGxldmVsKSB7XG4gICAgICAgICAgICBlbmQrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsb3cgPSBzdGFydCwgaGlnaCA9IGVuZCAtIDE7IGxvdyA8IGhpZ2g7IGxvdysrLCBoaWdoLS0pIHtcbiAgICAgICAgICAgIGNoID0gY2hhckFycmF5W2xvd107XG4gICAgICAgICAgICBjaGFyQXJyYXlbbG93XSA9IGNoYXJBcnJheVtoaWdoXTtcbiAgICAgICAgICAgIGNoYXJBcnJheVtoaWdoXSA9IGNoO1xuICAgICAgICAgICAgaWYgKHNvdXJjZVRvVGFyZ2V0TWFwKSB7XG4gICAgICAgICAgICAgIGNoID0gc291cmNlVG9UYXJnZXRNYXBbbG93XTtcbiAgICAgICAgICAgICAgc291cmNlVG9UYXJnZXRNYXBbbG93XSA9IHNvdXJjZVRvVGFyZ2V0TWFwW2hpZ2hdO1xuICAgICAgICAgICAgICBzb3VyY2VUb1RhcmdldE1hcFtoaWdoXSA9IGNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdGFydCA9IGVuZDtcbiAgICAgICAgfVxuICAgICAgICBzdGFydCsrO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBmb3IgcmVmZXJlbmNlIHNlZSA3ICYgQkQxNiBpbiBodHRwOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvXG4gICAgLy9cbiAgICB2YXIgX3N5bW1ldHJpY1N3YXAgPSBmdW5jdGlvbihjaGFyQXJyYXksIGxldmVscywgcGFyYW1zKSB7XG4gICAgICBpZiAocGFyYW1zLmhpTGV2ZWwgIT09IDAgJiYgX2lzU3ltbWV0cmljU3dhcHBpbmcpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGluZGV4OyBpIDwgY2hhckFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGxldmVsc1tpXSA9PT0gMSkge1xuICAgICAgICAgICAgaW5kZXggPSBfU1dBUF9UQUJMRS5pbmRleE9mKGNoYXJBcnJheVtpXSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICBjaGFyQXJyYXlbaV0gPSBfU1dBUF9UQUJMRVtpbmRleCArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgX3Jlb3JkZXIgPSBmdW5jdGlvbih0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCwgbGV2ZWxzKSB7XG4gICAgICB2YXIgY2hhckFycmF5ID0gdGV4dC5zcGxpdChcIlwiKSxcbiAgICAgICAgcGFyYW1zID0geyBoaUxldmVsOiBfZGlyIH07XG5cbiAgICAgIGlmICghbGV2ZWxzKSB7XG4gICAgICAgIGxldmVscyA9IFtdO1xuICAgICAgfVxuICAgICAgX2NvbXB1dGVMZXZlbHMoY2hhckFycmF5LCBsZXZlbHMsIHBhcmFtcyk7XG4gICAgICBfc3ltbWV0cmljU3dhcChjaGFyQXJyYXksIGxldmVscywgcGFyYW1zKTtcbiAgICAgIF9pbnZlcnRCeUxldmVsKERJUl9SVEwgKyAxLCBjaGFyQXJyYXksIHNvdXJjZVRvVGFyZ2V0TWFwLCBsZXZlbHMsIHBhcmFtcyk7XG4gICAgICBfaW52ZXJ0QnlMZXZlbChESVJfUlRMLCBjaGFyQXJyYXksIHNvdXJjZVRvVGFyZ2V0TWFwLCBsZXZlbHMsIHBhcmFtcyk7XG4gICAgICByZXR1cm4gY2hhckFycmF5LmpvaW4oXCJcIik7XG4gICAgfTtcblxuICAgIC8vIGRvQmlkaVJlb3JkZXIoIHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwLCBsZXZlbHMgKVxuICAgIC8vIFBlcmZvcm1zIEJpZGkgcmVvcmRlcmluZyBieSBpbXBsZW1lbnRpbmcgVW5pY29kZSBCaWRpIGFsZ29yaXRobS5cbiAgICAvLyBSZXR1cm5zIHJlb3JkZXJlZCBzdHJpbmdcbiAgICAvLyBAdGV4dCBbU3RyaW5nXTpcbiAgICAvLyAtIGlucHV0IHN0cmluZyB0byBiZSByZW9yZGVyZWQsIHRoaXMgaXMgaW5wdXQgcGFyYW1ldGVyXG4gICAgLy8gJHNvdXJjZVRvVGFyZ2V0TWFwIFtBcnJheV0gKG9wdGlvbmFsKVxuICAgIC8vIC0gcmVzdWx0YW50IG1hcHBpbmcgYmV0d2VlbiBpbnB1dCBhbmQgb3V0cHV0IHN0cmluZ3MsIHRoaXMgaXMgb3V0cHV0IHBhcmFtZXRlclxuICAgIC8vICRsZXZlbHMgW0FycmF5XSAob3B0aW9uYWwpXG4gICAgLy8gLSBhcnJheSBvZiBjYWxjdWxhdGVkIEJpZGkgbGV2ZWxzLCAsIHRoaXMgaXMgb3V0cHV0IHBhcmFtZXRlclxuICAgIHRoaXMuX19iaWRpRW5naW5lX18uZG9CaWRpUmVvcmRlciA9IGZ1bmN0aW9uKFxuICAgICAgdGV4dCxcbiAgICAgIHNvdXJjZVRvVGFyZ2V0TWFwLFxuICAgICAgbGV2ZWxzXG4gICAgKSB7XG4gICAgICBfaW5pdCh0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCk7XG4gICAgICBpZiAoIV9pc0luVmlzdWFsICYmIF9pc091dFZpc3VhbCAmJiAhX2lzT3V0UnRsKSB7XG4gICAgICAgIC8vIExMVFItPlZMVFIsIExSVEwtPlZMVFJcbiAgICAgICAgX2RpciA9IF9pc0luUnRsID8gRElSX1JUTCA6IERJUl9MVFI7XG4gICAgICAgIHRleHQgPSBfcmVvcmRlcih0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCwgbGV2ZWxzKTtcbiAgICAgIH0gZWxzZSBpZiAoX2lzSW5WaXN1YWwgJiYgX2lzT3V0VmlzdWFsICYmIF9pc0luUnRsIF4gX2lzT3V0UnRsKSB7XG4gICAgICAgIC8vIFZSVEwtPlZMVFIsIFZMVFItPlZSVExcbiAgICAgICAgX2RpciA9IF9pc0luUnRsID8gRElSX1JUTCA6IERJUl9MVFI7XG4gICAgICAgIHRleHQgPSBfaW52ZXJ0U3RyaW5nKHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwLCBsZXZlbHMpO1xuICAgICAgfSBlbHNlIGlmICghX2lzSW5WaXN1YWwgJiYgX2lzT3V0VmlzdWFsICYmIF9pc091dFJ0bCkge1xuICAgICAgICAvLyBMTFRSLT5WUlRMLCBMUlRMLT5WUlRMXG4gICAgICAgIF9kaXIgPSBfaXNJblJ0bCA/IERJUl9SVEwgOiBESVJfTFRSO1xuICAgICAgICB0ZXh0ID0gX3Jlb3JkZXIodGV4dCwgc291cmNlVG9UYXJnZXRNYXAsIGxldmVscyk7XG4gICAgICAgIHRleHQgPSBfaW52ZXJ0U3RyaW5nKHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwKTtcbiAgICAgIH0gZWxzZSBpZiAoX2lzSW5WaXN1YWwgJiYgIV9pc0luUnRsICYmICFfaXNPdXRWaXN1YWwgJiYgIV9pc091dFJ0bCkge1xuICAgICAgICAvLyBWTFRSLT5MTFRSXG4gICAgICAgIF9kaXIgPSBESVJfTFRSO1xuICAgICAgICB0ZXh0ID0gX3Jlb3JkZXIodGV4dCwgc291cmNlVG9UYXJnZXRNYXAsIGxldmVscyk7XG4gICAgICB9IGVsc2UgaWYgKF9pc0luVmlzdWFsICYmICFfaXNPdXRWaXN1YWwgJiYgX2lzSW5SdGwgXiBfaXNPdXRSdGwpIHtcbiAgICAgICAgLy8gVkxUUi0+TFJUTCwgVlJUTC0+TExUUlxuICAgICAgICB0ZXh0ID0gX2ludmVydFN0cmluZyh0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCk7XG4gICAgICAgIGlmIChfaXNJblJ0bCkge1xuICAgICAgICAgIC8vTExUUiAtPiBWTFRSXG4gICAgICAgICAgX2RpciA9IERJUl9MVFI7XG4gICAgICAgICAgdGV4dCA9IF9yZW9yZGVyKHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwLCBsZXZlbHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vTFJUTCAtPiBWUlRMXG4gICAgICAgICAgX2RpciA9IERJUl9SVEw7XG4gICAgICAgICAgdGV4dCA9IF9yZW9yZGVyKHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwLCBsZXZlbHMpO1xuICAgICAgICAgIHRleHQgPSBfaW52ZXJ0U3RyaW5nKHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChfaXNJblZpc3VhbCAmJiBfaXNJblJ0bCAmJiAhX2lzT3V0VmlzdWFsICYmIF9pc091dFJ0bCkge1xuICAgICAgICAvLyAgVlJUTC0+TFJUTFxuICAgICAgICBfZGlyID0gRElSX1JUTDtcbiAgICAgICAgdGV4dCA9IF9yZW9yZGVyKHRleHQsIHNvdXJjZVRvVGFyZ2V0TWFwLCBsZXZlbHMpO1xuICAgICAgICB0ZXh0ID0gX2ludmVydFN0cmluZyh0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCk7XG4gICAgICB9IGVsc2UgaWYgKCFfaXNJblZpc3VhbCAmJiAhX2lzT3V0VmlzdWFsICYmIF9pc0luUnRsIF4gX2lzT3V0UnRsKSB7XG4gICAgICAgIC8vIExSVEwtPkxMVFIsIExMVFItPkxSVExcbiAgICAgICAgdmFyIGlzU3ltbWV0cmljU3dhcHBpbmdPcmlnID0gX2lzU3ltbWV0cmljU3dhcHBpbmc7XG4gICAgICAgIGlmIChfaXNJblJ0bCkge1xuICAgICAgICAgIC8vTFJUTC0+TExUUlxuICAgICAgICAgIF9kaXIgPSBESVJfUlRMO1xuICAgICAgICAgIHRleHQgPSBfcmVvcmRlcih0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCwgbGV2ZWxzKTtcbiAgICAgICAgICBfZGlyID0gRElSX0xUUjtcbiAgICAgICAgICBfaXNTeW1tZXRyaWNTd2FwcGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRleHQgPSBfcmVvcmRlcih0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCwgbGV2ZWxzKTtcbiAgICAgICAgICBfaXNTeW1tZXRyaWNTd2FwcGluZyA9IGlzU3ltbWV0cmljU3dhcHBpbmdPcmlnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vTExUUi0+TFJUTFxuICAgICAgICAgIF9kaXIgPSBESVJfTFRSO1xuICAgICAgICAgIHRleHQgPSBfcmVvcmRlcih0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCwgbGV2ZWxzKTtcbiAgICAgICAgICB0ZXh0ID0gX2ludmVydFN0cmluZyh0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCk7XG4gICAgICAgICAgX2RpciA9IERJUl9SVEw7XG4gICAgICAgICAgX2lzU3ltbWV0cmljU3dhcHBpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0ZXh0ID0gX3Jlb3JkZXIodGV4dCwgc291cmNlVG9UYXJnZXRNYXAsIGxldmVscyk7XG4gICAgICAgICAgX2lzU3ltbWV0cmljU3dhcHBpbmcgPSBpc1N5bW1ldHJpY1N3YXBwaW5nT3JpZztcbiAgICAgICAgICB0ZXh0ID0gX2ludmVydFN0cmluZyh0ZXh0LCBzb3VyY2VUb1RhcmdldE1hcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSBzZXRPcHRpb25zKCBvcHRpb25zIClcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBTZXRzIG9wdGlvbnMgZm9yIEJpZGkgY29udmVyc2lvblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fTpcbiAgICAgKiAtIGlzSW5wdXRWaXN1YWwge2Jvb2xlYW59IChkZWZhdWx0cyB0byBmYWxzZSk6IGFsbG93ZWQgdmFsdWVzOiB0cnVlKFZpc3VhbCBtb2RlKSwgZmFsc2UoTG9naWNhbCBtb2RlKVxuICAgICAqIC0gaXNJbnB1dFJ0bCB7Ym9vbGVhbn06IGFsbG93ZWQgdmFsdWVzIHRydWUoUmlnaHQtdG8tbGVmdCBkaXJlY3Rpb24pLCBmYWxzZSAoTGVmdC10by1yaWdodCBkaXJlY3RpaW9uKSwgdW5kZWZpbmVkKENvbnRlY3R1YWwgZGlyZWN0aW9uLCBpLmUuZGlyZWN0aW9uIGRlZmluZWQgYnkgZmlyc3Qgc3Ryb25nIGNoYXJhY3RlciBvZiBpbnB1dCBzdHJpbmcpXG4gICAgICogLSBpc091dHB1dFZpc3VhbCB7Ym9vbGVhbn0gKGRlZmF1bHRzIHRvIGZhbHNlKTogYWxsb3dlZCB2YWx1ZXM6IHRydWUoVmlzdWFsIG1vZGUpLCBmYWxzZShMb2dpY2FsIG1vZGUpXG4gICAgICogLSBpc091dHB1dFJ0bCB7Ym9vbGVhbn06IGFsbG93ZWQgdmFsdWVzIHRydWUoUmlnaHQtdG8tbGVmdCBkaXJlY3Rpb24pLCBmYWxzZSAoTGVmdC10by1yaWdodCBkaXJlY3RpaW9uKSwgdW5kZWZpbmVkKENvbnRlY3R1YWwgZGlyZWN0aW9uLCBpLmUuZGlyZWN0aW9uIGRlZmluZWQgYnkgZmlyc3Qgc3Ryb25nIGNoYXJhY3Rlcm9mIGlucHV0IHN0cmluZylcbiAgICAgKiAtIGlzU3ltbWV0cmljU3dhcHBpbmcge2Jvb2xlYW59IChkZWZhdWx0cyB0byBmYWxzZSk6IGFsbG93ZWQgdmFsdWVzIHRydWUobmVlZHMgc3ltbWV0cmljIHN3YXBwaW5nKSwgZmFsc2UgKG5vIG5lZWQgaW4gc3ltbWV0cmljIHN3YXBwaW5nKSxcbiAgICAgKi9cbiAgICB0aGlzLl9fYmlkaUVuZ2luZV9fLnNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBfaXNJblZpc3VhbCA9IG9wdGlvbnMuaXNJbnB1dFZpc3VhbDtcbiAgICAgICAgX2lzT3V0VmlzdWFsID0gb3B0aW9ucy5pc091dHB1dFZpc3VhbDtcbiAgICAgICAgX2lzSW5SdGwgPSBvcHRpb25zLmlzSW5wdXRSdGw7XG4gICAgICAgIF9pc091dFJ0bCA9IG9wdGlvbnMuaXNPdXRwdXRSdGw7XG4gICAgICAgIF9pc1N5bW1ldHJpY1N3YXBwaW5nID0gb3B0aW9ucy5pc1N5bW1ldHJpY1N3YXBwaW5nO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLl9fYmlkaUVuZ2luZV9fLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMuX19iaWRpRW5naW5lX187XG4gIH07XG5cbiAgdmFyIF9iaWRpVW5pY29kZVR5cGVzID0gYmlkaVVuaWNvZGVUeXBlcztcblxuICB2YXIgYmlkaUVuZ2luZSA9IG5ldyBqc1BERi5fX2JpZGlFbmdpbmVfXyh7IGlzSW5wdXRWaXN1YWw6IHRydWUgfSk7XG5cbiAgdmFyIGJpZGlFbmdpbmVGdW5jdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICB2YXIgdGV4dCA9IGFyZ3MudGV4dDtcbiAgICB2YXIgeCA9IGFyZ3MueDtcbiAgICB2YXIgeSA9IGFyZ3MueTtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3Mub3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgbXV0ZXggPSBhcmdzLm11dGV4IHx8IHt9O1xuICAgIHZhciBsYW5nID0gb3B0aW9ucy5sYW5nO1xuICAgIHZhciB0bXBUZXh0ID0gW107XG5cbiAgICBvcHRpb25zLmlzSW5wdXRWaXN1YWwgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMuaXNJbnB1dFZpc3VhbCA9PT0gXCJib29sZWFuXCIgPyBvcHRpb25zLmlzSW5wdXRWaXN1YWwgOiB0cnVlO1xuICAgIGJpZGlFbmdpbmUuc2V0T3B0aW9ucyhvcHRpb25zKTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGV4dCkgPT09IFwiW29iamVjdCBBcnJheV1cIikge1xuICAgICAgdmFyIGkgPSAwO1xuICAgICAgdG1wVGV4dCA9IFtdO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXh0W2ldKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiKSB7XG4gICAgICAgICAgdG1wVGV4dC5wdXNoKFtcbiAgICAgICAgICAgIGJpZGlFbmdpbmUuZG9CaWRpUmVvcmRlcih0ZXh0W2ldWzBdKSxcbiAgICAgICAgICAgIHRleHRbaV1bMV0sXG4gICAgICAgICAgICB0ZXh0W2ldWzJdXG4gICAgICAgICAgXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG1wVGV4dC5wdXNoKFtiaWRpRW5naW5lLmRvQmlkaVJlb3JkZXIodGV4dFtpXSldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXJncy50ZXh0ID0gdG1wVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJncy50ZXh0ID0gYmlkaUVuZ2luZS5kb0JpZGlSZW9yZGVyKHRleHQpO1xuICAgIH1cbiAgICBiaWRpRW5naW5lLnNldE9wdGlvbnMoeyBpc0lucHV0VmlzdWFsOiB0cnVlIH0pO1xuICB9O1xuXG4gIGpzUERGLkFQSS5ldmVudHMucHVzaChbXCJwb3N0UHJvY2Vzc1RleHRcIiwgYmlkaUVuZ2luZUZ1bmN0aW9uXSk7XG59KShqc1BERik7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb250cm9sLXJlZ2V4ICovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBUaXRsZSA6IGN1c3RvbSBmb250ICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiBTdGFydCBEYXRhIDogMjAxNy4gMDEuIDIyLiAgICAgICAgICAgICAgICAgICAqXG4gKiBDb21tZW50IDogVEVYVCBBUEkgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBqc1BERiBleHRlbnNpb24gQVBJIERlc2lnbiAqXG4gKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgeyBqc1BERiB9IGZyb20gXCIuLi9qc3BkZi5qc1wiO1xuXG5qc1BERi5BUEkuVFRGRm9udCA9IChmdW5jdGlvbigpIHtcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLyogZnVuY3Rpb24gOiBvcGVuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIGNvbW1lbnQgOiBEZWNvZGUgdGhlIGVuY29kZWQgdHRmIGNvbnRlbnQgYW5kIGNyZWF0ZSBhIFRURkZvbnQgb2JqZWN0LiAqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBUVEZGb250Lm9wZW4gPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgcmV0dXJuIG5ldyBUVEZGb250KGZpbGUpO1xuICB9O1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvKiBmdW5jdGlvbiA6IFRURkZvbnQgZ2VybmVyYXRvciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiBjb21tZW50IDogRGVjb2RlIFRURiBjb250ZW50cyBhcmUgcGFyc2VkLCBEYXRhLCAgICAgICAgICAgICAqL1xuICAvKiBTdWJzZXQgb2JqZWN0IGlzIGNyZWF0ZWQsIGFuZCByZWdpc3RlclRURiBmdW5jdGlvbiBpcyBjYWxsZWQuKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgZnVuY3Rpb24gVFRGRm9udChyYXdEYXRhKSB7XG4gICAgdmFyIGRhdGE7XG4gICAgdGhpcy5yYXdEYXRhID0gcmF3RGF0YTtcbiAgICBkYXRhID0gdGhpcy5jb250ZW50cyA9IG5ldyBEYXRhKHJhd0RhdGEpO1xuICAgIHRoaXMuY29udGVudHMucG9zID0gNDtcbiAgICBpZiAoZGF0YS5yZWFkU3RyaW5nKDQpID09PSBcInR0Y2ZcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVFRDRiBub3Qgc3VwcG9ydGVkLlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5wb3MgPSAwO1xuICAgICAgdGhpcy5wYXJzZSgpO1xuICAgICAgdGhpcy5zdWJzZXQgPSBuZXcgU3Vic2V0KHRoaXMpO1xuICAgICAgdGhpcy5yZWdpc3RlclRURigpO1xuICAgIH1cbiAgfVxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8qIGZ1bmN0aW9uIDogcGFyc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogY29tbWVudCA6IFRURiBQYXJzZXMgdGhlIGZpbGUgY29udGVudHMgYnkgZWFjaCB0YWJsZS4qL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIFRURkZvbnQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5kaXJlY3RvcnkgPSBuZXcgRGlyZWN0b3J5KHRoaXMuY29udGVudHMpO1xuICAgIHRoaXMuaGVhZCA9IG5ldyBIZWFkVGFibGUodGhpcyk7XG4gICAgdGhpcy5uYW1lID0gbmV3IE5hbWVUYWJsZSh0aGlzKTtcbiAgICB0aGlzLmNtYXAgPSBuZXcgQ21hcFRhYmxlKHRoaXMpO1xuICAgIHRoaXMudG9Vbmljb2RlID0ge307XG4gICAgdGhpcy5oaGVhID0gbmV3IEhoZWFUYWJsZSh0aGlzKTtcbiAgICB0aGlzLm1heHAgPSBuZXcgTWF4cFRhYmxlKHRoaXMpO1xuICAgIHRoaXMuaG10eCA9IG5ldyBIbXR4VGFibGUodGhpcyk7XG4gICAgdGhpcy5wb3N0ID0gbmV3IFBvc3RUYWJsZSh0aGlzKTtcbiAgICB0aGlzLm9zMiA9IG5ldyBPUzJUYWJsZSh0aGlzKTtcbiAgICB0aGlzLmxvY2EgPSBuZXcgTG9jYVRhYmxlKHRoaXMpO1xuICAgIHRoaXMuZ2x5ZiA9IG5ldyBHbHlmVGFibGUodGhpcyk7XG4gICAgdGhpcy5hc2NlbmRlciA9XG4gICAgICAodGhpcy5vczIuZXhpc3RzICYmIHRoaXMub3MyLmFzY2VuZGVyKSB8fCB0aGlzLmhoZWEuYXNjZW5kZXI7XG4gICAgdGhpcy5kZWNlbmRlciA9XG4gICAgICAodGhpcy5vczIuZXhpc3RzICYmIHRoaXMub3MyLmRlY2VuZGVyKSB8fCB0aGlzLmhoZWEuZGVjZW5kZXI7XG4gICAgdGhpcy5saW5lR2FwID0gKHRoaXMub3MyLmV4aXN0cyAmJiB0aGlzLm9zMi5saW5lR2FwKSB8fCB0aGlzLmhoZWEubGluZUdhcDtcbiAgICByZXR1cm4gKHRoaXMuYmJveCA9IFtcbiAgICAgIHRoaXMuaGVhZC54TWluLFxuICAgICAgdGhpcy5oZWFkLnlNaW4sXG4gICAgICB0aGlzLmhlYWQueE1heCxcbiAgICAgIHRoaXMuaGVhZC55TWF4XG4gICAgXSk7XG4gIH07XG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8qIGZ1bmN0aW9uIDogcmVnaXN0ZXJUVEYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIGNvbW1lbnQgOiBHZXQgdGhlIHZhbHVlIHRvIGFzc2lnbiBwZGYgZm9udCBkZXNjcmlwdG9ycy4gICAgICovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIFRURkZvbnQucHJvdG90eXBlLnJlZ2lzdGVyVFRGID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUsIGhpLCBsb3csIHJhdywgX3JlZjtcbiAgICB0aGlzLnNjYWxlRmFjdG9yID0gMTAwMC4wIC8gdGhpcy5oZWFkLnVuaXRzUGVyRW07XG4gICAgdGhpcy5iYm94ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2ksIF9sZW4sIF9yZWYsIF9yZXN1bHRzO1xuICAgICAgX3JlZiA9IHRoaXMuYmJveDtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgZSA9IF9yZWZbX2ldO1xuICAgICAgICBfcmVzdWx0cy5wdXNoKE1hdGgucm91bmQoZSAqIHRoaXMuc2NhbGVGYWN0b3IpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9LmNhbGwodGhpcyk7XG4gICAgdGhpcy5zdGVtViA9IDA7XG4gICAgaWYgKHRoaXMucG9zdC5leGlzdHMpIHtcbiAgICAgIHJhdyA9IHRoaXMucG9zdC5pdGFsaWNfYW5nbGU7XG4gICAgICBoaSA9IHJhdyA+PiAxNjtcbiAgICAgIGxvdyA9IHJhdyAmIDB4ZmY7XG4gICAgICBpZiAoKGhpICYgMHg4MDAwKSAhPT0gMCkge1xuICAgICAgICBoaSA9IC0oKGhpIF4gMHhmZmZmKSArIDEpO1xuICAgICAgfVxuICAgICAgdGhpcy5pdGFsaWNBbmdsZSA9ICsoXCJcIiArIGhpICsgXCIuXCIgKyBsb3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLml0YWxpY0FuZ2xlID0gMDtcbiAgICB9XG4gICAgdGhpcy5hc2NlbmRlciA9IE1hdGgucm91bmQodGhpcy5hc2NlbmRlciAqIHRoaXMuc2NhbGVGYWN0b3IpO1xuICAgIHRoaXMuZGVjZW5kZXIgPSBNYXRoLnJvdW5kKHRoaXMuZGVjZW5kZXIgKiB0aGlzLnNjYWxlRmFjdG9yKTtcbiAgICB0aGlzLmxpbmVHYXAgPSBNYXRoLnJvdW5kKHRoaXMubGluZUdhcCAqIHRoaXMuc2NhbGVGYWN0b3IpO1xuICAgIHRoaXMuY2FwSGVpZ2h0ID0gKHRoaXMub3MyLmV4aXN0cyAmJiB0aGlzLm9zMi5jYXBIZWlnaHQpIHx8IHRoaXMuYXNjZW5kZXI7XG4gICAgdGhpcy54SGVpZ2h0ID0gKHRoaXMub3MyLmV4aXN0cyAmJiB0aGlzLm9zMi54SGVpZ2h0KSB8fCAwO1xuICAgIHRoaXMuZmFtaWx5Q2xhc3MgPSAoKHRoaXMub3MyLmV4aXN0cyAmJiB0aGlzLm9zMi5mYW1pbHlDbGFzcykgfHwgMCkgPj4gODtcbiAgICB0aGlzLmlzU2VyaWYgPVxuICAgICAgKF9yZWYgPSB0aGlzLmZhbWlseUNsYXNzKSA9PT0gMSB8fFxuICAgICAgX3JlZiA9PT0gMiB8fFxuICAgICAgX3JlZiA9PT0gMyB8fFxuICAgICAgX3JlZiA9PT0gNCB8fFxuICAgICAgX3JlZiA9PT0gNSB8fFxuICAgICAgX3JlZiA9PT0gNztcbiAgICB0aGlzLmlzU2NyaXB0ID0gdGhpcy5mYW1pbHlDbGFzcyA9PT0gMTA7XG4gICAgdGhpcy5mbGFncyA9IDA7XG4gICAgaWYgKHRoaXMucG9zdC5pc0ZpeGVkUGl0Y2gpIHtcbiAgICAgIHRoaXMuZmxhZ3MgfD0gMSA8PCAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc1NlcmlmKSB7XG4gICAgICB0aGlzLmZsYWdzIHw9IDEgPDwgMTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNTY3JpcHQpIHtcbiAgICAgIHRoaXMuZmxhZ3MgfD0gMSA8PCAzO1xuICAgIH1cbiAgICBpZiAodGhpcy5pdGFsaWNBbmdsZSAhPT0gMCkge1xuICAgICAgdGhpcy5mbGFncyB8PSAxIDw8IDY7XG4gICAgfVxuICAgIHRoaXMuZmxhZ3MgfD0gMSA8PCA1O1xuICAgIGlmICghdGhpcy5jbWFwLnVuaWNvZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHVuaWNvZGUgY21hcCBmb3IgZm9udFwiKTtcbiAgICB9XG4gIH07XG4gIFRURkZvbnQucHJvdG90eXBlLmNoYXJhY3RlclRvR2x5cGggPSBmdW5jdGlvbihjaGFyYWN0ZXIpIHtcbiAgICB2YXIgX3JlZjtcbiAgICByZXR1cm4gKFxuICAgICAgKChfcmVmID0gdGhpcy5jbWFwLnVuaWNvZGUpICE9IG51bGwgPyBfcmVmLmNvZGVNYXBbY2hhcmFjdGVyXSA6IHZvaWQgMCkgfHxcbiAgICAgIDBcbiAgICApO1xuICB9O1xuICBUVEZGb250LnByb3RvdHlwZS53aWR0aE9mR2x5cGggPSBmdW5jdGlvbihnbHlwaCkge1xuICAgIHZhciBzY2FsZTtcbiAgICBzY2FsZSA9IDEwMDAuMCAvIHRoaXMuaGVhZC51bml0c1BlckVtO1xuICAgIHJldHVybiB0aGlzLmhtdHguZm9yR2x5cGgoZ2x5cGgpLmFkdmFuY2UgKiBzY2FsZTtcbiAgfTtcbiAgVFRGRm9udC5wcm90b3R5cGUud2lkdGhPZlN0cmluZyA9IGZ1bmN0aW9uKHN0cmluZywgc2l6ZSwgY2hhclNwYWNlKSB7XG4gICAgdmFyIGNoYXJDb2RlLCBpLCBzY2FsZSwgd2lkdGgsIF9yZWY7XG4gICAgc3RyaW5nID0gXCJcIiArIHN0cmluZztcbiAgICB3aWR0aCA9IDA7XG4gICAgZm9yIChcbiAgICAgIGkgPSAwLCBfcmVmID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIDAgPD0gX3JlZiA/IGkgPCBfcmVmIDogaSA+IF9yZWY7XG4gICAgICBpID0gMCA8PSBfcmVmID8gKytpIDogLS1pXG4gICAgKSB7XG4gICAgICBjaGFyQ29kZSA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgICAgd2lkdGggKz1cbiAgICAgICAgdGhpcy53aWR0aE9mR2x5cGgodGhpcy5jaGFyYWN0ZXJUb0dseXBoKGNoYXJDb2RlKSkgK1xuICAgICAgICAgIGNoYXJTcGFjZSAqICgxMDAwIC8gc2l6ZSkgfHwgMDtcbiAgICB9XG4gICAgc2NhbGUgPSBzaXplIC8gMTAwMDtcbiAgICByZXR1cm4gd2lkdGggKiBzY2FsZTtcbiAgfTtcbiAgVFRGRm9udC5wcm90b3R5cGUubGluZUhlaWdodCA9IGZ1bmN0aW9uKHNpemUsIGluY2x1ZGVHYXApIHtcbiAgICB2YXIgZ2FwO1xuICAgIGlmIChpbmNsdWRlR2FwID09IG51bGwpIHtcbiAgICAgIGluY2x1ZGVHYXAgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2FwID0gaW5jbHVkZUdhcCA/IHRoaXMubGluZUdhcCA6IDA7XG4gICAgcmV0dXJuICgodGhpcy5hc2NlbmRlciArIGdhcCAtIHRoaXMuZGVjZW5kZXIpIC8gMTAwMCkgKiBzaXplO1xuICB9O1xuICByZXR1cm4gVFRGRm9udDtcbn0pKCk7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiBmdW5jdGlvbiA6IERhdGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogY29tbWVudCA6IFRoZSB0dGYgZGF0YSBkZWNvZGVkIGFuZCBzdG9yZWQgaW4gYW4gYXJyYXkgaXMgcmVhZCBhbmQgd3JpdHRlbiB0byB0aGUgRGF0YSBvYmplY3QuKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG52YXIgRGF0YSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gRGF0YShkYXRhKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YSAhPSBudWxsID8gZGF0YSA6IFtdO1xuICAgIHRoaXMucG9zID0gMDtcbiAgICB0aGlzLmxlbmd0aCA9IHRoaXMuZGF0YS5sZW5ndGg7XG4gIH1cbiAgRGF0YS5wcm90b3R5cGUucmVhZEJ5dGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS53cml0ZUJ5dGUgPSBmdW5jdGlvbihieXRlKSB7XG4gICAgcmV0dXJuICh0aGlzLmRhdGFbdGhpcy5wb3MrK10gPSBieXRlKTtcbiAgfTtcbiAgRGF0YS5wcm90b3R5cGUucmVhZFVJbnQzMiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiMSwgYjIsIGIzLCBiNDtcbiAgICBiMSA9IHRoaXMucmVhZEJ5dGUoKSAqIDB4MTAwMDAwMDtcbiAgICBiMiA9IHRoaXMucmVhZEJ5dGUoKSA8PCAxNjtcbiAgICBiMyA9IHRoaXMucmVhZEJ5dGUoKSA8PCA4O1xuICAgIGI0ID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIHJldHVybiBiMSArIGIyICsgYjMgKyBiNDtcbiAgfTtcbiAgRGF0YS5wcm90b3R5cGUud3JpdGVVSW50MzIgPSBmdW5jdGlvbih2YWwpIHtcbiAgICB0aGlzLndyaXRlQnl0ZSgodmFsID4+PiAyNCkgJiAweGZmKTtcbiAgICB0aGlzLndyaXRlQnl0ZSgodmFsID4+IDE2KSAmIDB4ZmYpO1xuICAgIHRoaXMud3JpdGVCeXRlKCh2YWwgPj4gOCkgJiAweGZmKTtcbiAgICByZXR1cm4gdGhpcy53cml0ZUJ5dGUodmFsICYgMHhmZik7XG4gIH07XG4gIERhdGEucHJvdG90eXBlLnJlYWRJbnQzMiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbnQ7XG4gICAgaW50ID0gdGhpcy5yZWFkVUludDMyKCk7XG4gICAgaWYgKGludCA+PSAweDgwMDAwMDAwKSB7XG4gICAgICByZXR1cm4gaW50IC0gMHgxMDAwMDAwMDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpbnQ7XG4gICAgfVxuICB9O1xuICBEYXRhLnByb3RvdHlwZS53cml0ZUludDMyID0gZnVuY3Rpb24odmFsKSB7XG4gICAgaWYgKHZhbCA8IDApIHtcbiAgICAgIHZhbCArPSAweDEwMDAwMDAwMDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMud3JpdGVVSW50MzIodmFsKTtcbiAgfTtcbiAgRGF0YS5wcm90b3R5cGUucmVhZFVJbnQxNiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiMSwgYjI7XG4gICAgYjEgPSB0aGlzLnJlYWRCeXRlKCkgPDwgODtcbiAgICBiMiA9IHRoaXMucmVhZEJ5dGUoKTtcbiAgICByZXR1cm4gYjEgfCBiMjtcbiAgfTtcbiAgRGF0YS5wcm90b3R5cGUud3JpdGVVSW50MTYgPSBmdW5jdGlvbih2YWwpIHtcbiAgICB0aGlzLndyaXRlQnl0ZSgodmFsID4+IDgpICYgMHhmZik7XG4gICAgcmV0dXJuIHRoaXMud3JpdGVCeXRlKHZhbCAmIDB4ZmYpO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS5yZWFkSW50MTYgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW50O1xuICAgIGludCA9IHRoaXMucmVhZFVJbnQxNigpO1xuICAgIGlmIChpbnQgPj0gMHg4MDAwKSB7XG4gICAgICByZXR1cm4gaW50IC0gMHgxMDAwMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGludDtcbiAgICB9XG4gIH07XG4gIERhdGEucHJvdG90eXBlLndyaXRlSW50MTYgPSBmdW5jdGlvbih2YWwpIHtcbiAgICBpZiAodmFsIDwgMCkge1xuICAgICAgdmFsICs9IDB4MTAwMDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLndyaXRlVUludDE2KHZhbCk7XG4gIH07XG4gIERhdGEucHJvdG90eXBlLnJlYWRTdHJpbmcgPSBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICB2YXIgaSwgcmV0O1xuICAgIHJldCA9IFtdO1xuICAgIGZvciAoXG4gICAgICBpID0gMDtcbiAgICAgIDAgPD0gbGVuZ3RoID8gaSA8IGxlbmd0aCA6IGkgPiBsZW5ndGg7XG4gICAgICBpID0gMCA8PSBsZW5ndGggPyArK2kgOiAtLWlcbiAgICApIHtcbiAgICAgIHJldFtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5yZWFkQnl0ZSgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldC5qb2luKFwiXCIpO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS53cml0ZVN0cmluZyA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciBpLCBfcmVmLCBfcmVzdWx0cztcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoXG4gICAgICBpID0gMCwgX3JlZiA9IHZhbC5sZW5ndGg7XG4gICAgICAwIDw9IF9yZWYgPyBpIDwgX3JlZiA6IGkgPiBfcmVmO1xuICAgICAgaSA9IDAgPD0gX3JlZiA/ICsraSA6IC0taVxuICAgICkge1xuICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLndyaXRlQnl0ZSh2YWwuY2hhckNvZGVBdChpKSkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Jlc3VsdHM7XG4gIH07XG4gIC8qRGF0YS5wcm90b3R5cGUuc3RyaW5nQXQgPSBmdW5jdGlvbiAocG9zLCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZFN0cmluZyhsZW5ndGgpO1xuICAgICAgICB9OyovXG4gIERhdGEucHJvdG90eXBlLnJlYWRTaG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWRJbnQxNigpO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS53cml0ZVNob3J0ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgcmV0dXJuIHRoaXMud3JpdGVJbnQxNih2YWwpO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS5yZWFkTG9uZ0xvbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYjEsIGIyLCBiMywgYjQsIGI1LCBiNiwgYjcsIGI4O1xuICAgIGIxID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGIyID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGIzID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGI0ID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGI1ID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGI2ID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGI3ID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGI4ID0gdGhpcy5yZWFkQnl0ZSgpO1xuICAgIGlmIChiMSAmIDB4ODApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICgoYjEgXiAweGZmKSAqIDB4MTAwMDAwMDAwMDAwMDAwICtcbiAgICAgICAgICAoYjIgXiAweGZmKSAqIDB4MTAwMDAwMDAwMDAwMCArXG4gICAgICAgICAgKGIzIF4gMHhmZikgKiAweDEwMDAwMDAwMDAwICtcbiAgICAgICAgICAoYjQgXiAweGZmKSAqIDB4MTAwMDAwMDAwICtcbiAgICAgICAgICAoYjUgXiAweGZmKSAqIDB4MTAwMDAwMCArXG4gICAgICAgICAgKGI2IF4gMHhmZikgKiAweDEwMDAwICtcbiAgICAgICAgICAoYjcgXiAweGZmKSAqIDB4MTAwICtcbiAgICAgICAgICAoYjggXiAweGZmKSArXG4gICAgICAgICAgMSkgKlxuICAgICAgICAtMVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIGIxICogMHgxMDAwMDAwMDAwMDAwMDAgK1xuICAgICAgYjIgKiAweDEwMDAwMDAwMDAwMDAgK1xuICAgICAgYjMgKiAweDEwMDAwMDAwMDAwICtcbiAgICAgIGI0ICogMHgxMDAwMDAwMDAgK1xuICAgICAgYjUgKiAweDEwMDAwMDAgK1xuICAgICAgYjYgKiAweDEwMDAwICtcbiAgICAgIGI3ICogMHgxMDAgK1xuICAgICAgYjhcbiAgICApO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS53cml0ZUxvbmdMb25nID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIGhpZ2gsIGxvdztcbiAgICBoaWdoID0gTWF0aC5mbG9vcih2YWwgLyAweDEwMDAwMDAwMCk7XG4gICAgbG93ID0gdmFsICYgMHhmZmZmZmZmZjtcbiAgICB0aGlzLndyaXRlQnl0ZSgoaGlnaCA+PiAyNCkgJiAweGZmKTtcbiAgICB0aGlzLndyaXRlQnl0ZSgoaGlnaCA+PiAxNikgJiAweGZmKTtcbiAgICB0aGlzLndyaXRlQnl0ZSgoaGlnaCA+PiA4KSAmIDB4ZmYpO1xuICAgIHRoaXMud3JpdGVCeXRlKGhpZ2ggJiAweGZmKTtcbiAgICB0aGlzLndyaXRlQnl0ZSgobG93ID4+IDI0KSAmIDB4ZmYpO1xuICAgIHRoaXMud3JpdGVCeXRlKChsb3cgPj4gMTYpICYgMHhmZik7XG4gICAgdGhpcy53cml0ZUJ5dGUoKGxvdyA+PiA4KSAmIDB4ZmYpO1xuICAgIHJldHVybiB0aGlzLndyaXRlQnl0ZShsb3cgJiAweGZmKTtcbiAgfTtcbiAgRGF0YS5wcm90b3R5cGUucmVhZEludCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWRJbnQzMigpO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS53cml0ZUludCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHJldHVybiB0aGlzLndyaXRlSW50MzIodmFsKTtcbiAgfTtcbiAgLypEYXRhLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9OyovXG4gIERhdGEucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbihieXRlcykge1xuICAgIHZhciBidWYsIGk7XG4gICAgYnVmID0gW107XG4gICAgZm9yIChcbiAgICAgIGkgPSAwO1xuICAgICAgMCA8PSBieXRlcyA/IGkgPCBieXRlcyA6IGkgPiBieXRlcztcbiAgICAgIGkgPSAwIDw9IGJ5dGVzID8gKytpIDogLS1pXG4gICAgKSB7XG4gICAgICBidWYucHVzaCh0aGlzLnJlYWRCeXRlKCkpO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xuICB9O1xuICBEYXRhLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ5dGVzKSB7XG4gICAgdmFyIGJ5dGUsIGksIF9sZW4sIF9yZXN1bHRzO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChpID0gMCwgX2xlbiA9IGJ5dGVzLmxlbmd0aDsgaSA8IF9sZW47IGkrKykge1xuICAgICAgYnl0ZSA9IGJ5dGVzW2ldO1xuICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLndyaXRlQnl0ZShieXRlKSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcbiAgcmV0dXJuIERhdGE7XG59KSgpO1xuXG52YXIgRGlyZWN0b3J5ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgY2hlY2tzdW07XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvKiBmdW5jdGlvbiA6IERpcmVjdG9yeSBnZW5lcmF0b3IgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIGNvbW1lbnQgOiBJbml0aWFsaXplIHRoZSBvZmZzZXQsIHRhZywgbGVuZ3RoLCBhbmQgY2hlY2tzdW0gZm9yIGVhY2ggdGFibGUgZm9yIHRoZSBmb250IHRvIGJlIHVzZWQuKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBmdW5jdGlvbiBEaXJlY3RvcnkoZGF0YSkge1xuICAgIHZhciBlbnRyeSwgaSwgX3JlZjtcbiAgICB0aGlzLnNjYWxhclR5cGUgPSBkYXRhLnJlYWRJbnQoKTtcbiAgICB0aGlzLnRhYmxlQ291bnQgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMuc2VhcmNoUmFuZ2UgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMuZW50cnlTZWxlY3RvciA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy5yYW5nZVNoaWZ0ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnRhYmxlcyA9IHt9O1xuICAgIGZvciAoXG4gICAgICBpID0gMCwgX3JlZiA9IHRoaXMudGFibGVDb3VudDtcbiAgICAgIDAgPD0gX3JlZiA/IGkgPCBfcmVmIDogaSA+IF9yZWY7XG4gICAgICBpID0gMCA8PSBfcmVmID8gKytpIDogLS1pXG4gICAgKSB7XG4gICAgICBlbnRyeSA9IHtcbiAgICAgICAgdGFnOiBkYXRhLnJlYWRTdHJpbmcoNCksXG4gICAgICAgIGNoZWNrc3VtOiBkYXRhLnJlYWRJbnQoKSxcbiAgICAgICAgb2Zmc2V0OiBkYXRhLnJlYWRJbnQoKSxcbiAgICAgICAgbGVuZ3RoOiBkYXRhLnJlYWRJbnQoKVxuICAgICAgfTtcbiAgICAgIHRoaXMudGFibGVzW2VudHJ5LnRhZ10gPSBlbnRyeTtcbiAgICB9XG4gIH1cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvKiBmdW5jdGlvbiA6IGVuY29kZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIGNvbW1lbnQgOiBJdCBlbmNvZGVzIGFuZCBzdG9yZXMgdGhlIGZvbnQgdGFibGUgb2JqZWN0IGFuZCBpbmZvcm1hdGlvbiB1c2VkIGZvciB0aGUgZGlyZWN0b3J5IG9iamVjdC4gKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBEaXJlY3RvcnkucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uKHRhYmxlcykge1xuICAgIHZhciBhZGp1c3RtZW50LFxuICAgICAgZGlyZWN0b3J5LFxuICAgICAgZGlyZWN0b3J5TGVuZ3RoLFxuICAgICAgZW50cnlTZWxlY3RvcixcbiAgICAgIGhlYWRPZmZzZXQsXG4gICAgICBsb2cyLFxuICAgICAgb2Zmc2V0LFxuICAgICAgcmFuZ2VTaGlmdCxcbiAgICAgIHNlYXJjaFJhbmdlLFxuICAgICAgc3VtLFxuICAgICAgdGFibGUsXG4gICAgICB0YWJsZUNvdW50LFxuICAgICAgdGFibGVEYXRhLFxuICAgICAgdGFnO1xuICAgIHRhYmxlQ291bnQgPSBPYmplY3Qua2V5cyh0YWJsZXMpLmxlbmd0aDtcbiAgICBsb2cyID0gTWF0aC5sb2coMik7XG4gICAgc2VhcmNoUmFuZ2UgPSBNYXRoLmZsb29yKE1hdGgubG9nKHRhYmxlQ291bnQpIC8gbG9nMikgKiAxNjtcbiAgICBlbnRyeVNlbGVjdG9yID0gTWF0aC5mbG9vcihzZWFyY2hSYW5nZSAvIGxvZzIpO1xuICAgIHJhbmdlU2hpZnQgPSB0YWJsZUNvdW50ICogMTYgLSBzZWFyY2hSYW5nZTtcbiAgICBkaXJlY3RvcnkgPSBuZXcgRGF0YSgpO1xuICAgIGRpcmVjdG9yeS53cml0ZUludCh0aGlzLnNjYWxhclR5cGUpO1xuICAgIGRpcmVjdG9yeS53cml0ZVNob3J0KHRhYmxlQ291bnQpO1xuICAgIGRpcmVjdG9yeS53cml0ZVNob3J0KHNlYXJjaFJhbmdlKTtcbiAgICBkaXJlY3Rvcnkud3JpdGVTaG9ydChlbnRyeVNlbGVjdG9yKTtcbiAgICBkaXJlY3Rvcnkud3JpdGVTaG9ydChyYW5nZVNoaWZ0KTtcbiAgICBkaXJlY3RvcnlMZW5ndGggPSB0YWJsZUNvdW50ICogMTY7XG4gICAgb2Zmc2V0ID0gZGlyZWN0b3J5LnBvcyArIGRpcmVjdG9yeUxlbmd0aDtcbiAgICBoZWFkT2Zmc2V0ID0gbnVsbDtcbiAgICB0YWJsZURhdGEgPSBbXTtcbiAgICBmb3IgKHRhZyBpbiB0YWJsZXMpIHtcbiAgICAgIHRhYmxlID0gdGFibGVzW3RhZ107XG4gICAgICBkaXJlY3Rvcnkud3JpdGVTdHJpbmcodGFnKTtcbiAgICAgIGRpcmVjdG9yeS53cml0ZUludChjaGVja3N1bSh0YWJsZSkpO1xuICAgICAgZGlyZWN0b3J5LndyaXRlSW50KG9mZnNldCk7XG4gICAgICBkaXJlY3Rvcnkud3JpdGVJbnQodGFibGUubGVuZ3RoKTtcbiAgICAgIHRhYmxlRGF0YSA9IHRhYmxlRGF0YS5jb25jYXQodGFibGUpO1xuICAgICAgaWYgKHRhZyA9PT0gXCJoZWFkXCIpIHtcbiAgICAgICAgaGVhZE9mZnNldCA9IG9mZnNldDtcbiAgICAgIH1cbiAgICAgIG9mZnNldCArPSB0YWJsZS5sZW5ndGg7XG4gICAgICB3aGlsZSAob2Zmc2V0ICUgNCkge1xuICAgICAgICB0YWJsZURhdGEucHVzaCgwKTtcbiAgICAgICAgb2Zmc2V0Kys7XG4gICAgICB9XG4gICAgfVxuICAgIGRpcmVjdG9yeS53cml0ZSh0YWJsZURhdGEpO1xuICAgIHN1bSA9IGNoZWNrc3VtKGRpcmVjdG9yeS5kYXRhKTtcbiAgICBhZGp1c3RtZW50ID0gMHhiMWIwYWZiYSAtIHN1bTtcbiAgICBkaXJlY3RvcnkucG9zID0gaGVhZE9mZnNldCArIDg7XG4gICAgZGlyZWN0b3J5LndyaXRlVUludDMyKGFkanVzdG1lbnQpO1xuICAgIHJldHVybiBkaXJlY3RvcnkuZGF0YTtcbiAgfTtcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLyogZnVuY3Rpb24gOiBjaGVja3N1bSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogY29tbWVudCA6IER1cGxpY2F0ZSB0aGUgdGFibGUgZm9yIHRoZSB0YWcuICAgICAgICAgICAgICAgICAgKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgY2hlY2tzdW0gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIGksIHN1bSwgdG1wLCBfcmVmO1xuICAgIGRhdGEgPSBfX3NsaWNlLmNhbGwoZGF0YSk7XG4gICAgd2hpbGUgKGRhdGEubGVuZ3RoICUgNCkge1xuICAgICAgZGF0YS5wdXNoKDApO1xuICAgIH1cbiAgICB0bXAgPSBuZXcgRGF0YShkYXRhKTtcbiAgICBzdW0gPSAwO1xuICAgIGZvciAoaSA9IDAsIF9yZWYgPSBkYXRhLmxlbmd0aDsgaSA8IF9yZWY7IGkgPSBpICs9IDQpIHtcbiAgICAgIHN1bSArPSB0bXAucmVhZFVJbnQzMigpO1xuICAgIH1cbiAgICByZXR1cm4gc3VtICYgMHhmZmZmZmZmZjtcbiAgfTtcbiAgcmV0dXJuIERpcmVjdG9yeTtcbn0pKCk7XG5cbnZhciBUYWJsZSxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7XG4gICAgICBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3RvcigpIHtcbiAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDtcbiAgICB9XG4gICAgY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlO1xuICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7XG4gICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcbiAgICByZXR1cm4gY2hpbGQ7XG4gIH07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiBmdW5jdGlvbiA6IFRhYmxlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogY29tbWVudCA6IFNhdmUgaW5mbyBmb3IgZWFjaCB0YWJsZSwgYW5kIHBhcnNlIHRoZSB0YWJsZS4gICAgKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5UYWJsZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gVGFibGUoZmlsZSkge1xuICAgIHZhciBpbmZvO1xuICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgaW5mbyA9IHRoaXMuZmlsZS5kaXJlY3RvcnkudGFibGVzW3RoaXMudGFnXTtcbiAgICB0aGlzLmV4aXN0cyA9ICEhaW5mbztcbiAgICBpZiAoaW5mbykge1xuICAgICAgKHRoaXMub2Zmc2V0ID0gaW5mby5vZmZzZXQpLCAodGhpcy5sZW5ndGggPSBpbmZvLmxlbmd0aCk7XG4gICAgICB0aGlzLnBhcnNlKHRoaXMuZmlsZS5jb250ZW50cyk7XG4gICAgfVxuICB9XG4gIFRhYmxlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKCkge307XG4gIFRhYmxlLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbigpIHt9O1xuICBUYWJsZS5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmV4aXN0cykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRoaXMuZmlsZS5jb250ZW50cy5wb3MgPSB0aGlzLm9mZnNldDtcbiAgICByZXR1cm4gdGhpcy5maWxlLmNvbnRlbnRzLnJlYWQodGhpcy5sZW5ndGgpO1xuICB9O1xuICByZXR1cm4gVGFibGU7XG59KSgpO1xuXG52YXIgSGVhZFRhYmxlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoSGVhZFRhYmxlLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEhlYWRUYWJsZSgpIHtcbiAgICByZXR1cm4gSGVhZFRhYmxlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG4gIEhlYWRUYWJsZS5wcm90b3R5cGUudGFnID0gXCJoZWFkXCI7XG4gIEhlYWRUYWJsZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgZGF0YS5wb3MgPSB0aGlzLm9mZnNldDtcbiAgICB0aGlzLnZlcnNpb24gPSBkYXRhLnJlYWRJbnQoKTtcbiAgICB0aGlzLnJldmlzaW9uID0gZGF0YS5yZWFkSW50KCk7XG4gICAgdGhpcy5jaGVja1N1bUFkanVzdG1lbnQgPSBkYXRhLnJlYWRJbnQoKTtcbiAgICB0aGlzLm1hZ2ljTnVtYmVyID0gZGF0YS5yZWFkSW50KCk7XG4gICAgdGhpcy5mbGFncyA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy51bml0c1BlckVtID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLmNyZWF0ZWQgPSBkYXRhLnJlYWRMb25nTG9uZygpO1xuICAgIHRoaXMubW9kaWZpZWQgPSBkYXRhLnJlYWRMb25nTG9uZygpO1xuICAgIHRoaXMueE1pbiA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy55TWluID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnhNYXggPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMueU1heCA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy5tYWNTdHlsZSA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy5sb3dlc3RSZWNQUEVNID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLmZvbnREaXJlY3Rpb25IaW50ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLmluZGV4VG9Mb2NGb3JtYXQgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHJldHVybiAodGhpcy5nbHlwaERhdGFGb3JtYXQgPSBkYXRhLnJlYWRTaG9ydCgpKTtcbiAgfTtcbiAgSGVhZFRhYmxlLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbihpbmRleFRvTG9jRm9ybWF0KSB7XG4gICAgdmFyIHRhYmxlO1xuICAgIHRhYmxlID0gbmV3IERhdGEoKTtcbiAgICB0YWJsZS53cml0ZUludCh0aGlzLnZlcnNpb24pO1xuICAgIHRhYmxlLndyaXRlSW50KHRoaXMucmV2aXNpb24pO1xuICAgIHRhYmxlLndyaXRlSW50KHRoaXMuY2hlY2tTdW1BZGp1c3RtZW50KTtcbiAgICB0YWJsZS53cml0ZUludCh0aGlzLm1hZ2ljTnVtYmVyKTtcbiAgICB0YWJsZS53cml0ZVNob3J0KHRoaXMuZmxhZ3MpO1xuICAgIHRhYmxlLndyaXRlU2hvcnQodGhpcy51bml0c1BlckVtKTtcbiAgICB0YWJsZS53cml0ZUxvbmdMb25nKHRoaXMuY3JlYXRlZCk7XG4gICAgdGFibGUud3JpdGVMb25nTG9uZyh0aGlzLm1vZGlmaWVkKTtcbiAgICB0YWJsZS53cml0ZVNob3J0KHRoaXMueE1pbik7XG4gICAgdGFibGUud3JpdGVTaG9ydCh0aGlzLnlNaW4pO1xuICAgIHRhYmxlLndyaXRlU2hvcnQodGhpcy54TWF4KTtcbiAgICB0YWJsZS53cml0ZVNob3J0KHRoaXMueU1heCk7XG4gICAgdGFibGUud3JpdGVTaG9ydCh0aGlzLm1hY1N0eWxlKTtcbiAgICB0YWJsZS53cml0ZVNob3J0KHRoaXMubG93ZXN0UmVjUFBFTSk7XG4gICAgdGFibGUud3JpdGVTaG9ydCh0aGlzLmZvbnREaXJlY3Rpb25IaW50KTtcbiAgICB0YWJsZS53cml0ZVNob3J0KGluZGV4VG9Mb2NGb3JtYXQpO1xuICAgIHRhYmxlLndyaXRlU2hvcnQodGhpcy5nbHlwaERhdGFGb3JtYXQpO1xuICAgIHJldHVybiB0YWJsZS5kYXRhO1xuICB9O1xuICByZXR1cm4gSGVhZFRhYmxlO1xufSkoVGFibGUpO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyogZnVuY3Rpb24gOiBDbWFwRW50cnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIGNvbW1lbnQgOiBDbWFwIEluaXRpYWxpemVzIGFuZCBlbmNvZGVzIG9iamVjdCBpbmZvcm1hdGlvbiAocmVxdWlyZWQgYnkgcGRmIHNwZWMpLiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xudmFyIENtYXBFbnRyeSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gQ21hcEVudHJ5KGRhdGEsIG9mZnNldCkge1xuICAgIHZhciBjb2RlLFxuICAgICAgY291bnQsXG4gICAgICBlbmRDb2RlLFxuICAgICAgZ2x5cGhJZCxcbiAgICAgIGdseXBoSWRzLFxuICAgICAgaSxcbiAgICAgIGlkRGVsdGEsXG4gICAgICBpZFJhbmdlT2Zmc2V0LFxuICAgICAgaW5kZXgsXG4gICAgICBzYXZlT2Zmc2V0LFxuICAgICAgc2VnQ291bnQsXG4gICAgICBzZWdDb3VudFgyLFxuICAgICAgc3RhcnQsXG4gICAgICBzdGFydENvZGUsXG4gICAgICB0YWlsLFxuICAgICAgX2osXG4gICAgICBfayxcbiAgICAgIF9sZW47XG4gICAgdGhpcy5wbGF0Zm9ybUlEID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5lbmNvZGluZ0lEID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldCArIGRhdGEucmVhZEludCgpO1xuICAgIHNhdmVPZmZzZXQgPSBkYXRhLnBvcztcbiAgICBkYXRhLnBvcyA9IHRoaXMub2Zmc2V0O1xuICAgIHRoaXMuZm9ybWF0ID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5sZW5ndGggPSBkYXRhLnJlYWRVSW50MTYoKTtcbiAgICB0aGlzLmxhbmd1YWdlID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5pc1VuaWNvZGUgPVxuICAgICAgKHRoaXMucGxhdGZvcm1JRCA9PT0gMyAmJiB0aGlzLmVuY29kaW5nSUQgPT09IDEgJiYgdGhpcy5mb3JtYXQgPT09IDQpIHx8XG4gICAgICAodGhpcy5wbGF0Zm9ybUlEID09PSAwICYmIHRoaXMuZm9ybWF0ID09PSA0KTtcbiAgICB0aGlzLmNvZGVNYXAgPSB7fTtcbiAgICBzd2l0Y2ggKHRoaXMuZm9ybWF0KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICAgICAgICAgIHRoaXMuY29kZU1hcFtpXSA9IGRhdGEucmVhZEJ5dGUoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgc2VnQ291bnRYMiA9IGRhdGEucmVhZFVJbnQxNigpO1xuICAgICAgICBzZWdDb3VudCA9IHNlZ0NvdW50WDIgLyAyO1xuICAgICAgICBkYXRhLnBvcyArPSA2O1xuICAgICAgICBlbmRDb2RlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaiwgX3Jlc3VsdHM7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgaSA9IF9qID0gMDtcbiAgICAgICAgICAgIDAgPD0gc2VnQ291bnQgPyBfaiA8IHNlZ0NvdW50IDogX2ogPiBzZWdDb3VudDtcbiAgICAgICAgICAgIGkgPSAwIDw9IHNlZ0NvdW50ID8gKytfaiA6IC0tX2pcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goZGF0YS5yZWFkVUludDE2KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pKCk7XG4gICAgICAgIGRhdGEucG9zICs9IDI7XG4gICAgICAgIHN0YXJ0Q29kZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2osIF9yZXN1bHRzO1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChcbiAgICAgICAgICAgIGkgPSBfaiA9IDA7XG4gICAgICAgICAgICAwIDw9IHNlZ0NvdW50ID8gX2ogPCBzZWdDb3VudCA6IF9qID4gc2VnQ291bnQ7XG4gICAgICAgICAgICBpID0gMCA8PSBzZWdDb3VudCA/ICsrX2ogOiAtLV9qXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGRhdGEucmVhZFVJbnQxNigpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICB9KSgpO1xuICAgICAgICBpZERlbHRhID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaiwgX3Jlc3VsdHM7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgaSA9IF9qID0gMDtcbiAgICAgICAgICAgIDAgPD0gc2VnQ291bnQgPyBfaiA8IHNlZ0NvdW50IDogX2ogPiBzZWdDb3VudDtcbiAgICAgICAgICAgIGkgPSAwIDw9IHNlZ0NvdW50ID8gKytfaiA6IC0tX2pcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goZGF0YS5yZWFkVUludDE2KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pKCk7XG4gICAgICAgIGlkUmFuZ2VPZmZzZXQgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9qLCBfcmVzdWx0cztcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICBpID0gX2ogPSAwO1xuICAgICAgICAgICAgMCA8PSBzZWdDb3VudCA/IF9qIDwgc2VnQ291bnQgOiBfaiA+IHNlZ0NvdW50O1xuICAgICAgICAgICAgaSA9IDAgPD0gc2VnQ291bnQgPyArK19qIDogLS1falxuICAgICAgICAgICkge1xuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChkYXRhLnJlYWRVSW50MTYoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkoKTtcbiAgICAgICAgY291bnQgPSAodGhpcy5sZW5ndGggLSBkYXRhLnBvcyArIHRoaXMub2Zmc2V0KSAvIDI7XG4gICAgICAgIGdseXBoSWRzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfaiwgX3Jlc3VsdHM7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgaSA9IF9qID0gMDtcbiAgICAgICAgICAgIDAgPD0gY291bnQgPyBfaiA8IGNvdW50IDogX2ogPiBjb3VudDtcbiAgICAgICAgICAgIGkgPSAwIDw9IGNvdW50ID8gKytfaiA6IC0tX2pcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goZGF0YS5yZWFkVUludDE2KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pKCk7XG4gICAgICAgIGZvciAoaSA9IF9qID0gMCwgX2xlbiA9IGVuZENvZGUubGVuZ3RoOyBfaiA8IF9sZW47IGkgPSArK19qKSB7XG4gICAgICAgICAgdGFpbCA9IGVuZENvZGVbaV07XG4gICAgICAgICAgc3RhcnQgPSBzdGFydENvZGVbaV07XG4gICAgICAgICAgZm9yIChcbiAgICAgICAgICAgIGNvZGUgPSBfayA9IHN0YXJ0O1xuICAgICAgICAgICAgc3RhcnQgPD0gdGFpbCA/IF9rIDw9IHRhaWwgOiBfayA+PSB0YWlsO1xuICAgICAgICAgICAgY29kZSA9IHN0YXJ0IDw9IHRhaWwgPyArK19rIDogLS1fa1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGlkUmFuZ2VPZmZzZXRbaV0gPT09IDApIHtcbiAgICAgICAgICAgICAgZ2x5cGhJZCA9IGNvZGUgKyBpZERlbHRhW2ldO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW5kZXggPSBpZFJhbmdlT2Zmc2V0W2ldIC8gMiArIChjb2RlIC0gc3RhcnQpIC0gKHNlZ0NvdW50IC0gaSk7XG4gICAgICAgICAgICAgIGdseXBoSWQgPSBnbHlwaElkc1tpbmRleF0gfHwgMDtcbiAgICAgICAgICAgICAgaWYgKGdseXBoSWQgIT09IDApIHtcbiAgICAgICAgICAgICAgICBnbHlwaElkICs9IGlkRGVsdGFbaV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29kZU1hcFtjb2RlXSA9IGdseXBoSWQgJiAweGZmZmY7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRhdGEucG9zID0gc2F2ZU9mZnNldDtcbiAgfVxuICBDbWFwRW50cnkuZW5jb2RlID0gZnVuY3Rpb24oY2hhcm1hcCwgZW5jb2RpbmcpIHtcbiAgICB2YXIgY2hhck1hcCxcbiAgICAgIGNvZGUsXG4gICAgICBjb2RlTWFwLFxuICAgICAgY29kZXMsXG4gICAgICBkZWx0YSxcbiAgICAgIGRlbHRhcyxcbiAgICAgIGRpZmYsXG4gICAgICBlbmRDb2RlLFxuICAgICAgZW5kQ29kZXMsXG4gICAgICBlbnRyeVNlbGVjdG9yLFxuICAgICAgZ2x5cGhJRHMsXG4gICAgICBpLFxuICAgICAgaWQsXG4gICAgICBpbmRleGVzLFxuICAgICAgbGFzdCxcbiAgICAgIG1hcCxcbiAgICAgIG5leHRJRCxcbiAgICAgIG9mZnNldCxcbiAgICAgIG9sZCxcbiAgICAgIHJhbmdlT2Zmc2V0cyxcbiAgICAgIHJhbmdlU2hpZnQsXG4gICAgICBzZWFyY2hSYW5nZSxcbiAgICAgIHNlZ0NvdW50LFxuICAgICAgc2VnQ291bnRYMixcbiAgICAgIHN0YXJ0Q29kZSxcbiAgICAgIHN0YXJ0Q29kZXMsXG4gICAgICBzdGFydEdseXBoLFxuICAgICAgc3VidGFibGUsXG4gICAgICBfaSxcbiAgICAgIF9qLFxuICAgICAgX2ssXG4gICAgICBfbCxcbiAgICAgIF9sZW4sXG4gICAgICBfbGVuMSxcbiAgICAgIF9sZW4yLFxuICAgICAgX2xlbjMsXG4gICAgICBfbGVuNCxcbiAgICAgIF9sZW41LFxuICAgICAgX2xlbjYsXG4gICAgICBfbGVuNyxcbiAgICAgIF9tLFxuICAgICAgX24sXG4gICAgICBfbmFtZSxcbiAgICAgIF9vLFxuICAgICAgX3AsXG4gICAgICBfcTtcbiAgICBzdWJ0YWJsZSA9IG5ldyBEYXRhKCk7XG4gICAgY29kZXMgPSBPYmplY3Qua2V5cyhjaGFybWFwKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgIHJldHVybiBhIC0gYjtcbiAgICB9KTtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlIFwibWFjcm9tYW5cIjpcbiAgICAgICAgaWQgPSAwO1xuICAgICAgICBpbmRleGVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCgwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICB9KSgpO1xuICAgICAgICBtYXAgPSB7XG4gICAgICAgICAgMDogMFxuICAgICAgICB9O1xuICAgICAgICBjb2RlTWFwID0ge307XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gY29kZXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBjb2RlID0gY29kZXNbX2ldO1xuICAgICAgICAgIGlmIChtYXBbKF9uYW1lID0gY2hhcm1hcFtjb2RlXSldID09IG51bGwpIHtcbiAgICAgICAgICAgIG1hcFtfbmFtZV0gPSArK2lkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb2RlTWFwW2NvZGVdID0ge1xuICAgICAgICAgICAgb2xkOiBjaGFybWFwW2NvZGVdLFxuICAgICAgICAgICAgbmV3OiBtYXBbY2hhcm1hcFtjb2RlXV1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGluZGV4ZXNbY29kZV0gPSBtYXBbY2hhcm1hcFtjb2RlXV07XG4gICAgICAgIH1cbiAgICAgICAgc3VidGFibGUud3JpdGVVSW50MTYoMSk7XG4gICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KDApO1xuICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQzMigxMik7XG4gICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KDApO1xuICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQxNigyNjIpO1xuICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQxNigwKTtcbiAgICAgICAgc3VidGFibGUud3JpdGUoaW5kZXhlcyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hhck1hcDogY29kZU1hcCxcbiAgICAgICAgICBzdWJ0YWJsZTogc3VidGFibGUuZGF0YSxcbiAgICAgICAgICBtYXhHbHlwaElEOiBpZCArIDFcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgXCJ1bmljb2RlXCI6XG4gICAgICAgIHN0YXJ0Q29kZXMgPSBbXTtcbiAgICAgICAgZW5kQ29kZXMgPSBbXTtcbiAgICAgICAgbmV4dElEID0gMDtcbiAgICAgICAgbWFwID0ge307XG4gICAgICAgIGNoYXJNYXAgPSB7fTtcbiAgICAgICAgbGFzdCA9IGRpZmYgPSBudWxsO1xuICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBjb2Rlcy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICBjb2RlID0gY29kZXNbX2pdO1xuICAgICAgICAgIG9sZCA9IGNoYXJtYXBbY29kZV07XG4gICAgICAgICAgaWYgKG1hcFtvbGRdID09IG51bGwpIHtcbiAgICAgICAgICAgIG1hcFtvbGRdID0gKytuZXh0SUQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoYXJNYXBbY29kZV0gPSB7XG4gICAgICAgICAgICBvbGQ6IG9sZCxcbiAgICAgICAgICAgIG5ldzogbWFwW29sZF1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGRlbHRhID0gbWFwW29sZF0gLSBjb2RlO1xuICAgICAgICAgIGlmIChsYXN0ID09IG51bGwgfHwgZGVsdGEgIT09IGRpZmYpIHtcbiAgICAgICAgICAgIGlmIChsYXN0KSB7XG4gICAgICAgICAgICAgIGVuZENvZGVzLnB1c2gobGFzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFydENvZGVzLnB1c2goY29kZSk7XG4gICAgICAgICAgICBkaWZmID0gZGVsdGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxhc3QgPSBjb2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0KSB7XG4gICAgICAgICAgZW5kQ29kZXMucHVzaChsYXN0KTtcbiAgICAgICAgfVxuICAgICAgICBlbmRDb2Rlcy5wdXNoKDB4ZmZmZik7XG4gICAgICAgIHN0YXJ0Q29kZXMucHVzaCgweGZmZmYpO1xuICAgICAgICBzZWdDb3VudCA9IHN0YXJ0Q29kZXMubGVuZ3RoO1xuICAgICAgICBzZWdDb3VudFgyID0gc2VnQ291bnQgKiAyO1xuICAgICAgICBzZWFyY2hSYW5nZSA9IDIgKiBNYXRoLnBvdyhNYXRoLmxvZyhzZWdDb3VudCkgLyBNYXRoLkxOMiwgMik7XG4gICAgICAgIGVudHJ5U2VsZWN0b3IgPSBNYXRoLmxvZyhzZWFyY2hSYW5nZSAvIDIpIC8gTWF0aC5MTjI7XG4gICAgICAgIHJhbmdlU2hpZnQgPSAyICogc2VnQ291bnQgLSBzZWFyY2hSYW5nZTtcbiAgICAgICAgZGVsdGFzID0gW107XG4gICAgICAgIHJhbmdlT2Zmc2V0cyA9IFtdO1xuICAgICAgICBnbHlwaElEcyA9IFtdO1xuICAgICAgICBmb3IgKGkgPSBfayA9IDAsIF9sZW4yID0gc3RhcnRDb2Rlcy5sZW5ndGg7IF9rIDwgX2xlbjI7IGkgPSArK19rKSB7XG4gICAgICAgICAgc3RhcnRDb2RlID0gc3RhcnRDb2Rlc1tpXTtcbiAgICAgICAgICBlbmRDb2RlID0gZW5kQ29kZXNbaV07XG4gICAgICAgICAgaWYgKHN0YXJ0Q29kZSA9PT0gMHhmZmZmKSB7XG4gICAgICAgICAgICBkZWx0YXMucHVzaCgwKTtcbiAgICAgICAgICAgIHJhbmdlT2Zmc2V0cy5wdXNoKDApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXJ0R2x5cGggPSBjaGFyTWFwW3N0YXJ0Q29kZV1bXCJuZXdcIl07XG4gICAgICAgICAgaWYgKHN0YXJ0Q29kZSAtIHN0YXJ0R2x5cGggPj0gMHg4MDAwKSB7XG4gICAgICAgICAgICBkZWx0YXMucHVzaCgwKTtcbiAgICAgICAgICAgIHJhbmdlT2Zmc2V0cy5wdXNoKDIgKiAoZ2x5cGhJRHMubGVuZ3RoICsgc2VnQ291bnQgLSBpKSk7XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICBjb2RlID0gX2wgPSBzdGFydENvZGU7XG4gICAgICAgICAgICAgIHN0YXJ0Q29kZSA8PSBlbmRDb2RlID8gX2wgPD0gZW5kQ29kZSA6IF9sID49IGVuZENvZGU7XG4gICAgICAgICAgICAgIGNvZGUgPSBzdGFydENvZGUgPD0gZW5kQ29kZSA/ICsrX2wgOiAtLV9sXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZ2x5cGhJRHMucHVzaChjaGFyTWFwW2NvZGVdW1wibmV3XCJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsdGFzLnB1c2goc3RhcnRHbHlwaCAtIHN0YXJ0Q29kZSk7XG4gICAgICAgICAgICByYW5nZU9mZnNldHMucHVzaCgwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3VidGFibGUud3JpdGVVSW50MTYoMyk7XG4gICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KDEpO1xuICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQzMigxMik7XG4gICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KDQpO1xuICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQxNigxNiArIHNlZ0NvdW50ICogOCArIGdseXBoSURzLmxlbmd0aCAqIDIpO1xuICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQxNigwKTtcbiAgICAgICAgc3VidGFibGUud3JpdGVVSW50MTYoc2VnQ291bnRYMik7XG4gICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KHNlYXJjaFJhbmdlKTtcbiAgICAgICAgc3VidGFibGUud3JpdGVVSW50MTYoZW50cnlTZWxlY3Rvcik7XG4gICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KHJhbmdlU2hpZnQpO1xuICAgICAgICBmb3IgKF9tID0gMCwgX2xlbjMgPSBlbmRDb2Rlcy5sZW5ndGg7IF9tIDwgX2xlbjM7IF9tKyspIHtcbiAgICAgICAgICBjb2RlID0gZW5kQ29kZXNbX21dO1xuICAgICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KGNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KDApO1xuICAgICAgICBmb3IgKF9uID0gMCwgX2xlbjQgPSBzdGFydENvZGVzLmxlbmd0aDsgX24gPCBfbGVuNDsgX24rKykge1xuICAgICAgICAgIGNvZGUgPSBzdGFydENvZGVzW19uXTtcbiAgICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQxNihjb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKF9vID0gMCwgX2xlbjUgPSBkZWx0YXMubGVuZ3RoOyBfbyA8IF9sZW41OyBfbysrKSB7XG4gICAgICAgICAgZGVsdGEgPSBkZWx0YXNbX29dO1xuICAgICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KGRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKF9wID0gMCwgX2xlbjYgPSByYW5nZU9mZnNldHMubGVuZ3RoOyBfcCA8IF9sZW42OyBfcCsrKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gcmFuZ2VPZmZzZXRzW19wXTtcbiAgICAgICAgICBzdWJ0YWJsZS53cml0ZVVJbnQxNihvZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoX3EgPSAwLCBfbGVuNyA9IGdseXBoSURzLmxlbmd0aDsgX3EgPCBfbGVuNzsgX3ErKykge1xuICAgICAgICAgIGlkID0gZ2x5cGhJRHNbX3FdO1xuICAgICAgICAgIHN1YnRhYmxlLndyaXRlVUludDE2KGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoYXJNYXA6IGNoYXJNYXAsXG4gICAgICAgICAgc3VidGFibGU6IHN1YnRhYmxlLmRhdGEsXG4gICAgICAgICAgbWF4R2x5cGhJRDogbmV4dElEICsgMVxuICAgICAgICB9O1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIENtYXBFbnRyeTtcbn0pKCk7XG5cbnZhciBDbWFwVGFibGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhDbWFwVGFibGUsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gQ21hcFRhYmxlKCkge1xuICAgIHJldHVybiBDbWFwVGFibGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbiAgQ21hcFRhYmxlLnByb3RvdHlwZS50YWcgPSBcImNtYXBcIjtcbiAgQ21hcFRhYmxlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgZW50cnksIGksIHRhYmxlQ291bnQ7XG4gICAgZGF0YS5wb3MgPSB0aGlzLm9mZnNldDtcbiAgICB0aGlzLnZlcnNpb24gPSBkYXRhLnJlYWRVSW50MTYoKTtcbiAgICB0YWJsZUNvdW50ID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy50YWJsZXMgPSBbXTtcbiAgICB0aGlzLnVuaWNvZGUgPSBudWxsO1xuICAgIGZvciAoXG4gICAgICBpID0gMDtcbiAgICAgIDAgPD0gdGFibGVDb3VudCA/IGkgPCB0YWJsZUNvdW50IDogaSA+IHRhYmxlQ291bnQ7XG4gICAgICBpID0gMCA8PSB0YWJsZUNvdW50ID8gKytpIDogLS1pXG4gICAgKSB7XG4gICAgICBlbnRyeSA9IG5ldyBDbWFwRW50cnkoZGF0YSwgdGhpcy5vZmZzZXQpO1xuICAgICAgdGhpcy50YWJsZXMucHVzaChlbnRyeSk7XG4gICAgICBpZiAoZW50cnkuaXNVbmljb2RlKSB7XG4gICAgICAgIGlmICh0aGlzLnVuaWNvZGUgPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMudW5pY29kZSA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLyogZnVuY3Rpb24gOiBlbmNvZGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIGNvbW1lbnQgOiBFbmNvZGUgdGhlIGNtYXAgdGFibGUgY29ycmVzcG9uZGluZyB0byB0aGUgaW5wdXQgY2hhcmFjdGVyLiAqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgQ21hcFRhYmxlLmVuY29kZSA9IGZ1bmN0aW9uKGNoYXJtYXAsIGVuY29kaW5nKSB7XG4gICAgdmFyIHJlc3VsdCwgdGFibGU7XG4gICAgaWYgKGVuY29kaW5nID09IG51bGwpIHtcbiAgICAgIGVuY29kaW5nID0gXCJtYWNyb21hblwiO1xuICAgIH1cbiAgICByZXN1bHQgPSBDbWFwRW50cnkuZW5jb2RlKGNoYXJtYXAsIGVuY29kaW5nKTtcbiAgICB0YWJsZSA9IG5ldyBEYXRhKCk7XG4gICAgdGFibGUud3JpdGVVSW50MTYoMCk7XG4gICAgdGFibGUud3JpdGVVSW50MTYoMSk7XG4gICAgcmVzdWx0LnRhYmxlID0gdGFibGUuZGF0YS5jb25jYXQocmVzdWx0LnN1YnRhYmxlKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICByZXR1cm4gQ21hcFRhYmxlO1xufSkoVGFibGUpO1xuXG52YXIgSGhlYVRhYmxlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoSGhlYVRhYmxlLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEhoZWFUYWJsZSgpIHtcbiAgICByZXR1cm4gSGhlYVRhYmxlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG4gIEhoZWFUYWJsZS5wcm90b3R5cGUudGFnID0gXCJoaGVhXCI7XG4gIEhoZWFUYWJsZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgZGF0YS5wb3MgPSB0aGlzLm9mZnNldDtcbiAgICB0aGlzLnZlcnNpb24gPSBkYXRhLnJlYWRJbnQoKTtcbiAgICB0aGlzLmFzY2VuZGVyID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLmRlY2VuZGVyID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLmxpbmVHYXAgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMuYWR2YW5jZVdpZHRoTWF4ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLm1pbkxlZnRTaWRlQmVhcmluZyA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy5taW5SaWdodFNpZGVCZWFyaW5nID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnhNYXhFeHRlbnQgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMuY2FyZXRTbG9wZVJpc2UgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMuY2FyZXRTbG9wZVJ1biA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy5jYXJldE9mZnNldCA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgZGF0YS5wb3MgKz0gNCAqIDI7XG4gICAgdGhpcy5tZXRyaWNEYXRhRm9ybWF0ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICByZXR1cm4gKHRoaXMubnVtYmVyT2ZNZXRyaWNzID0gZGF0YS5yZWFkVUludDE2KCkpO1xuICB9O1xuICAvKkhoZWFUYWJsZS5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKGlkcykge1xuICAgICAgICAgICAgdmFyIGksIHRhYmxlLCBfaSwgX3JlZjtcbiAgICAgICAgICAgIHRhYmxlID0gbmV3IERhdGE7XG4gICAgICAgICAgICB0YWJsZS53cml0ZUludCh0aGlzLnZlcnNpb24pO1xuICAgICAgICAgICAgdGFibGUud3JpdGVTaG9ydCh0aGlzLmFzY2VuZGVyKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlU2hvcnQodGhpcy5kZWNlbmRlcik7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVNob3J0KHRoaXMubGluZUdhcCk7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVNob3J0KHRoaXMuYWR2YW5jZVdpZHRoTWF4KTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlU2hvcnQodGhpcy5taW5MZWZ0U2lkZUJlYXJpbmcpO1xuICAgICAgICAgICAgdGFibGUud3JpdGVTaG9ydCh0aGlzLm1pblJpZ2h0U2lkZUJlYXJpbmcpO1xuICAgICAgICAgICAgdGFibGUud3JpdGVTaG9ydCh0aGlzLnhNYXhFeHRlbnQpO1xuICAgICAgICAgICAgdGFibGUud3JpdGVTaG9ydCh0aGlzLmNhcmV0U2xvcGVSaXNlKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlU2hvcnQodGhpcy5jYXJldFNsb3BlUnVuKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlU2hvcnQodGhpcy5jYXJldE9mZnNldCk7XG4gICAgICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9yZWYgPSA0ICogMjsgMCA8PSBfcmVmID8gX2kgPCBfcmVmIDogX2kgPiBfcmVmOyBpID0gMCA8PSBfcmVmID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgICAgICAgICB0YWJsZS53cml0ZUJ5dGUoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWJsZS53cml0ZVNob3J0KHRoaXMubWV0cmljRGF0YUZvcm1hdCk7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVVJbnQxNihpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZS5kYXRhO1xuICAgICAgICB9OyovXG4gIHJldHVybiBIaGVhVGFibGU7XG59KShUYWJsZSk7XG5cbnZhciBPUzJUYWJsZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKE9TMlRhYmxlLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIE9TMlRhYmxlKCkge1xuICAgIHJldHVybiBPUzJUYWJsZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuICBPUzJUYWJsZS5wcm90b3R5cGUudGFnID0gXCJPUy8yXCI7XG4gIE9TMlRhYmxlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBkYXRhLnBvcyA9IHRoaXMub2Zmc2V0O1xuICAgIHRoaXMudmVyc2lvbiA9IGRhdGEucmVhZFVJbnQxNigpO1xuICAgIHRoaXMuYXZlcmFnZUNoYXJXaWR0aCA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy53ZWlnaHRDbGFzcyA9IGRhdGEucmVhZFVJbnQxNigpO1xuICAgIHRoaXMud2lkdGhDbGFzcyA9IGRhdGEucmVhZFVJbnQxNigpO1xuICAgIHRoaXMudHlwZSA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy55U3Vic2NyaXB0WFNpemUgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMueVN1YnNjcmlwdFlTaXplID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnlTdWJzY3JpcHRYT2Zmc2V0ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnlTdWJzY3JpcHRZT2Zmc2V0ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnlTdXBlcnNjcmlwdFhTaXplID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnlTdXBlcnNjcmlwdFlTaXplID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnlTdXBlcnNjcmlwdFhPZmZzZXQgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMueVN1cGVyc2NyaXB0WU9mZnNldCA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy55U3RyaWtlb3V0U2l6ZSA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy55U3RyaWtlb3V0UG9zaXRpb24gPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMuZmFtaWx5Q2xhc3MgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHRoaXMucGFub3NlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIF9yZXN1bHRzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCAxMDsgKytpKSB7XG4gICAgICAgIF9yZXN1bHRzLnB1c2goZGF0YS5yZWFkQnl0ZSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KSgpO1xuICAgIHRoaXMuY2hhclJhbmdlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIF9yZXN1bHRzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCA0OyArK2kpIHtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChkYXRhLnJlYWRJbnQoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfSkoKTtcbiAgICB0aGlzLnZlbmRvcklEID0gZGF0YS5yZWFkU3RyaW5nKDQpO1xuICAgIHRoaXMuc2VsZWN0aW9uID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLmZpcnN0Q2hhckluZGV4ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLmxhc3RDaGFySW5kZXggPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIGlmICh0aGlzLnZlcnNpb24gPiAwKSB7XG4gICAgICB0aGlzLmFzY2VudCA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgICB0aGlzLmRlc2NlbnQgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgICAgdGhpcy5saW5lR2FwID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICAgIHRoaXMud2luQXNjZW50ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICAgIHRoaXMud2luRGVzY2VudCA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgICB0aGlzLmNvZGVQYWdlUmFuZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpLCBfcmVzdWx0cztcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDI7IGkgPSArK2kpIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGRhdGEucmVhZEludCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KSgpO1xuICAgICAgaWYgKHRoaXMudmVyc2lvbiA+IDEpIHtcbiAgICAgICAgdGhpcy54SGVpZ2h0ID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICAgICAgdGhpcy5jYXBIZWlnaHQgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgICAgICB0aGlzLmRlZmF1bHRDaGFyID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICAgICAgdGhpcy5icmVha0NoYXIgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgICAgICByZXR1cm4gKHRoaXMubWF4Q29udGV4dCA9IGRhdGEucmVhZFNob3J0KCkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLypPUzJUYWJsZS5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmF3KCk7XG4gICAgICAgIH07Ki9cbiAgcmV0dXJuIE9TMlRhYmxlO1xufSkoVGFibGUpO1xuXG52YXIgUG9zdFRhYmxlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICB2YXIgUE9TVFNDUklQVF9HTFlQSFM7XG4gIF9fZXh0ZW5kcyhQb3N0VGFibGUsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gUG9zdFRhYmxlKCkge1xuICAgIHJldHVybiBQb3N0VGFibGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbiAgUG9zdFRhYmxlLnByb3RvdHlwZS50YWcgPSBcInBvc3RcIjtcbiAgUG9zdFRhYmxlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgbGVuZ3RoLCBudW1iZXJPZkdseXBocywgX3Jlc3VsdHM7XG4gICAgZGF0YS5wb3MgPSB0aGlzLm9mZnNldDtcbiAgICB0aGlzLmZvcm1hdCA9IGRhdGEucmVhZEludCgpO1xuICAgIHRoaXMuaXRhbGljQW5nbGUgPSBkYXRhLnJlYWRJbnQoKTtcbiAgICB0aGlzLnVuZGVybGluZVBvc2l0aW9uID0gZGF0YS5yZWFkU2hvcnQoKTtcbiAgICB0aGlzLnVuZGVybGluZVRoaWNrbmVzcyA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgdGhpcy5pc0ZpeGVkUGl0Y2ggPSBkYXRhLnJlYWRJbnQoKTtcbiAgICB0aGlzLm1pbk1lbVR5cGU0MiA9IGRhdGEucmVhZEludCgpO1xuICAgIHRoaXMubWF4TWVtVHlwZTQyID0gZGF0YS5yZWFkSW50KCk7XG4gICAgdGhpcy5taW5NZW1UeXBlMSA9IGRhdGEucmVhZEludCgpO1xuICAgIHRoaXMubWF4TWVtVHlwZTEgPSBkYXRhLnJlYWRJbnQoKTtcbiAgICBzd2l0Y2ggKHRoaXMuZm9ybWF0KSB7XG4gICAgICBjYXNlIDB4MDAwMTAwMDA6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAweDAwMDIwMDAwOlxuICAgICAgICBudW1iZXJPZkdseXBocyA9IGRhdGEucmVhZFVJbnQxNigpO1xuICAgICAgICB0aGlzLmdseXBoTmFtZUluZGV4ID0gW107XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgIDAgPD0gbnVtYmVyT2ZHbHlwaHMgPyBpIDwgbnVtYmVyT2ZHbHlwaHMgOiBpID4gbnVtYmVyT2ZHbHlwaHM7XG4gICAgICAgICAgaSA9IDAgPD0gbnVtYmVyT2ZHbHlwaHMgPyArK2kgOiAtLWlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5nbHlwaE5hbWVJbmRleC5wdXNoKGRhdGEucmVhZFVJbnQxNigpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWVzID0gW107XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIHdoaWxlIChkYXRhLnBvcyA8IHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICBsZW5ndGggPSBkYXRhLnJlYWRCeXRlKCk7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCh0aGlzLm5hbWVzLnB1c2goZGF0YS5yZWFkU3RyaW5nKGxlbmd0aCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICBjYXNlIDB4MDAwMjUwMDA6XG4gICAgICAgIG51bWJlck9mR2x5cGhzID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgICAgIHJldHVybiAodGhpcy5vZmZzZXRzID0gZGF0YS5yZWFkKG51bWJlck9mR2x5cGhzKSk7XG4gICAgICBjYXNlIDB4MDAwMzAwMDA6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAweDAwMDQwMDAwOlxuICAgICAgICByZXR1cm4gKHRoaXMubWFwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9qLCBfcmVmLCBfcmVzdWx0czE7XG4gICAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgICAgZm9yIChcbiAgICAgICAgICAgIGkgPSBfaiA9IDAsIF9yZWYgPSB0aGlzLmZpbGUubWF4cC5udW1HbHlwaHM7XG4gICAgICAgICAgICAwIDw9IF9yZWYgPyBfaiA8IF9yZWYgOiBfaiA+IF9yZWY7XG4gICAgICAgICAgICBpID0gMCA8PSBfcmVmID8gKytfaiA6IC0tX2pcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIF9yZXN1bHRzMS5wdXNoKGRhdGEucmVhZFVJbnQzMigpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIF9yZXN1bHRzMTtcbiAgICAgICAgfS5jYWxsKHRoaXMpKTtcbiAgICB9XG4gIH07XG4gIC8qUG9zdFRhYmxlLnByb3RvdHlwZS5nbHlwaEZvciA9IGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZm9ybWF0KSB7XG4gICAgICAgICAgICBjYXNlIDB4MDAwMTAwMDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBPU1RTQ1JJUFRfR0xZUEhTW2NvZGVdIHx8ICcubm90ZGVmJztcbiAgICAgICAgICAgIGNhc2UgMHgwMDAyMDAwMDpcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2x5cGhOYW1lSW5kZXhbY29kZV07XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDw9IDI1Nykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUE9TVFNDUklQVF9HTFlQSFNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZXNbaW5kZXggLSAyNThdIHx8ICcubm90ZGVmJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwMjUwMDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBPU1RTQ1JJUFRfR0xZUEhTW2NvZGUgKyB0aGlzLm9mZnNldHNbY29kZV1dIHx8ICcubm90ZGVmJztcbiAgICAgICAgICAgIGNhc2UgMHgwMDAzMDAwMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJy5ub3RkZWYnO1xuICAgICAgICAgICAgY2FzZSAweDAwMDQwMDAwOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcFtjb2RlXSB8fCAweEZGRkY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07Ki9cbiAgLypQb3N0VGFibGUucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIChtYXBwaW5nKSB7XG4gICAgICAgICAgICB2YXIgaWQsIGluZGV4LCBpbmRleGVzLCBwb3NpdGlvbiwgcG9zdCwgcmF3LCBzdHJpbmcsIHN0cmluZ3MsIHRhYmxlLCBfaSwgX2osIF9rLCBfbGVuLCBfbGVuMSwgX2xlbjI7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByYXcgPSB0aGlzLnJhdygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0ID09PSAweDAwMDMwMDAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYmxlID0gbmV3IERhdGEocmF3LnNsaWNlKDAsIDMyKSk7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVVJbnQzMigweDAwMDIwMDAwKTtcbiAgICAgICAgICAgIHRhYmxlLnBvcyA9IDMyO1xuICAgICAgICAgICAgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgc3RyaW5ncyA9IFtdO1xuICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBtYXBwaW5nLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgaWQgPSBtYXBwaW5nW19pXTtcbiAgICAgICAgICAgICAgICBwb3N0ID0gdGhpcy5nbHlwaEZvcihpZCk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBQT1NUU0NSSVBUX0dMWVBIUy5pbmRleE9mKHBvc3QpO1xuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaCgyNTcgKyBzdHJpbmdzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ3MucHVzaChwb3N0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWJsZS53cml0ZVVJbnQxNihPYmplY3Qua2V5cyhtYXBwaW5nKS5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gaW5kZXhlcy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ZXNbX2pdO1xuICAgICAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IHN0cmluZ3MubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5nID0gc3RyaW5nc1tfa107XG4gICAgICAgICAgICAgICAgdGFibGUud3JpdGVCeXRlKHN0cmluZy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHRhYmxlLndyaXRlU3RyaW5nKHN0cmluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGFibGUuZGF0YTtcbiAgICAgICAgfTsqL1xuICBQT1NUU0NSSVBUX0dMWVBIUyA9IFwiLm5vdGRlZiAubnVsbCBub25tYXJraW5ncmV0dXJuIHNwYWNlIGV4Y2xhbSBxdW90ZWRibCBudW1iZXJzaWduIGRvbGxhciBwZXJjZW50XFxuYW1wZXJzYW5kIHF1b3Rlc2luZ2xlIHBhcmVubGVmdCBwYXJlbnJpZ2h0IGFzdGVyaXNrIHBsdXMgY29tbWEgaHlwaGVuIHBlcmlvZCBzbGFzaFxcbnplcm8gb25lIHR3byB0aHJlZSBmb3VyIGZpdmUgc2l4IHNldmVuIGVpZ2h0IG5pbmUgY29sb24gc2VtaWNvbG9uIGxlc3MgZXF1YWwgZ3JlYXRlclxcbnF1ZXN0aW9uIGF0IEEgQiBDIEQgRSBGIEcgSCBJIEogSyBMIE0gTiBPIFAgUSBSIFMgVCBVIFYgVyBYIFkgWlxcbmJyYWNrZXRsZWZ0IGJhY2tzbGFzaCBicmFja2V0cmlnaHQgYXNjaWljaXJjdW0gdW5kZXJzY29yZSBncmF2ZVxcbmEgYiBjIGQgZSBmIGcgaCBpIGogayBsIG0gbiBvIHAgcSByIHMgdCB1IHYgdyB4IHkgelxcbmJyYWNlbGVmdCBiYXIgYnJhY2VyaWdodCBhc2NpaXRpbGRlIEFkaWVyZXNpcyBBcmluZyBDY2VkaWxsYSBFYWN1dGUgTnRpbGRlIE9kaWVyZXNpc1xcblVkaWVyZXNpcyBhYWN1dGUgYWdyYXZlIGFjaXJjdW1mbGV4IGFkaWVyZXNpcyBhdGlsZGUgYXJpbmcgY2NlZGlsbGEgZWFjdXRlIGVncmF2ZVxcbmVjaXJjdW1mbGV4IGVkaWVyZXNpcyBpYWN1dGUgaWdyYXZlIGljaXJjdW1mbGV4IGlkaWVyZXNpcyBudGlsZGUgb2FjdXRlIG9ncmF2ZVxcbm9jaXJjdW1mbGV4IG9kaWVyZXNpcyBvdGlsZGUgdWFjdXRlIHVncmF2ZSB1Y2lyY3VtZmxleCB1ZGllcmVzaXMgZGFnZ2VyIGRlZ3JlZSBjZW50XFxuc3Rlcmxpbmcgc2VjdGlvbiBidWxsZXQgcGFyYWdyYXBoIGdlcm1hbmRibHMgcmVnaXN0ZXJlZCBjb3B5cmlnaHQgdHJhZGVtYXJrIGFjdXRlXFxuZGllcmVzaXMgbm90ZXF1YWwgQUUgT3NsYXNoIGluZmluaXR5IHBsdXNtaW51cyBsZXNzZXF1YWwgZ3JlYXRlcmVxdWFsIHllbiBtdVxcbnBhcnRpYWxkaWZmIHN1bW1hdGlvbiBwcm9kdWN0IHBpIGludGVncmFsIG9yZGZlbWluaW5lIG9yZG1hc2N1bGluZSBPbWVnYSBhZSBvc2xhc2hcXG5xdWVzdGlvbmRvd24gZXhjbGFtZG93biBsb2dpY2Fsbm90IHJhZGljYWwgZmxvcmluIGFwcHJveGVxdWFsIERlbHRhIGd1aWxsZW1vdGxlZnRcXG5ndWlsbGVtb3RyaWdodCBlbGxpcHNpcyBub25icmVha2luZ3NwYWNlIEFncmF2ZSBBdGlsZGUgT3RpbGRlIE9FIG9lIGVuZGFzaCBlbWRhc2hcXG5xdW90ZWRibGxlZnQgcXVvdGVkYmxyaWdodCBxdW90ZWxlZnQgcXVvdGVyaWdodCBkaXZpZGUgbG96ZW5nZSB5ZGllcmVzaXMgWWRpZXJlc2lzXFxuZnJhY3Rpb24gY3VycmVuY3kgZ3VpbHNpbmdsbGVmdCBndWlsc2luZ2xyaWdodCBmaSBmbCBkYWdnZXJkYmwgcGVyaW9kY2VudGVyZWRcXG5xdW90ZXNpbmdsYmFzZSBxdW90ZWRibGJhc2UgcGVydGhvdXNhbmQgQWNpcmN1bWZsZXggRWNpcmN1bWZsZXggQWFjdXRlIEVkaWVyZXNpc1xcbkVncmF2ZSBJYWN1dGUgSWNpcmN1bWZsZXggSWRpZXJlc2lzIElncmF2ZSBPYWN1dGUgT2NpcmN1bWZsZXggYXBwbGUgT2dyYXZlIFVhY3V0ZVxcblVjaXJjdW1mbGV4IFVncmF2ZSBkb3RsZXNzaSBjaXJjdW1mbGV4IHRpbGRlIG1hY3JvbiBicmV2ZSBkb3RhY2NlbnQgcmluZyBjZWRpbGxhXFxuaHVuZ2FydW1sYXV0IG9nb25layBjYXJvbiBMc2xhc2ggbHNsYXNoIFNjYXJvbiBzY2Fyb24gWmNhcm9uIHpjYXJvbiBicm9rZW5iYXIgRXRoXFxuZXRoIFlhY3V0ZSB5YWN1dGUgVGhvcm4gdGhvcm4gbWludXMgbXVsdGlwbHkgb25lc3VwZXJpb3IgdHdvc3VwZXJpb3IgdGhyZWVzdXBlcmlvclxcbm9uZWhhbGYgb25lcXVhcnRlciB0aHJlZXF1YXJ0ZXJzIGZyYW5jIEdicmV2ZSBnYnJldmUgSWRvdGFjY2VudCBTY2VkaWxsYSBzY2VkaWxsYVxcbkNhY3V0ZSBjYWN1dGUgQ2Nhcm9uIGNjYXJvbiBkY3JvYXRcIi5zcGxpdChcbiAgICAvXFxzKy9nXG4gICk7XG4gIHJldHVybiBQb3N0VGFibGU7XG59KShUYWJsZSk7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiBmdW5jdGlvbiA6IE5hbWVFbnRyeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogY29tbWVudCA6IFN0b3JlIGNvcHlyaWdodCBpbmZvcm1hdGlvbiwgcGxhdGZvcm1JRCwgZW5jb2RpbmdJRCwgYW5kIGxhbmd1YWdlSUQgaW4gdGhlIE5hbWVFbnRyeSBvYmplY3QuKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG52YXIgTmFtZUVudHJ5ID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBOYW1lRW50cnkocmF3LCBlbnRyeSkge1xuICAgIHRoaXMucmF3ID0gcmF3O1xuICAgIHRoaXMubGVuZ3RoID0gcmF3Lmxlbmd0aDtcbiAgICB0aGlzLnBsYXRmb3JtSUQgPSBlbnRyeS5wbGF0Zm9ybUlEO1xuICAgIHRoaXMuZW5jb2RpbmdJRCA9IGVudHJ5LmVuY29kaW5nSUQ7XG4gICAgdGhpcy5sYW5ndWFnZUlEID0gZW50cnkubGFuZ3VhZ2VJRDtcbiAgfVxuICByZXR1cm4gTmFtZUVudHJ5O1xufSkoKTtcblxudmFyIE5hbWVUYWJsZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgdmFyIHN1YnNldFRhZztcbiAgX19leHRlbmRzKE5hbWVUYWJsZSwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBOYW1lVGFibGUoKSB7XG4gICAgcmV0dXJuIE5hbWVUYWJsZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuICBOYW1lVGFibGUucHJvdG90eXBlLnRhZyA9IFwibmFtZVwiO1xuICBOYW1lVGFibGUucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHZhciBjb3VudCxcbiAgICAgIGVudHJpZXMsXG4gICAgICBlbnRyeSxcbiAgICAgIGksXG4gICAgICBuYW1lLFxuICAgICAgc3RyaW5nT2Zmc2V0LFxuICAgICAgc3RyaW5ncyxcbiAgICAgIHRleHQsXG4gICAgICBfaixcbiAgICAgIF9sZW4sXG4gICAgICBfbmFtZTtcbiAgICBkYXRhLnBvcyA9IHRoaXMub2Zmc2V0O1xuICAgIGRhdGEucmVhZFNob3J0KCk7IC8vZm9ybWF0XG4gICAgY291bnQgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgIHN0cmluZ09mZnNldCA9IGRhdGEucmVhZFNob3J0KCk7XG4gICAgZW50cmllcyA9IFtdO1xuICAgIGZvciAoXG4gICAgICBpID0gMDtcbiAgICAgIDAgPD0gY291bnQgPyBpIDwgY291bnQgOiBpID4gY291bnQ7XG4gICAgICBpID0gMCA8PSBjb3VudCA/ICsraSA6IC0taVxuICAgICkge1xuICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAgcGxhdGZvcm1JRDogZGF0YS5yZWFkU2hvcnQoKSxcbiAgICAgICAgZW5jb2RpbmdJRDogZGF0YS5yZWFkU2hvcnQoKSxcbiAgICAgICAgbGFuZ3VhZ2VJRDogZGF0YS5yZWFkU2hvcnQoKSxcbiAgICAgICAgbmFtZUlEOiBkYXRhLnJlYWRTaG9ydCgpLFxuICAgICAgICBsZW5ndGg6IGRhdGEucmVhZFNob3J0KCksXG4gICAgICAgIG9mZnNldDogdGhpcy5vZmZzZXQgKyBzdHJpbmdPZmZzZXQgKyBkYXRhLnJlYWRTaG9ydCgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgc3RyaW5ncyA9IHt9O1xuICAgIGZvciAoaSA9IF9qID0gMCwgX2xlbiA9IGVudHJpZXMubGVuZ3RoOyBfaiA8IF9sZW47IGkgPSArK19qKSB7XG4gICAgICBlbnRyeSA9IGVudHJpZXNbaV07XG4gICAgICBkYXRhLnBvcyA9IGVudHJ5Lm9mZnNldDtcbiAgICAgIHRleHQgPSBkYXRhLnJlYWRTdHJpbmcoZW50cnkubGVuZ3RoKTtcbiAgICAgIG5hbWUgPSBuZXcgTmFtZUVudHJ5KHRleHQsIGVudHJ5KTtcbiAgICAgIGlmIChzdHJpbmdzWyhfbmFtZSA9IGVudHJ5Lm5hbWVJRCldID09IG51bGwpIHtcbiAgICAgICAgc3RyaW5nc1tfbmFtZV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIHN0cmluZ3NbZW50cnkubmFtZUlEXS5wdXNoKG5hbWUpO1xuICAgIH1cbiAgICB0aGlzLnN0cmluZ3MgPSBzdHJpbmdzO1xuICAgIHRoaXMuY29weXJpZ2h0ID0gc3RyaW5nc1swXTtcbiAgICB0aGlzLmZvbnRGYW1pbHkgPSBzdHJpbmdzWzFdO1xuICAgIHRoaXMuZm9udFN1YmZhbWlseSA9IHN0cmluZ3NbMl07XG4gICAgdGhpcy51bmlxdWVTdWJmYW1pbHkgPSBzdHJpbmdzWzNdO1xuICAgIHRoaXMuZm9udE5hbWUgPSBzdHJpbmdzWzRdO1xuICAgIHRoaXMudmVyc2lvbiA9IHN0cmluZ3NbNV07XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucG9zdHNjcmlwdE5hbWUgPSBzdHJpbmdzWzZdWzBdLnJhdy5yZXBsYWNlKFxuICAgICAgICAvW1xceDAwLVxceDE5XFx4ODAtXFx4ZmZdL2csXG4gICAgICAgIFwiXCJcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5wb3N0c2NyaXB0TmFtZSA9IHN0cmluZ3NbNF1bMF0ucmF3LnJlcGxhY2UoXG4gICAgICAgIC9bXFx4MDAtXFx4MTlcXHg4MC1cXHhmZl0vZyxcbiAgICAgICAgXCJcIlxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy50cmFkZW1hcmsgPSBzdHJpbmdzWzddO1xuICAgIHRoaXMubWFudWZhY3R1cmVyID0gc3RyaW5nc1s4XTtcbiAgICB0aGlzLmRlc2lnbmVyID0gc3RyaW5nc1s5XTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gc3RyaW5nc1sxMF07XG4gICAgdGhpcy52ZW5kb3JVcmwgPSBzdHJpbmdzWzExXTtcbiAgICB0aGlzLmRlc2lnbmVyVXJsID0gc3RyaW5nc1sxMl07XG4gICAgdGhpcy5saWNlbnNlID0gc3RyaW5nc1sxM107XG4gICAgdGhpcy5saWNlbnNlVXJsID0gc3RyaW5nc1sxNF07XG4gICAgdGhpcy5wcmVmZXJyZWRGYW1pbHkgPSBzdHJpbmdzWzE1XTtcbiAgICB0aGlzLnByZWZlcnJlZFN1YmZhbWlseSA9IHN0cmluZ3NbMTddO1xuICAgIHRoaXMuY29tcGF0aWJsZUZ1bGwgPSBzdHJpbmdzWzE4XTtcbiAgICByZXR1cm4gKHRoaXMuc2FtcGxlVGV4dCA9IHN0cmluZ3NbMTldKTtcbiAgfTtcbiAgc3Vic2V0VGFnID0gXCJBQUFBQUFcIjtcbiAgLypOYW1lVGFibGUucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCwgbGlzdCwgbmFtZUlELCBuYW1lVGFibGUsIHBvc3RzY3JpcHROYW1lLCBzdHJDb3VudCwgc3RyVGFibGUsIHN0cmluZywgc3RyaW5ncywgdGFibGUsIHZhbCwgX2ksIF9sZW4sIF9yZWY7XG4gICAgICAgICAgICBzdHJpbmdzID0ge307XG4gICAgICAgICAgICBfcmVmID0gdGhpcy5zdHJpbmdzO1xuICAgICAgICAgICAgZm9yIChpZCBpbiBfcmVmKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gX3JlZltpZF07XG4gICAgICAgICAgICAgICAgc3RyaW5nc1tpZF0gPSB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3N0c2NyaXB0TmFtZSA9IG5ldyBOYW1lRW50cnkoXCJcIiArIHN1YnNldFRhZyArIFwiK1wiICsgdGhpcy5wb3N0c2NyaXB0TmFtZSwge1xuICAgICAgICAgICAgICAgIHBsYXRmb3JtSUQ6IDFcbiAgICAgICAgICAgICAgICAsIGVuY29kaW5nSUQ6IDBcbiAgICAgICAgICAgICAgICAsIGxhbmd1YWdlSUQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RyaW5nc1s2XSA9IFtwb3N0c2NyaXB0TmFtZV07XG4gICAgICAgICAgICBzdWJzZXRUYWcgPSBzdWNjZXNzb3JPZihzdWJzZXRUYWcpO1xuICAgICAgICAgICAgc3RyQ291bnQgPSAwO1xuICAgICAgICAgICAgZm9yIChpZCBpbiBzdHJpbmdzKSB7XG4gICAgICAgICAgICAgICAgbGlzdCA9IHN0cmluZ3NbaWRdO1xuICAgICAgICAgICAgICAgIGlmIChsaXN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyQ291bnQgKz0gbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFibGUgPSBuZXcgRGF0YTtcbiAgICAgICAgICAgIHN0clRhYmxlID0gbmV3IERhdGE7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVNob3J0KDApO1xuICAgICAgICAgICAgdGFibGUud3JpdGVTaG9ydChzdHJDb3VudCk7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVNob3J0KDYgKyAxMiAqIHN0ckNvdW50KTtcbiAgICAgICAgICAgIGZvciAobmFtZUlEIGluIHN0cmluZ3MpIHtcbiAgICAgICAgICAgICAgICBsaXN0ID0gc3RyaW5nc1tuYW1lSURdO1xuICAgICAgICAgICAgICAgIGlmIChsaXN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBsaXN0Lmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgPSBsaXN0W19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLndyaXRlU2hvcnQoc3RyaW5nLnBsYXRmb3JtSUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUud3JpdGVTaG9ydChzdHJpbmcuZW5jb2RpbmdJRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS53cml0ZVNob3J0KHN0cmluZy5sYW5ndWFnZUlEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLndyaXRlU2hvcnQobmFtZUlEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLndyaXRlU2hvcnQoc3RyaW5nLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS53cml0ZVNob3J0KHN0clRhYmxlLnBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJUYWJsZS53cml0ZVN0cmluZyhzdHJpbmcucmF3KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuYW1lVGFibGUgPSB7XG4gICAgICAgICAgICAgICAgcG9zdHNjcmlwdE5hbWU6IHBvc3RzY3JpcHROYW1lLnJhd1xuICAgICAgICAgICAgICAgICwgdGFibGU6IHRhYmxlLmRhdGEuY29uY2F0KHN0clRhYmxlLmRhdGEpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9OyovXG4gIHJldHVybiBOYW1lVGFibGU7XG59KShUYWJsZSk7XG5cbnZhciBNYXhwVGFibGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhNYXhwVGFibGUsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gTWF4cFRhYmxlKCkge1xuICAgIHJldHVybiBNYXhwVGFibGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbiAgTWF4cFRhYmxlLnByb3RvdHlwZS50YWcgPSBcIm1heHBcIjtcbiAgTWF4cFRhYmxlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBkYXRhLnBvcyA9IHRoaXMub2Zmc2V0O1xuICAgIHRoaXMudmVyc2lvbiA9IGRhdGEucmVhZEludCgpO1xuICAgIHRoaXMubnVtR2x5cGhzID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5tYXhQb2ludHMgPSBkYXRhLnJlYWRVSW50MTYoKTtcbiAgICB0aGlzLm1heENvbnRvdXJzID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5tYXhDb21wb3NpdGVQb2ludHMgPSBkYXRhLnJlYWRVSW50MTYoKTtcbiAgICB0aGlzLm1heENvbXBvbmVudENvbnRvdXJzID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5tYXhab25lcyA9IGRhdGEucmVhZFVJbnQxNigpO1xuICAgIHRoaXMubWF4VHdpbGlnaHRQb2ludHMgPSBkYXRhLnJlYWRVSW50MTYoKTtcbiAgICB0aGlzLm1heFN0b3JhZ2UgPSBkYXRhLnJlYWRVSW50MTYoKTtcbiAgICB0aGlzLm1heEZ1bmN0aW9uRGVmcyA9IGRhdGEucmVhZFVJbnQxNigpO1xuICAgIHRoaXMubWF4SW5zdHJ1Y3Rpb25EZWZzID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5tYXhTdGFja0VsZW1lbnRzID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgdGhpcy5tYXhTaXplT2ZJbnN0cnVjdGlvbnMgPSBkYXRhLnJlYWRVSW50MTYoKTtcbiAgICB0aGlzLm1heENvbXBvbmVudEVsZW1lbnRzID0gZGF0YS5yZWFkVUludDE2KCk7XG4gICAgcmV0dXJuICh0aGlzLm1heENvbXBvbmVudERlcHRoID0gZGF0YS5yZWFkVUludDE2KCkpO1xuICB9O1xuICAvKk1heHBUYWJsZS5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKGlkcykge1xuICAgICAgICAgICAgdmFyIHRhYmxlO1xuICAgICAgICAgICAgdGFibGUgPSBuZXcgRGF0YTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlSW50KHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVVJbnQxNihpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KHRoaXMubWF4UG9pbnRzKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KHRoaXMubWF4Q29udG91cnMpO1xuICAgICAgICAgICAgdGFibGUud3JpdGVVSW50MTYodGhpcy5tYXhDb21wb3NpdGVQb2ludHMpO1xuICAgICAgICAgICAgdGFibGUud3JpdGVVSW50MTYodGhpcy5tYXhDb21wb25lbnRDb250b3Vycyk7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVVJbnQxNih0aGlzLm1heFpvbmVzKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KHRoaXMubWF4VHdpbGlnaHRQb2ludHMpO1xuICAgICAgICAgICAgdGFibGUud3JpdGVVSW50MTYodGhpcy5tYXhTdG9yYWdlKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KHRoaXMubWF4RnVuY3Rpb25EZWZzKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KHRoaXMubWF4SW5zdHJ1Y3Rpb25EZWZzKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KHRoaXMubWF4U3RhY2tFbGVtZW50cyk7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVVJbnQxNih0aGlzLm1heFNpemVPZkluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICB0YWJsZS53cml0ZVVJbnQxNih0aGlzLm1heENvbXBvbmVudEVsZW1lbnRzKTtcbiAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KHRoaXMubWF4Q29tcG9uZW50RGVwdGgpO1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmRhdGE7XG4gICAgICAgIH07Ki9cbiAgcmV0dXJuIE1heHBUYWJsZTtcbn0pKFRhYmxlKTtcblxudmFyIEhtdHhUYWJsZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKEhtdHhUYWJsZSwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBIbXR4VGFibGUoKSB7XG4gICAgcmV0dXJuIEhtdHhUYWJsZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuICBIbXR4VGFibGUucHJvdG90eXBlLnRhZyA9IFwiaG10eFwiO1xuICBIbXR4VGFibGUucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHZhciBpLCBsYXN0LCBsc2JDb3VudCwgbSwgX2osIF9yZWYsIF9yZXN1bHRzO1xuICAgIGRhdGEucG9zID0gdGhpcy5vZmZzZXQ7XG4gICAgdGhpcy5tZXRyaWNzID0gW107XG4gICAgZm9yIChcbiAgICAgIGkgPSAwLCBfcmVmID0gdGhpcy5maWxlLmhoZWEubnVtYmVyT2ZNZXRyaWNzO1xuICAgICAgMCA8PSBfcmVmID8gaSA8IF9yZWYgOiBpID4gX3JlZjtcbiAgICAgIGkgPSAwIDw9IF9yZWYgPyArK2kgOiAtLWlcbiAgICApIHtcbiAgICAgIHRoaXMubWV0cmljcy5wdXNoKHtcbiAgICAgICAgYWR2YW5jZTogZGF0YS5yZWFkVUludDE2KCksXG4gICAgICAgIGxzYjogZGF0YS5yZWFkSW50MTYoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIGxzYkNvdW50ID0gdGhpcy5maWxlLm1heHAubnVtR2x5cGhzIC0gdGhpcy5maWxlLmhoZWEubnVtYmVyT2ZNZXRyaWNzO1xuICAgIHRoaXMubGVmdFNpZGVCZWFyaW5ncyA9IChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfaiwgX3Jlc3VsdHM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChcbiAgICAgICAgaSA9IF9qID0gMDtcbiAgICAgICAgMCA8PSBsc2JDb3VudCA/IF9qIDwgbHNiQ291bnQgOiBfaiA+IGxzYkNvdW50O1xuICAgICAgICBpID0gMCA8PSBsc2JDb3VudCA/ICsrX2ogOiAtLV9qXG4gICAgICApIHtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChkYXRhLnJlYWRJbnQxNigpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KSgpO1xuICAgIHRoaXMud2lkdGhzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX2osIF9sZW4sIF9yZWYxLCBfcmVzdWx0cztcbiAgICAgIF9yZWYxID0gdGhpcy5tZXRyaWNzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2ogPSAwLCBfbGVuID0gX3JlZjEubGVuZ3RoOyBfaiA8IF9sZW47IF9qKyspIHtcbiAgICAgICAgbSA9IF9yZWYxW19qXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChtLmFkdmFuY2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH0uY2FsbCh0aGlzKTtcbiAgICBsYXN0ID0gdGhpcy53aWR0aHNbdGhpcy53aWR0aHMubGVuZ3RoIC0gMV07XG4gICAgX3Jlc3VsdHMgPSBbXTtcbiAgICBmb3IgKFxuICAgICAgaSA9IF9qID0gMDtcbiAgICAgIDAgPD0gbHNiQ291bnQgPyBfaiA8IGxzYkNvdW50IDogX2ogPiBsc2JDb3VudDtcbiAgICAgIGkgPSAwIDw9IGxzYkNvdW50ID8gKytfaiA6IC0tX2pcbiAgICApIHtcbiAgICAgIF9yZXN1bHRzLnB1c2godGhpcy53aWR0aHMucHVzaChsYXN0KSk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLyogZnVuY3Rpb24gOiBmb3JHbHlwaCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogY29tbWVudCA6IFJldHVybnMgdGhlIGFkdmFuY2Ugd2lkdGggYW5kIGxzYiBmb3IgdGhpcyBnbHlwaC4gKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgSG10eFRhYmxlLnByb3RvdHlwZS5mb3JHbHlwaCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgaWYgKGlkIGluIHRoaXMubWV0cmljcykge1xuICAgICAgcmV0dXJuIHRoaXMubWV0cmljc1tpZF07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBhZHZhbmNlOiB0aGlzLm1ldHJpY3NbdGhpcy5tZXRyaWNzLmxlbmd0aCAtIDFdLmFkdmFuY2UsXG4gICAgICBsc2I6IHRoaXMubGVmdFNpZGVCZWFyaW5nc1tpZCAtIHRoaXMubWV0cmljcy5sZW5ndGhdXG4gICAgfTtcbiAgfTtcbiAgLypIbXR4VGFibGUucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIChtYXBwaW5nKSB7XG4gICAgICAgICAgICB2YXIgaWQsIG1ldHJpYywgdGFibGUsIF9pLCBfbGVuO1xuICAgICAgICAgICAgdGFibGUgPSBuZXcgRGF0YTtcbiAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gbWFwcGluZy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgIGlkID0gbWFwcGluZ1tfaV07XG4gICAgICAgICAgICAgICAgbWV0cmljID0gdGhpcy5mb3JHbHlwaChpZCk7XG4gICAgICAgICAgICAgICAgdGFibGUud3JpdGVVSW50MTYobWV0cmljLmFkdmFuY2UpO1xuICAgICAgICAgICAgICAgIHRhYmxlLndyaXRlVUludDE2KG1ldHJpYy5sc2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmRhdGE7XG4gICAgICAgIH07Ki9cbiAgcmV0dXJuIEhtdHhUYWJsZTtcbn0pKFRhYmxlKTtcblxudmFyIF9fc2xpY2UgPSBbXS5zbGljZTtcblxudmFyIEdseWZUYWJsZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKEdseWZUYWJsZSwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBHbHlmVGFibGUoKSB7XG4gICAgcmV0dXJuIEdseWZUYWJsZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuICBHbHlmVGFibGUucHJvdG90eXBlLnRhZyA9IFwiZ2x5ZlwiO1xuICBHbHlmVGFibGUucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLmNhY2hlID0ge30pO1xuICB9O1xuICBHbHlmVGFibGUucHJvdG90eXBlLmdseXBoRm9yID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgZGF0YSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgbG9jYSxcbiAgICAgIG51bWJlck9mQ29udG91cnMsXG4gICAgICByYXcsXG4gICAgICB4TWF4LFxuICAgICAgeE1pbixcbiAgICAgIHlNYXgsXG4gICAgICB5TWluO1xuICAgIGlmIChpZCBpbiB0aGlzLmNhY2hlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZVtpZF07XG4gICAgfVxuICAgIGxvY2EgPSB0aGlzLmZpbGUubG9jYTtcbiAgICBkYXRhID0gdGhpcy5maWxlLmNvbnRlbnRzO1xuICAgIGluZGV4ID0gbG9jYS5pbmRleE9mKGlkKTtcbiAgICBsZW5ndGggPSBsb2NhLmxlbmd0aE9mKGlkKTtcbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gKHRoaXMuY2FjaGVbaWRdID0gbnVsbCk7XG4gICAgfVxuICAgIGRhdGEucG9zID0gdGhpcy5vZmZzZXQgKyBpbmRleDtcbiAgICByYXcgPSBuZXcgRGF0YShkYXRhLnJlYWQobGVuZ3RoKSk7XG4gICAgbnVtYmVyT2ZDb250b3VycyA9IHJhdy5yZWFkU2hvcnQoKTtcbiAgICB4TWluID0gcmF3LnJlYWRTaG9ydCgpO1xuICAgIHlNaW4gPSByYXcucmVhZFNob3J0KCk7XG4gICAgeE1heCA9IHJhdy5yZWFkU2hvcnQoKTtcbiAgICB5TWF4ID0gcmF3LnJlYWRTaG9ydCgpO1xuICAgIGlmIChudW1iZXJPZkNvbnRvdXJzID09PSAtMSkge1xuICAgICAgdGhpcy5jYWNoZVtpZF0gPSBuZXcgQ29tcG91bmRHbHlwaChyYXcsIHhNaW4sIHlNaW4sIHhNYXgsIHlNYXgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhY2hlW2lkXSA9IG5ldyBTaW1wbGVHbHlwaChcbiAgICAgICAgcmF3LFxuICAgICAgICBudW1iZXJPZkNvbnRvdXJzLFxuICAgICAgICB4TWluLFxuICAgICAgICB5TWluLFxuICAgICAgICB4TWF4LFxuICAgICAgICB5TWF4XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWNoZVtpZF07XG4gIH07XG4gIEdseWZUYWJsZS5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24oZ2x5cGhzLCBtYXBwaW5nLCBvbGQybmV3KSB7XG4gICAgdmFyIGdseXBoLCBpZCwgb2Zmc2V0cywgdGFibGUsIF9pLCBfbGVuO1xuICAgIHRhYmxlID0gW107XG4gICAgb2Zmc2V0cyA9IFtdO1xuICAgIGZvciAoX2kgPSAwLCBfbGVuID0gbWFwcGluZy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgaWQgPSBtYXBwaW5nW19pXTtcbiAgICAgIGdseXBoID0gZ2x5cGhzW2lkXTtcbiAgICAgIG9mZnNldHMucHVzaCh0YWJsZS5sZW5ndGgpO1xuICAgICAgaWYgKGdseXBoKSB7XG4gICAgICAgIHRhYmxlID0gdGFibGUuY29uY2F0KGdseXBoLmVuY29kZShvbGQybmV3KSk7XG4gICAgICB9XG4gICAgfVxuICAgIG9mZnNldHMucHVzaCh0YWJsZS5sZW5ndGgpO1xuICAgIHJldHVybiB7XG4gICAgICB0YWJsZTogdGFibGUsXG4gICAgICBvZmZzZXRzOiBvZmZzZXRzXG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIEdseWZUYWJsZTtcbn0pKFRhYmxlKTtcblxudmFyIFNpbXBsZUdseXBoID0gKGZ1bmN0aW9uKCkge1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8qIGZ1bmN0aW9uIDogU2ltcGxlR2x5cGggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogY29tbWVudCA6IFN0b3JlcyByYXcsIHhNaW4sIHlNaW4sIHhNYXgsIGFuZCB5TWF4IHZhbHVlcyBmb3IgdGhpcyBnbHlwaC4qL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIGZ1bmN0aW9uIFNpbXBsZUdseXBoKHJhdywgbnVtYmVyT2ZDb250b3VycywgeE1pbiwgeU1pbiwgeE1heCwgeU1heCkge1xuICAgIHRoaXMucmF3ID0gcmF3O1xuICAgIHRoaXMubnVtYmVyT2ZDb250b3VycyA9IG51bWJlck9mQ29udG91cnM7XG4gICAgdGhpcy54TWluID0geE1pbjtcbiAgICB0aGlzLnlNaW4gPSB5TWluO1xuICAgIHRoaXMueE1heCA9IHhNYXg7XG4gICAgdGhpcy55TWF4ID0geU1heDtcbiAgICB0aGlzLmNvbXBvdW5kID0gZmFsc2U7XG4gIH1cbiAgU2ltcGxlR2x5cGgucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJhdy5kYXRhO1xuICB9O1xuICByZXR1cm4gU2ltcGxlR2x5cGg7XG59KSgpO1xuXG52YXIgQ29tcG91bmRHbHlwaCA9IChmdW5jdGlvbigpIHtcbiAgdmFyIEFSR18xX0FORF8yX0FSRV9XT1JEUyxcbiAgICBNT1JFX0NPTVBPTkVOVFMsXG4gICAgV0VfSEFWRV9BTl9YX0FORF9ZX1NDQUxFLFxuICAgIFdFX0hBVkVfQV9TQ0FMRSxcbiAgICBXRV9IQVZFX0FfVFdPX0JZX1RXTyxcbiAgICBXRV9IQVZFX0lOU1RSVUNUSU9OUztcbiAgQVJHXzFfQU5EXzJfQVJFX1dPUkRTID0gMHgwMDAxO1xuICBXRV9IQVZFX0FfU0NBTEUgPSAweDAwMDg7XG4gIE1PUkVfQ09NUE9ORU5UUyA9IDB4MDAyMDtcbiAgV0VfSEFWRV9BTl9YX0FORF9ZX1NDQUxFID0gMHgwMDQwO1xuICBXRV9IQVZFX0FfVFdPX0JZX1RXTyA9IDB4MDA4MDtcbiAgV0VfSEFWRV9JTlNUUlVDVElPTlMgPSAweDAxMDA7XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvKiBmdW5jdGlvbiA6IENvbXBvdW5kR2x5cGcgZ2VuZXJhdG9yICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIGNvbW1lbnQgOiBJdCBzdG9yZXMgcmF3LCB4TWluLCB5TWluLCB4TWF4LCB5TWF4LCBnbHlwaCBpZCwgYW5kIGdseXBoIG9mZnNldCBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgY29tcG91bmQgZ2x5cGguKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBmdW5jdGlvbiBDb21wb3VuZEdseXBoKHJhdywgeE1pbiwgeU1pbiwgeE1heCwgeU1heCkge1xuICAgIHZhciBkYXRhLCBmbGFncztcbiAgICB0aGlzLnJhdyA9IHJhdztcbiAgICB0aGlzLnhNaW4gPSB4TWluO1xuICAgIHRoaXMueU1pbiA9IHlNaW47XG4gICAgdGhpcy54TWF4ID0geE1heDtcbiAgICB0aGlzLnlNYXggPSB5TWF4O1xuICAgIHRoaXMuY29tcG91bmQgPSB0cnVlO1xuICAgIHRoaXMuZ2x5cGhJRHMgPSBbXTtcbiAgICB0aGlzLmdseXBoT2Zmc2V0cyA9IFtdO1xuICAgIGRhdGEgPSB0aGlzLnJhdztcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgZmxhZ3MgPSBkYXRhLnJlYWRTaG9ydCgpO1xuICAgICAgdGhpcy5nbHlwaE9mZnNldHMucHVzaChkYXRhLnBvcyk7XG4gICAgICB0aGlzLmdseXBoSURzLnB1c2goZGF0YS5yZWFkVUludDE2KCkpO1xuICAgICAgaWYgKCEoZmxhZ3MgJiBNT1JFX0NPTVBPTkVOVFMpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGZsYWdzICYgQVJHXzFfQU5EXzJfQVJFX1dPUkRTKSB7XG4gICAgICAgIGRhdGEucG9zICs9IDQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLnBvcyArPSAyO1xuICAgICAgfVxuICAgICAgaWYgKGZsYWdzICYgV0VfSEFWRV9BX1RXT19CWV9UV08pIHtcbiAgICAgICAgZGF0YS5wb3MgKz0gODtcbiAgICAgIH0gZWxzZSBpZiAoZmxhZ3MgJiBXRV9IQVZFX0FOX1hfQU5EX1lfU0NBTEUpIHtcbiAgICAgICAgZGF0YS5wb3MgKz0gNDtcbiAgICAgIH0gZWxzZSBpZiAoZmxhZ3MgJiBXRV9IQVZFX0FfU0NBTEUpIHtcbiAgICAgICAgZGF0YS5wb3MgKz0gMjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8qIGZ1bmN0aW9uIDogQ29tcG91bmRHbHlwZyBlbmNvZGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiBjb21tZW50IDogQWZ0ZXIgY3JlYXRpbmcgYSB0YWJsZSBmb3IgdGhlIGNoYXJhY3RlcnMgeW91IHR5cGVkLCB5b3UgY2FsbCBkaXJlY3RvcnkuZW5jb2RlIHRvIGVuY29kZSB0aGUgdGFibGUuKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIENvbXBvdW5kR2x5cGgucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpLCByZXN1bHQsIF9sZW4sIF9yZWY7XG4gICAgcmVzdWx0ID0gbmV3IERhdGEoX19zbGljZS5jYWxsKHRoaXMucmF3LmRhdGEpKTtcbiAgICBfcmVmID0gdGhpcy5nbHlwaElEcztcbiAgICBmb3IgKGkgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IGkgPCBfbGVuOyArK2kpIHtcbiAgICAgIHJlc3VsdC5wb3MgPSB0aGlzLmdseXBoT2Zmc2V0c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICB9O1xuICByZXR1cm4gQ29tcG91bmRHbHlwaDtcbn0pKCk7XG5cbnZhciBMb2NhVGFibGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhMb2NhVGFibGUsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gTG9jYVRhYmxlKCkge1xuICAgIHJldHVybiBMb2NhVGFibGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbiAgTG9jYVRhYmxlLnByb3RvdHlwZS50YWcgPSBcImxvY2FcIjtcbiAgTG9jYVRhYmxlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgZm9ybWF0LCBpO1xuICAgIGRhdGEucG9zID0gdGhpcy5vZmZzZXQ7XG4gICAgZm9ybWF0ID0gdGhpcy5maWxlLmhlYWQuaW5kZXhUb0xvY0Zvcm1hdDtcbiAgICBpZiAoZm9ybWF0ID09PSAwKSB7XG4gICAgICByZXR1cm4gKHRoaXMub2Zmc2V0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaSA9IDAsIF9yZWYgPSB0aGlzLmxlbmd0aDsgaSA8IF9yZWY7IGkgKz0gMikge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goZGF0YS5yZWFkVUludDE2KCkgKiAyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9LmNhbGwodGhpcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHRoaXMub2Zmc2V0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaSA9IDAsIF9yZWYgPSB0aGlzLmxlbmd0aDsgaSA8IF9yZWY7IGkgKz0gNCkge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goZGF0YS5yZWFkVUludDMyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0uY2FsbCh0aGlzKSk7XG4gICAgfVxuICB9O1xuICBMb2NhVGFibGUucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihpZCkge1xuICAgIHJldHVybiB0aGlzLm9mZnNldHNbaWRdO1xuICB9O1xuICBMb2NhVGFibGUucHJvdG90eXBlLmxlbmd0aE9mID0gZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXRzW2lkICsgMV0gLSB0aGlzLm9mZnNldHNbaWRdO1xuICB9O1xuICBMb2NhVGFibGUucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uKG9mZnNldHMsIGFjdGl2ZUdseXBocykge1xuICAgIHZhciBMb2NhVGFibGUgPSBuZXcgVWludDMyQXJyYXkodGhpcy5vZmZzZXRzLmxlbmd0aCk7XG4gICAgdmFyIGdseWZQdHIgPSAwO1xuICAgIHZhciBsaXN0R2x5ZiA9IDA7XG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCBMb2NhVGFibGUubGVuZ3RoOyArK2spIHtcbiAgICAgIExvY2FUYWJsZVtrXSA9IGdseWZQdHI7XG4gICAgICBpZiAobGlzdEdseWYgPCBhY3RpdmVHbHlwaHMubGVuZ3RoICYmIGFjdGl2ZUdseXBoc1tsaXN0R2x5Zl0gPT0gaykge1xuICAgICAgICArK2xpc3RHbHlmO1xuICAgICAgICBMb2NhVGFibGVba10gPSBnbHlmUHRyO1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLm9mZnNldHNba107XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLm9mZnNldHNbayArIDFdIC0gc3RhcnQ7XG4gICAgICAgIGlmIChsZW4gPiAwKSB7XG4gICAgICAgICAgZ2x5ZlB0ciArPSBsZW47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIG5ld0xvY2FUYWJsZSA9IG5ldyBBcnJheShMb2NhVGFibGUubGVuZ3RoICogNCk7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBMb2NhVGFibGUubGVuZ3RoOyArK2opIHtcbiAgICAgIG5ld0xvY2FUYWJsZVs0ICogaiArIDNdID0gTG9jYVRhYmxlW2pdICYgMHgwMDAwMDBmZjtcbiAgICAgIG5ld0xvY2FUYWJsZVs0ICogaiArIDJdID0gKExvY2FUYWJsZVtqXSAmIDB4MDAwMGZmMDApID4+IDg7XG4gICAgICBuZXdMb2NhVGFibGVbNCAqIGogKyAxXSA9IChMb2NhVGFibGVbal0gJiAweDAwZmYwMDAwKSA+PiAxNjtcbiAgICAgIG5ld0xvY2FUYWJsZVs0ICogal0gPSAoTG9jYVRhYmxlW2pdICYgMHhmZjAwMDAwMCkgPj4gMjQ7XG4gICAgfVxuICAgIHJldHVybiBuZXdMb2NhVGFibGU7XG4gIH07XG4gIHJldHVybiBMb2NhVGFibGU7XG59KShUYWJsZSk7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiBmdW5jdGlvbiA6IGludmVydCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogY29tbWVudCA6IENoYW5nZSB0aGUgb2JqZWN0J3MgKGtleTogdmFsdWUpIHRvIGNyZWF0ZSBhbiBvYmplY3Qgd2l0aCAodmFsdWU6IGtleSkuKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG52YXIgaW52ZXJ0ID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHZhciBrZXksIHJldCwgdmFsO1xuICByZXQgPSB7fTtcbiAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgdmFsID0gb2JqZWN0W2tleV07XG4gICAgcmV0W3ZhbF0gPSBrZXk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qdmFyIHN1Y2Nlc3Nvck9mID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHZhciBhZGRlZCwgYWxwaGFiZXQsIGNhcnJ5LCBpLCBpbmRleCwgaXNVcHBlckNhc2UsIGxhc3QsIGxlbmd0aCwgbmV4dCwgcmVzdWx0O1xuICAgICAgICBhbHBoYWJldCA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XG4gICAgICAgIGxlbmd0aCA9IGFscGhhYmV0Lmxlbmd0aDtcbiAgICAgICAgcmVzdWx0ID0gaW5wdXQ7XG4gICAgICAgIGkgPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpID49IDApIHtcbiAgICAgICAgICAgIGxhc3QgPSBpbnB1dC5jaGFyQXQoLS1pKTtcbiAgICAgICAgICAgIGlmIChpc05hTihsYXN0KSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gYWxwaGFiZXQuaW5kZXhPZihsYXN0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA9IGxhc3Q7XG4gICAgICAgICAgICAgICAgICAgIGNhcnJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBhbHBoYWJldC5jaGFyQXQoKGluZGV4ICsgMSkgJSBsZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBpc1VwcGVyQ2FzZSA9IGxhc3QgPT09IGxhc3QudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVXBwZXJDYXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gbmV4dC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhcnJ5ID0gaW5kZXggKyAxID49IGxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnJ5ICYmIGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkID0gaXNVcHBlckNhc2UgPyAnQScgOiAnYSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhZGRlZCArIG5leHQgKyByZXN1bHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHQgPSArbGFzdCArIDE7XG4gICAgICAgICAgICAgICAgY2FycnkgPSBuZXh0ID4gOTtcbiAgICAgICAgICAgICAgICBpZiAoY2FycnkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjYXJyeSAmJiBpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICcxJyArIG5leHQgKyByZXN1bHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCBpKSArIG5leHQgKyByZXN1bHQuc2xpY2UoaSArIDEpO1xuICAgICAgICAgICAgaWYgKCFjYXJyeSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTsqL1xuXG52YXIgU3Vic2V0ID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBTdWJzZXQoZm9udCkge1xuICAgIHRoaXMuZm9udCA9IGZvbnQ7XG4gICAgdGhpcy5zdWJzZXQgPSB7fTtcbiAgICB0aGlzLnVuaWNvZGVzID0ge307XG4gICAgdGhpcy5uZXh0ID0gMzM7XG4gIH1cbiAgLypTdWJzZXQucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIChjaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHZhciBpLCBfaSwgX3JlZjtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZiA9IGNoYXJhY3Rlci5sZW5ndGg7IDAgPD0gX3JlZiA/IF9pIDwgX3JlZiA6IF9pID4gX3JlZjsgaSA9IDAgPD0gX3JlZiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlKGNoYXJhY3Rlci5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnVuaWNvZGVzW2NoYXJhY3Rlcl0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNldFt0aGlzLm5leHRdID0gY2hhcmFjdGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVuaWNvZGVzW2NoYXJhY3Rlcl0gPSB0aGlzLm5leHQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTsqL1xuICAvKlN1YnNldC5wcm90b3R5cGUuZW5jb2RlVGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICAgICB2YXIgY2hhciwgaSwgc3RyaW5nLCBfaSwgX3JlZjtcbiAgICAgICAgICAgIHN0cmluZyA9ICcnO1xuICAgICAgICAgICAgZm9yIChpID0gX2kgPSAwLCBfcmVmID0gdGV4dC5sZW5ndGg7IDAgPD0gX3JlZiA/IF9pIDwgX3JlZiA6IF9pID4gX3JlZjsgaSA9IDAgPD0gX3JlZiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICAgICAgICAgICAgY2hhciA9IHRoaXMudW5pY29kZXNbdGV4dC5jaGFyQ29kZUF0KGkpXTtcbiAgICAgICAgICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICAgIH07Ki9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLyogZnVuY3Rpb24gOiBnZW5lcmF0ZUNtYXAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogY29tbWVudCA6IFJldHVybnMgdGhlIHVuaWNvZGUgY21hcCBmb3IgdGhpcyBmb250LiAgICAgICAgICovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIFN1YnNldC5wcm90b3R5cGUuZ2VuZXJhdGVDbWFwID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1hcHBpbmcsIHJvbWFuLCB1bmljb2RlLCB1bmljb2RlQ21hcCwgX3JlZjtcbiAgICB1bmljb2RlQ21hcCA9IHRoaXMuZm9udC5jbWFwLnRhYmxlc1swXS5jb2RlTWFwO1xuICAgIG1hcHBpbmcgPSB7fTtcbiAgICBfcmVmID0gdGhpcy5zdWJzZXQ7XG4gICAgZm9yIChyb21hbiBpbiBfcmVmKSB7XG4gICAgICB1bmljb2RlID0gX3JlZltyb21hbl07XG4gICAgICBtYXBwaW5nW3JvbWFuXSA9IHVuaWNvZGVDbWFwW3VuaWNvZGVdO1xuICAgIH1cbiAgICByZXR1cm4gbWFwcGluZztcbiAgfTtcbiAgLypTdWJzZXQucHJvdG90eXBlLmdseXBoSURzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJldCwgcm9tYW4sIHVuaWNvZGUsIHVuaWNvZGVDbWFwLCB2YWwsIF9yZWY7XG4gICAgICAgICAgICB1bmljb2RlQ21hcCA9IHRoaXMuZm9udC5jbWFwLnRhYmxlc1swXS5jb2RlTWFwO1xuICAgICAgICAgICAgcmV0ID0gWzBdO1xuICAgICAgICAgICAgX3JlZiA9IHRoaXMuc3Vic2V0O1xuICAgICAgICAgICAgZm9yIChyb21hbiBpbiBfcmVmKSB7XG4gICAgICAgICAgICAgICAgdW5pY29kZSA9IF9yZWZbcm9tYW5dO1xuICAgICAgICAgICAgICAgIHZhbCA9IHVuaWNvZGVDbWFwW3VuaWNvZGVdO1xuICAgICAgICAgICAgICAgIGlmICgodmFsICE9IG51bGwpICYmIF9faW5kZXhPZi5jYWxsKHJldCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2godmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0LnNvcnQoKTtcbiAgICAgICAgfTsqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvKiBmdW5jdGlvbiA6IGdseXBoc0ZvciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiBjb21tZW50IDogUmV0dXJucyBzaW1wbGUgZ2x5cGggb2JqZWN0cyBmb3IgdGhlIGlucHV0IGNoYXJhY3Rlci4qL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBTdWJzZXQucHJvdG90eXBlLmdseXBoc0ZvciA9IGZ1bmN0aW9uKGdseXBoSURzKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxJRHMsIGdseXBoLCBnbHlwaHMsIGlkLCBfaSwgX2xlbiwgX3JlZjtcbiAgICBnbHlwaHMgPSB7fTtcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGdseXBoSURzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBpZCA9IGdseXBoSURzW19pXTtcbiAgICAgIGdseXBoc1tpZF0gPSB0aGlzLmZvbnQuZ2x5Zi5nbHlwaEZvcihpZCk7XG4gICAgfVxuICAgIGFkZGl0aW9uYWxJRHMgPSBbXTtcbiAgICBmb3IgKGlkIGluIGdseXBocykge1xuICAgICAgZ2x5cGggPSBnbHlwaHNbaWRdO1xuICAgICAgaWYgKGdseXBoICE9IG51bGwgPyBnbHlwaC5jb21wb3VuZCA6IHZvaWQgMCkge1xuICAgICAgICBhZGRpdGlvbmFsSURzLnB1c2guYXBwbHkoYWRkaXRpb25hbElEcywgZ2x5cGguZ2x5cGhJRHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWRkaXRpb25hbElEcy5sZW5ndGggPiAwKSB7XG4gICAgICBfcmVmID0gdGhpcy5nbHlwaHNGb3IoYWRkaXRpb25hbElEcyk7XG4gICAgICBmb3IgKGlkIGluIF9yZWYpIHtcbiAgICAgICAgZ2x5cGggPSBfcmVmW2lkXTtcbiAgICAgICAgZ2x5cGhzW2lkXSA9IGdseXBoO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZ2x5cGhzO1xuICB9O1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvKiBmdW5jdGlvbiA6IGVuY29kZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiBjb21tZW50IDogRW5jb2RlIHZhcmlvdXMgdGFibGVzIGZvciB0aGUgY2hhcmFjdGVycyB5b3UgdXNlLiAqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBTdWJzZXQucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uKGdseUlELCBpbmRleFRvTG9jRm9ybWF0KSB7XG4gICAgdmFyIGNtYXAsXG4gICAgICBjb2RlLFxuICAgICAgZ2x5ZixcbiAgICAgIGdseXBocyxcbiAgICAgIGlkLFxuICAgICAgaWRzLFxuICAgICAgbG9jYSxcbiAgICAgIG5ldzJvbGQsXG4gICAgICBuZXdJRHMsXG4gICAgICBuZXh0R2x5cGhJRCxcbiAgICAgIG9sZDJuZXcsXG4gICAgICBvbGRJRCxcbiAgICAgIG9sZElEcyxcbiAgICAgIHRhYmxlcyxcbiAgICAgIF9yZWY7XG4gICAgY21hcCA9IENtYXBUYWJsZS5lbmNvZGUodGhpcy5nZW5lcmF0ZUNtYXAoKSwgXCJ1bmljb2RlXCIpO1xuICAgIGdseXBocyA9IHRoaXMuZ2x5cGhzRm9yKGdseUlEKTtcbiAgICBvbGQybmV3ID0ge1xuICAgICAgMDogMFxuICAgIH07XG4gICAgX3JlZiA9IGNtYXAuY2hhck1hcDtcbiAgICBmb3IgKGNvZGUgaW4gX3JlZikge1xuICAgICAgaWRzID0gX3JlZltjb2RlXTtcbiAgICAgIG9sZDJuZXdbaWRzLm9sZF0gPSBpZHNbXCJuZXdcIl07XG4gICAgfVxuICAgIG5leHRHbHlwaElEID0gY21hcC5tYXhHbHlwaElEO1xuICAgIGZvciAob2xkSUQgaW4gZ2x5cGhzKSB7XG4gICAgICBpZiAoIShvbGRJRCBpbiBvbGQybmV3KSkge1xuICAgICAgICBvbGQybmV3W29sZElEXSA9IG5leHRHbHlwaElEKys7XG4gICAgICB9XG4gICAgfVxuICAgIG5ldzJvbGQgPSBpbnZlcnQob2xkMm5ldyk7XG4gICAgbmV3SURzID0gT2JqZWN0LmtleXMobmV3Mm9sZCkuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gYSAtIGI7XG4gICAgfSk7XG4gICAgb2xkSURzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9pLCBfbGVuLCBfcmVzdWx0cztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IG5ld0lEcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBpZCA9IG5ld0lEc1tfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2gobmV3Mm9sZFtpZF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH0pKCk7XG4gICAgZ2x5ZiA9IHRoaXMuZm9udC5nbHlmLmVuY29kZShnbHlwaHMsIG9sZElEcywgb2xkMm5ldyk7XG4gICAgbG9jYSA9IHRoaXMuZm9udC5sb2NhLmVuY29kZShnbHlmLm9mZnNldHMsIG9sZElEcyk7XG4gICAgdGFibGVzID0ge1xuICAgICAgY21hcDogdGhpcy5mb250LmNtYXAucmF3KCksXG4gICAgICBnbHlmOiBnbHlmLnRhYmxlLFxuICAgICAgbG9jYTogbG9jYSxcbiAgICAgIGhtdHg6IHRoaXMuZm9udC5obXR4LnJhdygpLFxuICAgICAgaGhlYTogdGhpcy5mb250LmhoZWEucmF3KCksXG4gICAgICBtYXhwOiB0aGlzLmZvbnQubWF4cC5yYXcoKSxcbiAgICAgIHBvc3Q6IHRoaXMuZm9udC5wb3N0LnJhdygpLFxuICAgICAgbmFtZTogdGhpcy5mb250Lm5hbWUucmF3KCksXG4gICAgICBoZWFkOiB0aGlzLmZvbnQuaGVhZC5lbmNvZGUoaW5kZXhUb0xvY0Zvcm1hdClcbiAgICB9O1xuICAgIGlmICh0aGlzLmZvbnQub3MyLmV4aXN0cykge1xuICAgICAgdGFibGVzW1wiT1MvMlwiXSA9IHRoaXMuZm9udC5vczIucmF3KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvbnQuZGlyZWN0b3J5LmVuY29kZSh0YWJsZXMpO1xuICB9O1xuICByZXR1cm4gU3Vic2V0O1xufSkoKTtcblxuanNQREYuQVBJLlBERk9iamVjdCA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHBhZDtcblxuICBmdW5jdGlvbiBQREZPYmplY3QoKSB7fVxuICBwYWQgPSBmdW5jdGlvbihzdHIsIGxlbmd0aCkge1xuICAgIHJldHVybiAoQXJyYXkobGVuZ3RoICsgMSkuam9pbihcIjBcIikgKyBzdHIpLnNsaWNlKC1sZW5ndGgpO1xuICB9O1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8qIGZ1bmN0aW9uIDogY29udmVydCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogY29tbWVudCA6Q29udmVydHMgcGRmIHRhZydzIC8gRm9udEJCb3ggYW5kIGFycmF5IHZhbHVlcyBpbiAvIFcgdG8gc3RyaW5ncyAqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIFBERk9iamVjdC5jb252ZXJ0ID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGUsIGl0ZW1zLCBrZXksIG91dCwgdmFsO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgIGl0ZW1zID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZXN1bHRzO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IG9iamVjdC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIGUgPSBvYmplY3RbX2ldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goUERGT2JqZWN0LmNvbnZlcnQoZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pKCkuam9pbihcIiBcIik7XG4gICAgICByZXR1cm4gXCJbXCIgKyBpdGVtcyArIFwiXVwiO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iamVjdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIFwiL1wiICsgb2JqZWN0O1xuICAgIH0gZWxzZSBpZiAob2JqZWN0ICE9IG51bGwgPyBvYmplY3QuaXNTdHJpbmcgOiB2b2lkIDApIHtcbiAgICAgIHJldHVybiBcIihcIiArIG9iamVjdCArIFwiKVwiO1xuICAgIH0gZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgXCIoRDpcIiArXG4gICAgICAgIHBhZChvYmplY3QuZ2V0VVRDRnVsbFllYXIoKSwgNCkgK1xuICAgICAgICBwYWQob2JqZWN0LmdldFVUQ01vbnRoKCksIDIpICtcbiAgICAgICAgcGFkKG9iamVjdC5nZXRVVENEYXRlKCksIDIpICtcbiAgICAgICAgcGFkKG9iamVjdC5nZXRVVENIb3VycygpLCAyKSArXG4gICAgICAgIHBhZChvYmplY3QuZ2V0VVRDTWludXRlcygpLCAyKSArXG4gICAgICAgIHBhZChvYmplY3QuZ2V0VVRDU2Vjb25kcygpLCAyKSArXG4gICAgICAgIFwiWilcIlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHt9LnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgICAgb3V0ID0gW1wiPDxcIl07XG4gICAgICBmb3IgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgdmFsID0gb2JqZWN0W2tleV07XG4gICAgICAgIG91dC5wdXNoKFwiL1wiICsga2V5ICsgXCIgXCIgKyBQREZPYmplY3QuY29udmVydCh2YWwpKTtcbiAgICAgIH1cbiAgICAgIG91dC5wdXNoKFwiPj5cIik7XG4gICAgICByZXR1cm4gb3V0LmpvaW4oXCJcXG5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIlwiICsgb2JqZWN0O1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIFBERk9iamVjdDtcbn0pKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/jspdf/dist/jspdf.es.min.js\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._previewCanvas[data-v-58e5a6ca] {\\n  text-align: center;\\n}\\n._previewCanvas canvas[data-v-58e5a6ca] {\\n  height: 200px;\\n  width: auto;\\n  display: inline-blockk;\\n  margin: 0 auto;\\n  border: 2px solid var(--c-gris);\\n}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC0xOVswXS5ydWxlc1swXS51c2VbMV0hLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtMTlbMF0ucnVsZXNbMF0udXNlWzJdIS4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTE5WzBdLnJ1bGVzWzBdLnVzZVszXSEuL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vc3JjL2FkYy1jb3JlL2ZpZWxkcy9QcmludE1hcC52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD01OGU1YTZjYSZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC8uL3NyYy9hZGMtY29yZS9maWVsZHMvUHJpbnRNYXAudnVlP2I0OGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX05PX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9ub1NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9OT19TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi5fcHJldmlld0NhbnZhc1tkYXRhLXYtNThlNWE2Y2FdIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuLl9wcmV2aWV3Q2FudmFzIGNhbnZhc1tkYXRhLXYtNThlNWE2Y2FdIHtcXG4gIGhlaWdodDogMjAwcHg7XFxuICB3aWR0aDogYXV0bztcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9ja2s7XFxuICBtYXJnaW46IDAgYXV0bztcXG4gIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWMtZ3Jpcyk7XFxufVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&\n");

/***/ }),

/***/ "./node_modules/vue-style-loader/index.js??clonedRuleSet-19[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-style-loader/index.js??clonedRuleSet-19[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& */ \"./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = (__webpack_require__(/*! !../../../node_modules/vue-style-loader/lib/addStylesClient.js */ \"./node_modules/vue-style-loader/lib/addStylesClient.js\")[\"default\"])\nvar update = add(\"ec2e899e\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(true) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(/*! !!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& */ \"./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&\", function() {\n     var newContent = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true& */ \"./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC0xOVswXS5ydWxlc1swXS51c2VbMF0hLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC0xOVswXS5ydWxlc1swXS51c2VbMV0hLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtMTlbMF0ucnVsZXNbMF0udXNlWzJdIS4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTE5WzBdLnJ1bGVzWzBdLnVzZVszXSEuL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vc3JjL2FkYy1jb3JlL2ZpZWxkcy9QcmludE1hcC52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD01OGU1YTZjYSZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC8uL3NyYy9hZGMtY29yZS9maWVsZHMvUHJpbnRNYXAudnVlP2M0ODUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTE5WzBdLnJ1bGVzWzBdLnVzZVsxXSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTE5WzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtMTlbMF0ucnVsZXNbMF0udXNlWzNdIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vUHJpbnRNYXAudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9NThlNWE2Y2EmbGFuZz1zY3NzJnNjb3BlZD10cnVlJlwiKTtcbmlmKGNvbnRlbnQuX19lc01vZHVsZSkgY29udGVudCA9IGNvbnRlbnQuZGVmYXVsdDtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgYWRkID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCJlYzJlODk5ZVwiLCBjb250ZW50LCBmYWxzZSwge1wic291cmNlTWFwXCI6ZmFsc2UsXCJzaGFkb3dNb2RlXCI6ZmFsc2V9KTtcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcbiAvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuIGlmKCFjb250ZW50LmxvY2Fscykge1xuICAgbW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTE5WzBdLnJ1bGVzWzBdLnVzZVsxXSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTE5WzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtMTlbMF0ucnVsZXNbMF0udXNlWzNdIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vUHJpbnRNYXAudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9NThlNWE2Y2EmbGFuZz1zY3NzJnNjb3BlZD10cnVlJlwiLCBmdW5jdGlvbigpIHtcbiAgICAgdmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC0xOVswXS5ydWxlc1swXS51c2VbMV0hLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2xvYWRlcnMvc3R5bGVQb3N0TG9hZGVyLmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC0xOVswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTE5WzBdLnJ1bGVzWzBdLnVzZVszXSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1ByaW50TWFwLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTU4ZTVhNmNhJmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIik7XG4gICAgIGlmKG5ld0NvbnRlbnQuX19lc01vZHVsZSkgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQuZGVmYXVsdDtcbiAgICAgaWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG4gICAgIHVwZGF0ZShuZXdDb250ZW50KTtcbiAgIH0pO1xuIH1cbiAvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG4gbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/vue-style-loader/index.js??clonedRuleSet-19[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/PrintMap.vue?vue&type=style&index=0&id=58e5a6ca&lang=scss&scoped=true&\n");

/***/ })

}]);