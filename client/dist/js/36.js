(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[36],{27036:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"_videoEffects"},[a("div",{staticClass:"_leftBtns"},[a("DLabel",{attrs:{str:e.$t("effect")}}),a("select",{domProps:{value:e.selected_effect_type},on:{change:e.setEffectType}},e._l(e.available_effects,(function(t){return a("option",{key:t.key,domProps:{value:t.key}},[e._v(" "+e._s(t.label)+" ")])})),0),a("div",{staticClass:"u-spacingBottom"}),"colored_filter"===e.selected_effect_type?a("div",{staticClass:"u-spacingBottom"},[a("ColorInput",{attrs:{can_toggle:!1,live_editing:!0,value:e.make.color_filter,default_value:"#fc4b60"},on:{save:function(t){return e.updatePubliMeta({color_filter:t})}}})],1):"speed_up"===e.selected_effect_type?a("div",{staticClass:"u-spacingBottom"},[a("RangeValueInput",{attrs:{label:e.$t("playback_speed"),value:e.make.playback_speed,can_toggle:!1,min:100,max:1e3,step:1,default_value:100,suffix:"%",ticks:[100,200,500,1e3]},on:{save:function(t){return e.updatePubliMeta({playback_speed:t})}}}),e.make.playback_speed<50?a("small",{domProps:{innerHTML:e._s(e.$t("slowing_video_down_limit"))}}):e._e()],1):"slow_down"===e.selected_effect_type?a("div",{staticClass:"u-spacingBottom"},[a("RangeValueInput",{attrs:{label:e.$t("playback_speed"),value:e.make.playback_speed,can_toggle:!1,min:1,max:100,step:1,default_value:50,suffix:"%",ticks:[1,10,25,50]},on:{save:function(t){return e.updatePubliMeta({playback_speed:t})}}}),e.make.playback_speed<50?a("small",{domProps:{innerHTML:e._s(e.$t("slowing_video_down_limit"))}}):e._e()],1):"mirror"===e.selected_effect_type?a("div",{staticClass:"u-spacingBottom"},[a("select",{domProps:{value:e.make.flip},on:{change:function(t){return e.updatePubliMeta({flip:t.target.value})}}},[a("option",{attrs:{value:"vflip"}},[e._v(" "+e._s(e.$t("vertical_flip").toLowerCase())+" ")]),a("option",{attrs:{value:"hflip"}},[e._v(" "+e._s(e.$t("horizontal_flip").toLowerCase())+" ")]),a("option",{attrs:{value:"hflip, vflip"}},[e._v(" "+e._s(e.$t("both").toLowerCase())+" ")])])]):"rotate"===e.selected_effect_type?a("div",{staticClass:"u-spacingBottom"},[a("select",{domProps:{value:e.make.rotation},on:{change:function(t){return e.updatePubliMeta({rotation:t.target.value})}}},[a("option",{attrs:{value:"cw"}},[e._v(e._s(e.$t("move_right"))+" ⟳")]),a("option",{attrs:{value:"ccw"}},[e._v(e._s(e.$t("move_left"))+" ⟲")])])]):e._e(),a("button",{staticClass:"u-button u-button_bleumarine",attrs:{type:"button"},on:{click:function(t){e.show_render_modal=!0}}},[a("b-icon",{attrs:{icon:"check"}}),e._v(" "+e._s(e.$t("make"))+" ")],1),e.show_render_modal?a("ExportSaveMakeModal2",{attrs:{base_instructions:e.base_instructions,make:e.make},on:{close:function(t){e.show_render_modal=!1}}}):e._e()],1),a("div",{staticClass:"_cropWindow",attrs:{"data-rotate":e.rotate_preview}},[a("MediaContent",{attrs:{file:e.base_media,resolution:1600,show_fs_button:!0,context:"full"}}),"colored_filter"===e.selected_effect_type?a("div",{staticClass:"_coloredFilter",style:{backgroundColor:e.make.color_filter}}):e._e()],1)])},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseModal2",{attrs:{title:e.$t("export")},on:{close:e.removeAndCloseModal}},[a("div",{staticClass:"_cont"},[e.created_video?[a("div",{staticClass:"_preview"},[a("MediaContent",{attrs:{file:e.created_video,resolution:1600,show_fs_button:!0,context:"full"}})],1)]:[a("div",[a("DLabel",{attrs:{str:e.$t("quality")}}),a("div",{},[a("SelectField2",{attrs:{value:e.resolution_preset_picked,options:e.presets,can_edit:!0,hide_validation:!0},on:{change:function(t){e.resolution_preset_picked=t}}})],1)],1)]],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[e.created_video||e.is_exporting?e.is_exporting?[a("div",{key:"loader",staticClass:"_spinner"},[a("AnimatedCounter",{attrs:{value:e.progress_percent}})],1)]:[a("div",{staticClass:"u-sameRow"},[a("a",{staticClass:"u-buttonLink",attrs:{disabled:!e.export_href,download:e.export_name,href:e.export_href,target:"_blank"}},[e._v(" "+e._s(e.$t("download"))+" ")]),a("button",{staticClass:"u-button u-button_red",attrs:{type:"button"},on:{click:e.saveToProject}},[a("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[a("path",{staticStyle:{fill:"var(--c-rouge)"},attrs:{d:"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z"}}),a("g",{staticStyle:{fill:"var(--c-orange)"}},[a("path",{attrs:{d:"m42 42h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m73.2 42h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m104.4 42h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m42 73.5h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m73.2 73.5h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m104.4 73.5h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m42 105h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m73.2 105h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m104.4 105h21.6v21h-21.6z"}})])]),e._v(" "+e._s(e.$t("save_to_project"))+" ")])]),e.finished_saving_to_project?a("div",{staticClass:"_saveNotice"},[e._v(" "+e._s(e.$t("media_was_saved_to_project"))+" ")]):e._e()]:[a("div",[a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:e.renderVideo}},[a("b-icon",{attrs:{icon:"tools"}}),e._v(" "+e._s(e.$t("preview_new"))+" ")],1)]),a("div",{staticClass:"u-instructions"},[e._v(" "+e._s(e.$t("wont_remove_original"))+" ")])]],2)])},r=[],n={props:{base_instructions:Object,make:Object},components:{},data(){return{is_exporting:!1,finished_saving_to_project:!1,resolution_preset_picked:"source",progress_percent:0,presets:[{key:"source",text:this.$t("close_to_source")},{key:"high",text:this.$t("high")},{key:"medium",text:this.$t("medium")}],created_video:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{export_href(){return this.created_video?this.makeMediaFileURL({$path:this.created_video.$path,$media_filename:this.created_video.$media_filename}):""},export_name(){return this.created_video?this.created_video.$media_filename:""}},methods:{async renderVideo(){this.progress_percent=0,this.is_exporting=!0,this.created_video=!1;let e=Object.assign({},this.base_instructions);const t={$origin:"make"};this.connected_as?.$path&&(t.$authors=[this.connected_as.$path]),e.additional_meta=t;const a=await this.$api.exportFolder({path:this.make.$path,instructions:e});this.$api.join({room:"task_"+a});const s=({task_id:e,progress:t})=>{e===a&&(this.progress_percent=t)};this.$eventHub.$on("task.status",s);const o=({task_id:e,message:t})=>{e===a&&(this.$eventHub.$off("task.ended",o),this.$api.leave({room:"task_"+a}),"completed"===t.event?this.created_video=t.file:"aborted"===t.event||"failed"===t.event&&t.info,this.progress_percent=100,this.is_exporting=!1)};this.$eventHub.$on("task.ended",o)},removeAndCloseModal(){this.created_video&&this.$api.deleteItem({path:this.created_video.$path}),this.$emit("close")},async saveToProject(){this.finished_saving_to_project=!0,this.$eventHub.$emit("animatePane","collect"),setTimeout((()=>{this.$emit("close")}),3e3)}}},l=n,d=(a(54639),a(1001)),c=(0,d.Z)(l,i,r,!1,null,"ede19470",null),_=c.exports,p={props:{make:Object,base_media:Object},components:{ExportSaveMakeModal2:_},data(){return{show_render_modal:!1,available_effects:[{key:"black_and_white",label:this.$t("black_and_white")},{key:"colored_filter",label:this.$t("colored_filter")},{key:"slow_down",label:this.$t("slow_down")},{key:"speed_up",label:this.$t("speed_up")},{key:"reverse",label:this.$t("reverse")},{key:"rotate",label:this.$t("rotate")},{key:"mirror",label:this.$t("mirror")}]}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{base_instructions(){const e="video_effects",t=this.selected_effect_type,a=this.base_media.$media_filename+"-"+t,s=this.makeMediaFilePath({$path:this.base_media.$path,$media_filename:this.base_media.$media_filename});let o={};return"colored_filter"===t?o={color_filter:this.make.color_filter}:"slow_down"===t||"speed_up"===t?o={playback_speed:this.make.playback_speed}:"mirror"===t?o={flip:this.make.flip}:"rotate"===t&&(o={rotation:this.make.rotation}),{recipe:e,effect_type:t,effect_opts:o,suggested_file_name:a,base_media_path:s}},rotate_preview(){return"rotate"===this.selected_effect_type?this.make.rotation:"mirror"===this.selected_effect_type&&this.make.flip},selected_effect_type:{get(){return this.make.effect_type||"black_and_white"}}},methods:{setEffectType(e){const t=e.target.value;let a={effect_type:t};"speed_up"===t?a.playback_speed=200:"slow_down"===t?a.playback_speed=50:"rotate"===t&&(a.rotation="cw"),this.updatePubliMeta(a)},async updatePubliMeta(e){return await this.$api.updateMeta({path:this.make.$path,new_meta:e})}}},u=p,v=(a(91935),(0,d.Z)(u,s,o,!1,null,"32786b2d",null)),f=v.exports},62076:function(e,t,a){"use strict";a.r(t);var s=a(8081),o=a.n(s),i=a(23645),r=a.n(i),n=r()(o());n.push([e.id,"._saveNotice[data-v-ede19470]{inset:-2px;background:hsla(0,0%,100%,.95)}._saveNotice[data-v-ede19470],._spinner[data-v-ede19470]{position:absolute;display:flex;justify-content:center;align-items:center}._spinner[data-v-ede19470]{top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.7);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}._preview[data-v-ede19470]{margin:calc(var(--spacing)*1) 0}",""]),t["default"]=n},35317:function(e,t,a){"use strict";a.r(t);var s=a(8081),o=a.n(s),i=a(23645),r=a.n(i),n=r()(o());n.push([e.id,'._videoEffects[data-v-32786b2d]{display:flex;flex-flow:row wrap;align-items:flex-start;justify-content:space-around;gap:calc(var(--spacing)*1);border-radius:6px;width:100%;max-width:880px;margin:0 auto;background:#fff;padding:calc(var(--spacing)/1)}._videoEffects ._leftBtns[data-v-32786b2d]{flex:0 0 200px}._videoEffects ._cropWindow[data-v-32786b2d]{position:relative;flex:0 1 60vmin}._cropWindow[data-v-32786b2d]{position:relative}._cropWindow[data-v-32786b2d]  .plyr__video-wrapper{transition:transform .6s cubic-bezier(.19,1,.22,1);transform-origin:center}._cropWindow[data-rotate=cw][data-v-32786b2d]  .plyr__video-wrapper{transform:rotate(90deg)}._cropWindow[data-rotate=ccw][data-v-32786b2d]  .plyr__video-wrapper{transform:rotate(-90deg)}._cropWindow[data-rotate=hflip][data-v-32786b2d]  .plyr__video-wrapper{transform:scaleX(-1)}._cropWindow[data-rotate=vflip][data-v-32786b2d]  .plyr__video-wrapper{transform:scaleY(-1)}._cropWindow[data-rotate="hflip, vflip"][data-v-32786b2d]  .plyr__video-wrapper{transform:scale(-1)}._cropWindow>*[data-v-32786b2d]{width:100%;aspect-ratio:1/1}._coloredFilter[data-v-32786b2d]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:1;mix-blend-mode:overlay;pointer-events:none}',""]),t["default"]=n},54639:function(e,t,a){var s=a(62076);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=a(20730).Z;o("0321a71d",s,!0,{sourceMap:!1,shadowMode:!1})},91935:function(e,t,a){var s=a(35317);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=a(20730).Z;o("5c3ffde4",s,!0,{sourceMap:!1,shadowMode:!1})}}]);