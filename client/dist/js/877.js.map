{"version":3,"file":"js/877.js","mappings":"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","sources":["webpack://app/./src/components/makes/EditImage.vue","webpack://app/src/components/makes/EditImage.vue","webpack://app/./src/components/makes/EditImage.vue?ed1e","webpack://app/./src/components/makes/EditImage.vue?8600","webpack://app/./src/components/makes/ExportSaveMakeModal.vue","webpack://app/src/components/makes/ExportSaveMakeModal.vue","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?1b34","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?dc82","webpack://app/./src/ddr/Vector.js","webpack://app/./src/ddr/Matrix.js","webpack://app/./src/ddr/helper.js","webpack://app/src/ddr/index.vue","webpack://app/./src/ddr/index.vue","webpack://app/./src/ddr/index.vue?fc3c","webpack://app/./node_modules/yoyoo-ddr/dist/yoyoo-ddr.css","webpack://app/./src/components/makes/EditImage.vue?f6af","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?150f","webpack://app/./src/ddr/index.vue?efef","webpack://app/./node_modules/yoyoo-ddr/dist/yoyoo-ddr.css?2686","webpack://app/./src/components/makes/EditImage.vue?895c","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?bf60","webpack://app/./src/ddr/index.vue?268a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"_cropImage\"},[_c('script',{tag:\"component\",attrs:{\"src\":_vm.$root.publicPath + 'context-filter-polyfill.min.js'}}),_c('div',{staticClass:\"_sidebyside\"},[_c('div',{staticClass:\"_leftBtns\"},[_c('fieldset',{staticClass:\"u-spacingBottom\"},[_c('legend',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"crop\")))]),_c('div',{staticClass:\"_btnRow\"},[_c('button',{staticClass:\"u-button u-button_small u-button_orange\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.resetCrop}},[_c('b-icon',{attrs:{\"icon\":\"plus-square-dotted\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"reset_crop\"))+\" \")],1),_c('button',{staticClass:\"u-button u-button_small u-button_bleuvert\",attrs:{\"type\":\"button\",\"disabled\":\"\"},on:{\"click\":function($event){return _vm.rotateImage(90)}}},[_c('b-icon',{attrs:{\"icon\":\"arrow-clockwise\"}})],1),_c('button',{staticClass:\"u-button u-button_small u-button_bleuvert\",attrs:{\"type\":\"button\",\"disabled\":\"\"},on:{\"click\":function($event){return _vm.rotateImage(-90)}}},[_c('b-icon',{attrs:{\"icon\":\"arrow-counterclockwise\"}})],1)]),_c('div',{staticClass:\"_values\"},[_c('NumberInput',{attrs:{\"label\":'x',\"value\":_vm.make.crop_options && _vm.make.crop_options.x\n                ? _vm.make.crop_options.x\n                : 0,\"min\":0,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updateFromInputs({ x: $event })}}}),_c('NumberInput',{attrs:{\"label\":'y',\"value\":_vm.make.crop_options && _vm.make.crop_options.y\n                ? _vm.make.crop_options.y\n                : 0,\"min\":0,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updateFromInputs({ y: $event })}}})],1),_c('div',{staticClass:\"u-spacingBottom _values\"},[_c('NumberInput',{attrs:{\"label\":_vm.$t('width'),\"value\":_vm.make.crop_options && _vm.make.crop_options.width\n                ? _vm.make.crop_options.width\n                : 30,\"min\":0,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updateFromInputs({ width: $event })}}}),_c('NumberInput',{attrs:{\"label\":_vm.$t('height'),\"value\":_vm.make.crop_options && _vm.make.crop_options.height\n                ? _vm.make.crop_options.height\n                : 20,\"min\":0,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updateFromInputs({ height: $event })}}})],1)]),_c('fieldset',{staticClass:\"u-spacingBottom\"},[_c('legend',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"adjust\")))]),_c('div',{staticClass:\"u-spacingBottom\"}),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"can_toggle\":true,\"label\":_vm.$t('brightness'),\"value\":_vm.make.image_brightness,\"min\":0,\"max\":200,\"step\":1,\"default_value\":100,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updatePubliMeta({ image_brightness: $event })}}}),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"can_toggle\":true,\"label\":_vm.$t('contrast'),\"value\":_vm.make.image_contrast,\"min\":0,\"max\":200,\"step\":1,\"default_value\":100,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updatePubliMeta({ image_contrast: $event })}}}),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"can_toggle\":true,\"label\":_vm.$t('saturation'),\"value\":_vm.make.image_saturation,\"min\":0,\"max\":200,\"step\":1,\"default_value\":100,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updatePubliMeta({ image_saturation: $event })}}}),_c('RangeValueInput',{attrs:{\"can_toggle\":true,\"label\":_vm.$t('blur'),\"value\":_vm.make.image_blur,\"min\":0,\"max\":100,\"step\":1,\"default_value\":0,\"suffix\":'px'},on:{\"save\":function($event){return _vm.updatePubliMeta({ image_blur: $event })}}})],1),_c('div',{staticClass:\"u-spacingBottom\"},[_c('button',{staticClass:\"u-button u-button_bleumarine\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_save_export_modal = true}}},[_c('b-icon',{attrs:{\"icon\":\"check\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"submit\"))+\" \")],1)])]),_c('div',{staticClass:\"_cropWindow\"},[_c('div',{ref:\"cropCanvasContainer\",staticClass:\"_canvasContainer\"},[_c('canvas',{ref:\"cropCanvas\",staticClass:\"_canvas\",attrs:{\"width\":\"1280\",\"height\":\"720\"}}),_c('div',{staticClass:\"_mask\"},[_c('div',{staticClass:\"_maskContent\",style:(_vm.mask_styles)})]),_c('DDR',{key:_vm.crop_key,staticClass:\"_cropFrame\",attrs:{\"value\":_vm.crop_transform,\"rotatable\":false,\"acceptRatio\":_vm.aspect_ratio,\"id\":'1',\"parent\":true,\"handlerSize\":20},on:{\"drag\":_vm.updateMask,\"dragend\":_vm.dragEnd,\"resizestart\":_vm.resizeStart,\"resize\":_vm.updateMask,\"resizeend\":_vm.dragEnd}})],1)])]),(_vm.show_save_export_modal)?_c('ExportSaveMakeModal',{attrs:{\"title\":_vm.$t('save_export_cropped'),\"export_blob\":_vm.export_blob,\"export_name\":_vm.image_export_name,\"project_path\":_vm.project_path},on:{\"close\":function($event){_vm.show_save_export_modal = false}}},[_c('div',{staticClass:\"u-spacingBottom _preview\"},[_c('canvas',{ref:\"previewCanvas\",staticClass:\"_previewCanvas\",attrs:{\"width\":\"1280\",\"height\":\"720\"}})]),_vm._v(\" \"+_vm._s(_vm.$t(\"resolution\"))+\": \"+_vm._s(_vm.export_width)+\"×\"+_vm._s(_vm.export_height)+\" \")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_cropImage\">\n    <component\n      :is=\"'script'\"\n      :src=\"$root.publicPath + 'context-filter-polyfill.min.js'\"\n    />\n    <div class=\"_sidebyside\">\n      <div class=\"_leftBtns\">\n        <fieldset class=\"u-spacingBottom\">\n          <legend class=\"u-label\">{{ $t(\"crop\") }}</legend>\n\n          <div class=\"_btnRow\">\n            <button\n              type=\"button\"\n              class=\"u-button u-button_small u-button_orange\"\n              @click=\"resetCrop\"\n            >\n              <b-icon icon=\"plus-square-dotted\" />\n              {{ $t(\"reset_crop\") }}\n            </button>\n\n            <button\n              type=\"button\"\n              class=\"u-button u-button_small u-button_bleuvert\"\n              @click=\"rotateImage(90)\"\n              disabled\n            >\n              <b-icon icon=\"arrow-clockwise\" />\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-button u-button_small u-button_bleuvert\"\n              @click=\"rotateImage(-90)\"\n              disabled\n            >\n              <b-icon icon=\"arrow-counterclockwise\" />\n            </button>\n          </div>\n\n          <div class=\"_values\">\n            <NumberInput\n              :label=\"'x'\"\n              :value=\"\n                make.crop_options && make.crop_options.x\n                  ? make.crop_options.x\n                  : 0\n              \"\n              :min=\"0\"\n              :suffix=\"'%'\"\n              @save=\"updateFromInputs({ x: $event })\"\n            />\n            <NumberInput\n              :label=\"'y'\"\n              :value=\"\n                make.crop_options && make.crop_options.y\n                  ? make.crop_options.y\n                  : 0\n              \"\n              :min=\"0\"\n              :suffix=\"'%'\"\n              @save=\"updateFromInputs({ y: $event })\"\n            />\n          </div>\n          <div class=\"u-spacingBottom _values\">\n            <NumberInput\n              :label=\"$t('width')\"\n              :value=\"\n                make.crop_options && make.crop_options.width\n                  ? make.crop_options.width\n                  : 30\n              \"\n              :min=\"0\"\n              :suffix=\"'%'\"\n              @save=\"updateFromInputs({ width: $event })\"\n            />\n            <NumberInput\n              :label=\"$t('height')\"\n              :value=\"\n                make.crop_options && make.crop_options.height\n                  ? make.crop_options.height\n                  : 20\n              \"\n              :min=\"0\"\n              :suffix=\"'%'\"\n              @save=\"updateFromInputs({ height: $event })\"\n            />\n          </div>\n        </fieldset>\n\n        <fieldset class=\"u-spacingBottom\">\n          <legend class=\"u-label\">{{ $t(\"adjust\") }}</legend>\n\n          <!-- <ToggleInput\n            :label=\"$t('flip_horizontally')\"\n            :content=\"make.flip_horizontally\"\n            @update:content=\"updatePubliMeta({ flip_horizontally: $event })\"\n          />\n          <ToggleInput\n            :label=\"$t('flip_vertically')\"\n            :content=\"make.flip_vertically\"\n            @update:content=\"updatePubliMeta({ flip_vertically: $event })\"\n          /> -->\n\n          <div class=\"u-spacingBottom\" />\n\n          <RangeValueInput\n            class=\"u-spacingBottom\"\n            :can_toggle=\"true\"\n            :label=\"$t('brightness')\"\n            :value=\"make.image_brightness\"\n            :min=\"0\"\n            :max=\"200\"\n            :step=\"1\"\n            :default_value=\"100\"\n            :suffix=\"'%'\"\n            @save=\"updatePubliMeta({ image_brightness: $event })\"\n          />\n          <RangeValueInput\n            class=\"u-spacingBottom\"\n            :can_toggle=\"true\"\n            :label=\"$t('contrast')\"\n            :value=\"make.image_contrast\"\n            :min=\"0\"\n            :max=\"200\"\n            :step=\"1\"\n            :default_value=\"100\"\n            :suffix=\"'%'\"\n            @save=\"updatePubliMeta({ image_contrast: $event })\"\n          />\n          <RangeValueInput\n            class=\"u-spacingBottom\"\n            :can_toggle=\"true\"\n            :label=\"$t('saturation')\"\n            :value=\"make.image_saturation\"\n            :min=\"0\"\n            :max=\"200\"\n            :step=\"1\"\n            :default_value=\"100\"\n            :suffix=\"'%'\"\n            @save=\"updatePubliMeta({ image_saturation: $event })\"\n          />\n          <RangeValueInput\n            :can_toggle=\"true\"\n            :label=\"$t('blur')\"\n            :value=\"make.image_blur\"\n            :min=\"0\"\n            :max=\"100\"\n            :step=\"1\"\n            :default_value=\"0\"\n            :suffix=\"'px'\"\n            @save=\"updatePubliMeta({ image_blur: $event })\"\n          />\n        </fieldset>\n\n        <div class=\"u-spacingBottom\">\n          <button\n            type=\"button\"\n            class=\"u-button u-button_bleumarine\"\n            @click=\"show_save_export_modal = true\"\n          >\n            <b-icon icon=\"check\" />\n            {{ $t(\"submit\") }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"_cropWindow\">\n        <div class=\"_canvasContainer\" ref=\"cropCanvasContainer\">\n          <canvas class=\"_canvas\" ref=\"cropCanvas\" width=\"1280\" height=\"720\" />\n          <div class=\"_mask\">\n            <div class=\"_maskContent\" :style=\"mask_styles\" />\n          </div>\n          <DDR\n            class=\"_cropFrame\"\n            :key=\"crop_key\"\n            :value=\"crop_transform\"\n            :rotatable=\"false\"\n            :acceptRatio=\"aspect_ratio\"\n            :id=\"'1'\"\n            :parent=\"true\"\n            :handlerSize=\"20\"\n            @drag=\"updateMask\"\n            @dragend=\"dragEnd\"\n            @resizestart=\"resizeStart\"\n            @resize=\"updateMask\"\n            @resizeend=\"dragEnd\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <ExportSaveMakeModal\n      v-if=\"show_save_export_modal\"\n      :title=\"$t('save_export_cropped')\"\n      :export_blob=\"export_blob\"\n      :export_name=\"image_export_name\"\n      :project_path=\"project_path\"\n      @close=\"show_save_export_modal = false\"\n    >\n      <div class=\"u-spacingBottom _preview\">\n        <canvas\n          class=\"_previewCanvas\"\n          ref=\"previewCanvas\"\n          width=\"1280\"\n          height=\"720\"\n        />\n      </div>\n      {{ $t(\"resolution\") }}: {{ export_width }}×{{ export_height }}\n    </ExportSaveMakeModal>\n  </div>\n</template>\n<script>\nimport DDR from \"@/ddr/index.vue\"; // eslint-disable-line\nimport \"yoyoo-ddr/dist/yoyoo-ddr.css\";\n\nimport ExportSaveMakeModal from \"@/components/makes/ExportSaveMakeModal.vue\";\n\nexport default {\n  props: {\n    make: Object,\n    project_path: String,\n    base_media: Object,\n  },\n  components: {\n    DDR,\n    ExportSaveMakeModal,\n  },\n  data() {\n    return {\n      scale: 1,\n\n      export_blob: false,\n      export_width: 0,\n      export_height: 0,\n\n      crop_key: new Date().getTime(),\n      aspect_ratio: true,\n\n      show_crop: true,\n      crop_transform: {\n        x: 0,\n        y: 0,\n        width: 100,\n        height: 100,\n        rotation: 0,\n      },\n      mask_prop: {\n        x: 0,\n        y: 0,\n        width: 100,\n        height: 100,\n        rotation: 0,\n      },\n\n      show_save_export_modal: false,\n    };\n  },\n  created() {},\n  async mounted() {\n    if (this.base_media)\n      this.$nextTick(async () => {\n        await this.drawImageToCanvas();\n        this.setTransformFromMake();\n      });\n  },\n  beforeDestroy() {},\n  watch: {\n    \"make.crop_options\": {\n      handler() {\n        this.setTransformFromMake();\n      },\n      deep: true,\n    },\n    async \"make.image_brightness\"() {\n      await this.drawImageToCanvas();\n    },\n    async \"make.image_contrast\"() {\n      await this.drawImageToCanvas();\n    },\n    async \"make.image_saturation\"() {\n      await this.drawImageToCanvas();\n    },\n    async \"make.image_blur\"() {\n      await this.drawImageToCanvas();\n    },\n    async \"make.flip_horizontally\"() {\n      await this.drawImageToCanvas();\n    },\n    async \"make.flip_vertically\"() {\n      await this.drawImageToCanvas();\n    },\n    base_media() {\n      (async () => {\n        await this.drawImageToCanvas();\n        await this.resetCrop();\n      })();\n    },\n    show_save_export_modal() {\n      if (this.show_save_export_modal)\n        this.$nextTick(() => {\n          this.$nextTick(() => {\n            this.updatePreviewCanvas();\n          });\n        });\n    },\n    \"$root.window.innerWidth\"() {\n      this.setTransformFromMake();\n    },\n    \"$root.window.innerHeight\"() {\n      this.setTransformFromMake();\n    },\n  },\n  computed: {\n    image_export_name() {\n      return this.base_media.$media_filename + \"_edited.png\";\n    },\n    image_url() {\n      return this.makeMediaFileURL({\n        $path: this.base_media.$path,\n        $media_filename: this.base_media.$media_filename,\n      });\n    },\n    mask_styles() {\n      return {\n        left: this.mask_prop.x + \"px\",\n        top: this.mask_prop.y + \"px\",\n        width: this.mask_prop.width + \"px\",\n        height: this.mask_prop.height + \"px\",\n      };\n    },\n  },\n  methods: {\n    async updatePubliMeta(new_meta) {\n      return await this.$api.updateMeta({\n        path: this.make.$path,\n        new_meta,\n      });\n    },\n    async resetCrop() {\n      const default_transform = {\n        x: 0,\n        y: 0,\n        width: 100,\n        height: 100,\n        rotation: 0,\n      };\n      await this.updatePubliMeta({\n        crop_options: default_transform,\n      });\n    },\n    rotateImage() {},\n    setTransformFromMake() {\n      let x = this.make.crop_options?.x || 0;\n      let y = this.make.crop_options?.y || 0;\n      let width = this.make.crop_options?.width || 100;\n      let height = this.make.crop_options?.height || 100;\n\n      const cropCanvas = this.$refs.cropCanvas;\n      const cw = cropCanvas.parentElement.offsetWidth;\n      const ch = cropCanvas.parentElement.offsetHeight;\n\n      this.crop_transform.x = (x / 100) * cw;\n      this.crop_transform.y = (y / 100) * ch;\n      this.crop_transform.width = (width / 100) * cw;\n      this.crop_transform.height = (height / 100) * ch;\n\n      this.setMaskProps(this.crop_transform);\n\n      this.crop_key = new Date().getTime();\n    },\n    async drawImageToCanvas() {\n      console.log(\"drawImageToCanvas\");\n\n      const cropCanvas = this.$refs.cropCanvas;\n      const cropCanvasContainer = this.$refs.cropCanvasContainer;\n      if (!cropCanvas || !cropCanvasContainer) return false;\n\n      let img = new Image();\n      img.src = this.image_url;\n      await img.decode();\n\n      let width = img.naturalWidth || 1280;\n      let height = img.naturalHeight || 720;\n      const ratio = width / height;\n\n      const max_crop_height = this.$root.window.innerHeight * 0.75;\n      if (height > max_crop_height) {\n        height = max_crop_height;\n        width = height * ratio;\n      }\n\n      const max_crop_width = this.$root.window.innerWidth * 0.75;\n      if (width > max_crop_width) {\n        width = max_crop_width;\n        height = width / ratio;\n      }\n\n      if (width !== cropCanvas.width) cropCanvas.width = width;\n      if (height !== cropCanvas.height) cropCanvas.height = height;\n\n      // cropCanvasContainer.style[\"aspect-ratio\"] = width + \"/\" + height;\n      cropCanvasContainer.style.width = width + \"px\";\n      cropCanvasContainer.style.height = height + \"px\";\n\n      const context = cropCanvas.getContext(\"2d\");\n      context.clearRect(0, 0, cropCanvas.width, cropCanvas.height);\n\n      context.filter = this.generateFilters();\n      this.flipContextOrNot(context, width, height);\n\n      context.drawImage(img, 0, 0, width, height);\n    },\n\n    flipContextOrNot(context, width, height) {\n      if (\n        this.make.flip_horizontally === true ||\n        this.make.flip_vertically === true\n      ) {\n        context.translate(width / 2, height / 2);\n\n        const x_flip = this.make.flip_horizontally === true ? -1 : 1;\n        const y_flip = this.make.flip_vertically === true ? -1 : 1;\n\n        context.scale(x_flip, y_flip);\n        context.translate(-(width / 2), -(height / 2));\n      }\n      return context;\n    },\n\n    updateMask(event, transform) {\n      event;\n      this.setMaskProps(transform);\n    },\n    setMaskProps(transform) {\n      this.mask_prop.x = transform.x;\n      this.mask_prop.y = transform.y;\n      this.mask_prop.width = transform.width;\n      this.mask_prop.height = transform.height;\n    },\n    generateFilters() {\n      let filters = \"\";\n      if (Object.prototype.hasOwnProperty.call(this.make, \"image_brightness\"))\n        filters += `brightness(${this.make.image_brightness}%)`;\n      if (Object.prototype.hasOwnProperty.call(this.make, \"image_contrast\"))\n        filters += `contrast(${this.make.image_contrast}%)`;\n      if (Object.prototype.hasOwnProperty.call(this.make, \"image_blur\"))\n        filters += `blur(${this.make.image_blur}px)`;\n      if (Object.prototype.hasOwnProperty.call(this.make, \"image_saturation\"))\n        filters += `saturate(${this.make.image_saturation}%)`;\n      return filters;\n    },\n\n    dragEnd(event, transform) {\n      this.updateCrop(transform);\n      event.stopPropagation();\n    },\n    resizeStart(event) {\n      if (\n        event.target.classList.contains(\"br\") ||\n        event.target.classList.contains(\"bl\") ||\n        event.target.classList.contains(\"tl\") ||\n        event.target.classList.contains(\"tr\")\n      )\n        return (this.aspect_ratio = true);\n      return (this.aspect_ratio = false);\n    },\n    updateCrop(transform) {\n      const cropCanvas = this.$refs.cropCanvas;\n      if (!cropCanvas) return false;\n\n      const preview_width = cropCanvas.parentElement.offsetWidth;\n      const preview_height = cropCanvas.parentElement.offsetHeight;\n\n      let _transform_pc = {\n        x: 0,\n        y: 0,\n        width: 100,\n        height: 100,\n        rotation: 0,\n      };\n\n      if (Object.prototype.hasOwnProperty.call(transform, \"x\")) {\n        _transform_pc.x = this.roundToDec((transform.x / preview_width) * 100);\n      }\n      if (Object.prototype.hasOwnProperty.call(transform, \"y\")) {\n        _transform_pc.y = this.roundToDec((transform.y / preview_height) * 100);\n      }\n      if (Object.prototype.hasOwnProperty.call(transform, \"width\")) {\n        _transform_pc.width = this.roundToDec(\n          (transform.width / preview_width) * 100\n        );\n      }\n      if (Object.prototype.hasOwnProperty.call(transform, \"height\")) {\n        _transform_pc.height = this.roundToDec(\n          (transform.height / preview_height) * 100\n        );\n      }\n\n      this.updatePubliMeta({\n        crop_options: _transform_pc,\n      });\n    },\n    updateFromInputs(prop) {\n      const _transform_pc = Object.assign({}, this.make.crop_options, prop);\n      this.updatePubliMeta({\n        crop_options: _transform_pc,\n      });\n    },\n    async updatePreviewCanvas() {\n      const cropCanvas = this.$refs.cropCanvas;\n      const previewCanvas = this.$refs.previewCanvas;\n\n      if (!cropCanvas || !previewCanvas) return false;\n\n      const previewCanvasCtx = previewCanvas.getContext(\"2d\");\n\n      // create canvas, same size as source image, crop from this\n      let img = new Image();\n      img.src = this.image_url;\n      await img.decode();\n\n      let width = img.naturalWidth || 1280;\n      let height = img.naturalHeight || 720;\n\n      const x = this.make.crop_options?.x || 0;\n      const y = this.make.crop_options?.y || 0;\n      const w = this.make.crop_options?.width || 100;\n      const h = this.make.crop_options?.height || 100;\n\n      const crop_x = Math.round((x / 100) * width);\n      const crop_y = Math.round((y / 100) * height);\n      const crop_width = Math.round((w / 100) * width);\n      const crop_height = Math.round((h / 100) * height);\n\n      previewCanvas.width = crop_width;\n      previewCanvas.height = crop_height;\n\n      previewCanvasCtx.filter = this.generateFilters();\n      this.flipContextOrNot(previewCanvasCtx, crop_width, crop_height);\n\n      previewCanvasCtx.drawImage(\n        img,\n        crop_x,\n        crop_y,\n        crop_width,\n        crop_height,\n        0,\n        0,\n        crop_width,\n        crop_height\n      );\n\n      this.export_width = crop_width;\n      this.export_height = crop_height;\n\n      this.export_blob = await new Promise((resolve) => {\n        previewCanvas.toBlob(resolve, \"image/jpeg\", 0.95);\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._cropImage {\n  margin: 0;\n  background: white;\n  padding: calc(var(--spacing) / 1);\n  border-radius: 6px;\n\n  height: auto;\n}\n\n._sidebyside {\n  display: flex;\n  flex-flow: row wrap;\n  align-items: flex-start;\n  gap: calc(var(--spacing) * 1);\n\n  ._leftBtns {\n    flex: 0 1 250px;\n  }\n  ._cropWindow {\n    flex: 1 1 250px;\n  }\n}\n._cropWindow {\n  position: relative;\n  width: 100%;\n  overflow: visible;\n}\n._canvasContainer {\n  position: relative;\n  canvas {\n    max-width: 100%;\n  }\n}\n\n._cropFrame {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n\n  &.ddr-dragging {\n    cursor: -webkit-grabbing;\n    cursor: -moz-grabbing;\n    cursor: dragging;\n  }\n\n  ::v-deep {\n    .br,\n    .tr,\n    .tl,\n    .bl {\n      background: var(--c-orange);\n    }\n  }\n}\n\n._canvas {\n}\n\n._canvas,\n._previewCanvas {\n  width: 100%;\n  margin: 0 auto;\n  display: block;\n  // outline: 2px solid var(--c-gris);\n}\n\n._previewCanvas {\n  max-width: 100%;\n  max-height: 40vh;\n  width: auto;\n}\n\n._preview {\n}\n\n._btnRow {\n  display: flex;\n  flex-flow: column nowrap;\n\n  gap: calc(var(--spacing) / 8);\n  margin-bottom: var(--spacing);\n}\n\n._values {\n  display: flex;\n  flex-flow: row nowrap;\n  gap: calc(var(--spacing) / 2);\n  align-items: center;\n  width: 100%;\n  background: white;\n  // max-width: 800px;\n\n  > * {\n    flex: 1 1 0;\n  }\n}\n\n._modalP {\n  position: relative;\n}\n\n._mask {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  pointer-events: none;\n\n  ._maskContent {\n    position: absolute;\n    box-shadow: 0 0 0 max(100vh, 100vw) rgba(0, 0, 0, 0.4);\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditImage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditImage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditImage.vue?vue&type=template&id=7bf344ac&scoped=true\"\nimport script from \"./EditImage.vue?vue&type=script&lang=js\"\nexport * from \"./EditImage.vue?vue&type=script&lang=js\"\nimport style0 from \"./EditImage.vue?vue&type=style&index=0&id=7bf344ac&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bf344ac\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('BaseModal2',{attrs:{\"title\":_vm.title || _vm.$t('export')},on:{\"close\":function($event){return _vm.$emit('close')}}},[_c('div',{staticClass:\"_cont\"},[_c('div',{staticClass:\"u-spacingBottom\"},[_vm._t(\"default\")],2),(_vm.enable_options)?_c('div',[_c('div',{staticClass:\"u-sameRow\"},[_c('a',{staticClass:\"u-buttonLink\",attrs:{\"disabled\":!_vm.export_href,\"download\":_vm.export_name,\"href\":_vm.export_href,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"download\"))+\" \")]),_c('button',{staticClass:\"u-button u-button_red\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.saveToProject}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 168 168\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 168 168\",\"xml:space\":\"preserve\"}},[_c('path',{staticStyle:{\"fill\":\"var(--c-rouge)\"},attrs:{\"d\":\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z\"}}),_c('g',{staticStyle:{\"fill\":\"var(--c-orange)\"}},[_c('path',{attrs:{\"d\":\"m42 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m42 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m42 105h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 105h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 105h21.6v21h-21.6z\"}})])]),_vm._v(\" \"+_vm._s(_vm.$t(\"save_to_project\"))+\" \")])])]):_vm._e(),(_vm.finished_saving_to_project)?_c('div',{staticClass:\"_saveNotice\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"media_was_saved_to_project\"))+\" \")]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <BaseModal2 :title=\"title || $t('export')\" @close=\"$emit('close')\">\n    <div class=\"_cont\">\n      <div class=\"u-spacingBottom\">\n        <slot />\n      </div>\n\n      <div v-if=\"enable_options\">\n        <div class=\"u-sameRow\">\n          <a\n            :disabled=\"!export_href\"\n            :download=\"export_name\"\n            :href=\"export_href\"\n            target=\"_blank\"\n            class=\"u-buttonLink\"\n          >\n            {{ $t(\"download\") }}\n          </a>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_red\"\n            @click=\"saveToProject\"\n          >\n            <svg\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              x=\"0px\"\n              y=\"0px\"\n              viewBox=\"0 0 168 168\"\n              style=\"enable-background: new 0 0 168 168\"\n              xml:space=\"preserve\"\n            >\n              <path\n                style=\"fill: var(--c-rouge)\"\n                d=\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z\"\n              />\n              <g style=\"fill: var(--c-orange)\">\n                <path d=\"m42 42h21.6v21h-21.6z\" />\n                <path d=\"m73.2 42h21.6v21h-21.6z\" />\n                <path d=\"m104.4 42h21.6v21h-21.6z\" />\n                <path d=\"m42 73.5h21.6v21h-21.6z\" />\n                <path d=\"m73.2 73.5h21.6v21h-21.6z\" />\n                <path d=\"m104.4 73.5h21.6v21h-21.6z\" />\n                <path d=\"m42 105h21.6v21h-21.6z\" />\n                <path d=\"m73.2 105h21.6v21h-21.6z\" />\n                <path d=\"m104.4 105h21.6v21h-21.6z\" />\n              </g>\n            </svg>\n            {{ $t(\"save_to_project\") }}\n          </button>\n        </div>\n      </div>\n      <div class=\"_saveNotice\" v-if=\"finished_saving_to_project\">\n        {{ $t(\"media_was_saved_to_project\") }}\n      </div>\n    </div>\n  </BaseModal2>\n</template>\n<script>\nexport default {\n  props: {\n    title: String,\n    export_name: {\n      type: String,\n      default: \"file\",\n    },\n    export_blob: [Boolean, Blob],\n    export_href: String,\n    project_path: String,\n    enable_options: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  components: {},\n  data() {\n    return {\n      finished_saving_to_project: false,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {\n    async saveToProject() {\n      if (this.export_blob) {\n        const additional_meta = {};\n\n        additional_meta.$origin = \"make\";\n        if (this.connected_as?.$path)\n          additional_meta.$authors = [this.connected_as.$path];\n\n        await this.$api\n          .uploadFile({\n            path: this.project_path,\n            filename: this.export_name,\n            file: this.export_blob,\n            additional_meta,\n          })\n          .catch((err) => {\n            this.$alertify.delay(4000).error(err);\n            throw err;\n          });\n      }\n\n      this.finished_saving_to_project = true;\n      setTimeout(() => {\n        this.$emit(\"close\");\n      }, 3000);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._cont {\n  position: relative;\n}\n._saveNotice {\n  position: absolute;\n  inset: -2px;\n  background: rgba(255, 255, 255, 0.95);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ExportSaveMakeModal.vue?vue&type=template&id=1e9fab52&scoped=true\"\nimport script from \"./ExportSaveMakeModal.vue?vue&type=script&lang=js\"\nexport * from \"./ExportSaveMakeModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./ExportSaveMakeModal.vue?vue&type=style&index=0&id=1e9fab52&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e9fab52\",\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable */\nclass Vector {\n  constructor(lst) {\n    this._values = lst;\n  }\n\n  toString() {\n    return `Vector(${this._values.join(\", \")})`;\n  }\n\n  get length() {\n    return this._values.length;\n  }\n\n  dot(vector) {\n    if (vector instanceof Vector && this.length === vector.length) {\n      return this._values\n        .map((item, index) => item * vector._values[index])\n        .reduce((a, b) => a + b);\n    }\n    throw Error(\"The param `vector` must instance of Vector\");\n  }\n\n  get(index) {\n    return this._values[index];\n  }\n}\n\nexport default Vector;\n","/* eslint-disable */\nimport Vector from \"./Vector\";\n\nclass Matrix {\n  constructor(values) {\n    this._values = values;\n  }\n\n  static zeros(shape) {\n    return new Matrix(\n      new Array(shape[0]).fill(null).map(() => new Array(shape[1]).fill(0))\n    );\n  }\n\n  valueOf() {\n    return JSON.parse(JSON.stringify(this._values));\n  }\n\n  toString() {\n    return (\n      \"Matrix ( \" + this._values.map((item) => item.join(\" \")).join(\", \") + \" )\"\n    );\n  }\n\n  rows() {\n    return this._values.length;\n  }\n\n  cols() {\n    return this._values[0].length;\n  }\n\n  rowVector(row) {\n    return new Vector(this._values[row].slice(0));\n  }\n\n  colVector(col) {\n    let v = new Array(this.rows()).fill(0);\n    this._values.forEach((item, index) => {\n      v[index] = item[col];\n    });\n    return new Vector(v);\n  }\n\n  dot(v) {\n    if (v instanceof Vector && this.cols() === v.length) {\n      return new Vector(\n        new Array(v.length).fill(null).map((item, index) => {\n          return this.rowVector(index).dot(v);\n        })\n      );\n    }\n    if (v instanceof Matrix && this.cols() === v.rows()) {\n      let cols = v.cols(),\n        rows = v.rows();\n      let newMatrix = Matrix.zeros([rows, cols]);\n      let v1;\n      for (let i = 0; i < cols; i++) {\n        v1 = this.dot(v.colVector(i));\n        for (let j = 0; j < rows; j++) {\n          newMatrix._values[j][i] = v1.get(j);\n        }\n      }\n      return newMatrix;\n    }\n    throw Error(\"expected a Vector or Matrix but got \" + typeof v);\n  }\n\n  get(row, col) {\n    return this._values[row][col];\n  }\n\n  T() {\n    return new Matrix(\n      new Array(this.cols()).fill(null).map((_, colIndex) => {\n        return new Array(this.rows()).fill(0).map((_, rowIndex) => {\n          return this.get(rowIndex, colIndex);\n        });\n      })\n    );\n  }\n}\n\nexport default Matrix;\n","/* eslint-disable */\nimport Matrix from \"./Matrix\";\n\n// 缩放时基于对角坐标固定缩放\n// 矩形除了4个直角坐标点外，还有每条边的一个中心点坐标，按照数组的顺序从左上顺时针到左中排列\n// 例如：拖拽点为右中，对应的固定点为左中。拖拽点为左上，对应的固定点为右下\nexport const pointMap = {\n  br: 0,\n  bm: 1,\n  bl: 2,\n  l: 3,\n  tl: 4,\n  tm: 5,\n  tr: 6,\n  r: 7,\n};\n\nexport const handlerPointMap = {\n  tl: 0,\n  tm: 1,\n  tr: 2,\n  r: 3,\n  br: 4,\n  bm: 5,\n  bl: 6,\n  l: 7,\n};\n// 计算矩形大小时使用四个直角坐标\nexport const pointMap2 = {\n  br: 0,\n  bm: 0,\n  bl: 2,\n  l: 2,\n  tl: 4,\n  tm: 4,\n  tr: 6,\n  r: 6,\n};\n\nexport const widthMap = {\n  l: 1,\n  r: 1,\n};\nexport const heightMap = {\n  tm: 1,\n  bm: 1,\n};\nexport const tr2bl = {\n  tr: 1,\n  bl: 1,\n  r: 1,\n  l: 1,\n};\n\nexport function deg2rad(deg) {\n  return (deg * Math.PI) / 180;\n}\n\nexport function rad2deg(rad) {\n  return (rad * 180) / Math.PI;\n}\n\n// 获取矩形旋转后在平面上的8个坐标点，从左上角顺时针放到数组里返回\nexport function getPoints({ x, y, width, height, rotation }, zoom) {\n  let a = (rotation * Math.PI) / 180;\n  let wc = (width / 2) * zoom;\n  let hc = (height / 2) * zoom;\n  // 标准的矩阵点乘公式，返回旋转后的坐标\n  let deg = new Matrix([\n    [Math.cos(a), Math.sin(a)],\n    [-Math.sin(a), Math.cos(a)],\n  ]);\n  let rect = new Matrix([\n    [-wc, hc],\n    [0, hc],\n    [wc, hc],\n    [wc, 0],\n    [wc, -hc],\n    [0, -hc],\n    [-wc, -hc],\n    [-wc, 0],\n  ]);\n  return deg\n    .dot(rect.T())\n    .T()\n    .valueOf()\n    .map((item) => {\n      return { x: item[0] + wc + x * zoom, y: -(item[1] - hc) + y * zoom };\n    });\n}\nexport function getBoundingRect(transform) {\n  if (transform.rotation === 0) {\n    return {\n      left: transform.x,\n      top: transform.y,\n      right: transform.x + transform.width,\n      bottom: transform.y + transform.height,\n      width: transform.width,\n      height: transform.height,\n    };\n  }\n  let points = getPoints(transform);\n  let xarray = [],\n    yarray = [];\n  points.forEach((element) => {\n    xarray.push(element.x);\n    yarray.push(element.y);\n  });\n  xarray = xarray.sort((a, b) => a - b);\n  yarray = yarray.sort((a, b) => a - b);\n  let left = xarray[0],\n    right = xarray[xarray.length - 1];\n  let top = yarray[0],\n    bottom = yarray[yarray.length - 1];\n  return {\n    left,\n    right,\n    top,\n    bottom,\n    width: right - left,\n    height: bottom - top,\n  };\n}\n\n// 计算当前矩形的宽高\nexport function getSize({ type, x, y, dis, pressAngle, startAngle }) {\n  let w, h;\n  let currentAngle = rad2deg(Math.atan2(y, x));\n  let rad = deg2rad(pressAngle + currentAngle - startAngle);\n  if (tr2bl[type]) {\n    h = Math.cos(rad) * dis;\n    w = Math.sin(rad) * dis;\n  } else {\n    h = Math.sin(rad) * dis;\n    w = Math.cos(rad) * dis;\n  }\n  return { w, h };\n}\n\nconst cursorMap = [\"nw\", \"n\", \"ne\", \"e\", \"se\", \"s\", \"sw\", \"w\"];\nconst handlerMap = { tl: 0, tm: 1, tr: 2, r: 3, br: 4, bm: 5, bl: 6, l: 7 };\n\nexport function getHandler(type, rotation) {\n  let originIndex = handlerMap[type];\n  let currentIndex = (originIndex + Math.floor(rotation / 45)) % 8;\n  return cursorMap[currentIndex];\n}\n","<script>\n/* eslint-disable */\nimport {\n  getHandler,\n  getPoints,\n  getSize,\n  handlerPointMap,\n  heightMap,\n  pointMap,\n  pointMap2,\n  rad2deg,\n  tr2bl,\n  widthMap,\n} from \"./helper\";\n\nexport default {\n  name: \"ddr\",\n  props: {\n    value: {\n      default: function () {\n        return { x: 0, y: 0, width: 100, height: 100, rotation: 0 };\n      },\n      type: Object,\n    },\n    handlerSize: {\n      type: Number,\n      default: 11,\n    },\n    active: {\n      default: true,\n      type: Boolean,\n    },\n    resizeHandler: {\n      default: function () {\n        return [\"tl\", \"tm\", \"tr\", \"r\", \"br\", \"bm\", \"bl\", \"l\"];\n      },\n      type: Array,\n    },\n    resizable: {\n      default: true,\n      type: Boolean,\n    },\n    rotatable: {\n      default: true,\n      type: Boolean,\n    },\n    draggable: {\n      default: true,\n      type: Boolean,\n    },\n    acceptRatio: {\n      default: false,\n      type: Boolean,\n    },\n    minWidth: {\n      type: Number,\n      default: 1,\n    },\n    minHeight: {\n      type: Number,\n      default: 1,\n    },\n    maxWidth: {\n      type: Number,\n      default: 100000000,\n    },\n    maxHeight: {\n      type: Number,\n      default: 100000000,\n    },\n    parent: {\n      type: Boolean,\n      default: false,\n    },\n    beforeActive: {\n      type: Function,\n      default: () => false,\n    },\n    id: [Number, String],\n    renderContent: Function,\n    grid: {\n      type: Array,\n      default: () => [1, 1],\n    },\n    stop: {\n      default: true,\n      type: Boolean,\n    },\n    prevent: {\n      default: true,\n      type: Boolean,\n    },\n    zoom: {\n      default: 1,\n      type: Number,\n    },\n    axis: {\n      type: String,\n      default: \"xy\", // x | y 不填写则都可以移动，仅移动时生效\n    },\n  },\n  data() {\n    return {\n      transform: Object.assign({}, this.value),\n      currentRatio: 1,\n      isInitialRatio: false,\n      isDragging: false,\n      isResizing: false,\n      isRotating: false,\n      isReadyToDrag: false,\n      isReadyToResize: false,\n      isReadyToRotate: false,\n    };\n  },\n  created() {\n    // 缓存当前位置信息\n    this.localeTransform = { ...this.transform };\n  },\n  watch: {\n    value(t) {\n      this.transform = { ...t };\n    },\n  },\n\n  computed: {\n    rotateHandler() {\n      let size = Math.ceil(this.handlerSize / this.zoom) + \"px\";\n      return `width:${size};height:${size};top:-25px;margin-left:${-Math.floor(\n        this.handlerSize / 2\n      )}px`;\n    },\n    style() {\n      let transform = this.transform;\n      return `left:${transform.x}px;top:${transform.y}px;width:${transform.width}px;height:${transform.height}px;transform:rotate(${transform.rotation}deg)`;\n    },\n  },\n  methods: {\n    handleDefaultEvent(e) {\n      if (this.stop) {\n        e.stopPropagation();\n      }\n      if (this.prevent) {\n        e.preventDefault();\n      }\n    },\n    getNewHandler(type) {\n      let cursor = getHandler(type, this.transform.rotation);\n      let { handlerSize } = this;\n      let props = {};\n      let half = -Math.floor(handlerSize / 2) + \"px\";\n      switch (type) {\n        case \"tl\":\n          props = {\n            top: half,\n            left: half,\n          };\n          break;\n        case \"tm\":\n          props = { top: half, \"margin-left\": half };\n          break;\n        case \"tr\":\n          props = { right: half, top: half };\n          break;\n        case \"r\":\n          props = { right: half, \"margin-top\": half };\n          break;\n        case \"br\":\n          props = { bottom: half, right: half };\n          break;\n        case \"bm\":\n          props = { \"margin-left\": half, bottom: half };\n          break;\n        case \"bl\":\n          props = { left: half, bottom: half };\n          break;\n        case \"l\":\n          props = { \"margin-top\": half, left: half };\n          break;\n      }\n      let result = {\n        cursor: cursor + \"-resize\",\n        width: Math.ceil(handlerSize / this.zoom) + \"px\",\n        height: Math.ceil(handlerSize / this.zoom) + \"px\",\n        ...props,\n      };\n      return Object.keys(result)\n        .map((item) => `${item}:${result[item]}`)\n        .join(\";\");\n    },\n    emitChange() {\n      this.$emit(\"input\", { ...this.transform });\n    },\n    handleMouseDown(event) {\n      if (!this.active && !this.beforeActive(this.id)) return;\n      this.handleDefaultEvent(event);\n      let point = event.touches ? event.touches[0] : event;\n      let { clientX, clientY } = point;\n      this._lastX = clientX;\n      this._lastY = clientY;\n      this._activeTarget = event.target;\n      this._parentRect = this.$refs.wrapper.parentNode.getBoundingClientRect();\n      this._resizeHandler = event.target.dataset.resizetype;\n      this.localeTransform = { ...this.transform };\n      // 如果设置了限制在父元素的边界内移\n      // 计算组件的边界，在移动时进行判断并修正\n      if (this.parent) {\n        let minLeft = 0;\n        let maxLeft = this._parentRect.width / this.zoom - this.transform.width;\n        let minTop = 0;\n        let maxTop =\n          this._parentRect.height / this.zoom - this.transform.height;\n        let maxLeftWidth = this.transform.x + this.transform.width;\n        let maxRightWidth =\n          this._parentRect.width / this.zoom - this.transform.x;\n        let maxTopHeight = this.transform.y + this.transform.height;\n        let maxBottomHeight =\n          this._parentRect.height / this.zoom - this.transform.y;\n        this.bounday = {\n          minLeft,\n          maxLeft,\n          minTop,\n          maxTop,\n          maxLeftWidth,\n          maxRightWidth,\n          maxTopHeight,\n          maxBottomHeight,\n        };\n      }\n      // 添加事件，该事件会在up时移除\n      document.addEventListener(\"mousemove\", this.handleMouseMove, false);\n      document.addEventListener(\"touchmove\", this.handleMouseMove, false);\n      document.addEventListener(\"touchend\", this.handleMouseUp, false);\n      document.addEventListener(\"mouseup\", this.handleMouseUp, false);\n      if (event.target.dataset.type === \"rotate\") {\n        this._handlerType = \"rotate\";\n        this.isReadyToRotate = true;\n        this.handleRotateStart(event);\n        this.$emit(\"rotatestart\", event, this.transform);\n      } else if (this._activeTarget.dataset.resizetype) {\n        this._handlerType = \"resize\";\n        this.isReadyToResize = true;\n        this.handleResizeStart(event);\n        this.$emit(\"resizestart\", event, this.transform);\n      } else {\n        this._handlerType = \"drag\";\n        this.isReadyToDrag = true;\n        this.draggable && this.$emit(\"dragstart\", event, this.transform);\n      }\n    },\n    handleMouseMove(event) {\n      this.handleDefaultEvent(event);\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      this.isReadyToDrag = false;\n      this.isReadyToResize = false;\n      this.isReadyToRotate = false;\n      this._deltaX = clientX - this._lastX;\n      this._deltaY = clientY - this._lastY;\n      this._lastX = clientX;\n      this._lastY = clientY;\n      if (this._handlerType === \"resize\") {\n        this.isResizing = true;\n        this.handleResizeMove(event);\n        this.$emit(\"resize\", event, this.transform);\n      } else if (this._handlerType === \"drag\" && this.draggable) {\n        this.isDragging = true;\n        this.doMove(event);\n        this.$emit(\"drag\", event, this.transform);\n      } else if (this._handlerType === \"rotate\") {\n        this.isRotating = true;\n        this.handleRotateMove(event);\n        this.$emit(\"rotate\", event, this.transform);\n      }\n      this.emitChange();\n    },\n\n    doMove() {\n      let [gridX, gridY] = this.grid;\n      let deltaX = this._deltaX / this.zoom;\n      let deltaY = this._deltaY / this.zoom;\n      let x = (this.localeTransform.x = Math.round(\n        this.localeTransform.x + deltaX\n      ));\n      let y = (this.localeTransform.y = Math.round(\n        this.localeTransform.y + deltaY\n      ));\n\n      // 将当前位置对齐网格，限制在父元素内进行移动\n      // 当deltaX > 0 说明当前移动方向为向右移动，则向下取整。例如：10 12 14 始终取 10\n      // 当deltaY < 0 说明当干移动方向为向左移动，则向上取整。例如：20 19 17 始终取 20\n      if (this.axis.includes(\"x\")) {\n        if (x > this.transform.x) {\n          this.transform.x = this.restrictToLeftOfParent(x - (x % gridX));\n        } else if (x < this.transform.x) {\n          this.transform.x = this.restrictToLeftOfParent(\n            x - ((x % gridX) - gridX)\n          );\n        }\n      }\n\n      if (this.axis.includes(\"y\")) {\n        if (y > this.transform.y) {\n          this.transform.y = this.restrictToTopOfParent(y - (y % gridY));\n        } else if (y < this.transform.y) {\n          this.transform.y = this.restrictToTopOfParent(\n            y - ((y % gridY) - gridY)\n          );\n        }\n      }\n    },\n    restrictToLeftOfParent(x) {\n      if (!this.parent) return x;\n      x = Math.max(this.bounday.minLeft, x);\n      x = Math.min(this.bounday.maxLeft, x);\n      return x;\n    },\n    restrictToTopOfParent(y) {\n      if (!this.parent) return y;\n      y = Math.max(this.bounday.minTop, y);\n      y = Math.min(this.bounday.maxTop, y);\n      return y;\n    },\n    restrictHeight(h, type) {\n      if (!this.parent || this.transform.rotation > 0) return h;\n      if ([\"bl\", \"bm\", \"br\"].includes(type))\n        return Math.min(this.bounday.maxBottomHeight, h);\n      if ([\"tl\", \"tm\", \"tr\"].includes(type))\n        return Math.min(this.bounday.maxTopHeight, h);\n      return h;\n    },\n    restrictWidth(w, type) {\n      if (!this.parent || this.transform.rotation > 0) return w;\n      if ([\"tl\", \"l\", \"bl\"].includes(type))\n        return Math.min(this.bounday.maxLeftWidth, w);\n      if ([\"tr\", \"r\", \"br\"].includes(type))\n        return Math.min(this.bounday.maxRightWidth, w);\n      return w;\n    },\n    handleMouseUp(event) {\n      this.handleDefaultEvent(event);\n      document.removeEventListener(\"mousemove\", this.handleMouseMove, false);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp, false);\n      document.removeEventListener(\"touchmove\", this.handleMouseMove, false);\n      document.removeEventListener(\"touchend\", this.handleMouseUp, false);\n\n      let ev = {\n        drag: \"draggable\",\n        resize: \"resizable\",\n        rotate: \"rotatable\",\n      };\n\n      this.isInitialRatio =\n        this.isDragging =\n        this.isResizing =\n        this.isRotating =\n          false;\n      this.isReadyToDrag = this.isReadyToResize = this.isReadyToRotate = false;\n      this[ev[this._handlerType]] &&\n        this.$emit(this._handlerType + \"end\", event, this.transform);\n    },\n    handleResizeStart(event) {\n      let type = this._resizeHandler;\n      let rect = this.transform;\n      let matrix = getPoints(rect, this.zoom);\n      let pressAngle;\n      // 当前控制点的对角坐标点，该坐标会用来计算新的位置\n      // 例如：bottomRight(右下角) 对应 topLeft(左上角)\n      let opposite = matrix[pointMap[type]];\n      // 与上面的区别是，这里的对角坐标只能是4个直角坐标，用于计算新的宽高\n      // 例如：例如：bottomRight 和 bottom 都对应 topLeft\n      let opp2 = matrix[pointMap2[type]];\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      // issues: https://github.com/zuimeiaj/yoyoo-ddr/issues/34\n      // 在进行缩放时，需要考虑鼠标位置距离拖拽点中心位置的偏移值，否则拖拽时会有抖动\n      let handlerPoint = matrix[handlerPointMap[type]];\n      let offsetX = clientX - handlerPoint.x;\n      let offsetY = clientY - handlerPoint.y;\n\n      let x1 = clientX - opp2.x - offsetX;\n      let y1 = clientY - opp2.y - offsetY;\n      let width = rect.width;\n      let height = rect.height;\n      // 有问题\n      if (tr2bl[type]) {\n        pressAngle = rad2deg(\n          Math.atan2(width, widthMap[type] ? height / 2 : height)\n        );\n      } else {\n        pressAngle = rad2deg(\n          Math.atan2(height, heightMap[type] ? width / 2 : width)\n        );\n      }\n      let startAngle = rad2deg(Math.atan2(y1, x1));\n      this._resizeOpt = {\n        matrix,\n        rect,\n        type,\n        opposite,\n        opp2,\n        pressAngle,\n        startAngle,\n        offsetX,\n        offsetY,\n      };\n    },\n    handleResizeMove(event) {\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let { opposite, opp2, type, pressAngle, startAngle, offsetX, offsetY } =\n        this._resizeOpt;\n      let x = clientX - opp2.x - offsetX;\n      let y = clientY - opp2.y - offsetY;\n      let dis = Math.hypot(y, x);\n      let ratio = event.shiftKey || this.acceptRatio;\n      let [gridX, gridY] = this.grid;\n      // 锁定纵横比\n      if (!this.isInitialRatio && ratio) {\n        this.currentRatio = this.transform.width / this.transform.height;\n        this.isInitialRatio = true;\n      }\n      if (!ratio) {\n        this.isInitialRatio = false;\n      }\n\n      // 获取新的宽度和高度\n      let { w, h } = getSize({\n        type,\n        dis,\n        x,\n        y,\n        startAngle,\n        pressAngle,\n      });\n      let transform = { ...this.localeTransform };\n\n      // 进行等比例缩放\n      if (this.isInitialRatio) {\n        if (widthMap[type]) h = w / this.currentRatio;\n        else w = h * this.currentRatio;\n      }\n      // 还原到实际尺寸\n      w /= this.zoom;\n      h /= this.zoom;\n      w = Math.min(Math.max(Math.round(w), this.minWidth), this.maxWidth);\n      h = Math.min(Math.max(Math.round(h), this.minHeight), this.maxHeight);\n      // 判断当前控制点是否为宽度缩放还是高度缩放\n      if (widthMap[type] && !ratio) {\n        transform.width = w;\n      } else if (heightMap[type] && !ratio) {\n        transform.height = h;\n      } else {\n        transform.width = w;\n        transform.height = h;\n      }\n\n      let resizeType = this._resizeHandler;\n      // // 限制在网格中移动，原理同拖动\n      if (transform.width % gridX > 0) {\n        if (transform.width > this.localeTransform.width) {\n          // 宽度变大时向下取整\n          transform.width = transform.width - (transform.width % gridX);\n        } else {\n          // 宽度变小时向上取整\n          transform.width =\n            transform.width - ((transform.width % gridX) - gridX);\n        }\n      }\n\n      // 原理同上\n      if (transform.height % gridY > 0) {\n        if (transform.height > this.localeTransform.height) {\n          transform.height = transform.height - (transform.height % gridY);\n        } else {\n          transform.height =\n            transform.height - ((transform.height % gridY) - gridY);\n        }\n      }\n      // 限制在父元素中\n      transform.height = this.restrictHeight(transform.height, resizeType);\n      transform.width = this.restrictWidth(transform.width, resizeType);\n\n      // 根据新的旋转和宽高计算新的位置\n      let matrix = getPoints(transform, this.zoom);\n      let newOpposite = matrix[pointMap[type]];\n      let deltaX = -(newOpposite.x - opposite.x) / this.zoom;\n      let deltaY = -(newOpposite.y - opposite.y) / this.zoom;\n      transform.x = Math.round(transform.x + deltaX);\n      transform.y = Math.round(transform.y + deltaY);\n      this.transform = transform;\n    },\n\n    handleRotateStart(event) {\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let t = this.$refs.wrapper.getBoundingClientRect();\n      let cx = t.left + t.width / 2;\n      let cy = t.top + t.height / 2;\n      let startAngle = (180 / Math.PI) * Math.atan2(clientY - cy, clientX - cx);\n      let rotation = this.transform.rotation;\n      // 记录旋转的角度和组件的中心点\n      this._rotateOpt = { cx, cy, startAngle, rotation };\n    },\n    handleRotateMove(event) {\n      let { cx, cy, startAngle, rotation } = this._rotateOpt;\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let x = clientX - cx;\n      let y = clientY - cy;\n      let angle = (180 / Math.PI) * Math.atan2(y, x);\n      // 旋转角度 = 鼠标移动时角度 - 鼠标按下时角度\n      // 旋转后的角度 = 组件按下时角度 + 旋转角度\n      let currentAngle = angle - startAngle;\n      let r = rotation + currentAngle;\n      r = r % 360;\n      r = r < 0 ? r + 360 : r;\n      r = this.roundRotate(r);\n      this.transform.rotation = Math.floor(r);\n    },\n    roundRotate(r) {\n      const round = 5;\n      if (r > 360 - round || r < 0 + round) return 0;\n      if (r > 90 - round && r < 90 + round) return 90;\n      if (r > 180 - round && r < 180 + round) return 180;\n      if (r > 270 - round && r < 270 + round) return 270;\n      return r;\n    },\n    getClassNames() {\n      const ddrClassNames = [\"yoyoo-ddr\"];\n\n      if (this.active) ddrClassNames.push(\"active\");\n      if (this.isDragging) ddrClassNames.push(\"ddr-dragging\");\n      if (this.isResizing) ddrClassNames.push(\"ddr-resizing\");\n      if (this.isRotating) ddrClassNames.push(\"ddr-rotating\");\n      if (this.isReadyToDrag) ddrClassNames.push(\"ddr-ready-drag\");\n      if (this.isReadyToResize) ddrClassNames.push(\"ddr-ready-resize\");\n      if (this.isReadyToRotate) ddrClassNames.push(\"ddr-ready-rotate\");\n      return ddrClassNames;\n    },\n  },\n  render() {\n    return (\n      <div\n        ref=\"wrapper\"\n        style={this.style}\n        class={this.getClassNames()}\n        onTouchstart={this.handleMouseDown}\n        onMousedown={this.handleMouseDown}\n      >\n        {this.renderContent ? this.renderContent(this) : this.$slots.default}\n        {this.resizable && (\n          <div class=\"resize-handler-wrapper\">\n            {this.resizeHandler.map((item) => {\n              return (\n                <span\n                  data-resizetype={item}\n                  key={item}\n                  style={this.getNewHandler(item)}\n                  class={`resize-handler ${item}`}\n                />\n              );\n            })}\n          </div>\n        )}\n        {this.rotatable && (\n          <span\n            style={this.rotateHandler}\n            data-type=\"rotate\"\n            class=\"rotate-handler\"\n          />\n        )}\n      </div>\n    );\n  },\n};\n</script>\n\n<style lang=\"less\">\n.yoyoo-ddr {\n  position: absolute;\n  .resize-handler.tm {\n    left: 50%;\n  }\n  .resize-handler.r {\n    top: 50%;\n  }\n  .resize-handler.bm {\n    left: 50%;\n  }\n  .resize-handler.l {\n    top: 50%;\n    cursor: pointer;\n  }\n\n  .resize-handler,\n  .rotate-handler {\n    display: none;\n    position: absolute;\n    border: 1px solid #607d8b;\n    background: #fff;\n    box-sizing: border-box;\n    border-radius: 50%;\n  }\n  .rotate-handler {\n    left: 50%;\n    cursor: crosshair;\n  }\n  &.active {\n    border: 1px dashed #607d8b;\n    > .resize-handler-wrapper > .resize-handler,\n    > .rotate-handler {\n      display: inline-block;\n    }\n  }\n  .br,\n  .tr,\n  .tl,\n  .bl {\n    background: #607d8b;\n  }\n}\n</style>\n","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4ad276b9&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._cropImage[data-v-7bf344ac]{margin:0;background:#fff;padding:calc(var(--spacing)/1);border-radius:6px;height:auto}._sidebyside[data-v-7bf344ac]{display:flex;flex-flow:row wrap;align-items:flex-start;gap:calc(var(--spacing)*1)}._sidebyside ._leftBtns[data-v-7bf344ac]{flex:0 1 250px}._sidebyside ._cropWindow[data-v-7bf344ac]{flex:1 1 250px}._cropWindow[data-v-7bf344ac]{width:100%;overflow:visible}._canvasContainer[data-v-7bf344ac],._cropWindow[data-v-7bf344ac]{position:relative}._canvasContainer canvas[data-v-7bf344ac]{max-width:100%}._cropFrame[data-v-7bf344ac]{cursor:grab}._cropFrame.ddr-dragging[data-v-7bf344ac]{cursor:-moz-grabbing;cursor:dragging}._cropFrame[data-v-7bf344ac] .bl,._cropFrame[data-v-7bf344ac] .br,._cropFrame[data-v-7bf344ac] .tl,._cropFrame[data-v-7bf344ac] .tr{background:var(--c-orange)}._canvas[data-v-7bf344ac],._previewCanvas[data-v-7bf344ac]{width:100%;margin:0 auto;display:block}._previewCanvas[data-v-7bf344ac]{max-width:100%;max-height:40vh;width:auto}._btnRow[data-v-7bf344ac]{display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/8);margin-bottom:var(--spacing)}._values[data-v-7bf344ac]{display:flex;flex-flow:row nowrap;gap:calc(var(--spacing)/2);align-items:center;width:100%;background:#fff}._values>*[data-v-7bf344ac]{flex:1 1 0}._modalP[data-v-7bf344ac]{position:relative}._mask[data-v-7bf344ac]{position:absolute;width:100%;height:100%;top:0;left:0;overflow:hidden;pointer-events:none}._mask ._maskContent[data-v-7bf344ac]{position:absolute;box-shadow:0 0 0 max(100vh,100vw) rgba(0,0,0,.4)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._cont[data-v-1e9fab52]{position:relative}._saveNotice[data-v-1e9fab52]{position:absolute;inset:-2px;background:hsla(0,0%,100%,.95);display:flex;justify-content:center;align-items:center}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/dist/cjs.js??clonedRuleSet-11.use[1]!../../postcss-loader/dist/cjs.js??clonedRuleSet-11.use[2]!../../postcss-loader/dist/cjs.js??clonedRuleSet-11.use[3]!./yoyoo-ddr.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"13185f0c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditImage.vue?vue&type=style&index=0&id=7bf344ac&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"62abb9bf\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=style&index=0&id=1e9fab52&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7c8700c4\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-29.use[1]!../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-29.use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-29.use[3]!../../node_modules/less-loader/dist/cjs.js??clonedRuleSet-29.use[4]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4ad276b9&prod&lang=less\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"26a8b236\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","staticClass","tag","attrs","$root","publicPath","_v","_s","$t","on","resetCrop","$event","rotateImage","make","crop_options","x","updateFromInputs","y","width","height","image_brightness","updatePubliMeta","image_contrast","image_saturation","image_blur","show_save_export_modal","ref","style","mask_styles","key","crop_key","crop_transform","aspect_ratio","updateMask","dragEnd","resizeStart","export_blob","image_export_name","project_path","export_width","export_height","_e","staticRenderFns","props","Object","String","base_media","components","DDR","ExportSaveMakeModal","data","scale","Date","getTime","show_crop","rotation","mask_prop","created","mounted","$nextTick","drawImageToCanvas","setTransformFromMake","beforeDestroy","watch","handler","deep","updatePreviewCanvas","computed","$media_filename","image_url","makeMediaFileURL","$path","left","top","methods","new_meta","$api","updateMeta","path","default_transform","cropCanvas","$refs","cw","parentElement","offsetWidth","ch","offsetHeight","setMaskProps","console","log","cropCanvasContainer","img","Image","src","decode","naturalWidth","naturalHeight","ratio","max_crop_height","window","innerHeight","max_crop_width","innerWidth","context","getContext","clearRect","filter","generateFilters","flipContextOrNot","drawImage","flip_horizontally","flip_vertically","translate","x_flip","y_flip","event","transform","filters","prototype","hasOwnProperty","call","updateCrop","stopPropagation","target","classList","contains","preview_width","preview_height","_transform_pc","roundToDec","prop","assign","previewCanvas","previewCanvasCtx","w","h","crop_x","Math","round","crop_y","crop_width","crop_height","Promise","resolve","toBlob","component","title","$emit","_t","enable_options","export_href","export_name","saveToProject","staticStyle","finished_saving_to_project","type","default","Boolean","Blob","additional_meta","connected_as","$authors","uploadFile","filename","file","catch","err","$alertify","delay","error","setTimeout","Vector","constructor","lst","_values","toString","join","length","dot","vector","map","item","index","reduce","a","b","Error","get","Matrix","values","zeros","shape","Array","fill","valueOf","JSON","parse","stringify","rows","cols","rowVector","row","slice","colVector","col","v","forEach","v1","newMatrix","i","j","T","_","colIndex","rowIndex","pointMap","br","bm","bl","l","tl","tm","tr","r","handlerPointMap","pointMap2","widthMap","heightMap","tr2bl","deg2rad","deg","PI","rad2deg","rad","getPoints","zoom","wc","hc","cos","sin","rect","getSize","dis","pressAngle","startAngle","currentAngle","atan2","cursorMap","handlerMap","getHandler","originIndex","currentIndex","floor","name","value","handlerSize","Number","active","resizeHandler","resizable","rotatable","draggable","acceptRatio","minWidth","minHeight","maxWidth","maxHeight","parent","beforeActive","Function","id","renderContent","grid","stop","prevent","axis","currentRatio","isInitialRatio","isDragging","isResizing","isRotating","isReadyToDrag","isReadyToResize","isReadyToRotate","localeTransform","t","rotateHandler","size","ceil","handleDefaultEvent","e","preventDefault","getNewHandler","cursor","half","right","bottom","result","keys","emitChange","handleMouseDown","point","touches","clientX","clientY","_lastX","_lastY","_activeTarget","_parentRect","wrapper","parentNode","getBoundingClientRect","_resizeHandler","dataset","resizetype","minLeft","maxLeft","minTop","maxTop","maxLeftWidth","maxRightWidth","maxTopHeight","maxBottomHeight","bounday","document","addEventListener","handleMouseMove","handleMouseUp","_handlerType","handleRotateStart","handleResizeStart","_deltaX","_deltaY","handleResizeMove","doMove","handleRotateMove","gridX","gridY","deltaX","deltaY","includes","restrictToLeftOfParent","restrictToTopOfParent","max","min","restrictHeight","restrictWidth","removeEventListener","ev","drag","resize","rotate","matrix","opposite","opp2","handlerPoint","offsetX","offsetY","x1","y1","_resizeOpt","hypot","shiftKey","resizeType","newOpposite","cx","cy","_rotateOpt","angle","roundRotate","getClassNames","ddrClassNames","push","arguments","$slots","___CSS_LOADER_EXPORT___","module","content","__esModule","locals","exports","add"],"sourceRoot":""}