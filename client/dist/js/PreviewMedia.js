(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[19],{91372:function(t,e,i){"use strict";i.d(e,{A:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{},[e("div",{staticClass:"_creditsBtn"},[t.show_credits_caption_button?e("EditBtn",{attrs:{btn_type:"credits",label_position:"left"},on:{click:function(e){t.show_credits_caption=!0}}}):t._e()],1),e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.show_credits_caption?e("div",{staticClass:"_showCredits"},[e("button",{staticClass:"u-button u-button_icon _closeCredits",attrs:{type:"button"},on:{click:function(e){t.show_credits_caption=!1}}},[e("b-icon",{attrs:{icon:"x-lg"}})],1),t.media.caption||!1!==t.canEditLinkedMedia(t.media.$path)?e("div",{staticClass:"u-spacingBottom"},[e("CollaborativeEditor2",{attrs:{label:t.$t("caption"),field_to_edit:"caption",content:t.media.caption,path:t.media.$path,custom_formats:["bold","italic","link"],is_collaborative:!1,can_edit:t.can_edit}})],1):t._e(),t.media.$credits||!1!==t.canEditLinkedMedia(t.media.$path)?e("div",{staticClass:"u-spacingBottom"},[e("CollaborativeEditor2",{attrs:{label:t.$t("credit/reference"),field_to_edit:"$credits",content:t.media.$credits,path:t.media.$path,custom_formats:["bold","italic","link"],is_collaborative:!1,can_edit:t.can_edit}})],1):t._e(),t.can_edit?e("div",{staticClass:"u-instructions"},[e("small",[t._v(" "+t._s(t.$t("edit_caption_changes_for_all_medias"))+" ")])]):t._e()]):t._e()])],1)},o=[],n={props:{media:Object,publication_path:String,can_edit:Boolean},components:{},data(){return{show_credits_caption:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{show_credits_caption_button(){return!this.show_credits_caption&&("text"!==this.media.$type&&"table"!==this.media.$type&&!(!1===this.canEditLinkedMedia(this.media.$path)&&!this.media.$credits&&!this.media.caption))}},methods:{canEditLinkedMedia(t){if(!t||!this.publication_path||!this.can_edit)return!1;const e=this.getParent(t);let i=this.publication_path;return e===i&&this.canLoggedinEditFolder({folder:i})?"local":(i=this.getParent(this.getParent(this.publication_path)),!(e!==i||!this.canLoggedinEditFolder({folder:i}))&&"link")}}},r=n,s=(i(60968),i(81656)),d=(0,s.A)(r,a,o,!1,null,"3eed73d2",null),c=d.exports},57413:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_previewMedia"},[t.is_loading?e("div",{key:"loader",staticClass:"_spinner"},[e("LoaderSpinner")],1):["node"===t.previewing_for?["pdf"===t.media_type?e("iframe",{staticClass:"_content",attrs:{src:t.preview_url},on:{load:t.onIframeLoad}}):"stl"===t.media_type?e("ThreeDPreview",{staticClass:"_content",attrs:{file_type:"stl",src:t.preview_url}}):t._e()]:"user"===t.previewing_for?[t.media?[e("MediaContent",{staticClass:"_content",attrs:{context:"full",file:t.media,resolution:1600}}),e("div",{staticClass:"_captionCredits"},[e("CaptionCreditsPage",{attrs:{media:t.media,can_edit:!1}})],1)]:e("span",[t._v("Error loading media")]),e("button",{staticClass:"u-button u-button_white _qrCodeButton",on:{click:t.openQRCodeScanner}},[e("svg",{staticClass:"bi bi-qr-code",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M2 2h2v2H2V2Z"}}),e("path",{attrs:{d:"M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"}}),e("path",{attrs:{d:"M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"}}),e("path",{attrs:{d:"M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z"}}),e("path",{attrs:{d:"M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"}})])]),t.show_qr_code_scanner?e("QRCodeScanner",{on:{close:function(e){t.show_qr_code_scanner=!1}}}):t._e()]:t._e()]],2)},o=[],n=i(91372),r={props:{},components:{ThreeDPreview:()=>i.e(797).then(i.bind(i,94797)),CaptionCreditsPage:n.A,QRCodeScanner:()=>i.e(198).then(i.bind(i,47198))},data(){return{media:null,is_loading:!0,show_qr_code_scanner:!1}},async created(){},async mounted(){this.$route.query.path_to_meta&&"user"===this.previewing_for&&(this.media=await this.$api.getFile({path:decodeURIComponent(this.$route.query.path_to_meta)}).catch((t=>{console.error(t)}))),this.is_loading=!1},beforeDestroy(){},watch:{},computed:{previewing_for(){return"node"===this.$route.query.previewing_for?"node":"user"},full_media_path(){return decodeURIComponent(this.$route.query.path_to_media)},media_type(){return this.full_media_path.split(".").pop().toLowerCase()},preview_url(){let t="";return"pdf"===this.media_type&&(t="#toolbar=0&view=FitV"),window.location.origin+this.full_media_path+t}},methods:{onIframeLoad(){},openQRCodeScanner(){this.show_qr_code_scanner=!0}}},s=r,d=(i(84695),i(81656)),c=(0,d.A)(s,a,o,!1,null,"140347ac",null),l=c.exports},11022:function(t,e,i){"use strict";i.r(e);var a=i(31601),o=i.n(a),n=i(76314),r=i.n(n),s=r()(o());s.push([t.id,"._creditsBtn[data-v-3eed73d2]{position:absolute;bottom:0;right:0;z-index:150;margin:calc(var(--spacing)/1)}@media print{._creditsBtn[data-v-3eed73d2]{display:none}}._creditsBtn[data-v-3eed73d2] ._editBtn{background:hsla(0,0%,100%,.4)!important;-webkit-backdrop-filter:blur(5px)!important;backdrop-filter:blur(5px)!important}._showCredits[data-v-3eed73d2]{position:absolute;z-index:101;inset:0;text-align:left;background:hsla(0,0%,100%,.8);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);overflow:auto;padding:calc(var(--spacing)*1)}._closeCredits[data-v-3eed73d2]{position:absolute;bottom:0;right:0;z-index:100;margin:calc(var(--spacing)/1)}",""]),e["default"]=s},26665:function(t,e,i){"use strict";i.r(e);var a=i(31601),o=i.n(a),n=i(76314),r=i.n(n),s=r()(o());s.push([t.id,"._previewMedia[data-v-140347ac]{--plyr-audio-controls-background:var(--c-noir);--plyr-audio-control-color:#fff;position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}._previewMedia ._content[data-v-140347ac]{position:relative;width:100%;height:100%;-o-object-fit:scale-down;object-fit:scale-down;-o-object-position:center;object-position:center}._previewMedia ._content[data-v-140347ac] ._iframeStylePreview,._previewMedia ._content[data-v-140347ac] ._mediaContent--iframe,._previewMedia ._content[data-v-140347ac] ._mediaContent--image,._previewMedia ._content[data-v-140347ac] .plyr--video,._previewMedia ._content[data-v-140347ac] .plyr__poster{position:absolute;height:100%;width:100%;-o-object-fit:scale-down;object-fit:scale-down}._previewMedia ._captionCredits[data-v-140347ac]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}._previewMedia ._captionCredits[data-v-140347ac] *{pointer-events:auto}._qrCodeButton[data-v-140347ac]{position:absolute;top:0;right:0;margin:1rem;box-shadow:0 -1px 4px rgba(0,0,0,.1);padding:calc(var(--spacing)*.75);border-radius:50%}",""]),e["default"]=s},60968:function(t,e,i){var a=i(11022);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var o=i(43197).A;o("81dc4058",a,!0,{sourceMap:!1,shadowMode:!1})},84695:function(t,e,i){var a=i(26665);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var o=i(43197).A;o("779727ce",a,!0,{sourceMap:!1,shadowMode:!1})}}]);