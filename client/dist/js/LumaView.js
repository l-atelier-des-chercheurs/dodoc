(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[947],{95420:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Xt}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_lumaView",class:{"is--mobile_view":t.$root.is_mobile_view}},[t.shared_folder_path?[a("div",{staticClass:"_panes"},[a("div",{key:"myContent",staticClass:"_myContent",class:{"is--shown":t.show_chutier}},[a("MyChutier",{directives:[{name:"show",rawName:"v-show",value:t.show_chutier,expression:"show_chutier"}],attrs:{shared_space_path:t.shared_folder_path},on:{close:function(e){t.show_chutier=!1}}}),a("div",{staticClass:"_chutierBtn",class:{"is--showingChutier":t.show_chutier}},[a("button",{attrs:{type:"button"},on:{click:function(e){t.show_chutier=!t.show_chutier}}},[a("svg",{attrs:{width:"17",height:"9",viewBox:"0 0 17 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M0.999812 4.546V4.726C1.87581 5.098 2.67381 5.602 3.39381 6.238C4.11381 6.874 4.77381 7.546 5.37381 8.254L5.75181 7.894C5.53581 7.594 5.30181 7.3 5.04981 7.012C4.78581 6.712 4.51581 6.418 4.23981 6.13C4.07181 5.962 3.98781 5.788 3.98781 5.608C3.98781 5.512 4.02381 5.428 4.09581 5.356C4.16781 5.284 4.28781 5.248 4.45581 5.248H14.5718V8.254H15.5078V1H14.5718V4.024H4.43781C4.26981 4.024 4.14981 3.982 4.07781 3.898C4.00581 3.802 3.96981 3.712 3.96981 3.628C3.96981 3.484 4.05381 3.328 4.22181 3.16C4.48581 2.908 4.75581 2.62 5.03181 2.296C5.29581 1.972 5.52981 1.66 5.73381 1.36L5.35581 1C4.75581 1.696 4.10181 2.368 3.39381 3.016C2.67381 3.664 1.87581 4.174 0.999812 4.546Z",fill:"currentColor",stroke:"currentColor"}})])])])],1),a("div",{key:"sharedContent",staticClass:"_sharedContent",class:{"has--chutier":t.show_chutier}},[a("SharedFolder",{attrs:{shared_folder_path:t.shared_folder_path}})],1)])]:a("LoaderSpinner")],2)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.chutier?a("div",{staticClass:"_myChutier",on:{click:function(e){t.last_clicked=!1}}},[a("div",{staticClass:"_itemsList"},[a("div",{staticClass:"_topBar"},[t.is_instance_admin?a("button",{staticClass:"u-buttonLink _adminBtn",attrs:{type:"button"},on:{click:function(e){t.show_admin_settings=!0}}},[t._v(" "+t._s(t.$t("admin_settings"))+" ")]):t._e(),t.show_admin_settings?a("AdminLumaSettings",{on:{close:function(e){t.show_admin_settings=!1}}}):t._e()],1),a("div",{staticClass:"_topContent"},[a("div",{staticClass:"_subscribeBtn"},[a("button",{staticClass:"u-button u-button_bleumarine _authorBtn",attrs:{type:"button"},on:{click:function(e){return t.$eventHub.$emit("showAuthorModal")}}},[t.connected_as?[t._v(" "+t._s(t.connected_as.name)+" ")]:[t._v(t._s(t.$t("login")))]],2)]),a("div",{staticClass:"_importBtn"},[a("input",{staticClass:"inputfile-2",attrs:{type:"file",multiple:"multiple",id:t.id+"-add_file",name:"file",accept:""},on:{change:function(e){return t.updateInputFiles(e)}}}),a("label",{attrs:{for:t.id+"-add_file"}},[t._v(" "+t._s(t.$t("import"))+" ")])]),a("div",{},[a("button",{staticClass:"u-button u-button_white _qrBtn",attrs:{type:"button"},on:{click:t.createNote}},[a("sl-icon",{attrs:{name:"file-text"}}),t._v(" note ")],1)]),a("div",{},[a("button",{staticClass:"u-button u-button_white _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_link_picker=!0}}},[a("sl-icon",{attrs:{name:"link-45deg"}}),t._v(" url ")],1),t.show_link_picker?a("LinkPicker",{on:{embed:t.createEmbed,close:function(e){t.show_link_picker=!1}}}):t._e()],1),a("button",{staticClass:"u-button u-button_icon _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_qr_code_modal=!0}}},[a("sl-icon",{attrs:{name:"qr-code"}})],1),t.show_qr_code_modal?a("QRModal",{attrs:{url_to_access:t.url_to_page},on:{close:function(e){t.show_qr_code_modal=!1}}}):t._e(),a("button",{staticClass:"u-button u-button_icon _qrBtn",attrs:{type:"button"},on:{click:function(e){return t.$eventHub.$emit("app.show_welcome_modal")}}},[a("sl-icon",{attrs:{name:"question-square"}})],1)],1),t.selected_files.length>0?a("UploadFiles",{staticClass:"_uploadFilesList",attrs:{files_to_import:t.selected_files,path:t.path},on:{close:function(e){t.selected_files=[]},importedMedias:t.importedMedias}}):t._e(),a("div",{staticClass:"_middleContent"},[a("label",{attrs:{for:""},on:{click:function(e){t.all_items_selected?t.deselectAll():t.selectAll()}}},[t.chutier_items.length>0?a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("sl-icon",{attrs:{name:t.all_items_selected?"dash-square-dotted":"plus-square-dotted"}})],1):t._e(),t._v(" "+t._s(t.$t("items_to_share"))+" • "+t._s(t.chutier_items.length)+" ")]),a("br")]),a("div",{staticClass:"_items"},t._l(t.chutier_items_grouped,(function(e){return a("div",{key:e.label,staticClass:"_item"},[a("div",{staticClass:"_item--label",on:{click:function(a){t.rangeIsSelected(e.files.map((function(t){return t.$path})))?t.deselectRange(e.files.map((function(t){return t.$path}))):t.selectRange(e.files.map((function(t){return t.$path})))}}},[t.rangeIsSelected(e.files.map((function(t){return t.$path})))?a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("sl-icon",{attrs:{name:"dash-square-dotted"}})],1):a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("sl-icon",{attrs:{name:"plus-square-dotted"}})],1),t._v(" "+t._s(e.label)+" ")]),a("transition-group",{attrs:{tag:"div",name:"listComplete"}},t._l(e.files,(function(e){return a("div",{key:e.$path,on:{click:function(a){a.stopPropagation(),t.last_clicked=e.$path}}},[a("ChutierItem",{attrs:{file:e,is_clicked:t.last_clicked===e.$path,is_selected:t.selected_items_slugs.includes(e.$path),shared_space_path:t.shared_space_path},on:{toggleSelect:function(a){return t.toggleSelect(e.$path)},unclicked:function(e){t.last_clicked=!1}}})],1)})),0)],1)})),0)],1),a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.selected_items.length>0?a("div",{key:"selection",staticClass:"_selectionBar"},[a("div",{staticClass:"_selectionBar--previews"},[t._l(t.selected_items,(function(e){return[e.$path?a("MediaContent",{key:e.$path,staticClass:"_selectionBar--previews--preview",attrs:{file:e,context:"preview"}}):t._e()]}))],2),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){t.show_mediastack_modal=!0}}},[t._v(" "+t._s(t.$t("create_stack"))+" ("+t._s(t.selected_items.length)+") ")]),a("div",{staticClass:"u-sameRow"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.deselectAll}},[a("sl-icon",{attrs:{name:"dash-square-dotted"}}),t._v(" "+t._s(t.$t("deselect_all"))+" ")],1),a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_remove_menu=!0}}},[a("sl-icon",{attrs:{name:"trash3"}}),t._v(" "+t._s(t.$t("remove_all"))+" ")],1)])]):t._e()]),a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.show_confirm_remove_menu?a("div",{key:"remove",staticClass:"_removeMenu"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_remove_menu=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_red",attrs:{type:"button",autofocus:""},on:{click:t.removeItemsInSelection}},[t._v(" "+t._s(t.$t("confirm_removal"))+" ")])]):t._e()]),a("transition",{attrs:{name:"slideup"}},[t.show_mediastack_modal?a("MediaStack",{staticClass:"_mediaStack",attrs:{files:t.selected_items,shared_space_path:t.shared_space_path},on:{updateFocusedMedia:function(e){t.selected_items_slugs=e},stackCreated:function(e){t.selected_items_slugs=[],t.show_mediastack_modal=!1},close:function(e){t.show_mediastack_modal=!1}}}):t._e()],1)],1):t._e()},r=[],n=(a(26699),a(57658),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"_linkPicker"},[a("div",{staticClass:"_urlBox"},[a("DLabel",{attrs:{str:t.$t("input_url"),instructions:t.$t("input_url_instr")}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.full_url,expression:"full_url"}],attrs:{type:"url",placeholder:"https://"},domProps:{value:t.full_url},on:{input:function(e){e.target.composing||(t.full_url=e.target.value)}}})],1),a("div",{staticClass:"u-instructions"},[t._v(" PeerTube, YouTube, Vimeo, etc. "+t._s(t.$t("for_example"))+"  "),t._l(["https://peertube.fr/w/wB6M6CHdfpWXpozVnqjbde","https://www.youtube.com/watch?v=Bn6zdyCAwJs","https://vimeo.com/447785086","https://observablehq.com/embed/@fil/bertin1953-glsl?cells=canvas"],(function(e,i){return a("button",{key:i,staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{innerHTML:t._s(e)},on:{click:function(a){t.full_url=e}}})}))],2),a("br"),a("div",{key:t.full_url},["any"===t.url_to_site.type?[a("iframe",{staticClass:"_siteIframe",attrs:{src:t.url_to_site.src,frameborder:"0"}})]:a("vue-plyr",[a("div",{staticClass:"plyr__video-embed"},[a("iframe",{attrs:{src:t.url_to_site.src,allowfullscreen:"",allowtransparency:"",allow:"autoplay; fullscreen",sandbox:"allow-same-origin allow-scripts allow-popups",frameborder:"0"}})])])],2),a("br"),t.full_url?a("div",{staticClass:"_selectBtn"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){return t.$emit("embed",t.full_url)}}},[t._v(" "+t._s(t.$t("embed"))+" ")])]):t._e()])])}),l=[],c={props:{},components:{},data(){return{full_url:"https://"}},async created(){},beforeDestroy(){},watch:{},computed:{url_to_site(){return!!this.full_url&&this.transformURL({url:this.full_url,autoplay:!1})}},methods:{}},d=c,_=(a(20148),a(1001)),u=(0,_.Z)(d,n,l,!1,null,"a5930508",null),p=u.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_chutierRow",class:{"is--clicked":t.is_clicked,"is--selected":t.is_selected,"is--edited":t.edit_mode,"is--mousedown":t.is_mousedown},on:{click:function(e){!t.edit_mode&&t.$emit("toggleSelect")},mousedown:function(e){t.is_mousedown=!0},mouseup:function(e){t.is_mousedown=!1}}},[a("div",{staticClass:"_chutierRow--rows"},[a("div",{staticClass:"_infos"},[!t.edit_mode&&t.$listeners&&t.$listeners.toggleSelect?a("label",{staticClass:"_selectBox",attrs:{for:t.id},on:{click:function(t){t.stopPropagation()}}},[a("input",{attrs:{type:"checkbox",name:t.id,id:t.id},domProps:{checked:t.is_selected},on:{change:function(e){return t.$emit("toggleSelect")}}})]):t._e(),"text"===t.file.$type&&t.edit_mode?t._e():a("div",{staticClass:"_chutierRow--openLarge",on:{click:function(e){e.stopPropagation(),t.show_large=!0}}},[a("MediaContent",{staticClass:"_chutierRow--preview",attrs:{file:t.file,context:"preview"}})],1),a("div",{staticClass:"_titleDateField"},[a("div",[a("div",{},[a("small",[t.edit_mode?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.date_created_corrected,expression:"date_created_corrected"}],staticClass:"is--dark",attrs:{type:"datetime-local",step:"1"},domProps:{value:t.date_created_corrected},on:{input:function(e){e.target.composing||(t.date_created_corrected=e.target.value)}}})]:[t._v(" "+t._s("stack"===t.context?t.formatDateTimeToPrecise(t.date_created_corrected):t.formatTime(t.date_created_corrected,{hour:"2-digit",minute:"2-digit"}))+" ")]],2)]),t.edit_mode?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text_title,expression:"text_title"}],staticClass:"is--dark",attrs:{type:"text",autofocus:"",required:"",placeholder:t.$t("title")},domProps:{value:t.text_title},on:{keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),"stack"===t.context&&t.$emit("unclicked")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.cancelEdit.apply(null,arguments))}],input:function(e){e.target.composing||(t.text_title=e.target.value)}}})]:a("div",[t._v(" "+t._s(t.text_title)+" ")])],2)]),t.edit_mode?t._e():a("EditBtn",{attrs:{label_position:"left"},on:{click:function(e){t.edit_mode=!0}}})],1)]),"stack"!==t.context&&(t.edit_mode||t.keywords.length>0||t.description.length>0)?a("div",{staticClass:"_fields"},[t.edit_mode?a("div",[a("span",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("complete_or_correct_title_kw"))+" ")])]):t._e(),"url"===t.file.$type?a("div",{},[a("div",[a("input",{staticClass:"is--dark",attrs:{type:"url",autofocus:"",disabled:""},domProps:{value:t.file.$content}})])]):t._e(),t.keywords&&t.keywords.length>0||t.edit_mode?a("div",{},[a("KeywordsField",{attrs:{keywords:t.keywords,can_edit:t.edit_mode},on:{"update:keywords":function(e){t.keywords=e},cancelEdit:t.cancelEdit}})],1):t._e(),t.description||t.edit_mode?a("div",{},[t.edit_mode?["text"!==t.file.$type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"is--dark _descriptionField",attrs:{placeholder:t.$t("description")},domProps:{value:t.description},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.cancelEdit.apply(null,arguments))},input:function(e){e.target.composing||(t.description=e.target.value)}}}):a("CollaborativeEditor2",{staticClass:"_content",attrs:{path:t.file.$path,content:t.file.$content,edit_on_mounted:!0,can_edit:!0,custom_formats:["bold","italic","underline","link"]}})]:a("div",[t._v(" "+t._s(t.description)+" ")])],2):t._e(),a("div",{staticClass:"_publierBtn"},[a("button",{key:t.share_button_is_enabled,staticClass:"u-buttonLink",attrs:{type:"button",disabled:!t.share_button_is_enabled},on:{click:t.shareButtonClicked}},[t._v(" "+t._s(t.$t("publish"))+"  "),a("sl-icon",{staticStyle:{"font-size":"1rem"},attrs:{name:"arrow-right-square",circle:""}})],1)])]):t._e(),t.show_large?a("div",{staticClass:"_chutierRow--largePreview",attrs:{"data-type":t.file.$type},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.show_large=!1}}},[a("MediaContent",{attrs:{file:t.file,context:"full",resolution:1600}}),a("button",{staticClass:"u-button u-button_round u-button_black _closeBtn",attrs:{type:"button"},on:{click:function(e){t.show_large=!1}}},[a("sl-icon",{attrs:{name:"x-lg",label:t.$t("close")}})],1)],1):t._e()])},f=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_keywordsField"},[t.label?a("DLabel",{staticClass:"_label",attrs:{str:t.label}}):t._e(),t.new_keywords.length>0?a("div",{staticClass:"u-keywords"},[t._l(t.new_keywords,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:t.edit_mode},on:{remove:function(a){return t.removeKeyword(e)}}})})),t.can_edit&&!t.edit_mode?a("EditBtn",{on:{click:t.enableEditMode}}):t._e()],2):t._e(),t.edit_mode?[a("KeywordsFieldEditor",{attrs:{keywords:t.new_keywords},on:{"update:keywords":function(e){t.new_keywords=e}}})]:t._e(),t.can_edit&&t.path&&t.field_name?[t.edit_mode?a("div",{staticClass:"_footer"},[a("SaveCancelButtons",{staticClass:"_scb",on:{save:t.updateKeywords,cancel:t.cancel}})],1):t._e()]:t._e()],2)},v=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_keywordsFieldEditor"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_suggestion,expression:"user_suggestion"}],ref:"keywordField",staticClass:"is--dark",attrs:{type:"text",required:"",placeholder:t.$t("keyword_materials_etc")},domProps:{value:t.user_suggestion},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.$emit("cancelEdit"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.newKeyword.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.submitFirstSuggestion.apply(null,arguments)):null}],input:function(e){e.target.composing||(t.user_suggestion=e.target.value)}}}),a("div",{staticClass:"u-instructions"},[a("small",[t.suggested_keywords.length>0?[t._v(" "+t._s(t.$t("validate_with_shift_enter"))+" ")]:t.user_suggestion.length>0?[t._v(t._s(t.$t("create_new_keyword_enter")))]:t._e()],2)]),a("div",{staticClass:"_catSug"},[a("div",{staticClass:"_categories"},t._l(t.categories_with_keywords,(function(e){return a("button",{key:e,staticClass:"u-button _category",class:{"is--active":t.suggestion_from_category===e},attrs:{type:"button","data-category":e},on:{click:function(a){return t.toggleCategory(e)}}},[t._v(" "+t._s(e)+" ("+t._s(t.matchingKeywordsWithCategory(e).length)+") ")])})),0),t.suggested_keywords.length>0?a("div",{staticClass:"_suggestions"},[a("div",{staticClass:"u-keywords"},t._l(t.suggested_keywords,(function(e,i){return a("SingleKeyword",{key:e,class:{"is--first":0===i},attrs:{keyword:e,can_add:!0},on:{add:function(a){return t.addKeyword(e)}}})})),1)]):t._e()])])},w=[],b=(a(52262),a(24506),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_singleKeyword",class:{"is--clickable":t.can_add},style:t.kw_styles},[a("div",{},[t.category?a("div",{staticClass:"_category"},[t._v(" "+t._s(t.category.toUpperCase())+" ")]):t._e(),a("div",{staticClass:"_name"},[t._v(" "+t._s(t.name)+" ")])]),t.count?a("div",{staticClass:"_count"},[t._v(" "+t._s(t.count)+" ")]):t._e(),t.can_remove?a("sl-icon-button",{staticClass:"_white",attrs:{name:"dash-circle"},on:{click:function(e){return t.$emit("remove")}}}):t._e(),t.can_add?a("button",{staticClass:"_addBtn",attrs:{type:"button"},on:{click:function(e){return t.$emit("add")}}}):t._e()],1)}),y=[],k={props:{keyword:String,count:Number,cat_color:String,can_remove:Boolean,can_add:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{category(){return!!this.keyword.includes("/")&&this.keyword.split("/").at(0)},name(){return this.keyword.includes("/")?this.keyword.split("/").at(1):this.keyword},kw_styles(){let t=!1;if(this.cat_color)t=this.cat_color;else{const e=window.app_infos.custom_suggested_categories.find((t=>t.title===this.category));t=e?.tag_color}return t?`--cat-color: ${t}`:""}},methods:{}},$=k,C=(a(85633),(0,_.Z)($,b,y,!1,null,"56f0f92a",null)),x=C.exports,F={props:{keywords:Array},components:{SingleKeyword:x},data(){return{user_suggestion:"",suggestion_from_category:!1,categories:[],path:"categories"}},i18n:{messages:{fr:{validate_with_shift_enter:"Validez la première suggestion avec SHIFT+ENTRÉE, ou créez un nouveau mot-clé avec ENTRÉE.",create_new_keyword_enter:"Créez un nouveau mot-clé avec ENTRÉE."},en:{validate_with_shift_enter:"Add first suggestion with SHIFT+ENTER, or create a new keyword with ENTER.",create_new_keyword_enter:"Create a new keyword with ENTER."}}},async created(){this.categories=await this.$api.getFolders({path:this.path}),this.$api.join({room:this.path})},async mounted(){},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{all_categories(){return this.categories.map((t=>t.title))},all_keywords(){return this.categories.reduce(((t,e)=>(e.title&&e.list_of_suggestions&&e.list_of_suggestions.map((a=>{t.push(e.title+"/"+a)})),t)),[])},categories_with_keywords(){return this.all_categories.filter((t=>this.matchingKeywordsWithCategory(t).length>0))},suggested_keywords(){return this.matchingKeywordsWithCategory(this.suggestion_from_category)}},methods:{matchingKeywordsWithCategory(t){return this.all_keywords.filter((e=>{const a=!!e.includes("/")&&e.split("/").at(0),i=e.includes("/")?e.split("/").at(1):e;return!this.keywords.includes(e)&&((!t||t===a)&&(!(!t&&0===this.user_suggestion.length)&&this.twoStringsMatch(i,this.user_suggestion)))}))},toggleCategory(t){this.suggestion_from_category===t?this.suggestion_from_category=!1:this.suggestion_from_category=t},newKeyword(){this.user_suggestion.length>0&&this.addKeyword(this.user_suggestion)},submitFirstSuggestion(){if(0===this.suggested_keywords.length)return!1;const t=this.suggested_keywords.at(0);this.addKeyword(t)},keywordKey(t){return t.category+"/"+t.name},addKeyword(t){let e=this.keywords.slice();e.push(t),e.sort(((t,e)=>e)),this.$emit("update:keywords",e),this.user_suggestion="",this.$refs.keywordField.focus()}}},M=F,S=(a(51160),(0,_.Z)(M,g,w,!1,null,"e58c331c",null)),B=S.exports,I={props:{field_name:String,path:String,label:String,keywords:Array,can_edit:Boolean},components:{KeywordsFieldEditor:B,SingleKeyword:x},data(){return{new_keywords:this.keywords,edit_mode:this.can_edit&&!this.path&&!this.field_name,is_saving:!1}},created(){},mounted(){},beforeDestroy(){},watch:{new_keywords(){this.$emit("update:keywords",this.new_keywords)}},computed:{},methods:{enableEditMode(){this.edit_mode=!0},async updateKeywords(){this.is_saving=!0,await new Promise((t=>setTimeout(t,50)));try{const t={[this.field_name]:this.new_keywords};await this.$api.updateMeta({path:this.path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1}},cancel(){this.new_keywords=this.keywords,this.edit_mode=!1},removeKeyword(t){this.new_keywords=this.new_keywords.filter((e=>e!==t))}}},L=I,E=(0,_.Z)(L,m,v,!1,null,"333666ce",null),q=E.exports,z={props:{file:Object,is_selected:Boolean,is_clicked:Boolean,shared_space_path:String,context:{type:String,default:"list"}},components:{KeywordsField:q},data(){return{opened_pane:void 0,show_large:!1,is_mousedown:!1,edit_mode:!1,id:`select_chutier_item_${(Math.random().toString(36)+"00000000000000000").slice(2,5)}`,text_title:this.file.title||this.cleanFilename(this.file.$media_filename)||"",date_created_corrected:this.datetimeLocal(this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded||new Date),description:this.file.description||"",keywords:this.file.keywords||[]}},created(){},mounted(){this.$eventHub.$on("chutier.item.edit",this.setEdit)},beforeDestroy(){this.$eventHub.$off("chutier.item.edit",this.setEdit)},watch:{"file.title"(){this.text_title=this.file.title},is_clicked(){!this.is_clicked&&this.edit_mode&&(this.saveFields(),this.edit_mode=!1)},edit_mode(){this.edit_mode&&this.$nextTick((()=>{this.$el.querySelector("[autofocus]").select()}))}},computed:{share_button_is_enabled(){return this.text_title.length>0&&this.keywords.length>0}},methods:{setEdit(t){const e=this.getFilename(this.file.$path);t===e&&(this.edit_mode=!0)},async moveToSharedSpace(){const t=this.shared_space_path;await this.$api.copyFile({path:this.file.$path,path_to_destination_folder:t,new_meta:{$admins:[this.connected_as.$path]}}),await this.remove()},async remove(){this.$api.deleteItem({path:this.file.$path})},cleanFilename(){return this.file.$media_filename.substring(0,this.file.$media_filename.lastIndexOf("."))},cancelEdit(){this.text_title=this.file.title||this.cleanFilename(this.file.$media_filename)||"",this.date_created_corrected=this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded||"",this.description=this.file.description||"",this.keywords=this.file.keywords||"",this.edit_mode=!1},async shareButtonClicked(){if(this.share_button_is_enabled){if(this.edit_mode)return await this.saveFields(),void await this.moveToSharedSpace();await this.moveToSharedSpace()}else this.edit_mode=!0},openLarge(){this.$emit("")},async saveFields(){""===this.date_created_corrected&&(this.date_created_corrected=this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded);let t={title:this.text_title,date_created_corrected:this.date_created_corrected,description:this.description,keywords:this.keywords};await this.$api.updateMeta({path:this.file.$path,new_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))},save(){},cancel(){this.edit_mode=!1}}},j=z,K=(a(25206),(0,_.Z)(j,h,f,!1,null,"a8097914",null)),R=K.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ChutierPane",{on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"_mediaFocus",on:{click:function(e){t.last_clicked=!1}}},[a("div",{staticClass:"_fileStack"},[a("transition-group",{staticClass:"_itemsList",attrs:{tag:"div",name:"listComplete"}},t._l(t.files,(function(e,i){return a("div",{key:e.$path,staticClass:"u-sameRow",on:{click:function(a){a.stopPropagation(),t.last_clicked=e.$path}}},[a("div",{staticClass:"_removeFile"},[a("sl-icon-button",{attrs:{name:"dash-square-dotted"},on:{click:function(a){return t.removeFromSelection(e.$path)}}})],1),a("select",{staticClass:"is--dark _changeOrderSelect",domProps:{value:i+1},on:{change:function(e){return t.changeMediaOrder(i,+e.target.value-1)}}},t._l(new Array(t.files.length).fill(null),(function(e,i){return a("option",{key:i+1,domProps:{textContent:t._s(i+1)}})})),0),a("ChutierItem",{attrs:{file:e,is_clicked:t.last_clicked===e.$path,is_selected:!1,context:"stack"},on:{unclicked:function(e){t.last_clicked=!1}}})],1)})),0)],1),a("div",{staticClass:"_fields"},[a("small",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.date_created_corrected,expression:"date_created_corrected"}],staticClass:"is--dark",attrs:{type:"datetime-local",step:"1"},domProps:{value:t.date_created_corrected},on:{input:function(e){e.target.composing||(t.date_created_corrected=e.target.value)}}})]),a("span",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("complete_or_correct_title_kw"))+" ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"is--dark",attrs:{type:"text",required:"",placeholder:t.$t("title")},domProps:{value:t.title},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.$emit("close"))},input:function(e){e.target.composing||(t.title=e.target.value)}}}),a("KeywordsField",{attrs:{can_edit:!0,keywords:t.keywords},on:{"update:keywords":function(e){t.keywords=e},cancelEdit:function(e){return t.$emit("close")}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"is--dark _descriptionField",attrs:{placeholder:t.$t("description")},domProps:{value:t.description},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.$emit("close"))},input:function(e){e.target.composing||(t.description=e.target.value)}}})],1),a("div",{staticClass:"_shareBtn"},[a("transition",{attrs:{name:"scaleInFade",mode:"out-in"}},[t.shared_space_path?a("button",{key:t.share_button_is_enabled,staticClass:"u-buttonLink",attrs:{type:"button",disabled:!t.share_button_is_enabled},on:{click:t.shareButtonClicked}},[t._v(" "+t._s(t.$t("publish"))+"  "),a("sl-icon",{staticStyle:{"font-size":"1rem"},attrs:{name:"arrow-right-square",circle:""}})],1):t._e()])],1)])])},D=[],T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_chutierPane"},[a("sl-button",{staticClass:"_closeBtn",attrs:{variant:"neutral",size:"medium",circle:""},on:{click:function(e){return t.$emit("close")}}},[a("sl-icon",{attrs:{name:"x-lg",label:t.$t("close")}})],1),t._t("default")],2)},A=[],N={props:{},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},Z=N,O=(a(64252),(0,_.Z)(Z,T,A,!1,null,"1cb65e24",null)),H=O.exports,V={props:{files:Array,shared_space_path:String},components:{ChutierPane:H,KeywordsField:q,ChutierItem:R},data(){return{last_clicked:void 0,title:"",description:"",keywords:[],date_created_corrected:""}},created(){const t=this.files.map((t=>t.date_created_corrected||t.$date_created||t.$date_uploaded));t.sort(((t,e)=>+new Date(e)-+new Date(t))),this.date_created_corrected=this.datetimeLocal(t[0])},mounted(){},beforeDestroy(){},watch:{},computed:{share_button_is_enabled(){return this.title.length>0&&this.keywords.length>0}},methods:{changeMediaOrder(t,e){let a=this.files.map((t=>t.$path));function i(t,e,a){if(a>=t.length){var i=a-t.length+1;while(i--)t.push(void 0)}return t.splice(a,0,t.splice(e,1)[0]),t}i(a,t,e),this.$emit("updateFocusedMedia",a)},removeFromSelection(t){let e=this.files.map((t=>t.$path));e=e.filter((e=>e!==t)),this.$emit("updateFocusedMedia",e)},async shareButtonClicked(){const t=this.shared_space_path;this.title,this.description,this.keywords;const e={title:this.title,description:this.description,keywords:this.keywords,date_created_corrected:this.date_created_corrected,requested_slug:"stack",is_stack:!0,stack_files_metas:[],$admins:[this.connected_as.$path]},a=await this.$api.uploadFile({path:t,additional_meta:e}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t})),i=[];for(const s of this.files){const e=await this.$api.copyFile({path:s.$path,path_to_destination_folder:t,new_meta:{$admins:[this.connected_as.$path],belongs_to_stack:a}});i.push(e),await this.$api.deleteItem({path:s.$path})}await this.$api.updateMeta({path:t+"/"+a,new_meta:{stack_files_metas:i}}),this.$emit("stackCreated")}}},W=V,J=(a(41099),(0,_.Z)(W,P,D,!1,null,"41e31ec4",null)),U=J.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("settings")},on:{close:function(e){return t.$emit("close")}}},[a("div",{},[t.is_loading?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):a("div",[a("sl-tab-group",{on:{"sl-tab-show":t.newTabShown}},[a("sl-tab",{attrs:{slot:"nav",panel:"informations"},slot:"nav"},[t._v(" "+t._s(t.$t("informations"))+" ")]),a("sl-tab",{attrs:{slot:"nav",panel:"administration_and_access_control"},slot:"nav"},[t._v(" "+t._s(t.$t("administration_and_access_control"))+" ")]),a("sl-tab",{attrs:{slot:"nav",panel:"suggested_cat_kw"},slot:"nav"},[t._v(" "+t._s(t.$t("suggested_cat_kw"))+" ")]),a("sl-tab-panel",{attrs:{name:"informations"}},[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"name_of_instance",label:t.$t("name_of_instance"),instructions:t.$t("name_of_instance_instructions"),content:t.settings.name_of_instance||"",path:t.settings.$path,tag:"h1",required:!0,minlength:3,maxlength:40,can_edit:t.is_instance_admin}})],1),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"presentation_of_instance_fr",label:t.$t("presentation_of_instance")+" (en français)",instructions:t.$t("presentation_of_instance_instructions"),content:t.settings.presentation_of_instance_fr,path:t.settings.$path,required:!1,input_type:"markdown",can_edit:t.is_instance_admin}})],1),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"presentation_of_instance_en",label:t.$t("presentation_of_instance")+" (en anglais)",instructions:t.$t("presentation_of_instance_instructions"),content:t.settings.presentation_of_instance_en,path:t.settings.$path,required:!1,input_type:"markdown",can_edit:t.is_instance_admin}})],1)]),a("sl-tab-panel",{attrs:{name:"administration_and_access_control"}},["administration_and_access_control"===t.current_tab?a("AdminsAndContributorsField",{attrs:{folder:t.settings,can_edit:!0,admin_label:t.$t("admin"),admin_instructions:t.$t("instance_admin_instructions"),contrib_instructions:t.$t("instance_contrib_instructions")}}):t._e(),a("br"),a("TitleField",{attrs:{field_name:"general_password",label:t.$t("general_password"),instructions:t.$t("general_password_instructions"),content:t.settings.general_password,path:t.settings.$path,input_type:"password",required:!1,can_edit:t.is_instance_admin}}),a("br"),a("TitleField",{attrs:{field_name:"contactmail_of_instance",label:t.$t("contactmail_of_instance"),instructions:t.$t("contactmail_of_instance_instructions"),content:t.settings.contactmail_of_instance,path:t.settings.$path,required:!1,input_type:"email",can_edit:t.is_instance_admin}})],1),a("sl-tab-panel",{attrs:{name:"suggested_cat_kw"}},["suggested_cat_kw"===t.current_tab?a("SuggestedCategories"):t._e()],1)],1)],1)])])},Q=[],X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.opened_category_path?[a("SingleCategory",{attrs:{path:t.opened_category_path},on:{close:function(e){t.opened_category_path=!1}}})]:[a("div",t._l(t.categories,(function(e){return a("div",{key:e.$path,staticClass:"_categoryRow"},[a("div",{staticClass:"_title",style:t.categoryStyles(e)},[t._v(" "+t._s(e.title)+" ")]),a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{textContent:t._s(t.$t("open"))},on:{click:function(a){return t.openCategory(e.$path)}}})])})),0),a("button",{staticClass:"u-buttonLink",class:{"is--active":t.show_create_category},attrs:{type:"button"},on:{click:function(e){t.show_create_category=!t.show_create_category}}},[t._v(" "+t._s(t.$t("add_category"))+" ")]),t.show_create_category?a("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createCategory.apply(null,arguments)}}},[a("fieldset",[a("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("add_category")))]),a("TextInput",{staticClass:"u-spacingBottom",attrs:{content:t.new_category_title,label_str:"category_name",required:!0,input_type:"text"},on:{"update:content":function(e){t.new_category_title=e}}}),t._m(0),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",disabled:0===t.new_category_title.length,type:"submit"},slot:"footer"},[t._v(" "+t._s(t.$t("create"))+" ")])],1)]):t._e()]],2)},G=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"u-instructions"},[a("small",[t._v(" Tout en majuscule ")])])}],tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("sl-icon",{attrs:{name:"arrow-left-short"}}),t._v(" "+t._s(t.$t("back"))+" ")],1),a("div",{staticClass:"u-spacingBottom"}),t.is_loading?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):a("div",[a("div",{staticClass:"_top"},[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{staticClass:"_title",attrs:{label:t.$t("category_title"),field_name:"title",content:t.category.title,path:t.category.$path,tag:"h3",required:!0,maxlength:20,can_edit:!0}})],1),a("ColorInput",{attrs:{label:t.$t("custom_color"),default_value:"#ffffff",value:t.category.tag_color,can_toggle:!0},on:{save:t.saveNewColor}})],1),a("div",{staticClass:"u-spacingBottom _kwSimulation"},[a("SingleKeyword",{attrs:{keyword:t.category.title+"/couleur",cat_color:t.category.tag_color}})],1),a("div",{staticClass:"u-spacingBottom u-keywords"},t._l(t.new_list_of_suggestions,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:!0},on:{remove:function(a){return t.removeSuggestion(e)}}})})),1),a("div",{staticClass:"u-spacingBottom"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_suggestion,expression:"new_suggestion"}],attrs:{type:"text",placeholder:"Nouveau mot-clé"},domProps:{value:t.new_suggestion},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.newKeyword.apply(null,arguments))},input:function(e){e.target.composing||(t.new_suggestion=e.target.value)}}}),t.new_keyword_already_exists?a("div",{staticClass:"u-instructions"},[a("small",[t._v("Ce mot-clé existe déjà, vous ne pouvez pas l’ajouter. Si vous souhaitez changer la case, supprimez le de la liste puis ajoutez le à nouveau.")])]):t.new_keyword_contains_slash?a("div",{staticClass:"u-instructions"},[a("small",[t._v('Ce mot-clé contient le caractère "/", qui est interdit.')])]):t.new_suggestion.length>0?a("div",{staticClass:"u-instructions"},[a("small",[t._v("Validez avec la touche entrée.")])]):t._e()]),0===t.new_suggestion.length?a("SaveCancelButtons",{staticClass:"_scb",on:{save:t.saveNewSuggestion,cancel:t.cancel}}):t._e(),a("RemoveMenu",{attrs:{remove_text:t.$t("remove")},on:{remove:t.removeCat}})],1)])},et=[],at={props:{path:String},components:{SingleKeyword:x},data(){return{category:void 0,is_loading:!0,new_list_of_suggestions:[],new_suggestion:""}},created(){},async mounted(){this.category=await this.$api.getFolder({path:this.path}),this.$api.join({room:this.path}),this.new_list_of_suggestions=this.category.list_of_suggestions||[],this.is_loading=!1},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{new_keyword_already_exists(){return this.new_list_of_suggestions.some((t=>t.toLowerCase()===this.new_suggestion.toLowerCase()))},new_keyword_contains_slash(){return this.new_suggestion.includes("/")}},methods:{removeSuggestion(t){this.new_list_of_suggestions=this.new_list_of_suggestions.filter((e=>e!==t))},newKeyword(){if(0===this.new_suggestion.length||this.new_keyword_already_exists||this.new_keyword_contains_slash)return!1;this.new_list_of_suggestions.push(this.new_suggestion),this.new_suggestion=""},cancel(){this.new_list_of_suggestions=this.category.list_of_suggestions,this.new_suggestion="",this.$emit("close")},async saveNewSuggestion(){await this.$api.updateMeta({path:this.path,new_meta:{list_of_suggestions:this.new_list_of_suggestions}}),this.$emit("close")},async saveNewColor(t){await this.$api.updateMeta({path:this.path,new_meta:{tag_color:t||""}})},async removeCat(){await this.$api.deleteItem({path:this.path}),this.$emit("close")}}},it=at,st=(a(79722),(0,_.Z)(it,tt,et,!1,null,"42d60a78",null)),ot=st.exports,rt={props:{},components:{SingleCategory:ot},data(){return{categories:void 0,show_create_category:!1,opened_category_path:!1,new_category_title:"",path:"categories"}},created(){},async mounted(){this.categories=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_categories_error=t.response})),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{},methods:{async createCategory(){const t=await this.$api.createFolder({path:this.path,additional_meta:{title:this.new_category_title.toUpperCase(),requested_slug:this.new_category_title,$status:"public"}});this.openCategory(this.path+"/"+t)},openCategory(t){this.opened_category_path=t},categoryStyles(t){return t.tag_color?`\n        color: ${t.tag_color}\n      `:""}}},nt=rt,lt=(a(36029),(0,_.Z)(nt,X,G,!1,null,"07d97431",null)),ct=lt.exports,dt={props:{},components:{SuggestedCategories:ct},data(){return{settings:void 0,is_loading:!0,current_tab:"administration_and_access_control"}},created(){},async mounted(){this.settings=await this.$api.getFolder({path:""}).catch((t=>(this.is_loading=!1,t))),this.is_loading=!1,this.$api.join({room:this.settings.$path})},beforeDestroy(){this.$api.leave({room:this.settings.$path})},watch:{},computed:{},methods:{newTabShown(t){this.current_tab=t.detail.name}}},_t=dt,ut=(0,_.Z)(_t,Y,Q,!1,null,"7780b3b7",null),pt=ut.exports,ht={props:{shared_space_path:String},components:{LinkPicker:p,ChutierItem:R,MediaStack:U,AdminLumaSettings:pt},data(){return{chutier:void 0,selected_files:[],id:`image_select_${(Math.random().toString(36)+"00000000000000000").slice(2,5)}`,show_admin_settings:!1,last_clicked:void 0,selected_items_slugs:[],show_mediastack_modal:!1,max_items_selected:15,show_link_picker:!1,show_qr_code_modal:!1,show_confirm_remove_menu:!1}},created(){},mounted(){this.listChutier()},beforeDestroy(){},watch:{selected_items_slugs(){this.show_confirm_remove_menu&&(this.show_confirm_remove_menu=!1),this.selected_items_slugs.length>this.max_items_selected&&(this.selected_items_slugs=this.selected_items_slugs.slice(0,this.max_items_selected),this.$alertify.delay(4e3).error(this.$t("notifications.too_many_items_selected")),setTimeout((()=>{this.$alertify.delay(4e3).error(this.$t("notifications.max_items_is")+" "+this.max_items_selected)}),500))},chutier_items(){const t=this.selected_items_slugs.filter((t=>this.chutier_items.some((e=>e.$path===t))));JSON.stringify(this.selected_items_slugs)!==JSON.stringify(t)&&(this.selected_items_slugs=t)}},computed:{path(){return this.connected_as.$path},url_to_page(){return this.$route.path,window.location.href},selected_items(){return this.selected_items_slugs.map((t=>this.chutier_items.find((e=>e.$path===t))||!1))},all_items_selected(){return this.selected_items.length===this.chutier_items.length},chutier_items(){if(!this.chutier||!this.chutier.$files)return[];const t=JSON.parse(JSON.stringify(this.chutier.$files));return t.sort(((t,e)=>{const a=t=>new Date(t.date_created_corrected||t.$date_created||t.$date_uploaded);return+a(e)-+a(t)})),t},chutier_items_grouped(){return this.groupFilesBy(this.chutier_items,["date_created_corrected","$date_created","$date_uploaded"],"day")}},methods:{async listChutier(){this.chutier=await this.$api.getFolder({path:this.path}).catch((t=>{this.fetch_project_error=t.response,this.is_loading=!1}))},toggleSelect(t){this.selected_items_slugs.includes(t)?this.selected_items_slugs=this.selected_items_slugs.filter((e=>e!==t)):this.selected_items_slugs.push(t)},updateInputFiles(t){this.selected_files=Array.from(t.target.files),t.target.value=""},async createNote(){const t=+new Date,e="note-"+t+".txt",a=await this.$api.uploadText({path:this.path,filename:e,content:"",additional_meta:{title:"Sans titre"}});setTimeout((()=>{this.$eventHub.$emit("chutier.item.edit",a)}),100)},async createEmbed(t){const e=+new Date,a="url-"+e+".txt",i=await this.$api.uploadText({path:this.path,filename:a,content:t,additional_meta:{title:"Titre du lien",$type:"url"}});this.show_link_picker=!1,setTimeout((()=>{this.$eventHub.$emit("chutier.item.edit",i)}),100)},async importedMedias(t){},selectAll(){this.selected_items_slugs=this.chutier_items.map((t=>t.$path))},deselectAll(){this.selected_items_slugs=[]},selectRange(t){this.selected_items_slugs=this.selected_items_slugs.concat(t),this.selected_items_slugs=[...new Set(this.selected_items_slugs)]},deselectRange(t){this.selected_items_slugs=this.selected_items_slugs.filter((e=>!t.includes(e)))},rangeIsSelected(t){return 0!==this.selected_items_slugs.length&&!t.find((t=>!1===this.selected_items_slugs.includes(t)))},async removeItemsInSelection(){for(const t of this.selected_items_slugs)await this.$api.deleteItem({path:t});this.show_confirm_remove_menu=!1}}},ft=ht,mt=(a(10288),(0,_.Z)(ft,o,r,!1,null,"f113b980",null)),vt=mt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_sharedFolder",style:t.items_styles},[t.shared_folder?a("div",{staticClass:"_sharedFolder--content",on:{scroll:t.updatedScroll}},[a("div",{staticClass:"_mainContent"},[a("div",{staticClass:"_topbar"},[a("div",{staticClass:"_topbar--content"},[a("div",{staticClass:"_title"},[a("transition",{attrs:{name:"showBTTBtn"}},[t.current_scroll>100?a("button",{attrs:{type:"button"},on:{click:t.scrollTop}},[a("sl-icon",{attrs:{name:"arrow-up-circle-fill"}})],1):t._e()]),t._v(" "+t._s(t.$t("shared_space_archive"))+" ")],1),a("div",{staticClass:"_toprightBtns"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_lang_modal=!t.show_lang_modal}}},[t._v(" "+t._s(t.current_lang_code)+" ")]),t.show_lang_modal?a("LangModal",{on:{close:function(e){t.show_lang_modal=!1}}}):t._e(),a("button",{staticClass:"u-buttonLink",class:{"is--active":t.show_filter_sort_pane},attrs:{type:"button"},on:{click:function(e){t.show_filter_sort_pane=!t.show_filter_sort_pane}}},[t._v(" "+t._s(t.$t("filter_sort"))+" ")])],1)]),a("div",{staticClass:"_filesIndicator"},[a("div",{staticClass:"u-sameRow"},[a("div",{},[t.filtered_shared_files.length===t.shared_files.length?[t._v(" "+t._s(t.filtered_shared_files.length)+" ")]:[a("b",[t._v(t._s(t.filtered_shared_files.length))]),t._v("/"+t._s(t.shared_files.length)+" ")],t._v(" "+t._s(t.$t("items").toLowerCase())+" ")],2)]),a("div",{domProps:{textContent:t._s("•")}}),a("div",{staticClass:"u-sameRow"},[a("div",[t._v(t._s(t.$t("zoom")))]),a("div",{staticClass:"_itemWidthControl"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.item_width,expression:"item_width",modifiers:{number:!0}}],attrs:{type:"range",list:"'ticks'",min:50,max:300,step:1},domProps:{value:t.item_width},on:{__r:function(e){t.item_width=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),a("datalist",{attrs:{id:"'ticks'"}},t._l([20,50,100,150,200,300],(function(e){return a("option",{key:e},[t._v(" "+t._s(e)+" ")])})),0)])])])]),a("transition",{attrs:{name:"scaleInFade_fast",mode:"out-in"}},[t.opened_file?a("ItemModal",{key:t.opened_file.$path,attrs:{file:t.opened_file,opened_file_sequence:t.opened_file_sequence,position_in_list:t.opened_file_position_in_list},on:{prevMedia:function(e){return t.navMedia(-1)},nextMedia:function(e){return t.navMedia(1)},close:t.closeFile}}):t._e()],1),a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[a("transition-group",{key:t.sort_order+"-"+t.group_mode,attrs:{tag:"div",name:"projectsList",appear:""}},[0===t.grouped_files.length?a("div",{key:"nocontent",staticClass:"u-instructions _noContent"},[t._v(" "+t._s(t.$t("no_content"))+" ")]):t._l(t.grouped_files,(function(e){var i=e.label,s=e.files;return a("div",{key:i,staticClass:"_dayFileSection"},[a("div",{staticClass:"_label"},[t._v(" "+t._s(i)+" ")]),a("transition-group",{staticClass:"_grid",attrs:{tag:"div",name:"listComplete",appear:""}},t._l(s,(function(e){return a("SharedFolderItem",{key:e.$path,staticClass:"_file",attrs:{file:e,is_opened:t.opened_file&&t.opened_file.$path===e.$path},on:{open:function(a){return t.openFile(e.$path)}}})})),1)],1)}))],2)],1),a("footer",{staticClass:"_footer"},[a("small",[a("a",{attrs:{href:"mailto:ckernreuter@luma-arles.org",target:"_blank"}},[t._v(t._s(t.$t("help_contact")))]),a("br"),t._v(" "+t._s(t.$t("version"))+" "+t._s(t.$root.app_infos.version)+" "),t.is_instance_admin?a("div",[a("DownloadFolder",{attrs:{path:t.shared_folder_path}})],1):t._e()])])],1),a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.show_filter_sort_pane?a("div",{staticClass:"_filterBar"},[a("FilterBar",{attrs:{shared_files:t.shared_files,group_mode:t.group_mode,sort_order:t.sort_order,search_str:t.search_str,filetype_filter:t.filetype_filter,author_path_filter:t.author_path_filter,available_keywords:t.available_keywords,keywords_filter:t.keywords_filter},on:{"update:group_mode":function(e){t.group_mode=e},"update:sort_order":function(e){t.sort_order=e},"update:search_str":function(e){t.search_str=e},"update:filetype_filter":function(e){t.filetype_filter=e},"update:author_path_filter":function(e){t.author_path_filter=e},"update:keywords_filter":function(e){t.keywords_filter=e},close:function(e){t.show_filter_sort_pane=!1}}})],1):t._e()])],1):a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1)])},wt=[],bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_sharedFolderItem",class:{"is--opened":t.is_opened},on:{click:function(e){return t.$emit("open")}}},[a("div",{staticClass:"_title"},[t.file&&t.file.title?[t._v(" "+t._s(t.file.title)+" ")]:[t._v("-")]],2),t.first_file?a("MediaContent",{staticClass:"_sharedFolderItem--preview",attrs:{file:t.first_file,context:"preview",img_loading:"lazy",resolution:360}}):t._e(),t._is_stack?[t._stack_files.length>1?a("MediaContent",{staticClass:"_sharedFolderItem--preview _sharedFolderItem--preview_stacked",attrs:{file:t._stack_files[1],img_loading:"lazy",context:"preview"}}):t._e(),t._stack_files.length>2?a("MediaContent",{staticClass:"_sharedFolderItem--preview _sharedFolderItem--preview_stacked",attrs:{file:t._stack_files[2],img_loading:"lazy",context:"preview"}}):t._e()]:t._e()],2)},yt=[],kt={props:{file:Object,is_opened:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{first_file(){return!!this.file&&(this._is_stack?this.file._stack_files[0]:this.file)},_is_stack(){return this.file.is_stack&&this.file._stack_files&&Array.isArray(this.file._stack_files)&&this.file._stack_files[0]&&this.file._stack_files[0].$type},_stack_files(){return this.file?._stack_files}},methods:{}},$t=kt,Ct=(a(48824),(0,_.Z)($t,bt,yt,!1,null,"da6ee8da",null)),xt=Ct.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_itemModal"},[a("div",{staticClass:"_mediaModal--overlay",on:{click:function(e){return t.$emit("close")}}}),a("div",{staticClass:"_modalContent"},[a("div",{staticClass:"_topBar"},[a("button",{staticClass:"u-button u-button_transparent u-button_icon _leftArrow",attrs:{type:"button",disabled:"first"===t.position_in_list||"alone"===t.position_in_list},on:{click:function(e){return t.$emit("prevMedia")}}},[a("b-icon",{attrs:{icon:"arrow-left-square"}})],1),a("div",{staticClass:"_title"},[t._v(" "+t._s(t.$t("document"))+" "+t._s(t.opened_file_sequence)+"   "),a("button",{staticClass:"u-button u-button_transparent u-button_icon _closeButton",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("b-icon",{attrs:{icon:"x-circle"}})],1)]),a("button",{staticClass:"u-button u-button_transparent u-button_icon _rightArrow",attrs:{type:"button",disabled:"last"===t.position_in_list||"alone"===t.position_in_list},on:{click:function(e){return t.$emit("nextMedia")}}},[a("b-icon",{attrs:{icon:"arrow-right-square"}})],1)]),a("div",{staticClass:"_bottomContent"},[a("div",{staticClass:"_leftContent"},[t.current_file_shown?a("div",{key:t.current_file_shown.$path,staticClass:"_openedFile--media"},[a("MediaContent",{attrs:{file:t.current_file_shown,context:"full",resolution:1600}})],1):t._e(),t.current_file_shown&&t.file._stack_files?a("div",{staticClass:"_navArrow"},[a("button",{staticClass:"u-button u-button_icon",attrs:{type:"button",disabled:0===t.current_file_index_shown},on:{click:t.prevItemInStack}},[a("b-icon",{attrs:{icon:"arrow-left-circle-fill"}})],1),a("span",[t._v(" "+t._s(t.file_sequence_in_stack)+" ")]),a("button",{staticClass:"u-button u-button_icon",attrs:{type:"button",disabled:t.current_file_index_shown>=t.file._stack_files.length-1},on:{click:t.nextItemInStack}},[a("b-icon",{attrs:{icon:"arrow-right-circle-fill"}})],1)]):t._e(),t.file.is_stack?a("div",{staticClass:"_navMedia",attrs:{"data-layout":t.current_file_shown?"nav":"grid"}},[t._l(t.file._stack_files,(function(e,i){return[e&&e.$path?a("div",{key:e.$path,class:{"is--shown":t.current_file_index_shown===i},on:{click:function(e){return t.toggleFile(i)}}},[a("MediaContent",{attrs:{file:e,context:"preview",resolution:360}})],1):a("div",{key:"no-content-"+i,domProps:{textContent:t._s("error: missing file")}})]}))],2):t._e(),a("button",{staticClass:"u-button u-button_icon _toggleSidebarBtn",attrs:{type:"button"},on:{click:t.toggleSidebar}},[t.show_sidebar?[a("b-icon",{attrs:{icon:"list"}})]:[a("b-icon",{attrs:{icon:"list"}}),t._v("   "+t._s(t.$t("informations"))+" ")]],2)]),t.show_sidebar?a("div",{staticClass:"_rightContent"},[a("FileMeta",{attrs:{file:t.file,sequence:t.file_sequence_in_stack,is_stack:t.file.is_stack,stack_file_shown:t.current_file_shown},on:{removeMain:t.removeMain,removeCurrent:t.removeCurrent,closeStack:function(e){t.current_file_index_shown=!1}}})],1):t._e()])])])},Mt=[],St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_fileMeta"},[a("div",{staticClass:"_fileMeta--main"},[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"title",content:t.file.title,path:t.file.$path,tag:"h1",can_edit:t.can_edit}})],1),a("hr"),a("div",{staticClass:"u-spacingBottom"},[a("DateField",{attrs:{field_name:"date_created_corrected",label:t.$t("date_created"),date:t.creation_date,path:t.file.$path,input_type:"datetime-local",can_edit:t.can_edit}}),a("DateField",{attrs:{field_name:"$date_uploaded",label:t.$t("date_uploaded"),date:t.file.$date_uploaded,path:t.file.$path,input_type:"datetime-local",can_edit:!1}})],1),a("AuthorField",{staticClass:"u-spacingBottom",attrs:{label:t.$t("authors"),field:"$admins",authors_paths:t.file.$admins,path:t.file.$path,can_edit:t.can_edit,instructions:t.$t("media_editing_instructions")}}),a("div",{staticClass:"u-spacingBottom"},[a("KeywordsField",{attrs:{field_name:"keywords",label:t.$t("keywords"),path:t.file.$path,keywords:t.file.keywords,can_edit:t.can_edit},on:{cancelEdit:function(t){}}})],1),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"description",label:t.$t("description"),content:t.file.description,path:t.file.$path,maxlength:1280,input_type:"markdown",can_edit:t.can_edit}})],1),t.is_stack?t._e():a("DownloadFile",{attrs:{file:t.file}},[a("sl-icon",{attrs:{name:"file-earmark-arrow-down"}}),t._v(" "+t._s(t.$t("download"))+" ")],1),a("RemoveMenu",{attrs:{remove_text:t.is_stack?t.$t("remove_stack"):t.$t("remove")},on:{remove:function(e){return t.$emit("removeMain")}}}),a("DebugBtn",{attrs:{content:t.file}})],1),a("transition",{attrs:{name:"partialSlideupFade",mode:"out-in",appear:""}},[t.is_stack&&t.stack_file_shown?a("div",{key:t.stack_file_shown.$path,staticClass:"_fileMeta--stackItem"},[a("button",{staticClass:"_fileMeta--stackItem--closeStackBtn",attrs:{type:"button"},on:{click:function(e){return t.$emit("closeStack")}}}),a("div",{staticClass:"_fileMeta--stackItem--content"},[t.sequence?a("div",{staticClass:"_sequence"},[t._v(" "+t._s(t.sequence)+" ")]):t._e(),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"title",content:t.stack_file_shown.title,path:t.stack_file_shown.$path,tag:"h2",can_edit:t.can_edit}})],1),a("hr"),a("div",{staticClass:"u-spacingBottom"},[a("DateField",{attrs:{field_name:"date_created_corrected",label:t.$t("date_created"),date:t.stack_file_shown.date_created_corrected,path:t.stack_file_shown.$path,input_type:"datetime-local",can_edit:t.can_edit}})],1),a("DownloadFile",{attrs:{file:t.stack_file_shown}},[a("sl-icon",{attrs:{name:"file-earmark-arrow-down"}}),t._v(" "+t._s(t.$t("download"))+" ")],1),a("RemoveMenu",{attrs:{remove_text:t.$t("remove_item_in_stack")},on:{remove:function(e){return t.$emit("removeCurrent")}}})],1)]):t._e()])],1)},Bt=[],It={props:{sequence:[Boolean,String],file:Object,is_stack:Boolean,stack_file_shown:[Boolean,Object]},components:{KeywordsField:q},data(){return{edit_mode:!1,creation_date:this.datetimeLocal(this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded)}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{can_edit(){return this.canLoggedinEditFolder({folder:this.file})}},methods:{}},Lt=It,Et=(a(44449),(0,_.Z)(Lt,St,Bt,!1,null,"7e70e3d6",null)),qt=Et.exports,zt={props:{file:Object,opened_file_sequence:[Boolean,String],position_in_list:String},components:{FileMeta:qt},data(){return{current_file_index_shown:!1,show_sidebar:"false"!==localStorage.getItem("show_sidebar")}},created(){},mounted(){window.addEventListener("keyup",this.handleKeyPress),this.toggleFile(0)},beforeDestroy(){window.removeEventListener("keyup",this.handleKeyPress)},watch:{show_sidebar(){localStorage.setItem("show_sidebar",this.show_sidebar)}},computed:{current_file_shown(){if(this.file.is_stack){if(!1===this.current_file_index_shown)return!1;{const t=this.file._stack_files[this.current_file_index_shown];return t||!1}}return this.file},file_sequence_in_stack(){return!!this.file.is_stack&&`${this.current_file_index_shown+1}/${this.file._stack_files.length}`}},methods:{async removeMain(){if(this.file.is_stack){this.current_file_index_shown=!1,await this.$api.deleteItem({path:this.file.$path});for(const t of this.file._stack_files)await this.$api.deleteItem({path:t.$path})}else await this.$api.deleteItem({path:this.file.$path});this.$emit("close")},async removeCurrent(){let t=this.file.stack_files_metas;t=t.filter((t=>t!==this.getFilename(this.current_file_shown.$path))),await this.$api.updateMeta({path:this.file.$path,new_meta:{stack_files_metas:t}}),await this.$api.deleteItem({path:this.current_file_shown.$path})},toggleSidebar(){this.show_sidebar=!this.show_sidebar},handleKeyPress(t){this.$root.modal_is_opened||"input"===t.target.tagName.toLowerCase()||"textarea"===t.target.tagName.toLowerCase()||t.target.className.includes("ql-editor")||t.target.hasAttribute("contenteditable")||("Escape"===t.key&&this.$emit("close"),"ArrowLeft"===t.key&&this.prevItemInStack(),"ArrowRight"===t.key&&this.nextItemInStack())},toggleFile(t){this.current_file_index_shown===t?this.current_file_index_shown=!1:this.current_file_index_shown=t},prevItemInStack(){const t=this.current_file_index_shown-1;t>=0&&this.toggleFile(t)},nextItemInStack(){const t=this.current_file_index_shown+1;t<this.file._stack_files.length&&this.toggleFile(t)}}},jt=zt,Kt=(a(23741),(0,_.Z)(jt,Ft,Mt,!1,null,"593c0920",null)),Rt=Kt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_filterBar"},[a("button",{staticClass:"u-buttonLink _closeBtn",class:{"is--white":t.can_be_reset},attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("b-icon",{attrs:{icon:"x-lg"}})],1),a("transition",{attrs:{name:"slidedown",mode:"out-in"}},[t.can_be_reset?a("button",{staticClass:"u-button u-button_black _resetFilters",attrs:{type:"button"},on:{click:t.resetFilters}},[t._v(" "+t._s(t.$t("reset"))+" ")]):t._e()]),a("div",{staticClass:"_filterBar--content"},[a("div",{},[a("input",{attrs:{type:"text",placeholder:t.$t("search_text")},domProps:{value:t.search_str},on:{input:function(e){return t.$emit("update:search_str",e.target.value)}}}),a("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("search_fields"))+" ")])]),a("div",{staticClass:"_sortSelect"},[a("DLabel",{attrs:{str:t.$t("sort_by")}}),a("select",{domProps:{value:t.sort_order},on:{change:function(e){return t.$emit("update:sort_order",e.target.value)}}},[a("option",{attrs:{value:"date_uploaded"},domProps:{textContent:t._s(t.$t("date_uploaded"))}}),a("option",{attrs:{value:"date_created"},domProps:{textContent:t._s(t.$t("date_created"))}})])],1),a("div",[a("DLabel",{attrs:{str:t.$t("group_by_date")}}),a("div",{staticClass:"_groupBy"},t._l(t.group_options,(function(e){return a("div",{key:e.key},[a("input",{attrs:{type:"radio",id:e.key},domProps:{value:e.key,checked:t.group_mode===e.key},on:{change:function(e){return t.$emit("update:group_mode",e.target.value)}}}),a("label",{class:{"is--selected":e.key===t.group_mode},attrs:{for:e.key},domProps:{textContent:t._s(e.label)}})])})),0)],1),a("div",{staticClass:"_typeFilter"},[a("DLabel",{attrs:{str:t.$t("filter_by_type")}}),a("select",{domProps:{value:t.filetype_filter},on:{change:function(e){return t.$emit("update:filetype_filter",e.target.value)}}},t._l(t.types_of_medias,(function(e){return a("option",{key:e.key,domProps:{value:e.key,textContent:t._s(e.label)}})})),0)],1),a("div",{staticClass:"_myContent"},[a("DLabel",{attrs:{str:t.$t("filter_by_author")}}),a("select",{domProps:{value:t.author_path_filter},on:{change:function(e){return t.$emit("update:author_path_filter",e.target.value)}}},[a("option",{attrs:{value:""},domProps:{textContent:t._s(t.$t("none"))}}),t._l(t.all_authors,(function(e){return a("option",{key:e.$path,domProps:{value:e.$path,textContent:t._s(e.name)}})}))],2)],1),a("div",{staticClass:"_tag"},[a("DLabel",{attrs:{str:t.$t("filter_by_keyword")}}),t.keywords_filter.length>0?a("div",{staticClass:"u-keywords _usedKw"},t._l(t.keywords_filter,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:!0},on:{remove:function(a){return t.filterByKeyword(e)}}})})),1):t._e(),a("div",{staticClass:"_searchKW"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.kw_search,expression:"kw_search"}],attrs:{type:"text",placeholder:t.$t("search")},domProps:{value:t.kw_search},on:{input:function(e){e.target.composing||(t.kw_search=e.target.value)}}})]),a("div",{staticClass:"u-keywords"},[t._l(t.collapsable_keywords,(function(e){return a("SingleKeyword",{key:e.title,attrs:{keyword:e.title,count:e.count,can_add:!0},on:{add:function(a){return t.filterByKeyword(e.title)}}})})),t.available_keywords_except_active.length>10?a("button",{staticClass:"u-buttonLink",class:{"is--active":t.show_all_keywords},attrs:{type:"button"},on:{click:function(e){t.show_all_keywords=!t.show_all_keywords}}},[t._v(" "+t._s(t.$t("show_all_keywords"))+" ")]):t._e()],2)],1)])],1)},Dt=[],Tt={props:{shared_files:Array,group_mode:String,sort_order:String,search_str:String,filetype_filter:String,author_path_filter:String,keywords_filter:Array,available_keywords:Array},components:{SingleKeyword:x},data(){return{all_authors:[],show_all_keywords:!1,kw_search:"",group_options:[{key:"day",label:this.$t("day")},{key:"month",label:this.$t("month")},{key:"year",label:this.$t("year")}],type_of_media_to_display:"all",types_of_medias:[{key:"all",label:this.$t("all_medias_types")},{key:"image",label:this.$t("image")},{key:"video",label:this.$t("video")},{key:"audio",label:this.$t("audio")},{key:"text",label:this.$t("text")},{key:"pdf",label:this.$t("pdf")},{key:"stl",label:this.$t("stl")},{key:"other",label:this.$t("other")}]}},async created(){this.all_authors=await this.$api.getFolders({path:"authors"})},async mounted(){},beforeDestroy(){},watch:{},computed:{available_keywords_except_active(){let t=this.available_keywords.filter((t=>!this.keywords_filter.includes(t.title)&&(!this.kw_search||t.title.includes(this.kw_search))));return t},collapsable_keywords(){return this.show_all_keywords?this.available_keywords_except_active:this.available_keywords_except_active.slice(0,10)},can_be_reset(){return"day"!==this.group_mode||"date_uploaded"!==this.sort_order||""!==this.search_str||""!==this.author_path_filter||"all"!==this.filetype_filter||this.keywords_filter.length>0}},methods:{resetFilters(){this.$emit("update:group_mode","day"),this.$emit("update:sort_order","date_uploaded"),this.$emit("update:search_str",""),this.$emit("update:author_path_filter",""),this.$emit("update:filetype_filter","all"),this.$emit("update:keywords_filter",[])},filterByKeyword(t){let e=this.keywords_filter.slice();this.keywords_filter.includes(t)?e=e.filter((e=>e!==t)):e.push(t),this.$emit("update:keywords_filter",e)}}},At=Tt,Nt=(a(64393),(0,_.Z)(At,Pt,Dt,!1,null,"40eeb827",null)),Zt=Nt.exports,Ot=a(57717),Ht={props:{shared_folder_path:String},components:{SharedFolderItem:xt,ItemModal:Rt,FilterBar:Zt,LangModal:Ot.Z},data(){return{shared_folder:void 0,show_backtotop_btn:!1,current_scroll:0,show_lang_modal:!1,show_filter_sort_pane:!1,sort_order:"date_uploaded",search_str:"",filetype_filter:"all",author_path_filter:"",keywords_filter:[],group_mode:"year",item_width:150}},i18n:{messages:{fr:{},en:{}}},created(){},async mounted(){this.shared_folder=await this.$api.getFolder({path:this.shared_folder_path}),this.$api.join({room:this.shared_folder_path})},beforeDestroy(){},watch:{},computed:{opened_file(){return!!this.$route.query?.file&&this.shared_files.find((t=>this.getFilename(t.$path)===this.$route.query.file))},current_lang_code(){return this.$i18n.availableLocales,this.$i18n.locale},opened_file_position_index(){return!!this.opened_file&&this.filtered_shared_files.findIndex((t=>t.$path===this.opened_file.$path))},opened_file_sequence(){return`${this.opened_file_position_index+1}/${this.filtered_shared_files.length}`},opened_file_position_in_list(){const t=this.opened_file_position_index;return!1===t?"none":1===this.filtered_shared_files.length?"alone":0===t?"first":t===this.filtered_shared_files.length-1?"last":"none"},items_styles(){return{"--items-width":this.item_width+"px"}},shared_files(){if(!this.shared_folder?.$files)return[];const t=JSON.parse(JSON.stringify(this.shared_folder.$files)),e=t.filter((t=>t.belongs_to_stack)),a=t.reduce(((t,a)=>(a.belongs_to_stack||(a.is_stack&&a.stack_files_metas&&(a._stack_files=a.stack_files_metas.map((t=>e.find((e=>e.$path.endsWith("/"+t)))))),t.push(a)),t)),[]);return a.sort(((t,e)=>+new Date(e.$date_uploaded)-+new Date(t.$date_uploaded))),a},filtered_shared_files(){return this.shared_files.filter((t=>{if(this.author_path_filter&&(!t.$admins||!t.$admins.includes(this.author_path_filter)))return!1;if(this.keywords_filter.length>0){if(!t.keywords||!Array.isArray(t.keywords))return!1;if(this.keywords_filter.some((e=>!t.keywords.includes(e))))return!1}return!("all"!==this.filetype_filter&&!this.fileOrStackContainsType(t,this.filetype_filter))&&(!this.search_str||!!(t.title&&t.title.toLowerCase().includes(this.search_str.toLowerCase())||t.description&&t.description.toLowerCase().includes(this.search_str.toLowerCase())||t.$content&&t.$content.toLowerCase().includes(this.search_str.toLowerCase())))}))},grouped_files(){let t;return"date_created"===this.sort_order?t=["date_created_corrected","$date_created","$date_uploaded"]:"date_uploaded"===this.sort_order&&(t=["$date_uploaded"]),this.groupFilesBy(this.filtered_shared_files,t,this.group_mode)},available_keywords(){const t=this.filtered_shared_files.reduce(((t,e)=>(e.keywords&&Array.isArray(e.keywords)&&e.keywords.map((e=>{const a=t.find((t=>t.title===e));a?a.count+=1:t.push({title:e,count:1})})),t)),[]);return t.sort(((t,e)=>e.count-t.count))}},methods:{updatedScroll(){this.current_scroll=this.$el.scrollTop},scrollTop(){this.$el.scrollTo({top:0,behavior:"smooth"})},openFile(t){let e=Object.assign({},this.$route.query)||{};const a=this.getFilename(t);e.file=a,this.$router.push({query:e})},closeFile(){let t=Object.assign({},this.$route.query)||{};delete t.file,this.$router.push({query:t})},navMedia(t){const e=this.opened_file_position_index,a=this.filtered_shared_files[e+t];a&&this.openFile(a.$path)},fileOrStackContainsType(t,e){return!(!t.$type||t.$type!==e)||!(!t.is_stack||!t._stack_files.some((t=>t&&t.$type===e)))}}},Vt=Ht,Wt=(a(8499),(0,_.Z)(Vt,gt,wt,!1,null,"3f9ae418",null)),Jt=Wt.exports,Ut={props:{},components:{MyChutier:vt,SharedFolder:Jt},data(){return{path:"folders",folders:void 0,shared_folder_path:void 0,show_chutier:"false"!==localStorage.getItem("show_chutier")}},created(){},async mounted(){await this.loadFolder()},beforeDestroy(){},watch:{connected_as(){},show_chutier(){localStorage.setItem("show_chutier",this.show_chutier)}},computed:{},methods:{async loadFolder(){await this.$api.getFolders({path:"authors"}),this.folders=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_spaces_error=t.response})),0===this.folders.length?(await this.createFolder(),window.location.reload()):this.shared_folder_path=this.folders[0].$path},async createFolder(){try{const t=await this.$api.createFolder({path:this.path});return t}catch(t){}}}},Yt=Ut,Qt=(a(6552),(0,_.Z)(Yt,i,s,!1,null,"1ba5e93a",null)),Xt=Qt.exports},84421:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._linkPicker[data-v-a5930508]{width:100%;margin:0 auto}._addMediaBtn[data-v-a5930508]{text-align:center;padding:calc(var(--spacing)*1)}._selectBtn[data-v-a5930508]{display:flex;place-items:center;justify-content:center;width:100%;gap:calc(var(--spacing)/1);background:#fff}iframe[data-v-a5930508]{width:100%;aspect-ratio:4/3}",""]),e["default"]=n},77488:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._kwSimulation[data-v-42d60a78]{display:flex}",""]),e["default"]=n},13671:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._categoryRow[data-v-07d97431]{display:flex;justify-content:space-between;align-content:center;padding:calc(var(--spacing)/8) 0}._title[data-v-07d97431]{background:var(--c-noir);padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px}",""]),e["default"]=n},19261:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._catBtn[data-v-a8097914]{background:#ffbe32;border-radius:5px;margin:2px;padding:2px}._fields[data-v-a8097914]{display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/1);justify-content:center;padding:calc(var(--spacing)/2)}._selectBox[data-v-a8097914]{width:20px;display:flex;place-content:center;cursor:pointer;color:var(--c-gris)}._selectBox input[data-v-a8097914]{cursor:inherit;--form-background:transparent!important;--form-control-color:var(--c-jaune);border-color:#555}._selectBox:hover input[data-v-a8097914]{border:2px solid var(--c-orange)}._infos[data-v-a8097914]{flex:1 1 auto;display:flex;flex-flow:row nowrap;justify-content:stretch;align-items:center;gap:calc(var(--spacing)/2);padding:0 calc(var(--spacing)/2);width:100%}._infos ._titleDateField[data-v-a8097914]{flex:1 1 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._chutierRow[data-v-a8097914]{width:100%;padding:calc(var(--spacing)/4) 0;margin-bottom:2px;overflow:hidden;border-radius:4px;transition:all .1s cubic-bezier(.19,1,.22,1)}._chutierRow[data-v-a8097914]:not(.is--selected):not(.is--edited):hover{background:hsla(0,0%,100%,.05)}._chutierRow.is--mousedown[data-v-a8097914]:not(.is--selected):not(.is--edited){background:rgba(0,0,0,.2)}._chutierRow.is--edited[data-v-a8097914],._chutierRow.is--selected[data-v-a8097914]{background:hsla(0,0%,100%,.15)}._chutierRow ._chutierRow--openLarge[data-v-a8097914]{display:block;cursor:pointer}._chutierRow ._chutierRow--openLarge[data-v-a8097914]:hover{opacity:.8}._chutierRow ._chutierRow--rows[data-v-a8097914]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center}._chutierRow[data-v-a8097914]:not(.is--edited){cursor:pointer}._chutierRow ._chutierRow--preview[data-v-a8097914]{position:relative;height:60px;border-radius:2px;width:60px;flex:0 0 auto;overflow:hidden;color:#fff;background:#000;font-size:70%}._chutierRow ._chutierRow--preview[data-v-a8097914]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._chutierRow ._chutierRow--preview[data-v-a8097914]  .ql-container{font-size:50%}._chutierRow ._chutierRow--largePreview[data-v-a8097914]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2;overflow:auto;background:#000}._chutierRow ._chutierRow--largePreview[data-type=text][data-v-a8097914]{padding:calc(var(--spacing))}._chutierRow ._chutierRow--largePreview[data-v-a8097914]  ._mediaContent{width:100%;height:100%;pointer-events:none}._chutierRow ._chutierRow--largePreview[data-v-a8097914]  ._mediaContent .u-floatingFsButton{display:none}._chutierRow ._chutierRow--largePreview[data-v-a8097914]  ._mediaContent ._mediaContent--pdfIframe,._chutierRow ._chutierRow--largePreview[data-v-a8097914]  ._mediaContent .plyr__control{pointer-events:auto}._chutierRow ._chutierRow--largePreview[data-v-a8097914]  ._mediaContent ._mediaContent--image{width:100%;height:100%;-o-object-fit:contain;object-fit:contain;-o-object-position:center;object-position:center}._chutierRow ._chutierRow--largePreview[data-v-a8097914]  ._mediaContent .plyr__video-wrapper{pointer-events:none}._chutierRow ._chutierRow--largePreview ._closeBtn[data-v-a8097914]{position:absolute;top:0;right:0;margin:calc(var(--spacing)/2)}._descriptionField[data-v-a8097914]{resize:vertical}._publierBtn[data-v-a8097914]{text-align:center;margin:calc(var(--spacing)/4) auto}._content[data-v-a8097914]  .ql-editor{background-color:#363636;border-color:#fff;color:#fff;padding:calc(var(--spacing)*.5)}._content[data-v-a8097914]  ._editBtn{display:none}._content[data-v-a8097914]  .ql-toolbar.ql-toolbar{top:50px;border-radius:8px;display:flex;flex-flow:row wrap;justify-content:space-between}._content[data-v-a8097914]  .ql-toolbar.ql-toolbar ._TEbtnContainer{width:auto;flex:1 0 auto;display:flex;justify-content:flex-end}",""]),e["default"]=n},41612:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._fileMeta[data-v-7e70e3d6]{position:relative;height:100%;width:100%;overflow:auto}._fileMeta[data-v-7e70e3d6],._fileMeta--main[data-v-7e70e3d6]{background:var(--modal-background)}._fileMeta--main[data-v-7e70e3d6]{padding:calc(var(--spacing)*1)}._fileMeta--stackItem[data-v-7e70e3d6]{position:absolute;top:0;bottom:0;left:0;right:0;background:transparent;display:flex;flex-flow:column nowrap;overflow:auto}._fileMeta--stackItem--closeStackBtn[data-v-7e70e3d6]{flex:0 0 30px;width:100%;display:block;background:var(--modal-background);opacity:.5;cursor:pointer;transition:all .25s cubic-bezier(.19,1,.22,1)}._fileMeta--stackItem--closeStackBtn[data-v-7e70e3d6]:focus-visible,._fileMeta--stackItem--closeStackBtn[data-v-7e70e3d6]:hover{opacity:.7}._fileMeta--stackItem--content[data-v-7e70e3d6]{flex:1;border-top:1px solid var(--color-borders);background:var(--modal-background);padding:calc(var(--spacing)*1)}hr[data-v-7e70e3d6]{margin:calc(var(--spacing)*1) 0}.partialSlideupFade-enter-active[data-v-7e70e3d6],.partialSlideupFade-leave-active[data-v-7e70e3d6]{transform:translateY(0);opacity:1;transition:all .25s cubic-bezier(.19,1,.22,1)}.partialSlideupFade-enter[data-v-7e70e3d6],.partialSlideupFade-leave-to[data-v-7e70e3d6]{transform:translateY(20px);opacity:0;transition:all .25s cubic-bezier(.19,1,.22,1)}",""]),e["default"]=n},26930:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._filterBar[data-v-40eeb827]{position:relative;z-index:1}._filterBar input[data-v-40eeb827]:not(.is--dark),._filterBar select[data-v-40eeb827]:not(.is--dark){background-color:#fff}._filterBar--content[data-v-40eeb827]{display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)*1);padding:calc(var(--spacing)*1) calc(var(--spacing)*1)}._groupBy[data-v-40eeb827]{display:flex;flex-flow:row nowrap;justify-content:flex-start;gap:calc(var(--spacing)/1)}._groupBy input[data-v-40eeb827]{visibility:hidden;width:1px;height:1px;display:none}._groupBy label[data-v-40eeb827]{cursor:pointer}._groupBy label.is--selected[data-v-40eeb827]{font-weight:600}._sortSelect[data-v-40eeb827]{width:100%}._usedKw[data-v-40eeb827]{padding-bottom:calc(var(--spacing)/2);border-bottom:2px solid #fff}._searchKW[data-v-40eeb827],._usedKw[data-v-40eeb827]{margin-bottom:calc(var(--spacing)/2)}._resetFilters[data-v-40eeb827]{position:sticky;z-index:11;top:0;left:0;width:100%;padding:calc(var(--spacing)/2);border-radius:0}._closeBtn[data-v-40eeb827]{position:absolute;right:0;margin:calc(var(--spacing)/2);z-index:100}._closeBtn.is--white[data-v-40eeb827]{color:#fff}",""]),e["default"]=n},47897:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._itemModal[data-v-593c0920]{position:absolute;overflow:hidden;inset:0;z-index:10;--color-borders:var(--c-gris);--modal-background:#efefef}._modalContent[data-v-593c0920]{background:var(--modal-background);padding:0;display:flex;flex-flow:column nowrap;height:100%}._topBar[data-v-593c0920]{position:relative;min-height:50px;border-bottom:1px solid var(--color-borders);padding:calc(var(--spacing)/2);display:flex;justify-content:center;align-items:center;gap:calc(var(--spacing)/1)}._bottomContent[data-v-593c0920]{display:flex;flex-flow:row nowrap;align-items:stretch;height:100%;overflow:hidden}._bottomContent>._leftContent[data-v-593c0920]{flex:3 1 0}._bottomContent>._rightContent[data-v-593c0920]{flex:1 0 0px;min-width:200px}._leftContent[data-v-593c0920]{position:relative;height:100%;overflow:auto;display:flex;flex-flow:column nowrap}._openedFile--media[data-v-593c0920]{flex:1 1 auto;overflow:hidden;position:relative}._openedFile--media[data-v-593c0920]  ._mediaContent{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}._openedFile--media[data-v-593c0920]  ._mediaContent[data-filetype=text]{display:block;overflow:auto;padding:calc(var(--spacing)/1) calc(var(--spacing)/1)}._openedFile--media[data-v-593c0920]  ._mediaContent ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:contain;object-fit:contain;max-width:none}._navArrow[data-v-593c0920]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;padding:calc(var(--spacing)/4)}._navArrow>*[data-v-593c0920]{line-height:0;display:block}._navMedia[data-v-593c0920],._navMedia>*[data-v-593c0920]{position:relative}._navMedia>*[data-v-593c0920]{flex:0 0 150px;width:150px;height:150px;cursor:pointer;padding:calc(var(--spacing)/4)}._navMedia>.is--shown[data-v-593c0920],._navMedia[data-v-593c0920]>:focus,._navMedia[data-v-593c0920]>:hover{background:var(--c-gris)}._navMedia>.is--shown[data-v-593c0920]{opacity:.7}._navMedia[data-v-593c0920]  ._mediaContent{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}._navMedia[data-v-593c0920]  ._mediaContent ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:contain;object-fit:contain;max-width:none}._navMedia[data-layout=nav][data-v-593c0920]{flex-flow:row nowrap;width:100%;overflow:auto}._navMedia[data-layout=grid][data-v-593c0920],._navMedia[data-layout=nav][data-v-593c0920]{display:flex;gap:calc(var(--spacing)/2);padding:calc(var(--spacing)/2)}._navMedia[data-layout=grid][data-v-593c0920]{flex-flow:row wrap}._appendMedia[data-v-593c0920]{display:flex;align-content:center;justify-content:center;font-size:175%}._rightContent[data-v-593c0920]{position:relative;border-left:1px solid var(--color-borders);height:100%}._closeButton[data-v-593c0920]{padding:calc(var(--spacing)/4);margin:0}._closeButton img[data-v-593c0920]{width:1.5rem;height:1.5rem}._title[data-v-593c0920]{display:flex}._toggleSidebarBtn[data-v-593c0920]{position:absolute;top:0;right:0;border:1px solid var(--color-borders);border-right:0;margin:calc(var(--spacing)*1);margin-right:0;border-radius:0;background:var(--c-gris_clair)}._toggleSidebarBtn.is--active[data-v-593c0920]:not([disabled]),._toggleSidebarBtn[data-v-593c0920]:active:not([disabled]),._toggleSidebarBtn[data-v-593c0920]:focus-visible:not([disabled]),._toggleSidebarBtn[data-v-593c0920]:hover:not([disabled]){background:#fff}",""]),e["default"]=n},93178:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._keywordsFieldEditor[data-v-e58c331c]{margin-top:calc(var(--spacing)/4)}._suggestions[data-v-e58c331c]{padding-top:calc(var(--spacing)/2);border-top:2px solid var(--c-noir)}._suggestions ._keyword[data-v-e58c331c]{cursor:pointer}._catSug[data-v-e58c331c]{border-left:2px solid #000;padding:calc(var(--spacing)/2);background:var(--c-noir)}._categories[data-v-e58c331c]{display:flex;flex-flow:row wrap;padding:0;gap:calc(var(--spacing)/2)}._category[data-v-e58c331c]{background-color:hsla(0,0%,100%,.2);padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;color:#fff;font-weight:600}._category[data-category=techniques][data-v-e58c331c]{color:var(--color-vert)}._category[data-category=gisement][data-v-e58c331c]{color:var(--color-rouge)}._category[data-category=lieu][data-v-e58c331c]{color:var(--color-bleu)}._category[data-category=domaine][data-v-e58c331c]{color:var(--color-jaune)}._category.is--active[data-v-e58c331c]{background:#000}",""]),e["default"]=n},14615:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._mediaFocus[data-v-41e31ec4]{background:var(--chutier-bg)}._itemsList[data-v-41e31ec4],._mediaFocus[data-v-41e31ec4]{padding:calc(var(--spacing)/2)}._itemsList[data-v-41e31ec4]{border:2px solid #999}._openLarge[data-v-41e31ec4]{display:block;cursor:pointer}._openLarge[data-v-41e31ec4]:hover{opacity:.8}._docPreview[data-v-41e31ec4]{position:relative;height:70px;border-radius:2px;width:70px;flex:0 0 auto;overflow:hidden}._docPreview[data-v-41e31ec4]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._changeOrderSelect[data-v-41e31ec4]{flex:0 0 50px}._fields[data-v-41e31ec4]{padding:calc(var(--spacing)*1);display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/1)}sl-icon-button[data-v-41e31ec4]::part(base){color:#fff}._shareBtn[data-v-41e31ec4]{display:flex;justify-content:center}._descriptionField[data-v-41e31ec4]{resize:vertical}",""]),e["default"]=n},66146:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._myChutier[data-v-f113b980]{overflow:hidden;color:#fff}._itemsList[data-v-f113b980],._myChutier[data-v-f113b980]{position:relative;top:0;height:100%}._itemsList[data-v-f113b980]{overflow:auto;padding-bottom:80px}._itemsList[data-v-f113b980]::-webkit-scrollbar{height:12px;width:12px;background-color:transparent}._itemsList[data-v-f113b980]::-webkit-scrollbar-thumb,._itemsList[data-v-f113b980]::-webkit-scrollbar-track{border:5px solid hsla(0,0%,100%,0);border-radius:20px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._itemsList[data-v-f113b980]::-webkit-scrollbar-track{background-color:transparent}._itemsList[data-v-f113b980]::-webkit-scrollbar-thumb{background-color:#fff}._itemsList[data-v-f113b980]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:5px solid hsla(0,0%,100%,0)}._topBar[data-v-f113b980]{position:relative;text-align:center;padding:0 calc(var(--spacing)/1);margin-bottom:calc(var(--spacing)/-2);z-index:2;pointer-events:none}._adminBtn[data-v-f113b980]{margin-bottom:calc(var(--spacing)/-4);pointer-events:auto}._topContent[data-v-f113b980]{position:sticky;z-index:1;display:flex;gap:calc(var(--spacing)/2);align-items:center;top:0;padding:calc(var(--spacing)/1);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);-webkit-mask:linear-gradient(#000 75%,transparent);mask:linear-gradient(#000 75%,transparent)}._qrBtn sl-icon[data-v-f113b980]{font-size:130%}._middleContent[data-v-f113b980]{padding:0 calc(var(--spacing)/1)}._items[data-v-f113b980]{flex:1 1 auto;padding:calc(var(--spacing)*2) calc(var(--spacing)/1)}._item[data-v-f113b980]{margin-bottom:calc(var(--spacing)*2)}._item--label[data-v-f113b980]{display:inline-block;cursor:pointer;font-weight:500;margin-bottom:4px}._item--label[data-v-f113b980]:hover{opacity:.9}._removeMenu[data-v-f113b980],._selectionBar[data-v-f113b980]{position:sticky;bottom:0;width:100%;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;gap:calc(var(--spacing)/2);background:var(--chutier-bg);border-top:2px solid #000;padding:calc(var(--spacing)/4);padding-bottom:calc(var(--spacing)*2)}._removeMenu[data-v-f113b980]{position:absolute;padding-top:calc(var(--spacing)*2);min-height:130px}._selectionBar--previews[data-v-f113b980]{width:100%;display:flex;flex-flow:row nowrap;justify-content:center;padding:calc(var(--spacing)/2);gap:calc(var(--spacing)/4)}._selectionBar--previews[data-v-f113b980]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._selectionBar--previews--preview[data-v-f113b980]{flex:0 1 20px;aspect-ratio:1/1;overflow:hidden}._uploadFilesList[data-v-f113b980]{position:absolute;bottom:0;left:0;right:0;background:var(--chutier-bg);z-index:1}",""]),e["default"]=n},29478:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._sharedFolder[data-v-3f9ae418]{height:100%;overflow:auto}._sharedFolder ._sharedFolder--content[data-v-3f9ae418]{display:flex;flex-flow:row nowrap;height:100%;overflow:auto}._sharedFolder ._sharedFolder--content>._mainContent[data-v-3f9ae418]{flex:1}._sharedFolder ._sharedFolder--content>._filterBar[data-v-3f9ae418]{flex:0 0 240px;max-width:240px}._mainContent[data-v-3f9ae418]{padding-bottom:calc(var(--spacing)*4);height:100%;overflow:auto}._filterBar[data-v-3f9ae418]{border-left:1px solid #fff;height:100%;overflow:auto}._topbar[data-v-3f9ae418]{position:sticky;top:0;z-index:10;padding:calc(var(--spacing)*1);background:var(--c-bodybg);-webkit-mask:linear-gradient(#000 75%,transparent);mask:linear-gradient(#000 75%,transparent);padding-bottom:calc(var(--spacing)*2)}._topbar--content[data-v-3f9ae418]{justify-content:space-between;padding:calc(var(--spacing)/2) calc(var(--spacing)/1);gap:calc(var(--spacing)*1);line-height:1}._filesIndicator[data-v-3f9ae418],._topbar--content[data-v-3f9ae418]{display:flex;flex-flow:row wrap;align-items:center}._filesIndicator[data-v-3f9ae418]{gap:calc(var(--spacing)/2);padding:0 calc(var(--spacing)*1)}._filesIndicator ._itemWidthControl[data-v-3f9ae418]{width:250px}._filesIndicator ._itemWidthControl input[data-v-3f9ae418]{margin:0}._filesIndicator[data-v-3f9ae418]  ._numberField{flex-grow:1}._filesIndicator[data-v-3f9ae418]  ._numberField input{background:#fff}._title[data-v-3f9ae418]{font-size:1.5em;font-weight:600}._dayFileSection[data-v-3f9ae418]{padding:calc(var(--spacing)*2) calc(var(--spacing)*2)}._noContent[data-v-3f9ae418]{padding:calc(var(--spacing)*2)}._label[data-v-3f9ae418]{z-index:1;padding-bottom:calc(var(--spacing)*2);font-weight:600;font-size:var(--sl-font-size-normal)}._grid[data-v-3f9ae418],._label[data-v-3f9ae418]{position:relative}._grid[data-v-3f9ae418]{z-index:2;display:flex;flex-flow:row wrap;justify-content:flex-start;align-items:flex-end;gap:calc(var(--spacing)*3) calc(var(--spacing)*2);gap:calc(var(--items-width, 150px)/5 + var(--spacing)) calc(var(--items-width, 150px)/10 + var(--spacing)/2)}._file[data-v-3f9ae418]{width:var(--items-width,150px)}._removeBtn[data-v-3f9ae418]{position:absolute;top:0;right:0;z-index:1}._footer[data-v-3f9ae418]{margin-top:calc(var(--spacing)*6);text-align:center}._footer a[data-v-3f9ae418]{color:inherit}._toprightBtns button[data-v-3f9ae418]{padding:calc(var(--spacing)/2)}",""]),e["default"]=n},1165:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._sharedFolderItem[data-v-da6ee8da]{--stack-step:10px;position:relative;cursor:pointer;box-shadow:0 3px 10px rgba(0,0,0,.05);transition:all .4s cubic-bezier(.19,1,.22,1)}._sharedFolderItem.is--opened[data-v-da6ee8da],._sharedFolderItem[data-v-da6ee8da]:focus,._sharedFolderItem[data-v-da6ee8da]:hover{z-index:100;transform:translateY(-10px);box-shadow:0 13px 10px rgba(0,0,0,.1);transition:all .25s cubic-bezier(.19,1,.22,1)}._sharedFolderItem ._title[data-v-da6ee8da]{position:absolute;width:100%;top:100%;word-break:break-word;background:#fff;padding:calc(var(--spacing)/2);font-size:var(--sl-font-size-small);transform:translateY(-50px);opacity:0;pointer-events:none;transition:all .4s cubic-bezier(.19,1,.22,1)}._sharedFolderItem.is--opened[data-v-da6ee8da],._sharedFolderItem[data-v-da6ee8da]:focus,._sharedFolderItem[data-v-da6ee8da]:hover{z-index:20;--stack-step:20px}._sharedFolderItem.is--opened ._title[data-v-da6ee8da],._sharedFolderItem:focus ._title[data-v-da6ee8da],._sharedFolderItem:hover ._title[data-v-da6ee8da]{transform:translate(0);opacity:1;pointer-events:auto}._sharedFolderItem--preview[data-v-da6ee8da]{background:#fff;z-index:10;min-height:20px;max-height:calc(var(--items-width)*3);display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden}._sharedFolderItem--preview[data-v-da6ee8da]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._sharedFolderItem--preview[data-v-da6ee8da]  .ql-container{font-size:50%}._sharedFolderItem--preview[data-v-da6ee8da]  .ql-container .ql-editor>:not(:first-child){display:none}._sharedFolderItem--preview_stacked[data-v-da6ee8da]{position:absolute;top:0;left:0;height:50px;--back-position:1;transform:translate(calc(var(--stack-step)*var(--back-position)/2),calc(var(--stack-step)*-1*var(--back-position)));width:calc(100% - var(--stack-step)*var(--back-position));transition:all .25s cubic-bezier(.19,1,.22,1);z-index:2}._sharedFolderItem--preview_stacked+._sharedFolderItem--preview_stacked[data-v-da6ee8da]{z-index:1;--back-position:2}._sharedFolderItem--preview_stacked[data-v-da6ee8da]  ._mediaContent--image{-o-object-position:top left;object-position:top left}._titleKeywords[data-v-da6ee8da]{position:absolute;bottom:0;left:0;width:100%}._removeBtn[data-v-da6ee8da]{position:absolute;bottom:0;right:0}",""]),e["default"]=n},29013:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._singleKeyword[data-v-56f0f92a]{position:relative;background-color:#333;padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;color:#fff;line-height:1.2;display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/1)}._singleKeyword sl-icon-button[data-v-56f0f92a]::part(base){color:currentColor;padding:0}._singleKeyword.is--clickable[data-v-56f0f92a]:hover{background-color:#292929}._category[data-v-56f0f92a]{font-size:80%;color:var(--cat-color)}._name[data-v-56f0f92a]{font-size:110%}._addBtn[data-v-56f0f92a]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;background:transparent}._count[data-v-56f0f92a]{border:1px solid #fff;border-radius:10px;min-width:14px;height:14px;font-size:8px;display:flex;justify-content:center;align-items:center;font-weight:600}",""]),e["default"]=n},3720:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._chutierPane[data-v-1cb65e24]{position:absolute;z-index:10;top:-2px;width:100%;height:100%;overflow:auto;background:var(--chutier-bg);padding:calc(var(--spacing)/2);border-top:2px solid #000}._closeBtn[data-v-1cb65e24]{position:absolute;top:0;right:0;padding:4px}",""]),e["default"]=n},65250:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),r=a.n(o),n=r()(s());n.push([t.id,"._lumaView[data-v-1ba5e93a]{height:100%;--chutier-bar-width:40px;--chutier-width:420px}._lumaView.is--mobile_view[data-v-1ba5e93a]{--chutier-width:100%}._panes[data-v-1ba5e93a]{height:100%}._myContent[data-v-1ba5e93a]{position:absolute;z-index:2;width:var(--chutier-width);height:100%;background:var(--chutier-bg);box-shadow:inset -4px 0 5px rgba(0,0,0,.52);overflow:hidden;transform:translate(calc((var(--chutier-width) - var(--chutier-bar-width))*-1));transition:transform .275s cubic-bezier(.19,1,.22,1)}._myContent.is--shown[data-v-1ba5e93a]{transform:translate(0)}._sharedContent[data-v-1ba5e93a]{position:relative;z-index:1;height:100%;flex:1 1 auto;margin-left:var(--chutier-bar-width);width:calc(100% - var(--chutier-bar-width));transition:margin-left .5s cubic-bezier(.19,1,.22,1)}._sharedContent.has--chutier[data-v-1ba5e93a]{width:calc(100% - var(--chutier-width));margin-left:var(--chutier-width)}._chutierBtn[data-v-1ba5e93a]{top:0;right:0;width:var(--chutier-bar-width);height:var(--chutier-bar-width);z-index:1;transition:transform .25s cubic-bezier(.19,1,.22,1)}._chutierBtn[data-v-1ba5e93a],._chutierBtn>button[data-v-1ba5e93a]{position:absolute;background:transparent}._chutierBtn>button[data-v-1ba5e93a]{width:100%;height:100%;color:#fff;border-radius:50%;left:0;font-size:1.5rem;padding:0;display:flex;justify-content:center;align-items:center;transform-origin:center;transition:transform .4s cubic-bezier(.19,1,.22,1)}._chutierBtn>button[data-v-1ba5e93a]:focus-visible,._chutierBtn>button[data-v-1ba5e93a]:hover{color:#ccc}._chutierBtn[data-v-1ba5e93a]:not(.is--showingChutier){height:100%}._chutierBtn:not(.is--showingChutier)>button[data-v-1ba5e93a]{transform:rotate(-180deg)}",""]),e["default"]=n},20148:function(t,e,a){var i=a(84421);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("d9648a00",i,!0,{sourceMap:!1,shadowMode:!1})},79722:function(t,e,a){var i=a(77488);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("68490dce",i,!0,{sourceMap:!1,shadowMode:!1})},36029:function(t,e,a){var i=a(13671);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("888e33b8",i,!0,{sourceMap:!1,shadowMode:!1})},25206:function(t,e,a){var i=a(19261);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("5ab717af",i,!0,{sourceMap:!1,shadowMode:!1})},44449:function(t,e,a){var i=a(41612);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("56bddc2d",i,!0,{sourceMap:!1,shadowMode:!1})},64393:function(t,e,a){var i=a(26930);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("51393d21",i,!0,{sourceMap:!1,shadowMode:!1})},23741:function(t,e,a){var i=a(47897);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("18df5476",i,!0,{sourceMap:!1,shadowMode:!1})},51160:function(t,e,a){var i=a(93178);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("4a78a6b7",i,!0,{sourceMap:!1,shadowMode:!1})},41099:function(t,e,a){var i=a(14615);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("3080b50a",i,!0,{sourceMap:!1,shadowMode:!1})},10288:function(t,e,a){var i=a(66146);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("b9e6cef4",i,!0,{sourceMap:!1,shadowMode:!1})},8499:function(t,e,a){var i=a(29478);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("61409a47",i,!0,{sourceMap:!1,shadowMode:!1})},48824:function(t,e,a){var i=a(1165);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("b81e6cbc",i,!0,{sourceMap:!1,shadowMode:!1})},85633:function(t,e,a){var i=a(29013);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("0cfa2217",i,!0,{sourceMap:!1,shadowMode:!1})},64252:function(t,e,a){var i=a(3720);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("d55a2b86",i,!0,{sourceMap:!1,shadowMode:!1})},6552:function(t,e,a){var i=a(65250);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(31982).Z;s("3009e73f",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=LumaView.js.map