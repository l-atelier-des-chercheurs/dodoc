(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[947,286],{70474:function(t,e,a){"use strict";a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("embed")},on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"_linkPicker"},[a("div",{staticClass:"_urlBox"},[a("TextInput",{attrs:{label_str:t.$t("input_url"),instructions:t.$t("input_url_instr"),content:t.full_url,placeholder:"https://",required:!0,input_type:"url"},on:{"update:content":function(e){t.full_url=e},toggleValidity:function(e){return t.allow_save=e}}})],1),a("div",{staticClass:"u-instructions"},[a("small",{staticClass:"_examples"},[t._v(" "+t._s(t.$t("for_example"))+" "),t._l([{url:"https://peertube.fr/w/wB6M6CHdfpWXpozVnqjbde",label:"PeerTube"},{url:"https://www.youtube.com/watch?v=Bn6zdyCAwJs",label:"Youtube"},{url:"https://vimeo.com/447785086",label:"Vimeo"},{url:"https://observablehq.com/embed/@fil/bertin1953-glsl?cells=canvas",label:"Observable"}],(function(e,i){return a("button",{key:i,staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{innerHTML:t._s(e.label)},on:{click:function(a){t.full_url=e.url}}})}))],2)]),a("br"),a("div",{key:t.full_url},["any"===t.url_to_site.type?[a("iframe",{staticClass:"_siteIframe",attrs:{src:t.url_to_site.src,frameborder:"0"}})]:a("vue-plyr",[a("div",{staticClass:"plyr__video-embed"},[a("iframe",{attrs:{src:t.url_to_site.src,allowfullscreen:"",allowtransparency:"",allow:"autoplay; fullscreen",sandbox:"allow-same-origin allow-scripts allow-popups",frameborder:"0"}})])])],2),a("br"),t.full_url?a("div",{staticClass:"_selectBtn"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){return t.$emit("embed",t.full_url)}}},[t._v(" "+t._s(t.$t("embed"))+" ")])]):t._e()])])},s=[],o={props:{},components:{},data(){return{full_url:""}},async created(){},beforeDestroy(){},watch:{},computed:{url_to_site(){return!!this.full_url&&this.transformURL({url:this.full_url,autoplay:!1})}},methods:{}},n=o,r=(a(94124),a(1001)),l=(0,r.Z)(n,i,s,!1,null,"0e7fe28d",null),c=l.exports},77286:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return k}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("settings")},on:{close:function(e){return t.$emit("close")}}},[a("div",{},[t.is_loading?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):a("div",[a("div",[a("div",{staticClass:"_selectMenu"},[a("SelectField2",{attrs:{value:t.current_tab,options:t.tabs,can_edit:!0,hide_validation:!0},on:{change:function(e){t.current_tab=e}}})],1),a("div",{staticClass:"u-spacingBottom"}),"informations"===t.current_tab?[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"name_of_instance",label:t.$t("name_of_instance"),instructions:t.$t("name_of_instance_instructions"),content:t.settings.name_of_instance||"",path:t.settings.$path,tag:"h1",required:!0,minlength:3,maxlength:40,can_edit:t.is_instance_admin}})],1),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"presentation_of_instance_fr",label:t.$t("presentation_of_instance")+" (en français)",instructions:t.$t("presentation_of_instance_instructions"),content:t.settings.presentation_of_instance_fr,path:t.settings.$path,required:!1,input_type:"markdown",can_edit:t.is_instance_admin}})],1),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"presentation_of_instance_en",label:t.$t("presentation_of_instance")+" (en anglais)",instructions:t.$t("presentation_of_instance_instructions"),content:t.settings.presentation_of_instance_en,path:t.settings.$path,required:!1,input_type:"markdown",can_edit:t.is_instance_admin}})],1)]:t._e(),"administration_and_access_control"===t.current_tab?[a("AdminsAndContributorsField",{attrs:{folder:t.settings,can_edit:t.is_instance_admin,custom_label:t.$t("instance_admins_and_admins"),admin_label:t.$t("admin"),admin_instructions:t.$t("instance_admin_instructions"),contrib_instructions:t.$t("instance_contrib_instructions")}}),a("br"),a("TitleField",{attrs:{field_name:"general_password",label:t.$t("general_password"),instructions:t.$t("general_password_instructions"),content:t.settings.general_password,path:t.settings.$path,input_type:"password",required:!1,can_edit:t.is_instance_admin}}),a("br"),a("TitleField",{attrs:{field_name:"signup_password",label:t.$t("signup_password"),instructions:t.$t("signup_password_instructions"),content:t.settings.signup_password,path:t.settings.$path,required:!1,can_edit:t.is_instance_admin}}),a("br"),a("ToggleField",{attrs:{label:t.$t("require_mail_to_signup"),field_name:"require_mail_to_signup",content:!0===t.settings.require_mail_to_signup,path:t.settings.$path,can_edit:t.is_instance_admin}}),a("br"),a("TitleField",{attrs:{field_name:"contactmail_of_instance",label:t.$t("contactmail_of_instance"),instructions:t.$t("contactmail_of_instance_instructions"),content:t.settings.contactmail_of_instance,path:t.settings.$path,required:!1,input_type:"email",can_edit:t.is_instance_admin}})]:t._e(),"suggested_cat_kw"===t.current_tab?[a("SuggestedCategories")]:t._e()],2)])])])},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.opened_category_path?[a("SingleCategory",{attrs:{path:t.opened_category_path},on:{close:function(e){t.opened_category_path=!1}}})]:[a("div",t._l(t.categories,(function(e){return a("div",{key:e.$path,staticClass:"_categoryRow",style:t.categoryStyles(e)},[a("div",{staticClass:"_title"},[t._v(" "+t._s(e.title)+" ")]),a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{textContent:t._s(t.$t("open"))},on:{click:function(a){return t.openCategory(e.$path)}}})])})),0),a("button",{staticClass:"u-buttonLink",class:{"is--active":t.show_create_category},attrs:{type:"button"},on:{click:function(e){t.show_create_category=!t.show_create_category}}},[t._v(" "+t._s(t.$t("add_category"))+" ")]),t.show_create_category?a("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createCategory.apply(null,arguments)}}},[a("fieldset",[a("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("add_category")))]),a("TextInput",{staticClass:"u-spacingBottom",attrs:{content:t.new_category_title,label_str:"category_name",required:!0,input_type:"text"},on:{"update:content":function(e){t.new_category_title=e}}}),t._m(0),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",disabled:0===t.new_category_title.length,type:"submit"},slot:"footer"},[t._v(" "+t._s(t.$t("create"))+" ")])],1)]):t._e()]],2)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"u-instructions"},[a("small",[t._v(" Tout en majuscule ")])])}],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("b-icon",{attrs:{icon:"arrow-left-short"}}),t._v(" "+t._s(t.$t("back"))+" ")],1),a("div",{staticClass:"u-spacingBottom"}),t.is_loading?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):a("div",[a("div",{staticClass:"_top"},[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{staticClass:"_title",attrs:{label:t.$t("category_title"),field_name:"title",content:t.category.title,path:t.category.$path,tag:"h3",required:!0,maxlength:20,can_edit:!0}})],1),a("ColorInput",{attrs:{label:t.$t("custom_color"),default_value:"#000000",value:t.category.tag_color,can_toggle:!0},on:{save:t.saveNewColor}})],1),a("div",{staticClass:"u-spacingBottom _kwSimulation"},[a("SingleKeyword",{attrs:{keyword:t.category.title+"/couleur",cat_color:t.category.tag_color}})],1),a("div",{staticClass:"u-spacingBottom u-keywords"},t._l(t.new_list_of_suggestions,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:!0},on:{remove:function(a){return t.removeSuggestion(e)}}})})),1),a("div",{staticClass:"u-spacingBottom"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_suggestion,expression:"new_suggestion"}],attrs:{type:"text",placeholder:"Nouveau mot-clé"},domProps:{value:t.new_suggestion},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.newKeyword.apply(null,arguments))},input:function(e){e.target.composing||(t.new_suggestion=e.target.value)}}}),t.new_keyword_already_exists?a("div",{staticClass:"u-instructions"},[a("small",[t._v("Ce mot-clé existe déjà, vous ne pouvez pas l’ajouter. Si vous souhaitez changer la case, supprimez le de la liste puis ajoutez le à nouveau.")])]):t.new_keyword_contains_slash?a("div",{staticClass:"u-instructions"},[a("small",[t._v('Ce mot-clé contient le caractère "/", qui est interdit.')])]):t.new_suggestion.length>0?a("div",{staticClass:"u-instructions"},[a("small",[t._v("Validez avec la touche entrée.")])]):t._e()]),0===t.new_suggestion.length?a("SaveCancelButtons",{staticClass:"_scb",on:{save:t.saveNewSuggestion,cancel:t.cancel}}):t._e(),a("RemoveMenu",{attrs:{remove_text:t.$t("remove")},on:{remove:t.removeCat}})],1)])},l=[],c=(a(76801),a(70560),a(95009)),d={props:{path:String},components:{SingleKeyword:c.Z},data(){return{category:void 0,is_loading:!0,new_list_of_suggestions:[],new_suggestion:""}},created(){},async mounted(){this.category=await this.$api.getFolder({path:this.path}),this.$api.join({room:this.path}),this.new_list_of_suggestions=this.category.list_of_suggestions||[],this.is_loading=!1},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{new_keyword_already_exists(){return this.new_list_of_suggestions.some((t=>t.toLowerCase()===this.new_suggestion.toLowerCase()))},new_keyword_contains_slash(){return this.new_suggestion.includes("/")}},methods:{removeSuggestion(t){this.new_list_of_suggestions=this.new_list_of_suggestions.filter((e=>e!==t))},newKeyword(){if(0===this.new_suggestion.length||this.new_keyword_already_exists||this.new_keyword_contains_slash)return!1;this.new_list_of_suggestions.push(this.new_suggestion),this.new_suggestion=""},cancel(){this.new_list_of_suggestions=this.category.list_of_suggestions,this.new_suggestion="",this.$emit("close")},async saveNewSuggestion(){await this.$api.updateMeta({path:this.path,new_meta:{list_of_suggestions:this.new_list_of_suggestions}}),this.$emit("close")},async saveNewColor(t){await this.$api.updateMeta({path:this.path,new_meta:{tag_color:t||""}})},async removeCat(){await this.$api.deleteItem({path:this.path}),this.$emit("close")}}},_=d,u=(a(87617),a(1001)),h=(0,u.Z)(_,r,l,!1,null,"3886d9c1",null),p=h.exports,f={props:{},components:{SingleCategory:p},data(){return{categories:void 0,show_create_category:!1,opened_category_path:!1,new_category_title:"",path:"categories"}},created(){},async mounted(){this.categories=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_categories_error=t.response})),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{},methods:{async createCategory(){const t=await this.$api.createFolder({path:this.path,additional_meta:{title:this.new_category_title.toUpperCase(),requested_slug:this.new_category_title,$status:"public"}});this.openCategory(this.path+"/"+t)},openCategory(t){this.opened_category_path=t},categoryStyles(t){return t.tag_color?`\n        --cat-color: ${t.tag_color}\n      `:""}}},m=f,v=(a(56396),(0,u.Z)(m,o,n,!1,null,"72d46d30",null)),g=v.exports,w={props:{starting_tab:String},components:{SuggestedCategories:g},data(){return{settings:void 0,is_loading:!0,current_tab:"administration_and_access_control",tabs:[{key:"informations",text:this.$t("informations")},{text:this.$t("administration_and_access_control"),key:"administration_and_access_control"},{text:this.$t("suggested_cat_kw"),key:"suggested_cat_kw"}]}},created(){},async mounted(){this.settings=await this.$api.getFolder({path:""}).catch((t=>(this.is_loading=!1,t))),this.is_loading=!1,this.starting_tab&&setTimeout((()=>{this.$refs.tabgroup.show(this.starting_tab)}),100),this.$api.join({room:this.settings.$path})},beforeDestroy(){this.$api.leave({room:this.settings.$path})},watch:{},computed:{},methods:{newTabShown(t){this.current_tab=t.detail.name}}},b=w,y=(0,u.Z)(b,i,s,!1,null,"d445650c",null),k=y.exports},63346:function(t,e,a){"use strict";a.d(e,{Z:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_keywordsField"},[t.label?a("DLabel",{staticClass:"_label",attrs:{str:t.label}}):t._e(),t.keywords.length>0?a("div",{staticClass:"u-keywords"},t._l(t.keywords,(function(t){return a("SingleKeyword",{key:t,attrs:{keyword:t}})})),1):t._e(),t.can_edit?a("EditBtn",{on:{click:t.enableEditMode}}):t._e(),t.edit_mode?a("BaseModal2",{attrs:{title:t.label},on:{close:function(e){t.edit_mode=!1}}},[t.new_keywords.length>0?a("div",{staticClass:"u-keywords"},t._l(t.new_keywords,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:!0},on:{remove:function(a){return t.removeKeyword(e)}}})})),1):t._e(),a("hr"),a("KeywordsFieldEditor",{attrs:{keywords:t.new_keywords},on:{"update:keywords":function(e){t.new_keywords=e}}}),a("hr"),a("div",{},[a("DLabel",{attrs:{str:t.$t("advanced_options")}}),a("div",{staticClass:"u-sameRow"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_keywords_stringified,expression:"new_keywords_stringified"}],ref:"urlToCopy",attrs:{type:"text",size:"small"},domProps:{value:t.new_keywords_stringified},on:{input:function(e){e.target.composing||(t.new_keywords_stringified=e.target.value)}}}),a("button",{staticClass:"u-button u-button_icon u-suffix _clipboardBtn",attrs:{type:"button"},on:{click:t.copyToClipboard}},[t.is_copied?a("b-icon",{attrs:{icon:"clipboard-check"}}):a("b-icon",{attrs:{icon:"clipboard"}})],1)])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("SaveCancelButtons",{staticClass:"_scb",on:{save:t.updateKeywords,cancel:t.cancel}})],1)],1):t._e()],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_keywordsFieldEditor"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_suggestion,expression:"user_suggestion"}],ref:"keywordField",attrs:{type:"text",required:"",placeholder:t.$t("keyword_materials_etc")},domProps:{value:t.user_suggestion},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.$emit("cancelEdit"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.newKeyword.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.submitFirstSuggestion.apply(null,arguments)):null}],input:function(e){e.target.composing||(t.user_suggestion=e.target.value)}}}),a("div",{staticClass:"u-instructions"},[a("small",[t.suggested_keywords.length>0?[t._v(" "+t._s(t.$t("validate_with_shift_enter"))+" ")]:t.user_suggestion.length>0?[t._v(t._s(t.$t("create_new_keyword_enter")))]:t._e()],2)]),a("div",{staticClass:"_catSug"},[t.suggestion_from_category?a("div",[a("button",{staticClass:"u-button _category",style:t.getCatColor(t.suggestion_from_category),attrs:{type:"button"},on:{click:function(e){return t.toggleCategory(t.suggestion_from_category)}}},[t._v(" "+t._s(t.suggestion_from_category)+" ("+t._s(t.matchingKeywordsWithCategory(t.suggestion_from_category).length)+")   "),a("b-icon",{attrs:{icon:"x-circle"}})],1)]):a("div",{staticClass:"_categories"},t._l(t.categories_with_keywords,(function(e){return a("button",{key:e,staticClass:"u-button _category",style:t.getCatColor(e),attrs:{type:"button"},on:{click:function(a){return t.toggleCategory(e)}}},[t._v(" "+t._s(e)+" ("+t._s(t.matchingKeywordsWithCategory(e).length)+") ")])})),0),t.suggested_keywords.length>0?a("div",{staticClass:"_suggestions"},[a("div",{staticClass:"u-keywords"},t._l(t.suggested_keywords,(function(e,i){return a("SingleKeyword",{key:e,class:{"is--first":0===i},attrs:{keyword:e,can_add:!0},on:{add:function(a){return t.addKeyword(e)}}})})),1)]):t._e()])])},n=[],r=(a(70560),a(76801),a(92176),a(7961),a(95009)),l={props:{keywords:Array},components:{SingleKeyword:r.Z},data(){return{user_suggestion:"",suggestion_from_category:!1,categories:[],path:"categories"}},i18n:{messages:{fr:{validate_with_shift_enter:"Validez la première suggestion avec SHIFT+ENTRÉE, ou créez un nouveau mot-clé avec ENTRÉE.",create_new_keyword_enter:"Créez un nouveau mot-clé avec ENTRÉE."},en:{validate_with_shift_enter:"Add first suggestion with SHIFT+ENTER, or create a new keyword with ENTER.",create_new_keyword_enter:"Create a new keyword with ENTER."}}},async created(){this.categories=await this.$api.getFolders({path:this.path}),this.$api.join({room:this.path})},async mounted(){},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{all_categories(){return this.categories.map((t=>t.title))},all_keywords(){return this.categories.reduce(((t,e)=>(e.title&&e.list_of_suggestions&&e.list_of_suggestions.map((a=>{t.push(e.title+"/"+a)})),t)),[])},categories_with_keywords(){return this.all_categories.filter((t=>this.matchingKeywordsWithCategory(t).length>0))},suggested_keywords(){return this.matchingKeywordsWithCategory(this.suggestion_from_category)}},methods:{matchingKeywordsWithCategory(t){return this.all_keywords.filter((e=>{const a=!!e.includes("/")&&e.split("/").at(0),i=e.includes("/")?e.split("/").at(1):e;return!this.keywords.includes(e)&&((!t||t===a)&&(!(!t&&0===this.user_suggestion.length)&&this.twoStringsMatch(i,this.user_suggestion)))}))},toggleCategory(t){this.suggestion_from_category===t?this.suggestion_from_category=!1:this.suggestion_from_category=t},getCatColor(t){const e=window.app_infos.custom_suggested_categories.find((e=>e.title===t));if(e?.tag_color)return`--cat-color: ${e.tag_color}`},newKeyword(){this.user_suggestion.length>0&&this.addKeyword(this.user_suggestion)},submitFirstSuggestion(){if(0===this.suggested_keywords.length)return!1;const t=this.suggested_keywords.at(0);this.addKeyword(t)},keywordKey(t){return t.category+"/"+t.name},addKeyword(t){let e=this.keywords.slice();e.push(t),e.sort(((t,e)=>e)),this.$emit("update:keywords",e),this.user_suggestion="",this.$refs.keywordField.focus()}}},c=l,d=(a(55325),a(1001)),_=(0,d.Z)(c,o,n,!1,null,"bf8392da",null),u=_.exports,h={props:{field_name:String,label:String,path:String,keywords:{type:Array,default:()=>[]},can_edit:Boolean},components:{KeywordsFieldEditor:u,SingleKeyword:r.Z},data(){return{new_keywords:this.keywords||[],new_keywords_stringified:"",edit_mode:this.can_edit&&!this.path&&!this.field_name,is_saving:!1,is_copied:!1}},created(){},mounted(){},beforeDestroy(){},watch:{new_keywords:{immediate:!0,handler(t){this.$emit("update:keywords",t),this.new_keywords_stringified=t.join(", ")},deep:!0},new_keywords_stringified:{immediate:!0,handler(t){this.new_keywords=t?t.split(", ").map((t=>t.trim())):[]}}},computed:{},methods:{enableEditMode(){this.edit_mode=!0},async updateKeywords(){this.is_saving=!0,await new Promise((t=>setTimeout(t,50)));try{const t={[this.field_name]:this.new_keywords};await this.$api.updateMeta({path:this.path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1}},copyToClipboard(){this.is_copied=!1;var t=this.$refs.urlToCopy;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.is_copied=!0},cancel(){this.new_keywords=this.keywords||[],this.edit_mode=!1},removeKeyword(t){this.new_keywords=this.new_keywords.filter((e=>e!==t))}}},p=h,f=(0,d.Z)(p,i,s,!1,null,"6cb6a657",null),m=f.exports},95009:function(t,e,a){"use strict";a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_singleKeyword",class:{"is--clickable":t.can_add},style:t.kw_styles},[a("div",{},[t.category?a("div",{staticClass:"_category"},[t._v(" "+t._s(t.category.toUpperCase())+" ")]):t._e(),a("div",{staticClass:"_name"},[t._v(" "+t._s(t.name)+" ")])]),t.count?a("div",{staticClass:"_count"},[t._v(" "+t._s(t.count)+" ")]):t._e(),t.can_remove?a("b-icon",{staticClass:"_white",attrs:{icon:"dash-circle"},on:{click:function(e){return t.$emit("remove")}}}):t._e(),t.can_add?a("button",{staticClass:"_addBtn",attrs:{type:"button"},on:{click:function(e){return t.$emit("add")}}}):t._e()],1)},s=[],o=(a(76801),a(92176),a(7961),{props:{keyword:String,count:Number,cat_color:String,can_remove:Boolean,can_add:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{category(){return!!this.keyword.includes("/")&&this.keyword.split("/").at(0)},name(){return this.keyword.includes("/")?this.keyword.split("/").at(1):this.keyword},kw_styles(){let t=!1;if(this.cat_color)t=this.cat_color;else{const e=window.app_infos.custom_suggested_categories.find((t=>t.title===this.category));t=e?.tag_color}return t?`--cat-color: ${t}`:""}},methods:{}}),n=o,r=(a(42904),a(1001)),l=(0,r.Z)(n,i,s,!1,null,"f2ad472e",null),c=l.exports},77176:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return ve}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_lumaView"},[t.shared_folder_path?[a("div",{staticClass:"_topBarIndication"},t._l(t.possible_panes,(function(e){return a("div",{key:e.key,staticClass:"_topBarIndication--item",style:t.setTopbarWidth(e.key),on:{click:function(a){return t.togglePane(e.key)}}},[a("span",{staticClass:"_topBarIndication--item--names"},[a("b-icon",{attrs:{icon:e.icon}}),t._v(" "+t._s(e.label)+" ")],1)])})),0),a("splitpanes",{staticClass:"_splitpanes",attrs:{"watch-slots":""},on:{resize:t.resizeTopPane,resized:t.resizedPane}},t._l(["chutier","archive","collection"],(function(e){return a("pane",{key:e,attrs:{size:t.panes_width[e]}},["chutier"===e?a("div",{staticClass:"_myContent"},[a("MyChutier",{directives:[{name:"show",rawName:"v-show",value:t.show_chutier,expression:"show_chutier"}],staticClass:"_myContent--chutier",attrs:{shared_folder_path:t.shared_folder_path},on:{close:function(e){t.show_chutier=!1}}})],1):"archive"===e?a("div",{staticClass:"_sharedContent"},[a("SharedFolder2",{attrs:{shared_folder_path:t.shared_folder_path}})],1):"collection"===e?a("CollectionsPane"):t._e()],1)})),1)]:a("LoaderSpinner")],2)},s=[],o=(a(76801),a(70560),Object.defineProperty),n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,_=(t,e,a)=>e in t?o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,u=(t,e)=>{for(var a in e||(e={}))c.call(e,a)&&_(t,a,e[a]);if(l)for(var a of l(e))d.call(e,a)&&_(t,a,e[a]);return t},h=(t,e)=>n(t,r(e)),p=(t,e)=>{var a={};for(var i in t)c.call(t,i)&&e.indexOf(i)<0&&(a[i]=t[i]);if(null!=t&&l)for(var i of l(t))e.indexOf(i)<0&&d.call(t,i)&&(a[i]=t[i]);return a};function f(t,e,a,i,s,o,n,r){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var _=c.beforeCreate;c.beforeCreate=_?[].concat(_,l):[l]}return{exports:t,options:c}}const m={name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce(((t,e)=>(t[e.id]=e)&&t),{})}},methods:{updatePaneComponents(){this.panes.forEach((t=>{t.update&&t.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[t.id].size}%`})}))},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(t,e){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=e},onMouseMove(t){this.touch.mouseDown&&(t.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(t)),this.$emit("resize",this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))),this.touch.mouseDown=!1,setTimeout((()=>{this.touch.dragging=!1,this.unbindEvents()}),100)},onSplitterClick(t,e){"ontouchstart"in window&&(t.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===e?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(t,e),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=e,this.splitterTaps.timeoutId=setTimeout((()=>{this.splitterTaps.splitter=null}),500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[e])},onSplitterDblClick(t,e){let a=0;this.panes=this.panes.map(((t,i)=>(t.size=i===e?t.max:t.min,i!==e&&(a+=t.min),t))),this.panes[e].size-=a,this.$emit("pane-maximize",this.panes[e])},onPaneClick(t,e){this.$emit("pane-click",this.indexedPanes[e])},getCurrentMouseDrag(t){const e=this.container.getBoundingClientRect(),{clientX:a,clientY:i}="ontouchstart"in window&&t.touches?t.touches[0]:t;return{x:a-e.left,y:i-e.top}},getCurrentDragPercentage(t){t=t[this.horizontal?"y":"x"];const e=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(t=e-t),100*t/e},calculatePanesSize(t){const e=this.touch.activeSplitter;let a={prevPanesSize:this.sumPrevPanesSize(e),nextPanesSize:this.sumNextPanesSize(e),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:a.prevPanesSize),s=100-(this.pushOtherPanes?0:a.nextPanesSize),o=Math.max(Math.min(this.getCurrentDragPercentage(t),s),i);let n=[e,e+1],r=this.panes[n[0]]||null,l=this.panes[n[1]]||null;const c=r.max<100&&o>=r.max+a.prevPanesSize,d=l.max<100&&o<=100-(l.max+this.sumNextPanesSize(e+1));if(c||d)c?(r.size=r.max,l.size=Math.max(100-r.max-a.prevPanesSize-a.nextPanesSize,0)):(r.size=Math.max(100-l.max-a.prevPanesSize-this.sumNextPanesSize(e+1),0),l.size=l.max);else{if(this.pushOtherPanes){const t=this.doPushOtherPanes(a,o);if(!t)return;({sums:a,panesToResize:n}=t),r=this.panes[n[0]]||null,l=this.panes[n[1]]||null}null!==r&&(r.size=Math.min(Math.max(o-a.prevPanesSize-a.prevReachedMinPanes,r.min),r.max)),null!==l&&(l.size=Math.min(Math.max(100-o-a.nextPanesSize-a.nextReachedMinPanes,l.min),l.max))}},doPushOtherPanes(t,e){const a=this.touch.activeSplitter,i=[a,a+1];return e<t.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(a).index,t.prevReachedMinPanes=0,i[0]<a&&this.panes.forEach(((e,s)=>{s>i[0]&&s<=a&&(e.size=e.min,t.prevReachedMinPanes+=e.min)})),t.prevPanesSize=this.sumPrevPanesSize(i[0]),void 0===i[0])?(t.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach(((e,i)=>{i>0&&i<=a&&(e.size=e.min,t.prevReachedMinPanes+=e.min)})),this.panes[i[1]].size=100-t.prevReachedMinPanes-this.panes[0].min-t.prevPanesSize-t.nextPanesSize,null):e>100-t.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(a).index,t.nextReachedMinPanes=0,i[1]>a+1&&this.panes.forEach(((e,s)=>{s>a&&s<i[1]&&(e.size=e.min,t.nextReachedMinPanes+=e.min)})),t.nextPanesSize=this.sumNextPanesSize(i[1]-1),void 0===i[1])?(t.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach(((e,i)=>{i<this.panesCount-1&&i>=a+1&&(e.size=e.min,t.nextReachedMinPanes+=e.min)})),this.panes[i[0]].size=100-t.prevPanesSize-t.nextReachedMinPanes-this.panes[this.panesCount-1].min-t.nextPanesSize,null):{sums:t,panesToResize:i}},sumPrevPanesSize(t){return this.panes.reduce(((e,a,i)=>e+(i<t?a.size:0)),0)},sumNextPanesSize(t){return this.panes.reduce(((e,a,i)=>e+(i>t+1?a.size:0)),0)},findPrevExpandedPane(t){const e=[...this.panes].reverse().find((e=>e.index<t&&e.size>e.min));return e||{}},findNextExpandedPane(t){const e=this.panes.find((e=>e.index>t+1&&e.size>e.min));return e||{}},checkSplitpanesNodes(){const t=Array.from(this.container.children);t.forEach((t=>{const e=t.classList.contains("splitpanes__pane"),a=t.classList.contains("splitpanes__splitter");if(!e&&!a)return t.parentNode.removeChild(t),void console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.")}))},addSplitter(t,e,a=!1){const i=t-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),a||(s.onmousedown=t=>this.onMouseDown(t,i),"undefined"!==typeof window&&"ontouchstart"in window&&(s.ontouchstart=t=>this.onMouseDown(t,i)),s.onclick=t=>this.onSplitterClick(t,i+1)),this.dblClickSplitter&&(s.ondblclick=t=>this.onSplitterDblClick(t,i+1)),e.parentNode.insertBefore(s,e)},removeSplitter(t){t.onmousedown=void 0,t.onclick=void 0,t.ondblclick=void 0,t.parentNode.removeChild(t)},redoSplitters(){const t=Array.from(this.container.children);t.forEach((t=>{t.className.includes("splitpanes__splitter")&&this.removeSplitter(t)}));let e=0;t.forEach((t=>{t.className.includes("splitpanes__pane")&&(!e&&this.firstSplitter?this.addSplitter(e,t,!0):e&&this.addSplitter(e,t),e++)}))},requestUpdate(t){var e=t,{target:a}=e,i=p(e,["target"]);const s=this.indexedPanes[a._uid];Object.entries(i).forEach((([t,e])=>s[t]=e))},onPaneAdd(t){let e=-1;Array.from(t.$el.parentNode.children).some((a=>(a.className.includes("splitpanes__pane")&&e++,a===t.$el)));const a=parseFloat(t.minSize),i=parseFloat(t.maxSize);this.panes.splice(e,0,{id:t._uid,index:e,min:isNaN(a)?0:a,max:isNaN(i)?100:i,size:null===t.size?null:parseFloat(t.size),givenSize:t.size,update:t.update}),this.panes.forEach(((t,e)=>t.index=e)),this.ready&&this.$nextTick((()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[e]}),this.$emit("pane-add",{index:e,panes:this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))})}))},onPaneRemove(t){const e=this.panes.findIndex((e=>e.id===t._uid)),a=this.panes.splice(e,1)[0];this.panes.forEach(((t,e)=>t.index=e)),this.$nextTick((()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:h(u({},a),{index:e})}),this.$emit("pane-remove",{removed:a,panes:this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))})}))},resetPaneSizes(t={}){t.addedPane||t.removedPane?this.panes.some((t=>null!==t.givenSize||t.min||t.max<100))?this.equalizeAfterAddOrRemove(t):this.equalize():this.initialPanesSizing(),this.ready&&this.$emit("resized",this.panes.map((t=>({min:t.min,max:t.max,size:t.size}))))},equalize(){const t=100/this.panesCount;let e=0,a=[],i=[];this.panes.forEach((s=>{s.size=Math.max(Math.min(t,s.max),s.min),e-=s.size,s.size>=s.max&&a.push(s.id),s.size<=s.min&&i.push(s.id)})),e>.1&&this.readjustSizes(e,a,i)},initialPanesSizing(){this.panesCount;let t=100,e=[],a=[],i=0;this.panes.forEach((s=>{t-=s.size,null!==s.size&&i++,s.size>=s.max&&e.push(s.id),s.size<=s.min&&a.push(s.id)}));let s=100;t>.1&&(this.panes.forEach((e=>{null===e.size&&(e.size=Math.max(Math.min(t/(this.panesCount-i),e.max),e.min)),s-=e.size})),s>.1&&this.readjustSizes(t,e,a))},equalizeAfterAddOrRemove({addedPane:t,removedPane:e}={}){let a=100/this.panesCount,i=0,s=[],o=[];t&&null!==t.givenSize&&(a=(100-t.givenSize)/(this.panesCount-1)),this.panes.forEach((t=>{i-=t.size,t.size>=t.max&&s.push(t.id),t.size<=t.min&&o.push(t.id)})),Math.abs(i)<.1||(this.panes.forEach((e=>{t&&null!==t.givenSize&&t.id===e.id||(e.size=Math.max(Math.min(a,e.max),e.min)),i-=e.size,e.size>=e.max&&s.push(e.id),e.size<=e.min&&o.push(e.id)})),i>.1&&this.readjustSizes(i,s,o))},readjustSizes(t,e,a){let i;i=t>0?t/(this.panesCount-e.length):t/(this.panesCount-a.length),this.panes.forEach(((s,o)=>{if(t>0&&!e.includes(s.id)){const e=Math.max(Math.min(s.size+i,s.max),s.min),a=e-s.size;t-=a,s.size=e}else if(!a.includes(s.id)){const e=Math.max(Math.min(s.size+i,s.max),s.min),a=e-s.size;t-=a,s.size=e}s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})})),Math.abs(t)>.1&&this.$nextTick((()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")}))}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(t){const e=[...this.container.querySelectorAll(".splitpanes__splitter")];e.forEach(((e,a)=>{e.ondblclick=t?t=>this.onSplitterDblClick(t,a):void 0}))}},beforeDestroy(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(t){return t("div",{ref:"container",class:["splitpanes","splitpanes--"+(this.horizontal?"horizontal":"vertical"),{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default)}};let v,g;const w={};var b=f(m,v,g,!1,y,null,null,null);function y(t){for(let e in w)this[e]=w[e]}var k=function(){return b.exports}(),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"splitpanes__pane",style:t.style,on:{click:function(e){return t.onPaneClick(e,t._uid)}}},[t._t("default")],2)},$=[];const C={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeDestroy(){this.onPaneRemove(this)},methods:{update(t){this.style=t}},computed:{sizeNumber(){return this.size||0===this.size?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(t){this.requestUpdate({target:this,size:t})},minSizeNumber(t){this.requestUpdate({target:this,min:t})},maxSizeNumber(t){this.requestUpdate({target:this,max:t})}}},S={};var z=f(C,x,$,!1,M,null,null,null);function M(t){for(let e in S)this[e]=S[e]}var P=function(){return z.exports}(),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.chutier?a("div",{staticClass:"_myChutier",on:{click:function(e){t.last_clicked=!1}}},[a("portal-target",{attrs:{name:"largemedia",multiple:""}}),a("div",{staticClass:"_itemsList",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.selected_items_slugs=[]}}},[a("div",{staticClass:"_topRow"},[t.connected_as?a("AuthorTag",{attrs:{path:t.connected_as.$path,show_image_only:!0},on:{click:function(e){return t.$eventHub.$emit("showAuthorModal")}}}):a("button",{staticClass:"_authorBtn",attrs:{type:"button"},on:{click:function(e){return t.$eventHub.$emit("showAuthorModal")}}},[t._v(" "+t._s(t.$t("login"))+" ")]),a("div",{staticClass:"_separator"}),a("button",{staticClass:"u-button u-button_icon _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_qr_code_modal=!0}}},[a("div",{staticClass:"icon",attrs:{part:"base","aria-hidden":"true"}},[a("svg",{staticClass:"bi bi-qr-code",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M2 2h2v2H2V2Z"}}),a("path",{attrs:{d:"M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"}}),a("path",{attrs:{d:"M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"}}),a("path",{attrs:{d:"M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z"}}),a("path",{attrs:{d:"M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"}})])])]),t.show_qr_code_modal?a("QRModal",{attrs:{url_to_access:t.url_to_page},on:{close:function(e){t.show_qr_code_modal=!1}}}):t._e(),a("button",{staticClass:"u-button u-button_icon _qrBtn",attrs:{type:"button"},on:{click:function(e){return t.$eventHub.$emit("app.show_welcome_modal")}}},[a("b-icon",{attrs:{icon:"question-square"}})],1),a("button",{staticClass:"u-button u-button_icon _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_lang_modal=!t.show_lang_modal}}},[t._v(" "+t._s(t.current_lang_code)+" ")]),t.show_lang_modal?a("LangModal",{on:{close:function(e){t.show_lang_modal=!1}}}):t._e(),t.is_instance_admin?a("button",{staticClass:"u-button u-button_icon _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_admin_settings=!t.show_admin_settings}}},[a("b-icon",{attrs:{icon:"gear","aria-label":t.$t("admin_settings")}})],1):t._e(),t.show_admin_settings?a("AdminLumaSettings",{on:{close:function(e){t.show_admin_settings=!1}}}):t._e()],1),t.connected_as?[a("div",{staticClass:"_importButton"},[a("ImportFileZone",{attrs:{multiple:!0,files_to_import:t.files_to_import},on:{"update:files_to_import":function(e){t.files_to_import=e}}}),t.files_to_import.length>0?a("UploadFiles",{attrs:{files_to_import:t.files_to_import,path:t.author_path},on:{importedMedias:function(e){return t.mediaJustImported(e)},close:function(e){t.files_to_import=[]}}}):t._e(),a("div",{staticClass:"_importBtns"},[a("button",{staticClass:"u-button u-button_outline _qrBtn",attrs:{type:"button"},on:{click:t.createNote}},[a("b-icon",{attrs:{icon:"file-text"}}),t._v("   note ")],1),a("button",{staticClass:"u-button u-button_outline _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_link_picker=!0}}},[a("b-icon",{attrs:{icon:"link-45deg"}}),t._v("   url ")],1),t.show_link_picker?a("EmbedPicker",{on:{embed:t.createEmbed,close:function(e){t.show_link_picker=!1}}}):t._e()],1)],1),a("div",{staticClass:"_middleContent"},[a("div",{staticClass:"u-instructions u-spacingBottom"},[a("b-icon",{attrs:{icon:"info-circle"}}),t._v(" "+t._s(t.$t("imported_docs"))+" ")],1),t.chutier_items&&t.chutier_items.length>0?[a("label",{staticClass:"_item--label",class:{"is--fullySelected":t.all_items_selected},attrs:{for:""},on:{click:function(e){t.all_items_selected?t.deselectAll():t.selectAll()}}},[t.chutier_items.length>0?a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("b-icon",{attrs:{icon:t.all_items_selected?"dash-square-dotted":"plus-square-dotted"}})],1):t._e(),t._v(" "+t._s(t.$t("items_to_share"))+" • "+t._s(t.chutier_items.length)+" ")])]:t._e()],2),a("div",{staticClass:"_items",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.selected_items_slugs=[]}}},t._l(t.chutier_items_grouped,(function(e){return a("div",{key:e.label,staticClass:"_item",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.selected_items_slugs=[]}}},[a("div",{staticClass:"_item--label",class:{"is--fullySelected":t.rangeIsSelected(e.files.map((function(t){return t.$path})))},on:{click:function(a){t.rangeIsSelected(e.files.map((function(t){return t.$path})))?t.deselectRange(e.files.map((function(t){return t.$path}))):t.selectRange(e.files.map((function(t){return t.$path})))}}},[t.rangeIsSelected(e.files.map((function(t){return t.$path})))?a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("b-icon",{attrs:{icon:"dash-square-dotted"}})],1):a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("b-icon",{attrs:{icon:"plus-square-dotted"}})],1),t._v(" "+t._s(e.label)+" ")]),a("transition-group",{attrs:{tag:"div",name:"listComplete"}},t._l(e.files,(function(e){return a("ChutierItem",{key:e.$path,attrs:{file:e,is_clicked:t.last_clicked===e.$path,is_selected:t.selected_items_slugs.includes(e.$path),draggable:!0},on:{toggleSelect:function(a){return t.toggleSelect(e.$path)},unclicked:function(e){t.last_clicked=!1},click:function(a){a.stopPropagation(),t.last_clicked=e.$path}}})})),1)],1)})),0)]:t._e()],2),t.connected_as?[a("DocumentsCreator",{staticClass:"_documentsCreator",attrs:{author_stacks_path:t.author_stacks_path,selected_items:t.selected_items}})]:t._e(),a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.selected_items.length>0?a("div",{key:"selection",staticClass:"_selectionBar"},[a("transition",{attrs:{name:"slideupFade",mode:"out-in"}},[a("div",{key:t.selected_items.length},[1===t.selected_items.length?[t._v(" "+t._s(t.$t("selected_item"))+" ")]:[t._v(" "+t._s(t.$t("selected_items"))+" ")],t._v(" "+t._s(t.selected_items.length)+" ")],2)]),a("div",{staticClass:"u-sameRow _dbleBtns"},[a("button",{staticClass:"u-button u-button_black",attrs:{type:"button"},on:{click:t.deselectAll}},[a("b-icon",{attrs:{name:"dash-square-dotted"}}),t._v(" "+t._s(t.$t("deselect_all"))+" ")],1),a("button",{staticClass:"u-button u-button_black",attrs:{type:"button"},on:{click:function(e){t.show_confirm_remove_menu=!0}}},[a("b-icon",{attrs:{icon:"trash"}}),t._v(" "+t._s(t.$t("remove_select"))+" ")],1)])],1):t._e()]),a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.show_confirm_remove_menu?a("div",{key:"remove",staticClass:"_removeMenu"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_remove_menu=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_red",attrs:{type:"button",autofocus:""},on:{click:t.removeItemsInSelection}},[t._v(" "+t._s(t.$t("confirm_removal"))+" ")])]):t._e()])],2):t._e()},B=[],L=a(28763),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_documentsCreator"},[a("transition-group",{attrs:{tag:"div",name:"projectsList"}},[t._l(t.sorted_stacks,(function(e){return a("DocumentSpot",{key:e.$path,attrs:{selected_items:t.selected_items,author_stacks_path:t.author_stacks_path,mode:t.spot_mode,stack_path:e.$path,stack:e}})})),a("div",{key:"empty"},[a("transition",{attrs:{name:"slideupFade"}},["add"===t.spot_mode?a("DocumentSpot",{attrs:{author_stacks_path:t.author_stacks_path,selected_items:t.selected_items,mode:"add"}}):t._e()],1)],1)],2)],1)},D=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"_documentSpot",class:{"is--draggedOn":t.is_draggedOn,"has--content":t.stack,"is--expectingDrag":"add"===t.mode,"is--expectingClick":t.selected_items&&t.selected_items.length>0},on:{dragenter:t.dragEnter,dragover:t.dragOver,dragleave:t.dragLeave,click:t.openOrAddToStack,drop:t.drop}},[a("div",{staticClass:"_topContent"},[t.stack?[t.stack.$preview?a("MediaContent",{staticClass:"_mediaPreview",attrs:{file:t.stack.$preview}}):a("div",{staticClass:"_mediaPreview _noPreview"},[t._v(" "+t._s(t.$t("no_preview_to_show"))+" ")]),a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.stack&&t.stack.stack_files_metas?a("div",{key:t.stack.stack_files_metas.length+"_"+t.mode,staticClass:"_count"},["add"===t.mode?[t._v("+")]:t._e(),t._v(" "+t._s(t.stack.stack_files_metas.length)+" ")],2):t._e()])]:a("div",{staticClass:"_plus"},[t._v("+")]),a("transition",{attrs:{name:"slideupFade",mode:"out-in"}},["add"===t.mode?a("div",{},[a("div",{key:t.mode,staticClass:"anim_backgroundPosition"})]):t._e()]),t.is_adding_to_stack?a("LoaderSpinner",{staticClass:"_loader"}):t._e()],2),t.stack&&t.stack.title?a("div",{staticClass:"_stackTitle"},[t._v(" "+t._s(t.stack.title)+" ")]):t._e()]),a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.show_mediastack_modal?a("StackDisplay",{staticClass:"_stackModal",attrs:{stack_path:t.stack.$path,context:"chutier"},on:{close:function(e){t.show_mediastack_modal=!1}}}):t._e()],1)],1)},Z=[],j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_stackDisplay",attrs:{"data-context":t.context}},[a("div",{staticClass:"_closeStack"},[a("button",{staticClass:"u-button u-button_icon u-button_transparent",on:{click:function(e){return t.$emit("close")}}},[a("b-icon",{attrs:{icon:"x-lg",label:t.$t("close")}})],1)]),a("div",{staticClass:"_panes"},[t.is_loading?a("LoaderSpinner"):t.fetch_stack_error?a("div",[t._v(" "+t._s(t.fetch_stack_error)+" ")]):[a("div",{staticClass:"_showSidebar"},[a("button",{staticClass:"u-button u-button_icon u-button_transparent",attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.show_sidebar=!0}}},[a("b-icon",{attrs:{icon:"list-ul","aria-label":t.$t("show_sidebar")}})],1)]),a("transition",{attrs:{name:"slideleft",mode:"out-in"}},[t.show_sidebar?a("div",{staticClass:"_infos"},[a("div",{staticClass:"_allFields"},[a("div",{staticClass:"_titleRow"},[a("TitleField",{attrs:{label:t.stack.title?"":t.$t("title"),field_name:"title",content:t.stack.title,path:t.stack.$path,required:!0,tag:"h1",can_edit:t.can_edit}}),t.can_be_added_to_fav?a("button",{staticClass:"u-button u-button_icon _addToColl",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("toggleFav")}}},[t.is_favorite?a("b-icon",{attrs:{icon:"star-fill","aria-label":t.$t("remove")}}):a("b-icon",{attrs:{icon:"star","aria-label":t.$t("add")}})],1):t._e()],1),a("hr"),a("div",[a("TitleField",{attrs:{label:t.$t("description"),field_name:"description",content:t.stack.description,path:t.stack.$path,input_type:"markdown",can_edit:t.can_edit}})],1),a("hr"),a("div",{},[a("KeywordsField",{attrs:{label:t.$t("keywords"),field_name:"keywords",keywords:t.stack.keywords,path:t.stack.$path,can_edit:t.can_edit}})],1),a("hr"),a("PositionPicker",{attrs:{field_name:"$location",label:t.$t("location"),content:t.stack.$location,path:t.stack.$path,can_edit:t.can_edit}}),a("hr"),a("div",{staticClass:"_dateFields"},[a("div",{},[a("DateField",{attrs:{label:t.$t("created"),field_name:"date_created_corrected",date:t.date_created_corrected,path:t.stack.$path,input_type:"datetime-local",can_edit:t.can_edit}}),t._v(" "+t._s(t.date_created_corrected)+" ")],1),a("div",{},[a("DateField",{attrs:{label:t.$t("date_modified"),field_name:"date_modified",date:t.stack.$date_modified,path:t.stack.$path,input_type:"datetime-local",can_edit:!1}})],1)]),a("hr"),a("div",{staticClass:"u-spacingBottom"},[a("AuthorField",{attrs:{label:t.$t("authors"),field:"$authors",instructions:t.$t("file_author_instructions"),authors_paths:t.stack.$authors,path:t.stack.$path,can_edit:t.can_edit,no_options:!0}})],1),a("div",{staticClass:"u-spacingBottom"},[a("AuthorField",{attrs:{label:t.$t("admins"),field:"$admins",instructions:t.$t("media_editing_instructions"),authors_paths:t.stack.$admins,path:t.stack.$path,can_edit:t.can_edit}})],1),a("hr"),t.can_edit?a("div",{staticClass:"u-sameRow"},[a("DownloadFolder",{attrs:{path:t.stack.$path}}),a("RemoveMenu",{attrs:{remove_text:t.$t("remove_stack")},on:{remove:t.removeStack}})],1):t._e(),t.is_instance_admin?a("div",{},[t.can_edit?a("StatusTag",{attrs:{status:t.stack.$status||"public",status_options:["public","private"],path:t.stack.$path,can_edit:t.can_edit}}):t._e()],1):t._e()],1),"chutier"===t.context?a("div",{staticClass:"_bottomBtns"},[a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[a("button",{key:t.share_button_is_enabled,staticClass:"u-button u-button_red _btn",attrs:{type:"button",disabled:!t.share_button_is_enabled},on:{click:t.publishStack}},[t._v(" "+t._s(t.$t("publish"))+"  "),a("b-icon",{staticStyle:{"font-size":"1rem"},attrs:{icon:"arrow-right-square",circle:""}})],1)]),a("div",{staticClass:"u-instructions"},[t.stack.title&&0!==t.stack.title.length?t._e():a("div",[t._v(" "+t._s(t.$t("fill_title"))+" ")]),t.stack.keywords&&0!==t.stack.keywords.length?t._e():a("div",[t._v(" "+t._s(t.$t("fill_keywords"))+" ")]),0===t.stack_files_in_order.length?a("div",[t._v(" "+t._s(t.$t("files_missing"))+" ")]):t._e()])],1):t._e(),a("button",{staticClass:"u-button u-button_icon u-button_transparent _hideSidebar",attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.show_sidebar=!1}}},[a("b-icon",{attrs:{icon:"arrow-left","aria-label":t.$t("hide_sidebar")}})],1)]):t._e()]),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.show_sidebar&&!t.dual_display?a("div",{staticClass:"_overlay",on:{click:function(e){t.show_sidebar=!1}}}):t._e()]),a("StackCarousel",{staticClass:"_topCarousel",attrs:{"data-dualdisplay":t.dual_display,files:t.stack_files_in_order,can_edit:t.can_edit},on:{removeMediaFromStack:t.removeMediaFromStack,changeMediaOrder:t.changeMediaOrder}})]],2)])},I=[],R=(a(92176),a(7961),a(63346)),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_stackCarousel"},[a("FileShown",{key:t.current_file_shown.$path,staticClass:"_stackCarousel--fileshown",attrs:{file:t.current_file_shown,can_edit:t.can_edit}}),a("transition-group",{staticClass:"_list",attrs:{tag:"div",name:"listComplete"}},t._l(t.files,(function(e,i){return a("div",{key:e.$path,staticClass:"_preview",attrs:{"data-iscurrent":t.current_file_shown.$path===e.$path},on:{click:function(e){return t.openFile(i)}}},[a("MediaContent",{attrs:{file:e,context:"preview",resolution:360}}),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.current_file_shown.$path===e.$path?a("div",{staticClass:"_btnRow"},[a("div",{staticClass:"_previewOverlay"}),a("RemoveMenu",{staticClass:"_removeBtn",attrs:{remove_text:t.$t("remove"),show_button_text:!1},on:{remove:function(e){return t.$emit("removeMediaFromStack",t.current_file_shown.$path)}}}),a("select",{staticClass:"_changeOrderSelect",attrs:{size:"small"},domProps:{value:i+1},on:{change:function(e){return t.$emit("changeMediaOrder",i,+e.target.value-1)}}},t._l(new Array(t.files.length).fill(null),(function(e,i){return a("option",{key:i+1,domProps:{textContent:t._s(i+1)}})})),0)],1):t._e()]),a("div",{staticClass:"_credits"},[e.caption?a("b-icon",{attrs:{icon:"text-left"}}):t._e(),e.$credits?a("b-icon",{attrs:{icon:"info-circle"}}):t._e()],1)],1)})),0)],1)},q=[],H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_fileShown"},[a("div",{staticClass:"_single"},[a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.file?["text"===t.file.$type?a("div",{staticClass:"_textEditor"},[a("CollaborativeEditor2",{attrs:{path:t.file.$path,content:t.file.$content,custom_formats:["bold","italic","underline","link"],can_edit:t.can_edit,edit_on_mounted:"chutier"===t.context}})],1):a("MediaContent",{key:t.file.$path,attrs:{file:t.file,context:"full",resolution:1600,show_fs_button:!0,zoom_on_click:!1}})]:t._e()],2),a("div",{staticClass:"_dragEditBtn"},[a("DragFile",{attrs:{file:t.file,is_dragged:t.is_dragged},on:{"update:is_dragged":function(e){t.is_dragged=e}}})],1)],1),a("div",{staticClass:"_unfoldBtn"},[a("button",{staticClass:"u-button u-button_icon u-button_transparent",attrs:{type:"button"},on:{click:function(e){t.show_infos=!t.show_infos}}},[t.show_infos?a("b-icon",{attrs:{icon:"chevron-down","aria-label":t.$t("close")}}):a("b-icon",{attrs:{icon:"chevron-up","aria-label":t.$t("open")}}),t.file.caption?a("b-icon",{attrs:{icon:"text-left","aria-label":t.$t("caption")}}):t._e(),t.file.$credits?a("b-icon",{attrs:{icon:"info-circle","aria-label":t.$t("credit/reference")}}):t._e()],1)]),a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[a("div",{key:t.file.$path,staticClass:"_infos",attrs:{"data-hide":!t.show_infos}},[a("div",{staticClass:"_infos--content"},[t.optimization_strongly_recommended?a("div",{staticClass:"u-spacingBottom _optimizeNotice"},[a("div",{},[a("OptimizeMedia",{attrs:{media:t.file},on:{close:function(e){return t.$emit("close")}}})],1)]):t._e(),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{staticClass:"_caption",attrs:{field_name:"caption",label:t.$t("caption"),content:t.file.caption,path:t.file.$path,maxlength:1280,input_type:"markdown",can_edit:t.can_edit}})],1),a("div",{},[a("TitleField",{staticClass:"_credits",attrs:{field_name:"$credits",label:t.$t("credit/reference"),content:t.file.$credits,path:t.file.$path,maxlength:1280,input_type:"markdown",can_edit:t.can_edit}})],1),t.file.$location?[a("div",{staticClass:"u-spacingBottom"}),a("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("latitude"))+" : "+t._s(t.file.$location.latitude)+" "),a("br"),t._v(" "+t._s(t.$t("longitude"))+" : "+t._s(t.file.$location.longitude)+" ")])]:t._e()],2)])])],1)},N=[],A={props:{file:Object,context:String,can_edit:Boolean},components:{},data(){return{show_infos:!0,is_dragged:!1,edit_mode:!1}},i18n:{messages:{fr:{},en:{}}},created(){localStorage.getItem("show_infos")?this.show_infos="false"!==localStorage.getItem("show_infos"):this.show_infos=this.can_edit||this.file.caption||this.file.$credits},mounted(){},beforeDestroy(){},watch:{show_infos(){localStorage.setItem("show_infos",this.show_infos)}},computed:{optimization_possible(){return this.fileCanBeOptimized({path:this.file.$media_filename})},optimization_strongly_recommended(){return this.fileShouldBeOptimized({path:this.file.$media_filename})}},methods:{}},V=A,K=(a(13573),a(1001)),U=(0,K.Z)(V,H,N,!1,null,"0778f91c",null),W=U.exports,J={props:{files:Array,can_edit:Boolean},components:{FileShown:W},data(){return{active_file_index:0,is_dragged:!1}},i18n:{messages:{fr:{},en:{}}},created(){},mounted(){},beforeDestroy(){},watch:{active_file_index(){this.$nextTick((()=>{const t=this.$el.querySelector("._preview[data-iscurrent]");t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}))}},computed:{enable_drag(){return"undefined"!==typeof this.$eventHub._events["mediatile.drag.end"]},current_file_shown(){return!1!==this.active_file_index&&this.files[this.active_file_index]}},methods:{toggleFile(t){this.active_file_index===t?this.active_file_index=!1:this.active_file_index=t},openFile(t){this.active_file_index=t}}},X=J,Y=(a(25370),(0,K.Z)(X,O,q,!1,null,"703f1449",null)),Q=Y.exports,G={props:{stack_path:String,context:String,is_favorite:Boolean,can_be_added_to_fav:Boolean},components:{KeywordsField:R.Z,StackCarousel:Q},inject:{$sharedFolderPath:{default:!1}},data(){return{stack:void 0,fetch_stack_error:void 0,is_loading:!0,show_sidebar:"false"!==localStorage.getItem("show_sidebar"),pane_width:void 0,ro:void 0}},i18n:{messages:{fr:{fill_title:"Veuillez remplir le champ Titre",fill_keywords:"Veuillez remplir le champ Mots-clés",files_missing:"Veuillez ajouter des médias à ce document",stack_not_public:"Ce document n'est pas public",error_loading_stack:"Erreur lors du chargement du document"},en:{fill_title:"Fill in the title field",fill_keywords:"Fill in the keywords field",files_missing:"Add medias to this document",stack_not_public:"This document is not public",error_loading_stack:"Error loading document"}}},async created(){if(this.stack=await this.$api.getFolder({path:this.stack_path}).catch((t=>{this.is_loading=!1,"folder_private"===t.code?this.fetch_stack_error=this.$t("stack_not_public"):this.fetch_stack_error=this.$t("error_loading_stack")})),this.$api.join({room:this.stack.$path}),this.is_loading=!1,this.date_created_corrected=this.datetimeLocal(this.stack.date_created_corrected||this.stack.$date_created||this.stack.$date_uploaded),this.stack_files_in_order.length>0){const t=this.stack_files_in_order[0].$path;this.stack.$preview?.$path!==t&&await this.$api.updateMeta({path:this.stack.$path,new_meta:{$preview:this.getFilename(t)}})}},mounted(){this.updatePaneWidth(),this.ro=new ResizeObserver(this.updatePaneWidth),this.ro.observe(this.$el),window.addEventListener("keyup",this.handleKeyPress)},beforeDestroy(){this.ro.unobserve(this.$el),window.removeEventListener("keyup",this.handleKeyPress),this.stack&&this.$api.leave({room:this.stack.$path})},watch:{"stack.date_created_corrected"(){this.date_created_corrected=this.datetimeLocal(this.stack.date_created_corrected)},show_sidebar(){localStorage.setItem("show_sidebar",this.show_sidebar)}},computed:{can_edit(){return!!this.stack&&this.canLoggedinEditFolder({folder:this.stack})},stack_files_in_order(){return this.getStackFilesInOrder({stack:this.stack})},shared_folder_path(){return!!this.$sharedFolderPath&&this.$sharedFolderPath()},share_button_is_enabled(){return this.stack.title?.length>0&&this.stack.keywords?.length>0&&this.stack_files_in_order.length>0},dual_display(){return!!(this.show_sidebar&&this.pane_width>720)}},methods:{updatePaneWidth(){this.pane_width=this.$el.offsetWidth},async changeMediaOrder(t,e){let a=this.stack_files_in_order.map((t=>this.getFilename(t.$path)));function i(t,e,a){if(a>=t.length){var i=a-t.length+1;while(i--)t.push(void 0)}return t.splice(a,0,t.splice(e,1)[0]),t}i(a,t,e);let s={stack_files_metas:a};this.stack.$preview?.$path&&this.getFilename(this.stack.$preview?.$path)===a.at(0)||(s.$preview=a.at(0)),await this.$api.updateMeta({path:this.stack.$path,new_meta:s})},async removeMediaFromStack(t){await this.$api.copyFile({path:t,path_to_destination_folder:this.connected_as.$path,new_meta:{}}),await this.$api.deleteItem({path:t});let e=this.stack?.stack_files_metas.slice();e=e.filter((e=>e!==this.getFilename(t))),await this.$api.updateMeta({path:this.stack.$path,new_meta:{stack_files_metas:e}})},async removeStack(){await this.$api.deleteItem({path:this.stack.$path}),this.$emit("close")},closeOnRemove({path:t}){t===this.stack.$path&&(this.$alertify.closeLogOnClick(!0).delay(4e3).log(this.$t("stack_was_removed")),this.$emit("close"))},async publishStack(){const t=this.shared_folder_path+"/stacks";await this.$api.copyFolder({path:this.stack.$path,path_to_destination_type:t,new_meta:{$status:"public"}}),await this.$api.deleteItem({path:this.stack.$path}),this.$emit("close")},handleKeyPress(t){if("Escape"===t.key)return this.$emit("close"),!1}}},tt=G,et=(a(4696),(0,K.Z)(tt,j,I,!1,null,"5fdd33da",null)),at=et.exports,it={props:{index:Number,author_stacks_path:String,selected_items:Array,mode:String,stack:Object},components:{StackDisplay:at},data(){return{is_draggedOn:!1,show_mediastack_modal:!1,is_adding_to_stack:!1}},created(){},async mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{dragEnter(t){const e="text/plain"===t.dataTransfer?.types[0];e&&(this.is_draggedOn=!0)},dragOver(t){t.preventDefault()},dragLeave(){this.is_draggedOn=!1},async drop(t){if(this.$alertify.delay(4e3).success("dropped item"),t.preventDefault(),this.is_draggedOn=!1,this.selected_items.length>0)await this.addSelectedToStack();else{const e=t.dataTransfer?.getData("text/plain");if(e){const t=[JSON.parse(e)];await this.createOrAppendToStack(t)}}},async addSelectedToStack(){const t=this.selected_items.map((t=>t.$path));await this.createOrAppendToStack(t)},async openOrAddToStack(){this.selected_items.length>0?await this.addSelectedToStack():this.openStack()},openStack(){this.stack&&(this.show_mediastack_modal=!0)},async createOrAppendToStack(t){let e;if(this.is_adding_to_stack=!0,this.stack?.$path)e=this.stack?.$path;else{let t={requested_slug:"stack",stack_spot:this.index,$authors:[this.connected_as.$path],$admins:[this.connected_as.$path]};const a=await this.$api.createFolder({path:this.author_stacks_path,additional_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}));e=this.author_stacks_path+"/"+a}await new Promise((t=>setTimeout(t,250)));let a=[];this.stack&&this.stack.stack_files_metas&&Array.isArray(this.stack.stack_files_metas)&&(a=this.stack.stack_files_metas.slice());for(const i of t){const t=await this.$api.copyFile({path:i,path_to_destination_folder:e,new_meta:{}});await this.$api.deleteItem({path:i}),a.push(t);let s={stack_files_metas:a};1===a.length&&(s.$preview=t),await this.$api.updateMeta({path:e,new_meta:s})}await new Promise((t=>setTimeout(t,300))),this.is_adding_to_stack=!1}}},st=it,ot=(a(1349),(0,K.Z)(st,E,Z,!1,null,"7ad944ab",null)),nt=ot.exports,rt={props:{author_stacks_path:String,selected_items:Array},components:{DocumentSpot:nt},data(){return{is_loading:!0,fetch_stack_err:void 0,all_stacks:[],is_expecting_drag:!1}},i18n:{messages:{fr:{}}},async created(){await this.listStacks(),this.$api.join({room:this.author_stacks_path}),this.is_loading=!1,this.$eventHub.$on("chutierItem.startDrag",this.startDragItem),this.$eventHub.$on("chutierItem.endDrag",this.endDragItem)},mounted(){},beforeDestroy(){this.$api.leave({room:this.author_stacks_path}),this.$eventHub.$off("chutierItem.startDrag",this.startDragItem),this.$eventHub.$off("chutierItem.endDrag",this.endDragItem)},watch:{},computed:{spot_mode(){return this.is_expecting_drag||this.selected_items?.length>0?"add":"open"},sorted_stacks(){return this.all_stacks.slice().sort(((t,e)=>+new Date(t.$date_created)-+new Date(e.$date_created)))}},methods:{startDragItem(){this.is_expecting_drag=!0},endDragItem(){this.is_expecting_drag=!1},async listStacks(){const t=await this.$api.getFolders({path:this.author_stacks_path}).catch((t=>{this.fetch_stack_err=t.response,this.is_loading=!1}));this.all_stacks=t}}},lt=rt,ct=(a(53793),(0,K.Z)(lt,T,D,!1,null,"878ae6ee",null)),dt=ct.exports,_t=a(70474),ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_chutierRow",class:{"is--clicked":t.is_clicked,"is--selected":t.is_selected,"is--dragged":t.is_dragged},attrs:{draggable:t.draggable},on:{dragstart:t.dragStart,dragend:t.dragEnd,click:function(e){return t.$emit("toggleSelect")}}},[a("div",{staticClass:"_chutierRow--rows"},[a("div",{staticClass:"_infos"},[a("div",{staticClass:"_chutierRow--openLarge",on:{click:function(e){e.stopPropagation(),t.show_large=!0}}},[a("MediaContent",{staticClass:"_chutierRow--preview",attrs:{file:t.file,context:"preview"}})],1),a("div",{staticClass:"_titleDateField"},[a("div",[a("div",{},[a("small",[t._v(" "+t._s("stack"===t.context?t.formatDateTimeToPrecise(t.date_created_corrected):t.formatTime(t.date_created_corrected,{hour:"2-digit",minute:"2-digit"}))+" ")])]),t.file.caption?a("div",{domProps:{textContent:t._s(t.file.caption)}}):a("div",{domProps:{textContent:t._s(t.file.$media_filename)}})])]),a("button",{staticClass:"u-button_icon _dragBtn",attrs:{type:"button"}},[a("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M9.01864 7.20446C9.25889 7.20446 9.48929 7.29963 9.65918 7.46904C9.82906 7.63845 9.9245 7.86822 9.9245 8.1078V10.3644C9.9245 10.5241 9.98812 10.6773 10.1014 10.7902C10.2146 10.9031 10.3682 10.9666 10.5284 10.9666C10.6886 10.9666 10.8422 10.9031 10.9554 10.7902C11.0687 10.6773 11.1323 10.5241 11.1323 10.3644V7.82812C11.1323 7.25029 11.8264 7.14482 12.3513 7.25029C12.5131 7.28281 12.641 7.33835 12.7849 7.46904C12.8532 7.53111 12.944 7.73743 12.944 7.93858V10.3644C12.944 10.5241 13.0077 10.6773 13.1209 10.7902C13.2342 10.9031 13.3878 10.9666 13.5479 10.9666C13.7081 10.9666 13.8617 10.9031 13.975 10.7902C14.0882 10.6773 14.1518 10.5241 14.1518 10.3644V8.47938C14.1945 8.4749 14.2372 8.47089 14.2799 8.46733C14.6615 8.43843 14.9852 8.45529 15.135 8.51551C15.2775 8.57092 15.4974 8.76484 15.722 9.03343C15.8198 9.14906 15.9032 9.26228 15.9636 9.34538V10.9666C15.9636 11.1263 16.0272 11.2795 16.1405 11.3924C16.2537 11.5054 16.4073 11.5688 16.5675 11.5688C16.7276 11.5688 16.8813 11.5054 16.9945 11.3924C17.1078 11.2795 17.1714 11.1263 17.1714 10.9666V9.76212H17.5845C17.7533 9.76212 17.9202 9.7974 18.0745 9.86569C18.2288 9.93398 18.367 10.0338 18.4802 10.1586C18.5934 10.2834 18.6792 10.4306 18.7319 10.5905C18.7846 10.7504 18.8031 10.9195 18.7862 11.087L18.4589 14.3571C18.4166 14.7774 18.2862 15.184 18.076 15.5507L16.3911 18.492C16.3383 18.5842 16.262 18.6608 16.17 18.7141C16.0779 18.7674 15.9734 18.7955 15.8669 18.7955H8.15505C8.05559 18.7955 7.95769 18.7709 7.87004 18.7241C7.78239 18.6772 7.70769 18.6095 7.6526 18.5269L5.9218 15.9374C5.7611 15.6972 5.66045 15.4221 5.6283 15.1352L5.2116 11.3954C5.19476 11.2455 5.23493 11.0948 5.32417 10.973C5.4134 10.8512 5.54521 10.7673 5.69352 10.7377L6.90496 10.4968V11.5688C6.90496 11.7285 6.96859 11.8817 7.08184 11.9946C7.19509 12.1076 7.3487 12.171 7.50887 12.171C7.66903 12.171 7.82264 12.1076 7.93589 11.9946C8.04915 11.8817 8.11277 11.7285 8.11277 11.5688V8.1078C8.11277 7.86822 8.20821 7.63845 8.3781 7.46904C8.54798 7.29963 8.77839 7.20446 9.01864 7.20446ZM10.5284 6.75C10.132 6.35471 9.57922 6 9.01864 6C8.45805 6 7.92043 6.22207 7.52404 6.61736C7.12765 7.01265 6.90496 7.54878 6.90496 8.1078V9.2683L5.45558 9.55737C5.01132 9.64619 4.61656 9.89779 4.34915 10.2626C4.08175 10.6273 3.96111 11.0788 4.01103 11.5279L4.42773 15.2689C4.48132 15.7471 4.64906 16.2056 4.9169 16.6058L6.6477 19.1954C6.81312 19.4429 7.03726 19.6458 7.30021 19.7862C7.56317 19.9265 7.8568 20 8.15505 20H15.8669C16.1863 19.9999 16.4999 19.9156 16.7761 19.7557C17.0523 19.5958 17.2811 19.366 17.4395 19.0894L19.1244 16.1494C19.419 15.6354 19.6017 15.0654 19.6607 14.4764L19.988 11.2063C20.0216 10.8714 19.9844 10.5332 19.8789 10.2135C19.7734 9.89385 19.6019 9.59976 19.3755 9.35022C19.149 9.10068 18.8726 8.90123 18.5642 8.76472C18.2557 8.62821 17.9219 8.55768 17.5845 8.55767H16.8827C16.8073 8.45571 16.7288 8.35609 16.6472 8.25896C16.4165 7.98314 16.0312 7.57483 15.5843 7.39657C15.1447 7.22072 14.5625 7.23758 14.1857 7.26649L14.0262 7.28095C13.7453 6.56393 13.1227 6 12.0662 6C10.8923 6 10.5284 6.75 10.5284 6.75Z",fill:"#77758E"}})])])])]),t.show_large?[a("portal",{attrs:{to:"largemedia"}},[a("div",{staticClass:"_largePreview"},[a("div",{staticClass:"_closeLarge"},[a("button",{staticClass:"u-button u-button_icon u-button_transparent",on:{click:function(e){t.show_large=!1}}},[a("b-icon",{attrs:{icon:"x-lg",label:t.$t("close")}})],1)]),a("FileShown",{key:t.file.$path,staticClass:"_fileLarge",attrs:{context:"chutier",file:t.file,can_edit:!0}})],1)])]:t._e(),(t.is_selected,t._e())],2)},ht=[],pt={props:{file:Object,is_selected:Boolean,is_clicked:Boolean,draggable:Boolean,context:{type:String,default:"list"}},components:{FileShown:W},data(){return{show_large:!1,is_mousedown:!1,is_dragged:!1,id:`select_chutier_item_${(Math.random().toString(36)+"00000000000000000").slice(2,5)}`,date_created_corrected:this.datetimeLocal(this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded||new Date),description:this.file.description||"",keywords:this.file.keywords||[]}},created(){},mounted(){this.$eventHub.$on("chutierItem.editText",this.editText),this.$eventHub.$on("chutierItem.startDrag",this.itemDragged),this.$eventHub.$on("chutierItem.endDrag",this.itemStoppedDrag)},beforeDestroy(){this.$eventHub.$off("chutierItem.editText",this.editText),this.$eventHub.$off("chutierItem.startDrag",this.itemDragged),this.$eventHub.$off("chutierItem.endDrag",this.itemStoppedDrag)},watch:{},computed:{},methods:{cleanFilename(){return this.file.$media_filename.substring(0,this.file.$media_filename.lastIndexOf("."))},editText(t){this.getFilename(this.file.$path)===t&&(this.show_large=!0,this.$nextTick((()=>{})))},dragStart(t){this.is_dragged=!0,this.is_selected||this.$emit("toggleSelect"),this.$eventHub.$emit("chutierItem.startDrag"),t.dataTransfer.effectAllowed="move";var e=document.createElement("img");const a=this.makeURLFromThumbs({$thumbs:this.file.$thumbs,$type:this.file.$type,$path:this.getParent(this.file.$path),resolution:180});a&&(e.src=a,t.dataTransfer.setDragImage(e,0,0,50,50)),t.dataTransfer.setData("text/plain",JSON.stringify(this.file.$path))},dragEnd(){this.is_dragged=!1,this.$eventHub.$emit("chutierItem.endDrag")},itemDragged(){this.is_selected&&(this.is_dragged=!0)},itemStoppedDrag(){this.is_dragged=!1}}},ft=pt,mt=(a(38909),a(48859),(0,K.Z)(ft,ut,ht,!1,null,"26df95b6",null)),vt=mt.exports,gt=a(77286),wt=a(70550),bt={props:{shared_folder_path:String},components:{ImportFileZone:L.Z,DocumentsCreator:dt,EmbedPicker:_t.Z,ChutierItem:vt,AdminLumaSettings:gt["default"],LangModal:wt.Z},provide(){return{$sharedFolderPath:()=>this.shared_folder_path}},i18n:{messages:{fr:{imported_docs:"Les médias importés apparaissent ici. Ils restent privés tant que vous ne les ajoutez pas à un document partagé."},en:{imported_docs:"Imported medias will appear here. They stay private until they are added to a shared document."}}},data(){return{chutier:void 0,show_admin_settings:!1,is_dragover:!1,files_to_import:[],id:`image_select_${(Math.random().toString(36)+"00000000000000000").slice(2,5)}`,last_clicked:void 0,selected_items_slugs:[],show_mediastack_modal:!1,max_items_selected:15,show_link_picker:!1,show_qr_code_modal:!1,show_lang_modal:!1,show_confirm_remove_menu:!1}},created(){},mounted(){this.listChutier()},beforeDestroy(){},watch:{selected_items_slugs(){this.show_confirm_remove_menu&&(this.show_confirm_remove_menu=!1),this.selected_items_slugs.length>this.max_items_selected&&(this.selected_items_slugs=this.selected_items_slugs.slice(0,this.max_items_selected),this.$alertify.delay(4e3).error(this.$t("too_many_items_selected")),setTimeout((()=>{this.$alertify.delay(4e3).error(this.$t("max_items_is")+" "+this.max_items_selected)}),500))},chutier_items(){const t=this.selected_items_slugs.filter((t=>this.chutier_items.some((e=>e.$path===t))));JSON.stringify(this.selected_items_slugs)!==JSON.stringify(t)&&(this.selected_items_slugs=t)}},computed:{author_path(){return this.connected_as.$path},author_stacks_path(){return this.author_path+"/stacks"},current_lang_code(){return this.$i18n.availableLocales,this.$i18n.locale},url_to_page(){return this.$route.path,window.location.href},selected_items(){return this.selected_items_slugs.map((t=>this.chutier_items.find((e=>e.$path===t))||!1))},all_items_selected(){return this.selected_items.length===this.chutier_items.length},chutier_items(){if(!this.chutier||!this.chutier.$files)return[];let t=JSON.parse(JSON.stringify(this.chutier.$files));return t=t.filter((t=>!0!==t.is_stack&&t.$media_filename)).sort(((t,e)=>{const a=t=>new Date(t.date_created_corrected||t.$date_created||t.$date_uploaded);return+a(e)-+a(t)})),t},chutier_items_grouped(){return this.groupFilesBy(this.chutier_items,["date_created_corrected","$date_created","$date_uploaded"],"day")}},methods:{async listChutier(){this.chutier=await this.$api.getFolder({path:this.author_path}).catch((t=>{this.fetch_project_error=t.response,this.is_loading=!1}))},toggleSelect(t){this.selected_items_slugs.includes(t)?this.selected_items_slugs=this.selected_items_slugs.filter((e=>e!==t)):this.selected_items_slugs.push(t)},async createNote(){const t=+new Date,e="note-"+t+".txt",a=await this.$api.uploadText({path:this.author_path,filename:e,content:"",additional_meta:{title:"Sans titre"}});setTimeout((()=>{this.$eventHub.$emit("chutierItem.editText",a)}),100)},async createEmbed(t){const e=+new Date,a="url-"+e+".txt",i=await this.$api.uploadText({path:this.author_path,filename:a,content:t,additional_meta:{title:"Titre du lien",$type:"url"}});this.show_link_picker=!1,setTimeout((()=>{this.$eventHub.$emit("chutierItem.editText",i)}),100)},async mediaJustImported(t){},onDragover(t){t.preventDefault()},onDragEnter(t){t.preventDefault(),this.is_dragover=!0},onDragLeave(t){t.preventDefault(),this.is_dragover=!1},onDrop(t){this.is_dragover=!1,t.dataTransfer.files?.length>0&&(this.files_to_import=Array.from(t.dataTransfer.files))},selectAll(){this.selected_items_slugs=this.chutier_items.map((t=>t.$path))},deselectAll(){this.selected_items_slugs=[]},selectRange(t){this.selected_items_slugs=this.selected_items_slugs.concat(t),this.selected_items_slugs=[...new Set(this.selected_items_slugs)]},deselectRange(t){this.selected_items_slugs=this.selected_items_slugs.filter((e=>!t.includes(e)))},rangeIsSelected(t){return 0!==this.selected_items_slugs.length&&!t.find((t=>!1===this.selected_items_slugs.includes(t)))},async removeItemsInSelection(){for(const t of this.selected_items_slugs)await this.$api.deleteItem({path:t});this.show_confirm_remove_menu=!1}}},yt=bt,kt=(a(97661),(0,K.Z)(yt,F,B,!1,null,"d2efa608",null)),xt=kt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_sharedFolder"},[a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.opened_stack?a("StackDisplay",{key:t.opened_stack.$path,staticClass:"_stackModal",attrs:{stack_path:t.opened_stack.$path,context:"archive",can_be_added_to_fav:t.can_be_added_to_fav,is_favorite:t.isFavorite(t.opened_stack.$path)},on:{toggleFav:function(e){return t.toggleFav(t.opened_stack.$path)},prevMedia:function(e){return t.navMedia(-1)},nextMedia:function(e){return t.navMedia(1)},close:t.closeStack}}):t._e()],1),a("div",{staticClass:"_sharedFolder--content"},[a("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.is_loading_folder?a("div",{staticClass:"_loader"},[a("LoaderSpinner")],1):a("div",[a("FilterBar",{attrs:{group_mode:t.group_mode,sort_order:t.sort_order,search_str:t.search_str,filetype_filter:t.filetype_filter,author_path_filter:t.author_path_filter,available_keywords:t.available_keywords,keywords_filter:t.keywords_filter,fav_filter:t.fav_filter,view_mode:t.view_mode},on:{"update:group_mode":function(e){t.group_mode=e},"update:sort_order":function(e){t.sort_order=e},"update:search_str":function(e){t.search_str=e},"update:filetype_filter":function(e){t.filetype_filter=e},"update:author_path_filter":function(e){t.author_path_filter=e},"update:keywords_filter":function(e){t.keywords_filter=e},"update:fav_filter":function(e){t.fav_filter=e},"update:view_mode":function(e){t.view_mode=e}}}),a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[a("transition-group",{key:t.sort_order+"-"+t.group_mode,attrs:{tag:"div",name:"projectsList",appear:""}},[0===t.grouped_stacks.length?a("div",{key:"nocontent",staticClass:"u-instructions _noContent"},[t._v(" "+t._s(t.$t("no_content"))+" ")]):["list"===t.view_mode?t._l(t.grouped_stacks,(function(e){var i=e.label,s=e.files;return a("div",{key:i,staticClass:"_dayFileSection"},[a("div",{staticClass:"_label"},[t._v(" "+t._s(i)+" ")]),a("transition-group",{staticClass:"_itemGrid",attrs:{tag:"div",name:"listComplete",appear:""}},t._l(s,(function(e){return a("StackPreview",{key:e.$path,attrs:{stack:e,is_selected:e.$path===t.last_selected_stack_path,can_be_added_to_fav:t.can_be_added_to_fav,is_favorite:t.isFavorite(e.$path)},on:{toggleFav:function(a){return t.toggleFav(e.$path)},openStack:t.openStack}})})),1)],1)})):"map"===t.view_mode?a("div",{key:"mediaMap",staticClass:"_mediamapContainer"},[a("MediaMap",{attrs:{medias:t.filtered_stacks},on:{toggleMediaFocus:t.toggleMediaFocus}})],1):t._e()]],2)],1)],1)]),a("footer",{staticClass:"_footer"},[a("small",[a("a",{attrs:{href:"mailto:"+t.$root.app_infos.instance_meta.contactmail,target:"_blank"}},[t._v(" "+t._s(t.$t("help_contact"))+" ")]),a("br"),t._v(" "+t._s(t.$t("version"))+" "+t._s(t.$root.app_infos.version)+" "),t.is_instance_admin?a("button",{staticClass:"u-buttonLink _adminBtn",attrs:{type:"button"},on:{click:function(e){t.show_admin_settings=!0}}},[t._v(" "+t._s(t.$t("admin_settings"))+" ")]):t._e(),t.show_admin_settings?a("AdminLumaSettings",{on:{close:function(e){t.show_admin_settings=!1}}}):t._e()],1)])],1)],1)},Ct=[],St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_filterBar"},[a("div",{staticClass:"_topBtn"},[a("div",{},[a("button",{staticClass:"u-buttonLink",class:{"is--active":t.show_filter_sort_pane},attrs:{type:"button"},on:{click:function(e){t.show_filter_sort_pane=!t.show_filter_sort_pane}}},[a("b-icon",{attrs:{icon:"filter"}}),t._v(" "+t._s(t.$t("filters"))+" ")],1)]),a("div",{staticClass:"_searchField"},[a("SearchInput2",{attrs:{value:t.search_str,search_placeholder:t.$t("search_fields")},on:{input:function(e){return t.$emit("update:search_str",e)}}})],1),a("div",{staticClass:"u-sameRow"},[a("div",[a("button",{staticClass:"u-button u-button_icon u-button_transparent",class:{"is--active":!0===t.fav_filter},attrs:{type:"button"},on:{click:function(e){return t.$emit("update:fav_filter",!t.fav_filter)}}},[a("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M7.38174 1.75501C7.59507 1.19234 8.40241 1.19234 8.61641 1.75501L9.99641 5.57767C10.0931 5.83101 10.3391 5.99967 10.6137 5.99967H14.0051C14.6317 5.99967 14.9051 6.77967 14.4124 7.16167L11.9991 9.33301C11.891 9.41611 11.812 9.53132 11.7734 9.66211C11.7348 9.7929 11.7387 9.93255 11.7844 10.061L12.6657 13.7963C12.8804 14.3963 12.1857 14.9117 11.6604 14.5423L8.38241 12.4623C8.27015 12.3834 8.13628 12.3411 7.99907 12.3411C7.86187 12.3411 7.728 12.3834 7.61574 12.4623L4.33774 14.5423C3.81307 14.9117 3.11774 14.3957 3.33241 13.7963L4.21374 10.061C4.25946 9.93255 4.26331 9.7929 4.22475 9.66211C4.18618 9.53132 4.10718 9.41611 3.99907 9.33301L1.58574 7.16167C1.09241 6.77967 1.36707 5.99967 1.99241 5.99967H5.38374C5.51727 6.00012 5.64778 5.96001 5.75802 5.88466C5.86825 5.8093 5.95301 5.70225 6.00107 5.57767L7.38107 1.75501H7.38174Z","stroke-linecap":"round","stroke-linejoin":"round"}})])])]),a("button",{staticClass:"u-button u-button_icon",class:{"is--active":"list"===t.view_mode},attrs:{type:"button"},on:{click:function(e){return t.$emit("update:view_mode","list")}}},[a("b-icon",{attrs:{icon:"grid3x3"}})],1),a("button",{staticClass:"u-button u-button_icon",class:{"is--active":"map"===t.view_mode},attrs:{type:"button"},on:{click:function(e){return t.$emit("update:view_mode","map")}}},[a("b-icon",{attrs:{icon:"map-fill"}})],1)])]),a("transition",{attrs:{name:"pagechange"}},[t.show_filter_sort_pane?a("div",{staticClass:"_filterPane"},[a("div",{staticClass:"_filterPane--row"},[a("select",{staticClass:"_selectField",domProps:{value:t.sort_order},on:{change:function(e){return t.$emit("update:sort_order",e.target.value)}}},[a("option",{attrs:{value:"date_modified"},domProps:{textContent:t._s(t.$t("date_modified"))}}),a("option",{attrs:{value:"date_created"},domProps:{textContent:t._s(t.$t("date_created"))}})]),a("select",{staticClass:"_selectField",domProps:{value:t.group_mode},on:{change:function(e){return t.$emit("update:group_mode",e.target.value)}}},t._l(t.group_options,(function(e){return a("option",{key:e.key,domProps:{value:e.key,textContent:t._s(e.label)}})})),0),a("select",{staticClass:"_selectField",domProps:{value:t.author_path_filter},on:{change:function(e){return t.$emit("update:author_path_filter",e.target.value)}}},[a("option",{attrs:{value:""},domProps:{textContent:t._s(t.$t("none"))}}),t._l(t.all_authors,(function(e){return a("option",{key:e.$path,domProps:{value:e.$path,textContent:t._s(e.name)}})}))],2),a("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.can_be_reset?a("button",{staticClass:"u-buttonLink _resetFilters",attrs:{type:"button"},on:{click:t.resetFilters}},[t._v(" "+t._s(t.$t("reset"))+" ")]):t._e()])],1),a("div",{staticClass:"_filterPane--row"},[a("div",{staticClass:"_tag"},[a("DLabel",{attrs:{str:t.$t("filter_by_keyword")}}),a("div",{staticClass:"_searchKW"},[a("SearchInput2",{attrs:{search_placeholder:t.$t("search")},model:{value:t.kw_search,callback:function(e){t.kw_search=e},expression:"kw_search"}})],1),t.keywords_filter.length>0?a("div",{staticClass:"u-keywords _usedKw"},t._l(t.keywords_filter,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:!0},on:{remove:function(a){return t.filterByKeyword(e)}}})})),1):t._e(),a("div",{staticClass:"u-keywords"},[t._l(t.collapsable_keywords,(function(e){return a("SingleKeyword",{key:e.title,attrs:{keyword:e.title,count:e.count,can_add:!0},on:{add:function(a){return t.filterByKeyword(e.title)}}})})),t.available_keywords_except_active.length>10?a("button",{staticClass:"u-buttonLink",class:{"is--active":t.show_all_keywords},attrs:{type:"button"},on:{click:function(e){t.show_all_keywords=!t.show_all_keywords}}},[t._v(" "+t._s(t.$t("show_all_keywords"))+" ")]):t._e()],2)],1)])]):t._e()])],1)},zt=[],Mt=a(95009),Pt=a(84565),Ft={props:{shared_files:Array,group_mode:String,sort_order:String,search_str:String,filetype_filter:String,author_path_filter:String,available_keywords:Array,keywords_filter:Array,fav_filter:Boolean,view_mode:String},components:{SingleKeyword:Mt.Z,SearchInput2:Pt.Z},data(){return{show_filter_sort_pane:!1,all_authors:[],show_all_keywords:!1,kw_search:"",group_options:[{key:"day",label:this.$t("day")},{key:"month",label:this.$t("month")},{key:"year",label:this.$t("year")}],type_of_media_to_display:"all",types_of_medias:[{key:"all",label:this.$t("all_medias_types")},{key:"image",label:this.$t("image")},{key:"video",label:this.$t("video")},{key:"audio",label:this.$t("audio")},{key:"text",label:this.$t("text")},{key:"pdf",label:this.$t("pdf")},{key:"stl",label:this.$t("stl")},{key:"other",label:this.$t("other")}]}},i18n:{messages:{fr:{search_fields:"Rechercher dans les champs titre et description des documents."},en:{search_fields:"Search in titles or descriptions of documents."}}},async created(){this.all_authors=await this.$api.getFolders({path:"authors"})},async mounted(){},beforeDestroy(){},watch:{},computed:{available_keywords_except_active(){let t=this.available_keywords.filter((t=>!this.keywords_filter.includes(t.title)&&(!this.kw_search||this.twoStringsSearch(t.title,this.kw_search))));return t},collapsable_keywords(){return this.show_all_keywords?this.available_keywords_except_active:this.available_keywords_except_active.slice(0,10)},can_be_reset(){return"year"!==this.group_mode||"date_modified"!==this.sort_order||""!==this.search_str||""!==this.author_path_filter||"all"!==this.filetype_filter||this.keywords_filter.length>0}},methods:{resetFilters(){this.$emit("update:group_mode","year"),this.$emit("update:sort_order","date_modified"),this.$emit("update:search_str",""),this.$emit("update:author_path_filter",""),this.$emit("update:filetype_filter","all"),this.$emit("update:keywords_filter",[])},filterByKeyword(t){let e=this.keywords_filter.slice();this.keywords_filter.includes(t)?e=e.filter((e=>e!==t)):e.push(t),this.$emit("update:keywords_filter",e)}}},Bt=Ft,Lt=(a(59185),(0,K.Z)(Bt,St,zt,!1,null,"75339660",null)),Tt=Lt.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_stackPreview",on:{mouseenter:t.startSlide,mousemove:t.updateMousePos,mouseleave:t.endSlide}},[a("button",{staticClass:"_stackPreview--content",class:{"is--slider":t.start_slide,"is--selected":t.is_selected},attrs:{type:"button"},on:{click:t.openStack}},[a("div",{staticClass:"_preview"},[a("div",{key:"preview",staticClass:"_mainPreview",class:{"is--showingSlides":t.slide_file_to_show}},[t.stack.$preview?a("MediaContent",{staticClass:"_mediaPreview",attrs:{file:t.stack.$preview}}):a("b-icon",{attrs:{icon:"eye-slash"}})],1),t._l(t.stack_files,(function(e){return a("div",{key:e.$path,staticClass:"_slide",class:{"is--shown":e.$path===t.slide_file_to_show.$path}},[a("MediaContent",{staticClass:"_mediaPreview",attrs:{file:e}})],1)})),a("transition-group",{staticClass:"_count",attrs:{name:"projectsList"}},[void 0!==t.index_of_slide_file_to_show?[a("div",{key:"slide"},[t._v(" "+t._s(t.index_of_slide_file_to_show+1)+" ")]),a("div",{key:"slash"},[t._v("/")])]:t._e(),a("div",{key:"preview"},[t._v(" "+t._s(t.number_of_medias_in_stack)+" ")])],2)],2),a("div",{staticClass:"_title"},[t._v(" "+t._s(t.stack.title)+" ")])]),a("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.can_be_added_to_fav&&(t.is_favorite||t.start_slide)?a("div",[a("button",{staticClass:"u-button u-button_icon u-button_transparent _addToFav",attrs:{type:"button","data-isfav":t.is_favorite},on:{click:function(e){return e.stopPropagation(),t.$emit("toggleFav")}}},[a("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M7.38174 1.75501C7.59507 1.19234 8.40241 1.19234 8.61641 1.75501L9.99641 5.57767C10.0931 5.83101 10.3391 5.99967 10.6137 5.99967H14.0051C14.6317 5.99967 14.9051 6.77967 14.4124 7.16167L11.9991 9.33301C11.891 9.41611 11.812 9.53132 11.7734 9.66211C11.7348 9.7929 11.7387 9.93255 11.7844 10.061L12.6657 13.7963C12.8804 14.3963 12.1857 14.9117 11.6604 14.5423L8.38241 12.4623C8.27015 12.3834 8.13628 12.3411 7.99907 12.3411C7.86187 12.3411 7.728 12.3834 7.61574 12.4623L4.33774 14.5423C3.81307 14.9117 3.11774 14.3957 3.33241 13.7963L4.21374 10.061C4.25946 9.93255 4.26331 9.7929 4.22475 9.66211C4.18618 9.53132 4.10718 9.41611 3.99907 9.33301L1.58574 7.16167C1.09241 6.77967 1.36707 5.99967 1.99241 5.99967H5.38374C5.51727 6.00012 5.64778 5.96001 5.75802 5.88466C5.86825 5.8093 5.95301 5.70225 6.00107 5.57767L7.38107 1.75501H7.38174Z","stroke-linecap":"round","stroke-linejoin":"round"}})])])]):t._e()])],1)},Et=[],Zt={props:{stack:Object,is_selected:Boolean,is_favorite:Boolean,can_be_added_to_fav:Boolean},components:{},data(){return{start_slide:!1,stack_files:void 0,index_of_slide_file_to_show:void 0}},i18n:{messages:{fr:{}}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{number_of_medias_in_stack(){return this.stack.stack_files_metas?.length||0},slide_file_to_show(){return!(!this.stack_files||void 0===this.index_of_slide_file_to_show)&&this.stack_files[this.index_of_slide_file_to_show]}},methods:{openStack(){const t=this.getFilename(this.stack.$path);this.$emit("openStack",t)},async startSlide(t){this.start_slide=!0,setTimeout((async()=>{if(this.start_slide){const e=await this.loadFiles();this.stack_files=e,this.updateMousePos(t)}}),200)},updateMousePos(t){if(!this.stack_files)return;const{pageX:e}=t,{x:a,width:i}=this.$el.getBoundingClientRect(),s=(e-a)/i;this.index_of_slide_file_to_show=Math.floor(s*this.number_of_medias_in_stack)},endSlide(){this.start_slide=!1,this.stack_files=void 0,this.index_of_slide_file_to_show=void 0},async loadFiles(){const t=await this.$api.getFolder({path:this.stack.$path});return this.getStackFilesInOrder({stack:t})}}},jt=Zt,It=(a(56333),(0,K.Z)(jt,Dt,Et,!1,null,"04fe73aa",null)),Rt=It.exports,Ot={props:{shared_folder_path:String},components:{FilterBar:Tt,StackPreview:Rt,AdminLumaSettings:gt["default"],StackDisplay:at,MediaMap:()=>a.e(87).then(a.bind(a,60087))},data(){return{all_stacks:[],is_loading_folder:!0,show_admin_settings:!1,last_selected_stack_path:void 0,view_mode:"list",sort_order:localStorage.getItem("archive.sort_order")||"date_modified",search_str:"",filetype_filter:"all",author_path_filter:"",keywords_filter:[],group_mode:"year",fav_filter:!1}},i18n:{messages:{fr:{only_my_fav:"Que les favoris"},en:{only_my_fav:"Favourites"}}},async created(){},async mounted(){this.all_stacks=await this.$api.getFolders({path:this.stack_shared_folder_path}),this.$api.join({room:this.stack_shared_folder_path}),this.is_loading_folder=!1},beforeDestroy(){this.$api.leave({room:this.stack_shared_folder_path})},watch:{opened_stack(){this.opened_stack&&(this.last_selected_stack_path=this.opened_stack.$path)},sort_order(){localStorage.setItem("archive.sort_order",this.sort_order)}},computed:{stack_shared_folder_path(){return this.shared_folder_path+"/stacks"},can_be_added_to_fav(){return this.connected_as&&void 0!==this.connected_as?.$path},sorted_stacks(){return this.all_stacks.slice().sort(((t,e)=>+new Date(e.$date_modified)-+new Date(t.$date_modified)))},filtered_stacks(){return this.sorted_stacks.filter((t=>{if(this.fav_filter&&!this.isFavorite(t.$path))return!1;if(this.author_path_filter&&!t.$authors?.includes(this.author_path_filter))return!1;if(this.keywords_filter.length>0){if(!t.keywords||!Array.isArray(t.keywords))return!1;if(this.keywords_filter.some((e=>!t.keywords.includes(e))))return!1}return!this.search_str||!!(t.title&&t.title.toLowerCase().includes(this.search_str.toLowerCase())||t.description&&t.description.toLowerCase().includes(this.search_str.toLowerCase()))}))},grouped_stacks(){let t=["$date_modified"];return"date_created"===this.sort_order?t=["date_created_corrected","$date_created","$date_uploaded"]:"date_modified"===this.sort_order&&(t=["$date_modified"]),this.groupFilesBy(this.filtered_stacks,t,this.group_mode)},available_keywords(){const t=this.filtered_stacks.reduce(((t,e)=>(e.keywords&&Array.isArray(e.keywords)&&e.keywords.map((e=>{const a=t.find((t=>t.title===e));a?a.count+=1:t.push({title:e,count:1})})),t)),[]);return t.sort(((t,e)=>e.count-t.count))},opened_stack(){return!!this.$route.query?.stack&&this.all_stacks.find((t=>this.getFilename(t.$path)===this.$route.query.stack))}},methods:{toggleMediaFocus(t){const e=this.getFilename(t);this.openStack(e)},openStack(t){let e=Object.assign({},this.$route.query)||{};e.stack=t,this.$router.push({query:e})},isFavorite(t){return!(!this.connected_as?.favorites||0===this.connected_as.favorites.length)&&this.connected_as.favorites.some((e=>e.stack_path===t))},async toggleFav(t){let e=this.connected_as?.favorites?this.connected_as.favorites.slice():[];this.isFavorite(t)?e=e.filter((e=>e.stack_path!==t)):e.push({stack_path:t,added:+new Date}),await this.$api.updateMeta({path:this.connected_as.$path,new_meta:{favorites:e}})},closeStack(){let t=Object.assign({},this.$route.query)||{};delete t.stack,this.$router.push({query:t})}}},qt=Ot,Ht=(a(96831),(0,K.Z)(qt,$t,Ct,!1,null,"462eaafa",null)),Nt=Ht.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_collections"},[a("CollectionsList",{on:{open:t.OpenedCollection}}),t.opened_collection_slug?a("OpenedCollection",{attrs:{opened_collection_slug:t.opened_collection_slug},on:{close:t.OpenedCollection}}):t._e()],1)},Vt=[],Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_collectionsList"},[a("div",{staticClass:"u-spacingBottom"}),a("div",{staticClass:"u-spacingBottom u-instructions"},[t._v(" "+t._s(t.$t("collection_instr"))+" ")]),a("div",{staticClass:"u-spacingBottom"},[a("button",{staticClass:"u-button",attrs:{type:"button"},on:{click:function(e){t.show_create_collection=!0}}},[a("b-icon",{attrs:{icon:"plus-circle"}}),t._v("  "+t._s(t.$t("create_a_collection"))+" ")],1),t.show_create_collection?a("CreateCollection",{attrs:{modal_name:t.$t("create_a_collection"),path:"collections",default_folder_status:"private"},on:{close:function(e){t.show_create_collection=!1},openNew:t.openNewCollection}}):t._e()],1),a("div",{staticClass:"u-spacingBottom"},[a("SearchInput2",{attrs:{search_placeholder:t.$t("search_in_titles")},model:{value:t.search_coll_name,callback:function(e){t.search_coll_name=e},expression:"search_coll_name"}})],1),a("table",{staticClass:"u-spacingBottom _list"},[a("transition-group",{attrs:{tag:"tbody",name:"projectsList",appear:""}},t._l(t.filtered_collections,(function(e){return a("tr",{key:e.$path,on:{click:function(a){t.$emit("open",t.getFilename(e.$path))}}},[a("td",[a("strong",[t._v(t._s(e.title))]),t._v(" – "),a("i",[t._v(t._s(t.$t(e.template||"story_with_sections").toLowerCase()))])]),a("td",[a("div",{staticClass:"u-sameRow"},t._l(e.$admins,(function(t){return a("AuthorTag",{key:t,attrs:{path:t,show_image_only:!0}})})),1)])])})),0)],1)])},Ut=[],Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.modal_name},on:{close:function(e){return t.$emit("close")}}},[a("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createFolder.apply(null,arguments)}}},[a("DLabel",{attrs:{str:t.$t("title")}}),a("TextInput",{ref:"titleInput",attrs:{content:t.new_folder_title,maxlength:40,required:!0,autofocus:!0},on:{"update:content":function(e){t.new_folder_title=e},toggleValidity:function(e){return t.allow_save=e},onEnter:t.createFolder}}),a("br"),a("div",{},[a("ToggleInput",{attrs:{content:t.new_folder_is_private,label:t.$t("private"),options:{true:t.$t("private_status_explanations"),false:t.$t("public_status_explanations")}},on:{"update:content":function(e){t.new_folder_is_private=e}}})],1),a("br"),a("div",{},[a("DLabel",{attrs:{str:t.$t("template")}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.new_folder_template,expression:"new_folder_template"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.new_folder_template=e.target.multiple?a:a[0]}}},t._l(t.available_templates,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0)],1),a("br"),a("div",{staticClass:"u-sameRow",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",type:"submit",loading:t.is_creating_folder},slot:"footer"},[t._v(" "+t._s(t.$t("create_and_open"))+" ")])]),t.error_msg?[a("br"),a("br"),a("div",{staticClass:"u-errorMsg",domProps:{textContent:t._s(t.error_msg)}})]:t._e()],2)])},Jt=[],Xt={props:{modal_name:String,path:String,default_folder_status:{type:String,default:"public"}},components:{},data(){return{new_folder_title:"",new_folder_is_private:!1,new_folder_template:"story_with_sections",available_templates:[{value:"story_with_sections",label:this.$t("story_with_sections")},{value:"agora",label:this.$t("agora")}],is_creating_folder:!1,allow_save:!1,error_msg:""}},created(){},mounted(){},i18n:{messages:{fr:{agora:"Agora"},en:{agora:"Agora"}}},beforeDestroy(){},watch:{},computed:{},methods:{async createFolder(){this.is_creating_folder=!0;const t=this.setDefaultContentAdmins();this.new_folder_title=this.cleanUpString(this.new_folder_title);let e={title:this.new_folder_title,template:this.new_folder_template,requested_slug:this.new_folder_title,$status:!0===this.new_folder_is_private?"private":this.default_folder_status,$admins:t};"agora"===this.new_folder_template&&(e.autoscroll=!0);try{const t=await this.$api.createFolder({path:this.path,additional_meta:e});setTimeout((()=>{this.$emit("openNew",t)}),50)}catch({code:a}){"unique_field_taken"===a?(this.$alertify.delay(4e3).error(this.$t("title_taken")),this.$refs.titleInput.$el.querySelector("input").select()):"token_not_allowed_must_be_contributors"===a?this.$alertify.delay(4e3).error(this.$t("action_not_allowed")):this.$alertify.delay(4e3).error(a),this.is_creating_folder=!1}}}},Yt=Xt,Qt=(0,K.Z)(Yt,Wt,Jt,!1,null,"1aeb6474",null),Gt=Qt.exports,te={props:{},components:{SearchInput2:Pt.Z,CreateCollection:Gt},data(){return{show_create_collection:!1,collections:[],path:"collections",search_coll_name:""}},i18n:{messages:{fr:{collections:"Collections",create_a_collection:"Créer une collection",search_in_titles:"Rechercher dans les titres",collection_instr:"Les collections regroupent des médias dans l’espace partagé pour les partager."},en:{collections:"Collections",create_a_collection:"Create a collection",search_in_titles:"Search in titles",collection_instr:"Collections group multiple medias"}}},async created(){this.collections=await this.$api.getFolders({path:this.path}),this.$api.join({room:this.path})},mounted(){},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{can_edit(){return this.canLoggedinEditFolder({folder:this.stack})},sorted_collections(){return this.collections.slice().filter((t=>this.canLoggedinSeeFolder({folder:t}))).sort(((t,e)=>t.title.localeCompare(e.title)))},filtered_collections(){return this.sorted_collections.filter((t=>!this.search_coll_name||this.twoStringsSearch(t.title,this.search_coll_name)))}},methods:{openNewCollection(t){this.show_create_collection=!1,this.$emit("open",t)}}},ee=te,ae=(a(90626),(0,K.Z)(ee,Kt,Ut,!1,null,"78062041",null)),ie=ae.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_openedCollection"},[a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.is_loading?a("div",{key:"loader"},[a("div",{staticClass:"_spinner"},[a("LoaderSpinner")],1)]):t.fetch_coll_error_message?a("div",{key:"err",staticClass:"_error"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" "+t._s(t.$t("back"))+" ")],1),a("div",{},[t._v(" "+t._s(t.fetch_coll_error_message)+" ")])]):a("div",{key:t.collection.$path},[a("div",{staticClass:"_titleBar"},[a("TitleField",{attrs:{field_name:"title",content:t.collection.title,path:t.collection.$path,tag:"h1",required:!0,can_edit:t.can_edit}})],1),a("div",{staticClass:"_topbar"},[a("div",{},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" "+t._s(t.$t("back"))+" ")],1)]),a("AuthorField",{staticClass:"_admins",attrs:{label:t.$t("admins"),instructions:t.$t("media_editing_instructions"),field:"$admins",authors_paths:t.collection.$admins,path:t.collection.$path,can_edit:t.can_edit,show_image_only:!0}}),t.can_edit?a("StatusTag",{attrs:{status:t.collection.$status||"public",status_options:["public","private"],path:t.collection.$path,can_edit:t.can_edit}}):t._e(),t.can_edit?a("DropDown",[t.can_edit?a("RemoveMenu",{attrs:{remove_text:t.$t("remove")},on:{remove:t.removeCollection}}):t._e(),a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_qr_code_modal=!0}}},[a("div",{staticClass:"icon",attrs:{part:"base","aria-hidden":"true"}},[a("svg",{staticClass:"bi bi-qr-code",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M2 2h2v2H2V2Z"}}),a("path",{attrs:{d:"M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"}}),a("path",{attrs:{d:"M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"}}),a("path",{attrs:{d:"M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z"}}),a("path",{attrs:{d:"M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"}})])]),t._v(" "+t._s(t.$t("direct_link"))+" ")])],1):t._e(),t.show_qr_code_modal?a("QRModal",{attrs:{url_to_access:t.share_url},on:{close:function(e){t.show_qr_code_modal=!1}}},[a("ToggleField",{attrs:{label:t.$t("make_public"),field_name:"$public",content:!0===t.collection.$public,path:t.collection.$path,can_edit:t.can_edit}})],1):t._e()],1),a("div",{staticClass:"_cont"},[t.collection.template&&"story_with_sections"!==t.collection.template?"agora"===t.collection.template?a("AgoraTemplate",{attrs:{publication:t.collection,can_edit:t.can_edit}}):t._e():a("StorySectionTemplate",{attrs:{publication:t.collection,opened_section_meta_filename:t.opened_section_meta_filename,can_edit:t.can_edit},on:{toggleSection:t.toggleSection}})],1)])])],1)},oe=[],ne={props:{opened_collection_slug:String},components:{StorySectionTemplate:()=>a.e(197).then(a.bind(a,35197)),AgoraTemplate:()=>a.e(988).then(a.bind(a,11988))},data(){return{is_loading:!0,collection:void 0,path:"collections/"+this.opened_collection_slug,opened_section_meta_filename:"",fetch_coll_error_message:"",show_qr_code_modal:!1}},i18n:{messages:{fr:{make_public:"Accès public (sans mot de passe ou compte)"},en:{make_public:"Allow access to everyone (without password or account)"}}},async created(){const t=await this.$api.getFolder({path:this.path}).catch((t=>{"folder_private"===t.code?this.fetch_coll_error_message=this.$t("coll_is_private"):this.fetch_coll_error_message=t.code,this.is_loading=!1}));this.collection=t,this.is_loading=!1,this.$api.join({room:this.path}),this.$eventHub.$on("collection.addStack",this.addToStack)},mounted(){},beforeDestroy(){this.$api.leave({room:this.path}),this.$eventHub.$off("collection.addStack",this.addToStack)},watch:{},computed:{can_edit(){return this.canLoggedinEditFolder({folder:this.collection})},share_url(){let t={};"story_with_sections"===this.collection.template&&(t={display:"section"}),"agora"===this.collection.template&&!0===this.collection.autoscroll&&(t={scroll:"auto"});const e=this.$router.resolve({path:this.createURLFromPath(this.collection.$path),query:t});return window.location.origin+e.href}},methods:{addToStack(){},toggleSection(t){this.opened_section_meta_filename=t},async updateOpenedCollection(){},async removeCollection(){await this.$api.deleteItem({path:this.collection.$path}),this.$emit("close")}}},re=ne,le=(a(29797),(0,K.Z)(re,se,oe,!1,null,"b1cb8e0a",null)),ce=le.exports,de={props:{},components:{CollectionsList:ie,OpenedCollection:ce},data(){return{}},i18n:{messages:{fr:{}}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{opened_collection_slug(){if(this.$route.query?.collection)return this.$route.query.collection}},methods:{OpenedCollection(t){let e=Object.assign({},this.$route.query)||{};t?e.collection=t:delete e.collection,this.$router.push({query:e})}}},_e=de,ue=(a(30732),(0,K.Z)(_e,At,Vt,!1,null,"9c743c2a",null)),he=ue.exports,pe={props:{},components:{Splitpanes:k,Pane:P,MyChutier:xt,SharedFolder2:Nt,CollectionsPane:he},data(){return{path:"folders",folders:void 0,shared_folder_path:void 0,possible_panes:[{key:"chutier",label:"CHUTIER",icon:"layout-sidebar-inset"},{key:"archive",label:"ARCHIVE",icon:"grid3x3-gap"},{key:"collection",label:"COLLECTION",icon:"layout-sidebar-inset-reverse"}],top_panes_width:{chutier:33,archive:33,collection:33},panes_width:{chutier:33,archive:33,collection:33},show_chutier:!0}},async created(){const t=this.loadPanesWidthFromStorage();if(t)this.panes_width=t;else if(this.$root.is_mobile_view)this.panes_width.chutier=100,this.panes_width.archive=0,this.panes_width.collection=0;else{const t=Math.min(400/this.$root.window.innerWidth*100,50);this.panes_width.chutier=t,this.panes_width.archive=100-t,this.panes_width.collection=0}await this.loadFolder()},async mounted(){},beforeDestroy(){},watch:{connected_as(){},show_chutier(){},panes_width:{handler(){Object.entries(this.panes_width).map((([t,e])=>this.top_panes_width[t]=e)),this.savePanesWidthToStorage()},deep:!0}},computed:{min_toppane_width(){return 0}},methods:{async loadFolder(){await this.$api.getFolders({path:"authors"}),this.folders=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_spaces_error=t.response})),0===this.folders.length?(await this.createFolder(),window.location.reload()):this.shared_folder_path=this.folders[0].$path},async createFolder(){try{const t=await this.$api.createFolder({path:this.path,additional_meta:{title:"default",$admins:"everyone"}});return t}catch(t){}},resizeTopPane(t){t.map(((t,e)=>{const a=Number(t.size.toFixed(1));0===e&&(this.top_panes_width.chutier=a),1===e&&(this.top_panes_width.archive=a),2===e&&(this.top_panes_width.collection=a)}))},resizedPane(t){t.map(((t,e)=>{const a=Number(t.size.toFixed(1));0===e&&(this.panes_width.chutier=a),1===e&&(this.panes_width.archive=a),2===e&&(this.panes_width.collection=a)}))},setTopbarWidth(t){const e=this.top_panes_width[t];return`\n        --topPane-width: ${e}%;\n      `},togglePane(t){this.panes_width[t]>0?this.panes_width[t]=0:this.panes_width[t]=25,this.distributePanes()},distributePanes(){const t=Object.values(this.panes_width).filter((t=>t>0)).length;if(0===t)Object.keys(this.panes_width).map((t=>this.panes_width[t]=100/Object.keys(this.panes_width).length));else{const e=100/t;Object.entries(this.panes_width).map((([t,a])=>a>0?this.panes_width[t]=e:""))}},savePanesWidthToStorage(){localStorage.setItem("panes_width",JSON.stringify(this.panes_width))},loadPanesWidthFromStorage(){try{const t=localStorage.getItem("panes_width");if(t){const e=JSON.parse(t);return e.format&&delete e.format,e}}catch(t){}return!1}}},fe=pe,me=(a(24066),(0,K.Z)(fe,i,s,!1,null,"c773598a",null)),ve=me.exports},25440:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._linkPicker[data-v-0e7fe28d]{width:100%;margin:0 auto}._addMediaBtn[data-v-0e7fe28d]{text-align:center;padding:calc(var(--spacing)*1)}._selectBtn[data-v-0e7fe28d]{display:flex;place-items:center;justify-content:center;width:100%;gap:calc(var(--spacing)/1);background:#fff}iframe[data-v-0e7fe28d]{width:100%;aspect-ratio:4/3}._examples[data-v-0e7fe28d]{display:inline-flex;flex-flow:row wrap;gap:calc(var(--spacing)/2)}",""]),e["default"]=r},38720:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._kwSimulation[data-v-3886d9c1]{display:flex}",""]),e["default"]=r},66635:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._categoryRow[data-v-72d46d30]{display:flex;justify-content:space-between;align-content:center;padding:calc(var(--spacing)/8) 0}._title[data-v-72d46d30]{padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;background:var(--cat-color,#fff);color:#000}",""]),e["default"]=r},69538:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._keywordsFieldEditor[data-v-bf8392da]{margin-top:calc(var(--spacing)/4)}._suggestions[data-v-bf8392da]{margin-top:calc(var(--spacing)/2);padding-top:calc(var(--spacing)/2)}._suggestions ._keyword[data-v-bf8392da]{cursor:pointer}._catSug[data-v-bf8392da]{padding:calc(var(--spacing)/2) 0}._categories[data-v-bf8392da]{display:flex;flex-flow:row wrap;padding:0;gap:calc(var(--spacing)/4)}._category[data-v-bf8392da]{padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;font-weight:600;background:var(--cat-color)}",""]),e["default"]=r},94897:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._myChutier[data-v-d2efa608]{--sd-separator:var(--h-700);--sd-textcolor:#fff;--sd-bg:var(--h-900);overflow:hidden;color:var(--h-600);display:flex;flex-flow:row nowrap}._itemsList[data-v-d2efa608],._myChutier[data-v-d2efa608]{position:relative;top:0;height:100%}._itemsList[data-v-d2efa608]{flex:1 1 auto;overflow:auto;min-width:200px;padding-bottom:80px}._itemsList[data-v-d2efa608]::-webkit-scrollbar{height:12px;width:12px;background-color:transparent}._itemsList[data-v-d2efa608]::-webkit-scrollbar-thumb,._itemsList[data-v-d2efa608]::-webkit-scrollbar-track{border:5px solid hsla(0,0%,100%,0);border-radius:20px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._itemsList[data-v-d2efa608]::-webkit-scrollbar-track{background-color:transparent}._itemsList[data-v-d2efa608]::-webkit-scrollbar-thumb{background-color:#fff}._itemsList[data-v-d2efa608]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:5px solid hsla(0,0%,100%,0)}._documentsCreator[data-v-d2efa608]{flex:0 0 auto}._adminBtn[data-v-d2efa608]{margin-bottom:calc(var(--spacing)/-4);pointer-events:auto}._topContent[data-v-d2efa608]{flex-flow:row wrap;top:0;padding:calc(var(--spacing)/2)}._topContent[data-v-d2efa608],._topRow[data-v-d2efa608]{display:flex;gap:calc(var(--spacing)/2);align-items:center}._topRow[data-v-d2efa608]{justify-content:space-between;margin:calc(var(--spacing)/1) calc(var(--spacing)/1);color:var(--h-500)}._topRow ._separator[data-v-d2efa608]{flex:1 1 auto}._middleContent[data-v-d2efa608]{margin:calc(var(--spacing)/1)}._items[data-v-d2efa608]{flex:1 1 auto;margin:calc(var(--spacing)*1) calc(var(--spacing)/1)}._item[data-v-d2efa608]{margin:calc(var(--spacing)*1) 0}._item--label[data-v-d2efa608]{display:inline-block;cursor:pointer;font-weight:500;margin-bottom:4px;color:var(--h-400);transition:all .25s ease-out}._item--label[data-v-d2efa608]:focus-visible,._item--label[data-v-d2efa608]:hover{color:var(--h-200)}._item--label.is--fullySelected[data-v-d2efa608]{color:var(--active-color)}._removeMenu[data-v-d2efa608],._selectionBar[data-v-d2efa608]{position:absolute;z-index:10;bottom:0;left:0;width:100%;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;gap:calc(var(--spacing)/2);background:var(--c-noir);padding:calc(var(--spacing)/2)}._removeMenu[data-v-d2efa608]{position:absolute;padding-top:calc(var(--spacing)*2);min-height:130px}._selectionBar--previews[data-v-d2efa608]{width:100%;display:flex;flex-flow:row nowrap;justify-content:center;padding:calc(var(--spacing)/2);gap:calc(var(--spacing)/4)}._selectionBar--previews[data-v-d2efa608]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._selectionBar--previews--preview[data-v-d2efa608]{flex:0 1 20px;aspect-ratio:1/1;overflow:hidden}._dbleBtns[data-v-d2efa608]{gap:calc(var(--spacing)/10);display:flex;flex-flow:row wrap;align-content:stretch;align-items:stretch;width:100%}._dbleBtns>*[data-v-d2efa608]{flex:1 1 120px;gap:calc(var(--spacing)/4);display:flex;flex-flow:column nowrap}._uploadFilesList[data-v-d2efa608]{position:absolute;bottom:0;left:0;right:0;background:var(--chutier-bg);z-index:1}._uploadFilesList[data-v-d2efa608]  ._uploadFile{background:#000!important}._authorBtn[data-v-d2efa608]{text-transform:none}._importButton[data-v-d2efa608]{margin:calc(var(--spacing)/1) calc(var(--spacing)/1);--dropzone-color1:transparent;--dropzone-color2:var(--r-600);color:var(--active-color)}._importBtns[data-v-d2efa608]{display:flex;flex-flow:row wrap;justify-content:center;align-items:center;gap:calc(var(--spacing)/1);margin:calc(var(--spacing)/1) 0;transition:all .15 cubic-bezier(.19,1,.22,1)}._importBtns.is--dragover[data-v-d2efa608]{border:2px dashed #fff;background-color:var(--c-rouge)}._importBtns .u-button[data-v-d2efa608]{flex:1 1 0;border-radius:5px;padding:calc(var(--spacing)/2);align-items:center}._importBtns .u-button svg[data-v-d2efa608]{width:1rem;height:1rem}",""]),e["default"]=r},87862:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._singleKeyword[data-v-f2ad472e]{position:relative;padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;line-height:1.2;display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/1);background-color:var(--cat-color,#fff);color:#000;transition:all .1s cubic-bezier(.19,1,.22,1)}._singleKeyword.is--clickable[data-v-f2ad472e]:hover{opacity:.7}._category[data-v-f2ad472e]{font-size:80%}._name[data-v-f2ad472e]{font-size:110%}._addBtn[data-v-f2ad472e]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;background:transparent}._count[data-v-f2ad472e]{border:1px solid currentColor;border-radius:10px;min-width:14px;height:14px;font-size:8px;display:flex;justify-content:center;align-items:center;font-weight:600}",""]),e["default"]=r},74378:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,'._stackDisplay[data-v-5fdd33da]{position:absolute;inset:0;z-index:100;background:var(--sd-bg);color:var(--sd-textcolor);display:flex;flex-flow:column nowrap}._stackDisplay ._closeStack[data-v-5fdd33da]{flex:0 0 auto}._stackDisplay ._panes[data-v-5fdd33da]{flex:1 1 auto}._panes[data-v-5fdd33da]{position:relative;overflow:hidden}._infos[data-v-5fdd33da],[data-context=archive] ._panes>._infos[data-v-5fdd33da]{max-width:360px}._infos[data-v-5fdd33da]{position:absolute;display:flex;flex-flow:column nowrap;overflow:auto;z-index:10;height:100%;width:100%;border-right:1px solid var(--sd-separator)}._infos[data-v-5fdd33da]::-webkit-scrollbar{height:11px;width:11px;background-color:transparent}._infos[data-v-5fdd33da]::-webkit-scrollbar-thumb,._infos[data-v-5fdd33da]::-webkit-scrollbar-track{border:4px solid hsla(0,0%,100%,0);border-radius:16px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._infos[data-v-5fdd33da]::-webkit-scrollbar-track{background-color:transparent}._infos[data-v-5fdd33da]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._infos[data-v-5fdd33da]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:4px solid hsla(0,0%,100%,0)}._infos>._allFields[data-v-5fdd33da]{flex:1 1 0;padding:calc(var(--spacing)*2);background:var(--sd-bg)}._infos>._bottomBtns[data-v-5fdd33da]{flex:0 0 auto}._overlay[data-v-5fdd33da]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:9;cursor:pointer;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}._overlay[data-v-5fdd33da]:before{content:"";position:absolute;inset:0;opacity:.8;background-color:var(--sd-bg)}._topCarousel[data-v-5fdd33da]{position:relative;z-index:1;top:0;height:100%;width:100%;background:#fff;background:var(--sd-bg);padding-left:32px;transition:all .2s cubic-bezier(.19,1,.22,1)}._topCarousel[data-dualdisplay][data-v-5fdd33da]{padding-left:360px}._allFields[data-v-5fdd33da]{position:relative}hr[data-v-5fdd33da]{border-color:var(--sd-separator)}._dateFields[data-v-5fdd33da]{display:flex;flex-flow:row nowrap;gap:calc(var(--spacing)*1)}._dateFields>*[data-v-5fdd33da]{flex:1 1 50px}._closeStack[data-v-5fdd33da]{position:relative;border-bottom:1px solid var(--sd-separator);z-index:2;text-align:right}._closeStack>button[data-v-5fdd33da]{width:100%;justify-content:flex-end;border-radius:0}._closeStack>button[data-v-5fdd33da]:focus,._closeStack>button[data-v-5fdd33da]:hover{color:#fff;background:var(--sd-separator)}._fileStack[data-v-5fdd33da]{border:2px solid var(--sd-separator);padding:calc(var(--spacing)/2);margin:calc(var(--spacing)*2) 0}._bottomBtns[data-v-5fdd33da]{position:sticky;bottom:0;text-align:center;background:var(--c-noir);padding:calc(var(--spacing)*2)}._bottomBtns ._btn[data-v-5fdd33da]{width:100%;border-radius:4px;max-width:360px}._titleRow[data-v-5fdd33da]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:flex-start}._showSidebar[data-v-5fdd33da]{position:absolute;border-right:1px solid var(--sd-separator);z-index:10;height:100%;background:var(--sd-bg)}._showSidebar>button[data-v-5fdd33da]{height:100%;justify-content:flex-start;align-items:flex-start;border-radius:0}._showSidebar>button[data-v-5fdd33da]:focus,._showSidebar>button[data-v-5fdd33da]:hover{color:#fff;background:var(--sd-separator)}._hideSidebar[data-v-5fdd33da]{position:absolute;top:0;right:0;margin:0;z-index:8;background:var(--active-color);border-radius:0}._addToColl[data-v-5fdd33da],._hideSidebar[data-v-5fdd33da]{padding:calc(var(--spacing)/4)}',""]),e["default"]=r},65553:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._fileShown[data-v-0778f91c]{display:flex;flex-flow:column nowrap;overflow:hidden}._single[data-v-0778f91c]{position:relative;flex:1 1 auto;overflow:hidden}._single[data-v-0778f91c]  ._mediaContent{width:100%;height:100%}._single[data-v-0778f91c]  ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:scale-down;object-fit:scale-down;max-width:none}._unfoldBtn[data-v-0778f91c]{width:100%;border-top:1px solid var(--sd-separator);z-index:2}._unfoldBtn>button[data-v-0778f91c]{width:100%;justify-content:flex-start;gap:calc(var(--spacing)/2);border-radius:0}._unfoldBtn>button[data-v-0778f91c]:focus,._unfoldBtn>button[data-v-0778f91c]:hover{background:var(--sd-separator);color:#fff}._infos[data-v-0778f91c]{flex:0 0 auto;position:relative;border-top:1px solid var(--sd-separator);max-height:50vh;overflow:auto;padding:calc(var(--spacing)/1) calc(var(--spacing)/1);transition:all .02s cubic-bezier(.19,1,.22,1)}._infos[data-hide][data-v-0778f91c]{overflow:0;max-height:0;border:none;padding:0 calc(var(--spacing)/1)}._dragEditBtn[data-v-0778f91c]{position:absolute;top:0;right:0}._textEditor[data-v-0778f91c]{padding:0 calc(var(--spacing)/1)}._textEditor[data-v-0778f91c]  .ql-editor{padding:calc(var(--spacing)/2);border-left:2px solid var(--h-700)}",""]),e["default"]=r},60882:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._filterBar[data-v-75339660]{position:relative;z-index:1;margin:calc(var(--spacing)/1);border-bottom:1px solid var(--h-500)}._topBtn[data-v-75339660]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;gap:calc(var(--spacing)/2);padding-bottom:calc(var(--spacing)*1)}._topBtn>*[data-v-75339660]{flex:0 0 auto}._filterPane--row[data-v-75339660]{display:flex;flex-flow:row wrap;gap:calc(var(--spacing)/2);padding-bottom:calc(var(--spacing)*1)}._filterPane--row>*[data-v-75339660]{flex:1 1 100px}._usedKw[data-v-75339660]{padding-bottom:calc(var(--spacing)/2);border-bottom:2px solid #fff;margin-bottom:calc(var(--spacing)/2)}._resetFilters[data-v-75339660]{flex:0 0 100px}._closeBtn[data-v-75339660]{position:absolute;right:0;margin:calc(var(--spacing)/2);z-index:100}._closeBtn.is--white[data-v-75339660]{color:#fff}._selectField[data-v-75339660]{border:1px solid var(--h-500);border-radius:4px;min-width:20ch;color:var(--h-700);background-color:transparent}._searchField[data-v-75339660]{flex:1 1 100px}._searchKW[data-v-75339660]{margin-bottom:calc(var(--spacing)/2)}._searchField[data-v-75339660]{flex-grow:1;max-width:420px}",""]),e["default"]=r},56959:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._sharedFolder[data-v-462eaafa],._sharedFolder--content[data-v-462eaafa]{position:relative;height:100%}._sharedFolder--content[data-v-462eaafa]{overflow:auto}._sharedFolder--content[data-v-462eaafa]::-webkit-scrollbar{height:11px;width:11px;background-color:transparent}._sharedFolder--content[data-v-462eaafa]::-webkit-scrollbar-thumb,._sharedFolder--content[data-v-462eaafa]::-webkit-scrollbar-track{border:4px solid hsla(0,0%,100%,0);border-radius:16px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._sharedFolder--content[data-v-462eaafa]::-webkit-scrollbar-track{background-color:transparent}._sharedFolder--content[data-v-462eaafa]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._sharedFolder--content[data-v-462eaafa]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:4px solid hsla(0,0%,100%,0)}._dayFileSection[data-v-462eaafa]{margin:0 calc(var(--spacing)/1)}._itemGrid[data-v-462eaafa]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:calc(var(--spacing)/2)}._label[data-v-462eaafa]{font-weight:600;font-size:var(--sl-font-size-large);margin:calc(var(--spacing)*1) 0}._stackModal[data-v-462eaafa]{--sd-separator:var(--h-200);--sd-textcolor:var(--h-900);--sd-bg:var(--body-bg)}._footer[data-v-462eaafa]{text-align:center;margin:calc(var(--spacing)*2) auto}._loader[data-v-462eaafa]{position:relative;min-height:80vh}._mediamapContainer[data-v-462eaafa]{height:90vh}._noContent[data-v-462eaafa]{margin:calc(var(--spacing)/1)}",""]),e["default"]=r},37435:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._stackCarousel[data-v-703f1449]{display:flex;flex-flow:column nowrap}._stackCarousel>._stackCarousel--fileshown[data-v-703f1449]{flex:1 1 auto}._stackCarousel>._list[data-v-703f1449]{flex:0 0 auto}._list[data-v-703f1449]{display:flex;gap:2px;overflow:auto;padding:2px;border-top:1px solid var(--sd-separator)}._preview[data-v-703f1449]{position:relative;--thumb-size:15vh;width:var(--thumb-size);height:var(--thumb-size);flex:0 0 var(--thumb-size);background-color:rgba(0,0,0,.2);overflow:hidden;border-radius:4px;transition:all .25s cubic-bezier(.19,1,.22,1)}._preview[data-v-703f1449]:focus-visible,._preview[data-v-703f1449]:hover{background:transparent}._preview[data-v-703f1449]:not([data-iscurrent]){cursor:pointer}._preview ._mediaContent[data-v-703f1449]{height:100%}._preview ._mediaContent[data-v-703f1449]  ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:contain;object-fit:contain;max-width:none}._btnRow[data-v-703f1449]{position:absolute;inset:0;display:flex;flex-flow:column nowrap;justify-content:center;align-content:center;align-items:center}._previewOverlay[data-v-703f1449]{position:absolute;inset:0;background-color:var(--h-700);opacity:.9}._removeBtn[data-v-703f1449]{position:absolute;top:0;right:0;margin:calc(var(--spacing)/2)}._changeOrderSelect[data-v-703f1449]{margin:calc(var(--spacing)/4);padding:calc(var(--spacing)/8) calc(var(--spacing)/4);width:5ch}._credits[data-v-703f1449]{position:absolute;bottom:0;right:0;margin:calc(var(--spacing)/2);pointer-events:none;display:flex;flex-flow:row nowrap;gap:calc(var(--spacing)/2)}",""]),e["default"]=r},48594:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._stackPreview[data-v-04fe73aa]{position:relative;display:flex;flex-flow:column nowrap;justify-content:flex-end;align-items:stretch;padding:0;min-height:8rem}._stackPreview--content[data-v-04fe73aa]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;text-align:left;font-size:var(--sl-font-size-x-small);position:relative;background:transparent;cursor:pointer;border-radius:2px;overflow:hidden;padding:2px;transform-origin:center calc(100% - 2em);transition:all .45s cubic-bezier(.19,1,.22,1)}._stackPreview--content>*[data-v-04fe73aa]{pointer-events:none}._stackPreview--content.is--selected[data-v-04fe73aa]{background-color:var(--active-color)}._stackPreview--content.is--slider[data-v-04fe73aa]{background:var(--h-200)}._preview[data-v-04fe73aa]{position:relative;width:100%;min-height:3rem;aspect-ratio:135/150;overflow:hidden;cursor:pointer;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}._preview ._mediaPreview[data-v-04fe73aa]{position:relative;height:100%;width:100%}._preview ._mediaPreview[data-v-04fe73aa]  ._mediaContent--image{height:100%;width:100%;-o-object-fit:contain;object-fit:contain;-o-object-position:center;object-position:center}._slide[data-v-04fe73aa]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-content:center;align-items:center;opacity:0;z-index:2}._slide.is--shown[data-v-04fe73aa]{z-index:1;opacity:1;transition:none}._title[data-v-04fe73aa]{height:1.5em;padding:0 calc(var(--spacing)/4);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100%}._count[data-v-04fe73aa]{position:absolute;z-index:3;display:flex;flex-flow:row nowrap;gap:calc(var(--spacing)/8);align-content:center;top:0;left:0;margin:calc(var(--spacing)/4);padding:calc(var(--spacing)/8) calc(var(--spacing)/4) calc(var(--spacing)/4);font-weight:400;color:#000;line-height:1}._count[data-v-04fe73aa],._count>*[data-v-04fe73aa]{background:#fff}._mainPreview[data-v-04fe73aa]{width:100%;height:100%;opacity:1}._mainPreview.is--showingSlides[data-v-04fe73aa]{opacity:0}._addToFav[data-v-04fe73aa]{position:absolute;top:0;right:0;margin:0;z-index:1;color:transparent;stroke:var(--c-noir)}._addToFav[data-isfav][data-v-04fe73aa]{color:var(--c-noir)}._addToFav svg[data-v-04fe73aa]{width:1rem;height:1rem}.slideview[data-v-04fe73aa]{transition:all .02s cubic-bezier(.19,1,.22,1)}.slideview-enter-active[data-v-04fe73aa],.slideview-leave-active[data-v-04fe73aa]{transform:translateY(0);opacity:1}.slideview-enter[data-v-04fe73aa],.slideview-leave-to[data-v-04fe73aa]{transform:translateY(5px);opacity:0}",""]),e["default"]=r},95376:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._fields[data-v-26df95b6]{display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/1);justify-content:center;padding:calc(var(--spacing)/2)}._selectBox[data-v-26df95b6]{width:20px;display:flex;place-content:center;cursor:pointer;color:var(--c-gris);display:none}._selectBox input[data-v-26df95b6]{cursor:inherit;--form-background:transparent!important;--form-control-color:var(--c-jaune);border-color:#555}._selectBox:hover input[data-v-26df95b6]{border:2px solid var(--c-orange)}._infos[data-v-26df95b6]{flex:1 1 auto;display:flex;flex-flow:row nowrap;justify-content:stretch;align-items:center;gap:calc(var(--spacing)/2);padding:0 calc(var(--spacing)/4);width:100%}._infos ._titleDateField[data-v-26df95b6]{flex:1 1 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._chutierRow[data-v-26df95b6]{position:relative;width:100%;padding:calc(var(--spacing)/4) 0;margin-bottom:1px;overflow:hidden;border-radius:4px;color:var(--h-500);transform-origin:right center;transition:all .25s cubic-bezier(.19,1,.22,1)}@media(hover:hover)and (pointer:fine){._chutierRow[data-v-26df95b6]:not(.is--selected):hover{background-color:var(--h-200);color:var(--h-900)}}._chutierRow.is--dragged[data-v-26df95b6]{transform:scale(.93) rotate(1deg);opacity:.6}._chutierRow.is--selected[data-v-26df95b6]{background-color:var(--h-500);color:var(--h-900)}._chutierRow ._chutierRow--openLarge[data-v-26df95b6]{display:block;cursor:pointer}._chutierRow ._chutierRow--openLarge[data-v-26df95b6]:hover{opacity:.8}._chutierRow ._chutierRow--rows[data-v-26df95b6]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center}._chutierRow[data-v-26df95b6]{cursor:pointer}._chutierRow ._chutierRow--preview[data-v-26df95b6]{position:relative;height:60px;border-radius:2px;width:60px;flex:0 0 auto;overflow:hidden;background:var(--sd-separator);color:var(--h-200);display:block!important;text-align:left;font-size:70%}._chutierRow ._chutierRow--preview[data-v-26df95b6]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._chutierRow ._chutierRow--preview[data-v-26df95b6]  .ql-container{padding:calc(var(--spacing)/4);font-size:70%}._descriptionField[data-v-26df95b6]{resize:vertical}._publierBtn[data-v-26df95b6]{text-align:center;margin:calc(var(--spacing)/4) auto}._content[data-v-26df95b6]  .ql-editor{background-color:#363636;border-color:#fff;color:#fff;padding:calc(var(--spacing)*.5)}._content[data-v-26df95b6]  ._editBtn{display:none}._content[data-v-26df95b6]  .ql-toolbar.ql-toolbar{top:50px;border-radius:8px;display:flex;flex-flow:row wrap;justify-content:space-between}._content[data-v-26df95b6]  .ql-toolbar.ql-toolbar ._TEbtnContainer{width:auto;flex:1 0 auto;display:flex;justify-content:flex-end}._dragBtn[data-v-26df95b6]{color:currentColor}.anim_backgroundPosition[data-v-26df95b6]{width:100%;height:100%;position:absolute;top:0;left:0}",""]),e["default"]=r},28083:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._largePreview{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2000;overflow:auto;background-color:var(--chutier-bg);display:flex;flex-flow:column nowrap}._largePreview>._closeLarge{flex:0 0 auto}._largePreview>._fileLarge{flex:1 1 auto}._largePreview ._closeLarge{position:relative;border-bottom:1px solid var(--sd-separator);z-index:2;text-align:right}._largePreview ._closeLarge>button{width:100%;justify-content:flex-end;border-radius:0}._largePreview ._closeLarge>button:focus,._largePreview ._closeLarge>button:hover{background:var(--sd-separator)}",""]),e["default"]=r},96677:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._documentSpot[data-v-7ad944ab]{position:relative;flex:0 0 auto;width:auto;margin:calc(var(--spacing)/2) calc(var(--spacing)/1);cursor:default}._documentSpot>*[data-v-7ad944ab]{pointer-events:none}._documentSpot:not(.has--content) ._topContent[data-v-7ad944ab]{border:1px dashed currentColor}._documentSpot.has--content[data-v-7ad944ab]{cursor:pointer}._documentSpot.has--content:focus-visible ._topContent[data-v-7ad944ab],._documentSpot.has--content:hover ._topContent[data-v-7ad944ab]{border-color:transparent;opacity:.8}._documentSpot.is--expectingClick[data-v-7ad944ab]{cursor:pointer}._documentSpot.is--draggedOn ._topContent[data-v-7ad944ab]{cursor:pointer;transform:scale(1.2);background:#000}._documentSpot.is--expectingDrag[data-v-7ad944ab]{cursor:pointer;color:#fff}._topContent[data-v-7ad944ab]{position:relative;border-radius:8px;overflow:hidden;color:#666;background:var(--sd-separator);display:flex;justify-content:center;align-items:center;font-size:var(--sl-font-size-x-large);font-weight:bolder;width:50px;height:50px;transition:all .2s cubic-bezier(.19,1,.22,1)}._stackTitle[data-v-7ad944ab]{font-size:var(--sl-font-size-x-small)}._mediaPreview[data-v-7ad944ab]{width:100%;height:100%}._mediaPreview._noPreview[data-v-7ad944ab]{font-size:30%;padding:calc(var(--spacing)/4)}._mediaPreview[data-v-7ad944ab]  ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;max-width:none}._count[data-v-7ad944ab]{position:absolute;z-index:10;color:#fff;text-shadow:#000 1px 0 10px;display:flex;justify-content:flex-start;align-items:flex-start;font-size:var(--sl-font-size-medium)}.anim_backgroundPosition[data-v-7ad944ab]{color:rgba(0,0,0,.3);z-index:9;top:0;left:0}._addTo[data-v-7ad944ab],.anim_backgroundPosition[data-v-7ad944ab]{position:absolute;width:100%;height:100%}._addTo[data-v-7ad944ab]{color:#fff;display:flex;justify-content:center;align-items:center}._loader[data-v-7ad944ab]{background:#424146;color:var(--c-rouge);z-index:2}._plus[data-v-7ad944ab]{color:var(--active-color)}",""]),e["default"]=r},86764:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._documentsCreator[data-v-878ae6ee]{color:#fff;width:auto;display:flex;flex-flow:column nowrap;justify-content:flex-start;height:100%;overflow:auto;border-left:1px solid var(--active-color);padding:calc(var(--spacing)/2) 0}._documentsCreator[data-v-878ae6ee] >:only-child{height:50%}._documentsCreator[data-v-878ae6ee] >:only-child ._documentSpot{height:100%}",""]),e["default"]=r},13271:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"table[data-v-78062041],td[data-v-78062041],th[data-v-78062041]{border:2px solid var(--h-100);border-collapse:collapse}._list[data-v-78062041]{width:100%}._list tr[data-v-78062041]{padding:calc(var(--spacing)/2);cursor:pointer}._list tr[data-v-78062041]:focus-visible,._list tr[data-v-78062041]:hover{background-color:var(--h-100)}._list tr>td[data-v-78062041]:last-child{width:100px;padding:0}._list td[data-v-78062041]{padding:calc(var(--spacing)/2)}",""]),e["default"]=r},45536:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._collections[data-v-9c743c2a]{margin:calc(var(--spacing)/2)}",""]),e["default"]=r},72109:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,"._openedCollection[data-v-b1cb8e0a]{position:absolute;top:0;left:0;background:var(--body-bg);height:100%;width:100%;overflow:auto}._spinner[data-v-b1cb8e0a]{padding:calc(var(--spacing)*2)}._titleBar[data-v-b1cb8e0a]{padding:calc(var(--spacing)/1);padding-bottom:0}._topbar[data-v-b1cb8e0a]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;padding:calc(var(--spacing)/1);border-bottom:1px solid var(--c-gris)}._cont[data-v-b1cb8e0a]{margin:calc(var(--spacing)/2) 0}._items--item[data-v-b1cb8e0a]{width:100%;min-height:2rem;margin-bottom:calc(var(--spacing)/2)}._admins[data-v-b1cb8e0a]  ._dLabel{display:none}._error[data-v-b1cb8e0a]{padding:calc(var(--spacing)*1)}",""]),e["default"]=r},59613:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(23645),n=a.n(o),r=n()(s());r.push([t.id,'._lumaView[data-v-c773598a]{overflow:hidden}._lumaView[data-v-c773598a],._panes[data-v-c773598a]{height:100%}._myContent[data-v-c773598a]{position:absolute;z-index:2;width:100%;min-width:100px;height:100%;background:var(--chutier-bg);overflow:hidden}._sharedContent[data-v-c773598a]{position:relative;z-index:1;height:100%}._chutierBtn[data-v-c773598a]{position:absolute;top:0;right:0;z-index:1;transition:transform .25s cubic-bezier(.19,1,.22,1)}._chutierBtn>button[data-v-c773598a]{position:absolute;width:100%;height:100%;color:#fff;border-radius:50%;left:0;font-size:1.5rem;padding:0;display:flex;justify-content:center;align-items:center;transform-origin:center;transition:transform .4s cubic-bezier(.19,1,.22,1)}._chutierBtn>button[data-v-c773598a]:focus-visible,._chutierBtn>button[data-v-c773598a]:hover{color:#ccc}._chutierBtn[data-v-c773598a]:not(.is--showingChutier){height:100%}._chutierBtn:not(.is--showingChutier)>button[data-v-c773598a]{transform:rotate(-180deg)}._splitpanes[data-v-c773598a]{height:calc(100% - 20px)}._topBarIndication[data-v-c773598a]{display:flex;flex-flow:row nowrap;height:20px}._topBarIndication--item[data-v-c773598a]{height:20px;padding:2px 5px;line-height:1;font-size:var(--sl-font-size-small);font-family:IBM Plex Mono;display:flex;align-items:center;justify-content:space-between;gap:calc(var(--spacing)/2);white-space:nowrap;overflow:hidden;min-width:23px;flex:1 1 var(--topPane-width);background:var(--h-100);color:var(--h-700);border-right:1px solid var(--r-600);cursor:pointer;transition:all .25s cubic-bezier(.19,1,.22,1)}._topBarIndication--item[data-v-c773598a]:last-child{border-right:none}._topBarIndication--item[data-v-c773598a]:after{content:"✕";position:relative;opacity:0;transition:all .05s cubic-bezier(.19,1,.22,1)}._topBarIndication--item[data-v-c773598a]:focus-visible,._topBarIndication--item[data-v-c773598a]:hover{background:var(--h-300)}._topBarIndication--item[data-v-c773598a]:focus-visible:after,._topBarIndication--item[data-v-c773598a]:hover:after{opacity:1}._topBarIndication--item--names[data-v-c773598a]{display:flex;flex-flow:row nowrap;gap:4px}',""]),e["default"]=r},94124:function(t,e,a){var i=a(25440);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("0633db40",i,!0,{sourceMap:!1,shadowMode:!1})},87617:function(t,e,a){var i=a(38720);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("e5633a46",i,!0,{sourceMap:!1,shadowMode:!1})},56396:function(t,e,a){var i=a(66635);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("66058d36",i,!0,{sourceMap:!1,shadowMode:!1})},55325:function(t,e,a){var i=a(69538);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("4bfa652f",i,!0,{sourceMap:!1,shadowMode:!1})},97661:function(t,e,a){var i=a(94897);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("1f9fdcb4",i,!0,{sourceMap:!1,shadowMode:!1})},42904:function(t,e,a){var i=a(87862);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("579a27ff",i,!0,{sourceMap:!1,shadowMode:!1})},4696:function(t,e,a){var i=a(74378);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("bf3eb330",i,!0,{sourceMap:!1,shadowMode:!1})},13573:function(t,e,a){var i=a(65553);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("477be8bc",i,!0,{sourceMap:!1,shadowMode:!1})},59185:function(t,e,a){var i=a(60882);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("567ea16a",i,!0,{sourceMap:!1,shadowMode:!1})},96831:function(t,e,a){var i=a(56959);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("43e688a5",i,!0,{sourceMap:!1,shadowMode:!1})},25370:function(t,e,a){var i=a(37435);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("6ee9c209",i,!0,{sourceMap:!1,shadowMode:!1})},56333:function(t,e,a){var i=a(48594);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("dc64aa90",i,!0,{sourceMap:!1,shadowMode:!1})},38909:function(t,e,a){var i=a(95376);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("6eecdbdb",i,!0,{sourceMap:!1,shadowMode:!1})},48859:function(t,e,a){var i=a(28083);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("4fe0eab5",i,!0,{sourceMap:!1,shadowMode:!1})},1349:function(t,e,a){var i=a(96677);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("d7afa1fe",i,!0,{sourceMap:!1,shadowMode:!1})},53793:function(t,e,a){var i=a(86764);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("789a2496",i,!0,{sourceMap:!1,shadowMode:!1})},90626:function(t,e,a){var i=a(13271);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("0131738a",i,!0,{sourceMap:!1,shadowMode:!1})},30732:function(t,e,a){var i=a(45536);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("1b65f70e",i,!0,{sourceMap:!1,shadowMode:!1})},29797:function(t,e,a){var i=a(72109);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("8e952134",i,!0,{sourceMap:!1,shadowMode:!1})},24066:function(t,e,a){var i=a(59613);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(20730).Z;s("1f708e65",i,!0,{sourceMap:!1,shadowMode:!1})}}]);