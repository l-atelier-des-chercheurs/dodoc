(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[947],{2808:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Ht}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_lumaView",class:{"is--mobile_view":t.$root.is_mobile_view}},[t.shared_folder_path?[a("div",{staticClass:"_panes"},[a("div",{key:"myContent",staticClass:"_myContent",class:{"is--shown":t.show_chutier}},[t.show_chutier?a("MyChutier",{attrs:{shared_space_path:t.shared_folder_path},on:{close:function(e){t.show_chutier=!1}}}):t._e(),a("div",{staticClass:"_chutierBtn",class:{"is--showingChutier":t.show_chutier}},[a("button",{attrs:{type:"button"},on:{click:function(e){t.show_chutier=!t.show_chutier}}},[a("svg",{attrs:{width:"17",height:"9",viewBox:"0 0 17 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M0.999812 4.546V4.726C1.87581 5.098 2.67381 5.602 3.39381 6.238C4.11381 6.874 4.77381 7.546 5.37381 8.254L5.75181 7.894C5.53581 7.594 5.30181 7.3 5.04981 7.012C4.78581 6.712 4.51581 6.418 4.23981 6.13C4.07181 5.962 3.98781 5.788 3.98781 5.608C3.98781 5.512 4.02381 5.428 4.09581 5.356C4.16781 5.284 4.28781 5.248 4.45581 5.248H14.5718V8.254H15.5078V1H14.5718V4.024H4.43781C4.26981 4.024 4.14981 3.982 4.07781 3.898C4.00581 3.802 3.96981 3.712 3.96981 3.628C3.96981 3.484 4.05381 3.328 4.22181 3.16C4.48581 2.908 4.75581 2.62 5.03181 2.296C5.29581 1.972 5.52981 1.66 5.73381 1.36L5.35581 1C4.75581 1.696 4.10181 2.368 3.39381 3.016C2.67381 3.664 1.87581 4.174 0.999812 4.546Z",fill:"currentColor",stroke:"currentColor"}})])])])],1),a("div",{key:"sharedContent",staticClass:"_sharedContent",class:{"has--chutier":t.show_chutier}},[a("SharedFolder",{attrs:{shared_folder_path:t.shared_folder_path}})],1)])]:a("LoaderSpinner")],2)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.chutier?a("div",{staticClass:"_myChutier",on:{click:function(e){t.last_clicked=!1}}},[a("div",{staticClass:"_itemsList"},[a("div",{staticClass:"_topBar"},[t.is_instance_admin?a("button",{staticClass:"u-buttonLink _adminBtn",attrs:{type:"button"},on:{click:function(e){t.show_admin_settings=!0}}},[t._v(" "+t._s(t.$t("admin_settings"))+" ")]):t._e(),t.show_admin_settings?a("AdminLumaSettings",{on:{close:function(e){t.show_admin_settings=!1}}}):t._e()],1),a("div",{staticClass:"_topContent"},[a("div",{staticClass:"_subscribeBtn"},[a("button",{staticClass:"u-button u-button_bleumarine _authorBtn",attrs:{type:"button"},on:{click:function(e){return t.$eventHub.$emit("showAuthorModal")}}},[t.connected_as?[t._v(" "+t._s(t.connected_as.name)+" ")]:[t._v(t._s(t.$t("login")))]],2)]),a("div",{staticClass:"_importBtn"},[a("input",{staticClass:"inputfile-2",attrs:{type:"file",multiple:"multiple",id:t.id+"-add_file",name:"file",accept:""},on:{change:function(e){return t.updateInputFiles(e)}}}),a("label",{attrs:{for:t.id+"-add_file"}},[t._v(" "+t._s(t.$t("import"))+" ")])]),a("div",{},[a("button",{staticClass:"u-button u-button_white _qrBtn",attrs:{type:"button"},on:{click:t.createNote}},[a("sl-icon",{attrs:{name:"file-text"}}),t._v(" note ")],1)]),a("div",{},[a("button",{staticClass:"u-button u-button_white _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_link_picker=!0}}},[a("sl-icon",{attrs:{name:"link-45deg"}}),t._v(" url ")],1),t.show_link_picker?a("LinkPicker",{on:{embed:t.createEmbed,close:function(e){t.show_link_picker=!1}}}):t._e()],1),a("div",{staticClass:"_qrOpt"},[a("button",{staticClass:"u-button u-button_transparent _qrBtn",attrs:{type:"button"},on:{click:function(e){t.show_qr_code_modal=!0}}},[a("sl-icon",{attrs:{name:"qr-code"}})],1),t.show_qr_code_modal?a("QRModal",{attrs:{url_to_access:t.url_to_page},on:{close:function(e){t.show_qr_code_modal=!1}}}):t._e()],1)]),t.selected_files.length>0?a("UploadFiles",{staticClass:"_uploadFilesList",attrs:{files_to_import:t.selected_files,path:t.path},on:{close:function(e){t.selected_files=[]},importedMedias:t.importedMedias}}):t._e(),a("div",{staticClass:"_middleContent"},[a("label",{attrs:{for:""},on:{click:function(e){t.all_items_selected?t.deselectAll():t.selectAll()}}},[t.chutier_items.length>0?a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("sl-icon",{attrs:{name:t.all_items_selected?"dash-square-dotted":"plus-square-dotted"}})],1):t._e(),t._v(" Éléments à traiter : "+t._s(t.chutier_items.length)+" ")]),a("br")]),a("div",{staticClass:"_items"},t._l(t.chutier_items_grouped,(function(e){return a("div",{key:e.label,staticClass:"_item"},[a("div",{staticClass:"_item--label",on:{click:function(a){t.rangeIsSelected(e.files.map((function(t){return t.$path})))?t.deselectRange(e.files.map((function(t){return t.$path}))):t.selectRange(e.files.map((function(t){return t.$path})))}}},[t.rangeIsSelected(e.files.map((function(t){return t.$path})))?a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("sl-icon",{attrs:{name:"dash-square-dotted"}})],1):a("button",{staticClass:"u-buttonLink u-selectBtn",attrs:{type:"button"}},[a("sl-icon",{attrs:{name:"plus-square-dotted"}})],1),t._v(" "+t._s(e.label)+" ")]),a("transition-group",{attrs:{tag:"div",name:"listComplete"}},t._l(e.files,(function(e){return a("div",{key:e.$path,on:{click:function(a){a.stopPropagation(),t.last_clicked=e.$path}}},[a("ChutierItem",{attrs:{file:e,is_clicked:t.last_clicked===e.$path,is_selected:t.selected_items_slugs.includes(e.$path),shared_space_path:t.shared_space_path},on:{toggleSelect:function(a){return t.toggleSelect(e.$path)},unclicked:function(e){t.last_clicked=!1}}})],1)})),0)],1)})),0)],1),a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.selected_items.length>0?a("div",{key:"selection",staticClass:"_selectionBar"},[a("div",{staticClass:"_selectionBar--previews"},[t._l(t.selected_items,(function(e){return[e.$path?a("MediaContent",{key:e.$path,staticClass:"_selectionBar--previews--preview",attrs:{file:e,context:"preview"}}):t._e()]}))],2),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){t.show_mediastack_modal=!0}}},[t._v(" "+t._s(t.$t("create_stack"))+" ("+t._s(t.selected_items.length)+") ")]),a("div",{staticClass:"u-sameRow"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.deselectAll}},[a("sl-icon",{attrs:{name:"dash-square-dotted"}}),t._v(" Déselectionner tout ")],1),a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_remove_menu=!0}}},[a("sl-icon",{attrs:{name:"trash3"}}),t._v(" Supprimer les éléments ")],1)])]):t._e()]),a("transition",{attrs:{name:"slideup",mode:"out-in"}},[t.show_confirm_remove_menu?a("div",{key:"remove",staticClass:"_removeMenu"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_remove_menu=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_red",attrs:{type:"button",autofocus:""},on:{click:t.removeItemsInSelection}},[t._v(" "+t._s(t.$t("confirm_removal"))+" ")])]):t._e()]),a("transition",{attrs:{name:"slideup"}},[t.show_mediastack_modal?a("MediaStack",{staticClass:"_mediaStack",attrs:{files:t.selected_items,shared_space_path:t.shared_space_path},on:{updateFocusedMedia:function(e){t.selected_items_slugs=e},stackCreated:function(e){t.selected_items_slugs=[],t.show_mediastack_modal=!1},close:function(e){t.show_mediastack_modal=!1}}}):t._e()],1)],1):t._e()},n=[],r=(a(6699),a(7658),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"_linkPicker"},[a("div",{staticClass:"_urlBox"},[a("DLabel",{attrs:{str:t.$t("input_url"),instructions:t.$t("input_url_instr")}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.full_url,expression:"full_url"}],attrs:{type:"url",placeholder:"https://"},domProps:{value:t.full_url},on:{input:function(e){e.target.composing||(t.full_url=e.target.value)}}})],1),a("div",{staticClass:"u-instructions"},[t._v(" PeerTube, YouTube, Vimeo, etc. "+t._s(t.$t("for_example"))+"  "),t._l(["https://peertube.fr/w/wB6M6CHdfpWXpozVnqjbde","https://www.youtube.com/watch?v=Bn6zdyCAwJs","https://vimeo.com/447785086","https://observablehq.com/embed/@fil/bertin1953-glsl?cells=canvas"],(function(e,i){return a("button",{key:i,staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{innerHTML:t._s(e)},on:{click:function(a){t.full_url=e}}})}))],2),a("br"),a("div",{key:t.full_url},["any"===t.url_to_site.type?[a("iframe",{staticClass:"_siteIframe",attrs:{src:t.url_to_site.src,frameborder:"0"}})]:a("vue-plyr",[a("div",{staticClass:"plyr__video-embed"},[a("iframe",{attrs:{src:t.url_to_site.src,allowfullscreen:"",allowtransparency:"",allow:"autoplay; fullscreen",sandbox:"allow-same-origin allow-scripts allow-popups",frameborder:"0"}})])])],2),a("br"),t.full_url?a("div",{staticClass:"_selectBtn"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){return t.$emit("embed",t.full_url)}}},[t._v(" "+t._s(t.$t("embed"))+" ")])]):t._e()])])}),l=[],c={props:{},components:{},data(){return{full_url:"https://"}},async created(){},beforeDestroy(){},watch:{},computed:{url_to_site(){return!!this.full_url&&this.transformURL({url:this.full_url,autoplay:!1})}},methods:{}},d=c,_=(a(148),a(1001)),u=(0,_.Z)(d,r,l,!1,null,"a5930508",null),p=u.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_chutierRow",class:{"is--clicked":t.is_clicked,"is--selected":t.is_selected,"is--edited":t.edit_mode,"is--mousedown":t.is_mousedown},on:{click:function(e){!t.edit_mode&&t.$emit("toggleSelect")},mousedown:function(e){t.is_mousedown=!0},mouseup:function(e){t.is_mousedown=!1}}},[a("div",{staticClass:"_chutierRow--rows"},[a("div",{staticClass:"_infos"},[!t.edit_mode&&t.$listeners&&t.$listeners.toggleSelect?a("label",{staticClass:"_selectBox",attrs:{for:t.id},on:{click:function(t){t.stopPropagation()}}},[a("input",{attrs:{type:"checkbox",name:t.id,id:t.id},domProps:{checked:t.is_selected},on:{change:function(e){return t.$emit("toggleSelect")}}})]):t._e(),"text"===t.file.$type&&t.edit_mode?t._e():a("div",{staticClass:"_chutierRow--openLarge",on:{click:function(e){e.stopPropagation(),t.show_large=!0}}},[a("MediaContent",{staticClass:"_chutierRow--preview",attrs:{file:t.file,context:"preview"}})],1),a("div",{staticClass:"_titleDateField"},[a("div",[a("div",{},[a("small",[t.edit_mode?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.date_created_corrected,expression:"date_created_corrected"}],staticClass:"is--dark",attrs:{type:"datetime-local",step:"1"},domProps:{value:t.date_created_corrected},on:{input:function(e){e.target.composing||(t.date_created_corrected=e.target.value)}}})]:[t._v(" "+t._s("stack"===t.context?t.formatDateTimeToPrecise(t.date_created_corrected):t.formatTime(t.date_created_corrected,{hour:"2-digit",minute:"2-digit"}))+" ")]],2)]),t.edit_mode?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text_title,expression:"text_title"}],staticClass:"is--dark",attrs:{type:"text",autofocus:"",required:"",placeholder:"Titre"},domProps:{value:t.text_title},on:{keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),"stack"===t.context&&t.$emit("unclicked")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.cancelEdit.apply(null,arguments))}],input:function(e){e.target.composing||(t.text_title=e.target.value)}}})]:a("div",[t._v(" "+t._s(t.text_title)+" ")])],2)]),t.edit_mode?t._e():a("EditBtn",{on:{click:function(e){t.edit_mode=!0}}})],1)]),"stack"!==t.context&&(t.edit_mode||t.keywords.length>0||t.description.length>0)?a("div",{staticClass:"_fields"},[t.edit_mode?a("div",[a("span",{staticClass:"u-instructions"},[t._v(" Corrigez ou complétez le titre et les mots-clés pour partager cette pile. ")])]):t._e(),"url"===t.file.$type?a("div",{},[a("div",[a("input",{staticClass:"is--dark",attrs:{type:"url",autofocus:"",disabled:""},domProps:{value:t.file.$content}})])]):t._e(),t.keywords&&t.keywords.length>0||t.edit_mode?a("div",{},[a("KeywordsField",{attrs:{keywords:t.keywords,can_edit:t.edit_mode},on:{"update:keywords":function(e){t.keywords=e},cancelEdit:t.cancelEdit}})],1):t._e(),t.description||t.edit_mode?a("div",{},[t.edit_mode?["text"!==t.file.$type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"is--dark _descriptionField",attrs:{placeholder:"Description"},domProps:{value:t.description},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.cancelEdit.apply(null,arguments))},input:function(e){e.target.composing||(t.description=e.target.value)}}}):a("CollaborativeEditor2",{staticClass:"_content",attrs:{path:t.file.$path,content:t.file.$content,edit_on_mounted:!0,can_edit:!0,custom_formats:["bold","italic","underline","link"]}})]:a("div",[t._v(" "+t._s(t.description)+" ")])],2):t._e(),a("div",{staticClass:"_publierBtn"},[a("button",{key:t.share_button_is_enabled,staticClass:"u-buttonLink",attrs:{type:"button",disabled:!t.share_button_is_enabled},on:{click:t.shareButtonClicked}},[t._v(" Publier  "),a("sl-icon",{staticStyle:{"font-size":"1rem"},attrs:{name:"arrow-right-square",circle:""}})],1)])]):t._e(),t.show_large?a("div",{staticClass:"_chutierRow--largePreview",attrs:{"data-type":t.file.$type},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.show_large=!1}}},[a("MediaContent",{attrs:{file:t.file,context:"full",resolution:1600}}),a("button",{staticClass:"u-button u-button_round u-button_black _closeBtn",attrs:{type:"button"},on:{click:function(e){t.show_large=!1}}},[a("sl-icon",{attrs:{name:"x-lg",label:t.$t("close")}})],1)],1):t._e()])},f=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_keywordsField"},[t.label?a("DLabel",{staticClass:"_label",attrs:{str:t.label}}):t._e(),t.new_keywords.length>0?a("div",{staticClass:"u-keywords"},[t._l(t.new_keywords,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:t.edit_mode},on:{remove:function(a){return t.removeKeyword(e)}}})})),t.can_edit&&!t.edit_mode?a("EditBtn",{on:{click:t.enableEditMode}}):t._e()],2):t._e(),t.edit_mode?[a("KeywordsFieldEditor",{attrs:{keywords:t.new_keywords},on:{"update:keywords":function(e){t.new_keywords=e}}})]:t._e(),t.can_edit&&t.path&&t.field_name?[t.edit_mode?a("div",{staticClass:"_footer"},[a("SaveCancelButtons",{staticClass:"_scb",on:{save:t.updateKeywords,cancel:t.cancel}})],1):t._e()]:t._e()],2)},v=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_keywordsFieldEditor"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_suggestion,expression:"user_suggestion"}],ref:"keywordField",staticClass:"is--dark",attrs:{type:"text",required:"",placeholder:"Mot-clé, matériaux, lieux, etc."},domProps:{value:t.user_suggestion},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.$emit("cancelEdit"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.newKeyword.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.submitFirstSuggestion.apply(null,arguments)):null}],input:function(e){e.target.composing||(t.user_suggestion=e.target.value)}}}),a("div",{staticClass:"u-instructions"},[a("small",[t.suggested_keywords.length>0?[t._v(" Validez la première suggestion avec SHIFT+ENTRÉE, ou créez un nouveau mot-clé avec ENTRÉE. ")]:t.user_suggestion.length>0?[t._v("Créez un nouveau mot-clé avec ENTRÉE.")]:t._e()],2)]),a("div",{staticClass:"_catSug"},[a("div",{staticClass:"_categories"},t._l(t.categories_with_keywords,(function(e){return a("button",{key:e,staticClass:"u-button _category",class:{"is--active":t.suggestion_from_category===e},attrs:{type:"button","data-category":e},on:{click:function(a){return t.toggleCategory(e)}}},[t._v(" "+t._s(e)+" ("+t._s(t.matchingKeywordsWithCategory(e).length)+") ")])})),0),t.suggested_keywords.length>0?a("div",{staticClass:"_suggestions"},[a("div",{staticClass:"u-keywords"},t._l(t.suggested_keywords,(function(e,i){return a("SingleKeyword",{key:e,class:{"is--first":0===i},attrs:{keyword:e,can_add:!0},on:{add:function(a){return t.addKeyword(e)}}})})),1)]):t._e()])])},w=[],y=(a(5827),a(2262),a(4506),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_singleKeyword",class:{"is--clickable":t.can_add},style:t.kw_styles},[a("div",{},[t.category?a("div",{staticClass:"_category"},[t._v(" "+t._s(t.category.toUpperCase())+" ")]):t._e(),a("div",{staticClass:"_name"},[t._v(" "+t._s(t.name)+" ")])]),t.can_remove?a("sl-icon-button",{staticClass:"_white",attrs:{name:"dash-circle"},on:{click:function(e){return t.$emit("remove")}}}):t._e(),t.can_add?a("button",{staticClass:"_addBtn",attrs:{type:"button"},on:{click:function(e){return t.$emit("add")}}}):t._e()],1)}),b=[],k={props:{keyword:String,cat_color:String,can_remove:Boolean,can_add:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{category(){return!!this.keyword.includes("/")&&this.keyword.split("/").at(0)},name(){return this.keyword.includes("/")?this.keyword.split("/").at(1):this.keyword},kw_styles(){let t=!1;if(this.cat_color)t=this.cat_color;else{const e=window.app_infos.custom_suggested_categories.find((t=>t.title===this.category));t=null===e||void 0===e?void 0:e.tag_color}return t?`--cat-color: ${t}`:""}},methods:{}},C=k,x=(a(1696),(0,_.Z)(C,y,b,!1,null,"89ab98be",null)),$=x.exports,M={props:{keywords:Array},components:{SingleKeyword:$},data(){return{user_suggestion:"",suggestion_from_category:!1,categories:[],path:"categories"}},async created(){this.categories=await this.$api.getFolders({path:this.path}),this.$api.join({room:this.path})},async mounted(){},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{all_categories(){return this.categories.map((t=>t.title))},all_keywords(){return this.categories.reduce(((t,e)=>(e.title&&e.list_of_suggestions&&e.list_of_suggestions.map((a=>{t.push(e.title+"/"+a)})),t)),[])},categories_with_keywords(){return this.all_categories.filter((t=>this.matchingKeywordsWithCategory(t).length>0))},suggested_keywords(){return this.matchingKeywordsWithCategory(this.suggestion_from_category)}},methods:{matchingKeywordsWithCategory(t){return this.all_keywords.filter((e=>{const a=!!e.includes("/")&&e.split("/").at(0),i=e.includes("/")?e.split("/").at(1):e;return!this.keywords.includes(e)&&((!t||t===a)&&(!(!t&&0===this.user_suggestion.length)&&i.toLowerCase().startsWith(this.user_suggestion.toLowerCase())))}))},toggleCategory(t){this.suggestion_from_category===t?this.suggestion_from_category=!1:this.suggestion_from_category=t},newKeyword(){this.user_suggestion.length>0&&this.addKeyword(this.user_suggestion)},submitFirstSuggestion(){if(0===this.suggested_keywords.length)return!1;const t=this.suggested_keywords.at(0);this.addKeyword(t)},keywordKey(t){return t.category+"/"+t.name},addKeyword(t){let e=this.keywords.slice();e.push(t),e.sort(((t,e)=>e)),this.$emit("update:keywords",e),this.user_suggestion="",this.$refs.keywordField.focus()}}},F=M,S=(a(1272),(0,_.Z)(F,g,w,!1,null,"31f26f57",null)),B=S.exports,I={props:{field_name:String,path:String,label:String,keywords:Array,can_edit:Boolean},components:{KeywordsFieldEditor:B,SingleKeyword:$},data(){return{new_keywords:this.keywords,edit_mode:this.can_edit&&!this.path&&!this.field_name,is_saving:!1}},created(){},mounted(){},beforeDestroy(){},watch:{new_keywords(){this.$emit("update:keywords",this.new_keywords)}},computed:{},methods:{enableEditMode(){this.edit_mode=!0},async updateKeywords(){this.is_saving=!0,await new Promise((t=>setTimeout(t,50)));try{const t={[this.field_name]:this.new_keywords};await this.$api.updateMeta({path:this.path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1}},cancel(){this.new_keywords=this.keywords,this.edit_mode=!1},removeKeyword(t){this.new_keywords=this.new_keywords.filter((e=>e!==t))}}},E=I,j=(0,_.Z)(E,m,v,!1,null,"333666ce",null),L=j.exports,z={props:{file:Object,is_selected:Boolean,is_clicked:Boolean,shared_space_path:String,context:{type:String,default:"list"}},components:{KeywordsField:L},data(){return{opened_pane:void 0,show_large:!1,is_mousedown:!1,edit_mode:!1,id:`select_chutier_item_${(Math.random().toString(36)+"00000000000000000").slice(2,5)}`,text_title:this.file.title||this.cleanFilename(this.file.$media_filename)||"",date_created_corrected:this.datetimeLocal(this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded||new Date),description:this.file.description||"",keywords:this.file.keywords||[]}},created(){},mounted(){this.$eventHub.$on("chutier.item.edit",this.setEdit)},beforeDestroy(){this.$eventHub.$off("chutier.item.edit",this.setEdit)},watch:{"file.title"(){this.text_title=this.file.title},is_clicked(){!this.is_clicked&&this.edit_mode&&(this.saveFields(),this.edit_mode=!1)},edit_mode(){this.edit_mode&&this.$nextTick((()=>{this.$el.querySelector("[autofocus]").select()}))}},computed:{share_button_is_enabled(){return this.text_title.length>0&&this.keywords.length>0}},methods:{setEdit(t){const e=this.getFilename(this.file.$path);t===e&&(this.edit_mode=!0)},async moveToSharedSpace(){const t=this.shared_space_path;await this.$api.copyFile({path:this.file.$path,path_to_destination_folder:t,new_meta:{$admins:[this.connected_as.$path]}}),await this.remove()},async remove(){this.$api.deleteItem({path:this.file.$path})},cleanFilename(){return this.file.$media_filename.substring(0,this.file.$media_filename.lastIndexOf("."))},cancelEdit(){this.text_title=this.file.title||this.cleanFilename(this.file.$media_filename)||"",this.date_created_corrected=this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded||"",this.description=this.file.description||"",this.keywords=this.file.keywords||"",this.edit_mode=!1},async shareButtonClicked(){if(this.share_button_is_enabled){if(this.edit_mode)return await this.saveFields(),void await this.moveToSharedSpace();await this.moveToSharedSpace()}else this.edit_mode=!0},openLarge(){this.$emit("")},async saveFields(){""===this.date_created_corrected&&(this.date_created_corrected=this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded);let t={title:this.text_title,date_created_corrected:this.date_created_corrected,description:this.description,keywords:this.keywords};await this.$api.updateMeta({path:this.file.$path,new_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))},save(){},cancel(){this.edit_mode=!1}}},q=z,R=(a(9990),(0,_.Z)(q,h,f,!1,null,"26a04778",null)),P=R.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ChutierPane",{on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"_mediaFocus",on:{click:function(e){t.last_clicked=!1}}},[a("div",{staticClass:"_fileStack"},[a("transition-group",{staticClass:"_itemsList",attrs:{tag:"div",name:"listComplete"}},t._l(t.files,(function(e,i){return a("div",{key:e.$path,staticClass:"u-sameRow",on:{click:function(a){a.stopPropagation(),t.last_clicked=e.$path}}},[a("div",{staticClass:"_removeFile"},[a("sl-icon-button",{attrs:{name:"dash-square-dotted"},on:{click:function(a){return t.removeFromSelection(e.$path)}}})],1),a("select",{staticClass:"is--dark _changeOrderSelect",domProps:{value:i+1},on:{change:function(e){return t.changeMediaOrder(i,+e.target.value-1)}}},t._l(new Array(t.files.length).fill(null),(function(e,i){return a("option",{key:i+1,domProps:{textContent:t._s(i+1)}})})),0),a("ChutierItem",{attrs:{file:e,is_clicked:t.last_clicked===e.$path,is_selected:!1,context:"stack"},on:{unclicked:function(e){t.last_clicked=!1}}})],1)})),0)],1),a("div",{staticClass:"_fields"},[a("small",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.date_created_corrected,expression:"date_created_corrected"}],staticClass:"is--dark",attrs:{type:"datetime-local",step:"1"},domProps:{value:t.date_created_corrected},on:{input:function(e){e.target.composing||(t.date_created_corrected=e.target.value)}}})]),a("span",{staticClass:"u-instructions"},[t._v(" Corrigez ou complétez le titre et les mots-clés pour partager cette pile. ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"is--dark",attrs:{type:"text",required:"",placeholder:"Titre"},domProps:{value:t.title},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.$emit("close"))},input:function(e){e.target.composing||(t.title=e.target.value)}}}),a("KeywordsField",{attrs:{edit_mode:!0,keywords:t.keywords},on:{"update:keywords":function(e){t.keywords=e},cancelEdit:function(e){return t.$emit("close")}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"is--dark _descriptionField",attrs:{placeholder:"Description"},domProps:{value:t.description},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.preventDefault(),t.$emit("close"))},input:function(e){e.target.composing||(t.description=e.target.value)}}})],1),a("div",{staticClass:"_shareBtn"},[a("transition",{attrs:{name:"scaleInFade",mode:"out-in"}},[t.shared_space_path?a("button",{key:t.share_button_is_enabled,staticClass:"u-buttonLink",attrs:{type:"button",disabled:!t.share_button_is_enabled},on:{click:t.shareButtonClicked}},[t._v(" Publier  "),a("sl-icon",{staticStyle:{"font-size":"1rem"},attrs:{name:"arrow-right-square",circle:""}})],1):t._e()])],1)])])},D=[],T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_chutierPane"},[a("sl-button",{staticClass:"_closeBtn",attrs:{variant:"neutral",size:"medium",circle:""},on:{click:function(e){return t.$emit("close")}}},[a("sl-icon",{attrs:{name:"x-lg",label:t.$t("close")}})],1),t._t("default")],2)},Z=[],A={props:{},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},N=A,O=(a(4252),(0,_.Z)(N,T,Z,!1,null,"1cb65e24",null)),H=O.exports,V={props:{files:Array,shared_space_path:String},components:{ChutierPane:H,KeywordsField:L,ChutierItem:P},data(){return{last_clicked:void 0,title:"",description:"",keywords:[],date_created_corrected:""}},created(){const t=this.files.map((t=>t.date_created_corrected||t.$date_created||t.$date_uploaded));t.sort(((t,e)=>+new Date(e)-+new Date(t))),this.date_created_corrected=this.datetimeLocal(t[0])},mounted(){},beforeDestroy(){},watch:{},computed:{share_button_is_enabled(){return this.title.length>0&&this.keywords.length>0}},methods:{changeMediaOrder(t,e){let a=this.files.map((t=>t.$path));function i(t,e,a){if(a>=t.length){var i=a-t.length+1;while(i--)t.push(void 0)}return t.splice(a,0,t.splice(e,1)[0]),t}i(a,t,e),this.$emit("updateFocusedMedia",a)},removeFromSelection(t){let e=this.files.map((t=>t.$path));e=e.filter((e=>e!==t)),this.$emit("updateFocusedMedia",e)},async shareButtonClicked(){const t=this.shared_space_path;this.title,this.description,this.keywords;const e={title:this.title,description:this.description,keywords:this.keywords,date_created_corrected:this.date_created_corrected,requested_slug:"stack",is_stack:!0,stack_files_metas:[],$admins:[this.connected_as.$path]},a=await this.$api.uploadFile({path:t,additional_meta:e}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t})),i=[];for(const s of this.files){const e=await this.$api.copyFile({path:s.$path,path_to_destination_folder:t,new_meta:{$admins:[this.connected_as.$path],belongs_to_stack:a}});i.push(e),await this.$api.deleteItem({path:s.$path})}await this.$api.updateMeta({path:t+"/"+a,new_meta:{stack_files_metas:i}}),this.$emit("stackCreated")}}},J=V,W=(a(7314),(0,_.Z)(J,K,D,!1,null,"11f46f8e",null)),Y=W.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("settings")},on:{close:function(e){return t.$emit("close")}}},[a("div",{},[t.is_loading?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):a("div",[a("sl-tab-group",{on:{"sl-tab-show":t.newTabShown}},[a("sl-tab",{attrs:{slot:"nav",panel:"administration_and_access_control"},slot:"nav"},[t._v(" "+t._s(t.$t("administration_and_access_control"))+" ")]),a("sl-tab",{attrs:{slot:"nav",panel:"suggested_cat_kw"},slot:"nav"},[t._v(" "+t._s(t.$t("suggested_cat_kw"))+" ")]),a("sl-tab-panel",{attrs:{name:"administration_and_access_control"}},["administration_and_access_control"===t.current_tab?a("AdminsAndContributorsField",{attrs:{folder:t.settings,can_edit:!0,admin_label:t.$t("admin"),admin_instructions:t.$t("instance_admin_instructions"),contrib_instructions:t.$t("instance_contrib_instructions")}}):t._e()],1),a("sl-tab-panel",{attrs:{name:"suggested_cat_kw"}},["suggested_cat_kw"===t.current_tab?a("SuggestedCategories"):t._e()],1)],1)],1)])])},G=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.opened_category_path?[a("SingleCategory",{attrs:{path:t.opened_category_path},on:{close:function(e){t.opened_category_path=!1}}})]:[a("div",t._l(t.categories,(function(e){return a("div",{key:e.$path,staticClass:"_categoryRow"},[a("div",{staticClass:"_title",style:t.categoryStyles(e)},[t._v(" "+t._s(e.title)+" ")]),a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{textContent:t._s(t.$t("open"))},on:{click:function(a){return t.openCategory(e.$path)}}})])})),0),a("button",{staticClass:"u-buttonLink",class:{"is--active":t.show_create_category},attrs:{type:"button"},on:{click:function(e){t.show_create_category=!t.show_create_category}}},[t._v(" "+t._s(t.$t("add_category"))+" ")]),t.show_create_category?a("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createCategory.apply(null,arguments)}}},[a("fieldset",[a("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("add_category")))]),a("TextInput",{staticClass:"u-spacingBottom",attrs:{content:t.new_category_title,label_str:"category_name",required:!0,input_type:"text"},on:{"update:content":function(e){t.new_category_title=e}}}),t._m(0),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",disabled:0===t.new_category_title.length,type:"submit"},slot:"footer"},[t._v(" "+t._s(t.$t("create"))+" ")])],1)]):t._e()]],2)},X=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"u-instructions"},[a("small",[t._v(" Tout en majuscule ")])])}],tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("sl-icon",{attrs:{name:"arrow-left-short"}}),t._v(" "+t._s(t.$t("back"))+" ")],1),a("div",{staticClass:"u-spacingBottom"}),t.is_loading?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):a("div",[a("div",{staticClass:"_top"},[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{staticClass:"_title",attrs:{label:t.$t("category_title"),field_name:"title",content:t.category.title,path:t.category.$path,tag:"h3",required:!0,maxlength:20,can_edit:!1}})],1),a("ColorInput",{attrs:{label:t.$t("custom_color"),default_value:"#ffffff",value:t.category.tag_color,can_toggle:!0},on:{save:t.saveNewColor}})],1),a("div",{staticClass:"u-spacingBottom _kwSimulation"},[a("SingleKeyword",{attrs:{keyword:t.category.title+"/couleur",cat_color:t.category.tag_color}})],1),a("div",{staticClass:"u-spacingBottom u-keywords"},t._l(t.new_list_of_suggestions,(function(e){return a("SingleKeyword",{key:e,attrs:{keyword:e,can_remove:!0},on:{remove:function(a){return t.removeSuggestion(e)}}})})),1),a("div",{staticClass:"u-spacingBottom"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_suggestion,expression:"new_suggestion"}],attrs:{type:"text",placeholder:"Nouveau mot-clé"},domProps:{value:t.new_suggestion},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.newKeyword.apply(null,arguments))},input:function(e){e.target.composing||(t.new_suggestion=e.target.value)}}}),t.new_keyword_already_exists?a("div",{staticClass:"u-instructions"},[a("small",[t._v("Ce mot-clé existe déjà, vous ne pouvez pas l’ajouter. Si vous souhaitez changer la case, supprimez le de la liste puis ajoutez le à nouveau.")])]):t.new_keyword_contains_slash?a("div",{staticClass:"u-instructions"},[a("small",[t._v('Ce mot-clé contient le caractère "/", qui est interdit.')])]):t.new_suggestion.length>0?a("div",{staticClass:"u-instructions"},[a("small",[t._v("Validez avec la touche entrée.")])]):t._e()]),0===t.new_suggestion.length?a("SaveCancelButtons",{staticClass:"_scb",on:{save:t.saveNewSuggestion,cancel:t.cancel}}):t._e()],1)])},et=[],at={props:{path:String},components:{SingleKeyword:$},data(){return{category:void 0,is_loading:!0,new_list_of_suggestions:[],new_suggestion:""}},created(){},async mounted(){this.category=await this.$api.getFolder({path:this.path}),this.$api.join({room:this.path}),this.new_list_of_suggestions=this.category.list_of_suggestions||[],this.is_loading=!1},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{new_keyword_already_exists(){return this.new_list_of_suggestions.some((t=>t.toLowerCase()===this.new_suggestion.toLowerCase()))},new_keyword_contains_slash(){return this.new_suggestion.includes("/")}},methods:{removeSuggestion(t){this.new_list_of_suggestions=this.new_list_of_suggestions.filter((e=>e!==t))},newKeyword(){if(0===this.new_suggestion.length||this.new_keyword_already_exists||this.new_keyword_contains_slash)return!1;this.new_list_of_suggestions.push(this.new_suggestion),this.new_suggestion=""},cancel(){this.new_list_of_suggestions=this.category.list_of_suggestions,this.new_suggestion="",this.$emit("close")},async saveNewSuggestion(){await this.$api.updateMeta({path:this.path,new_meta:{list_of_suggestions:this.new_list_of_suggestions}}),this.$emit("close")},async saveNewColor(t){await this.$api.updateMeta({path:this.path,new_meta:{tag_color:t||""}})}}},it=at,st=(a(7865),(0,_.Z)(it,tt,et,!1,null,"2cc836ca",null)),ot=st.exports,nt={props:{},components:{SingleCategory:ot},data(){return{categories:void 0,show_create_category:!1,opened_category_path:!1,new_category_title:"",path:"categories"}},created(){},async mounted(){this.categories=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_categories_error=t.response})),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{},methods:{async createCategory(){const t=await this.$api.createFolder({path:this.path,additional_meta:{title:this.new_category_title.toUpperCase(),requested_slug:this.new_category_title,$status:"public"}});this.openCategory(this.path+"/"+t)},openCategory(t){this.opened_category_path=t},categoryStyles(t){return t.tag_color?`\n        color: ${t.tag_color}\n      `:""}}},rt=nt,lt=(a(6029),(0,_.Z)(rt,Q,X,!1,null,"07d97431",null)),ct=lt.exports,dt={props:{},components:{SuggestedCategories:ct},data(){return{settings:void 0,is_loading:!0,current_tab:"administration_and_access_control"}},created(){},async mounted(){this.settings=await this.$api.getFolder({path:""}).catch((t=>(this.is_loading=!1,t))),this.is_loading=!1,this.$api.join({room:this.settings.$path})},beforeDestroy(){this.$api.leave({room:this.settings.$path})},watch:{},computed:{},methods:{newTabShown(t){this.current_tab=t.detail.name}}},_t=dt,ut=(0,_.Z)(_t,U,G,!1,null,"304347bc",null),pt=ut.exports,ht={props:{shared_space_path:String},components:{LinkPicker:p,ChutierItem:P,MediaStack:Y,AdminLumaSettings:pt},data(){return{chutier:void 0,selected_files:[],id:`image_select_${(Math.random().toString(36)+"00000000000000000").slice(2,5)}`,show_admin_settings:!1,last_clicked:void 0,selected_items_slugs:[],show_mediastack_modal:!1,max_items_selected:15,show_link_picker:!1,show_qr_code_modal:!1,show_confirm_remove_menu:!1}},created(){},mounted(){this.listChutier(),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{selected_items_slugs(){this.show_confirm_remove_menu&&(this.show_confirm_remove_menu=!1),this.selected_items_slugs.length>this.max_items_selected&&(this.selected_items_slugs=this.selected_items_slugs.slice(0,this.max_items_selected),this.$alertify.delay(4e3).error(this.$t("notifications.too_many_items_selected")),setTimeout((()=>{this.$alertify.delay(4e3).error(this.$t("notifications.max_items_is")+" "+this.max_items_selected)}),500))},chutier_items(){const t=this.selected_items_slugs.filter((t=>this.chutier_items.some((e=>e.$path===t))));JSON.stringify(this.selected_items_slugs)!==JSON.stringify(t)&&(this.selected_items_slugs=t)}},computed:{path(){return this.connected_as.$path},url_to_page(){return this.$route.path,window.location.href},selected_items(){return this.selected_items_slugs.map((t=>this.chutier_items.find((e=>e.$path===t))||!1))},all_items_selected(){return this.selected_items.length===this.chutier_items.length},chutier_items(){if(!this.chutier||!this.chutier.$files)return[];const t=JSON.parse(JSON.stringify(this.chutier.$files));return t.sort(((t,e)=>{const a=t=>new Date(t.date_created_corrected||t.$date_created||t.$date_uploaded);return+a(e)-+a(t)})),t},chutier_items_grouped(){return this.groupFilesBy(this.chutier_items,["date_created_corrected","$date_created","$date_uploaded"],"day")}},methods:{async listChutier(){this.chutier=await this.$api.getFolder({path:this.path}).catch((t=>{this.fetch_project_error=t.response,this.is_loading=!1}))},toggleSelect(t){this.selected_items_slugs.includes(t)?this.selected_items_slugs=this.selected_items_slugs.filter((e=>e!==t)):this.selected_items_slugs.push(t)},updateInputFiles(t){this.selected_files=Array.from(t.target.files),t.target.value=""},async createNote(){const t=+new Date,e="note-"+t+".txt",a=await this.$api.uploadText({path:this.path,filename:e,content:"",additional_meta:{title:"Sans titre"}});setTimeout((()=>{this.$eventHub.$emit("chutier.item.edit",a)}),100)},async createEmbed(t){const e=+new Date,a="url-"+e+".txt",i=await this.$api.uploadText({path:this.path,filename:a,content:t,additional_meta:{title:"Titre du lien",$type:"url"}});this.show_link_picker=!1,setTimeout((()=>{this.$eventHub.$emit("chutier.item.edit",i)}),100)},async importedMedias(t){},selectAll(){this.selected_items_slugs=this.chutier_items.map((t=>t.$path))},deselectAll(){this.selected_items_slugs=[]},selectRange(t){this.selected_items_slugs=this.selected_items_slugs.concat(t),this.selected_items_slugs=[...new Set(this.selected_items_slugs)]},deselectRange(t){this.selected_items_slugs=this.selected_items_slugs.filter((e=>!t.includes(e)))},rangeIsSelected(t){return 0!==this.selected_items_slugs.length&&!t.find((t=>!1===this.selected_items_slugs.includes(t)))},async removeItemsInSelection(){for(const t of this.selected_items_slugs)await this.$api.deleteItem({path:t});this.show_confirm_remove_menu=!1}}},ft=ht,mt=(a(9977),(0,_.Z)(ft,o,n,!1,null,"62cacd04",null)),vt=mt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.shared_folder?a("div",{staticClass:"_sharedFolder",on:{scroll:t.updatedScroll}},[a("div",{staticClass:"_topbar"},[a("div",{staticClass:"_topbar--content"},[a("div",{staticClass:"_title"},[a("transition",{attrs:{name:"showBTTBtn"}},[t.current_scroll>100?a("button",{attrs:{type:"button"},on:{click:t.scrollTop}},[a("sl-icon",{attrs:{name:"arrow-up-circle-fill"}})],1):t._e()]),t._v(" ESPACE PARTAGÉ / ARCHIVE ")],1),a("div",{staticClass:"_myContent"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.show_only_my_content,expression:"show_only_my_content"}],attrs:{type:"checkbox",id:"show_only_my_content"},domProps:{checked:Array.isArray(t.show_only_my_content)?t._i(t.show_only_my_content,null)>-1:t.show_only_my_content},on:{change:function(e){var a=t.show_only_my_content,i=e.target,s=!!i.checked;if(Array.isArray(a)){var o=null,n=t._i(a,o);i.checked?n<0&&(t.show_only_my_content=a.concat([o])):n>-1&&(t.show_only_my_content=a.slice(0,n).concat(a.slice(n+1)))}else t.show_only_my_content=s}}}),a("label",{attrs:{for:"show_only_my_content"},domProps:{textContent:t._s(t.$t("show_only_my_content"))}})]),a("div",{staticClass:"_groupBy"},t._l(t.group_options,(function(e){return a("div",{key:e.key},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.group_mode,expression:"group_mode"}],attrs:{type:"radio",id:e.key},domProps:{value:e.key,checked:t._q(t.group_mode,e.key)},on:{change:function(a){t.group_mode=e.key}}}),a("label",{class:{"is--selected":e.key===t.group_mode},attrs:{for:e.key},domProps:{textContent:t._s(e.label)}})])})),0),a("div",{staticClass:"_sortSelect"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sort_order,expression:"sort_order"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sort_order=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"date_uploaded"},domProps:{textContent:t._s(t.$t("date_uploaded"))}}),a("option",{attrs:{value:"date_created"},domProps:{textContent:t._s(t.$t("date_created"))}})])])])]),a("transition",{attrs:{name:"scaleInFade_fast",mode:"out-in"}},[t.opened_file?a("ItemModal",{key:t.opened_file.$path,attrs:{file:t.opened_file,opened_file_sequence:t.opened_file_sequence,position_in_list:t.opened_file_position_in_list},on:{prevMedia:function(e){return t.navMedia(-1)},nextMedia:function(e){return t.navMedia(1)},close:t.closeFile}}):t._e()],1),a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[a("transition-group",{key:t.sort_order+"-"+t.group_mode,attrs:{tag:"div",name:"projectsList",appear:""}},t._l(t.grouped_files,(function(e){var i=e.label,s=e.files;return a("div",{key:i,staticClass:"_dayFileSection"},[a("div",{staticClass:"_label"},[t._v(" "+t._s(i)+" ")]),a("transition-group",{staticClass:"_grid",attrs:{tag:"div",name:"listComplete",appear:""}},t._l(s,(function(e){return a("SharedFolderItem",{key:e.$path,staticClass:"_file",attrs:{file:e,is_opened:t.opened_file&&t.opened_file.$path===e.$path},on:{open:function(a){return t.openFile(e.$path)}}})})),1)],1)})),0)],1),a("footer",{staticClass:"_footer"},[a("small",[a("a",{attrs:{href:"mailto:ckernreuter@luma-arles.org",target:"_blank"}},[t._v("aide/contact")]),a("br"),t._v(" version "+t._s(t.$root.app_infos.version)+" ")])])],1):t._e()},wt=[],yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_sharedFolderItem",class:{"is--opened":t.is_opened},on:{click:function(e){return t.$emit("open")}}},[a("div",{staticClass:"_title"},[t._v(" "+t._s(t.file.title)+" ")]),a("MediaContent",{staticClass:"_sharedFolderItem--preview",attrs:{file:t.file.is_stack?t.file._stack_files[0]:t.file,context:"preview",resolution:360}}),t.file.is_stack?[t.file._stack_files.length>1?a("MediaContent",{staticClass:"_sharedFolderItem--preview _sharedFolderItem--preview_stacked",attrs:{file:t.file._stack_files[1],context:"preview"}}):t._e(),t.file._stack_files.length>2?a("MediaContent",{staticClass:"_sharedFolderItem--preview _sharedFolderItem--preview_stacked",attrs:{file:t.file._stack_files[2],context:"preview"}}):t._e()]:t._e()],2)},bt=[],kt={props:{file:Object,is_opened:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},Ct=kt,xt=(a(9879),(0,_.Z)(Ct,yt,bt,!1,null,"0eed7f77",null)),$t=xt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_itemModal"},[a("div",{staticClass:"_mediaModal--overlay",on:{click:function(e){return t.$emit("close")}}}),a("div",{staticClass:"_modalContent"},[a("div",{staticClass:"_topBar"},[a("button",{staticClass:"u-button u-button_transparent u-button_icon _leftArrow",attrs:{type:"button",disabled:"first"===t.position_in_list||"alone"===t.position_in_list},on:{click:function(e){return t.$emit("prevMedia")}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 168 168"}},[a("path",{staticStyle:{fill:"var(--c-noir)"},attrs:{d:"M87.46,49.46,73.39,64.77a65.3,65.3,0,0,1-6.15,6.15A47.8,47.8,0,0,1,61,75.29H131.6V91.14H61A39.1,39.1,0,0,1,67,95.51q2.81,2.46,6.36,6.15L87.46,117,74.48,128,34.17,83.21,74.48,38.39Z"}})])]),a("div",{staticClass:"_title"},[t._v(" "+t._s(t.$t("document"))+" "+t._s(t.opened_file_sequence)+" "),a("button",{staticClass:"u-button u-button_transparent u-button_icon _closeButton",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("b-icon",{attrs:{icon:"x"}})],1)]),a("button",{staticClass:"u-button u-button_transparent u-button_icon _rightArrow",attrs:{type:"button",disabled:"last"===t.position_in_list||"alone"===t.position_in_list},on:{click:function(e){return t.$emit("nextMedia")}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 168 168"}},[a("path",{staticStyle:{fill:"#353535"},attrs:{d:"M78.31,117l14.07-15.31a65.3,65.3,0,0,1,6.15-6.15,47.52,47.52,0,0,1,6.29-4.37H34.17V75.29h70.65a39.1,39.1,0,0,1-6.08-4.37q-2.8-2.46-6.36-6.15L78.31,49.46l13-11.07L131.6,83.21,91.29,128Z"}})])])]),a("div",{staticClass:"_bottomContent"},[a("div",{staticClass:"_leftContent"},[t.current_file_shown?a("div",{key:t.current_file_shown.$path,staticClass:"_openedFile--media"},[a("MediaContent",{attrs:{file:t.current_file_shown,context:"full",resolution:1600}})],1):t._e(),t.file.is_stack?a("div",{staticClass:"_navMedia",attrs:{"data-layout":t.current_file_shown?"nav":"grid"}},t._l(t.file._stack_files,(function(e,i){return a("div",{key:e.$path,class:{"is--shown":t.current_file_index_shown===i},on:{click:function(e){return t.toggleFile(i)}}},[a("MediaContent",{attrs:{file:e,context:"preview",resolution:360}})],1)})),0):t._e()]),a("div",{staticClass:"_rightContent"},[a("FileMeta",{attrs:{file:t.file,sequence:t.file_sequence_in_stack,is_stack:t.file.is_stack,stack_file_shown:t.current_file_shown},on:{removeMain:t.removeMain,removeCurrent:t.removeCurrent,closeStack:function(e){t.current_file_index_shown=!1}}})],1)])])])},Ft=[],St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_fileMeta"},[a("div",{staticClass:"_fileMeta--main"},[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"title",content:t.file.title,path:t.file.$path,tag:"h1",can_edit:t.can_edit}})],1),a("hr"),a("div",{staticClass:"u-spacingBottom"},[a("DateField",{attrs:{field_name:"date_created_corrected",label:t.$t("date_created"),date:t.creation_date,path:t.file.$path,input_type:"datetime-local",can_edit:t.can_edit}}),a("DateField",{attrs:{field_name:"$date_uploaded",label:t.$t("date_uploaded"),date:t.file.$date_uploaded,path:t.file.$path,input_type:"datetime-local",can_edit:!1}})],1),a("hr"),a("AuthorField",{staticClass:"u-spacingBottom",attrs:{label:t.$t("authors"),field:"$admins",authors_paths:t.file.$admins,path:t.file.$path,can_edit:t.can_edit,instructions:t.$t("media_editing_instructions")}}),a("hr"),a("div",{staticClass:"u-spacingBottom"},[a("KeywordsField",{attrs:{field_name:"keywords",label:t.$t("keywords"),path:t.file.$path,keywords:t.file.keywords,can_edit:t.can_edit},on:{cancelEdit:function(t){}}})],1),a("hr"),a("TitleField",{attrs:{field_name:"description",label:t.$t("description"),content:t.file.description,path:t.file.$path,maxlength:1280,input_type:"markdown",can_edit:t.can_edit}}),a("hr"),t.is_stack?t._e():a("DownloadFile",{attrs:{file:t.file}},[a("sl-icon",{attrs:{name:"file-earmark-arrow-down"}}),t._v(" "+t._s(t.$t("download"))+" ")],1),a("RemoveMenu",{attrs:{remove_text:t.is_stack?t.$t("remove_stack"):t.$t("remove")},on:{remove:function(e){return t.$emit("removeMain")}}})],1),a("transition",{attrs:{name:"partialSlideupFade",mode:"out-in",appear:""}},[t.is_stack&&t.stack_file_shown?a("div",{key:t.stack_file_shown.$path,staticClass:"_fileMeta--stackItem"},[a("button",{staticClass:"_fileMeta--stackItem--closeStackBtn",attrs:{type:"button"},on:{click:function(e){return t.$emit("closeStack")}}}),a("div",{staticClass:"_fileMeta--stackItem--content"},[t.sequence?a("div",{staticClass:"_sequence"},[t._v(" "+t._s(t.sequence)+" ")]):t._e(),a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{field_name:"title",content:t.stack_file_shown.title,path:t.stack_file_shown.$path,tag:"h2",can_edit:t.can_edit}})],1),a("hr"),a("DateField",{attrs:{field_name:"date_created_corrected",label:t.$t("date_created"),date:t.stack_file_shown.date_created_corrected,path:t.stack_file_shown.$path,input_type:"datetime-local",can_edit:t.can_edit}}),a("hr"),a("DownloadFile",{attrs:{file:t.stack_file_shown}},[a("sl-icon",{attrs:{name:"file-earmark-arrow-down"}}),t._v(" "+t._s(t.$t("download"))+" ")],1),a("RemoveMenu",{attrs:{remove_text:t.$t("remove_item_in_stack")},on:{remove:function(e){return t.$emit("removeCurrent")}}})],1)]):t._e()])],1)},Bt=[],It={props:{sequence:[Boolean,String],file:Object,is_stack:Boolean,stack_file_shown:[Boolean,Object]},components:{KeywordsField:L},data(){return{edit_mode:!1,creation_date:this.datetimeLocal(this.file.date_created_corrected||this.file.$date_created||this.file.$date_uploaded)}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{can_edit(){return this.canLoggedinEditFolder({folder:this.file})}},methods:{}},Et=It,jt=(a(7389),(0,_.Z)(Et,St,Bt,!1,null,"27a41579",null)),Lt=jt.exports,zt={props:{file:Object,opened_file_sequence:[Boolean,String],position_in_list:String},components:{FileMeta:Lt},data(){return{current_file_index_shown:0}},created(){},mounted(){window.addEventListener("keyup",this.handleKeyPress)},beforeDestroy(){window.removeEventListener("keyup",this.handleKeyPress)},watch:{},computed:{current_file_shown(){return this.file.is_stack?!1!==this.current_file_index_shown&&this.file._stack_files[this.current_file_index_shown]:this.file},file_sequence_in_stack(){return!!this.file.is_stack&&`${this.current_file_index_shown+1}/${this.file._stack_files.length}`}},methods:{async removeMain(){if(this.file.is_stack){this.current_file_index_shown=!1,await this.$api.deleteItem({path:this.file.$path});for(const t of this.file._stack_files)await this.$api.deleteItem({path:t.$path})}else await this.$api.deleteItem({path:this.file.$path});this.$emit("close")},async removeCurrent(){let t=this.file.stack_files_metas;t=t.filter((t=>t!==this.getFilename(this.current_file_shown.$path))),await this.$api.updateMeta({path:this.file.$path,new_meta:{stack_files_metas:t}}),await this.$api.deleteItem({path:this.current_file_shown.$path})},handleKeyPress(t){this.$root.modal_is_opened||"input"===t.target.tagName.toLowerCase()||"textarea"===t.target.tagName.toLowerCase()||t.target.className.includes("ql-editor")||t.target.hasAttribute("contenteditable")||"Escape"===t.key&&this.$emit("close")},toggleFile(t){this.current_file_index_shown===t?this.current_file_index_shown=!1:this.current_file_index_shown=t}}},qt=zt,Rt=(a(397),(0,_.Z)(qt,Mt,Ft,!1,null,"348ac407",null)),Pt=Rt.exports,Kt={props:{shared_folder_path:String},components:{SharedFolderItem:$t,ItemModal:Pt},data(){return{shared_folder:void 0,sort_order:localStorage.getItem("sort_order")||"date_uploaded",show_backtotop_btn:!1,current_scroll:0,show_only_my_content:"true"===localStorage.getItem("show_only_my_content"),group_mode:localStorage.getItem("group_mode")||"day",group_options:[{key:"day",label:this.$t("day")},{key:"month",label:this.$t("month")},{key:"year",label:this.$t("year")}]}},created(){},async mounted(){this.shared_folder=await this.$api.getFolder({path:this.shared_folder_path}),this.$api.join({room:this.shared_folder_path})},beforeDestroy(){},watch:{sort_order(){localStorage.setItem("sort_order",this.sort_order)},group_mode(){localStorage.setItem("group_mode",this.group_mode)}},computed:{opened_file(){var t;return!(null===(t=this.$route.query)||void 0===t||!t.file)&&this.shared_files.find((t=>this.getFilename(t.$path)===this.$route.query.file))},opened_file_position_index(){return!!this.opened_file&&this.filtered_shared_files.findIndex((t=>t.$path===this.opened_file.$path))},opened_file_sequence(){return`${this.opened_file_position_index+1}/${this.filtered_shared_files.length}`},opened_file_position_in_list(){const t=this.opened_file_position_index;return!1===t?"none":1===this.filtered_shared_files.length?"alone":0===t?"first":t===this.filtered_shared_files.length-1?"last":"none"},shared_files(){var t;if(null===(t=this.shared_folder)||void 0===t||!t.$files)return[];const e=JSON.parse(JSON.stringify(this.shared_folder.$files)),a=e.filter((t=>t.belongs_to_stack)),i=e.reduce(((t,e)=>(e.belongs_to_stack||(e.is_stack&&e.stack_files_metas&&(e._stack_files=e.stack_files_metas.map((t=>a.find((e=>e.$path.endsWith("/"+t)))))),t.push(e)),t)),[]);return i.sort(((t,e)=>+new Date(e.$date_uploaded)-+new Date(t.$date_uploaded))),i},filtered_shared_files(){return this.shared_files.filter((t=>!this.show_only_my_content||!(!t.$admins||!t.$admins.includes(this.connected_as.$path))))},grouped_files(){let t;return"date_created"===this.sort_order?t=["date_created_corrected","$date_created","$date_uploaded"]:"date_uploaded"===this.sort_order&&(t=["$date_uploaded"]),this.groupFilesBy(this.filtered_shared_files,t,this.group_mode)}},methods:{updatedScroll(){this.current_scroll=this.$el.scrollTop},scrollTop(){this.$el.scrollTo({top:0,behavior:"smooth"})},openFile(t){let e=Object.assign({},this.$route.query)||{};const a=this.getFilename(t);e.file=a,this.$router.push({query:e})},closeFile(){let t=Object.assign({},this.$route.query)||{};delete t.file,this.$router.push({query:t})},navMedia(t){const e=this.opened_file_position_index,a=this.filtered_shared_files[e+t];a&&this.openFile(a.$path)}}},Dt=Kt,Tt=(a(6521),(0,_.Z)(Dt,gt,wt,!1,null,"6efbd18f",null)),Zt=Tt.exports,At={props:{},components:{MyChutier:vt,SharedFolder:Zt},data(){return{path:"folders",folders:void 0,shared_folder_path:void 0,show_chutier:"false"!==localStorage.getItem("show_chutier")}},created(){},async mounted(){this.$i18n.locale="fr",await this.loadFolder()},beforeDestroy(){},watch:{connected_as(){},show_chutier(){localStorage.setItem("show_chutier",this.show_chutier)}},computed:{},methods:{async loadFolder(){await this.$api.getFolders({path:"authors"}),this.folders=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_spaces_error=t.response})),0===this.folders.length?(await this.createFolder(),window.location.reload()):this.shared_folder_path=this.folders[0].$path},async createFolder(){try{const t=await this.$api.createFolder({path:this.path});return t}catch(t){}}}},Nt=At,Ot=(a(1932),(0,_.Z)(Nt,i,s,!1,null,"93208f66",null)),Ht=Ot.exports},4421:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._linkPicker[data-v-a5930508]{width:100%;margin:0 auto}._addMediaBtn[data-v-a5930508]{text-align:center;padding:calc(var(--spacing)*1)}._selectBtn[data-v-a5930508]{display:flex;place-items:center;justify-content:center;width:100%;gap:calc(var(--spacing)/1);background:#fff}iframe[data-v-a5930508]{width:100%;aspect-ratio:4/3}",""]),e["default"]=r},8707:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._kwSimulation[data-v-2cc836ca]{display:flex}",""]),e["default"]=r},7223:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._categoryRow[data-v-07d97431]{display:flex;justify-content:space-between;align-content:center;padding:calc(var(--spacing)/8) 0}._title[data-v-07d97431]{background:var(--c-noir);padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px}",""]),e["default"]=r},159:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._catBtn[data-v-26a04778]{background:#ffbe32;border-radius:5px;margin:2px;padding:2px}._fields[data-v-26a04778]{display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/1);justify-content:center;padding:calc(var(--spacing)/2)}._selectBox[data-v-26a04778]{width:20px;display:flex;place-content:center;cursor:pointer;color:var(--c-gris)}._selectBox input[data-v-26a04778]{cursor:inherit;--form-background:transparent!important;--form-control-color:var(--c-jaune);border-color:#555}._selectBox:hover input[data-v-26a04778]{border:2px solid var(--c-orange)}._infos[data-v-26a04778]{flex:1 1 auto;display:flex;flex-flow:row nowrap;justify-content:stretch;align-items:center;gap:calc(var(--spacing)/2);padding:0 calc(var(--spacing)/2);width:100%}._infos ._titleDateField[data-v-26a04778]{flex:1 1 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._chutierRow[data-v-26a04778]{width:100%;padding:calc(var(--spacing)/4) 0;margin-bottom:2px;overflow:hidden;border-radius:4px;transition:all .1s cubic-bezier(.19,1,.22,1)}._chutierRow[data-v-26a04778]:not(.is--selected):not(.is--edited):hover{background:hsla(0,0%,100%,.05)}._chutierRow.is--mousedown[data-v-26a04778]:not(.is--selected):not(.is--edited){background:rgba(0,0,0,.2)}._chutierRow.is--edited[data-v-26a04778],._chutierRow.is--selected[data-v-26a04778]{background:hsla(0,0%,100%,.15)}._chutierRow ._chutierRow--openLarge[data-v-26a04778]{display:block;cursor:pointer}._chutierRow ._chutierRow--openLarge[data-v-26a04778]:hover{opacity:.8}._chutierRow ._chutierRow--rows[data-v-26a04778]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center}._chutierRow[data-v-26a04778]:not(.is--edited){cursor:pointer}._chutierRow ._chutierRow--preview[data-v-26a04778]{position:relative;height:60px;border-radius:2px;width:60px;flex:0 0 auto;overflow:hidden;color:#fff;background:#000;font-size:70%}._chutierRow ._chutierRow--preview[data-v-26a04778]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._chutierRow ._chutierRow--preview[data-v-26a04778]  .ql-container{font-size:50%}._chutierRow ._chutierRow--largePreview[data-v-26a04778]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2;overflow:auto;background:#000}._chutierRow ._chutierRow--largePreview[data-type=text][data-v-26a04778]{padding:calc(var(--spacing))}._chutierRow ._chutierRow--largePreview[data-v-26a04778]  ._mediaContent{width:100%;height:100%;pointer-events:none}._chutierRow ._chutierRow--largePreview[data-v-26a04778]  ._mediaContent .u-floatingFsButton{display:none}._chutierRow ._chutierRow--largePreview[data-v-26a04778]  ._mediaContent ._mediaContent--pdfIframe,._chutierRow ._chutierRow--largePreview[data-v-26a04778]  ._mediaContent .plyr__control{pointer-events:auto}._chutierRow ._chutierRow--largePreview[data-v-26a04778]  ._mediaContent ._mediaContent--image{width:100%;height:100%;-o-object-fit:contain;object-fit:contain;-o-object-position:center;object-position:center}._chutierRow ._chutierRow--largePreview[data-v-26a04778]  ._mediaContent .plyr__video-wrapper{pointer-events:none}._chutierRow ._chutierRow--largePreview ._closeBtn[data-v-26a04778]{position:absolute;top:0;right:0;margin:calc(var(--spacing)/2)}._descriptionField[data-v-26a04778]{resize:vertical}._publierBtn[data-v-26a04778]{text-align:center;margin:calc(var(--spacing)/4) auto}._content[data-v-26a04778]  .ql-editor{background-color:#363636;border-color:#fff;color:#fff;padding:calc(var(--spacing)*.5)}._content[data-v-26a04778]  ._editBtn{display:none}._content[data-v-26a04778]  .ql-toolbar.ql-toolbar{top:50px;border-radius:8px;display:flex;flex-flow:row wrap;justify-content:space-between}._content[data-v-26a04778]  .ql-toolbar.ql-toolbar ._TEbtnContainer{width:auto;flex:1 0 auto;display:flex;justify-content:flex-end}",""]),e["default"]=r},5734:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._fileMeta[data-v-27a41579]{position:relative;height:100%;width:100%;overflow:auto}._fileMeta[data-v-27a41579],._fileMeta--main[data-v-27a41579]{background:var(--modal-background)}._fileMeta--main[data-v-27a41579]{padding:calc(var(--spacing)*1)}._fileMeta--stackItem[data-v-27a41579]{background:transparent;display:flex;flex-flow:column nowrap;overflow:auto}._fileMeta--stackItem--closeStackBtn[data-v-27a41579]{flex:0 0 30px;width:100%;display:block;background:var(--modal-background);opacity:.5;cursor:pointer;transition:all .25s cubic-bezier(.19,1,.22,1)}._fileMeta--stackItem--closeStackBtn[data-v-27a41579]:focus-visible,._fileMeta--stackItem--closeStackBtn[data-v-27a41579]:hover{opacity:.7}._fileMeta--stackItem--content[data-v-27a41579]{flex:1;border-top:1px solid var(--color-borders);background:var(--modal-background);padding:calc(var(--spacing)*1)}hr[data-v-27a41579]{margin:calc(var(--spacing)*2) 0}.partialSlideupFade-enter-active[data-v-27a41579],.partialSlideupFade-leave-active[data-v-27a41579]{transform:translateY(0);opacity:1;transition:all .25s cubic-bezier(.19,1,.22,1)}.partialSlideupFade-enter[data-v-27a41579],.partialSlideupFade-leave-to[data-v-27a41579]{transform:translateY(20px);opacity:0;transition:all .25s cubic-bezier(.19,1,.22,1)}",""]),e["default"]=r},5186:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._itemModal[data-v-348ac407]{position:absolute;overflow:hidden;inset:0;z-index:10;--color-borders:var(--c-gris);--modal-background:#efefef}._modalContent[data-v-348ac407]{background:var(--modal-background);padding:0;display:flex;flex-flow:column nowrap;height:100%}._topBar[data-v-348ac407]{position:relative;min-height:50px;border-bottom:1px solid var(--color-borders);padding:calc(var(--spacing)/2);display:flex;justify-content:space-between;align-items:center}._bottomContent[data-v-348ac407]{display:flex;flex-flow:row wrap;align-items:stretch;height:100%;overflow:hidden}._bottomContent>._leftContent[data-v-348ac407]{flex:3 1 0}._bottomContent>._rightContent[data-v-348ac407]{flex:1 0 0px;min-width:240px}._leftContent[data-v-348ac407]{position:relative;height:100%;overflow:auto;display:flex;flex-flow:column nowrap}._openedFile--media[data-v-348ac407]{flex:1 1 auto;overflow:hidden;position:relative;margin:calc(var(--spacing)*1)}._openedFile--media[data-v-348ac407]  ._mediaContent{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}._openedFile--media[data-v-348ac407]  ._mediaContent[data-filetype=text]{display:block;overflow:auto}._openedFile--media[data-v-348ac407]  ._mediaContent ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:contain;object-fit:contain;max-width:none}._navMedia[data-v-348ac407],._navMedia>*[data-v-348ac407]{position:relative}._navMedia>*[data-v-348ac407]{flex:0 0 150px;width:150px;height:150px;cursor:pointer;padding:calc(var(--spacing)/4)}._navMedia>.is--shown[data-v-348ac407],._navMedia[data-v-348ac407]>:focus,._navMedia[data-v-348ac407]>:hover{background:var(--c-gris)}._navMedia>.is--shown[data-v-348ac407]{opacity:.7}._navMedia[data-v-348ac407]  ._mediaContent{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}._navMedia[data-v-348ac407]  ._mediaContent ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:contain;object-fit:contain;max-width:none}._navMedia[data-layout=nav][data-v-348ac407]{flex-flow:row nowrap;width:100%;overflow:auto}._navMedia[data-layout=grid][data-v-348ac407],._navMedia[data-layout=nav][data-v-348ac407]{display:flex;gap:calc(var(--spacing)/2);padding:calc(var(--spacing)/2)}._navMedia[data-layout=grid][data-v-348ac407]{flex-flow:row wrap}._appendMedia[data-v-348ac407]{display:flex;align-content:center;justify-content:center;font-size:175%}._rightContent[data-v-348ac407]{position:relative;border-left:1px solid var(--color-borders);height:100%}._closeButton[data-v-348ac407]{padding:calc(var(--spacing)/4);margin:0}._closeButton img[data-v-348ac407]{width:1.5rem;height:1.5rem}._title[data-v-348ac407]{display:flex}",""]),e["default"]=r},5543:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._keywordsFieldEditor[data-v-31f26f57]{margin-top:calc(var(--spacing)/4)}._suggestions[data-v-31f26f57]{padding-top:calc(var(--spacing)/2);border-top:2px solid var(--c-noir)}._suggestions ._keyword[data-v-31f26f57]{cursor:pointer}._catSug[data-v-31f26f57]{border-left:2px solid #000;padding:calc(var(--spacing)/2);background:var(--c-noir)}._categories[data-v-31f26f57]{display:flex;flex-flow:row wrap;padding:0;gap:calc(var(--spacing)/2)}._category[data-v-31f26f57]{background-color:hsla(0,0%,100%,.2);padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;color:#fff;font-weight:600}._category[data-category=techniques][data-v-31f26f57]{color:var(--color-vert)}._category[data-category=gisement][data-v-31f26f57]{color:var(--color-rouge)}._category[data-category=lieu][data-v-31f26f57]{color:var(--color-bleu)}._category[data-category=domaine][data-v-31f26f57]{color:var(--color-jaune)}._category.is--active[data-v-31f26f57]{background:#000}",""]),e["default"]=r},2992:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._mediaFocus[data-v-11f46f8e]{background:var(--chutier-bg)}._itemsList[data-v-11f46f8e],._mediaFocus[data-v-11f46f8e]{padding:calc(var(--spacing)/2)}._itemsList[data-v-11f46f8e]{border:2px solid #999}._openLarge[data-v-11f46f8e]{display:block;cursor:pointer}._openLarge[data-v-11f46f8e]:hover{opacity:.8}._docPreview[data-v-11f46f8e]{position:relative;height:70px;border-radius:2px;width:70px;flex:0 0 auto;overflow:hidden}._docPreview[data-v-11f46f8e]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._changeOrderSelect[data-v-11f46f8e]{flex:0 0 50px}._fields[data-v-11f46f8e]{padding:calc(var(--spacing)*1);display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/1)}sl-icon-button[data-v-11f46f8e]::part(base){color:#fff}._shareBtn[data-v-11f46f8e]{display:flex;justify-content:center}._descriptionField[data-v-11f46f8e]{resize:vertical}",""]),e["default"]=r},6050:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._myChutier[data-v-62cacd04]{overflow:hidden;color:#fff}._itemsList[data-v-62cacd04],._myChutier[data-v-62cacd04]{position:relative;top:0;height:100%}._itemsList[data-v-62cacd04]{overflow:auto;padding-bottom:80px}._itemsList[data-v-62cacd04]::-webkit-scrollbar{height:12px;width:12px;background-color:transparent}._itemsList[data-v-62cacd04]::-webkit-scrollbar-thumb,._itemsList[data-v-62cacd04]::-webkit-scrollbar-track{border:5px solid hsla(0,0%,100%,0);border-radius:20px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._itemsList[data-v-62cacd04]::-webkit-scrollbar-track{background-color:transparent}._itemsList[data-v-62cacd04]::-webkit-scrollbar-thumb{background-color:#fff}._itemsList[data-v-62cacd04]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:5px solid hsla(0,0%,100%,0)}._topBar[data-v-62cacd04]{position:relative;text-align:center;padding:0 calc(var(--spacing)/1);margin-bottom:calc(var(--spacing)/-2);z-index:2;pointer-events:none}._adminBtn[data-v-62cacd04]{margin-bottom:calc(var(--spacing)/-4);pointer-events:auto}._topContent[data-v-62cacd04]{position:sticky;z-index:1;display:flex;gap:calc(var(--spacing)/2);top:0;padding:calc(var(--spacing)/1);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);-webkit-mask:linear-gradient(#000 75%,transparent);mask:linear-gradient(#000 75%,transparent)}._qrBtn sl-icon[data-v-62cacd04]{font-size:130%}._middleContent[data-v-62cacd04]{padding:0 calc(var(--spacing)/1)}._items[data-v-62cacd04]{flex:1 1 auto;padding:calc(var(--spacing)*2) calc(var(--spacing)/1)}._item[data-v-62cacd04]{margin-bottom:calc(var(--spacing)*2)}._item--label[data-v-62cacd04]{display:inline-block;cursor:pointer;font-weight:500;margin-bottom:4px}._item--label[data-v-62cacd04]:hover{opacity:.9}._removeMenu[data-v-62cacd04],._selectionBar[data-v-62cacd04]{position:sticky;bottom:0;width:100%;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;gap:calc(var(--spacing)/2);background:var(--chutier-bg);border-top:2px solid #000;padding:calc(var(--spacing)/4);padding-bottom:calc(var(--spacing)*2)}._removeMenu[data-v-62cacd04]{position:absolute;padding-top:calc(var(--spacing)*2);min-height:130px}._selectionBar--previews[data-v-62cacd04]{width:100%;display:flex;flex-flow:row nowrap;justify-content:center;padding:calc(var(--spacing)/2);gap:calc(var(--spacing)/4)}._selectionBar--previews[data-v-62cacd04]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._selectionBar--previews--preview[data-v-62cacd04]{flex:0 1 20px;aspect-ratio:1/1;overflow:hidden}._uploadFilesList[data-v-62cacd04]{position:absolute;bottom:0;left:0;right:0;background:var(--chutier-bg);z-index:1}",""]),e["default"]=r},1879:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._sharedFolder[data-v-6efbd18f]{padding-bottom:calc(var(--spacing)*4);border-radius:4px;overflow:auto;height:100%}._topbar[data-v-6efbd18f]{position:sticky;top:0;z-index:10;background:var(--c-bodybg);-webkit-mask:linear-gradient(#000 80%,transparent);mask:linear-gradient(#000 80%,transparent)}._topbar[data-v-6efbd18f],._topbar--content[data-v-6efbd18f]{padding:calc(var(--spacing)*1)}._topbar--content[data-v-6efbd18f]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:flex-end;gap:calc(var(--spacing)*1);line-height:1}._title[data-v-6efbd18f]{font-size:1.5em;font-weight:600}._dayFileSection[data-v-6efbd18f]{padding:calc(var(--spacing)*2)}._label[data-v-6efbd18f]{z-index:2;padding-bottom:calc(var(--spacing)*2);font-weight:600;font-size:var(--sl-font-size-normal)}._grid[data-v-6efbd18f],._label[data-v-6efbd18f]{position:relative}._grid[data-v-6efbd18f]{z-index:1;display:flex;flex-flow:row wrap;justify-content:flex-start;align-items:flex-end;gap:calc(var(--spacing)*3) calc(var(--spacing)*2)}._file[data-v-6efbd18f]{width:150px}._removeBtn[data-v-6efbd18f]{position:absolute;top:0;right:0;z-index:1}._floatingTopBtn[data-v-6efbd18f]{position:sticky;top:0;z-index:1;width:100%;display:flex;justify-content:center;padding:calc(var(--spacing)/1);pointer-events:none}._floatingTopBtn>*[data-v-6efbd18f]{border-radius:25px;padding:calc(var(--spacing)/1) calc(var(--spacing)*2);background:#000;color:#fff;pointer-events:auto}._footer[data-v-6efbd18f]{margin-top:calc(var(--spacing)*6);text-align:center}._footer a[data-v-6efbd18f]{color:inherit}._sortSelect[data-v-6efbd18f]{width:33ch}._sortSelect select[data-v-6efbd18f]{background:#fff}._myContent[data-v-6efbd18f]{display:flex;flex-flow:row wrap;align-items:center;gap:calc(var(--spacing)/2)}._groupBy[data-v-6efbd18f]{display:flex;flex-flow:row nowrap}._groupBy input[data-v-6efbd18f]{visibility:hidden;width:1px;height:1px}._groupBy label[data-v-6efbd18f]{cursor:pointer}._groupBy label.is--selected[data-v-6efbd18f]{font-weight:600}",""]),e["default"]=r},6127:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._sharedFolderItem[data-v-0eed7f77]{--stack-step:10px;position:relative;cursor:pointer;box-shadow:0 3px 10px rgba(0,0,0,.1);transition:all .4s cubic-bezier(.19,1,.22,1)}._sharedFolderItem.is--opened[data-v-0eed7f77],._sharedFolderItem[data-v-0eed7f77]:focus,._sharedFolderItem[data-v-0eed7f77]:hover{transform:translateY(-10px);box-shadow:0 13px 10px rgba(0,0,0,.1);transition:all .25s cubic-bezier(.19,1,.22,1)}._sharedFolderItem ._title[data-v-0eed7f77]{position:absolute;width:100%;top:100%;word-break:break-word;background:#fff;padding:calc(var(--spacing)/2);font-size:var(--sl-font-size-small);transform:translateY(-100%);opacity:0;transition:all .4s cubic-bezier(.19,1,.22,1)}._sharedFolderItem.is--opened[data-v-0eed7f77],._sharedFolderItem[data-v-0eed7f77]:focus,._sharedFolderItem[data-v-0eed7f77]:hover{z-index:20;--stack-step:20px}._sharedFolderItem.is--opened ._title[data-v-0eed7f77],._sharedFolderItem:focus ._title[data-v-0eed7f77],._sharedFolderItem:hover ._title[data-v-0eed7f77]{transform:translate(0);opacity:1}._sharedFolderItem--preview[data-v-0eed7f77]{background:#fff;z-index:10;border-bottom:1px solid #fff;min-height:50px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden}._sharedFolderItem--preview[data-v-0eed7f77]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._sharedFolderItem--preview[data-v-0eed7f77]  .ql-container{font-size:50%}._sharedFolderItem--preview_stacked[data-v-0eed7f77]{position:absolute;top:0;left:0;height:50px;--back-position:1;transform:translate(calc(var(--stack-step)*var(--back-position)/2),calc(var(--stack-step)*-1*var(--back-position)));width:calc(100% - var(--stack-step)*var(--back-position));transition:all .25s cubic-bezier(.19,1,.22,1);z-index:2}._sharedFolderItem--preview_stacked+._sharedFolderItem--preview_stacked[data-v-0eed7f77]{z-index:1;--back-position:2}._sharedFolderItem--preview_stacked[data-v-0eed7f77]  ._mediaContent--image{-o-object-position:top left;object-position:top left}._titleKeywords[data-v-0eed7f77]{position:absolute;bottom:0;left:0;width:100%}._removeBtn[data-v-0eed7f77]{position:absolute;bottom:0;right:0}",""]),e["default"]=r},7023:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._singleKeyword[data-v-89ab98be]{position:relative;background-color:#333;padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;color:#fff;line-height:1.2;display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/1)}._singleKeyword sl-icon-button[data-v-89ab98be]::part(base){color:currentColor;padding:0}._singleKeyword.is--clickable[data-v-89ab98be]:hover{background-color:#292929}._category[data-v-89ab98be]{font-size:80%;color:var(--cat-color)}._name[data-v-89ab98be]{font-size:110%}._addBtn[data-v-89ab98be]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;background:transparent}",""]),e["default"]=r},3720:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._chutierPane[data-v-1cb65e24]{position:absolute;z-index:10;top:-2px;width:100%;height:100%;overflow:auto;background:var(--chutier-bg);padding:calc(var(--spacing)/2);border-top:2px solid #000}._closeBtn[data-v-1cb65e24]{position:absolute;top:0;right:0;padding:4px}",""]),e["default"]=r},1192:function(t,e,a){"use strict";a.r(e);var i=a(8081),s=a.n(i),o=a(3645),n=a.n(o),r=n()(s());r.push([t.id,"._lumaView[data-v-93208f66]{height:100%;--chutier-bar-width:40px;--chutier-width:420px}._lumaView.is--mobile_view[data-v-93208f66]{--chutier-width:100%}._panes[data-v-93208f66]{height:100%}._myContent[data-v-93208f66]{position:absolute;z-index:2;width:var(--chutier-width);height:100%;background:var(--chutier-bg);box-shadow:inset -4px 0 5px rgba(0,0,0,.52);overflow:hidden;transform:translate(calc((var(--chutier-width) - var(--chutier-bar-width))*-1));transition:transform .275s cubic-bezier(.19,1,.22,1)}._myContent.is--shown[data-v-93208f66]{transform:translate(0)}._sharedContent[data-v-93208f66]{position:relative;z-index:1;height:100%;flex:1 1 auto;margin-left:var(--chutier-bar-width);width:calc(100% - var(--chutier-bar-width));transition:margin-left .5s cubic-bezier(.19,1,.22,1)}._sharedContent.has--chutier[data-v-93208f66]{width:calc(100% - var(--chutier-width));margin-left:var(--chutier-width)}._chutierBtn[data-v-93208f66]{top:0;right:0;width:var(--chutier-bar-width);height:var(--chutier-bar-width);z-index:1;transition:transform .25s cubic-bezier(.19,1,.22,1)}._chutierBtn[data-v-93208f66],._chutierBtn>button[data-v-93208f66]{position:absolute;background:transparent}._chutierBtn>button[data-v-93208f66]{width:100%;height:100%;color:#fff;border-radius:50%;left:0;font-size:1.5rem;padding:0;display:flex;justify-content:center;align-items:center;transform-origin:center;transition:transform .4s cubic-bezier(.19,1,.22,1)}._chutierBtn>button[data-v-93208f66]:focus-visible,._chutierBtn>button[data-v-93208f66]:hover{color:#ccc}._chutierBtn[data-v-93208f66]:not(.is--showingChutier){height:100%}._chutierBtn:not(.is--showingChutier)>button[data-v-93208f66]{transform:rotate(-180deg)}",""]),e["default"]=r},148:function(t,e,a){var i=a(4421);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("d9648a00",i,!0,{sourceMap:!1,shadowMode:!1})},7865:function(t,e,a){var i=a(8707);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("e7f43344",i,!0,{sourceMap:!1,shadowMode:!1})},6029:function(t,e,a){var i=a(7223);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("888e33b8",i,!0,{sourceMap:!1,shadowMode:!1})},9990:function(t,e,a){var i=a(159);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("f928a77e",i,!0,{sourceMap:!1,shadowMode:!1})},7389:function(t,e,a){var i=a(5734);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("460c8736",i,!0,{sourceMap:!1,shadowMode:!1})},397:function(t,e,a){var i=a(5186);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("784f150c",i,!0,{sourceMap:!1,shadowMode:!1})},1272:function(t,e,a){var i=a(5543);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("6c505866",i,!0,{sourceMap:!1,shadowMode:!1})},7314:function(t,e,a){var i=a(2992);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("d73e8be2",i,!0,{sourceMap:!1,shadowMode:!1})},9977:function(t,e,a){var i=a(6050);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("73584d49",i,!0,{sourceMap:!1,shadowMode:!1})},6521:function(t,e,a){var i=a(1879);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("273bbe32",i,!0,{sourceMap:!1,shadowMode:!1})},9879:function(t,e,a){var i=a(6127);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("6d22b31b",i,!0,{sourceMap:!1,shadowMode:!1})},1696:function(t,e,a){var i=a(7023);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("1ceed4a4",i,!0,{sourceMap:!1,shadowMode:!1})},4252:function(t,e,a){var i=a(3720);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("d55a2b86",i,!0,{sourceMap:!1,shadowMode:!1})},1932:function(t,e,a){var i=a(1192);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(1982).Z;s("5619557e",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=LumaView.js.map