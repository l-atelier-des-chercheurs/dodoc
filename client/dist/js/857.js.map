{"version":3,"file":"js/857.js","mappings":"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","sources":["webpack://app/./src/adc-core/capture/CaptureView.vue","webpack://app/./src/adc-core/capture/ModeSelector.vue","webpack://app/src/adc-core/capture/ModeSelector.vue","webpack://app/./src/adc-core/capture/ModeSelector.vue?5ca1","webpack://app/./src/adc-core/capture/ModeSelector.vue?fbe8","webpack://app/./src/adc-core/capture/MediaPreviewBeforeValidation.vue","webpack://app/src/adc-core/capture/MediaPreviewBeforeValidation.vue","webpack://app/./src/adc-core/capture/MediaPreviewBeforeValidation.vue?1005","webpack://app/./src/adc-core/capture/MediaPreviewBeforeValidation.vue?a23e","webpack://app/./src/adc-core/capture/MediaValidationButtons.vue","webpack://app/src/adc-core/capture/MediaValidationButtons.vue","webpack://app/./src/adc-core/capture/MediaValidationButtons.vue?10c0","webpack://app/./src/adc-core/capture/MediaValidationButtons.vue?0b6c","webpack://app/./src/adc-core/capture/StopmotionPanel.vue","webpack://app/./src/adc-core/capture/PreviewStopmotion.vue","webpack://app/src/adc-core/capture/PreviewStopmotion.vue","webpack://app/./src/adc-core/capture/PreviewStopmotion.vue?4319","webpack://app/./src/adc-core/capture/PreviewStopmotion.vue?bed5","webpack://app/src/adc-core/capture/StopmotionPanel.vue","webpack://app/./src/adc-core/capture/StopmotionPanel.vue?1dbf","webpack://app/./src/adc-core/capture/StopmotionPanel.vue?a7bd","webpack://app/./src/adc-core/capture/PickLocationForCaptures.vue","webpack://app/src/adc-core/capture/PickLocationForCaptures.vue","webpack://app/./src/adc-core/capture/PickLocationForCaptures.vue?53f0","webpack://app/./src/adc-core/capture/PickLocationForCaptures.vue?838e","webpack://app/./src/adc-core/capture/CapturePane.vue","webpack://app/src/adc-core/capture/CapturePane.vue","webpack://app/./src/adc-core/capture/CapturePane.vue?9a8c","webpack://app/./src/adc-core/capture/CapturePane.vue?183a","webpack://app/./src/adc-core/capture/CaptureSettings.vue","webpack://app/src/adc-core/capture/CaptureSettings.vue","webpack://app/./src/adc-core/capture/CaptureSettings.vue?58f3","webpack://app/./src/adc-core/capture/CaptureSettings.vue?8cf6","webpack://app/./src/adc-core/capture/CaptureEffects.vue","webpack://app/src/adc-core/capture/CaptureEffects.vue","webpack://app/./src/adc-core/capture/CaptureEffects.vue?6784","webpack://app/./src/adc-core/capture/CaptureEffects.vue?e753","webpack://app/./src/adc-core/capture/StopmotionList.vue","webpack://app/./src/adc-core/capture/StopmotionPreview.vue","webpack://app/src/adc-core/capture/StopmotionPreview.vue","webpack://app/./src/adc-core/capture/StopmotionPreview.vue?d370","webpack://app/./src/adc-core/capture/StopmotionPreview.vue?5dce","webpack://app/src/adc-core/capture/StopmotionList.vue","webpack://app/./src/adc-core/capture/StopmotionList.vue?6934","webpack://app/./src/adc-core/capture/StopmotionList.vue?9e41","webpack://app/./src/adc-core/capture/AudioEqualizer.vue","webpack://app/src/adc-core/capture/AudioEqualizer.vue","webpack://app/./src/adc-core/capture/AudioEqualizer.vue?f48a","webpack://app/./src/adc-core/capture/AudioEqualizer.vue?d297","webpack://app/./src/adc-core/capture/VectoMode.vue","webpack://app/src/adc-core/capture/VectoMode.vue","webpack://app/./src/adc-core/capture/VectoMode.vue?e2ca","webpack://app/./src/adc-core/capture/VectoMode.vue?6fe7","webpack://app/./src/adc-core/capture/LinesMode.vue","webpack://app/src/adc-core/capture/LinesMode.vue","webpack://app/./src/adc-core/capture/LinesMode.vue?fdbd","webpack://app/./src/adc-core/capture/LinesMode.vue?3662","webpack://app/src/adc-core/capture/CaptureView.vue","webpack://app/./src/adc-core/capture/CaptureView.vue?b9c4","webpack://app/./src/adc-core/capture/CaptureView.vue?ef2f","webpack://app/./node_modules/fix-webm-duration/fix-webm-duration.js","webpack://app/./node_modules/imagetracerjs/imagetracer_v1.2.6.js","webpack://app/./node_modules/recordrtc/RecordRTC.js","webpack://app/./node_modules/rtcmulticonnection/dist/RTCMultiConnection.js","webpack://app/./src/adc-core/capture/audio-activity.js","webpack://app/./src/adc-core/capture/AudioEqualizer.vue?5131","webpack://app/./src/adc-core/capture/CaptureEffects.vue?b88a","webpack://app/./src/adc-core/capture/CapturePane.vue?1c08","webpack://app/./src/adc-core/capture/CaptureSettings.vue?5df3","webpack://app/./src/adc-core/capture/CaptureView.vue?01b8","webpack://app/./src/adc-core/capture/LinesMode.vue?4281","webpack://app/./src/adc-core/capture/MediaPreviewBeforeValidation.vue?946a","webpack://app/./src/adc-core/capture/MediaValidationButtons.vue?66aa","webpack://app/./src/adc-core/capture/ModeSelector.vue?76f4","webpack://app/./src/adc-core/capture/PreviewStopmotion.vue?af5c","webpack://app/./src/adc-core/capture/StopmotionList.vue?3b90","webpack://app/./src/adc-core/capture/StopmotionPanel.vue?b8f9","webpack://app/./src/adc-core/capture/StopmotionPreview.vue?972e","webpack://app/./src/adc-core/capture/VectoMode.vue?e012","webpack://app/./src/adc-core/capture/AudioEqualizer.vue?6cee","webpack://app/./src/adc-core/capture/CaptureEffects.vue?3426","webpack://app/./src/adc-core/capture/CapturePane.vue?f58d","webpack://app/./src/adc-core/capture/CaptureSettings.vue?66be","webpack://app/./src/adc-core/capture/CaptureView.vue?0f76","webpack://app/./src/adc-core/capture/LinesMode.vue?f467","webpack://app/./src/adc-core/capture/MediaPreviewBeforeValidation.vue?1553","webpack://app/./src/adc-core/capture/MediaValidationButtons.vue?2f12","webpack://app/./src/adc-core/capture/ModeSelector.vue?2204","webpack://app/./src/adc-core/capture/PreviewStopmotion.vue?8f2c","webpack://app/./src/adc-core/capture/StopmotionList.vue?6aba","webpack://app/./src/adc-core/capture/StopmotionPanel.vue?e3e5","webpack://app/./src/adc-core/capture/StopmotionPreview.vue?6276","webpack://app/./src/adc-core/capture/VectoMode.vue?d76b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_captureview\",class:{ 'is--collapsed': _vm.collapse_capture_pane }},[_c('CapturePane',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_capture_settings),expression:\"show_capture_settings\"}],attrs:{\"label\":_vm.$t('settings'),\"pane_type\":'settings'},on:{\"close\":function($event){_vm.show_capture_settings = false}}},[_c('CaptureSettings',{attrs:{\"audio_output_deviceId\":_vm.audio_output_deviceId},on:{\"update:audio_output_deviceId\":function($event){_vm.audio_output_deviceId=$event},\"update:audio_output_device-id\":function($event){_vm.audio_output_deviceId=$event},\"setStream\":_vm.setStream,\"hasFinishedLoading\":_vm.hasFinishedLoading,\"show\":function($event){_vm.show_capture_settings = true}}})],1),_c('CapturePane',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_effects_pane),expression:\"show_effects_pane\"}],attrs:{\"label\":_vm.$t('effects'),\"pane_type\":'effects'},on:{\"close\":function($event){_vm.show_effects_pane = false}}},[_c('CaptureEffects',{attrs:{\"enable_effects\":_vm.enable_effects,\"videoElement\":_vm.$refs.videoElement,\"canvasElement\":_vm.$refs.canvasElement,\"project_path\":_vm.path},on:{\"update:enable_effects\":function($event){_vm.enable_effects=$event}}})],1),_c('div',{staticClass:\"m_captureview--videoPane\"},[_c('transition',{attrs:{\"name\":\"slidedown\",\"duration\":500}},[(_vm.show_mode_selector)?_c('ModeSelector',{attrs:{\"available_modes\":_vm.available_modes,\"selected_mode\":_vm.selected_mode,\"disable_change_mode\":_vm.is_recording ||\n            _vm.media_to_validate ||\n            _vm.mode_just_changed ||\n            _vm.is_making_stopmotion},on:{\"changeMode\":function($event){return _vm.$emit('changeMode', $event)}}}):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.is_validating_stopmotion_video),expression:\"!is_validating_stopmotion_video\"}],staticClass:\"m_captureview--videoPane--top\",class:{\n          'is--being_streamed':\n            (_vm.stream_sharing_informations_status &&\n              _vm.stream_sharing_informations_status.enabled) ||\n            (_vm.stream_access_informations_status &&\n              _vm.stream_access_informations_status.enabled),\n        }},[_c('div',{staticClass:\"m_captureview--videoPane--top--videoContainer\"},[_c('div',{staticClass:\"_videoEl\",style:(`opacity: ${_vm.show_videos ? 1 : 0}`)},[_c('video',{ref:\"videoElement\",style:(`opacity: ${_vm.enable_effects ? '0' : '1'}`),attrs:{\"autoplay\":\"\",\"playsinline\":\"\",\"controls\":_vm.stream_type === 'RemoteSources',\"muted\":\"\"},domProps:{\"srcObject\":_vm.stream,\"muted\":true}}),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.enable_effects),expression:\"enable_effects\"}],ref:\"canvasElement\",attrs:{\"width\":_vm.actual_camera_resolution.width,\"height\":_vm.actual_camera_resolution.height},on:{\"click\":(e) => _vm.updateSelectedColor({ e, type: 'click' })}})]),(_vm.selected_mode === 'vecto' && !_vm.media_to_validate)?_c('VectoMode',{ref:\"vectoElement\",attrs:{\"last_frame_from_video\":_vm.last_frame_from_video,\"number_of_colors\":_vm.vecto_number_of_colors}}):_vm._e(),(_vm.selected_mode === 'lines' && !_vm.media_to_validate)?_c('LinesMode',{ref:\"vectoElement\",attrs:{\"last_frame_from_video\":_vm.last_frame_from_video,\"angle\":_vm.lines_angle,\"boost_brightness\":_vm.lines_brightness,\"boost_contrast\":_vm.lines_contrast,\"density\":_vm.lines_density}}):_vm._e(),(_vm.selected_mode === 'audio' && !_vm.media_to_validate)?_c('AudioEqualizer',{ref:\"equalizerElement\",attrs:{\"stream\":_vm.stream,\"is_recording\":_vm.is_recording}}):_vm._e(),_c('transition-group',{staticClass:\"_capture_options\",attrs:{\"tag\":\"div\",\"name\":\"slideFromTop\",\"mode\":\"out-in\"}},[(\n                _vm.selected_mode !== 'stopmotion' &&\n                _vm.is_recording &&\n                _vm.timer_recording_in_seconds !== false\n              )?_c('label',{key:'duration',staticClass:\"u-label\",domProps:{\"innerHTML\":_vm._s(_vm.timer_recording_in_seconds)}}):_vm._e(),(\n                _vm.selected_mode === 'stopmotion' &&\n                _vm.timelapse_mode_enabled &&\n                !_vm.timelapse_event\n              )?_c('div',{key:'timelapse_interval',staticClass:\"record_options\"},[_c('label',{staticClass:\"u-label\"},[_c('span',[_vm._v(_vm._s(_vm.$t(\"interval_between_pictures\")))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.timelapse_interval),expression:\"timelapse_interval\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"min\":\"1\"},domProps:{\"value\":(_vm.timelapse_interval)},on:{\"input\":function($event){if($event.target.composing)return;_vm.timelapse_interval=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',[_vm._v(_vm._s(_vm.$t(\"seconds\")))])])]):_vm._e(),(\n                _vm.stream_sharing_informations_status &&\n                _vm.stream_sharing_informations_status.enabled &&\n                _vm.stream_type === 'LocalSources'\n              )?_c('div',{key:'stream_share_name-' + _vm.stream_sharing_informations_status.name},[_c('label',{staticClass:\"u-label\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$t('stream_currently_shared_with_name:'))}}),_c('span',[_c('strong',[_vm._v(_vm._s(_vm.stream_sharing_informations_status.name))])]),_c('br'),(\n                    _vm.stream_sharing_informations_status.peers_connected &&\n                    _vm.stream_sharing_informations_status.peers_connected.length >\n                      0\n                  )?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"other_users_connected\"))+\" = \"+_vm._s(_vm.stream_sharing_informations_status.peers_connected.length)+\" \")]):_vm._e()])]):(\n                _vm.stream_access_informations_status &&\n                _vm.stream_access_informations_status.enabled &&\n                _vm.stream_type === 'RemoteSources'\n              )?_c('div',{key:'stream_share_name-' + _vm.stream_access_informations_status.callee},[_c('label',{staticClass:\"u-label\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$t('stream_shown:'))}}),_c('span',[_c('strong',[_vm._v(_vm._s(_vm.stream_access_informations_status.callee))])])])]):_vm._e(),(\n                _vm.delay_mode_enabled &&\n                !_vm.is_recording &&\n                !_vm.media_to_validate &&\n                !_vm.delay_event\n              )?_c('div',{key:'delay_interval',staticClass:\"record_options\"},[_c('label',{staticClass:\"u-label\"},[_c('span',[_vm._v(_vm._s(_vm.$t(\"delay\").toLowerCase()))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.delay_seconds),expression:\"delay_seconds\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"min\":\"1\",\"max\":\"60\"},domProps:{\"value\":(_vm.delay_seconds)},on:{\"input\":function($event){if($event.target.composing)return;_vm.delay_seconds=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',[_vm._v(_vm._s(_vm.$t(\"seconds\")))])])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"scaleInFade\",\"mode\":\"out-in\"}},[(_vm.delay_remaining_time)?_c('label',{key:'delay_before_' + _vm.delay_remaining_time,staticClass:\"_delay_timer\",domProps:{\"innerHTML\":_vm._s(_vm.delay_remaining_time)}}):(_vm.timelapse_time_before_next_picture)?_c('label',{key:'timelapse_before_' + _vm.timelapse_time_before_next_picture,staticClass:\"_delay_timer is--timelapse\",domProps:{\"innerHTML\":_vm._s(_vm.timelapse_time_before_next_picture)}}):_vm._e()]),_c('transition',{attrs:{\"name\":\"onionSkin\",\"mode\":\"in-out\"}},[(\n                _vm.selected_mode === 'stopmotion' &&\n                _vm.onion_skin_img &&\n                _vm.stopmotion_slug &&\n                !_vm.is_validating_stopmotion_video &&\n                !(_vm.show_live_feed && _vm.onion_skin_opacity === 0)\n              )?_c('MediaContent',{key:_vm.show_live_feed ? false : _vm.onion_skin_img.$path,staticClass:\"_onion_skin\",class:{ 'is--onionskin': _vm.show_live_feed },style:(_vm.show_live_feed\n                  ? `--onionskin-opacity: ${_vm.onion_skin_opacity}`\n                  : ''),attrs:{\"file\":_vm.onion_skin_img,\"resolution\":1600}}):_vm._e()],1),(_vm.enable_grid && _vm.enable_video && !_vm.media_to_validate)?_c('div',{staticClass:\"_video_grid_overlay\"},[_c('svg',{attrs:{\"width\":_vm.actual_camera_resolution.width,\"height\":_vm.actual_camera_resolution.height,\"viewBox\":`0 0 ${_vm.actual_camera_resolution.width} ${_vm.actual_camera_resolution.height}`}},_vm._l((_vm.grids[_vm.current_grid_type]),function([x1, y1, x2, y2],index){return _c('line',{key:index,attrs:{\"x1\":x1 + '%',\"y1\":y1 + '%',\"x2\":x2 + '%',\"y2\":y2 + '%',\"vector-effect\":\"non-scaling-stroke\"}})}),0)]):_vm._e(),_c('transition',{attrs:{\"name\":\"fade_fast\"}},[_c('div',{staticClass:\"_settingsTag\"},[(!(_vm.must_validate_media && _vm.media_to_validate))?[(_vm.enable_video)?_c('button',{staticClass:\"u-button u-button_small\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_capture_settings = !_vm.show_capture_settings}}},[_vm._v(\" \"+_vm._s(_vm.actual_camera_resolution.width)+\"\"+_vm._s(_vm.actual_camera_resolution.height)+\" \")]):_vm._e(),(_vm.enable_video)?_c('button',{staticClass:\"u-button u-button_small\",class:{ 'is--active': _vm.enable_grid },attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.enable_grid = !_vm.enable_grid}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"grid\").toLowerCase())+\" \")]):_vm._e(),(_vm.enable_video && _vm.enable_grid)?_c('div',_vm._l((Object.keys(_vm.grids)),function(grid_type){return _c('button',{key:grid_type,staticClass:\"u-button u-button_small\",class:{ 'is--active': _vm.current_grid_type === grid_type },attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.current_grid_type = grid_type}}},[_vm._v(\" \"+_vm._s(_vm.$t(grid_type).toLowerCase())+\" \")])}),0):_vm._e()]:_vm._e(),_c('button',{staticClass:\"u-button u-button_small\",class:{\n                  'is--active': _vm.location_to_add_to_medias,\n                },attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_position_modal = true}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"location\"))+\" \"),_c('b-icon',{attrs:{\"icon\":!!_vm.location_to_add_to_medias ? 'pin-map-fill' : 'pin-map'}})],1),(_vm.show_position_modal)?_c('PickLocationForCaptures',{attrs:{\"location_to_add_to_medias\":_vm.location_to_add_to_medias},on:{\"update:location_to_add_to_medias\":function($event){_vm.location_to_add_to_medias=$event},\"close\":function($event){_vm.show_position_modal = false}}}):_vm._e()],2)]),_c('transition',{attrs:{\"name\":\"enableMode\",\"duration\":800}},[(_vm.mode_just_changed)?_c('div',{staticClass:\"_mode_indicator\",domProps:{\"innerHTML\":_vm._s(_vm.$t(_vm.selected_mode))}}):_vm._e()]),_c('transition',{attrs:{\"name\":\"justCaptured\"}},[(_vm.media_to_validate && _vm.must_validate_media)?_c('MediaPreviewBeforeValidation',{attrs:{\"media_to_validate\":_vm.media_to_validate,\"audio_output_deviceId\":_vm.audio_output_deviceId}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"fade_fast\"}},[(_vm.is_loading_stream)?_c('LoaderSpinner',{staticClass:\"_loader\"}):_vm._e()],1)],1)]),(_vm.stopmotion_slug)?_c('StopmotionPanel',{attrs:{\"current_stopmotion_path\":`${_vm.path}/stopmotions/${_vm.stopmotion_slug}`,\"stream\":_vm.stream,\"show_live_feed\":_vm.show_live_feed,\"is_validating_stopmotion_video\":_vm.is_validating_stopmotion_video,\"onion_skin_opacity\":_vm.onion_skin_opacity,\"stopmotion_frame_rate\":_vm.stopmotion_frame_rate},on:{\"update:show_live_feed\":function($event){_vm.show_live_feed=$event},\"update:is_validating_stopmotion_video\":function($event){_vm.is_validating_stopmotion_video=$event},\"update:onion_skin_opacity\":function($event){_vm.onion_skin_opacity=$event},\"update:stopmotion_frame_rate\":function($event){_vm.stopmotion_frame_rate=$event},\"insertMedia\":(meta_filename) => _vm.$emit('insertMedia', meta_filename),\"close\":_vm.closeStopmotionPanel,\"showPreviousImage\":function($event){_vm.onion_skin_img = $event}}}):_vm._e(),_c('transition',{attrs:{\"name\":\"slideup\",\"duration\":150,\"mode\":\"out-in\"}},[_c('div',{staticClass:\"m_captureview--videoPane--bottom\"},[_c('transition',{attrs:{\"name\":\"fade_fast\",\"duration\":150}},[(_vm.is_sending_image)?_c('LoaderSpinner'):_vm._e()],1),_c('transition',{attrs:{\"name\":\"slideup\",\"duration\":150,\"mode\":\"out-in\"}},[(\n                !(_vm.media_to_validate.temp_name && _vm.must_validate_media) &&\n                !_vm.is_validating_stopmotion_video\n              )?_c('div',{staticClass:\"m_captureview--videoPane--bottom--buttons\",class:{\n                'is--recording': _vm.is_recording && !_vm.video_recording_is_paused,\n                'is--sending_image': _vm.is_sending_image,\n              }},[_c('div',[(\n                    !_vm.is_recording &&\n                    !_vm.is_making_stopmotion &&\n                    !_vm.is_recording &&\n                    !_vm.delay_event\n                  )?[_c('button',{staticClass:\"u-button u-button_red _settingsBtn\",class:{ 'is--active': _vm.show_capture_settings },attrs:{\"type\":\"button\",\"content\":_vm.$t('settings')},on:{\"click\":function($event){_vm.show_capture_settings = !_vm.show_capture_settings}}},[_c('svg',{staticClass:\"inline-svg inline-svg_larger\",attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"15 15 140 140\",\"xml:space\":\"preserve\"}},[_c('path',{staticStyle:{\"fill\":\"currentColor\"},attrs:{\"d\":\"M122.7,88.8v-10c0-1.1,0.6-2.1,1.6-2.6l9.6-4.9l-2-5.8l-11,1.6c-1.1,0.2-2.2-0.3-2.9-1.2l-6-8.1\\n                  c-0.7-0.9-0.8-2.1-0.3-3l4.8-9.6l-5.2-3.6l-7.7,7.5c-0.8,0.8-2,1-3.1,0.7l-9.9-3c-1.1-0.3-1.9-1.3-2.1-2.4L86.8,34h-6.4l-1.7,10.4\\n                  c-0.2,1.1-0.9,2-2,2.4L66.8,50c-1.1,0.3-2.2,0.1-3.1-0.7L55.9,42l-5.1,3.7l4.9,9.4c0.5,1,0.4,2.1-0.2,3l-6,8.2\\n                  c-0.6,0.9-1.8,1.4-2.9,1.2L35.8,66L34,71.8l9.7,4.8c1,0.5,1.7,1.5,1.7,2.6v10c0,1.1-0.6,2.1-1.6,2.6l-9.6,4.9l2,5.9l10.9-1.6\\n                  c1.1-0.2,2.2,0.3,2.9,1.2l6,8.1c0.7,0.9,0.8,2.1,0.3,3l-4.8,9.6l5.1,3.6l7.7-7.5c0.8-0.8,2-1,3.1-0.7l9.9,3\\n                  c1.1,0.3,1.9,1.3,2.1,2.4l1.9,10.4h6.4l1.7-10.4c0.2-1.1,0.9-2,2-2.4l9.9-3.2c1.1-0.3,2.2-0.1,3.1,0.7l7.8,7.3l5.1-3.7l-4.9-9.4\\n                  c-0.5-1-0.4-2.1,0.2-3l6-8.1c0.7-0.9,1.8-1.4,2.9-1.2l10.8,1.5l1.8-5.9l-9.7-4.8C123.3,90.9,122.7,89.9,122.7,88.8z M84,104.5\\n                  c-11.7,0-21.1-9.2-21.1-20.5c0-11.3,9.5-20.5,21.1-20.5s21.1,9.2,21.1,20.5C105.1,95.3,95.7,104.5,84,104.5z\"}})])]),_c('button',{staticClass:\"u-button u-button_bleumarine _settingsBtn\",class:{ 'is--active': _vm.show_effects_pane },attrs:{\"type\":\"button\",\"content\":_vm.$t('effects')},on:{\"click\":function($event){_vm.show_effects_pane = !_vm.show_effects_pane}}},[_c('svg',{staticClass:\"inline-svg inline-svg_larger\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 168 168\"}},[_c('path',{staticStyle:{\"fill\":\"#fc4b60\",\"stroke\":\"#fc4b60\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"2.8346456692913384px\"},attrs:{\"d\":\"M110.3488,72.0093,114.6377,59.36a4.4236,4.4236,0,0,0-1.07-4.59,4.4946,4.4946,0,0,0-4.59-1.0745L96.3334,57.9846,85.62,50a4.5219,4.5219,0,0,0-4.6965-.4029,4.4316,4.4316,0,0,0-2.4409,4.0388l.1714,13.3577L67.7468,74.7049A4.4686,4.4686,0,0,0,68.9974,82.62L79.2565,85.807,38.1043,126.9546a2.3155,2.3155,0,1,0,3.2745,3.2746L82.5311,89.0769l3.1865,10.2638a4.4571,4.4571,0,0,0,3.5664,3.08c.12.0185.579.0556.704.0556a4.4844,4.4844,0,0,0,3.6451-1.88L101.35,89.6883l13.6078.1621a4.6074,4.6074,0,0,0,3.784-2.4316,4.4328,4.4328,0,0,0-.3983-4.6965ZM100.1869,85.0381a2.5322,2.5322,0,0,0-1.9221.9773L90.039,97.6409,85.8149,84.0423a2.3238,2.3238,0,0,0-1.5192-1.5238l-13.8764-4.03,11.8987-8.42a2.3208,2.3208,0,0,0,.9773-1.9221L82.846,53.71l11.6764,8.7168a2.3569,2.3569,0,0,0,2.1259.3381l13.5986-4.8911L105.56,71.6758a2.3135,2.3135,0,0,0,.3428,2.1259l8.8464,11.417Z\"}}),_c('path',{staticStyle:{\"fill\":\"#fc4b60\",\"stroke\":\"#fc4b60\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"2.8346456692913384px\"},attrs:{\"d\":\"M58.9467,42.2277h2.3158v2.3158a2.3159,2.3159,0,1,0,4.6317,0V42.2277H68.21a2.3159,2.3159,0,0,0,0-4.6317H65.8942V35.28a2.3159,2.3159,0,0,0-4.6317,0V37.596H58.9467a2.3159,2.3159,0,0,0,0,4.6317Z\"}}),_c('path',{staticStyle:{\"fill\":\"#fc4b60\",\"stroke\":\"#fc4b60\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"2.8346456692913384px\"},attrs:{\"d\":\"M49.6834,65.386h2.3158v2.3158a2.3159,2.3159,0,0,0,4.6317,0V65.386h2.3158a2.3159,2.3159,0,0,0,0-4.6317H56.6309V58.4385a2.3159,2.3159,0,0,0-4.6317,0v2.3158H49.6834a2.3159,2.3159,0,0,0,0,4.6317Z\"}}),_c('path',{staticStyle:{\"fill\":\"#fc4b60\",\"stroke\":\"#fc4b60\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"2.8346456692913384px\"},attrs:{\"d\":\"M133.0531,102.4392h-2.3158v-2.3158a2.3159,2.3159,0,0,0-4.6317,0v2.3158H123.79a2.3159,2.3159,0,0,0,0,4.6317h2.3158v2.3158a2.3159,2.3159,0,1,0,4.6317,0v-2.3158h2.3158a2.3159,2.3159,0,0,0,0-4.6317Z\"}}),_c('path',{staticStyle:{\"fill\":\"#fc4b60\",\"stroke\":\"#fc4b60\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"2.8346456692913384px\"},attrs:{\"d\":\"M109.8949,111.7026H107.579v-2.3159a2.3158,2.3158,0,1,0-4.6316,0v2.3159h-2.3158a2.3158,2.3158,0,1,0,0,4.6316h2.3158V118.65a2.3158,2.3158,0,1,0,4.6316,0v-2.3158h2.3159a2.3158,2.3158,0,0,0,0-4.6316Z\"}}),_c('path',{staticStyle:{\"fill\":\"#fc4b60\",\"stroke\":\"#fc4b60\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"2.8346456692913384px\"},attrs:{\"d\":\"M119.1582,46.8594h2.3158v2.3158a2.3158,2.3158,0,1,0,4.6316,0V46.8594h2.3159a2.3159,2.3159,0,0,0,0-4.6317h-2.3159V39.9119a2.3158,2.3158,0,1,0-4.6316,0v2.3158h-2.3158a2.3159,2.3159,0,1,0,0,4.6317Z\"}})])])]:_vm._e(),(_vm.selected_mode === 'video' && _vm.is_recording)?_c('button',{key:_vm.selected_mode + '_pause',staticClass:\"u-button u-button_orange u-button_inline _captureButton\",attrs:{\"type\":\"button\"},on:{\"mousedown\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.pauseOrResumeCapture()},\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.pauseOrResumeCapture()}}},[(!_vm.video_recording_is_paused)?[_c('svg',{staticClass:\"inline-svg inline-svg_larger\",staticStyle:{\"enable-background\":\"new 0 0 168 168\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 168 168\",\"xml:space\":\"preserve\"}},[_c('path',{staticStyle:{\"fill\":\"#ffbe32\"},attrs:{\"id\":\"FOND_3_\",\"d\":\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84\\n\\t\\t\\tC168,37.6,130.4,0,84,0z\"}}),_c('rect',{staticStyle:{\"fill\":\"#ff3e51\"},attrs:{\"id\":\"CENTRE_3_\",\"x\":\"35\",\"y\":\"46.7\",\"width\":\"38\",\"height\":\"76\"}}),_c('rect',{staticStyle:{\"fill\":\"#ff3e51\"},attrs:{\"id\":\"CENTRE_3_\",\"x\":\"93\",\"y\":\"46.7\",\"width\":\"38\",\"height\":\"76\"}})]),_vm._v(\"  \"),_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"pause_recording\"))+\" \")])]:[_c('svg',{staticClass:\"inline-svg inline-svg_larger\",staticStyle:{\"enable-background\":\"new 0 0 168 168\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 168 168\",\"xml:space\":\"preserve\"}},[_c('path',{staticStyle:{\"fill\":\"#ffbe32\"},attrs:{\"id\":\"FOND_3_\",\"d\":\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84\\n\\t\\t\\tC168,37.6,130.4,0,84,0z\"}}),_c('polygon',{staticStyle:{\"fill\":\"#ff3e51\"},attrs:{\"points\":\"45 40, 130 84.7, 45 128\"}})]),_vm._v(\"  \"),_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"unpause_recording\"))+\" \")])]],2):_vm._e(),(\n                    _vm.selected_mode === 'stopmotion' &&\n                    _vm.is_making_stopmotion &&\n                    !_vm.timelapse_event\n                  )?_c('button',{key:_vm.selected_mode + '_pause',staticClass:\"u-button u-button_transparent u-button_inline _captureButton\",attrs:{\"type\":\"button\"},on:{\"mousedown\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.stopStopmotion()},\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.stopStopmotion()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"back\"))+\" \")]):_vm._e()],2),_c('div',[_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[(!_vm.is_recording)?_c('button',{key:_vm.selected_mode + _vm.is_recording,staticClass:\"u-button u-button_orange _captureButton\",class:{\n                      'is--active': _vm.capture_button_pressed,\n                    },attrs:{\"type\":\"button\",\"disabled\":_vm.is_sending_image},on:{\"mousedown\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.setCaptureInit()},\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.setCaptureInit()}}},[(_vm.delay_event)?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"cancel\"))+\" \")]):[_c('img',{staticClass:\"inline-svg inline-svg_larger\",attrs:{\"src\":_vm.$root.publicPath + 'images/i_record.svg'}}),_vm._v(\"  \"),(\n                          ['photo', 'vecto', 'lines'].includes(_vm.selected_mode)\n                        )?_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$t('take_picture'))}}):(_vm.selected_mode === 'video')?_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$t('record_video'))}}):(_vm.selected_mode === 'audio')?_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$t('record_audio'))}}):(_vm.selected_mode === 'stopmotion')?_c('span',{domProps:{\"innerHTML\":_vm._s(\n                          !_vm.timelapse_mode_enabled\n                            ? _vm.$t('take_picture')\n                            : _vm.$t('start_timelapse')\n                        )}}):_vm._e()]],2):(_vm.is_recording)?_c('button',{key:_vm.selected_mode + _vm.is_recording,staticClass:\"u-button u-button_orange u-button_inline _captureButton\",attrs:{\"type\":\"button\",\"disabled\":_vm.is_sending_image},on:{\"mousedown\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.stopRecording()},\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.stopRecording()}}},[(_vm.is_sending_image && false)?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"loading\"))+\" \")]):[_c('img',{staticClass:\"inline-svg inline-svg_larger\",attrs:{\"src\":`${_vm.$root.publicPath}images/i_stop.svg`}}),_vm._v(\"  \"),(['video', 'audio'].includes(_vm.selected_mode))?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"stop_recording\"))+\" \")]):(_vm.selected_mode === 'stopmotion')?_c('span',[(_vm.timelapse_mode_enabled)?[_vm._v(\" \"+_vm._s(_vm.$t(\"stop_timelapse\"))+\" \")]:_vm._e()],2):_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"stop\"))+\" \")])]],2):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[(\n                      _vm.selected_mode === 'stopmotion' &&\n                      !_vm.timelapse_event &&\n                      !_vm.delay_event\n                    )?_c('button',{staticClass:\"_enable_timelapse_button\",class:{ 'is--active': _vm.timelapse_mode_enabled },attrs:{\"type\":\"button\",\"content\":_vm.$t('timelapse')},on:{\"click\":function($event){_vm.timelapse_mode_enabled = !_vm.timelapse_mode_enabled}}},[_c('svg',{staticClass:\"inline-svg margin-right-verysmall\",staticStyle:{\"enable-background\":\"new 0 0 81 81\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"width\":\"81px\",\"height\":\"81px\",\"viewBox\":\"0 0 81 81\",\"xml:space\":\"preserve\"}},[_c('path',{attrs:{\"d\":\"M69.6,20.8c-0.9,0.6-1.7,1.1-2.6,1.7c-6-8.8-15.9-14-26.5-14c-17.6,0-32,14.4-32,32s14.4,32,32,32\\n                  c3.1,0,6.2-0.4,9.1-1.3l-1.7-5.8c-2.4,0.7-4.9,1.1-7.4,1.1c-14.3,0-26-11.7-26-26s11.7-26,26-26c8.6,0,16.6,4.2,21.5,11.4\\n                  c-0.8,0.5-1.6,1.1-2.4,1.6c-0.7,0.4-0.9,1.1-0.8,1.7c0,0.7,0.4,1.4,1.2,1.6c0.2,0.1,0.3,0.1,0.5,0.1c2.7,0.5,5.3,1.1,8,1.6\\n                  c1,0.2,2-0.4,2.3-1.4c0.6-2.8,1.1-5.5,1.7-8.3C72.8,21.3,71,19.9,69.6,20.8z\"}}),_c('path',{attrs:{\"d\":\"M23,49.4c-1.3,0-2.4-0.8-2.9-2.1c-0.5-1.6,0.4-3.3,1.9-3.8L39,38.3V27.2c0-1.7,1.3-3,3-3s3,1.3,3,3v13.3\\n                  c0,1.3-0.8,2.5-2.1,2.9l-19,5.9C23.6,49.4,23.3,49.4,23,49.4z\"}})])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[(!_vm.is_recording && !_vm.delay_event)?_c('button',{staticClass:\"_enable_timelapse_button\",class:{ 'is--active': _vm.delay_mode_enabled },attrs:{\"type\":\"button\",\"content\":_vm.$t('delay')},on:{\"click\":function($event){_vm.delay_mode_enabled = !_vm.delay_mode_enabled}}},[_c('svg',{staticClass:\"inline-svg margin-right-verysmall\",staticStyle:{\"enable-background\":\"new 0 0 81 81\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"width\":\"81px\",\"height\":\"81px\",\"viewBox\":\"0 0 81 81\",\"xml:space\":\"preserve\"}},[_c('path',{attrs:{\"d\":\"M40.5,72.3c-15,0-27.1-12.2-27.1-27.1c0-15,12.2-27.1,27.1-27.1s27.1,12.2,27.1,27.1C67.6,60.2,55.5,72.3,40.5,72.3z\\n\\t M40.5,23.7C28.7,23.7,19,33.4,19,45.2s9.6,21.5,21.5,21.5S62,57,62,45.2S52.3,23.7,40.5,23.7z\"}}),_c('path',{attrs:{\"d\":\"M40.5,48c-1.6,0-2.8-1.3-2.8-2.8l0-16.8c0-1.6,1.3-2.8,2.8-2.8s2.8,1.3,2.8,2.8l0,16.8C43.3,46.8,42.1,48,40.5,48z\"}}),_c('rect',{attrs:{\"x\":\"32.1\",\"y\":\"10.7\",\"width\":\"16.8\",\"height\":\"5.7\"}}),_c('rect',{attrs:{\"x\":\"57.9\",\"y\":\"22.4\",\"transform\":\"matrix(0.7069 -0.7073 0.7073 0.7069 2.864400e-02 50.6141)\",\"width\":\"6.3\",\"height\":\"5.7\"}})])]):_vm._e()])],1),_c('div',[(_vm.selected_mode === 'video')?_c('div',{staticClass:\"_videoEq\"},[(_vm.enable_audio_recording_in_video)?_c('div',{staticClass:\"_tiny_equalizer\"},[_c('AudioEqualizer',{attrs:{\"stream\":_vm.stream,\"is_recording\":_vm.is_recording,\"type\":'Tiny'}})],1):_vm._e(),(!_vm.is_recording)?_c('span',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enable_audio_recording_in_video),expression:\"enable_audio_recording_in_video\"}],staticClass:\"switch\",attrs:{\"id\":\"recordVideoWithAudio\",\"type\":\"checkbox\",\"disabled\":_vm.is_recording},domProps:{\"checked\":Array.isArray(_vm.enable_audio_recording_in_video)?_vm._i(_vm.enable_audio_recording_in_video,null)>-1:(_vm.enable_audio_recording_in_video)},on:{\"change\":function($event){var $$a=_vm.enable_audio_recording_in_video,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enable_audio_recording_in_video=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enable_audio_recording_in_video=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enable_audio_recording_in_video=$$c}}}}),_c('label',{staticClass:\"u-label\",attrs:{\"for\":\"recordVideoWithAudio\"}},[_vm._v(_vm._s(_vm.$t(\"with_sound\")))])]):_vm._e()]):_vm._e(),(_vm.selected_mode === 'stopmotion')?[(!_vm.is_making_stopmotion)?_c('button',{staticClass:\"u-button u-button_bleumarine\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_stopmotion_list = !_vm.show_stopmotion_list}}},[_c('span',{},[_vm._v(_vm._s(_vm.$t(\"stopmotion_list\")))])]):_c('div',{staticClass:\"_stopmotionValidation\"},[_c('div',{staticClass:\"_stopmotionValidation--fpscounter\"},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"img_per_second\")))]),_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.stopmotion_frame_rate),expression:\"stopmotion_frame_rate\",modifiers:{\"number\":true}}],attrs:{\"size\":\"small\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.stopmotion_frame_rate=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',[_vm._v(\"2\")]),_c('option',[_vm._v(\"4\")]),_c('option',[_vm._v(\"8\")]),_c('option',[_vm._v(\"15\")]),_c('option',[_vm._v(\"24\")]),_c('option',[_vm._v(\"30\")])])]),_c('div',{},[_c('button',{staticClass:\"u-button u-button_bleuvert u-button_small\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.testStopmotion}},[_c('img',{attrs:{\"src\":`${_vm.$root.publicPath}images/i_play.svg`,\"width\":\"48\",\"height\":\"48\",\"draggable\":\"false\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"assemble\"))+\" \")])])])]:_vm._e(),(_vm.selected_mode === 'vecto')?_c('div',{staticClass:\"_mode_accessory_range\"},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"number_of_colors\"))+\" = \"+_vm._s(_vm.vecto_number_of_colors))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.vecto_number_of_colors),expression:\"vecto_number_of_colors\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"min\":\"2\",\"max\":\"7\",\"step\":\"1\"},domProps:{\"value\":(_vm.vecto_number_of_colors)},on:{\"__r\":function($event){_vm.vecto_number_of_colors=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e(),(_vm.selected_mode === 'lines')?_c('button',{staticClass:\"u-buttonLink\",class:{ 'is--active': _vm.show_lines_settings },attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_lines_settings = !_vm.show_lines_settings}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"advanced_options\"))+\" \")]):_vm._e(),(_vm.show_lines_settings)?[(_vm.selected_mode === 'lines')?_c('div',{staticClass:\"_mode_accessory_range\"},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"lines_angle\"))+\" = \"+_vm._s(_vm.lines_angle))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.lines_angle),expression:\"lines_angle\",modifiers:{\"number\":true}}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"359\",\"step\":\"1\"},domProps:{\"value\":(_vm.lines_angle)},on:{\"__r\":function($event){_vm.lines_angle=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e(),(_vm.selected_mode === 'lines')?_c('div',{staticClass:\"_mode_accessory_range\"},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"brightness\"))+\" = \"+_vm._s(_vm.lines_brightness))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.lines_brightness),expression:\"lines_brightness\",modifiers:{\"number\":true}}],staticClass:\"margin-none\",attrs:{\"type\":\"range\",\"min\":\".1\",\"max\":\"5\",\"step\":\".1\"},domProps:{\"value\":(_vm.lines_brightness)},on:{\"__r\":function($event){_vm.lines_brightness=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e(),(_vm.selected_mode === 'lines')?_c('div',{staticClass:\"_mode_accessory_range\"},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"contrast\"))+\" = \"+_vm._s(_vm.lines_contrast))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.lines_contrast),expression:\"lines_contrast\",modifiers:{\"number\":true}}],staticClass:\"margin-none\",attrs:{\"type\":\"range\",\"min\":\".1\",\"max\":\"5\",\"step\":\".1\"},domProps:{\"value\":(_vm.lines_contrast)},on:{\"__r\":function($event){_vm.lines_contrast=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e(),(_vm.selected_mode === 'lines')?_c('div',{staticClass:\"_mode_accessory_range\"},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"lines_density\"))+\" = \"+_vm._s(_vm.lines_density))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.lines_density),expression:\"lines_density\",modifiers:{\"number\":true}}],staticClass:\"margin-none\",attrs:{\"type\":\"range\",\"min\":\"0.2\",\"max\":\"0.3\",\"step\":\".01\"},domProps:{\"value\":(_vm.lines_density)},on:{\"__r\":function($event){_vm.lines_density=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e()]:_vm._e()],2)]):(_vm.media_to_validate && _vm.must_validate_media)?_c('div',{key:\"validation\"},[_c('div',{staticClass:\"_download_media_without_validation\"},[_c('small',[_c('a',{ref:\"\",attrs:{\"href\":_vm.validated_media_href_blob,\"download\":_vm.media_to_validate.temp_name,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"or_download_media_on_device\"))+\" \"),(_vm.media_to_validate.rawData)?[_vm._v(\"  \"+_vm._s(_vm.formatBytes(_vm.media_to_validate.rawData.size))+\" \")]:_vm._e()],2)])]),_c('MediaValidationButtons',{attrs:{\"media_is_being_sent\":_vm.media_is_being_sent,\"media_being_sent_percent\":_vm.media_being_sent_percent,\"can_add_to_fav\":true},on:{\"cancel\":function($event){return _vm.cancelValidation()},\"save\":function($event){return _vm.sendMedia({})},\"save_and_fav\":function($event){return _vm.sendMedia({ fav: true })}}})],1):_vm._e()])],1)])],1),(_vm.show_stopmotion_list && !_vm.is_making_stopmotion)?_c('StopmotionList',{attrs:{\"project_path\":_vm.path},on:{\"loadStopmotion\":_vm.loadStopmotion}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"_modeSelector\"},[(_vm.available_modes.length > 1)?_c('div',{staticClass:\"_arrows\"},[_c('button',{staticClass:\"u-button u-button_transparent\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.previousMode.apply(null, arguments)}}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 169 169\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"width\":\"169px\",\"height\":\"169px\",\"viewBox\":\"0 0 169 169\",\"xml:space\":\"preserve\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"stroke\":\"currentColor\",\"stroke-width\":\"10\",\"stroke-linejoin\":\"round\",\"d\":\"M60.2,84.5l48.6-24.3l0,48.6L60.2,84.5z\"}})])])]):_vm._e(),_vm._l((_vm.available_modes),function(mode){return _c('div',{key:mode},[_c('input',{attrs:{\"type\":\"radio\",\"id\":_vm.id + '_' + mode},domProps:{\"value\":mode,\"checked\":_vm.selected_mode === mode},on:{\"click\":function($event){return _vm.$emit('changeMode', mode)}}}),_c('label',{attrs:{\"for\":_vm.id + '_' + mode}},[_c('div',{staticClass:\"_picto\",attrs:{\"content\":_vm.$t(mode)}},[_c('img',{attrs:{\"src\":_vm.available_mode_picto[mode]}})]),(_vm.selected_mode === mode)?_c('span',[_vm._v(_vm._s(_vm.$t(mode)))]):_vm._e()])])}),(_vm.available_modes.length > 1)?_c('div',{staticClass:\"_arrows\"},[_c('button',{staticClass:\"u-button u-button_transparent\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.nextMode.apply(null, arguments)}}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 169 169\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"width\":\"169px\",\"height\":\"169px\",\"viewBox\":\"0 0 169 169\",\"xml:space\":\"preserve\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"stroke\":\"currentColor\",\"stroke-width\":\"10\",\"stroke-linejoin\":\"round\",\"d\":\"M108.8,84.5l-48.6,24.3V60.2L108.8,84.5z\"}})])])]):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_modeSelector\">\n    <div class=\"_arrows\" v-if=\"available_modes.length > 1\">\n      <button\n        type=\"button\"\n        class=\"u-button u-button_transparent\"\n        @click.stop.prevent=\"previousMode\"\n      >\n        <svg\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          x=\"0px\"\n          y=\"0px\"\n          width=\"169px\"\n          height=\"169px\"\n          viewBox=\"0 0 169 169\"\n          style=\"enable-background: new 0 0 169 169\"\n          xml:space=\"preserve\"\n        >\n          <path\n            fill=\"currentColor\"\n            stroke=\"currentColor\"\n            stroke-width=\"10\"\n            stroke-linejoin=\"round\"\n            d=\"M60.2,84.5l48.6-24.3l0,48.6L60.2,84.5z\"\n          />\n        </svg>\n      </button>\n    </div>\n\n    <div v-for=\"mode in available_modes\" :key=\"mode\">\n      <input\n        type=\"radio\"\n        :id=\"id + '_' + mode\"\n        :value=\"mode\"\n        :checked=\"selected_mode === mode\"\n        @click=\"$emit('changeMode', mode)\"\n      />\n      <label :for=\"id + '_' + mode\">\n        <div class=\"_picto\" :content=\"$t(mode)\">\n          <!-- v-tippy=\"\n                  mode !== selected_mode\n                    ? {\n                        placement: 'bottom',\n                        delay: [600, 0],\n                      }\n                    : ''\n                \" -->\n          <img :src=\"available_mode_picto[mode]\" />\n        </div>\n        <span v-if=\"selected_mode === mode\">{{ $t(mode) }}</span>\n      </label>\n    </div>\n\n    <div class=\"_arrows\" v-if=\"available_modes.length > 1\">\n      <button\n        type=\"button\"\n        class=\"u-button u-button_transparent\"\n        @click.stop.prevent=\"nextMode\"\n      >\n        <svg\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          x=\"0px\"\n          y=\"0px\"\n          width=\"169px\"\n          height=\"169px\"\n          viewBox=\"0 0 169 169\"\n          style=\"enable-background: new 0 0 169 169\"\n          xml:space=\"preserve\"\n        >\n          <path\n            fill=\"currentColor\"\n            stroke=\"currentColor\"\n            stroke-width=\"10\"\n            stroke-linejoin=\"round\"\n            d=\"M108.8,84.5l-48.6,24.3V60.2L108.8,84.5z\"\n          />\n        </svg>\n      </button>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    available_modes: Array,\n    selected_mode: String,\n    disable_change_mode: Boolean,\n  },\n  components: {},\n  data() {\n    return {\n      id: (Math.random().toString(36) + \"00000000000000000\").slice(2, 3 + 5),\n\n      available_mode_picto: {\n        photo: this.$root.publicPath + \"images/i_icone-dodoc_image.svg\",\n        video: this.$root.publicPath + \"images/i_icone-dodoc_video.svg\",\n        stopmotion: this.$root.publicPath + \"images/i_icone-dodoc_anim.svg\",\n        audio: this.$root.publicPath + \"images/i_icone-dodoc_audio.svg\",\n        vecto: this.$root.publicPath + \"images/i_icone-dodoc_vecto.svg\",\n        lines: this.$root.publicPath + \"images/i_icone-dodoc_lines.svg\",\n      },\n    };\n  },\n  created() {},\n  mounted() {\n    this.$eventHub.$on(\"mode.set.previous\", this.previousMode);\n    this.$eventHub.$on(\"mode.set.next\", this.nextMode);\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(\"mode.set.previous\", this.previousMode);\n    this.$eventHub.$off(\"mode.set.next\", this.nextMode);\n  },\n  watch: {},\n  computed: {},\n  methods: {\n    previousMode() {\n      if (this.disable_change_mode) return;\n\n      let current_mode_index = this.available_modes.indexOf(this.selected_mode);\n\n      if (current_mode_index > 0) {\n        this.$emit(\"changeMode\", this.available_modes[current_mode_index - 1]);\n      } else {\n        this.$emit(\n          \"changeMode\",\n          this.available_modes[this.available_modes.length - 1]\n        );\n      }\n    },\n    nextMode() {\n      if (this.disable_change_mode) return;\n\n      let current_mode_index = this.available_modes.indexOf(this.selected_mode);\n      if (current_mode_index < this.available_modes.length - 1) {\n        this.$emit(\"changeMode\", this.available_modes[current_mode_index + 1]);\n      } else {\n        this.$emit(\"changeMode\", this.available_modes[0]);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._modeSelector {\n  position: absolute;\n  z-index: 1;\n  display: flex;\n  left: 0;\n  right: 0;\n  // width: 100%;\n  flex-flow: row wrap;\n  justify-content: center;\n  align-items: center;\n  padding: calc(var(--spacing) / 1);\n  gap: calc(var(--spacing) / 2);\n  user-select: none;\n  pointer-events: none;\n\n  font-family: \"Fira Code\";\n  color: var(--c-orange);\n\n  input[disabled] + label {\n    filter: grayscale(100%);\n    // opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  > * {\n    flex: 0 0 auto;\n    display: flex;\n    flex-flow: row wrap;\n    font-family: inherit;\n    pointer-events: auto;\n    // background-color: white;\n  }\n  > ._arrows {\n    padding: 0;\n\n    button {\n      padding: 0;\n      min-height: 0;\n    }\n\n    svg {\n      width: 36px;\n      height: 36px;\n      padding: 4px;\n      // padding: calc(var(--spacing) / 4) calc(var(--spacing) / 4);\n    }\n\n    &:hover,\n    &:focus {\n      // background-color: var(--c-gris-fonce);\n    }\n  }\n\n  input {\n    width: 0px;\n    height: 0px;\n    display: none;\n\n    &:not(:checked) + label:not(:hover) {\n      // opacity: 0.3;\n      // background: transparent;\n    }\n  }\n\n  input:checked + label {\n    background-color: var(--c-orange);\n    span {\n      // color: white;\n    }\n  }\n\n  input[disabled] + label {\n    filter: grayscale(100%);\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  label {\n    font-size: inherit;\n    font-family: inherit;\n    display: inline-block;\n    text-decoration: none;\n    text-transform: uppercase;\n    font-weight: 500;\n    letter-spacing: 0.06em;\n    flex-shrink: 0;\n    margin: 0;\n    cursor: pointer;\n    // min-height: 2.43rem;\n    border-radius: 6px;\n    transition: color 0.25s ease-out, opacity 0.5s;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    justify-content: center;\n    background-color: #fff;\n    letter-spacing: 0;\n    // padding: 0 0.405rem;\n    // margin: calc(var(--spacing) / 4) calc(var(--spacing) / 4);\n    margin: 0;\n    text-align: center;\n    transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  }\n\n  ._picto {\n    border-radius: 50%;\n    overflow: hidden;\n    display: block;\n    width: 36px;\n    height: 36px;\n\n    // margin: calc(var(--spacing) / 8);\n\n    padding: 4px;\n    color: #fff;\n\n    margin-right: 0;\n  }\n\n  span {\n    display: block;\n    font-weight: 400;\n    text-transform: lowercase;\n    margin: 0.405rem;\n    font-size: 0.8rem;\n    font-family: Fira Mono;\n    text-transform: uppercase;\n    font-weight: 500;\n    letter-spacing: 0.05em;\n    color: var(--c-noir);\n    font-weight: 600;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModeSelector.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModeSelector.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ModeSelector.vue?vue&type=template&id=5fc4cc80&scoped=true\"\nimport script from \"./ModeSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ModeSelector.vue?vue&type=script&lang=js\"\nimport style0 from \"./ModeSelector.vue?vue&type=style&index=0&id=5fc4cc80&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fc4cc80\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.media_to_validate)?_c('div',{staticClass:\"m_previewValidation\"},[(_vm.media_to_validate.type === 'image')?_c('img',{attrs:{\"src\":_vm.media_to_validate.objectURL}}):(\n      _vm.media_to_validate.type === 'video' || _vm.media_to_validate.type === 'audio'\n    )?_c('vue-plyr',{staticClass:\"m_previewValidation--video\"},[_c('video',{ref:\"videoElement\",attrs:{\"src\":_vm.media_to_validate.objectURL,\"poster\":_vm.media_to_validate.preview,\"preload\":\"auto\"}})]):(_vm.media_to_validate.type === 'svg')?_c('div',{staticClass:\"m_previewValidation--svg\",domProps:{\"innerHTML\":_vm._s(_vm.media_to_validate.preview)}}):_vm._e()],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m_previewValidation\" v-if=\"media_to_validate\">\n    <img\n      v-if=\"media_to_validate.type === 'image'\"\n      :src=\"media_to_validate.objectURL\"\n    />\n    <vue-plyr\n      class=\"m_previewValidation--video\"\n      v-else-if=\"\n        media_to_validate.type === 'video' || media_to_validate.type === 'audio'\n      \"\n    >\n      <video\n        ref=\"videoElement\"\n        :src=\"media_to_validate.objectURL\"\n        :poster=\"media_to_validate.preview\"\n        preload=\"auto\"\n      />\n    </vue-plyr>\n    <div\n      v-else-if=\"media_to_validate.type === 'svg'\"\n      v-html=\"media_to_validate.preview\"\n      class=\"m_previewValidation--svg\"\n    />\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    media_to_validate: Object,\n    audio_output_deviceId: String,\n  },\n  components: {},\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {\n    this.setSinkId();\n  },\n  beforeDestroy() {},\n  watch: {\n    audio_output_deviceId: {\n      handler() {\n        this.setSinkId();\n      },\n    },\n  },\n  computed: {},\n  methods: {\n    setSinkId() {\n      if (!this.audio_output_deviceId) return;\n\n      if (\n        this.media_to_validate.type === \"video\" ||\n        this.media_to_validate.type === \"audio\"\n      ) {\n        this.$refs.videoElement.setSinkId(this.audio_output_deviceId);\n      }\n      // else if (this.media_to_validate.type === \"audio\") {\n      //   this.$refs.audioElement.setSinkId(this.audio_output_deviceId);\n      // }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_previewValidation {\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #000;\n\n  // border: 10px solid var(--c-rouge);\n  padding: calc(var(--spacing) * 1);\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n\n  > * {\n    // position: absolute;\n    object-fit: contain;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    // .padding-medium;\n  }\n  .m_previewValidation--audio {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column nowrap;\n\n    .plyr .plyr__controls {\n      color: white;\n    }\n\n    ::v-deep .plyr--audio {\n      flex: 0 0 0;\n    }\n\n    img {\n      object-fit: contain;\n    }\n\n    > * {\n      flex: 1 1 auto;\n      // width: 100%;\n      // height: 100%;\n      height: 90%;\n\n      &:last-child {\n        height: auto;\n      }\n    }\n  }\n}\n\n.play_picto {\n  position: absolute;\n  top: 0;\n  left: 0;\n  svg {\n    width: 50px;\n    height: 50px;\n    padding: 10px;\n    border-radius: 50%;\n  }\n}\n\n.m_previewValidation--svg {\n  ::v-deep {\n    svg {\n      width: 100%;\n      height: 100%;\n      max-width: 100%;\n      margin: auto;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaPreviewBeforeValidation.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaPreviewBeforeValidation.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MediaPreviewBeforeValidation.vue?vue&type=template&id=11b1d0e2&scoped=true\"\nimport script from \"./MediaPreviewBeforeValidation.vue?vue&type=script&lang=js\"\nexport * from \"./MediaPreviewBeforeValidation.vue?vue&type=script&lang=js\"\nimport style0 from \"./MediaPreviewBeforeValidation.vue?vue&type=style&index=0&id=11b1d0e2&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11b1d0e2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_mediaValidationButtons\"},[_c('button',{staticClass:\"u-button u-button_transparent _arrows\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.selectedMoveLeft}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 169 169\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"width\":\"169px\",\"height\":\"169px\",\"viewBox\":\"0 0 169 169\",\"xml:space\":\"preserve\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M60.2,84.5l48.6-24.3l0,48.6L60.2,84.5z\"}})])]),_c('button',{staticClass:\"u-button u-button_black\",class:{ 'is--active': _vm.selected_button === 0 },attrs:{\"type\":\"button\"},on:{\"mousedown\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.validateButton(0)},\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.validateButton(0)},\"mouseover\":function($event){_vm.selected_button = 0}}},[(_vm.cancelButtonIsBackButton)?[_c('span',{},[_vm._v(\" \"+_vm._s(_vm.$t(\"back\")))])]:[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 168 168\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 168 168\",\"xml:space\":\"preserve\"}},[_c('polygon',{attrs:{\"fill\":\"currentColor\",\"points\":\"42.6,57.2 57.5,42.4 84.1,69 110.8,42.4 125.6,57.2 99,83.9 125.6,110.5 110.8,125.4 \\n      84.1,98.7 57.5,125.4 42.6,110.5 69.3,83.9\"}})]),_c('span',{},[_vm._v(_vm._s(_vm.$t(\"cancel\")))])]],2),_c('div',{staticClass:\"_valStarBtns\"},[_c('button',{staticClass:\"u-button u-button_red _checkBtn\",class:{ 'is--active': _vm.selected_button === 1 },attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.validateButton(1)},\"mouseover\":function($event){_vm.selected_button = 1}}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 168 168\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 168 168\",\"xml:space\":\"preserve\"}},[_c('rect',{attrs:{\"x\":\"51.4\",\"y\":\"73.1\",\"transform\":\"matrix(0.7071 -0.7071 0.7071 0.7071 -53.857 72.9892)\",\"width\":\"19.5\",\"height\":\"56.8\",\"fill\":\"currentColor\"}}),_c('rect',{attrs:{\"x\":\"53.2\",\"y\":\"77.3\",\"transform\":\"matrix(0.7071 -0.7071 0.7071 0.7071 -31.6875 97.6563)\",\"width\":\"97.6\",\"height\":\"19.5\",\"fill\":\"currentColor\"}})]),_c('span',{staticClass:\"c-rouge\"},[_vm._v(_vm._s(_vm.$t(\"save\")))])]),(_vm.can_add_to_fav)?_c('button',{staticClass:\"u-button u-button_red _favBtn\",class:{ 'is--active': _vm.selected_button === 2 },attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.validateButton(2)},\"mouseover\":function($event){_vm.selected_button = 2}}},[_c('b-icon',{attrs:{\"icon\":_vm.selected_button === 2 ? 'star-fill' : 'star'}})],1):_vm._e()]),_c('button',{staticClass:\"u-button u-button_transparent u-colorOrange _arrows\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.selectedMoveRight}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 169 169\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"width\":\"169px\",\"height\":\"169px\",\"viewBox\":\"0 0 169 169\",\"xml:space\":\"preserve\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M108.8,84.5l-48.6,24.3V60.2L108.8,84.5z\"}})])]),(_vm.media_is_being_sent)?_c('div',{staticClass:\"m_mediaValidationButtons--overlay\"},[_c('transition',{attrs:{\"name\":\"fade_fast\",\"duration\":150}},[_c('LoaderSpinner')],1),_c('span',{staticClass:\"m_mediaValidationButtons--overlay--percent\",domProps:{\"textContent\":_vm._s(_vm.media_being_sent_percent + '%')}})],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m_mediaValidationButtons\">\n    <button\n      type=\"button\"\n      class=\"u-button u-button_transparent _arrows\"\n      @click=\"selectedMoveLeft\"\n    >\n      <svg\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        x=\"0px\"\n        y=\"0px\"\n        width=\"169px\"\n        height=\"169px\"\n        viewBox=\"0 0 169 169\"\n        style=\"enable-background: new 0 0 169 169\"\n        xml:space=\"preserve\"\n      >\n        <path fill=\"currentColor\" d=\"M60.2,84.5l48.6-24.3l0,48.6L60.2,84.5z\" />\n      </svg>\n    </button>\n\n    <button\n      type=\"button\"\n      class=\"u-button u-button_black\"\n      @mousedown.stop.prevent=\"validateButton(0)\"\n      @touchstart.stop.prevent=\"validateButton(0)\"\n      :class=\"{ 'is--active': selected_button === 0 }\"\n      @mouseover=\"selected_button = 0\"\n    >\n      <template v-if=\"cancelButtonIsBackButton\">\n        <span class> {{ $t(\"back\") }}</span>\n      </template>\n      <template v-else>\n        <svg\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          x=\"0px\"\n          y=\"0px\"\n          viewBox=\"0 0 168 168\"\n          style=\"enable-background: new 0 0 168 168\"\n          xml:space=\"preserve\"\n        >\n          <polygon\n            fill=\"currentColor\"\n            points=\"42.6,57.2 57.5,42.4 84.1,69 110.8,42.4 125.6,57.2 99,83.9 125.6,110.5 110.8,125.4 \n        84.1,98.7 57.5,125.4 42.6,110.5 69.3,83.9\"\n          />\n        </svg>\n        <span class>{{ $t(\"cancel\") }}</span>\n      </template>\n    </button>\n\n    <div class=\"_valStarBtns\">\n      <button\n        type=\"button\"\n        @click=\"validateButton(1)\"\n        class=\"u-button u-button_red _checkBtn\"\n        :class=\"{ 'is--active': selected_button === 1 }\"\n        @mouseover=\"selected_button = 1\"\n      >\n        <svg\n          version=\"1.1\"\n          class\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          x=\"0px\"\n          y=\"0px\"\n          viewBox=\"0 0 168 168\"\n          style=\"enable-background: new 0 0 168 168\"\n          xml:space=\"preserve\"\n        >\n          <rect\n            x=\"51.4\"\n            y=\"73.1\"\n            transform=\"matrix(0.7071 -0.7071 0.7071 0.7071 -53.857 72.9892)\"\n            width=\"19.5\"\n            height=\"56.8\"\n            fill=\"currentColor\"\n          />\n          <rect\n            x=\"53.2\"\n            y=\"77.3\"\n            transform=\"matrix(0.7071 -0.7071 0.7071 0.7071 -31.6875 97.6563)\"\n            width=\"97.6\"\n            height=\"19.5\"\n            fill=\"currentColor\"\n          />\n        </svg>\n        <span class=\"c-rouge\">{{ $t(\"save\") }}</span>\n      </button>\n\n      <button\n        type=\"button\"\n        v-if=\"can_add_to_fav\"\n        @click=\"validateButton(2)\"\n        class=\"u-button u-button_red _favBtn\"\n        :class=\"{ 'is--active': selected_button === 2 }\"\n        @mouseover=\"selected_button = 2\"\n      >\n        <b-icon :icon=\"selected_button === 2 ? 'star-fill' : 'star'\" />\n      </button>\n    </div>\n\n    <button\n      type=\"button\"\n      class=\"u-button u-button_transparent u-colorOrange _arrows\"\n      @click=\"selectedMoveRight\"\n    >\n      <svg\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        x=\"0px\"\n        y=\"0px\"\n        width=\"169px\"\n        height=\"169px\"\n        viewBox=\"0 0 169 169\"\n        style=\"enable-background: new 0 0 169 169\"\n        xml:space=\"preserve\"\n      >\n        <path fill=\"currentColor\" d=\"M108.8,84.5l-48.6,24.3V60.2L108.8,84.5z\" />\n      </svg>\n    </button>\n\n    <div class=\"m_mediaValidationButtons--overlay\" v-if=\"media_is_being_sent\">\n      <transition name=\"fade_fast\" :duration=\"150\">\n        <LoaderSpinner />\n      </transition>\n      <span\n        class=\"m_mediaValidationButtons--overlay--percent\"\n        v-text=\"media_being_sent_percent + '%'\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    media_is_being_sent: Boolean,\n    media_being_sent_percent: Number,\n    can_add_to_fav: Boolean,\n    cancelButtonIsBackButton: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  components: {},\n  data() {\n    return {\n      selected_button: 1,\n    };\n  },\n\n  created() {},\n  mounted() {\n    document.addEventListener(\"keyup\", this.captureKeyListener);\n  },\n  beforeDestroy() {\n    document.removeEventListener(\"keyup\", this.captureKeyListener);\n  },\n\n  watch: {},\n  computed: {},\n  methods: {\n    captureKeyListener(evt) {\n      console.log(\"METHODS  MediaValidationButtons: captureKeyListener\");\n\n      switch (evt.key) {\n        case \"w\":\n        case \"z\":\n        case \"ArrowLeft\":\n          this.selectedMoveLeft();\n          break;\n        case \"s\":\n        case \"ArrowRight\":\n          this.selectedMoveRight();\n          break;\n        case \"a\":\n        case \"q\":\n        case \" \":\n          this.validateButton(this.selected_button);\n          break;\n      }\n\n      evt.preventDefault();\n      return false;\n    },\n    selectedMoveLeft() {\n      console.log(\n        \"METHODS  MediaValidationButtons: captureKeyListener / goleft\"\n      );\n      this.selected_button += this.selected_button > 0 ? -1 : 0;\n    },\n    selectedMoveRight() {\n      console.log(\n        \"METHODS  MediaValidationButtons: captureKeyListener / goright\"\n      );\n      this.selected_button += this.selected_button < 2 ? +1 : 0;\n    },\n    validateButton(idx) {\n      if (idx === 0) {\n        this.$emit(\"cancel\");\n      } else if (idx === 1) {\n        this.$emit(\"save\");\n      } else if (idx === 2) {\n        this.$emit(\"save_and_fav\");\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_mediaValidationButtons {\n  position: relative;\n  z-index: 105;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: calc(var(--spacing) / 2);\n  flex: 0 0 auto;\n  text-transform: uppercase;\n  font-weight: 500;\n  letter-spacing: 0.06em;\n\n  font-size: var(--font-verysmall);\n  height: auto;\n\n  background-color: var(--c-noir);\n\n  > * {\n    flex: 0 1 180px;\n    display: flex;\n    align-items: center;\n  }\n\n  .m_mediaValidationButtons--overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: rgba(53, 53, 53, 1);\n    --loader-bg-color: transparent;\n    --loader-border-color: var(--c-rouge);\n\n    ::v-deep .u-loader {\n      background-color: transparent;\n    }\n\n    .m_mediaValidationButtons--overlay--percent {\n      position: absolute;\n      margin-left: 8em;\n      z-index: 55000;\n      color: white;\n      padding: 2px;\n      border-radius: 4px;\n    }\n  }\n\n  button {\n    ::v-deep svg {\n      width: 2rem;\n      height: 2rem;\n    }\n  }\n}\n\n._arrows {\n  display: none;\n}\n\n._valStarBtns {\n  display: flex;\n  align-items: stretch;\n}\n\n._favBtn {\n  margin-left: -5px;\n}\n\n._checkBtn {\n  rect {\n    fill: transparent;\n    stroke: white;\n    stroke-width: 6px;\n    fill: var(--c-rouge);\n  }\n\n  &.is--active {\n    rect {\n      fill: white;\n    }\n  }\n}\n\n._locationBtn {\n  position: absolute;\n  bottom: 100%;\n  right: 0;\n  margin: calc(var(--spacing) / 1);\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaValidationButtons.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaValidationButtons.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MediaValidationButtons.vue?vue&type=template&id=7c116abf&scoped=true\"\nimport script from \"./MediaValidationButtons.vue?vue&type=script&lang=js\"\nexport * from \"./MediaValidationButtons.vue?vue&type=script&lang=js\"\nimport style0 from \"./MediaValidationButtons.vue?vue&type=style&index=0&id=7c116abf&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c116abf\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_stopmotionpanel\",class:{ 'is--showing_video_validation': _vm.validating_video_preview }},[(!_vm.stopmotion)?_c('LoaderSpinner'):(_vm.fetch_stopmotion_error)?_c('div',[_vm._v(\" \"+_vm._s(_vm.fetch_stopmotion_error)+\" \")]):[(!_vm.validating_video_preview)?[_c('div',{staticClass:\"m_stopmotionpanel--toprowbuttons\"},[_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.image_index_currently_shown === 0 && !_vm.show_live_feed},on:{\"click\":_vm.firstImage}},[_c('b-icon',{attrs:{\"icon\":\"chevron-double-left\",\"aria-label\":_vm.$t('first_image')}})],1),_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.image_index_currently_shown === 0 && !_vm.show_live_feed},on:{\"click\":_vm.prevImage}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\",\"aria-label\":_vm.$t('previous_image')}})],1),_c('div',{},[(!_vm.preview_playing_event)?_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.medias.length <= 1},on:{\"click\":_vm.previewPlay}},[_c('b-icon',{attrs:{\"icon\":\"play-fill\"}}),_vm._v(\"  \"+_vm._s(_vm.$t(\"play\"))+\" \")],1):_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.show_live_feed},on:{\"click\":_vm.pausePreview}},[_c('b-icon',{attrs:{\"icon\":\"pause-fill\"}}),_vm._v(\"  \"+_vm._s(_vm.$t(\"pause\"))+\" \")],1)]),_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.show_live_feed},on:{\"click\":_vm.nextImage}},[_c('b-icon',{attrs:{\"icon\":\"chevron-right\",\"aria-label\":_vm.$t('next_image')}})],1),_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.show_live_feed},on:{\"click\":_vm.lastImage}},[_c('b-icon',{attrs:{\"icon\":\"chevron-double-right\",\"aria-label\":_vm.$t('last_image')}})],1)]),_c('div',{staticClass:\"m_stopmotionpanel--medias\"},[_c('transition-group',{ref:\"mediaPreviews\",staticClass:\"m_stopmotionpanel--medias--list\",attrs:{\"name\":\"listComplete\"}},[_vm._l((_vm.medias),function(media){return _c('div',{key:media.$path,staticClass:\"m_stopmotionpanel--medias--list--items\",class:{\n               'is--current_single':\n                 _vm.show_previous_photo &&\n                 _vm.show_previous_photo.$path === media.$path &&\n                 !_vm.show_live_feed,\n             },on:{\"click\":function($event){_vm.show_previous_photo = media;\n               _vm.$emit('update:show_live_feed', false);}}},[_c('MediaContent',{attrs:{\"file\":media,\"resolution\":240}}),(\n                 _vm.show_previous_photo &&\n                 _vm.show_previous_photo.$path === media.$path &&\n                 !_vm.show_live_feed\n               )?_c('button',{staticClass:\"u-button u-button_icon _removeMedia\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeMedia(_vm.show_previous_photo.$path)}}},[_c('b-icon',{attrs:{\"icon\":\"trash\"}})],1):_vm._e()],1)}),_c('div',{key:'live_feed',staticClass:\"m_stopmotionpanel--medias--list--items\",class:{ 'is--current_single': _vm.show_live_feed },attrs:{\"data-content\":_vm.$t('live')},on:{\"click\":_vm.showVideoFeed}},[_c('video',{ref:\"videoElement\",attrs:{\"autoplay\":\"\",\"playsinline\":\"\",\"muted\":\"\"},domProps:{\"muted\":true,\"srcObject\":_vm.stream}}),(_vm.show_live_feed)?_c('div',{key:'_onion_skin',staticClass:\"_onion_skin\"},[_c('label',{staticClass:\"u-label\"},[_c('span',[_vm._v(_vm._s(_vm.$t(\"onion_skin\").toLowerCase()))]),_c('input',{staticClass:\"_onion_skin_range\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\".9\",\"step\":\"0.01\",\"data-use\":\"onionskin\"},domProps:{\"value\":_vm.onion_skin_opacity},on:{\"input\":function($event){return _vm.$emit('update:onion_skin_opacity', +$event.target.value)}}})])]):_vm._e()])],2)],1)]:_c('div',{ref:\"videoPreview\",staticClass:\"m_stopmotionpanel--videopreview\"},[_c('PreviewStopmotion',{attrs:{\"medias\":_vm.medias,\"frame_rate\":_vm.frame_rate,\"created_stopmotion\":_vm.created_stopmotion},on:{\"update:frame_rate\":function($event){_vm.frame_rate=$event}}}),_c('transition',{attrs:{\"name\":\"fade_fast\",\"duration\":150,\"mode\":\"out-in\"}},[(_vm.compilation_in_progress)?_c('LoaderSpinner'):_vm._e()],1)],1),(_vm.validating_video_preview)?_c('MediaValidationButtons',{attrs:{\"media_is_being_sent\":_vm.media_is_being_sent,\"can_add_to_fav\":true,\"cancelButtonIsBackButton\":true},on:{\"cancel\":_vm.backToStopmotion,\"save\":function($event){return _vm.exportStopmotion()}}}):_vm._e(),(_vm.media_is_being_sent)?_c('div',{staticClass:\"_loader\"},[_c('LoaderSpinner')],1):_vm._e()]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"_player\"},[(!_vm.created_stopmotion)?[_c('MediaContent',{attrs:{\"file\":_vm.current_media,\"resolution\":1600}}),(!_vm.is_playing)?_c('div',{staticClass:\"_miniListPreview\"},_vm._l((_vm.medias),function(media){return _c('MediaContent',{key:'previews-' + media.$path,attrs:{\"file\":media,\"resolution\":1600}})}),1):_vm._e(),_c('div',{staticClass:\"_imgCount\"},[_vm._v(\" \"+_vm._s(_vm.current_media_index + 1)+\"/\"+_vm._s(_vm.medias.length)+\" \")]),_c('button',{staticClass:\"_playPauseBtn\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.playPausePreview}},[(!_vm.is_playing)?_c('img',{attrs:{\"src\":`${_vm.$root.publicPath}images/i_play.svg`,\"width\":\"48\",\"height\":\"48\",\"draggable\":\"false\"}}):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.is_playing)?_c('div',{staticClass:\"_fps\"},[_c('div',{},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"img_per_second\")))]),_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.new_frame_rate),expression:\"new_frame_rate\",modifiers:{\"number\":true}}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.new_frame_rate=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',[_vm._v(\"2\")]),_c('option',[_vm._v(\"4\")]),_c('option',[_vm._v(\"8\")]),_c('option',[_vm._v(\"15\")]),_c('option',[_vm._v(\"24\")]),_c('option',[_vm._v(\"30\")])])])]):_vm._e()])]:[_c('MediaContent',{key:_vm.created_stopmotion.$path,attrs:{\"context\":\"full\",\"file\":_vm.created_stopmotion,\"resolution\":1600}})]],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"_player\">\n      <template v-if=\"!created_stopmotion\">\n        <MediaContent :file=\"current_media\" :resolution=\"1600\" />\n        <div v-if=\"!is_playing\" class=\"_miniListPreview\">\n          <MediaContent\n            v-for=\"media in medias\"\n            :key=\"'previews-' + media.$path\"\n            :file=\"media\"\n            :resolution=\"1600\"\n          />\n        </div>\n\n        <div class=\"_imgCount\">\n          {{ current_media_index + 1 }}/{{ medias.length }}\n        </div>\n\n        <button type=\"button\" class=\"_playPauseBtn\" @click=\"playPausePreview\">\n          <img\n            v-if=\"!is_playing\"\n            :src=\"`${$root.publicPath}images/i_play.svg`\"\n            width=\"48\"\n            height=\"48\"\n            draggable=\"false\"\n          />\n          <!-- {{ $t(\"play\") }} -->\n        </button>\n\n        <transition name=\"fade\">\n          <div class=\"_fps\" v-if=\"!is_playing\">\n            <div class=\"\">\n              <label class=\"u-label\">{{ $t(\"img_per_second\") }}</label>\n              <select v-model.number=\"new_frame_rate\">\n                <option>2</option>\n                <option>4</option>\n                <option>8</option>\n                <option>15</option>\n                <option>24</option>\n                <option>30</option>\n              </select>\n            </div>\n          </div>\n        </transition>\n      </template>\n      <template v-else>\n        <MediaContent\n          :key=\"created_stopmotion.$path\"\n          context=\"full\"\n          :file=\"created_stopmotion\"\n          :resolution=\"1600\"\n        />\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    medias: Array,\n    frame_rate: Number,\n    created_stopmotion: [Boolean, Object],\n  },\n  components: {},\n  data() {\n    return {\n      current_media_index: 0,\n      is_playing: false,\n      preview_playing_event: undefined,\n      new_frame_rate: this.frame_rate,\n    };\n  },\n  created() {},\n  mounted() {\n    // this.playPreview();\n  },\n  beforeDestroy() {},\n  watch: {\n    new_frame_rate() {\n      this.$emit(\"update:frame_rate\", this.new_frame_rate);\n    },\n  },\n  computed: {\n    current_media() {\n      return this.medias[this.current_media_index];\n    },\n  },\n  methods: {\n    playPausePreview() {\n      if (!this.is_playing) this.playPreview();\n      else this.stopPreview();\n    },\n    playPreview() {\n      this.is_playing = true;\n      this.current_media_index = 0;\n\n      this.preview_playing_event = window.setInterval(() => {\n        this.current_media_index++;\n        this.$nextTick(() => {\n          if (this.current_media_index === this.medias.length - 1)\n            this.stopPreview();\n        });\n      }, 1000 / this.frame_rate);\n    },\n    stopPreview() {\n      this.is_playing = false;\n\n      window.clearInterval(this.preview_playing_event);\n      this.preview_playing_event = undefined;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._player {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-flow: column nowrap;\n\n  justify-content: center;\n  align-items: center;\n  background: black;\n}\n\n._playPauseBtn {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n\n  background: transparent;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  padding: calc(var(--spacing) / 1);\n\n  button {\n    border-radius: 50%;\n    padding: calc(var(--spacing) / 2);\n  }\n}\n\n._fps {\n  position: absolute;\n\n  display: flex;\n  justify-content: center;\n  bottom: 0;\n  width: 100%;\n  padding: calc(var(--spacing) / 1);\n}\n\n._miniListPreview {\n  display: flex;\n  flex-flow: row wrap;\n  // height: 100%;\n  // width: 100%;\n  position: absolute;\n  gap: 1px;\n\n  z-index: -1;\n  opacity: 0.5;\n\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n  padding: calc(var(--spacing) * 2);\n\n  > * {\n    width: 50px;\n    height: 50px;\n  }\n}\n\n._imgCount {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  padding: calc(var(--spacing) / 2);\n  color: white;\n  font-size: var(--sl-font-size-x-small);\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PreviewStopmotion.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PreviewStopmotion.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PreviewStopmotion.vue?vue&type=template&id=665b1143&scoped=true\"\nimport script from \"./PreviewStopmotion.vue?vue&type=script&lang=js\"\nexport * from \"./PreviewStopmotion.vue?vue&type=script&lang=js\"\nimport style0 from \"./PreviewStopmotion.vue?vue&type=style&index=0&id=665b1143&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"665b1143\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"m_stopmotionpanel\"\n    :class=\"{ 'is--showing_video_validation': validating_video_preview }\"\n  >\n    <LoaderSpinner v-if=\"!stopmotion\" />\n    <div v-else-if=\"fetch_stopmotion_error\">\n      {{ fetch_stopmotion_error }}\n    </div>\n    <template v-else>\n      <template v-if=\"!validating_video_preview\">\n        <div class=\"m_stopmotionpanel--toprowbuttons\">\n          <button\n            type=\"button\"\n            class=\"u-button u-button_black\"\n            @click=\"firstImage\"\n            :disabled=\"image_index_currently_shown === 0 && !show_live_feed\"\n          >\n            <b-icon\n              icon=\"chevron-double-left\"\n              :aria-label=\"$t('first_image')\"\n            />\n          </button>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_black\"\n            @click=\"prevImage\"\n            :disabled=\"image_index_currently_shown === 0 && !show_live_feed\"\n          >\n            <b-icon icon=\"chevron-left\" :aria-label=\"$t('previous_image')\" />\n          </button>\n\n          <div class=\"\">\n            <button\n              v-if=\"!preview_playing_event\"\n              type=\"button\"\n              class=\"u-button u-button_black\"\n              :disabled=\"medias.length <= 1\"\n              @click=\"previewPlay\"\n            >\n              <b-icon icon=\"play-fill\" />\n              &nbsp;\n              {{ $t(\"play\") }}\n            </button>\n            <button\n              v-else\n              type=\"button\"\n              class=\"u-button u-button_black\"\n              :disabled=\"show_live_feed\"\n              @click=\"pausePreview\"\n            >\n              <b-icon icon=\"pause-fill\" />\n              &nbsp;\n              {{ $t(\"pause\") }}\n            </button>\n          </div>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_black\"\n            @click=\"nextImage\"\n            :disabled=\"show_live_feed\"\n          >\n            <b-icon icon=\"chevron-right\" :aria-label=\"$t('next_image')\" />\n          </button>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_black\"\n            @click=\"lastImage\"\n            :disabled=\"show_live_feed\"\n          >\n            <b-icon\n              icon=\"chevron-double-right\"\n              :aria-label=\"$t('last_image')\"\n            />\n          </button>\n\n          <!-- <div class=\"m_stopmotionpanel--toprowbuttons--counter\">\n          <button\n            type=\"button\"\n            class=\"\"\n            @click=\"prevImage\"\n            :disabled=\"image_index_currently_shown === 0\"\n          >\n            \n          </button>\n          <label class=\"c-blanc u-label\">\n            {{ $t(\"image\") }} {{ image_index_currently_shown + 1 }}/{{\n              medias.length\n            }}\n          </label>\n          <button type=\"button\" class=\"\" @click=\"nextImage\"></button>\n        </div>\n -->\n        </div>\n        <div class=\"m_stopmotionpanel--medias\">\n          <transition-group\n            class=\"m_stopmotionpanel--medias--list\"\n            name=\"listComplete\"\n            ref=\"mediaPreviews\"\n          >\n            <div\n              v-for=\"media in medias\"\n              :key=\"media.$path\"\n              @click=\"\n                show_previous_photo = media;\n                $emit('update:show_live_feed', false);\n              \"\n              class=\"m_stopmotionpanel--medias--list--items\"\n              :class=\"{\n                'is--current_single':\n                  show_previous_photo &&\n                  show_previous_photo.$path === media.$path &&\n                  !show_live_feed,\n              }\"\n            >\n              <MediaContent :file=\"media\" :resolution=\"240\" />\n\n              <button\n                type=\"button\"\n                v-if=\"\n                  show_previous_photo &&\n                  show_previous_photo.$path === media.$path &&\n                  !show_live_feed\n                \"\n                @click=\"removeMedia(show_previous_photo.$path)\"\n                class=\"u-button u-button_icon _removeMedia\"\n              >\n                <b-icon icon=\"trash\" />\n              </button>\n            </div>\n\n            <!-- <div key=\"separator\" class=\"_separator\" /> -->\n\n            <div\n              class=\"m_stopmotionpanel--medias--list--items\"\n              :class=\"{ 'is--current_single': show_live_feed }\"\n              @click=\"showVideoFeed\"\n              :key=\"'live_feed'\"\n              :data-content=\"$t('live')\"\n            >\n              <video\n                ref=\"videoElement\"\n                autoplay\n                playsinline\n                muted\n                :srcObject.prop=\"stream\"\n              />\n\n              <div\n                class=\"_onion_skin\"\n                :key=\"'_onion_skin'\"\n                v-if=\"show_live_feed\"\n              >\n                <label class=\"u-label\">\n                  <span>{{ $t(\"onion_skin\").toLowerCase() }}</span>\n                  <input\n                    class=\"_onion_skin_range\"\n                    type=\"range\"\n                    min=\"0\"\n                    max=\".9\"\n                    step=\"0.01\"\n                    :value=\"onion_skin_opacity\"\n                    @input=\"\n                      $emit('update:onion_skin_opacity', +$event.target.value)\n                    \"\n                    data-use=\"onionskin\"\n                  />\n                </label>\n              </div>\n            </div>\n          </transition-group>\n        </div>\n      </template>\n\n      <div v-else class=\"m_stopmotionpanel--videopreview\" ref=\"videoPreview\">\n        <PreviewStopmotion\n          :medias=\"medias\"\n          :frame_rate.sync=\"frame_rate\"\n          :created_stopmotion=\"created_stopmotion\"\n        />\n        <transition name=\"fade_fast\" :duration=\"150\" mode=\"out-in\">\n          <LoaderSpinner v-if=\"compilation_in_progress\" />\n        </transition>\n      </div>\n\n      <MediaValidationButtons\n        v-if=\"validating_video_preview\"\n        :media_is_being_sent=\"media_is_being_sent\"\n        :can_add_to_fav=\"true\"\n        :cancelButtonIsBackButton=\"true\"\n        @cancel=\"backToStopmotion\"\n        @save=\"exportStopmotion()\"\n      />\n\n      <div class=\"_loader\" v-if=\"media_is_being_sent\">\n        <LoaderSpinner />\n      </div>\n    </template>\n  </div>\n</template>\n<script>\nimport MediaValidationButtons from \"./MediaValidationButtons.vue\";\nimport PreviewStopmotion from \"./PreviewStopmotion.vue\";\n\nexport default {\n  props: {\n    current_stopmotion_path: String,\n    stream: MediaStream,\n    show_live_feed: Boolean,\n    is_validating_stopmotion_video: Boolean,\n    onion_skin_opacity: Number,\n    stopmotion_frame_rate: Number,\n  },\n  components: {\n    MediaValidationButtons,\n    PreviewStopmotion,\n  },\n  data() {\n    return {\n      stopmotion: null,\n\n      fetch_stopmotion_error: undefined,\n\n      frame_rate: this.stopmotion_frame_rate,\n      validating_video_preview: false,\n      show_previous_photo: false,\n      media_is_being_sent: false,\n      show_advanced_menu: false,\n\n      compilation_in_progress: false,\n      created_stopmotion: false,\n\n      preview_playing_event: undefined,\n    };\n  },\n\n  created() {},\n  async mounted() {\n    this.$eventHub.$on(\"stopmotion.addImage\", this.appendToStopMotion);\n    this.$eventHub.$on(\"stopmotion.test\", this.testStopmotion);\n\n    const stopmotion = await this.$api\n      .getFolder({\n        path: this.current_stopmotion_path,\n      })\n      .catch((err) => {\n        this.fetch_stopmotion_error = err.response;\n      });\n    this.stopmotion = stopmotion;\n    this.$api.join({ room: this.current_stopmotion_path });\n  },\n  beforeDestroy() {\n    this.$api.leave({ room: this.current_stopmotion_path });\n    this.$eventHub.$off(\"stopmotion.addImage\", this.appendToStopMotion);\n  },\n\n  watch: {\n    frame_rate() {\n      this.$emit(\"update:stopmotion_frame_rate\", this.frame_rate);\n    },\n    stopmotion_frame_rate() {\n      this.frame_rate = this.stopmotion_frame_rate;\n    },\n    medias() {\n      if (this.medias.length > 0) {\n        if (this.show_live_feed) {\n          this.show_previous_photo = this.medias[this.medias.length - 1];\n          this.$nextTick(() => {\n            this.$nextTick(() => {\n              this.$refs.mediaPreviews.$el.scrollLeft = 1000000;\n            });\n          });\n        }\n      }\n    },\n    stream: {\n      handler() {\n        // if (this.stream && this.$refs.videoElement) {\n        //   if (\"srcObject\" in this.$refs.videoElement)\n        //     this.$refs.videoElement.srcObject = this.stream;\n        //   // Avoid using this in new browsers, as it is going away.\n        //   else\n        //     this.$refs.videoElement.src = window.URL.createObjectURL(\n        //       this.stream\n        //     );\n        // }\n      },\n      immediate: true,\n    },\n    show_previous_photo() {\n      this.$emit(\"showPreviousImage\", this.show_previous_photo);\n\n      // scroll to\n\n      this.$nextTick(() => {\n        const active = document.querySelector(\n          \".m_stopmotionpanel--medias--list--items.is--current_single\"\n        );\n        if (active)\n          active.scrollIntoView({\n            behavior: \"smooth\",\n            inline: \"nearest\",\n          });\n      });\n    },\n    validating_video_preview() {\n      this.$emit(\n        \"update:is_validating_stopmotion_video\",\n        this.validating_video_preview\n      );\n    },\n  },\n  computed: {\n    medias() {\n      if (this.stopmotion?.images_list && this.stopmotion?.$files?.length > 0) {\n        const medias = this.stopmotion.images_list.reduce(\n          (acc, meta_filename) => {\n            const m = this.stopmotion.$files.find((f) =>\n              f.$path.endsWith(meta_filename)\n            );\n            if (m) acc.push(m);\n            return acc;\n          },\n          []\n        );\n        return medias;\n      }\n      return [];\n    },\n    image_index_currently_shown() {\n      if (!this.show_previous_photo) return false;\n      return this.medias.findIndex(\n        (m) => m.$path === this.show_previous_photo.$path\n      );\n    },\n  },\n  methods: {\n    async appendToStopMotion({ imageData }) {\n      const additional_meta = {};\n      additional_meta.$origin = \"capture\";\n      const { meta_filename } = await this.$api\n        .uploadFile({\n          path: this.current_stopmotion_path,\n          filename: +new Date() + \".jpeg\",\n          file: imageData,\n          additional_meta,\n        })\n        .catch((err) => {\n          this.$alertify.delay(4000).error(err);\n          throw err;\n        });\n\n      let images_list = this.stopmotion.images_list\n        ? this.stopmotion.images_list.slice()\n        : [];\n      images_list.push(meta_filename);\n\n      await this.$api.updateMeta({\n        path: this.current_stopmotion_path,\n        new_meta: {\n          images_list,\n        },\n      });\n    },\n    previewPlay() {\n      if (\n        this.show_live_feed ||\n        this.image_index_currently_shown === this.medias.length - 1\n      )\n        this.firstImage();\n\n      this.preview_playing_event = window.setInterval(() => {\n        // change currently shown image\n        this.show_previous_photo =\n          this.medias[this.image_index_currently_shown + 1];\n\n        this.$nextTick(() => {\n          if (this.image_index_currently_shown === this.medias.length - 1)\n            this.pausePreview();\n        });\n      }, 1000 / this.frame_rate);\n    },\n    pausePreview() {\n      window.clearInterval(this.preview_playing_event);\n      this.preview_playing_event = undefined;\n    },\n    testStopmotion() {\n      this.validating_video_preview = true;\n      this.$nextTick(() => {\n        this.$nextTick(() => {\n          // strange bug where the window would scroll halfway up on click\n          // this.$el.scrollIntoView({ behavior: \"auto\", block: \"end\" });\n        });\n      });\n    },\n    showVideoFeed() {\n      this.show_previous_photo = this.medias[this.medias.length - 1];\n      this.$emit(\"update:show_live_feed\", true);\n    },\n    firstImage() {\n      this.show_previous_photo = this.medias[0];\n      this.$emit(\"update:show_live_feed\", false);\n    },\n    prevImage() {\n      if (this.show_live_feed) {\n        this.show_previous_photo = this.medias.at(-1);\n        this.$emit(\"update:show_live_feed\", false);\n        return;\n      }\n      this.show_previous_photo =\n        this.medias[this.image_index_currently_shown - 1];\n    },\n    nextImage() {\n      if (this.image_index_currently_shown === this.medias.length - 1)\n        return this.showVideoFeed();\n\n      this.show_previous_photo =\n        this.medias[this.image_index_currently_shown + 1];\n    },\n    lastImage() {\n      this.showVideoFeed();\n    },\n    backToStopmotion() {\n      console.log(\"METHODS  StopmotionPanel: backToStopmotion\");\n      this.validating_video_preview = false;\n      this.created_stopmotion = false;\n      this.$emit(\"update:show_live_feed\", true);\n    },\n    async exportStopmotion() {\n      this.compilation_in_progress = true;\n\n      const additional_meta = {};\n      additional_meta.$origin = \"capture\";\n      if (this.connected_as?.$path)\n        additional_meta.$authors = [this.connected_as.$path];\n\n      const current_task_id = await this.$api.exportFolder({\n        path: this.current_stopmotion_path,\n        instructions: {\n          recipe: \"stopmotion\",\n          field: \"images_list\",\n          frame_rate: this.frame_rate,\n          additional_meta,\n        },\n      });\n\n      this.$alertify.delay(4000).log(this.$t(\"compilation_started\"));\n      this.backToStopmotion();\n\n      const checkIfEnded = ({ task_id, message }) => {\n        if (task_id !== current_task_id) return;\n        this.compilation_in_progress = false;\n\n        const meta_filename = this.getFilename(message.file?.$path);\n        if (meta_filename) this.$emit(\"insertMedia\", meta_filename);\n        this.$emit(\"close\");\n        // works, but not that useful\n        // this.created_stopmotion = this.getSourceMedia({\n        //   source_media: {\n        //     meta_filename_in_project: this.getFilename(message.path),\n        //   },\n        //   folder_path: this.current_stopmotion_path,\n        // });\n        this.$eventHub.$off(\"task.ended\", checkIfEnded);\n      };\n      this.$eventHub.$on(\"task.ended\", checkIfEnded);\n\n      // this.show_previous_photo = false;\n      // this.validating_video_preview = false;\n      // this.$nextTick(() => {\n      //   this.$emit(\"close\");\n      // });\n    },\n    async removeMedia(path) {\n      // remove from stopmotion list\n      let images_list = this.stopmotion.images_list.slice();\n      images_list = images_list.filter((i) => !path.endsWith(i));\n\n      this.nextImage();\n\n      await this.$api.updateMeta({\n        path: this.current_stopmotion_path,\n        new_meta: {\n          images_list,\n        },\n      });\n\n      await this.$api.deleteItem({\n        path,\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_stopmotionpanel {\n  --img-width: 120px;\n\n  position: relative;\n  // height: 100%;\n  display: flex;\n  // .bg-noir;\n  flex-flow: column nowrap;\n  flex: 0 0 auto;\n\n  &.is--showing_video_validation {\n    flex-grow: 1;\n  }\n\n  > * {\n    // transition: all 0.4s;\n  }\n}\n\n.m_stopmotionpanel--toprowbuttons {\n  position: relative;\n  width: 100%;\n\n  background-color: var(--c-noir);\n\n  pointer-events: none;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  // padding: calc(var(--spacing) / 4);\n  gap: calc(var(--spacing) / 4);\n\n  > * {\n    pointer-events: auto;\n    margin: calc(var(--spacing) / 4);\n  }\n\n  > .m_stopmotionpanel--toprowbuttons--counter {\n    display: flex;\n    align-items: center;\n    gap: calc(var(--spacing) / 2);\n\n    background-color: var(--c-noir);\n\n    margin: 0;\n    padding: 0;\n\n    label {\n      margin-bottom: 0;\n    }\n  }\n}\n\n.m_stopmotionpanel--medias {\n  // .bg-noir;\n  flex: 1 1 auto;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n\n  // border-top: 2px solid black;\n  background-color: black;\n  padding: 1px;\n  color: white;\n\n  // max-height: 120px;\n  // justify-content: flex-end;\n\n  // .m_stopmotionpanel--medias--single {\n  //   position: relative;\n  //   flex: 1 1 auto;\n  //   .bg-noir;\n\n  //   .mediaContainer {\n  //     position: absolute;\n  //     height: 100%;\n  //     width: 100%;\n  //     img {\n  //       height: 100%;\n  //       width: 100%;\n  //       margin: 0;\n  //       object-fit: contain;\n  //       object-position: center;\n  //     }\n  //   }\n\n  //   .m_stopmotionpanel--medias--single--removeMedia {\n  //     position: absolute;\n  //     bottom: 0;right: 0;\n  //   }\n  // }\n\n  .m_stopmotionpanel--medias--list {\n    display: block;\n    flex: 1 1 200px;\n    position: relative;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n\n    overflow-x: auto;\n    overflow-y: hidden;\n\n    -webkit-overflow-scrolling: touch;\n    overscroll-behavior-y: contain;\n    // .padding-verysmall;\n\n    padding: 0;\n    gap: 1px;\n    // margin-bottom: calc(var(--spacing) / 8);\n\n    // .margin-verysmall;\n    scroll-behavior: smooth;\n\n    // for some strange reason this prevents stopmotion thumbs\n    // from showing in story publi\n    // border-radius: 6px;\n\n    // .custom_scrollbar(4px, 4px, 2px, rgba(255, 255, 255, 0), white);\n\n    --c-thumbcolor: var(--c-noir);\n    --scrollbar-height: 4px;\n    --scrollbar-padding: 4px;\n    --scrollbar-border: 4px;\n    --c-barbgcolor: rgba(255, 255, 255, 0);\n    --c-thumbcolor: white;\n\n    &::-webkit-scrollbar {\n      height: calc((var(--scrollbar-padding) * 2) + var(--scrollbar-height));\n      width: calc((var(--scrollbar-padding) * 2) + var(--scrollbar-height));\n      background-color: var(--c-barbgcolor);\n    }\n\n    &::-webkit-scrollbar-track,\n    &::-webkit-scrollbar-thumb {\n      border: var(--scrollbar-border) solid rgba(255, 255, 255, 0);\n      border-radius: calc(var(--scrollbar-border) * 4);\n      background-clip: padding-box;\n\n      transition: all 0.4s;\n    }\n\n    &::-webkit-scrollbar-track {\n      background-color: transparent;\n    }\n\n    &::-webkit-scrollbar-thumb {\n      background-color: var(--c-thumbcolor);\n      &:hover {\n        background-color: var(--c-gris);\n        border: var(--scrollbar-border) solid rgba(255, 255, 255, 0);\n      }\n    }\n  }\n\n  counter-reset: compteListe;\n\n  &::before,\n  &::after {\n    // content: '';\n    // height: 100%;\n    // padding-left: 2px;\n  }\n\n  .m_stopmotionpanel--medias--list--items {\n    position: relative;\n    overflow: hidden;\n    width: auto;\n    flex: 0 0 auto;\n    width: var(--img-width);\n    height: auto;\n\n    cursor: pointer;\n    transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n\n    &::before {\n      counter-increment: compteListe 1;\n      content: counter(compteListe) \" \";\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      padding: calc(var(--spacing) / 16);\n\n      margin: calc(var(--spacing) / 16);\n      // .c-noir;\n      // .c-blanc;\n      text-transform: uppercase;\n      font-weight: 500;\n      letter-spacing: 0.06em;\n      font-size: var(--font-verysmall);\n      // font-weight: 600;\n      background-color: var(--c-noir);\n      color: white;\n      border-radius: 2px;\n      line-height: 1;\n      z-index: 1;\n    }\n\n    ::v-deep {\n      img,\n      video {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        margin: 0;\n        object-fit: contain;\n      }\n    }\n\n    &:last-child {\n      flex-basis: auto;\n      // padding-right: 50px;\n      width: auto;\n      // border-radius: 4px;\n      overflow: hidden;\n\n      video {\n        width: var(--img-width);\n        height: auto;\n      }\n      &::before {\n        content: attr(data-content);\n        // .bg-bleuvert;\n      }\n      // &::after {\n      //   content:'';\n      //   display: block;\n      //   width: 100px;\n      //   height: 1px;\n      // }\n    }\n\n    &.is--current_single::before {\n      // .c-rouge;\n      color: white;\n      background-color: var(--c-rouge);\n    }\n\n    .mediaContainer {\n      width: 100%;\n      height: 100%;\n      width: auto;\n    }\n  }\n}\n\n.m_stopmotionpanel--videopreview {\n  position: relative;\n  flex: 1 1 auto;\n  overflow: hidden;\n\n  .mediaContainer {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n\n    ::v-deep {\n      > * {\n        width: 100%;\n        height: 100%;\n      }\n\n      video {\n        height: 100%;\n        width: 100%;\n        background-color: var(--c-noir);\n      }\n    }\n  }\n}\n\n.m_stopmotionpanel--buttons {\n  flex: 0 0 auto;\n  width: 100%;\n  // min-height: 50px;\n  color: var(--c-noir);\n\n  > * {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: space-between;\n    align-items: center;\n    padding: calc(var(--spacing) / 2);\n\n    // .bg-noir;\n\n    &:nth-child(1) {\n    }\n    &:nth-child(2) {\n      border-top: 2px solid white;\n      justify-content: center;\n      background-color: var(--c-noir);\n    }\n  }\n\n  label {\n    // color: white;\n  }\n  input[type=\"number\"] {\n    width: 50px;\n  }\n}\n\n._removeMedia {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: calc(var(--spacing) / 4);\n  margin: calc(var(--spacing) / 4);\n}\n\n.m_stopmotionpanel--loader {\n  position: absolute;\n  z-index: 2;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: fade(#fff, 90%);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n._loader {\n  background: rgba(0, 0, 0, 0.95);\n  color: var(--color-capture);\n}\n\n._separator {\n  position: relative;\n  flex: 0 0 1px;\n  height: 100%;\n  z-index: -1;\n  // background: var(--c-noir);\n  // margin: calc(var(--spacing) / 4);\n}\n\n._onion_skin {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  backdrop-filter: blur(2px);\n  background: rgba(0, 0, 0, 0.25);\n  // background: rgba(255, 255, 255, 0.05);\n\n  padding: calc(var(--spacing) / 4);\n  text-align: center;\n\n  .u-label {\n    color: white;\n  }\n\n  input {\n    width: 100%;\n    margin: 0;\n  }\n}\n._onion_skin_range {\n  direction: rtl;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionPanel.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionPanel.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StopmotionPanel.vue?vue&type=template&id=5c9b5e41&scoped=true\"\nimport script from \"./StopmotionPanel.vue?vue&type=script&lang=js\"\nexport * from \"./StopmotionPanel.vue?vue&type=script&lang=js\"\nimport style0 from \"./StopmotionPanel.vue?vue&type=style&index=0&id=5c9b5e41&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c9b5e41\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('BaseModal2',{attrs:{\"title\":_vm.$t('location')},on:{\"close\":function($event){return _vm.$emit('close')}}},[_c('div',{staticClass:\"u-instructions u-spacingBottom\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"location_stored_in_localstorage\"))+\" \")]),_c('PositionPicker',{attrs:{\"field_name\":'$location',\"content\":_vm.location_to_add_to_medias,\"can_edit\":true},on:{\"newPosition\":_vm.newPosition}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <BaseModal2 :title=\"$t('location')\" @close=\"$emit('close')\">\n    <div class=\"u-instructions u-spacingBottom\">\n      {{ $t(\"location_stored_in_localstorage\") }}\n    </div>\n    <PositionPicker\n      :field_name=\"'$location'\"\n      :content=\"location_to_add_to_medias\"\n      :can_edit=\"true\"\n      @newPosition=\"newPosition\"\n    />\n  </BaseModal2>\n</template>\n<script>\nexport default {\n  props: {\n    location_to_add_to_medias: Object,\n  },\n  components: {},\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {\n    newPosition(new_location) {\n      this.$emit(\"update:location_to_add_to_medias\", new_location);\n      setTimeout(() => {\n        this.$emit(\"close\");\n      }, 1000);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PickLocationForCaptures.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PickLocationForCaptures.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PickLocationForCaptures.vue?vue&type=template&id=54dfbd98&scoped=true\"\nimport script from \"./PickLocationForCaptures.vue?vue&type=script&lang=js\"\nexport * from \"./PickLocationForCaptures.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54dfbd98\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"_capturePane\",attrs:{\"data-type\":_vm.pane_type}},[_c('div',{staticClass:\"_topbar\"},[_c('div',{staticClass:\"_topbar--title\"},[_c('h3',{},[_vm._v(\" \"+_vm._s(_vm.label)+\" \")]),_c('button',{staticClass:\"u-button u-button_icon _close_button\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_c('b-icon',{attrs:{\"icon\":\"x-lg\",\"label\":_vm.$t('close')}})],1)])]),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_capturePane\" :data-type=\"pane_type\">\n    <div class=\"_topbar\">\n      <div class=\"_topbar--title\">\n        <h3 class>\n          {{ label }}\n        </h3>\n        <button\n          type=\"button\"\n          class=\"u-button u-button_icon _close_button\"\n          @click=\"$emit('close')\"\n        >\n          <b-icon icon=\"x-lg\" :label=\"$t('close')\" />\n        </button>\n      </div>\n    </div>\n\n    <slot />\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    label: String,\n    pane_type: String,\n  },\n  components: {},\n  data() {\n    return {};\n  },\n\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {},\n};\n</script>\n<style lang=\"scss\" scoped>\n._capturePane {\n  position: relative;\n  flex: 1 0 200px;\n  max-width: 280px;\n  overflow: auto;\n\n  display: flex;\n  flex-flow: column nowrap;\n\n  &[data-type=\"settings\"] {\n    background-color: var(--c-rouge);\n\n    ._topbar {\n      border-color: var(--c-rouge_fonce);\n    }\n  }\n  &[data-type=\"effects\"] {\n    background-color: var(--c-bleumarine);\n\n    ._topbar {\n      border-color: var(--c-bleumarine_fonce);\n    }\n  }\n}\n\n._topbar {\n  flex: 0 0 auto;\n  border-bottom: 2px solid white;\n  padding: calc(var(--spacing) / 2);\n  // margin-bottom: calc(var(--spacing) / 2);\n  color: white;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n._topbar--title {\n  display: flex;\n  flex-flow: row wrap;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CapturePane.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CapturePane.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CapturePane.vue?vue&type=template&id=5cdbfa5a&scoped=true\"\nimport script from \"./CapturePane.vue?vue&type=script&lang=js\"\nexport * from \"./CapturePane.vue?vue&type=script&lang=js\"\nimport style0 from \"./CapturePane.vue?vue&type=style&index=0&id=5cdbfa5a&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5cdbfa5a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_captureSettings\"},[_c('transition',{attrs:{\"name\":\"fade_fast\",\"duration\":400}},[(_vm.is_loading_available_devices || _vm.is_loading_feed)?_c('LoaderSpinner',{staticClass:\"_loader\"}):_vm._e()],1),_c('RadioSwitch',{attrs:{\"content\":_vm.current_mode,\"options\":[\n      {\n        label: _vm.$t('stream_local_mode'),\n        value: 'LocalSources',\n      },\n      {\n        label: _vm.$t('stream_remote_mode'),\n        value: 'RemoteSources',\n      },\n    ]},on:{\"update:content\":function($event){_vm.current_mode=$event}}}),_c('div',{staticClass:\"m_captureSettings--settings\"},[(_vm.current_mode === 'LocalSources')?_c('div',{},[(_vm.status === 'not_allowed')?_c('div',[_c('div',{staticClass:\"padding-top-verysmall\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"camera_access_refused\"))+\" \")])]):_vm._e(),_c('label',{staticClass:\"u-label\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"sources\"))+\" \"),_c('button',{staticClass:\"u-buttonLink margin-none margin-left padding-bottom-none\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.refreshAvailableDevices}},[_vm._v(\" \"+_vm._s(_vm.$t(\"reload\"))+\" \")])]),_c('div',{},[_c('div',{},[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"camera\")))]),_c('div',[(_vm.all_video_input_devices.length === 0)?_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"no_video_input_available\"))+\" \")]):_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_devices.video_input_device),expression:\"selected_devices.video_input_device\"}],attrs:{\"id\":\"devices\",\"name\":\"Video devices\",\"title\":\"devices\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.selected_devices, \"video_input_device\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.all_video_input_devices),function(d){return _c('option',{key:d.deviceId,domProps:{\"value\":d}},[_vm._v(\" \"+_vm._s(d.label)+\" \")])}),0)]),(\n              _vm.selected_devices.video_input_device &&\n              _vm.selected_devices.video_input_device.deviceId ===\n                'screen_capture'\n            )?_c('div',{staticClass:\"margin-top-veryverysmall\"},[_c('span',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.advanced_capture_options.cursor.enabled),expression:\"advanced_capture_options.cursor.enabled\"}],attrs:{\"id\":\"show_cursor\",\"type\":\"checkbox\",\"disabled\":!_vm.advanced_capture_options.cursor.supported,\"true-value\":\"always\",\"false-value\":\"never\"},domProps:{\"checked\":Array.isArray(_vm.advanced_capture_options.cursor.enabled)?_vm._i(_vm.advanced_capture_options.cursor.enabled,null)>-1:_vm._q(_vm.advanced_capture_options.cursor.enabled,\"always\")},on:{\"change\":function($event){var $$a=_vm.advanced_capture_options.cursor.enabled,$$el=$event.target,$$c=$$el.checked?(\"always\"):(\"never\");if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.advanced_capture_options.cursor, \"enabled\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.advanced_capture_options.cursor, \"enabled\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.advanced_capture_options.cursor, \"enabled\", $$c)}}}}),_c('label',{staticClass:\"u-label\",attrs:{\"for\":\"show_cursor\"}},[_vm._v(_vm._s(_vm.$t(\"show_cursor\")))]),(!_vm.advanced_capture_options.cursor.supported)?_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"not_supported_on_this_device\"))+\" \")]):_vm._e()])]):_vm._e()]),_c('div',[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"audioinput\")))]),_c('div',[(_vm.all_audio_input_devices.length === 0)?_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"no_audio_input_available\"))+\" \")]):_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_devices.audio_input_device),expression:\"selected_devices.audio_input_device\"}],attrs:{\"id\":\"devices\",\"name\":\"Video devices\",\"title\":\"devices\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.selected_devices, \"audio_input_device\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.all_audio_input_devices),function(d){return _c('option',{key:d.deviceId,domProps:{\"value\":d}},[_vm._v(\" \"+_vm._s(d.label)+\" \")])}),0)]),(_vm.selected_devices.audio_input_device)?_c('div',{staticClass:\"margin-top-veryverysmall\"},[_c('span',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.advanced_capture_options.echoCancellation.enabled),expression:\"advanced_capture_options.echoCancellation.enabled\"}],attrs:{\"id\":\"echoCancellation\",\"type\":\"checkbox\",\"disabled\":!_vm.advanced_capture_options.echoCancellation.supported},domProps:{\"checked\":Array.isArray(_vm.advanced_capture_options.echoCancellation.enabled)?_vm._i(_vm.advanced_capture_options.echoCancellation.enabled,null)>-1:(_vm.advanced_capture_options.echoCancellation.enabled)},on:{\"change\":function($event){var $$a=_vm.advanced_capture_options.echoCancellation.enabled,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.advanced_capture_options.echoCancellation, \"enabled\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.advanced_capture_options.echoCancellation, \"enabled\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.advanced_capture_options.echoCancellation, \"enabled\", $$c)}}}}),_c('label',{staticClass:\"u-label\",attrs:{\"for\":\"echoCancellation\"}},[_vm._v(_vm._s(_vm.$t(\"echoCancellation\")))]),(!_vm.advanced_capture_options.echoCancellation.supported)?_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"not_supported_on_this_device\"))+\" \")]):_vm._e()])]):_vm._e(),(_vm.selected_devices.audio_input_device)?_c('div',{staticClass:\"margin-top-veryverysmall\"},[_c('span',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.advanced_capture_options.noiseSuppression.enabled),expression:\"advanced_capture_options.noiseSuppression.enabled\"}],attrs:{\"id\":\"noiseSuppression\",\"type\":\"checkbox\",\"disabled\":!_vm.advanced_capture_options.noiseSuppression.supported},domProps:{\"checked\":Array.isArray(_vm.advanced_capture_options.noiseSuppression.enabled)?_vm._i(_vm.advanced_capture_options.noiseSuppression.enabled,null)>-1:(_vm.advanced_capture_options.noiseSuppression.enabled)},on:{\"change\":function($event){var $$a=_vm.advanced_capture_options.noiseSuppression.enabled,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.advanced_capture_options.noiseSuppression, \"enabled\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.advanced_capture_options.noiseSuppression, \"enabled\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.advanced_capture_options.noiseSuppression, \"enabled\", $$c)}}}}),_c('label',{staticClass:\"u-label\",attrs:{\"for\":\"noiseSuppression\"}},[_vm._v(_vm._s(_vm.$t(\"noiseSuppression\")))]),(!_vm.advanced_capture_options.noiseSuppression.supported)?_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"not_supported_on_this_device\"))+\" \")]):_vm._e()])]):_vm._e()]),_c('div',[_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"audiooutput\")))]),_c('div',[(_vm.all_audio_output_devices.length === 0)?_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"no_audio_output_available\"))+\" \")]):_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_devices.audio_output_device),expression:\"selected_devices.audio_output_device\"}],attrs:{\"id\":\"devices\",\"name\":\"Video devices\",\"title\":\"devices\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.selected_devices, \"audio_output_device\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.all_audio_output_devices),function(d){return _c('option',{key:d.deviceId,domProps:{\"value\":d}},[_vm._v(\" \"+_vm._s(d.label)+\" \")])}),0)])])]),_c('label',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"resolutions\")))]),_c('div',[(\n            !_vm.selected_devices.video_input_device ||\n            !_vm.selected_devices.video_input_device.deviceId\n          )?_c('div',[_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"pick_a_camera\"))+\" \")])]):_vm._e(),(\n            _vm.selected_devices.video_input_device &&\n            (_vm.selected_devices.video_input_device.deviceId ===\n              'screen_capture' ||\n              _vm.selected_devices.video_input_device.chromeMediaSource)\n          )?_c('div',[_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"cant_pick_resolution_when_screen_capture\"))+\" \")])]):_c('div',{staticClass:\"m_captureSettings--settings--resolutions\"},[_vm._l((_vm.predefined_resolutions.concat(\n              _vm.custom_camera_resolution\n            )),function(res){return _c('div',{key:res.name},[_c('label',{staticClass:\"u-label\",attrs:{\"for\":res.label}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.desired_camera_resolution),expression:\"desired_camera_resolution\"}],attrs:{\"type\":\"radio\",\"id\":res.label,\"disabled\":_vm.unavailable_camera_resolutions.includes(res.label)},domProps:{\"value\":res,\"checked\":_vm._q(_vm.desired_camera_resolution,res)},on:{\"change\":function($event){_vm.desired_camera_resolution=res}}}),_c('span',[_vm._v(_vm._s(res.label)+\" \"),(res.type !== 'custom')?[_vm._v(\"  \"),(res.ratio)?[_vm._v(_vm._s(res.ratio))]:_vm._e(),_vm._v(\"  \"+_vm._s(res.width)+\"/\"+_vm._s(res.height)+\" \")]:_vm._e()],2)])])}),(\n              _vm.desired_camera_resolution &&\n              _vm.desired_camera_resolution.type === 'custom'\n            )?_c('div',{staticClass:\"u-sameRow\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.desired_camera_resolution.width),expression:\"desired_camera_resolution.width\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"min\":\"2\",\"max\":\"4096\",\"step\":\"2\"},domProps:{\"value\":(_vm.desired_camera_resolution.width)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.desired_camera_resolution, \"width\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"font-large u-padding_verysmall\"},[_vm._v(\"\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.desired_camera_resolution.height),expression:\"desired_camera_resolution.height\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"min\":\"2\",\"max\":\"2160\",\"step\":\"2\"},domProps:{\"value\":(_vm.desired_camera_resolution.height)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.desired_camera_resolution, \"height\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e()],2)])]):(_vm.current_mode === 'RemoteSources')?_c('div',[_c('div',[_vm._v(\" \"+_vm._s(_vm.$t(\"feature_not_yet_implemented\"))+\" \")]),_c('div',{staticClass:\"u-disabled\"},[_c('small',[_vm._v(_vm._s(_vm.$t(\"connect_to_other_users\")))]),_c('div',{staticClass:\"padding-vert-small padding-bottom-small\"},[_c('label',{staticClass:\"u-label\",domProps:{\"innerHTML\":_vm._s(_vm.$t('name_of_stream'))}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.access_distant_stream.callee),expression:\"access_distant_stream.callee\",modifiers:{\"trim\":true}},{name:\"uppercase\",rawName:\"v-uppercase\"}],attrs:{\"type\":\"text\",\"required\":\"\",\"disabled\":_vm.access_distant_stream.status.enabled,\"autofocus\":\"autofocus\",\"onfocus\":\"this.select()\"},domProps:{\"value\":(_vm.access_distant_stream.callee)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.preventDefault();return _vm.callStream.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.access_distant_stream, \"callee\", $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}})])])]):_vm._e()]),_c('div',{staticClass:\"m_captureSettings--updateButton\"},[(_vm.current_mode === 'LocalSources')?_c('div',{staticClass:\"m_captureSettings--updateButton--shareStreamToggle\"},[_c('transition',{attrs:{\"name\":\"fade_fast\",\"duration\":150}},[(_vm.share_this_stream.status.loading)?_c('LoaderSpinner'):_vm._e()],1),(_vm.share_this_stream.enabled)?_c('div',{staticClass:\"padding-sides-small padding-bottom-small\"},[_c('label',{staticClass:\"u-label\",domProps:{\"innerHTML\":_vm._s(_vm.$t('name_of_stream'))}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.share_this_stream.name),expression:\"share_this_stream.name\",modifiers:{\"trim\":true}},{name:\"uppercase\",rawName:\"v-uppercase\"}],attrs:{\"type\":\"text\",\"required\":\"\",\"autofocus\":\"autofocus\",\"onfocus\":\"this.select()\"},domProps:{\"value\":(_vm.share_this_stream.name)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.preventDefault();return _vm.setCameraStreamFromDefaults.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.share_this_stream, \"name\", $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"m_captureSettings--updateButton--buttons\"},[(_vm.current_mode === 'LocalSources')?void 0:(_vm.current_mode === 'RemoteSources')?[_c('transition',{attrs:{\"name\":\"fade_fast\",\"duration\":150}},[(_vm.access_distant_stream.calling)?_c('LoaderSpinner'):_vm._e()],1),(!_vm.access_distant_stream.status.enabled)?_c('button',{staticClass:\"u-button u-button_red u-button_wide\",attrs:{\"type\":\"button\",\"disabled\":_vm.access_distant_stream.callee.length === 0 ||\n            _vm.access_distant_stream.calling},on:{\"click\":_vm.callStream}},[_vm._v(\" \"+_vm._s(_vm.$t(\"connect\"))+\" \")]):_vm._e(),(_vm.access_distant_stream.status.enabled)?_c('button',{staticClass:\"u-button u-button_red u-button_wide\",attrs:{\"type\":\"button\",\"disabled\":_vm.access_distant_stream.callee.length === 0 ||\n            _vm.access_distant_stream.calling},on:{\"click\":_vm.hangupStream}},[_vm._v(\" \"+_vm._s(_vm.$t(\"hangup\"))+\" \")]):_vm._e()]:_vm._e()],2)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m_captureSettings\">\n    <transition name=\"fade_fast\" :duration=\"400\">\n      <LoaderSpinner\n        class=\"_loader\"\n        v-if=\"is_loading_available_devices || is_loading_feed\"\n      />\n    </transition>\n\n    <RadioSwitch\n      :content.sync=\"current_mode\"\n      :options=\"[\n        {\n          label: $t('stream_local_mode'),\n          value: 'LocalSources',\n        },\n        {\n          label: $t('stream_remote_mode'),\n          value: 'RemoteSources',\n        },\n      ]\"\n    />\n\n    <div class=\"m_captureSettings--settings\">\n      <div v-if=\"current_mode === 'LocalSources'\" class>\n        <div v-if=\"status === 'not_allowed'\">\n          <div class=\"padding-top-verysmall\">\n            {{ $t(\"camera_access_refused\") }}\n          </div>\n        </div>\n\n        <label class=\"u-label\">\n          {{ $t(\"sources\") }}\n          <button\n            type=\"button\"\n            class=\"u-buttonLink margin-none margin-left padding-bottom-none\"\n            @click=\"refreshAvailableDevices\"\n          >\n            {{ $t(\"reload\") }}\n          </button>\n        </label>\n\n        <div class=\"\">\n          <div class=\"\">\n            <label class=\"u-label\">{{ $t(\"camera\") }}</label>\n\n            <div>\n              <small v-if=\"all_video_input_devices.length === 0\">\n                {{ $t(\"no_video_input_available\") }}\n              </small>\n              <select\n                v-else\n                id=\"devices\"\n                name=\"Video devices\"\n                title=\"devices\"\n                class=\"\"\n                v-model=\"selected_devices.video_input_device\"\n              >\n                <option\n                  v-for=\"d in all_video_input_devices\"\n                  :key=\"d.deviceId\"\n                  :value=\"d\"\n                >\n                  {{ d.label }}\n                </option>\n              </select>\n            </div>\n\n            <div\n              v-if=\"\n                selected_devices.video_input_device &&\n                selected_devices.video_input_device.deviceId ===\n                  'screen_capture'\n              \"\n              class=\"margin-top-veryverysmall\"\n            >\n              <span class=\"u-switch u-switch-xs\">\n                <input\n                  id=\"show_cursor\"\n                  type=\"checkbox\"\n                  v-model=\"advanced_capture_options.cursor.enabled\"\n                  :disabled=\"!advanced_capture_options.cursor.supported\"\n                  true-value=\"always\"\n                  false-value=\"never\"\n                />\n                <label class=\"u-label\" for=\"show_cursor\">{{\n                  $t(\"show_cursor\")\n                }}</label>\n                <small v-if=\"!advanced_capture_options.cursor.supported\">\n                  {{ $t(\"not_supported_on_this_device\") }}\n                </small>\n              </span>\n            </div>\n          </div>\n          <div>\n            <label class=\"u-label\">{{ $t(\"audioinput\") }}</label>\n            <div>\n              <small v-if=\"all_audio_input_devices.length === 0\">\n                {{ $t(\"no_audio_input_available\") }}\n              </small>\n              <select\n                v-else\n                id=\"devices\"\n                name=\"Video devices\"\n                title=\"devices\"\n                class=\"\"\n                v-model=\"selected_devices.audio_input_device\"\n              >\n                <option\n                  v-for=\"d in all_audio_input_devices\"\n                  :key=\"d.deviceId\"\n                  :value=\"d\"\n                >\n                  {{ d.label }}\n                </option>\n              </select>\n            </div>\n\n            <div\n              v-if=\"selected_devices.audio_input_device\"\n              class=\"margin-top-veryverysmall\"\n            >\n              <span class=\"u-switch u-switch-xs\">\n                <input\n                  id=\"echoCancellation\"\n                  type=\"checkbox\"\n                  :disabled=\"\n                    !advanced_capture_options.echoCancellation.supported\n                  \"\n                  v-model=\"advanced_capture_options.echoCancellation.enabled\"\n                />\n                <label class=\"u-label\" for=\"echoCancellation\">{{\n                  $t(\"echoCancellation\")\n                }}</label>\n                <small\n                  v-if=\"!advanced_capture_options.echoCancellation.supported\"\n                >\n                  {{ $t(\"not_supported_on_this_device\") }}\n                </small>\n              </span>\n            </div>\n            <div\n              v-if=\"selected_devices.audio_input_device\"\n              class=\"margin-top-veryverysmall\"\n            >\n              <span class=\"u-switch u-switch-xs\">\n                <input\n                  id=\"noiseSuppression\"\n                  type=\"checkbox\"\n                  :disabled=\"\n                    !advanced_capture_options.noiseSuppression.supported\n                  \"\n                  v-model=\"advanced_capture_options.noiseSuppression.enabled\"\n                />\n                <label class=\"u-label\" for=\"noiseSuppression\">{{\n                  $t(\"noiseSuppression\")\n                }}</label>\n                <small\n                  v-if=\"!advanced_capture_options.noiseSuppression.supported\"\n                >\n                  {{ $t(\"not_supported_on_this_device\") }}\n                </small>\n              </span>\n            </div>\n          </div>\n          <div>\n            <label class=\"u-label\">{{ $t(\"audiooutput\") }}</label>\n\n            <div>\n              <small v-if=\"all_audio_output_devices.length === 0\">\n                {{ $t(\"no_audio_output_available\") }}\n              </small>\n              <select\n                v-else\n                id=\"devices\"\n                name=\"Video devices\"\n                title=\"devices\"\n                class=\"\"\n                v-model=\"selected_devices.audio_output_device\"\n              >\n                <option\n                  v-for=\"d in all_audio_output_devices\"\n                  :key=\"d.deviceId\"\n                  :value=\"d\"\n                >\n                  {{ d.label }}\n                </option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <label class=\"u-label\">{{ $t(\"resolutions\") }}</label>\n        <div>\n          <div\n            v-if=\"\n              !selected_devices.video_input_device ||\n              !selected_devices.video_input_device.deviceId\n            \"\n          >\n            <small>\n              {{ $t(\"pick_a_camera\") }}\n            </small>\n          </div>\n          <div\n            v-if=\"\n              selected_devices.video_input_device &&\n              (selected_devices.video_input_device.deviceId ===\n                'screen_capture' ||\n                selected_devices.video_input_device.chromeMediaSource)\n            \"\n          >\n            <small>\n              {{ $t(\"cant_pick_resolution_when_screen_capture\") }}\n            </small>\n          </div>\n          <div class=\"m_captureSettings--settings--resolutions\" v-else>\n            <div\n              v-for=\"res in predefined_resolutions.concat(\n                custom_camera_resolution\n              )\"\n              :key=\"res.name\"\n            >\n              <label :for=\"res.label\" class=\"u-label\">\n                <input\n                  type=\"radio\"\n                  :id=\"res.label\"\n                  :value=\"res\"\n                  :disabled=\"unavailable_camera_resolutions.includes(res.label)\"\n                  v-model=\"desired_camera_resolution\"\n                />\n                <span\n                  >{{ res.label }}\n                  <template v-if=\"res.type !== 'custom'\">\n                    \n                    <template v-if=\"res.ratio\">{{ res.ratio }}</template>\n                     {{ res.width }}/{{ res.height }}\n                  </template>\n                </span>\n              </label>\n            </div>\n\n            <div\n              v-if=\"\n                desired_camera_resolution &&\n                desired_camera_resolution.type === 'custom'\n              \"\n              class=\"u-sameRow\"\n            >\n              <input\n                type=\"number\"\n                min=\"2\"\n                max=\"4096\"\n                step=\"2\"\n                v-model.number=\"desired_camera_resolution.width\"\n              />\n              <span class=\"font-large u-padding_verysmall\"></span>\n              <input\n                type=\"number\"\n                min=\"2\"\n                max=\"2160\"\n                step=\"2\"\n                v-model.number=\"desired_camera_resolution.height\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div v-else-if=\"current_mode === 'RemoteSources'\">\n        <div>\n          {{ $t(\"feature_not_yet_implemented\") }}\n        </div>\n\n        <div class=\"u-disabled\">\n          <!-- <label>{{ $t(\"remote_access\") }}</label> -->\n\n          <small>{{ $t(\"connect_to_other_users\") }}</small>\n          <div class=\"padding-vert-small padding-bottom-small\">\n            <label class=\"u-label\" v-html=\"$t('name_of_stream')\" />\n            <input\n              type=\"text\"\n              v-model.trim=\"access_distant_stream.callee\"\n              required\n              v-uppercase\n              :disabled=\"access_distant_stream.status.enabled\"\n              autofocus=\"autofocus\"\n              onfocus=\"this.select()\"\n              @keydown.enter.prevent=\"callStream\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"m_captureSettings--updateButton\">\n      <!-- <small v-if=\"!desired_camera_resolution\">\n          Select a camera resolution first\n        </small> -->\n\n      <div\n        class=\"m_captureSettings--updateButton--shareStreamToggle\"\n        v-if=\"current_mode === 'LocalSources'\"\n      >\n        <transition name=\"fade_fast\" :duration=\"150\">\n          <LoaderSpinner v-if=\"share_this_stream.status.loading\" />\n        </transition>\n\n        <!-- <div class=\"u-switch u-switch-xs\">\n          <input\n            id=\"shareStream\"\n            type=\"checkbox\"\n            v-model=\"share_this_stream.enabled\"\n          />\n          <label class=\"u-label\" for=\"shareStream\">{{\n            $t(\"share_stream\")\n          }}</label>\n        </div> -->\n\n        <div\n          v-if=\"share_this_stream.enabled\"\n          class=\"padding-sides-small padding-bottom-small\"\n        >\n          <label class=\"u-label\" v-html=\"$t('name_of_stream')\" />\n          <input\n            type=\"text\"\n            v-model.trim=\"share_this_stream.name\"\n            required\n            v-uppercase\n            autofocus=\"autofocus\"\n            onfocus=\"this.select()\"\n            @keydown.enter.prevent=\"setCameraStreamFromDefaults\"\n          />\n        </div>\n      </div>\n\n      <div class=\"m_captureSettings--updateButton--buttons\">\n        <template v-if=\"current_mode === 'LocalSources'\">\n          <!-- <button\n            type=\"button\"\n            v-if=\"show_update_btn\"\n            class=\"u-button u-button_white u-button_wide\"\n            @click=\"setCameraStreamFromDefaults\"\n          >\n            {{ $t(\"update\") }}\n          </button> -->\n        </template>\n        <template v-else-if=\"current_mode === 'RemoteSources'\">\n          <transition name=\"fade_fast\" :duration=\"150\">\n            <LoaderSpinner v-if=\"access_distant_stream.calling\" />\n          </transition>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_red u-button_wide\"\n            v-if=\"!access_distant_stream.status.enabled\"\n            :disabled=\"\n              access_distant_stream.callee.length === 0 ||\n              access_distant_stream.calling\n            \"\n            @click=\"callStream\"\n          >\n            {{ $t(\"connect\") }}\n          </button>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_red u-button_wide\"\n            v-if=\"access_distant_stream.status.enabled\"\n            :disabled=\"\n              access_distant_stream.callee.length === 0 ||\n              access_distant_stream.calling\n            \"\n            @click=\"hangupStream\"\n          >\n            {{ $t(\"hangup\") }}\n          </button>\n        </template>\n\n        <!-- <button\n          type=\"button\"\n          class=\"bg-rouge u-buttonLink\"\n          @click=\"$emit('close')\"\n        >\n          <span class>{{ $t(\"close\") }}</span>\n        </button> -->\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport RTCMultiConnection from \"rtcmulticonnection\";\n\nexport default {\n  props: {\n    audio_output_deviceId: String,\n  },\n  components: {},\n  data() {\n    return {\n      is_loading_available_devices: false,\n      is_loading_feed: false,\n      status: undefined,\n\n      current_mode: \"LocalSources\",\n\n      current_stream: undefined,\n      local_stream: undefined,\n      remote_stream: undefined,\n\n      stream_current_settings: undefined,\n      desired_camera_resolution: undefined,\n      last_working_resolution: undefined,\n\n      selected_devices: {\n        video_input_device: undefined,\n        audio_input_device: undefined,\n        audio_output_device: undefined,\n      },\n\n      connected_devices: [],\n\n      predefined_resolutions: [\n        {\n          label: \"4K(UHD)\",\n          width: 3840,\n          height: 2160,\n          ratio: \"16:9\",\n        },\n        {\n          label: \"1080p(FHD)\",\n          width: 1920,\n          height: 1080,\n          ratio: \"16:9\",\n        },\n        {\n          label: \"720p(HD)\",\n          width: 1280,\n          height: 720,\n          ratio: \"16:9\",\n        },\n        {\n          label: \"VGA\",\n          width: 640,\n          height: 480,\n          ratio: \"4:3\",\n        },\n        {\n          label: \"QVGA\",\n          width: 320,\n          height: 240,\n          ratio: \"4:3\",\n        },\n      ],\n\n      unavailable_camera_resolutions: [],\n      custom_camera_resolution: {\n        label: this.$t(\"custom\"),\n        type: \"custom\",\n        width: 1280,\n        height: 720,\n      },\n\n      advanced_capture_options: {\n        echoCancellation: {\n          supported: undefined,\n          enabled: false,\n        },\n        noiseSuppression: {\n          supported: undefined,\n          enabled: false,\n        },\n        cursor: {\n          supported: undefined,\n          enabled: false,\n        },\n      },\n\n      rtcmulti_connection: undefined,\n\n      share_this_stream: {\n        enabled: false,\n        name: `DODOC-${(Math.random().toString(36) + \"00000000000000000\").slice(\n          2,\n          3 + 2\n        )}`,\n        status: {\n          loading: false,\n          enabled: undefined,\n          name: undefined,\n          peers_connected: [],\n        },\n      },\n\n      access_distant_stream: {\n        calling: false,\n        callee: \"\",\n        status: {\n          enabled: false,\n          callee: undefined,\n        },\n      },\n    };\n  },\n  created() {},\n  mounted() {\n    if (!navigator.mediaDevices.getUserMedia) {\n      alert(\"You need a browser that supports WebRTC\");\n      return;\n    }\n\n    this.is_loading_feed = true;\n    this.is_loading_available_devices = true;\n\n    //Call gUM early to force user gesture and allow device enumeration\n    navigator.mediaDevices\n      .getUserMedia({ audio: true, video: true })\n      .then((stream) => {\n        this.local_stream = stream;\n        // if (\"srcObject\" in this.$refs.videoElement) {\n        //   this.$refs.videoElement.srcObject = stream;\n        // } else {\n        //   // Avoid using this in new browsers, as it is going away.\n        //   this.$refs.videoElement.src = window.URL.createObjectURL(stream);\n        // }\n        return;\n      })\n      .catch((err) => {\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(\n            this.$t(\"couldnt_load_getusermedia\") +\n              \"<br>\" +\n              err.name +\n              \": \" +\n              err.message\n          );\n        // if (err.message === \"Could not start audio source\") {\n        // }\n        this.is_loading_feed = false;\n        this.$emit(\"hasFinishedLoading\");\n        this.$emit(\"show\");\n        return;\n      })\n      .then(this.refreshAvailableDevices)\n      .then(() => {\n        this.setDefaultInputsAndOutputs();\n      })\n      .catch((err) => {\n        this.is_loading_feed = false;\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(\n            this.$t(\"failed_listing_devices\") +\n              \"<br>\" +\n              err.name +\n              \": \" +\n              err.message\n          );\n      })\n      .then(() => this.setCameraStreamFromDefaults())\n      .then(() => {\n        this.is_loading_feed = false;\n        this.$emit(\"hasFinishedLoading\");\n      })\n      .catch(() => {\n        this.is_loading_feed = false;\n        this.$emit(\"hasFinishedLoading\");\n      });\n  },\n  beforeDestroy() {\n    if (this.local_stream)\n      this.local_stream.getTracks().forEach((track) => track.stop());\n    if (this.remote_stream)\n      this.remote_stream.getTracks().forEach((track) => track.stop());\n    this.closeMultiRTC();\n  },\n  watch: {\n    \"selected_devices.video_input_device\": function () {\n      this.unavailable_camera_resolutions = [];\n      this.last_working_resolution = false;\n    },\n    local_stream: function () {\n      this.setCurrentStream();\n    },\n    remote_stream: function () {\n      this.setCurrentStream();\n    },\n    current_mode: function () {\n      this.setCurrentStream();\n    },\n    current_stream: function () {\n      this.$emit(\"setStream\", {\n        stream: this.current_stream,\n        type: this.current_mode,\n      });\n    },\n    selected_devices: {\n      handler() {\n        localStorage.setItem(\n          \"selected_devices\",\n          JSON.stringify(this.selected_devices)\n        );\n        this.setCameraStreamFromDefaults();\n      },\n      deep: true,\n    },\n    desired_camera_resolution: {\n      handler() {\n        this.setCameraStreamFromDefaults();\n      },\n      deep: true,\n    },\n    last_working_resolution: {\n      handler() {\n        // TODO save last working res\n        // if (!this.last_working_resolution)\n        //   this.$root.settings.capture_options.last_working_resolution = false;\n        // this.$root.settings.capture_options.last_working_resolution =\n        //   JSON.parse(JSON.stringify(this.last_working_resolution));\n      },\n      deep: true,\n    },\n    share_this_stream: {\n      handler() {\n        this.$eventHub.$emit(\n          `stream.newSharingInformations`,\n          this.share_this_stream.status\n        );\n      },\n      deep: true,\n    },\n    access_distant_stream: {\n      handler() {\n        this.$eventHub.$emit(\n          `stream.newDistantAccessInformations`,\n          this.access_distant_stream.status\n        );\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    all_video_input_devices() {\n      return this.connected_devices.filter((d) => d.kind === \"videoinput\");\n    },\n    all_audio_input_devices() {\n      return this.connected_devices.filter((d) => d.kind === \"audioinput\");\n    },\n    all_audio_output_devices() {\n      return this.connected_devices.filter((d) => d.kind === \"audiooutput\");\n    },\n    current_settings() {\n      let _settings = \"\";\n\n      if (this.selected_devices.video_input_device) {\n        _settings += this.selected_devices.video_input_device.deviceId + \"-\";\n        if (\n          this.selected_devices.video_input_device.deviceId === \"screen_capture\"\n        )\n          _settings += this.advanced_capture_options.cursor.enabled + \"-\";\n      }\n\n      if (\n        !!this.desired_camera_resolution &&\n        !!this.desired_camera_resolution.width &&\n        !!this.desired_camera_resolution.height\n      ) {\n        _settings +=\n          this.desired_camera_resolution.width +\n          \"x\" +\n          this.desired_camera_resolution.height +\n          \"-\";\n      }\n\n      if (this.selected_devices.audio_input_device) {\n        _settings += this.selected_devices.audio_input_device.deviceId + \"-\";\n        _settings += this.noiseSuppression + \"-\";\n        _settings += this.echoCancellation + \"-\";\n      }\n\n      if (this.share_this_stream.enabled)\n        _settings += this.share_this_stream.name + \"-\";\n\n      if (this.selected_devices.audio_output_device)\n        _settings += this.selected_devices.audio_output_device.deviceId + \"-\";\n\n      return _settings;\n    },\n  },\n  methods: {\n    listDevices() {\n      return new Promise((resolve, reject) => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : listDevices`);\n\n        navigator.mediaDevices\n          .enumerateDevices()\n          .then((devices) => {\n            // if (!this.$root.is_electron) {\n            return resolve(devices);\n            // } else return devices;\n          })\n          // .then((devices) => {\n          //   this.getDesktopCapturer()\n          //     .then((sources) => {\n          //       devices = devices.concat(sources);\n          //     })\n          //     .catch(() => {})\n          //     .then(() => {\n          //       return resolve(devices);\n          //     });\n          // })\n          .catch((err) => {\n            return reject(err);\n          });\n      });\n    },\n    setCurrentStream() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : setCurrentStream`);\n\n      if (this.current_mode === \"RemoteSources\") {\n        this.current_stream = this.remote_stream;\n      } else if (this.current_mode === \"LocalSources\") {\n        this.current_stream = this.local_stream;\n      }\n    },\n    setSupportedConstraints() {\n      return new Promise((resolve) => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : setSupportedConstraints`);\n\n        const supported_constraints =\n          navigator.mediaDevices.getSupportedConstraints();\n        if (!supported_constraints) return resolve();\n\n        Object.entries(this.advanced_capture_options).map(([prop]) => {\n          this.advanced_capture_options[prop].supported =\n            this.advanced_capture_options[prop].enabled =\n              supported_constraints[prop] === true;\n        });\n        return resolve();\n      });\n    },\n    setDefaultInputsAndOutputs() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : setDefaultInputsAndOutputs`);\n\n      if (this.connected_devices.length === 0) return;\n\n      if (this.all_video_input_devices.length > 0)\n        this.selected_devices.video_input_device = this.getDefaultDevice({\n          key: \"video_input_device\",\n          devices_list: this.all_video_input_devices,\n        });\n\n      if (this.all_audio_input_devices.length > 0)\n        this.selected_devices.audio_input_device = this.getDefaultDevice({\n          key: \"audio_input_device\",\n          devices_list: this.all_audio_input_devices,\n        });\n      if (this.all_audio_output_devices.length > 0)\n        this.selected_devices.audio_output_device = this.getDefaultDevice({\n          key: \"audio_output_device\",\n          devices_list: this.all_audio_output_devices,\n        });\n\n      // TODO restore last working res\n      // if (\n      //   this.$root.settings.capture_options &&\n      //   this.$root.settings.capture_options.last_working_resolution\n      // ) {\n      //   this.desired_camera_resolution = JSON.parse(\n      //     JSON.stringify(\n      //       this.$root.settings.capture_options.last_working_resolution\n      //     )\n      //   );\n      // } else {\n      this.desired_camera_resolution = this.predefined_resolutions.find(\n        (r) => r.label === \"720p(HD)\"\n      );\n      // }\n    },\n    getDefaultDevice({ key, devices_list }) {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : getDefaultDevice`);\n\n      let previously_used = false;\n\n      if (localStorage.getItem(\"selected_devices\")) {\n        try {\n          previously_used = JSON.parse(\n            localStorage.getItem(\"selected_devices\")\n          );\n        } catch (e) {\n          /**/\n        }\n      }\n\n      if (previously_used?.[key]) {\n        const found_device = devices_list.find(\n          (d) => d.deviceId === previously_used[key].deviceId\n        );\n        // if true, use this\n        if (found_device) {\n          if (this.$root.debug_mode === true)\n            console.log(\n              `CaptureSettings  METHODS : getDefaultDevice  found previously used device for ` +\n                key\n            );\n\n          return found_device;\n        }\n      }\n\n      if (this.$root.debug_mode === true)\n        console.log(\n          `CaptureSettings  METHODS : getDefaultDevice  settings first available device for ` +\n            key\n        );\n\n      return devices_list[0];\n    },\n    startMediaDeviceFeed(constraints) {\n      return new Promise((resolve, reject) => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : startMediaDeviceFeed`);\n\n        let processFeeds = [];\n\n        // start video feed\n        processFeeds.push(\n          new Promise((resolve, reject) => {\n            if (!constraints.video) return resolve();\n            if (constraints._is_webrtc_screen_capture === true) {\n              navigator.mediaDevices\n                .getDisplayMedia({ video: constraints.video, audio: false })\n                .then((stream) => resolve({ type: \"videoStream\", stream }))\n                .catch((err) => reject(err));\n            } else {\n              navigator.mediaDevices\n                .getUserMedia({ video: constraints.video, audio: false })\n                .then((stream) => resolve({ type: \"videoStream\", stream }))\n                .catch((err) => reject(err));\n            }\n          })\n        );\n\n        // start audio feed\n        processFeeds.push(\n          new Promise((resolve, reject) => {\n            if (!constraints.audio) return resolve();\n            navigator.mediaDevices\n              .getUserMedia({ video: false, audio: constraints.audio })\n              .then((stream) => resolve({ type: \"audioStream\", stream }))\n              .catch((err) => reject(err));\n          })\n        );\n\n        Promise.all(processFeeds)\n          .then((streams) => {\n            if (!streams) reject(\"no feed available\");\n\n            let tracks = [];\n\n            const video_stream = streams.find(\n              (s) => s && s.type === \"videoStream\"\n            );\n            if (video_stream) tracks.push(...video_stream.stream.getTracks());\n\n            const audio_stream = streams.find(\n              (s) => s && s.type === \"audioStream\"\n            );\n            if (audio_stream)\n              tracks.push(...audio_stream.stream.getAudioTracks());\n\n            let stream = new MediaStream(tracks);\n\n            resolve(stream);\n          })\n          .catch((err) => reject(err));\n      });\n    },\n    // getAllAvailableResolutions() {\n    //   const all_resolutions = [];\n\n    //   this.is_scanning_resolutions = true;\n    //   // this.$refs.videoElement.pause();\n\n    //   let tasks = this.predefined_resolutions.map((resolution) => () =>\n    //     this.setCameraStream(\n    //       resolution,\n    //       this.selected_devices.video_input_device,\n    //       false\n    //     )\n    //   );\n\n    //   const serial = (funcs) =>\n    //     funcs.reduce(\n    //       (promise, func) =>\n    //         promise.then((result) =>\n    //           func().then(Array.prototype.concat.bind(result))\n    //         ),\n    //       Promise.resolve([])\n    //     );\n    //   serial(tasks).then((res) => {\n    //     res = res.filter((r) => !r.status && r.status !== \"error\");\n    //     // this.unavailable_camera_resolutions = res;\n    //     this.is_scanning_resolutions = false;\n    //     // this.$refs.videoElement.play();\n    //   });\n    // },\n    getDesktopCapturer() {\n      return new Promise((resolve, reject) => {\n        if (!window.electronAPI.desktopCapturer) return;\n\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : getDesktopCapturer`);\n\n        window.electronAPI\n          .desktopCapturer({ types: [\"window\", \"screen\"] })\n          .then((sources) => {\n            sources = sources.map((s) => {\n              return {\n                chromeMediaSource: \"desktop\",\n                deviceId: s.id,\n                kind: \"videoinput\",\n                label: \" \" + s.name,\n              };\n            });\n\n            return resolve(sources);\n          })\n          .catch((err) => reject(err));\n        // .catch((err) => reject(err));\n      });\n    },\n    refreshAvailableDevices() {\n      return new Promise((resolve) => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : refreshAvailableDevices`);\n\n        this.connected_devices = [];\n        this.is_loading_available_devices = true;\n        this.setSupportedConstraints()\n          .then(() => this.listDevices())\n          .then((devices) => {\n            this.connected_devices = devices.map((d) => {\n              return {\n                label: d.label,\n                kind: d.kind,\n                deviceId: d.deviceId,\n                chromeMediaSource: d.chromeMediaSource\n                  ? d.chromeMediaSource\n                  : false,\n              };\n            });\n\n            // if (!this.$root.is_electron) {\n            this.connected_devices.push({\n              deviceId: \"screen_capture\",\n              kind: \"videoinput\",\n              label: \" \" + this.$t(\"screen_capture\"),\n            });\n            // }\n\n            this.is_loading_available_devices = false;\n            return resolve();\n          });\n      });\n    },\n    setCameraStreamFromDefaults() {\n      return new Promise((resolve, reject) => {\n        if (this.$root.debug_mode === true)\n          console.log(\n            `CaptureSettings  METHODS : setCameraStreamFromDefaults`\n          );\n\n        this.is_loading_feed = true;\n\n        if (this.selected_devices.audio_output_device)\n          this.$emit(\n            \"update:audio_output_deviceId\",\n            this.selected_devices.audio_output_device.deviceId\n          );\n\n        this.startLocalStream()\n          .then(() => {\n            this.stream_current_settings = this.current_settings;\n            this.last_working_resolution = this.desired_camera_resolution;\n            this.is_loading_feed = false;\n            return;\n          })\n          .catch((error) => {\n            this.is_loading_feed = false;\n            this.$alertify\n              .closeLogOnClick(true)\n              .delay(4000)\n              .error(\n                this.$t(\"failed_to_start_streams_change_source_or_res\") +\n                  \"<br>\" +\n                  error.name\n              );\n            if (this.desired_camera_resolution.type !== \"custom\") {\n              this.unavailable_camera_resolutions.push(\n                this.desired_camera_resolution.label\n              );\n              if (this.last_working_resolution) {\n                this.desired_camera_resolution = this.last_working_resolution;\n                this.last_working_resolution = false;\n                setTimeout(() => {\n                  this.setCameraStreamFromDefaults()\n                    .then(() => resolve())\n                    .catch(() => reject());\n                }, 500);\n              } else {\n                return reject();\n              }\n            }\n          })\n          .then(() => {\n            this.share_this_stream.status.loading = true;\n            return this.setStreamSharing();\n          })\n          .then(() => {\n            this.share_this_stream.status.loading = false;\n            this.is_loading_feed = false;\n            return resolve();\n          })\n          .catch((error) => {\n            this.share_this_stream.status.loading = false;\n            this.is_loading_feed = false;\n            this.$alertify\n              .closeLogOnClick(true)\n              .delay(4000)\n              .error(this.$t(\"failed_to_share_stream\") + \"<br>\" + error.name);\n          });\n      });\n    },\n    startLocalStream() {\n      return new Promise((resolve, reject) => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : startLocalStream`);\n\n        //Kill any running streams;\n        if (this.local_stream)\n          this.local_stream.getTracks().forEach((track) => track.stop());\n\n        let constraints = this.createConstraintsFromSelected();\n\n        setTimeout(\n          () => {\n            this.startMediaDeviceFeed(constraints)\n              .then((stream) => {\n                this.local_stream = stream;\n                return resolve();\n              })\n              .catch((error) => {\n                console.log(\"getUserMedia error : \", error);\n                this.$emit(\"show\");\n                if (error.name === \"NotAllowedError\") {\n                  this.status = \"not_allowed\";\n                }\n                return reject(error);\n              });\n          },\n          this.local_stream ? 200 : 0\n        ); //official examples had this at 200\n      });\n    },\n    createConstraintsFromSelected() {\n      if (this.$root.debug_mode === true)\n        console.log(\n          `CaptureSettings  METHODS : createConstraintsFromSelected`\n        );\n\n      let _constraints = {\n        audio: false,\n        video: false,\n      };\n\n      _constraints.audio = {\n        deviceId: this.selected_devices.audio_input_device.deviceId\n          ? { exact: this.selected_devices.audio_input_device.deviceId }\n          : undefined,\n        echoCancellation:\n          this.advanced_capture_options.echoCancellation.enabled,\n        noiseSuppression:\n          this.advanced_capture_options.noiseSuppression.enabled,\n      };\n\n      // IF ELECTRON DESKTOP CAPTURER AND VIDEO ENABLED\n      if (this.selected_devices.video_input_device?.chromeMediaSource) {\n        // screen capture devices\n        _constraints._is_electron_screen_capture = true;\n        _constraints.video = {\n          mandatory: {\n            chromeMediaSource:\n              this.selected_devices.video_input_device.chromeMediaSource,\n            chromeMediaSourceId:\n              this.selected_devices.video_input_device.deviceId,\n            // minWidth: this.desired_camera_resolution.width,\n            // maxWidth: this.desired_camera_resolution.width,\n            // minHeight: this.desired_camera_resolution.height,\n            // maxHeight: this.desired_camera_resolution.height,\n          },\n        };\n      } else {\n        // IF BROWSER SCREEN CAPTURE\n        // IF BROWSER OR ELECTRON CAMERA FEED\n        if (\n          this.selected_devices.video_input_device &&\n          this.selected_devices.video_input_device.deviceId === \"screen_capture\"\n        ) {\n          _constraints._is_webrtc_screen_capture = true;\n          _constraints.video = {\n            cursor: this.advanced_capture_options.cursor.enabled,\n          };\n        } else {\n          _constraints.video = {\n            deviceId: this.selected_devices.video_input_device.deviceId\n              ? {\n                  exact: this.selected_devices.video_input_device.deviceId,\n                }\n              : undefined,\n            width: { exact: this.desired_camera_resolution.width }, //new syntax\n            height: { exact: this.desired_camera_resolution.height }, //new syntax\n          };\n        }\n      }\n\n      console.log(\"Constraints = \" + JSON.stringify(_constraints, null, 4));\n\n      return _constraints;\n    },\n    setStreamSharing() {\n      return new Promise((resolve, reject) => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : setStreamSharing`);\n\n        if (!this.share_this_stream.enabled) {\n          this.stopSharingStream();\n          return resolve();\n        }\n\n        if (this.share_this_stream.name.length === 0)\n          return reject(\"missing_stream_name\");\n\n        if (!this.local_stream)\n          this.$alertify\n            .closeLogOnClick(true)\n            .delay(4000)\n            .error(this.$t(\"no_stream_found_while_sharing\"));\n\n        if (!this.rtcmulti_connection) {\n          this.initRTCMulti();\n        }\n\n        this.rtcmulti_connection.addStream(this.local_stream);\n\n        this.rtcmulti_connection.open(\n          this.share_this_stream.name,\n          (isRoomOpened, roomid, error) => {\n            if (this.$root.debug_mode === true)\n              console.log(\n                `CaptureSettings  METHODS : setStreamSharing  opened room ${roomid}`\n              );\n\n            this.share_this_stream.status.enabled = true;\n            this.share_this_stream.status.name = roomid;\n\n            this.rtcmulti_connection.onNewParticipant = (\n              participantId,\n              userPreferences\n            ) =>\n              this.newParticipantOnStream({ participantId, userPreferences });\n\n            this.rtcmulti_connection.onleave = (participantId) =>\n              this.onParticipantLeave({ participantId });\n\n            if (error) {\n              this.$alertify\n                .closeLogOnClick(true)\n                .delay(4000)\n                .error(\n                  this.$t(\"failed_to_start_stream_sharing\") +\n                    \" \" +\n                    error.message\n                );\n            }\n          }\n        );\n\n        return resolve();\n      });\n    },\n    newParticipantOnStream({ participantId, userPreferences }) {\n      this.share_this_stream.status.peers_connected.push(participantId);\n\n      this.$alertify\n        .closeLogOnClick(true)\n        .delay(8000)\n        .success(this.$t(\"new_user_connected_to_stream\"));\n\n      this.rtcmulti_connection.acceptParticipationRequest(\n        participantId,\n        userPreferences\n      );\n    },\n    onParticipantLeave(participantId) {\n      if (this.$root.debug_mode === true)\n        console.log(\n          `CaptureSettings  METHODS : onParticipantLeave ${participantId}`\n        );\n\n      this.share_this_stream.status.peers_connected.filter(\n        (id) => id !== participantId\n      );\n    },\n    callStream() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : callStream`);\n\n      this.access_distant_stream.calling = true;\n\n      if (!this.rtcmulti_connection) this.initRTCMulti();\n\n      const call_timeout = setTimeout(() => {\n        this.access_distant_stream.calling = false;\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(\"Failed to call timeout\");\n      }, 5000);\n\n      this.rtcmulti_connection.onstream = (event) => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureSettings  METHODS : callStream  onstream`);\n\n        event.mediaElement.removeAttribute(\"src\");\n        event.mediaElement.removeAttribute(\"srcObject\");\n        event.mediaElement.muted = true;\n        event.mediaElement.volume = 0;\n\n        if (this.access_distant_stream.calling) {\n          this.remote_stream = event.stream;\n          this.access_distant_stream.calling = false;\n          this.access_distant_stream.status.enabled = true;\n          clearTimeout(call_timeout);\n        }\n      };\n\n      this.rtcmulti_connection.checkPresence(\n        this.access_distant_stream.callee,\n        (isOnline, username) => {\n          if (this.$root.debug_mode === true)\n            console.log(\n              `CaptureSettings  METHODS : username  for ${username} and ${isOnline}`\n            );\n          if (!isOnline) {\n            this.$alertify\n              .closeLogOnClick(true)\n              .delay(4000)\n              .error(username + \" is not online.\");\n\n            this.access_distant_stream.calling = false;\n            clearTimeout(call_timeout);\n            return;\n          }\n\n          this.$alertify\n            .closeLogOnClick(true)\n            .delay(4000)\n            .success(username + \" is online.\");\n          this.access_distant_stream.status.callee = username;\n          this.rtcmulti_connection.join(username);\n        }\n      );\n    },\n    hangupStream() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : hangupStream`);\n\n      this.rtcmulti_connection.leave();\n      this.access_distant_stream.status.enabled = false;\n    },\n    initRTCMulti() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : initRTCMulti`);\n\n      if (!window.rtcmulti_connection)\n        window.rtcmulti_connection = new RTCMultiConnection();\n      this.rtcmulti_connection = window.rtcmulti_connection;\n\n      this.rtcmulti_connection.iceServers = [\n        {\n          urls: [\n            \"stun:stun.l.google.com:19302\",\n            \"stun:stun1.l.google.com:19302\",\n            \"stun:stun2.l.google.com:19302\",\n            \"stun:stun.l.google.com:19302?transport=udp\",\n          ],\n        },\n      ];\n\n      // detect 2G\n      if (\n        navigator.connection &&\n        navigator.connection.type === \"cellular\" &&\n        navigator.connection.downlinkMax <= 0.115\n      )\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(this.$t(\"bandwidth_very_low_for_stream_sharing\"));\n\n      this.rtcmulti_connection.socketURL =\n        \"https://rtcmulticonnection.herokuapp.com:443/\";\n\n      this.rtcmulti_connection.dontCaptureUserMedia = true;\n\n      this.rtcmulti_connection.session = {\n        video: true,\n        audio: true,\n        oneway: true,\n      };\n\n      this.rtcmulti_connection.onstream = (event) => {\n        console.log(\"CaptureSettings: onstream\");\n        event.mediaElement.volume = 0;\n      };\n      this.rtcmulti_connection.onstreamended = () => {\n        console.log(\"CaptureSettings: onstreamended\");\n        this.$alertify.closeLogOnClick(true).delay(4000).error(\"onstreamended\");\n        // this.share_this_stream.status.enabled = false;\n      };\n      this.rtcmulti_connection.onMediaError = (e) => {\n        console.log(\"CaptureSettings: onMediaError\");\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(this.$t(\"stream_sharing_media_error\") + e.message);\n      };\n    },\n    stopSharingStream() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : stopSharingStream`);\n\n      if (!this.rtcmulti_connection) return;\n\n      // only disconnect peers connected to this stream\n\n      this.share_this_stream.status.peers_connected.map((pid) => {\n        this.rtcmulti_connection.disconnectWith(pid);\n      });\n    },\n    closeMultiRTC() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureSettings  METHODS : closeMultiRTC`);\n\n      if (!this.rtcmulti_connection) return;\n\n      this.stopSharingStream();\n      this.rtcmulti_connection.closeSocket();\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_captureSettings {\n  margin-top: calc(var(--spacing) / 2);\n  color: white;\n\n  label,\n  small,\n  .u-label,\n  .u-buttonLink {\n    color: inherit;\n  }\n\n  select {\n    color: var(--c-noir);\n  }\n}\n\n.m_captureSettings--settings {\n  overflow-y: auto;\n  flex: 1 1 auto;\n  // padding-bottom: var(--spacing);\n\n  > div {\n    padding: calc(var(--spacing) / 2);\n    padding-top: calc(var(--spacing) / 4);\n    > div {\n      background-color: rgba(0, 0, 0, 0.1);\n      padding: 0 calc(var(--spacing) / 2) calc(var(--spacing) / 2);\n      border-radius: 6px;\n\n      > div {\n        padding-top: calc(var(--spacing) / 4);\n        margin-bottom: calc(var(--spacing) / 4);\n\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n    > label {\n      line-height: 2;\n    }\n  }\n}\n\n.m_captureSettings--settings--resolutions {\n  label {\n    padding: calc(var(--spacing) / 4) 0;\n\n    display: flex;\n    align-items: center;\n\n    > input {\n      flex: 0 0 auto;\n      margin-right: calc(var(--spacing) / 3);\n    }\n  }\n}\n\n.m_captureSettings--updateButton {\n  flex: 0 0 auto;\n  border-top: 2px solid var(--c-rouge_fonce);\n  color: black;\n\n  display: flex;\n  flex-flow: column wrap;\n  // align-items: center;\n  // justify-content: center;\n}\n\n.m_sideBySideSwitches {\n  flex-flow: row nowrap;\n}\n\n.m_sideBySideSwitches > * {\n  display: block;\n  border-color: var(--c-rouge_fonce);\n  min-width: 100px;\n  padding: calc(var(--spacing) / 8) 0;\n\n  display: flex;\n  flex-flow: row wrap;\n  align-items: stretch;\n\n  input {\n    margin: calc(var(--spacing) / 2);\n\n    @media only screen and (max-width: 780px) {\n      margin: calc(var(--spacing) / 4);\n    }\n  }\n\n  > div {\n    flex: 1 1 0;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n  }\n\n  small {\n    flex: 0 0 100%;\n    background-color: var(--c-rouge_fonce);\n    display: block;\n    text-align: center;\n    font-style: normal;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n\n.m_captureSettings--updateButton--buttons {\n  padding: calc(var(--spacing) / 2);\n  display: flex;\n  justify-content: center;\n}\n.m_captureSettings--updateButton--shareStreamToggle {\n  position: relative;\n  background-color: var(--c-rouge_fonce);\n  color: white;\n  text-align: center;\n}\n\n._close_button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  min-height: 0;\n  padding: 0;\n  margin: calc(var(--spacing) / 4);\n\n  img {\n    width: 2rem;\n    height: 2rem;\n  }\n}\n\n._loader {\n  position: absolute;\n  z-index: 1000;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureSettings.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureSettings.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CaptureSettings.vue?vue&type=template&id=a8d9769a&scoped=true\"\nimport script from \"./CaptureSettings.vue?vue&type=script&lang=js\"\nexport * from \"./CaptureSettings.vue?vue&type=script&lang=js\"\nimport style0 from \"./CaptureSettings.vue?vue&type=style&index=0&id=a8d9769a&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a8d9769a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_captureEffects\"},[_c('div',{staticClass:\"_content\"},[_c('div',{staticClass:\"_options\"},[_c('div',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flip_horizontally),expression:\"flip_horizontally\"}],attrs:{\"id\":\"flip_horizontally\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.flip_horizontally)?_vm._i(_vm.flip_horizontally,null)>-1:(_vm.flip_horizontally)},on:{\"change\":function($event){var $$a=_vm.flip_horizontally,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.flip_horizontally=$$a.concat([$$v]))}else{$$i>-1&&(_vm.flip_horizontally=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.flip_horizontally=$$c}}}}),_c('label',{attrs:{\"for\":\"flip_horizontally\"}},[_vm._v(_vm._s(_vm.$t(\"flip_horizontally\")))])]),_c('div',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flip_vertically),expression:\"flip_vertically\"}],attrs:{\"id\":\"flip_vertically\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.flip_vertically)?_vm._i(_vm.flip_vertically,null)>-1:(_vm.flip_vertically)},on:{\"change\":function($event){var $$a=_vm.flip_vertically,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.flip_vertically=$$a.concat([$$v]))}else{$$i>-1&&(_vm.flip_vertically=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.flip_vertically=$$c}}}}),_c('label',{attrs:{\"for\":\"flip_vertically\"}},[_vm._v(_vm._s(_vm.$t(\"flip_vertically\")))])]),_c('div',[_c('div',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.chroma_key_settings.enable),expression:\"chroma_key_settings.enable\"}],attrs:{\"id\":\"chroma_key\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.chroma_key_settings.enable)?_vm._i(_vm.chroma_key_settings.enable,null)>-1:(_vm.chroma_key_settings.enable)},on:{\"change\":function($event){var $$a=_vm.chroma_key_settings.enable,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.chroma_key_settings, \"enable\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.chroma_key_settings, \"enable\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.chroma_key_settings, \"enable\", $$c)}}}}),_c('label',{attrs:{\"for\":\"chroma_key\"}},[_vm._v(_vm._s(_vm.$t(\"chroma_key\")))])]),_c('div',{class:{\n            'is--disabled': !_vm.chroma_key_settings.enable,\n          }},[_c('ColorInput',{attrs:{\"label\":_vm.$t('color'),\"value\":_vm.chroma_key_color_hex},on:{\"save\":function($event){_vm.chroma_key_color_hex = $event}}}),_c('div',[_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.setTogglePickColorFromVideo}},[(!_vm.enable_pick_color_from_video)?[_vm._v(\" \"+_vm._s(_vm.$t(\"pick_color_in_video\"))+\" \")]:[_vm._v(\" \"+_vm._s(_vm.$t(\"click_in_video\"))+\" \")]],2)]),_c('br'),_c('div',[_c('div',{},[_c('label',[_vm._v(_vm._s(_vm.$t(\"similarity\")))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.chroma_key_settings.similarity),expression:\"chroma_key_settings.similarity\",modifiers:{\"number\":true}}],staticClass:\"margin-none\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.001\"},domProps:{\"value\":(_vm.chroma_key_settings.similarity)},on:{\"__r\":function($event){_vm.$set(_vm.chroma_key_settings, \"similarity\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{},[_c('label',[_vm._v(_vm._s(_vm.$t(\"smoothness\")))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.chroma_key_settings.smoothness),expression:\"chroma_key_settings.smoothness\",modifiers:{\"number\":true}}],staticClass:\"margin-none\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.001\"},domProps:{\"value\":(_vm.chroma_key_settings.smoothness)},on:{\"__r\":function($event){_vm.$set(_vm.chroma_key_settings, \"smoothness\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{},[_c('label',[_vm._v(_vm._s(_vm.$t(\"spill\")))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.chroma_key_settings.spill),expression:\"chroma_key_settings.spill\",modifiers:{\"number\":true}}],staticClass:\"margin-none\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.001\",\"value\":\"0.1\"},domProps:{\"value\":(_vm.chroma_key_settings.spill)},on:{\"__r\":function($event){_vm.$set(_vm.chroma_key_settings, \"spill\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('br'),_c('label',[_vm._v(_vm._s(_vm.$t(\"replace_color_with\")))]),_c('div',{staticClass:\"u-switch u-switch-xs u-switch_twoway u-padding_verysmall\"},[_c('label',{staticClass:\"cursor-pointer\",class:{\n                'is--active':\n                  _vm.chroma_key_settings.replacement_mode === 'color',\n              },attrs:{\"for\":\"chroma_key_use_image\"}},[_c('span',{},[_vm._v(_vm._s(_vm.$t(\"color\")))])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.chroma_key_settings.replacement_mode),expression:\"chroma_key_settings.replacement_mode\"}],attrs:{\"type\":\"checkbox\",\"id\":\"chroma_key_use_image\",\"value\":\"color\",\"true-value\":\"image\",\"false-value\":\"color\"},domProps:{\"checked\":Array.isArray(_vm.chroma_key_settings.replacement_mode)?_vm._i(_vm.chroma_key_settings.replacement_mode,\"color\")>-1:_vm._q(_vm.chroma_key_settings.replacement_mode,\"image\")},on:{\"change\":function($event){var $$a=_vm.chroma_key_settings.replacement_mode,$$el=$event.target,$$c=$$el.checked?(\"image\"):(\"color\");if(Array.isArray($$a)){var $$v=\"color\",$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.chroma_key_settings, \"replacement_mode\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.chroma_key_settings, \"replacement_mode\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.chroma_key_settings, \"replacement_mode\", $$c)}}}}),_c('label',{class:{\n                'is--active':\n                  _vm.chroma_key_settings.replacement_mode === 'image',\n              },attrs:{\"for\":\"chroma_key_use_image\"}},[_c('span',{},[_vm._v(_vm._s(_vm.$t(\"image\")))])])]),(_vm.chroma_key_settings.replacement_mode === 'image')?_c('div',[_c('ImageSelect',{attrs:{\"path\":_vm.project_path,\"available_options\":['project']},on:{\"newPreview\":_vm.newChromaKeyImage}})],1):_c('div',[_c('ColorInput',{attrs:{\"can_toggle\":false,\"value\":_vm.chroma_key_replacement_color_hex},on:{\"save\":function($event){_vm.chroma_key_replacement_color_hex = $event}}})],1)],1)]),_vm._l((Object.entries(_vm.image_filters_settings)),function([name, props]){return _c('div',{key:name},[_c('div',{staticClass:\"u-switch u-switch-xs\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.image_filters_settings[name].enable),expression:\"image_filters_settings[name].enable\"}],attrs:{\"id\":`${name}_slider`,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.image_filters_settings[name].enable)?_vm._i(_vm.image_filters_settings[name].enable,null)>-1:(_vm.image_filters_settings[name].enable)},on:{\"change\":function($event){var $$a=_vm.image_filters_settings[name].enable,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.image_filters_settings[name], \"enable\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.image_filters_settings[name], \"enable\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.image_filters_settings[name], \"enable\", $$c)}}}}),_c('label',{attrs:{\"for\":`${name}_slider`}},[_vm._v(_vm._s(_vm.$t(name))+\"  \"+_vm._s(_vm.image_filters_settings[name].value))])]),(_vm.image_filters_settings[name].enable)?_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.image_filters_settings[name].value),expression:\"image_filters_settings[name].value\",modifiers:{\"number\":true}}],staticClass:\"margin-none\",attrs:{\"type\":\"range\",\"min\":props.min,\"max\":props.max,\"step\":props.step,\"title\":_vm.image_filters_settings[name].value},domProps:{\"value\":(_vm.image_filters_settings[name].value)},on:{\"__r\":function($event){_vm.$set(_vm.image_filters_settings[name], \"value\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]):_vm._e()])})],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m_captureEffects\">\n    <div class=\"_content\">\n      <div class=\"_options\">\n        <!-- :class=\"{\n          'is--disabled': !enable_effects,\n        }\" -->\n        <div class=\"u-switch u-switch-xs\">\n          <input\n            id=\"flip_horizontally\"\n            type=\"checkbox\"\n            v-model=\"flip_horizontally\"\n          />\n          <label for=\"flip_horizontally\">{{ $t(\"flip_horizontally\") }}</label>\n        </div>\n        <div class=\"u-switch u-switch-xs\">\n          <input\n            id=\"flip_vertically\"\n            type=\"checkbox\"\n            v-model=\"flip_vertically\"\n          />\n          <label for=\"flip_vertically\">{{ $t(\"flip_vertically\") }}</label>\n        </div>\n\n        <div>\n          <div class=\"u-switch u-switch-xs\">\n            <input\n              id=\"chroma_key\"\n              type=\"checkbox\"\n              v-model=\"chroma_key_settings.enable\"\n            />\n            <label for=\"chroma_key\">{{ $t(\"chroma_key\") }}</label>\n          </div>\n          <div\n            :class=\"{\n              'is--disabled': !chroma_key_settings.enable,\n            }\"\n          >\n            <ColorInput\n              :label=\"$t('color')\"\n              :value=\"chroma_key_color_hex\"\n              @save=\"chroma_key_color_hex = $event\"\n            />\n            <div>\n              <button\n                type=\"button\"\n                class=\"u-buttonLink\"\n                @click=\"setTogglePickColorFromVideo\"\n              >\n                <template v-if=\"!enable_pick_color_from_video\">\n                  {{ $t(\"pick_color_in_video\") }}\n                </template>\n                <template v-else>\n                  {{ $t(\"click_in_video\") }}\n                </template>\n              </button>\n            </div>\n\n            <br />\n\n            <div>\n              <div class=\"\">\n                <label>{{ $t(\"similarity\") }}</label>\n                <input\n                  class=\"margin-none\"\n                  type=\"range\"\n                  v-model.number=\"chroma_key_settings.similarity\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.001\"\n                />\n              </div>\n\n              <div class=\"\">\n                <label>{{ $t(\"smoothness\") }}</label>\n                <input\n                  class=\"margin-none\"\n                  type=\"range\"\n                  v-model.number=\"chroma_key_settings.smoothness\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.001\"\n                />\n              </div>\n\n              <div class=\"\">\n                <label>{{ $t(\"spill\") }}</label>\n                <input\n                  class=\"margin-none\"\n                  type=\"range\"\n                  v-model.number=\"chroma_key_settings.spill\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.001\"\n                  value=\"0.1\"\n                />\n              </div>\n            </div>\n\n            <br />\n            <label>{{ $t(\"replace_color_with\") }}</label>\n\n            <div\n              class=\"u-switch u-switch-xs u-switch_twoway u-padding_verysmall\"\n            >\n              <label\n                for=\"chroma_key_use_image\"\n                class=\"cursor-pointer\"\n                :class=\"{\n                  'is--active':\n                    chroma_key_settings.replacement_mode === 'color',\n                }\"\n              >\n                <span class>{{ $t(\"color\") }}</span>\n              </label>\n              <input\n                type=\"checkbox\"\n                id=\"chroma_key_use_image\"\n                v-model=\"chroma_key_settings.replacement_mode\"\n                value=\"color\"\n                true-value=\"image\"\n                false-value=\"color\"\n              />\n              <label\n                for=\"chroma_key_use_image\"\n                :class=\"{\n                  'is--active':\n                    chroma_key_settings.replacement_mode === 'image',\n                }\"\n              >\n                <span class>{{ $t(\"image\") }}</span>\n              </label>\n            </div>\n\n            <div v-if=\"chroma_key_settings.replacement_mode === 'image'\">\n              <ImageSelect\n                :path=\"project_path\"\n                :available_options=\"['project']\"\n                @newPreview=\"newChromaKeyImage\"\n              />\n            </div>\n            <div v-else>\n              <ColorInput\n                :can_toggle=\"false\"\n                :value=\"chroma_key_replacement_color_hex\"\n                @save=\"chroma_key_replacement_color_hex = $event\"\n              />\n            </div>\n          </div>\n        </div>\n        <div\n          v-for=\"[name, props] in Object.entries(image_filters_settings)\"\n          :key=\"name\"\n        >\n          <div class=\"u-switch u-switch-xs\">\n            <input\n              :id=\"`${name}_slider`\"\n              type=\"checkbox\"\n              v-model=\"image_filters_settings[name].enable\"\n            />\n            <label :for=\"`${name}_slider`\"\n              >{{ $t(name) }}  {{ image_filters_settings[name].value }}</label\n            >\n          </div>\n\n          <div v-if=\"image_filters_settings[name].enable\">\n            <input\n              class=\"margin-none\"\n              type=\"range\"\n              v-model.number=\"image_filters_settings[name].value\"\n              :min=\"props.min\"\n              :max=\"props.max\"\n              :step=\"props.step\"\n              :title=\"image_filters_settings[name].value\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    enable_effects: Boolean,\n    videoElement: HTMLVideoElement,\n    canvasElement: HTMLCanvasElement,\n    project_path: String,\n  },\n  components: {},\n  data() {\n    return {\n      source_stream_resolution: {\n        width: undefined,\n        height: undefined,\n      },\n\n      flip_horizontally: false,\n      flip_vertically: false,\n\n      chroma_key_settings: {\n        enable: false,\n        key_color: {\n          r: 0,\n          g: 255,\n          b: 0,\n        }, // 0 -> 1 by 0.001\n        similarity: 0.02, // 0 -> 1 by 0.001\n        smoothness: 0.08, // 0 -> 1 by 0.001\n        spill: 0.1, // 0 -> 1 by 0.001\n        replacement_color: {\n          r: 252,\n          g: 75,\n          b: 96,\n        },\n        replacement_mode: \"color\",\n        replacement_image: undefined,\n      },\n\n      image_filters_settings: {\n        brightness: {\n          enable: false,\n          value: 1,\n          order: 0,\n          default: 1,\n          min: 0,\n          max: 2,\n          step: 0.01,\n        },\n        contrast: {\n          enable: false,\n          value: 1,\n          order: 1,\n          default: 1,\n          min: 0,\n          max: 3,\n          step: 0.01,\n        },\n        hue: {\n          enable: false,\n          value: 0,\n          order: 2,\n          default: 0,\n          min: -0.5,\n          max: 0.5,\n          step: 0.01,\n        },\n        saturation: {\n          enable: false,\n          value: 0,\n          order: 3,\n          default: 0,\n          min: -1,\n          max: 1,\n          step: 0.01,\n        },\n        lightness: {\n          enable: false,\n          value: 0,\n          order: 4,\n          default: 0,\n          min: -1,\n          max: 1,\n          step: 0.01,\n        },\n        dotscreen: {\n          enable: false,\n          value: 10,\n          order: 6,\n          default: 10,\n          min: 3,\n          max: 20,\n          step: 0.01,\n        },\n      },\n\n      enable_pick_color_from_video: false,\n\n      offscreen_canvas: undefined,\n\n      fragment_shader: `\nprecision mediump float;\n#define PI 3.1415926538\n\nuniform sampler2D videoTex;\nuniform float texWidth;\nuniform float texHeight;\n\n\nuniform int flipHorizontally;\nuniform int flipVertically;\n\nuniform vec3 keyColor;\nuniform vec3 replacementColor;\nuniform sampler2D replacementImage;\n\nuniform float similarity;\nuniform float smoothness;\nuniform float spill;\nuniform int chromaKeyMode;\n\nuniform float brightness;\nuniform float contrast;\nuniform float mid;\n\nuniform float hue;\nuniform float saturation;\nuniform float lightness;\n\nuniform float dotscreen;\n\n\n// From https://github.com/libretro/glsl-shaders/blob/master/nnedi3/shaders/rgb-to-yuv.glsl\nvec2 RGBtoUV(vec3 rgb) {\n  return vec2(\n    rgb.r * -0.169 + rgb.g * -0.331 + rgb.b *  0.5    + 0.5,\n    rgb.r *  0.5   + rgb.g * -0.419 + rgb.b * -0.081  + 0.5\n  );\n}\n\nvec4 ProcessChromaKey(vec2 texCoord, vec4 videoColor) {\n  float chromaDist = distance(RGBtoUV(videoColor.rgb), RGBtoUV(keyColor));\n\n  float baseMask = chromaDist - similarity;\n  float fullMask = pow(clamp(baseMask / smoothness, 0., 1.), 1.5);\n  videoColor.a = fullMask;\n\n  float spillVal = pow(clamp(baseMask / spill, 0., 1.), 1.5);\n  float desat = clamp(videoColor.r * 0.2126 + videoColor.g * 0.7152 + videoColor.b * 0.0722, 0., 1.);\n  videoColor.rgb = mix(vec3(desat, desat, desat), videoColor.rgb, spillVal);\n\n  return videoColor;\n}\nvec4 ApplyChromaKey(vec2 texCoord, vec4 videoColor)  {\n  vec4 chromaVideoColor = ProcessChromaKey(texCoord, videoColor);\n\n  vec4 replaceWith = vec4(0.0);\n  if(chromaKeyMode == 0) {\n    // color\n    replaceWith = vec4(replacementColor, 1.0);\n  } else if(chromaKeyMode == 1) {\n    // image\n    replaceWith = vec4(texture2D(replacementImage, texCoord));\n  }\n\n  vec4 result = mix(vec4(chromaVideoColor.rgb, 1.0), replaceWith, 1.0 - chromaVideoColor.a);\n  return result;\n}\n\nvec3 RGBtoHCV(vec3 RGB) {\n  float Epsilon = 0.00000000001;\n  // Based on work by Sam Hocevar and Emil Persson\n  vec4 P = (RGB.g < RGB.b) ? vec4(RGB.bg, -1.0, 2.0/3.0) : vec4(RGB.gb, 0.0, -1.0/3.0);\n  vec4 Q = (RGB.r < P.x) ? vec4(P.xyw, RGB.r) : vec4(RGB.r, P.yzx);\n  float C = Q.x - min(Q.w, Q.y);\n  float H = abs((Q.w - Q.y) / (6.0 * C + Epsilon) + Q.z);\n  return vec3(H, C, Q.x);\n}\nvec3 HUEtoRGB(float h) {\n  float r = abs(h * 6.0 - 3.0) - 1.0;\n  float g = 2.0 - abs(h * 6.0 - 2.0);\n  float b = 2.0 - abs(h * 6.0 - 4.0);\n  return clamp(vec3(r, g, b), 0.0, 1.0);\n}\n\nvec3 RGBtoHSL(vec3 RGB) {\n  float Epsilon = 0.00000000001;\n  vec3 HCV = RGBtoHCV(RGB);\n  float L = HCV.z - HCV.y * 0.5;\n  float S = HCV.y / (1.0 - abs(L * 2.0 - 1.0) + Epsilon);\n  return vec3(HCV.x, S, L);\n}\nvec3 HSLtoRGB(vec3 HSL) {\n  vec3 RGB = HUEtoRGB(HSL.x);\n  float C = (1.0 - abs(2.0 * HSL.z - 1.0)) * HSL.y;\n  return (RGB - 0.5) * C + HSL.z;\n}\nfloat clamp_continuous(float value) {\n  float unit = value;\n\n  if (unit > 1.0) {\n    unit = mod(unit, 1.0);\n  } else if (unit < 0.0) {\n    unit = 1.0 + unit;\n  }\n\n  return unit;\n}\n\nfloat mix_factor(vec4 range, vec3 hsl) {\n  float mix_factor = 0.0;\n\n  if (hsl.x >= range.x && hsl.x <= range.w) {\n    // lower range\n    if (hsl.x >= range.x && hsl.x < range.y) {\n      mix_factor = smoothstep(range.x, range.y, hsl.x);\n    }\n\n    // target range\n    if (hsl.x >= range.y && hsl.x <= range.z) {\n      mix_factor = 1.0;\n    }\n\n    // upper range\n    if (hsl.x > range.z && hsl.x <= range.w) {\n      mix_factor = 1.0 - smoothstep(range.z, range.w, hsl.x);\n    }\n  }\n\n  vec2 lightness_range = vec2(0.0, 0.08333);\n  vec2 saturation_range = vec2(0.0, 0.08333);\n  mix_factor *= smoothstep(saturation_range.x, saturation_range.y, hsl.y);\n  mix_factor *= smoothstep(lightness_range.x, lightness_range.y, hsl.z);\n\n  return mix_factor;\n}\n\nfloat pattern(vec2 texCoord) {\n  float angle = PI / 8.0;\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * vec2(texWidth, texHeight) - vec2(0.5, 0.5);\n  vec2 point = vec2(\n      c * tex.x - s * tex.y,\n      s * tex.x + c * tex.y\n  ) * (PI / dotscreen);\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main(void) {\n  // get video image\n  vec2 texCoord = vec2(gl_FragCoord.x/texWidth, 1.0 - (gl_FragCoord.y/texHeight));\n\n  if(flipVertically == 1)\n    texCoord.y = 1.0 - texCoord.y;\n  if(flipHorizontally == 1)\n    texCoord.x = 1.0 - texCoord.x;\n\n  vec4 videoColor = texture2D(videoTex, texCoord);\n\n  // apply chroma key if necessary\n  if (chromaKeyMode != -1000) {\n    videoColor = ApplyChromaKey(texCoord, videoColor);\n  }\n\n  // apply brightness, from https://github.com/actionnick/exposure/blob/master/src/shaders/exposure.frag\n  if(brightness != -1000.0) {\n    videoColor = mix(videoColor, vec4(1.0, 1.0, 1.0, 1.0), brightness - 1.0);\n    videoColor.a = 1.0;\n  }\n\n  // contrast\n  if(contrast != -1000.0) {\n    videoColor.r = ((videoColor.r - mid) * contrast) + mid;\n    videoColor.g = ((videoColor.g - mid) * contrast) + mid;\n    videoColor.b = ((videoColor.b - mid) * contrast) + mid;\n    videoColor.a = 1.0;\n  }\n\n  // hue, saturation, lightness\n  if(hue != -1000.0 || saturation != -1000.0 || lightness != -1000.0) {\n    vec3 hsl = RGBtoHSL(videoColor.rgb);\n    vec4 MASTER_RANGE = vec4(0.0, 0.0, 1.0, 1.0);\n\n    float master_mix_factor = mix_factor(MASTER_RANGE, hsl);\n    // hue\n    if(hue != -1000.0) {\n      hsl.x = clamp_continuous(hsl.x + (hue * master_mix_factor));\n    }\n    // saturation\n    if(saturation != -1000.0) {\n      hsl.y = clamp(hsl.y + (saturation * master_mix_factor), 0.0, 1.0);\n    }\n    // lightness\n    if(lightness != -1000.0) {\n      hsl.z = clamp(mix(hsl.z, 1.0, max(0.0, lightness)), 0.0, 1.0);\n      hsl.z = clamp(mix(hsl.z, 0.0, abs(min(0.0, lightness))), 0.0, 1.0);\n    }\n\n    videoColor.rgb = HSLtoRGB(hsl);\n  }\n\n  if(dotscreen != -1000.0) {\n    float average = (videoColor.r + videoColor.g + videoColor.b) / 3.0;\n    videoColor = vec4(vec3(average * 10.0 - 5.0 + pattern(texCoord)), videoColor.a);\n  }\n\n  gl_FragColor = videoColor;\n\n}\n      `,\n    };\n  },\n  created() {},\n  updated() {},\n  mounted() {\n    this.$eventHub.$on(\n      \"captureCanvas.pixelColorUnderMouse\",\n      this.pixelColorUnderMouse\n    );\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(\n      \"captureCanvas.pixelColorUnderMouse\",\n      this.pixelColorUnderMouse\n    );\n    this.stopWebGL();\n  },\n  watch: {\n    enable_effects() {\n      if (!this.enable_effects) this.disableAllEffects();\n\n      // if (this.enable__ !== this.enable_effects) {\n      //   this.enable__ = this.enable_effects;\n      // }\n    },\n    enable__() {\n      this.$emit(\"update:enable_effects\", this.enable__);\n      if (this.enable__) {\n        this.$nextTick(() => {\n          this.startWebGL();\n        });\n      }\n    },\n  },\n  computed: {\n    enable__() {\n      return (\n        this.flip_vertically === true ||\n        this.flip_horizontally === true ||\n        this.chroma_key_settings.enable === true ||\n        Object.keys(this.image_filters_settings).find(\n          (ifs) => this.image_filters_settings[ifs].enable === true\n        )\n      );\n    },\n    chroma_key_color_hex: {\n      get() {\n        return this.rgbToHex(this.chroma_key_settings.key_color);\n      },\n      set(value) {\n        this.chroma_key_settings.key_color = this.hexToRgb(value);\n      },\n    },\n    chroma_key_replacement_color_hex: {\n      get() {\n        return this.rgbToHex(this.chroma_key_settings.replacement_color);\n      },\n      set(value) {\n        this.chroma_key_settings.replacement_color = this.hexToRgb(value);\n      },\n    },\n  },\n  methods: {\n    disableAllEffects() {\n      this.flip_vertically = false;\n      this.flip_horizontally = false;\n      this.chroma_key_settings.enable = false;\n\n      Object.keys(this.image_filters_settings).map((ifs) => {\n        this.image_filters_settings[ifs].enable = false;\n      });\n    },\n    hexToRgb(hex) {\n      var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n      return result\n        ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16),\n          }\n        : null;\n    },\n    rgbToHex({ r, g, b }) {\n      r = r.toString(16);\n      g = g.toString(16);\n      b = b.toString(16);\n\n      if (r.length == 1) r = \"0\" + r;\n      if (g.length == 1) g = \"0\" + g;\n      if (b.length == 1) b = \"0\" + b;\n\n      return \"#\" + r + g + b;\n    },\n    setTogglePickColorFromVideo() {\n      if (!this.enable_pick_color_from_video) {\n        // this.chroma_key_settings.enable = false;\n        // this.enable__ = true;\n        this.enable_pick_color_from_video = true;\n      } else {\n        // this.chroma_key_settings.enable = true;\n        this.enable_pick_color_from_video = false;\n      }\n    },\n    pixelColorUnderMouse({ px_color, type }) {\n      if (!this.enable_pick_color_from_video) return;\n\n      this.chroma_key_settings.key_color = px_color;\n      if (type === \"click\") this.setTogglePickColorFromVideo();\n    },\n    startWebGL() {\n      console.log(`CaptureEffects  METHODS : startWebGL`);\n\n      if (this.offscreen_canvas) this.stopWebGL();\n\n      this.offscreen_canvas = document.createElement(\"canvas\");\n      this.offscreen_canvas.classList.add(\"offscreenCanvas\");\n\n      var destination_canvas = this.canvasElement.getContext(\"2d\");\n\n      const gl = this.offscreen_canvas.getContext(\"webgl\", {\n        premultipliedAlpha: false,\n      });\n\n      // setting default vertex shader\n      const vs = gl.createShader(gl.VERTEX_SHADER);\n      gl.shaderSource(\n        vs,\n        \"attribute vec2 c; void main(void) { gl_Position=vec4(c, 0.0, 1.0); }\"\n      );\n      gl.compileShader(vs);\n\n      // setting default fragment shader\n      const fs = gl.createShader(gl.FRAGMENT_SHADER);\n      gl.shaderSource(fs, this.fragment_shader);\n      gl.compileShader(fs);\n\n      if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)) {\n        console.error(gl.getShaderInfoLog(fs));\n      }\n\n      const prog = gl.createProgram();\n      gl.attachShader(prog, vs);\n      gl.attachShader(prog, fs);\n      gl.linkProgram(prog);\n      gl.useProgram(prog);\n\n      const vb = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vb);\n      gl.bufferData(\n        gl.ARRAY_BUFFER,\n        new Float32Array([-1, 1, -1, -1, 1, -1, 1, 1]),\n        gl.STATIC_DRAW\n      );\n\n      const coordLoc = gl.getAttribLocation(prog, \"c\");\n      gl.vertexAttribPointer(coordLoc, 2, gl.FLOAT, false, 0, 0);\n      gl.enableVertexAttribArray(coordLoc);\n\n      gl.activeTexture(gl.TEXTURE0 + 0);\n      const tex = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, tex);\n\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n      const videoTexLoc = gl.getUniformLocation(prog, \"videoTex\");\n      gl.uniform1i(videoTexLoc, 0);\n\n      const texWidthLoc = gl.getUniformLocation(prog, \"texWidth\");\n      const texHeightLoc = gl.getUniformLocation(prog, \"texHeight\");\n\n      const flipHorizontallyLoc = gl.getUniformLocation(\n        prog,\n        \"flipHorizontally\"\n      );\n      const flipVerticallyLoc = gl.getUniformLocation(prog, \"flipVertically\");\n\n      const keyColorLoc = gl.getUniformLocation(prog, \"keyColor\");\n      const replacementColorLoc = gl.getUniformLocation(\n        prog,\n        \"replacementColor\"\n      );\n      const replacementImageLoc = gl.getUniformLocation(\n        prog,\n        \"replacementImage\"\n      );\n      gl.uniform1i(replacementImageLoc, 1);\n\n      const similarityLoc = gl.getUniformLocation(prog, \"similarity\");\n      const smoothnessLoc = gl.getUniformLocation(prog, \"smoothness\");\n      const spillLoc = gl.getUniformLocation(prog, \"spill\");\n      const chromaKeyModeLoc = gl.getUniformLocation(prog, \"chromaKeyMode\");\n      const midLoc = gl.getUniformLocation(prog, \"mid\");\n\n      const imageFiltersLoc = Object.keys(this.image_filters_settings).reduce(\n        (acc, _s) => {\n          acc[_s] = gl.getUniformLocation(prog, _s);\n          return acc;\n        },\n        {}\n      );\n\n      this.loadReplacementImageInShader();\n\n      const processFrame = () => {\n        if (!this.offscreen_canvas || !this.enable__) return;\n\n        console.log(`CaptureEffects  METHODS : startWebGL  processFrame`);\n\n        this.offscreen_canvas.width = this.videoElement.videoWidth;\n        this.offscreen_canvas.height = this.videoElement.videoHeight;\n\n        // LOADING VIDEO IMAGE TO WEBGL\n        gl.activeTexture(gl.TEXTURE0 + 0);\n        gl.viewport(\n          0,\n          0,\n          this.videoElement.videoWidth,\n          this.videoElement.videoHeight\n        );\n\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          0,\n          gl.RGB,\n          gl.RGB,\n          gl.UNSIGNED_BYTE,\n          this.videoElement\n        );\n        // STOPPED LOADING WEBGL IMAGE\n\n        gl.uniform1f(texWidthLoc, this.videoElement.videoWidth);\n        gl.uniform1f(texHeightLoc, this.videoElement.videoHeight);\n\n        gl.uniform1i(flipHorizontallyLoc, this.flip_horizontally ? 1 : 0);\n        gl.uniform1i(flipVerticallyLoc, this.flip_vertically ? 1 : 0);\n\n        gl.uniform3f(\n          keyColorLoc,\n          this.chroma_key_settings.key_color.r / 255,\n          this.chroma_key_settings.key_color.g / 255,\n          this.chroma_key_settings.key_color.b / 255\n        );\n        gl.uniform3f(\n          replacementColorLoc,\n          this.chroma_key_settings.replacement_color.r / 255,\n          this.chroma_key_settings.replacement_color.g / 255,\n          this.chroma_key_settings.replacement_color.b / 255\n        );\n\n        gl.uniform1f(\n          similarityLoc,\n          parseFloat(this.chroma_key_settings.similarity)\n        );\n        gl.uniform1f(\n          smoothnessLoc,\n          parseFloat(this.chroma_key_settings.smoothness)\n        );\n        gl.uniform1f(spillLoc, parseFloat(this.chroma_key_settings.spill));\n\n        Object.entries(imageFiltersLoc).map(([name, loc]) => {\n          gl.uniform1f(\n            loc,\n            parseFloat(\n              this.image_filters_settings[name].enable\n                ? this.image_filters_settings[name].value\n                : -1000\n            )\n          );\n        });\n        gl.uniform1f(midLoc, parseFloat(0.5));\n\n        // check if chroma_key_settings.enable\n        // -1000 = false\n        let chromaKeyMode = -1000;\n        if (this.chroma_key_settings.enable) {\n          if (this.chroma_key_settings.replacement_mode === \"color\") {\n            chromaKeyMode = 0;\n          } else if (this.chroma_key_settings.replacement_mode === \"image\") {\n            chromaKeyMode = 1;\n          }\n        }\n        gl.uniform1i(chromaKeyModeLoc, parseInt(chromaKeyMode));\n\n        gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\n\n        destination_canvas.drawImage(this.offscreen_canvas, 0, 0);\n\n        window.requestAnimationFrame(processFrame);\n      };\n      window.requestAnimationFrame(processFrame);\n    },\n    stopWebGL() {\n      this.offscreen_canvas = undefined;\n    },\n    async newChromaKeyImage(img) {\n      console.log(`CaptureEffects  METHODS : newChromaKeyImage`);\n\n      if (img === false) {\n        this.chroma_key_settings.replacement_image = undefined;\n        this.loadReplacementImageInShader();\n        return;\n      }\n\n      let src = \"\";\n      if (typeof img === \"string\") {\n        src = window.location.origin + this.getMediaSrcFromPath(img);\n      } else if (typeof img === \"object\" && img.thumb) {\n        // src = window.location.origin + \"/\" + img.thumb;\n      }\n      if (!src) return;\n\n      let img_el = new Image();\n      img_el.src = src;\n\n      try {\n        await img_el.decode();\n      } catch (e) {\n        console.error(e);\n      }\n\n      const canvas = document.createElement(\"canvas\"),\n        ctx = canvas.getContext(\"2d\");\n\n      canvas.width = this.videoElement.videoWidth;\n      canvas.height = this.videoElement.videoHeight;\n\n      const type = \"cover\";\n\n      const img_ratio = img_el.height / img_el.width;\n      const c_ratio = canvas.height / canvas.width;\n      if (\n        (img_ratio < c_ratio && type === \"contain\") ||\n        (img_ratio > c_ratio && type === \"cover\")\n      ) {\n        const h = canvas.width * img_ratio;\n        ctx.drawImage(img_el, 0, (canvas.height - h) / 2, canvas.width, h);\n      }\n      if (\n        (img_ratio > c_ratio && type === \"contain\") ||\n        (img_ratio < c_ratio && type === \"cover\")\n      ) {\n        const w = (canvas.width * c_ratio) / img_ratio;\n        ctx.drawImage(img_el, (canvas.width - w) / 2, 0, w, canvas.height);\n      }\n\n      this.chroma_key_settings.replacement_image = ctx.getImageData(\n        0,\n        0,\n        canvas.width,\n        canvas.height\n      );\n\n      this.loadReplacementImageInShader();\n\n      canvas.remove();\n    },\n    getMediaSrcFromPath(path_to_source_media_meta) {\n      const file = this.getMediaInFolder({\n        path_to_source_media_meta,\n      });\n      const path_to_project = this.getParent(file.$path);\n      return this.makeRelativeURLFromThumbs({\n        $thumbs: file.$thumbs,\n        $type: file.$type,\n        $path: path_to_project,\n        resolution: 1600,\n      });\n    },\n    loadReplacementImageInShader() {\n      const gl = this.offscreen_canvas.getContext(\"webgl\", {\n        premultipliedAlpha: false,\n      });\n\n      gl.activeTexture(gl.TEXTURE1);\n      const tex2 = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, tex2);\n\n      // gl.texImage2D(\n      //   gl.TEXTURE_2D,\n      //   0,\n      //   gl.RGBA,\n      //   1,\n      //   1,\n      //   0,\n      //   gl.RGBA,\n      //   gl.UNSIGNED_BYTE,\n      //   new Uint8Array([0, 0, 255, 255])\n      // );\n\n      if (this.chroma_key_settings.replacement_image)\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          0,\n          gl.RGBA,\n          gl.RGBA,\n          gl.UNSIGNED_BYTE,\n          this.chroma_key_settings.replacement_image\n        );\n\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_captureEffects {\n  ._content {\n    // background-color: #fff;\n    // border-radius: 4px;\n    // padding: calc(var(--spacing) / 2) calc(var(--spacing) / 2);\n\n    ._options {\n      background: rgba(0, 0, 0, 0.1);\n      padding: calc(var(--spacing) / 2);\n      border-radius: 6px;\n\n      > * {\n        // margin: 0 calc(var(--spacing) / 4) calc(var(--spacing) / 2);\n        margin: calc(var(--spacing) / 2) 0;\n        padding: calc(var(--spacing) / 2);\n        background-color: var(--c-gris_clair);\n        border-radius: 4px;\n\n        &:first-child {\n          margin-top: 0;\n        }\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n  }\n}\n\n.is--disabled {\n  filter: grayscale(100%);\n  opacity: 0.7;\n  cursor: not-allowed;\n  user-select: none;\n\n  > * {\n    pointer-events: none;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureEffects.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureEffects.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CaptureEffects.vue?vue&type=template&id=b51a7f0e&scoped=true\"\nimport script from \"./CaptureEffects.vue?vue&type=script&lang=js\"\nexport * from \"./CaptureEffects.vue?vue&type=script&lang=js\"\nimport style0 from \"./CaptureEffects.vue?vue&type=style&index=0&id=b51a7f0e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b51a7f0e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('BaseModal2',{attrs:{\"title\":_vm.$t('stopmotion_list')},on:{\"close\":function($event){return _vm.$emit('close')}}},[_c('transition',{attrs:{\"name\":\"fade_fast\",\"duration\":150,\"mode\":\"out-in\"}},[(_vm.is_loading)?_c('LoaderSpinner'):_c('div',{staticClass:\"m_stopmotionList\"},[(_vm.sorted_stopmotions.length === 0)?_c('div',{staticClass:\"u-instructions\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"no_stopmotion_created_yet\"))+\" \")]):_c('div',[_c('transition-group',{attrs:{\"tag\":\"div\",\"name\":\"listComplete\"}},_vm._l((_vm.sorted_stopmotions),function(stopmotion){return _c('div',{key:stopmotion.$path},[_c('StopmotionPreview',{attrs:{\"stopmotion_path\":stopmotion.$path},on:{\"load\":function($event){return _vm.$emit('loadStopmotion', stopmotion.$path)},\"remove\":function($event){return _vm.removeStopmotion(stopmotion.$path)}}})],1)}),0)],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.stopmotion)?_c('div',{staticClass:\"_preview\"},[_c('div',{staticClass:\"_topRow\"},[_c('DateDisplay',{attrs:{\"title\":_vm.$t('date_created'),\"date\":_vm.stopmotion.$date_created,\"show_detail_initially\":true}}),_c('div',{staticClass:\"_btns\"},[_c('button',{staticClass:\"u-button u-button_bleumarine\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('load')}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"open\"))+\" \")]),_c('RemoveMenu',{attrs:{\"remove_text\":_vm.$t('remove')},on:{\"remove\":function($event){return _vm.$emit('remove')}}})],1)],1),_c('br'),_c('div',{staticClass:\"_images\"},[_c('label',{staticClass:\"u-label\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"images\").toUpperCase())+\" = \"+_vm._s(_vm.images.length)+\" \")]),_c('div',{staticClass:\"_imagesCont\"},_vm._l((_vm.images),function(image){return _c('div',{key:image.$path},[_c('MediaContent',{attrs:{\"file\":image,\"resolution\":240}})],1)}),0)])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_preview\" v-if=\"stopmotion\">\n    <div class=\"_topRow\">\n      <DateDisplay\n        :title=\"$t('date_created')\"\n        :date=\"stopmotion.$date_created\"\n        :show_detail_initially=\"true\"\n      />\n\n      <div class=\"_btns\">\n        <button\n          type=\"button\"\n          class=\"u-button u-button_bleumarine\"\n          @click=\"$emit('load')\"\n        >\n          {{ $t(\"open\") }}\n        </button>\n        <RemoveMenu :remove_text=\"$t('remove')\" @remove=\"$emit('remove')\" />\n      </div>\n    </div>\n\n    <br />\n    <div class=\"_images\">\n      <label class=\"u-label\">\n        {{ $t(\"images\").toUpperCase() }} = {{ images.length }}\n      </label>\n      <div class=\"_imagesCont\">\n        <div v-for=\"image in images\" :key=\"image.$path\">\n          <MediaContent :file=\"image\" :resolution=\"240\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport RemoveMenu from \"../fields/RemoveMenu.vue\";\nexport default {\n  props: {\n    stopmotion_path: String,\n  },\n  components: { RemoveMenu },\n  data() {\n    return {\n      stopmotion: undefined,\n      fetch_stopmotion_error: undefined,\n    };\n  },\n  created() {},\n  async mounted() {\n    const stopmotion = await this.$api\n      .getFolder({\n        path: this.stopmotion_path,\n      })\n      .catch((err) => {\n        this.fetch_stopmotion_error = err.response;\n      });\n    this.stopmotion = stopmotion;\n  },\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    images() {\n      if (this.stopmotion?.images_list && this.stopmotion?.$files?.length > 0) {\n        const medias = this.stopmotion.images_list.reduce(\n          (acc, meta_filename) => {\n            const m = this.stopmotion.$files.find((f) =>\n              f.$path.endsWith(meta_filename)\n            );\n            if (m) acc.push(m);\n            return acc;\n          },\n          []\n        );\n        return medias;\n      }\n      return [];\n    },\n  },\n  methods: {},\n};\n</script>\n<style lang=\"scss\" scoped>\n._preview {\n  padding: calc(var(--spacing) / 1);\n  background: var(--c-gris);\n  margin: 0 0 calc(var(--spacing) / 1) 0;\n}\n\n._topRow {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n\n  gap: calc(var(--spacing) / 2);\n}\n\n._imagesCont {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n\n  background: var(--c-noir);\n  padding: 1px;\n  gap: 1px;\n\n  overflow-x: auto;\n  overflow-y: hidden;\n\n  -webkit-overflow-scrolling: touch;\n  overscroll-behavior-y: contain;\n\n  > * {\n    flex: 0 0 100px;\n  }\n}\n\n._btns {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  gap: calc(var(--spacing) / 2);\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionPreview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionPreview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StopmotionPreview.vue?vue&type=template&id=8a70e9b4&scoped=true\"\nimport script from \"./StopmotionPreview.vue?vue&type=script&lang=js\"\nexport * from \"./StopmotionPreview.vue?vue&type=script&lang=js\"\nimport style0 from \"./StopmotionPreview.vue?vue&type=style&index=0&id=8a70e9b4&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8a70e9b4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <BaseModal2 :title=\"$t('stopmotion_list')\" @close=\"$emit('close')\">\n    <transition name=\"fade_fast\" :duration=\"150\" mode=\"out-in\">\n      <LoaderSpinner v-if=\"is_loading\" />\n      <div class=\"m_stopmotionList\" v-else>\n        <div class=\"u-instructions\" v-if=\"sorted_stopmotions.length === 0\">\n          {{ $t(\"no_stopmotion_created_yet\") }}\n        </div>\n        <div v-else>\n          <transition-group tag=\"div\" name=\"listComplete\">\n            <div\n              v-for=\"stopmotion in sorted_stopmotions\"\n              class=\"\"\n              :key=\"stopmotion.$path\"\n            >\n              <StopmotionPreview\n                :stopmotion_path=\"stopmotion.$path\"\n                @load=\"$emit('loadStopmotion', stopmotion.$path)\"\n                @remove=\"removeStopmotion(stopmotion.$path)\"\n              />\n            </div>\n          </transition-group>\n        </div>\n      </div>\n    </transition>\n  </BaseModal2>\n</template>\n<script>\nimport StopmotionPreview from \"./StopmotionPreview.vue\";\n\nexport default {\n  props: {\n    project_path: String,\n  },\n  components: {\n    StopmotionPreview,\n  },\n  data() {\n    return {\n      path: `${this.project_path}/stopmotions`,\n      is_loading: true,\n      stopmotions: [],\n    };\n  },\n  created() {},\n  async mounted() {\n    this.is_loading = true;\n    this.stopmotions = await this.$api.getFolders({\n      path: this.path,\n    });\n    this.is_loading = false;\n    this.$api.join({ room: this.path });\n  },\n  beforeDestroy() {\n    this.$api.leave({ room: this.path });\n  },\n  watch: {},\n  computed: {\n    sorted_stopmotions() {\n      const _stopmotions = this.stopmotions.slice();\n      return _stopmotions.sort(\n        (a, b) => +new Date(b.$date_created) - +new Date(a.$date_created)\n      );\n    },\n  },\n  methods: {\n    async removeStopmotion(path) {\n      // this.fetch_status = \"pending\";\n      // this.fetch_error = null;\n\n      try {\n        await this.$api.deleteItem({\n          path,\n        });\n        // this.response = response.data;\n        // this.fetch_status = \"success\";\n        // this.$router.push(\"/projects\");\n      } catch (e) {\n        // this.fetch_status = \"error\";\n        // this.fetch_error = e.response.data;\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_stopmotionList {\n  position: relative;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StopmotionList.vue?vue&type=template&id=2cfb19ff&scoped=true\"\nimport script from \"./StopmotionList.vue?vue&type=script&lang=js\"\nexport * from \"./StopmotionList.vue?vue&type=script&lang=js\"\nimport style0 from \"./StopmotionList.vue?vue&type=style&index=0&id=2cfb19ff&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cfb19ff\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_audioEqualizer\"},[_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"1280\",\"height\":\"720\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m_audioEqualizer\">\n    <canvas ref=\"canvas\" width=\"1280\" height=\"720\" />\n  </div>\n</template>\n<script>\nimport audioActivity from \"./audio-activity.js\";\n\nexport default {\n  props: {\n    stream: MediaStream,\n    is_recording: Boolean,\n    type: {\n      type: String,\n      default: \"Full\",\n    },\n  },\n  components: {},\n  data() {\n    return {\n      audio_activity: undefined,\n      current_audio_level: 0,\n      current_audio_level_smoothed: 0,\n\n      current_draw_percentage: 0,\n    };\n  },\n  created() {},\n  mounted() {\n    this.startEqualizer();\n  },\n  beforeDestroy() {\n    this.audio_activity.destroy();\n  },\n  watch: {\n    stream() {\n      this.startEqualizer();\n    },\n    current_audio_level() {\n      // if (this.current_audio_level > this.current_audio_level_smoothed)\n      const current_audio_level = Math.max(0, this.current_audio_level - 10);\n\n      this.current_audio_level_smoothed = Math.round(\n        (this.current_audio_level_smoothed + current_audio_level) / 2\n      );\n      // else\n    },\n    is_recording() {\n      // this.clearCanvas();\n    },\n  },\n  computed: {},\n  methods: {\n    startEqualizer() {\n      if (this.audio_activity) this.audio_activity.destroy();\n\n      if (typeof this.stream !== \"object\") return;\n\n      this.audio_activity = audioActivity(this.stream, (level) => {\n        // 'level' indicates the audio activity in percentage\n        this.current_audio_level = Math.round(level * 100);\n      });\n      this.drawVolume();\n    },\n    drawVolume() {\n      const canvas = this.$refs.canvas;\n      if (!canvas) return;\n\n      const ctx = canvas.getContext(\"2d\");\n      // ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.fillStyle = \"rgba(255,255,255,.1)\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      if (!this.is_recording) ctx.fillStyle = \"#333\";\n      else ctx.fillStyle = \"#fc4b60\";\n\n      const diam = Math.min(canvas.width, canvas.height);\n      const volume = ((diam / 2) * this.current_audio_level_smoothed) / 20;\n\n      ctx.beginPath();\n      ctx.ellipse(\n        canvas.width / 2,\n        canvas.height / 2,\n        volume,\n        volume,\n        0,\n        2 * Math.PI,\n        false\n      );\n      ctx.fill();\n\n      // ctx.fillStyle = \"#000000\";\n      // ctx.fillRect(20, Math.random() * 200, 10, 10);\n      // ctx.ellipse(\n      //   Math.random() * 200 + canvas.width / 2,\n      //   Math.random() * 200 + canvas.height / 2,\n      //   volume,\n      //   volume,\n      //   0,\n      //   2 * Math.PI,\n      //   false\n      // );\n\n      window.requestAnimationFrame(this.drawVolume);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_audioEqualizer {\n  width: 100%;\n  height: 100%;\n  object-fit: scale-down;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  canvas {\n    display: block;\n    max-width: 100%;\n    max-height: 100%;\n\n    background-color: white;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AudioEqualizer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AudioEqualizer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AudioEqualizer.vue?vue&type=template&id=1ce15e3c&scoped=true\"\nimport script from \"./AudioEqualizer.vue?vue&type=script&lang=js\"\nexport * from \"./AudioEqualizer.vue?vue&type=script&lang=js\"\nimport style0 from \"./AudioEqualizer.vue?vue&type=style&index=0&id=1ce15e3c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ce15e3c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_vecto\",domProps:{\"innerHTML\":_vm._s(_vm.svgstr)}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m_vecto\" v-html=\"svgstr\"></div>\n</template>\n<script>\nimport ImageTracer from \"imagetracerjs\";\n\nexport default {\n  props: {\n    last_frame_from_video: Blob,\n    number_of_colors: Number,\n  },\n  components: {},\n  data() {\n    return {\n      svgstr: \"\",\n      is_processing_image: false,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {\n    last_frame_from_video() {\n      if (this.last_frame_from_video) {\n        this.vectoImage();\n      }\n    },\n  },\n  computed: {},\n  methods: {\n    vectoImage() {\n      if (this.is_processing_image) return;\n\n      this.is_processing_image = true;\n      ImageTracer.imageToSVG(\n        URL.createObjectURL(this.last_frame_from_video),\n        (svgstr) => {\n          this.is_processing_image = false;\n          this.svgstr = svgstr;\n        },\n        // \"posterized2\"\n\n        {\n          colorsampling: 0,\n\n          numberofcolors: this.number_of_colors,\n          colorquantcycles: 1,\n\n          scale: 1,\n          strokewidth: 1,\n          blurradius: 5,\n          blurdelta: 64,\n\n          viewbox: true,\n\n          // pal: [\n          //   { r: 255, g: 255, b: 255, a: 255 },\n          //   { r: 0, g: 0, b: 0, a: 255 },\n          // ],\n          // pal : [{r:255,g:255,b:255,a:255}, {r:214,g:0,b:103,a:255}]\n        }\n      );\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.m_vecto {\n  width: 100%;\n  height: 100%;\n  object-fit: scale-down;\n\n  // display: flex;\n  // align-items: center;\n  // justify-content: center;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VectoMode.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VectoMode.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./VectoMode.vue?vue&type=template&id=66c336eb\"\nimport script from \"./VectoMode.vue?vue&type=script&lang=js\"\nexport * from \"./VectoMode.vue?vue&type=script&lang=js\"\nimport style0 from \"./VectoMode.vue?vue&type=style&index=0&id=66c336eb&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m_lines\"},[_c('svg',{ref:\"pattern\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":`0 0 ${_vm.svg_width} ${_vm.svg_height}`,\"stroke-linecap\":\"round\",\"stroke\":\"#000\",\"stroke-width\":\"1\"}},[_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":\"100%\",\"height\":\"100%\",\"fill\":\"#ffffff\",\"stroke\":\"#ff0000\"}}),_vm._l((_vm.lines_array),function(line){return _c('line',{key:`${line.posX}_${line.posY}`,attrs:{\"x1\":-line.length / 2,\"y1\":0,\"x2\":line.length / 2,\"y2\":0,\"transform\":`translate(${line.posX}, ${line.posY}) rotate(${_vm.angle} 0 0)`}})})],2),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"invisible_canvas\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m_lines\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      :viewBox=\"`0 0 ${svg_width} ${svg_height}`\"\n      ref=\"pattern\"\n      stroke-linecap=\"round\"\n      stroke=\"#000\"\n      stroke-width=\"1\"\n    >\n      <rect\n        x=\"0\"\n        y=\"0\"\n        width=\"100%\"\n        height=\"100%\"\n        fill=\"#ffffff\"\n        stroke=\"#ff0000\"\n      />\n      <!-- :width=\"svg_width\"\n      :height=\"svg_height\" -->\n      <line\n        v-for=\"line in lines_array\"\n        :key=\"`${line.posX}_${line.posY}`\"\n        :x1=\"-line.length / 2\"\n        :y1=\"0\"\n        :x2=\"line.length / 2\"\n        :y2=\"0\"\n        :transform=\"`translate(${line.posX}, ${line.posY}) rotate(${angle} 0 0)`\"\n      />\n    </svg>\n    <canvas ref=\"invisible_canvas\" v-show=\"false\" />\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    last_frame_from_video: Blob,\n    angle: {\n      type: Number,\n      default: 116,\n    },\n    boost_brightness: {\n      type: Number,\n      default: 1,\n    },\n    boost_contrast: {\n      type: Number,\n      default: 1,\n    },\n    density: {\n      type: Number,\n      default: 0.2,\n    },\n  },\n  components: {},\n  data() {\n    return {\n      pixel_array: [],\n\n      // for each pixel create this many lines\n\n      is_processing_image: false,\n\n      svg_width: 600,\n      svg_height: 400,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {\n    last_frame_from_video() {\n      if (\n        this.last_frame_from_video &&\n        this.last_frame_from_video.type === \"image/jpeg\"\n      )\n        this.drawBlobToImage();\n    },\n  },\n  computed: {\n    lines_array() {\n      const map = (value, x1, y1, x2, y2) =>\n        ((value - x1) * (y2 - x2)) / (y1 - x1) + x2;\n\n      const svg_padding = 1 / this.density / 2;\n      const svg_width_with_padding = this.svg_width - svg_padding * 2;\n      const svg_height_with_padding = this.svg_height - svg_padding * 2;\n\n      const line_density_x = this.svg_width * this.density;\n      const line_density_y = this.svg_height * this.density;\n\n      return this.pixel_array.reduce((acc, p) => {\n        let brightness = p.b;\n\n        brightness *= this.boost_brightness;\n\n        let contrast = this.boost_contrast + 1; //convert to decimal & shift range: [0..2]\n        let intercept = 128 * (1 - contrast);\n\n        brightness = brightness * contrast + intercept;\n\n        const mapped_brightness = map(brightness, 0, 234, 10, 0);\n        // const mapped_brightness = brightness;\n\n        // de 0  1 vers 17  0\n        if (typeof mapped_brightness !== \"number\" || mapped_brightness > 20)\n          return acc;\n\n        const posX =\n          (p.x / line_density_x) * svg_width_with_padding + svg_padding;\n        const posY =\n          (p.y / line_density_y) * svg_height_with_padding + svg_padding;\n        acc.push({\n          posX,\n          posY,\n          length: mapped_brightness,\n        });\n        return acc;\n      }, []);\n    },\n  },\n  methods: {\n    drawBlobToImage() {\n      if (this.is_processing_image) return;\n      this.is_processing_image = true;\n\n      var t0 = performance.now();\n\n      var img = new Image();\n\n      img.onload = () => {\n        var canvas = this.$refs.invisible_canvas;\n        canvas.width = img.width;\n        canvas.height = img.height;\n\n        this.svg_width = img.width;\n        this.svg_height = img.height;\n\n        var ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n\n        var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height).data;\n\n        let _pixel_array = [];\n\n        const line_density_x = Math.round(canvas.width * this.density);\n        const line_density_y = Math.round(canvas.height * this.density);\n\n        for (let x = 0; x <= line_density_x; x++) {\n          for (let y = 0; y <= line_density_y; y++) {\n            const pos_x = Math.floor((canvas.width / line_density_x) * x);\n            const pos_y = Math.floor((canvas.height / line_density_y) * y);\n\n            var [R, G, B] = this.getImageDataFaster(\n              // var pixel_data = this.getImageDataFaster(\n              pos_x,\n              pos_y,\n              1,\n              1,\n              canvas.width,\n              canvas.height,\n              imgData\n            );\n\n            const b = (R + R + R + B + G + G + G + G) >> 3;\n\n            _pixel_array.push({\n              x,\n              y,\n              b,\n            });\n          }\n        }\n\n        this.pixel_array = _pixel_array;\n        this.is_processing_image = false;\n\n        var t1 = performance.now();\n        if (this.$root.debug_mode === true)\n          console.log(\n            \"Lines  METHODS : drawBlobToImage = took \" +\n              (t1 - t0) +\n              \" milliseconds.\"\n          );\n      };\n      img.src = URL.createObjectURL(this.last_frame_from_video);\n    },\n    getImageDataFaster(x, y, w, h, W, H, d) {\n      var arr = new Uint32Array(w * h * 4),\n        i = 0;\n\n      for (var r = y; r < h + y; r += 1) {\n        for (var c = x; c < w + x; c += 1) {\n          var O = (r * W + c) * 4;\n          for (var n = 0; n < 4; n++) {\n            if (c < 0 || c >= W || r < 0 || r >= H) {\n              arr[i++] = 0;\n            } else {\n              arr[i++] = d[O + n];\n            }\n          }\n        }\n      }\n\n      return arr;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.m_lines {\n  width: 100%;\n  height: 100%;\n\n  // background: white;\n  padding: var(--spacing);\n\n  svg {\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n\n    line {\n      // transition-property: all;\n      // transition-duration: 1s;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LinesMode.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LinesMode.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LinesMode.vue?vue&type=template&id=42f76944\"\nimport script from \"./LinesMode.vue?vue&type=script&lang=js\"\nexport * from \"./LinesMode.vue?vue&type=script&lang=js\"\nimport style0 from \"./LinesMode.vue?vue&type=style&index=0&id=42f76944&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"m_captureview\"\n    :class=\"{ 'is--collapsed': collapse_capture_pane }\"\n  >\n    <CapturePane\n      v-show=\"show_capture_settings\"\n      :label=\"$t('settings')\"\n      :pane_type=\"'settings'\"\n      @close=\"show_capture_settings = false\"\n    >\n      <CaptureSettings\n        :audio_output_deviceId.sync=\"audio_output_deviceId\"\n        @setStream=\"setStream\"\n        @hasFinishedLoading=\"hasFinishedLoading\"\n        @show=\"show_capture_settings = true\"\n      />\n    </CapturePane>\n\n    <CapturePane\n      v-show=\"show_effects_pane\"\n      :label=\"$t('effects')\"\n      :pane_type=\"'effects'\"\n      @close=\"show_effects_pane = false\"\n    >\n      <CaptureEffects\n        :enable_effects.sync=\"enable_effects\"\n        :videoElement=\"$refs.videoElement\"\n        :canvasElement=\"$refs.canvasElement\"\n        :project_path=\"path\"\n      />\n    </CapturePane>\n\n    <div class=\"m_captureview--videoPane\">\n      <transition name=\"slidedown\" :duration=\"500\">\n        <ModeSelector\n          v-if=\"show_mode_selector\"\n          :available_modes=\"available_modes\"\n          :selected_mode=\"selected_mode\"\n          :disable_change_mode=\"\n            is_recording ||\n            media_to_validate ||\n            mode_just_changed ||\n            is_making_stopmotion\n          \"\n          @changeMode=\"$emit('changeMode', $event)\"\n        />\n      </transition>\n\n      <div\n        class=\"m_captureview--videoPane--top\"\n        v-show=\"!is_validating_stopmotion_video\"\n        :class=\"{\n          'is--being_streamed':\n            (stream_sharing_informations_status &&\n              stream_sharing_informations_status.enabled) ||\n            (stream_access_informations_status &&\n              stream_access_informations_status.enabled),\n        }\"\n      >\n        <div class=\"m_captureview--videoPane--top--videoContainer\">\n          <div class=\"_videoEl\" :style=\"`opacity: ${show_videos ? 1 : 0}`\">\n            <video\n              ref=\"videoElement\"\n              autoplay\n              playsinline\n              :src-object.prop.camel=\"stream\"\n              :controls=\"stream_type === 'RemoteSources'\"\n              muted\n              :style=\"`opacity: ${enable_effects ? '0' : '1'}`\"\n            />\n            <canvas\n              ref=\"canvasElement\"\n              v-show=\"enable_effects\"\n              :width=\"actual_camera_resolution.width\"\n              :height=\"actual_camera_resolution.height\"\n              @click=\"(e) => updateSelectedColor({ e, type: 'click' })\"\n            />\n            <!-- @mousemove=\"(e) => updateSelectedColor({ e, type: 'move' })\" -->\n          </div>\n\n          <VectoMode\n            v-if=\"selected_mode === 'vecto' && !media_to_validate\"\n            ref=\"vectoElement\"\n            :last_frame_from_video=\"last_frame_from_video\"\n            :number_of_colors=\"vecto_number_of_colors\"\n          />\n\n          <LinesMode\n            v-if=\"selected_mode === 'lines' && !media_to_validate\"\n            ref=\"vectoElement\"\n            :last_frame_from_video=\"last_frame_from_video\"\n            :angle=\"lines_angle\"\n            :boost_brightness=\"lines_brightness\"\n            :boost_contrast=\"lines_contrast\"\n            :density=\"lines_density\"\n          />\n\n          <AudioEqualizer\n            v-if=\"selected_mode === 'audio' && !media_to_validate\"\n            ref=\"equalizerElement\"\n            :stream=\"stream\"\n            :is_recording=\"is_recording\"\n          />\n\n          <transition-group\n            tag=\"div\"\n            class=\"_capture_options\"\n            name=\"slideFromTop\"\n            mode=\"out-in\"\n          >\n            <label\n              class=\"u-label\"\n              v-if=\"\n                selected_mode !== 'stopmotion' &&\n                is_recording &&\n                timer_recording_in_seconds !== false\n              \"\n              :key=\"'duration'\"\n              v-html=\"timer_recording_in_seconds\"\n            />\n\n            <div\n              v-if=\"\n                selected_mode === 'stopmotion' &&\n                timelapse_mode_enabled &&\n                !timelapse_event\n              \"\n              :key=\"'timelapse_interval'\"\n              class=\"record_options\"\n            >\n              <label class=\"u-label\">\n                <span>{{ $t(\"interval_between_pictures\") }}</span>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  v-model.number=\"timelapse_interval\"\n                />\n                <span>{{ $t(\"seconds\") }}</span>\n              </label>\n            </div>\n\n            <div\n              v-if=\"\n                stream_sharing_informations_status &&\n                stream_sharing_informations_status.enabled &&\n                stream_type === 'LocalSources'\n              \"\n              :key=\"\n                'stream_share_name-' + stream_sharing_informations_status.name\n              \"\n            >\n              <label class=\"u-label\">\n                <span v-html=\"$t('stream_currently_shared_with_name:')\" />\n                <span>\n                  <strong>{{ stream_sharing_informations_status.name }}</strong>\n                </span>\n                <br />\n                <span\n                  v-if=\"\n                    stream_sharing_informations_status.peers_connected &&\n                    stream_sharing_informations_status.peers_connected.length >\n                      0\n                  \"\n                >\n                  {{ $t(\"other_users_connected\") }} =\n                  {{\n                    stream_sharing_informations_status.peers_connected.length\n                  }}\n                </span>\n              </label>\n            </div>\n\n            <div\n              v-else-if=\"\n                stream_access_informations_status &&\n                stream_access_informations_status.enabled &&\n                stream_type === 'RemoteSources'\n              \"\n              :key=\"\n                'stream_share_name-' + stream_access_informations_status.callee\n              \"\n            >\n              <label class=\"u-label\">\n                <span v-html=\"$t('stream_shown:')\" />\n                <span>\n                  <strong>{{\n                    stream_access_informations_status.callee\n                  }}</strong>\n                </span>\n              </label>\n            </div>\n\n            <div\n              v-if=\"\n                delay_mode_enabled &&\n                !is_recording &&\n                !media_to_validate &&\n                !delay_event\n              \"\n              :key=\"'delay_interval'\"\n              class=\"record_options\"\n            >\n              <label class=\"u-label\">\n                <span>{{ $t(\"delay\").toLowerCase() }}</span>\n                <input\n                  type=\"number\"\n                  v-model.number=\"delay_seconds\"\n                  min=\"1\"\n                  max=\"60\"\n                />\n                <span>{{ $t(\"seconds\") }}</span>\n              </label>\n            </div>\n          </transition-group>\n\n          <transition name=\"scaleInFade\" mode=\"out-in\">\n            <label\n              v-if=\"delay_remaining_time\"\n              :key=\"'delay_before_' + delay_remaining_time\"\n              class=\"_delay_timer\"\n              v-html=\"delay_remaining_time\"\n            />\n            <label\n              v-else-if=\"timelapse_time_before_next_picture\"\n              :key=\"'timelapse_before_' + timelapse_time_before_next_picture\"\n              class=\"_delay_timer is--timelapse\"\n              v-html=\"timelapse_time_before_next_picture\"\n            />\n            <!-- necessary to handle timely out-in transition -->\n            <!-- <span v-else /> -->\n          </transition>\n\n          <transition name=\"onionSkin\" mode=\"in-out\">\n            <MediaContent\n              v-if=\"\n                selected_mode === 'stopmotion' &&\n                onion_skin_img &&\n                stopmotion_slug &&\n                !is_validating_stopmotion_video &&\n                !(show_live_feed && onion_skin_opacity === 0)\n              \"\n              class=\"_onion_skin\"\n              :class=\"{ 'is--onionskin': show_live_feed }\"\n              :key=\"show_live_feed ? false : onion_skin_img.$path\"\n              :file=\"onion_skin_img\"\n              :resolution=\"1600\"\n              :style=\"\n                show_live_feed\n                  ? `--onionskin-opacity: ${onion_skin_opacity}`\n                  : ''\n              \"\n            />\n          </transition>\n\n          <div\n            class=\"_video_grid_overlay\"\n            v-if=\"enable_grid && enable_video && !media_to_validate\"\n          >\n            <svg\n              :width=\"actual_camera_resolution.width\"\n              :height=\"actual_camera_resolution.height\"\n              :viewBox=\"`0 0 ${actual_camera_resolution.width} ${actual_camera_resolution.height}`\"\n            >\n              <line\n                v-for=\"([x1, y1, x2, y2], index) in grids[current_grid_type]\"\n                :key=\"index\"\n                :x1=\"x1 + '%'\"\n                :y1=\"y1 + '%'\"\n                :x2=\"x2 + '%'\"\n                :y2=\"y2 + '%'\"\n                vector-effect=\"non-scaling-stroke\"\n              />\n            </svg>\n          </div>\n\n          <transition name=\"fade_fast\">\n            <div class=\"_settingsTag\">\n              <template v-if=\"!(must_validate_media && media_to_validate)\">\n                <button\n                  type=\"button\"\n                  class=\"u-button u-button_small\"\n                  @click=\"show_capture_settings = !show_capture_settings\"\n                  v-if=\"enable_video\"\n                >\n                  {{ actual_camera_resolution.width }}{{\n                    actual_camera_resolution.height\n                  }}\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"u-button u-button_small\"\n                  :class=\"{ 'is--active': enable_grid }\"\n                  v-if=\"enable_video\"\n                  @click=\"enable_grid = !enable_grid\"\n                >\n                  {{ $t(\"grid\").toLowerCase() }}\n                </button>\n                <div v-if=\"enable_video && enable_grid\">\n                  <button\n                    type=\"button\"\n                    class=\"u-button u-button_small\"\n                    v-for=\"grid_type in Object.keys(grids)\"\n                    :key=\"grid_type\"\n                    :class=\"{ 'is--active': current_grid_type === grid_type }\"\n                    @click=\"current_grid_type = grid_type\"\n                  >\n                    {{ $t(grid_type).toLowerCase() }}\n                  </button>\n                </div>\n              </template>\n\n              <button\n                type=\"button\"\n                class=\"u-button u-button_small\"\n                :class=\"{\n                  'is--active': location_to_add_to_medias,\n                }\"\n                @click=\"show_position_modal = true\"\n              >\n                {{ $t(\"location\") }}\n                <b-icon\n                  :icon=\"\n                    !!location_to_add_to_medias ? 'pin-map-fill' : 'pin-map'\n                  \"\n                />\n              </button>\n              <PickLocationForCaptures\n                v-if=\"show_position_modal\"\n                :location_to_add_to_medias.sync=\"location_to_add_to_medias\"\n                @close=\"show_position_modal = false\"\n              />\n            </div>\n          </transition>\n\n          <transition name=\"enableMode\" :duration=\"800\">\n            <div\n              v-if=\"mode_just_changed\"\n              class=\"_mode_indicator\"\n              v-html=\"$t(selected_mode)\"\n            />\n          </transition>\n\n          <transition name=\"justCaptured\">\n            <MediaPreviewBeforeValidation\n              v-if=\"media_to_validate && must_validate_media\"\n              :media_to_validate=\"media_to_validate\"\n              :audio_output_deviceId=\"audio_output_deviceId\"\n            />\n          </transition>\n\n          <transition name=\"fade_fast\">\n            <LoaderSpinner class=\"_loader\" v-if=\"is_loading_stream\" />\n          </transition>\n          <!-- <transition name=\"scaleInFade_fast\">\n            <div class=\"_capture_flash\" v-if=\"capture_button_pressed\" />\n          </transition> -->\n        </div>\n      </div>\n      <!-- <transition name=\"slideup\" :duration=\"150\" mode=\"out-in\"> -->\n      <StopmotionPanel\n        v-if=\"stopmotion_slug\"\n        :current_stopmotion_path=\"`${path}/stopmotions/${stopmotion_slug}`\"\n        :stream=\"stream\"\n        :show_live_feed.sync=\"show_live_feed\"\n        :is_validating_stopmotion_video.sync=\"is_validating_stopmotion_video\"\n        :onion_skin_opacity.sync=\"onion_skin_opacity\"\n        :stopmotion_frame_rate.sync=\"stopmotion_frame_rate\"\n        @insertMedia=\"(meta_filename) => $emit('insertMedia', meta_filename)\"\n        @close=\"closeStopmotionPanel\"\n        @showPreviousImage=\"onion_skin_img = $event\"\n      />\n      <!-- </transition> -->\n\n      <transition name=\"slideup\" :duration=\"150\" mode=\"out-in\">\n        <div class=\"m_captureview--videoPane--bottom\">\n          <transition name=\"fade_fast\" :duration=\"150\">\n            <LoaderSpinner v-if=\"is_sending_image\" />\n          </transition>\n\n          <transition name=\"slideup\" :duration=\"150\" mode=\"out-in\">\n            <div\n              class=\"m_captureview--videoPane--bottom--buttons\"\n              :class=\"{\n                'is--recording': is_recording && !video_recording_is_paused,\n                'is--sending_image': is_sending_image,\n              }\"\n              v-if=\"\n                !(media_to_validate.temp_name && must_validate_media) &&\n                !is_validating_stopmotion_video\n              \"\n            >\n              <div>\n                <template\n                  v-if=\"\n                    !is_recording &&\n                    !is_making_stopmotion &&\n                    !is_recording &&\n                    !delay_event\n                  \"\n                >\n                  <button\n                    type=\"button\"\n                    class=\"u-button u-button_red _settingsBtn\"\n                    :class=\"{ 'is--active': show_capture_settings }\"\n                    @click=\"show_capture_settings = !show_capture_settings\"\n                    :content=\"$t('settings')\"\n                  >\n                    <svg\n                      class=\"inline-svg inline-svg_larger\"\n                      version=\"1.1\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                      x=\"0px\"\n                      y=\"0px\"\n                      viewBox=\"15 15 140 140\"\n                      xml:space=\"preserve\"\n                    >\n                      <path\n                        style=\"fill: currentColor\"\n                        d=\"M122.7,88.8v-10c0-1.1,0.6-2.1,1.6-2.6l9.6-4.9l-2-5.8l-11,1.6c-1.1,0.2-2.2-0.3-2.9-1.2l-6-8.1\n                  c-0.7-0.9-0.8-2.1-0.3-3l4.8-9.6l-5.2-3.6l-7.7,7.5c-0.8,0.8-2,1-3.1,0.7l-9.9-3c-1.1-0.3-1.9-1.3-2.1-2.4L86.8,34h-6.4l-1.7,10.4\n                  c-0.2,1.1-0.9,2-2,2.4L66.8,50c-1.1,0.3-2.2,0.1-3.1-0.7L55.9,42l-5.1,3.7l4.9,9.4c0.5,1,0.4,2.1-0.2,3l-6,8.2\n                  c-0.6,0.9-1.8,1.4-2.9,1.2L35.8,66L34,71.8l9.7,4.8c1,0.5,1.7,1.5,1.7,2.6v10c0,1.1-0.6,2.1-1.6,2.6l-9.6,4.9l2,5.9l10.9-1.6\n                  c1.1-0.2,2.2,0.3,2.9,1.2l6,8.1c0.7,0.9,0.8,2.1,0.3,3l-4.8,9.6l5.1,3.6l7.7-7.5c0.8-0.8,2-1,3.1-0.7l9.9,3\n                  c1.1,0.3,1.9,1.3,2.1,2.4l1.9,10.4h6.4l1.7-10.4c0.2-1.1,0.9-2,2-2.4l9.9-3.2c1.1-0.3,2.2-0.1,3.1,0.7l7.8,7.3l5.1-3.7l-4.9-9.4\n                  c-0.5-1-0.4-2.1,0.2-3l6-8.1c0.7-0.9,1.8-1.4,2.9-1.2l10.8,1.5l1.8-5.9l-9.7-4.8C123.3,90.9,122.7,89.9,122.7,88.8z M84,104.5\n                  c-11.7,0-21.1-9.2-21.1-20.5c0-11.3,9.5-20.5,21.1-20.5s21.1,9.2,21.1,20.5C105.1,95.3,95.7,104.5,84,104.5z\"\n                      />\n                    </svg>\n                  </button>\n\n                  <button\n                    type=\"button\"\n                    class=\"u-button u-button_bleumarine _settingsBtn\"\n                    :class=\"{ 'is--active': show_effects_pane }\"\n                    @click=\"show_effects_pane = !show_effects_pane\"\n                    :content=\"$t('effects')\"\n                  >\n                    <!-- v-tippy=\"{\n                      placement: 'right',\n                      delay: [600, 0],\n                    }\" -->\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      viewBox=\"0 0 168 168\"\n                      class=\"inline-svg inline-svg_larger\"\n                    >\n                      <path\n                        d=\"M110.3488,72.0093,114.6377,59.36a4.4236,4.4236,0,0,0-1.07-4.59,4.4946,4.4946,0,0,0-4.59-1.0745L96.3334,57.9846,85.62,50a4.5219,4.5219,0,0,0-4.6965-.4029,4.4316,4.4316,0,0,0-2.4409,4.0388l.1714,13.3577L67.7468,74.7049A4.4686,4.4686,0,0,0,68.9974,82.62L79.2565,85.807,38.1043,126.9546a2.3155,2.3155,0,1,0,3.2745,3.2746L82.5311,89.0769l3.1865,10.2638a4.4571,4.4571,0,0,0,3.5664,3.08c.12.0185.579.0556.704.0556a4.4844,4.4844,0,0,0,3.6451-1.88L101.35,89.6883l13.6078.1621a4.6074,4.6074,0,0,0,3.784-2.4316,4.4328,4.4328,0,0,0-.3983-4.6965ZM100.1869,85.0381a2.5322,2.5322,0,0,0-1.9221.9773L90.039,97.6409,85.8149,84.0423a2.3238,2.3238,0,0,0-1.5192-1.5238l-13.8764-4.03,11.8987-8.42a2.3208,2.3208,0,0,0,.9773-1.9221L82.846,53.71l11.6764,8.7168a2.3569,2.3569,0,0,0,2.1259.3381l13.5986-4.8911L105.56,71.6758a2.3135,2.3135,0,0,0,.3428,2.1259l8.8464,11.417Z\"\n                        style=\"\n                          fill: #fc4b60;\n                          stroke: #fc4b60;\n                          stroke-miterlimit: 10;\n                          stroke-width: 2.8346456692913384px;\n                        \"\n                      />\n                      <path\n                        d=\"M58.9467,42.2277h2.3158v2.3158a2.3159,2.3159,0,1,0,4.6317,0V42.2277H68.21a2.3159,2.3159,0,0,0,0-4.6317H65.8942V35.28a2.3159,2.3159,0,0,0-4.6317,0V37.596H58.9467a2.3159,2.3159,0,0,0,0,4.6317Z\"\n                        style=\"\n                          fill: #fc4b60;\n                          stroke: #fc4b60;\n                          stroke-miterlimit: 10;\n                          stroke-width: 2.8346456692913384px;\n                        \"\n                      />\n                      <path\n                        d=\"M49.6834,65.386h2.3158v2.3158a2.3159,2.3159,0,0,0,4.6317,0V65.386h2.3158a2.3159,2.3159,0,0,0,0-4.6317H56.6309V58.4385a2.3159,2.3159,0,0,0-4.6317,0v2.3158H49.6834a2.3159,2.3159,0,0,0,0,4.6317Z\"\n                        style=\"\n                          fill: #fc4b60;\n                          stroke: #fc4b60;\n                          stroke-miterlimit: 10;\n                          stroke-width: 2.8346456692913384px;\n                        \"\n                      />\n                      <path\n                        d=\"M133.0531,102.4392h-2.3158v-2.3158a2.3159,2.3159,0,0,0-4.6317,0v2.3158H123.79a2.3159,2.3159,0,0,0,0,4.6317h2.3158v2.3158a2.3159,2.3159,0,1,0,4.6317,0v-2.3158h2.3158a2.3159,2.3159,0,0,0,0-4.6317Z\"\n                        style=\"\n                          fill: #fc4b60;\n                          stroke: #fc4b60;\n                          stroke-miterlimit: 10;\n                          stroke-width: 2.8346456692913384px;\n                        \"\n                      />\n                      <path\n                        d=\"M109.8949,111.7026H107.579v-2.3159a2.3158,2.3158,0,1,0-4.6316,0v2.3159h-2.3158a2.3158,2.3158,0,1,0,0,4.6316h2.3158V118.65a2.3158,2.3158,0,1,0,4.6316,0v-2.3158h2.3159a2.3158,2.3158,0,0,0,0-4.6316Z\"\n                        style=\"\n                          fill: #fc4b60;\n                          stroke: #fc4b60;\n                          stroke-miterlimit: 10;\n                          stroke-width: 2.8346456692913384px;\n                        \"\n                      />\n                      <path\n                        d=\"M119.1582,46.8594h2.3158v2.3158a2.3158,2.3158,0,1,0,4.6316,0V46.8594h2.3159a2.3159,2.3159,0,0,0,0-4.6317h-2.3159V39.9119a2.3158,2.3158,0,1,0-4.6316,0v2.3158h-2.3158a2.3159,2.3159,0,1,0,0,4.6317Z\"\n                        style=\"\n                          fill: #fc4b60;\n                          stroke: #fc4b60;\n                          stroke-miterlimit: 10;\n                          stroke-width: 2.8346456692913384px;\n                        \"\n                      />\n                    </svg>\n                  </button>\n                </template>\n\n                <button\n                  type=\"button\"\n                  class=\"u-button u-button_orange u-button_inline _captureButton\"\n                  :key=\"selected_mode + '_pause'\"\n                  v-if=\"selected_mode === 'video' && is_recording\"\n                  @mousedown.stop.prevent=\"pauseOrResumeCapture()\"\n                  @touchstart.stop.prevent=\"pauseOrResumeCapture()\"\n                >\n                  <template v-if=\"!video_recording_is_paused\">\n                    <svg\n                      class=\"inline-svg inline-svg_larger\"\n                      version=\"1.1\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                      x=\"0px\"\n                      y=\"0px\"\n                      viewBox=\"0 0 168 168\"\n                      style=\"enable-background: new 0 0 168 168\"\n                      xml:space=\"preserve\"\n                    >\n                      <path\n                        id=\"FOND_3_\"\n                        style=\"fill: #ffbe32\"\n                        d=\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84\n\t\t\tC168,37.6,130.4,0,84,0z\"\n                      />\n                      <rect\n                        id=\"CENTRE_3_\"\n                        x=\"35\"\n                        y=\"46.7\"\n                        style=\"fill: #ff3e51\"\n                        width=\"38\"\n                        height=\"76\"\n                      />\n                      <rect\n                        id=\"CENTRE_3_\"\n                        x=\"93\"\n                        y=\"46.7\"\n                        style=\"fill: #ff3e51\"\n                        width=\"38\"\n                        height=\"76\"\n                      />\n                    </svg>\n                    &nbsp;\n                    <span>\n                      {{ $t(\"pause_recording\") }}\n                    </span>\n                  </template>\n                  <template v-else>\n                    <svg\n                      class=\"inline-svg inline-svg_larger\"\n                      version=\"1.1\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                      x=\"0px\"\n                      y=\"0px\"\n                      viewBox=\"0 0 168 168\"\n                      style=\"enable-background: new 0 0 168 168\"\n                      xml:space=\"preserve\"\n                    >\n                      <path\n                        id=\"FOND_3_\"\n                        style=\"fill: #ffbe32\"\n                        d=\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84\n\t\t\tC168,37.6,130.4,0,84,0z\"\n                      />\n                      <polygon\n                        style=\"fill: #ff3e51\"\n                        points=\"45 40, 130 84.7, 45 128\"\n                      />\n                    </svg>\n                    &nbsp;\n                    <span>\n                      {{ $t(\"unpause_recording\") }}\n                    </span>\n                  </template>\n                </button>\n\n                <button\n                  type=\"button\"\n                  class=\"u-button u-button_transparent u-button_inline _captureButton\"\n                  :key=\"selected_mode + '_pause'\"\n                  v-if=\"\n                    selected_mode === 'stopmotion' &&\n                    is_making_stopmotion &&\n                    !timelapse_event\n                  \"\n                  @mousedown.stop.prevent=\"stopStopmotion()\"\n                  @touchstart.stop.prevent=\"stopStopmotion()\"\n                >\n                  {{ $t(\"back\") }}\n                </button>\n              </div>\n              <div>\n                <transition name=\"fade_fast\" mode=\"out-in\">\n                  <button\n                    type=\"button\"\n                    v-if=\"!is_recording\"\n                    class=\"u-button u-button_orange _captureButton\"\n                    :class=\"{\n                      'is--active': capture_button_pressed,\n                    }\"\n                    :disabled=\"is_sending_image\"\n                    :key=\"selected_mode + is_recording\"\n                    @mousedown.stop.prevent=\"setCaptureInit()\"\n                    @touchstart.stop.prevent=\"setCaptureInit()\"\n                  >\n                    <span v-if=\"delay_event\">\n                      {{ $t(\"cancel\") }}\n                    </span>\n\n                    <template v-else>\n                      <img\n                        class=\"inline-svg inline-svg_larger\"\n                        :src=\"$root.publicPath + 'images/i_record.svg'\"\n                      />\n                      &nbsp;\n                      <span\n                        v-if=\"\n                          ['photo', 'vecto', 'lines'].includes(selected_mode)\n                        \"\n                        v-html=\"$t('take_picture')\"\n                      />\n                      <span\n                        v-else-if=\"selected_mode === 'video'\"\n                        v-html=\"$t('record_video')\"\n                      />\n                      <span\n                        v-else-if=\"selected_mode === 'audio'\"\n                        v-html=\"$t('record_audio')\"\n                      />\n                      <span\n                        v-else-if=\"selected_mode === 'stopmotion'\"\n                        v-html=\"\n                          !timelapse_mode_enabled\n                            ? $t('take_picture')\n                            : $t('start_timelapse')\n                        \"\n                      />\n                    </template>\n                  </button>\n                  <button\n                    type=\"button\"\n                    v-else-if=\"is_recording\"\n                    class=\"u-button u-button_orange u-button_inline _captureButton\"\n                    :disabled=\"is_sending_image\"\n                    :key=\"selected_mode + is_recording\"\n                    @mousedown.stop.prevent=\"stopRecording()\"\n                    @touchstart.stop.prevent=\"stopRecording()\"\n                  >\n                    <span v-if=\"is_sending_image && false\">\n                      {{ $t(\"loading\") }}\n                    </span>\n\n                    <template v-else>\n                      <img\n                        class=\"inline-svg inline-svg_larger\"\n                        :src=\"`${$root.publicPath}images/i_stop.svg`\"\n                      />\n\n                      &nbsp;\n                      <span v-if=\"['video', 'audio'].includes(selected_mode)\">\n                        {{ $t(\"stop_recording\") }}\n                      </span>\n                      <span v-else-if=\"selected_mode === 'stopmotion'\">\n                        <template v-if=\"timelapse_mode_enabled\">\n                          {{ $t(\"stop_timelapse\") }}\n                        </template>\n                      </span>\n                      <span v-else>\n                        {{ $t(\"stop\") }}\n                      </span>\n                    </template>\n                  </button>\n                </transition>\n\n                <transition name=\"fade_fast\" mode=\"out-in\">\n                  <button\n                    type=\"button\"\n                    class=\"_enable_timelapse_button\"\n                    :class=\"{ 'is--active': timelapse_mode_enabled }\"\n                    v-if=\"\n                      selected_mode === 'stopmotion' &&\n                      !timelapse_event &&\n                      !delay_event\n                    \"\n                    :content=\"$t('timelapse')\"\n                    @click=\"timelapse_mode_enabled = !timelapse_mode_enabled\"\n                  >\n                    <svg\n                      version=\"1.1\"\n                      class=\"inline-svg margin-right-verysmall\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                      x=\"0px\"\n                      y=\"0px\"\n                      width=\"81px\"\n                      height=\"81px\"\n                      viewBox=\"0 0 81 81\"\n                      style=\"enable-background: new 0 0 81 81\"\n                      xml:space=\"preserve\"\n                    >\n                      <path\n                        d=\"M69.6,20.8c-0.9,0.6-1.7,1.1-2.6,1.7c-6-8.8-15.9-14-26.5-14c-17.6,0-32,14.4-32,32s14.4,32,32,32\n                  c3.1,0,6.2-0.4,9.1-1.3l-1.7-5.8c-2.4,0.7-4.9,1.1-7.4,1.1c-14.3,0-26-11.7-26-26s11.7-26,26-26c8.6,0,16.6,4.2,21.5,11.4\n                  c-0.8,0.5-1.6,1.1-2.4,1.6c-0.7,0.4-0.9,1.1-0.8,1.7c0,0.7,0.4,1.4,1.2,1.6c0.2,0.1,0.3,0.1,0.5,0.1c2.7,0.5,5.3,1.1,8,1.6\n                  c1,0.2,2-0.4,2.3-1.4c0.6-2.8,1.1-5.5,1.7-8.3C72.8,21.3,71,19.9,69.6,20.8z\"\n                      />\n                      <path\n                        d=\"M23,49.4c-1.3,0-2.4-0.8-2.9-2.1c-0.5-1.6,0.4-3.3,1.9-3.8L39,38.3V27.2c0-1.7,1.3-3,3-3s3,1.3,3,3v13.3\n                  c0,1.3-0.8,2.5-2.1,2.9l-19,5.9C23.6,49.4,23.3,49.4,23,49.4z\"\n                      />\n                    </svg>\n                  </button>\n                </transition>\n\n                <transition name=\"fade_fast\" mode=\"out-in\">\n                  <button\n                    type=\"button\"\n                    class=\"_enable_timelapse_button\"\n                    v-if=\"!is_recording && !delay_event\"\n                    :class=\"{ 'is--active': delay_mode_enabled }\"\n                    :content=\"$t('delay')\"\n                    @click=\"delay_mode_enabled = !delay_mode_enabled\"\n                  >\n                    <svg\n                      version=\"1.1\"\n                      class=\"inline-svg margin-right-verysmall\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                      x=\"0px\"\n                      y=\"0px\"\n                      width=\"81px\"\n                      height=\"81px\"\n                      viewBox=\"0 0 81 81\"\n                      style=\"enable-background: new 0 0 81 81\"\n                      xml:space=\"preserve\"\n                    >\n                      <path\n                        d=\"M40.5,72.3c-15,0-27.1-12.2-27.1-27.1c0-15,12.2-27.1,27.1-27.1s27.1,12.2,27.1,27.1C67.6,60.2,55.5,72.3,40.5,72.3z\n\t M40.5,23.7C28.7,23.7,19,33.4,19,45.2s9.6,21.5,21.5,21.5S62,57,62,45.2S52.3,23.7,40.5,23.7z\"\n                      />\n                      <path\n                        d=\"M40.5,48c-1.6,0-2.8-1.3-2.8-2.8l0-16.8c0-1.6,1.3-2.8,2.8-2.8s2.8,1.3,2.8,2.8l0,16.8C43.3,46.8,42.1,48,40.5,48z\"\n                      />\n                      <rect x=\"32.1\" y=\"10.7\" width=\"16.8\" height=\"5.7\" />\n                      <rect\n                        x=\"57.9\"\n                        y=\"22.4\"\n                        transform=\"matrix(0.7069 -0.7073 0.7073 0.7069 2.864400e-02 50.6141)\"\n                        width=\"6.3\"\n                        height=\"5.7\"\n                      />\n                    </svg>\n                  </button>\n                </transition>\n              </div>\n              <div>\n                <div v-if=\"selected_mode === 'video'\" class=\"_videoEq\">\n                  <div\n                    v-if=\"enable_audio_recording_in_video\"\n                    class=\"_tiny_equalizer\"\n                  >\n                    <AudioEqualizer\n                      :stream=\"stream\"\n                      :is_recording=\"is_recording\"\n                      :type=\"'Tiny'\"\n                    />\n                  </div>\n\n                  <span class=\"u-switch u-switch-xs\" v-if=\"!is_recording\">\n                    <input\n                      class=\"switch\"\n                      id=\"recordVideoWithAudio\"\n                      type=\"checkbox\"\n                      v-model=\"enable_audio_recording_in_video\"\n                      :disabled=\"is_recording\"\n                    />\n                    <label for=\"recordVideoWithAudio\" class=\"u-label\">{{\n                      $t(\"with_sound\")\n                    }}</label>\n                  </span>\n                </div>\n\n                <template v-if=\"selected_mode === 'stopmotion'\">\n                  <button\n                    type=\"button\"\n                    v-if=\"!is_making_stopmotion\"\n                    @click=\"show_stopmotion_list = !show_stopmotion_list\"\n                    class=\"u-button u-button_bleumarine\"\n                  >\n                    <span class>{{ $t(\"stopmotion_list\") }}</span>\n                  </button>\n\n                  <div v-else class=\"_stopmotionValidation\">\n                    <div class=\"_stopmotionValidation--fpscounter\">\n                      <label class=\"u-label\">{{ $t(\"img_per_second\") }}</label>\n                      <select\n                        v-model.number=\"stopmotion_frame_rate\"\n                        size=\"small\"\n                      >\n                        <option>2</option>\n                        <option>4</option>\n                        <option>8</option>\n                        <option>15</option>\n                        <option>24</option>\n                        <option>30</option>\n                      </select>\n                    </div>\n\n                    <div class=\"\">\n                      <button\n                        type=\"button\"\n                        class=\"u-button u-button_bleuvert u-button_small\"\n                        @click=\"testStopmotion\"\n                      >\n                        <img\n                          :src=\"`${$root.publicPath}images/i_play.svg`\"\n                          width=\"48\"\n                          height=\"48\"\n                          draggable=\"false\"\n                        />\n                        {{ $t(\"assemble\") }}\n                      </button>\n                    </div>\n                  </div>\n                </template>\n\n                <div\n                  v-if=\"selected_mode === 'vecto'\"\n                  class=\"_mode_accessory_range\"\n                >\n                  <label class=\"u-label\"\n                    >{{ $t(\"number_of_colors\") }} =\n                    {{ vecto_number_of_colors }}</label\n                  >\n                  <input\n                    class=\"\"\n                    type=\"range\"\n                    v-model.number=\"vecto_number_of_colors\"\n                    min=\"2\"\n                    max=\"7\"\n                    step=\"1\"\n                  />\n                </div>\n\n                <button\n                  type=\"button\"\n                  class=\"u-buttonLink\"\n                  v-if=\"selected_mode === 'lines'\"\n                  @click=\"show_lines_settings = !show_lines_settings\"\n                  :class=\"{ 'is--active': show_lines_settings }\"\n                >\n                  {{ $t(\"advanced_options\") }}\n                </button>\n\n                <template v-if=\"show_lines_settings\">\n                  <div\n                    v-if=\"selected_mode === 'lines'\"\n                    class=\"_mode_accessory_range\"\n                  >\n                    <label class=\"u-label\"\n                      >{{ $t(\"lines_angle\") }} = {{ lines_angle }}</label\n                    >\n                    <input\n                      class=\"\"\n                      type=\"range\"\n                      v-model.number=\"lines_angle\"\n                      min=\"0\"\n                      max=\"359\"\n                      step=\"1\"\n                    />\n                  </div>\n                  <div\n                    v-if=\"selected_mode === 'lines'\"\n                    class=\"_mode_accessory_range\"\n                  >\n                    <label class=\"u-label\"\n                      >{{ $t(\"brightness\") }} = {{ lines_brightness }}</label\n                    >\n                    <input\n                      class=\"margin-none\"\n                      type=\"range\"\n                      v-model.number=\"lines_brightness\"\n                      min=\".1\"\n                      max=\"5\"\n                      step=\".1\"\n                    />\n                  </div>\n                  <div\n                    v-if=\"selected_mode === 'lines'\"\n                    class=\"_mode_accessory_range\"\n                  >\n                    <label class=\"u-label\"\n                      >{{ $t(\"contrast\") }} = {{ lines_contrast }}</label\n                    >\n                    <input\n                      class=\"margin-none\"\n                      type=\"range\"\n                      v-model.number=\"lines_contrast\"\n                      min=\".1\"\n                      max=\"5\"\n                      step=\".1\"\n                    />\n                  </div>\n                  <div\n                    v-if=\"selected_mode === 'lines'\"\n                    class=\"_mode_accessory_range\"\n                  >\n                    <label class=\"u-label\"\n                      >{{ $t(\"lines_density\") }} = {{ lines_density }}</label\n                    >\n                    <input\n                      class=\"margin-none\"\n                      type=\"range\"\n                      v-model.number=\"lines_density\"\n                      min=\"0.2\"\n                      max=\"0.3\"\n                      step=\".01\"\n                    />\n                  </div>\n                </template>\n              </div>\n            </div>\n            <div\n              v-else-if=\"media_to_validate && must_validate_media\"\n              key=\"validation\"\n            >\n              <div class=\"_download_media_without_validation\">\n                <small>\n                  <a\n                    ref=\"\"\n                    :href=\"validated_media_href_blob\"\n                    :download=\"media_to_validate.temp_name\"\n                    target=\"_blank\"\n                  >\n                    {{ $t(\"or_download_media_on_device\") }}\n                    <template v-if=\"media_to_validate.rawData\">\n                       {{ formatBytes(media_to_validate.rawData.size) }}\n                    </template>\n                  </a>\n                </small>\n              </div>\n\n              <MediaValidationButtons\n                :media_is_being_sent=\"media_is_being_sent\"\n                :media_being_sent_percent=\"media_being_sent_percent\"\n                :can_add_to_fav=\"true\"\n                @cancel=\"cancelValidation()\"\n                @save=\"sendMedia({})\"\n                @save_and_fav=\"sendMedia({ fav: true })\"\n              />\n            </div>\n          </transition>\n        </div>\n      </transition>\n    </div>\n\n    <StopmotionList\n      v-if=\"show_stopmotion_list && !is_making_stopmotion\"\n      :project_path=\"path\"\n      @loadStopmotion=\"loadStopmotion\"\n    />\n  </div>\n</template>\n<script>\nimport ModeSelector from \"./ModeSelector.vue\";\nimport MediaPreviewBeforeValidation from \"./MediaPreviewBeforeValidation.vue\";\nimport MediaValidationButtons from \"./MediaValidationButtons.vue\";\nimport StopmotionPanel from \"./StopmotionPanel.vue\";\nimport PickLocationForCaptures from \"./PickLocationForCaptures.vue\";\n\nimport CapturePane from \"./CapturePane.vue\";\nimport CaptureSettings from \"./CaptureSettings.vue\";\nimport CaptureEffects from \"./CaptureEffects.vue\";\nimport StopmotionList from \"./StopmotionList.vue\";\nimport AudioEqualizer from \"./AudioEqualizer.vue\";\nimport VectoMode from \"./VectoMode.vue\";\nimport LinesMode from \"./LinesMode.vue\";\n\n// import adapter from \"webrtc-adapter\";\n\nimport RecordRTC from \"recordrtc\";\nimport ysFixWebmDuration from \"fix-webm-duration\";\n\nexport default {\n  props: {\n    type: String,\n    path: String,\n    selected_mode: String,\n    stopmotion_slug: String,\n\n    available_modes: {\n      type: Array,\n      default: () => [\n        \"photo\",\n        \"video\",\n        \"stopmotion\",\n        \"audio\",\n        \"vecto\",\n        \"lines\",\n      ],\n    },\n    return_temp_media: {\n      type: Boolean,\n      default: false,\n    },\n    must_validate_media: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  components: {\n    PickLocationForCaptures,\n    ModeSelector,\n    MediaPreviewBeforeValidation,\n    MediaValidationButtons,\n    StopmotionPanel,\n    CapturePane,\n    CaptureSettings,\n    CaptureEffects,\n    StopmotionList,\n    AudioEqualizer,\n    VectoMode,\n    LinesMode,\n  },\n  data() {\n    return {\n      is_sending_image: false,\n      is_loading_stream: true,\n\n      invisible_canvas: undefined,\n\n      ask_before_leaving_capture: false,\n\n      media_to_validate: false,\n      media_is_being_sent: false,\n      media_being_sent_percent: 0,\n      capture_button_pressed: false,\n      mode_just_changed: false,\n      is_validating_stopmotion_video: false,\n      video_recording_is_paused: false,\n\n      collapse_capture_pane: false,\n\n      enable_grid: false,\n      grids: {\n        halfs: [\n          [50, 0, 50, 100],\n          [0, 50, 100, 50],\n        ],\n        thirds: [\n          [33, 0, 33, 100],\n          [66, 0, 66, 100],\n          [0, 33, 100, 33],\n          [0, 66, 100, 66],\n        ],\n        fourths: [\n          [25, 0, 25, 100],\n          [50, 0, 50, 100],\n          [75, 0, 75, 100],\n          [0, 25, 100, 25],\n          [0, 50, 100, 50],\n          [0, 75, 100, 75],\n        ],\n      },\n      current_grid_type: \"thirds\",\n\n      location_to_add_to_medias: undefined,\n      show_position_modal: false,\n\n      // selected_devices: {\n      //   video_input_device: undefined,\n      //   audio_input_device: undefined,\n      //   audio_output_device: undefined,\n      // },\n\n      stream: undefined,\n      stream_type: undefined,\n\n      audio_output_deviceId: undefined,\n\n      show_capture_settings: false,\n      show_effects_pane: false,\n\n      enable_audio_recording_in_video: true,\n      enable_video: true,\n\n      is_recording: false,\n      timer_recording_in_seconds: false,\n      recording_timer_interval: undefined,\n\n      stopmotion_frame_rate: 4,\n      timelapse_mode_enabled: false,\n      timelapse_interval: 2,\n      timelapse_event: false,\n      timelapse_time_before_next_picture: false,\n\n      delay_mode_enabled: false,\n      delay_seconds: 5,\n      delay_event: false,\n      delay_remaining_time: false,\n\n      recorder: null,\n\n      actual_camera_resolution: {\n        width: undefined,\n        height: undefined,\n      },\n      displayed_video_size: {\n        width: undefined,\n        height: undefined,\n      },\n\n      show_live_feed: false,\n      show_stopmotion_list: false,\n\n      onion_skin_img: false,\n      onion_skin_opacity: 0,\n\n      last_frame_from_video: undefined,\n      frameGrabber: undefined,\n\n      show_lines_settings: false,\n      vecto_number_of_colors: 2,\n      lines_angle: 108,\n      lines_brightness: 1,\n      lines_contrast: 1,\n      lines_density: 0.25,\n\n      stream_sharing_informations_status: {},\n      stream_access_informations_status: {},\n\n      enable_effects: false,\n      update_last_video_imageData: undefined,\n    };\n  },\n  created() {\n    const location_to_add_to_medias = localStorage.getItem(\n      \"location_to_add_to_medias\"\n    );\n    if (location_to_add_to_medias && location_to_add_to_medias !== \"undefined\")\n      this.location_to_add_to_medias = JSON.parse(location_to_add_to_medias);\n  },\n  mounted() {\n    if (!this.selected_mode) this.$emit(\"changeMode\", this.available_modes[0]);\n\n    document.addEventListener(\"keyup\", this.captureKeyListener);\n\n    this.checkCapturePanelSize();\n    this.$eventHub.$on(`activity_panels_resized`, this.checkCapturePanelSize);\n    this.$eventHub.$on(`window.resized`, this.checkCapturePanelSize);\n    this.$eventHub.$on(\n      `stream.newSharingInformations`,\n      this.updateStreamSharing\n    );\n    this.$eventHub.$on(\n      `stream.newDistantAccessInformations`,\n      this.updateDistantStream\n    );\n\n    this.$refs.videoElement.volume = 0;\n    this.$refs.videoElement.addEventListener(\n      \"loadedmetadata\",\n      this.refreshVideoActualSize\n    );\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(`activity_panels_resized`, this.checkCapturePanelSize);\n    this.$eventHub.$off(`window.resized`, this.checkCapturePanelSize);\n    this.$eventHub.$off(\n      `stream.newSharingInformations`,\n      this.updateStreamSharing\n    );\n    this.$eventHub.$off(\n      `stream.newDistantAccessInformations`,\n      this.updateDistantStream\n    );\n\n    document.removeEventListener(\"keyup\", this.captureKeyListener);\n\n    this.ask_before_leaving_capture = false;\n\n    this.stopFrameGrabber();\n    this.stopTimelapseInterval();\n    this.cancelDelay();\n    this.eraseTimer();\n\n    if (this.update_last_video_imageData)\n      window.cancelAnimationFrame(this.update_last_video_imageData);\n\n    this.$refs.videoElement.removeEventListener(\n      \"loadedmetadata\",\n      this.refreshVideoActualSize\n    ); //turn off the event handler\n  },\n  watch: {\n    selected_mode(val, oldVal) {\n      // prevent starting nomode (when reclicking tab bar)\n      if (!val) {\n        this.$emit(\"changeMode\", oldVal);\n        return;\n      }\n\n      this.mode_just_changed = true;\n      window.setTimeout(() => {\n        this.mode_just_changed = false;\n      }, 300);\n\n      // set capture mode as query ?\n      // this.$root.settings.capture_options.selected_mode = this.selected_mode;\n\n      if (this.selected_mode === \"audio\") {\n        this.enable_audio = true;\n        this.enable_video = false;\n      } else {\n        this.enable_video = true;\n      }\n\n      this.stopFrameGrabber();\n      if (this.selected_mode === \"vecto\" || this.selected_mode === \"lines\") {\n        this.startFrameGrabber();\n      }\n\n      if (this.selected_mode !== \"stopmotion\") {\n        this.show_stopmotion_list = false;\n      }\n    },\n    location_to_add_to_medias() {\n      localStorage.setItem(\n        \"location_to_add_to_medias\",\n        JSON.stringify(this.location_to_add_to_medias)\n      );\n    },\n    is_validating_stopmotion_video() {\n      if (this.is_validating_stopmotion_video) {\n        this.$refs.videoElement.pause();\n      } else {\n        this.$refs.videoElement.play();\n        this.show_live_feed = true;\n      }\n    },\n    is_making_stopmotion() {\n      if (this.is_making_stopmotion) this.show_capture_settings = false;\n    },\n    audio_output_deviceId() {\n      // const audio = document.createElement('audio');\n      // await audio.setSinkId(audioDevices[0].deviceId);\n      // console.log('Audio is being played on ' + audio.sinkId);\n    },\n    media_to_validate() {\n      console.log(\n        `WATCH  Capture: media_to_validate = ${!!this.media_to_validate}`\n      );\n\n      if (!this.must_validate_media) {\n        this.sendMedia({});\n        return;\n      }\n\n      if (this.media_to_validate) {\n        if (this.$refs.videoElement) this.$refs.videoElement.pause();\n        if (this.$refs.audioElement) this.$refs.audioElement.pause();\n        this.ask_before_leaving_capture = true;\n      } else {\n        if (this.$refs.videoElement) this.$refs.videoElement.play();\n        if (this.$refs.audioElement) this.$refs.audioElement.play();\n        this.ask_before_leaving_capture = false;\n      }\n    },\n  },\n  computed: {\n    show_mode_selector() {\n      return (\n        !this.media_to_validate &&\n        !this.is_recording &&\n        !this.is_making_stopmotion &&\n        !this.delay_event\n      );\n    },\n    is_making_stopmotion() {\n      const is_making_stopmotion = this.stopmotion_slug ? true : false;\n      return is_making_stopmotion;\n    },\n    validated_media_href_blob() {\n      if (!this.media_to_validate) return false;\n      return window.URL.createObjectURL(this.media_to_validate.rawData);\n    },\n    show_videos() {\n      return (\n        this.stream &&\n        [\"photo\", \"video\", \"stopmotion\"].includes(this.selected_mode) &&\n        this.show_live_feed &&\n        !(this.must_validate_media && this.media_to_validate)\n      );\n    },\n  },\n  methods: {\n    hasFinishedLoading() {\n      this.is_loading_stream = false;\n      this.show_live_feed = true;\n    },\n    setStream({ stream, type }) {\n      this.stream = stream;\n      this.stream_type = type;\n      this.$refs.videoElement.volume = 0;\n      this.enable_effects = false;\n    },\n    updateSelectedColor({ e, type }) {\n      if (!this.$refs.canvasElement) return;\n      console.log(\"CaptureView: METHODS  updateSelectedColor\");\n      const px_color = this.getColorInCanvasFromPixelCount(e);\n      this.$eventHub.$emit(\"captureCanvas.pixelColorUnderMouse\", {\n        px_color,\n        type,\n      });\n    },\n    getColorInCanvasFromPixelCount(e) {\n      const getPropsForObjectfitContent = (\n        videoWidth,\n        videoHeight,\n        width,\n        height\n      ) => {\n        let scale, offsetX, offsetY;\n        if (videoHeight / height > videoWidth / width) {\n          (scale = videoHeight / height),\n            (offsetX = (videoWidth - width * scale) / 2),\n            (offsetY = 0);\n        } else {\n          (scale = videoWidth / width),\n            (offsetY = (videoHeight - height * scale) / 2),\n            (offsetX = 0);\n        }\n        return { scale, offsetX, offsetY };\n      };\n\n      const transformed_props = getPropsForObjectfitContent(\n        this.actual_camera_resolution.width,\n        this.actual_camera_resolution.height,\n        this.$refs.canvasElement.getBoundingClientRect().width,\n        this.$refs.canvasElement.getBoundingClientRect().height\n      );\n\n      // because of object-fit, we have to adjust the coordinates we get\n      const mouse_pos_x =\n        e.offsetX * transformed_props.scale + transformed_props.offsetX;\n      const mouse_pos_y =\n        e.offsetY * transformed_props.scale + transformed_props.offsetY;\n      // +\n      // (this.$refs.canvasElement.height -\n      //   this.actual_camera_resolution.height) /\n      //   2;\n      const frame = this.$refs.canvasElement\n        .getContext(\"2d\")\n        .getImageData(mouse_pos_x, mouse_pos_y, 1, 1);\n\n      return {\n        r: frame.data[0],\n        g: frame.data[1],\n        b: frame.data[2],\n      };\n    },\n    updateStreamSharing(val) {\n      this.stream_sharing_informations_status = val;\n    },\n    updateDistantStream(val) {\n      this.stream_access_informations_status = val;\n    },\n    refreshVideoActualSize() {\n      this.getVideoActualSize()\n        .then(({ width, height }) => {\n          this.actual_camera_resolution.width = width;\n          this.actual_camera_resolution.height = height;\n        })\n        .catch((err) => {\n          if (this.$root.debug_mode === true)\n            console.log(\n              `CaptureView  METHODS : refreshVideoActualSize  couldnt get video size: ` +\n                err\n            );\n          // this.$alertify\n          //   .closeLogOnClick(true)\n          //   .delay(4000)\n          //   .error(\"DEBUG error : failed to get video actual size\");\n        });\n    },\n    testStopmotion() {\n      this.$eventHub.$emit(\"stopmotion.test\");\n    },\n    getVideoActualSize() {\n      return new Promise((resolve, reject) => {\n        //Wait for dimensions if they don't show right away\n        let wait_period_if_necessary = 0;\n        if (!this.$refs.videoElement.videoWidth) {\n          wait_period_if_necessary = 500; //was 500\n        }\n\n        const wait = (ms) =>\n          new Promise((resolve) => window.setTimeout(resolve, ms));\n\n        wait(wait_period_if_necessary).then(() => {\n          if (\n            !this.$refs.videoElement ||\n            this.$refs.videoElement.videoWidth *\n              this.$refs.videoElement.videoHeight >\n              0\n          ) {\n            return resolve({\n              width: this.$refs.videoElement.videoWidth,\n              height: this.$refs.videoElement.videoHeight,\n            });\n          } else {\n            return reject(\"couldnt get video dimensions\");\n          }\n        });\n      });\n    },\n    loadStopmotion(stopmotion_path) {\n      const stopmotion_slug = stopmotion_path.substring(\n        stopmotion_path.lastIndexOf(\"/\") + 1\n      );\n      this.$emit(\"openStopmotion\", stopmotion_slug);\n      this.show_stopmotion_list = false;\n      // this.ask_before_leaving_capture = true;\n    },\n    checkCapturePanelSize() {\n      if (this.$el && this.$el.offsetWidth && this.$el.offsetWidth <= 600)\n        this.collapse_capture_pane = true;\n      else this.collapse_capture_pane = false;\n\n      // this.updateVideoDisplayedSize();\n    },\n\n    stopStopmotion() {\n      // two options : remove or save\n      this.closeStopmotionPanel();\n    },\n\n    startFrameGrabber() {\n      const getFrame = () => {\n        if (this.$root.debug_mode === true)\n          console.log(`CaptureView  METHODS : startFrameGrabber`);\n        // this.frameGrabber();\n\n        if (this.media_to_validate) return;\n\n        const ratio =\n          this.actual_camera_resolution.width /\n          this.actual_camera_resolution.height;\n\n        this.getImageDataFromFeed({\n          width: 240 * ratio,\n          height: 240,\n        }).then((image_data) => (this.last_frame_from_video = image_data));\n      };\n      getFrame();\n      this.frameGrabber = window.setInterval(getFrame, 300);\n    },\n    stopFrameGrabber() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureView  METHODS : stopFrameGrabber  `);\n\n      if (this.frameGrabber) window.clearInterval(this.frameGrabber);\n      this.last_frame_from_video = undefined;\n    },\n    async addStopmotionImage() {\n      this.show_live_feed = true;\n      this.$refs.videoElement.pause();\n      this.is_sending_image = true;\n\n      if (!this.stopmotion_slug) {\n        this.ask_before_leaving_capture = true;\n        // create stopmotion\n        const new_stopmotion_slug = await this.$api.createFolder({\n          path: `${this.path}/stopmotions`,\n          additional_meta: {\n            name: new Date().getTime(),\n            $admins: \"parent_contributors\",\n          },\n        });\n        this.$emit(\"openStopmotion\", new_stopmotion_slug);\n      }\n\n      const imageData = await this.getImageDataFromFeed();\n      this.$eventHub.$emit(\"stopmotion.addImage\", { imageData });\n\n      this.media_to_validate = {\n        rawData: imageData,\n        objectURL: URL.createObjectURL(imageData),\n        type: \"image\",\n      };\n      setTimeout(() => {\n        this.media_to_validate = false;\n      }, 500);\n\n      this.is_sending_image = false;\n      this.$refs.videoElement.play();\n    },\n    closeStopmotionPanel() {\n      this.$emit(\"openStopmotion\", undefined);\n\n      this.media_is_being_sent = false;\n      this.media_being_sent_percent = 100;\n      this.media_to_validate = false;\n\n      this.is_recording = false;\n      this.ask_before_leaving_capture = false;\n      this.show_live_feed = true;\n    },\n\n    captureKeyListener(event) {\n      console.log(\"METHODS  CaptureView: captureKeyListener\");\n\n      // dont register if validating a media\n      if (this.media_to_validate || this.is_validating_stopmotion_video)\n        return false;\n\n      // TODO : write captcha to prevent writing to interfere with camera\n      // (!event.target.dataset ||\n      //   event.target.dataset.use !== \"onionskin\")) ||\n      if (\n        this.$root.modal_is_opened ||\n        event.target.tagName.toLowerCase() === \"select\" ||\n        event.target.tagName.toLowerCase() === \"input\" ||\n        event.target.tagName.toLowerCase() === \"textarea\" ||\n        event.target.className.includes(\"ql-editor\") ||\n        event.target.hasAttribute(\"contenteditable\")\n      )\n        return;\n\n      switch (event.key) {\n        case \"w\":\n        case \"z\":\n        case \"ArrowLeft\":\n          this.$eventHub.$emit(\"mode.set.previous\");\n          break;\n        case \"s\":\n        case \"ArrowRight\":\n          this.$eventHub.$emit(\"mode.set.next\");\n          break;\n        case \"a\":\n        case \"q\":\n        case \" \":\n          if (!this.is_recording) this.setCaptureInit();\n          else this.stopRecording();\n          break;\n      }\n    },\n    setCaptureInit() {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureView / setCaptureInit`);\n\n      this.ask_before_leaving_capture = true;\n\n      if (this.delay_mode_enabled && this.delay_event) {\n        // cancel delay\n        this.cancelDelay();\n      } else if (this.delay_mode_enabled) {\n        this.startDelay();\n      } else {\n        this.setCapture();\n      }\n    },\n    startDelay() {\n      let time_passed = 0;\n      this.delay_remaining_time = this.delay_seconds;\n\n      this.delay_event = window.setInterval(() => {\n        time_passed += 1;\n\n        if (time_passed === this.delay_seconds) {\n          this.setCapture();\n          this.cancelDelay();\n        } else {\n          this.delay_remaining_time = this.delay_seconds - time_passed;\n        }\n      }, 1000);\n    },\n    cancelDelay() {\n      this.delay_remaining_time = false;\n      window.clearInterval(this.delay_event);\n      this.delay_event = false;\n    },\n    startTimelapseInterval() {\n      let time_passed = 0;\n      this.timelapse_time_before_next_picture = this.timelapse_interval;\n\n      this.timelapse_event = window.setInterval(() => {\n        time_passed += 1;\n\n        if (time_passed === this.timelapse_interval) {\n          this.setCapture();\n          this.stopTimelapseInterval();\n          this.startTimelapseInterval();\n        } else {\n          this.timelapse_time_before_next_picture =\n            this.timelapse_interval - time_passed;\n        }\n      }, 1000);\n    },\n    stopTimelapseInterval() {\n      window.clearInterval(this.timelapse_event);\n      this.timelapse_event = false;\n      this.timelapse_time_before_next_picture = false;\n    },\n    setCapture() {\n      this.capture_button_pressed = true;\n      window.setTimeout(() => {\n        this.capture_button_pressed = false;\n      }, 400);\n      this.show_capture_settings = false;\n\n      if (this.selected_mode === \"photo\") {\n        this.getImageDataFromFeed().then((rawData) => {\n          this.media_to_validate = {\n            rawData,\n            objectURL: URL.createObjectURL(rawData),\n            temp_name: \"image.jpeg\",\n            type: \"image\",\n          };\n        });\n      } else if (this.selected_mode === \"video\") {\n        this.video_recording_is_paused = false;\n\n        this.startRecordFeed({\n          type: \"video\",\n          // fix to make sure videos recorded in electron/chrome play on firefox\n          // and to make sure videos with audio tracks can be recorded in firefox\n          // https://github.com/onfido/onfido-sdk-ui/issues/891#issuecomment-572940251\n          mimeType: \"video/webm;codecs=vp8,opus\",\n          videoBitsPerSecond: 4112000,\n          enable_audio_recording_in_video: this.enable_audio_recording_in_video,\n        });\n      } else if (this.selected_mode === \"audio\") {\n        this.startRecordFeed({\n          type: \"audio\",\n        });\n      } else if (this.selected_mode === \"stopmotion\") {\n        this.addStopmotionImage();\n\n        if (this.timelapse_mode_enabled && !this.is_recording) {\n          this.is_recording = true;\n          this.startTimelapseInterval();\n        }\n      } else if (this.selected_mode === \"vecto\") {\n        const svgstr = this.$refs.vectoElement.svgstr;\n        this.media_to_validate = {\n          preview: svgstr,\n          rawData: new Blob([svgstr], { type: \"image/svg+xml\" }),\n          temp_name: \"vecto.svg\",\n          type: \"svg\",\n        };\n      } else if (this.selected_mode === \"lines\") {\n        const svgstr =\n          this.$refs.vectoElement.$el.querySelector(\"svg\").outerHTML;\n        this.media_to_validate = {\n          preview: svgstr,\n          rawData: new Blob([svgstr], { type: \"image/svg+xml\" }),\n          temp_name: \"lines.svg\",\n          type: \"svg\",\n        };\n      }\n    },\n    stopRecording() {\n      if (!this.is_recording) return;\n      const duration = this.timer_recording_in_seconds;\n\n      if (this.selected_mode === \"stopmotion\" && this.timelapse_mode_enabled) {\n        this.is_recording = false;\n        this.stopTimelapseInterval();\n        return;\n      }\n      if (this.selected_mode === \"video\") {\n        this.recorder.stopRecording(() => {\n          this.is_recording = false;\n          this.eraseTimer();\n\n          let video_blob = this.recorder.getBlob();\n\n          // recorder.camera.stop();\n          this.recorder.destroy();\n          this.recorder = null;\n\n          ysFixWebmDuration(video_blob, duration * 1000, {\n            logger: false,\n          }).then((fixed_video_blob) => {\n            this.media_to_validate = {\n              rawData: fixed_video_blob,\n              objectURL: URL.createObjectURL(fixed_video_blob),\n              temp_name: \"video.webm\",\n              type: \"video\",\n            };\n          });\n        });\n      } else if (this.selected_mode === \"audio\") {\n        this.recorder.stopRecording(() => {\n          this.is_recording = false;\n          this.eraseTimer();\n\n          let audio_blob = this.recorder.getBlob();\n\n          // recorder.camera.stop();\n          this.recorder.destroy();\n          this.recorder = null;\n\n          const preview = this.$refs.equalizerElement.$el\n            .querySelector(\"canvas\")\n            .toDataURL(\"image/png\");\n\n          ysFixWebmDuration(audio_blob, duration * 1000, {\n            logger: false,\n          }).then((fixed_audio_blob) => {\n            this.media_to_validate = {\n              preview,\n              rawData: fixed_audio_blob,\n              objectURL: URL.createObjectURL(fixed_audio_blob),\n              temp_name: \"audio.wav\",\n              type: \"audio\",\n            };\n          });\n        });\n      }\n    },\n\n    pauseOrResumeCapture() {\n      if (this.recorder.state !== \"paused\") {\n        this.video_recording_is_paused = true;\n        this.pauseTimer();\n        this.recorder.pauseRecording();\n      } else {\n        this.video_recording_is_paused = false;\n        this.unpauseTimer();\n        this.recorder.resumeRecording();\n      }\n    },\n\n    startTimer() {\n      this.recording_timer_interval = window.setInterval(() => {\n        this.timer_recording_in_seconds = Number(\n          Number(this.timer_recording_in_seconds) + 0.1\n        ).toFixed(1);\n      }, 100);\n    },\n    pauseTimer() {\n      window.clearInterval(this.recording_timer_interval);\n    },\n    unpauseTimer() {\n      this.startTimer();\n    },\n    eraseTimer() {\n      this.timer_recording_in_seconds = false;\n      window.clearInterval(this.recording_timer_interval);\n    },\n\n    getImageDataFromFeed({ width, height } = {}) {\n      return new Promise((resolve, reject) => {\n        if (this.enable_effects && this.$refs.canvasElement) {\n          this.getStaticImageFromVideoElement({\n            width,\n            height,\n            from_element: this.$refs.canvasElement,\n          })\n            .then(resolve)\n            .catch(reject);\n        } else {\n          this.getStaticImageFromVideoElement({ width, height })\n            .then(resolve)\n            .catch(reject);\n        }\n      });\n    },\n\n    async getStaticImageFromVideoElement({\n      width,\n      height,\n      from_element = this.$refs.videoElement,\n    } = {}) {\n      if (this.$root.debug_mode === true)\n        console.log(`CaptureView  METHODS : getStaticImageFromVideoElement`);\n\n      if (!from_element) throw new Error(\"missing video element\");\n\n      let _canvas = undefined;\n      if (from_element.tagName === \"VIDEO\") {\n        if (!this.invisible_canvas)\n          this.invisible_canvas = document.createElement(\"canvas\");\n\n        _canvas = this.invisible_canvas;\n\n        _canvas.width = width ? width : from_element.videoWidth;\n        _canvas.height = height ? height : from_element.videoHeight;\n\n        let invisible_ctx = _canvas.getContext(\"2d\");\n        invisible_ctx.drawImage(\n          from_element,\n          0,\n          0,\n          _canvas.width,\n          _canvas.height\n        );\n      } else if (from_element.tagName === \"CANVAS\") {\n        _canvas = from_element;\n      }\n\n      const imageBlob = await new Promise((resolve) => {\n        _canvas.toBlob(resolve, \"image/jpeg\", 0.95);\n      });\n      return imageBlob;\n    },\n\n    startRecordFeed(options) {\n      return new Promise(() => {\n        const finalStream = new MediaStream();\n\n        if (options.type === \"video\") {\n          const video_source =\n            this.enable_effects && this.$refs.canvasElement\n              ? this.$refs.canvasElement.captureStream()\n              : this.stream;\n          video_source.getVideoTracks().forEach((track) => {\n            finalStream.addTrack(track);\n          });\n        }\n\n        if (\n          options?.enable_audio_recording_in_video === true ||\n          options.type === \"audio\"\n        )\n          this.stream\n            .getAudioTracks()\n            .forEach((track) => finalStream.addTrack(track));\n\n        this.recorder = RecordRTC(finalStream, options);\n\n        try {\n          this.recorder.startRecording();\n          this.is_recording = true;\n          this.timer_recording_in_seconds = 0;\n          this.startTimer();\n        } catch (err) {\n          this.$alertify\n            .closeLogOnClick(true)\n            .delay(4000)\n            .error(this.$t(\"failed_to_start_record\") + \"<br>\" + err.message);\n        }\n      });\n    },\n\n    async sendMedia({ fav = false }) {\n      console.log(`METHODS  CaptureView: sendMedia with fav=${fav}`);\n      if (this.$root.debug_mode === true)\n        console.log(`METHODS  CaptureView / sendMedia`);\n\n      if (this.return_temp_media) {\n        this.$emit(\"tempMedia\", this.media_to_validate);\n        return;\n      }\n\n      const timeCreated = +new Date();\n      const randomString = (\n        Math.random().toString(36) + \"00000000000000000\"\n      ).slice(2, 3 + 2);\n\n      const extensions = {\n        image: \"jpeg\",\n        video: \"webm\",\n        audio: \"wav\",\n        svg: \"svg\",\n      };\n      const filename = `${\n        this.media_to_validate.type\n      }-${timeCreated}-${randomString}.${\n        extensions[this.media_to_validate.type]\n      }`;\n\n      // TODO merge with uploadFile\n\n      const rawData = this.media_to_validate.rawData;\n\n      this.media_is_being_sent = true;\n      this.media_being_sent_percent = 0;\n\n      let additional_meta = {\n        fav,\n        $origin: \"capture\",\n      };\n\n      if (this.connected_as?.$path)\n        additional_meta.$authors = [this.connected_as.$path];\n      if (this.location_to_add_to_medias)\n        additional_meta.$location = this.location_to_add_to_medias;\n\n      const onProgress = (progressEvent) => {\n        console.log(\n          `METHODS  CaptureView: onUploadProgress for name = ${filename} / ${parseInt(\n            Math.round((progressEvent.loaded * 100) / progressEvent.total)\n          )}% `\n        );\n        this.media_being_sent_percent = parseInt(\n          Math.round((progressEvent.loaded * 100) / progressEvent.total)\n        );\n      };\n\n      const { meta_filename } = await this.$api\n        .uploadFile({\n          path: this.path,\n          filename,\n          file: rawData,\n          additional_meta,\n          onProgress,\n        })\n        .catch((err) => {\n          console.log(\n            `METHODS  sendThisFile: name = ${filename} / failed uploading ${err}`\n          );\n          this.media_is_being_sent = false;\n          this.media_being_sent_percent = 0;\n          this.$alertify\n            .closeLogOnClick(true)\n            .delay(4000)\n            .error(this.$t(\"media_couldnt_be_sent\"));\n          throw err;\n        });\n\n      this.$alertify\n        .closeLogOnClick(true)\n        .delay(4000)\n        .success(this.$t(\"media_was_saved\"));\n\n      this.media_is_being_sent = false;\n      this.media_being_sent_percent = 100;\n      this.media_to_validate = false;\n\n      this.$emit(\"insertMedia\", meta_filename);\n      return;\n    },\n    cancelValidation() {\n      this.media_to_validate = false;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.m_captureview {\n  display: flex;\n  flex-flow: row nowrap;\n  max-height: 100vh;\n  height: 100%;\n\n  // &.is--collapsed {\n  //   .m_captureview--videoPane--bottom--buttons {\n  //     > * {\n  //       padding: 0;\n  //     }\n  //   }\n  // }\n\n  .m_captureview--settingsPaneButton {\n    position: relative;\n    z-index: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 0;\n    background-color: var(--c-rouge);\n\n    > button {\n      transform: rotate(-90deg);\n      transform-origin: center top;\n      border-top-left-radius: 0;\n      border-top-right-radius: 0;\n      margin-left: -1px;\n    }\n  }\n\n  .m_captureview--videoPane {\n    position: relative;\n    overflow-y: auto;\n    flex: 1 1 100px;\n\n    display: flex;\n    flex-flow: column nowrap;\n  }\n\n  .m_captureview--videoPane--top {\n    position: relative;\n    margin: 0 auto;\n    min-height: 300px;\n\n    flex: 1 1 auto;\n    overflow: hidden;\n\n    width: 100%;\n    height: 100%;\n    background-color: var(--c-noir);\n    background-color: black;\n    // padding: calc(var(--spacing) / 2);\n\n    display: flex;\n    flex-flow: column nowrap;\n    justify-content: center;\n    align-items: center;\n\n    &.is--being_streamed {\n      border-bottom: 5px solid var(--c-rouge);\n    }\n  }\n\n  .m_captureview--videoPane--bottom {\n    position: relative;\n    flex: 0 0 auto;\n    box-shadow: 0 -1px 4px rgba(0, 0, 0, 0.1);\n\n    .m_captureview--videoPane--bottom--buttons {\n      display: flex;\n      flex-flow: row wrap;\n      justify-content: space-between;\n      align-items: center;\n\n      button img,\n      button svg {\n        width: 2rem;\n        height: 2rem;\n        padding: 0;\n      }\n\n      > * {\n        display: flex;\n        flex: 1 1 100px;\n        padding: calc(var(--spacing) / 2);\n\n        > * {\n          margin-right: calc(var(--spacing) / 2);\n        }\n\n        ._settingsBtn {\n          flex-shrink: 0;\n          padding: calc(var(--spacing) / 2);\n        }\n        &:nth-child(2) {\n          flex: 5 1 220px;\n          text-align: center;\n          display: flex;\n          flex-flow: row wrap;\n          align-items: center;\n          justify-content: center;\n        }\n        &:last-child {\n          justify-content: flex-end;\n        }\n      }\n\n      &.is--recording {\n        background-color: var(--c-rouge);\n      }\n    }\n  }\n\n  ._settingsTag {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    z-index: 1;\n    margin: calc(var(--spacing) / 2);\n    pointer-events: none;\n\n    display: flex;\n    flex-flow: row wrap;\n    gap: calc(var(--spacing) / 4);\n    text-align: right;\n\n    button {\n      // display: inline-block;\n      // background-color: white;\n      // border-radius: 4px;\n      // line-height: 1;\n      // margin: 0;\n      // padding: 2px 4px;\n      // font-weight: 500;\n      pointer-events: auto;\n      // cursor: pointer;\n\n      // &:hover {\n      //   font-weight: 600;\n      // }\n\n      // &.is--active {\n      //   background-color: var(--c-rouge);\n      //   color: white;\n      // }\n    }\n  }\n\n  .m_captureview--videoPane--top--videoContainer {\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    ._videoEl {\n      // transition: all 0.25s cubic-bezier(0.19, 1, 0.22, 1);\n    }\n\n    video,\n    canvas,\n    .mediaContainer img,\n    .m_audioEqualizer {\n      position: absolute;\n      top: 0;\n      left: 0;\n\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n    }\n  }\n}\n\n._captureButton {\n  position: relative;\n  // margin: 0 auto;\n  width: auto;\n  height: auto;\n  flex: 0 0 auto;\n  margin: 0 calc(var(--spacing) / 4);\n\n  &.is--active {\n    background: var(--c-rouge);\n  }\n\n  > img {\n    flex: 0 0 auto;\n  }\n}\n\n._mode_indicator {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: var(--c-rouge);\n  font-weight: 700;\n  font-family: \"Fira Code\";\n  font-size: var(--font-large);\n  text-transform: uppercase;\n\n  letter-spacing: 0.06em;\n\n  pointer-events: none;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n}\n\n._delay_timer {\n  position: absolute;\n  z-index: 100;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n\n  font-size: 40vmin;\n  color: transparent;\n\n  --c-text-stroke: var(--c-rouge);\n  --c-text-shadow: rgba(0, 0, 0, 0.2);\n  color: var(--c-rouge_fonce);\n\n  -webkit-text-stroke: 1vmin var(--c-text-stroke);\n  // text-shadow: 1vmin 1vmin 0 var(--c-text-shadow),\n  //   -1px -1px 0 var(--c-text-shadow), 1px -1px 0 var(--c-text-shadow),\n  //   -1px 1px 0 var(--c-text-shadow), 1px 1px 0 var(--c-text-shadow);\n\n  &.is--timelapse {\n    font-size: 10vmin;\n    -webkit-text-stroke: 0.2vmin var(--c-text-stroke);\n    height: 50%;\n    bottom: 0;\n  }\n}\n\n._capture_options {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  z-index: 100;\n  text-align: center;\n  pointer-events: none;\n\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  margin: 0 auto;\n\n  label {\n    display: inline-block;\n    margin: 0 auto;\n    background-color: var(--c-rouge);\n    padding: 0 calc(var(--spacing) / 8);\n\n    margin-bottom: calc(var(--spacing) / 8);\n    color: white;\n    border-radius: 4px;\n    pointer-events: auto;\n  }\n\n  .record_options {\n    max-width: 450px;\n    margin: calc(var(--spacing) / 2) auto;\n    // .padding-verysmall;\n    pointer-events: auto;\n    // .font-small;\n\n    > * {\n      margin-bottom: 0;\n      background-color: var(--c-rouge);\n\n      color: white;\n      padding: 0 calc(var(--spacing) / 4);\n      border-radius: 4px;\n      width: auto;\n\n      display: flex;\n      align-items: center;\n    }\n\n    input {\n      min-width: 2em;\n      max-width: 4em;\n      height: 1.4em;\n      margin: 2px;\n      padding: 0 2px;\n      width: auto;\n      width: auto;\n      text-align: center;\n      color: white;\n\n      background-color: var(--c-rouge_clair);\n\n      border-bottom: 0px;\n\n      &:active,\n      &:focus {\n        border-bottom-color: var(--c-rouge_fonce);\n      }\n    }\n\n    .record_options--timer {\n      font-size: 2em;\n    }\n  }\n}\n\n._tiny_equalizer {\n  margin: 0 calc(var(--spacing) / 2);\n\n  .m_audioEqualizer {\n    position: relative;\n    width: 64px;\n    height: 36px;\n    background-color: transparent !important;\n    border-radius: 4px;\n    overflow: hidden;\n  }\n}\n\n._onion_skin {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  &.is--onionskin {\n    opacity: 0.2;\n    opacity: var(--onionskin-opacity);\n  }\n\n  ::v-deep {\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n    }\n  }\n}\n._mode_accessory_range {\n  max-width: 200px;\n  margin: -5px 0 -5px auto;\n  label {\n    margin: 0;\n  }\n  input {\n    margin: 0;\n  }\n}\n\n._video_grid_overlay {\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n\n  object-fit: contain;\n\n  --stroke_width: 2px;\n\n  svg {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    stroke: var(--c-rouge);\n    fill: none;\n    // padding: calc(var(--stroke_width) / 2);\n\n    line {\n      stroke-width: var(--stroke_width);\n    }\n    rect {\n      stroke-width: var(--stroke_width);\n    }\n  }\n}\n\n._enable_timelapse_button {\n  color: #fff;\n  background: var(--c-orange);\n  width: 24px;\n  height: 24px;\n  display: block;\n  min-height: 0;\n  line-height: 0;\n  border-radius: 50%;\n  text-align: center;\n  font-weight: bold;\n  padding: 0;\n  margin: calc(var(--spacing) / 4);\n\n  svg {\n    width: 100% !important;\n    height: 100% !important;\n  }\n\n  &.is--active {\n    background: var(--c-rouge);\n    color: white;\n  }\n}\n._capture_flash {\n  background-color: var(--c-rouge);\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n}\n\n._download_media_without_validation {\n  background-color: var(--c-noir);\n  padding: 0 calc(var(--spacing) / 2) calc(var(--spacing) / 4);\n  // margin-top: calc(-0.5 * var(--spacing));\n  margin-bottom: -0.2em;\n  line-height: 1;\n  text-align: right;\n\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n\n  a {\n    color: var(--c-gris);\n  }\n}\n._videoEq {\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n}\n\n._loader {\n  background: transparent;\n  color: white;\n  color: var(--c-rouge);\n}\n\n._stopmotionValidation {\n  // .bg-rouge;\n  flex: 0 0 auto;\n  // padding: calc(var(--spacing) / 4);\n  margin: 0;\n  // margin: calc(var(--spacing) / 4);\n\n  // background-color: white;\n\n  // border: calc(var(--spacing) / 4) solid var(--c-noir);\n  border-radius: calc(var(--spacing) / 4);\n\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-items: center;\n\n  gap: calc(var(--spacing) / 2);\n\n  --input-height: 2em;\n\n  > * {\n    flex: 0 0 auto;\n  }\n\n  ._stopmotionValidation--fpscounter {\n    // .padding-sides-small;\n    display: flex;\n    flex-flow: column nowrap;\n    align-items: center;\n\n    // select {\n    //   margin-left: calc(var(--spacing) / 8);\n    //   margin-right: calc(var(--spacing) / 8);\n\n    //   flex: 0 0 auto;\n    //   max-width: 50px;\n    //   font-size: var(--font-small);\n\n    //   // .bg-noir;\n    // }\n    // label {\n    //   margin-left: calc(var(--spacing) / 8);\n    //   margin-right: calc(var(--spacing) / 8);\n    //   font-size: 0.6em;\n    //   white-space: nowrap;\n    // }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CaptureView.vue?vue&type=template&id=83e5df5a&scoped=true\"\nimport script from \"./CaptureView.vue?vue&type=script&lang=js\"\nexport * from \"./CaptureView.vue?vue&type=script&lang=js\"\nimport style0 from \"./CaptureView.vue?vue&type=style&index=0&id=83e5df5a&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"83e5df5a\",\n  null\n  \n)\n\nexport default component.exports","(function (name, definition) {\r\n    if (typeof define === 'function' && define.amd) { // RequireJS / AMD\r\n        define(definition);\r\n    } else if (typeof module !== 'undefined' && module.exports) { // CommonJS / Node.js\r\n        module.exports = definition();\r\n    } else { // Direct include\r\n        window.ysFixWebmDuration = definition();\r\n    }\r\n})('fix-webm-duration', function () {\r\n    /*\r\n     * This is the list of possible WEBM file sections by their IDs.\r\n     * Possible types: Container, Binary, Uint, Int, String, Float, Date\r\n     */\r\n    var sections = {\r\n        0xa45dfa3: { name: 'EBML', type: 'Container' },\r\n        0x286: { name: 'EBMLVersion', type: 'Uint' },\r\n        0x2f7: { name: 'EBMLReadVersion', type: 'Uint' },\r\n        0x2f2: { name: 'EBMLMaxIDLength', type: 'Uint' },\r\n        0x2f3: { name: 'EBMLMaxSizeLength', type: 'Uint' },\r\n        0x282: { name: 'DocType', type: 'String' },\r\n        0x287: { name: 'DocTypeVersion', type: 'Uint' },\r\n        0x285: { name: 'DocTypeReadVersion', type: 'Uint' },\r\n        0x6c: { name: 'Void', type: 'Binary' },\r\n        0x3f: { name: 'CRC-32', type: 'Binary' },\r\n        0xb538667: { name: 'SignatureSlot', type: 'Container' },\r\n        0x3e8a: { name: 'SignatureAlgo', type: 'Uint' },\r\n        0x3e9a: { name: 'SignatureHash', type: 'Uint' },\r\n        0x3ea5: { name: 'SignaturePublicKey', type: 'Binary' },\r\n        0x3eb5: { name: 'Signature', type: 'Binary' },\r\n        0x3e5b: { name: 'SignatureElements', type: 'Container' },\r\n        0x3e7b: { name: 'SignatureElementList', type: 'Container' },\r\n        0x2532: { name: 'SignedElement', type: 'Binary' },\r\n        0x8538067: { name: 'Segment', type: 'Container' },\r\n        0x14d9b74: { name: 'SeekHead', type: 'Container' },\r\n        0xdbb: { name: 'Seek', type: 'Container' },\r\n        0x13ab: { name: 'SeekID', type: 'Binary' },\r\n        0x13ac: { name: 'SeekPosition', type: 'Uint' },\r\n        0x549a966: { name: 'Info', type: 'Container' },\r\n        0x33a4: { name: 'SegmentUID', type: 'Binary' },\r\n        0x3384: { name: 'SegmentFilename', type: 'String' },\r\n        0x1cb923: { name: 'PrevUID', type: 'Binary' },\r\n        0x1c83ab: { name: 'PrevFilename', type: 'String' },\r\n        0x1eb923: { name: 'NextUID', type: 'Binary' },\r\n        0x1e83bb: { name: 'NextFilename', type: 'String' },\r\n        0x444: { name: 'SegmentFamily', type: 'Binary' },\r\n        0x2924: { name: 'ChapterTranslate', type: 'Container' },\r\n        0x29fc: { name: 'ChapterTranslateEditionUID', type: 'Uint' },\r\n        0x29bf: { name: 'ChapterTranslateCodec', type: 'Uint' },\r\n        0x29a5: { name: 'ChapterTranslateID', type: 'Binary' },\r\n        0xad7b1: { name: 'TimecodeScale', type: 'Uint' },\r\n        0x489: { name: 'Duration', type: 'Float' },\r\n        0x461: { name: 'DateUTC', type: 'Date' },\r\n        0x3ba9: { name: 'Title', type: 'String' },\r\n        0xd80: { name: 'MuxingApp', type: 'String' },\r\n        0x1741: { name: 'WritingApp', type: 'String' },\r\n        // 0xf43b675: { name: 'Cluster', type: 'Container' },\r\n        0x67: { name: 'Timecode', type: 'Uint' },\r\n        0x1854: { name: 'SilentTracks', type: 'Container' },\r\n        0x18d7: { name: 'SilentTrackNumber', type: 'Uint' },\r\n        0x27: { name: 'Position', type: 'Uint' },\r\n        0x2b: { name: 'PrevSize', type: 'Uint' },\r\n        0x23: { name: 'SimpleBlock', type: 'Binary' },\r\n        0x20: { name: 'BlockGroup', type: 'Container' },\r\n        0x21: { name: 'Block', type: 'Binary' },\r\n        0x22: { name: 'BlockVirtual', type: 'Binary' },\r\n        0x35a1: { name: 'BlockAdditions', type: 'Container' },\r\n        0x26: { name: 'BlockMore', type: 'Container' },\r\n        0x6e: { name: 'BlockAddID', type: 'Uint' },\r\n        0x25: { name: 'BlockAdditional', type: 'Binary' },\r\n        0x1b: { name: 'BlockDuration', type: 'Uint' },\r\n        0x7a: { name: 'ReferencePriority', type: 'Uint' },\r\n        0x7b: { name: 'ReferenceBlock', type: 'Int' },\r\n        0x7d: { name: 'ReferenceVirtual', type: 'Int' },\r\n        0x24: { name: 'CodecState', type: 'Binary' },\r\n        0x35a2: { name: 'DiscardPadding', type: 'Int' },\r\n        0xe: { name: 'Slices', type: 'Container' },\r\n        0x68: { name: 'TimeSlice', type: 'Container' },\r\n        0x4c: { name: 'LaceNumber', type: 'Uint' },\r\n        0x4d: { name: 'FrameNumber', type: 'Uint' },\r\n        0x4b: { name: 'BlockAdditionID', type: 'Uint' },\r\n        0x4e: { name: 'Delay', type: 'Uint' },\r\n        0x4f: { name: 'SliceDuration', type: 'Uint' },\r\n        0x48: { name: 'ReferenceFrame', type: 'Container' },\r\n        0x49: { name: 'ReferenceOffset', type: 'Uint' },\r\n        0x4a: { name: 'ReferenceTimeCode', type: 'Uint' },\r\n        0x2f: { name: 'EncryptedBlock', type: 'Binary' },\r\n        0x654ae6b: { name: 'Tracks', type: 'Container' },\r\n        0x2e: { name: 'TrackEntry', type: 'Container' },\r\n        0x57: { name: 'TrackNumber', type: 'Uint' },\r\n        0x33c5: { name: 'TrackUID', type: 'Uint' },\r\n        0x3: { name: 'TrackType', type: 'Uint' },\r\n        0x39: { name: 'FlagEnabled', type: 'Uint' },\r\n        0x8: { name: 'FlagDefault', type: 'Uint' },\r\n        0x15aa: { name: 'FlagForced', type: 'Uint' },\r\n        0x1c: { name: 'FlagLacing', type: 'Uint' },\r\n        0x2de7: { name: 'MinCache', type: 'Uint' },\r\n        0x2df8: { name: 'MaxCache', type: 'Uint' },\r\n        0x3e383: { name: 'DefaultDuration', type: 'Uint' },\r\n        0x34e7a: { name: 'DefaultDecodedFieldDuration', type: 'Uint' },\r\n        0x3314f: { name: 'TrackTimecodeScale', type: 'Float' },\r\n        0x137f: { name: 'TrackOffset', type: 'Int' },\r\n        0x15ee: { name: 'MaxBlockAdditionID', type: 'Uint' },\r\n        0x136e: { name: 'Name', type: 'String' },\r\n        0x2b59c: { name: 'Language', type: 'String' },\r\n        0x6: { name: 'CodecID', type: 'String' },\r\n        0x23a2: { name: 'CodecPrivate', type: 'Binary' },\r\n        0x58688: { name: 'CodecName', type: 'String' },\r\n        0x3446: { name: 'AttachmentLink', type: 'Uint' },\r\n        0x1a9697: { name: 'CodecSettings', type: 'String' },\r\n        0x1b4040: { name: 'CodecInfoURL', type: 'String' },\r\n        0x6b240: { name: 'CodecDownloadURL', type: 'String' },\r\n        0x2a: { name: 'CodecDecodeAll', type: 'Uint' },\r\n        0x2fab: { name: 'TrackOverlay', type: 'Uint' },\r\n        0x16aa: { name: 'CodecDelay', type: 'Uint' },\r\n        0x16bb: { name: 'SeekPreRoll', type: 'Uint' },\r\n        0x2624: { name: 'TrackTranslate', type: 'Container' },\r\n        0x26fc: { name: 'TrackTranslateEditionUID', type: 'Uint' },\r\n        0x26bf: { name: 'TrackTranslateCodec', type: 'Uint' },\r\n        0x26a5: { name: 'TrackTranslateTrackID', type: 'Binary' },\r\n        0x60: { name: 'Video', type: 'Container' },\r\n        0x1a: { name: 'FlagInterlaced', type: 'Uint' },\r\n        0x13b8: { name: 'StereoMode', type: 'Uint' },\r\n        0x13c0: { name: 'AlphaMode', type: 'Uint' },\r\n        0x13b9: { name: 'OldStereoMode', type: 'Uint' },\r\n        0x30: { name: 'PixelWidth', type: 'Uint' },\r\n        0x3a: { name: 'PixelHeight', type: 'Uint' },\r\n        0x14aa: { name: 'PixelCropBottom', type: 'Uint' },\r\n        0x14bb: { name: 'PixelCropTop', type: 'Uint' },\r\n        0x14cc: { name: 'PixelCropLeft', type: 'Uint' },\r\n        0x14dd: { name: 'PixelCropRight', type: 'Uint' },\r\n        0x14b0: { name: 'DisplayWidth', type: 'Uint' },\r\n        0x14ba: { name: 'DisplayHeight', type: 'Uint' },\r\n        0x14b2: { name: 'DisplayUnit', type: 'Uint' },\r\n        0x14b3: { name: 'AspectRatioType', type: 'Uint' },\r\n        0xeb524: { name: 'ColourSpace', type: 'Binary' },\r\n        0xfb523: { name: 'GammaValue', type: 'Float' },\r\n        0x383e3: { name: 'FrameRate', type: 'Float' },\r\n        0x61: { name: 'Audio', type: 'Container' },\r\n        0x35: { name: 'SamplingFrequency', type: 'Float' },\r\n        0x38b5: { name: 'OutputSamplingFrequency', type: 'Float' },\r\n        0x1f: { name: 'Channels', type: 'Uint' },\r\n        0x3d7b: { name: 'ChannelPositions', type: 'Binary' },\r\n        0x2264: { name: 'BitDepth', type: 'Uint' },\r\n        0x62: { name: 'TrackOperation', type: 'Container' },\r\n        0x63: { name: 'TrackCombinePlanes', type: 'Container' },\r\n        0x64: { name: 'TrackPlane', type: 'Container' },\r\n        0x65: { name: 'TrackPlaneUID', type: 'Uint' },\r\n        0x66: { name: 'TrackPlaneType', type: 'Uint' },\r\n        0x69: { name: 'TrackJoinBlocks', type: 'Container' },\r\n        0x6d: { name: 'TrackJoinUID', type: 'Uint' },\r\n        0x40: { name: 'TrickTrackUID', type: 'Uint' },\r\n        0x41: { name: 'TrickTrackSegmentUID', type: 'Binary' },\r\n        0x46: { name: 'TrickTrackFlag', type: 'Uint' },\r\n        0x47: { name: 'TrickMasterTrackUID', type: 'Uint' },\r\n        0x44: { name: 'TrickMasterTrackSegmentUID', type: 'Binary' },\r\n        0x2d80: { name: 'ContentEncodings', type: 'Container' },\r\n        0x2240: { name: 'ContentEncoding', type: 'Container' },\r\n        0x1031: { name: 'ContentEncodingOrder', type: 'Uint' },\r\n        0x1032: { name: 'ContentEncodingScope', type: 'Uint' },\r\n        0x1033: { name: 'ContentEncodingType', type: 'Uint' },\r\n        0x1034: { name: 'ContentCompression', type: 'Container' },\r\n        0x254: { name: 'ContentCompAlgo', type: 'Uint' },\r\n        0x255: { name: 'ContentCompSettings', type: 'Binary' },\r\n        0x1035: { name: 'ContentEncryption', type: 'Container' },\r\n        0x7e1: { name: 'ContentEncAlgo', type: 'Uint' },\r\n        0x7e2: { name: 'ContentEncKeyID', type: 'Binary' },\r\n        0x7e3: { name: 'ContentSignature', type: 'Binary' },\r\n        0x7e4: { name: 'ContentSigKeyID', type: 'Binary' },\r\n        0x7e5: { name: 'ContentSigAlgo', type: 'Uint' },\r\n        0x7e6: { name: 'ContentSigHashAlgo', type: 'Uint' },\r\n        0xc53bb6b: { name: 'Cues', type: 'Container' },\r\n        0x3b: { name: 'CuePoint', type: 'Container' },\r\n        0x33: { name: 'CueTime', type: 'Uint' },\r\n        0x37: { name: 'CueTrackPositions', type: 'Container' },\r\n        0x77: { name: 'CueTrack', type: 'Uint' },\r\n        0x71: { name: 'CueClusterPosition', type: 'Uint' },\r\n        0x70: { name: 'CueRelativePosition', type: 'Uint' },\r\n        0x32: { name: 'CueDuration', type: 'Uint' },\r\n        0x1378: { name: 'CueBlockNumber', type: 'Uint' },\r\n        0x6a: { name: 'CueCodecState', type: 'Uint' },\r\n        0x5b: { name: 'CueReference', type: 'Container' },\r\n        0x16: { name: 'CueRefTime', type: 'Uint' },\r\n        0x17: { name: 'CueRefCluster', type: 'Uint' },\r\n        0x135f: { name: 'CueRefNumber', type: 'Uint' },\r\n        0x6b: { name: 'CueRefCodecState', type: 'Uint' },\r\n        0x941a469: { name: 'Attachments', type: 'Container' },\r\n        0x21a7: { name: 'AttachedFile', type: 'Container' },\r\n        0x67e: { name: 'FileDescription', type: 'String' },\r\n        0x66e: { name: 'FileName', type: 'String' },\r\n        0x660: { name: 'FileMimeType', type: 'String' },\r\n        0x65c: { name: 'FileData', type: 'Binary' },\r\n        0x6ae: { name: 'FileUID', type: 'Uint' },\r\n        0x675: { name: 'FileReferral', type: 'Binary' },\r\n        0x661: { name: 'FileUsedStartTime', type: 'Uint' },\r\n        0x662: { name: 'FileUsedEndTime', type: 'Uint' },\r\n        0x43a770: { name: 'Chapters', type: 'Container' },\r\n        0x5b9: { name: 'EditionEntry', type: 'Container' },\r\n        0x5bc: { name: 'EditionUID', type: 'Uint' },\r\n        0x5bd: { name: 'EditionFlagHidden', type: 'Uint' },\r\n        0x5db: { name: 'EditionFlagDefault', type: 'Uint' },\r\n        0x5dd: { name: 'EditionFlagOrdered', type: 'Uint' },\r\n        0x36: { name: 'ChapterAtom', type: 'Container' },\r\n        0x33c4: { name: 'ChapterUID', type: 'Uint' },\r\n        0x1654: { name: 'ChapterStringUID', type: 'String' },\r\n        0x11: { name: 'ChapterTimeStart', type: 'Uint' },\r\n        0x12: { name: 'ChapterTimeEnd', type: 'Uint' },\r\n        0x18: { name: 'ChapterFlagHidden', type: 'Uint' },\r\n        0x598: { name: 'ChapterFlagEnabled', type: 'Uint' },\r\n        0x2e67: { name: 'ChapterSegmentUID', type: 'Binary' },\r\n        0x2ebc: { name: 'ChapterSegmentEditionUID', type: 'Uint' },\r\n        0x23c3: { name: 'ChapterPhysicalEquiv', type: 'Uint' },\r\n        0xf: { name: 'ChapterTrack', type: 'Container' },\r\n        0x9: { name: 'ChapterTrackNumber', type: 'Uint' },\r\n        0x0: { name: 'ChapterDisplay', type: 'Container' },\r\n        0x5: { name: 'ChapString', type: 'String' },\r\n        0x37c: { name: 'ChapLanguage', type: 'String' },\r\n        0x37e: { name: 'ChapCountry', type: 'String' },\r\n        0x2944: { name: 'ChapProcess', type: 'Container' },\r\n        0x2955: { name: 'ChapProcessCodecID', type: 'Uint' },\r\n        0x50d: { name: 'ChapProcessPrivate', type: 'Binary' },\r\n        0x2911: { name: 'ChapProcessCommand', type: 'Container' },\r\n        0x2922: { name: 'ChapProcessTime', type: 'Uint' },\r\n        0x2933: { name: 'ChapProcessData', type: 'Binary' },\r\n        0x254c367: { name: 'Tags', type: 'Container' },\r\n        0x3373: { name: 'Tag', type: 'Container' },\r\n        0x23c0: { name: 'Targets', type: 'Container' },\r\n        0x28ca: { name: 'TargetTypeValue', type: 'Uint' },\r\n        0x23ca: { name: 'TargetType', type: 'String' },\r\n        0x23c5: { name: 'TagTrackUID', type: 'Uint' },\r\n        0x23c9: { name: 'TagEditionUID', type: 'Uint' },\r\n        0x23c4: { name: 'TagChapterUID', type: 'Uint' },\r\n        0x23c6: { name: 'TagAttachmentUID', type: 'Uint' },\r\n        0x27c8: { name: 'SimpleTag', type: 'Container' },\r\n        0x5a3: { name: 'TagName', type: 'String' },\r\n        0x47a: { name: 'TagLanguage', type: 'String' },\r\n        0x484: { name: 'TagDefault', type: 'Uint' },\r\n        0x487: { name: 'TagString', type: 'String' },\r\n        0x485: { name: 'TagBinary', type: 'Binary' }\r\n    };\r\n\r\n    function doInherit(newClass, baseClass) {\r\n        newClass.prototype = Object.create(baseClass.prototype);\r\n        newClass.prototype.constructor = newClass;\r\n    }\r\n\r\n    function WebmBase(name, type) {\r\n        this.name = name || 'Unknown';\r\n        this.type = type || 'Unknown';\r\n    }\r\n    WebmBase.prototype.updateBySource = function() { };\r\n    WebmBase.prototype.setSource = function(source) {\r\n        this.source = source;\r\n        this.updateBySource();\r\n    };\r\n    WebmBase.prototype.updateByData = function() { };\r\n    WebmBase.prototype.setData = function(data) {\r\n        this.data = data;\r\n        this.updateByData();\r\n    };\r\n\r\n    function WebmUint(name, type) {\r\n        WebmBase.call(this, name, type || 'Uint');\r\n    }\r\n    doInherit(WebmUint, WebmBase);\r\n    function padHex(hex) {\r\n        return hex.length % 2 === 1 ? '0' + hex : hex;\r\n    }\r\n    WebmUint.prototype.updateBySource = function() {\r\n        // use hex representation of a number instead of number value\r\n        this.data = '';\r\n        for (var i = 0; i < this.source.length; i++) {\r\n            var hex = this.source[i].toString(16);\r\n            this.data += padHex(hex);\r\n        }\r\n    };\r\n    WebmUint.prototype.updateByData = function() {\r\n        var length = this.data.length / 2;\r\n        this.source = new Uint8Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            var hex = this.data.substr(i * 2, 2);\r\n            this.source[i] = parseInt(hex, 16);\r\n        }\r\n    };\r\n    WebmUint.prototype.getValue = function() {\r\n        return parseInt(this.data, 16);\r\n    };\r\n    WebmUint.prototype.setValue = function(value) {\r\n        this.setData(padHex(value.toString(16)));\r\n    };\r\n\r\n    function WebmFloat(name, type) {\r\n        WebmBase.call(this, name, type || 'Float');\r\n    }\r\n    doInherit(WebmFloat, WebmBase);\r\n    WebmFloat.prototype.getFloatArrayType = function() {\r\n        return this.source && this.source.length === 4 ? Float32Array : Float64Array;\r\n    };\r\n    WebmFloat.prototype.updateBySource = function() {\r\n        var byteArray = this.source.reverse();\r\n        var floatArrayType = this.getFloatArrayType();\r\n        var floatArray = new floatArrayType(byteArray.buffer);\r\n        this.data = floatArray[0];\r\n    };\r\n    WebmFloat.prototype.updateByData = function() {\r\n        var floatArrayType = this.getFloatArrayType();\r\n        var floatArray = new floatArrayType([ this.data ]);\r\n        var byteArray = new Uint8Array(floatArray.buffer);\r\n        this.source = byteArray.reverse();\r\n    };\r\n    WebmFloat.prototype.getValue = function() {\r\n        return this.data;\r\n    };\r\n    WebmFloat.prototype.setValue = function(value) {\r\n        this.setData(value);\r\n    };\r\n\r\n    function WebmContainer(name, type) {\r\n        WebmBase.call(this, name, type || 'Container');\r\n    }\r\n    doInherit(WebmContainer, WebmBase);\r\n    WebmContainer.prototype.readByte = function() {\r\n        return this.source[this.offset++];\r\n    };\r\n    WebmContainer.prototype.readUint = function() {\r\n        var firstByte = this.readByte();\r\n        var bytes = 8 - firstByte.toString(2).length;\r\n        var value = firstByte - (1 << (7 - bytes));\r\n        for (var i = 0; i < bytes; i++) {\r\n            // don't use bit operators to support x86\r\n            value *= 256;\r\n            value += this.readByte();\r\n        }\r\n        return value;\r\n    };\r\n    WebmContainer.prototype.updateBySource = function() {\r\n        this.data = [];\r\n        for (this.offset = 0; this.offset < this.source.length; this.offset = end) {\r\n            var id = this.readUint();\r\n            var len = this.readUint();\r\n            var end = Math.min(this.offset + len, this.source.length);\r\n            var data = this.source.slice(this.offset, end);\r\n\r\n            var info = sections[id] || { name: 'Unknown', type: 'Unknown' };\r\n            var ctr = WebmBase;\r\n            switch (info.type) {\r\n                case 'Container':\r\n                    ctr = WebmContainer;\r\n                    break;\r\n                case 'Uint':\r\n                    ctr = WebmUint;\r\n                    break;\r\n                case 'Float':\r\n                    ctr = WebmFloat;\r\n                    break;\r\n            }\r\n            var section = new ctr(info.name, info.type);\r\n            section.setSource(data);\r\n            this.data.push({\r\n                id: id,\r\n                idHex: id.toString(16),\r\n                data: section\r\n            });\r\n        }\r\n    };\r\n    WebmContainer.prototype.writeUint = function(x, draft) {\r\n        for (var bytes = 1, flag = 0x80; x >= flag && bytes < 8; bytes++, flag *= 0x80) { }\r\n\r\n        if (!draft) {\r\n            var value = flag + x;\r\n            for (var i = bytes - 1; i >= 0; i--) {\r\n                // don't use bit operators to support x86\r\n                var c = value % 256;\r\n                this.source[this.offset + i] = c;\r\n                value = (value - c) / 256;\r\n            }\r\n        }\r\n\r\n        this.offset += bytes;\r\n    };\r\n    WebmContainer.prototype.writeSections = function(draft) {\r\n        this.offset = 0;\r\n        for (var i = 0; i < this.data.length; i++) {\r\n            var section = this.data[i],\r\n                content = section.data.source,\r\n                contentLength = content.length;\r\n            this.writeUint(section.id, draft);\r\n            this.writeUint(contentLength, draft);\r\n            if (!draft) {\r\n                this.source.set(content, this.offset);\r\n            }\r\n            this.offset += contentLength;\r\n        }\r\n        return this.offset;\r\n    };\r\n    WebmContainer.prototype.updateByData = function() {\r\n        // run without accessing this.source to determine total length - need to know it to create Uint8Array\r\n        var length = this.writeSections('draft');\r\n        this.source = new Uint8Array(length);\r\n        // now really write data\r\n        this.writeSections();\r\n    };\r\n    WebmContainer.prototype.getSectionById = function(id) {\r\n        for (var i = 0; i < this.data.length; i++) {\r\n            var section = this.data[i];\r\n            if (section.id === id) {\r\n                return section.data;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    function WebmFile(source) {\r\n        WebmContainer.call(this, 'File', 'File');\r\n        this.setSource(source);\r\n    }\r\n    doInherit(WebmFile, WebmContainer);\r\n    WebmFile.prototype.fixDuration = function(duration, options) {\r\n        var logger = options && options.logger;\r\n        if (logger === undefined) {\r\n            logger = function(message) {\r\n                console.log(message);\r\n            };\r\n        } else if (!logger) {\r\n            logger = function() { };\r\n        }\r\n\r\n        var segmentSection = this.getSectionById(0x8538067);\r\n        if (!segmentSection) {\r\n            logger('[fix-webm-duration] Segment section is missing');\r\n            return false;\r\n        }\r\n\r\n        var infoSection = segmentSection.getSectionById(0x549a966);\r\n        if (!infoSection) {\r\n            logger('[fix-webm-duration] Info section is missing');\r\n            return false;\r\n        }\r\n\r\n        var timeScaleSection = infoSection.getSectionById(0xad7b1);\r\n        if (!timeScaleSection) {\r\n            logger('[fix-webm-duration] TimecodeScale section is missing');\r\n            return false;\r\n        }\r\n\r\n        var durationSection = infoSection.getSectionById(0x489);\r\n        if (durationSection) {\r\n            if (durationSection.getValue() <= 0) {\r\n                logger('[fix-webm-duration] Duration section is present, but the value is empty');\r\n                durationSection.setValue(duration);\r\n            } else {\r\n                logger('[fix-webm-duration] Duration section is present');\r\n                return false;\r\n            }\r\n        } else {\r\n            logger('[fix-webm-duration] Duration section is missing');\r\n            // append Duration section\r\n            durationSection = new WebmFloat('Duration', 'Float');\r\n            durationSection.setValue(duration);\r\n            infoSection.data.push({\r\n                id: 0x489,\r\n                data: durationSection\r\n            });\r\n        }\r\n\r\n        // set default time scale to 1 millisecond (1000000 nanoseconds)\r\n        timeScaleSection.setValue(1000000);\r\n        infoSection.updateByData();\r\n        segmentSection.updateByData();\r\n        this.updateByData();\r\n\r\n        return true;\r\n    };\r\n    WebmFile.prototype.toBlob = function(mimeType) {\r\n        return new Blob([ this.source.buffer ], { type: mimeType || 'video/webm' });\r\n    };\r\n\r\n    function fixWebmDuration(blob, duration, callback, options) {\r\n        // The callback may be omitted - then the third argument is options\r\n        if (typeof callback === \"object\") {\r\n            options = callback;\r\n            callback = undefined;\r\n        }\r\n\r\n        if (!callback) {\r\n            return new Promise(function(resolve) {\r\n                fixWebmDuration(blob, duration, resolve, options);\r\n            });\r\n        }\r\n\r\n        try {\r\n            var reader = new FileReader();\r\n            reader.onloadend = function() {\r\n                try {\r\n                    var file = new WebmFile(new Uint8Array(reader.result));\r\n                    if (file.fixDuration(duration, options)) {\r\n                        blob = file.toBlob(blob.type);\r\n                    }\r\n                } catch (ex) {\r\n                    // ignore\r\n                }\r\n                callback(blob);\r\n            };\r\n            reader.readAsArrayBuffer(blob);\r\n        } catch (ex) {\r\n            callback(blob);\r\n        }\r\n    }\r\n\r\n    // Support AMD import default\r\n    fixWebmDuration.default = fixWebmDuration;\r\n\r\n    return fixWebmDuration;\r\n});\r\n","/*\n\timagetracer.js version 1.2.6\n\tSimple raster image tracer and vectorizer written in JavaScript.\n\tandras@jankovics.net\n*/\n\n/*\n\nThe Unlicense / PUBLIC DOMAIN\n\nThis is free and unencumbered software released into the public domain.\n\nAnyone is free to copy, modify, publish, use, compile, sell, or\ndistribute this software, either in source code form or as a compiled\nbinary, for any purpose, commercial or non-commercial, and by any\nmeans.\n\nIn jurisdictions that recognize copyright laws, the author or authors\nof this software dedicate any and all copyright interest in the\nsoftware to the public domain. We make this dedication for the benefit\nof the public at large and to the detriment of our heirs and\nsuccessors. We intend this dedication to be an overt act of\nrelinquishment in perpetuity of all present and future rights to this\nsoftware under copyright law.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR\nOTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\nARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n\nFor more information, please refer to http://unlicense.org/\n\n*/\n\n(function(){ 'use strict';\n\nfunction ImageTracer(){\n\tvar _this = this;\n\n\tthis.versionnumber = '1.2.6',\n\t\n\t////////////////////////////////////////////////////////////\n\t//\n\t//  API\n\t//\n\t////////////////////////////////////////////////////////////\n\t\n\t// Loading an image from a URL, tracing when loaded,\n\t// then executing callback with the scaled svg string as argument\n\tthis.imageToSVG = function( url, callback, options ){\n\t\toptions = _this.checkoptions(options);\n\t\t// loading image, tracing and callback\n\t\t_this.loadImage(\n\t\t\turl,\n\t\t\tfunction(canvas){\n\t\t\t\tcallback(\n\t\t\t\t\t_this.imagedataToSVG( _this.getImgdata(canvas), options )\n\t\t\t\t);\n\t\t\t},\n\t\t\toptions\n\t\t);\n\t},// End of imageToSVG()\n\t\n\t// Tracing imagedata, then returning the scaled svg string\n\tthis.imagedataToSVG = function( imgd, options ){\n\t\toptions = _this.checkoptions(options);\n\t\t// tracing imagedata\n\t\tvar td = _this.imagedataToTracedata( imgd, options );\n\t\t// returning SVG string\n\t\treturn _this.getsvgstring(td, options);\n\t},// End of imagedataToSVG()\n\t\n\t// Loading an image from a URL, tracing when loaded,\n\t// then executing callback with tracedata as argument\n\tthis.imageToTracedata = function( url, callback, options ){\n\t\toptions = _this.checkoptions(options);\n\t\t// loading image, tracing and callback\n\t\t_this.loadImage(\n\t\t\t\turl,\n\t\t\t\tfunction(canvas){\n\t\t\t\t\tcallback(\n\t\t\t\t\t\t_this.imagedataToTracedata( _this.getImgdata(canvas), options )\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\toptions\n\t\t);\n\t},// End of imageToTracedata()\n\t\n\t// Tracing imagedata, then returning tracedata (layers with paths, palette, image size)\n\tthis.imagedataToTracedata = function( imgd, options ){\n\t\toptions = _this.checkoptions(options);\n\t\t\n\t\t// 1. Color quantization\n\t\tvar ii = _this.colorquantization( imgd, options );\n\t\t\n\t\tif(options.layering === 0){// Sequential layering\n\t\t\t\n\t\t\t// create tracedata object\n\t\t\tvar tracedata = {\n\t\t\t\tlayers : [],\n\t\t\t\tpalette : ii.palette,\n\t\t\t\twidth : ii.array[0].length-2,\n\t\t\t\theight : ii.array.length-2\n\t\t\t};\n\t\t\t\n\t\t\t// Loop to trace each color layer\n\t\t\tfor(var colornum=0; colornum<ii.palette.length; colornum++){\n\t\t\t\t\n\t\t\t\t// layeringstep -> pathscan -> internodes -> batchtracepaths\n\t\t\t\tvar tracedlayer =\n\t\t\t\t\t_this.batchtracepaths(\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t_this.internodes(\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t_this.pathscan(\n\t\t\t\t\t\t\t\t_this.layeringstep( ii, colornum ),\n\t\t\t\t\t\t\t\toptions.pathomit\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\toptions\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t),\n\t\t\t\t\t\t\n\t\t\t\t\t\toptions.ltres,\n\t\t\t\t\t\toptions.qtres\n\t\t\t\t\t\t\n\t\t\t\t\t);\n\t\t\t\t\n\t\t\t\t// adding traced layer\n\t\t\t\ttracedata.layers.push(tracedlayer);\n\t\t\t\t\n\t\t\t}// End of color loop\n\t\t\t\n\t\t}else{// Parallel layering\n\t\t\t// 2. Layer separation and edge detection\n\t\t\tvar ls = _this.layering( ii );\n\t\t\t\n\t\t\t// Optional edge node visualization\n\t\t\tif(options.layercontainerid){ _this.drawLayers( ls, _this.specpalette, options.scale, options.layercontainerid ); }\n\t\t\t\n\t\t\t// 3. Batch pathscan\n\t\t\tvar bps = _this.batchpathscan( ls, options.pathomit );\n\t\t\t\n\t\t\t// 4. Batch interpollation\n\t\t\tvar bis = _this.batchinternodes( bps, options );\n\t\t\t\n\t\t\t// 5. Batch tracing and creating tracedata object\n\t\t\tvar tracedata = {\n\t\t\t\tlayers : _this.batchtracelayers( bis, options.ltres, options.qtres ),\n\t\t\t\tpalette : ii.palette,\n\t\t\t\twidth : imgd.width,\n\t\t\t\theight : imgd.height\n\t\t\t};\n\t\t\t\n\t\t}// End of parallel layering\n\t\t\n\t\t// return tracedata\n\t\treturn tracedata;\n\t\t\n\t},// End of imagedataToTracedata()\n\t\n\tthis.optionpresets = {\n\t\t'default': {\n\t\t\t\n\t\t\t// Tracing\n\t\t\tcorsenabled : false,\n\t\t\tltres : 1,\n\t\t\tqtres : 1,\n\t\t\tpathomit : 8,\n\t\t\trightangleenhance : true,\n\t\t\t\n\t\t\t// Color quantization\n\t\t\tcolorsampling : 2,\n\t\t\tnumberofcolors : 16,\n\t\t\tmincolorratio : 0,\n\t\t\tcolorquantcycles : 3,\n\t\t\t\n\t\t\t// Layering method\n\t\t\tlayering : 0,\n\t\t\t\n\t\t\t// SVG rendering\n\t\t\tstrokewidth : 1,\n\t\t\tlinefilter : false,\n\t\t\tscale : 1,\n\t\t\troundcoords : 1,\n\t\t\tviewbox : false,\n\t\t\tdesc : false,\n\t\t\tlcpr : 0,\n\t\t\tqcpr : 0,\n\t\t\t\n\t\t\t// Blur\n\t\t\tblurradius : 0,\n\t\t\tblurdelta : 20\n\t\t\t\n\t\t},\n\t\t'posterized1': { colorsampling:0, numberofcolors:2 },\n\t\t'posterized2': { numberofcolors:4, blurradius:5 },\n\t\t'curvy': { ltres:0.01, linefilter:true, rightangleenhance:false },\n\t\t'sharp': { qtres:0.01, linefilter:false },\n\t\t'detailed': { pathomit:0, roundcoords:2, ltres:0.5, qtres:0.5, numberofcolors:64 },\n\t\t'smoothed': { blurradius:5, blurdelta: 64 },\n\t\t'grayscale': { colorsampling:0, colorquantcycles:1, numberofcolors:7 },\n\t\t'fixedpalette': { colorsampling:0, colorquantcycles:1, numberofcolors:27 },\n\t\t'randomsampling1': { colorsampling:1, numberofcolors:8 },\n\t\t'randomsampling2': { colorsampling:1, numberofcolors:64 },\n\t\t'artistic1': { colorsampling:0, colorquantcycles:1, pathomit:0, blurradius:5, blurdelta: 64, ltres:0.01, linefilter:true, numberofcolors:16, strokewidth:2 },\n\t\t'artistic2': { qtres:0.01, colorsampling:0, colorquantcycles:1, numberofcolors:4, strokewidth:0 },\n\t\t'artistic3': { qtres:10, ltres:10, numberofcolors:8 },\n\t\t'artistic4': { qtres:10, ltres:10, numberofcolors:64, blurradius:5, blurdelta: 256, strokewidth:2 },\n\t\t'posterized3': { ltres: 1, qtres: 1, pathomit: 20, rightangleenhance: true, colorsampling: 0, numberofcolors: 3,\n\t\t\tmincolorratio: 0, colorquantcycles: 3, blurradius: 3, blurdelta: 20, strokewidth: 0, linefilter: false,\n\t\t\troundcoords: 1, pal: [ { r: 0, g: 0, b: 100, a: 255 }, { r: 255, g: 255, b: 255, a: 255 } ] }\n\t},// End of optionpresets\n\t\n\t// creating options object, setting defaults for missing values\n\tthis.checkoptions = function(options){\n\t\toptions = options || {};\n\t\t// Option preset\n\t\tif(typeof options === 'string'){\n\t\t\toptions = options.toLowerCase();\n\t\t\tif( _this.optionpresets[options] ){ options = _this.optionpresets[options]; }else{ options = {}; }\n\t\t}\n\t\t// Defaults\n\t\tvar ok = Object.keys(_this.optionpresets['default']);\n\t\tfor(var k=0; k<ok.length; k++){\n\t\t\tif(!options.hasOwnProperty(ok[k])){ options[ok[k]] = _this.optionpresets['default'][ok[k]]; }\n\t\t}\n\t\t// options.pal is not defined here, the custom palette should be added externally: options.pal = [ { 'r':0, 'g':0, 'b':0, 'a':255 }, {...}, ... ];\n\t\t// options.layercontainerid is not defined here, can be added externally: options.layercontainerid = 'mydiv'; ... <div id=\"mydiv\"></div>\n\t\treturn options;\n\t},// End of checkoptions()\n\t\n\t////////////////////////////////////////////////////////////\n\t//\n\t//  Vectorizing functions\n\t//\n\t////////////////////////////////////////////////////////////\n\t\n\t// 1. Color quantization\n\t// Using a form of k-means clustering repeatead options.colorquantcycles times. http://en.wikipedia.org/wiki/Color_quantization\n\tthis.colorquantization = function( imgd, options ){\n\t\tvar arr = [], idx=0, cd,cdl,ci, paletteacc = [], pixelnum = imgd.width * imgd.height, i, j, k, cnt, palette;\n\t\t\n\t\t// imgd.data must be RGBA, not just RGB\n\t\tif( imgd.data.length < pixelnum * 4 ){\n\t\t\tvar newimgddata = new Uint8ClampedArray(pixelnum * 4);\n\t\t\tfor(var pxcnt = 0; pxcnt < pixelnum ; pxcnt++){\n\t\t\t\tnewimgddata[pxcnt*4  ] = imgd.data[pxcnt*3  ];\n\t\t\t\tnewimgddata[pxcnt*4+1] = imgd.data[pxcnt*3+1];\n\t\t\t\tnewimgddata[pxcnt*4+2] = imgd.data[pxcnt*3+2];\n\t\t\t\tnewimgddata[pxcnt*4+3] = 255;\n\t\t\t}\n\t\t\timgd.data = newimgddata;\n\t\t}// End of RGBA imgd.data check\n\t\t\n\t\t// Filling arr (color index array) with -1\n\t\tfor( j=0; j<imgd.height+2; j++ ){ arr[j]=[]; for(i=0; i<imgd.width+2 ; i++){ arr[j][i] = -1; } }\n\t\t\n\t\t// Use custom palette if pal is defined or sample / generate custom length palette\n\t\tif(options.pal){\n\t\t\tpalette = options.pal;\n\t\t}else if(options.colorsampling === 0){\n\t\t\tpalette = _this.generatepalette(options.numberofcolors);\n\t\t}else if(options.colorsampling === 1){\n\t\t\tpalette = _this.samplepalette( options.numberofcolors, imgd );\n\t\t}else{\n\t\t\tpalette = _this.samplepalette2( options.numberofcolors, imgd );\n\t\t}\n\t\t\n\t\t// Selective Gaussian blur preprocessing\n\t\tif( options.blurradius > 0 ){ imgd = _this.blur( imgd, options.blurradius, options.blurdelta ); }\n\t\t\n\t\t// Repeat clustering step options.colorquantcycles times\n\t\tfor( cnt=0; cnt < options.colorquantcycles; cnt++ ){\n\t\t\t\n\t\t\t// Average colors from the second iteration\n\t\t\tif(cnt>0){\n\t\t\t\t// averaging paletteacc for palette\n\t\t\t\tfor( k=0; k < palette.length; k++ ){\n\t\t\t\t\t\n\t\t\t\t\t// averaging\n\t\t\t\t\tif( paletteacc[k].n > 0 ){\n\t\t\t\t\t\tpalette[k] = {  r: Math.floor( paletteacc[k].r / paletteacc[k].n ),\n\t\t\t\t\t\t\t\t\t\tg: Math.floor( paletteacc[k].g / paletteacc[k].n ),\n\t\t\t\t\t\t\t\t\t\tb: Math.floor( paletteacc[k].b / paletteacc[k].n ),\n\t\t\t\t\t\t\t\t\t\ta:  Math.floor( paletteacc[k].a / paletteacc[k].n ) };\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Randomizing a color, if there are too few pixels and there will be a new cycle\n\t\t\t\t\tif( ( paletteacc[k].n/pixelnum < options.mincolorratio ) && ( cnt < options.colorquantcycles-1 ) ){\n\t\t\t\t\t\tpalette[k] = {  r: Math.floor(Math.random()*255),\n\t\t\t\t\t\t\t\t\t\tg: Math.floor(Math.random()*255),\n\t\t\t\t\t\t\t\t\t\tb: Math.floor(Math.random()*255),\n\t\t\t\t\t\t\t\t\t\ta: Math.floor(Math.random()*255) };\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}// End of palette loop\n\t\t\t}// End of Average colors from the second iteration\n\t\t\t\n\t\t\t// Reseting palette accumulator for averaging\n\t\t\tfor( i=0; i < palette.length; i++ ){ paletteacc[i] = { r:0, g:0, b:0, a:0, n:0 }; }\n\t\t\t\n\t\t\t// loop through all pixels\n\t\t\tfor( j=0; j < imgd.height; j++ ){\n\t\t\t\tfor( i=0; i < imgd.width; i++ ){\n\t\t\t\t\t\n\t\t\t\t\t// pixel index\n\t\t\t\t\tidx = (j*imgd.width+i)*4;\n\t\t\t\t\t\n\t\t\t\t\t// find closest color from palette by measuring (rectilinear) color distance between this pixel and all palette colors\n\t\t\t\t\tci=0; cdl = 1024; // 4 * 256 is the maximum RGBA distance\n\t\t\t\t\tfor( k=0; k<palette.length; k++ ){\n\t\t\t\t\t\t\n\t\t\t\t\t\t// In my experience, https://en.wikipedia.org/wiki/Rectilinear_distance works better than https://en.wikipedia.org/wiki/Euclidean_distance\n\t\t\t\t\t\tcd = Math.abs(palette[k].r-imgd.data[idx]) + Math.abs(palette[k].g-imgd.data[idx+1]) + Math.abs(palette[k].b-imgd.data[idx+2]) + Math.abs(palette[k].a-imgd.data[idx+3]);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Remember this color if this is the closest yet\n\t\t\t\t\t\tif(cd<cdl){ cdl = cd; ci = k; }\n\t\t\t\t\t\t\n\t\t\t\t\t}// End of palette loop\n\t\t\t\t\t\n\t\t\t\t\t// add to palettacc\n\t\t\t\t\tpaletteacc[ci].r += imgd.data[idx  ];\n\t\t\t\t\tpaletteacc[ci].g += imgd.data[idx+1];\n\t\t\t\t\tpaletteacc[ci].b += imgd.data[idx+2];\n\t\t\t\t\tpaletteacc[ci].a += imgd.data[idx+3];\n\t\t\t\t\tpaletteacc[ci].n++;\n\t\t\t\t\t\n\t\t\t\t\t// update the indexed color array\n\t\t\t\t\tarr[j+1][i+1] = ci;\n\t\t\t\t\t\n\t\t\t\t}// End of i loop\n\t\t\t}// End of j loop\n\t\t\t\n\t\t}// End of Repeat clustering step options.colorquantcycles times\n\t\t\n\t\treturn { array:arr, palette:palette };\n\t\t\n\t},// End of colorquantization()\n\t\n\t// Sampling a palette from imagedata\n\tthis.samplepalette = function( numberofcolors, imgd ){\n\t\tvar idx, palette=[];\n\t\tfor(var i=0; i<numberofcolors; i++){\n\t\t\tidx = Math.floor( Math.random() * imgd.data.length / 4 ) * 4;\n\t\t\tpalette.push({ r:imgd.data[idx  ], g:imgd.data[idx+1], b:imgd.data[idx+2], a:imgd.data[idx+3] });\n\t\t}\n\t\treturn palette;\n\t},// End of samplepalette()\n\t\n\t// Deterministic sampling a palette from imagedata: rectangular grid\n\tthis.samplepalette2 = function( numberofcolors, imgd ){\n\t\tvar idx, palette=[], ni = Math.ceil(Math.sqrt(numberofcolors)), nj = Math.ceil(numberofcolors/ni),\n\t\t\tvx = imgd.width / (ni+1), vy = imgd.height / (nj+1);\n\t\tfor(var j=0; j<nj; j++){\n\t\t\tfor(var i=0; i<ni; i++){\n\t\t\t\tif(palette.length === numberofcolors){\n\t\t\t\t\tbreak;\n\t\t\t\t}else{\n\t\t\t\t\tidx = Math.floor( ((j+1)*vy) * imgd.width + ((i+1)*vx) ) * 4;\n\t\t\t\t\tpalette.push( { r:imgd.data[idx], g:imgd.data[idx+1], b:imgd.data[idx+2], a:imgd.data[idx+3] } );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn palette;\n\t},// End of samplepalette2()\n\t\n\t// Generating a palette with numberofcolors\n\tthis.generatepalette = function(numberofcolors){\n\t\tvar palette = [], rcnt, gcnt, bcnt;\n\t\tif(numberofcolors<8){\n\t\t\t\n\t\t\t// Grayscale\n\t\t\tvar graystep = Math.floor(255/(numberofcolors-1));\n\t\t\tfor(var i=0; i<numberofcolors; i++){ palette.push({ r:i*graystep, g:i*graystep, b:i*graystep, a:255 }); }\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\t// RGB color cube\n\t\t\tvar colorqnum = Math.floor(Math.pow(numberofcolors, 1/3)), // Number of points on each edge on the RGB color cube\n\t\t\t\tcolorstep = Math.floor(255/(colorqnum-1)), // distance between points\n\t\t\t\trndnum = numberofcolors - colorqnum*colorqnum*colorqnum; // number of random colors\n\t\t\t\n\t\t\tfor(rcnt=0; rcnt<colorqnum; rcnt++){\n\t\t\t\tfor(gcnt=0; gcnt<colorqnum; gcnt++){\n\t\t\t\t\tfor(bcnt=0; bcnt<colorqnum; bcnt++){\n\t\t\t\t\t\tpalette.push( { r:rcnt*colorstep, g:gcnt*colorstep, b:bcnt*colorstep, a:255 } );\n\t\t\t\t\t}// End of blue loop\n\t\t\t\t}// End of green loop\n\t\t\t}// End of red loop\n\t\t\t\n\t\t\t// Rest is random\n\t\t\tfor(rcnt=0; rcnt<rndnum; rcnt++){ palette.push({ r:Math.floor(Math.random()*255), g:Math.floor(Math.random()*255), b:Math.floor(Math.random()*255), a:Math.floor(Math.random()*255) }); }\n\n\t\t}// End of numberofcolors check\n\t\t\n\t\treturn palette;\n\t},// End of generatepalette()\n\t\t\n\t// 2. Layer separation and edge detection\n\t// Edge node types ( : this layer or 1; : not this layer or 0 )\n\t// 12                                \n\t// 48                                \n\t//     0   1   2   3   4   5   6   7   8   9   10  11  12  13  14  15\n\tthis.layering = function(ii){\n\t\t// Creating layers for each indexed color in arr\n\t\tvar layers = [], val=0, ah = ii.array.length, aw = ii.array[0].length, n1,n2,n3,n4,n5,n6,n7,n8, i, j, k;\n\t\t\n\t\t// Create layers\n\t\tfor(k=0; k<ii.palette.length; k++){\n\t\t\tlayers[k] = [];\n\t\t\tfor(j=0; j<ah; j++){\n\t\t\t\tlayers[k][j] = [];\n\t\t\t\tfor(i=0; i<aw; i++){\n\t\t\t\t\tlayers[k][j][i]=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Looping through all pixels and calculating edge node type\n\t\tfor(j=1; j<ah-1; j++){\n\t\t\tfor(i=1; i<aw-1; i++){\n\t\t\t\t\n\t\t\t\t// This pixel's indexed color\n\t\t\t\tval = ii.array[j][i];\n\t\t\t\t\n\t\t\t\t// Are neighbor pixel colors the same?\n\t\t\t\tn1 = ii.array[j-1][i-1]===val ? 1 : 0;\n\t\t\t\tn2 = ii.array[j-1][i  ]===val ? 1 : 0;\n\t\t\t\tn3 = ii.array[j-1][i+1]===val ? 1 : 0;\n\t\t\t\tn4 = ii.array[j  ][i-1]===val ? 1 : 0;\n\t\t\t\tn5 = ii.array[j  ][i+1]===val ? 1 : 0;\n\t\t\t\tn6 = ii.array[j+1][i-1]===val ? 1 : 0;\n\t\t\t\tn7 = ii.array[j+1][i  ]===val ? 1 : 0;\n\t\t\t\tn8 = ii.array[j+1][i+1]===val ? 1 : 0;\n\t\t\t\t\n\t\t\t\t// this pixel's type and looking back on previous pixels\n\t\t\t\tlayers[val][j+1][i+1] = 1 + n5 * 2 + n8 * 4 + n7 * 8 ;\n\t\t\t\tif(!n4){ layers[val][j+1][i  ] = 0 + 2 + n7 * 4 + n6 * 8 ; }\n\t\t\t\tif(!n2){ layers[val][j  ][i+1] = 0 + n3*2 + n5 * 4 + 8 ; }\n\t\t\t\tif(!n1){ layers[val][j  ][i  ] = 0 + n2*2 + 4 + n4 * 8 ; }\n\t\t\t\t\n\t\t\t}// End of i loop\n\t\t}// End of j loop\n\t\t\n\t\treturn layers;\n\t},// End of layering()\n\t\n\t// 2. Layer separation and edge detection\n\t// Edge node types ( : this layer or 1; : not this layer or 0 )\n\t// 12                                \n\t// 48                                \n\t//     0   1   2   3   4   5   6   7   8   9   10  11  12  13  14  15\n\tthis.layeringstep = function(ii,cnum){\n\t\t// Creating layers for each indexed color in arr\n\t\tvar layer = [], val=0, ah = ii.array.length, aw = ii.array[0].length, n1,n2,n3,n4,n5,n6,n7,n8, i, j, k;\n\t\t\n\t\t// Create layer\n\t\tfor(j=0; j<ah; j++){\n\t\t\tlayer[j] = [];\n\t\t\tfor(i=0; i<aw; i++){\n\t\t\t\tlayer[j][i]=0;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Looping through all pixels and calculating edge node type\n\t\tfor(j=1; j<ah; j++){\n\t\t\tfor(i=1; i<aw; i++){\n\t\t\t\tlayer[j][i] =\n\t\t\t\t\t( ii.array[j-1][i-1]===cnum ? 1 : 0 ) +\n\t\t\t\t\t( ii.array[j-1][i]===cnum ? 2 : 0 ) +\n\t\t\t\t\t( ii.array[j][i-1]===cnum ? 8 : 0 ) +\n\t\t\t\t\t( ii.array[j][i]===cnum ? 4 : 0 )\n\t\t\t\t;\n\t\t\t}// End of i loop\n\t\t}// End of j loop\n\t\t\t\n\t\treturn layer;\n\t},// End of layeringstep()\n\t\n\t// Point in polygon test\n\tthis.pointinpoly = function( p, pa ){\n\t\tvar isin=false;\n\n\t\tfor(var i=0,j=pa.length-1; i<pa.length; j=i++){\n\t\t\tisin =\n\t\t\t\t( ((pa[i].y > p.y) !== (pa[j].y > p.y)) && (p.x < (pa[j].x - pa[i].x) * (p.y - pa[i].y) / (pa[j].y - pa[i].y) + pa[i].x) )\n\t\t\t\t? !isin : isin;\n\t\t}\n\n\t\treturn isin;\n\t},\n\t\n\t// Lookup tables for pathscan\n\t// pathscan_combined_lookup[ arr[py][px] ][ dir ] = [nextarrpypx, nextdir, deltapx, deltapy];\n\tthis.pathscan_combined_lookup = [\n\t\t[[-1,-1,-1,-1], [-1,-1,-1,-1], [-1,-1,-1,-1], [-1,-1,-1,-1]],// arr[py][px]===0 is invalid\n\t\t[[ 0, 1, 0,-1], [-1,-1,-1,-1], [-1,-1,-1,-1], [ 0, 2,-1, 0]],\n\t\t[[-1,-1,-1,-1], [-1,-1,-1,-1], [ 0, 1, 0,-1], [ 0, 0, 1, 0]],\n\t\t[[ 0, 0, 1, 0], [-1,-1,-1,-1], [ 0, 2,-1, 0], [-1,-1,-1,-1]],\n\t\t\n\t\t[[-1,-1,-1,-1], [ 0, 0, 1, 0], [ 0, 3, 0, 1], [-1,-1,-1,-1]],\n\t\t[[13, 3, 0, 1], [13, 2,-1, 0], [ 7, 1, 0,-1], [ 7, 0, 1, 0]],\n\t\t[[-1,-1,-1,-1], [ 0, 1, 0,-1], [-1,-1,-1,-1], [ 0, 3, 0, 1]],\n\t\t[[ 0, 3, 0, 1], [ 0, 2,-1, 0], [-1,-1,-1,-1], [-1,-1,-1,-1]],\n\t\t\n\t\t[[ 0, 3, 0, 1], [ 0, 2,-1, 0], [-1,-1,-1,-1], [-1,-1,-1,-1]],\n\t\t[[-1,-1,-1,-1], [ 0, 1, 0,-1], [-1,-1,-1,-1], [ 0, 3, 0, 1]],\n\t\t[[11, 1, 0,-1], [14, 0, 1, 0], [14, 3, 0, 1], [11, 2,-1, 0]],\n\t\t[[-1,-1,-1,-1], [ 0, 0, 1, 0], [ 0, 3, 0, 1], [-1,-1,-1,-1]],\n\t\t\n\t\t[[ 0, 0, 1, 0], [-1,-1,-1,-1], [ 0, 2,-1, 0], [-1,-1,-1,-1]],\n\t\t[[-1,-1,-1,-1], [-1,-1,-1,-1], [ 0, 1, 0,-1], [ 0, 0, 1, 0]],\n\t\t[[ 0, 1, 0,-1], [-1,-1,-1,-1], [-1,-1,-1,-1], [ 0, 2,-1, 0]],\n\t\t[[-1,-1,-1,-1], [-1,-1,-1,-1], [-1,-1,-1,-1], [-1,-1,-1,-1]]// arr[py][px]===15 is invalid\n\t],\n\n\t// 3. Walking through an edge node array, discarding edge node types 0 and 15 and creating paths from the rest.\n\t// Walk directions (dir): 0 > ; 1 ^ ; 2 < ; 3 v \n\tthis.pathscan = function( arr, pathomit ){\n\t\tvar paths=[], pacnt=0, pcnt=0, px=0, py=0, w = arr[0].length, h = arr.length,\n\t\t\tdir=0, pathfinished=true, holepath=false, lookuprow;\n\t\t\n\t\tfor(var j=0; j<h; j++){\n\t\t\tfor(var i=0; i<w; i++){\n\t\t\t\tif( (arr[j][i] == 4) || ( arr[j][i] == 11) ){ // Other values are not valid\n\t\t\t\t\t\n\t\t\t\t\t// Init\n\t\t\t\t\tpx = i; py = j;\n\t\t\t\t\tpaths[pacnt] = {};\n\t\t\t\t\tpaths[pacnt].points = [];\n\t\t\t\t\tpaths[pacnt].boundingbox = [px,py,px,py];\n\t\t\t\t\tpaths[pacnt].holechildren = [];\n\t\t\t\t\tpathfinished = false;\n\t\t\t\t\tpcnt=0;\n\t\t\t\t\tholepath = (arr[j][i]==11);\n\t\t\t\t\tdir = 1;\n\n\t\t\t\t\t// Path points loop\n\t\t\t\t\twhile(!pathfinished){\n\t\t\t\t\t\t\n\t\t\t\t\t\t// New path point\n\t\t\t\t\t\tpaths[pacnt].points[pcnt] = {};\n\t\t\t\t\t\tpaths[pacnt].points[pcnt].x = px-1;\n\t\t\t\t\t\tpaths[pacnt].points[pcnt].y = py-1;\n\t\t\t\t\t\tpaths[pacnt].points[pcnt].t = arr[py][px];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Bounding box\n\t\t\t\t\t\tif( (px-1) < paths[pacnt].boundingbox[0] ){ paths[pacnt].boundingbox[0] = px-1; }\n\t\t\t\t\t\tif( (px-1) > paths[pacnt].boundingbox[2] ){ paths[pacnt].boundingbox[2] = px-1; }\n\t\t\t\t\t\tif( (py-1) < paths[pacnt].boundingbox[1] ){ paths[pacnt].boundingbox[1] = py-1; }\n\t\t\t\t\t\tif( (py-1) > paths[pacnt].boundingbox[3] ){ paths[pacnt].boundingbox[3] = py-1; }\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Next: look up the replacement, direction and coordinate changes = clear this cell, turn if required, walk forward\n\t\t\t\t\t\tlookuprow = _this.pathscan_combined_lookup[ arr[py][px] ][ dir ];\n\t\t\t\t\t\tarr[py][px] = lookuprow[0]; dir = lookuprow[1]; px += lookuprow[2]; py += lookuprow[3];\n\n\t\t\t\t\t\t// Close path\n\t\t\t\t\t\tif( (px-1 === paths[pacnt].points[0].x ) && ( py-1 === paths[pacnt].points[0].y ) ){\n\t\t\t\t\t\t\tpathfinished = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Discarding paths shorter than pathomit\n\t\t\t\t\t\t\tif( paths[pacnt].points.length < pathomit ){\n\t\t\t\t\t\t\t\tpaths.pop();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tpaths[pacnt].isholepath = holepath ? true : false;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// Finding the parent shape for this hole\n\t\t\t\t\t\t\t\tif(holepath){\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tvar parentidx = 0, parentbbox = [-1,-1,w+1,h+1];\n\t\t\t\t\t\t\t\t\tfor(var parentcnt=0; parentcnt < pacnt; parentcnt++){\n\t\t\t\t\t\t\t\t\t\tif( (!paths[parentcnt].isholepath) &&\n\t\t\t\t\t\t\t\t\t\t\t_this.boundingboxincludes( paths[parentcnt].boundingbox , paths[pacnt].boundingbox ) &&\n\t\t\t\t\t\t\t\t\t\t\t_this.boundingboxincludes( parentbbox , paths[parentcnt].boundingbox ) &&\n\t\t\t\t\t\t\t\t\t\t\t_this.pointinpoly( paths[pacnt].points[0], paths[parentcnt].points )\n\t\t\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\t\t\tparentidx = parentcnt;\n\t\t\t\t\t\t\t\t\t\t\tparentbbox = paths[parentcnt].boundingbox;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tpaths[parentidx].holechildren.push( pacnt );\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}// End of holepath parent finding\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tpacnt++;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}// End of Close path\n\t\t\t\t\t\t\n\t\t\t\t\t\tpcnt++;\n\t\t\t\t\t\t\n\t\t\t\t\t}// End of Path points loop\n\t\t\t\t\t\n\t\t\t\t}// End of Follow path\n\t\t\t\t\n\t\t\t}// End of i loop\n\t\t}// End of j loop\n\t\t\n\t\treturn paths;\n\t},// End of pathscan()\n\t\n\tthis.boundingboxincludes = function( parentbbox, childbbox ){\n\t\treturn ( ( parentbbox[0] < childbbox[0] ) && ( parentbbox[1] < childbbox[1] ) && ( parentbbox[2] > childbbox[2] ) && ( parentbbox[3] > childbbox[3] ) );\n\t},// End of boundingboxincludes()\n\t\n\t// 3. Batch pathscan\n\tthis.batchpathscan = function( layers, pathomit ){\n\t\tvar bpaths = [];\n\t\tfor(var k in layers){\n\t\t\tif(!layers.hasOwnProperty(k)){ continue; }\n\t\t\tbpaths[k] = _this.pathscan( layers[k], pathomit );\n\t\t}\n\t\treturn bpaths;\n\t},\n\t\n\t// 4. interpollating between path points for nodes with 8 directions ( East, SouthEast, S, SW, W, NW, N, NE )\n\tthis.internodes = function( paths, options ){\n\t\tvar ins = [], palen=0, nextidx=0, nextidx2=0, previdx=0, previdx2=0, pacnt, pcnt;\n\t\t\n\t\t// paths loop\n\t\tfor(pacnt=0; pacnt<paths.length; pacnt++){\n\t\t\t\n\t\t\tins[pacnt] = {};\n\t\t\tins[pacnt].points = [];\n\t\t\tins[pacnt].boundingbox = paths[pacnt].boundingbox;\n\t\t\tins[pacnt].holechildren = paths[pacnt].holechildren;\n\t\t\tins[pacnt].isholepath = paths[pacnt].isholepath;\n\t\t\tpalen = paths[pacnt].points.length;\n\t\t\t\n\t\t\t// pathpoints loop\n\t\t\tfor(pcnt=0; pcnt<palen; pcnt++){\n\t\t\t\n\t\t\t\t// next and previous point indexes\n\t\t\t\tnextidx = (pcnt+1)%palen; nextidx2 = (pcnt+2)%palen; previdx = (pcnt-1+palen)%palen; previdx2 = (pcnt-2+palen)%palen;\n\t\t\t\t\n\t\t\t\t// right angle enhance\n\t\t\t\tif( options.rightangleenhance && _this.testrightangle( paths[pacnt], previdx2, previdx, pcnt, nextidx, nextidx2 ) ){\n\t\t\t\t\t\n\t\t\t\t\t// Fix previous direction\n\t\t\t\t\tif(ins[pacnt].points.length > 0){\n\t\t\t\t\t\tins[pacnt].points[ ins[pacnt].points.length-1 ].linesegment = _this.getdirection(\n\t\t\t\t\t\t\t\tins[pacnt].points[ ins[pacnt].points.length-1 ].x,\n\t\t\t\t\t\t\t\tins[pacnt].points[ ins[pacnt].points.length-1 ].y,\n\t\t\t\t\t\t\t\tpaths[pacnt].points[pcnt].x,\n\t\t\t\t\t\t\t\tpaths[pacnt].points[pcnt].y\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// This corner point\n\t\t\t\t\tins[pacnt].points.push({\n\t\t\t\t\t\tx : paths[pacnt].points[pcnt].x,\n\t\t\t\t\t\ty : paths[pacnt].points[pcnt].y,\n\t\t\t\t\t\tlinesegment : _this.getdirection(\n\t\t\t\t\t\t\t\tpaths[pacnt].points[pcnt].x,\n\t\t\t\t\t\t\t\tpaths[pacnt].points[pcnt].y,\n\t\t\t\t\t\t\t\t(( paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x ) /2),\n\t\t\t\t\t\t\t\t(( paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y ) /2)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t}// End of right angle enhance\n\t\t\t\t\n\t\t\t\t// interpolate between two path points\n\t\t\t\tins[pacnt].points.push({\n\t\t\t\t\tx : (( paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x ) /2),\n\t\t\t\t\ty : (( paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y ) /2),\n\t\t\t\t\tlinesegment : _this.getdirection(\n\t\t\t\t\t\t\t(( paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x ) /2),\n\t\t\t\t\t\t\t(( paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y ) /2),\n\t\t\t\t\t\t\t(( paths[pacnt].points[nextidx].x + paths[pacnt].points[nextidx2].x ) /2),\n\t\t\t\t\t\t\t(( paths[pacnt].points[nextidx].y + paths[pacnt].points[nextidx2].y ) /2)\n\t\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}// End of pathpoints loop\n\t\t\t\t\t\t\n\t\t}// End of paths loop\n\t\t\n\t\treturn ins;\n\t},// End of internodes()\n\t\n\tthis.testrightangle = function( path, idx1, idx2, idx3, idx4, idx5 ){\n\t\treturn ( (( path.points[idx3].x === path.points[idx1].x) &&\n\t\t\t\t  ( path.points[idx3].x === path.points[idx2].x) &&\n\t\t\t\t  ( path.points[idx3].y === path.points[idx4].y) &&\n\t\t\t\t  ( path.points[idx3].y === path.points[idx5].y)\n\t\t\t\t ) ||\n\t\t\t\t (( path.points[idx3].y === path.points[idx1].y) &&\n\t\t\t\t  ( path.points[idx3].y === path.points[idx2].y) &&\n\t\t\t\t  ( path.points[idx3].x === path.points[idx4].x) &&\n\t\t\t\t  ( path.points[idx3].x === path.points[idx5].x)\n\t\t\t\t )\n\t\t);\n\t},// End of testrightangle()\n\t\n\tthis.getdirection = function( x1, y1, x2, y2 ){\n\t\tvar val = 8;\n\t\tif(x1 < x2){\n\t\t\tif     (y1 < y2){ val = 1; }// SouthEast\n\t\t\telse if(y1 > y2){ val = 7; }// NE\n\t\t\telse            { val = 0; }// E\n\t\t}else if(x1 > x2){\n\t\t\tif     (y1 < y2){ val = 3; }// SW\n\t\t\telse if(y1 > y2){ val = 5; }// NW\n\t\t\telse            { val = 4; }// W\n\t\t}else{\n\t\t\tif     (y1 < y2){ val = 2; }// S\n\t\t\telse if(y1 > y2){ val = 6; }// N\n\t\t\telse            { val = 8; }// center, this should not happen\n\t\t}\n\t\treturn val;\n\t},// End of getdirection()\n\t\n\t// 4. Batch interpollation\n\tthis.batchinternodes = function( bpaths, options ){\n\t\tvar binternodes = [];\n\t\tfor (var k in bpaths) {\n\t\t\tif(!bpaths.hasOwnProperty(k)){ continue; }\n\t\t\tbinternodes[k] = _this.internodes(bpaths[k], options);\n\t\t}\n\t\treturn binternodes;\n\t},\n\t\n\t// 5. tracepath() : recursively trying to fit straight and quadratic spline segments on the 8 direction internode path\n\t\n\t// 5.1. Find sequences of points with only 2 segment types\n\t// 5.2. Fit a straight line on the sequence\n\t// 5.3. If the straight line fails (distance error > ltres), find the point with the biggest error\n\t// 5.4. Fit a quadratic spline through errorpoint (project this to get controlpoint), then measure errors on every point in the sequence\n\t// 5.5. If the spline fails (distance error > qtres), find the point with the biggest error, set splitpoint = fitting point\n\t// 5.6. Split sequence and recursively apply 5.2. - 5.6. to startpoint-splitpoint and splitpoint-endpoint sequences\n\t\n\tthis.tracepath = function( path, ltres, qtres ){\n\t\tvar pcnt=0, segtype1, segtype2, seqend, smp = {};\n\t\tsmp.segments = [];\n\t\tsmp.boundingbox = path.boundingbox;\n\t\tsmp.holechildren = path.holechildren;\n\t\tsmp.isholepath = path.isholepath;\n\t\t\n\t\twhile(pcnt < path.points.length){\n\t\t\t// 5.1. Find sequences of points with only 2 segment types\n\t\t\tsegtype1 = path.points[pcnt].linesegment; segtype2 = -1; seqend=pcnt+1;\n\t\t\twhile(\n\t\t\t\t((path.points[seqend].linesegment === segtype1) || (path.points[seqend].linesegment === segtype2) || (segtype2 === -1))\n\t\t\t\t&& (seqend < path.points.length-1) ){\n\t\t\t\t\n\t\t\t\tif((path.points[seqend].linesegment!==segtype1) && (segtype2===-1)){ segtype2 = path.points[seqend].linesegment; }\n\t\t\t\tseqend++;\n\t\t\t\t\n\t\t\t}\n\t\t\tif(seqend === path.points.length-1){ seqend = 0; }\n\n\t\t\t// 5.2. - 5.6. Split sequence and recursively apply 5.2. - 5.6. to startpoint-splitpoint and splitpoint-endpoint sequences\n\t\t\tsmp.segments = smp.segments.concat( _this.fitseq(path, ltres, qtres, pcnt, seqend) );\n\t\t\t\n\t\t\t// forward pcnt;\n\t\t\tif(seqend>0){ pcnt = seqend; }else{ pcnt = path.points.length; }\n\t\t\t\n\t\t}// End of pcnt loop\n\t\t\n\t\treturn smp;\n\t},// End of tracepath()\n\t\t\n\t// 5.2. - 5.6. recursively fitting a straight or quadratic line segment on this sequence of path nodes,\n\t// called from tracepath()\n\tthis.fitseq = function( path, ltres, qtres, seqstart, seqend ){\n\t\t// return if invalid seqend\n\t\tif( (seqend>path.points.length) || (seqend<0) ){ return []; }\n\t\t// variables\n\t\tvar errorpoint=seqstart, errorval=0, curvepass=true, px, py, dist2;\n\t\tvar tl = (seqend-seqstart); if(tl<0){ tl += path.points.length; }\n\t\tvar vx = (path.points[seqend].x-path.points[seqstart].x) / tl,\n\t\t\tvy = (path.points[seqend].y-path.points[seqstart].y) / tl;\n\t\t\n\t\t// 5.2. Fit a straight line on the sequence\n\t\tvar pcnt = (seqstart+1) % path.points.length, pl;\n\t\twhile(pcnt != seqend){\n\t\t\tpl = pcnt-seqstart; if(pl<0){ pl += path.points.length; }\n\t\t\tpx = path.points[seqstart].x + vx * pl; py = path.points[seqstart].y + vy * pl;\n\t\t\tdist2 = (path.points[pcnt].x-px)*(path.points[pcnt].x-px) + (path.points[pcnt].y-py)*(path.points[pcnt].y-py);\n\t\t\tif(dist2>ltres){curvepass=false;}\n\t\t\tif(dist2>errorval){ errorpoint=pcnt; errorval=dist2; }\n\t\t\tpcnt = (pcnt+1)%path.points.length;\n\t\t}\n\t\t// return straight line if fits\n\t\tif(curvepass){ return [{ type:'L', x1:path.points[seqstart].x, y1:path.points[seqstart].y, x2:path.points[seqend].x, y2:path.points[seqend].y }]; }\n\t\t\n\t\t// 5.3. If the straight line fails (distance error>ltres), find the point with the biggest error\n\t\tvar fitpoint = errorpoint; curvepass = true; errorval = 0;\n\t\t\n\t\t// 5.4. Fit a quadratic spline through this point, measure errors on every point in the sequence\n\t\t// helpers and projecting to get control point\n\t\tvar t=(fitpoint-seqstart)/tl, t1=(1-t)*(1-t), t2=2*(1-t)*t, t3=t*t;\n\t\tvar cpx = (t1*path.points[seqstart].x + t3*path.points[seqend].x - path.points[fitpoint].x)/-t2 ,\n\t\t\tcpy = (t1*path.points[seqstart].y + t3*path.points[seqend].y - path.points[fitpoint].y)/-t2 ;\n\t\t\n\t\t// Check every point\n\t\tpcnt = seqstart+1;\n\t\twhile(pcnt != seqend){\n\t\t\tt=(pcnt-seqstart)/tl; t1=(1-t)*(1-t); t2=2*(1-t)*t; t3=t*t;\n\t\t\tpx = t1 * path.points[seqstart].x + t2 * cpx + t3 * path.points[seqend].x;\n\t\t\tpy = t1 * path.points[seqstart].y + t2 * cpy + t3 * path.points[seqend].y;\n\t\t\t\n\t\t\tdist2 = (path.points[pcnt].x-px)*(path.points[pcnt].x-px) + (path.points[pcnt].y-py)*(path.points[pcnt].y-py);\n\t\t\t\n\t\t\tif(dist2>qtres){curvepass=false;}\n\t\t\tif(dist2>errorval){ errorpoint=pcnt; errorval=dist2; }\n\t\t\tpcnt = (pcnt+1)%path.points.length;\n\t\t}\n\t\t// return spline if fits\n\t\tif(curvepass){ return [{ type:'Q', x1:path.points[seqstart].x, y1:path.points[seqstart].y, x2:cpx, y2:cpy, x3:path.points[seqend].x, y3:path.points[seqend].y }]; }\n\t\t// 5.5. If the spline fails (distance error>qtres), find the point with the biggest error\n\t\tvar splitpoint = fitpoint; // Earlier: Math.floor((fitpoint + errorpoint)/2);\n\t\t\n\t\t// 5.6. Split sequence and recursively apply 5.2. - 5.6. to startpoint-splitpoint and splitpoint-endpoint sequences\n\t\treturn _this.fitseq( path, ltres, qtres, seqstart, splitpoint ).concat(\n\t\t\t\t_this.fitseq( path, ltres, qtres, splitpoint, seqend ) );\n\t\t\n\t},// End of fitseq()\n\t\n\t// 5. Batch tracing paths\n\tthis.batchtracepaths = function(internodepaths,ltres,qtres){\n\t\tvar btracedpaths = [];\n\t\tfor(var k in internodepaths){\n\t\t\tif(!internodepaths.hasOwnProperty(k)){ continue; }\n\t\t\tbtracedpaths.push( _this.tracepath(internodepaths[k],ltres,qtres) );\n\t\t}\n\t\treturn btracedpaths;\n\t},\n\t\n\t// 5. Batch tracing layers\n\tthis.batchtracelayers = function(binternodes, ltres, qtres){\n\t\tvar btbis = [];\n\t\tfor(var k in binternodes){\n\t\t\tif(!binternodes.hasOwnProperty(k)){ continue; }\n\t\t\tbtbis[k] = _this.batchtracepaths(binternodes[k], ltres, qtres);\n\t\t}\n\t\treturn btbis;\n\t},\n\t\n\t////////////////////////////////////////////////////////////\n\t//\n\t//  SVG Drawing functions\n\t//\n\t////////////////////////////////////////////////////////////\n\t\n\t// Rounding to given decimals https://stackoverflow.com/questions/11832914/round-to-at-most-2-decimal-places-in-javascript\n\tthis.roundtodec = function(val,places){ return +val.toFixed(places); },\n\t\n\t// Getting SVG path element string from a traced path\n\tthis.svgpathstring = function( tracedata, lnum, pathnum, options ){\n\t\t\n\t\tvar layer = tracedata.layers[lnum], smp = layer[pathnum], str='', pcnt;\n\t\t\n\t\t// Line filter\n\t\tif(options.linefilter && (smp.segments.length < 3)){ return str; }\n\t\t\n\t\t// Starting path element, desc contains layer and path number\n\t\tstr = '<path '+\n\t\t\t( options.desc ? ('desc=\"l '+lnum+' p '+pathnum+'\" ') : '' ) +\n\t\t\t_this.tosvgcolorstr(tracedata.palette[lnum], options) +\n\t\t\t'd=\"';\n\t\t\n\t\t// Creating non-hole path string\n\t\tif( options.roundcoords === -1 ){\n\t\t\tstr += 'M '+ smp.segments[0].x1 * options.scale +' '+ smp.segments[0].y1 * options.scale +' ';\n\t\t\tfor(pcnt=0; pcnt<smp.segments.length; pcnt++){\n\t\t\t\tstr += smp.segments[pcnt].type +' '+ smp.segments[pcnt].x2 * options.scale +' '+ smp.segments[pcnt].y2 * options.scale +' ';\n\t\t\t\tif(smp.segments[pcnt].hasOwnProperty('x3')){\n\t\t\t\t\tstr += smp.segments[pcnt].x3 * options.scale +' '+ smp.segments[pcnt].y3 * options.scale +' ';\n\t\t\t\t}\n\t\t\t}\n\t\t\tstr += 'Z ';\n\t\t}else{\n\t\t\tstr += 'M '+ _this.roundtodec( smp.segments[0].x1 * options.scale, options.roundcoords ) +' '+ _this.roundtodec( smp.segments[0].y1 * options.scale, options.roundcoords ) +' ';\n\t\t\tfor(pcnt=0; pcnt<smp.segments.length; pcnt++){\n\t\t\t\tstr += smp.segments[pcnt].type +' '+ _this.roundtodec( smp.segments[pcnt].x2 * options.scale, options.roundcoords ) +' '+ _this.roundtodec( smp.segments[pcnt].y2 * options.scale, options.roundcoords ) +' ';\n\t\t\t\tif(smp.segments[pcnt].hasOwnProperty('x3')){\n\t\t\t\t\tstr += _this.roundtodec( smp.segments[pcnt].x3 * options.scale, options.roundcoords ) +' '+ _this.roundtodec( smp.segments[pcnt].y3 * options.scale, options.roundcoords ) +' ';\n\t\t\t\t}\n\t\t\t}\n\t\t\tstr += 'Z ';\n\t\t}// End of creating non-hole path string\n\t\t\n\t\t// Hole children\n\t\tfor( var hcnt=0; hcnt < smp.holechildren.length; hcnt++){\n\t\t\tvar hsmp = layer[ smp.holechildren[hcnt] ];\n\t\t\t// Creating hole path string\n\t\t\tif( options.roundcoords === -1 ){\n\t\t\t\t\n\t\t\t\tif(hsmp.segments[ hsmp.segments.length-1 ].hasOwnProperty('x3')){\n\t\t\t\t\tstr += 'M '+ hsmp.segments[ hsmp.segments.length-1 ].x3 * options.scale +' '+ hsmp.segments[ hsmp.segments.length-1 ].y3 * options.scale +' ';\n\t\t\t\t}else{\n\t\t\t\t\tstr += 'M '+ hsmp.segments[ hsmp.segments.length-1 ].x2 * options.scale +' '+ hsmp.segments[ hsmp.segments.length-1 ].y2 * options.scale +' ';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(pcnt = hsmp.segments.length-1; pcnt >= 0; pcnt--){\n\t\t\t\t\tstr += hsmp.segments[pcnt].type +' ';\n\t\t\t\t\tif(hsmp.segments[pcnt].hasOwnProperty('x3')){\n\t\t\t\t\t\tstr += hsmp.segments[pcnt].x2 * options.scale +' '+ hsmp.segments[pcnt].y2 * options.scale +' ';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tstr += hsmp.segments[pcnt].x1 * options.scale +' '+ hsmp.segments[pcnt].y1 * options.scale +' ';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(hsmp.segments[ hsmp.segments.length-1 ].hasOwnProperty('x3')){\n\t\t\t\t\tstr += 'M '+ _this.roundtodec( hsmp.segments[ hsmp.segments.length-1 ].x3 * options.scale ) +' '+ _this.roundtodec( hsmp.segments[ hsmp.segments.length-1 ].y3 * options.scale ) +' ';\n\t\t\t\t}else{\n\t\t\t\t\tstr += 'M '+ _this.roundtodec( hsmp.segments[ hsmp.segments.length-1 ].x2 * options.scale ) +' '+ _this.roundtodec( hsmp.segments[ hsmp.segments.length-1 ].y2 * options.scale ) +' ';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(pcnt = hsmp.segments.length-1; pcnt >= 0; pcnt--){\n\t\t\t\t\tstr += hsmp.segments[pcnt].type +' ';\n\t\t\t\t\tif(hsmp.segments[pcnt].hasOwnProperty('x3')){\n\t\t\t\t\t\tstr += _this.roundtodec( hsmp.segments[pcnt].x2 * options.scale ) +' '+ _this.roundtodec( hsmp.segments[pcnt].y2 * options.scale ) +' ';\n\t\t\t\t\t}\n\t\t\t\t\tstr += _this.roundtodec( hsmp.segments[pcnt].x1 * options.scale ) +' '+ _this.roundtodec( hsmp.segments[pcnt].y1 * options.scale ) +' ';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t}// End of creating hole path string\n\t\t\t\n\t\t\tstr += 'Z '; // Close path\n\t\t\t\n\t\t}// End of holepath check\n\t\t\n\t\t// Closing path element\n\t\tstr += '\" />';\n\t\t\n\t\t// Rendering control points\n\t\tif(options.lcpr || options.qcpr){\n\t\t\tfor(pcnt=0; pcnt<smp.segments.length; pcnt++){\n\t\t\t\tif( smp.segments[pcnt].hasOwnProperty('x3') && options.qcpr ){\n\t\t\t\t\tstr += '<circle cx=\"'+ smp.segments[pcnt].x2 * options.scale +'\" cy=\"'+ smp.segments[pcnt].y2 * options.scale +'\" r=\"'+ options.qcpr +'\" fill=\"cyan\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"black\" />';\n\t\t\t\t\tstr += '<circle cx=\"'+ smp.segments[pcnt].x3 * options.scale +'\" cy=\"'+ smp.segments[pcnt].y3 * options.scale +'\" r=\"'+ options.qcpr +'\" fill=\"white\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"black\" />';\n\t\t\t\t\tstr += '<line x1=\"'+ smp.segments[pcnt].x1 * options.scale +'\" y1=\"'+ smp.segments[pcnt].y1 * options.scale +'\" x2=\"'+ smp.segments[pcnt].x2 * options.scale +'\" y2=\"'+ smp.segments[pcnt].y2 * options.scale +'\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"cyan\" />';\n\t\t\t\t\tstr += '<line x1=\"'+ smp.segments[pcnt].x2 * options.scale +'\" y1=\"'+ smp.segments[pcnt].y2 * options.scale +'\" x2=\"'+ smp.segments[pcnt].x3 * options.scale +'\" y2=\"'+ smp.segments[pcnt].y3 * options.scale +'\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"cyan\" />';\n\t\t\t\t}\n\t\t\t\tif( (!smp.segments[pcnt].hasOwnProperty('x3')) && options.lcpr){\n\t\t\t\t\tstr += '<circle cx=\"'+ smp.segments[pcnt].x2 * options.scale +'\" cy=\"'+ smp.segments[pcnt].y2 * options.scale +'\" r=\"'+ options.lcpr +'\" fill=\"white\" stroke-width=\"'+ options.lcpr * 0.2 +'\" stroke=\"black\" />';\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Hole children control points\n\t\t\tfor( var hcnt=0; hcnt < smp.holechildren.length; hcnt++){\n\t\t\t\tvar hsmp = layer[ smp.holechildren[hcnt] ];\n\t\t\t\tfor(pcnt=0; pcnt<hsmp.segments.length; pcnt++){\n\t\t\t\t\tif( hsmp.segments[pcnt].hasOwnProperty('x3') && options.qcpr ){\n\t\t\t\t\t\tstr += '<circle cx=\"'+ hsmp.segments[pcnt].x2 * options.scale +'\" cy=\"'+ hsmp.segments[pcnt].y2 * options.scale +'\" r=\"'+ options.qcpr +'\" fill=\"cyan\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"black\" />';\n\t\t\t\t\t\tstr += '<circle cx=\"'+ hsmp.segments[pcnt].x3 * options.scale +'\" cy=\"'+ hsmp.segments[pcnt].y3 * options.scale +'\" r=\"'+ options.qcpr +'\" fill=\"white\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"black\" />';\n\t\t\t\t\t\tstr += '<line x1=\"'+ hsmp.segments[pcnt].x1 * options.scale +'\" y1=\"'+ hsmp.segments[pcnt].y1 * options.scale +'\" x2=\"'+ hsmp.segments[pcnt].x2 * options.scale +'\" y2=\"'+ hsmp.segments[pcnt].y2 * options.scale +'\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"cyan\" />';\n\t\t\t\t\t\tstr += '<line x1=\"'+ hsmp.segments[pcnt].x2 * options.scale +'\" y1=\"'+ hsmp.segments[pcnt].y2 * options.scale +'\" x2=\"'+ hsmp.segments[pcnt].x3 * options.scale +'\" y2=\"'+ hsmp.segments[pcnt].y3 * options.scale +'\" stroke-width=\"'+ options.qcpr * 0.2 +'\" stroke=\"cyan\" />';\n\t\t\t\t\t}\n\t\t\t\t\tif( (!hsmp.segments[pcnt].hasOwnProperty('x3')) && options.lcpr){\n\t\t\t\t\t\tstr += '<circle cx=\"'+ hsmp.segments[pcnt].x2 * options.scale +'\" cy=\"'+ hsmp.segments[pcnt].y2 * options.scale +'\" r=\"'+ options.lcpr +'\" fill=\"white\" stroke-width=\"'+ options.lcpr * 0.2 +'\" stroke=\"black\" />';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}// End of Rendering control points\n\t\t\t\n\t\treturn str;\n\t\t\n\t},// End of svgpathstring()\n\t\n\t// Converting tracedata to an SVG string\n\tthis.getsvgstring = function( tracedata, options ){\n\t\t\n\t\toptions = _this.checkoptions(options);\n\t\t\n\t\tvar w = tracedata.width * options.scale, h = tracedata.height * options.scale;\n\t\t\n\t\t// SVG start\n\t\tvar svgstr = '<svg ' + (options.viewbox ? ('viewBox=\"0 0 '+w+' '+h+'\" ') : ('width=\"'+w+'\" height=\"'+h+'\" ')) +\n\t\t\t'version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" desc=\"Created with imagetracer.js version '+_this.versionnumber+'\" >';\n\n\t\t// Drawing: Layers and Paths loops\n\t\tfor(var lcnt=0; lcnt < tracedata.layers.length; lcnt++){\n\t\t\tfor(var pcnt=0; pcnt < tracedata.layers[lcnt].length; pcnt++){\n\t\t\t\t\n\t\t\t\t// Adding SVG <path> string\n\t\t\t\tif( !tracedata.layers[lcnt][pcnt].isholepath ){\n\t\t\t\t\tsvgstr += _this.svgpathstring( tracedata, lcnt, pcnt, options );\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t}// End of paths loop\n\t\t}// End of layers loop\n\t\t\n\t\t// SVG End\n\t\tsvgstr+='</svg>';\n\t\t\n\t\treturn svgstr;\n\t\t\n\t},// End of getsvgstring()\n\t\n\t// Comparator for numeric Array.sort\n\tthis.compareNumbers = function(a,b){ return a - b; },\n\t\n\t// Convert color object to rgba string\n\tthis.torgbastr = function(c){ return 'rgba('+c.r+','+c.g+','+c.b+','+c.a+')'; },\n\t\n\t// Convert color object to SVG color string\n\tthis.tosvgcolorstr = function(c, options){\n\t\treturn 'fill=\"rgb('+c.r+','+c.g+','+c.b+')\" stroke=\"rgb('+c.r+','+c.g+','+c.b+')\" stroke-width=\"'+options.strokewidth+'\" opacity=\"'+c.a/255.0+'\" ';\n\t},\n\t\n\t// Helper function: Appending an <svg> element to a container from an svgstring\n\tthis.appendSVGString = function(svgstr,parentid){\n\t\tvar div;\n\t\tif(parentid){\n\t\t\tdiv = document.getElementById(parentid);\n\t\t\tif(!div){\n\t\t\t\tdiv = document.createElement('div');\n\t\t\t\tdiv.id = parentid;\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t}\n\t\t}else{\n\t\t\tdiv = document.createElement('div');\n\t\t\tdocument.body.appendChild(div);\n\t\t}\n\t\tdiv.innerHTML += svgstr;\n\t},\n\t\n\t////////////////////////////////////////////////////////////\n\t//\n\t//  Canvas functions\n\t//\n\t////////////////////////////////////////////////////////////\n\t\n\t// Gaussian kernels for blur\n\tthis.gks = [ [0.27901,0.44198,0.27901], [0.135336,0.228569,0.272192,0.228569,0.135336], [0.086776,0.136394,0.178908,0.195843,0.178908,0.136394,0.086776],\n\t             [0.063327,0.093095,0.122589,0.144599,0.152781,0.144599,0.122589,0.093095,0.063327], [0.049692,0.069304,0.089767,0.107988,0.120651,0.125194,0.120651,0.107988,0.089767,0.069304,0.049692] ],\n\t\n\t// Selective Gaussian blur for preprocessing\n\tthis.blur = function(imgd,radius,delta){\n\t\tvar i,j,k,d,idx,racc,gacc,bacc,aacc,wacc;\n\t\t\n\t\t// new ImageData\n\t\tvar imgd2 = { width:imgd.width, height:imgd.height, data:[] };\n\t\t\n\t\t// radius and delta limits, this kernel\n\t\tradius = Math.floor(radius); if(radius<1){ return imgd; } if(radius>5){ radius = 5; } delta = Math.abs( delta ); if(delta>1024){ delta = 1024; }\n\t\tvar thisgk = _this.gks[radius-1];\n\t\t\n\t\t// loop through all pixels, horizontal blur\n\t\tfor( j=0; j < imgd.height; j++ ){\n\t\t\tfor( i=0; i < imgd.width; i++ ){\n\n\t\t\t\tracc = 0; gacc = 0; bacc = 0; aacc = 0; wacc = 0;\n\t\t\t\t// gauss kernel loop\n\t\t\t\tfor( k = -radius; k < radius+1; k++){\n\t\t\t\t\t// add weighted color values\n\t\t\t\t\tif( (i+k > 0) && (i+k < imgd.width) ){\n\t\t\t\t\t\tidx = (j*imgd.width+i+k)*4;\n\t\t\t\t\t\tracc += imgd.data[idx  ] * thisgk[k+radius];\n\t\t\t\t\t\tgacc += imgd.data[idx+1] * thisgk[k+radius];\n\t\t\t\t\t\tbacc += imgd.data[idx+2] * thisgk[k+radius];\n\t\t\t\t\t\taacc += imgd.data[idx+3] * thisgk[k+radius];\n\t\t\t\t\t\twacc += thisgk[k+radius];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// The new pixel\n\t\t\t\tidx = (j*imgd.width+i)*4;\n\t\t\t\timgd2.data[idx  ] = Math.floor(racc / wacc);\n\t\t\t\timgd2.data[idx+1] = Math.floor(gacc / wacc);\n\t\t\t\timgd2.data[idx+2] = Math.floor(bacc / wacc);\n\t\t\t\timgd2.data[idx+3] = Math.floor(aacc / wacc);\n\t\t\t\t\n\t\t\t}// End of width loop\n\t\t}// End of horizontal blur\n\t\t\n\t\t// copying the half blurred imgd2\n\t\tvar himgd = new Uint8ClampedArray(imgd2.data);\n\t\t\n\t\t// loop through all pixels, vertical blur\n\t\tfor( j=0; j < imgd.height; j++ ){\n\t\t\tfor( i=0; i < imgd.width; i++ ){\n\n\t\t\t\tracc = 0; gacc = 0; bacc = 0; aacc = 0; wacc = 0;\n\t\t\t\t// gauss kernel loop\n\t\t\t\tfor( k = -radius; k < radius+1; k++){\n\t\t\t\t\t// add weighted color values\n\t\t\t\t\tif( (j+k > 0) && (j+k < imgd.height) ){\n\t\t\t\t\t\tidx = ((j+k)*imgd.width+i)*4;\n\t\t\t\t\t\tracc += himgd[idx  ] * thisgk[k+radius];\n\t\t\t\t\t\tgacc += himgd[idx+1] * thisgk[k+radius];\n\t\t\t\t\t\tbacc += himgd[idx+2] * thisgk[k+radius];\n\t\t\t\t\t\taacc += himgd[idx+3] * thisgk[k+radius];\n\t\t\t\t\t\twacc += thisgk[k+radius];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// The new pixel\n\t\t\t\tidx = (j*imgd.width+i)*4;\n\t\t\t\timgd2.data[idx  ] = Math.floor(racc / wacc);\n\t\t\t\timgd2.data[idx+1] = Math.floor(gacc / wacc);\n\t\t\t\timgd2.data[idx+2] = Math.floor(bacc / wacc);\n\t\t\t\timgd2.data[idx+3] = Math.floor(aacc / wacc);\n\t\t\t\t\n\t\t\t}// End of width loop\n\t\t}// End of vertical blur\n\t\t\n\t\t// Selective blur: loop through all pixels\n\t\tfor( j=0; j < imgd.height; j++ ){\n\t\t\tfor( i=0; i < imgd.width; i++ ){\n\t\t\t\t\n\t\t\t\tidx = (j*imgd.width+i)*4;\n\t\t\t\t// d is the difference between the blurred and the original pixel\n\t\t\t\td = Math.abs(imgd2.data[idx  ] - imgd.data[idx  ]) + Math.abs(imgd2.data[idx+1] - imgd.data[idx+1]) +\n\t\t\t\t\tMath.abs(imgd2.data[idx+2] - imgd.data[idx+2]) + Math.abs(imgd2.data[idx+3] - imgd.data[idx+3]);\n\t\t\t\t// selective blur: if d>delta, put the original pixel back\n\t\t\t\tif(d>delta){\n\t\t\t\t\timgd2.data[idx  ] = imgd.data[idx  ];\n\t\t\t\t\timgd2.data[idx+1] = imgd.data[idx+1];\n\t\t\t\t\timgd2.data[idx+2] = imgd.data[idx+2];\n\t\t\t\t\timgd2.data[idx+3] = imgd.data[idx+3];\n\t\t\t\t}\n\t\t\t}\n\t\t}// End of Selective blur\n\t\t\n\t\treturn imgd2;\n\t\t\n\t},// End of blur()\n\t\n\t// Helper function: loading an image from a URL, then executing callback with canvas as argument\n\tthis.loadImage = function(url,callback,options){\n\t\tvar img = new Image();\n\t\tif(options && options.corsenabled){ img.crossOrigin = 'Anonymous'; }\n\t\timg.onload = function(){\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = img.width;\n\t\t\tcanvas.height = img.height;\n\t\t\tvar context = canvas.getContext('2d');\n\t\t\tcontext.drawImage(img,0,0);\n\t\t\tcallback(canvas);\n\t\t};\n\t\timg.src = url;\n\t},\n\t\n\t// Helper function: getting ImageData from a canvas\n\tthis.getImgdata = function(canvas){\n\t\tvar context = canvas.getContext('2d');\n\t\treturn context.getImageData(0,0,canvas.width,canvas.height);\n\t},\n\t\n\t// Special palette to use with drawlayers()\n\tthis.specpalette = [\n\t\t{r:0,g:0,b:0,a:255}, {r:128,g:128,b:128,a:255}, {r:0,g:0,b:128,a:255}, {r:64,g:64,b:128,a:255},\n\t\t{r:192,g:192,b:192,a:255}, {r:255,g:255,b:255,a:255}, {r:128,g:128,b:192,a:255}, {r:0,g:0,b:192,a:255},\n\t\t{r:128,g:0,b:0,a:255}, {r:128,g:64,b:64,a:255}, {r:128,g:0,b:128,a:255}, {r:168,g:168,b:168,a:255},\n\t\t{r:192,g:128,b:128,a:255}, {r:192,g:0,b:0,a:255}, {r:255,g:255,b:255,a:255}, {r:0,g:128,b:0,a:255}\n\t],\n\t\n\t// Helper function: Drawing all edge node layers into a container\n\tthis.drawLayers = function(layers,palette,scale,parentid){\n\t\tscale = scale||1;\n\t\tvar w,h,i,j,k;\n\t\t\n\t\t// Preparing container\n\t\tvar div;\n\t\tif(parentid){\n\t\t\tdiv = document.getElementById(parentid);\n\t\t\tif(!div){\n\t\t\t\tdiv = document.createElement('div');\n\t\t\t\tdiv.id = parentid;\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t}\n\t\t}else{\n\t\t\tdiv = document.createElement('div');\n\t\t\tdocument.body.appendChild(div);\n\t\t}\n\t\t\n\t\t// Layers loop\n\t\tfor (k in layers) {\n\t\t\tif(!layers.hasOwnProperty(k)){ continue; }\n\t\t\t\n\t\t\t// width, height\n\t\t\tw=layers[k][0].length; h=layers[k].length;\n\t\t\t\n\t\t\t// Creating new canvas for every layer\n\t\t\tvar canvas = document.createElement('canvas'); canvas.width=w*scale; canvas.height=h*scale;\n\t\t\tvar context = canvas.getContext('2d');\n\t\t\t\n\t\t\t// Drawing\n\t\t\tfor(j=0; j<h; j++){\n\t\t\t\tfor(i=0; i<w; i++){\n\t\t\t\t\tcontext.fillStyle = _this.torgbastr(palette[ layers[k][j][i]%palette.length ]);\n\t\t\t\t\tcontext.fillRect(i*scale,j*scale,scale,scale);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Appending canvas to container\n\t\t\tdiv.appendChild(canvas);\n\t\t}// End of Layers loop\n\t}// End of drawlayers\n\t\n\t;// End of function list\n\t\n}// End of ImageTracer object\n\n// export as AMD module / Node module / browser or worker variable\nif(typeof define === 'function' && define.amd){\n\tdefine(function() { return new ImageTracer(); });\n}else if(typeof module !== 'undefined'){\n\tmodule.exports = new ImageTracer();\n}else if(typeof self !== 'undefined'){\n\tself.ImageTracer = new ImageTracer();\n}else window.ImageTracer = new ImageTracer();\n\n})();","'use strict';\r\n\r\n// Last time updated: 2021-03-09 3:20:22 AM UTC\r\n\r\n// ________________\r\n// RecordRTC v5.6.2\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\n// ____________\r\n// RecordRTC.js\r\n\r\n/**\r\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. \r\n * @summary Record audio, video or screen inside the browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTC\r\n * @class\r\n * @example\r\n * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {\r\n *     type: 'video', // audio or video or gif or canvas\r\n *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc\r\n * });\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction RecordRTC(mediaStream, config) {\r\n    if (!mediaStream) {\r\n        throw 'First parameter is required.';\r\n    }\r\n\r\n    config = config || {\r\n        type: 'video'\r\n    };\r\n\r\n    config = new RecordRTCConfiguration(mediaStream, config);\r\n\r\n    // a reference to user's recordRTC object\r\n    var self = this;\r\n\r\n    function startRecording(config2) {\r\n        if (!config.disableLogs) {\r\n            console.log('RecordRTC version: ', self.version);\r\n        }\r\n\r\n        if (!!config2) {\r\n            // allow users to set options using startRecording method\r\n            // config2 is similar to main \"config\" object (second parameter over RecordRTC constructor)\r\n            config = new RecordRTCConfiguration(mediaStream, config2);\r\n        }\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('started recording ' + config.type + ' stream.');\r\n        }\r\n\r\n        if (mediaRecorder) {\r\n            mediaRecorder.clearRecordedData();\r\n            mediaRecorder.record();\r\n\r\n            setState('recording');\r\n\r\n            if (self.recordingDuration) {\r\n                handleRecordingDuration();\r\n            }\r\n            return self;\r\n        }\r\n\r\n        initRecorder(function() {\r\n            if (self.recordingDuration) {\r\n                handleRecordingDuration();\r\n            }\r\n        });\r\n\r\n        return self;\r\n    }\r\n\r\n    function initRecorder(initCallback) {\r\n        if (initCallback) {\r\n            config.initCallback = function() {\r\n                initCallback();\r\n                initCallback = config.initCallback = null; // recorder.initRecorder should be call-backed once.\r\n            };\r\n        }\r\n\r\n        var Recorder = new GetRecorderType(mediaStream, config);\r\n\r\n        mediaRecorder = new Recorder(mediaStream, config);\r\n        mediaRecorder.record();\r\n\r\n        setState('recording');\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\r\n        }\r\n    }\r\n\r\n    function stopRecording(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state === 'paused') {\r\n            self.resumeRecording();\r\n\r\n            setTimeout(function() {\r\n                stopRecording(callback);\r\n            }, 1);\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'recording' && !config.disableLogs) {\r\n            console.warn('Recording state should be: \"recording\", however current state is: ', self.state);\r\n        }\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Stopped recording ' + config.type + ' stream.');\r\n        }\r\n\r\n        if (config.type !== 'gif') {\r\n            mediaRecorder.stop(_callback);\r\n        } else {\r\n            mediaRecorder.stop();\r\n            _callback();\r\n        }\r\n\r\n        setState('stopped');\r\n\r\n        function _callback(__blob) {\r\n            if (!mediaRecorder) {\r\n                if (typeof callback.call === 'function') {\r\n                    callback.call(self, '');\r\n                } else {\r\n                    callback('');\r\n                }\r\n                return;\r\n            }\r\n\r\n            Object.keys(mediaRecorder).forEach(function(key) {\r\n                if (typeof mediaRecorder[key] === 'function') {\r\n                    return;\r\n                }\r\n\r\n                self[key] = mediaRecorder[key];\r\n            });\r\n\r\n            var blob = mediaRecorder.blob;\r\n\r\n            if (!blob) {\r\n                if (__blob) {\r\n                    mediaRecorder.blob = blob = __blob;\r\n                } else {\r\n                    throw 'Recording failed.';\r\n                }\r\n            }\r\n\r\n            if (blob && !config.disableLogs) {\r\n                console.log(blob.type, '->', bytesToSize(blob.size));\r\n            }\r\n\r\n            if (callback) {\r\n                var url;\r\n\r\n                try {\r\n                    url = URL.createObjectURL(blob);\r\n                } catch (e) {}\r\n\r\n                if (typeof callback.call === 'function') {\r\n                    callback.call(self, url);\r\n                } else {\r\n                    callback(url);\r\n                }\r\n            }\r\n\r\n            if (!config.autoWriteToDisk) {\r\n                return;\r\n            }\r\n\r\n            getDataURL(function(dataURL) {\r\n                var parameter = {};\r\n                parameter[config.type + 'Blob'] = dataURL;\r\n                DiskStorage.Store(parameter);\r\n            });\r\n        }\r\n    }\r\n\r\n    function pauseRecording() {\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'recording') {\r\n            if (!config.disableLogs) {\r\n                console.warn('Unable to pause the recording. Recording state: ', self.state);\r\n            }\r\n            return;\r\n        }\r\n\r\n        setState('paused');\r\n\r\n        mediaRecorder.pause();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Paused recording.');\r\n        }\r\n    }\r\n\r\n    function resumeRecording() {\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'paused') {\r\n            if (!config.disableLogs) {\r\n                console.warn('Unable to resume the recording. Recording state: ', self.state);\r\n            }\r\n            return;\r\n        }\r\n\r\n        setState('recording');\r\n\r\n        // not all libs have this method yet\r\n        mediaRecorder.resume();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Resumed recording.');\r\n        }\r\n    }\r\n\r\n    function readFile(_blob) {\r\n        postMessage(new FileReaderSync().readAsDataURL(_blob));\r\n    }\r\n\r\n    function getDataURL(callback, _mediaRecorder) {\r\n        if (!callback) {\r\n            throw 'Pass a callback function over getDataURL.';\r\n        }\r\n\r\n        var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\r\n\r\n        if (!blob) {\r\n            if (!config.disableLogs) {\r\n                console.warn('Blob encoder did not finish its job yet.');\r\n            }\r\n\r\n            setTimeout(function() {\r\n                getDataURL(callback, _mediaRecorder);\r\n            }, 1000);\r\n            return;\r\n        }\r\n\r\n        if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\r\n            var webWorker = processInWebWorker(readFile);\r\n\r\n            webWorker.onmessage = function(event) {\r\n                callback(event.data);\r\n            };\r\n\r\n            webWorker.postMessage(blob);\r\n        } else {\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(blob);\r\n            reader.onload = function(event) {\r\n                callback(event.target.result);\r\n            };\r\n        }\r\n\r\n        function processInWebWorker(_function) {\r\n            try {\r\n                var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n                    'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n                ], {\r\n                    type: 'application/javascript'\r\n                }));\r\n\r\n                var worker = new Worker(blob);\r\n                URL.revokeObjectURL(blob);\r\n                return worker;\r\n            } catch (e) {}\r\n        }\r\n    }\r\n\r\n    function handleRecordingDuration(counter) {\r\n        counter = counter || 0;\r\n\r\n        if (self.state === 'paused') {\r\n            setTimeout(function() {\r\n                handleRecordingDuration(counter);\r\n            }, 1000);\r\n            return;\r\n        }\r\n\r\n        if (self.state === 'stopped') {\r\n            return;\r\n        }\r\n\r\n        if (counter >= self.recordingDuration) {\r\n            stopRecording(self.onRecordingStopped);\r\n            return;\r\n        }\r\n\r\n        counter += 1000; // 1-second\r\n\r\n        setTimeout(function() {\r\n            handleRecordingDuration(counter);\r\n        }, 1000);\r\n    }\r\n\r\n    function setState(state) {\r\n        if (!self) {\r\n            return;\r\n        }\r\n\r\n        self.state = state;\r\n\r\n        if (typeof self.onStateChanged.call === 'function') {\r\n            self.onStateChanged.call(self, state);\r\n        } else {\r\n            self.onStateChanged(state);\r\n        }\r\n    }\r\n\r\n    var WARNING = 'It seems that recorder is destroyed or \"startRecording\" is not invoked for ' + config.type + ' recorder.';\r\n\r\n    function warningLog() {\r\n        if (config.disableLogs === true) {\r\n            return;\r\n        }\r\n\r\n        console.warn(WARNING);\r\n    }\r\n\r\n    var mediaRecorder;\r\n\r\n    var returnObject = {\r\n        /**\r\n         * This method starts the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var recorder = RecordRTC(mediaStream, {\r\n         *     type: 'video'\r\n         * });\r\n         * recorder.startRecording();\r\n         */\r\n        startRecording: startRecording,\r\n\r\n        /**\r\n         * This method stops the recording. It is strongly recommended to get \"blob\" or \"URI\" inside the callback to make sure all recorders finished their job.\r\n         * @param {function} callback - Callback to get the recorded blob.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     // use either \"this\" or \"recorder\" object; both are identical\r\n         *     video.src = this.toURL();\r\n         *     var blob = this.getBlob();\r\n         * });\r\n         */\r\n        stopRecording: stopRecording,\r\n\r\n        /**\r\n         * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo Firefox is unable to pause the recording. Fix it.\r\n         * @example\r\n         * recorder.pauseRecording();  // pause the recording\r\n         * recorder.resumeRecording(); // resume again\r\n         */\r\n        pauseRecording: pauseRecording,\r\n\r\n        /**\r\n         * This method resumes the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.pauseRecording();  // first of all, pause the recording\r\n         * recorder.resumeRecording(); // now resume it\r\n         */\r\n        resumeRecording: resumeRecording,\r\n\r\n        /**\r\n         * This method initializes the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo This method should be deprecated.\r\n         * @example\r\n         * recorder.initRecorder();\r\n         */\r\n        initRecorder: initRecorder,\r\n\r\n        /**\r\n         * Ask RecordRTC to auto-stop the recording after 5 minutes.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var fiveMinutes = 5 * 1000 * 60;\r\n         * recorder.setRecordingDuration(fiveMinutes, function() {\r\n         *    var blob = this.getBlob();\r\n         *    video.src = this.toURL();\r\n         * });\r\n         * \r\n         * // or otherwise\r\n         * recorder.setRecordingDuration(fiveMinutes).onRecordingStopped(function() {\r\n         *    var blob = this.getBlob();\r\n         *    video.src = this.toURL();\r\n         * });\r\n         */\r\n        setRecordingDuration: function(recordingDuration, callback) {\r\n            if (typeof recordingDuration === 'undefined') {\r\n                throw 'recordingDuration is required.';\r\n            }\r\n\r\n            if (typeof recordingDuration !== 'number') {\r\n                throw 'recordingDuration must be a number.';\r\n            }\r\n\r\n            self.recordingDuration = recordingDuration;\r\n            self.onRecordingStopped = callback || function() {};\r\n\r\n            return {\r\n                onRecordingStopped: function(callback) {\r\n                    self.onRecordingStopped = callback;\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * This method can be used to clear/reset all the recorded data.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo Figure out the difference between \"reset\" and \"clearRecordedData\" methods.\r\n         * @example\r\n         * recorder.clearRecordedData();\r\n         */\r\n        clearRecordedData: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            mediaRecorder.clearRecordedData();\r\n\r\n            if (!config.disableLogs) {\r\n                console.log('Cleared old recorded data.');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get the recorded blob. Use this method inside the \"stopRecording\" callback.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var blob = this.getBlob();\r\n         *\r\n         *     var file = new File([blob], 'filename.webm', {\r\n         *         type: 'video/webm'\r\n         *     });\r\n         *\r\n         *     var formData = new FormData();\r\n         *     formData.append('file', file); // upload \"File\" object rather than a \"Blob\"\r\n         *     uploadToServer(formData);\r\n         * });\r\n         * @returns {Blob} Returns recorded data as \"Blob\" object.\r\n         */\r\n        getBlob: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            return mediaRecorder.blob;\r\n        },\r\n\r\n        /**\r\n         * Get data-URI instead of Blob.\r\n         * @param {function} callback - Callback to get the Data-URI.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     recorder.getDataURL(function(dataURI) {\r\n         *         video.src = dataURI;\r\n         *     });\r\n         * });\r\n         */\r\n        getDataURL: getDataURL,\r\n\r\n        /**\r\n         * Get virtual/temporary URL. Usage of this URL is limited to current tab.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     video.src = this.toURL();\r\n         * });\r\n         * @returns {String} Returns a virtual/temporary URL for the recorded \"Blob\".\r\n         */\r\n        toURL: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            return URL.createObjectURL(mediaRecorder.blob);\r\n        },\r\n\r\n        /**\r\n         * Get internal recording object (i.e. internal module) e.g. MutliStreamRecorder, MediaStreamRecorder, StereoAudioRecorder or WhammyRecorder etc.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var internalRecorder = recorder.getInternalRecorder();\r\n         * if(internalRecorder instanceof MultiStreamRecorder) {\r\n         *     internalRecorder.addStreams([newAudioStream]);\r\n         *     internalRecorder.resetVideoStreams([screenStream]);\r\n         * }\r\n         * @returns {Object} Returns internal recording object.\r\n         */\r\n        getInternalRecorder: function() {\r\n            return mediaRecorder;\r\n        },\r\n\r\n        /**\r\n         * Invoke save-as dialog to save the recorded blob into your disk.\r\n         * @param {string} fileName - Set your own file name.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     this.save('file-name');\r\n         *\r\n         *     // or manually:\r\n         *     invokeSaveAsDialog(this.getBlob(), 'filename.webm');\r\n         * });\r\n         */\r\n        save: function(fileName) {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            invokeSaveAsDialog(mediaRecorder.blob, fileName);\r\n        },\r\n\r\n        /**\r\n         * This method gets a blob from indexed-DB storage.\r\n         * @param {function} callback - Callback to get the recorded blob.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.getFromDisk(function(dataURL) {\r\n         *     video.src = dataURL;\r\n         * });\r\n         */\r\n        getFromDisk: function(callback) {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            RecordRTC.getFromDisk(config.type, callback);\r\n        },\r\n\r\n        /**\r\n         * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\r\n         * @type {Array.<Array>}\r\n         * @param {Array} arrayOfWebPImages - Array of webp images.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo This method should be deprecated.\r\n         * @example\r\n         * var arrayOfWebPImages = [];\r\n         * arrayOfWebPImages.push({\r\n         *     duration: index,\r\n         *     image: 'data:image/webp;base64,...'\r\n         * });\r\n         * recorder.setAdvertisementArray(arrayOfWebPImages);\r\n         */\r\n        setAdvertisementArray: function(arrayOfWebPImages) {\r\n            config.advertisement = [];\r\n\r\n            var length = arrayOfWebPImages.length;\r\n            for (var i = 0; i < length; i++) {\r\n                config.advertisement.push({\r\n                    duration: i,\r\n                    image: arrayOfWebPImages[i]\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * It is equivalent to <code class=\"str\">\"recorder.getBlob()\"</code> method. Usage of \"getBlob\" is recommended, though.\r\n         * @property {Blob} blob - Recorded Blob can be accessed using this property.\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var blob = this.blob;\r\n         *\r\n         *     // below one is recommended\r\n         *     var blob = this.getBlob();\r\n         * });\r\n         */\r\n        blob: null,\r\n\r\n        /**\r\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n         * @property {number} bufferSize - Buffer-size used to encode the WAV container\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     alert('Recorder used this buffer-size: ' + this.bufferSize);\r\n         * });\r\n         */\r\n        bufferSize: 0,\r\n\r\n        /**\r\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n         * @property {number} sampleRate - Sample-rates used to encode the WAV container\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     alert('Recorder used these sample-rates: ' + this.sampleRate);\r\n         * });\r\n         */\r\n        sampleRate: 0,\r\n\r\n        /**\r\n         * {recorderType:StereoAudioRecorder} returns ArrayBuffer object.\r\n         * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var arrayBuffer = this.buffer;\r\n         *     alert(arrayBuffer.byteLength);\r\n         * });\r\n         */\r\n        buffer: null,\r\n\r\n        /**\r\n         * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.reset();\r\n         * recorder.startRecording();\r\n         */\r\n        reset: function() {\r\n            if (self.state === 'recording' && !config.disableLogs) {\r\n                console.warn('Stop an active recorder.');\r\n            }\r\n\r\n            if (mediaRecorder && typeof mediaRecorder.clearRecordedData === 'function') {\r\n                mediaRecorder.clearRecordedData();\r\n            }\r\n            mediaRecorder = null;\r\n            setState('inactive');\r\n            self.blob = null;\r\n        },\r\n\r\n        /**\r\n         * This method is called whenever recorder's state changes. Use this as an \"event\".\r\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.onStateChanged = function(state) {\r\n         *     console.log('Recorder state: ', state);\r\n         * };\r\n         */\r\n        onStateChanged: function(state) {\r\n            if (!config.disableLogs) {\r\n                console.log('Recorder state changed:', state);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * A recorder can have inactive, recording, paused or stopped states.\r\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n         * @memberof RecordRTC\r\n         * @static\r\n         * @readonly\r\n         * @example\r\n         * // this looper function will keep you updated about the recorder's states.\r\n         * (function looper() {\r\n         *     document.querySelector('h1').innerHTML = 'Recorder\\'s state is: ' + recorder.state;\r\n         *     if(recorder.state === 'stopped') return; // ignore+stop\r\n         *     setTimeout(looper, 1000); // update after every 3-seconds\r\n         * })();\r\n         * recorder.startRecording();\r\n         */\r\n        state: 'inactive',\r\n\r\n        /**\r\n         * Get recorder's readonly state.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @example\r\n         * var state = recorder.getState();\r\n         * @returns {String} Returns recording state.\r\n         */\r\n        getState: function() {\r\n            return self.state;\r\n        },\r\n\r\n        /**\r\n         * Destroy RecordRTC instance. Clear all recorders and objects.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @example\r\n         * recorder.destroy();\r\n         */\r\n        destroy: function() {\r\n            var disableLogsCache = config.disableLogs;\r\n\r\n            config = {\r\n                disableLogs: true\r\n            };\r\n            self.reset();\r\n            setState('destroyed');\r\n            returnObject = self = null;\r\n\r\n            if (Storage.AudioContextConstructor) {\r\n                Storage.AudioContextConstructor.close();\r\n                Storage.AudioContextConstructor = null;\r\n            }\r\n\r\n            config.disableLogs = disableLogsCache;\r\n\r\n            if (!config.disableLogs) {\r\n                console.log('RecordRTC is destroyed.');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * RecordRTC version number\r\n         * @property {String} version - Release version number.\r\n         * @memberof RecordRTC\r\n         * @static\r\n         * @readonly\r\n         * @example\r\n         * alert(recorder.version);\r\n         */\r\n        version: '5.6.2'\r\n    };\r\n\r\n    if (!this) {\r\n        self = returnObject;\r\n        return returnObject;\r\n    }\r\n\r\n    // if someone wants to use RecordRTC with the \"new\" keyword.\r\n    for (var prop in returnObject) {\r\n        this[prop] = returnObject[prop];\r\n    }\r\n\r\n    self = this;\r\n\r\n    return returnObject;\r\n}\r\n\r\nRecordRTC.version = '5.6.2';\r\n\r\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n    module.exports = RecordRTC;\r\n}\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define('RecordRTC', [], function() {\r\n        return RecordRTC;\r\n    });\r\n}\n\r\nRecordRTC.getFromDisk = function(type, callback) {\r\n    if (!callback) {\r\n        throw 'callback is mandatory.';\r\n    }\r\n\r\n    console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\r\n    DiskStorage.Fetch(function(dataURL, _type) {\r\n        if (type !== 'all' && _type === type + 'Blob' && callback) {\r\n            callback(dataURL);\r\n        }\r\n\r\n        if (type === 'all' && callback) {\r\n            callback(dataURL, _type.replace('Blob', ''));\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof RecordRTC\r\n * @example\r\n * RecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\r\nRecordRTC.writeToDisk = function(options) {\r\n    console.log('Writing recorded blob(s) to disk!');\r\n    options = options || {};\r\n    if (options.audio && options.video && options.gif) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.video.getDataURL(function(videoDataURL) {\r\n                options.gif.getDataURL(function(gifDataURL) {\r\n                    DiskStorage.Store({\r\n                        audioBlob: audioDataURL,\r\n                        videoBlob: videoDataURL,\r\n                        gifBlob: gifDataURL\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio && options.video) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.video.getDataURL(function(videoDataURL) {\r\n                DiskStorage.Store({\r\n                    audioBlob: audioDataURL,\r\n                    videoBlob: videoDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio && options.gif) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.gif.getDataURL(function(gifDataURL) {\r\n                DiskStorage.Store({\r\n                    audioBlob: audioDataURL,\r\n                    gifBlob: gifDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.video && options.gif) {\r\n        options.video.getDataURL(function(videoDataURL) {\r\n            options.gif.getDataURL(function(gifDataURL) {\r\n                DiskStorage.Store({\r\n                    videoBlob: videoDataURL,\r\n                    gifBlob: gifDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            DiskStorage.Store({\r\n                audioBlob: audioDataURL\r\n            });\r\n        });\r\n    } else if (options.video) {\r\n        options.video.getDataURL(function(videoDataURL) {\r\n            DiskStorage.Store({\r\n                videoBlob: videoDataURL\r\n            });\r\n        });\r\n    } else if (options.gif) {\r\n        options.gif.getDataURL(function(gifDataURL) {\r\n            DiskStorage.Store({\r\n                gifBlob: gifDataURL\r\n            });\r\n        });\r\n    }\r\n};\n\r\n// __________________________\r\n// RecordRTC-Configuration.js\r\n\r\n/**\r\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCConfiguration\r\n * @class\r\n * @example\r\n * var options = RecordRTCConfiguration(mediaStream, options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\r\n */\r\n\r\nfunction RecordRTCConfiguration(mediaStream, config) {\r\n    if (!config.recorderType && !config.type) {\r\n        if (!!config.audio && !!config.video) {\r\n            config.type = 'video';\r\n        } else if (!!config.audio && !config.video) {\r\n            config.type = 'audio';\r\n        }\r\n    }\r\n\r\n    if (config.recorderType && !config.type) {\r\n        if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder || (typeof WebAssemblyRecorder !== 'undefined' && config.recorderType === WebAssemblyRecorder)) {\r\n            config.type = 'video';\r\n        } else if (config.recorderType === GifRecorder) {\r\n            config.type = 'gif';\r\n        } else if (config.recorderType === StereoAudioRecorder) {\r\n            config.type = 'audio';\r\n        } else if (config.recorderType === MediaStreamRecorder) {\r\n            if (getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\r\n                config.type = 'video';\r\n            } else if (!getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\r\n                config.type = 'video';\r\n            } else if (getTracks(mediaStream, 'audio').length && !getTracks(mediaStream, 'video').length) {\r\n                config.type = 'audio';\r\n            } else {\r\n                // config.type = 'UnKnown';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\r\n        if (!config.mimeType) {\r\n            config.mimeType = 'video/webm';\r\n        }\r\n\r\n        if (!config.type) {\r\n            config.type = config.mimeType.split('/')[0];\r\n        }\r\n\r\n        if (!config.bitsPerSecond) {\r\n            // config.bitsPerSecond = 128000;\r\n        }\r\n    }\r\n\r\n    // consider default type=audio\r\n    if (!config.type) {\r\n        if (config.mimeType) {\r\n            config.type = config.mimeType.split('/')[0];\r\n        }\r\n        if (!config.type) {\r\n            config.type = 'audio';\r\n        }\r\n    }\r\n\r\n    return config;\r\n}\n\r\n// __________________\r\n// GetRecorderType.js\r\n\r\n/**\r\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It returns best recorder-type available for your browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GetRecorderType\r\n * @class\r\n * @example\r\n * var RecorderType = GetRecorderType(options);\r\n * var recorder = new RecorderType(options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction GetRecorderType(mediaStream, config) {\r\n    var recorder;\r\n\r\n    // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\r\n    // todo: detect if it is Edge, then auto use: StereoAudioRecorder\r\n    if (isChrome || isEdge || isOpera) {\r\n        // Media Stream Recording API has not been implemented in chrome yet;\r\n        // That's why using WebAudio API to record stereo audio in WAV format\r\n        recorder = StereoAudioRecorder;\r\n    }\r\n\r\n    if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\r\n        recorder = MediaStreamRecorder;\r\n    }\r\n\r\n    // video recorder (in WebM format)\r\n    if (config.type === 'video' && (isChrome || isOpera)) {\r\n        recorder = WhammyRecorder;\r\n\r\n        if (typeof WebAssemblyRecorder !== 'undefined' && typeof ReadableStream !== 'undefined') {\r\n            recorder = WebAssemblyRecorder;\r\n        }\r\n    }\r\n\r\n    // video recorder (in Gif format)\r\n    if (config.type === 'gif') {\r\n        recorder = GifRecorder;\r\n    }\r\n\r\n    // html2canvas recording!\r\n    if (config.type === 'canvas') {\r\n        recorder = CanvasRecorder;\r\n    }\r\n\r\n    if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\r\n        if (getTracks(mediaStream, 'video').length || getTracks(mediaStream, 'audio').length) {\r\n            // audio-only recording\r\n            if (config.type === 'audio') {\r\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\r\n                    recorder = MediaStreamRecorder;\r\n                }\r\n                // else recorder = StereoAudioRecorder;\r\n            } else {\r\n                // video or screen tracks\r\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\r\n                    recorder = MediaStreamRecorder;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (mediaStream instanceof Array && mediaStream.length) {\r\n        recorder = MultiStreamRecorder;\r\n    }\r\n\r\n    if (config.recorderType) {\r\n        recorder = config.recorderType;\r\n    }\r\n\r\n    if (!config.disableLogs && !!recorder && !!recorder.name) {\r\n        console.log('Using recorderType:', recorder.name || recorder.constructor.name);\r\n    }\r\n\r\n    if (!recorder && isSafari) {\r\n        recorder = MediaStreamRecorder;\r\n    }\r\n\r\n    return recorder;\r\n}\n\r\n// _____________\r\n// MRecordRTC.js\r\n\r\n/**\r\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\r\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MRecordRTC\r\n * @class\r\n * @example\r\n * var recorder = new MRecordRTC();\r\n * recorder.addStream(MediaStream);\r\n * recorder.mediaType = {\r\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\r\n *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n *     gif: true    // or GifRecorder\r\n * };\r\n * // mimeType is optional and should be set only in advance cases.\r\n * recorder.mimeType = {\r\n *     audio: 'audio/wav',\r\n *     video: 'video/webm',\r\n *     gif:   'image/gif'\r\n * };\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @requires {@link RecordRTC}\r\n */\r\n\r\nfunction MRecordRTC(mediaStream) {\r\n\r\n    /**\r\n     * This method attaches MediaStream object to {@link MRecordRTC}.\r\n     * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.addStream(MediaStream);\r\n     */\r\n    this.addStream = function(_mediaStream) {\r\n        if (_mediaStream) {\r\n            mediaStream = _mediaStream;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\r\n     * @property {object} mediaType - {audio: true, video: true, gif: true}\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * var recorder = new MRecordRTC();\r\n     * recorder.mediaType = {\r\n     *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\r\n     *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n     *     gif  : true  // TRUE or GifRecorder\r\n     * };\r\n     */\r\n    this.mediaType = {\r\n        audio: true,\r\n        video: true\r\n    };\r\n\r\n    /**\r\n     * This method starts recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.startRecording();\r\n     */\r\n    this.startRecording = function() {\r\n        var mediaType = this.mediaType;\r\n        var recorderType;\r\n        var mimeType = this.mimeType || {\r\n            audio: null,\r\n            video: null,\r\n            gif: null\r\n        };\r\n\r\n        if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'audio').length) {\r\n            mediaType.audio = false;\r\n        }\r\n\r\n        if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\r\n            mediaType.video = false;\r\n        }\r\n\r\n        if (typeof mediaType.gif !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\r\n            mediaType.gif = false;\r\n        }\r\n\r\n        if (!mediaType.audio && !mediaType.video && !mediaType.gif) {\r\n            throw 'MediaStream must have either audio or video tracks.';\r\n        }\r\n\r\n        if (!!mediaType.audio) {\r\n            recorderType = null;\r\n            if (typeof mediaType.audio === 'function') {\r\n                recorderType = mediaType.audio;\r\n            }\r\n\r\n            this.audioRecorder = new RecordRTC(mediaStream, {\r\n                type: 'audio',\r\n                bufferSize: this.bufferSize,\r\n                sampleRate: this.sampleRate,\r\n                numberOfAudioChannels: this.numberOfAudioChannels || 2,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.audio,\r\n                timeSlice: this.timeSlice,\r\n                onTimeStamp: this.onTimeStamp\r\n            });\r\n\r\n            if (!mediaType.video) {\r\n                this.audioRecorder.startRecording();\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.video) {\r\n            recorderType = null;\r\n            if (typeof mediaType.video === 'function') {\r\n                recorderType = mediaType.video;\r\n            }\r\n\r\n            var newStream = mediaStream;\r\n\r\n            if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\r\n                var videoTrack = getTracks(mediaStream, 'video')[0];\r\n\r\n                if (isFirefox) {\r\n                    newStream = new MediaStream();\r\n                    newStream.addTrack(videoTrack);\r\n\r\n                    if (recorderType && recorderType === WhammyRecorder) {\r\n                        // Firefox does NOT supports webp-encoding yet\r\n                        // But Firefox do supports WebAssemblyRecorder\r\n                        recorderType = MediaStreamRecorder;\r\n                    }\r\n                } else {\r\n                    newStream = new MediaStream();\r\n                    newStream.addTrack(videoTrack);\r\n                }\r\n            }\r\n\r\n            this.videoRecorder = new RecordRTC(newStream, {\r\n                type: 'video',\r\n                video: this.video,\r\n                canvas: this.canvas,\r\n                frameInterval: this.frameInterval || 10,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.video,\r\n                timeSlice: this.timeSlice,\r\n                onTimeStamp: this.onTimeStamp,\r\n                workerPath: this.workerPath,\r\n                webAssemblyPath: this.webAssemblyPath,\r\n                frameRate: this.frameRate, // used by WebAssemblyRecorder; values: usually 30; accepts any.\r\n                bitrate: this.bitrate // used by WebAssemblyRecorder; values: 0 to 1000+\r\n            });\r\n\r\n            if (!mediaType.audio) {\r\n                this.videoRecorder.startRecording();\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.audio && !!mediaType.video) {\r\n            var self = this;\r\n\r\n            var isSingleRecorder = isMediaRecorderCompatible() === true;\r\n\r\n            if (mediaType.audio instanceof StereoAudioRecorder && !!mediaType.video) {\r\n                isSingleRecorder = false;\r\n            } else if (mediaType.audio !== true && mediaType.video !== true && mediaType.audio !== mediaType.video) {\r\n                isSingleRecorder = false;\r\n            }\r\n\r\n            if (isSingleRecorder === true) {\r\n                self.audioRecorder = null;\r\n                self.videoRecorder.startRecording();\r\n            } else {\r\n                self.videoRecorder.initRecorder(function() {\r\n                    self.audioRecorder.initRecorder(function() {\r\n                        // Both recorders are ready to record things accurately\r\n                        self.videoRecorder.startRecording();\r\n                        self.audioRecorder.startRecording();\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.gif) {\r\n            recorderType = null;\r\n            if (typeof mediaType.gif === 'function') {\r\n                recorderType = mediaType.gif;\r\n            }\r\n            this.gifRecorder = new RecordRTC(mediaStream, {\r\n                type: 'gif',\r\n                frameRate: this.frameRate || 200,\r\n                quality: this.quality || 10,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.gif\r\n            });\r\n            this.gifRecorder.startRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method stops recording.\r\n     * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.stopRecording(function(recording){\r\n     *     var audioBlob = recording.audio;\r\n     *     var videoBlob = recording.video;\r\n     *     var gifBlob   = recording.gif;\r\n     * });\r\n     */\r\n    this.stopRecording = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'audio');\r\n            });\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'video');\r\n            });\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'gif');\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method pauses recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.pauseRecording();\r\n     */\r\n    this.pauseRecording = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.pauseRecording();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.pauseRecording();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.pauseRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.resumeRecording();\r\n     */\r\n    this.resumeRecording = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.resumeRecording();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.resumeRecording();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.resumeRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to manually get all recorded blobs.\r\n     * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.getBlob(function(recording){\r\n     *     var audioBlob = recording.audio;\r\n     *     var videoBlob = recording.video;\r\n     *     var gifBlob   = recording.gif;\r\n     * });\r\n     * // or\r\n     * var audioBlob = recorder.getBlob().audio;\r\n     * var videoBlob = recorder.getBlob().video;\r\n     */\r\n    this.getBlob = function(callback) {\r\n        var output = {};\r\n\r\n        if (this.audioRecorder) {\r\n            output.audio = this.audioRecorder.getBlob();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            output.video = this.videoRecorder.getBlob();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            output.gif = this.gifRecorder.getBlob();\r\n        }\r\n\r\n        if (callback) {\r\n            callback(output);\r\n        }\r\n\r\n        return output;\r\n    };\r\n\r\n    /**\r\n     * Destroy all recorder instances.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.destroy();\r\n     */\r\n    this.destroy = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.destroy();\r\n            this.audioRecorder = null;\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.destroy();\r\n            this.videoRecorder = null;\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.destroy();\r\n            this.gifRecorder = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to manually get all recorded blobs' DataURLs.\r\n     * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.getDataURL(function(recording){\r\n     *     var audioDataURL = recording.audio;\r\n     *     var videoDataURL = recording.video;\r\n     *     var gifDataURL   = recording.gif;\r\n     * });\r\n     */\r\n    this.getDataURL = function(callback) {\r\n        this.getBlob(function(blob) {\r\n            if (blob.audio && blob.video) {\r\n                getDataURL(blob.audio, function(_audioDataURL) {\r\n                    getDataURL(blob.video, function(_videoDataURL) {\r\n                        callback({\r\n                            audio: _audioDataURL,\r\n                            video: _videoDataURL\r\n                        });\r\n                    });\r\n                });\r\n            } else if (blob.audio) {\r\n                getDataURL(blob.audio, function(_audioDataURL) {\r\n                    callback({\r\n                        audio: _audioDataURL\r\n                    });\r\n                });\r\n            } else if (blob.video) {\r\n                getDataURL(blob.video, function(_videoDataURL) {\r\n                    callback({\r\n                        video: _videoDataURL\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        function getDataURL(blob, callback00) {\r\n            if (typeof Worker !== 'undefined') {\r\n                var webWorker = processInWebWorker(function readFile(_blob) {\r\n                    postMessage(new FileReaderSync().readAsDataURL(_blob));\r\n                });\r\n\r\n                webWorker.onmessage = function(event) {\r\n                    callback00(event.data);\r\n                };\r\n\r\n                webWorker.postMessage(blob);\r\n            } else {\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onload = function(event) {\r\n                    callback00(event.target.result);\r\n                };\r\n            }\r\n        }\r\n\r\n        function processInWebWorker(_function) {\r\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n                'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n            ], {\r\n                type: 'application/javascript'\r\n            }));\r\n\r\n            var worker = new Worker(blob);\r\n            var url;\r\n            if (typeof URL !== 'undefined') {\r\n                url = URL;\r\n            } else if (typeof webkitURL !== 'undefined') {\r\n                url = webkitURL;\r\n            } else {\r\n                throw 'Neither URL nor webkitURL detected.';\r\n            }\r\n            url.revokeObjectURL(blob);\r\n            return worker;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.writeToDisk();\r\n     */\r\n    this.writeToDisk = function() {\r\n        RecordRTC.writeToDisk({\r\n            audio: this.audioRecorder,\r\n            video: this.videoRecorder,\r\n            gif: this.gifRecorder\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method can be used to invoke a save-as dialog for all recorded blobs.\r\n     * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.save({\r\n     *     audio: 'audio-file-name',\r\n     *     video: 'video-file-name',\r\n     *     gif  : 'gif-file-name'\r\n     * });\r\n     */\r\n    this.save = function(args) {\r\n        args = args || {\r\n            audio: true,\r\n            video: true,\r\n            gif: true\r\n        };\r\n\r\n        if (!!args.audio && this.audioRecorder) {\r\n            this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\r\n        }\r\n\r\n        if (!!args.video && this.videoRecorder) {\r\n            this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\r\n        }\r\n        if (!!args.gif && this.gifRecorder) {\r\n            this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * This method can be used to get all recorded blobs from IndexedDB storage.\r\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\r\n * @param {function} callback - Callback function to get all stored blobs.\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\r\n *     if(type === 'audio') { }\r\n *     if(type === 'video') { }\r\n *     if(type === 'gif')   { }\r\n * });\r\n */\r\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\r\n\r\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\r\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MRecordRTC = MRecordRTC;\r\n}\n\r\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n(function(that) {\r\n    if (!that) {\r\n        return;\r\n    }\r\n\r\n    if (typeof window !== 'undefined') {\r\n        return;\r\n    }\r\n\r\n    if (typeof global === 'undefined') {\r\n        return;\r\n    }\r\n\r\n    global.navigator = {\r\n        userAgent: browserFakeUserAgent,\r\n        getUserMedia: function() {}\r\n    };\r\n\r\n    if (!global.console) {\r\n        global.console = {};\r\n    }\r\n\r\n    if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n        global.console.error = global.console.log = global.console.log || function() {\r\n            console.log(arguments);\r\n        };\r\n    }\r\n\r\n    if (typeof document === 'undefined') {\r\n        /*global document:true */\r\n        that.document = {\r\n            documentElement: {\r\n                appendChild: function() {\r\n                    return '';\r\n                }\r\n            }\r\n        };\r\n\r\n        document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n            var obj = {\r\n                getContext: function() {\r\n                    return obj;\r\n                },\r\n                play: function() {},\r\n                pause: function() {},\r\n                drawImage: function() {},\r\n                toDataURL: function() {\r\n                    return '';\r\n                },\r\n                style: {}\r\n            };\r\n            return obj;\r\n        };\r\n\r\n        that.HTMLVideoElement = function() {};\r\n    }\r\n\r\n    if (typeof location === 'undefined') {\r\n        /*global location:true */\r\n        that.location = {\r\n            protocol: 'file:',\r\n            href: '',\r\n            hash: ''\r\n        };\r\n    }\r\n\r\n    if (typeof screen === 'undefined') {\r\n        /*global screen:true */\r\n        that.screen = {\r\n            width: 0,\r\n            height: 0\r\n        };\r\n    }\r\n\r\n    if (typeof URL === 'undefined') {\r\n        /*global screen:true */\r\n        that.URL = {\r\n            createObjectURL: function() {\r\n                return '';\r\n            },\r\n            revokeObjectURL: function() {\r\n                return '';\r\n            }\r\n        };\r\n    }\r\n\r\n    /*global window:true */\r\n    that.window = global;\r\n})(typeof global !== 'undefined' ? global : null);\n\r\n// _____________________________\r\n// Cross-Browser-Declarations.js\r\n\r\n// animation-frame used in WebM recording\r\n\r\n/*jshint -W079 */\r\nvar requestAnimationFrame = window.requestAnimationFrame;\r\nif (typeof requestAnimationFrame === 'undefined') {\r\n    if (typeof webkitRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = webkitRequestAnimationFrame;\r\n    } else if (typeof mozRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = mozRequestAnimationFrame;\r\n    } else if (typeof msRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = msRequestAnimationFrame;\r\n    } else if (typeof requestAnimationFrame === 'undefined') {\r\n        // via: https://gist.github.com/paulirish/1579671\r\n        var lastTime = 0;\r\n\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = function(callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function() {\r\n                callback(currTime + timeToCall);\r\n            }, timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    }\r\n}\r\n\r\n/*jshint -W079 */\r\nvar cancelAnimationFrame = window.cancelAnimationFrame;\r\nif (typeof cancelAnimationFrame === 'undefined') {\r\n    if (typeof webkitCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = webkitCancelAnimationFrame;\r\n    } else if (typeof mozCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = mozCancelAnimationFrame;\r\n    } else if (typeof msCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = msCancelAnimationFrame;\r\n    } else if (typeof cancelAnimationFrame === 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = function(id) {\r\n            clearTimeout(id);\r\n        };\r\n    }\r\n}\r\n\r\n// WebAudio API representer\r\nvar AudioContext = window.AudioContext;\r\n\r\nif (typeof AudioContext === 'undefined') {\r\n    if (typeof webkitAudioContext !== 'undefined') {\r\n        /*global AudioContext:true */\r\n        AudioContext = webkitAudioContext;\r\n    }\r\n\r\n    if (typeof mozAudioContext !== 'undefined') {\r\n        /*global AudioContext:true */\r\n        AudioContext = mozAudioContext;\r\n    }\r\n}\r\n\r\n/*jshint -W079 */\r\nvar URL = window.URL;\r\n\r\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\r\n    /*global URL:true */\r\n    URL = webkitURL;\r\n}\r\n\r\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\r\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\r\n        navigator.getUserMedia = navigator.webkitGetUserMedia;\r\n    }\r\n\r\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\r\n        navigator.getUserMedia = navigator.mozGetUserMedia;\r\n    }\r\n}\r\n\r\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\r\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\r\nvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && ('netscape' in window) && / rv:/.test(navigator.userAgent);\r\nvar isChrome = (!isOpera && !isEdge && !!navigator.webkitGetUserMedia) || isElectron() || navigator.userAgent.toLowerCase().indexOf('chrome/') !== -1;\r\n\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\nif (isSafari && !isChrome && navigator.userAgent.indexOf('CriOS') !== -1) {\r\n    isSafari = false;\r\n    isChrome = true;\r\n}\r\n\r\nvar MediaStream = window.MediaStream;\r\n\r\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n    MediaStream = webkitMediaStream;\r\n}\r\n\r\n/*global MediaStream:true */\r\nif (typeof MediaStream !== 'undefined') {\r\n    // override \"stop\" method for all browsers\r\n    if (typeof MediaStream.prototype.stop === 'undefined') {\r\n        MediaStream.prototype.stop = function() {\r\n            this.getTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n        };\r\n    }\r\n}\r\n\r\n// below function via: http://goo.gl/B3ae8c\r\n/**\r\n * Return human-readable file size.\r\n * @param {number} bytes - Pass bytes and get formatted string.\r\n * @returns {string} - formatted string\r\n * @example\r\n * bytesToSize(1024*1024*5) === '5 GB'\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction bytesToSize(bytes) {\r\n    var k = 1000;\r\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    if (bytes === 0) {\r\n        return '0 Bytes';\r\n    }\r\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\r\n    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\r\n}\r\n\r\n/**\r\n * @param {Blob} file - File or Blob object. This parameter is required.\r\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\r\n * @example\r\n * invokeSaveAsDialog(blob or file, [optional] fileName);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction invokeSaveAsDialog(file, fileName) {\r\n    if (!file) {\r\n        throw 'Blob object is required.';\r\n    }\r\n\r\n    if (!file.type) {\r\n        try {\r\n            file.type = 'video/webm';\r\n        } catch (e) {}\r\n    }\r\n\r\n    var fileExtension = (file.type || 'video/webm').split('/')[1];\r\n    if (fileExtension.indexOf(';') !== -1) {\r\n        // extended mimetype, e.g. 'video/webm;codecs=vp8,opus'\r\n        fileExtension = fileExtension.split(';')[0];\r\n    }\r\n    if (fileName && fileName.indexOf('.') !== -1) {\r\n        var splitted = fileName.split('.');\r\n        fileName = splitted[0];\r\n        fileExtension = splitted[1];\r\n    }\r\n\r\n    var fileFullName = (fileName || (Math.round(Math.random() * 9999999999) + 888888888)) + '.' + fileExtension;\r\n\r\n    if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\r\n        return navigator.msSaveOrOpenBlob(file, fileFullName);\r\n    } else if (typeof navigator.msSaveBlob !== 'undefined') {\r\n        return navigator.msSaveBlob(file, fileFullName);\r\n    }\r\n\r\n    var hyperlink = document.createElement('a');\r\n    hyperlink.href = URL.createObjectURL(file);\r\n    hyperlink.download = fileFullName;\r\n\r\n    hyperlink.style = 'display:none;opacity:0;color:transparent;';\r\n    (document.body || document.documentElement).appendChild(hyperlink);\r\n\r\n    if (typeof hyperlink.click === 'function') {\r\n        hyperlink.click();\r\n    } else {\r\n        hyperlink.target = '_blank';\r\n        hyperlink.dispatchEvent(new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        }));\r\n    }\r\n\r\n    URL.revokeObjectURL(hyperlink.href);\r\n}\r\n\r\n/**\r\n * from: https://github.com/cheton/is-electron/blob/master/index.js\r\n **/\r\nfunction isElectron() {\r\n    // Renderer process\r\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\r\n        return true;\r\n    }\r\n\r\n    // Main process\r\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\r\n        return true;\r\n    }\r\n\r\n    // Detect the user agent when the `nodeIntegration` option is set to true\r\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction getTracks(stream, kind) {\r\n    if (!stream || !stream.getTracks) {\r\n        return [];\r\n    }\r\n\r\n    return stream.getTracks().filter(function(t) {\r\n        return t.kind === (kind || 'audio');\r\n    });\r\n}\r\n\r\nfunction setSrcObject(stream, element) {\r\n    if ('srcObject' in element) {\r\n        element.srcObject = stream;\r\n    } else if ('mozSrcObject' in element) {\r\n        element.mozSrcObject = stream;\r\n    } else {\r\n        element.srcObject = stream;\r\n    }\r\n}\r\n\r\n/**\r\n * @param {Blob} file - File or Blob object.\r\n * @param {function} callback - Callback function.\r\n * @example\r\n * getSeekableBlob(blob or file, callback);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction getSeekableBlob(inputBlob, callback) {\r\n    // EBML.js copyrights goes to: https://github.com/legokichi/ts-ebml\r\n    if (typeof EBML === 'undefined') {\r\n        throw new Error('Please link: https://www.webrtc-experiment.com/EBML.js');\r\n    }\r\n\r\n    var reader = new EBML.Reader();\r\n    var decoder = new EBML.Decoder();\r\n    var tools = EBML.tools;\r\n\r\n    var fileReader = new FileReader();\r\n    fileReader.onload = function(e) {\r\n        var ebmlElms = decoder.decode(this.result);\r\n        ebmlElms.forEach(function(element) {\r\n            reader.read(element);\r\n        });\r\n        reader.stop();\r\n        var refinedMetadataBuf = tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\r\n        var body = this.result.slice(reader.metadataSize);\r\n        var newBlob = new Blob([refinedMetadataBuf, body], {\r\n            type: 'video/webm'\r\n        });\r\n\r\n        callback(newBlob);\r\n    };\r\n    fileReader.readAsArrayBuffer(inputBlob);\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.invokeSaveAsDialog = invokeSaveAsDialog;\r\n    RecordRTC.getTracks = getTracks;\r\n    RecordRTC.getSeekableBlob = getSeekableBlob;\r\n    RecordRTC.bytesToSize = bytesToSize;\r\n    RecordRTC.isElectron = isElectron;\r\n}\r\n\r\n// __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\r\n// Storage.js\r\n\r\n/**\r\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * Storage.AudioContext === webkitAudioContext\r\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\nvar Storage = {};\r\n\r\nif (typeof AudioContext !== 'undefined') {\r\n    Storage.AudioContext = AudioContext;\r\n} else if (typeof webkitAudioContext !== 'undefined') {\r\n    Storage.AudioContext = webkitAudioContext;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.Storage = Storage;\r\n}\n\r\nfunction isMediaRecorderCompatible() {\r\n    if (isFirefox || isSafari || isEdge) {\r\n        return true;\r\n    }\r\n\r\n    var nVer = navigator.appVersion;\r\n    var nAgt = navigator.userAgent;\r\n    var fullVersion = '' + parseFloat(navigator.appVersion);\r\n    var majorVersion = parseInt(navigator.appVersion, 10);\r\n    var nameOffset, verOffset, ix;\r\n\r\n    if (isChrome || isOpera) {\r\n        verOffset = nAgt.indexOf('Chrome');\r\n        fullVersion = nAgt.substring(verOffset + 7);\r\n    }\r\n\r\n    // trim the fullVersion string at semicolon/space if present\r\n    if ((ix = fullVersion.indexOf(';')) !== -1) {\r\n        fullVersion = fullVersion.substring(0, ix);\r\n    }\r\n\r\n    if ((ix = fullVersion.indexOf(' ')) !== -1) {\r\n        fullVersion = fullVersion.substring(0, ix);\r\n    }\r\n\r\n    majorVersion = parseInt('' + fullVersion, 10);\r\n\r\n    if (isNaN(majorVersion)) {\r\n        fullVersion = '' + parseFloat(navigator.appVersion);\r\n        majorVersion = parseInt(navigator.appVersion, 10);\r\n    }\r\n\r\n    return majorVersion >= 49;\r\n}\n\r\n// ______________________\r\n// MediaStreamRecorder.js\r\n\r\n/**\r\n * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.\r\n * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://github.com/muaz-khan|Muaz Khan}\r\n * @typedef MediaStreamRecorder\r\n * @class\r\n * @example\r\n * var config = {\r\n *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis\r\n *     audioBitsPerSecond : 256 * 8 * 1024,\r\n *     videoBitsPerSecond : 256 * 8 * 1024,\r\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\r\n *     checkForInactiveTracks: true,\r\n *     timeSlice: 1000, // concatenate intervals based blobs\r\n *     ondataavailable: function() {} // get intervals based blobs\r\n * }\r\n * var recorder = new MediaStreamRecorder(mediaStream, config);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", timeSlice: 1000}\r\n * @throws Will throw an error if first argument \"MediaStream\" is missing. Also throws error if \"MediaRecorder API\" are not supported by the browser.\r\n */\r\n\r\nfunction MediaStreamRecorder(mediaStream, config) {\r\n    var self = this;\r\n\r\n    if (typeof mediaStream === 'undefined') {\r\n        throw 'First argument \"MediaStream\" is required.';\r\n    }\r\n\r\n    if (typeof MediaRecorder === 'undefined') {\r\n        throw 'Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.';\r\n    }\r\n\r\n    config = config || {\r\n        // bitsPerSecond: 256 * 8 * 1024,\r\n        mimeType: 'video/webm'\r\n    };\r\n\r\n    if (config.type === 'audio') {\r\n        if (getTracks(mediaStream, 'video').length && getTracks(mediaStream, 'audio').length) {\r\n            var stream;\r\n            if (!!navigator.mozGetUserMedia) {\r\n                stream = new MediaStream();\r\n                stream.addTrack(getTracks(mediaStream, 'audio')[0]);\r\n            } else {\r\n                // webkitMediaStream\r\n                stream = new MediaStream(getTracks(mediaStream, 'audio'));\r\n            }\r\n            mediaStream = stream;\r\n        }\r\n\r\n        if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\r\n            config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\r\n        }\r\n\r\n        if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\r\n            // forcing better codecs on Firefox (via #166)\r\n            config.mimeType = 'audio/ogg';\r\n        }\r\n    }\r\n\r\n    var arrayOfBlobs = [];\r\n\r\n    /**\r\n     * This method returns array of blobs. Use only with \"timeSlice\". Its useful to preview recording anytime, without using the \"stop\" method.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var arrayOfBlobs = recorder.getArrayOfBlobs();\r\n     * @returns {Array} Returns array of recorded blobs.\r\n     */\r\n    this.getArrayOfBlobs = function() {\r\n        return arrayOfBlobs;\r\n    };\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        // set defaults\r\n        self.blob = null;\r\n        self.clearRecordedData();\r\n        self.timestamps = [];\r\n        allStates = [];\r\n        arrayOfBlobs = [];\r\n\r\n        var recorderHints = config;\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Passing following config over MediaRecorder API.', recorderHints);\r\n        }\r\n\r\n        if (mediaRecorder) {\r\n            // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\r\n            mediaRecorder = null;\r\n        }\r\n\r\n        if (isChrome && !isMediaRecorderCompatible()) {\r\n            // to support video-only recording on stable\r\n            recorderHints = 'video/vp8';\r\n        }\r\n\r\n        if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\r\n            if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\r\n                if (!config.disableLogs) {\r\n                    console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\r\n                }\r\n\r\n                recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\r\n            }\r\n        }\r\n\r\n        // using MediaRecorder API here\r\n        try {\r\n            mediaRecorder = new MediaRecorder(mediaStream, recorderHints);\r\n\r\n            // reset\r\n            config.mimeType = recorderHints.mimeType;\r\n        } catch (e) {\r\n            // chrome-based fallback\r\n            mediaRecorder = new MediaRecorder(mediaStream);\r\n        }\r\n\r\n        // old hack?\r\n        if (recorderHints.mimeType && !MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(recorderHints.mimeType) === false) {\r\n            if (!config.disableLogs) {\r\n                console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\r\n            }\r\n        }\r\n\r\n        // Dispatching OnDataAvailable Handler\r\n        mediaRecorder.ondataavailable = function(e) {\r\n            if (e.data) {\r\n                allStates.push('ondataavailable: ' + bytesToSize(e.data.size));\r\n            }\r\n\r\n            if (typeof config.timeSlice === 'number') {\r\n                if (e.data && e.data.size) {\r\n                    arrayOfBlobs.push(e.data);\r\n                    updateTimeStamp();\r\n\r\n                    if (typeof config.ondataavailable === 'function') {\r\n                        // intervals based blobs\r\n                        var blob = config.getNativeBlob ? e.data : new Blob([e.data], {\r\n                            type: getMimeType(recorderHints)\r\n                        });\r\n                        config.ondataavailable(blob);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\r\n                // make sure that stopRecording always getting fired\r\n                // even if there is invalid data\r\n                if (self.recordingCallback) {\r\n                    self.recordingCallback(new Blob([], {\r\n                        type: getMimeType(recorderHints)\r\n                    }));\r\n                    self.recordingCallback = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\r\n                type: getMimeType(recorderHints)\r\n            });\r\n\r\n            if (self.recordingCallback) {\r\n                self.recordingCallback(self.blob);\r\n                self.recordingCallback = null;\r\n            }\r\n        };\r\n\r\n        mediaRecorder.onstart = function() {\r\n            allStates.push('started');\r\n        };\r\n\r\n        mediaRecorder.onpause = function() {\r\n            allStates.push('paused');\r\n        };\r\n\r\n        mediaRecorder.onresume = function() {\r\n            allStates.push('resumed');\r\n        };\r\n\r\n        mediaRecorder.onstop = function() {\r\n            allStates.push('stopped');\r\n        };\r\n\r\n        mediaRecorder.onerror = function(error) {\r\n            if (!error) {\r\n                return;\r\n            }\r\n\r\n            if (!error.name) {\r\n                error.name = 'UnknownError';\r\n            }\r\n\r\n            allStates.push('error: ' + error);\r\n\r\n            if (!config.disableLogs) {\r\n                // via: https://w3c.github.io/mediacapture-record/MediaRecorder.html#exception-summary\r\n                if (error.name.toString().toLowerCase().indexOf('invalidstate') !== -1) {\r\n                    console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.', error);\r\n                } else if (error.name.toString().toLowerCase().indexOf('notsupported') !== -1) {\r\n                    console.error('MIME type (', recorderHints.mimeType, ') is not supported.', error);\r\n                } else if (error.name.toString().toLowerCase().indexOf('security') !== -1) {\r\n                    console.error('MediaRecorder security error', error);\r\n                }\r\n\r\n                // older code below\r\n                else if (error.name === 'OutOfMemory') {\r\n                    console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'IllegalStreamModification') {\r\n                    console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'OtherRecordingError') {\r\n                    console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'GenericError') {\r\n                    console.error('The UA cannot provide the codec or recording option that has been requested.', error);\r\n                } else {\r\n                    console.error('MediaRecorder Error', error);\r\n                }\r\n            }\r\n\r\n            (function(looper) {\r\n                if (!self.manuallyStopped && mediaRecorder && mediaRecorder.state === 'inactive') {\r\n                    delete config.timeslice;\r\n\r\n                    // 10 minutes, enough?\r\n                    mediaRecorder.start(10 * 60 * 1000);\r\n                    return;\r\n                }\r\n\r\n                setTimeout(looper, 1000);\r\n            })();\r\n\r\n            if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\r\n                mediaRecorder.stop();\r\n            }\r\n        };\r\n\r\n        if (typeof config.timeSlice === 'number') {\r\n            updateTimeStamp();\r\n            mediaRecorder.start(config.timeSlice);\r\n        } else {\r\n            // default is 60 minutes; enough?\r\n            // use config => {timeSlice: 1000} otherwise\r\n\r\n            mediaRecorder.start(3.6e+6);\r\n        }\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback(); // old code\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @property {Array} timestamps - Array of time stamps\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * console.log(recorder.timestamps);\r\n     */\r\n    this.timestamps = [];\r\n\r\n    function updateTimeStamp() {\r\n        self.timestamps.push(new Date().getTime());\r\n\r\n        if (typeof config.onTimeStamp === 'function') {\r\n            config.onTimeStamp(self.timestamps[self.timestamps.length - 1], self.timestamps);\r\n        }\r\n    }\r\n\r\n    function getMimeType(secondObject) {\r\n        if (mediaRecorder && mediaRecorder.mimeType) {\r\n            return mediaRecorder.mimeType;\r\n        }\r\n\r\n        return secondObject.mimeType || 'video/webm';\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        self.manuallyStopped = true; // used inside the mediaRecorder.onerror\r\n\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        this.recordingCallback = callback;\r\n\r\n        if (mediaRecorder.state === 'recording') {\r\n            mediaRecorder.stop();\r\n        }\r\n\r\n        if (typeof config.timeSlice === 'number') {\r\n            setTimeout(function() {\r\n                self.blob = new Blob(arrayOfBlobs, {\r\n                    type: getMimeType(config)\r\n                });\r\n\r\n                self.recordingCallback(self.blob);\r\n            }, 100);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        if (mediaRecorder.state === 'recording') {\r\n            mediaRecorder.pause();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        if (mediaRecorder.state === 'paused') {\r\n            mediaRecorder.resume();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (mediaRecorder && mediaRecorder.state === 'recording') {\r\n            self.stop(clearRecordedDataCB);\r\n        }\r\n\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        arrayOfBlobs = [];\r\n        mediaRecorder = null;\r\n        self.timestamps = [];\r\n    }\r\n\r\n    // Reference to \"MediaRecorder\" object\r\n    var mediaRecorder;\r\n\r\n    /**\r\n     * Access to native MediaRecorder API\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @instance\r\n     * @example\r\n     * var internal = recorder.getInternalRecorder();\r\n     * internal.ondataavailable = function() {}; // override\r\n     * internal.stream, internal.onpause, internal.onstop, etc.\r\n     * @returns {Object} Returns internal recording object.\r\n     */\r\n    this.getInternalRecorder = function() {\r\n        return mediaRecorder;\r\n    };\r\n\r\n    function isMediaStreamActive() {\r\n        if ('active' in mediaStream) {\r\n            if (!mediaStream.active) {\r\n                return false;\r\n            }\r\n        } else if ('ended' in mediaStream) { // old hack\r\n            if (mediaStream.ended) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.stop(function() {\r\n     *     var blob = recorder.blob;\r\n     * });\r\n     */\r\n    this.blob = null;\r\n\r\n\r\n    /**\r\n     * Get MediaRecorder readonly state.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var state = recorder.getState();\r\n     * @returns {String} Returns recording state.\r\n     */\r\n    this.getState = function() {\r\n        if (!mediaRecorder) {\r\n            return 'inactive';\r\n        }\r\n\r\n        return mediaRecorder.state || 'inactive';\r\n    };\r\n\r\n    // list of all recording states\r\n    var allStates = [];\r\n\r\n    /**\r\n     * Get MediaRecorder all recording states.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var state = recorder.getAllStates();\r\n     * @returns {Array} Returns all recording states\r\n     */\r\n    this.getAllStates = function() {\r\n        return allStates;\r\n    };\r\n\r\n    // if any Track within the MediaStream is muted or not enabled at any time, \r\n    // the browser will only record black frames \r\n    // or silence since that is the content produced by the Track\r\n    // so we need to stopRecording as soon as any single track ends.\r\n    if (typeof config.checkForInactiveTracks === 'undefined') {\r\n        config.checkForInactiveTracks = false; // disable to minimize CPU usage\r\n    }\r\n\r\n    var self = this;\r\n\r\n    // this method checks if media stream is stopped\r\n    // or if any track is ended.\r\n    (function looper() {\r\n        if (!mediaRecorder || config.checkForInactiveTracks === false) {\r\n            return;\r\n        }\r\n\r\n        if (isMediaStreamActive() === false) {\r\n            if (!config.disableLogs) {\r\n                console.log('MediaStream seems stopped.');\r\n            }\r\n            self.stop();\r\n            return;\r\n        }\r\n\r\n        setTimeout(looper, 1000); // check every second\r\n    })();\r\n\r\n    // for debugging\r\n    this.name = 'MediaStreamRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\r\n}\r\n\r\n// source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\r\n// https://github.com/mattdiamond/Recorderjs#license-mit\r\n// ______________________\r\n// StereoAudioRecorder.js\r\n\r\n/**\r\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\r\n * @summary JavaScript standalone object for stereo audio recording.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef StereoAudioRecorder\r\n * @class\r\n * @example\r\n * var recorder = new StereoAudioRecorder(MediaStream, {\r\n *     sampleRate: 44100,\r\n *     bufferSize: 4096\r\n * });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\r\n */\r\n\r\nfunction StereoAudioRecorder(mediaStream, config) {\r\n    if (!getTracks(mediaStream, 'audio').length) {\r\n        throw 'Your stream has no audio tracks.';\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    var self = this;\r\n\r\n    // variables\r\n    var leftchannel = [];\r\n    var rightchannel = [];\r\n    var recording = false;\r\n    var recordingLength = 0;\r\n    var jsAudioNode;\r\n\r\n    var numberOfAudioChannels = 2;\r\n\r\n    /**\r\n     * Set sample rates such as 8K or 16K. Reference: http://stackoverflow.com/a/28977136/552182\r\n     * @property {number} desiredSampRate - Desired Bits per sample * 1000\r\n     * @memberof StereoAudioRecorder\r\n     * @instance\r\n     * @example\r\n     * var recorder = StereoAudioRecorder(mediaStream, {\r\n     *   desiredSampRate: 16 * 1000 // bits-per-sample * 1000\r\n     * });\r\n     */\r\n    var desiredSampRate = config.desiredSampRate;\r\n\r\n    // backward compatibility\r\n    if (config.leftChannel === true) {\r\n        numberOfAudioChannels = 1;\r\n    }\r\n\r\n    if (config.numberOfAudioChannels === 1) {\r\n        numberOfAudioChannels = 1;\r\n    }\r\n\r\n    if (!numberOfAudioChannels || numberOfAudioChannels < 1) {\r\n        numberOfAudioChannels = 2;\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        console.log('StereoAudioRecorder is set to record number of channels: ' + numberOfAudioChannels);\r\n    }\r\n\r\n    // if any Track within the MediaStream is muted or not enabled at any time, \r\n    // the browser will only record black frames \r\n    // or silence since that is the content produced by the Track\r\n    // so we need to stopRecording as soon as any single track ends.\r\n    if (typeof config.checkForInactiveTracks === 'undefined') {\r\n        config.checkForInactiveTracks = true;\r\n    }\r\n\r\n    function isMediaStreamActive() {\r\n        if (config.checkForInactiveTracks === false) {\r\n            // always return \"true\"\r\n            return true;\r\n        }\r\n\r\n        if ('active' in mediaStream) {\r\n            if (!mediaStream.active) {\r\n                return false;\r\n            }\r\n        } else if ('ended' in mediaStream) { // old hack\r\n            if (mediaStream.ended) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (isMediaStreamActive() === false) {\r\n            throw 'Please make sure MediaStream is active.';\r\n        }\r\n\r\n        resetVariables();\r\n\r\n        isAudioProcessStarted = isPaused = false;\r\n        recording = true;\r\n\r\n        if (typeof config.timeSlice !== 'undefined') {\r\n            looper();\r\n        }\r\n    };\r\n\r\n    function mergeLeftRightBuffers(config, callback) {\r\n        function mergeAudioBuffers(config, cb) {\r\n            var numberOfAudioChannels = config.numberOfAudioChannels;\r\n\r\n            // todo: \"slice(0)\" --- is it causes loop? Should be removed?\r\n            var leftBuffers = config.leftBuffers.slice(0);\r\n            var rightBuffers = config.rightBuffers.slice(0);\r\n            var sampleRate = config.sampleRate;\r\n            var internalInterleavedLength = config.internalInterleavedLength;\r\n            var desiredSampRate = config.desiredSampRate;\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n                rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\r\n\r\n                if (desiredSampRate) {\r\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n                    rightBuffers = interpolateArray(rightBuffers, desiredSampRate, sampleRate);\r\n                }\r\n            }\r\n\r\n            if (numberOfAudioChannels === 1) {\r\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n\r\n                if (desiredSampRate) {\r\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n                }\r\n            }\r\n\r\n            // set sample rate as desired sample rate\r\n            if (desiredSampRate) {\r\n                sampleRate = desiredSampRate;\r\n            }\r\n\r\n            // for changing the sampling rate, reference:\r\n            // http://stackoverflow.com/a/28977136/552182\r\n            function interpolateArray(data, newSampleRate, oldSampleRate) {\r\n                var fitCount = Math.round(data.length * (newSampleRate / oldSampleRate));\r\n                var newData = [];\r\n                var springFactor = Number((data.length - 1) / (fitCount - 1));\r\n                newData[0] = data[0];\r\n                for (var i = 1; i < fitCount - 1; i++) {\r\n                    var tmp = i * springFactor;\r\n                    var before = Number(Math.floor(tmp)).toFixed();\r\n                    var after = Number(Math.ceil(tmp)).toFixed();\r\n                    var atPoint = tmp - before;\r\n                    newData[i] = linearInterpolate(data[before], data[after], atPoint);\r\n                }\r\n                newData[fitCount - 1] = data[data.length - 1];\r\n                return newData;\r\n            }\r\n\r\n            function linearInterpolate(before, after, atPoint) {\r\n                return before + (after - before) * atPoint;\r\n            }\r\n\r\n            function mergeBuffers(channelBuffer, rLength) {\r\n                var result = new Float64Array(rLength);\r\n                var offset = 0;\r\n                var lng = channelBuffer.length;\r\n\r\n                for (var i = 0; i < lng; i++) {\r\n                    var buffer = channelBuffer[i];\r\n                    result.set(buffer, offset);\r\n                    offset += buffer.length;\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            function interleave(leftChannel, rightChannel) {\r\n                var length = leftChannel.length + rightChannel.length;\r\n\r\n                var result = new Float64Array(length);\r\n\r\n                var inputIndex = 0;\r\n\r\n                for (var index = 0; index < length;) {\r\n                    result[index++] = leftChannel[inputIndex];\r\n                    result[index++] = rightChannel[inputIndex];\r\n                    inputIndex++;\r\n                }\r\n                return result;\r\n            }\r\n\r\n            function writeUTFBytes(view, offset, string) {\r\n                var lng = string.length;\r\n                for (var i = 0; i < lng; i++) {\r\n                    view.setUint8(offset + i, string.charCodeAt(i));\r\n                }\r\n            }\r\n\r\n            // interleave both channels together\r\n            var interleaved;\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                interleaved = interleave(leftBuffers, rightBuffers);\r\n            }\r\n\r\n            if (numberOfAudioChannels === 1) {\r\n                interleaved = leftBuffers;\r\n            }\r\n\r\n            var interleavedLength = interleaved.length;\r\n\r\n            // create wav file\r\n            var resultingBufferLength = 44 + interleavedLength * 2;\r\n\r\n            var buffer = new ArrayBuffer(resultingBufferLength);\r\n\r\n            var view = new DataView(buffer);\r\n\r\n            // RIFF chunk descriptor/identifier \r\n            writeUTFBytes(view, 0, 'RIFF');\r\n\r\n            // RIFF chunk length\r\n            // changed \"44\" to \"36\" via #401\r\n            view.setUint32(4, 36 + interleavedLength * 2, true);\r\n\r\n            // RIFF type \r\n            writeUTFBytes(view, 8, 'WAVE');\r\n\r\n            // format chunk identifier \r\n            // FMT sub-chunk\r\n            writeUTFBytes(view, 12, 'fmt ');\r\n\r\n            // format chunk length \r\n            view.setUint32(16, 16, true);\r\n\r\n            // sample format (raw)\r\n            view.setUint16(20, 1, true);\r\n\r\n            // stereo (2 channels)\r\n            view.setUint16(22, numberOfAudioChannels, true);\r\n\r\n            // sample rate \r\n            view.setUint32(24, sampleRate, true);\r\n\r\n            // byte rate (sample rate * block align)\r\n            view.setUint32(28, sampleRate * numberOfAudioChannels * 2, true);\r\n\r\n            // block align (channel count * bytes per sample) \r\n            view.setUint16(32, numberOfAudioChannels * 2, true);\r\n\r\n            // bits per sample \r\n            view.setUint16(34, 16, true);\r\n\r\n            // data sub-chunk\r\n            // data chunk identifier \r\n            writeUTFBytes(view, 36, 'data');\r\n\r\n            // data chunk length \r\n            view.setUint32(40, interleavedLength * 2, true);\r\n\r\n            // write the PCM samples\r\n            var lng = interleavedLength;\r\n            var index = 44;\r\n            var volume = 1;\r\n            for (var i = 0; i < lng; i++) {\r\n                view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\r\n                index += 2;\r\n            }\r\n\r\n            if (cb) {\r\n                return cb({\r\n                    buffer: buffer,\r\n                    view: view\r\n                });\r\n            }\r\n\r\n            postMessage({\r\n                buffer: buffer,\r\n                view: view\r\n            });\r\n        }\r\n\r\n        if (config.noWorker) {\r\n            mergeAudioBuffers(config, function(data) {\r\n                callback(data.buffer, data.view);\r\n            });\r\n            return;\r\n        }\r\n\r\n\r\n        var webWorker = processInWebWorker(mergeAudioBuffers);\r\n\r\n        webWorker.onmessage = function(event) {\r\n            callback(event.data.buffer, event.data.view);\r\n\r\n            // release memory\r\n            URL.revokeObjectURL(webWorker.workerURL);\r\n\r\n            // kill webworker (or Chrome will kill your page after ~25 calls)\r\n            webWorker.terminate();\r\n        };\r\n\r\n        webWorker.postMessage(config);\r\n    }\r\n\r\n    function processInWebWorker(_function) {\r\n        var workerURL = URL.createObjectURL(new Blob([_function.toString(),\r\n            ';this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n        ], {\r\n            type: 'application/javascript'\r\n        }));\r\n\r\n        var worker = new Worker(workerURL);\r\n        worker.workerURL = workerURL;\r\n        return worker;\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        // stop recording\r\n        recording = false;\r\n\r\n        mergeLeftRightBuffers({\r\n            desiredSampRate: desiredSampRate,\r\n            sampleRate: sampleRate,\r\n            numberOfAudioChannels: numberOfAudioChannels,\r\n            internalInterleavedLength: recordingLength,\r\n            leftBuffers: leftchannel,\r\n            rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel,\r\n            noWorker: config.noWorker\r\n        }, function(buffer, view) {\r\n            /**\r\n             * @property {Blob} blob - The recorded blob object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var blob = recorder.blob;\r\n             * });\r\n             */\r\n            self.blob = new Blob([view], {\r\n                type: 'audio/wav'\r\n            });\r\n\r\n            /**\r\n             * @property {ArrayBuffer} buffer - The recorded buffer object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var buffer = recorder.buffer;\r\n             * });\r\n             */\r\n            self.buffer = new ArrayBuffer(view.buffer.byteLength);\r\n\r\n            /**\r\n             * @property {DataView} view - The recorded data-view object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var view = recorder.view;\r\n             * });\r\n             */\r\n            self.view = view;\r\n\r\n            self.sampleRate = desiredSampRate || sampleRate;\r\n            self.bufferSize = bufferSize;\r\n\r\n            // recorded audio length\r\n            self.length = recordingLength;\r\n\r\n            isAudioProcessStarted = false;\r\n\r\n            if (callback) {\r\n                callback(self.blob);\r\n            }\r\n        });\r\n    };\r\n\r\n    if (typeof RecordRTC.Storage === 'undefined') {\r\n        RecordRTC.Storage = {\r\n            AudioContextConstructor: null,\r\n            AudioContext: window.AudioContext || window.webkitAudioContext\r\n        };\r\n    }\r\n\r\n    if (!RecordRTC.Storage.AudioContextConstructor || RecordRTC.Storage.AudioContextConstructor.state === 'closed') {\r\n        RecordRTC.Storage.AudioContextConstructor = new RecordRTC.Storage.AudioContext();\r\n    }\r\n\r\n    var context = RecordRTC.Storage.AudioContextConstructor;\r\n\r\n    // creates an audio node from the microphone incoming stream\r\n    var audioInput = context.createMediaStreamSource(mediaStream);\r\n\r\n    var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\r\n\r\n    /**\r\n     * From the spec: This value controls how frequently the audioprocess event is\r\n     * dispatched and how many sample-frames need to be processed each call.\r\n     * Lower values for buffer size will result in a lower (better) latency.\r\n     * Higher values will be necessary to avoid audio breakup and glitches\r\n     * The size of the buffer (in sample-frames) which needs to\r\n     * be processed each time onprocessaudio is called.\r\n     * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\r\n     * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     bufferSize: 4096\r\n     * });\r\n     */\r\n\r\n    // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\r\n    var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\r\n\r\n    if (legalBufferValues.indexOf(bufferSize) === -1) {\r\n        if (!config.disableLogs) {\r\n            console.log('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\r\n        }\r\n    }\r\n\r\n    if (context.createJavaScriptNode) {\r\n        jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n    } else if (context.createScriptProcessor) {\r\n        jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n    } else {\r\n        throw 'WebAudio API has no support on this browser.';\r\n    }\r\n\r\n    // connect the stream to the script processor\r\n    audioInput.connect(jsAudioNode);\r\n\r\n    if (!config.bufferSize) {\r\n        bufferSize = jsAudioNode.bufferSize; // device buffer-size\r\n    }\r\n\r\n    /**\r\n     * The sample rate (in sample-frames per second) at which the\r\n     * AudioContext handles audio. It is assumed that all AudioNodes\r\n     * in the context run at this rate. In making this assumption,\r\n     * sample-rate converters or \"varispeed\" processors are not supported\r\n     * in real-time processing.\r\n     * The sampleRate parameter describes the sample-rate of the\r\n     * linear PCM audio data in the buffer in sample-frames per second.\r\n     * An implementation must support sample-rates in at least\r\n     * the range 22050 to 96000.\r\n     * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     sampleRate: 44100\r\n     * });\r\n     */\r\n    var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\r\n\r\n    if (sampleRate < 22050 || sampleRate > 96000) {\r\n        // Ref: http://stackoverflow.com/a/26303918/552182\r\n        if (!config.disableLogs) {\r\n            console.log('sample-rate must be under range 22050 and 96000.');\r\n        }\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        if (config.desiredSampRate) {\r\n            console.log('Desired sample-rate: ' + config.desiredSampRate);\r\n        }\r\n    }\r\n\r\n    var isPaused = false;\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPaused = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (isMediaStreamActive() === false) {\r\n            throw 'Please make sure MediaStream is active.';\r\n        }\r\n\r\n        if (!recording) {\r\n            if (!config.disableLogs) {\r\n                console.log('Seems recording has been restarted.');\r\n            }\r\n            this.record();\r\n            return;\r\n        }\r\n\r\n        isPaused = false;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        config.checkForInactiveTracks = false;\r\n\r\n        if (recording) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function resetVariables() {\r\n        leftchannel = [];\r\n        rightchannel = [];\r\n        recordingLength = 0;\r\n        isAudioProcessStarted = false;\r\n        recording = false;\r\n        isPaused = false;\r\n        context = null;\r\n\r\n        self.leftchannel = leftchannel;\r\n        self.rightchannel = rightchannel;\r\n        self.numberOfAudioChannels = numberOfAudioChannels;\r\n        self.desiredSampRate = desiredSampRate;\r\n        self.sampleRate = sampleRate;\r\n        self.recordingLength = recordingLength;\r\n\r\n        intervalsBasedBuffers = {\r\n            left: [],\r\n            right: [],\r\n            recordingLength: 0\r\n        };\r\n    }\r\n\r\n    function clearRecordedDataCB() {\r\n        if (jsAudioNode) {\r\n            jsAudioNode.onaudioprocess = null;\r\n            jsAudioNode.disconnect();\r\n            jsAudioNode = null;\r\n        }\r\n\r\n        if (audioInput) {\r\n            audioInput.disconnect();\r\n            audioInput = null;\r\n        }\r\n\r\n        resetVariables();\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'StereoAudioRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var isAudioProcessStarted = false;\r\n\r\n    function onAudioProcessDataAvailable(e) {\r\n        if (isPaused) {\r\n            return;\r\n        }\r\n\r\n        if (isMediaStreamActive() === false) {\r\n            if (!config.disableLogs) {\r\n                console.log('MediaStream seems stopped.');\r\n            }\r\n            jsAudioNode.disconnect();\r\n            recording = false;\r\n        }\r\n\r\n        if (!recording) {\r\n            if (audioInput) {\r\n                audioInput.disconnect();\r\n                audioInput = null;\r\n            }\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * This method is called on \"onaudioprocess\" event's first invocation.\r\n         * @method {function} onAudioProcessStarted\r\n         * @memberof StereoAudioRecorder\r\n         * @example\r\n         * recorder.onAudioProcessStarted: function() { };\r\n         */\r\n        if (!isAudioProcessStarted) {\r\n            isAudioProcessStarted = true;\r\n            if (config.onAudioProcessStarted) {\r\n                config.onAudioProcessStarted();\r\n            }\r\n\r\n            if (config.initCallback) {\r\n                config.initCallback();\r\n            }\r\n        }\r\n\r\n        var left = e.inputBuffer.getChannelData(0);\r\n\r\n        // we clone the samples\r\n        var chLeft = new Float32Array(left);\r\n        leftchannel.push(chLeft);\r\n\r\n        if (numberOfAudioChannels === 2) {\r\n            var right = e.inputBuffer.getChannelData(1);\r\n            var chRight = new Float32Array(right);\r\n            rightchannel.push(chRight);\r\n        }\r\n\r\n        recordingLength += bufferSize;\r\n\r\n        // export raw PCM\r\n        self.recordingLength = recordingLength;\r\n\r\n        if (typeof config.timeSlice !== 'undefined') {\r\n            intervalsBasedBuffers.recordingLength += bufferSize;\r\n            intervalsBasedBuffers.left.push(chLeft);\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                intervalsBasedBuffers.right.push(chRight);\r\n            }\r\n        }\r\n    }\r\n\r\n    jsAudioNode.onaudioprocess = onAudioProcessDataAvailable;\r\n\r\n    // to prevent self audio to be connected with speakers\r\n    if (context.createMediaStreamDestination) {\r\n        jsAudioNode.connect(context.createMediaStreamDestination());\r\n    } else {\r\n        jsAudioNode.connect(context.destination);\r\n    }\r\n\r\n    // export raw PCM\r\n    this.leftchannel = leftchannel;\r\n    this.rightchannel = rightchannel;\r\n    this.numberOfAudioChannels = numberOfAudioChannels;\r\n    this.desiredSampRate = desiredSampRate;\r\n    this.sampleRate = sampleRate;\r\n    self.recordingLength = recordingLength;\r\n\r\n    // helper for intervals based blobs\r\n    var intervalsBasedBuffers = {\r\n        left: [],\r\n        right: [],\r\n        recordingLength: 0\r\n    };\r\n\r\n    // this looper is used to support intervals based blobs (via timeSlice+ondataavailable)\r\n    function looper() {\r\n        if (!recording || typeof config.ondataavailable !== 'function' || typeof config.timeSlice === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (intervalsBasedBuffers.left.length) {\r\n            mergeLeftRightBuffers({\r\n                desiredSampRate: desiredSampRate,\r\n                sampleRate: sampleRate,\r\n                numberOfAudioChannels: numberOfAudioChannels,\r\n                internalInterleavedLength: intervalsBasedBuffers.recordingLength,\r\n                leftBuffers: intervalsBasedBuffers.left,\r\n                rightBuffers: numberOfAudioChannels === 1 ? [] : intervalsBasedBuffers.right\r\n            }, function(buffer, view) {\r\n                var blob = new Blob([view], {\r\n                    type: 'audio/wav'\r\n                });\r\n                config.ondataavailable(blob);\r\n\r\n                setTimeout(looper, config.timeSlice);\r\n            });\r\n\r\n            intervalsBasedBuffers = {\r\n                left: [],\r\n                right: [],\r\n                recordingLength: 0\r\n            };\r\n        } else {\r\n            setTimeout(looper, config.timeSlice);\r\n        }\r\n    }\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\r\n}\r\n\r\n// _________________\r\n// CanvasRecorder.js\r\n\r\n/**\r\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\r\n * @summary HTML2Canvas recording into video WebM.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef CanvasRecorder\r\n * @class\r\n * @example\r\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\r\n * @param {object} config - {disableLogs:true, initCallback: function}\r\n */\r\n\r\nfunction CanvasRecorder(htmlElement, config) {\r\n    if (typeof html2canvas === 'undefined') {\r\n        throw 'Please link: https://www.webrtc-experiment.com/screenshot.js';\r\n    }\r\n\r\n    config = config || {};\r\n    if (!config.frameInterval) {\r\n        config.frameInterval = 10;\r\n    }\r\n\r\n    // via DetectRTC.js\r\n    var isCanvasSupportsStreamCapturing = false;\r\n    ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function(item) {\r\n        if (item in document.createElement('canvas')) {\r\n            isCanvasSupportsStreamCapturing = true;\r\n        }\r\n    });\r\n\r\n    var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\r\n\r\n    var chromeVersion = 50;\r\n    var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\r\n    if (_isChrome && matchArray && matchArray[2]) {\r\n        chromeVersion = parseInt(matchArray[2], 10);\r\n    }\r\n\r\n    if (_isChrome && chromeVersion < 52) {\r\n        isCanvasSupportsStreamCapturing = false;\r\n    }\r\n\r\n    if (config.useWhammyRecorder) {\r\n        isCanvasSupportsStreamCapturing = false;\r\n    }\r\n\r\n    var globalCanvas, mediaStreamRecorder;\r\n\r\n    if (isCanvasSupportsStreamCapturing) {\r\n        if (!config.disableLogs) {\r\n            console.log('Your browser supports both MediRecorder API and canvas.captureStream!');\r\n        }\r\n\r\n        if (htmlElement instanceof HTMLCanvasElement) {\r\n            globalCanvas = htmlElement;\r\n        } else if (htmlElement instanceof CanvasRenderingContext2D) {\r\n            globalCanvas = htmlElement.canvas;\r\n        } else {\r\n            throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\r\n        }\r\n    } else if (!!navigator.mozGetUserMedia) {\r\n        if (!config.disableLogs) {\r\n            console.error('Canvas recording is NOT supported in Firefox.');\r\n        }\r\n    }\r\n\r\n    var isRecording;\r\n\r\n    /**\r\n     * This method records Canvas.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        isRecording = true;\r\n\r\n        if (isCanvasSupportsStreamCapturing && !config.useWhammyRecorder) {\r\n            // CanvasCaptureMediaStream\r\n            var canvasMediaStream;\r\n            if ('captureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\r\n            } else if ('mozCaptureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.mozCaptureStream(25);\r\n            } else if ('webkitCaptureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.webkitCaptureStream(25);\r\n            }\r\n\r\n            try {\r\n                var mdStream = new MediaStream();\r\n                mdStream.addTrack(getTracks(canvasMediaStream, 'video')[0]);\r\n                canvasMediaStream = mdStream;\r\n            } catch (e) {}\r\n\r\n            if (!canvasMediaStream) {\r\n                throw 'captureStream API are NOT available.';\r\n            }\r\n\r\n            // Note: Jan 18, 2016 status is that, \r\n            // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\r\n            mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\r\n                mimeType: config.mimeType || 'video/webm'\r\n            });\r\n            mediaStreamRecorder.record();\r\n        } else {\r\n            whammy.frames = [];\r\n            lastTime = new Date().getTime();\r\n            drawCanvasFrame();\r\n        }\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    this.getWebPImages = function(callback) {\r\n        if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\r\n            callback();\r\n            return;\r\n        }\r\n\r\n        var framesLength = whammy.frames.length;\r\n        whammy.frames.forEach(function(frame, idx) {\r\n            var framesRemaining = framesLength - idx;\r\n            if (!config.disableLogs) {\r\n                console.log(framesRemaining + '/' + framesLength + ' frames remaining');\r\n            }\r\n\r\n            if (config.onEncodingCallback) {\r\n                config.onEncodingCallback(framesRemaining, framesLength);\r\n            }\r\n\r\n            var webp = frame.image.toDataURL('image/webp', 1);\r\n            whammy.frames[idx].image = webp;\r\n        });\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Generating WebM');\r\n        }\r\n\r\n        callback();\r\n    };\r\n\r\n    /**\r\n     * This method stops recording Canvas.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        isRecording = false;\r\n\r\n        var that = this;\r\n\r\n        if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\r\n            mediaStreamRecorder.stop(callback);\r\n            return;\r\n        }\r\n\r\n        this.getWebPImages(function() {\r\n            /**\r\n             * @property {Blob} blob - Recorded frames in video/webm blob.\r\n             * @memberof CanvasRecorder\r\n             * @example\r\n             * recorder.stop(function() {\r\n             *     var blob = recorder.blob;\r\n             * });\r\n             */\r\n            whammy.compile(function(blob) {\r\n                if (!config.disableLogs) {\r\n                    console.log('Recording finished!');\r\n                }\r\n\r\n                that.blob = blob;\r\n\r\n                if (that.blob.forEach) {\r\n                    that.blob = new Blob([], {\r\n                        type: 'video/webm'\r\n                    });\r\n                }\r\n\r\n                if (callback) {\r\n                    callback(that.blob);\r\n                }\r\n\r\n                whammy.frames = [];\r\n            });\r\n        });\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n\r\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\r\n            mediaStreamRecorder.pause();\r\n            return;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n\r\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\r\n            mediaStreamRecorder.resume();\r\n            return;\r\n        }\r\n\r\n        if (!isRecording) {\r\n            this.record();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (isRecording) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        whammy.frames = [];\r\n        isRecording = false;\r\n        isPausedRecording = false;\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'CanvasRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    function cloneCanvas() {\r\n        //create a new canvas\r\n        var newCanvas = document.createElement('canvas');\r\n        var context = newCanvas.getContext('2d');\r\n\r\n        //set dimensions\r\n        newCanvas.width = htmlElement.width;\r\n        newCanvas.height = htmlElement.height;\r\n\r\n        //apply the old canvas to the new one\r\n        context.drawImage(htmlElement, 0, 0);\r\n\r\n        //return the new canvas\r\n        return newCanvas;\r\n    }\r\n\r\n    function drawCanvasFrame() {\r\n        if (isPausedRecording) {\r\n            lastTime = new Date().getTime();\r\n            return setTimeout(drawCanvasFrame, 500);\r\n        }\r\n\r\n        if (htmlElement.nodeName.toLowerCase() === 'canvas') {\r\n            var duration = new Date().getTime() - lastTime;\r\n            // via #206, by Jack i.e. @Seymourr\r\n            lastTime = new Date().getTime();\r\n\r\n            whammy.frames.push({\r\n                image: cloneCanvas(),\r\n                duration: duration\r\n            });\r\n\r\n            if (isRecording) {\r\n                setTimeout(drawCanvasFrame, config.frameInterval);\r\n            }\r\n            return;\r\n        }\r\n\r\n        html2canvas(htmlElement, {\r\n            grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\r\n            onrendered: function(canvas) {\r\n                var duration = new Date().getTime() - lastTime;\r\n                if (!duration) {\r\n                    return setTimeout(drawCanvasFrame, config.frameInterval);\r\n                }\r\n\r\n                // via #206, by Jack i.e. @Seymourr\r\n                lastTime = new Date().getTime();\r\n\r\n                whammy.frames.push({\r\n                    image: canvas.toDataURL('image/webp', 1),\r\n                    duration: duration\r\n                });\r\n\r\n                if (isRecording) {\r\n                    setTimeout(drawCanvasFrame, config.frameInterval);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    var lastTime = new Date().getTime();\r\n\r\n    var whammy = new Whammy.Video(100);\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.CanvasRecorder = CanvasRecorder;\r\n}\n\r\n// _________________\r\n// WhammyRecorder.js\r\n\r\n/**\r\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\r\n * @summary Video recording feature in Chrome.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WhammyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WhammyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction WhammyRecorder(mediaStream, config) {\r\n\r\n    config = config || {};\r\n\r\n    if (!config.frameInterval) {\r\n        config.frameInterval = 10;\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        console.log('Using frames-interval:', config.frameInterval);\r\n    }\r\n\r\n    /**\r\n     * This method records video.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (!config.width) {\r\n            config.width = 320;\r\n        }\r\n\r\n        if (!config.height) {\r\n            config.height = 240;\r\n        }\r\n\r\n        if (!config.video) {\r\n            config.video = {\r\n                width: config.width,\r\n                height: config.height\r\n            };\r\n        }\r\n\r\n        if (!config.canvas) {\r\n            config.canvas = {\r\n                width: config.width,\r\n                height: config.height\r\n            };\r\n        }\r\n\r\n        canvas.width = config.canvas.width || 320;\r\n        canvas.height = config.canvas.height || 240;\r\n\r\n        context = canvas.getContext('2d');\r\n\r\n        // setting defaults\r\n        if (config.video && config.video instanceof HTMLVideoElement) {\r\n            video = config.video.cloneNode();\r\n\r\n            if (config.initCallback) {\r\n                config.initCallback();\r\n            }\r\n        } else {\r\n            video = document.createElement('video');\r\n\r\n            setSrcObject(mediaStream, video);\r\n\r\n            video.onloadedmetadata = function() { // \"onloadedmetadata\" may NOT work in FF?\r\n                if (config.initCallback) {\r\n                    config.initCallback();\r\n                }\r\n            };\r\n\r\n            video.width = config.video.width;\r\n            video.height = config.video.height;\r\n        }\r\n\r\n        video.muted = true;\r\n        video.play();\r\n\r\n        lastTime = new Date().getTime();\r\n        whammy = new Whammy.Video();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('canvas resolutions', canvas.width, '*', canvas.height);\r\n            console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\r\n        }\r\n\r\n        drawFrames(config.frameInterval);\r\n    };\r\n\r\n    /**\r\n     * Draw and push frames to Whammy\r\n     * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\r\n     */\r\n    function drawFrames(frameInterval) {\r\n        frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\r\n\r\n        var duration = new Date().getTime() - lastTime;\r\n        if (!duration) {\r\n            return setTimeout(drawFrames, frameInterval, frameInterval);\r\n        }\r\n\r\n        if (isPausedRecording) {\r\n            lastTime = new Date().getTime();\r\n            return setTimeout(drawFrames, 100);\r\n        }\r\n\r\n        // via #206, by Jack i.e. @Seymourr\r\n        lastTime = new Date().getTime();\r\n\r\n        if (video.paused) {\r\n            // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\r\n            // Tweak for Android Chrome\r\n            video.play();\r\n        }\r\n\r\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        whammy.frames.push({\r\n            duration: duration,\r\n            image: canvas.toDataURL('image/webp')\r\n        });\r\n\r\n        if (!isStopDrawing) {\r\n            setTimeout(drawFrames, frameInterval, frameInterval);\r\n        }\r\n    }\r\n\r\n    function asyncLoop(o) {\r\n        var i = -1,\r\n            length = o.length;\r\n\r\n        (function loop() {\r\n            i++;\r\n            if (i === length) {\r\n                o.callback();\r\n                return;\r\n            }\r\n\r\n            // \"setTimeout\" added by Jim McLeod\r\n            setTimeout(function() {\r\n                o.functionToLoop(loop, i);\r\n            }, 1);\r\n        })();\r\n    }\r\n\r\n\r\n    /**\r\n     * remove black frames from the beginning to the specified frame\r\n     * @param {Array} _frames - array of frames to be checked\r\n     * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\r\n     * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\r\n     * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\r\n     * @returns {Array} - array of frames\r\n     */\r\n    // pull#293 by @volodalexey\r\n    function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, callback) {\r\n        var localCanvas = document.createElement('canvas');\r\n        localCanvas.width = canvas.width;\r\n        localCanvas.height = canvas.height;\r\n        var context2d = localCanvas.getContext('2d');\r\n        var resultFrames = [];\r\n\r\n        var checkUntilNotBlack = _framesToCheck === -1;\r\n        var endCheckFrame = (_framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length) ?\r\n            _framesToCheck : _frames.length;\r\n        var sampleColor = {\r\n            r: 0,\r\n            g: 0,\r\n            b: 0\r\n        };\r\n        var maxColorDifference = Math.sqrt(\r\n            Math.pow(255, 2) +\r\n            Math.pow(255, 2) +\r\n            Math.pow(255, 2)\r\n        );\r\n        var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\r\n        var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\r\n        var doNotCheckNext = false;\r\n\r\n        asyncLoop({\r\n            length: endCheckFrame,\r\n            functionToLoop: function(loop, f) {\r\n                var matchPixCount, endPixCheck, maxPixCount;\r\n\r\n                var finishImage = function() {\r\n                    if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {\r\n                        // console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\r\n                    } else {\r\n                        // console.log('frame is passed : ' + f);\r\n                        if (checkUntilNotBlack) {\r\n                            doNotCheckNext = true;\r\n                        }\r\n                        resultFrames.push(_frames[f]);\r\n                    }\r\n                    loop();\r\n                };\r\n\r\n                if (!doNotCheckNext) {\r\n                    var image = new Image();\r\n                    image.onload = function() {\r\n                        context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n                        var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\r\n                        matchPixCount = 0;\r\n                        endPixCheck = imageData.data.length;\r\n                        maxPixCount = imageData.data.length / 4;\r\n\r\n                        for (var pix = 0; pix < endPixCheck; pix += 4) {\r\n                            var currentColor = {\r\n                                r: imageData.data[pix],\r\n                                g: imageData.data[pix + 1],\r\n                                b: imageData.data[pix + 2]\r\n                            };\r\n                            var colorDifference = Math.sqrt(\r\n                                Math.pow(currentColor.r - sampleColor.r, 2) +\r\n                                Math.pow(currentColor.g - sampleColor.g, 2) +\r\n                                Math.pow(currentColor.b - sampleColor.b, 2)\r\n                            );\r\n                            // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\r\n                            if (colorDifference <= maxColorDifference * pixTolerance) {\r\n                                matchPixCount++;\r\n                            }\r\n                        }\r\n                        finishImage();\r\n                    };\r\n                    image.src = _frames[f].image;\r\n                } else {\r\n                    finishImage();\r\n                }\r\n            },\r\n            callback: function() {\r\n                resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\r\n\r\n                if (resultFrames.length <= 0) {\r\n                    // at least one last frame should be available for next manipulation\r\n                    // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\r\n                    resultFrames.push(_frames[_frames.length - 1]);\r\n                }\r\n                callback(resultFrames);\r\n            }\r\n        });\r\n    }\r\n\r\n    var isStopDrawing = false;\r\n\r\n    /**\r\n     * This method stops recording video.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        isStopDrawing = true;\r\n\r\n        var _this = this;\r\n        // analyse of all frames takes some time!\r\n        setTimeout(function() {\r\n            // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\r\n            // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\r\n            // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\r\n            dropBlackFrames(whammy.frames, -1, null, null, function(frames) {\r\n                whammy.frames = frames;\r\n\r\n                // to display advertisement images!\r\n                if (config.advertisement && config.advertisement.length) {\r\n                    whammy.frames = config.advertisement.concat(whammy.frames);\r\n                }\r\n\r\n                /**\r\n                 * @property {Blob} blob - Recorded frames in video/webm blob.\r\n                 * @memberof WhammyRecorder\r\n                 * @example\r\n                 * recorder.stop(function() {\r\n                 *     var blob = recorder.blob;\r\n                 * });\r\n                 */\r\n                whammy.compile(function(blob) {\r\n                    _this.blob = blob;\r\n\r\n                    if (_this.blob.forEach) {\r\n                        _this.blob = new Blob([], {\r\n                            type: 'video/webm'\r\n                        });\r\n                    }\r\n\r\n                    if (callback) {\r\n                        callback(_this.blob);\r\n                    }\r\n                });\r\n            });\r\n        }, 10);\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n\r\n        if (isStopDrawing) {\r\n            this.record();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (!isStopDrawing) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        whammy.frames = [];\r\n        isStopDrawing = true;\r\n        isPausedRecording = false;\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'WhammyRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n\r\n    var video;\r\n    var lastTime;\r\n    var whammy;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.WhammyRecorder = WhammyRecorder;\r\n}\n\r\n// https://github.com/antimatter15/whammy/blob/master/LICENSE\r\n// _________\r\n// Whammy.js\r\n\r\n// todo: Firefox now supports webp for webm containers!\r\n// their MediaRecorder implementation works well!\r\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\r\n\r\n/**\r\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\r\n * @summary A real time javascript webm encoder based on a canvas hack.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef Whammy\r\n * @class\r\n * @example\r\n * var recorder = new Whammy().Video(15);\r\n * recorder.add(context || canvas || dataURL);\r\n * var output = recorder.compile();\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\nvar Whammy = (function() {\r\n    // a more abstract-ish API\r\n\r\n    function WhammyVideo(duration) {\r\n        this.frames = [];\r\n        this.duration = duration || 1;\r\n        this.quality = 0.8;\r\n    }\r\n\r\n    /**\r\n     * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\r\n     * @method\r\n     * @memberof Whammy\r\n     * @example\r\n     * recorder = new Whammy().Video(0.8, 100);\r\n     * recorder.add(canvas || context || 'image/webp');\r\n     * @param {string} frame - Canvas || Context || image/webp\r\n     * @param {number} duration - Stick a duration (in milliseconds)\r\n     */\r\n    WhammyVideo.prototype.add = function(frame, duration) {\r\n        if ('canvas' in frame) { //CanvasRenderingContext2D\r\n            frame = frame.canvas;\r\n        }\r\n\r\n        if ('toDataURL' in frame) {\r\n            frame = frame.toDataURL('image/webp', this.quality);\r\n        }\r\n\r\n        if (!(/^data:image\\/webp;base64,/ig).test(frame)) {\r\n            throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\r\n        }\r\n        this.frames.push({\r\n            image: frame,\r\n            duration: duration || this.duration\r\n        });\r\n    };\r\n\r\n    function processInWebWorker(_function) {\r\n        var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n            'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n        ], {\r\n            type: 'application/javascript'\r\n        }));\r\n\r\n        var worker = new Worker(blob);\r\n        URL.revokeObjectURL(blob);\r\n        return worker;\r\n    }\r\n\r\n    function whammyInWebWorker(frames) {\r\n        function ArrayToWebM(frames) {\r\n            var info = checkFrames(frames);\r\n            if (!info) {\r\n                return [];\r\n            }\r\n\r\n            var clusterMaxDuration = 30000;\r\n\r\n            var EBML = [{\r\n                'id': 0x1a45dfa3, // EBML\r\n                'data': [{\r\n                    'data': 1,\r\n                    'id': 0x4286 // EBMLVersion\r\n                }, {\r\n                    'data': 1,\r\n                    'id': 0x42f7 // EBMLReadVersion\r\n                }, {\r\n                    'data': 4,\r\n                    'id': 0x42f2 // EBMLMaxIDLength\r\n                }, {\r\n                    'data': 8,\r\n                    'id': 0x42f3 // EBMLMaxSizeLength\r\n                }, {\r\n                    'data': 'webm',\r\n                    'id': 0x4282 // DocType\r\n                }, {\r\n                    'data': 2,\r\n                    'id': 0x4287 // DocTypeVersion\r\n                }, {\r\n                    'data': 2,\r\n                    'id': 0x4285 // DocTypeReadVersion\r\n                }]\r\n            }, {\r\n                'id': 0x18538067, // Segment\r\n                'data': [{\r\n                    'id': 0x1549a966, // Info\r\n                    'data': [{\r\n                        'data': 1e6, //do things in millisecs (num of nanosecs for duration scale)\r\n                        'id': 0x2ad7b1 // TimecodeScale\r\n                    }, {\r\n                        'data': 'whammy',\r\n                        'id': 0x4d80 // MuxingApp\r\n                    }, {\r\n                        'data': 'whammy',\r\n                        'id': 0x5741 // WritingApp\r\n                    }, {\r\n                        'data': doubleToString(info.duration),\r\n                        'id': 0x4489 // Duration\r\n                    }]\r\n                }, {\r\n                    'id': 0x1654ae6b, // Tracks\r\n                    'data': [{\r\n                        'id': 0xae, // TrackEntry\r\n                        'data': [{\r\n                            'data': 1,\r\n                            'id': 0xd7 // TrackNumber\r\n                        }, {\r\n                            'data': 1,\r\n                            'id': 0x73c5 // TrackUID\r\n                        }, {\r\n                            'data': 0,\r\n                            'id': 0x9c // FlagLacing\r\n                        }, {\r\n                            'data': 'und',\r\n                            'id': 0x22b59c // Language\r\n                        }, {\r\n                            'data': 'V_VP8',\r\n                            'id': 0x86 // CodecID\r\n                        }, {\r\n                            'data': 'VP8',\r\n                            'id': 0x258688 // CodecName\r\n                        }, {\r\n                            'data': 1,\r\n                            'id': 0x83 // TrackType\r\n                        }, {\r\n                            'id': 0xe0, // Video\r\n                            'data': [{\r\n                                'data': info.width,\r\n                                'id': 0xb0 // PixelWidth\r\n                            }, {\r\n                                'data': info.height,\r\n                                'id': 0xba // PixelHeight\r\n                            }]\r\n                        }]\r\n                    }]\r\n                }]\r\n            }];\r\n\r\n            //Generate clusters (max duration)\r\n            var frameNumber = 0;\r\n            var clusterTimecode = 0;\r\n            while (frameNumber < frames.length) {\r\n\r\n                var clusterFrames = [];\r\n                var clusterDuration = 0;\r\n                do {\r\n                    clusterFrames.push(frames[frameNumber]);\r\n                    clusterDuration += frames[frameNumber].duration;\r\n                    frameNumber++;\r\n                } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\r\n\r\n                var clusterCounter = 0;\r\n                var cluster = {\r\n                    'id': 0x1f43b675, // Cluster\r\n                    'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\r\n                }; //Add cluster to segment\r\n                EBML[1].data.push(cluster);\r\n                clusterTimecode += clusterDuration;\r\n            }\r\n\r\n            return generateEBML(EBML);\r\n        }\r\n\r\n        function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\r\n            return [{\r\n                'data': clusterTimecode,\r\n                'id': 0xe7 // Timecode\r\n            }].concat(clusterFrames.map(function(webp) {\r\n                var block = makeSimpleBlock({\r\n                    discardable: 0,\r\n                    frame: webp.data.slice(4),\r\n                    invisible: 0,\r\n                    keyframe: 1,\r\n                    lacing: 0,\r\n                    trackNum: 1,\r\n                    timecode: Math.round(clusterCounter)\r\n                });\r\n                clusterCounter += webp.duration;\r\n                return {\r\n                    data: block,\r\n                    id: 0xa3\r\n                };\r\n            }));\r\n        }\r\n\r\n        // sums the lengths of all the frames and gets the duration\r\n\r\n        function checkFrames(frames) {\r\n            if (!frames[0]) {\r\n                postMessage({\r\n                    error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\r\n                });\r\n                return;\r\n            }\r\n\r\n            var width = frames[0].width,\r\n                height = frames[0].height,\r\n                duration = frames[0].duration;\r\n\r\n            for (var i = 1; i < frames.length; i++) {\r\n                duration += frames[i].duration;\r\n            }\r\n            return {\r\n                duration: duration,\r\n                width: width,\r\n                height: height\r\n            };\r\n        }\r\n\r\n        function numToBuffer(num) {\r\n            var parts = [];\r\n            while (num > 0) {\r\n                parts.push(num & 0xff);\r\n                num = num >> 8;\r\n            }\r\n            return new Uint8Array(parts.reverse());\r\n        }\r\n\r\n        function strToBuffer(str) {\r\n            return new Uint8Array(str.split('').map(function(e) {\r\n                return e.charCodeAt(0);\r\n            }));\r\n        }\r\n\r\n        function bitsToBuffer(bits) {\r\n            var data = [];\r\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\r\n            bits = pad + bits;\r\n            for (var i = 0; i < bits.length; i += 8) {\r\n                data.push(parseInt(bits.substr(i, 8), 2));\r\n            }\r\n            return new Uint8Array(data);\r\n        }\r\n\r\n        function generateEBML(json) {\r\n            var ebml = [];\r\n            for (var i = 0; i < json.length; i++) {\r\n                var data = json[i].data;\r\n\r\n                if (typeof data === 'object') {\r\n                    data = generateEBML(data);\r\n                }\r\n\r\n                if (typeof data === 'number') {\r\n                    data = bitsToBuffer(data.toString(2));\r\n                }\r\n\r\n                if (typeof data === 'string') {\r\n                    data = strToBuffer(data);\r\n                }\r\n\r\n                var len = data.size || data.byteLength || data.length;\r\n                var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\r\n                var sizeToString = len.toString(2);\r\n                var padded = (new Array((zeroes * 7 + 7 + 1) - sizeToString.length)).join('0') + sizeToString;\r\n                var size = (new Array(zeroes)).join('0') + '1' + padded;\r\n\r\n                ebml.push(numToBuffer(json[i].id));\r\n                ebml.push(bitsToBuffer(size));\r\n                ebml.push(data);\r\n            }\r\n\r\n            return new Blob(ebml, {\r\n                type: 'video/webm'\r\n            });\r\n        }\r\n\r\n        function toBinStrOld(bits) {\r\n            var data = '';\r\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\r\n            bits = pad + bits;\r\n            for (var i = 0; i < bits.length; i += 8) {\r\n                data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\r\n            }\r\n            return data;\r\n        }\r\n\r\n        function makeSimpleBlock(data) {\r\n            var flags = 0;\r\n\r\n            if (data.keyframe) {\r\n                flags |= 128;\r\n            }\r\n\r\n            if (data.invisible) {\r\n                flags |= 8;\r\n            }\r\n\r\n            if (data.lacing) {\r\n                flags |= (data.lacing << 1);\r\n            }\r\n\r\n            if (data.discardable) {\r\n                flags |= 1;\r\n            }\r\n\r\n            if (data.trackNum > 127) {\r\n                throw 'TrackNumber > 127 not supported';\r\n            }\r\n\r\n            var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function(e) {\r\n                return String.fromCharCode(e);\r\n            }).join('') + data.frame;\r\n\r\n            return out;\r\n        }\r\n\r\n        function parseWebP(riff) {\r\n            var VP8 = riff.RIFF[0].WEBP[0];\r\n\r\n            var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\r\n            for (var i = 0, c = []; i < 4; i++) {\r\n                c[i] = VP8.charCodeAt(frameStart + 3 + i);\r\n            }\r\n\r\n            var width, height, tmp;\r\n\r\n            //the code below is literally copied verbatim from the bitstream spec\r\n            tmp = (c[1] << 8) | c[0];\r\n            width = tmp & 0x3FFF;\r\n            tmp = (c[3] << 8) | c[2];\r\n            height = tmp & 0x3FFF;\r\n            return {\r\n                width: width,\r\n                height: height,\r\n                data: VP8,\r\n                riff: riff\r\n            };\r\n        }\r\n\r\n        function getStrLength(string, offset) {\r\n            return parseInt(string.substr(offset + 4, 4).split('').map(function(i) {\r\n                var unpadded = i.charCodeAt(0).toString(2);\r\n                return (new Array(8 - unpadded.length + 1)).join('0') + unpadded;\r\n            }).join(''), 2);\r\n        }\r\n\r\n        function parseRIFF(string) {\r\n            var offset = 0;\r\n            var chunks = {};\r\n\r\n            while (offset < string.length) {\r\n                var id = string.substr(offset, 4);\r\n                var len = getStrLength(string, offset);\r\n                var data = string.substr(offset + 4 + 4, len);\r\n                offset += 4 + 4 + len;\r\n                chunks[id] = chunks[id] || [];\r\n\r\n                if (id === 'RIFF' || id === 'LIST') {\r\n                    chunks[id].push(parseRIFF(data));\r\n                } else {\r\n                    chunks[id].push(data);\r\n                }\r\n            }\r\n            return chunks;\r\n        }\r\n\r\n        function doubleToString(num) {\r\n            return [].slice.call(\r\n                new Uint8Array((new Float64Array([num])).buffer), 0).map(function(e) {\r\n                return String.fromCharCode(e);\r\n            }).reverse().join('');\r\n        }\r\n\r\n        var webm = new ArrayToWebM(frames.map(function(frame) {\r\n            var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\r\n            webp.duration = frame.duration;\r\n            return webp;\r\n        }));\r\n\r\n        postMessage(webm);\r\n    }\r\n\r\n    /**\r\n     * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof Whammy\r\n     * @example\r\n     * recorder = new Whammy().Video(0.8, 100);\r\n     * recorder.compile(function(blob) {\r\n     *    // blob.size - blob.type\r\n     * });\r\n     */\r\n    WhammyVideo.prototype.compile = function(callback) {\r\n        var webWorker = processInWebWorker(whammyInWebWorker);\r\n\r\n        webWorker.onmessage = function(event) {\r\n            if (event.data.error) {\r\n                console.error(event.data.error);\r\n                return;\r\n            }\r\n            callback(event.data);\r\n        };\r\n\r\n        webWorker.postMessage(this.frames);\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * A more abstract-ish API.\r\n         * @method\r\n         * @memberof Whammy\r\n         * @example\r\n         * recorder = new Whammy().Video(0.8, 100);\r\n         * @param {?number} speed - 0.8\r\n         * @param {?number} quality - 100\r\n         */\r\n        Video: WhammyVideo\r\n    };\r\n})();\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.Whammy = Whammy;\r\n}\n\r\n// ______________ (indexed-db)\r\n// DiskStorage.js\r\n\r\n/**\r\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\r\n * @summary Writing blobs into IndexedDB.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * DiskStorage.Store({\r\n *     audioBlob: yourAudioBlob,\r\n *     videoBlob: yourVideoBlob,\r\n *     gifBlob  : yourGifBlob\r\n * });\r\n * DiskStorage.Fetch(function(dataURL, type) {\r\n *     if(type === 'audioBlob') { }\r\n *     if(type === 'videoBlob') { }\r\n *     if(type === 'gifBlob')   { }\r\n * });\r\n * // DiskStorage.dataStoreName = 'recordRTC';\r\n * // DiskStorage.onError = function(error) { };\r\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\r\n * @property {function} Store - This method stores blobs in IndexedDB.\r\n * @property {function} onError - This function is invoked for any known/unknown error.\r\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\n\r\nvar DiskStorage = {\r\n    /**\r\n     * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.init();\r\n     */\r\n    init: function() {\r\n        var self = this;\r\n\r\n        if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\r\n            console.error('IndexedDB API are not available in this browser.');\r\n            return;\r\n        }\r\n\r\n        var dbVersion = 1;\r\n        var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\r\n            db;\r\n        var request = indexedDB.open(dbName, dbVersion);\r\n\r\n        function createObjectStore(dataBase) {\r\n            dataBase.createObjectStore(self.dataStoreName);\r\n        }\r\n\r\n        function putInDB() {\r\n            var transaction = db.transaction([self.dataStoreName], 'readwrite');\r\n\r\n            if (self.videoBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\r\n            }\r\n\r\n            if (self.gifBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\r\n            }\r\n\r\n            if (self.audioBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\r\n            }\r\n\r\n            function getFromStore(portionName) {\r\n                transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function(event) {\r\n                    if (self.callback) {\r\n                        self.callback(event.target.result, portionName);\r\n                    }\r\n                };\r\n            }\r\n\r\n            getFromStore('audioBlob');\r\n            getFromStore('videoBlob');\r\n            getFromStore('gifBlob');\r\n        }\r\n\r\n        request.onerror = self.onError;\r\n\r\n        request.onsuccess = function() {\r\n            db = request.result;\r\n            db.onerror = self.onError;\r\n\r\n            if (db.setVersion) {\r\n                if (db.version !== dbVersion) {\r\n                    var setVersion = db.setVersion(dbVersion);\r\n                    setVersion.onsuccess = function() {\r\n                        createObjectStore(db);\r\n                        putInDB();\r\n                    };\r\n                } else {\r\n                    putInDB();\r\n                }\r\n            } else {\r\n                putInDB();\r\n            }\r\n        };\r\n        request.onupgradeneeded = function(event) {\r\n            createObjectStore(event.target.result);\r\n        };\r\n    },\r\n    /**\r\n     * This method fetches stored blobs from IndexedDB.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.Fetch(function(dataURL, type) {\r\n     *     if(type === 'audioBlob') { }\r\n     *     if(type === 'videoBlob') { }\r\n     *     if(type === 'gifBlob')   { }\r\n     * });\r\n     */\r\n    Fetch: function(callback) {\r\n        this.callback = callback;\r\n        this.init();\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * This method stores blobs in IndexedDB.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.Store({\r\n     *     audioBlob: yourAudioBlob,\r\n     *     videoBlob: yourVideoBlob,\r\n     *     gifBlob  : yourGifBlob\r\n     * });\r\n     */\r\n    Store: function(config) {\r\n        this.audioBlob = config.audioBlob;\r\n        this.videoBlob = config.videoBlob;\r\n        this.gifBlob = config.gifBlob;\r\n\r\n        this.init();\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * This function is invoked for any known/unknown error.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.onError = function(error){\r\n     *     alerot( JSON.stringify(error) );\r\n     * };\r\n     */\r\n    onError: function(error) {\r\n        console.error(JSON.stringify(error, null, '\\t'));\r\n    },\r\n\r\n    /**\r\n     * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.dataStoreName = 'recordRTC';\r\n     */\r\n    dataStoreName: 'recordRTC',\r\n    dbName: null\r\n};\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.DiskStorage = DiskStorage;\r\n}\n\r\n// ______________\r\n// GifRecorder.js\r\n\r\n/**\r\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GifRecorder\r\n * @class\r\n * @example\r\n * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     img.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\r\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\r\n */\r\n\r\nfunction GifRecorder(mediaStream, config) {\r\n    if (typeof GIFEncoder === 'undefined') {\r\n        var script = document.createElement('script');\r\n        script.src = 'https://www.webrtc-experiment.com/gif-recorder.js';\r\n        (document.body || document.documentElement).appendChild(script);\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (typeof GIFEncoder === 'undefined') {\r\n            setTimeout(self.record, 1000);\r\n            return;\r\n        }\r\n\r\n        if (!isLoadedMetaData) {\r\n            setTimeout(self.record, 1000);\r\n            return;\r\n        }\r\n\r\n        if (!isHTMLObject) {\r\n            if (!config.width) {\r\n                config.width = video.offsetWidth || 320;\r\n            }\r\n\r\n            if (!config.height) {\r\n                config.height = video.offsetHeight || 240;\r\n            }\r\n\r\n            if (!config.video) {\r\n                config.video = {\r\n                    width: config.width,\r\n                    height: config.height\r\n                };\r\n            }\r\n\r\n            if (!config.canvas) {\r\n                config.canvas = {\r\n                    width: config.width,\r\n                    height: config.height\r\n                };\r\n            }\r\n\r\n            canvas.width = config.canvas.width || 320;\r\n            canvas.height = config.canvas.height || 240;\r\n\r\n            video.width = config.video.width || 320;\r\n            video.height = config.video.height || 240;\r\n        }\r\n\r\n        // external library to record as GIF images\r\n        gifEncoder = new GIFEncoder();\r\n\r\n        // void setRepeat(int iter) \r\n        // Sets the number of times the set of GIF frames should be played. \r\n        // Default is 1; 0 means play indefinitely.\r\n        gifEncoder.setRepeat(0);\r\n\r\n        // void setFrameRate(Number fps) \r\n        // Sets frame rate in frames per second. \r\n        // Equivalent to setDelay(1000/fps).\r\n        // Using \"setDelay\" instead of \"setFrameRate\"\r\n        gifEncoder.setDelay(config.frameRate || 200);\r\n\r\n        // void setQuality(int quality) \r\n        // Sets quality of color quantization (conversion of images to the \r\n        // maximum 256 colors allowed by the GIF specification). \r\n        // Lower values (minimum = 1) produce better colors, \r\n        // but slow processing significantly. 10 is the default, \r\n        // and produces good color mapping at reasonable speeds. \r\n        // Values greater than 20 do not yield significant improvements in speed.\r\n        gifEncoder.setQuality(config.quality || 10);\r\n\r\n        // Boolean start() \r\n        // This writes the GIF Header and returns false if it fails.\r\n        gifEncoder.start();\r\n\r\n        if (typeof config.onGifRecordingStarted === 'function') {\r\n            config.onGifRecordingStarted();\r\n        }\r\n\r\n        startTime = Date.now();\r\n\r\n        function drawVideoFrame(time) {\r\n            if (self.clearedRecordedData === true) {\r\n                return;\r\n            }\r\n\r\n            if (isPausedRecording) {\r\n                return setTimeout(function() {\r\n                    drawVideoFrame(time);\r\n                }, 100);\r\n            }\r\n\r\n            lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\r\n\r\n            if (typeof lastFrameTime === undefined) {\r\n                lastFrameTime = time;\r\n            }\r\n\r\n            // ~10 fps\r\n            if (time - lastFrameTime < 90) {\r\n                return;\r\n            }\r\n\r\n            if (!isHTMLObject && video.paused) {\r\n                // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\r\n                // Tweak for Android Chrome\r\n                video.play();\r\n            }\r\n\r\n            if (!isHTMLObject) {\r\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n            }\r\n\r\n            if (config.onGifPreview) {\r\n                config.onGifPreview(canvas.toDataURL('image/png'));\r\n            }\r\n\r\n            gifEncoder.addFrame(context);\r\n            lastFrameTime = time;\r\n        }\r\n\r\n        lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     img.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (lastAnimationFrame) {\r\n            cancelAnimationFrame(lastAnimationFrame);\r\n        }\r\n\r\n        endTime = Date.now();\r\n\r\n        /**\r\n         * @property {Blob} blob - The recorded blob object.\r\n         * @memberof GifRecorder\r\n         * @example\r\n         * recorder.stop(function(){\r\n         *     var blob = recorder.blob;\r\n         * });\r\n         */\r\n        this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\r\n            type: 'image/gif'\r\n        });\r\n\r\n        callback(this.blob);\r\n\r\n        // bug: find a way to clear old recorded blobs\r\n        gifEncoder.stream().bin = [];\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        self.clearedRecordedData = true;\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        if (gifEncoder) {\r\n            gifEncoder.stream().bin = [];\r\n        }\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'GifRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n\r\n    if (isHTMLObject) {\r\n        if (mediaStream instanceof CanvasRenderingContext2D) {\r\n            context = mediaStream;\r\n            canvas = context.canvas;\r\n        } else if (mediaStream instanceof HTMLCanvasElement) {\r\n            context = mediaStream.getContext('2d');\r\n            canvas = mediaStream;\r\n        }\r\n    }\r\n\r\n    var isLoadedMetaData = true;\r\n\r\n    if (!isHTMLObject) {\r\n        var video = document.createElement('video');\r\n        video.muted = true;\r\n        video.autoplay = true;\r\n        video.playsInline = true;\r\n\r\n        isLoadedMetaData = false;\r\n        video.onloadedmetadata = function() {\r\n            isLoadedMetaData = true;\r\n        };\r\n\r\n        setSrcObject(mediaStream, video);\r\n\r\n        video.play();\r\n    }\r\n\r\n    var lastAnimationFrame = null;\r\n    var startTime, endTime, lastFrameTime;\r\n\r\n    var gifEncoder;\r\n\r\n    var self = this;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.GifRecorder = GifRecorder;\r\n}\n\r\n// Last time updated: 2019-06-21 4:09:42 AM UTC\r\n\r\n// ________________________\r\n// MultiStreamsMixer v1.2.2\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/MultiStreamsMixer\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\nfunction MultiStreamsMixer(arrayOfMediaStreams, elementClass) {\r\n\r\n    var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n    (function(that) {\r\n        if (typeof RecordRTC !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (!that) {\r\n            return;\r\n        }\r\n\r\n        if (typeof window !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (typeof global === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        global.navigator = {\r\n            userAgent: browserFakeUserAgent,\r\n            getUserMedia: function() {}\r\n        };\r\n\r\n        if (!global.console) {\r\n            global.console = {};\r\n        }\r\n\r\n        if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n            global.console.error = global.console.log = global.console.log || function() {\r\n                console.log(arguments);\r\n            };\r\n        }\r\n\r\n        if (typeof document === 'undefined') {\r\n            /*global document:true */\r\n            that.document = {\r\n                documentElement: {\r\n                    appendChild: function() {\r\n                        return '';\r\n                    }\r\n                }\r\n            };\r\n\r\n            document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n                var obj = {\r\n                    getContext: function() {\r\n                        return obj;\r\n                    },\r\n                    play: function() {},\r\n                    pause: function() {},\r\n                    drawImage: function() {},\r\n                    toDataURL: function() {\r\n                        return '';\r\n                    },\r\n                    style: {}\r\n                };\r\n                return obj;\r\n            };\r\n\r\n            that.HTMLVideoElement = function() {};\r\n        }\r\n\r\n        if (typeof location === 'undefined') {\r\n            /*global location:true */\r\n            that.location = {\r\n                protocol: 'file:',\r\n                href: '',\r\n                hash: ''\r\n            };\r\n        }\r\n\r\n        if (typeof screen === 'undefined') {\r\n            /*global screen:true */\r\n            that.screen = {\r\n                width: 0,\r\n                height: 0\r\n            };\r\n        }\r\n\r\n        if (typeof URL === 'undefined') {\r\n            /*global screen:true */\r\n            that.URL = {\r\n                createObjectURL: function() {\r\n                    return '';\r\n                },\r\n                revokeObjectURL: function() {\r\n                    return '';\r\n                }\r\n            };\r\n        }\r\n\r\n        /*global window:true */\r\n        that.window = global;\r\n    })(typeof global !== 'undefined' ? global : null);\r\n\r\n    // requires: chrome://flags/#enable-experimental-web-platform-features\r\n\r\n    elementClass = elementClass || 'multi-streams-mixer';\r\n\r\n    var videos = [];\r\n    var isStopDrawingFrames = false;\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n    canvas.style.opacity = 0;\r\n    canvas.style.position = 'absolute';\r\n    canvas.style.zIndex = -1;\r\n    canvas.style.top = '-1000em';\r\n    canvas.style.left = '-1000em';\r\n    canvas.className = elementClass;\r\n    (document.body || document.documentElement).appendChild(canvas);\r\n\r\n    this.disableLogs = false;\r\n    this.frameInterval = 10;\r\n\r\n    this.width = 360;\r\n    this.height = 240;\r\n\r\n    // use gain node to prevent echo\r\n    this.useGainNode = true;\r\n\r\n    var self = this;\r\n\r\n    // _____________________________\r\n    // Cross-Browser-Declarations.js\r\n\r\n    // WebAudio API representer\r\n    var AudioContext = window.AudioContext;\r\n\r\n    if (typeof AudioContext === 'undefined') {\r\n        if (typeof webkitAudioContext !== 'undefined') {\r\n            /*global AudioContext:true */\r\n            AudioContext = webkitAudioContext;\r\n        }\r\n\r\n        if (typeof mozAudioContext !== 'undefined') {\r\n            /*global AudioContext:true */\r\n            AudioContext = mozAudioContext;\r\n        }\r\n    }\r\n\r\n    /*jshint -W079 */\r\n    var URL = window.URL;\r\n\r\n    if (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\r\n        /*global URL:true */\r\n        URL = webkitURL;\r\n    }\r\n\r\n    if (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\r\n        if (typeof navigator.webkitGetUserMedia !== 'undefined') {\r\n            navigator.getUserMedia = navigator.webkitGetUserMedia;\r\n        }\r\n\r\n        if (typeof navigator.mozGetUserMedia !== 'undefined') {\r\n            navigator.getUserMedia = navigator.mozGetUserMedia;\r\n        }\r\n    }\r\n\r\n    var MediaStream = window.MediaStream;\r\n\r\n    if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n        MediaStream = webkitMediaStream;\r\n    }\r\n\r\n    /*global MediaStream:true */\r\n    if (typeof MediaStream !== 'undefined') {\r\n        // override \"stop\" method for all browsers\r\n        if (typeof MediaStream.prototype.stop === 'undefined') {\r\n            MediaStream.prototype.stop = function() {\r\n                this.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n            };\r\n        }\r\n    }\r\n\r\n    var Storage = {};\r\n\r\n    if (typeof AudioContext !== 'undefined') {\r\n        Storage.AudioContext = AudioContext;\r\n    } else if (typeof webkitAudioContext !== 'undefined') {\r\n        Storage.AudioContext = webkitAudioContext;\r\n    }\r\n\r\n    function setSrcObject(stream, element) {\r\n        if ('srcObject' in element) {\r\n            element.srcObject = stream;\r\n        } else if ('mozSrcObject' in element) {\r\n            element.mozSrcObject = stream;\r\n        } else {\r\n            element.srcObject = stream;\r\n        }\r\n    }\r\n\r\n    this.startDrawingFrames = function() {\r\n        drawVideosToCanvas();\r\n    };\r\n\r\n    function drawVideosToCanvas() {\r\n        if (isStopDrawingFrames) {\r\n            return;\r\n        }\r\n\r\n        var videosLength = videos.length;\r\n\r\n        var fullcanvas = false;\r\n        var remaining = [];\r\n        videos.forEach(function(video) {\r\n            if (!video.stream) {\r\n                video.stream = {};\r\n            }\r\n\r\n            if (video.stream.fullcanvas) {\r\n                fullcanvas = video;\r\n            } else {\r\n                // todo: video.stream.active or video.stream.live to fix blank frames issues?\r\n                remaining.push(video);\r\n            }\r\n        });\r\n\r\n        if (fullcanvas) {\r\n            canvas.width = fullcanvas.stream.width;\r\n            canvas.height = fullcanvas.stream.height;\r\n        } else if (remaining.length) {\r\n            canvas.width = videosLength > 1 ? remaining[0].width * 2 : remaining[0].width;\r\n\r\n            var height = 1;\r\n            if (videosLength === 3 || videosLength === 4) {\r\n                height = 2;\r\n            }\r\n            if (videosLength === 5 || videosLength === 6) {\r\n                height = 3;\r\n            }\r\n            if (videosLength === 7 || videosLength === 8) {\r\n                height = 4;\r\n            }\r\n            if (videosLength === 9 || videosLength === 10) {\r\n                height = 5;\r\n            }\r\n            canvas.height = remaining[0].height * height;\r\n        } else {\r\n            canvas.width = self.width || 360;\r\n            canvas.height = self.height || 240;\r\n        }\r\n\r\n        if (fullcanvas && fullcanvas instanceof HTMLVideoElement) {\r\n            drawImage(fullcanvas);\r\n        }\r\n\r\n        remaining.forEach(function(video, idx) {\r\n            drawImage(video, idx);\r\n        });\r\n\r\n        setTimeout(drawVideosToCanvas, self.frameInterval);\r\n    }\r\n\r\n    function drawImage(video, idx) {\r\n        if (isStopDrawingFrames) {\r\n            return;\r\n        }\r\n\r\n        var x = 0;\r\n        var y = 0;\r\n        var width = video.width;\r\n        var height = video.height;\r\n\r\n        if (idx === 1) {\r\n            x = video.width;\r\n        }\r\n\r\n        if (idx === 2) {\r\n            y = video.height;\r\n        }\r\n\r\n        if (idx === 3) {\r\n            x = video.width;\r\n            y = video.height;\r\n        }\r\n\r\n        if (idx === 4) {\r\n            y = video.height * 2;\r\n        }\r\n\r\n        if (idx === 5) {\r\n            x = video.width;\r\n            y = video.height * 2;\r\n        }\r\n\r\n        if (idx === 6) {\r\n            y = video.height * 3;\r\n        }\r\n\r\n        if (idx === 7) {\r\n            x = video.width;\r\n            y = video.height * 3;\r\n        }\r\n\r\n        if (typeof video.stream.left !== 'undefined') {\r\n            x = video.stream.left;\r\n        }\r\n\r\n        if (typeof video.stream.top !== 'undefined') {\r\n            y = video.stream.top;\r\n        }\r\n\r\n        if (typeof video.stream.width !== 'undefined') {\r\n            width = video.stream.width;\r\n        }\r\n\r\n        if (typeof video.stream.height !== 'undefined') {\r\n            height = video.stream.height;\r\n        }\r\n\r\n        context.drawImage(video, x, y, width, height);\r\n\r\n        if (typeof video.stream.onRender === 'function') {\r\n            video.stream.onRender(context, x, y, width, height, idx);\r\n        }\r\n    }\r\n\r\n    function getMixedStream() {\r\n        isStopDrawingFrames = false;\r\n        var mixedVideoStream = getMixedVideoStream();\r\n\r\n        var mixedAudioStream = getMixedAudioStream();\r\n        if (mixedAudioStream) {\r\n            mixedAudioStream.getTracks().filter(function(t) {\r\n                return t.kind === 'audio';\r\n            }).forEach(function(track) {\r\n                mixedVideoStream.addTrack(track);\r\n            });\r\n        }\r\n\r\n        var fullcanvas;\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            if (stream.fullcanvas) {\r\n                fullcanvas = true;\r\n            }\r\n        });\r\n\r\n        // mixedVideoStream.prototype.appendStreams = appendStreams;\r\n        // mixedVideoStream.prototype.resetVideoStreams = resetVideoStreams;\r\n        // mixedVideoStream.prototype.clearRecordedData = clearRecordedData;\r\n\r\n        return mixedVideoStream;\r\n    }\r\n\r\n    function getMixedVideoStream() {\r\n        resetVideoStreams();\r\n\r\n        var capturedStream;\r\n\r\n        if ('captureStream' in canvas) {\r\n            capturedStream = canvas.captureStream();\r\n        } else if ('mozCaptureStream' in canvas) {\r\n            capturedStream = canvas.mozCaptureStream();\r\n        } else if (!self.disableLogs) {\r\n            console.error('Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features');\r\n        }\r\n\r\n        var videoStream = new MediaStream();\r\n\r\n        capturedStream.getTracks().filter(function(t) {\r\n            return t.kind === 'video';\r\n        }).forEach(function(track) {\r\n            videoStream.addTrack(track);\r\n        });\r\n\r\n        canvas.stream = videoStream;\r\n\r\n        return videoStream;\r\n    }\r\n\r\n    function getMixedAudioStream() {\r\n        // via: @pehrsons\r\n        if (!Storage.AudioContextConstructor) {\r\n            Storage.AudioContextConstructor = new Storage.AudioContext();\r\n        }\r\n\r\n        self.audioContext = Storage.AudioContextConstructor;\r\n\r\n        self.audioSources = [];\r\n\r\n        if (self.useGainNode === true) {\r\n            self.gainNode = self.audioContext.createGain();\r\n            self.gainNode.connect(self.audioContext.destination);\r\n            self.gainNode.gain.value = 0; // don't hear self\r\n        }\r\n\r\n        var audioTracksLength = 0;\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            if (!stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                }).length) {\r\n                return;\r\n            }\r\n\r\n            audioTracksLength++;\r\n\r\n            var audioSource = self.audioContext.createMediaStreamSource(stream);\r\n\r\n            if (self.useGainNode === true) {\r\n                audioSource.connect(self.gainNode);\r\n            }\r\n\r\n            self.audioSources.push(audioSource);\r\n        });\r\n\r\n        if (!audioTracksLength) {\r\n            // because \"self.audioContext\" is not initialized\r\n            // that's why we've to ignore rest of the code\r\n            return;\r\n        }\r\n\r\n        self.audioDestination = self.audioContext.createMediaStreamDestination();\r\n        self.audioSources.forEach(function(audioSource) {\r\n            audioSource.connect(self.audioDestination);\r\n        });\r\n        return self.audioDestination.stream;\r\n    }\r\n\r\n    function getVideo(stream) {\r\n        var video = document.createElement('video');\r\n\r\n        setSrcObject(stream, video);\r\n\r\n        video.className = elementClass;\r\n\r\n        video.muted = true;\r\n        video.volume = 0;\r\n\r\n        video.width = stream.width || self.width || 360;\r\n        video.height = stream.height || self.height || 240;\r\n\r\n        video.play();\r\n\r\n        return video;\r\n    }\r\n\r\n    this.appendStreams = function(streams) {\r\n        if (!streams) {\r\n            throw 'First parameter is required.';\r\n        }\r\n\r\n        if (!(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        streams.forEach(function(stream) {\r\n            var newStream = new MediaStream();\r\n\r\n            if (stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                }).length) {\r\n                var video = getVideo(stream);\r\n                video.stream = stream;\r\n                videos.push(video);\r\n\r\n                newStream.addTrack(stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                })[0]);\r\n            }\r\n\r\n            if (stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                }).length) {\r\n                var audioSource = self.audioContext.createMediaStreamSource(stream);\r\n                self.audioDestination = self.audioContext.createMediaStreamDestination();\r\n                audioSource.connect(self.audioDestination);\r\n\r\n                newStream.addTrack(self.audioDestination.stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                })[0]);\r\n            }\r\n\r\n            arrayOfMediaStreams.push(newStream);\r\n        });\r\n    };\r\n\r\n    this.releaseStreams = function() {\r\n        videos = [];\r\n        isStopDrawingFrames = true;\r\n\r\n        if (self.gainNode) {\r\n            self.gainNode.disconnect();\r\n            self.gainNode = null;\r\n        }\r\n\r\n        if (self.audioSources.length) {\r\n            self.audioSources.forEach(function(source) {\r\n                source.disconnect();\r\n            });\r\n            self.audioSources = [];\r\n        }\r\n\r\n        if (self.audioDestination) {\r\n            self.audioDestination.disconnect();\r\n            self.audioDestination = null;\r\n        }\r\n\r\n        if (self.audioContext) {\r\n            self.audioContext.close();\r\n        }\r\n\r\n        self.audioContext = null;\r\n\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        if (canvas.stream) {\r\n            canvas.stream.stop();\r\n            canvas.stream = null;\r\n        }\r\n    };\r\n\r\n    this.resetVideoStreams = function(streams) {\r\n        if (streams && !(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        resetVideoStreams(streams);\r\n    };\r\n\r\n    function resetVideoStreams(streams) {\r\n        videos = [];\r\n        streams = streams || arrayOfMediaStreams;\r\n\r\n        // via: @adrian-ber\r\n        streams.forEach(function(stream) {\r\n            if (!stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                }).length) {\r\n                return;\r\n            }\r\n\r\n            var video = getVideo(stream);\r\n            video.stream = stream;\r\n            videos.push(video);\r\n        });\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'MultiStreamsMixer';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    this.getMixedStream = getMixedStream;\r\n\r\n}\r\n\r\nif (typeof RecordRTC === 'undefined') {\r\n    if (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n        module.exports = MultiStreamsMixer;\r\n    }\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('MultiStreamsMixer', [], function() {\r\n            return MultiStreamsMixer;\r\n        });\r\n    }\r\n}\n\r\n// ______________________\r\n// MultiStreamRecorder.js\r\n\r\n/*\r\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\r\n */\r\n\r\n/**\r\n * MultiStreamRecorder can record multiple videos in single container.\r\n * @summary Multi-videos recorder.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MultiStreamRecorder\r\n * @class\r\n * @example\r\n * var options = {\r\n *     mimeType: 'video/webm'\r\n * }\r\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\r\n * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: \"video/webm\"}\r\n */\r\n\r\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\r\n    arrayOfMediaStreams = arrayOfMediaStreams || [];\r\n    var self = this;\r\n\r\n    var mixer;\r\n    var mediaRecorder;\r\n\r\n    options = options || {\r\n        elementClass: 'multi-streams-mixer',\r\n        mimeType: 'video/webm',\r\n        video: {\r\n            width: 360,\r\n            height: 240\r\n        }\r\n    };\r\n\r\n    if (!options.frameInterval) {\r\n        options.frameInterval = 10;\r\n    }\r\n\r\n    if (!options.video) {\r\n        options.video = {};\r\n    }\r\n\r\n    if (!options.video.width) {\r\n        options.video.width = 360;\r\n    }\r\n\r\n    if (!options.video.height) {\r\n        options.video.height = 240;\r\n    }\r\n\r\n    /**\r\n     * This method records all MediaStreams.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        // github/muaz-khan/MultiStreamsMixer\r\n        mixer = new MultiStreamsMixer(arrayOfMediaStreams, options.elementClass || 'multi-streams-mixer');\r\n\r\n        if (getAllVideoTracks().length) {\r\n            mixer.frameInterval = options.frameInterval || 10;\r\n            mixer.width = options.video.width || 360;\r\n            mixer.height = options.video.height || 240;\r\n            mixer.startDrawingFrames();\r\n        }\r\n\r\n        if (options.previewStream && typeof options.previewStream === 'function') {\r\n            options.previewStream(mixer.getMixedStream());\r\n        }\r\n\r\n        // record using MediaRecorder API\r\n        mediaRecorder = new MediaStreamRecorder(mixer.getMixedStream(), options);\r\n        mediaRecorder.record();\r\n    };\r\n\r\n    function getAllVideoTracks() {\r\n        var tracks = [];\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            getTracks(stream, 'video').forEach(function(track) {\r\n                tracks.push(track);\r\n            });\r\n        });\r\n        return tracks;\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        mediaRecorder.stop(function(blob) {\r\n            self.blob = blob;\r\n\r\n            callback(blob);\r\n\r\n            self.clearRecordedData();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.pause();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.resume();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.clearRecordedData();\r\n            mediaRecorder = null;\r\n        }\r\n\r\n        if (mixer) {\r\n            mixer.releaseStreams();\r\n            mixer = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add extra media-streams to existing recordings.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n     * @example\r\n     * recorder.addStreams([newAudioStream, newVideoStream]);\r\n     */\r\n    this.addStreams = function(streams) {\r\n        if (!streams) {\r\n            throw 'First parameter is required.';\r\n        }\r\n\r\n        if (!(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        arrayOfMediaStreams.concat(streams);\r\n\r\n        if (!mediaRecorder || !mixer) {\r\n            return;\r\n        }\r\n\r\n        mixer.appendStreams(streams);\r\n\r\n        if (options.previewStream && typeof options.previewStream === 'function') {\r\n            options.previewStream(mixer.getMixedStream());\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Reset videos during live recording. Replace old videos e.g. replace cameras with full-screen.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n     * @example\r\n     * recorder.resetVideoStreams([newVideo1, newVideo2]);\r\n     */\r\n    this.resetVideoStreams = function(streams) {\r\n        if (!mixer) {\r\n            return;\r\n        }\r\n\r\n        if (streams && !(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        mixer.resetVideoStreams(streams);\r\n    };\r\n\r\n    /**\r\n     * Returns MultiStreamsMixer\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * let mixer = recorder.getMixer();\r\n     * mixer.appendStreams([newStream]);\r\n     */\r\n    this.getMixer = function() {\r\n        return mixer;\r\n    };\r\n\r\n    // for debugging\r\n    this.name = 'MultiStreamRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\r\n}\n\r\n// _____________________\r\n// RecordRTC.promises.js\r\n\r\n/**\r\n * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}\r\n * @summary Promises for {@link RecordRTC}\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCPromisesHandler\r\n * @class\r\n * @example\r\n * var recorder = new RecordRTCPromisesHandler(mediaStream, options);\r\n * recorder.startRecording()\r\n *         .then(successCB)\r\n *         .catch(errorCB);\r\n * // Note: You can access all RecordRTC API using \"recorder.recordRTC\" e.g. \r\n * recorder.recordRTC.onStateChanged = function(state) {};\r\n * recorder.recordRTC.setRecordingDuration(5000);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n * @throws Will throw an error if \"new\" keyword is not used to initiate \"RecordRTCPromisesHandler\". Also throws error if first argument \"MediaStream\" is missing.\r\n * @requires {@link RecordRTC}\r\n */\r\n\r\nfunction RecordRTCPromisesHandler(mediaStream, options) {\r\n    if (!this) {\r\n        throw 'Use \"new RecordRTCPromisesHandler()\"';\r\n    }\r\n\r\n    if (typeof mediaStream === 'undefined') {\r\n        throw 'First argument \"MediaStream\" is required.';\r\n    }\r\n\r\n    var self = this;\r\n\r\n    /**\r\n     * @property {Blob} blob - Access/reach the native {@link RecordRTC} object.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let internal = recorder.recordRTC.getInternalRecorder();\r\n     * alert(internal instanceof MediaStreamRecorder);\r\n     * recorder.recordRTC.onStateChanged = function(state) {};\r\n     */\r\n    self.recordRTC = new RecordRTC(mediaStream, options);\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.startRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.startRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.startRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method stops the recording.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     var blob = recorder.getBlob();\r\n     * }).catch(errorCB);\r\n     */\r\n    this.stopRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.stopRecording(function(url) {\r\n                    self.blob = self.recordRTC.getBlob();\r\n\r\n                    if (!self.blob || !self.blob.size) {\r\n                        reject('Empty blob.', self.blob);\r\n                        return;\r\n                    }\r\n\r\n                    resolve(url);\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.pauseRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.pauseRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.pauseRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.resumeRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.resumeRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.resumeRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns data-url for the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     recorder.getDataURL().then(function(dataURL) {\r\n     *         window.open(dataURL);\r\n     *     }).catch(errorCB);;\r\n     * }).catch(errorCB);\r\n     */\r\n    this.getDataURL = function(callback) {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.getDataURL(function(dataURL) {\r\n                    resolve(dataURL);\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     recorder.getBlob().then(function(blob) {})\r\n     * }).catch(errorCB);\r\n     */\r\n    this.getBlob = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getBlob());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns the internal recording object.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let internalRecorder = await recorder.getInternalRecorder();\r\n     * if(internalRecorder instanceof MultiStreamRecorder) {\r\n     *     internalRecorder.addStreams([newAudioStream]);\r\n     *     internalRecorder.resetVideoStreams([screenStream]);\r\n     * }\r\n     * @returns {Object} \r\n     */\r\n    this.getInternalRecorder = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getInternalRecorder());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * await recorder.reset();\r\n     * recorder.startRecording(); // record again\r\n     */\r\n    this.reset = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.reset());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Destroy RecordRTC instance. Clear all recorders and objects.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.destroy().then(successCB).catch(errorCB);\r\n     */\r\n    this.destroy = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.destroy());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Get recorder's readonly state.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let state = await recorder.getState();\r\n     * // or\r\n     * recorder.getState().then(state => { console.log(state); })\r\n     * @returns {String} Returns recording state.\r\n     */\r\n    this.getState = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getState());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * await recorder.stopRecording();\r\n     * let blob = recorder.getBlob(); // or \"recorder.recordRTC.blob\"\r\n     * invokeSaveAsDialog(blob);\r\n     */\r\n    this.blob = null;\r\n\r\n    /**\r\n     * RecordRTC version number\r\n     * @property {String} version - Release version number.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @static\r\n     * @readonly\r\n     * @example\r\n     * alert(recorder.version);\r\n     */\r\n    this.version = '5.6.2';\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.RecordRTCPromisesHandler = RecordRTCPromisesHandler;\r\n}\n\r\n// ______________________\r\n// WebAssemblyRecorder.js\r\n\r\n/**\r\n * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.\r\n * @summary Video recording feature in Chrome, Firefox and maybe Edge.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WebAssemblyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WebAssemblyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}\r\n */\r\nfunction WebAssemblyRecorder(stream, config) {\r\n    // based on: github.com/GoogleChromeLabs/webm-wasm\r\n\r\n    if (typeof ReadableStream === 'undefined' || typeof WritableStream === 'undefined') {\r\n        // because it fixes readable/writable streams issues\r\n        console.error('Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js');\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    config.width = config.width || 640;\r\n    config.height = config.height || 480;\r\n    config.frameRate = config.frameRate || 30;\r\n    config.bitrate = config.bitrate || 1200;\r\n    config.realtime = config.realtime || true;\r\n\r\n    function createBufferURL(buffer, type) {\r\n        return URL.createObjectURL(new Blob([buffer], {\r\n            type: type || ''\r\n        }));\r\n    }\r\n\r\n    var finished;\r\n\r\n    function cameraStream() {\r\n        return new ReadableStream({\r\n            start: function(controller) {\r\n                var cvs = document.createElement('canvas');\r\n                var video = document.createElement('video');\r\n                var first = true;\r\n                video.srcObject = stream;\r\n                video.muted = true;\r\n                video.height = config.height;\r\n                video.width = config.width;\r\n                video.volume = 0;\r\n                video.onplaying = function() {\r\n                    cvs.width = config.width;\r\n                    cvs.height = config.height;\r\n                    var ctx = cvs.getContext('2d');\r\n                    var frameTimeout = 1000 / config.frameRate;\r\n                    var cameraTimer = setInterval(function f() {\r\n                        if (finished) {\r\n                            clearInterval(cameraTimer);\r\n                            controller.close();\r\n                        }\r\n\r\n                        if (first) {\r\n                            first = false;\r\n                            if (config.onVideoProcessStarted) {\r\n                                config.onVideoProcessStarted();\r\n                            }\r\n                        }\r\n\r\n                        ctx.drawImage(video, 0, 0);\r\n                        if (controller._controlledReadableStream.state !== 'closed') {\r\n                            try {\r\n                                controller.enqueue(\r\n                                    ctx.getImageData(0, 0, config.width, config.height)\r\n                                );\r\n                            } catch (e) {}\r\n                        }\r\n                    }, frameTimeout);\r\n                };\r\n                video.play();\r\n            }\r\n        });\r\n    }\r\n\r\n    var worker;\r\n\r\n    function startRecording(stream, buffer) {\r\n        if (!config.workerPath && !buffer) {\r\n            finished = false;\r\n\r\n            // is it safe to use @latest ?\r\n\r\n            fetch(\r\n                'https://unpkg.com/webm-wasm@latest/dist/webm-worker.js'\r\n            ).then(function(r) {\r\n                r.arrayBuffer().then(function(buffer) {\r\n                    startRecording(stream, buffer);\r\n                });\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!config.workerPath && buffer instanceof ArrayBuffer) {\r\n            var blob = new Blob([buffer], {\r\n                type: 'text/javascript'\r\n            });\r\n            config.workerPath = URL.createObjectURL(blob);\r\n        }\r\n\r\n        if (!config.workerPath) {\r\n            console.error('workerPath parameter is missing.');\r\n        }\r\n\r\n        worker = new Worker(config.workerPath);\r\n\r\n        worker.postMessage(config.webAssemblyPath || 'https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm');\r\n        worker.addEventListener('message', function(event) {\r\n            if (event.data === 'READY') {\r\n                worker.postMessage({\r\n                    width: config.width,\r\n                    height: config.height,\r\n                    bitrate: config.bitrate || 1200,\r\n                    timebaseDen: config.frameRate || 30,\r\n                    realtime: config.realtime\r\n                });\r\n\r\n                cameraStream().pipeTo(new WritableStream({\r\n                    write: function(image) {\r\n                        if (finished) {\r\n                            console.error('Got image, but recorder is finished!');\r\n                            return;\r\n                        }\r\n\r\n                        worker.postMessage(image.data.buffer, [image.data.buffer]);\r\n                    }\r\n                }));\r\n            } else if (!!event.data) {\r\n                if (!isPaused) {\r\n                    arrayOfBuffers.push(event.data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * This method records video.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        arrayOfBuffers = [];\r\n        isPaused = false;\r\n        this.blob = null;\r\n        startRecording(stream);\r\n\r\n        if (typeof config.initCallback === 'function') {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    var isPaused;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPaused = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPaused = false;\r\n    };\r\n\r\n    function terminate(callback) {\r\n        if (!worker) {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // Wait for null event data to indicate that the encoding is complete\r\n        worker.addEventListener('message', function(event) {\r\n            if (event.data === null) {\r\n                worker.terminate();\r\n                worker = null;\r\n\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        });\r\n\r\n        worker.postMessage(null);\r\n    }\r\n\r\n    var arrayOfBuffers = [];\r\n\r\n    /**\r\n     * This method stops recording video.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        finished = true;\r\n\r\n        var recorder = this;\r\n\r\n        terminate(function() {\r\n            recorder.blob = new Blob(arrayOfBuffers, {\r\n                type: 'video/webm'\r\n            });\r\n\r\n            callback(recorder.blob);\r\n        });\r\n    };\r\n\r\n    // for debugging\r\n    this.name = 'WebAssemblyRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        arrayOfBuffers = [];\r\n        isPaused = false;\r\n        this.blob = null;\r\n\r\n        // todo: if recording-ON then STOP it first\r\n    };\r\n\r\n    /**\r\n     * @property {Blob} blob - The recorded blob object.\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.stop(function(){\r\n     *     var blob = recorder.blob;\r\n     * });\r\n     */\r\n    this.blob = null;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.WebAssemblyRecorder = WebAssemblyRecorder;\r\n}\n","'use strict';\r\n\r\n// Last time updated: 2020-08-26 8:55:13 AM UTC\r\n\r\n// _________________________\r\n// RTCMultiConnection v3.7.0\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/RTCMultiConnection\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\nvar RTCMultiConnection = function(roomid, forceOptions) {\r\n\r\n    var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n    (function(that) {\r\n        if (!that) {\r\n            return;\r\n        }\r\n\r\n        if (typeof window !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (typeof global === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        global.navigator = {\r\n            userAgent: browserFakeUserAgent,\r\n            getUserMedia: function() {}\r\n        };\r\n\r\n        if (!global.console) {\r\n            global.console = {};\r\n        }\r\n\r\n        if (typeof global.console.debug === 'undefined') {\r\n            global.console.debug = global.console.info = global.console.error = global.console.log = global.console.log || function() {\r\n                console.log(arguments);\r\n            };\r\n        }\r\n\r\n        if (typeof document === 'undefined') {\r\n            /*global document:true */\r\n            that.document = {};\r\n\r\n            document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n                var obj = {\r\n                    getContext: function() {\r\n                        return obj;\r\n                    },\r\n                    play: function() {},\r\n                    pause: function() {},\r\n                    drawImage: function() {},\r\n                    toDataURL: function() {\r\n                        return '';\r\n                    }\r\n                };\r\n                return obj;\r\n            };\r\n\r\n            document.addEventListener = document.removeEventListener = that.addEventListener = that.removeEventListener = function() {};\r\n\r\n            that.HTMLVideoElement = that.HTMLMediaElement = function() {};\r\n        }\r\n\r\n        if (typeof io === 'undefined') {\r\n            that.io = function() {\r\n                return {\r\n                    on: function(eventName, callback) {\r\n                        callback = callback || function() {};\r\n\r\n                        if (eventName === 'connect') {\r\n                            callback();\r\n                        }\r\n                    },\r\n                    emit: function(eventName, data, callback) {\r\n                        callback = callback || function() {};\r\n                        if (eventName === 'open-room' || eventName === 'join-room') {\r\n                            callback(true, data.sessionid, null);\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        }\r\n\r\n        if (typeof location === 'undefined') {\r\n            /*global location:true */\r\n            that.location = {\r\n                protocol: 'file:',\r\n                href: '',\r\n                hash: '',\r\n                origin: 'self'\r\n            };\r\n        }\r\n\r\n        if (typeof screen === 'undefined') {\r\n            /*global screen:true */\r\n            that.screen = {\r\n                width: 0,\r\n                height: 0\r\n            };\r\n        }\r\n\r\n        if (typeof URL === 'undefined') {\r\n            /*global screen:true */\r\n            that.URL = {\r\n                createObjectURL: function() {\r\n                    return '';\r\n                },\r\n                revokeObjectURL: function() {\r\n                    return '';\r\n                }\r\n            };\r\n        }\r\n\r\n        /*global window:true */\r\n        that.window = global;\r\n    })(typeof global !== 'undefined' ? global : null);\r\n\r\n    function SocketConnection(connection, connectCallback) {\r\n        function isData(session) {\r\n            return !session.audio && !session.video && !session.screen && session.data;\r\n        }\r\n\r\n        var parameters = '';\r\n\r\n        parameters += '?userid=' + connection.userid;\r\n        parameters += '&sessionid=' + connection.sessionid;\r\n        parameters += '&msgEvent=' + connection.socketMessageEvent;\r\n        parameters += '&socketCustomEvent=' + connection.socketCustomEvent;\r\n        parameters += '&autoCloseEntireSession=' + !!connection.autoCloseEntireSession;\r\n\r\n        if (connection.session.broadcast === true) {\r\n            parameters += '&oneToMany=true';\r\n        }\r\n\r\n        parameters += '&maxParticipantsAllowed=' + connection.maxParticipantsAllowed;\r\n\r\n        if (connection.enableScalableBroadcast) {\r\n            parameters += '&enableScalableBroadcast=true';\r\n            parameters += '&maxRelayLimitPerUser=' + (connection.maxRelayLimitPerUser || 2);\r\n        }\r\n\r\n        parameters += '&extra=' + JSON.stringify(connection.extra || {});\r\n\r\n        if (connection.socketCustomParameters) {\r\n            parameters += connection.socketCustomParameters;\r\n        }\r\n\r\n        try {\r\n            io.sockets = {};\r\n        } catch (e) {};\r\n\r\n        if (!connection.socketURL) {\r\n            connection.socketURL = '/';\r\n        }\r\n\r\n        if (connection.socketURL.substr(connection.socketURL.length - 1, 1) != '/') {\r\n            // connection.socketURL = 'https://domain.com:9001/';\r\n            throw '\"socketURL\" MUST end with a slash.';\r\n        }\r\n\r\n        if (connection.enableLogs) {\r\n            if (connection.socketURL == '/') {\r\n                console.info('socket.io url is: ', location.origin + '/');\r\n            } else {\r\n                console.info('socket.io url is: ', connection.socketURL);\r\n            }\r\n        }\r\n\r\n        try {\r\n            connection.socket = io(connection.socketURL + parameters);\r\n        } catch (e) {\r\n            connection.socket = io.connect(connection.socketURL + parameters, connection.socketOptions);\r\n        }\r\n\r\n        var mPeer = connection.multiPeersHandler;\r\n\r\n        connection.socket.on('extra-data-updated', function(remoteUserId, extra) {\r\n            if (!connection.peers[remoteUserId]) return;\r\n            connection.peers[remoteUserId].extra = extra;\r\n\r\n            connection.onExtraDataUpdated({\r\n                userid: remoteUserId,\r\n                extra: extra\r\n            });\r\n\r\n            updateExtraBackup(remoteUserId, extra);\r\n        });\r\n\r\n        function updateExtraBackup(remoteUserId, extra) {\r\n            if (!connection.peersBackup[remoteUserId]) {\r\n                connection.peersBackup[remoteUserId] = {\r\n                    userid: remoteUserId,\r\n                    extra: {}\r\n                };\r\n            }\r\n\r\n            connection.peersBackup[remoteUserId].extra = extra;\r\n        }\r\n\r\n        function onMessageEvent(message) {\r\n            if (message.remoteUserId != connection.userid) return;\r\n\r\n            if (connection.peers[message.sender] && connection.peers[message.sender].extra != message.message.extra) {\r\n                connection.peers[message.sender].extra = message.extra;\r\n                connection.onExtraDataUpdated({\r\n                    userid: message.sender,\r\n                    extra: message.extra\r\n                });\r\n\r\n                updateExtraBackup(message.sender, message.extra);\r\n            }\r\n\r\n            if (message.message.streamSyncNeeded && connection.peers[message.sender]) {\r\n                var stream = connection.streamEvents[message.message.streamid];\r\n                if (!stream || !stream.stream) {\r\n                    return;\r\n                }\r\n\r\n                var action = message.message.action;\r\n\r\n                if (action === 'ended' || action === 'inactive' || action === 'stream-removed') {\r\n                    if (connection.peersBackup[stream.userid]) {\r\n                        stream.extra = connection.peersBackup[stream.userid].extra;\r\n                    }\r\n                    connection.onstreamended(stream);\r\n                    return;\r\n                }\r\n\r\n                var type = message.message.type != 'both' ? message.message.type : null;\r\n\r\n                if (typeof stream.stream[action] == 'function') {\r\n                    stream.stream[action](type);\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (message.message === 'dropPeerConnection') {\r\n                connection.deletePeer(message.sender);\r\n                return;\r\n            }\r\n\r\n            if (message.message.allParticipants) {\r\n                if (message.message.allParticipants.indexOf(message.sender) === -1) {\r\n                    message.message.allParticipants.push(message.sender);\r\n                }\r\n\r\n                message.message.allParticipants.forEach(function(participant) {\r\n                    mPeer[!connection.peers[participant] ? 'createNewPeer' : 'renegotiatePeer'](participant, {\r\n                        localPeerSdpConstraints: {\r\n                            OfferToReceiveAudio: connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                            OfferToReceiveVideo: connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                        },\r\n                        remotePeerSdpConstraints: {\r\n                            OfferToReceiveAudio: connection.session.oneway ? !!connection.session.audio : connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                            OfferToReceiveVideo: connection.session.oneway ? !!connection.session.video || !!connection.session.screen : connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                        },\r\n                        isOneWay: !!connection.session.oneway || connection.direction === 'one-way',\r\n                        isDataOnly: isData(connection.session)\r\n                    });\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (message.message.newParticipant) {\r\n                if (message.message.newParticipant == connection.userid) return;\r\n                if (!!connection.peers[message.message.newParticipant]) return;\r\n\r\n                mPeer.createNewPeer(message.message.newParticipant, message.message.userPreferences || {\r\n                    localPeerSdpConstraints: {\r\n                        OfferToReceiveAudio: connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                        OfferToReceiveVideo: connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                    },\r\n                    remotePeerSdpConstraints: {\r\n                        OfferToReceiveAudio: connection.session.oneway ? !!connection.session.audio : connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                        OfferToReceiveVideo: connection.session.oneway ? !!connection.session.video || !!connection.session.screen : connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                    },\r\n                    isOneWay: !!connection.session.oneway || connection.direction === 'one-way',\r\n                    isDataOnly: isData(connection.session)\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (message.message.readyForOffer) {\r\n                if (connection.attachStreams.length) {\r\n                    connection.waitingForLocalMedia = false;\r\n                }\r\n\r\n                if (connection.waitingForLocalMedia) {\r\n                    // if someone is waiting to join you\r\n                    // make sure that we've local media before making a handshake\r\n                    setTimeout(function() {\r\n                        onMessageEvent(message);\r\n                    }, 1);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (message.message.newParticipationRequest && message.sender !== connection.userid) {\r\n                if (connection.peers[message.sender]) {\r\n                    connection.deletePeer(message.sender);\r\n                }\r\n\r\n                var userPreferences = {\r\n                    extra: message.extra || {},\r\n                    localPeerSdpConstraints: message.message.remotePeerSdpConstraints || {\r\n                        OfferToReceiveAudio: connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                        OfferToReceiveVideo: connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                    },\r\n                    remotePeerSdpConstraints: message.message.localPeerSdpConstraints || {\r\n                        OfferToReceiveAudio: connection.session.oneway ? !!connection.session.audio : connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                        OfferToReceiveVideo: connection.session.oneway ? !!connection.session.video || !!connection.session.screen : connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                    },\r\n                    isOneWay: typeof message.message.isOneWay !== 'undefined' ? message.message.isOneWay : !!connection.session.oneway || connection.direction === 'one-way',\r\n                    isDataOnly: typeof message.message.isDataOnly !== 'undefined' ? message.message.isDataOnly : isData(connection.session),\r\n                    dontGetRemoteStream: typeof message.message.isOneWay !== 'undefined' ? message.message.isOneWay : !!connection.session.oneway || connection.direction === 'one-way',\r\n                    dontAttachLocalStream: !!message.message.dontGetRemoteStream,\r\n                    connectionDescription: message,\r\n                    successCallback: function() {}\r\n                };\r\n\r\n                connection.onNewParticipant(message.sender, userPreferences);\r\n                return;\r\n            }\r\n\r\n            if (message.message.changedUUID) {\r\n                if (connection.peers[message.message.oldUUID]) {\r\n                    connection.peers[message.message.newUUID] = connection.peers[message.message.oldUUID];\r\n                    delete connection.peers[message.message.oldUUID];\r\n                }\r\n            }\r\n\r\n            if (message.message.userLeft) {\r\n                mPeer.onUserLeft(message.sender);\r\n\r\n                if (!!message.message.autoCloseEntireSession) {\r\n                    connection.leave();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            mPeer.addNegotiatedMessage(message.message, message.sender);\r\n        }\r\n\r\n        connection.socket.on(connection.socketMessageEvent, onMessageEvent);\r\n\r\n        var alreadyConnected = false;\r\n\r\n        connection.socket.resetProps = function() {\r\n            alreadyConnected = false;\r\n        };\r\n\r\n        connection.socket.on('connect', function() {\r\n            if (alreadyConnected) {\r\n                return;\r\n            }\r\n            alreadyConnected = true;\r\n\r\n            if (connection.enableLogs) {\r\n                console.info('socket.io connection is opened.');\r\n            }\r\n\r\n            setTimeout(function() {\r\n                connection.socket.emit('extra-data-updated', connection.extra);\r\n            }, 1000);\r\n\r\n            if (connectCallback) {\r\n                connectCallback(connection.socket);\r\n            }\r\n        });\r\n\r\n        connection.socket.on('disconnect', function(event) {\r\n            connection.onSocketDisconnect(event);\r\n        });\r\n\r\n        connection.socket.on('error', function(event) {\r\n            connection.onSocketError(event);\r\n        });\r\n\r\n        connection.socket.on('user-disconnected', function(remoteUserId) {\r\n            if (remoteUserId === connection.userid) {\r\n                return;\r\n            }\r\n\r\n            connection.onUserStatusChanged({\r\n                userid: remoteUserId,\r\n                status: 'offline',\r\n                extra: connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra || {} : {}\r\n            });\r\n\r\n            connection.deletePeer(remoteUserId);\r\n        });\r\n\r\n        connection.socket.on('user-connected', function(userid) {\r\n            if (userid === connection.userid) {\r\n                return;\r\n            }\r\n\r\n            connection.onUserStatusChanged({\r\n                userid: userid,\r\n                status: 'online',\r\n                extra: connection.peers[userid] ? connection.peers[userid].extra || {} : {}\r\n            });\r\n        });\r\n\r\n        connection.socket.on('closed-entire-session', function(sessionid, extra) {\r\n            connection.leave();\r\n            connection.onEntireSessionClosed({\r\n                sessionid: sessionid,\r\n                userid: sessionid,\r\n                extra: extra\r\n            });\r\n        });\r\n\r\n        connection.socket.on('userid-already-taken', function(useridAlreadyTaken, yourNewUserId) {\r\n            connection.onUserIdAlreadyTaken(useridAlreadyTaken, yourNewUserId);\r\n        });\r\n\r\n        connection.socket.on('logs', function(log) {\r\n            if (!connection.enableLogs) return;\r\n            console.debug('server-logs', log);\r\n        });\r\n\r\n        connection.socket.on('number-of-broadcast-viewers-updated', function(data) {\r\n            connection.onNumberOfBroadcastViewersUpdated(data);\r\n        });\r\n\r\n        connection.socket.on('set-isInitiator-true', function(sessionid) {\r\n            if (sessionid != connection.sessionid) return;\r\n            connection.isInitiator = true;\r\n        });\r\n    }\r\n\r\n    function MultiPeers(connection) {\r\n        var self = this;\r\n\r\n        var skipPeers = ['getAllParticipants', 'getLength', 'selectFirst', 'streams', 'send', 'forEach'];\r\n        connection.peers = {\r\n            getLength: function() {\r\n                var numberOfPeers = 0;\r\n                for (var peer in this) {\r\n                    if (skipPeers.indexOf(peer) == -1) {\r\n                        numberOfPeers++;\r\n                    }\r\n                }\r\n                return numberOfPeers;\r\n            },\r\n            selectFirst: function() {\r\n                var firstPeer;\r\n                for (var peer in this) {\r\n                    if (skipPeers.indexOf(peer) == -1) {\r\n                        firstPeer = this[peer];\r\n                    }\r\n                }\r\n                return firstPeer;\r\n            },\r\n            getAllParticipants: function(sender) {\r\n                var allPeers = [];\r\n                for (var peer in this) {\r\n                    if (skipPeers.indexOf(peer) == -1 && peer != sender) {\r\n                        allPeers.push(peer);\r\n                    }\r\n                }\r\n                return allPeers;\r\n            },\r\n            forEach: function(callback) {\r\n                this.getAllParticipants().forEach(function(participant) {\r\n                    callback(connection.peers[participant]);\r\n                });\r\n            },\r\n            send: function(data, remoteUserId) {\r\n                var that = this;\r\n\r\n                if (!isNull(data.size) && !isNull(data.type)) {\r\n                    if (connection.enableFileSharing) {\r\n                        self.shareFile(data, remoteUserId);\r\n                        return;\r\n                    }\r\n\r\n                    if (typeof data !== 'string') {\r\n                        data = JSON.stringify(data);\r\n                    }\r\n                }\r\n\r\n                if (data.type !== 'text' && !(data instanceof ArrayBuffer) && !(data instanceof DataView)) {\r\n                    TextSender.send({\r\n                        text: data,\r\n                        channel: this,\r\n                        connection: connection,\r\n                        remoteUserId: remoteUserId\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                if (data.type === 'text') {\r\n                    data = JSON.stringify(data);\r\n                }\r\n\r\n                if (remoteUserId) {\r\n                    var remoteUser = connection.peers[remoteUserId];\r\n                    if (remoteUser) {\r\n                        if (!remoteUser.channels.length) {\r\n                            connection.peers[remoteUserId].createDataChannel();\r\n                            connection.renegotiate(remoteUserId);\r\n                            setTimeout(function() {\r\n                                that.send(data, remoteUserId);\r\n                            }, 3000);\r\n                            return;\r\n                        }\r\n\r\n                        remoteUser.channels.forEach(function(channel) {\r\n                            channel.send(data);\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                this.getAllParticipants().forEach(function(participant) {\r\n                    if (!that[participant].channels.length) {\r\n                        connection.peers[participant].createDataChannel();\r\n                        connection.renegotiate(participant);\r\n                        setTimeout(function() {\r\n                            that[participant].channels.forEach(function(channel) {\r\n                                channel.send(data);\r\n                            });\r\n                        }, 3000);\r\n                        return;\r\n                    }\r\n\r\n                    that[participant].channels.forEach(function(channel) {\r\n                        channel.send(data);\r\n                    });\r\n                });\r\n            }\r\n        };\r\n\r\n        this.uuid = connection.userid;\r\n\r\n        this.getLocalConfig = function(remoteSdp, remoteUserId, userPreferences) {\r\n            if (!userPreferences) {\r\n                userPreferences = {};\r\n            }\r\n\r\n            return {\r\n                streamsToShare: userPreferences.streamsToShare || {},\r\n                rtcMultiConnection: connection,\r\n                connectionDescription: userPreferences.connectionDescription,\r\n                userid: remoteUserId,\r\n                localPeerSdpConstraints: userPreferences.localPeerSdpConstraints,\r\n                remotePeerSdpConstraints: userPreferences.remotePeerSdpConstraints,\r\n                dontGetRemoteStream: !!userPreferences.dontGetRemoteStream,\r\n                dontAttachLocalStream: !!userPreferences.dontAttachLocalStream,\r\n                renegotiatingPeer: !!userPreferences.renegotiatingPeer,\r\n                peerRef: userPreferences.peerRef,\r\n                channels: userPreferences.channels || [],\r\n                onLocalSdp: function(localSdp) {\r\n                    self.onNegotiationNeeded(localSdp, remoteUserId);\r\n                },\r\n                onLocalCandidate: function(localCandidate) {\r\n                    localCandidate = OnIceCandidateHandler.processCandidates(connection, localCandidate)\r\n                    if (localCandidate) {\r\n                        self.onNegotiationNeeded(localCandidate, remoteUserId);\r\n                    }\r\n                },\r\n                remoteSdp: remoteSdp,\r\n                onDataChannelMessage: function(message) {\r\n                    if (!connection.fbr && connection.enableFileSharing) initFileBufferReader();\r\n\r\n                    if (typeof message == 'string' || !connection.enableFileSharing) {\r\n                        self.onDataChannelMessage(message, remoteUserId);\r\n                        return;\r\n                    }\r\n\r\n                    var that = this;\r\n\r\n                    if (message instanceof ArrayBuffer || message instanceof DataView) {\r\n                        connection.fbr.convertToObject(message, function(object) {\r\n                            that.onDataChannelMessage(object);\r\n                        });\r\n                        return;\r\n                    }\r\n\r\n                    if (message.readyForNextChunk) {\r\n                        connection.fbr.getNextChunk(message, function(nextChunk, isLastChunk) {\r\n                            connection.peers[remoteUserId].channels.forEach(function(channel) {\r\n                                channel.send(nextChunk);\r\n                            });\r\n                        }, remoteUserId);\r\n                        return;\r\n                    }\r\n\r\n                    if (message.chunkMissing) {\r\n                        connection.fbr.chunkMissing(message);\r\n                        return;\r\n                    }\r\n\r\n                    connection.fbr.addChunk(message, function(promptNextChunk) {\r\n                        connection.peers[remoteUserId].peer.channel.send(promptNextChunk);\r\n                    });\r\n                },\r\n                onDataChannelError: function(error) {\r\n                    self.onDataChannelError(error, remoteUserId);\r\n                },\r\n                onDataChannelOpened: function(channel) {\r\n                    self.onDataChannelOpened(channel, remoteUserId);\r\n                },\r\n                onDataChannelClosed: function(event) {\r\n                    self.onDataChannelClosed(event, remoteUserId);\r\n                },\r\n                onRemoteStream: function(stream) {\r\n                    if (connection.peers[remoteUserId]) {\r\n                        connection.peers[remoteUserId].streams.push(stream);\r\n                    }\r\n\r\n                    self.onGettingRemoteMedia(stream, remoteUserId);\r\n                },\r\n                onRemoteStreamRemoved: function(stream) {\r\n                    self.onRemovingRemoteMedia(stream, remoteUserId);\r\n                },\r\n                onPeerStateChanged: function(states) {\r\n                    self.onPeerStateChanged(states);\r\n\r\n                    if (states.iceConnectionState === 'new') {\r\n                        self.onNegotiationStarted(remoteUserId, states);\r\n                    }\r\n\r\n                    if (states.iceConnectionState === 'connected') {\r\n                        self.onNegotiationCompleted(remoteUserId, states);\r\n                    }\r\n\r\n                    if (states.iceConnectionState.search(/closed|failed/gi) !== -1) {\r\n                        self.onUserLeft(remoteUserId);\r\n                        self.disconnectWith(remoteUserId);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n\r\n        this.createNewPeer = function(remoteUserId, userPreferences) {\r\n            if (connection.maxParticipantsAllowed <= connection.getAllParticipants().length) {\r\n                return;\r\n            }\r\n\r\n            userPreferences = userPreferences || {};\r\n\r\n            if (connection.isInitiator && !!connection.session.audio && connection.session.audio === 'two-way' && !userPreferences.streamsToShare) {\r\n                userPreferences.isOneWay = false;\r\n                userPreferences.isDataOnly = false;\r\n                userPreferences.session = connection.session;\r\n            }\r\n\r\n            if (!userPreferences.isOneWay && !userPreferences.isDataOnly) {\r\n                userPreferences.isOneWay = true;\r\n                this.onNegotiationNeeded({\r\n                    enableMedia: true,\r\n                    userPreferences: userPreferences\r\n                }, remoteUserId);\r\n                return;\r\n            }\r\n\r\n            userPreferences = connection.setUserPreferences(userPreferences, remoteUserId);\r\n            var localConfig = this.getLocalConfig(null, remoteUserId, userPreferences);\r\n            connection.peers[remoteUserId] = new PeerInitiator(localConfig);\r\n        };\r\n\r\n        this.createAnsweringPeer = function(remoteSdp, remoteUserId, userPreferences) {\r\n            userPreferences = connection.setUserPreferences(userPreferences || {}, remoteUserId);\r\n\r\n            var localConfig = this.getLocalConfig(remoteSdp, remoteUserId, userPreferences);\r\n            connection.peers[remoteUserId] = new PeerInitiator(localConfig);\r\n        };\r\n\r\n        this.renegotiatePeer = function(remoteUserId, userPreferences, remoteSdp) {\r\n            if (!connection.peers[remoteUserId]) {\r\n                if (connection.enableLogs) {\r\n                    console.error('Peer (' + remoteUserId + ') does not exist. Renegotiation skipped.');\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!userPreferences) {\r\n                userPreferences = {};\r\n            }\r\n\r\n            userPreferences.renegotiatingPeer = true;\r\n            userPreferences.peerRef = connection.peers[remoteUserId].peer;\r\n            userPreferences.channels = connection.peers[remoteUserId].channels;\r\n\r\n            var localConfig = this.getLocalConfig(remoteSdp, remoteUserId, userPreferences);\r\n\r\n            connection.peers[remoteUserId] = new PeerInitiator(localConfig);\r\n        };\r\n\r\n        this.replaceTrack = function(track, remoteUserId, isVideoTrack) {\r\n            if (!connection.peers[remoteUserId]) {\r\n                throw 'This peer (' + remoteUserId + ') does not exist.';\r\n            }\r\n\r\n            var peer = connection.peers[remoteUserId].peer;\r\n\r\n            if (!!peer.getSenders && typeof peer.getSenders === 'function' && peer.getSenders().length) {\r\n                peer.getSenders().forEach(function(rtpSender) {\r\n                    if (isVideoTrack && rtpSender.track.kind === 'video') {\r\n                        connection.peers[remoteUserId].peer.lastVideoTrack = rtpSender.track;\r\n                        rtpSender.replaceTrack(track);\r\n                    }\r\n\r\n                    if (!isVideoTrack && rtpSender.track.kind === 'audio') {\r\n                        connection.peers[remoteUserId].peer.lastAudioTrack = rtpSender.track;\r\n                        rtpSender.replaceTrack(track);\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n\r\n            console.warn('RTPSender.replaceTrack is NOT supported.');\r\n            this.renegotiatePeer(remoteUserId);\r\n        };\r\n\r\n        this.onNegotiationNeeded = function(message, remoteUserId) {};\r\n        this.addNegotiatedMessage = function(message, remoteUserId) {\r\n            if (message.type && message.sdp) {\r\n                if (message.type == 'answer') {\r\n                    if (connection.peers[remoteUserId]) {\r\n                        connection.peers[remoteUserId].addRemoteSdp(message);\r\n                    }\r\n                }\r\n\r\n                if (message.type == 'offer') {\r\n                    if (message.renegotiatingPeer) {\r\n                        this.renegotiatePeer(remoteUserId, null, message);\r\n                    } else {\r\n                        this.createAnsweringPeer(message, remoteUserId);\r\n                    }\r\n                }\r\n\r\n                if (connection.enableLogs) {\r\n                    console.log('Remote peer\\'s sdp:', message.sdp);\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (message.candidate) {\r\n                if (connection.peers[remoteUserId]) {\r\n                    connection.peers[remoteUserId].addRemoteCandidate(message);\r\n                }\r\n\r\n                if (connection.enableLogs) {\r\n                    console.log('Remote peer\\'s candidate pairs:', message.candidate);\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (message.enableMedia) {\r\n                connection.session = message.userPreferences.session || connection.session;\r\n\r\n                if (connection.session.oneway && connection.attachStreams.length) {\r\n                    connection.attachStreams = [];\r\n                }\r\n\r\n                if (message.userPreferences.isDataOnly && connection.attachStreams.length) {\r\n                    connection.attachStreams.length = [];\r\n                }\r\n\r\n                var streamsToShare = {};\r\n                connection.attachStreams.forEach(function(stream) {\r\n                    streamsToShare[stream.streamid] = {\r\n                        isAudio: !!stream.isAudio,\r\n                        isVideo: !!stream.isVideo,\r\n                        isScreen: !!stream.isScreen\r\n                    };\r\n                });\r\n                message.userPreferences.streamsToShare = streamsToShare;\r\n\r\n                self.onNegotiationNeeded({\r\n                    readyForOffer: true,\r\n                    userPreferences: message.userPreferences\r\n                }, remoteUserId);\r\n            }\r\n\r\n            if (message.readyForOffer) {\r\n                connection.onReadyForOffer(remoteUserId, message.userPreferences);\r\n            }\r\n\r\n            function cb(stream) {\r\n                gumCallback(stream, message, remoteUserId);\r\n            }\r\n        };\r\n\r\n        function gumCallback(stream, message, remoteUserId) {\r\n            var streamsToShare = {};\r\n            connection.attachStreams.forEach(function(stream) {\r\n                streamsToShare[stream.streamid] = {\r\n                    isAudio: !!stream.isAudio,\r\n                    isVideo: !!stream.isVideo,\r\n                    isScreen: !!stream.isScreen\r\n                };\r\n            });\r\n            message.userPreferences.streamsToShare = streamsToShare;\r\n\r\n            self.onNegotiationNeeded({\r\n                readyForOffer: true,\r\n                userPreferences: message.userPreferences\r\n            }, remoteUserId);\r\n        }\r\n\r\n        this.onGettingRemoteMedia = function(stream, remoteUserId) {};\r\n        this.onRemovingRemoteMedia = function(stream, remoteUserId) {};\r\n        this.onGettingLocalMedia = function(localStream) {};\r\n        this.onLocalMediaError = function(error, constraints) {\r\n            connection.onMediaError(error, constraints);\r\n        };\r\n\r\n        function initFileBufferReader() {\r\n            connection.fbr = new FileBufferReader();\r\n            connection.fbr.onProgress = function(chunk) {\r\n                connection.onFileProgress(chunk);\r\n            };\r\n            connection.fbr.onBegin = function(file) {\r\n                connection.onFileStart(file);\r\n            };\r\n            connection.fbr.onEnd = function(file) {\r\n                connection.onFileEnd(file);\r\n            };\r\n        }\r\n\r\n        this.shareFile = function(file, remoteUserId) {\r\n            initFileBufferReader();\r\n\r\n            connection.fbr.readAsArrayBuffer(file, function(uuid) {\r\n                var arrayOfUsers = connection.getAllParticipants();\r\n\r\n                if (remoteUserId) {\r\n                    arrayOfUsers = [remoteUserId];\r\n                }\r\n\r\n                arrayOfUsers.forEach(function(participant) {\r\n                    connection.fbr.getNextChunk(uuid, function(nextChunk) {\r\n                        connection.peers[participant].channels.forEach(function(channel) {\r\n                            channel.send(nextChunk);\r\n                        });\r\n                    }, participant);\r\n                });\r\n            }, {\r\n                userid: connection.userid,\r\n                // extra: connection.extra,\r\n                chunkSize: DetectRTC.browser.name === 'Firefox' ? 15 * 1000 : connection.chunkSize || 0\r\n            });\r\n        };\r\n\r\n        if (typeof 'TextReceiver' !== 'undefined') {\r\n            var textReceiver = new TextReceiver(connection);\r\n        }\r\n\r\n        this.onDataChannelMessage = function(message, remoteUserId) {\r\n            textReceiver.receive(JSON.parse(message), remoteUserId, connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra : {});\r\n        };\r\n\r\n        this.onDataChannelClosed = function(event, remoteUserId) {\r\n            event.userid = remoteUserId;\r\n            event.extra = connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra : {};\r\n            connection.onclose(event);\r\n        };\r\n\r\n        this.onDataChannelError = function(error, remoteUserId) {\r\n            error.userid = remoteUserId;\r\n            event.extra = connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra : {};\r\n            connection.onerror(error);\r\n        };\r\n\r\n        this.onDataChannelOpened = function(channel, remoteUserId) {\r\n            // keep last channel only; we are not expecting parallel/channels channels\r\n            if (connection.peers[remoteUserId].channels.length) {\r\n                connection.peers[remoteUserId].channels = [channel];\r\n                return;\r\n            }\r\n\r\n            connection.peers[remoteUserId].channels.push(channel);\r\n            connection.onopen({\r\n                userid: remoteUserId,\r\n                extra: connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra : {},\r\n                channel: channel\r\n            });\r\n        };\r\n\r\n        this.onPeerStateChanged = function(state) {\r\n            connection.onPeerStateChanged(state);\r\n        };\r\n\r\n        this.onNegotiationStarted = function(remoteUserId, states) {};\r\n        this.onNegotiationCompleted = function(remoteUserId, states) {};\r\n\r\n        this.getRemoteStreams = function(remoteUserId) {\r\n            remoteUserId = remoteUserId || connection.peers.getAllParticipants()[0];\r\n            return connection.peers[remoteUserId] ? connection.peers[remoteUserId].streams : [];\r\n        };\r\n    }\r\n\r\n    'use strict';\r\n\r\n    // Last Updated On: 2019-01-10 5:32:55 AM UTC\r\n\r\n    // ________________\r\n    // DetectRTC v1.3.9\r\n\r\n    // Open-Sourced: https://github.com/muaz-khan/DetectRTC\r\n\r\n    // --------------------------------------------------\r\n    // Muaz Khan     - www.MuazKhan.com\r\n    // MIT License   - www.WebRTC-Experiment.com/licence\r\n    // --------------------------------------------------\r\n\r\n    (function() {\r\n\r\n        var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n        var isNodejs = typeof process === 'object' && typeof process.versions === 'object' && process.versions.node && /*node-process*/ !process.browser;\r\n        if (isNodejs) {\r\n            var version = process.versions.node.toString().replace('v', '');\r\n            browserFakeUserAgent = 'Nodejs/' + version + ' (NodeOS) AppleWebKit/' + version + ' (KHTML, like Gecko) Nodejs/' + version + ' Nodejs/' + version\r\n        }\r\n\r\n        (function(that) {\r\n            if (typeof window !== 'undefined') {\r\n                return;\r\n            }\r\n\r\n            if (typeof window === 'undefined' && typeof global !== 'undefined') {\r\n                global.navigator = {\r\n                    userAgent: browserFakeUserAgent,\r\n                    getUserMedia: function() {}\r\n                };\r\n\r\n                /*global window:true */\r\n                that.window = global;\r\n            } else if (typeof window === 'undefined') {\r\n                // window = this;\r\n            }\r\n\r\n            if (typeof location === 'undefined') {\r\n                /*global location:true */\r\n                that.location = {\r\n                    protocol: 'file:',\r\n                    href: '',\r\n                    hash: ''\r\n                };\r\n            }\r\n\r\n            if (typeof screen === 'undefined') {\r\n                /*global screen:true */\r\n                that.screen = {\r\n                    width: 0,\r\n                    height: 0\r\n                };\r\n            }\r\n        })(typeof global !== 'undefined' ? global : window);\r\n\r\n        /*global navigator:true */\r\n        var navigator = window.navigator;\r\n\r\n        if (typeof navigator !== 'undefined') {\r\n            if (typeof navigator.webkitGetUserMedia !== 'undefined') {\r\n                navigator.getUserMedia = navigator.webkitGetUserMedia;\r\n            }\r\n\r\n            if (typeof navigator.mozGetUserMedia !== 'undefined') {\r\n                navigator.getUserMedia = navigator.mozGetUserMedia;\r\n            }\r\n        } else {\r\n            navigator = {\r\n                getUserMedia: function() {},\r\n                userAgent: browserFakeUserAgent\r\n            };\r\n        }\r\n\r\n        var isMobileDevice = !!(/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(navigator.userAgent || ''));\r\n\r\n        var isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveOrOpenBlob || !!navigator.msSaveBlob);\r\n\r\n        var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\r\n        var isFirefox = typeof window.InstallTrigger !== 'undefined';\r\n        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n        var isChrome = !!window.chrome && !isOpera;\r\n        var isIE = typeof document !== 'undefined' && !!document.documentMode && !isEdge;\r\n\r\n        // this one can also be used:\r\n        // https://www.websocket.org/js/stuff.js (DetectBrowser.js)\r\n\r\n        function getBrowserInfo() {\r\n            var nVer = navigator.appVersion;\r\n            var nAgt = navigator.userAgent;\r\n            var browserName = navigator.appName;\r\n            var fullVersion = '' + parseFloat(navigator.appVersion);\r\n            var majorVersion = parseInt(navigator.appVersion, 10);\r\n            var nameOffset, verOffset, ix;\r\n\r\n            // both and safri and chrome has same userAgent\r\n            if (isSafari && !isChrome && nAgt.indexOf('CriOS') !== -1) {\r\n                isSafari = false;\r\n                isChrome = true;\r\n            }\r\n\r\n            // In Opera, the true version is after 'Opera' or after 'Version'\r\n            if (isOpera) {\r\n                browserName = 'Opera';\r\n                try {\r\n                    fullVersion = navigator.userAgent.split('OPR/')[1].split(' ')[0];\r\n                    majorVersion = fullVersion.split('.')[0];\r\n                } catch (e) {\r\n                    fullVersion = '0.0.0.0';\r\n                    majorVersion = 0;\r\n                }\r\n            }\r\n            // In MSIE version <=10, the true version is after 'MSIE' in userAgent\r\n            // In IE 11, look for the string after 'rv:'\r\n            else if (isIE) {\r\n                verOffset = nAgt.indexOf('rv:');\r\n                if (verOffset > 0) { //IE 11\r\n                    fullVersion = nAgt.substring(verOffset + 3);\r\n                } else { //IE 10 or earlier\r\n                    verOffset = nAgt.indexOf('MSIE');\r\n                    fullVersion = nAgt.substring(verOffset + 5);\r\n                }\r\n                browserName = 'IE';\r\n            }\r\n            // In Chrome, the true version is after 'Chrome' \r\n            else if (isChrome) {\r\n                verOffset = nAgt.indexOf('Chrome');\r\n                browserName = 'Chrome';\r\n                fullVersion = nAgt.substring(verOffset + 7);\r\n            }\r\n            // In Safari, the true version is after 'Safari' or after 'Version' \r\n            else if (isSafari) {\r\n                verOffset = nAgt.indexOf('Safari');\r\n\r\n                browserName = 'Safari';\r\n                fullVersion = nAgt.substring(verOffset + 7);\r\n\r\n                if ((verOffset = nAgt.indexOf('Version')) !== -1) {\r\n                    fullVersion = nAgt.substring(verOffset + 8);\r\n                }\r\n\r\n                if (navigator.userAgent.indexOf('Version/') !== -1) {\r\n                    fullVersion = navigator.userAgent.split('Version/')[1].split(' ')[0];\r\n                }\r\n            }\r\n            // In Firefox, the true version is after 'Firefox' \r\n            else if (isFirefox) {\r\n                verOffset = nAgt.indexOf('Firefox');\r\n                browserName = 'Firefox';\r\n                fullVersion = nAgt.substring(verOffset + 8);\r\n            }\r\n\r\n            // In most other browsers, 'name/version' is at the end of userAgent \r\n            else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {\r\n                browserName = nAgt.substring(nameOffset, verOffset);\r\n                fullVersion = nAgt.substring(verOffset + 1);\r\n\r\n                if (browserName.toLowerCase() === browserName.toUpperCase()) {\r\n                    browserName = navigator.appName;\r\n                }\r\n            }\r\n\r\n            if (isEdge) {\r\n                browserName = 'Edge';\r\n                fullVersion = navigator.userAgent.split('Edge/')[1];\r\n                // fullVersion = parseInt(navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)[2], 10).toString();\r\n            }\r\n\r\n            // trim the fullVersion string at semicolon/space/bracket if present\r\n            if ((ix = fullVersion.search(/[; \\)]/)) !== -1) {\r\n                fullVersion = fullVersion.substring(0, ix);\r\n            }\r\n\r\n            majorVersion = parseInt('' + fullVersion, 10);\r\n\r\n            if (isNaN(majorVersion)) {\r\n                fullVersion = '' + parseFloat(navigator.appVersion);\r\n                majorVersion = parseInt(navigator.appVersion, 10);\r\n            }\r\n\r\n            return {\r\n                fullVersion: fullVersion,\r\n                version: majorVersion,\r\n                name: browserName,\r\n                isPrivateBrowsing: false\r\n            };\r\n        }\r\n\r\n        // via: https://gist.github.com/cou929/7973956\r\n\r\n        function retry(isDone, next) {\r\n            var currentTrial = 0,\r\n                maxRetry = 50,\r\n                interval = 10,\r\n                isTimeout = false;\r\n            var id = window.setInterval(\r\n                function() {\r\n                    if (isDone()) {\r\n                        window.clearInterval(id);\r\n                        next(isTimeout);\r\n                    }\r\n                    if (currentTrial++ > maxRetry) {\r\n                        window.clearInterval(id);\r\n                        isTimeout = true;\r\n                        next(isTimeout);\r\n                    }\r\n                },\r\n                10\r\n            );\r\n        }\r\n\r\n        function isIE10OrLater(userAgent) {\r\n            var ua = userAgent.toLowerCase();\r\n            if (ua.indexOf('msie') === 0 && ua.indexOf('trident') === 0) {\r\n                return false;\r\n            }\r\n            var match = /(?:msie|rv:)\\s?([\\d\\.]+)/.exec(ua);\r\n            if (match && parseInt(match[1], 10) >= 10) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function detectPrivateMode(callback) {\r\n            var isPrivate;\r\n\r\n            try {\r\n\r\n                if (window.webkitRequestFileSystem) {\r\n                    window.webkitRequestFileSystem(\r\n                        window.TEMPORARY, 1,\r\n                        function() {\r\n                            isPrivate = false;\r\n                        },\r\n                        function(e) {\r\n                            isPrivate = true;\r\n                        }\r\n                    );\r\n                } else if (window.indexedDB && /Firefox/.test(window.navigator.userAgent)) {\r\n                    var db;\r\n                    try {\r\n                        db = window.indexedDB.open('test');\r\n                        db.onerror = function() {\r\n                            return true;\r\n                        };\r\n                    } catch (e) {\r\n                        isPrivate = true;\r\n                    }\r\n\r\n                    if (typeof isPrivate === 'undefined') {\r\n                        retry(\r\n                            function isDone() {\r\n                                return db.readyState === 'done' ? true : false;\r\n                            },\r\n                            function next(isTimeout) {\r\n                                if (!isTimeout) {\r\n                                    isPrivate = db.result ? false : true;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                } else if (isIE10OrLater(window.navigator.userAgent)) {\r\n                    isPrivate = false;\r\n                    try {\r\n                        if (!window.indexedDB) {\r\n                            isPrivate = true;\r\n                        }\r\n                    } catch (e) {\r\n                        isPrivate = true;\r\n                    }\r\n                } else if (window.localStorage && /Safari/.test(window.navigator.userAgent)) {\r\n                    try {\r\n                        window.localStorage.setItem('test', 1);\r\n                    } catch (e) {\r\n                        isPrivate = true;\r\n                    }\r\n\r\n                    if (typeof isPrivate === 'undefined') {\r\n                        isPrivate = false;\r\n                        window.localStorage.removeItem('test');\r\n                    }\r\n                }\r\n\r\n            } catch (e) {\r\n                isPrivate = false;\r\n            }\r\n\r\n            retry(\r\n                function isDone() {\r\n                    return typeof isPrivate !== 'undefined' ? true : false;\r\n                },\r\n                function next(isTimeout) {\r\n                    callback(isPrivate);\r\n                }\r\n            );\r\n        }\r\n\r\n        var isMobile = {\r\n            Android: function() {\r\n                return navigator.userAgent.match(/Android/i);\r\n            },\r\n            BlackBerry: function() {\r\n                return navigator.userAgent.match(/BlackBerry|BB10/i);\r\n            },\r\n            iOS: function() {\r\n                return navigator.userAgent.match(/iPhone|iPad|iPod/i);\r\n            },\r\n            Opera: function() {\r\n                return navigator.userAgent.match(/Opera Mini/i);\r\n            },\r\n            Windows: function() {\r\n                return navigator.userAgent.match(/IEMobile/i);\r\n            },\r\n            any: function() {\r\n                return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\r\n            },\r\n            getOsName: function() {\r\n                var osName = 'Unknown OS';\r\n                if (isMobile.Android()) {\r\n                    osName = 'Android';\r\n                }\r\n\r\n                if (isMobile.BlackBerry()) {\r\n                    osName = 'BlackBerry';\r\n                }\r\n\r\n                if (isMobile.iOS()) {\r\n                    osName = 'iOS';\r\n                }\r\n\r\n                if (isMobile.Opera()) {\r\n                    osName = 'Opera Mini';\r\n                }\r\n\r\n                if (isMobile.Windows()) {\r\n                    osName = 'Windows';\r\n                }\r\n\r\n                return osName;\r\n            }\r\n        };\r\n\r\n        // via: http://jsfiddle.net/ChristianL/AVyND/\r\n        function detectDesktopOS() {\r\n            var unknown = '-';\r\n\r\n            var nVer = navigator.appVersion;\r\n            var nAgt = navigator.userAgent;\r\n\r\n            var os = unknown;\r\n            var clientStrings = [{\r\n                s: 'Windows 10',\r\n                r: /(Windows 10.0|Windows NT 10.0)/\r\n            }, {\r\n                s: 'Windows 8.1',\r\n                r: /(Windows 8.1|Windows NT 6.3)/\r\n            }, {\r\n                s: 'Windows 8',\r\n                r: /(Windows 8|Windows NT 6.2)/\r\n            }, {\r\n                s: 'Windows 7',\r\n                r: /(Windows 7|Windows NT 6.1)/\r\n            }, {\r\n                s: 'Windows Vista',\r\n                r: /Windows NT 6.0/\r\n            }, {\r\n                s: 'Windows Server 2003',\r\n                r: /Windows NT 5.2/\r\n            }, {\r\n                s: 'Windows XP',\r\n                r: /(Windows NT 5.1|Windows XP)/\r\n            }, {\r\n                s: 'Windows 2000',\r\n                r: /(Windows NT 5.0|Windows 2000)/\r\n            }, {\r\n                s: 'Windows ME',\r\n                r: /(Win 9x 4.90|Windows ME)/\r\n            }, {\r\n                s: 'Windows 98',\r\n                r: /(Windows 98|Win98)/\r\n            }, {\r\n                s: 'Windows 95',\r\n                r: /(Windows 95|Win95|Windows_95)/\r\n            }, {\r\n                s: 'Windows NT 4.0',\r\n                r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/\r\n            }, {\r\n                s: 'Windows CE',\r\n                r: /Windows CE/\r\n            }, {\r\n                s: 'Windows 3.11',\r\n                r: /Win16/\r\n            }, {\r\n                s: 'Android',\r\n                r: /Android/\r\n            }, {\r\n                s: 'Open BSD',\r\n                r: /OpenBSD/\r\n            }, {\r\n                s: 'Sun OS',\r\n                r: /SunOS/\r\n            }, {\r\n                s: 'Linux',\r\n                r: /(Linux|X11)/\r\n            }, {\r\n                s: 'iOS',\r\n                r: /(iPhone|iPad|iPod)/\r\n            }, {\r\n                s: 'Mac OS X',\r\n                r: /Mac OS X/\r\n            }, {\r\n                s: 'Mac OS',\r\n                r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/\r\n            }, {\r\n                s: 'QNX',\r\n                r: /QNX/\r\n            }, {\r\n                s: 'UNIX',\r\n                r: /UNIX/\r\n            }, {\r\n                s: 'BeOS',\r\n                r: /BeOS/\r\n            }, {\r\n                s: 'OS/2',\r\n                r: /OS\\/2/\r\n            }, {\r\n                s: 'Search Bot',\r\n                r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/\r\n            }];\r\n            for (var i = 0, cs; cs = clientStrings[i]; i++) {\r\n                if (cs.r.test(nAgt)) {\r\n                    os = cs.s;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            var osVersion = unknown;\r\n\r\n            if (/Windows/.test(os)) {\r\n                if (/Windows (.*)/.test(os)) {\r\n                    osVersion = /Windows (.*)/.exec(os)[1];\r\n                }\r\n                os = 'Windows';\r\n            }\r\n\r\n            switch (os) {\r\n                case 'Mac OS X':\r\n                    if (/Mac OS X (10[\\.\\_\\d]+)/.test(nAgt)) {\r\n                        osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                    }\r\n                    break;\r\n                case 'Android':\r\n                    if (/Android ([\\.\\_\\d]+)/.test(nAgt)) {\r\n                        osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                    }\r\n                    break;\r\n                case 'iOS':\r\n                    if (/OS (\\d+)_(\\d+)_?(\\d+)?/.test(nAgt)) {\r\n                        osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\r\n                        osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            return {\r\n                osName: os,\r\n                osVersion: osVersion\r\n            };\r\n        }\r\n\r\n        var osName = 'Unknown OS';\r\n        var osVersion = 'Unknown OS Version';\r\n\r\n        function getAndroidVersion(ua) {\r\n            ua = (ua || navigator.userAgent).toLowerCase();\r\n            var match = ua.match(/android\\s([0-9\\.]*)/);\r\n            return match ? match[1] : false;\r\n        }\r\n\r\n        var osInfo = detectDesktopOS();\r\n\r\n        if (osInfo && osInfo.osName && osInfo.osName != '-') {\r\n            osName = osInfo.osName;\r\n            osVersion = osInfo.osVersion;\r\n        } else if (isMobile.any()) {\r\n            osName = isMobile.getOsName();\r\n\r\n            if (osName == 'Android') {\r\n                osVersion = getAndroidVersion();\r\n            }\r\n        }\r\n\r\n        var isNodejs = typeof process === 'object' && typeof process.versions === 'object' && process.versions.node;\r\n\r\n        if (osName === 'Unknown OS' && isNodejs) {\r\n            osName = 'Nodejs';\r\n            osVersion = process.versions.node.toString().replace('v', '');\r\n        }\r\n\r\n        var isCanvasSupportsStreamCapturing = false;\r\n        var isVideoSupportsStreamCapturing = false;\r\n        ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function(item) {\r\n            if (typeof document === 'undefined' || typeof document.createElement !== 'function') {\r\n                return;\r\n            }\r\n\r\n            if (!isCanvasSupportsStreamCapturing && item in document.createElement('canvas')) {\r\n                isCanvasSupportsStreamCapturing = true;\r\n            }\r\n\r\n            if (!isVideoSupportsStreamCapturing && item in document.createElement('video')) {\r\n                isVideoSupportsStreamCapturing = true;\r\n            }\r\n        });\r\n\r\n        var regexIpv4Local = /^(192\\.168\\.|169\\.254\\.|10\\.|172\\.(1[6-9]|2\\d|3[01]))/,\r\n            regexIpv4 = /([0-9]{1,3}(\\.[0-9]{1,3}){3})/,\r\n            regexIpv6 = /[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;\r\n\r\n        // via: https://github.com/diafygi/webrtc-ips\r\n        function DetectLocalIPAddress(callback, stream) {\r\n            if (!DetectRTC.isWebRTCSupported) {\r\n                return;\r\n            }\r\n\r\n            var isPublic = true,\r\n                isIpv4 = true;\r\n            getIPs(function(ip) {\r\n                if (!ip) {\r\n                    callback(); // Pass nothing to tell that ICE-gathering-ended\r\n                } else if (ip.match(regexIpv4Local)) {\r\n                    isPublic = false;\r\n                    callback('Local: ' + ip, isPublic, isIpv4);\r\n                } else if (ip.match(regexIpv6)) { //via https://ourcodeworld.com/articles/read/257/how-to-get-the-client-ip-address-with-javascript-only\r\n                    isIpv4 = false;\r\n                    callback('Public: ' + ip, isPublic, isIpv4);\r\n                } else {\r\n                    callback('Public: ' + ip, isPublic, isIpv4);\r\n                }\r\n            }, stream);\r\n        }\r\n\r\n        function getIPs(callback, stream) {\r\n            if (typeof document === 'undefined' || typeof document.getElementById !== 'function') {\r\n                return;\r\n            }\r\n\r\n            var ipDuplicates = {};\r\n\r\n            var RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\r\n\r\n            if (!RTCPeerConnection) {\r\n                var iframe = document.getElementById('iframe');\r\n                if (!iframe) {\r\n                    return;\r\n                }\r\n                var win = iframe.contentWindow;\r\n                RTCPeerConnection = win.RTCPeerConnection || win.mozRTCPeerConnection || win.webkitRTCPeerConnection;\r\n            }\r\n\r\n            if (!RTCPeerConnection) {\r\n                return;\r\n            }\r\n\r\n            var peerConfig = null;\r\n\r\n            if (DetectRTC.browser === 'Chrome' && DetectRTC.browser.version < 58) {\r\n                // todo: add support for older Opera\r\n                peerConfig = {\r\n                    optional: [{\r\n                        RtpDataChannels: true\r\n                    }]\r\n                };\r\n            }\r\n\r\n            var servers = {\r\n                iceServers: [{\r\n                    urls: 'stun:stun.l.google.com:19302'\r\n                }]\r\n            };\r\n\r\n            var pc = new RTCPeerConnection(servers, peerConfig);\r\n\r\n            if (stream) {\r\n                if (pc.addStream) {\r\n                    pc.addStream(stream);\r\n                } else if (pc.addTrack && stream.getTracks()[0]) {\r\n                    pc.addTrack(stream.getTracks()[0], stream);\r\n                }\r\n            }\r\n\r\n            function handleCandidate(candidate) {\r\n                if (!candidate) {\r\n                    callback(); // Pass nothing to tell that ICE-gathering-ended\r\n                    return;\r\n                }\r\n\r\n                var match = regexIpv4.exec(candidate);\r\n                if (!match) {\r\n                    return;\r\n                }\r\n                var ipAddress = match[1];\r\n                var isPublic = (candidate.match(regexIpv4Local)),\r\n                    isIpv4 = true;\r\n\r\n                if (ipDuplicates[ipAddress] === undefined) {\r\n                    callback(ipAddress, isPublic, isIpv4);\r\n                }\r\n\r\n                ipDuplicates[ipAddress] = true;\r\n            }\r\n\r\n            // listen for candidate events\r\n            pc.onicecandidate = function(event) {\r\n                if (event.candidate && event.candidate.candidate) {\r\n                    handleCandidate(event.candidate.candidate);\r\n                } else {\r\n                    handleCandidate(); // Pass nothing to tell that ICE-gathering-ended\r\n                }\r\n            };\r\n\r\n            // create data channel\r\n            if (!stream) {\r\n                try {\r\n                    pc.createDataChannel('sctp', {});\r\n                } catch (e) {}\r\n            }\r\n\r\n            // create an offer sdp\r\n            if (DetectRTC.isPromisesSupported) {\r\n                pc.createOffer().then(function(result) {\r\n                    pc.setLocalDescription(result).then(afterCreateOffer);\r\n                });\r\n            } else {\r\n                pc.createOffer(function(result) {\r\n                    pc.setLocalDescription(result, afterCreateOffer, function() {});\r\n                }, function() {});\r\n            }\r\n\r\n            function afterCreateOffer() {\r\n                var lines = pc.localDescription.sdp.split('\\n');\r\n\r\n                lines.forEach(function(line) {\r\n                    if (line && line.indexOf('a=candidate:') === 0) {\r\n                        handleCandidate(line);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        var MediaDevices = [];\r\n\r\n        var audioInputDevices = [];\r\n        var audioOutputDevices = [];\r\n        var videoInputDevices = [];\r\n\r\n        if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\r\n            // Firefox 38+ seems having support of enumerateDevices\r\n            // Thanks @xdumaine/enumerateDevices\r\n            navigator.enumerateDevices = function(callback) {\r\n                var enumerateDevices = navigator.mediaDevices.enumerateDevices();\r\n                if (enumerateDevices && enumerateDevices.then) {\r\n                    navigator.mediaDevices.enumerateDevices().then(callback).catch(function() {\r\n                        callback([]);\r\n                    });\r\n                } else {\r\n                    callback([]);\r\n                }\r\n            };\r\n        }\r\n\r\n        // Media Devices detection\r\n        var canEnumerate = false;\r\n\r\n        /*global MediaStreamTrack:true */\r\n        if (typeof MediaStreamTrack !== 'undefined' && 'getSources' in MediaStreamTrack) {\r\n            canEnumerate = true;\r\n        } else if (navigator.mediaDevices && !!navigator.mediaDevices.enumerateDevices) {\r\n            canEnumerate = true;\r\n        }\r\n\r\n        var hasMicrophone = false;\r\n        var hasSpeakers = false;\r\n        var hasWebcam = false;\r\n\r\n        var isWebsiteHasMicrophonePermissions = false;\r\n        var isWebsiteHasWebcamPermissions = false;\r\n\r\n        // http://dev.w3.org/2011/webrtc/editor/getusermedia.html#mediadevices\r\n        function checkDeviceSupport(callback) {\r\n            if (!canEnumerate) {\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!navigator.enumerateDevices && window.MediaStreamTrack && window.MediaStreamTrack.getSources) {\r\n                navigator.enumerateDevices = window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack);\r\n            }\r\n\r\n            if (!navigator.enumerateDevices && navigator.enumerateDevices) {\r\n                navigator.enumerateDevices = navigator.enumerateDevices.bind(navigator);\r\n            }\r\n\r\n            if (!navigator.enumerateDevices) {\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n                return;\r\n            }\r\n\r\n            MediaDevices = [];\r\n\r\n            audioInputDevices = [];\r\n            audioOutputDevices = [];\r\n            videoInputDevices = [];\r\n\r\n            hasMicrophone = false;\r\n            hasSpeakers = false;\r\n            hasWebcam = false;\r\n\r\n            isWebsiteHasMicrophonePermissions = false;\r\n            isWebsiteHasWebcamPermissions = false;\r\n\r\n            // to prevent duplication\r\n            var alreadyUsedDevices = {};\r\n\r\n            navigator.enumerateDevices(function(devices) {\r\n                devices.forEach(function(_device) {\r\n                    var device = {};\r\n                    for (var d in _device) {\r\n                        try {\r\n                            if (typeof _device[d] !== 'function') {\r\n                                device[d] = _device[d];\r\n                            }\r\n                        } catch (e) {}\r\n                    }\r\n\r\n                    if (alreadyUsedDevices[device.deviceId + device.label + device.kind]) {\r\n                        return;\r\n                    }\r\n\r\n                    // if it is MediaStreamTrack.getSources\r\n                    if (device.kind === 'audio') {\r\n                        device.kind = 'audioinput';\r\n                    }\r\n\r\n                    if (device.kind === 'video') {\r\n                        device.kind = 'videoinput';\r\n                    }\r\n\r\n                    if (!device.deviceId) {\r\n                        device.deviceId = device.id;\r\n                    }\r\n\r\n                    if (!device.id) {\r\n                        device.id = device.deviceId;\r\n                    }\r\n\r\n                    if (!device.label) {\r\n                        device.isCustomLabel = true;\r\n\r\n                        if (device.kind === 'videoinput') {\r\n                            device.label = 'Camera ' + (videoInputDevices.length + 1);\r\n                        } else if (device.kind === 'audioinput') {\r\n                            device.label = 'Microphone ' + (audioInputDevices.length + 1);\r\n                        } else if (device.kind === 'audiooutput') {\r\n                            device.label = 'Speaker ' + (audioOutputDevices.length + 1);\r\n                        } else {\r\n                            device.label = 'Please invoke getUserMedia once.';\r\n                        }\r\n\r\n                        if (typeof DetectRTC !== 'undefined' && DetectRTC.browser.isChrome && DetectRTC.browser.version >= 46 && !/^(https:|chrome-extension:)$/g.test(location.protocol || '')) {\r\n                            if (typeof document !== 'undefined' && typeof document.domain === 'string' && document.domain.search && document.domain.search(/localhost|127.0./g) === -1) {\r\n                                device.label = 'HTTPs is required to get label of this ' + device.kind + ' device.';\r\n                            }\r\n                        }\r\n                    } else {\r\n                        // Firefox on Android still returns empty label\r\n                        if (device.kind === 'videoinput' && !isWebsiteHasWebcamPermissions) {\r\n                            isWebsiteHasWebcamPermissions = true;\r\n                        }\r\n\r\n                        if (device.kind === 'audioinput' && !isWebsiteHasMicrophonePermissions) {\r\n                            isWebsiteHasMicrophonePermissions = true;\r\n                        }\r\n                    }\r\n\r\n                    if (device.kind === 'audioinput') {\r\n                        hasMicrophone = true;\r\n\r\n                        if (audioInputDevices.indexOf(device) === -1) {\r\n                            audioInputDevices.push(device);\r\n                        }\r\n                    }\r\n\r\n                    if (device.kind === 'audiooutput') {\r\n                        hasSpeakers = true;\r\n\r\n                        if (audioOutputDevices.indexOf(device) === -1) {\r\n                            audioOutputDevices.push(device);\r\n                        }\r\n                    }\r\n\r\n                    if (device.kind === 'videoinput') {\r\n                        hasWebcam = true;\r\n\r\n                        if (videoInputDevices.indexOf(device) === -1) {\r\n                            videoInputDevices.push(device);\r\n                        }\r\n                    }\r\n\r\n                    // there is no 'videoouput' in the spec.\r\n                    MediaDevices.push(device);\r\n\r\n                    alreadyUsedDevices[device.deviceId + device.label + device.kind] = device;\r\n                });\r\n\r\n                if (typeof DetectRTC !== 'undefined') {\r\n                    // to sync latest outputs\r\n                    DetectRTC.MediaDevices = MediaDevices;\r\n                    DetectRTC.hasMicrophone = hasMicrophone;\r\n                    DetectRTC.hasSpeakers = hasSpeakers;\r\n                    DetectRTC.hasWebcam = hasWebcam;\r\n\r\n                    DetectRTC.isWebsiteHasWebcamPermissions = isWebsiteHasWebcamPermissions;\r\n                    DetectRTC.isWebsiteHasMicrophonePermissions = isWebsiteHasMicrophonePermissions;\r\n\r\n                    DetectRTC.audioInputDevices = audioInputDevices;\r\n                    DetectRTC.audioOutputDevices = audioOutputDevices;\r\n                    DetectRTC.videoInputDevices = videoInputDevices;\r\n                }\r\n\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            });\r\n        }\r\n\r\n        var DetectRTC = window.DetectRTC || {};\r\n\r\n        // ----------\r\n        // DetectRTC.browser.name || DetectRTC.browser.version || DetectRTC.browser.fullVersion\r\n        DetectRTC.browser = getBrowserInfo();\r\n\r\n        detectPrivateMode(function(isPrivateBrowsing) {\r\n            DetectRTC.browser.isPrivateBrowsing = !!isPrivateBrowsing;\r\n        });\r\n\r\n        // DetectRTC.isChrome || DetectRTC.isFirefox || DetectRTC.isEdge\r\n        DetectRTC.browser['is' + DetectRTC.browser.name] = true;\r\n\r\n        // -----------\r\n        DetectRTC.osName = osName;\r\n        DetectRTC.osVersion = osVersion;\r\n\r\n        var isNodeWebkit = typeof process === 'object' && typeof process.versions === 'object' && process.versions['node-webkit'];\r\n\r\n        // --------- Detect if system supports WebRTC 1.0 or WebRTC 1.1.\r\n        var isWebRTCSupported = false;\r\n        ['RTCPeerConnection', 'webkitRTCPeerConnection', 'mozRTCPeerConnection', 'RTCIceGatherer'].forEach(function(item) {\r\n            if (isWebRTCSupported) {\r\n                return;\r\n            }\r\n\r\n            if (item in window) {\r\n                isWebRTCSupported = true;\r\n            }\r\n        });\r\n        DetectRTC.isWebRTCSupported = isWebRTCSupported;\r\n\r\n        //-------\r\n        DetectRTC.isORTCSupported = typeof RTCIceGatherer !== 'undefined';\r\n\r\n        // --------- Detect if system supports screen capturing API\r\n        var isScreenCapturingSupported = false;\r\n        if (DetectRTC.browser.isChrome && DetectRTC.browser.version >= 35) {\r\n            isScreenCapturingSupported = true;\r\n        } else if (DetectRTC.browser.isFirefox && DetectRTC.browser.version >= 34) {\r\n            isScreenCapturingSupported = true;\r\n        } else if (DetectRTC.browser.isEdge && DetectRTC.browser.version >= 17) {\r\n            isScreenCapturingSupported = true; // navigator.getDisplayMedia\r\n        } else if (DetectRTC.osName === 'Android' && DetectRTC.browser.isChrome) {\r\n            isScreenCapturingSupported = true;\r\n        }\r\n\r\n        if (!/^(https:|chrome-extension:)$/g.test(location.protocol || '')) {\r\n            var isNonLocalHost = typeof document !== 'undefined' && typeof document.domain === 'string' && document.domain.search && document.domain.search(/localhost|127.0./g) === -1;\r\n            if (isNonLocalHost && (DetectRTC.browser.isChrome || DetectRTC.browser.isEdge || DetectRTC.browser.isOpera)) {\r\n                isScreenCapturingSupported = false;\r\n            } else if (DetectRTC.browser.isFirefox) {\r\n                isScreenCapturingSupported = false;\r\n            }\r\n        }\r\n        DetectRTC.isScreenCapturingSupported = isScreenCapturingSupported;\r\n\r\n        // --------- Detect if WebAudio API are supported\r\n        var webAudio = {\r\n            isSupported: false,\r\n            isCreateMediaStreamSourceSupported: false\r\n        };\r\n\r\n        ['AudioContext', 'webkitAudioContext', 'mozAudioContext', 'msAudioContext'].forEach(function(item) {\r\n            if (webAudio.isSupported) {\r\n                return;\r\n            }\r\n\r\n            if (item in window) {\r\n                webAudio.isSupported = true;\r\n\r\n                if (window[item] && 'createMediaStreamSource' in window[item].prototype) {\r\n                    webAudio.isCreateMediaStreamSourceSupported = true;\r\n                }\r\n            }\r\n        });\r\n        DetectRTC.isAudioContextSupported = webAudio.isSupported;\r\n        DetectRTC.isCreateMediaStreamSourceSupported = webAudio.isCreateMediaStreamSourceSupported;\r\n\r\n        // ---------- Detect if SCTP/RTP channels are supported.\r\n\r\n        var isRtpDataChannelsSupported = false;\r\n        if (DetectRTC.browser.isChrome && DetectRTC.browser.version > 31) {\r\n            isRtpDataChannelsSupported = true;\r\n        }\r\n        DetectRTC.isRtpDataChannelsSupported = isRtpDataChannelsSupported;\r\n\r\n        var isSCTPSupportd = false;\r\n        if (DetectRTC.browser.isFirefox && DetectRTC.browser.version > 28) {\r\n            isSCTPSupportd = true;\r\n        } else if (DetectRTC.browser.isChrome && DetectRTC.browser.version > 25) {\r\n            isSCTPSupportd = true;\r\n        } else if (DetectRTC.browser.isOpera && DetectRTC.browser.version >= 11) {\r\n            isSCTPSupportd = true;\r\n        }\r\n        DetectRTC.isSctpDataChannelsSupported = isSCTPSupportd;\r\n\r\n        // ---------\r\n\r\n        DetectRTC.isMobileDevice = isMobileDevice; // \"isMobileDevice\" boolean is defined in \"getBrowserInfo.js\"\r\n\r\n        // ------\r\n        var isGetUserMediaSupported = false;\r\n        if (navigator.getUserMedia) {\r\n            isGetUserMediaSupported = true;\r\n        } else if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n            isGetUserMediaSupported = true;\r\n        }\r\n\r\n        if (DetectRTC.browser.isChrome && DetectRTC.browser.version >= 46 && !/^(https:|chrome-extension:)$/g.test(location.protocol || '')) {\r\n            if (typeof document !== 'undefined' && typeof document.domain === 'string' && document.domain.search && document.domain.search(/localhost|127.0./g) === -1) {\r\n                isGetUserMediaSupported = 'Requires HTTPs';\r\n            }\r\n        }\r\n\r\n        if (DetectRTC.osName === 'Nodejs') {\r\n            isGetUserMediaSupported = false;\r\n        }\r\n        DetectRTC.isGetUserMediaSupported = isGetUserMediaSupported;\r\n\r\n        var displayResolution = '';\r\n        if (screen.width) {\r\n            var width = (screen.width) ? screen.width : '';\r\n            var height = (screen.height) ? screen.height : '';\r\n            displayResolution += '' + width + ' x ' + height;\r\n        }\r\n        DetectRTC.displayResolution = displayResolution;\r\n\r\n        function getAspectRatio(w, h) {\r\n            function gcd(a, b) {\r\n                return (b == 0) ? a : gcd(b, a % b);\r\n            }\r\n            var r = gcd(w, h);\r\n            return (w / r) / (h / r);\r\n        }\r\n\r\n        DetectRTC.displayAspectRatio = getAspectRatio(screen.width, screen.height).toFixed(2);\r\n\r\n        // ----------\r\n        DetectRTC.isCanvasSupportsStreamCapturing = isCanvasSupportsStreamCapturing;\r\n        DetectRTC.isVideoSupportsStreamCapturing = isVideoSupportsStreamCapturing;\r\n\r\n        if (DetectRTC.browser.name == 'Chrome' && DetectRTC.browser.version >= 53) {\r\n            if (!DetectRTC.isCanvasSupportsStreamCapturing) {\r\n                DetectRTC.isCanvasSupportsStreamCapturing = 'Requires chrome flag: enable-experimental-web-platform-features';\r\n            }\r\n\r\n            if (!DetectRTC.isVideoSupportsStreamCapturing) {\r\n                DetectRTC.isVideoSupportsStreamCapturing = 'Requires chrome flag: enable-experimental-web-platform-features';\r\n            }\r\n        }\r\n\r\n        // ------\r\n        DetectRTC.DetectLocalIPAddress = DetectLocalIPAddress;\r\n\r\n        DetectRTC.isWebSocketsSupported = 'WebSocket' in window && 2 === window.WebSocket.CLOSING;\r\n        DetectRTC.isWebSocketsBlocked = !DetectRTC.isWebSocketsSupported;\r\n\r\n        if (DetectRTC.osName === 'Nodejs') {\r\n            DetectRTC.isWebSocketsSupported = true;\r\n            DetectRTC.isWebSocketsBlocked = false;\r\n        }\r\n\r\n        DetectRTC.checkWebSocketsSupport = function(callback) {\r\n            callback = callback || function() {};\r\n            try {\r\n                var starttime;\r\n                var websocket = new WebSocket('wss://echo.websocket.org:443/');\r\n                websocket.onopen = function() {\r\n                    DetectRTC.isWebSocketsBlocked = false;\r\n                    starttime = (new Date).getTime();\r\n                    websocket.send('ping');\r\n                };\r\n                websocket.onmessage = function() {\r\n                    DetectRTC.WebsocketLatency = (new Date).getTime() - starttime + 'ms';\r\n                    callback();\r\n                    websocket.close();\r\n                    websocket = null;\r\n                };\r\n                websocket.onerror = function() {\r\n                    DetectRTC.isWebSocketsBlocked = true;\r\n                    callback();\r\n                };\r\n            } catch (e) {\r\n                DetectRTC.isWebSocketsBlocked = true;\r\n                callback();\r\n            }\r\n        };\r\n\r\n        // -------\r\n        DetectRTC.load = function(callback) {\r\n            callback = callback || function() {};\r\n            checkDeviceSupport(callback);\r\n        };\r\n\r\n        // check for microphone/camera support!\r\n        if (typeof checkDeviceSupport === 'function') {\r\n            // checkDeviceSupport();\r\n        }\r\n\r\n        if (typeof MediaDevices !== 'undefined') {\r\n            DetectRTC.MediaDevices = MediaDevices;\r\n        } else {\r\n            DetectRTC.MediaDevices = [];\r\n        }\r\n\r\n        DetectRTC.hasMicrophone = hasMicrophone;\r\n        DetectRTC.hasSpeakers = hasSpeakers;\r\n        DetectRTC.hasWebcam = hasWebcam;\r\n\r\n        DetectRTC.isWebsiteHasWebcamPermissions = isWebsiteHasWebcamPermissions;\r\n        DetectRTC.isWebsiteHasMicrophonePermissions = isWebsiteHasMicrophonePermissions;\r\n\r\n        DetectRTC.audioInputDevices = audioInputDevices;\r\n        DetectRTC.audioOutputDevices = audioOutputDevices;\r\n        DetectRTC.videoInputDevices = videoInputDevices;\r\n\r\n        // ------\r\n        var isSetSinkIdSupported = false;\r\n        if (typeof document !== 'undefined' && typeof document.createElement === 'function' && 'setSinkId' in document.createElement('video')) {\r\n            isSetSinkIdSupported = true;\r\n        }\r\n        DetectRTC.isSetSinkIdSupported = isSetSinkIdSupported;\r\n\r\n        // -----\r\n        var isRTPSenderReplaceTracksSupported = false;\r\n        if (DetectRTC.browser.isFirefox && typeof mozRTCPeerConnection !== 'undefined' /*&& DetectRTC.browser.version > 39*/ ) {\r\n            /*global mozRTCPeerConnection:true */\r\n            if ('getSenders' in mozRTCPeerConnection.prototype) {\r\n                isRTPSenderReplaceTracksSupported = true;\r\n            }\r\n        } else if (DetectRTC.browser.isChrome && typeof webkitRTCPeerConnection !== 'undefined') {\r\n            /*global webkitRTCPeerConnection:true */\r\n            if ('getSenders' in webkitRTCPeerConnection.prototype) {\r\n                isRTPSenderReplaceTracksSupported = true;\r\n            }\r\n        }\r\n        DetectRTC.isRTPSenderReplaceTracksSupported = isRTPSenderReplaceTracksSupported;\r\n\r\n        //------\r\n        var isRemoteStreamProcessingSupported = false;\r\n        if (DetectRTC.browser.isFirefox && DetectRTC.browser.version > 38) {\r\n            isRemoteStreamProcessingSupported = true;\r\n        }\r\n        DetectRTC.isRemoteStreamProcessingSupported = isRemoteStreamProcessingSupported;\r\n\r\n        //-------\r\n        var isApplyConstraintsSupported = false;\r\n\r\n        /*global MediaStreamTrack:true */\r\n        if (typeof MediaStreamTrack !== 'undefined' && 'applyConstraints' in MediaStreamTrack.prototype) {\r\n            isApplyConstraintsSupported = true;\r\n        }\r\n        DetectRTC.isApplyConstraintsSupported = isApplyConstraintsSupported;\r\n\r\n        //-------\r\n        var isMultiMonitorScreenCapturingSupported = false;\r\n        if (DetectRTC.browser.isFirefox && DetectRTC.browser.version >= 43) {\r\n            // version 43 merely supports platforms for multi-monitors\r\n            // version 44 will support exact multi-monitor selection i.e. you can select any monitor for screen capturing.\r\n            isMultiMonitorScreenCapturingSupported = true;\r\n        }\r\n        DetectRTC.isMultiMonitorScreenCapturingSupported = isMultiMonitorScreenCapturingSupported;\r\n\r\n        DetectRTC.isPromisesSupported = !!('Promise' in window);\r\n\r\n        // version is generated by \"grunt\"\r\n        DetectRTC.version = '1.3.9';\r\n\r\n        if (typeof DetectRTC === 'undefined') {\r\n            window.DetectRTC = {};\r\n        }\r\n\r\n        var MediaStream = window.MediaStream;\r\n\r\n        if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n            MediaStream = webkitMediaStream;\r\n        }\r\n\r\n        if (typeof MediaStream !== 'undefined' && typeof MediaStream === 'function') {\r\n            DetectRTC.MediaStream = Object.keys(MediaStream.prototype);\r\n        } else DetectRTC.MediaStream = false;\r\n\r\n        if (typeof MediaStreamTrack !== 'undefined') {\r\n            DetectRTC.MediaStreamTrack = Object.keys(MediaStreamTrack.prototype);\r\n        } else DetectRTC.MediaStreamTrack = false;\r\n\r\n        var RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\r\n\r\n        if (typeof RTCPeerConnection !== 'undefined') {\r\n            DetectRTC.RTCPeerConnection = Object.keys(RTCPeerConnection.prototype);\r\n        } else DetectRTC.RTCPeerConnection = false;\r\n\r\n        window.DetectRTC = DetectRTC;\r\n\r\n        if (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n            module.exports = DetectRTC;\r\n        }\r\n\r\n        if (typeof define === 'function' && define.amd) {\r\n            define('DetectRTC', [], function() {\r\n                return DetectRTC;\r\n            });\r\n        }\r\n    })();\r\n\r\n    // globals.js\r\n\r\n    if (typeof cordova !== 'undefined') {\r\n        DetectRTC.isMobileDevice = true;\r\n        DetectRTC.browser.name = 'Chrome';\r\n    }\r\n\r\n    if (navigator && navigator.userAgent && navigator.userAgent.indexOf('Crosswalk') !== -1) {\r\n        DetectRTC.isMobileDevice = true;\r\n        DetectRTC.browser.name = 'Chrome';\r\n    }\r\n\r\n    function fireEvent(obj, eventName, args) {\r\n        if (typeof CustomEvent === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        var eventDetail = {\r\n            arguments: args,\r\n            __exposedProps__: args\r\n        };\r\n\r\n        var event = new CustomEvent(eventName, eventDetail);\r\n        obj.dispatchEvent(event);\r\n    }\r\n\r\n    function setHarkEvents(connection, streamEvent) {\r\n        if (!streamEvent.stream || !getTracks(streamEvent.stream, 'audio').length) return;\r\n\r\n        if (!connection || !streamEvent) {\r\n            throw 'Both arguments are required.';\r\n        }\r\n\r\n        if (!connection.onspeaking || !connection.onsilence) {\r\n            return;\r\n        }\r\n\r\n        if (typeof hark === 'undefined') {\r\n            throw 'hark.js not found.';\r\n        }\r\n\r\n        hark(streamEvent.stream, {\r\n            onspeaking: function() {\r\n                connection.onspeaking(streamEvent);\r\n            },\r\n            onsilence: function() {\r\n                connection.onsilence(streamEvent);\r\n            },\r\n            onvolumechange: function(volume, threshold) {\r\n                if (!connection.onvolumechange) {\r\n                    return;\r\n                }\r\n                connection.onvolumechange(merge({\r\n                    volume: volume,\r\n                    threshold: threshold\r\n                }, streamEvent));\r\n            }\r\n        });\r\n    }\r\n\r\n    function setMuteHandlers(connection, streamEvent) {\r\n        if (!streamEvent.stream || !streamEvent.stream || !streamEvent.stream.addEventListener) return;\r\n\r\n        streamEvent.stream.addEventListener('mute', function(event) {\r\n            event = connection.streamEvents[streamEvent.streamid];\r\n\r\n            event.session = {\r\n                audio: event.muteType === 'audio',\r\n                video: event.muteType === 'video'\r\n            };\r\n\r\n            connection.onmute(event);\r\n        }, false);\r\n\r\n        streamEvent.stream.addEventListener('unmute', function(event) {\r\n            event = connection.streamEvents[streamEvent.streamid];\r\n\r\n            event.session = {\r\n                audio: event.unmuteType === 'audio',\r\n                video: event.unmuteType === 'video'\r\n            };\r\n\r\n            connection.onunmute(event);\r\n        }, false);\r\n    }\r\n\r\n    function getRandomString() {\r\n        if (window.crypto && window.crypto.getRandomValues && navigator.userAgent.indexOf('Safari') === -1) {\r\n            var a = window.crypto.getRandomValues(new Uint32Array(3)),\r\n                token = '';\r\n            for (var i = 0, l = a.length; i < l; i++) {\r\n                token += a[i].toString(36);\r\n            }\r\n            return token;\r\n        } else {\r\n            return (Math.random() * new Date().getTime()).toString(36).replace(/\\./g, '');\r\n        }\r\n    }\r\n\r\n    // Get HTMLAudioElement/HTMLVideoElement accordingly\r\n    // todo: add API documentation for connection.autoCreateMediaElement\r\n\r\n    function getRMCMediaElement(stream, callback, connection) {\r\n        if (!connection.autoCreateMediaElement) {\r\n            callback({});\r\n            return;\r\n        }\r\n\r\n        var isAudioOnly = false;\r\n        if (!getTracks(stream, 'video').length && !stream.isVideo && !stream.isScreen) {\r\n            isAudioOnly = true;\r\n        }\r\n\r\n        if (DetectRTC.browser.name === 'Firefox') {\r\n            if (connection.session.video || connection.session.screen) {\r\n                isAudioOnly = false;\r\n            }\r\n        }\r\n\r\n        var mediaElement = document.createElement(isAudioOnly ? 'audio' : 'video');\r\n\r\n        mediaElement.srcObject = stream;\r\n\r\n        mediaElement.setAttribute('autoplay', true);\r\n        mediaElement.setAttribute('playsinline', true);\r\n        mediaElement.setAttribute('controls', true);\r\n        mediaElement.setAttribute('muted', false);\r\n        mediaElement.setAttribute('volume', 1);\r\n\r\n        // http://goo.gl/WZ5nFl\r\n        // Firefox don't yet support onended for any stream (remote/local)\r\n        if (DetectRTC.browser.name === 'Firefox') {\r\n            var streamEndedEvent = 'ended';\r\n\r\n            if ('oninactive' in mediaElement) {\r\n                streamEndedEvent = 'inactive';\r\n            }\r\n\r\n            mediaElement.addEventListener(streamEndedEvent, function() {\r\n                // fireEvent(stream, streamEndedEvent, stream);\r\n                currentUserMediaRequest.remove(stream.idInstance);\r\n\r\n                if (stream.type === 'local') {\r\n                    streamEndedEvent = 'ended';\r\n\r\n                    if ('oninactive' in stream) {\r\n                        streamEndedEvent = 'inactive';\r\n                    }\r\n\r\n                    StreamsHandler.onSyncNeeded(stream.streamid, streamEndedEvent);\r\n\r\n                    connection.attachStreams.forEach(function(aStream, idx) {\r\n                        if (stream.streamid === aStream.streamid) {\r\n                            delete connection.attachStreams[idx];\r\n                        }\r\n                    });\r\n\r\n                    var newStreamsArray = [];\r\n                    connection.attachStreams.forEach(function(aStream) {\r\n                        if (aStream) {\r\n                            newStreamsArray.push(aStream);\r\n                        }\r\n                    });\r\n                    connection.attachStreams = newStreamsArray;\r\n\r\n                    var streamEvent = connection.streamEvents[stream.streamid];\r\n\r\n                    if (streamEvent) {\r\n                        connection.onstreamended(streamEvent);\r\n                        return;\r\n                    }\r\n                    if (this.parentNode) {\r\n                        this.parentNode.removeChild(this);\r\n                    }\r\n                }\r\n            }, false);\r\n        }\r\n\r\n        var played = mediaElement.play();\r\n        if (typeof played !== 'undefined') {\r\n            var cbFired = false;\r\n            setTimeout(function() {\r\n                if (!cbFired) {\r\n                    cbFired = true;\r\n                    callback(mediaElement);\r\n                }\r\n            }, 1000);\r\n            played.then(function() {\r\n                if (cbFired) return;\r\n                cbFired = true;\r\n                callback(mediaElement);\r\n            }).catch(function(error) {\r\n                if (cbFired) return;\r\n                cbFired = true;\r\n                callback(mediaElement);\r\n            });\r\n        } else {\r\n            callback(mediaElement);\r\n        }\r\n    }\r\n\r\n    // if IE\r\n    if (!window.addEventListener) {\r\n        window.addEventListener = function(el, eventName, eventHandler) {\r\n            if (!el.attachEvent) {\r\n                return;\r\n            }\r\n            el.attachEvent('on' + eventName, eventHandler);\r\n        };\r\n    }\r\n\r\n    function listenEventHandler(eventName, eventHandler) {\r\n        window.removeEventListener(eventName, eventHandler);\r\n        window.addEventListener(eventName, eventHandler, false);\r\n    }\r\n\r\n    window.attachEventListener = function(video, type, listener, useCapture) {\r\n        video.addEventListener(type, listener, useCapture);\r\n    };\r\n\r\n    function removeNullEntries(array) {\r\n        var newArray = [];\r\n        array.forEach(function(item) {\r\n            if (item) {\r\n                newArray.push(item);\r\n            }\r\n        });\r\n        return newArray;\r\n    }\r\n\r\n\r\n    function isData(session) {\r\n        return !session.audio && !session.video && !session.screen && session.data;\r\n    }\r\n\r\n    function isNull(obj) {\r\n        return typeof obj === 'undefined';\r\n    }\r\n\r\n    function isString(obj) {\r\n        return typeof obj === 'string';\r\n    }\r\n\r\n    var MediaStream = window.MediaStream;\r\n\r\n    if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n        MediaStream = webkitMediaStream;\r\n    }\r\n\r\n    /*global MediaStream:true */\r\n    if (typeof MediaStream !== 'undefined') {\r\n        if (!('stop' in MediaStream.prototype)) {\r\n            MediaStream.prototype.stop = function() {\r\n                this.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n            };\r\n        }\r\n    }\r\n\r\n    function isAudioPlusTab(connection, audioPlusTab) {\r\n        if (connection.session.audio && connection.session.audio === 'two-way') {\r\n            return false;\r\n        }\r\n\r\n        if (DetectRTC.browser.name === 'Firefox' && audioPlusTab !== false) {\r\n            return true;\r\n        }\r\n\r\n        if (DetectRTC.browser.name !== 'Chrome' || DetectRTC.browser.version < 50) return false;\r\n\r\n        if (typeof audioPlusTab === true) {\r\n            return true;\r\n        }\r\n\r\n        if (typeof audioPlusTab === 'undefined' && connection.session.audio && connection.session.screen && !connection.session.video) {\r\n            audioPlusTab = true;\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function getAudioScreenConstraints(screen_constraints) {\r\n        if (DetectRTC.browser.name === 'Firefox') {\r\n            return true;\r\n        }\r\n\r\n        if (DetectRTC.browser.name !== 'Chrome') return false;\r\n\r\n        return {\r\n            mandatory: {\r\n                chromeMediaSource: screen_constraints.mandatory.chromeMediaSource,\r\n                chromeMediaSourceId: screen_constraints.mandatory.chromeMediaSourceId\r\n            }\r\n        };\r\n    }\r\n\r\n    window.iOSDefaultAudioOutputDevice = window.iOSDefaultAudioOutputDevice || 'speaker'; // earpiece or speaker\r\n\r\n    function getTracks(stream, kind) {\r\n        if (!stream || !stream.getTracks) {\r\n            return [];\r\n        }\r\n\r\n        return stream.getTracks().filter(function(t) {\r\n            return t.kind === (kind || 'audio');\r\n        });\r\n    }\r\n\r\n    function isUnifiedPlanSupportedDefault() {\r\n        var canAddTransceiver = false;\r\n\r\n        try {\r\n            if (typeof RTCRtpTransceiver === 'undefined') return false;\r\n            if (!('currentDirection' in RTCRtpTransceiver.prototype)) return false;\r\n\r\n            var tempPc = new RTCPeerConnection();\r\n\r\n            try {\r\n                tempPc.addTransceiver('audio');\r\n                canAddTransceiver = true;\r\n            } catch (e) {}\r\n\r\n            tempPc.close();\r\n        } catch (e) {\r\n            canAddTransceiver = false;\r\n        }\r\n\r\n        return canAddTransceiver && isUnifiedPlanSuppored();\r\n    }\r\n\r\n    function isUnifiedPlanSuppored() {\r\n        var isUnifiedPlanSupported = false;\r\n\r\n        try {\r\n            var pc = new RTCPeerConnection({\r\n                sdpSemantics: 'unified-plan'\r\n            });\r\n\r\n            try {\r\n                var config = pc.getConfiguration();\r\n                if (config.sdpSemantics == 'unified-plan')\r\n                    isUnifiedPlanSupported = true;\r\n                else if (config.sdpSemantics == 'plan-b')\r\n                    isUnifiedPlanSupported = false;\r\n                else\r\n                    isUnifiedPlanSupported = false;\r\n            } catch (e) {\r\n                isUnifiedPlanSupported = false;\r\n            }\r\n        } catch (e) {\r\n            isUnifiedPlanSupported = false;\r\n        }\r\n\r\n        return isUnifiedPlanSupported;\r\n    }\r\n\r\n    // ios-hacks.js\r\n\r\n    function setCordovaAPIs() {\r\n        // if (DetectRTC.osName !== 'iOS') return;\r\n        if (typeof cordova === 'undefined' || typeof cordova.plugins === 'undefined' || typeof cordova.plugins.iosrtc === 'undefined') return;\r\n\r\n        var iosrtc = cordova.plugins.iosrtc;\r\n        window.webkitRTCPeerConnection = iosrtc.RTCPeerConnection;\r\n        window.RTCSessionDescription = iosrtc.RTCSessionDescription;\r\n        window.RTCIceCandidate = iosrtc.RTCIceCandidate;\r\n        window.MediaStream = iosrtc.MediaStream;\r\n        window.MediaStreamTrack = iosrtc.MediaStreamTrack;\r\n        navigator.getUserMedia = navigator.webkitGetUserMedia = iosrtc.getUserMedia;\r\n\r\n        iosrtc.debug.enable('iosrtc*');\r\n        if (typeof iosrtc.selectAudioOutput == 'function') {\r\n            iosrtc.selectAudioOutput(window.iOSDefaultAudioOutputDevice || 'speaker'); // earpiece or speaker\r\n        }\r\n        iosrtc.registerGlobals();\r\n    }\r\n\r\n    document.addEventListener('deviceready', setCordovaAPIs, false);\r\n    setCordovaAPIs();\r\n\r\n    // RTCPeerConnection.js\r\n\r\n    var defaults = {};\r\n\r\n    function setSdpConstraints(config) {\r\n        var sdpConstraints = {\r\n            OfferToReceiveAudio: !!config.OfferToReceiveAudio,\r\n            OfferToReceiveVideo: !!config.OfferToReceiveVideo\r\n        };\r\n\r\n        return sdpConstraints;\r\n    }\r\n\r\n    var RTCPeerConnection;\r\n    if (typeof window.RTCPeerConnection !== 'undefined') {\r\n        RTCPeerConnection = window.RTCPeerConnection;\r\n    } else if (typeof mozRTCPeerConnection !== 'undefined') {\r\n        RTCPeerConnection = mozRTCPeerConnection;\r\n    } else if (typeof webkitRTCPeerConnection !== 'undefined') {\r\n        RTCPeerConnection = webkitRTCPeerConnection;\r\n    }\r\n\r\n    var RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription;\r\n    var RTCIceCandidate = window.RTCIceCandidate || window.mozRTCIceCandidate;\r\n    var MediaStreamTrack = window.MediaStreamTrack;\r\n\r\n    function PeerInitiator(config) {\r\n        if (typeof window.RTCPeerConnection !== 'undefined') {\r\n            RTCPeerConnection = window.RTCPeerConnection;\r\n        } else if (typeof mozRTCPeerConnection !== 'undefined') {\r\n            RTCPeerConnection = mozRTCPeerConnection;\r\n        } else if (typeof webkitRTCPeerConnection !== 'undefined') {\r\n            RTCPeerConnection = webkitRTCPeerConnection;\r\n        }\r\n\r\n        RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription;\r\n        RTCIceCandidate = window.RTCIceCandidate || window.mozRTCIceCandidate;\r\n        MediaStreamTrack = window.MediaStreamTrack;\r\n\r\n        if (!RTCPeerConnection) {\r\n            throw 'WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.';\r\n        }\r\n\r\n        var connection = config.rtcMultiConnection;\r\n\r\n        this.extra = config.remoteSdp ? config.remoteSdp.extra : connection.extra;\r\n        this.userid = config.userid;\r\n        this.streams = [];\r\n        this.channels = config.channels || [];\r\n        this.connectionDescription = config.connectionDescription;\r\n\r\n        this.addStream = function(session) {\r\n            connection.addStream(session, self.userid);\r\n        };\r\n\r\n        this.removeStream = function(streamid) {\r\n            connection.removeStream(streamid, self.userid);\r\n        };\r\n\r\n        var self = this;\r\n\r\n        if (config.remoteSdp) {\r\n            this.connectionDescription = config.remoteSdp.connectionDescription;\r\n        }\r\n\r\n        var allRemoteStreams = {};\r\n\r\n        defaults.sdpConstraints = setSdpConstraints({\r\n            OfferToReceiveAudio: true,\r\n            OfferToReceiveVideo: true\r\n        });\r\n\r\n        var peer;\r\n\r\n        var renegotiatingPeer = !!config.renegotiatingPeer;\r\n        if (config.remoteSdp) {\r\n            renegotiatingPeer = !!config.remoteSdp.renegotiatingPeer;\r\n        }\r\n\r\n        var localStreams = [];\r\n        connection.attachStreams.forEach(function(stream) {\r\n            if (!!stream) {\r\n                localStreams.push(stream);\r\n            }\r\n        });\r\n\r\n        if (!renegotiatingPeer) {\r\n            var iceTransports = 'all';\r\n            if (connection.candidates.turn || connection.candidates.relay) {\r\n                if (!connection.candidates.stun && !connection.candidates.reflexive && !connection.candidates.host) {\r\n                    iceTransports = 'relay';\r\n                }\r\n            }\r\n\r\n            try {\r\n                // ref: developer.mozilla.org/en-US/docs/Web/API/RTCConfiguration\r\n                var params = {\r\n                    iceServers: connection.iceServers,\r\n                    iceTransportPolicy: connection.iceTransportPolicy || iceTransports\r\n                };\r\n\r\n                if (typeof connection.iceCandidatePoolSize !== 'undefined') {\r\n                    params.iceCandidatePoolSize = connection.iceCandidatePoolSize;\r\n                }\r\n\r\n                if (typeof connection.bundlePolicy !== 'undefined') {\r\n                    params.bundlePolicy = connection.bundlePolicy;\r\n                }\r\n\r\n                if (typeof connection.rtcpMuxPolicy !== 'undefined') {\r\n                    params.rtcpMuxPolicy = connection.rtcpMuxPolicy;\r\n                }\r\n\r\n                if (!!connection.sdpSemantics) {\r\n                    params.sdpSemantics = connection.sdpSemantics || 'unified-plan';\r\n                }\r\n\r\n                if (!connection.iceServers || !connection.iceServers.length) {\r\n                    params = null;\r\n                    connection.optionalArgument = null;\r\n                }\r\n\r\n                peer = new RTCPeerConnection(params, connection.optionalArgument);\r\n            } catch (e) {\r\n                try {\r\n                    var params = {\r\n                        iceServers: connection.iceServers\r\n                    };\r\n\r\n                    peer = new RTCPeerConnection(params);\r\n                } catch (e) {\r\n                    peer = new RTCPeerConnection();\r\n                }\r\n            }\r\n        } else {\r\n            peer = config.peerRef;\r\n        }\r\n\r\n        if (!peer.getRemoteStreams && peer.getReceivers) {\r\n            peer.getRemoteStreams = function() {\r\n                var stream = new MediaStream();\r\n                peer.getReceivers().forEach(function(receiver) {\r\n                    stream.addTrack(receiver.track);\r\n                });\r\n                return [stream];\r\n            };\r\n        }\r\n\r\n        if (!peer.getLocalStreams && peer.getSenders) {\r\n            peer.getLocalStreams = function() {\r\n                var stream = new MediaStream();\r\n                peer.getSenders().forEach(function(sender) {\r\n                    stream.addTrack(sender.track);\r\n                });\r\n                return [stream];\r\n            };\r\n        }\r\n\r\n        peer.onicecandidate = function(event) {\r\n            if (!event.candidate) {\r\n                if (!connection.trickleIce) {\r\n                    var localSdp = peer.localDescription;\r\n                    config.onLocalSdp({\r\n                        type: localSdp.type,\r\n                        sdp: localSdp.sdp,\r\n                        remotePeerSdpConstraints: config.remotePeerSdpConstraints || false,\r\n                        renegotiatingPeer: !!config.renegotiatingPeer || false,\r\n                        connectionDescription: self.connectionDescription,\r\n                        dontGetRemoteStream: !!config.dontGetRemoteStream,\r\n                        extra: connection ? connection.extra : {},\r\n                        streamsToShare: streamsToShare\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!connection.trickleIce) return;\r\n            config.onLocalCandidate({\r\n                candidate: event.candidate.candidate,\r\n                sdpMid: event.candidate.sdpMid,\r\n                sdpMLineIndex: event.candidate.sdpMLineIndex\r\n            });\r\n        };\r\n\r\n        localStreams.forEach(function(localStream) {\r\n            if (config.remoteSdp && config.remoteSdp.remotePeerSdpConstraints && config.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream) {\r\n                return;\r\n            }\r\n\r\n            if (config.dontAttachLocalStream) {\r\n                return;\r\n            }\r\n\r\n            localStream = connection.beforeAddingStream(localStream, self);\r\n\r\n            if (!localStream) return;\r\n\r\n            peer.getLocalStreams().forEach(function(stream) {\r\n                if (localStream && stream.id == localStream.id) {\r\n                    localStream = null;\r\n                }\r\n            });\r\n\r\n            if (localStream && localStream.getTracks) {\r\n                localStream.getTracks().forEach(function(track) {\r\n                    try {\r\n                        // last parameter is redundant for unified-plan\r\n                        // starting from chrome version 72\r\n                        peer.addTrack(track, localStream);\r\n                    } catch (e) {}\r\n                });\r\n            }\r\n        });\r\n\r\n        peer.oniceconnectionstatechange = peer.onsignalingstatechange = function() {\r\n            var extra = self.extra;\r\n            if (connection.peers[self.userid]) {\r\n                extra = connection.peers[self.userid].extra || extra;\r\n            }\r\n\r\n            if (!peer) {\r\n                return;\r\n            }\r\n\r\n            config.onPeerStateChanged({\r\n                iceConnectionState: peer.iceConnectionState,\r\n                iceGatheringState: peer.iceGatheringState,\r\n                signalingState: peer.signalingState,\r\n                extra: extra,\r\n                userid: self.userid\r\n            });\r\n\r\n            if (peer && peer.iceConnectionState && peer.iceConnectionState.search(/closed|failed/gi) !== -1 && self.streams instanceof Array) {\r\n                self.streams.forEach(function(stream) {\r\n                    var streamEvent = connection.streamEvents[stream.id] || {\r\n                        streamid: stream.id,\r\n                        stream: stream,\r\n                        type: 'remote'\r\n                    };\r\n\r\n                    connection.onstreamended(streamEvent);\r\n                });\r\n            }\r\n        };\r\n\r\n        var sdpConstraints = {\r\n            OfferToReceiveAudio: !!localStreams.length,\r\n            OfferToReceiveVideo: !!localStreams.length\r\n        };\r\n\r\n        if (config.localPeerSdpConstraints) sdpConstraints = config.localPeerSdpConstraints;\r\n\r\n        defaults.sdpConstraints = setSdpConstraints(sdpConstraints);\r\n\r\n        var streamObject;\r\n        var dontDuplicate = {};\r\n\r\n        peer.ontrack = function(event) {\r\n            if (!event || event.type !== 'track') return;\r\n\r\n            event.stream = event.streams[event.streams.length - 1];\r\n\r\n            if (!event.stream.id) {\r\n                event.stream.id = event.track.id;\r\n            }\r\n\r\n            if (dontDuplicate[event.stream.id] && DetectRTC.browser.name !== 'Safari') {\r\n                if (event.track) {\r\n                    event.track.onended = function() { // event.track.onmute = \r\n                        peer && peer.onremovestream(event);\r\n                    };\r\n                }\r\n                return;\r\n            }\r\n\r\n            dontDuplicate[event.stream.id] = event.stream.id;\r\n\r\n            var streamsToShare = {};\r\n            if (config.remoteSdp && config.remoteSdp.streamsToShare) {\r\n                streamsToShare = config.remoteSdp.streamsToShare;\r\n            } else if (config.streamsToShare) {\r\n                streamsToShare = config.streamsToShare;\r\n            }\r\n\r\n            var streamToShare = streamsToShare[event.stream.id];\r\n            if (streamToShare) {\r\n                event.stream.isAudio = streamToShare.isAudio;\r\n                event.stream.isVideo = streamToShare.isVideo;\r\n                event.stream.isScreen = streamToShare.isScreen;\r\n            } else {\r\n                event.stream.isVideo = !!getTracks(event.stream, 'video').length;\r\n                event.stream.isAudio = !event.stream.isVideo;\r\n                event.stream.isScreen = false;\r\n            }\r\n\r\n            event.stream.streamid = event.stream.id;\r\n\r\n            allRemoteStreams[event.stream.id] = event.stream;\r\n            config.onRemoteStream(event.stream);\r\n\r\n            event.stream.getTracks().forEach(function(track) {\r\n                track.onended = function() { // track.onmute = \r\n                    peer && peer.onremovestream(event);\r\n                };\r\n            });\r\n\r\n            event.stream.onremovetrack = function() {\r\n                peer && peer.onremovestream(event);\r\n            };\r\n        };\r\n\r\n        peer.onremovestream = function(event) {\r\n            // this event doesn't works anymore\r\n            event.stream.streamid = event.stream.id;\r\n\r\n            if (allRemoteStreams[event.stream.id]) {\r\n                delete allRemoteStreams[event.stream.id];\r\n            }\r\n\r\n            config.onRemoteStreamRemoved(event.stream);\r\n        };\r\n\r\n        if (typeof peer.removeStream !== 'function') {\r\n            // removeStream backward compatibility\r\n            peer.removeStream = function(stream) {\r\n                stream.getTracks().forEach(function(track) {\r\n                    peer.removeTrack(track, stream);\r\n                });\r\n            };\r\n        }\r\n\r\n        this.addRemoteCandidate = function(remoteCandidate) {\r\n            peer.addIceCandidate(new RTCIceCandidate(remoteCandidate));\r\n        };\r\n\r\n        function oldAddRemoteSdp(remoteSdp, cb) {\r\n            cb = cb || function() {};\r\n\r\n            if (DetectRTC.browser.name !== 'Safari') {\r\n                remoteSdp.sdp = connection.processSdp(remoteSdp.sdp);\r\n            }\r\n            peer.setRemoteDescription(new RTCSessionDescription(remoteSdp), cb, function(error) {\r\n                if (!!connection.enableLogs) {\r\n                    console.error('setRemoteDescription failed', '\\n', error, '\\n', remoteSdp.sdp);\r\n                }\r\n\r\n                cb();\r\n            });\r\n        }\r\n\r\n        this.addRemoteSdp = function(remoteSdp, cb) {\r\n            cb = cb || function() {};\r\n\r\n            if (DetectRTC.browser.name !== 'Safari') {\r\n                remoteSdp.sdp = connection.processSdp(remoteSdp.sdp);\r\n            }\r\n\r\n            peer.setRemoteDescription(new RTCSessionDescription(remoteSdp)).then(cb, function(error) {\r\n                if (!!connection.enableLogs) {\r\n                    console.error('setRemoteDescription failed', '\\n', error, '\\n', remoteSdp.sdp);\r\n                }\r\n\r\n                cb();\r\n            }).catch(function(error) {\r\n                if (!!connection.enableLogs) {\r\n                    console.error('setRemoteDescription failed', '\\n', error, '\\n', remoteSdp.sdp);\r\n                }\r\n\r\n                cb();\r\n            });\r\n        };\r\n\r\n        var isOfferer = true;\r\n\r\n        if (config.remoteSdp) {\r\n            isOfferer = false;\r\n        }\r\n\r\n        this.createDataChannel = function() {\r\n            var channel = peer.createDataChannel('sctp', {});\r\n            setChannelEvents(channel);\r\n        };\r\n\r\n        if (connection.session.data === true && !renegotiatingPeer) {\r\n            if (!isOfferer) {\r\n                peer.ondatachannel = function(event) {\r\n                    var channel = event.channel;\r\n                    setChannelEvents(channel);\r\n                };\r\n            } else {\r\n                this.createDataChannel();\r\n            }\r\n        }\r\n\r\n        this.enableDisableVideoEncoding = function(enable) {\r\n            var rtcp;\r\n            peer.getSenders().forEach(function(sender) {\r\n                if (!rtcp && sender.track.kind === 'video') {\r\n                    rtcp = sender;\r\n                }\r\n            });\r\n\r\n            if (!rtcp || !rtcp.getParameters) return;\r\n\r\n            var parameters = rtcp.getParameters();\r\n            parameters.encodings[1] && (parameters.encodings[1].active = !!enable);\r\n            parameters.encodings[2] && (parameters.encodings[2].active = !!enable);\r\n            rtcp.setParameters(parameters);\r\n        };\r\n\r\n        if (config.remoteSdp) {\r\n            if (config.remoteSdp.remotePeerSdpConstraints) {\r\n                sdpConstraints = config.remoteSdp.remotePeerSdpConstraints;\r\n            }\r\n            defaults.sdpConstraints = setSdpConstraints(sdpConstraints);\r\n            this.addRemoteSdp(config.remoteSdp, function() {\r\n                createOfferOrAnswer('createAnswer');\r\n            });\r\n        }\r\n\r\n        function setChannelEvents(channel) {\r\n            // force ArrayBuffer in Firefox; which uses \"Blob\" by default.\r\n            channel.binaryType = 'arraybuffer';\r\n\r\n            channel.onmessage = function(event) {\r\n                config.onDataChannelMessage(event.data);\r\n            };\r\n\r\n            channel.onopen = function() {\r\n                config.onDataChannelOpened(channel);\r\n            };\r\n\r\n            channel.onerror = function(error) {\r\n                config.onDataChannelError(error);\r\n            };\r\n\r\n            channel.onclose = function(event) {\r\n                config.onDataChannelClosed(event);\r\n            };\r\n\r\n            channel.internalSend = channel.send;\r\n            channel.send = function(data) {\r\n                if (channel.readyState !== 'open') {\r\n                    return;\r\n                }\r\n\r\n                channel.internalSend(data);\r\n            };\r\n\r\n            peer.channel = channel;\r\n        }\r\n\r\n        if (connection.session.audio == 'two-way' || connection.session.video == 'two-way' || connection.session.screen == 'two-way') {\r\n            defaults.sdpConstraints = setSdpConstraints({\r\n                OfferToReceiveAudio: connection.session.audio == 'two-way' || (config.remoteSdp && config.remoteSdp.remotePeerSdpConstraints && config.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio),\r\n                OfferToReceiveVideo: connection.session.video == 'two-way' || connection.session.screen == 'two-way' || (config.remoteSdp && config.remoteSdp.remotePeerSdpConstraints && config.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio)\r\n            });\r\n        }\r\n\r\n        var streamsToShare = {};\r\n        peer.getLocalStreams().forEach(function(stream) {\r\n            streamsToShare[stream.streamid] = {\r\n                isAudio: !!stream.isAudio,\r\n                isVideo: !!stream.isVideo,\r\n                isScreen: !!stream.isScreen\r\n            };\r\n        });\r\n\r\n        function oldCreateOfferOrAnswer(_method) {\r\n            peer[_method](function(localSdp) {\r\n                if (DetectRTC.browser.name !== 'Safari') {\r\n                    localSdp.sdp = connection.processSdp(localSdp.sdp);\r\n                }\r\n                peer.setLocalDescription(localSdp, function() {\r\n                    if (!connection.trickleIce) return;\r\n\r\n                    config.onLocalSdp({\r\n                        type: localSdp.type,\r\n                        sdp: localSdp.sdp,\r\n                        remotePeerSdpConstraints: config.remotePeerSdpConstraints || false,\r\n                        renegotiatingPeer: !!config.renegotiatingPeer || false,\r\n                        connectionDescription: self.connectionDescription,\r\n                        dontGetRemoteStream: !!config.dontGetRemoteStream,\r\n                        extra: connection ? connection.extra : {},\r\n                        streamsToShare: streamsToShare\r\n                    });\r\n\r\n                    connection.onSettingLocalDescription(self);\r\n                }, function(error) {\r\n                    if (!!connection.enableLogs) {\r\n                        console.error('setLocalDescription-error', error);\r\n                    }\r\n                });\r\n            }, function(error) {\r\n                if (!!connection.enableLogs) {\r\n                    console.error('sdp-' + _method + '-error', error);\r\n                }\r\n            }, defaults.sdpConstraints);\r\n        }\r\n\r\n        function createOfferOrAnswer(_method) {\r\n            peer[_method](defaults.sdpConstraints).then(function(localSdp) {\r\n                if (DetectRTC.browser.name !== 'Safari') {\r\n                    localSdp.sdp = connection.processSdp(localSdp.sdp);\r\n                }\r\n                peer.setLocalDescription(localSdp).then(function() {\r\n                    if (!connection.trickleIce) return;\r\n\r\n                    config.onLocalSdp({\r\n                        type: localSdp.type,\r\n                        sdp: localSdp.sdp,\r\n                        remotePeerSdpConstraints: config.remotePeerSdpConstraints || false,\r\n                        renegotiatingPeer: !!config.renegotiatingPeer || false,\r\n                        connectionDescription: self.connectionDescription,\r\n                        dontGetRemoteStream: !!config.dontGetRemoteStream,\r\n                        extra: connection ? connection.extra : {},\r\n                        streamsToShare: streamsToShare\r\n                    });\r\n\r\n                    connection.onSettingLocalDescription(self);\r\n                }, function(error) {\r\n                    if (!connection.enableLogs) return;\r\n                    console.error('setLocalDescription error', error);\r\n                });\r\n            }, function(error) {\r\n                if (!!connection.enableLogs) {\r\n                    console.error('sdp-error', error);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (isOfferer) {\r\n            createOfferOrAnswer('createOffer');\r\n        }\r\n\r\n        peer.nativeClose = peer.close;\r\n        peer.close = function() {\r\n            if (!peer) {\r\n                return;\r\n            }\r\n\r\n            try {\r\n                if (peer.nativeClose !== peer.close) {\r\n                    peer.nativeClose();\r\n                }\r\n            } catch (e) {}\r\n\r\n            peer = null;\r\n            self.peer = null;\r\n        };\r\n\r\n        this.peer = peer;\r\n    }\r\n\r\n    // CodecsHandler.js\r\n\r\n    var CodecsHandler = (function() {\r\n        // use \"RTCRtpTransceiver.setCodecPreferences\"\r\n        function preferCodec(sdp, codecName) {\r\n            var info = splitLines(sdp);\r\n\r\n            if (!info.videoCodecNumbers) {\r\n                return sdp;\r\n            }\r\n\r\n            if (codecName === 'vp8' && info.vp8LineNumber === info.videoCodecNumbers[0]) {\r\n                return sdp;\r\n            }\r\n\r\n            if (codecName === 'vp9' && info.vp9LineNumber === info.videoCodecNumbers[0]) {\r\n                return sdp;\r\n            }\r\n\r\n            if (codecName === 'h264' && info.h264LineNumber === info.videoCodecNumbers[0]) {\r\n                return sdp;\r\n            }\r\n\r\n            sdp = preferCodecHelper(sdp, codecName, info);\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function preferCodecHelper(sdp, codec, info, ignore) {\r\n            var preferCodecNumber = '';\r\n\r\n            if (codec === 'vp8') {\r\n                if (!info.vp8LineNumber) {\r\n                    return sdp;\r\n                }\r\n                preferCodecNumber = info.vp8LineNumber;\r\n            }\r\n\r\n            if (codec === 'vp9') {\r\n                if (!info.vp9LineNumber) {\r\n                    return sdp;\r\n                }\r\n                preferCodecNumber = info.vp9LineNumber;\r\n            }\r\n\r\n            if (codec === 'h264') {\r\n                if (!info.h264LineNumber) {\r\n                    return sdp;\r\n                }\r\n\r\n                preferCodecNumber = info.h264LineNumber;\r\n            }\r\n\r\n            var newLine = info.videoCodecNumbersOriginal.split('SAVPF')[0] + 'SAVPF ';\r\n\r\n            var newOrder = [preferCodecNumber];\r\n\r\n            if (ignore) {\r\n                newOrder = [];\r\n            }\r\n\r\n            info.videoCodecNumbers.forEach(function(codecNumber) {\r\n                if (codecNumber === preferCodecNumber) return;\r\n                newOrder.push(codecNumber);\r\n            });\r\n\r\n            newLine += newOrder.join(' ');\r\n\r\n            sdp = sdp.replace(info.videoCodecNumbersOriginal, newLine);\r\n            return sdp;\r\n        }\r\n\r\n        function splitLines(sdp) {\r\n            var info = {};\r\n            sdp.split('\\n').forEach(function(line) {\r\n                if (line.indexOf('m=video') === 0) {\r\n                    info.videoCodecNumbers = [];\r\n                    line.split('SAVPF')[1].split(' ').forEach(function(codecNumber) {\r\n                        codecNumber = codecNumber.trim();\r\n                        if (!codecNumber || !codecNumber.length) return;\r\n                        info.videoCodecNumbers.push(codecNumber);\r\n                        info.videoCodecNumbersOriginal = line;\r\n                    });\r\n                }\r\n\r\n                if (line.indexOf('VP8/90000') !== -1 && !info.vp8LineNumber) {\r\n                    info.vp8LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\r\n                }\r\n\r\n                if (line.indexOf('VP9/90000') !== -1 && !info.vp9LineNumber) {\r\n                    info.vp9LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\r\n                }\r\n\r\n                if (line.indexOf('H264/90000') !== -1 && !info.h264LineNumber) {\r\n                    info.h264LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\r\n                }\r\n            });\r\n\r\n            return info;\r\n        }\r\n\r\n        function removeVPX(sdp) {\r\n            var info = splitLines(sdp);\r\n\r\n            // last parameter below means: ignore these codecs\r\n            sdp = preferCodecHelper(sdp, 'vp9', info, true);\r\n            sdp = preferCodecHelper(sdp, 'vp8', info, true);\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function disableNACK(sdp) {\r\n            if (!sdp || typeof sdp !== 'string') {\r\n                throw 'Invalid arguments.';\r\n            }\r\n\r\n            sdp = sdp.replace('a=rtcp-fb:126 nack\\r\\n', '');\r\n            sdp = sdp.replace('a=rtcp-fb:126 nack pli\\r\\n', 'a=rtcp-fb:126 pli\\r\\n');\r\n            sdp = sdp.replace('a=rtcp-fb:97 nack\\r\\n', '');\r\n            sdp = sdp.replace('a=rtcp-fb:97 nack pli\\r\\n', 'a=rtcp-fb:97 pli\\r\\n');\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function prioritize(codecMimeType, peer) {\r\n            if (!peer || !peer.getSenders || !peer.getSenders().length) {\r\n                return;\r\n            }\r\n\r\n            if (!codecMimeType || typeof codecMimeType !== 'string') {\r\n                throw 'Invalid arguments.';\r\n            }\r\n\r\n            peer.getSenders().forEach(function(sender) {\r\n                var params = sender.getParameters();\r\n                for (var i = 0; i < params.codecs.length; i++) {\r\n                    if (params.codecs[i].mimeType == codecMimeType) {\r\n                        params.codecs.unshift(params.codecs.splice(i, 1));\r\n                        break;\r\n                    }\r\n                }\r\n                sender.setParameters(params);\r\n            });\r\n        }\r\n\r\n        function removeNonG722(sdp) {\r\n            return sdp.replace(/m=audio ([0-9]+) RTP\\/SAVPF ([0-9 ]*)/g, 'm=audio $1 RTP\\/SAVPF 9');\r\n        }\r\n\r\n        function setBAS(sdp, bandwidth, isScreen) {\r\n            if (!bandwidth) {\r\n                return sdp;\r\n            }\r\n\r\n            if (typeof isFirefox !== 'undefined' && isFirefox) {\r\n                return sdp;\r\n            }\r\n\r\n            if (isScreen) {\r\n                if (!bandwidth.screen) {\r\n                    console.warn('It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.');\r\n                } else if (bandwidth.screen < 300) {\r\n                    console.warn('It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail.');\r\n                }\r\n            }\r\n\r\n            // if screen; must use at least 300kbs\r\n            if (bandwidth.screen && isScreen) {\r\n                sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\r\n                sdp = sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + bandwidth.screen + '\\r\\n');\r\n            }\r\n\r\n            // remove existing bandwidth lines\r\n            if (bandwidth.audio || bandwidth.video) {\r\n                sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\r\n            }\r\n\r\n            if (bandwidth.audio) {\r\n                sdp = sdp.replace(/a=mid:audio\\r\\n/g, 'a=mid:audio\\r\\nb=AS:' + bandwidth.audio + '\\r\\n');\r\n            }\r\n\r\n            if (bandwidth.screen) {\r\n                sdp = sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + bandwidth.screen + '\\r\\n');\r\n            } else if (bandwidth.video) {\r\n                sdp = sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + bandwidth.video + '\\r\\n');\r\n            }\r\n\r\n            return sdp;\r\n        }\r\n\r\n        // Find the line in sdpLines that starts with |prefix|, and, if specified,\r\n        // contains |substr| (case-insensitive search).\r\n        function findLine(sdpLines, prefix, substr) {\r\n            return findLineInRange(sdpLines, 0, -1, prefix, substr);\r\n        }\r\n\r\n        // Find the line in sdpLines[startLine...endLine - 1] that starts with |prefix|\r\n        // and, if specified, contains |substr| (case-insensitive search).\r\n        function findLineInRange(sdpLines, startLine, endLine, prefix, substr) {\r\n            var realEndLine = endLine !== -1 ? endLine : sdpLines.length;\r\n            for (var i = startLine; i < realEndLine; ++i) {\r\n                if (sdpLines[i].indexOf(prefix) === 0) {\r\n                    if (!substr ||\r\n                        sdpLines[i].toLowerCase().indexOf(substr.toLowerCase()) !== -1) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        // Gets the codec payload type from an a=rtpmap:X line.\r\n        function getCodecPayloadType(sdpLine) {\r\n            var pattern = new RegExp('a=rtpmap:(\\\\d+) \\\\w+\\\\/\\\\d+');\r\n            var result = sdpLine.match(pattern);\r\n            return (result && result.length === 2) ? result[1] : null;\r\n        }\r\n\r\n        function setVideoBitrates(sdp, params) {\r\n            params = params || {};\r\n            var xgoogle_min_bitrate = params.min;\r\n            var xgoogle_max_bitrate = params.max;\r\n\r\n            var sdpLines = sdp.split('\\r\\n');\r\n\r\n            // VP8\r\n            var vp8Index = findLine(sdpLines, 'a=rtpmap', 'VP8/90000');\r\n            var vp8Payload;\r\n            if (vp8Index) {\r\n                vp8Payload = getCodecPayloadType(sdpLines[vp8Index]);\r\n            }\r\n\r\n            if (!vp8Payload) {\r\n                return sdp;\r\n            }\r\n\r\n            var rtxIndex = findLine(sdpLines, 'a=rtpmap', 'rtx/90000');\r\n            var rtxPayload;\r\n            if (rtxIndex) {\r\n                rtxPayload = getCodecPayloadType(sdpLines[rtxIndex]);\r\n            }\r\n\r\n            if (!rtxIndex) {\r\n                return sdp;\r\n            }\r\n\r\n            var rtxFmtpLineIndex = findLine(sdpLines, 'a=fmtp:' + rtxPayload.toString());\r\n            if (rtxFmtpLineIndex !== null) {\r\n                var appendrtxNext = '\\r\\n';\r\n                appendrtxNext += 'a=fmtp:' + vp8Payload + ' x-google-min-bitrate=' + (xgoogle_min_bitrate || '228') + '; x-google-max-bitrate=' + (xgoogle_max_bitrate || '228');\r\n                sdpLines[rtxFmtpLineIndex] = sdpLines[rtxFmtpLineIndex].concat(appendrtxNext);\r\n                sdp = sdpLines.join('\\r\\n');\r\n            }\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function setOpusAttributes(sdp, params) {\r\n            params = params || {};\r\n\r\n            var sdpLines = sdp.split('\\r\\n');\r\n\r\n            // Opus\r\n            var opusIndex = findLine(sdpLines, 'a=rtpmap', 'opus/48000');\r\n            var opusPayload;\r\n            if (opusIndex) {\r\n                opusPayload = getCodecPayloadType(sdpLines[opusIndex]);\r\n            }\r\n\r\n            if (!opusPayload) {\r\n                return sdp;\r\n            }\r\n\r\n            var opusFmtpLineIndex = findLine(sdpLines, 'a=fmtp:' + opusPayload.toString());\r\n            if (opusFmtpLineIndex === null) {\r\n                return sdp;\r\n            }\r\n\r\n            var appendOpusNext = '';\r\n            appendOpusNext += '; stereo=' + (typeof params.stereo != 'undefined' ? params.stereo : '1');\r\n            appendOpusNext += '; sprop-stereo=' + (typeof params['sprop-stereo'] != 'undefined' ? params['sprop-stereo'] : '1');\r\n\r\n            if (typeof params.maxaveragebitrate != 'undefined') {\r\n                appendOpusNext += '; maxaveragebitrate=' + (params.maxaveragebitrate || 128 * 1024 * 8);\r\n            }\r\n\r\n            if (typeof params.maxplaybackrate != 'undefined') {\r\n                appendOpusNext += '; maxplaybackrate=' + (params.maxplaybackrate || 128 * 1024 * 8);\r\n            }\r\n\r\n            if (typeof params.cbr != 'undefined') {\r\n                appendOpusNext += '; cbr=' + (typeof params.cbr != 'undefined' ? params.cbr : '1');\r\n            }\r\n\r\n            if (typeof params.useinbandfec != 'undefined') {\r\n                appendOpusNext += '; useinbandfec=' + params.useinbandfec;\r\n            }\r\n\r\n            if (typeof params.usedtx != 'undefined') {\r\n                appendOpusNext += '; usedtx=' + params.usedtx;\r\n            }\r\n\r\n            if (typeof params.maxptime != 'undefined') {\r\n                appendOpusNext += '\\r\\na=maxptime:' + params.maxptime;\r\n            }\r\n\r\n            sdpLines[opusFmtpLineIndex] = sdpLines[opusFmtpLineIndex].concat(appendOpusNext);\r\n\r\n            sdp = sdpLines.join('\\r\\n');\r\n            return sdp;\r\n        }\r\n\r\n        // forceStereoAudio => via webrtcexample.com\r\n        // requires getUserMedia => echoCancellation:false\r\n        function forceStereoAudio(sdp) {\r\n            var sdpLines = sdp.split('\\r\\n');\r\n            var fmtpLineIndex = null;\r\n            for (var i = 0; i < sdpLines.length; i++) {\r\n                if (sdpLines[i].search('opus/48000') !== -1) {\r\n                    var opusPayload = extractSdp(sdpLines[i], /:(\\d+) opus\\/48000/i);\r\n                    break;\r\n                }\r\n            }\r\n            for (var i = 0; i < sdpLines.length; i++) {\r\n                if (sdpLines[i].search('a=fmtp') !== -1) {\r\n                    var payload = extractSdp(sdpLines[i], /a=fmtp:(\\d+)/);\r\n                    if (payload === opusPayload) {\r\n                        fmtpLineIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (fmtpLineIndex === null) return sdp;\r\n            sdpLines[fmtpLineIndex] = sdpLines[fmtpLineIndex].concat('; stereo=1; sprop-stereo=1');\r\n            sdp = sdpLines.join('\\r\\n');\r\n            return sdp;\r\n        }\r\n\r\n        return {\r\n            removeVPX: removeVPX,\r\n            disableNACK: disableNACK,\r\n            prioritize: prioritize,\r\n            removeNonG722: removeNonG722,\r\n            setApplicationSpecificBandwidth: function(sdp, bandwidth, isScreen) {\r\n                return setBAS(sdp, bandwidth, isScreen);\r\n            },\r\n            setVideoBitrates: function(sdp, params) {\r\n                return setVideoBitrates(sdp, params);\r\n            },\r\n            setOpusAttributes: function(sdp, params) {\r\n                return setOpusAttributes(sdp, params);\r\n            },\r\n            preferVP9: function(sdp) {\r\n                return preferCodec(sdp, 'vp9');\r\n            },\r\n            preferCodec: preferCodec,\r\n            forceStereoAudio: forceStereoAudio\r\n        };\r\n    })();\r\n\r\n    // backward compatibility\r\n    window.BandwidthHandler = CodecsHandler;\r\n\r\n    // OnIceCandidateHandler.js\r\n\r\n    var OnIceCandidateHandler = (function() {\r\n        function processCandidates(connection, icePair) {\r\n            var candidate = icePair.candidate;\r\n\r\n            var iceRestrictions = connection.candidates;\r\n            var stun = iceRestrictions.stun;\r\n            var turn = iceRestrictions.turn;\r\n\r\n            if (!isNull(iceRestrictions.reflexive)) {\r\n                stun = iceRestrictions.reflexive;\r\n            }\r\n\r\n            if (!isNull(iceRestrictions.relay)) {\r\n                turn = iceRestrictions.relay;\r\n            }\r\n\r\n            if (!iceRestrictions.host && !!candidate.match(/typ host/g)) {\r\n                return;\r\n            }\r\n\r\n            if (!turn && !!candidate.match(/typ relay/g)) {\r\n                return;\r\n            }\r\n\r\n            if (!stun && !!candidate.match(/typ srflx/g)) {\r\n                return;\r\n            }\r\n\r\n            var protocol = connection.iceProtocols;\r\n\r\n            if (!protocol.udp && !!candidate.match(/ udp /g)) {\r\n                return;\r\n            }\r\n\r\n            if (!protocol.tcp && !!candidate.match(/ tcp /g)) {\r\n                return;\r\n            }\r\n\r\n            if (connection.enableLogs) {\r\n                console.debug('Your candidate pairs:', candidate);\r\n            }\r\n\r\n            return {\r\n                candidate: candidate,\r\n                sdpMid: icePair.sdpMid,\r\n                sdpMLineIndex: icePair.sdpMLineIndex\r\n            };\r\n        }\r\n\r\n        return {\r\n            processCandidates: processCandidates\r\n        };\r\n    })();\r\n\r\n    // IceServersHandler.js\r\n\r\n    var IceServersHandler = (function() {\r\n        function getIceServers(connection) {\r\n            // resiprocate: 3344+4433\r\n            // pions: 7575\r\n            var iceServers = [{\r\n                'urls': [\r\n                    'stun:stun.l.google.com:19302',\r\n                    'stun:stun1.l.google.com:19302',\r\n                    'stun:stun2.l.google.com:19302',\r\n                    'stun:stun.l.google.com:19302?transport=udp',\r\n                ]\r\n            }];\r\n\r\n            return iceServers;\r\n        }\r\n\r\n        return {\r\n            getIceServers: getIceServers\r\n        };\r\n    })();\r\n\r\n    // getUserMediaHandler.js\r\n\r\n    function setStreamType(constraints, stream) {\r\n        if (constraints.mandatory && constraints.mandatory.chromeMediaSource) {\r\n            stream.isScreen = true;\r\n        } else if (constraints.mozMediaSource || constraints.mediaSource) {\r\n            stream.isScreen = true;\r\n        } else if (constraints.video) {\r\n            stream.isVideo = true;\r\n        } else if (constraints.audio) {\r\n            stream.isAudio = true;\r\n        }\r\n    }\r\n\r\n    // allow users to manage this object (to support re-capturing of screen/etc.)\r\n    window.currentUserMediaRequest = {\r\n        streams: [],\r\n        mutex: false,\r\n        queueRequests: [],\r\n        remove: function(idInstance) {\r\n            this.mutex = false;\r\n\r\n            var stream = this.streams[idInstance];\r\n            if (!stream) {\r\n                return;\r\n            }\r\n\r\n            stream = stream.stream;\r\n\r\n            var options = stream.currentUserMediaRequestOptions;\r\n\r\n            if (this.queueRequests.indexOf(options)) {\r\n                delete this.queueRequests[this.queueRequests.indexOf(options)];\r\n                this.queueRequests = removeNullEntries(this.queueRequests);\r\n            }\r\n\r\n            this.streams[idInstance].stream = null;\r\n            delete this.streams[idInstance];\r\n        }\r\n    };\r\n\r\n    function getUserMediaHandler(options) {\r\n        if (currentUserMediaRequest.mutex === true) {\r\n            currentUserMediaRequest.queueRequests.push(options);\r\n            return;\r\n        }\r\n        currentUserMediaRequest.mutex = true;\r\n\r\n        // easy way to match\r\n        var idInstance = JSON.stringify(options.localMediaConstraints);\r\n\r\n        function streaming(stream, returnBack) {\r\n            setStreamType(options.localMediaConstraints, stream);\r\n\r\n            var streamEndedEvent = 'ended';\r\n\r\n            if ('oninactive' in stream) {\r\n                streamEndedEvent = 'inactive';\r\n            }\r\n            stream.addEventListener(streamEndedEvent, function() {\r\n                delete currentUserMediaRequest.streams[idInstance];\r\n\r\n                currentUserMediaRequest.mutex = false;\r\n                if (currentUserMediaRequest.queueRequests.indexOf(options)) {\r\n                    delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(options)];\r\n                    currentUserMediaRequest.queueRequests = removeNullEntries(currentUserMediaRequest.queueRequests);\r\n                }\r\n            }, false);\r\n\r\n            currentUserMediaRequest.streams[idInstance] = {\r\n                stream: stream\r\n            };\r\n            currentUserMediaRequest.mutex = false;\r\n\r\n            if (currentUserMediaRequest.queueRequests.length) {\r\n                getUserMediaHandler(currentUserMediaRequest.queueRequests.shift());\r\n            }\r\n\r\n            // callback\r\n            options.onGettingLocalMedia(stream, returnBack);\r\n        }\r\n\r\n        if (currentUserMediaRequest.streams[idInstance]) {\r\n            streaming(currentUserMediaRequest.streams[idInstance].stream, true);\r\n        } else {\r\n            var isBlackBerry = !!(/BB10|BlackBerry/i.test(navigator.userAgent || ''));\r\n            if (isBlackBerry || typeof navigator.mediaDevices === 'undefined' || typeof navigator.mediaDevices.getUserMedia !== 'function') {\r\n                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n                navigator.getUserMedia(options.localMediaConstraints, function(stream) {\r\n                    stream.streamid = stream.streamid || stream.id || getRandomString();\r\n                    stream.idInstance = idInstance;\r\n                    streaming(stream);\r\n                }, function(error) {\r\n                    options.onLocalMediaError(error, options.localMediaConstraints);\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (typeof navigator.mediaDevices === 'undefined') {\r\n                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n                var getUserMediaSuccess = function() {};\r\n                var getUserMediaFailure = function() {};\r\n\r\n                var getUserMediaStream, getUserMediaError;\r\n                navigator.mediaDevices = {\r\n                    getUserMedia: function(hints) {\r\n                        navigator.getUserMedia(hints, function(getUserMediaSuccess) {\r\n                            getUserMediaSuccess(stream);\r\n                            getUserMediaStream = stream;\r\n                        }, function(error) {\r\n                            getUserMediaFailure(error);\r\n                            getUserMediaError = error;\r\n                        });\r\n\r\n                        return {\r\n                            then: function(successCB) {\r\n                                if (getUserMediaStream) {\r\n                                    successCB(getUserMediaStream);\r\n                                    return;\r\n                                }\r\n\r\n                                getUserMediaSuccess = successCB;\r\n\r\n                                return {\r\n                                    then: function(failureCB) {\r\n                                        if (getUserMediaError) {\r\n                                            failureCB(getUserMediaError);\r\n                                            return;\r\n                                        }\r\n\r\n                                        getUserMediaFailure = failureCB;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n\r\n            if (options.localMediaConstraints.isScreen === true) {\r\n                if (navigator.mediaDevices.getDisplayMedia) {\r\n                    navigator.mediaDevices.getDisplayMedia(options.localMediaConstraints).then(function(stream) {\r\n                        stream.streamid = stream.streamid || stream.id || getRandomString();\r\n                        stream.idInstance = idInstance;\r\n\r\n                        streaming(stream);\r\n                    }).catch(function(error) {\r\n                        options.onLocalMediaError(error, options.localMediaConstraints);\r\n                    });\r\n                } else if (navigator.getDisplayMedia) {\r\n                    navigator.getDisplayMedia(options.localMediaConstraints).then(function(stream) {\r\n                        stream.streamid = stream.streamid || stream.id || getRandomString();\r\n                        stream.idInstance = idInstance;\r\n\r\n                        streaming(stream);\r\n                    }).catch(function(error) {\r\n                        options.onLocalMediaError(error, options.localMediaConstraints);\r\n                    });\r\n                } else {\r\n                    throw new Error('getDisplayMedia API is not availabe in this browser.');\r\n                }\r\n                return;\r\n            }\r\n\r\n            navigator.mediaDevices.getUserMedia(options.localMediaConstraints).then(function(stream) {\r\n                stream.streamid = stream.streamid || stream.id || getRandomString();\r\n                stream.idInstance = idInstance;\r\n\r\n                streaming(stream);\r\n            }).catch(function(error) {\r\n                options.onLocalMediaError(error, options.localMediaConstraints);\r\n            });\r\n        }\r\n    }\r\n\r\n    // StreamsHandler.js\r\n\r\n    var StreamsHandler = (function() {\r\n        function handleType(type) {\r\n            if (!type) {\r\n                return;\r\n            }\r\n\r\n            if (typeof type === 'string' || typeof type === 'undefined') {\r\n                return type;\r\n            }\r\n\r\n            if (type.audio && type.video) {\r\n                return null;\r\n            }\r\n\r\n            if (type.audio) {\r\n                return 'audio';\r\n            }\r\n\r\n            if (type.video) {\r\n                return 'video';\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        function setHandlers(stream, syncAction, connection) {\r\n            if (!stream || !stream.addEventListener) return;\r\n\r\n            if (typeof syncAction == 'undefined' || syncAction == true) {\r\n                var streamEndedEvent = 'ended';\r\n\r\n                if ('oninactive' in stream) {\r\n                    streamEndedEvent = 'inactive';\r\n                }\r\n\r\n                stream.addEventListener(streamEndedEvent, function() {\r\n                    StreamsHandler.onSyncNeeded(this.streamid, streamEndedEvent);\r\n                }, false);\r\n            }\r\n\r\n            stream.mute = function(type, isSyncAction) {\r\n                type = handleType(type);\r\n\r\n                if (typeof isSyncAction !== 'undefined') {\r\n                    syncAction = isSyncAction;\r\n                }\r\n\r\n                if (typeof type == 'undefined' || type == 'audio') {\r\n                    getTracks(stream, 'audio').forEach(function(track) {\r\n                        track.enabled = false;\r\n                        connection.streamEvents[stream.streamid].isAudioMuted = true;\r\n                    });\r\n                }\r\n\r\n                if (typeof type == 'undefined' || type == 'video') {\r\n                    getTracks(stream, 'video').forEach(function(track) {\r\n                        track.enabled = false;\r\n                    });\r\n                }\r\n\r\n                if (typeof syncAction == 'undefined' || syncAction == true) {\r\n                    StreamsHandler.onSyncNeeded(stream.streamid, 'mute', type);\r\n                }\r\n\r\n                connection.streamEvents[stream.streamid].muteType = type || 'both';\r\n\r\n                fireEvent(stream, 'mute', type);\r\n            };\r\n\r\n            stream.unmute = function(type, isSyncAction) {\r\n                type = handleType(type);\r\n\r\n                if (typeof isSyncAction !== 'undefined') {\r\n                    syncAction = isSyncAction;\r\n                }\r\n\r\n                graduallyIncreaseVolume();\r\n\r\n                if (typeof type == 'undefined' || type == 'audio') {\r\n                    getTracks(stream, 'audio').forEach(function(track) {\r\n                        track.enabled = true;\r\n                        connection.streamEvents[stream.streamid].isAudioMuted = false;\r\n                    });\r\n                }\r\n\r\n                if (typeof type == 'undefined' || type == 'video') {\r\n                    getTracks(stream, 'video').forEach(function(track) {\r\n                        track.enabled = true;\r\n                    });\r\n\r\n                    // make sure that video unmute doesn't affects audio\r\n                    if (typeof type !== 'undefined' && type == 'video' && connection.streamEvents[stream.streamid].isAudioMuted) {\r\n                        (function looper(times) {\r\n                            if (!times) {\r\n                                times = 0;\r\n                            }\r\n\r\n                            times++;\r\n\r\n                            // check until five-seconds\r\n                            if (times < 100 && connection.streamEvents[stream.streamid].isAudioMuted) {\r\n                                stream.mute('audio');\r\n\r\n                                setTimeout(function() {\r\n                                    looper(times);\r\n                                }, 50);\r\n                            }\r\n                        })();\r\n                    }\r\n                }\r\n\r\n                if (typeof syncAction == 'undefined' || syncAction == true) {\r\n                    StreamsHandler.onSyncNeeded(stream.streamid, 'unmute', type);\r\n                }\r\n\r\n                connection.streamEvents[stream.streamid].unmuteType = type || 'both';\r\n\r\n                fireEvent(stream, 'unmute', type);\r\n            };\r\n\r\n            function graduallyIncreaseVolume() {\r\n                if (!connection.streamEvents[stream.streamid].mediaElement) {\r\n                    return;\r\n                }\r\n\r\n                var mediaElement = connection.streamEvents[stream.streamid].mediaElement;\r\n                mediaElement.volume = 0;\r\n                afterEach(200, 5, function() {\r\n                    try {\r\n                        mediaElement.volume += .20;\r\n                    } catch (e) {\r\n                        mediaElement.volume = 1;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        function afterEach(setTimeoutInteval, numberOfTimes, callback, startedTimes) {\r\n            startedTimes = (startedTimes || 0) + 1;\r\n            if (startedTimes >= numberOfTimes) return;\r\n\r\n            setTimeout(function() {\r\n                callback();\r\n                afterEach(setTimeoutInteval, numberOfTimes, callback, startedTimes);\r\n            }, setTimeoutInteval);\r\n        }\r\n\r\n        return {\r\n            setHandlers: setHandlers,\r\n            onSyncNeeded: function(streamid, action, type) {}\r\n        };\r\n    })();\r\n\r\n    // TextReceiver.js & TextSender.js\r\n\r\n    function TextReceiver(connection) {\r\n        var content = {};\r\n\r\n        function receive(data, userid, extra) {\r\n            // uuid is used to uniquely identify sending instance\r\n            var uuid = data.uuid;\r\n            if (!content[uuid]) {\r\n                content[uuid] = [];\r\n            }\r\n\r\n            content[uuid].push(data.message);\r\n\r\n            if (data.last) {\r\n                var message = content[uuid].join('');\r\n                if (data.isobject) {\r\n                    message = JSON.parse(message);\r\n                }\r\n\r\n                // latency detection\r\n                var receivingTime = new Date().getTime();\r\n                var latency = receivingTime - data.sendingTime;\r\n\r\n                var e = {\r\n                    data: message,\r\n                    userid: userid,\r\n                    extra: extra,\r\n                    latency: latency\r\n                };\r\n\r\n                if (connection.autoTranslateText) {\r\n                    e.original = e.data;\r\n                    connection.Translator.TranslateText(e.data, function(translatedText) {\r\n                        e.data = translatedText;\r\n                        connection.onmessage(e);\r\n                    });\r\n                } else {\r\n                    connection.onmessage(e);\r\n                }\r\n\r\n                delete content[uuid];\r\n            }\r\n        }\r\n\r\n        return {\r\n            receive: receive\r\n        };\r\n    }\r\n\r\n    // TextSender.js\r\n    var TextSender = {\r\n        send: function(config) {\r\n            var connection = config.connection;\r\n\r\n            var channel = config.channel,\r\n                remoteUserId = config.remoteUserId,\r\n                initialText = config.text,\r\n                packetSize = connection.chunkSize || 1000,\r\n                textToTransfer = '',\r\n                isobject = false;\r\n\r\n            if (!isString(initialText)) {\r\n                isobject = true;\r\n                initialText = JSON.stringify(initialText);\r\n            }\r\n\r\n            // uuid is used to uniquely identify sending instance\r\n            var uuid = getRandomString();\r\n            var sendingTime = new Date().getTime();\r\n\r\n            sendText(initialText);\r\n\r\n            function sendText(textMessage, text) {\r\n                var data = {\r\n                    type: 'text',\r\n                    uuid: uuid,\r\n                    sendingTime: sendingTime\r\n                };\r\n\r\n                if (textMessage) {\r\n                    text = textMessage;\r\n                    data.packets = parseInt(text.length / packetSize);\r\n                }\r\n\r\n                if (text.length > packetSize) {\r\n                    data.message = text.slice(0, packetSize);\r\n                } else {\r\n                    data.message = text;\r\n                    data.last = true;\r\n                    data.isobject = isobject;\r\n                }\r\n\r\n                channel.send(data, remoteUserId);\r\n\r\n                textToTransfer = text.slice(data.message.length);\r\n\r\n                if (textToTransfer.length) {\r\n                    setTimeout(function() {\r\n                        sendText(null, textToTransfer);\r\n                    }, connection.chunkInterval || 100);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // FileProgressBarHandler.js\r\n\r\n    var FileProgressBarHandler = (function() {\r\n        function handle(connection) {\r\n            var progressHelper = {};\r\n\r\n            // www.RTCMultiConnection.org/docs/onFileStart/\r\n            connection.onFileStart = function(file) {\r\n                var div = document.createElement('div');\r\n                div.title = file.name;\r\n                div.innerHTML = '<label>0%</label> <progress></progress>';\r\n\r\n                if (file.remoteUserId) {\r\n                    div.innerHTML += ' (Sharing with:' + file.remoteUserId + ')';\r\n                }\r\n\r\n                if (!connection.filesContainer) {\r\n                    connection.filesContainer = document.body || document.documentElement;\r\n                }\r\n\r\n                connection.filesContainer.insertBefore(div, connection.filesContainer.firstChild);\r\n\r\n                if (!file.remoteUserId) {\r\n                    progressHelper[file.uuid] = {\r\n                        div: div,\r\n                        progress: div.querySelector('progress'),\r\n                        label: div.querySelector('label')\r\n                    };\r\n                    progressHelper[file.uuid].progress.max = file.maxChunks;\r\n                    return;\r\n                }\r\n\r\n                if (!progressHelper[file.uuid]) {\r\n                    progressHelper[file.uuid] = {};\r\n                }\r\n\r\n                progressHelper[file.uuid][file.remoteUserId] = {\r\n                    div: div,\r\n                    progress: div.querySelector('progress'),\r\n                    label: div.querySelector('label')\r\n                };\r\n                progressHelper[file.uuid][file.remoteUserId].progress.max = file.maxChunks;\r\n            };\r\n\r\n            // www.RTCMultiConnection.org/docs/onFileProgress/\r\n            connection.onFileProgress = function(chunk) {\r\n                var helper = progressHelper[chunk.uuid];\r\n                if (!helper) {\r\n                    return;\r\n                }\r\n                if (chunk.remoteUserId) {\r\n                    helper = progressHelper[chunk.uuid][chunk.remoteUserId];\r\n                    if (!helper) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                helper.progress.value = chunk.currentPosition || chunk.maxChunks || helper.progress.max;\r\n                updateLabel(helper.progress, helper.label);\r\n            };\r\n\r\n            // www.RTCMultiConnection.org/docs/onFileEnd/\r\n            connection.onFileEnd = function(file) {\r\n                var helper = progressHelper[file.uuid];\r\n                if (!helper) {\r\n                    console.error('No such progress-helper element exist.', file);\r\n                    return;\r\n                }\r\n\r\n                if (file.remoteUserId) {\r\n                    helper = progressHelper[file.uuid][file.remoteUserId];\r\n                    if (!helper) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                var div = helper.div;\r\n                if (file.type.indexOf('image') != -1) {\r\n                    div.innerHTML = '<a href=\"' + file.url + '\" download=\"' + file.name + '\">Download <strong style=\"color:red;\">' + file.name + '</strong> </a><br /><img src=\"' + file.url + '\" title=\"' + file.name + '\" style=\"max-width: 80%;\">';\r\n                } else {\r\n                    div.innerHTML = '<a href=\"' + file.url + '\" download=\"' + file.name + '\">Download <strong style=\"color:red;\">' + file.name + '</strong> </a><br /><iframe src=\"' + file.url + '\" title=\"' + file.name + '\" style=\"width: 80%;border: 0;height: inherit;margin-top:1em;\"></iframe>';\r\n                }\r\n            };\r\n\r\n            function updateLabel(progress, label) {\r\n                if (progress.position === -1) {\r\n                    return;\r\n                }\r\n\r\n                var position = +progress.position.toFixed(2).split('.')[1] || 100;\r\n                label.innerHTML = position + '%';\r\n            }\r\n        }\r\n\r\n        return {\r\n            handle: handle\r\n        };\r\n    })();\r\n\r\n    // TranslationHandler.js\r\n\r\n    var TranslationHandler = (function() {\r\n        function handle(connection) {\r\n            connection.autoTranslateText = false;\r\n            connection.language = 'en';\r\n            connection.googKey = 'AIzaSyCgB5hmFY74WYB-EoWkhr9cAGr6TiTHrEE';\r\n\r\n            // www.RTCMultiConnection.org/docs/Translator/\r\n            connection.Translator = {\r\n                TranslateText: function(text, callback) {\r\n                    // if(location.protocol === 'https:') return callback(text);\r\n\r\n                    var newScript = document.createElement('script');\r\n                    newScript.type = 'text/javascript';\r\n\r\n                    var sourceText = encodeURIComponent(text); // escape\r\n\r\n                    var randomNumber = 'method' + connection.token();\r\n                    window[randomNumber] = function(response) {\r\n                        if (response.data && response.data.translations[0] && callback) {\r\n                            callback(response.data.translations[0].translatedText);\r\n                            return;\r\n                        }\r\n\r\n                        if (response.error && response.error.message === 'Daily Limit Exceeded') {\r\n                            console.error('Text translation failed. Error message: \"Daily Limit Exceeded.\"');\r\n                            return;\r\n                        }\r\n\r\n                        if (response.error) {\r\n                            console.error(response.error.message);\r\n                            return;\r\n                        }\r\n\r\n                        console.error(response);\r\n                    };\r\n\r\n                    var source = 'https://www.googleapis.com/language/translate/v2?key=' + connection.googKey + '&target=' + (connection.language || 'en-US') + '&callback=window.' + randomNumber + '&q=' + sourceText;\r\n                    newScript.src = source;\r\n                    document.getElementsByTagName('head')[0].appendChild(newScript);\r\n                },\r\n                getListOfLanguages: function(callback) {\r\n                    var xhr = new XMLHttpRequest();\r\n                    xhr.onreadystatechange = function() {\r\n                        if (xhr.readyState == XMLHttpRequest.DONE) {\r\n                            var response = JSON.parse(xhr.responseText);\r\n\r\n                            if (response && response.data && response.data.languages) {\r\n                                callback(response.data.languages);\r\n                                return;\r\n                            }\r\n\r\n                            if (response.error && response.error.message === 'Daily Limit Exceeded') {\r\n                                console.error('Text translation failed. Error message: \"Daily Limit Exceeded.\"');\r\n                                return;\r\n                            }\r\n\r\n                            if (response.error) {\r\n                                console.error(response.error.message);\r\n                                return;\r\n                            }\r\n\r\n                            console.error(response);\r\n                        }\r\n                    }\r\n                    var url = 'https://www.googleapis.com/language/translate/v2/languages?key=' + connection.googKey + '&target=en';\r\n                    xhr.open('GET', url, true);\r\n                    xhr.send(null);\r\n                }\r\n            };\r\n        }\r\n\r\n        return {\r\n            handle: handle\r\n        };\r\n    })();\r\n\r\n    // _____________________\r\n    // RTCMultiConnection.js\r\n\r\n    (function(connection) {\r\n        forceOptions = forceOptions || {\r\n            useDefaultDevices: true\r\n        };\r\n\r\n        connection.channel = connection.sessionid = (roomid || location.href.replace(/\\/|:|#|\\?|\\$|\\^|%|\\.|`|~|!|\\+|@|\\[|\\||]|\\|*. /g, '').split('\\n').join('').split('\\r').join('')) + '';\r\n\r\n        var mPeer = new MultiPeers(connection);\r\n\r\n        var preventDuplicateOnStreamEvents = {};\r\n        mPeer.onGettingLocalMedia = function(stream, callback) {\r\n            callback = callback || function() {};\r\n\r\n            if (preventDuplicateOnStreamEvents[stream.streamid]) {\r\n                callback();\r\n                return;\r\n            }\r\n            preventDuplicateOnStreamEvents[stream.streamid] = true;\r\n\r\n            try {\r\n                stream.type = 'local';\r\n            } catch (e) {}\r\n\r\n            connection.setStreamEndHandler(stream);\r\n\r\n            getRMCMediaElement(stream, function(mediaElement) {\r\n                mediaElement.id = stream.streamid;\r\n                mediaElement.muted = true;\r\n                mediaElement.volume = 0;\r\n\r\n                if (connection.attachStreams.indexOf(stream) === -1) {\r\n                    connection.attachStreams.push(stream);\r\n                }\r\n\r\n                if (typeof StreamsHandler !== 'undefined') {\r\n                    StreamsHandler.setHandlers(stream, true, connection);\r\n                }\r\n                var isAudioMuted = stream.getAudioTracks().filter(function(track) {\r\n                    return track.enabled;\r\n                }).length === 0;\r\n\r\n                connection.streamEvents[stream.streamid] = {\r\n                    stream: stream,\r\n                    type: 'local',\r\n                    mediaElement: mediaElement,\r\n                    userid: connection.userid,\r\n                    extra: connection.extra,\r\n                    streamid: stream.streamid,\r\n                    isAudioMuted: isAudioMuted\r\n                };\r\n\r\n                try {\r\n                    setHarkEvents(connection, connection.streamEvents[stream.streamid]);\r\n                    setMuteHandlers(connection, connection.streamEvents[stream.streamid]);\r\n\r\n                    connection.onstream(connection.streamEvents[stream.streamid]);\r\n                } catch (e) {\r\n                    //\r\n                }\r\n\r\n                callback();\r\n            }, connection);\r\n        };\r\n\r\n        mPeer.onGettingRemoteMedia = function(stream, remoteUserId) {\r\n            try {\r\n                stream.type = 'remote';\r\n            } catch (e) {}\r\n\r\n            connection.setStreamEndHandler(stream, 'remote-stream');\r\n\r\n            getRMCMediaElement(stream, function(mediaElement) {\r\n                mediaElement.id = stream.streamid;\r\n\r\n                if (typeof StreamsHandler !== 'undefined') {\r\n                    StreamsHandler.setHandlers(stream, false, connection);\r\n                }\r\n\r\n                connection.streamEvents[stream.streamid] = {\r\n                    stream: stream,\r\n                    type: 'remote',\r\n                    userid: remoteUserId,\r\n                    extra: connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra : {},\r\n                    mediaElement: mediaElement,\r\n                    streamid: stream.streamid\r\n                };\r\n\r\n                setMuteHandlers(connection, connection.streamEvents[stream.streamid]);\r\n\r\n                connection.onstream(connection.streamEvents[stream.streamid]);\r\n            }, connection);\r\n        };\r\n\r\n        mPeer.onRemovingRemoteMedia = function(stream, remoteUserId) {\r\n            var streamEvent = connection.streamEvents[stream.streamid];\r\n            if (!streamEvent) {\r\n                streamEvent = {\r\n                    stream: stream,\r\n                    type: 'remote',\r\n                    userid: remoteUserId,\r\n                    extra: connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra : {},\r\n                    streamid: stream.streamid,\r\n                    mediaElement: connection.streamEvents[stream.streamid] ? connection.streamEvents[stream.streamid].mediaElement : null\r\n                };\r\n            }\r\n\r\n            if (connection.peersBackup[streamEvent.userid]) {\r\n                streamEvent.extra = connection.peersBackup[streamEvent.userid].extra;\r\n            }\r\n\r\n            connection.onstreamended(streamEvent);\r\n\r\n            delete connection.streamEvents[stream.streamid];\r\n        };\r\n\r\n        mPeer.onNegotiationNeeded = function(message, remoteUserId, callback) {\r\n            callback = callback || function() {};\r\n\r\n            remoteUserId = remoteUserId || message.remoteUserId;\r\n            message = message || '';\r\n\r\n            // usually a message looks like this\r\n            var messageToDeliver = {\r\n                remoteUserId: remoteUserId,\r\n                message: message,\r\n                sender: connection.userid\r\n            };\r\n\r\n            if (message.remoteUserId && message.message && message.sender) {\r\n                // if a code is manually passing required data\r\n                messageToDeliver = message;\r\n            }\r\n\r\n            connectSocket(function() {\r\n                connection.socket.emit(connection.socketMessageEvent, messageToDeliver, callback);\r\n            });\r\n        };\r\n\r\n        function onUserLeft(remoteUserId) {\r\n            connection.deletePeer(remoteUserId);\r\n        }\r\n\r\n        mPeer.onUserLeft = onUserLeft;\r\n        mPeer.disconnectWith = function(remoteUserId, callback) {\r\n            if (connection.socket) {\r\n                connection.socket.emit('disconnect-with', remoteUserId, callback || function() {});\r\n            }\r\n\r\n            connection.deletePeer(remoteUserId);\r\n        };\r\n\r\n        connection.socketOptions = {\r\n            // 'force new connection': true, // For SocketIO version < 1.0\r\n            // 'forceNew': true, // For SocketIO version >= 1.0\r\n            'transport': 'polling' // fixing transport:unknown issues\r\n        };\r\n\r\n        function connectSocket(connectCallback) {\r\n            connection.socketAutoReConnect = true;\r\n\r\n            if (connection.socket) { // todo: check here readySate/etc. to make sure socket is still opened\r\n                if (connectCallback) {\r\n                    connectCallback(connection.socket);\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (typeof SocketConnection === 'undefined') {\r\n                if (typeof FirebaseConnection !== 'undefined') {\r\n                    window.SocketConnection = FirebaseConnection;\r\n                } else if (typeof PubNubConnection !== 'undefined') {\r\n                    window.SocketConnection = PubNubConnection;\r\n                } else {\r\n                    throw 'SocketConnection.js seems missed.';\r\n                }\r\n            }\r\n\r\n            new SocketConnection(connection, function(s) {\r\n                if (connectCallback) {\r\n                    connectCallback(connection.socket);\r\n                }\r\n            });\r\n        }\r\n\r\n        // 1st paramter is roomid\r\n        // 2rd paramter is a callback function\r\n        connection.openOrJoin = function(roomid, callback) {\r\n            callback = callback || function() {};\r\n\r\n            connection.checkPresence(roomid, function(isRoomExist, roomid) {\r\n                if (isRoomExist) {\r\n                    connection.sessionid = roomid;\r\n\r\n                    var localPeerSdpConstraints = false;\r\n                    var remotePeerSdpConstraints = false;\r\n                    var isOneWay = !!connection.session.oneway;\r\n                    var isDataOnly = isData(connection.session);\r\n\r\n                    remotePeerSdpConstraints = {\r\n                        OfferToReceiveAudio: connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                        OfferToReceiveVideo: connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                    }\r\n\r\n                    localPeerSdpConstraints = {\r\n                        OfferToReceiveAudio: isOneWay ? !!connection.session.audio : connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                        OfferToReceiveVideo: isOneWay ? !!connection.session.video || !!connection.session.screen : connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                    }\r\n\r\n                    var connectionDescription = {\r\n                        remoteUserId: connection.sessionid,\r\n                        message: {\r\n                            newParticipationRequest: true,\r\n                            isOneWay: isOneWay,\r\n                            isDataOnly: isDataOnly,\r\n                            localPeerSdpConstraints: localPeerSdpConstraints,\r\n                            remotePeerSdpConstraints: remotePeerSdpConstraints\r\n                        },\r\n                        sender: connection.userid\r\n                    };\r\n\r\n                    beforeJoin(connectionDescription.message, function() {\r\n                        joinRoom(connectionDescription, callback);\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                connection.waitingForLocalMedia = true;\r\n                connection.isInitiator = true;\r\n\r\n                connection.sessionid = roomid || connection.sessionid;\r\n\r\n                if (isData(connection.session)) {\r\n                    openRoom(callback);\r\n                    return;\r\n                }\r\n\r\n                connection.captureUserMedia(function() {\r\n                    openRoom(callback);\r\n                });\r\n            });\r\n        };\r\n\r\n        // don't allow someone to join this person until he has the media\r\n        connection.waitingForLocalMedia = false;\r\n\r\n        connection.open = function(roomid, callback) {\r\n            callback = callback || function() {};\r\n\r\n            connection.waitingForLocalMedia = true;\r\n            connection.isInitiator = true;\r\n\r\n            connection.sessionid = roomid || connection.sessionid;\r\n\r\n            connectSocket(function() {\r\n                if (isData(connection.session)) {\r\n                    openRoom(callback);\r\n                    return;\r\n                }\r\n\r\n                connection.captureUserMedia(function() {\r\n                    openRoom(callback);\r\n                });\r\n            });\r\n        };\r\n\r\n        // this object keeps extra-data records for all connected users\r\n        // this object is never cleared so you can always access extra-data even if a user left\r\n        connection.peersBackup = {};\r\n\r\n        connection.deletePeer = function(remoteUserId) {\r\n            if (!remoteUserId || !connection.peers[remoteUserId]) {\r\n                return;\r\n            }\r\n\r\n            var eventObject = {\r\n                userid: remoteUserId,\r\n                extra: connection.peers[remoteUserId] ? connection.peers[remoteUserId].extra : {}\r\n            };\r\n\r\n            if (connection.peersBackup[eventObject.userid]) {\r\n                eventObject.extra = connection.peersBackup[eventObject.userid].extra;\r\n            }\r\n\r\n            connection.onleave(eventObject);\r\n\r\n            if (!!connection.peers[remoteUserId]) {\r\n                connection.peers[remoteUserId].streams.forEach(function(stream) {\r\n                    stream.stop();\r\n                });\r\n\r\n                var peer = connection.peers[remoteUserId].peer;\r\n                if (peer && peer.iceConnectionState !== 'closed') {\r\n                    try {\r\n                        peer.close();\r\n                    } catch (e) {}\r\n                }\r\n\r\n                if (connection.peers[remoteUserId]) {\r\n                    connection.peers[remoteUserId].peer = null;\r\n                    delete connection.peers[remoteUserId];\r\n                }\r\n            }\r\n        }\r\n\r\n        connection.rejoin = function(connectionDescription) {\r\n            if (connection.isInitiator || !connectionDescription || !Object.keys(connectionDescription).length) {\r\n                return;\r\n            }\r\n\r\n            var extra = {};\r\n\r\n            if (connection.peers[connectionDescription.remoteUserId]) {\r\n                extra = connection.peers[connectionDescription.remoteUserId].extra;\r\n                connection.deletePeer(connectionDescription.remoteUserId);\r\n            }\r\n\r\n            if (connectionDescription && connectionDescription.remoteUserId) {\r\n                connection.join(connectionDescription.remoteUserId);\r\n\r\n                connection.onReConnecting({\r\n                    userid: connectionDescription.remoteUserId,\r\n                    extra: extra\r\n                });\r\n            }\r\n        };\r\n\r\n        connection.join = function(remoteUserId, options) {\r\n            connection.sessionid = (remoteUserId ? remoteUserId.sessionid || remoteUserId.remoteUserId || remoteUserId : false) || connection.sessionid;\r\n            connection.sessionid += '';\r\n\r\n            var localPeerSdpConstraints = false;\r\n            var remotePeerSdpConstraints = false;\r\n            var isOneWay = false;\r\n            var isDataOnly = false;\r\n\r\n            if ((remoteUserId && remoteUserId.session) || !remoteUserId || typeof remoteUserId === 'string') {\r\n                var session = remoteUserId ? remoteUserId.session || connection.session : connection.session;\r\n\r\n                isOneWay = !!session.oneway;\r\n                isDataOnly = isData(session);\r\n\r\n                remotePeerSdpConstraints = {\r\n                    OfferToReceiveAudio: connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                    OfferToReceiveVideo: connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                };\r\n\r\n                localPeerSdpConstraints = {\r\n                    OfferToReceiveAudio: isOneWay ? !!connection.session.audio : connection.sdpConstraints.mandatory.OfferToReceiveAudio,\r\n                    OfferToReceiveVideo: isOneWay ? !!connection.session.video || !!connection.session.screen : connection.sdpConstraints.mandatory.OfferToReceiveVideo\r\n                };\r\n            }\r\n\r\n            options = options || {};\r\n\r\n            var cb = function() {};\r\n            if (typeof options === 'function') {\r\n                cb = options;\r\n                options = {};\r\n            }\r\n\r\n            if (typeof options.localPeerSdpConstraints !== 'undefined') {\r\n                localPeerSdpConstraints = options.localPeerSdpConstraints;\r\n            }\r\n\r\n            if (typeof options.remotePeerSdpConstraints !== 'undefined') {\r\n                remotePeerSdpConstraints = options.remotePeerSdpConstraints;\r\n            }\r\n\r\n            if (typeof options.isOneWay !== 'undefined') {\r\n                isOneWay = options.isOneWay;\r\n            }\r\n\r\n            if (typeof options.isDataOnly !== 'undefined') {\r\n                isDataOnly = options.isDataOnly;\r\n            }\r\n\r\n            var connectionDescription = {\r\n                remoteUserId: connection.sessionid,\r\n                message: {\r\n                    newParticipationRequest: true,\r\n                    isOneWay: isOneWay,\r\n                    isDataOnly: isDataOnly,\r\n                    localPeerSdpConstraints: localPeerSdpConstraints,\r\n                    remotePeerSdpConstraints: remotePeerSdpConstraints\r\n                },\r\n                sender: connection.userid\r\n            };\r\n\r\n            beforeJoin(connectionDescription.message, function() {\r\n                connectSocket(function() {\r\n                    joinRoom(connectionDescription, cb);\r\n                });\r\n            });\r\n            return connectionDescription;\r\n        };\r\n\r\n        function joinRoom(connectionDescription, cb) {\r\n            connection.socket.emit('join-room', {\r\n                sessionid: connection.sessionid,\r\n                session: connection.session,\r\n                mediaConstraints: connection.mediaConstraints,\r\n                sdpConstraints: connection.sdpConstraints,\r\n                streams: getStreamInfoForAdmin(),\r\n                extra: connection.extra,\r\n                password: typeof connection.password !== 'undefined' && typeof connection.password !== 'object' ? connection.password : ''\r\n            }, function(isRoomJoined, error) {\r\n                if (isRoomJoined === true) {\r\n                    if (connection.enableLogs) {\r\n                        console.log('isRoomJoined: ', isRoomJoined, ' roomid: ', connection.sessionid);\r\n                    }\r\n\r\n                    if (!!connection.peers[connection.sessionid]) {\r\n                        // on socket disconnect & reconnect\r\n                        return;\r\n                    }\r\n\r\n                    mPeer.onNegotiationNeeded(connectionDescription);\r\n                }\r\n\r\n                if (isRoomJoined === false) {\r\n                    if (connection.enableLogs) {\r\n                        console.warn('isRoomJoined: ', error, ' roomid: ', connection.sessionid);\r\n                    }\r\n\r\n                    // [disabled] retry after 3 seconds\r\n                    false && setTimeout(function() {\r\n                        joinRoom(connectionDescription, cb);\r\n                    }, 3000);\r\n                }\r\n\r\n                cb(isRoomJoined, connection.sessionid, error);\r\n            });\r\n        }\r\n\r\n        connection.publicRoomIdentifier = '';\r\n\r\n        function openRoom(callback) {\r\n            if (connection.enableLogs) {\r\n                console.log('Sending open-room signal to socket.io');\r\n            }\r\n\r\n            connection.waitingForLocalMedia = false;\r\n            connection.socket.emit('open-room', {\r\n                sessionid: connection.sessionid,\r\n                session: connection.session,\r\n                mediaConstraints: connection.mediaConstraints,\r\n                sdpConstraints: connection.sdpConstraints,\r\n                streams: getStreamInfoForAdmin(),\r\n                extra: connection.extra,\r\n                identifier: connection.publicRoomIdentifier,\r\n                password: typeof connection.password !== 'undefined' && typeof connection.password !== 'object' ? connection.password : ''\r\n            }, function(isRoomOpened, error) {\r\n                if (isRoomOpened === true) {\r\n                    if (connection.enableLogs) {\r\n                        console.log('isRoomOpened: ', isRoomOpened, ' roomid: ', connection.sessionid);\r\n                    }\r\n                    callback(isRoomOpened, connection.sessionid);\r\n                }\r\n\r\n                if (isRoomOpened === false) {\r\n                    if (connection.enableLogs) {\r\n                        console.warn('isRoomOpened: ', error, ' roomid: ', connection.sessionid);\r\n                    }\r\n\r\n                    callback(isRoomOpened, connection.sessionid, error);\r\n                }\r\n            });\r\n        }\r\n\r\n        function getStreamInfoForAdmin() {\r\n            try {\r\n                return connection.streamEvents.selectAll('local').map(function(event) {\r\n                    return {\r\n                        streamid: event.streamid,\r\n                        tracks: event.stream.getTracks().length\r\n                    };\r\n                });\r\n            } catch (e) {\r\n                return [];\r\n            }\r\n        }\r\n\r\n        function beforeJoin(userPreferences, callback) {\r\n            if (connection.dontCaptureUserMedia || userPreferences.isDataOnly) {\r\n                callback();\r\n                return;\r\n            }\r\n\r\n            var localMediaConstraints = {};\r\n\r\n            if (userPreferences.localPeerSdpConstraints.OfferToReceiveAudio) {\r\n                localMediaConstraints.audio = connection.mediaConstraints.audio;\r\n            }\r\n\r\n            if (userPreferences.localPeerSdpConstraints.OfferToReceiveVideo) {\r\n                localMediaConstraints.video = connection.mediaConstraints.video;\r\n            }\r\n\r\n            var session = userPreferences.session || connection.session;\r\n\r\n            if (session.oneway && session.audio !== 'two-way' && session.video !== 'two-way' && session.screen !== 'two-way') {\r\n                callback();\r\n                return;\r\n            }\r\n\r\n            if (session.oneway && session.audio && session.audio === 'two-way') {\r\n                session = {\r\n                    audio: true\r\n                };\r\n            }\r\n\r\n            if (session.audio || session.video || session.screen) {\r\n                if (session.screen) {\r\n                    if (DetectRTC.browser.name === 'Edge') {\r\n                        navigator.getDisplayMedia({\r\n                            video: true,\r\n                            audio: isAudioPlusTab(connection)\r\n                        }).then(function(screen) {\r\n                            screen.isScreen = true;\r\n                            mPeer.onGettingLocalMedia(screen);\r\n\r\n                            if ((session.audio || session.video) && !isAudioPlusTab(connection)) {\r\n                                connection.invokeGetUserMedia(null, callback);\r\n                            } else {\r\n                                callback(screen);\r\n                            }\r\n                        }, function(error) {\r\n                            console.error('Unable to capture screen on Edge. HTTPs and version 17+ is required.');\r\n                        });\r\n                    } else {\r\n                        connection.invokeGetUserMedia({\r\n                            audio: isAudioPlusTab(connection),\r\n                            video: true,\r\n                            isScreen: true\r\n                        }, (session.audio || session.video) && !isAudioPlusTab(connection) ? connection.invokeGetUserMedia(null, callback) : callback);\r\n                    }\r\n                } else if (session.audio || session.video) {\r\n                    connection.invokeGetUserMedia(null, callback, session);\r\n                }\r\n            }\r\n        }\r\n\r\n        connection.getUserMedia = connection.captureUserMedia = function(callback, sessionForced) {\r\n            callback = callback || function() {};\r\n            var session = sessionForced || connection.session;\r\n\r\n            if (connection.dontCaptureUserMedia || isData(session)) {\r\n                callback();\r\n                return;\r\n            }\r\n\r\n            if (session.audio || session.video || session.screen) {\r\n                if (session.screen) {\r\n                    if (DetectRTC.browser.name === 'Edge') {\r\n                        navigator.getDisplayMedia({\r\n                            video: true,\r\n                            audio: isAudioPlusTab(connection)\r\n                        }).then(function(screen) {\r\n                            screen.isScreen = true;\r\n                            mPeer.onGettingLocalMedia(screen);\r\n\r\n                            if ((session.audio || session.video) && !isAudioPlusTab(connection)) {\r\n                                var nonScreenSession = {};\r\n                                for (var s in session) {\r\n                                    if (s !== 'screen') {\r\n                                        nonScreenSession[s] = session[s];\r\n                                    }\r\n                                }\r\n                                connection.invokeGetUserMedia(sessionForced, callback, nonScreenSession);\r\n                                return;\r\n                            }\r\n                            callback(screen);\r\n                        }, function(error) {\r\n                            console.error('Unable to capture screen on Edge. HTTPs and version 17+ is required.');\r\n                        });\r\n                    } else {\r\n                        connection.invokeGetUserMedia({\r\n                            audio: isAudioPlusTab(connection),\r\n                            video: true,\r\n                            isScreen: true\r\n                        }, function(stream) {\r\n                            if ((session.audio || session.video) && !isAudioPlusTab(connection)) {\r\n                                var nonScreenSession = {};\r\n                                for (var s in session) {\r\n                                    if (s !== 'screen') {\r\n                                        nonScreenSession[s] = session[s];\r\n                                    }\r\n                                }\r\n                                connection.invokeGetUserMedia(sessionForced, callback, nonScreenSession);\r\n                                return;\r\n                            }\r\n                            callback(stream);\r\n                        });\r\n                    }\r\n                } else if (session.audio || session.video) {\r\n                    connection.invokeGetUserMedia(sessionForced, callback, session);\r\n                }\r\n            }\r\n        };\r\n\r\n        connection.onbeforeunload = function(arg1, dontCloseSocket) {\r\n            if (!connection.closeBeforeUnload) {\r\n                return;\r\n            }\r\n\r\n            connection.peers.getAllParticipants().forEach(function(participant) {\r\n                mPeer.onNegotiationNeeded({\r\n                    userLeft: true\r\n                }, participant);\r\n\r\n                if (connection.peers[participant] && connection.peers[participant].peer) {\r\n                    connection.peers[participant].peer.close();\r\n                }\r\n\r\n                delete connection.peers[participant];\r\n            });\r\n\r\n            if (!dontCloseSocket) {\r\n                connection.closeSocket();\r\n            }\r\n\r\n            connection.isInitiator = false;\r\n        };\r\n\r\n        if (!window.ignoreBeforeUnload) {\r\n            // user can implement its own version of window.onbeforeunload\r\n            connection.closeBeforeUnload = true;\r\n            window.addEventListener('beforeunload', connection.onbeforeunload, false);\r\n        } else {\r\n            connection.closeBeforeUnload = false;\r\n        }\r\n\r\n        connection.userid = getRandomString();\r\n        connection.changeUserId = function(newUserId, callback) {\r\n            callback = callback || function() {};\r\n            connection.userid = newUserId || getRandomString();\r\n            connection.socket.emit('changed-uuid', connection.userid, callback);\r\n        };\r\n\r\n        connection.extra = {};\r\n        connection.attachStreams = [];\r\n\r\n        connection.session = {\r\n            audio: true,\r\n            video: true\r\n        };\r\n\r\n        connection.enableFileSharing = false;\r\n\r\n        // all values in kbps\r\n        connection.bandwidth = {\r\n            screen: false,\r\n            audio: false,\r\n            video: false\r\n        };\r\n\r\n        connection.codecs = {\r\n            audio: 'opus',\r\n            video: 'VP9'\r\n        };\r\n\r\n        connection.processSdp = function(sdp) {\r\n            // ignore SDP modification if unified-pan is supported\r\n            if (isUnifiedPlanSupportedDefault()) {\r\n                return sdp;\r\n            }\r\n\r\n            if (DetectRTC.browser.name === 'Safari') {\r\n                return sdp;\r\n            }\r\n\r\n            if (connection.codecs.video.toUpperCase() === 'VP8') {\r\n                sdp = CodecsHandler.preferCodec(sdp, 'vp8');\r\n            }\r\n\r\n            if (connection.codecs.video.toUpperCase() === 'VP9') {\r\n                sdp = CodecsHandler.preferCodec(sdp, 'vp9');\r\n            }\r\n\r\n            if (connection.codecs.video.toUpperCase() === 'H264') {\r\n                sdp = CodecsHandler.preferCodec(sdp, 'h264');\r\n            }\r\n\r\n            if (connection.codecs.audio === 'G722') {\r\n                sdp = CodecsHandler.removeNonG722(sdp);\r\n            }\r\n\r\n            if (DetectRTC.browser.name === 'Firefox') {\r\n                return sdp;\r\n            }\r\n\r\n            if (connection.bandwidth.video || connection.bandwidth.screen) {\r\n                sdp = CodecsHandler.setApplicationSpecificBandwidth(sdp, connection.bandwidth, !!connection.session.screen);\r\n            }\r\n\r\n            if (connection.bandwidth.video) {\r\n                sdp = CodecsHandler.setVideoBitrates(sdp, {\r\n                    min: connection.bandwidth.video * 8 * 1024,\r\n                    max: connection.bandwidth.video * 8 * 1024\r\n                });\r\n            }\r\n\r\n            if (connection.bandwidth.audio) {\r\n                sdp = CodecsHandler.setOpusAttributes(sdp, {\r\n                    maxaveragebitrate: connection.bandwidth.audio * 8 * 1024,\r\n                    maxplaybackrate: connection.bandwidth.audio * 8 * 1024,\r\n                    stereo: 1,\r\n                    maxptime: 3\r\n                });\r\n            }\r\n\r\n            return sdp;\r\n        };\r\n\r\n        if (typeof CodecsHandler !== 'undefined') {\r\n            connection.BandwidthHandler = connection.CodecsHandler = CodecsHandler;\r\n        }\r\n\r\n        connection.mediaConstraints = {\r\n            audio: {\r\n                mandatory: {},\r\n                optional: connection.bandwidth.audio ? [{\r\n                    bandwidth: connection.bandwidth.audio * 8 * 1024 || 128 * 8 * 1024\r\n                }] : []\r\n            },\r\n            video: {\r\n                mandatory: {},\r\n                optional: connection.bandwidth.video ? [{\r\n                    bandwidth: connection.bandwidth.video * 8 * 1024 || 128 * 8 * 1024\r\n                }, {\r\n                    facingMode: 'user'\r\n                }] : [{\r\n                    facingMode: 'user'\r\n                }]\r\n            }\r\n        };\r\n\r\n        if (DetectRTC.browser.name === 'Firefox') {\r\n            connection.mediaConstraints = {\r\n                audio: true,\r\n                video: true\r\n            };\r\n        }\r\n\r\n        if (!forceOptions.useDefaultDevices && !DetectRTC.isMobileDevice) {\r\n            DetectRTC.load(function() {\r\n                var lastAudioDevice, lastVideoDevice;\r\n                // it will force RTCMultiConnection to capture last-devices\r\n                // i.e. if external microphone is attached to system, we should prefer it over built-in devices.\r\n                DetectRTC.MediaDevices.forEach(function(device) {\r\n                    if (device.kind === 'audioinput' && connection.mediaConstraints.audio !== false) {\r\n                        lastAudioDevice = device;\r\n                    }\r\n\r\n                    if (device.kind === 'videoinput' && connection.mediaConstraints.video !== false) {\r\n                        lastVideoDevice = device;\r\n                    }\r\n                });\r\n\r\n                if (lastAudioDevice) {\r\n                    if (DetectRTC.browser.name === 'Firefox') {\r\n                        if (connection.mediaConstraints.audio !== true) {\r\n                            connection.mediaConstraints.audio.deviceId = lastAudioDevice.id;\r\n                        } else {\r\n                            connection.mediaConstraints.audio = {\r\n                                deviceId: lastAudioDevice.id\r\n                            }\r\n                        }\r\n                        return;\r\n                    }\r\n\r\n                    if (connection.mediaConstraints.audio == true) {\r\n                        connection.mediaConstraints.audio = {\r\n                            mandatory: {},\r\n                            optional: []\r\n                        }\r\n                    }\r\n\r\n                    if (!connection.mediaConstraints.audio.optional) {\r\n                        connection.mediaConstraints.audio.optional = [];\r\n                    }\r\n\r\n                    var optional = [{\r\n                        sourceId: lastAudioDevice.id\r\n                    }];\r\n\r\n                    connection.mediaConstraints.audio.optional = optional.concat(connection.mediaConstraints.audio.optional);\r\n                }\r\n\r\n                if (lastVideoDevice) {\r\n                    if (DetectRTC.browser.name === 'Firefox') {\r\n                        if (connection.mediaConstraints.video !== true) {\r\n                            connection.mediaConstraints.video.deviceId = lastVideoDevice.id;\r\n                        } else {\r\n                            connection.mediaConstraints.video = {\r\n                                deviceId: lastVideoDevice.id\r\n                            }\r\n                        }\r\n                        return;\r\n                    }\r\n\r\n                    if (connection.mediaConstraints.video == true) {\r\n                        connection.mediaConstraints.video = {\r\n                            mandatory: {},\r\n                            optional: []\r\n                        }\r\n                    }\r\n\r\n                    if (!connection.mediaConstraints.video.optional) {\r\n                        connection.mediaConstraints.video.optional = [];\r\n                    }\r\n\r\n                    var optional = [{\r\n                        sourceId: lastVideoDevice.id\r\n                    }];\r\n\r\n                    connection.mediaConstraints.video.optional = optional.concat(connection.mediaConstraints.video.optional);\r\n                }\r\n            });\r\n        }\r\n\r\n        connection.sdpConstraints = {\r\n            mandatory: {\r\n                OfferToReceiveAudio: true,\r\n                OfferToReceiveVideo: true\r\n            },\r\n            optional: [{\r\n                VoiceActivityDetection: false\r\n            }]\r\n        };\r\n\r\n        connection.sdpSemantics = null; // \"unified-plan\" or \"plan-b\", ref: webrtc.org/web-apis/chrome/unified-plan/\r\n        connection.iceCandidatePoolSize = null; // 0\r\n        connection.bundlePolicy = null; // max-bundle\r\n        connection.rtcpMuxPolicy = null; // \"require\" or \"negotiate\"\r\n        connection.iceTransportPolicy = null; // \"relay\" or \"all\"\r\n        connection.optionalArgument = {\r\n            optional: [{\r\n                DtlsSrtpKeyAgreement: true\r\n            }, {\r\n                googImprovedWifiBwe: true\r\n            }, {\r\n                googScreencastMinBitrate: 300\r\n            }, {\r\n                googIPv6: true\r\n            }, {\r\n                googDscp: true\r\n            }, {\r\n                googCpuUnderuseThreshold: 55\r\n            }, {\r\n                googCpuOveruseThreshold: 85\r\n            }, {\r\n                googSuspendBelowMinBitrate: true\r\n            }, {\r\n                googCpuOveruseDetection: true\r\n            }],\r\n            mandatory: {}\r\n        };\r\n\r\n        connection.iceServers = IceServersHandler.getIceServers(connection);\r\n\r\n        connection.candidates = {\r\n            host: true,\r\n            stun: true,\r\n            turn: true\r\n        };\r\n\r\n        connection.iceProtocols = {\r\n            tcp: true,\r\n            udp: true\r\n        };\r\n\r\n        // EVENTs\r\n        connection.onopen = function(event) {\r\n            if (!!connection.enableLogs) {\r\n                console.info('Data connection has been opened between you & ', event.userid);\r\n            }\r\n        };\r\n\r\n        connection.onclose = function(event) {\r\n            if (!!connection.enableLogs) {\r\n                console.warn('Data connection has been closed between you & ', event.userid);\r\n            }\r\n        };\r\n\r\n        connection.onerror = function(error) {\r\n            if (!!connection.enableLogs) {\r\n                console.error(error.userid, 'data-error', error);\r\n            }\r\n        };\r\n\r\n        connection.onmessage = function(event) {\r\n            if (!!connection.enableLogs) {\r\n                console.debug('data-message', event.userid, event.data);\r\n            }\r\n        };\r\n\r\n        connection.send = function(data, remoteUserId) {\r\n            connection.peers.send(data, remoteUserId);\r\n        };\r\n\r\n        connection.close = connection.disconnect = connection.leave = function() {\r\n            connection.onbeforeunload(false, true);\r\n        };\r\n\r\n        connection.closeEntireSession = function(callback) {\r\n            callback = callback || function() {};\r\n            connection.socket.emit('close-entire-session', function looper() {\r\n                if (connection.getAllParticipants().length) {\r\n                    setTimeout(looper, 100);\r\n                    return;\r\n                }\r\n\r\n                connection.onEntireSessionClosed({\r\n                    sessionid: connection.sessionid,\r\n                    userid: connection.userid,\r\n                    extra: connection.extra\r\n                });\r\n\r\n                connection.changeUserId(null, function() {\r\n                    connection.close();\r\n                    callback();\r\n                });\r\n            });\r\n        };\r\n\r\n        connection.onEntireSessionClosed = function(event) {\r\n            if (!connection.enableLogs) return;\r\n            console.info('Entire session is closed: ', event.sessionid, event.extra);\r\n        };\r\n\r\n        connection.onstream = function(e) {\r\n            var parentNode = connection.videosContainer;\r\n            parentNode.insertBefore(e.mediaElement, parentNode.firstChild);\r\n            var played = e.mediaElement.play();\r\n\r\n            if (typeof played !== 'undefined') {\r\n                played.catch(function() {\r\n                    /*** iOS 11 doesn't allow automatic play and rejects ***/\r\n                }).then(function() {\r\n                    setTimeout(function() {\r\n                        e.mediaElement.play();\r\n                    }, 2000);\r\n                });\r\n                return;\r\n            }\r\n\r\n            setTimeout(function() {\r\n                e.mediaElement.play();\r\n            }, 2000);\r\n        };\r\n\r\n        connection.onstreamended = function(e) {\r\n            if (!e.mediaElement) {\r\n                e.mediaElement = document.getElementById(e.streamid);\r\n            }\r\n\r\n            if (!e.mediaElement || !e.mediaElement.parentNode) {\r\n                return;\r\n            }\r\n\r\n            e.mediaElement.parentNode.removeChild(e.mediaElement);\r\n        };\r\n\r\n        connection.direction = 'many-to-many';\r\n\r\n        connection.removeStream = function(streamid, remoteUserId) {\r\n            var stream;\r\n            connection.attachStreams.forEach(function(localStream) {\r\n                if (localStream.id === streamid) {\r\n                    stream = localStream;\r\n                }\r\n            });\r\n\r\n            if (!stream) {\r\n                console.warn('No such stream exist.', streamid);\r\n                return;\r\n            }\r\n\r\n            connection.peers.getAllParticipants().forEach(function(participant) {\r\n                if (remoteUserId && participant !== remoteUserId) {\r\n                    return;\r\n                }\r\n\r\n                var user = connection.peers[participant];\r\n                try {\r\n                    user.peer.removeStream(stream);\r\n                } catch (e) {}\r\n            });\r\n\r\n            connection.renegotiate();\r\n        };\r\n\r\n        connection.addStream = function(session, remoteUserId) {\r\n            if (!!session.getTracks) {\r\n                if (connection.attachStreams.indexOf(session) === -1) {\r\n                    if (!session.streamid) {\r\n                        session.streamid = session.id;\r\n                    }\r\n\r\n                    connection.attachStreams.push(session);\r\n                }\r\n                connection.renegotiate(remoteUserId);\r\n                return;\r\n            }\r\n\r\n            if (isData(session)) {\r\n                connection.renegotiate(remoteUserId);\r\n                return;\r\n            }\r\n\r\n            if (session.audio || session.video || session.screen) {\r\n                if (session.screen) {\r\n                    if (DetectRTC.browser.name === 'Edge') {\r\n                        navigator.getDisplayMedia({\r\n                            video: true,\r\n                            audio: isAudioPlusTab(connection)\r\n                        }).then(function(screen) {\r\n                            screen.isScreen = true;\r\n                            mPeer.onGettingLocalMedia(screen);\r\n\r\n                            if ((session.audio || session.video) && !isAudioPlusTab(connection)) {\r\n                                connection.invokeGetUserMedia(null, function(stream) {\r\n                                    gumCallback(stream);\r\n                                });\r\n                            } else {\r\n                                gumCallback(screen);\r\n                            }\r\n                        }, function(error) {\r\n                            console.error('Unable to capture screen on Edge. HTTPs and version 17+ is required.');\r\n                        });\r\n                    } else {\r\n                        connection.invokeGetUserMedia({\r\n                            audio: isAudioPlusTab(connection),\r\n                            video: true,\r\n                            isScreen: true\r\n                        }, function(stream) {\r\n                            if ((session.audio || session.video) && !isAudioPlusTab(connection)) {\r\n                                connection.invokeGetUserMedia(null, function(stream) {\r\n                                    gumCallback(stream);\r\n                                });\r\n                            } else {\r\n                                gumCallback(stream);\r\n                            }\r\n                        });\r\n                    }\r\n                } else if (session.audio || session.video) {\r\n                    connection.invokeGetUserMedia(null, gumCallback);\r\n                }\r\n            }\r\n\r\n            function gumCallback(stream) {\r\n                if (session.streamCallback) {\r\n                    session.streamCallback(stream);\r\n                }\r\n\r\n                connection.renegotiate(remoteUserId);\r\n            }\r\n        };\r\n\r\n        connection.invokeGetUserMedia = function(localMediaConstraints, callback, session) {\r\n            if (!session) {\r\n                session = connection.session;\r\n            }\r\n\r\n            if (!localMediaConstraints) {\r\n                localMediaConstraints = connection.mediaConstraints;\r\n            }\r\n\r\n            getUserMediaHandler({\r\n                onGettingLocalMedia: function(stream) {\r\n                    var videoConstraints = localMediaConstraints.video;\r\n                    if (videoConstraints) {\r\n                        if (videoConstraints.mediaSource || videoConstraints.mozMediaSource) {\r\n                            stream.isScreen = true;\r\n                        } else if (videoConstraints.mandatory && videoConstraints.mandatory.chromeMediaSource) {\r\n                            stream.isScreen = true;\r\n                        }\r\n                    }\r\n\r\n                    if (!stream.isScreen) {\r\n                        stream.isVideo = !!getTracks(stream, 'video').length;\r\n                        stream.isAudio = !stream.isVideo && getTracks(stream, 'audio').length;\r\n                    }\r\n\r\n                    mPeer.onGettingLocalMedia(stream, function() {\r\n                        if (typeof callback === 'function') {\r\n                            callback(stream);\r\n                        }\r\n                    });\r\n                },\r\n                onLocalMediaError: function(error, constraints) {\r\n                    mPeer.onLocalMediaError(error, constraints);\r\n                },\r\n                localMediaConstraints: localMediaConstraints || {\r\n                    audio: session.audio ? localMediaConstraints.audio : false,\r\n                    video: session.video ? localMediaConstraints.video : false\r\n                }\r\n            });\r\n        };\r\n\r\n        function applyConstraints(stream, mediaConstraints) {\r\n            if (!stream) {\r\n                if (!!connection.enableLogs) {\r\n                    console.error('No stream to applyConstraints.');\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (mediaConstraints.audio) {\r\n                getTracks(stream, 'audio').forEach(function(track) {\r\n                    track.applyConstraints(mediaConstraints.audio);\r\n                });\r\n            }\r\n\r\n            if (mediaConstraints.video) {\r\n                getTracks(stream, 'video').forEach(function(track) {\r\n                    track.applyConstraints(mediaConstraints.video);\r\n                });\r\n            }\r\n        }\r\n\r\n        connection.applyConstraints = function(mediaConstraints, streamid) {\r\n            if (!MediaStreamTrack || !MediaStreamTrack.prototype.applyConstraints) {\r\n                alert('track.applyConstraints is NOT supported in your browser.');\r\n                return;\r\n            }\r\n\r\n            if (streamid) {\r\n                var stream;\r\n                if (connection.streamEvents[streamid]) {\r\n                    stream = connection.streamEvents[streamid].stream;\r\n                }\r\n                applyConstraints(stream, mediaConstraints);\r\n                return;\r\n            }\r\n\r\n            connection.attachStreams.forEach(function(stream) {\r\n                applyConstraints(stream, mediaConstraints);\r\n            });\r\n        };\r\n\r\n        function replaceTrack(track, remoteUserId, isVideoTrack) {\r\n            if (remoteUserId) {\r\n                mPeer.replaceTrack(track, remoteUserId, isVideoTrack);\r\n                return;\r\n            }\r\n\r\n            connection.peers.getAllParticipants().forEach(function(participant) {\r\n                mPeer.replaceTrack(track, participant, isVideoTrack);\r\n            });\r\n        }\r\n\r\n        connection.replaceTrack = function(session, remoteUserId, isVideoTrack) {\r\n            session = session || {};\r\n\r\n            if (!RTCPeerConnection.prototype.getSenders) {\r\n                connection.addStream(session);\r\n                return;\r\n            }\r\n\r\n            if (session instanceof MediaStreamTrack) {\r\n                replaceTrack(session, remoteUserId, isVideoTrack);\r\n                return;\r\n            }\r\n\r\n            if (session instanceof MediaStream) {\r\n                if (getTracks(session, 'video').length) {\r\n                    replaceTrack(getTracks(session, 'video')[0], remoteUserId, true);\r\n                }\r\n\r\n                if (getTracks(session, 'audio').length) {\r\n                    replaceTrack(getTracks(session, 'audio')[0], remoteUserId, false);\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (isData(session)) {\r\n                throw 'connection.replaceTrack requires audio and/or video and/or screen.';\r\n                return;\r\n            }\r\n\r\n            if (session.audio || session.video || session.screen) {\r\n                if (session.screen) {\r\n                    if (DetectRTC.browser.name === 'Edge') {\r\n                        navigator.getDisplayMedia({\r\n                            video: true,\r\n                            audio: isAudioPlusTab(connection)\r\n                        }).then(function(screen) {\r\n                            screen.isScreen = true;\r\n                            mPeer.onGettingLocalMedia(screen);\r\n\r\n                            if ((session.audio || session.video) && !isAudioPlusTab(connection)) {\r\n                                connection.invokeGetUserMedia(null, gumCallback);\r\n                            } else {\r\n                                gumCallback(screen);\r\n                            }\r\n                        }, function(error) {\r\n                            console.error('Unable to capture screen on Edge. HTTPs and version 17+ is required.');\r\n                        });\r\n                    } else {\r\n                        connection.invokeGetUserMedia({\r\n                            audio: isAudioPlusTab(connection),\r\n                            video: true,\r\n                            isScreen: true\r\n                        }, (session.audio || session.video) && !isAudioPlusTab(connection) ? connection.invokeGetUserMedia(null, gumCallback) : gumCallback);\r\n                    }\r\n                } else if (session.audio || session.video) {\r\n                    connection.invokeGetUserMedia(null, gumCallback);\r\n                }\r\n            }\r\n\r\n            function gumCallback(stream) {\r\n                connection.replaceTrack(stream, remoteUserId, isVideoTrack || session.video || session.screen);\r\n            }\r\n        };\r\n\r\n        connection.resetTrack = function(remoteUsersIds, isVideoTrack) {\r\n            if (!remoteUsersIds) {\r\n                remoteUsersIds = connection.getAllParticipants();\r\n            }\r\n\r\n            if (typeof remoteUsersIds == 'string') {\r\n                remoteUsersIds = [remoteUsersIds];\r\n            }\r\n\r\n            remoteUsersIds.forEach(function(participant) {\r\n                var peer = connection.peers[participant].peer;\r\n\r\n                if ((typeof isVideoTrack === 'undefined' || isVideoTrack === true) && peer.lastVideoTrack) {\r\n                    connection.replaceTrack(peer.lastVideoTrack, participant, true);\r\n                }\r\n\r\n                if ((typeof isVideoTrack === 'undefined' || isVideoTrack === false) && peer.lastAudioTrack) {\r\n                    connection.replaceTrack(peer.lastAudioTrack, participant, false);\r\n                }\r\n            });\r\n        };\r\n\r\n        connection.renegotiate = function(remoteUserId) {\r\n            if (remoteUserId) {\r\n                mPeer.renegotiatePeer(remoteUserId);\r\n                return;\r\n            }\r\n\r\n            connection.peers.getAllParticipants().forEach(function(participant) {\r\n                mPeer.renegotiatePeer(participant);\r\n            });\r\n        };\r\n\r\n        connection.setStreamEndHandler = function(stream, isRemote) {\r\n            if (!stream || !stream.addEventListener) return;\r\n\r\n            isRemote = !!isRemote;\r\n\r\n            if (stream.alreadySetEndHandler) {\r\n                return;\r\n            }\r\n            stream.alreadySetEndHandler = true;\r\n\r\n            var streamEndedEvent = 'ended';\r\n\r\n            if ('oninactive' in stream) {\r\n                streamEndedEvent = 'inactive';\r\n            }\r\n\r\n            stream.addEventListener(streamEndedEvent, function() {\r\n                if (stream.idInstance) {\r\n                    currentUserMediaRequest.remove(stream.idInstance);\r\n                }\r\n\r\n                if (!isRemote) {\r\n                    // reset attachStreams\r\n                    var streams = [];\r\n                    connection.attachStreams.forEach(function(s) {\r\n                        if (s.id != stream.id) {\r\n                            streams.push(s);\r\n                        }\r\n                    });\r\n                    connection.attachStreams = streams;\r\n                }\r\n\r\n                // connection.renegotiate();\r\n\r\n                var streamEvent = connection.streamEvents[stream.streamid];\r\n                if (!streamEvent) {\r\n                    streamEvent = {\r\n                        stream: stream,\r\n                        streamid: stream.streamid,\r\n                        type: isRemote ? 'remote' : 'local',\r\n                        userid: connection.userid,\r\n                        extra: connection.extra,\r\n                        mediaElement: connection.streamEvents[stream.streamid] ? connection.streamEvents[stream.streamid].mediaElement : null\r\n                    };\r\n                }\r\n\r\n                if (isRemote && connection.peers[streamEvent.userid]) {\r\n                    // reset remote \"streams\"\r\n                    var peer = connection.peers[streamEvent.userid].peer;\r\n                    var streams = [];\r\n                    peer.getRemoteStreams().forEach(function(s) {\r\n                        if (s.id != stream.id) {\r\n                            streams.push(s);\r\n                        }\r\n                    });\r\n                    connection.peers[streamEvent.userid].streams = streams;\r\n                }\r\n\r\n                if (streamEvent.userid === connection.userid && streamEvent.type === 'remote') {\r\n                    return;\r\n                }\r\n\r\n                if (connection.peersBackup[streamEvent.userid]) {\r\n                    streamEvent.extra = connection.peersBackup[streamEvent.userid].extra;\r\n                }\r\n\r\n                connection.onstreamended(streamEvent);\r\n\r\n                delete connection.streamEvents[stream.streamid];\r\n            }, false);\r\n        };\r\n\r\n        connection.onMediaError = function(error, constraints) {\r\n            if (!!connection.enableLogs) {\r\n                console.error(error, constraints);\r\n            }\r\n        };\r\n\r\n        connection.autoCloseEntireSession = false;\r\n\r\n        connection.filesContainer = connection.videosContainer = document.body || document.documentElement;\r\n        connection.isInitiator = false;\r\n\r\n        connection.shareFile = mPeer.shareFile;\r\n        if (typeof FileProgressBarHandler !== 'undefined') {\r\n            FileProgressBarHandler.handle(connection);\r\n        }\r\n\r\n        if (typeof TranslationHandler !== 'undefined') {\r\n            TranslationHandler.handle(connection);\r\n        }\r\n\r\n        connection.token = getRandomString;\r\n\r\n        connection.onNewParticipant = function(participantId, userPreferences) {\r\n            connection.acceptParticipationRequest(participantId, userPreferences);\r\n        };\r\n\r\n        connection.acceptParticipationRequest = function(participantId, userPreferences) {\r\n            if (userPreferences.successCallback) {\r\n                userPreferences.successCallback();\r\n                delete userPreferences.successCallback;\r\n            }\r\n\r\n            mPeer.createNewPeer(participantId, userPreferences);\r\n        };\r\n\r\n        if (typeof StreamsHandler !== 'undefined') {\r\n            connection.StreamsHandler = StreamsHandler;\r\n        }\r\n\r\n        connection.onleave = function(userid) {};\r\n\r\n        connection.invokeSelectFileDialog = function(callback) {\r\n            var selector = new FileSelector();\r\n            selector.accept = '*.*';\r\n            selector.selectSingleFile(callback);\r\n        };\r\n\r\n        connection.onmute = function(e) {\r\n            if (!e || !e.mediaElement) {\r\n                return;\r\n            }\r\n\r\n            if (e.muteType === 'both' || e.muteType === 'video') {\r\n                e.mediaElement.src = null;\r\n                var paused = e.mediaElement.pause();\r\n                if (typeof paused !== 'undefined') {\r\n                    paused.then(function() {\r\n                        e.mediaElement.poster = e.snapshot || 'https://cdn.webrtc-experiment.com/images/muted.png';\r\n                    });\r\n                } else {\r\n                    e.mediaElement.poster = e.snapshot || 'https://cdn.webrtc-experiment.com/images/muted.png';\r\n                }\r\n            } else if (e.muteType === 'audio') {\r\n                e.mediaElement.muted = true;\r\n            }\r\n        };\r\n\r\n        connection.onunmute = function(e) {\r\n            if (!e || !e.mediaElement || !e.stream) {\r\n                return;\r\n            }\r\n\r\n            if (e.unmuteType === 'both' || e.unmuteType === 'video') {\r\n                e.mediaElement.poster = null;\r\n                e.mediaElement.srcObject = e.stream;\r\n                e.mediaElement.play();\r\n            } else if (e.unmuteType === 'audio') {\r\n                e.mediaElement.muted = false;\r\n            }\r\n        };\r\n\r\n        connection.onExtraDataUpdated = function(event) {\r\n            event.status = 'online';\r\n            connection.onUserStatusChanged(event, true);\r\n        };\r\n\r\n        connection.getAllParticipants = function(sender) {\r\n            return connection.peers.getAllParticipants(sender);\r\n        };\r\n\r\n        if (typeof StreamsHandler !== 'undefined') {\r\n            StreamsHandler.onSyncNeeded = function(streamid, action, type) {\r\n                connection.peers.getAllParticipants().forEach(function(participant) {\r\n                    mPeer.onNegotiationNeeded({\r\n                        streamid: streamid,\r\n                        action: action,\r\n                        streamSyncNeeded: true,\r\n                        type: type || 'both'\r\n                    }, participant);\r\n                });\r\n            };\r\n        }\r\n\r\n        connection.connectSocket = function(callback) {\r\n            connectSocket(callback);\r\n        };\r\n\r\n        connection.closeSocket = function() {\r\n            try {\r\n                io.sockets = {};\r\n            } catch (e) {};\r\n\r\n            if (!connection.socket) return;\r\n\r\n            if (typeof connection.socket.disconnect === 'function') {\r\n                connection.socket.disconnect();\r\n            }\r\n\r\n            if (typeof connection.socket.resetProps === 'function') {\r\n                connection.socket.resetProps();\r\n            }\r\n\r\n            connection.socket = null;\r\n        };\r\n\r\n        connection.getSocket = function(callback) {\r\n            if (!callback && connection.enableLogs) {\r\n                console.warn('getSocket.callback paramter is required.');\r\n            }\r\n\r\n            callback = callback || function() {};\r\n\r\n            if (!connection.socket) {\r\n                connectSocket(function() {\r\n                    callback(connection.socket);\r\n                });\r\n            } else {\r\n                callback(connection.socket);\r\n            }\r\n\r\n            return connection.socket; // callback is preferred over return-statement\r\n        };\r\n\r\n        connection.getRemoteStreams = mPeer.getRemoteStreams;\r\n\r\n        var skipStreams = ['selectFirst', 'selectAll', 'forEach'];\r\n\r\n        connection.streamEvents = {\r\n            selectFirst: function(options) {\r\n                return connection.streamEvents.selectAll(options)[0];\r\n            },\r\n            selectAll: function(options) {\r\n                if (!options) {\r\n                    // default will always be all streams\r\n                    options = {\r\n                        local: true,\r\n                        remote: true,\r\n                        isScreen: true,\r\n                        isAudio: true,\r\n                        isVideo: true\r\n                    };\r\n                }\r\n\r\n                if (options == 'local') {\r\n                    options = {\r\n                        local: true\r\n                    };\r\n                }\r\n\r\n                if (options == 'remote') {\r\n                    options = {\r\n                        remote: true\r\n                    };\r\n                }\r\n\r\n                if (options == 'screen') {\r\n                    options = {\r\n                        isScreen: true\r\n                    };\r\n                }\r\n\r\n                if (options == 'audio') {\r\n                    options = {\r\n                        isAudio: true\r\n                    };\r\n                }\r\n\r\n                if (options == 'video') {\r\n                    options = {\r\n                        isVideo: true\r\n                    };\r\n                }\r\n\r\n                var streams = [];\r\n                Object.keys(connection.streamEvents).forEach(function(key) {\r\n                    var event = connection.streamEvents[key];\r\n\r\n                    if (skipStreams.indexOf(key) !== -1) return;\r\n                    var ignore = true;\r\n\r\n                    if (options.local && event.type === 'local') {\r\n                        ignore = false;\r\n                    }\r\n\r\n                    if (options.remote && event.type === 'remote') {\r\n                        ignore = false;\r\n                    }\r\n\r\n                    if (options.isScreen && event.stream.isScreen) {\r\n                        ignore = false;\r\n                    }\r\n\r\n                    if (options.isVideo && event.stream.isVideo) {\r\n                        ignore = false;\r\n                    }\r\n\r\n                    if (options.isAudio && event.stream.isAudio) {\r\n                        ignore = false;\r\n                    }\r\n\r\n                    if (options.userid && event.userid === options.userid) {\r\n                        ignore = false;\r\n                    }\r\n\r\n                    if (ignore === false) {\r\n                        streams.push(event);\r\n                    }\r\n                });\r\n\r\n                return streams;\r\n            }\r\n        };\r\n\r\n        connection.socketURL = '/'; // generated via config.json\r\n        connection.socketMessageEvent = 'RTCMultiConnection-Message'; // generated via config.json\r\n        connection.socketCustomEvent = 'RTCMultiConnection-Custom-Message'; // generated via config.json\r\n        connection.DetectRTC = DetectRTC;\r\n\r\n        connection.setCustomSocketEvent = function(customEvent) {\r\n            if (customEvent) {\r\n                connection.socketCustomEvent = customEvent;\r\n            }\r\n\r\n            if (!connection.socket) {\r\n                return;\r\n            }\r\n\r\n            connection.socket.emit('set-custom-socket-event-listener', connection.socketCustomEvent);\r\n        };\r\n\r\n        connection.getNumberOfBroadcastViewers = function(broadcastId, callback) {\r\n            if (!connection.socket || !broadcastId || !callback) return;\r\n\r\n            connection.socket.emit('get-number-of-users-in-specific-broadcast', broadcastId, callback);\r\n        };\r\n\r\n        connection.onNumberOfBroadcastViewersUpdated = function(event) {\r\n            if (!connection.enableLogs || !connection.isInitiator) return;\r\n            console.info('Number of broadcast (', event.broadcastId, ') viewers', event.numberOfBroadcastViewers);\r\n        };\r\n\r\n        connection.onUserStatusChanged = function(event, dontWriteLogs) {\r\n            if (!!connection.enableLogs && !dontWriteLogs) {\r\n                console.info(event.userid, event.status);\r\n            }\r\n        };\r\n\r\n        connection.getUserMediaHandler = getUserMediaHandler;\r\n        connection.multiPeersHandler = mPeer;\r\n        connection.enableLogs = true;\r\n        connection.setCustomSocketHandler = function(customSocketHandler) {\r\n            if (typeof SocketConnection !== 'undefined') {\r\n                SocketConnection = customSocketHandler;\r\n            }\r\n        };\r\n\r\n        // default value should be 15k because [old]Firefox's receiving limit is 16k!\r\n        // however 64k works chrome-to-chrome\r\n        connection.chunkSize = 40 * 1000;\r\n\r\n        connection.maxParticipantsAllowed = 1000;\r\n\r\n        // eject or leave single user\r\n        connection.disconnectWith = mPeer.disconnectWith;\r\n\r\n        // check if room exist on server\r\n        // we will pass roomid to the server and wait for callback (i.e. server's response)\r\n        connection.checkPresence = function(roomid, callback) {\r\n            roomid = roomid || connection.sessionid;\r\n\r\n            if (SocketConnection.name === 'SSEConnection') {\r\n                SSEConnection.checkPresence(roomid, function(isRoomExist, _roomid, extra) {\r\n                    if (!connection.socket) {\r\n                        if (!isRoomExist) {\r\n                            connection.userid = _roomid;\r\n                        }\r\n\r\n                        connection.connectSocket(function() {\r\n                            callback(isRoomExist, _roomid, extra);\r\n                        });\r\n                        return;\r\n                    }\r\n                    callback(isRoomExist, _roomid);\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (!connection.socket) {\r\n                connection.connectSocket(function() {\r\n                    connection.checkPresence(roomid, callback);\r\n                });\r\n                return;\r\n            }\r\n\r\n            connection.socket.emit('check-presence', roomid + '', function(isRoomExist, _roomid, extra) {\r\n                if (connection.enableLogs) {\r\n                    console.log('checkPresence.isRoomExist: ', isRoomExist, ' roomid: ', _roomid);\r\n                }\r\n                callback(isRoomExist, _roomid, extra);\r\n            });\r\n        };\r\n\r\n        connection.onReadyForOffer = function(remoteUserId, userPreferences) {\r\n            connection.multiPeersHandler.createNewPeer(remoteUserId, userPreferences);\r\n        };\r\n\r\n        connection.setUserPreferences = function(userPreferences) {\r\n            if (connection.dontAttachStream) {\r\n                userPreferences.dontAttachLocalStream = true;\r\n            }\r\n\r\n            if (connection.dontGetRemoteStream) {\r\n                userPreferences.dontGetRemoteStream = true;\r\n            }\r\n\r\n            return userPreferences;\r\n        };\r\n\r\n        connection.updateExtraData = function() {\r\n            connection.socket.emit('extra-data-updated', connection.extra);\r\n        };\r\n\r\n        connection.enableScalableBroadcast = false;\r\n        connection.maxRelayLimitPerUser = 3; // each broadcast should serve only 3 users\r\n\r\n        connection.dontCaptureUserMedia = false;\r\n        connection.dontAttachStream = false;\r\n        connection.dontGetRemoteStream = false;\r\n\r\n        connection.onReConnecting = function(event) {\r\n            if (connection.enableLogs) {\r\n                console.info('ReConnecting with', event.userid, '...');\r\n            }\r\n        };\r\n\r\n        connection.beforeAddingStream = function(stream) {\r\n            return stream;\r\n        };\r\n\r\n        connection.beforeRemovingStream = function(stream) {\r\n            return stream;\r\n        };\r\n\r\n        if (typeof isChromeExtensionAvailable !== 'undefined') {\r\n            connection.checkIfChromeExtensionAvailable = isChromeExtensionAvailable;\r\n        }\r\n\r\n        if (typeof isFirefoxExtensionAvailable !== 'undefined') {\r\n            connection.checkIfChromeExtensionAvailable = isFirefoxExtensionAvailable;\r\n        }\r\n\r\n        if (typeof getChromeExtensionStatus !== 'undefined') {\r\n            connection.getChromeExtensionStatus = getChromeExtensionStatus;\r\n        }\r\n\r\n        connection.modifyScreenConstraints = function(screen_constraints) {\r\n            return screen_constraints;\r\n        };\r\n\r\n        connection.onPeerStateChanged = function(state) {\r\n            if (connection.enableLogs) {\r\n                if (state.iceConnectionState.search(/closed|failed/gi) !== -1) {\r\n                    console.error('Peer connection is closed between you & ', state.userid, state.extra, 'state:', state.iceConnectionState);\r\n                }\r\n            }\r\n        };\r\n\r\n        connection.isOnline = true;\r\n\r\n        listenEventHandler('online', function() {\r\n            connection.isOnline = true;\r\n        });\r\n\r\n        listenEventHandler('offline', function() {\r\n            connection.isOnline = false;\r\n        });\r\n\r\n        connection.isLowBandwidth = false;\r\n        if (navigator && navigator.connection && navigator.connection.type) {\r\n            connection.isLowBandwidth = navigator.connection.type.toString().toLowerCase().search(/wifi|cell/g) !== -1;\r\n            if (connection.isLowBandwidth) {\r\n                connection.bandwidth = {\r\n                    audio: false,\r\n                    video: false,\r\n                    screen: false\r\n                };\r\n\r\n                if (connection.mediaConstraints.audio && connection.mediaConstraints.audio.optional && connection.mediaConstraints.audio.optional.length) {\r\n                    var newArray = [];\r\n                    connection.mediaConstraints.audio.optional.forEach(function(opt) {\r\n                        if (typeof opt.bandwidth === 'undefined') {\r\n                            newArray.push(opt);\r\n                        }\r\n                    });\r\n                    connection.mediaConstraints.audio.optional = newArray;\r\n                }\r\n\r\n                if (connection.mediaConstraints.video && connection.mediaConstraints.video.optional && connection.mediaConstraints.video.optional.length) {\r\n                    var newArray = [];\r\n                    connection.mediaConstraints.video.optional.forEach(function(opt) {\r\n                        if (typeof opt.bandwidth === 'undefined') {\r\n                            newArray.push(opt);\r\n                        }\r\n                    });\r\n                    connection.mediaConstraints.video.optional = newArray;\r\n                }\r\n            }\r\n        }\r\n\r\n        connection.getExtraData = function(remoteUserId, callback) {\r\n            if (!remoteUserId) throw 'remoteUserId is required.';\r\n\r\n            if (typeof callback === 'function') {\r\n                connection.socket.emit('get-remote-user-extra-data', remoteUserId, function(extra, remoteUserId, error) {\r\n                    callback(extra, remoteUserId, error);\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (!connection.peers[remoteUserId]) {\r\n                if (connection.peersBackup[remoteUserId]) {\r\n                    return connection.peersBackup[remoteUserId].extra;\r\n                }\r\n                return {};\r\n            }\r\n\r\n            return connection.peers[remoteUserId].extra;\r\n        };\r\n\r\n        if (!!forceOptions.autoOpenOrJoin) {\r\n            connection.openOrJoin(connection.sessionid);\r\n        }\r\n\r\n        connection.onUserIdAlreadyTaken = function(useridAlreadyTaken, yourNewUserId) {\r\n            // via #683\r\n            connection.close();\r\n            connection.closeSocket();\r\n\r\n            connection.isInitiator = false;\r\n            connection.userid = connection.token();\r\n\r\n            connection.join(connection.sessionid);\r\n\r\n            if (connection.enableLogs) {\r\n                console.warn('Userid already taken.', useridAlreadyTaken, 'Your new userid:', connection.userid);\r\n            }\r\n        };\r\n\r\n        connection.trickleIce = true;\r\n        connection.version = '3.7.0';\r\n\r\n        connection.onSettingLocalDescription = function(event) {\r\n            if (connection.enableLogs) {\r\n                console.info('Set local description for remote user', event.userid);\r\n            }\r\n        };\r\n\r\n        connection.resetScreen = function() {\r\n            sourceId = null;\r\n            if (DetectRTC && DetectRTC.screen) {\r\n                delete DetectRTC.screen.sourceId;\r\n            }\r\n\r\n            currentUserMediaRequest = {\r\n                streams: [],\r\n                mutex: false,\r\n                queueRequests: []\r\n            };\r\n        };\r\n\r\n        // if disabled, \"event.mediaElement\" for \"onstream\" will be NULL\r\n        connection.autoCreateMediaElement = true;\r\n\r\n        // set password\r\n        connection.password = null;\r\n\r\n        // set password\r\n        connection.setPassword = function(password, callback) {\r\n            callback = callback || function() {};\r\n            if (connection.socket) {\r\n                connection.socket.emit('set-password', password, callback);\r\n            } else {\r\n                connection.password = password;\r\n                callback(true, connection.sessionid, null);\r\n            }\r\n        };\r\n\r\n        connection.onSocketDisconnect = function(event) {\r\n            if (connection.enableLogs) {\r\n                console.warn('socket.io connection is closed');\r\n            }\r\n        };\r\n\r\n        connection.onSocketError = function(event) {\r\n            if (connection.enableLogs) {\r\n                console.warn('socket.io connection is failed');\r\n            }\r\n        };\r\n\r\n        // error messages\r\n        connection.errors = {\r\n            ROOM_NOT_AVAILABLE: 'Room not available',\r\n            INVALID_PASSWORD: 'Invalid password',\r\n            USERID_NOT_AVAILABLE: 'User ID does not exist',\r\n            ROOM_PERMISSION_DENIED: 'Room permission denied',\r\n            ROOM_FULL: 'Room full',\r\n            DID_NOT_JOIN_ANY_ROOM: 'Did not join any room yet',\r\n            INVALID_SOCKET: 'Invalid socket',\r\n            PUBLIC_IDENTIFIER_MISSING: 'publicRoomIdentifier is required',\r\n            INVALID_ADMIN_CREDENTIAL: 'Invalid username or password attempted'\r\n        };\r\n    })(this);\r\n\r\n};\r\n\r\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n    module.exports = exports = RTCMultiConnection;\r\n}\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define('RTCMultiConnection', [], function() {\r\n        return RTCMultiConnection;\r\n    });\r\n}\n","var supported = !!(\n  window.AudioContext &&\n  window.MediaStreamAudioSourceNode &&\n  window.AnalyserNode &&\n  window.ScriptProcessorNode\n);\n\nmodule.exports = function (media, options, callback) {\n  if (!callback) {\n    callback = options;\n    options = null;\n  }\n\n  options = options || {};\n\n  var that = {};\n  var context = options.context || new AudioContext();\n  var source = context.createMediaStreamSource(media);\n  var analyser = context.createAnalyser();\n  var processor = null;\n\n  if (callback) {\n    processor = context.createScriptProcessor(2048, 1, 1);\n    processor.onaudioprocess = function () {\n      callback(that.get());\n    };\n  }\n\n  analyser.smoothingTimeConstant = 0.3;\n  analyser.fftSize = 1024;\n\n  source.connect(analyser);\n\n  that.get = function () {\n    var sum = 0;\n    var data = new Uint8Array(analyser.frequencyBinCount);\n    analyser.getByteFrequencyData(data);\n\n    for (var i = 0; i < data.length; i++) {\n      sum += data[i];\n    }\n\n    return sum / data.length / 255;\n  };\n\n  that.destroy = function () {\n    if (processor) {\n      processor.disconnect();\n      analyser.disconnect();\n    }\n\n    source.disconnect();\n\n    if (!options.context) context.close();\n  };\n\n  source.connect(analyser);\n\n  if (processor) {\n    analyser.connect(processor);\n    processor.connect(context.destination);\n  }\n\n  return that;\n};\n\nmodule.exports.supported = supported;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_audioEqualizer[data-v-1ce15e3c]{width:100%;height:100%;-o-object-fit:scale-down;object-fit:scale-down;display:flex;align-items:center;justify-content:center}.m_audioEqualizer canvas[data-v-1ce15e3c]{display:block;max-width:100%;max-height:100%;background-color:#fff}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_captureEffects ._content ._options[data-v-b51a7f0e]{background:rgba(0,0,0,.1);padding:calc(var(--spacing)/2);border-radius:6px}.m_captureEffects ._content ._options>*[data-v-b51a7f0e]{margin:calc(var(--spacing)/2) 0;padding:calc(var(--spacing)/2);background-color:var(--c-gris_clair);border-radius:4px}.m_captureEffects ._content ._options[data-v-b51a7f0e]>:first-child{margin-top:0}.m_captureEffects ._content ._options[data-v-b51a7f0e]>:last-child{margin-bottom:0}.is--disabled[data-v-b51a7f0e]{filter:grayscale(100%);opacity:.7;cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;user-select:none}.is--disabled>*[data-v-b51a7f0e]{pointer-events:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._capturePane[data-v-5cdbfa5a]{position:relative;flex:1 0 200px;max-width:280px;overflow:auto;display:flex;flex-flow:column nowrap}._capturePane[data-type=settings][data-v-5cdbfa5a]{background-color:var(--c-rouge)}._capturePane[data-type=settings] ._topbar[data-v-5cdbfa5a]{border-color:var(--c-rouge_fonce)}._capturePane[data-type=effects][data-v-5cdbfa5a]{background-color:var(--c-bleumarine)}._capturePane[data-type=effects] ._topbar[data-v-5cdbfa5a]{border-color:var(--c-bleumarine_fonce)}._topbar[data-v-5cdbfa5a]{flex:0 0 auto;border-bottom:2px solid #fff;padding:calc(var(--spacing)/2);color:#fff;justify-content:center}._topbar[data-v-5cdbfa5a],._topbar--title[data-v-5cdbfa5a]{display:flex;align-items:center}._topbar--title[data-v-5cdbfa5a]{flex-flow:row wrap;width:100%;justify-content:space-between}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_captureSettings[data-v-a8d9769a]{margin-top:calc(var(--spacing)/2);color:#fff}.m_captureSettings .u-buttonLink[data-v-a8d9769a],.m_captureSettings .u-label[data-v-a8d9769a],.m_captureSettings label[data-v-a8d9769a],.m_captureSettings small[data-v-a8d9769a]{color:inherit}.m_captureSettings select[data-v-a8d9769a]{color:var(--c-noir)}.m_captureSettings--settings[data-v-a8d9769a]{overflow-y:auto;flex:1 1 auto}.m_captureSettings--settings>div[data-v-a8d9769a]{padding:calc(var(--spacing)/2);padding-top:calc(var(--spacing)/4)}.m_captureSettings--settings>div>div[data-v-a8d9769a]{background-color:rgba(0,0,0,.1);padding:0 calc(var(--spacing)/2) calc(var(--spacing)/2);border-radius:6px}.m_captureSettings--settings>div>div>div[data-v-a8d9769a]{padding-top:calc(var(--spacing)/4);margin-bottom:calc(var(--spacing)/4)}.m_captureSettings--settings>div>div>div[data-v-a8d9769a]:last-child{margin-bottom:0}.m_captureSettings--settings>div>label[data-v-a8d9769a]{line-height:2}.m_captureSettings--settings--resolutions label[data-v-a8d9769a]{padding:calc(var(--spacing)/4) 0;display:flex;align-items:center}.m_captureSettings--settings--resolutions label>input[data-v-a8d9769a]{flex:0 0 auto;margin-right:calc(var(--spacing)/3)}.m_captureSettings--updateButton[data-v-a8d9769a]{flex:0 0 auto;border-top:2px solid var(--c-rouge_fonce);color:#000;display:flex;flex-flow:column wrap}.m_sideBySideSwitches[data-v-a8d9769a]{flex-flow:row nowrap}.m_sideBySideSwitches>*[data-v-a8d9769a]{display:block;border-color:var(--c-rouge_fonce);min-width:100px;padding:calc(var(--spacing)/8) 0;display:flex;flex-flow:row wrap;align-items:stretch}.m_sideBySideSwitches>* input[data-v-a8d9769a]{margin:calc(var(--spacing)/2)}@media only screen and (max-width:780px){.m_sideBySideSwitches>* input[data-v-a8d9769a]{margin:calc(var(--spacing)/4)}}.m_sideBySideSwitches>*>div[data-v-a8d9769a]{flex:1 1 0;display:flex;flex-flow:row nowrap;align-items:center}.m_sideBySideSwitches>* small[data-v-a8d9769a]{flex:0 0 100%;background-color:var(--c-rouge_fonce);display:block;text-align:center;font-style:normal;display:flex;align-items:center;justify-content:center}.m_captureSettings--updateButton--buttons[data-v-a8d9769a]{padding:calc(var(--spacing)/2);display:flex;justify-content:center}.m_captureSettings--updateButton--shareStreamToggle[data-v-a8d9769a]{position:relative;background-color:var(--c-rouge_fonce);color:#fff;text-align:center}._close_button[data-v-a8d9769a]{position:absolute;top:0;right:0;min-height:0;padding:0;margin:calc(var(--spacing)/4)}._close_button img[data-v-a8d9769a]{width:2rem;height:2rem}._loader[data-v-a8d9769a]{position:absolute;z-index:1000}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_captureview[data-v-83e5df5a]{display:flex;flex-flow:row nowrap;max-height:100vh;height:100%}.m_captureview .m_captureview--settingsPaneButton[data-v-83e5df5a]{position:relative;z-index:1;display:flex;justify-content:center;align-items:center;width:0;background-color:var(--c-rouge)}.m_captureview .m_captureview--settingsPaneButton>button[data-v-83e5df5a]{transform:rotate(-90deg);transform-origin:center top;border-top-left-radius:0;border-top-right-radius:0;margin-left:-1px}.m_captureview .m_captureview--videoPane[data-v-83e5df5a]{position:relative;overflow-y:auto;flex:1 1 100px;display:flex;flex-flow:column nowrap}.m_captureview .m_captureview--videoPane--top[data-v-83e5df5a]{position:relative;margin:0 auto;min-height:300px;flex:1 1 auto;overflow:hidden;width:100%;height:100%;background-color:var(--c-noir);background-color:#000;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}.m_captureview .m_captureview--videoPane--top.is--being_streamed[data-v-83e5df5a]{border-bottom:5px solid var(--c-rouge)}.m_captureview .m_captureview--videoPane--bottom[data-v-83e5df5a]{position:relative;flex:0 0 auto;box-shadow:0 -1px 4px rgba(0,0,0,.1)}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons[data-v-83e5df5a]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons button img[data-v-83e5df5a],.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons button svg[data-v-83e5df5a]{width:2rem;height:2rem;padding:0}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons>*[data-v-83e5df5a]{display:flex;flex:1 1 100px;padding:calc(var(--spacing)/2)}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons>*>*[data-v-83e5df5a]{margin-right:calc(var(--spacing)/2)}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons>* ._settingsBtn[data-v-83e5df5a]{flex-shrink:0;padding:calc(var(--spacing)/2)}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons[data-v-83e5df5a]>:nth-child(2){flex:5 1 220px;text-align:center;display:flex;flex-flow:row wrap;align-items:center;justify-content:center}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons[data-v-83e5df5a]>:last-child{justify-content:flex-end}.m_captureview .m_captureview--videoPane--bottom .m_captureview--videoPane--bottom--buttons.is--recording[data-v-83e5df5a]{background-color:var(--c-rouge)}.m_captureview ._settingsTag[data-v-83e5df5a]{position:absolute;bottom:0;right:0;z-index:1;margin:calc(var(--spacing)/2);pointer-events:none;display:flex;flex-flow:row wrap;gap:calc(var(--spacing)/4);text-align:right}.m_captureview ._settingsTag button[data-v-83e5df5a]{pointer-events:auto}.m_captureview .m_captureview--videoPane--top--videoContainer[data-v-83e5df5a]{position:relative;width:100%;height:100%}.m_captureview .m_captureview--videoPane--top--videoContainer .m_audioEqualizer[data-v-83e5df5a],.m_captureview .m_captureview--videoPane--top--videoContainer .mediaContainer img[data-v-83e5df5a],.m_captureview .m_captureview--videoPane--top--videoContainer canvas[data-v-83e5df5a],.m_captureview .m_captureview--videoPane--top--videoContainer video[data-v-83e5df5a]{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:contain;object-fit:contain}._captureButton[data-v-83e5df5a]{position:relative;width:auto;height:auto;flex:0 0 auto;margin:0 calc(var(--spacing)/4)}._captureButton.is--active[data-v-83e5df5a]{background:var(--c-rouge)}._captureButton>img[data-v-83e5df5a]{flex:0 0 auto}._mode_indicator[data-v-83e5df5a]{top:0;left:0;right:0;bottom:0;background-color:var(--c-rouge);font-weight:700;font-family:Fira Code;font-size:var(--font-large);text-transform:uppercase;letter-spacing:.06em;color:#fff}._delay_timer[data-v-83e5df5a],._mode_indicator[data-v-83e5df5a]{position:absolute;pointer-events:none;display:flex;align-items:center;justify-content:center}._delay_timer[data-v-83e5df5a]{z-index:100;width:100%;height:100%;font-size:40vmin;color:transparent;--c-text-stroke:var(--c-rouge);--c-text-shadow:rgba(0,0,0,.2);color:var(--c-rouge_fonce);-webkit-text-stroke:1vmin var(--c-text-stroke)}._delay_timer.is--timelapse[data-v-83e5df5a]{font-size:10vmin;-webkit-text-stroke:.2vmin var(--c-text-stroke);height:50%;bottom:0}._capture_options[data-v-83e5df5a]{position:absolute;bottom:0;width:100%;z-index:100;text-align:center;pointer-events:none;display:flex;flex-flow:column nowrap;justify-content:center;margin:0 auto}._capture_options label[data-v-83e5df5a]{display:inline-block;margin:0 auto;background-color:var(--c-rouge);padding:0 calc(var(--spacing)/8);margin-bottom:calc(var(--spacing)/8);color:#fff;border-radius:4px;pointer-events:auto}._capture_options .record_options[data-v-83e5df5a]{max-width:450px;margin:calc(var(--spacing)/2) auto;pointer-events:auto}._capture_options .record_options>*[data-v-83e5df5a]{margin-bottom:0;background-color:var(--c-rouge);color:#fff;padding:0 calc(var(--spacing)/4);border-radius:4px;width:auto;display:flex;align-items:center}._capture_options .record_options input[data-v-83e5df5a]{min-width:2em;max-width:4em;height:1.4em;margin:2px;padding:0 2px;width:auto;text-align:center;color:#fff;background-color:var(--c-rouge_clair);border-bottom:0}._capture_options .record_options input[data-v-83e5df5a]:active,._capture_options .record_options input[data-v-83e5df5a]:focus{border-bottom-color:var(--c-rouge_fonce)}._capture_options .record_options .record_options--timer[data-v-83e5df5a]{font-size:2em}._tiny_equalizer[data-v-83e5df5a]{margin:0 calc(var(--spacing)/2)}._tiny_equalizer .m_audioEqualizer[data-v-83e5df5a]{position:relative;width:64px;height:36px;background-color:transparent!important;border-radius:4px;overflow:hidden}._onion_skin[data-v-83e5df5a]{position:absolute;top:0;left:0;right:0;bottom:0}._onion_skin.is--onionskin[data-v-83e5df5a]{opacity:.2;opacity:var(--onionskin-opacity)}._onion_skin[data-v-83e5df5a] img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}._mode_accessory_range[data-v-83e5df5a]{max-width:200px;margin:-5px 0 -5px auto}._mode_accessory_range input[data-v-83e5df5a],._mode_accessory_range label[data-v-83e5df5a]{margin:0}._video_grid_overlay[data-v-83e5df5a]{position:absolute;display:block;width:100%;height:100%;display:flex;align-items:center;justify-content:center;pointer-events:none;-o-object-fit:contain;object-fit:contain;--stroke_width:2px}._video_grid_overlay svg[data-v-83e5df5a]{position:absolute;width:100%;height:100%;stroke:var(--c-rouge);fill:none}._video_grid_overlay svg line[data-v-83e5df5a],._video_grid_overlay svg rect[data-v-83e5df5a]{stroke-width:var(--stroke_width)}._enable_timelapse_button[data-v-83e5df5a]{color:#fff;background:var(--c-orange);width:24px;height:24px;display:block;min-height:0;line-height:0;border-radius:50%;text-align:center;font-weight:700;padding:0;margin:calc(var(--spacing)/4)}._enable_timelapse_button svg[data-v-83e5df5a]{width:100%!important;height:100%!important}._enable_timelapse_button.is--active[data-v-83e5df5a]{background:var(--c-rouge);color:#fff}._capture_flash[data-v-83e5df5a]{background-color:var(--c-rouge);position:absolute;width:100%;height:100%;z-index:100}._download_media_without_validation[data-v-83e5df5a]{background-color:var(--c-noir);padding:0 calc(var(--spacing)/2) calc(var(--spacing)/4);margin-bottom:-.2em;line-height:1;text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}._download_media_without_validation a[data-v-83e5df5a]{color:var(--c-gris)}._videoEq[data-v-83e5df5a]{display:flex;flex-flow:row wrap;align-items:center}._loader[data-v-83e5df5a]{background:transparent;color:#fff;color:var(--c-rouge)}._stopmotionValidation[data-v-83e5df5a]{flex:0 0 auto;margin:0;border-radius:calc(var(--spacing)/4);display:flex;flex-flow:row nowrap;justify-content:center;align-items:center;gap:calc(var(--spacing)/2);--input-height:2em}._stopmotionValidation>*[data-v-83e5df5a]{flex:0 0 auto}._stopmotionValidation ._stopmotionValidation--fpscounter[data-v-83e5df5a]{display:flex;flex-flow:column nowrap;align-items:center}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_lines{padding:var(--spacing)}.m_lines,.m_lines svg{width:100%;height:100%}.m_lines svg{pointer-events:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_previewValidation[data-v-11b1d0e2]{position:absolute;top:0;left:0;background-color:#000;padding:calc(var(--spacing)*1);display:flex;justify-content:center;align-items:center}.m_previewValidation[data-v-11b1d0e2],.m_previewValidation>*[data-v-11b1d0e2]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.m_previewValidation>*[data-v-11b1d0e2]{margin:0}.m_previewValidation .m_previewValidation--audio[data-v-11b1d0e2]{height:100%;width:100%;display:flex;flex-flow:column nowrap}.m_previewValidation .m_previewValidation--audio .plyr .plyr__controls[data-v-11b1d0e2]{color:#fff}.m_previewValidation .m_previewValidation--audio[data-v-11b1d0e2] .plyr--audio{flex:0 0 0}.m_previewValidation .m_previewValidation--audio img[data-v-11b1d0e2]{-o-object-fit:contain;object-fit:contain}.m_previewValidation .m_previewValidation--audio>*[data-v-11b1d0e2]{flex:1 1 auto;height:90%}.m_previewValidation .m_previewValidation--audio[data-v-11b1d0e2]>:last-child{height:auto}.play_picto[data-v-11b1d0e2]{position:absolute;top:0;left:0}.play_picto svg[data-v-11b1d0e2]{width:50px;height:50px;padding:10px;border-radius:50%}.m_previewValidation--svg[data-v-11b1d0e2] svg{width:100%;height:100%;max-width:100%;margin:auto}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_mediaValidationButtons[data-v-7c116abf]{position:relative;z-index:105;display:flex;justify-content:space-around;align-items:center;padding:calc(var(--spacing)/2);flex:0 0 auto;text-transform:uppercase;font-weight:500;letter-spacing:.06em;font-size:var(--font-verysmall);height:auto;background-color:var(--c-noir)}.m_mediaValidationButtons>*[data-v-7c116abf]{flex:0 1 180px;display:flex;align-items:center}.m_mediaValidationButtons .m_mediaValidationButtons--overlay[data-v-7c116abf]{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;background-color:#353535;--loader-bg-color:transparent;--loader-border-color:var(--c-rouge)}.m_mediaValidationButtons .m_mediaValidationButtons--overlay[data-v-7c116abf] .u-loader{background-color:transparent}.m_mediaValidationButtons .m_mediaValidationButtons--overlay .m_mediaValidationButtons--overlay--percent[data-v-7c116abf]{position:absolute;margin-left:8em;z-index:55000;color:#fff;padding:2px;border-radius:4px}.m_mediaValidationButtons button[data-v-7c116abf] svg{width:2rem;height:2rem}._arrows[data-v-7c116abf]{display:none}._valStarBtns[data-v-7c116abf]{display:flex;align-items:stretch}._favBtn[data-v-7c116abf]{margin-left:-5px}._checkBtn rect[data-v-7c116abf]{fill:transparent;stroke:#fff;stroke-width:6px;fill:var(--c-rouge)}._checkBtn.is--active rect[data-v-7c116abf]{fill:#fff}._locationBtn[data-v-7c116abf]{position:absolute;bottom:100%;right:0;margin:calc(var(--spacing)/1)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._modeSelector[data-v-5fc4cc80]{position:absolute;z-index:1;display:flex;left:0;right:0;flex-flow:row wrap;justify-content:center;align-items:center;padding:calc(var(--spacing)/1);gap:calc(var(--spacing)/2);-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none;font-family:Fira Code;color:var(--c-orange)}._modeSelector>*[data-v-5fc4cc80]{flex:0 0 auto;display:flex;flex-flow:row wrap;font-family:inherit;pointer-events:auto}._modeSelector>._arrows[data-v-5fc4cc80]{padding:0}._modeSelector>._arrows button[data-v-5fc4cc80]{padding:0;min-height:0}._modeSelector>._arrows svg[data-v-5fc4cc80]{width:36px;height:36px;padding:4px}._modeSelector input[data-v-5fc4cc80]{width:0;height:0;display:none}._modeSelector input:checked+label[data-v-5fc4cc80]{background-color:var(--c-orange)}._modeSelector input[disabled]+label[data-v-5fc4cc80]{filter:grayscale(100%);opacity:.3;cursor:not-allowed}._modeSelector label[data-v-5fc4cc80]{font-size:inherit;font-family:inherit;display:inline-block;text-decoration:none;text-transform:uppercase;font-weight:500;letter-spacing:.06em;flex-shrink:0;cursor:pointer;border-radius:6px;transition:color .25s ease-out,opacity .5s;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;background-color:#fff;letter-spacing:0;margin:0;text-align:center;transition:all .4s cubic-bezier(.19,1,.22,1)}._modeSelector ._picto[data-v-5fc4cc80]{border-radius:50%;overflow:hidden;display:block;width:36px;height:36px;padding:4px;color:#fff;margin-right:0}._modeSelector span[data-v-5fc4cc80]{display:block;font-weight:400;text-transform:lowercase;margin:.405rem;font-size:.8rem;font-family:Fira Mono;text-transform:uppercase;font-weight:500;letter-spacing:.05em;color:var(--c-noir);font-weight:600}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._player[data-v-665b1143]{height:100%;flex-flow:column nowrap;background:#000}._playPauseBtn[data-v-665b1143],._player[data-v-665b1143]{position:absolute;width:100%;display:flex;justify-content:center;align-items:center}._playPauseBtn[data-v-665b1143]{top:0;bottom:0;left:0;right:0;background:transparent;padding:calc(var(--spacing)/1)}._playPauseBtn button[data-v-665b1143]{border-radius:50%;padding:calc(var(--spacing)/2)}._fps[data-v-665b1143]{bottom:0;width:100%;padding:calc(var(--spacing)/1)}._fps[data-v-665b1143],._miniListPreview[data-v-665b1143]{position:absolute;display:flex;justify-content:center}._miniListPreview[data-v-665b1143]{flex-flow:row wrap;gap:1px;z-index:-1;opacity:.5;align-items:center;align-content:center;padding:calc(var(--spacing)*2)}._miniListPreview>*[data-v-665b1143]{width:50px;height:50px}._imgCount[data-v-665b1143]{position:absolute;bottom:0;right:0;padding:calc(var(--spacing)/2);color:#fff;font-size:var(--sl-font-size-x-small)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_stopmotionList[data-v-2cfb19ff]{position:relative}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_stopmotionpanel[data-v-5c9b5e41]{--img-width:120px;position:relative;display:flex;flex-flow:column nowrap;flex:0 0 auto}.m_stopmotionpanel.is--showing_video_validation[data-v-5c9b5e41]{flex-grow:1}.m_stopmotionpanel--toprowbuttons[data-v-5c9b5e41]{position:relative;width:100%;background-color:var(--c-noir);pointer-events:none;display:flex;justify-content:center;align-items:center;gap:calc(var(--spacing)/4)}.m_stopmotionpanel--toprowbuttons>*[data-v-5c9b5e41]{pointer-events:auto;margin:calc(var(--spacing)/4)}.m_stopmotionpanel--toprowbuttons>.m_stopmotionpanel--toprowbuttons--counter[data-v-5c9b5e41]{display:flex;align-items:center;gap:calc(var(--spacing)/2);background-color:var(--c-noir);margin:0;padding:0}.m_stopmotionpanel--toprowbuttons>.m_stopmotionpanel--toprowbuttons--counter label[data-v-5c9b5e41]{margin-bottom:0}.m_stopmotionpanel--medias[data-v-5c9b5e41]{flex:1 1 auto;display:flex;flex-flow:row wrap;justify-content:center;background-color:#000;padding:1px;color:#fff;counter-reset:compteListe}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list[data-v-5c9b5e41]{display:block;flex:1 1 200px;position:relative;display:flex;flex-flow:row nowrap;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior-y:contain;padding:0;gap:1px;scroll-behavior:smooth;--c-thumbcolor:var(--c-noir);--scrollbar-height:4px;--scrollbar-padding:4px;--scrollbar-border:4px;--c-barbgcolor:hsla(0,0%,100%,0);--c-thumbcolor:#fff}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list[data-v-5c9b5e41]::-webkit-scrollbar{height:calc(var(--scrollbar-padding)*2 + var(--scrollbar-height));width:calc(var(--scrollbar-padding)*2 + var(--scrollbar-height));background-color:var(--c-barbgcolor)}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list[data-v-5c9b5e41]::-webkit-scrollbar-thumb,.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list[data-v-5c9b5e41]::-webkit-scrollbar-track{border:var(--scrollbar-border) solid hsla(0,0%,100%,0);border-radius:calc(var(--scrollbar-border)*4);background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list[data-v-5c9b5e41]::-webkit-scrollbar-track{background-color:transparent}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list[data-v-5c9b5e41]::-webkit-scrollbar-thumb{background-color:var(--c-thumbcolor)}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list[data-v-5c9b5e41]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:var(--scrollbar-border) solid hsla(0,0%,100%,0)}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items[data-v-5c9b5e41]{position:relative;overflow:hidden;width:auto;flex:0 0 auto;width:var(--img-width);height:auto;cursor:pointer;transition:all .4s cubic-bezier(.19,1,.22,1)}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items[data-v-5c9b5e41]:before{counter-increment:compteListe 1;content:counter(compteListe) \\\" \\\";position:absolute;left:0;bottom:0;padding:calc(var(--spacing)/16);margin:calc(var(--spacing)/16);text-transform:uppercase;font-weight:500;letter-spacing:.06em;font-size:var(--font-verysmall);background-color:var(--c-noir);color:#fff;border-radius:2px;line-height:1;z-index:1}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items[data-v-5c9b5e41] img,.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items[data-v-5c9b5e41] video{position:relative;width:100%;height:100%;margin:0;-o-object-fit:contain;object-fit:contain}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items[data-v-5c9b5e41]:last-child{flex-basis:auto;width:auto;overflow:hidden}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items:last-child video[data-v-5c9b5e41]{width:var(--img-width);height:auto}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items[data-v-5c9b5e41]:last-child:before{content:attr(data-content)}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items.is--current_single[data-v-5c9b5e41]:before{color:#fff;background-color:var(--c-rouge)}.m_stopmotionpanel--medias .m_stopmotionpanel--medias--list--items .mediaContainer[data-v-5c9b5e41]{width:100%;height:100%;width:auto}.m_stopmotionpanel--videopreview[data-v-5c9b5e41]{position:relative;flex:1 1 auto;overflow:hidden}.m_stopmotionpanel--videopreview .mediaContainer[data-v-5c9b5e41]{position:absolute;height:100%;width:100%}.m_stopmotionpanel--videopreview .mediaContainer[data-v-5c9b5e41]>*{width:100%;height:100%}.m_stopmotionpanel--videopreview .mediaContainer[data-v-5c9b5e41] video{height:100%;width:100%;background-color:var(--c-noir)}.m_stopmotionpanel--buttons[data-v-5c9b5e41]{flex:0 0 auto;width:100%;color:var(--c-noir)}.m_stopmotionpanel--buttons>*[data-v-5c9b5e41]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;padding:calc(var(--spacing)/2)}.m_stopmotionpanel--buttons[data-v-5c9b5e41]>:nth-child(2){border-top:2px solid #fff;justify-content:center;background-color:var(--c-noir)}.m_stopmotionpanel--buttons input[type=number][data-v-5c9b5e41]{width:50px}._removeMedia[data-v-5c9b5e41]{position:absolute;top:0;right:0;padding:calc(var(--spacing)/4);margin:calc(var(--spacing)/4)}.m_stopmotionpanel--loader[data-v-5c9b5e41]{position:absolute;z-index:2;top:0;left:0;bottom:0;right:0;background-color:fade(#fff,90%);display:flex;justify-content:center;align-items:center}._loader[data-v-5c9b5e41]{background:rgba(0,0,0,.95);color:var(--color-capture)}._separator[data-v-5c9b5e41]{position:relative;flex:0 0 1px;height:100%;z-index:-1}._onion_skin[data-v-5c9b5e41]{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(0,0,0,.25);padding:calc(var(--spacing)/4);text-align:center}._onion_skin .u-label[data-v-5c9b5e41]{color:#fff}._onion_skin input[data-v-5c9b5e41]{width:100%;margin:0}._onion_skin_range[data-v-5c9b5e41]{direction:rtl}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._preview[data-v-8a70e9b4]{padding:calc(var(--spacing)/1);background:var(--c-gris);margin:0 0 calc(var(--spacing)/1) 0}._topRow[data-v-8a70e9b4]{justify-content:space-between;gap:calc(var(--spacing)/2)}._imagesCont[data-v-8a70e9b4],._topRow[data-v-8a70e9b4]{display:flex;flex-flow:row nowrap;align-items:center}._imagesCont[data-v-8a70e9b4]{background:var(--c-noir);padding:1px;gap:1px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior-y:contain}._imagesCont>*[data-v-8a70e9b4]{flex:0 0 100px}._btns[data-v-8a70e9b4]{display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/2)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m_vecto{-o-object-fit:scale-down;object-fit:scale-down}.m_vecto,.m_vecto svg{width:100%;height:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AudioEqualizer.vue?vue&type=style&index=0&id=1ce15e3c&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"da83016c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureEffects.vue?vue&type=style&index=0&id=b51a7f0e&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7df172e1\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CapturePane.vue?vue&type=style&index=0&id=5cdbfa5a&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"69167ee2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureSettings.vue?vue&type=style&index=0&id=a8d9769a&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2f798d62\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CaptureView.vue?vue&type=style&index=0&id=83e5df5a&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8b2c4fd6\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LinesMode.vue?vue&type=style&index=0&id=42f76944&prod&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"33306783\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaPreviewBeforeValidation.vue?vue&type=style&index=0&id=11b1d0e2&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"29858900\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaValidationButtons.vue?vue&type=style&index=0&id=7c116abf&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"105b943d\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModeSelector.vue?vue&type=style&index=0&id=5fc4cc80&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8a89464c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PreviewStopmotion.vue?vue&type=style&index=0&id=665b1143&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"c2ff66b0\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionList.vue?vue&type=style&index=0&id=2cfb19ff&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"340083b2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionPanel.vue?vue&type=style&index=0&id=5c9b5e41&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5f70e260\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StopmotionPreview.vue?vue&type=style&index=0&id=8a70e9b4&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"78ef3178\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19.use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VectoMode.vue?vue&type=style&index=0&id=66c336eb&prod&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"39eeafbe\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_c","_self","staticClass","class","collapse_capture_pane","directives","name","rawName","value","show_capture_settings","expression","attrs","$t","on","$event","audio_output_deviceId","setStream","hasFinishedLoading","show_effects_pane","enable_effects","$refs","videoElement","canvasElement","path","show_mode_selector","available_modes","selected_mode","is_recording","media_to_validate","mode_just_changed","is_making_stopmotion","$emit","_e","is_validating_stopmotion_video","stream_sharing_informations_status","enabled","stream_access_informations_status","style","show_videos","ref","stream_type","domProps","stream","actual_camera_resolution","width","height","e","updateSelectedColor","type","last_frame_from_video","vecto_number_of_colors","lines_angle","lines_brightness","lines_contrast","lines_density","timer_recording_in_seconds","key","_s","timelapse_mode_enabled","timelapse_event","_v","timelapse_interval","modifiers","target","composing","_n","$forceUpdate","peers_connected","length","callee","delay_mode_enabled","delay_event","toLowerCase","delay_seconds","delay_remaining_time","timelapse_time_before_next_picture","onion_skin_img","stopmotion_slug","show_live_feed","onion_skin_opacity","$path","enable_grid","enable_video","_l","grids","current_grid_type","x1","y1","x2","y2","index","must_validate_media","Object","keys","grid_type","location_to_add_to_medias","show_position_modal","is_loading_stream","stopmotion_frame_rate","meta_filename","closeStopmotionPanel","is_sending_image","temp_name","validated_media_href_blob","rawData","formatBytes","size","media_is_being_sent","media_being_sent_percent","cancelValidation","sendMedia","fav","video_recording_is_paused","staticStyle","stopPropagation","preventDefault","pauseOrResumeCapture","stopStopmotion","stopRecording","$root","publicPath","includes","capture_button_pressed","setCaptureInit","enable_audio_recording_in_video","Array","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","$$selectedVal","prototype","filter","call","options","o","selected","map","val","_value","multiple","testStopmotion","show_stopmotion_list","show_lines_settings","loadStopmotion","staticRenderFns","previousMode","apply","arguments","mode","id","available_mode_picto","nextMode","props","String","disable_change_mode","Boolean","components","data","Math","random","toString","photo","video","stopmotion","audio","vecto","lines","created","mounted","$eventHub","$on","beforeDestroy","$off","watch","computed","methods","current_mode_index","indexOf","component","objectURL","preview","setSinkId","handler","selectedMoveLeft","selected_button","validateButton","cancelButtonIsBackButton","can_add_to_fav","selectedMoveRight","Number","default","document","addEventListener","captureKeyListener","removeEventListener","evt","console","log","idx","validating_video_preview","fetch_stopmotion_error","medias","frame_rate","created_stopmotion","compilation_in_progress","image_index_currently_shown","firstImage","prevImage","preview_playing_event","pausePreview","previewPlay","nextImage","lastImage","media","show_previous_photo","removeMedia","showVideoFeed","backToStopmotion","exportStopmotion","current_media","is_playing","current_media_index","playPausePreview","new_frame_rate","undefined","stopPreview","playPreview","window","setInterval","$nextTick","clearInterval","current_stopmotion_path","MediaStream","MediaValidationButtons","PreviewStopmotion","show_advanced_menu","appendToStopMotion","$api","getFolder","catch","err","response","join","room","leave","mediaPreviews","$el","scrollLeft","immediate","active","querySelector","scrollIntoView","behavior","inline","images_list","$files","reduce","acc","m","find","f","endsWith","push","findIndex","imageData","additional_meta","uploadFile","filename","Date","file","$alertify","delay","error","updateMeta","new_meta","at","connected_as","$authors","current_task_id","exportFolder","instructions","recipe","field","checkIfEnded","task_id","message","getFilename","i","deleteItem","newPosition","new_location","setTimeout","pane_type","label","_t","is_loading_available_devices","is_loading_feed","current_mode","status","refreshAvailableDevices","all_video_input_devices","selected_devices","video_input_device","$set","d","deviceId","advanced_capture_options","cursor","supported","_q","all_audio_input_devices","audio_input_device","echoCancellation","noiseSuppression","all_audio_output_devices","audio_output_device","chromeMediaSource","predefined_resolutions","custom_camera_resolution","res","desired_camera_resolution","unavailable_camera_resolutions","ratio","access_distant_stream","_k","keyCode","callStream","trim","share_this_stream","loading","setCameraStreamFromDefaults","calling","hangupStream","current_stream","local_stream","remote_stream","stream_current_settings","last_working_resolution","connected_devices","rtcmulti_connection","navigator","mediaDevices","getUserMedia","then","closeLogOnClick","setDefaultInputsAndOutputs","alert","getTracks","forEach","track","stop","closeMultiRTC","setCurrentStream","localStorage","setItem","JSON","stringify","deep","kind","current_settings","_settings","listDevices","Promise","resolve","reject","debug_mode","enumerateDevices","devices","setSupportedConstraints","supported_constraints","getSupportedConstraints","entries","prop","getDefaultDevice","devices_list","r","previously_used","getItem","parse","found_device","startMediaDeviceFeed","constraints","processFeeds","_is_webrtc_screen_capture","getDisplayMedia","all","streams","tracks","video_stream","s","audio_stream","getAudioTracks","getDesktopCapturer","electronAPI","desktopCapturer","types","sources","startLocalStream","setStreamSharing","createConstraintsFromSelected","_constraints","exact","_is_electron_screen_capture","mandatory","chromeMediaSourceId","initRTCMulti","addStream","open","isRoomOpened","roomid","onNewParticipant","participantId","userPreferences","newParticipantOnStream","onleave","onParticipantLeave","stopSharingStream","success","acceptParticipationRequest","call_timeout","onstream","event","mediaElement","removeAttribute","muted","volume","clearTimeout","checkPresence","isOnline","username","RTCMultiConnection","iceServers","urls","connection","downlinkMax","socketURL","dontCaptureUserMedia","session","oneway","onstreamended","onMediaError","pid","disconnectWith","closeSocket","flip_horizontally","flip_vertically","chroma_key_settings","enable","chroma_key_color_hex","setTogglePickColorFromVideo","enable_pick_color_from_video","similarity","smoothness","spill","replacement_mode","project_path","newChromaKeyImage","chroma_key_replacement_color_hex","image_filters_settings","min","max","step","HTMLVideoElement","HTMLCanvasElement","source_stream_resolution","key_color","g","b","replacement_color","replacement_image","brightness","order","contrast","hue","saturation","lightness","dotscreen","offscreen_canvas","fragment_shader","updated","pixelColorUnderMouse","stopWebGL","disableAllEffects","enable__","startWebGL","ifs","get","rgbToHex","set","hexToRgb","hex","result","exec","parseInt","px_color","createElement","classList","add","destination_canvas","getContext","gl","premultipliedAlpha","vs","createShader","VERTEX_SHADER","shaderSource","compileShader","fs","FRAGMENT_SHADER","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","prog","createProgram","attachShader","linkProgram","useProgram","vb","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","coordLoc","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","activeTexture","TEXTURE0","tex","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","videoTexLoc","getUniformLocation","uniform1i","texWidthLoc","texHeightLoc","flipHorizontallyLoc","flipVerticallyLoc","keyColorLoc","replacementColorLoc","replacementImageLoc","similarityLoc","smoothnessLoc","spillLoc","chromaKeyModeLoc","midLoc","imageFiltersLoc","loadReplacementImageInShader","processFrame","videoWidth","videoHeight","viewport","texImage2D","RGB","UNSIGNED_BYTE","uniform1f","uniform3f","parseFloat","loc","chromaKeyMode","drawArrays","TRIANGLE_FAN","drawImage","requestAnimationFrame","img","src","location","origin","getMediaSrcFromPath","thumb","img_el","Image","decode","canvas","ctx","img_ratio","c_ratio","h","w","getImageData","remove","path_to_source_media_meta","getMediaInFolder","path_to_project","getParent","makeRelativeURLFromThumbs","$thumbs","$type","resolution","TEXTURE1","tex2","RGBA","is_loading","sorted_stopmotions","removeStopmotion","$date_created","toUpperCase","images","image","stopmotion_path","RemoveMenu","StopmotionPreview","stopmotions","getFolders","_stopmotions","sort","a","audio_activity","current_audio_level","current_audio_level_smoothed","current_draw_percentage","startEqualizer","destroy","round","audioActivity","level","drawVolume","fillStyle","fillRect","diam","beginPath","ellipse","PI","fill","svgstr","Blob","number_of_colors","is_processing_image","vectoImage","ImageTracer","URL","createObjectURL","colorsampling","numberofcolors","colorquantcycles","scale","strokewidth","blurradius","blurdelta","viewbox","svg_width","svg_height","lines_array","line","posX","posY","angle","boost_brightness","boost_contrast","density","pixel_array","drawBlobToImage","svg_padding","svg_width_with_padding","svg_height_with_padding","line_density_x","line_density_y","p","intercept","mapped_brightness","x","y","t0","performance","now","onload","invisible_canvas","imgData","_pixel_array","pos_x","floor","pos_y","R","G","B","getImageDataFaster","t1","W","H","arr","Uint32Array","c","O","n","return_temp_media","PickLocationForCaptures","ModeSelector","MediaPreviewBeforeValidation","StopmotionPanel","CapturePane","CaptureSettings","CaptureEffects","StopmotionList","AudioEqualizer","VectoMode","LinesMode","ask_before_leaving_capture","halfs","thirds","fourths","recording_timer_interval","recorder","displayed_video_size","frameGrabber","update_last_video_imageData","checkCapturePanelSize","updateStreamSharing","updateDistantStream","refreshVideoActualSize","stopFrameGrabber","stopTimelapseInterval","cancelDelay","eraseTimer","cancelAnimationFrame","oldVal","enable_audio","startFrameGrabber","pause","play","audioElement","getColorInCanvasFromPixelCount","getPropsForObjectfitContent","offsetX","offsetY","transformed_props","getBoundingClientRect","mouse_pos_x","mouse_pos_y","frame","getVideoActualSize","wait_period_if_necessary","wait","ms","substring","lastIndexOf","offsetWidth","getFrame","getImageDataFromFeed","image_data","addStopmotionImage","new_stopmotion_slug","createFolder","getTime","$admins","modal_is_opened","tagName","className","hasAttribute","startDelay","setCapture","time_passed","startTimelapseInterval","startRecordFeed","mimeType","videoBitsPerSecond","vectoElement","outerHTML","duration","video_blob","getBlob","ysFixWebmDuration","logger","fixed_video_blob","audio_blob","equalizerElement","toDataURL","fixed_audio_blob","state","pauseTimer","pauseRecording","unpauseTimer","resumeRecording","startTimer","toFixed","getStaticImageFromVideoElement","from_element","Error","_canvas","invisible_ctx","imageBlob","toBlob","finalStream","video_source","captureStream","getVideoTracks","addTrack","RecordRTC","startRecording","timeCreated","randomString","extensions","svg","$origin","$location","onProgress","progressEvent","loaded","total","definition","define","sections","doInherit","newClass","baseClass","create","constructor","WebmBase","WebmUint","padHex","WebmFloat","WebmContainer","WebmFile","source","setSource","fixWebmDuration","blob","callback","reader","FileReader","onloadend","Uint8Array","fixDuration","ex","readAsArrayBuffer","updateBySource","updateByData","setData","substr","getValue","setValue","getFloatArrayType","Float64Array","byteArray","reverse","floatArrayType","floatArray","buffer","readByte","offset","readUint","firstByte","bytes","end","len","info","ctr","section","idHex","writeUint","draft","flag","writeSections","content","contentLength","getSectionById","segmentSection","infoSection","timeScaleSection","durationSection","_this","versionnumber","imageToSVG","url","checkoptions","loadImage","imagedataToSVG","getImgdata","imgd","td","imagedataToTracedata","getsvgstring","imageToTracedata","ii","colorquantization","layering","tracedata","layers","palette","array","colornum","tracedlayer","batchtracepaths","internodes","pathscan","layeringstep","pathomit","ltres","qtres","ls","layercontainerid","drawLayers","specpalette","bps","batchpathscan","bis","batchinternodes","batchtracelayers","optionpresets","corsenabled","rightangleenhance","mincolorratio","linefilter","roundcoords","desc","lcpr","qcpr","pal","ok","k","hasOwnProperty","cd","cdl","ci","j","cnt","paletteacc","pixelnum","newimgddata","Uint8ClampedArray","pxcnt","generatepalette","samplepalette","samplepalette2","blur","abs","ni","ceil","sqrt","nj","vx","vy","rcnt","gcnt","bcnt","graystep","colorqnum","pow","colorstep","rndnum","n1","n2","n3","n4","n5","n6","n7","n8","ah","aw","cnum","layer","pointinpoly","pa","isin","pathscan_combined_lookup","lookuprow","paths","pacnt","pcnt","px","py","dir","pathfinished","holepath","points","boundingbox","holechildren","t","pop","isholepath","parentidx","parentbbox","parentcnt","boundingboxincludes","childbbox","bpaths","ins","palen","nextidx","nextidx2","previdx","previdx2","testrightangle","linesegment","getdirection","idx1","idx2","idx3","idx4","idx5","binternodes","tracepath","segtype1","segtype2","seqend","smp","segments","fitseq","seqstart","dist2","errorpoint","errorval","curvepass","tl","pl","fitpoint","t2","t3","cpx","cpy","x3","y3","splitpoint","internodepaths","btracedpaths","btbis","roundtodec","places","svgpathstring","lnum","pathnum","str","tosvgcolorstr","hcnt","hsmp","lcnt","compareNumbers","torgbastr","appendSVGString","parentid","div","getElementById","body","appendChild","innerHTML","gks","radius","delta","racc","gacc","bacc","aacc","wacc","imgd2","thisgk","himgd","crossOrigin","context","mediaStream","config","RecordRTCConfiguration","self","config2","disableLogs","version","mediaRecorder","clearRecordedData","record","setState","recordingDuration","handleRecordingDuration","initRecorder","initCallback","Recorder","GetRecorderType","warn","_callback","warningLog","__blob","bytesToSize","autoWriteToDisk","getDataURL","dataURL","parameter","DiskStorage","Store","resume","readFile","_blob","postMessage","FileReaderSync","readAsDataURL","_mediaRecorder","Worker","mozGetUserMedia","webWorker","processInWebWorker","onmessage","_function","worker","revokeObjectURL","counter","onRecordingStopped","onStateChanged","WARNING","returnObject","setRecordingDuration","toURL","getInternalRecorder","save","fileName","invokeSaveAsDialog","getFromDisk","setAdvertisementArray","arrayOfWebPImages","advertisement","bufferSize","sampleRate","reset","getState","disableLogsCache","Storage","AudioContextConstructor","close","recorderType","WhammyRecorder","CanvasRecorder","WebAssemblyRecorder","GifRecorder","StereoAudioRecorder","MediaStreamRecorder","MediaRecorder","split","bitsPerSecond","isChrome","isEdge","isOpera","ReadableStream","isMediaRecorderCompatible","isTypeSupported","MultiStreamRecorder","isSafari","MRecordRTC","_mediaStream","mediaType","gif","audioRecorder","numberOfAudioChannels","timeSlice","onTimeStamp","newStream","videoTrack","isFirefox","videoRecorder","frameInterval","workerPath","webAssemblyPath","frameRate","bitrate","isSingleRecorder","gifRecorder","quality","blobURL","output","callback00","webkitURL","_audioDataURL","_videoDataURL","writeToDisk","args","require","module","exports","Fetch","_type","replace","audioDataURL","videoDataURL","gifDataURL","audioBlob","videoBlob","gifBlob","browserFakeUserAgent","that","global","userAgent","documentElement","mozCaptureStream","obj","protocol","href","hash","screen","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","lastTime","element","currTime","timeToCall","webkitCancelAnimationFrame","mozCancelAnimationFrame","msCancelAnimationFrame","AudioContext","webkitAudioContext","mozAudioContext","webkitGetUserMedia","msSaveBlob","msSaveOrOpenBlob","opera","test","isElectron","sizes","toPrecision","fileExtension","splitted","fileFullName","hyperlink","download","click","dispatchEvent","MouseEvent","view","bubbles","cancelable","process","versions","electron","setSrcObject","srcObject","mozSrcObject","getSeekableBlob","inputBlob","EBML","Reader","decoder","Decoder","tools","fileReader","ebmlElms","read","refinedMetadataBuf","makeMetadataSeekable","metadatas","cues","metadataSize","newBlob","webkitMediaStream","appVersion","verOffset","ix","nAgt","fullVersion","majorVersion","isNaN","arrayOfBlobs","updateTimeStamp","timestamps","getMimeType","secondObject","clearRecordedDataCB","isMediaStreamActive","ended","getArrayOfBlobs","allStates","recorderHints","canRecordMimeType","ondataavailable","recordingCallback","getNativeBlob","onstart","onpause","onresume","onstop","onerror","looper","manuallyStopped","timeslice","start","getAllStates","checkForInactiveTracks","jsAudioNode","leftchannel","rightchannel","recording","recordingLength","desiredSampRate","mergeLeftRightBuffers","mergeAudioBuffers","cb","interleaved","leftBuffers","rightBuffers","internalInterleavedLength","interpolateArray","newSampleRate","oldSampleRate","fitCount","newData","springFactor","tmp","before","after","atPoint","linearInterpolate","mergeBuffers","channelBuffer","rLength","lng","interleave","leftChannel","rightChannel","inputIndex","writeUTFBytes","string","setUint8","charCodeAt","interleavedLength","resultingBufferLength","ArrayBuffer","DataView","setUint32","setUint16","setInt16","noWorker","workerURL","terminate","resetVariables","isAudioProcessStarted","isPaused","byteLength","audioInput","createMediaStreamSource","legalBufferValues","createJavaScriptNode","createScriptProcessor","connect","intervalsBasedBuffers","left","right","onaudioprocess","disconnect","onAudioProcessDataAvailable","onAudioProcessStarted","inputBuffer","getChannelData","chLeft","chRight","createMediaStreamDestination","destination","htmlElement","html2canvas","isCanvasSupportsStreamCapturing","item","globalCanvas","mediaStreamRecorder","isRecording","_isChrome","webkitRTCPeerConnection","chrome","chromeVersion","matchArray","match","useWhammyRecorder","CanvasRenderingContext2D","canvasMediaStream","webkitCaptureStream","mdStream","whammy","frames","drawCanvasFrame","getWebPImages","nodeName","framesLength","framesRemaining","onEncodingCallback","webp","compile","isPausedRecording","cloneCanvas","newCanvas","grabMouse","showMousePointer","onrendered","Whammy","Video","drawFrames","paused","isStopDrawing","asyncLoop","loop","functionToLoop","dropBlackFrames","_frames","_framesToCheck","_pixTolerance","_frameTolerance","localCanvas","context2d","resultFrames","checkUntilNotBlack","endCheckFrame","sampleColor","maxColorDifference","pixTolerance","frameTolerance","doNotCheckNext","matchPixCount","endPixCheck","maxPixCount","finishImage","pix","currentColor","colorDifference","cloneNode","onloadedmetadata","WhammyVideo","whammyInWebWorker","ArrayToWebM","checkFrames","clusterMaxDuration","doubleToString","frameNumber","clusterTimecode","clusterFrames","clusterDuration","clusterCounter","cluster","getClusterData","generateEBML","block","makeSimpleBlock","discardable","invisible","keyframe","lacing","trackNum","timecode","numToBuffer","num","parts","strToBuffer","bitsToBuffer","bits","pad","json","ebml","zeroes","sizeToString","padded","flags","out","fromCharCode","parseWebP","riff","VP8","RIFF","WEBP","frameStart","getStrLength","unpadded","parseRIFF","chunks","webm","atob","init","indexedDB","db","dbVersion","dbName","request","onError","onsuccess","setVersion","createObjectStore","putInDB","onupgradeneeded","dataBase","dataStoreName","transaction","getFromStore","portionName","objectStore","put","GIFEncoder","script","isHTMLObject","drawVideoFrame","time","clearedRecordedData","lastAnimationFrame","lastFrameTime","onGifPreview","gifEncoder","addFrame","isLoadedMetaData","offsetHeight","setRepeat","setDelay","setQuality","onGifRecordingStarted","bin","autoplay","playsInline","MultiStreamsMixer","arrayOfMediaStreams","elementClass","videos","isStopDrawingFrames","opacity","position","zIndex","top","useGainNode","drawVideosToCanvas","videosLength","fullcanvas","remaining","onRender","getMixedStream","mixedVideoStream","getMixedVideoStream","mixedAudioStream","getMixedAudioStream","capturedStream","resetVideoStreams","videoStream","audioContext","audioSources","gainNode","createGain","gain","audioTracksLength","audioSource","audioDestination","getVideo","startDrawingFrames","appendStreams","releaseStreams","clearRect","mixer","getAllVideoTracks","previewStream","addStreams","getMixer","RecordRTCPromisesHandler","recordRTC","finished","cameraStream","controller","cvs","first","onplaying","frameTimeout","cameraTimer","onVideoProcessStarted","_controlledReadableStream","enqueue","fetch","arrayBuffer","timebaseDen","realtime","pipeTo","WritableStream","write","arrayOfBuffers","forceOptions","SocketConnection","connectCallback","isData","parameters","userid","sessionid","socketMessageEvent","socketCustomEvent","autoCloseEntireSession","broadcast","maxParticipantsAllowed","enableScalableBroadcast","maxRelayLimitPerUser","extra","socketCustomParameters","io","sockets","enableLogs","socket","socketOptions","mPeer","multiPeersHandler","updateExtraBackup","remoteUserId","peersBackup","onMessageEvent","peers","sender","onExtraDataUpdated","streamSyncNeeded","streamEvents","streamid","action","allParticipants","participant","localPeerSdpConstraints","OfferToReceiveAudio","sdpConstraints","OfferToReceiveVideo","remotePeerSdpConstraints","isOneWay","direction","isDataOnly","newParticipant","createNewPeer","readyForOffer","attachStreams","waitingForLocalMedia","newParticipationRequest","deletePeer","dontGetRemoteStream","dontAttachLocalStream","connectionDescription","successCallback","changedUUID","oldUUID","newUUID","userLeft","onUserLeft","addNegotiatedMessage","alreadyConnected","resetProps","emit","onSocketDisconnect","onSocketError","onUserStatusChanged","onEntireSessionClosed","useridAlreadyTaken","yourNewUserId","onUserIdAlreadyTaken","debug","onNumberOfBroadcastViewersUpdated","isInitiator","MultiPeers","skipPeers","initFileBufferReader","fbr","FileBufferReader","chunk","onFileProgress","onBegin","onFileStart","onEnd","onFileEnd","getLength","numberOfPeers","peer","selectFirst","firstPeer","getAllParticipants","allPeers","send","isNull","enableFileSharing","shareFile","remoteUser","channels","channel","createDataChannel","renegotiate","TextSender","text","uuid","getLocalConfig","remoteSdp","streamsToShare","rtcMultiConnection","renegotiatingPeer","peerRef","onLocalSdp","localSdp","onNegotiationNeeded","onLocalCandidate","localCandidate","OnIceCandidateHandler","processCandidates","onDataChannelMessage","convertToObject","object","readyForNextChunk","getNextChunk","nextChunk","isLastChunk","chunkMissing","addChunk","promptNextChunk","onDataChannelError","onDataChannelOpened","onDataChannelClosed","onRemoteStream","onGettingRemoteMedia","onRemoteStreamRemoved","onRemovingRemoteMedia","onPeerStateChanged","states","iceConnectionState","onNegotiationStarted","onNegotiationCompleted","search","enableMedia","setUserPreferences","localConfig","PeerInitiator","createAnsweringPeer","renegotiatePeer","replaceTrack","isVideoTrack","getSenders","rtpSender","lastVideoTrack","lastAudioTrack","sdp","addRemoteSdp","candidate","addRemoteCandidate","isAudio","isVideo","isScreen","onReadyForOffer","onGettingLocalMedia","localStream","onLocalMediaError","arrayOfUsers","chunkSize","DetectRTC","browser","textReceiver","TextReceiver","receive","onclose","onopen","getRemoteStreams","fireEvent","eventName","CustomEvent","eventDetail","__exposedProps__","setHarkEvents","streamEvent","onspeaking","onsilence","hark","onvolumechange","threshold","merge","setMuteHandlers","muteType","onmute","unmuteType","onunmute","getRandomString","crypto","getRandomValues","token","l","getRMCMediaElement","autoCreateMediaElement","isAudioOnly","setAttribute","streamEndedEvent","currentUserMediaRequest","idInstance","StreamsHandler","onSyncNeeded","aStream","newStreamsArray","parentNode","removeChild","played","cbFired","listenEventHandler","eventHandler","removeNullEntries","newArray","isString","HTMLMediaElement","isNodejs","node","isMobileDevice","InstallTrigger","isIE","documentMode","getBrowserInfo","nameOffset","browserName","appName","isPrivateBrowsing","retry","isDone","next","currentTrial","maxRetry","isTimeout","isIE10OrLater","ua","detectPrivateMode","isPrivate","webkitRequestFileSystem","TEMPORARY","readyState","removeItem","isMobile","Android","BlackBerry","iOS","Opera","Windows","any","getOsName","osName","detectDesktopOS","cs","unknown","nVer","os","clientStrings","osVersion","getAndroidVersion","osInfo","isVideoSupportsStreamCapturing","regexIpv4Local","regexIpv4","regexIpv6","DetectLocalIPAddress","isWebRTCSupported","isPublic","isIpv4","getIPs","ip","ipDuplicates","RTCPeerConnection","mozRTCPeerConnection","iframe","win","contentWindow","peerConfig","optional","RtpDataChannels","servers","pc","onicecandidate","handleCandidate","isPromisesSupported","createOffer","setLocalDescription","afterCreateOffer","ipAddress","localDescription","MediaDevices","audioInputDevices","audioOutputDevices","videoInputDevices","canEnumerate","MediaStreamTrack","hasMicrophone","hasSpeakers","hasWebcam","isWebsiteHasMicrophonePermissions","isWebsiteHasWebcamPermissions","checkDeviceSupport","getSources","bind","alreadyUsedDevices","_device","device","isCustomLabel","domain","isORTCSupported","RTCIceGatherer","isScreenCapturingSupported","isNonLocalHost","webAudio","isSupported","isCreateMediaStreamSourceSupported","isAudioContextSupported","isRtpDataChannelsSupported","isSCTPSupportd","isSctpDataChannelsSupported","isGetUserMediaSupported","displayResolution","getAspectRatio","gcd","displayAspectRatio","isWebSocketsSupported","WebSocket","CLOSING","isWebSocketsBlocked","checkWebSocketsSupport","starttime","websocket","WebsocketLatency","load","isSetSinkIdSupported","isRTPSenderReplaceTracksSupported","isRemoteStreamProcessingSupported","isApplyConstraintsSupported","isMultiMonitorScreenCapturingSupported","cordova","el","attachEvent","attachEventListener","listener","useCapture","isAudioPlusTab","audioPlusTab","isUnifiedPlanSupportedDefault","canAddTransceiver","RTCRtpTransceiver","tempPc","addTransceiver","isUnifiedPlanSuppored","isUnifiedPlanSupported","sdpSemantics","getConfiguration","setCordovaAPIs","plugins","iosrtc","RTCSessionDescription","RTCIceCandidate","selectAudioOutput","iOSDefaultAudioOutputDevice","registerGlobals","defaults","setSdpConstraints","mozRTCSessionDescription","mozRTCIceCandidate","removeStream","allRemoteStreams","localStreams","iceTransports","candidates","turn","relay","stun","reflexive","host","params","iceTransportPolicy","iceCandidatePoolSize","bundlePolicy","rtcpMuxPolicy","optionalArgument","getReceivers","receiver","getLocalStreams","trickleIce","sdpMid","sdpMLineIndex","beforeAddingStream","oniceconnectionstatechange","onsignalingstatechange","iceGatheringState","signalingState","dontDuplicate","ontrack","onended","onremovestream","streamToShare","onremovetrack","removeTrack","remoteCandidate","addIceCandidate","processSdp","setRemoteDescription","isOfferer","setChannelEvents","binaryType","internalSend","ondatachannel","enableDisableVideoEncoding","rtcp","getParameters","encodings","setParameters","createOfferOrAnswer","_method","onSettingLocalDescription","nativeClose","CodecsHandler","preferCodec","codecName","splitLines","videoCodecNumbers","vp8LineNumber","vp9LineNumber","h264LineNumber","preferCodecHelper","codec","ignore","preferCodecNumber","newLine","videoCodecNumbersOriginal","newOrder","codecNumber","removeVPX","disableNACK","prioritize","codecMimeType","codecs","unshift","splice","removeNonG722","setBAS","bandwidth","findLine","sdpLines","prefix","findLineInRange","startLine","endLine","realEndLine","getCodecPayloadType","sdpLine","pattern","RegExp","setVideoBitrates","vp8Payload","xgoogle_min_bitrate","xgoogle_max_bitrate","vp8Index","rtxPayload","rtxIndex","rtxFmtpLineIndex","appendrtxNext","setOpusAttributes","opusPayload","opusIndex","opusFmtpLineIndex","appendOpusNext","stereo","maxaveragebitrate","maxplaybackrate","cbr","useinbandfec","usedtx","maxptime","forceStereoAudio","fmtpLineIndex","extractSdp","payload","setApplicationSpecificBandwidth","preferVP9","BandwidthHandler","icePair","iceRestrictions","iceProtocols","udp","tcp","IceServersHandler","getIceServers","setStreamType","mozMediaSource","mediaSource","getUserMediaHandler","mutex","localMediaConstraints","streaming","isBlackBerry","getUserMediaStream","getUserMediaError","getUserMediaFailure","hints","getUserMediaSuccess","successCB","failureCB","queueRequests","returnBack","shift","currentUserMediaRequestOptions","handleType","setHandlers","syncAction","mute","isSyncAction","isAudioMuted","unmute","graduallyIncreaseVolume","times","afterEach","setTimeoutInteval","numberOfTimes","startedTimes","last","isobject","receivingTime","latency","sendingTime","autoTranslateText","original","Translator","TranslateText","translatedText","initialText","packetSize","textToTransfer","sendText","textMessage","packets","chunkInterval","FileProgressBarHandler","handle","progressHelper","updateLabel","progress","title","filesContainer","insertBefore","firstChild","maxChunks","helper","currentPosition","TranslationHandler","language","googKey","newScript","sourceText","encodeURIComponent","randomNumber","translations","getElementsByTagName","getListOfLanguages","xhr","XMLHttpRequest","onreadystatechange","DONE","responseText","languages","useDefaultDevices","preventDuplicateOnStreamEvents","connectSocket","socketAutoReConnect","FirebaseConnection","PubNubConnection","joinRoom","mediaConstraints","getStreamInfoForAdmin","password","isRoomJoined","openRoom","identifier","publicRoomIdentifier","selectAll","beforeJoin","invokeGetUserMedia","applyConstraints","setStreamEndHandler","messageToDeliver","openOrJoin","isRoomExist","captureUserMedia","eventObject","rejoin","onReConnecting","sessionForced","nonScreenSession","onbeforeunload","arg1","dontCloseSocket","closeBeforeUnload","ignoreBeforeUnload","changeUserId","newUserId","facingMode","lastAudioDevice","lastVideoDevice","sourceId","VoiceActivityDetection","DtlsSrtpKeyAgreement","googImprovedWifiBwe","googScreencastMinBitrate","googIPv6","googDscp","googCpuUnderuseThreshold","googCpuOveruseThreshold","googSuspendBelowMinBitrate","googCpuOveruseDetection","closeEntireSession","videosContainer","user","gumCallback","streamCallback","videoConstraints","resetTrack","remoteUsersIds","isRemote","alreadySetEndHandler","invokeSelectFileDialog","selector","FileSelector","accept","selectSingleFile","poster","snapshot","getSocket","skipStreams","local","remote","setCustomSocketEvent","customEvent","getNumberOfBroadcastViewers","broadcastId","numberOfBroadcastViewers","dontWriteLogs","setCustomSocketHandler","customSocketHandler","_roomid","SSEConnection","dontAttachStream","updateExtraData","beforeRemovingStream","isChromeExtensionAvailable","checkIfChromeExtensionAvailable","isFirefoxExtensionAvailable","getChromeExtensionStatus","modifyScreenConstraints","screen_constraints","isLowBandwidth","opt","getExtraData","autoOpenOrJoin","resetScreen","setPassword","errors","ROOM_NOT_AVAILABLE","INVALID_PASSWORD","USERID_NOT_AVAILABLE","ROOM_PERMISSION_DENIED","ROOM_FULL","DID_NOT_JOIN_ANY_ROOM","INVALID_SOCKET","PUBLIC_IDENTIFIER_MISSING","INVALID_ADMIN_CREDENTIAL","MediaStreamAudioSourceNode","AnalyserNode","ScriptProcessorNode","analyser","createAnalyser","processor","smoothingTimeConstant","fftSize","sum","frequencyBinCount","getByteFrequencyData","___CSS_LOADER_EXPORT___","__esModule","locals"],"sourceRoot":""}