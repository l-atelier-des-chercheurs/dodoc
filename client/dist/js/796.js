(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[796],{39461:function(t,e,a){"use strict";a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.title||t.$t("export")},on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"_cont"},[a("div",{staticClass:"u-spacingBottom"},[t._t("default")],2),t.enable_options?a("div",[a("div",{staticClass:"u-sameRow"},[a("a",{staticClass:"u-buttonLink",attrs:{disabled:!t.export_href,download:t.export_name,href:t.export_href,target:"_blank"}},[t._v(" "+t._s(t.$t("download"))+" ")]),a("button",{staticClass:"u-button u-button_red",attrs:{type:"button"},on:{click:t.saveToProject}},[a("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[a("path",{staticStyle:{fill:"var(--c-rouge)"},attrs:{d:"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z"}}),a("g",{staticStyle:{fill:"var(--c-orange)"}},[a("path",{attrs:{d:"m42 42h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m73.2 42h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m104.4 42h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m42 73.5h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m73.2 73.5h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m104.4 73.5h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m42 105h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m73.2 105h21.6v21h-21.6z"}}),a("path",{attrs:{d:"m104.4 105h21.6v21h-21.6z"}})])]),t._v(" "+t._s(t.$t("save_to_project"))+" ")])])]):t._e(),t.finished_saving_to_project?a("div",{staticClass:"_saveNotice"},[t._v(" "+t._s(t.$t("media_was_saved_to_project"))+" ")]):t._e()])])},o=[],s={props:{title:String,export_name:{type:String,default:"file"},export_blob:[Boolean,Blob],export_href:String,project_path:String,enable_options:{type:Boolean,default:!0}},components:{},data(){return{finished_saving_to_project:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async saveToProject(){if(this.export_blob){const t={$origin:"make"};this.connected_as?.$path&&(t.$authors=[this.connected_as.$path]),await this.$api.uploadFile({path:this.project_path,filename:this.export_name,file:this.export_blob,additional_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))}this.finished_saving_to_project=!0,setTimeout((()=>{this.$emit("close")}),3e3)}}},n=s,r=(a(65258),a(1001)),l=(0,r.Z)(n,i,o,!1,null,"1e9fab52",null),c=l.exports},4796:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return b}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_montageModules"},[a("transition-group",{staticClass:"_listOfModules",attrs:{tag:"div",name:"StoryModules",appear:"",duration:700}},[t._l(t.section_modules_list,(function(e,i){return[a("div",{key:"mc_"+i,staticClass:"_spacer"},[a("ModuleCreator",{attrs:{publication_path:t.make.$path,types_available:["capture","import"],context:"montage"},on:{addModules:function(e){var a=e.meta_filenames;return t.insertModules({meta_filenames:a,index:i})}}})],1),a("MontageModule",{key:e.$path,attrs:{index:i+1,makemodule:e,module_position:1===t.section_modules_list.length?"alone":0===i?"first":i===t.section_modules_list.length-1?"last":"inbetween",default_image_duration:t.default_image_duration},on:{moveUp:function(a){return t.moveModuleTo({path:e.$path,new_position:i-1})},moveDown:function(a){return t.moveModuleTo({path:e.$path,new_position:i+1})},remove:function(a){return t.removeModule(e.$path)}}})]}))],2),a("div",{staticClass:"_lastModule"},[a("ModuleCreator",{attrs:{publication_path:t.make.$path,start_collapsed:!1,types_available:["capture","import"],context:"montage"},on:{addModules:t.addModules}})],1),a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.export_is_available?a("div",{staticClass:"_bottomRow"},[a("div",{staticClass:"_equationIcon"},[a("b-icon",{attrs:{icon:"chevron-double-down"}})],1),a("div",{},[a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){t.show_save_export_modal=!0}}},[a("b-icon",{attrs:{icon:"check"}}),t._v(" "+t._s(t.$t("create"))+" ")],1)])]):t._e()]),t.show_save_export_modal?a("ExportSaveMakeModal",{attrs:{title:t.$t("export_montage"),export_name:t.export_name,export_href:t.export_href,enable_options:!1!==t.created_video},on:{close:function(e){t.show_save_export_modal=!1}}},[t.is_exporting?a("div",{key:"loader",staticClass:"_spinner"},[a("LoaderSpinner")],1):a("div",[t.created_video?a("div",[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.cancelExport}},[a("b-icon",{attrs:{icon:"arrow-left-short"}}),t._v(" "+t._s(t.$t("back"))+" ")],1),a("br"),a("MediaContent",{staticClass:"_preview",attrs:{file:t.created_video,resolution:1600,context:"full"}})],1):a("div",[a("SelectField2",{attrs:{value:t.resolution_preset_picked,options:t.presets,can_edit:!0,hide_validation:!0},on:{change:function(e){t.resolution_preset_picked=e}}}),a("br"),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:t.renderMontage}},[a("b-icon",{attrs:{icon:"check"}}),t._v(" "+t._s(t.$t("create"))+" ")],1)],1)])]):t._e()],1)},o=[],s=(a(70560),a(92176),a(7961),a(61206)),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_montageModule"},[a("div",{staticClass:"_line"}),a("div",{staticClass:"_index"},[a("div",{staticClass:"_btns"},[a("button",{staticClass:"u-button u-button_icon",attrs:{type:"button",disabled:"alone"===t.module_position||"first"===t.module_position},on:{click:function(e){return t.$emit("moveUp")}}},[a("b-icon",{attrs:{icon:"chevron-up"}})],1),a("button",{staticClass:"u-button u-button_icon",attrs:{type:"button",disabled:"alone"===t.module_position||"last"===t.module_position},on:{click:function(e){return t.$emit("moveDown")}}},[a("b-icon",{attrs:{icon:"chevron-down"}})],1)]),a("span",{staticClass:"_num"},[t._v(" "+t._s(t.index)+" ")])]),a("div",{staticClass:"_preview"},[a("div",{staticClass:"_topRow"},[a("div",{staticClass:"u-label"},[t.first_media?[t._v(" "+t._s(t.$t(t.first_media.$type))+" "),t.first_media_duration?[t._v("/ "+t._s(t.first_media_duration))]:t._e()]:t._e(),a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.removeModule}},[a("b-icon",{attrs:{icon:"trash"}})],1)],2),a("div",{},[a("span",{staticClass:"u-switch u-switch-xs"},[a("input",{staticClass:"switch",attrs:{id:"transition_in_"+t.makemodule.$path,type:"checkbox"},domProps:{checked:"fade"===t.makemodule.transition_in},on:{change:function(e){return t.toggleTransition("transition_in")}}}),a("label",{staticClass:"u-label",attrs:{for:"transition_in_"+t.makemodule.$path}},[t._v(t._s(t.$t("transition_fade")))])])])]),t.first_media?["text"!==t.first_media.$type?a("MediaContent",{attrs:{file:t.first_media,resolution:1600,context:"full",show_fs_button:!0}}):a("CollaborativeEditor2",{ref:"textBloc",attrs:{path:t.first_media.$path,content:t.first_media.$content,line_selected:!1,can_edit:!0},on:{lineClicked:function(e){return t.$emit("lineClicked",e)},contentIsEdited:function(e){return t.$emit("contentIsEdited",e)},contentIsNotEdited:function(e){return t.$emit("contentIsNotEdited",e)}}}),"image"===t.first_media.$type?a("div",{staticClass:"_imageDurationPicker"},[a("NumberInput",{attrs:{value:t.makemodule.image_duration||t.default_image_duration,suffix:t.$t("seconds"),size:"medium",min:0,max:3600},on:{save:function(e){return t.updateMakemodule({image_duration:e})}}})],1):t._e(),"last"===t.module_position?a("div",{staticClass:"_transitionPicker"},[a("span",{staticClass:"u-switch u-switch-xs"},[a("input",{staticClass:"switch",attrs:{id:"transition_out_"+t.makemodule.$path,type:"checkbox"},domProps:{checked:"fade"===t.makemodule.transition_out},on:{change:function(e){return t.toggleTransition("transition_out")}}}),a("label",{staticClass:"u-label",attrs:{for:"transition_out_"+t.makemodule.$path}},[t._v(t._s(t.$t("transition_fade")))])])]):t._e()]:t._e()],2)])},r=[],l={props:{makemodule:Object,index:Number,module_position:String,default_image_duration:Number},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{first_media(){return this.firstMedia(this.makemodule)},first_media_duration(){return this.displayDuration({media:this.first_media})}},methods:{toggleTransition(t){"fade"===this.makemodule[t]?this.updateMakemodule({[t]:"none"}):this.updateMakemodule({[t]:"fade"})},async updateMakemodule(t){await this.$api.updateMeta({path:this.makemodule.$path,new_meta:t})},async removeModule(){await this.$api.deleteItem({path:this.makemodule.$path}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t})),this.$emit("remove")}}},c=l,d=(a(29344),a(1001)),u=(0,d.Z)(c,n,r,!1,null,"df9236b8",null),_=u.exports,p=a(39461),m={props:{make:Object},components:{ModuleCreator:s.Z,MontageModule:_,ExportSaveMakeModal:p.Z},data(){return{show_save_export_modal:!1,is_exporting:!1,created_video:!1,export_href:void 0,default_image_duration:2,resolution_preset_picked:"high",presets:[{key:"vhigh",text:this.$t("very_high"),instructions:"1920 × 1080",width:1920,height:1080},{key:"high",text:this.$t("high"),instructions:"1280 × 720",width:1280,height:720},{key:"medium",text:this.$t("medium"),instructions:"640 × 480",width:640,height:480},{key:"low",text:this.$t("low"),instructions:"480 × 360",width:480,height:360},{key:"rough",text:"→"+this.$t("rough"),instructions:"360 × 240",width:360,height:240},{key:"custom",text:"↓"+this.$t("custom"),instructions:"512 × 512"}]}},async created(){this.sections&&0!==this.sections.length||await this.createSection2({publication:this.make,type:"section",group:"sections_list",title:"montage"})},mounted(){},beforeDestroy(){},watch:{show_save_export_modal(){this.show_save_export_modal||this.created_video&&(this.created_video=!1)}},computed:{export_name(){return"video_montage.mp4"},export_is_available(){return this.section_modules_list.length>1},montage(){return this.section_modules_list.reduce(((t,e)=>{const a=this.firstMedia(e);if(a){let i={path:this.makeMediaFilePath({$path:a.$path,$media_filename:a.$media_filename}),type:a.$type,transition_in:e.transition_in,transition_out:e.transition_out};"image"===a.$type&&(i.image_duration=e.image_duration||this.default_image_duration),t.push(i)}return t}),[])},sections(){return this.getSectionsWithProps({publication:this.make,group:"sections_list"})},first_section(){return this.sections.at(0)},section_modules_list(){return this.getModulesForSection({publication:this.make,section:this.first_section}).map((({_module:t})=>t))}},methods:{async addModules({meta_filenames:t}){await this.insertModuleMetaFilenamesToList2({publication:this.make,section:this.first_section,meta_filenames:t})},async insertModules({meta_filenames:t,index:e}){await this.insertModuleMetaFilenamesToList2({publication:this.make,section:this.first_section,index:e,meta_filenames:t})},async moveModuleTo({path:t,new_position:e}){await this.moveModuleTo2({publication:this.make,section:this.first_section,meta_filename:this.getFilename(t),new_position:e})},async duplicatePublicationMedia({source_module_path:t,copy_meta_filename:e}){const a=this.getFilename(t);await this.duplicatePublicationMedia2({publication:this.make,section:this.first_section,source_meta_filename:a,copy_meta_filename:e})},async removeModule(t){await this.removeModule2({publication:this.make,section:this.first_section,path:t})},async cancelExport(){this.$api.deleteItem({path:this.created_video.$path}),this.created_video=!1},async renderMontage(){this.is_exporting=!0,this.created_video=!1,this.export_href=void 0;const{width:t,height:e}=this.presets.find((t=>t.key===this.resolution_preset_picked)),a={$origin:"make"};this.connected_as?.$path&&(a.$authors=[this.connected_as.$path]);let i={recipe:this.make.type,suggested_file_name:this.make.type,montage:this.montage,output_width:t,output_height:e,additional_meta:a};const o=await this.$api.exportFolder({path:this.make.$path,instructions:i});this.$api.join({room:"task_"+o});const s=({task_id:t,message:e})=>{t===o&&(this.$eventHub.$off("task.ended",s),this.$api.leave({room:"task_"+o}),"completed"===e.event?(e.file,this.created_video=e.file,this.export_href=this.makeMediaFileURL({$path:this.created_video.$path,$media_filename:this.created_video.$media_filename})):"aborted"===e.event||"failed"===e.event&&e.info,this.is_exporting=!1)};this.$eventHub.$on("task.ended",s)}}},h=m,f=(a(26596),(0,d.Z)(h,i,o,!1,null,"19de392f",null)),b=f.exports},41078:function(t,e,a){"use strict";a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_mediaPicker"},[a("PickMediaFromProjects",{attrs:{title:"single"===t.select_mode?t.$t("pick_media"):t.$t("pick_medias"),path:t.current_project_path,select_mode:t.select_mode},on:{addMedias:function(e){return t.$emit("addMedias",e)},close:function(e){return t.$emit("close")}}})],1)},o=[],s={props:{publication_path:String,select_mode:{type:String,default:"multiple"}},components:{},data(){return{}},async created(){},beforeDestroy(){},watch:{},computed:{current_project_path(){const t=this.getParent(this.publication_path);return this.getParent(t)}},methods:{}},n=s,r=(a(20244),a(1001)),l=(0,r.Z)(n,i,o,!1,null,"32c4a41c",null),c=l.exports},61206:function(t,e,a){"use strict";a.d(e,{Z:function(){return k}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_moduleCreator",class:{"is--collapsed":!t.show_module_selector}},[a("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.show_module_selector||!t.start_collapsed?a("div",{staticClass:"_typePicker"},[t.types_available.includes("capture")?a("button",{staticClass:"u-button u-button_red",attrs:{type:"button"},on:{click:function(e){t.show_capture_modal=!0}}},[a("b-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{icon:"record-circle-fill"}}),t.show_labels?[t._v(t._s(t.$t("capture")))]:t._e()],2):t._e(),t.show_capture_modal?a("CaptureModal",{attrs:{path:t.project_path},on:{createMosaic:t.createMosaic,close:function(e){t.show_capture_modal=!1}}}):t._e(),t.types_available.includes("import")?a("button",{staticClass:"u-button u-button_orange",attrs:{type:"button"},on:{click:function(e){t.show_media_picker=!0}}},[a("b-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{icon:"image"}}),t.show_labels?[t._v(t._s(t.$t("import")))]:t._e()],2):t._e(),t.show_media_picker?a("MediaPicker",{attrs:{publication_path:t.publication_path,select_mode:t.select_mode},on:{addMedias:t.createMosaic,close:function(e){t.show_media_picker=!1}}}):t._e(),t.types_available.includes("write")?a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:t.createText}},[a("b-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{icon:"fonts"}}),t.show_labels?[t._v(t._s(t.$t("write")))]:t._e()],2):t._e(),t.types_available.includes("embed")?a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){t.show_link_picker=!0}}},[a("b-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{icon:"link"}}),t.show_labels?[t._v(t._s(t.$t("embed")))]:t._e()],2):t._e(),t.show_link_picker?a("LinkPicker",{on:{embed:t.createEmbed,close:function(e){t.show_link_picker=!1}}}):t._e(),t.types_available.includes("shapes")?t._l(t.shapes,(function(e){return a("button",{key:e.type,staticClass:"u-button u-button_bleumarine",attrs:{type:"button"},on:{click:function(a){return t.createCustomModule({module_type:e.type,addtl_meta:e.addtl_meta})}}},[a("b-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{icon:e.icon}}),t.show_labels?[t._v(t._s(t.$t(e.type)))]:t._e()],2)})):t._e(),t.start_collapsed?a("EditBtn",{key:"addmodule",attrs:{btn_type:"close",is_unfolded:!1},on:{click:function(e){t.show_module_selector=!1}}}):t._e()],2):t.start_collapsed&&!t.show_module_selector?a("EditBtn",{key:"addmodule",staticClass:"_addBtn",attrs:{btn_type:"add",is_unfolded:!1},on:{click:function(e){t.show_module_selector=!0}}}):t._e()],1),a("DropZone",{staticClass:"_dropZone",on:{mediaDropped:t.mediaDropped}})],1)},o=[],s=(a(70560),a(76801),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("capture"),size:"full"},on:{close:function(e){return t.$emit("close")}}},[a("CaptureView",{attrs:{path:t.path,selected_mode:t.selected_mode,stopmotion_slug:t.stopmotion_slug},on:{changeMode:function(e){t.selected_mode=e},openStopmotion:function(e){t.stopmotion_slug=e},insertMedia:t.insertMedia}})],1)}),n=[],r={props:{path:String},components:{CaptureView:()=>a.e(810).then(a.bind(a,5810))},data(){return{selected_mode:"photo",stopmotion_slug:void 0}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async insertMedia(t){const e=this.path+"/"+t,a=[e];this.$emit("createMosaic",{path_to_source_media_metas:a}),this.$emit("close")}}},l=r,c=a(1001),d=(0,c.Z)(l,s,n,!1,null,"1d65daa2",null),u=d.exports,_=a(41078),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"_linkPicker"},[a("div",{staticClass:"_urlBox"},[a("TextInput",{attrs:{label_str:t.$t("input_url"),instructions:t.$t("input_url_instr"),content:t.full_url,placeholder:"https://",required:!0,input_type:"url"},on:{"update:content":function(e){t.full_url=e},toggleValidity:function(e){return t.allow_save=e}}})],1),a("div",{staticClass:"u-instructions"},[t._v(" PeerTube, YouTube, Vimeo, etc. "+t._s(t.$t("for_example"))+"  "),t._l(["https://peertube.fr/w/wB6M6CHdfpWXpozVnqjbde","https://www.youtube.com/watch?v=Bn6zdyCAwJs","https://vimeo.com/447785086","https://observablehq.com/embed/@fil/bertin1953-glsl?cells=canvas"],(function(e,i){return a("button",{key:i,staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{innerHTML:t._s(e)},on:{click:function(a){t.full_url=e}}})}))],2),a("br"),a("div",{key:t.full_url},["any"===t.url_to_site.type?[a("iframe",{staticClass:"_siteIframe",attrs:{src:t.url_to_site.src,frameborder:"0"}})]:a("vue-plyr",[a("div",{staticClass:"plyr__video-embed"},[a("iframe",{attrs:{src:t.url_to_site.src,allowfullscreen:"",allowtransparency:"",allow:"autoplay; fullscreen",sandbox:"allow-same-origin allow-scripts allow-popups",frameborder:"0"}})])])],2),a("br"),t.full_url?a("div",{staticClass:"_selectBtn"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){return t.$emit("embed",t.full_url)}}},[t._v(" "+t._s(t.$t("embed"))+" ")])]):t._e()])])},m=[],h={props:{},components:{},data(){return{full_url:""}},async created(){},beforeDestroy(){},watch:{},computed:{url_to_site(){return!!this.full_url&&this.transformURL({url:this.full_url,autoplay:!1})}},methods:{}},f=h,b=(a(82356),(0,c.Z)(f,p,m,!1,null,"3b7f81aa",null)),v=b.exports,g={props:{publication_path:String,pre_addtl_meta:Object,post_addtl_meta:Object,select_mode:String,show_labels:{type:Boolean,default:!0},context:String,types_available:{type:Array,default:()=>["capture","import","write","embed","shapes"]},start_collapsed:{type:Boolean,default:!0}},components:{CaptureModal:u,MediaPicker:_.Z,LinkPicker:v},data(){return{show_capture_modal:!1,show_module_selector:!1,show_media_picker:!1,show_file_picker:!1,show_link_picker:!1,shapes:[{type:"ellipsis",icon:"circle-fill",addtl_meta:{background_color:"#1d327f"}},{type:"rectangle",icon:"square-fill",addtl_meta:{background_color:"#ffbe32"}},{type:"line",icon:"dash-lg",addtl_meta:{outline_width:1,outline_color:"#000000"}},{type:"arrow",icon:"arrow-right-square",addtl_meta:{outline_width:1,outline_color:"#000000"}}],is_saving:!1}},created(){},mounted(){},beforeDestroy(){},watch:{show_module_selector(){}},computed:{project_path(){return"link"===this.$root.publication_include_mode?this.getParent(this.getParent(this.publication_path)):this.publication_path}},methods:{async mediaDropped({path_to_source_media_metas:t}){this.createMosaic({path_to_source_media_metas:t})},async createMosaic({meta_filename:t,path_to_source_media_metas:e}){let a=[];if(t)a.push({meta_filename:t});else if(e)for(const i of e){const t=this.$root.publication_include_mode,e=await this.prepareMediaForPublication({path_to_source_media_meta:i,publication_path:this.publication_path,import_mode:t});a.push(e)}"page_by_page"===this.context&&(a=a.map((t=>(t.objectFit="contain",t)))),["page_by_page","montage"].includes(this.context)?await this.createMultipleModules({module_type:"mosaic",source_medias:a}):await this.createModule({module_type:"mosaic",source_medias:a}),this.show_media_picker=!1},async createEmbed(t){const e="url-"+ +new Date+".txt",{meta_filename:a}=await this.$api.uploadText({path:this.publication_path,filename:e,content:t,additional_meta:{$type:"url"}});this.createMosaic({meta_filename:a}),this.show_link_picker=!1},async createFiles({path_to_source_media_metas:t}){let e=[];t.map((t=>{const a=this.getFilename(t);e.push({meta_filename_in_project:a})})),await this.createModule({module_type:"files",source_medias:e}),this.show_file_picker=!1},async createCustomModule({module_type:t,addtl_meta:e}){await this.createModule({module_type:t,addtl_meta:e})},async createText(){const t="text-"+ +new Date+".txt",{meta_filename:e}=await this.$api.uploadText({path:this.publication_path,filename:t,content:""}),a=[{meta_filename:e}],i="page_by_page"===this.context?"text":"mosaic";await this.createModule({module_type:i,source_medias:a})},async createModule({module_type:t,source_medias:e=[],addtl_meta:a={}}){if(e.length>0){const t=this.getSourceMedia({source_media:e[0],folder_path:this.publication_path});t?.$location&&(a.location=t.$location)}const i=await this.createMetaForModule({module_type:t,source_medias:e,addtl_meta:a});return this.$emit("addModules",{meta_filenames:[i]}),this.show_module_selector=!1,i},async createMultipleModules({module_type:t,source_medias:e=[]}){let a=[];for(const i of e){const e=this.getSourceMedia({source_media:i,folder_path:this.publication_path});let o={};["page_by_page","montage"].includes(this.context)&&e?.$infos?.ratio&&(o.width?o.height=o.width*e.$infos.ratio:o.height=this.$root.default_new_module_width*e.$infos.ratio),e?.$location&&(o.location=e.$location);const s=await this.createMetaForModule({module_type:t,source_medias:[i],addtl_meta:o});a.push(s)}this.show_module_selector=!1,this.$emit("addModules",{meta_filenames:a})},async createMetaForModule({module_type:t,source_medias:e,addtl_meta:a}){let i={module_type:t,source_medias:e,requested_slug:"module"};this.pre_addtl_meta&&Object.assign(i,this.pre_addtl_meta),a&&Object.assign(i,a),this.post_addtl_meta&&Object.assign(i,this.post_addtl_meta);const{meta_filename:o}=await this.$api.uploadFile({path:this.publication_path,additional_meta:i}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}));return o}}},w=g,y=(a(92493),(0,c.Z)(w,i,o,!1,null,"2a09f90e",null)),k=y.exports},75179:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),s=a(23645),n=a.n(s),r=n()(o());r.push([t.id,"._linkPicker[data-v-3b7f81aa]{width:100%;margin:0 auto}._addMediaBtn[data-v-3b7f81aa]{text-align:center;padding:calc(var(--spacing)*1)}._selectBtn[data-v-3b7f81aa]{display:flex;place-items:center;justify-content:center;width:100%;gap:calc(var(--spacing)/1);background:#fff}iframe[data-v-3b7f81aa]{width:100%;aspect-ratio:4/3}",""]),e["default"]=r},68718:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),s=a(23645),n=a.n(s),r=n()(o());r.push([t.id,"._cont[data-v-1e9fab52]{position:relative}._saveNotice[data-v-1e9fab52]{position:absolute;inset:-2px;background:hsla(0,0%,100%,.95);display:flex;justify-content:center;align-items:center}",""]),e["default"]=r},87373:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),s=a(23645),n=a.n(s),r=n()(o());r.push([t.id,"._montageModules[data-v-19de392f]{padding:calc(var(--spacing)*1);max-width:680px;margin:0 auto;width:100%}._montageModules[data-v-19de392f]  ._moduleCreator{justify-content:center}._listOfModules[data-v-19de392f]{display:flex;flex-flow:column nowrap;justify-content:center}._lastModule[data-v-19de392f],._spacer[data-v-19de392f]{padding:calc(var(--spacing)*1)}._spacer[data-v-19de392f]{min-height:4rem;display:flex;align-items:center;justify-content:center;transition:all .2s linear}._spacer[data-v-19de392f]  ._moduleCreator{padding:calc(var(--spacing)/4);z-index:1;border-radius:0}._spacer[data-v-19de392f]  ._moduleCreator.is--collapsed{padding:0}._equationIcon[data-v-19de392f]{font-size:2em;line-height:1;margin:calc(var(--spacing)*2);color:#fff}._bottomRow[data-v-19de392f]{margin-top:calc(var(--spacing)*2);text-align:center}",""]),e["default"]=r},41825:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),s=a(23645),n=a.n(s),r=n()(o());r.push([t.id,"._montageModule[data-v-df9236b8]{position:relative;max-width:400px;display:flex;flex-flow:row nowrap;align-items:flex-start;width:100%;margin:0 auto;gap:calc(var(--spacing)/1);color:#fff}._montageModule:last-child ._line[data-v-df9236b8]{height:100%}._line[data-v-df9236b8]{position:absolute;background:#fff;width:4px;height:calc(100% + 3rem);margin-left:3.1rem;margin-top:2px;z-index:0;top:0;border-radius:4px}._index[data-v-df9236b8]{position:sticky;top:0;font-family:Fira Mono;text-transform:uppercase;line-height:1;font-weight:600;z-index:1;background-color:var(--c-bleumarine);margin-top:-9px;display:flex;flex-flow:row nowrap;align-items:center}._index ._btns[data-v-df9236b8]{display:flex;flex-flow:column nowrap}._index ._btns>.u-button[data-v-df9236b8]{font-size:140%}._index ._num[data-v-df9236b8]{font-size:5rem}._index>.u-button[data-v-df9236b8]{font-size:50%}._lastModule[data-v-df9236b8]{margin-top:calc(var(--spacing)*2)}._preview[data-v-df9236b8]{flex:1 1 auto;background:#fff;padding:calc(var(--spacing)/2);border-radius:4px;color:var(--c-noir)}._preview[data-v-df9236b8]  ._mediaContent--image{max-width:none;width:100%}._topRow[data-v-df9236b8]{display:flex;flex-flow:row wrap;justify-content:space-between}._imageDurationPicker[data-v-df9236b8]{max-width:18ch;margin:calc(var(--spacing)/2) auto}._transitionPicker[data-v-df9236b8]{text-align:center;margin:calc(var(--spacing)/2) auto}",""]),e["default"]=r},99526:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),s=a(23645),n=a.n(s),r=n()(o());r.push([t.id,"._mediaPicker[data-v-32c4a41c]{position:absolute}",""]),e["default"]=r},90155:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),s=a(23645),n=a.n(s),r=n()(o());r.push([t.id,"._moduleCreator[data-v-2a09f90e]{position:relative;display:flex;justify-content:flex-start;align-items:center;width:100%;pointer-events:none;gap:calc(var(--spacing)/4);padding:calc(var(--spacing)/2) 0;transition:all .5s cubic-bezier(.19,1,.22,1);--icon-size:1.2rem}._moduleCreator.is--collapsed[data-v-2a09f90e]{padding:0}._moduleCreator>*[data-v-2a09f90e]{pointer-events:auto}._typePicker[data-v-2a09f90e]{display:flex;flex-flow:row wrap;justify-content:flex-start;align-items:center;gap:calc(var(--spacing)/4)}._dropNotice[data-v-2a09f90e]{pointer-events:none}._showModuleSelector[data-v-2a09f90e]{transition:all .4s cubic-bezier(.19,1,.22,1)}._addBtn[data-v-2a09f90e]{margin-left:-24px}",""]),e["default"]=r},82356:function(t,e,a){var i=a(75179);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(31982).Z;o("15886648",i,!0,{sourceMap:!1,shadowMode:!1})},65258:function(t,e,a){var i=a(68718);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(31982).Z;o("eabadb52",i,!0,{sourceMap:!1,shadowMode:!1})},26596:function(t,e,a){var i=a(87373);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(31982).Z;o("80adf67e",i,!0,{sourceMap:!1,shadowMode:!1})},29344:function(t,e,a){var i=a(41825);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(31982).Z;o("877693a8",i,!0,{sourceMap:!1,shadowMode:!1})},20244:function(t,e,a){var i=a(99526);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(31982).Z;o("54ebc155",i,!0,{sourceMap:!1,shadowMode:!1})},92493:function(t,e,a){var i=a(90155);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(31982).Z;o("3f985116",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=796.js.map