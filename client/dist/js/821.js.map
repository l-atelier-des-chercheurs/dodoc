{"version":3,"file":"js/821.js","mappings":"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","sources":["webpack://app/./src/components/makes/ExportSaveMakeModal.vue?7e84","webpack://app/src/components/makes/ExportSaveMakeModal.vue","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?24c4","webpack://app/./src/components/makes/ExportSaveMakeModal.vue","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?5ed5","webpack://app/src/components/makes/MixAudioAndImageOrVideo.vue","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?abef","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?0d96","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?e46f","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?4c5e","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?9ddb"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BaseModal2',{attrs:{\"title\":_vm.title || _vm.$t('export')},on:{\"close\":function($event){return _vm.$emit('close')}}},[_c('div',{staticClass:\"_cont\"},[_c('div',{staticClass:\"u-spacingBottom\"},[_vm._t(\"default\")],2),(_vm.enable_options)?_c('div',[_c('div',{staticClass:\"u-sameRow\"},[_c('a',{staticClass:\"u-buttonLink\",attrs:{\"disabled\":!_vm.export_href,\"download\":_vm.export_name,\"href\":_vm.export_href,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"download\"))+\" \")]),_c('button',{staticClass:\"u-button u-button_red\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.saveToProject}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 168 168\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 168 168\",\"xml:space\":\"preserve\"}},[_c('path',{staticStyle:{\"fill\":\"var(--c-rouge)\"},attrs:{\"d\":\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z\"}}),_c('g',{staticStyle:{\"fill\":\"var(--c-orange)\"}},[_c('path',{attrs:{\"d\":\"m42 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m42 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m42 105h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 105h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 105h21.6v21h-21.6z\"}})])]),_vm._v(\" \"+_vm._s(_vm.$t(\"save_to_project\"))+\" \")])])]):_vm._e(),(_vm.finished_saving_to_project)?_c('div',{staticClass:\"_saveNotice\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"media_was_saved_to_project\"))+\" \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <BaseModal2 :title=\"title || $t('export')\" @close=\"$emit('close')\">\n    <div class=\"_cont\">\n      <div class=\"u-spacingBottom\">\n        <slot />\n      </div>\n\n      <div v-if=\"enable_options\">\n        <div class=\"u-sameRow\">\n          <a\n            :disabled=\"!export_href\"\n            :download=\"export_name\"\n            :href=\"export_href\"\n            target=\"_blank\"\n            class=\"u-buttonLink\"\n          >\n            {{ $t(\"download\") }}\n          </a>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_red\"\n            @click=\"saveToProject\"\n          >\n            <svg\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              x=\"0px\"\n              y=\"0px\"\n              viewBox=\"0 0 168 168\"\n              style=\"enable-background: new 0 0 168 168\"\n              xml:space=\"preserve\"\n            >\n              <path\n                style=\"fill: var(--c-rouge)\"\n                d=\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z\"\n              />\n              <g style=\"fill: var(--c-orange)\">\n                <path d=\"m42 42h21.6v21h-21.6z\" />\n                <path d=\"m73.2 42h21.6v21h-21.6z\" />\n                <path d=\"m104.4 42h21.6v21h-21.6z\" />\n                <path d=\"m42 73.5h21.6v21h-21.6z\" />\n                <path d=\"m73.2 73.5h21.6v21h-21.6z\" />\n                <path d=\"m104.4 73.5h21.6v21h-21.6z\" />\n                <path d=\"m42 105h21.6v21h-21.6z\" />\n                <path d=\"m73.2 105h21.6v21h-21.6z\" />\n                <path d=\"m104.4 105h21.6v21h-21.6z\" />\n              </g>\n            </svg>\n            {{ $t(\"save_to_project\") }}\n          </button>\n        </div>\n      </div>\n      <div class=\"_saveNotice\" v-if=\"finished_saving_to_project\">\n        {{ $t(\"media_was_saved_to_project\") }}\n      </div>\n    </div>\n  </BaseModal2>\n</template>\n<script>\nexport default {\n  props: {\n    title: String,\n    export_name: {\n      type: String,\n      default: \"file\",\n    },\n    export_blob: [Boolean, Blob],\n    export_href: String,\n    project_path: String,\n    enable_options: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  components: {},\n  data() {\n    return {\n      finished_saving_to_project: false,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {\n    async saveToProject() {\n      if (this.export_blob) {\n        const additional_meta = {};\n\n        additional_meta.$origin = \"make\";\n        if (this.connected_as?.$path)\n          additional_meta.$authors = [this.connected_as.$path];\n\n        await this.$api\n          .uploadFile({\n            path: this.project_path,\n            filename: this.export_name,\n            file: this.export_blob,\n            additional_meta,\n          })\n          .catch((err) => {\n            this.$alertify.delay(4000).error(err);\n            throw err;\n          });\n      }\n\n      this.finished_saving_to_project = true;\n      setTimeout(() => {\n        this.$emit(\"close\");\n      }, 3000);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._cont {\n  position: relative;\n}\n._saveNotice {\n  position: absolute;\n  inset: -2px;\n  background: rgba(255, 255, 255, 0.95);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportSaveMakeModal.vue?vue&type=template&id=1e9fab52&scoped=true&\"\nimport script from \"./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExportSaveMakeModal.vue?vue&type=style&index=0&id=1e9fab52&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e9fab52\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_mixAudioAndImage\"},[_c('div',{staticClass:\"_topRow\"},[_c('div',{},[(_vm.make.type === 'mix_audio_and_image')?_c('SingleBaseMediaPicker',{attrs:{\"title\":_vm.$t('pick_image'),\"context\":'full',\"field_name\":'base_image_filename',\"content\":_vm.make.base_image_filename,\"path\":_vm.make.$path,\"media_type_to_pick\":'image'}}):(_vm.make.type === 'mix_audio_and_video')?_c('SingleBaseMediaPicker',{attrs:{\"title\":_vm.$t('pick_video'),\"context\":'full',\"field_name\":'base_video_filename',\"content\":_vm.make.base_video_filename,\"path\":_vm.make.$path,\"media_type_to_pick\":'video'}}):_vm._e()],1),_c('div',{staticClass:\"_equationIcon\"},[_c('b-icon',{attrs:{\"icon\":\"plus-circle-dotted\"}})],1),_c('div',{},[_c('SingleBaseMediaPicker',{attrs:{\"title\":_vm.$t('pick_audio'),\"context\":'full',\"field_name\":'base_audio_filename',\"content\":_vm.make.base_audio_filename,\"path\":_vm.make.$path,\"media_type_to_pick\":'audio'}})],1)]),_c('transition',{attrs:{\"name\":\"pagechange\",\"mode\":\"out-in\"}},[(_vm.export_is_available)?_c('div',{staticClass:\"_bottomRow\"},[_c('div',{staticClass:\"_equationIcon\"},[_c('b-icon',{attrs:{\"icon\":\"chevron-double-down\"}})],1),_c('div',{},[_c('button',{staticClass:\"u-button u-button_bleuvert\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_save_export_modal = true}}},[_c('b-icon',{attrs:{\"icon\":\"check\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"create\"))+\" \")],1)])]):_vm._e()]),(_vm.show_save_export_modal)?_c('ExportSaveMakeModal',{attrs:{\"title\":_vm.$t('export_mix'),\"export_name\":_vm.export_name,\"export_href\":_vm.export_href},on:{\"close\":function($event){_vm.show_save_export_modal = false}}},[(_vm.is_exporting)?_c('div',{key:\"loader\",staticClass:\"_spinner\"},[_c('LoaderSpinner')],1):_c('div',[_c('MediaContent',{staticClass:\"_preview\",attrs:{\"file\":_vm.created_video,\"resolution\":1600,\"context\":'full'}})],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_mixAudioAndImage\">\n    <div class=\"_topRow\">\n      <div class=\"\">\n        <SingleBaseMediaPicker\n          v-if=\"make.type === 'mix_audio_and_image'\"\n          :title=\"$t('pick_image')\"\n          :context=\"'full'\"\n          :field_name=\"'base_image_filename'\"\n          :content=\"make.base_image_filename\"\n          :path=\"make.$path\"\n          :media_type_to_pick=\"'image'\"\n        />\n        <SingleBaseMediaPicker\n          v-else-if=\"make.type === 'mix_audio_and_video'\"\n          :title=\"$t('pick_video')\"\n          :context=\"'full'\"\n          :field_name=\"'base_video_filename'\"\n          :content=\"make.base_video_filename\"\n          :path=\"make.$path\"\n          :media_type_to_pick=\"'video'\"\n        />\n      </div>\n      <div class=\"_equationIcon\">\n        <b-icon icon=\"plus-circle-dotted\" />\n      </div>\n\n      <div class=\"\">\n        <SingleBaseMediaPicker\n          :title=\"$t('pick_audio')\"\n          :context=\"'full'\"\n          :field_name=\"'base_audio_filename'\"\n          :content=\"make.base_audio_filename\"\n          :path=\"make.$path\"\n          :media_type_to_pick=\"'audio'\"\n        />\n      </div>\n    </div>\n    <transition name=\"pagechange\" mode=\"out-in\">\n      <div class=\"_bottomRow\" v-if=\"export_is_available\">\n        <div class=\"_equationIcon\">\n          <b-icon icon=\"chevron-double-down\" />\n        </div>\n        <div class=\"\">\n          <button\n            type=\"button\"\n            class=\"u-button u-button_bleuvert\"\n            @click=\"show_save_export_modal = true\"\n          >\n            <b-icon icon=\"check\" />\n            {{ $t(\"create\") }}\n          </button>\n        </div>\n      </div>\n    </transition>\n\n    <ExportSaveMakeModal\n      v-if=\"show_save_export_modal\"\n      :title=\"$t('export_mix')\"\n      :export_name=\"export_name\"\n      :export_href=\"export_href\"\n      @close=\"show_save_export_modal = false\"\n    >\n      <!-- <p class=\"u-spacingBottom\">\n        {{ $t(\"duration\") }} – {{ export_duration }}\n      </p> -->\n      <div class=\"_spinner\" v-if=\"is_exporting\" key=\"loader\">\n        <LoaderSpinner />\n      </div>\n      <div v-else>\n        <MediaContent\n          class=\"_preview\"\n          :file=\"created_video\"\n          :resolution=\"1600\"\n          :context=\"'full'\"\n        />\n      </div>\n    </ExportSaveMakeModal>\n  </div>\n</template>\n<script>\nimport SingleBaseMediaPicker from \"@/components/makes/SingleBaseMediaPicker.vue\"; // eslint-disable-line\nimport ExportSaveMakeModal from \"@/components/makes/ExportSaveMakeModal.vue\";\n\nexport default {\n  props: {\n    make: Object,\n  },\n  components: { SingleBaseMediaPicker, ExportSaveMakeModal },\n  data() {\n    return {\n      show_save_export_modal: false,\n      is_exporting: false,\n      created_video: false,\n      export_href: undefined,\n    };\n  },\n\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {\n    show_save_export_modal() {\n      if (this.show_save_export_modal) this.renderAudioImageOrVideo();\n    },\n  },\n  computed: {\n    export_name() {\n      if (this.make.type === \"mix_audio_and_image\")\n        return \"audio_image_mix.mp4\";\n      if (this.make.type === \"mix_audio_and_video\")\n        return \"audio_video_mix.mp4\";\n      return \"untitled\";\n    },\n    export_is_available() {\n      if (this.make.type === \"mix_audio_and_image\")\n        return this.make.base_audio_filename && this.make.base_image_filename;\n      if (this.make.type === \"mix_audio_and_video\")\n        return this.make.base_audio_filename && this.make.base_video_filename;\n      return false;\n    },\n  },\n  methods: {\n    async renderAudioImageOrVideo() {\n      this.is_exporting = true;\n      this.created_video = false;\n      this.export_href = undefined;\n\n      const base_audio = this.getSourceMedia({\n        source_media: {\n          meta_filename_in_project: this.make.base_audio_filename,\n        },\n        folder_path: this.make.$path,\n      });\n\n      const additional_meta = {};\n      additional_meta.$origin = \"make\";\n      if (this.connected_as?.$path)\n        additional_meta.$authors = [this.connected_as.$path];\n\n      let instructions = {\n        recipe: this.make.type,\n        suggested_file_name: this.make.type,\n        base_audio_path: this.makeMediaFilePath({\n          $path: base_audio.$path,\n          $media_filename: base_audio.$media_filename,\n        }),\n        output_width: 1280,\n        output_height: 720,\n        additional_meta,\n      };\n\n      if (this.make.type === \"mix_audio_and_image\") {\n        const base_image = this.getSourceMedia({\n          source_media: {\n            meta_filename_in_project: this.make.base_image_filename,\n          },\n          folder_path: this.make.$path,\n        });\n        instructions.base_image_path = this.makeMediaFilePath({\n          $path: base_image.$path,\n          $media_filename: base_image.$media_filename,\n        });\n      } else if (this.make.type === \"mix_audio_and_video\") {\n        const base_video = this.getSourceMedia({\n          source_media: {\n            meta_filename_in_project: this.make.base_video_filename,\n          },\n          folder_path: this.make.$path,\n        });\n\n        const duration = this.getMaxDuration(\n          base_video.$infos?.duration,\n          base_audio.$infos?.duration\n        );\n        instructions.duration = duration;\n        instructions.base_video_path = this.makeMediaFilePath({\n          $path: base_video.$path,\n          $media_filename: base_video.$media_filename,\n        });\n      }\n\n      const current_task_id = await this.$api.exportFolder({\n        path: this.make.$path,\n        instructions,\n      });\n      this.$api.join({ room: \"task_\" + current_task_id });\n\n      const checkIfEnded = ({ task_id, message }) => {\n        if (task_id !== current_task_id) return;\n        this.$eventHub.$off(\"task.ended\", checkIfEnded);\n        this.$api.leave({ room: \"task_\" + current_task_id });\n\n        if (message.event === \"completed\") {\n          this.created_video = message.file;\n          this.export_href = this.makeMediaFileURL({\n            $path: this.created_video.$path,\n            $media_filename: this.created_video.$media_filename,\n          });\n        } else if (message.event === \"aborted\") {\n          //\n        } else if (message.event === \"failed\") {\n          message.info;\n        }\n\n        this.is_exporting = false;\n      };\n      this.$eventHub.$on(\"task.ended\", checkIfEnded);\n    },\n    getMaxDuration() {\n      return Array.prototype.slice.call(arguments).reduce((acc, val) => {\n        if (typeof val === \"number\" && val > acc) acc = val;\n        return acc;\n      }, 0);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._mixAudioAndImage {\n  padding: calc(var(--spacing) / 1) 0;\n\n  > * {\n    // background: white;\n  }\n}\n\n._topRow {\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  align-items: center;\n  gap: calc(var(--spacing) * 2);\n}\n\n._equationIcon {\n  font-size: 2em;\n  line-height: 1;\n  margin: calc(var(--spacing) * 2);\n  color: white;\n}\n\n._bottomRow {\n  margin-top: calc(var(--spacing) * 2);\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MixAudioAndImageOrVideo.vue?vue&type=template&id=198705a0&scoped=true&\"\nimport script from \"./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MixAudioAndImageOrVideo.vue?vue&type=style&index=0&id=198705a0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"198705a0\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._cont[data-v-1e9fab52]{position:relative}._saveNotice[data-v-1e9fab52]{position:absolute;inset:-2px;background:hsla(0,0%,100%,.95);display:flex;justify-content:center;align-items:center}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._mixAudioAndImage[data-v-198705a0]{padding:calc(var(--spacing)/1) 0}._topRow[data-v-198705a0]{display:flex;flex-flow:row wrap;justify-content:center;align-items:center;gap:calc(var(--spacing)*2)}._equationIcon[data-v-198705a0]{font-size:2em;line-height:1;margin:calc(var(--spacing)*2);color:#fff}._bottomRow[data-v-198705a0]{margin-top:calc(var(--spacing)*2);text-align:center}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=style&index=0&id=1e9fab52&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1a4e1657\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MixAudioAndImageOrVideo.vue?vue&type=style&index=0&id=198705a0&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0516adda\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","$t","on","$event","$emit","staticClass","_t","export_href","export_name","_v","_s","saveToProject","staticStyle","_e","staticRenderFns","props","String","type","default","export_blob","Boolean","Blob","project_path","enable_options","components","data","finished_saving_to_project","created","mounted","beforeDestroy","watch","computed","methods","additional_meta","connected_as","$path","$authors","$api","uploadFile","path","filename","file","catch","err","$alertify","delay","error","setTimeout","component","make","base_image_filename","base_video_filename","base_audio_filename","show_save_export_modal","key","created_video","Object","SingleBaseMediaPicker","ExportSaveMakeModal","is_exporting","undefined","renderAudioImageOrVideo","export_is_available","base_audio","getSourceMedia","source_media","meta_filename_in_project","folder_path","instructions","recipe","suggested_file_name","base_audio_path","makeMediaFilePath","$media_filename","output_width","output_height","base_image","base_image_path","base_video","duration","getMaxDuration","$infos","base_video_path","current_task_id","exportFolder","join","room","checkIfEnded","task_id","message","$eventHub","$off","leave","event","makeMediaFileURL","info","$on","Array","prototype","slice","call","arguments","reduce","acc","val","___CSS_LOADER_EXPORT___","push","module","id","content","__esModule","locals","exports","add"],"sourceRoot":""}