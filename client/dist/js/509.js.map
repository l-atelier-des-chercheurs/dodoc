{"version":3,"file":"js/509.js","mappings":"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","sources":["webpack://app/./src/components/makes/ExportSaveMakeModal.vue?892a","webpack://app/src/components/makes/ExportSaveMakeModal.vue","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?77e1","webpack://app/./src/components/makes/ExportSaveMakeModal.vue","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?134c","webpack://app/src/components/makes/MixAudioAndImageOrVideo.vue","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?e531","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?0f63","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?5d4f","webpack://app/./src/components/makes/ExportSaveMakeModal.vue?4086","webpack://app/./src/components/makes/MixAudioAndImageOrVideo.vue?28fc"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BaseModal2',{attrs:{\"title\":_vm.title || _vm.$t('export')},on:{\"close\":function($event){return _vm.$emit('close')}}},[_c('div',{staticClass:\"_cont\"},[_c('div',{staticClass:\"u-spacingBottom\"},[_vm._t(\"default\")],2),(_vm.enable_options)?_c('div',[_c('div',{staticClass:\"u-sameRow\"},[_c('a',{staticClass:\"u-buttonLink\",attrs:{\"disabled\":!_vm.export_href,\"download\":_vm.export_name,\"href\":_vm.export_href,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"download\"))+\" \")]),_c('button',{staticClass:\"u-button u-button_red\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.saveToProject}},[_c('svg',{staticStyle:{\"enable-background\":\"new 0 0 168 168\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 168 168\",\"xml:space\":\"preserve\"}},[_c('path',{staticStyle:{\"fill\":\"var(--c-rouge)\"},attrs:{\"d\":\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z\"}}),_c('g',{staticStyle:{\"fill\":\"var(--c-orange)\"}},[_c('path',{attrs:{\"d\":\"m42 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 42h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m42 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 73.5h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m42 105h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m73.2 105h21.6v21h-21.6z\"}}),_c('path',{attrs:{\"d\":\"m104.4 105h21.6v21h-21.6z\"}})])]),_vm._v(\" \"+_vm._s(_vm.$t(\"save_to_project\"))+\" \")])])]):_vm._e(),(_vm.finished_saving_to_project)?_c('div',{staticClass:\"_saveNotice\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"media_was_saved\"))+\" \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <BaseModal2 :title=\"title || $t('export')\" @close=\"$emit('close')\">\n    <div class=\"_cont\">\n      <div class=\"u-spacingBottom\">\n        <slot />\n      </div>\n\n      <div v-if=\"enable_options\">\n        <div class=\"u-sameRow\">\n          <a\n            :disabled=\"!export_href\"\n            :download=\"export_name\"\n            :href=\"export_href\"\n            target=\"_blank\"\n            class=\"u-buttonLink\"\n          >\n            {{ $t(\"download\") }}\n          </a>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_red\"\n            @click=\"saveToProject\"\n          >\n            <svg\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              x=\"0px\"\n              y=\"0px\"\n              viewBox=\"0 0 168 168\"\n              style=\"enable-background: new 0 0 168 168\"\n              xml:space=\"preserve\"\n            >\n              <path\n                style=\"fill: var(--c-rouge)\"\n                d=\"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z\"\n              />\n              <g style=\"fill: var(--c-orange)\">\n                <path d=\"m42 42h21.6v21h-21.6z\" />\n                <path d=\"m73.2 42h21.6v21h-21.6z\" />\n                <path d=\"m104.4 42h21.6v21h-21.6z\" />\n                <path d=\"m42 73.5h21.6v21h-21.6z\" />\n                <path d=\"m73.2 73.5h21.6v21h-21.6z\" />\n                <path d=\"m104.4 73.5h21.6v21h-21.6z\" />\n                <path d=\"m42 105h21.6v21h-21.6z\" />\n                <path d=\"m73.2 105h21.6v21h-21.6z\" />\n                <path d=\"m104.4 105h21.6v21h-21.6z\" />\n              </g>\n            </svg>\n            {{ $t(\"save_to_project\") }}\n          </button>\n        </div>\n      </div>\n      <div class=\"_saveNotice\" v-if=\"finished_saving_to_project\">\n        {{ $t(\"media_was_saved\") }}\n      </div>\n    </div>\n  </BaseModal2>\n</template>\n<script>\nexport default {\n  props: {\n    title: String,\n    export_name: {\n      type: String,\n      default: \"file\",\n    },\n    export_blob: [Boolean, Blob],\n    export_href: String,\n    project_path: String,\n    enable_options: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  components: {},\n  data() {\n    return {\n      finished_saving_to_project: false,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {\n    async saveToProject() {\n      if (this.export_blob) {\n        const additional_meta = {};\n\n        additional_meta.$origin = \"make\";\n        if (this.connected_as?.$path)\n          additional_meta.$authors = [this.connected_as.$path];\n\n        await this.$api\n          .uploadFile({\n            path: this.project_path,\n            filename: this.export_name,\n            file: this.export_blob,\n            additional_meta,\n          })\n          .catch((err) => {\n            this.$alertify.delay(4000).error(err);\n            throw err;\n          });\n      }\n\n      this.finished_saving_to_project = true;\n      setTimeout(() => {\n        this.$emit(\"close\");\n      }, 3000);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._cont {\n  position: relative;\n}\n._saveNotice {\n  position: absolute;\n  inset: -2px;\n  background: rgba(255, 255, 255, 0.95);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportSaveMakeModal.vue?vue&type=template&id=a04ecc28&scoped=true&\"\nimport script from \"./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportSaveMakeModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExportSaveMakeModal.vue?vue&type=style&index=0&id=a04ecc28&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a04ecc28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_mixAudioAndImage\"},[_c('div',{staticClass:\"_topRow\"},[_c('div',{},[_c('SingleBaseMediaPicker',{attrs:{\"title\":_vm.$t('pick_audio'),\"context\":'full',\"field_name\":'base_audio_filename',\"content\":_vm.make.base_audio_filename,\"path\":_vm.make.$path,\"media_type_to_pick\":'audio'}})],1),_c('div',{staticClass:\"_equationIcon\"},[_c('b-icon',{attrs:{\"icon\":\"plus-circle-dotted\"}})],1),_c('div',{},[(_vm.make.type === 'mix_audio_and_image')?_c('SingleBaseMediaPicker',{attrs:{\"title\":_vm.$t('pick_image'),\"context\":'full',\"field_name\":'base_image_filename',\"content\":_vm.make.base_image_filename,\"path\":_vm.make.$path,\"media_type_to_pick\":'image'}}):(_vm.make.type === 'mix_audio_and_video')?_c('SingleBaseMediaPicker',{attrs:{\"title\":_vm.$t('pick_video'),\"context\":'full',\"field_name\":'base_video_filename',\"content\":_vm.make.base_video_filename,\"path\":_vm.make.$path,\"media_type_to_pick\":'video'}}):_vm._e()],1)]),_c('transition',{attrs:{\"name\":\"pagechange\",\"mode\":\"out-in\"}},[(_vm.export_is_available)?_c('div',{staticClass:\"_bottomRow\"},[_c('div',{staticClass:\"_equationIcon\"},[_c('b-icon',{attrs:{\"icon\":\"chevron-double-down\"}})],1),_c('div',{},[_c('button',{staticClass:\"u-button u-button_bleuvert\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_save_export_modal = true}}},[_c('b-icon',{attrs:{\"icon\":\"check\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"create\"))+\" \")],1)])]):_vm._e()]),(_vm.show_save_export_modal)?_c('ExportSaveMakeModal',{attrs:{\"title\":_vm.$t('export_mix'),\"export_name\":_vm.export_name,\"export_href\":_vm.export_href},on:{\"close\":function($event){_vm.show_save_export_modal = false}}},[(_vm.is_exporting)?_c('div',{key:\"loader\",staticClass:\"_spinner\"},[_c('LoaderSpinner')],1):_c('div',[_c('MediaContent',{staticClass:\"_preview\",attrs:{\"file\":_vm.created_video,\"resolution\":1600,\"context\":'full'}})],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_mixAudioAndImage\">\n    <div class=\"_topRow\">\n      <div class=\"\">\n        <SingleBaseMediaPicker\n          :title=\"$t('pick_audio')\"\n          :context=\"'full'\"\n          :field_name=\"'base_audio_filename'\"\n          :content=\"make.base_audio_filename\"\n          :path=\"make.$path\"\n          :media_type_to_pick=\"'audio'\"\n        />\n      </div>\n      <div class=\"_equationIcon\">\n        <b-icon icon=\"plus-circle-dotted\" />\n      </div>\n      <div class=\"\">\n        <SingleBaseMediaPicker\n          v-if=\"make.type === 'mix_audio_and_image'\"\n          :title=\"$t('pick_image')\"\n          :context=\"'full'\"\n          :field_name=\"'base_image_filename'\"\n          :content=\"make.base_image_filename\"\n          :path=\"make.$path\"\n          :media_type_to_pick=\"'image'\"\n        />\n        <SingleBaseMediaPicker\n          v-else-if=\"make.type === 'mix_audio_and_video'\"\n          :title=\"$t('pick_video')\"\n          :context=\"'full'\"\n          :field_name=\"'base_video_filename'\"\n          :content=\"make.base_video_filename\"\n          :path=\"make.$path\"\n          :media_type_to_pick=\"'video'\"\n        />\n      </div>\n    </div>\n    <transition name=\"pagechange\" mode=\"out-in\">\n      <div class=\"_bottomRow\" v-if=\"export_is_available\">\n        <div class=\"_equationIcon\">\n          <b-icon icon=\"chevron-double-down\" />\n        </div>\n        <div class=\"\">\n          <button\n            type=\"button\"\n            class=\"u-button u-button_bleuvert\"\n            @click=\"show_save_export_modal = true\"\n          >\n            <b-icon icon=\"check\" />\n            {{ $t(\"create\") }}\n          </button>\n        </div>\n      </div>\n    </transition>\n\n    <ExportSaveMakeModal\n      v-if=\"show_save_export_modal\"\n      :title=\"$t('export_mix')\"\n      :export_name=\"export_name\"\n      :export_href=\"export_href\"\n      @close=\"show_save_export_modal = false\"\n    >\n      <!-- <p class=\"u-spacingBottom\">\n        {{ $t(\"duration\") }} – {{ export_duration }}\n      </p> -->\n      <div class=\"_spinner\" v-if=\"is_exporting\" key=\"loader\">\n        <LoaderSpinner />\n      </div>\n      <div v-else>\n        <MediaContent\n          class=\"_preview\"\n          :file=\"created_video\"\n          :resolution=\"1600\"\n          :context=\"'full'\"\n        />\n      </div>\n    </ExportSaveMakeModal>\n  </div>\n</template>\n<script>\nimport SingleBaseMediaPicker from \"@/components/makes/SingleBaseMediaPicker.vue\"; // eslint-disable-line\nimport ExportSaveMakeModal from \"@/components/makes/ExportSaveMakeModal.vue\";\n\nexport default {\n  props: {\n    make: Object,\n  },\n  components: { SingleBaseMediaPicker, ExportSaveMakeModal },\n  data() {\n    return {\n      show_save_export_modal: false,\n      is_exporting: false,\n      created_video: false,\n      export_href: undefined,\n    };\n  },\n  i18n: {\n    messages: {\n      fr: {\n        pick_audio: \"Choisissez le son à utiliser\",\n        pick_image: \"Choisissez l’image à utiliser\",\n        pick_video: \"Choisissez la vidéo à utiliser\",\n        export_mix: \"Exporter la composition\",\n      },\n      en: {\n        pick_audio: \"Pick audio media\",\n        pick_image: \"Pick image media\",\n        pick_video: \"Pick video media\",\n        export_mix: \"Export composition\",\n      },\n    },\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {\n    show_save_export_modal() {\n      if (this.show_save_export_modal) this.renderAudioImageOrVideo();\n    },\n  },\n  computed: {\n    export_name() {\n      if (this.make.type === \"mix_audio_and_image\")\n        return \"audio_image_mix.mp4\";\n      if (this.make.type === \"mix_audio_and_video\")\n        return \"audio_video_mix.mp4\";\n      return \"untitled\";\n    },\n    export_is_available() {\n      if (this.make.type === \"mix_audio_and_image\")\n        return this.make.base_audio_filename && this.make.base_image_filename;\n      if (this.make.type === \"mix_audio_and_video\")\n        return this.make.base_audio_filename && this.make.base_video_filename;\n      return false;\n    },\n  },\n  methods: {\n    async renderAudioImageOrVideo() {\n      this.is_exporting = true;\n      this.created_video = false;\n      this.export_href = undefined;\n\n      const base_audio = this.getSourceMedia({\n        source_media: {\n          meta_filename_in_project: this.make.base_audio_filename,\n        },\n        folder_path: this.make.$path,\n      });\n\n      const additional_meta = {};\n      additional_meta.$origin = \"make\";\n      if (this.connected_as?.$path)\n        additional_meta.$authors = [this.connected_as.$path];\n\n      let instructions = {\n        recipe: this.make.type,\n        suggested_file_name: this.make.type,\n        base_audio_path: this.makeMediaFilePath({\n          $path: base_audio.$path,\n          $media_filename: base_audio.$media_filename,\n        }),\n        output_width: 1280,\n        output_height: 720,\n        additional_meta,\n      };\n\n      if (this.make.type === \"mix_audio_and_image\") {\n        const base_image = this.getSourceMedia({\n          source_media: {\n            meta_filename_in_project: this.make.base_image_filename,\n          },\n          folder_path: this.make.$path,\n        });\n        instructions.base_image_path = this.makeMediaFilePath({\n          $path: base_image.$path,\n          $media_filename: base_image.$media_filename,\n        });\n      } else if (this.make.type === \"mix_audio_and_video\") {\n        const base_video = this.getSourceMedia({\n          source_media: {\n            meta_filename_in_project: this.make.base_video_filename,\n          },\n          folder_path: this.make.$path,\n        });\n\n        const duration = this.getMaxDuration(\n          base_video.$infos?.duration,\n          base_audio.$infos?.duration\n        );\n        instructions.duration = duration;\n        instructions.base_video_path = this.makeMediaFilePath({\n          $path: base_video.$path,\n          $media_filename: base_video.$media_filename,\n        });\n      }\n\n      const current_task_id = await this.$api.exportFolder({\n        path: this.make.$path,\n        instructions,\n      });\n      this.$api.join({ room: \"task_\" + current_task_id });\n\n      const checkIfEnded = ({ task_id, message }) => {\n        if (task_id !== current_task_id) return;\n        this.$eventHub.$off(\"task.ended\", checkIfEnded);\n        this.$api.leave({ room: \"task_\" + current_task_id });\n\n        if (message.event === \"completed\") {\n          this.created_video = message.file;\n          this.export_href = this.makeMediaFileURL({\n            $path: this.created_video.$path,\n            $media_filename: this.created_video.$media_filename,\n          });\n        } else if (message.event === \"aborted\") {\n          //\n        } else if (message.event === \"failed\") {\n          message.info;\n        }\n\n        this.is_exporting = false;\n      };\n      this.$eventHub.$on(\"task.ended\", checkIfEnded);\n    },\n    getMaxDuration() {\n      return Array.prototype.slice.call(arguments).reduce((acc, val) => {\n        if (typeof val === \"number\" && val > acc) acc = val;\n        return acc;\n      }, 0);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._mixAudioAndImage {\n  padding: calc(var(--spacing) / 1) 0;\n\n  > * {\n    // background: white;\n  }\n}\n\n._topRow {\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  align-items: center;\n  gap: calc(var(--spacing) * 2);\n}\n\n._equationIcon {\n  font-size: 2em;\n  line-height: 1;\n  margin: calc(var(--spacing) * 2);\n  color: white;\n}\n\n._bottomRow {\n  margin-top: calc(var(--spacing) * 2);\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MixAudioAndImageOrVideo.vue?vue&type=template&id=18bd3efe&scoped=true&\"\nimport script from \"./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./MixAudioAndImageOrVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MixAudioAndImageOrVideo.vue?vue&type=style&index=0&id=18bd3efe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18bd3efe\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._cont[data-v-a04ecc28]{position:relative}._saveNotice[data-v-a04ecc28]{position:absolute;inset:-2px;background:hsla(0,0%,100%,.95);display:flex;justify-content:center;align-items:center}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._mixAudioAndImage[data-v-18bd3efe]{padding:calc(var(--spacing)/1) 0}._topRow[data-v-18bd3efe]{display:flex;flex-flow:row wrap;justify-content:center;align-items:center;gap:calc(var(--spacing)*2)}._equationIcon[data-v-18bd3efe]{font-size:2em;line-height:1;margin:calc(var(--spacing)*2);color:#fff}._bottomRow[data-v-18bd3efe]{margin-top:calc(var(--spacing)*2);text-align:center}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExportSaveMakeModal.vue?vue&type=style&index=0&id=a04ecc28&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"187e647e\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MixAudioAndImageOrVideo.vue?vue&type=style&index=0&id=18bd3efe&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0750a51c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","$t","on","$event","$emit","staticClass","_t","export_href","export_name","_v","_s","saveToProject","staticStyle","_e","staticRenderFns","props","type","default","export_blob","project_path","enable_options","components","data","finished_saving_to_project","created","mounted","beforeDestroy","watch","computed","methods","additional_meta","uploadFile","path","filename","file","catch","setTimeout","component","make","base_audio_filename","$path","base_image_filename","base_video_filename","show_save_export_modal","key","created_video","SingleBaseMediaPicker","ExportSaveMakeModal","is_exporting","i18n","messages","fr","pick_audio","pick_image","pick_video","export_mix","en","export_is_available","source_media","meta_filename_in_project","folder_path","recipe","suggested_file_name","base_audio_path","$media_filename","output_width","output_height","instructions","base_video","base_audio","room","task_id","message","getMaxDuration","___CSS_LOADER_EXPORT___","push","module","id","content","__esModule","locals","exports","add"],"sourceRoot":""}