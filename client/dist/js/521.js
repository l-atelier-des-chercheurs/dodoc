(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[521],{20521:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"playlist"})])},r=[],n=s(47010),a=s.n(n),o={props:{},components:{},data(){return{WaveformPlaylist:void 0}},created(){},mounted(){this.WaveformPlaylist=a()({samplesPerPixel:3e3,mono:!0,waveHeight:70,container:this.$refs.playlist,state:"cursor",colors:{waveOutlineColor:"#E0EFF1",timeColor:"grey",fadeColor:"black"},controls:{show:!1,width:150},zoomLevels:[500,1e3,3e3,5e3]})},beforeDestroy(){},watch:{},computed:{},methods:{}},l=o,c=s(1001),h=(0,c.Z)(l,i,r,!1,null,"3fea072a",null),u=h.exports},47010:function(t,e,s){s(57658),s(21703),s(48675),s(33105),s(63408),s(14590),s(3462),s(33824),function(e,s){t.exports=s()}(0,(function(){return(()=>{var t={6824:t=>{
/*!
           * Cross-Browser Split 1.1.1
           * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
           * Available under the MIT License
           * ECMAScript compliant, uniform cross-browser split method
           */
t.exports=function(t){var e,s=String.prototype.split,i=/()??/.exec("")[1]===t;return e=function(e,r,n){if("[object RegExp]"!==Object.prototype.toString.call(r))return s.call(e,r,n);var a,o,l,c,h=[],u=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),d=0;r=new RegExp(r.source,u+"g");e+="",i||(a=new RegExp("^"+r.source+"$(?!\\s)",u)),n=n===t?-1>>>0:n>>>0;while(o=r.exec(e)){if(l=o.index+o[0].length,l>d&&(h.push(e.slice(d,o.index)),!i&&o.length>1&&o[0].replace(a,(function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(o[e]=t)})),o.length>1&&o.index<e.length&&Array.prototype.push.apply(h,o.slice(1)),c=o[0].length,d=l,h.length>=n))break;r.lastIndex===o.index&&r.lastIndex++}return d===e.length?!c&&r.test("")||h.push(""):h.push(e.slice(d)),h.length>n?h.slice(0,n):h},e}()},1804:(t,e,s)=>{"use strict";var i=s(5618),r=s(7205),n=s(7191),a=s(5516),o=s(9981),l=t.exports=function(t,e){var s,r,l,c,h;return arguments.length<2||"string"!==typeof t?(c=e,e=t,t=null):c=arguments[2],i(t)?(s=o.call(t,"c"),r=o.call(t,"e"),l=o.call(t,"w")):(s=l=!0,r=!1),h={value:e,configurable:s,enumerable:r,writable:l},c?n(a(c),h):h};l.gs=function(t,e,s){var l,c,h,u;return"string"!==typeof t?(h=s,s=e,e=t,t=null):h=arguments[3],i(e)?r(e)?i(s)?r(s)||(h=s,s=void 0):s=void 0:(h=e,e=s=void 0):e=void 0,i(t)?(l=o.call(t,"c"),c=o.call(t,"e")):(l=!0,c=!1),u={get:e,set:s,configurable:l,enumerable:c},h?n(a(h),u):u}},430:t=>{"use strict";t.exports=function(){}},7191:(t,e,s)=>{"use strict";t.exports=s(6560)()?Object.assign:s(7346)},6560:t=>{"use strict";t.exports=function(){var t,e=Object.assign;return"function"===typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},7346:(t,e,s)=>{"use strict";var i=s(5103),r=s(2745),n=Math.max;t.exports=function(t,e){var s,a,o,l=n(arguments.length,2);for(t=Object(r(t)),o=function(i){try{t[i]=e[i]}catch(r){s||(s=r)}},a=1;a<l;++a)e=arguments[a],i(e).forEach(o);if(void 0!==s)throw s;return t}},6914:(t,e,s)=>{"use strict";var i=s(430)();t.exports=function(t){return t!==i&&null!==t}},5103:(t,e,s)=>{"use strict";t.exports=s(7446)()?Object.keys:s(6137)},7446:t=>{"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},6137:(t,e,s)=>{"use strict";var i=s(6914),r=Object.keys;t.exports=function(t){return r(i(t)?Object(t):t)}},5516:(t,e,s)=>{"use strict";var i=s(6914),r=Array.prototype.forEach,n=Object.create,a=function(t,e){var s;for(s in t)e[s]=t[s]};t.exports=function(t){var e=n(null);return r.call(arguments,(function(t){i(t)&&a(Object(t),e)})),e}},1290:t=>{"use strict";t.exports=function(t){if("function"!==typeof t)throw new TypeError(t+" is not a function");return t}},2745:(t,e,s)=>{"use strict";var i=s(6914);t.exports=function(t){if(!i(t))throw new TypeError("Cannot use null or undefined");return t}},9981:(t,e,s)=>{"use strict";t.exports=s(3591)()?String.prototype.contains:s(6042)},3591:t=>{"use strict";var e="razdwatrzy";t.exports=function(){return"function"===typeof e.contains&&(!0===e.contains("dwa")&&!1===e.contains("foo"))}},6042:t=>{"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},8832:(t,e,s)=>{"use strict";var i=s(4167),r="7";i("ev-store",r);var n="__EV_STORE_KEY@"+r;function a(t){var e=t[n];return e||(e=t[n]={}),e}t.exports=a},8370:(t,e,s)=>{"use strict";var i,r,n,a,o,l,c,h=s(1804),u=s(1290),d=Function.prototype.apply,p=Function.prototype.call,f=Object.create,m=Object.defineProperty,v=Object.defineProperties,g=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var s;return u(e),g.call(this,"__ee__")?s=this.__ee__:(s=y.value=f(null),m(this,"__ee__",y),y.value=null),s[t]?"object"===typeof s[t]?s[t].push(e):s[t]=[s[t],e]:s[t]=e,this},r=function(t,e){var s,r;return u(e),r=this,i.call(this,t,s=function(){n.call(r,t,s),d.call(e,this,arguments)}),s.__eeOnceListener__=e,this},n=function(t,e){var s,i,r,n;if(u(e),!g.call(this,"__ee__"))return this;if(s=this.__ee__,!s[t])return this;if(i=s[t],"object"===typeof i)for(n=0;r=i[n];++n)r!==e&&r.__eeOnceListener__!==e||(2===i.length?s[t]=i[n?0:1]:i.splice(n,1));else i!==e&&i.__eeOnceListener__!==e||delete s[t];return this},a=function(t){var e,s,i,r,n;if(g.call(this,"__ee__")&&(r=this.__ee__[t],r))if("object"===typeof r){for(s=arguments.length,n=new Array(s-1),e=1;e<s;++e)n[e-1]=arguments[e];for(r=r.slice(),e=0;i=r[e];++e)d.call(i,this,n)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(s=arguments.length,n=new Array(s-1),e=1;e<s;++e)n[e-1]=arguments[e];d.call(r,this,n)}},o={on:i,once:r,off:n,emit:a},l={on:h(i),once:h(r),off:h(n),emit:h(a)},c=v({},l),t.exports=e=function(t){return null==t?f(c):v(Object(t),l)},e.methods=o},6226:(t,e)=>{"use strict";function s(t,e){var s,i,r=new Float32Array(t),n=t-1;for(s=0;s<t;s++)i=s/n,r[s]=e>0?i:1-i;return r}function i(t,e){var s,i,r,n=new Float32Array(t),a=t-1;for(s=0;s<t;s++)i=s/a,r=e>0?s:t-1-s,n[r]=Math.exp(2*i-1)/Math.exp(1);return n}function r(t,e){var s,i=new Float32Array(t),r=e>0?Math.PI/2:-Math.PI/2;for(s=0;s<t;++s)i[s]=Math.sin(Math.PI*s/t-r)/2+.5;return i}function n(t,e,s){var i,r,n=new Float32Array(t),a=0;for(r=0;r<t;r++)i=s>0?r:t-1-r,a=r/t,n[i]=Math.log(1+e*a)/Math.log(1+e);return n}Object.defineProperty(e,"__esModule",{value:!0}),e.linear=s,e.exponential=i,e.sCurve=r,e.logarithmic=n},1114:(t,e,s)=>{"use strict";e.h7=e.Y1=e.Hp=e.Jl=e.t$=e._h=void 0,e.L7=v,e.Mt=g;var i=s(6226),r=e._h="sCurve",n=e.t$="linear",a=e.Jl="exponential",o=e.Hp="logarithmic";e.Y1="FadeIn",e.h7="FadeOut";function l(t,e){var s=(0,i.sCurve)(1e4,1);this.setValueCurveAtTime(s,t,e)}function c(t,e){var s=(0,i.sCurve)(1e4,-1);this.setValueCurveAtTime(s,t,e)}function h(t,e){this.linearRampToValueAtTime(0,t),this.linearRampToValueAtTime(1,t+e)}function u(t,e){this.linearRampToValueAtTime(1,t),this.linearRampToValueAtTime(0,t+e)}function d(t,e){this.exponentialRampToValueAtTime(.01,t),this.exponentialRampToValueAtTime(1,t+e)}function p(t,e){this.exponentialRampToValueAtTime(1,t),this.exponentialRampToValueAtTime(.01,t+e)}function f(t,e){var s=(0,i.logarithmic)(1e4,10,1);this.setValueCurveAtTime(s,t,e)}function m(t,e){var s=(0,i.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(s,t,e)}function v(t,e,s,i){switch(e){case r:l.call(t,s,i);break;case n:h.call(t,s,i);break;case a:d.call(t,s,i);break;case o:f.call(t,s,i);break;default:throw new Error("Unsupported Fade type")}}function g(t,e,s,i){switch(e){case r:c.call(t,s,i);break;case n:u.call(t,s,i);break;case a:p.call(t,s,i);break;case o:m.call(t,s,i);break;default:throw new Error("Unsupported Fade type")}}},9144:(t,e,s)=>{var i,r="undefined"!==typeof s.g?s.g:"undefined"!==typeof window?window:{},n=s(5893);"undefined"!==typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=n)),t.exports=i},8070:(t,e,s)=>{"use strict";var i="undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{};function r(t,e){return t in i?i[t]:(i[t]=e,e)}t.exports=r},4167:(t,e,s)=>{"use strict";var i=s(8070);function r(t,e,s){var r="__INDIVIDUAL_ONE_VERSION_"+t,n=r+"_ENFORCE_SINGLETON",a=i(n,e);if(a!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+a+" installed.\nThis means you cannot install version "+e);return i(r,s)}t.exports=r},849:(t,e,s)=>{var i=!!(s.g===s.g.window&&s.g.URL&&s.g.Blob&&s.g.Worker);function r(t,e){var r,n=this;if(e=e||{},i)return r=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new s.g.Worker(s.g.URL.createObjectURL(new s.g.Blob([r],{type:"text/javascript"})));function a(t){setTimeout((function(){n.onmessage({data:t})}),0)}this.self=e,this.self.postMessage=a,setTimeout(t.bind(e,e),0)}r.prototype.postMessage=function(t){var e=this;setTimeout((function(){e.self.onmessage({data:t})}),0)},t.exports=r},6240:t=>{"use strict";t.exports=function(t){return"object"===typeof t&&null!==t}},1730:t=>{var e=9007199254740991,s="[object Arguments]",i="[object Function]",r="[object GeneratorFunction]",n=/^(?:0|[1-9]\d*)$/;function a(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}function o(t,e){var s=-1,i=Array(t);while(++s<t)i[s]=e(s);return i}function l(t,e){return function(s){return t(e(s))}}var c=Object.prototype,h=c.hasOwnProperty,u=c.toString,d=c.propertyIsEnumerable,p=l(Object.keys,Object),f=Math.max,m=!d.call({valueOf:1},"valueOf");function v(t,e){var s=O(t)||_(t)?o(t.length,String):[],i=s.length,r=!!i;for(var n in t)!e&&!h.call(t,n)||r&&("length"==n||x(n,i))||s.push(n);return s}function g(t,e,s){var i=t[e];h.call(t,e)&&T(i,s)&&(void 0!==s||e in t)||(t[e]=s)}function y(t){if(!S(t))return p(t);var e=[];for(var s in Object(t))h.call(t,s)&&"constructor"!=s&&e.push(s);return e}function b(t,e){return e=f(void 0===e?t.length-1:e,0),function(){var s=arguments,i=-1,r=f(s.length-e,0),n=Array(r);while(++i<r)n[i]=s[e+i];i=-1;var o=Array(e+1);while(++i<e)o[i]=s[i];return o[e]=n,a(t,this,o)}}function k(t,e,s,i){s||(s={});var r=-1,n=e.length;while(++r<n){var a=e[r],o=i?i(s[a],t[a],a,s,t):void 0;g(s,a,void 0===o?t[a]:o)}return s}function w(t){return b((function(e,s){var i=-1,r=s.length,n=r>1?s[r-1]:void 0,a=r>2?s[2]:void 0;n=t.length>3&&"function"==typeof n?(r--,n):void 0,a&&P(s[0],s[1],a)&&(n=r<3?void 0:n,r=1),e=Object(e);while(++i<r){var o=s[i];o&&t(e,o,i,n)}return e}))}function x(t,s){return s=null==s?e:s,!!s&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<s}function P(t,e,s){if(!j(s))return!1;var i=typeof e;return!!("number"==i?E(s)&&x(e,s.length):"string"==i&&e in s)&&T(s[e],t)}function S(t){var e=t&&t.constructor,s="function"==typeof e&&e.prototype||c;return t===s}function T(t,e){return t===e||t!==t&&e!==e}function _(t){return R(t)&&h.call(t,"callee")&&(!d.call(t,"callee")||u.call(t)==s)}var O=Array.isArray;function E(t){return null!=t&&C(t.length)&&!A(t)}function R(t){return G(t)&&E(t)}function A(t){var e=j(t)?u.call(t):"";return e==i||e==r}function C(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function G(t){return!!t&&"object"==typeof t}var L=w((function(t,e){if(m||S(e)||E(e))k(e,M(e),t);else for(var s in e)h.call(e,s)&&g(t,s,e[s])}));function M(t){return E(t)?v(t):y(t)}t.exports=L},2098:(t,e,s)=>{t=s.nmd(t);var i=200,r="__lodash_hash_undefined__",n=800,a=16,o=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Function]",m="[object GeneratorFunction]",v="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",k="[object Proxy]",w="[object RegExp]",x="[object Set]",P="[object String]",S="[object Undefined]",T="[object WeakMap]",_="[object ArrayBuffer]",O="[object DataView]",E="[object Float32Array]",R="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",j="[object Int32Array]",G="[object Uint8Array]",L="[object Uint8ClampedArray]",M="[object Uint16Array]",I="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,$=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,z={};z[E]=z[R]=z[A]=z[C]=z[j]=z[G]=z[L]=z[M]=z[I]=!0,z[l]=z[c]=z[_]=z[u]=z[O]=z[d]=z[p]=z[f]=z[v]=z[g]=z[b]=z[w]=z[x]=z[P]=z[T]=!1;var N="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g,V="object"==typeof self&&self&&self.Object===Object&&self,W=N||V||Function("return this")(),U=e&&!e.nodeType&&e,q=U&&t&&!t.nodeType&&t,H=q&&q.exports===U,B=H&&N.process,X=function(){try{var t=q&&q.require&&q.require("util").types;return t||B&&B.binding&&B.binding("util")}catch(e){}}(),Y=X&&X.isTypedArray;function Z(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}function J(t,e){var s=-1,i=Array(t);while(++s<t)i[s]=e(s);return i}function K(t){return function(e){return t(e)}}function Q(t,e){return null==t?void 0:t[e]}function tt(t,e){return function(s){return t(e(s))}}var et=Array.prototype,st=Function.prototype,it=Object.prototype,rt=W["__core-js_shared__"],nt=st.toString,at=it.hasOwnProperty,ot=function(){var t=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),lt=it.toString,ct=nt.call(Object),ht=RegExp("^"+nt.call(at).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ut=H?W.Buffer:void 0,dt=W.Symbol,pt=W.Uint8Array,ft=ut?ut.allocUnsafe:void 0,mt=tt(Object.getPrototypeOf,Object),vt=Object.create,gt=it.propertyIsEnumerable,yt=et.splice,bt=dt?dt.toStringTag:void 0,kt=function(){try{var t=we(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),wt=ut?ut.isBuffer:void 0,xt=Math.max,Pt=Date.now,St=we(W,"Map"),Tt=we(Object,"create"),_t=function(){function t(){}return function(e){if(!Ue(e))return{};if(vt)return vt(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();function Ot(t){var e=-1,s=null==t?0:t.length;this.clear();while(++e<s){var i=t[e];this.set(i[0],i[1])}}function Et(){this.__data__=Tt?Tt(null):{},this.size=0}function Rt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function At(t){var e=this.__data__;if(Tt){var s=e[t];return s===r?void 0:s}return at.call(e,t)?e[t]:void 0}function Ct(t){var e=this.__data__;return Tt?void 0!==e[t]:at.call(e,t)}function jt(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=Tt&&void 0===e?r:e,this}function Gt(t){var e=-1,s=null==t?0:t.length;this.clear();while(++e<s){var i=t[e];this.set(i[0],i[1])}}function Lt(){this.__data__=[],this.size=0}function Mt(t){var e=this.__data__,s=te(e,t);if(s<0)return!1;var i=e.length-1;return s==i?e.pop():yt.call(e,s,1),--this.size,!0}function It(t){var e=this.__data__,s=te(e,t);return s<0?void 0:e[s][1]}function Ft(t){return te(this.__data__,t)>-1}function $t(t,e){var s=this.__data__,i=te(s,t);return i<0?(++this.size,s.push([t,e])):s[i][1]=e,this}function Dt(t){var e=-1,s=null==t?0:t.length;this.clear();while(++e<s){var i=t[e];this.set(i[0],i[1])}}function zt(){this.size=0,this.__data__={hash:new Ot,map:new(St||Gt),string:new Ot}}function Nt(t){var e=ke(this,t)["delete"](t);return this.size-=e?1:0,e}function Vt(t){return ke(this,t).get(t)}function Wt(t){return ke(this,t).has(t)}function Ut(t,e){var s=ke(this,t),i=s.size;return s.set(t,e),this.size+=s.size==i?0:1,this}function qt(t){var e=this.__data__=new Gt(t);this.size=e.size}function Ht(){this.__data__=new Gt,this.size=0}function Bt(t){var e=this.__data__,s=e["delete"](t);return this.size=e.size,s}function Xt(t){return this.__data__.get(t)}function Yt(t){return this.__data__.has(t)}function Zt(t,e){var s=this.__data__;if(s instanceof Gt){var r=s.__data__;if(!St||r.length<i-1)return r.push([t,e]),this.size=++s.size,this;s=this.__data__=new Dt(r)}return s.set(t,e),this.size=s.size,this}function Jt(t,e){var s=$e(t),i=!s&&Fe(t),r=!s&&!i&&Ne(t),n=!s&&!i&&!r&&Be(t),a=s||i||r||n,o=a?J(t.length,String):[],l=o.length;for(var c in t)!e&&!at.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Se(c,l))||o.push(c);return o}function Kt(t,e,s){(void 0!==s&&!Ie(t[e],s)||void 0===s&&!(e in t))&&ee(t,e,s)}function Qt(t,e,s){var i=t[e];at.call(t,e)&&Ie(i,s)&&(void 0!==s||e in t)||ee(t,e,s)}function te(t,e){var s=t.length;while(s--)if(Ie(t[s][0],e))return s;return-1}function ee(t,e,s){"__proto__"==e&&kt?kt(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}Ot.prototype.clear=Et,Ot.prototype["delete"]=Rt,Ot.prototype.get=At,Ot.prototype.has=Ct,Ot.prototype.set=jt,Gt.prototype.clear=Lt,Gt.prototype["delete"]=Mt,Gt.prototype.get=It,Gt.prototype.has=Ft,Gt.prototype.set=$t,Dt.prototype.clear=zt,Dt.prototype["delete"]=Nt,Dt.prototype.get=Vt,Dt.prototype.has=Wt,Dt.prototype.set=Ut,qt.prototype.clear=Ht,qt.prototype["delete"]=Bt,qt.prototype.get=Xt,qt.prototype.has=Yt,qt.prototype.set=Zt;var se=ye();function ie(t){return null==t?void 0===t?S:y:bt&&bt in Object(t)?xe(t):Ae(t)}function re(t){return qe(t)&&ie(t)==l}function ne(t){if(!Ue(t)||Oe(t))return!1;var e=Ve(t)?ht:$;return e.test(Me(t))}function ae(t){return qe(t)&&We(t.length)&&!!z[ie(t)]}function oe(t){if(!Ue(t))return Re(t);var e=Ee(t),s=[];for(var i in t)("constructor"!=i||!e&&at.call(t,i))&&s.push(i);return s}function le(t,e,s,i,r){t!==e&&se(e,(function(n,a){if(r||(r=new qt),Ue(n))ce(t,e,a,s,le,i,r);else{var o=i?i(je(t,a),n,a+"",t,e,r):void 0;void 0===o&&(o=n),Kt(t,a,o)}}),Ze)}function ce(t,e,s,i,r,n,a){var o=je(t,s),l=je(e,s),c=a.get(l);if(c)Kt(t,s,c);else{var h=n?n(o,l,s+"",t,e,a):void 0,u=void 0===h;if(u){var d=$e(l),p=!d&&Ne(l),f=!d&&!p&&Be(l);h=l,d||p||f?$e(o)?h=o:ze(o)?h=me(o):p?(u=!1,h=de(l,!0)):f?(u=!1,h=fe(l,!0)):h=[]:He(l)||Fe(l)?(h=o,Fe(o)?h=Xe(o):Ue(o)&&!Ve(o)||(h=Pe(l))):u=!1}u&&(a.set(l,h),r(h,l,i,n,a),a["delete"](l)),Kt(t,s,h)}}function he(t,e){return Ge(Ce(t,e,Qe),t+"")}var ue=kt?function(t,e){return kt(t,"toString",{configurable:!0,enumerable:!1,value:Ke(e),writable:!0})}:Qe;function de(t,e){if(e)return t.slice();var s=t.length,i=ft?ft(s):new t.constructor(s);return t.copy(i),i}function pe(t){var e=new t.constructor(t.byteLength);return new pt(e).set(new pt(t)),e}function fe(t,e){var s=e?pe(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}function me(t,e){var s=-1,i=t.length;e||(e=Array(i));while(++s<i)e[s]=t[s];return e}function ve(t,e,s,i){var r=!s;s||(s={});var n=-1,a=e.length;while(++n<a){var o=e[n],l=i?i(s[o],t[o],o,s,t):void 0;void 0===l&&(l=t[o]),r?ee(s,o,l):Qt(s,o,l)}return s}function ge(t){return he((function(e,s){var i=-1,r=s.length,n=r>1?s[r-1]:void 0,a=r>2?s[2]:void 0;n=t.length>3&&"function"==typeof n?(r--,n):void 0,a&&Te(s[0],s[1],a)&&(n=r<3?void 0:n,r=1),e=Object(e);while(++i<r){var o=s[i];o&&t(e,o,i,n)}return e}))}function ye(t){return function(e,s,i){var r=-1,n=Object(e),a=i(e),o=a.length;while(o--){var l=a[t?o:++r];if(!1===s(n[l],l,n))break}return e}}function be(t,e,s,i,r,n){return Ue(t)&&Ue(e)&&(n.set(e,t),le(t,e,void 0,be,n),n["delete"](e)),t}function ke(t,e){var s=t.__data__;return _e(e)?s["string"==typeof e?"string":"hash"]:s.map}function we(t,e){var s=Q(t,e);return ne(s)?s:void 0}function xe(t){var e=at.call(t,bt),s=t[bt];try{t[bt]=void 0;var i=!0}catch(n){}var r=lt.call(t);return i&&(e?t[bt]=s:delete t[bt]),r}function Pe(t){return"function"!=typeof t.constructor||Ee(t)?{}:_t(mt(t))}function Se(t,e){var s=typeof t;return e=null==e?o:e,!!e&&("number"==s||"symbol"!=s&&D.test(t))&&t>-1&&t%1==0&&t<e}function Te(t,e,s){if(!Ue(s))return!1;var i=typeof e;return!!("number"==i?De(s)&&Se(e,s.length):"string"==i&&e in s)&&Ie(s[e],t)}function _e(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Oe(t){return!!ot&&ot in t}function Ee(t){var e=t&&t.constructor,s="function"==typeof e&&e.prototype||it;return t===s}function Re(t){var e=[];if(null!=t)for(var s in Object(t))e.push(s);return e}function Ae(t){return lt.call(t)}function Ce(t,e,s){return e=xt(void 0===e?t.length-1:e,0),function(){var i=arguments,r=-1,n=xt(i.length-e,0),a=Array(n);while(++r<n)a[r]=i[e+r];r=-1;var o=Array(e+1);while(++r<e)o[r]=i[r];return o[e]=s(a),Z(t,this,o)}}function je(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ge=Le(ue);function Le(t){var e=0,s=0;return function(){var i=Pt(),r=a-(i-s);if(s=i,r>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Me(t){if(null!=t){try{return nt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ie(t,e){return t===e||t!==t&&e!==e}var Fe=re(function(){return arguments}())?re:function(t){return qe(t)&&at.call(t,"callee")&&!gt.call(t,"callee")},$e=Array.isArray;function De(t){return null!=t&&We(t.length)&&!Ve(t)}function ze(t){return qe(t)&&De(t)}var Ne=wt||ts;function Ve(t){if(!Ue(t))return!1;var e=ie(t);return e==f||e==m||e==h||e==k}function We(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function Ue(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qe(t){return null!=t&&"object"==typeof t}function He(t){if(!qe(t)||ie(t)!=b)return!1;var e=mt(t);if(null===e)return!0;var s=at.call(e,"constructor")&&e.constructor;return"function"==typeof s&&s instanceof s&&nt.call(s)==ct}var Be=Y?K(Y):ae;function Xe(t){return ve(t,Ze(t))}var Ye=he((function(t){return t.push(void 0,be),Z(Je,void 0,t)}));function Ze(t){return De(t)?Jt(t,!0):oe(t)}var Je=ge((function(t,e,s,i){le(t,e,s,i)}));function Ke(t){return function(){return t}}function Qe(t){return t}function ts(){return!1}t.exports=Ye},3520:t=>{var e=9007199254740991,s="[object Arguments]",i="[object Function]",r="[object GeneratorFunction]",n=/^(?:0|[1-9]\d*)$/;function a(t,e){var s=-1,i=Array(t);while(++s<t)i[s]=e(s);return i}function o(t,e){return function(s){return t(e(s))}}var l=Object.prototype,c=l.hasOwnProperty,h=l.toString,u=l.propertyIsEnumerable,d=o(Object.keys,Object);function p(t,e){var s=w(t)||k(t)?a(t.length,String):[],i=s.length,r=!!i;for(var n in t)!e&&!c.call(t,n)||r&&("length"==n||y(n,i))||s.push(n);return s}var f=g();function m(t,e){return t&&f(t,e,R)}function v(t){if(!b(t))return d(t);var e=[];for(var s in Object(t))c.call(t,s)&&"constructor"!=s&&e.push(s);return e}function g(t){return function(e,s,i){var r=-1,n=Object(e),a=i(e),o=a.length;while(o--){var l=a[t?o:++r];if(!1===s(n[l],l,n))break}return e}}function y(t,s){return s=null==s?e:s,!!s&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<s}function b(t){var e=t&&t.constructor,s="function"==typeof e&&e.prototype||l;return t===s}function k(t){return P(t)&&c.call(t,"callee")&&(!u.call(t,"callee")||h.call(t)==s)}var w=Array.isArray;function x(t){return null!=t&&T(t.length)&&!S(t)}function P(t){return O(t)&&x(t)}function S(t){var e=_(t)?h.call(t):"";return e==i||e==r}function T(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function O(t){return!!t&&"object"==typeof t}function E(t,e){return t&&m(t,"function"==typeof e?e:A)}function R(t){return x(t)?p(t):v(t)}function A(t){return t}t.exports=E},372:(t,e,s)=>{"use strict";var i=s(6060);t.exports=function(t){if("function"!==typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!==typeof t.length)return!1;if("function"!==typeof t.call)return!1;if("function"!==typeof t.apply)return!1}catch(e){return!1}return!i(t)}},3940:(t,e,s)=>{"use strict";var i=s(5618),r={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!i(t)&&hasOwnProperty.call(r,typeof t)}},7205:(t,e,s)=>{"use strict";var i=s(372),r=/^\s*class[\s{/}]/,n=Function.prototype.toString;t.exports=function(t){return!!i(t)&&!r.test(n.call(t))}},6060:(t,e,s)=>{"use strict";var i=s(3940);t.exports=function(t){if(!i(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(e){return!1}}},5618:t=>{"use strict";var e=void 0;t.exports=function(t){return t!==e&&null!==t}},4935:(t,e,s)=>{var i=s(3513);t.exports=i},7921:(t,e,s)=>{var i=s(3072);t.exports=i},347:(t,e,s)=>{var i=s(8744);t.exports=i},9720:(t,e,s)=>{var i=s(6943);t.exports=i},6672:(t,e,s)=>{var i=s(6240),r=s(7265);function n(t,e,s){for(var n in e){var l=e[n];void 0===l?a(t,n,l,s):r(l)?(a(t,n,l,s),l.hook&&l.hook(t,n,s?s[n]:void 0)):i(l)?o(t,e,s,n,l):t[n]=l}}function a(t,e,s,i){if(i){var n=i[e];if(r(n))n.unhook&&n.unhook(t,e,s);else if("attributes"===e)for(var a in n)t.removeAttribute(a);else if("style"===e)for(var o in n)t.style[o]="";else t[e]="string"===typeof n?"":null}}function o(t,e,s,r,n){var a=s?s[r]:void 0;if("attributes"!==r)if(a&&i(a)&&l(a)!==l(n))t[r]=n;else{i(t[r])||(t[r]={});var o="style"===r?"":void 0;for(var c in n){var h=n[c];t[r][c]=void 0===h?o:h}}else for(var u in n){var d=n[u];void 0===d?t.removeAttribute(u):t.setAttribute(u,d)}}function l(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=n},3513:(t,e,s)=>{var i=s(9144),r=s(6672),n=s(5170),a=s(6221),o=s(4097),l=s(6078);function c(t,e){var s=e&&e.document||i,h=e?e.warn:null;if(t=l(t).a,o(t))return t.init();if(a(t))return s.createTextNode(t.text);if(!n(t))return h&&h("Item is not a valid virtual dom node",t),null;var u=null===t.namespace?s.createElement(t.tagName):s.createElementNS(t.namespace,t.tagName),d=t.properties;r(u,d);for(var p=t.children,f=0;f<p.length;f++){var m=c(p[f],e);m&&u.appendChild(m)}return u}t.exports=c},8992:t=>{var e={};function s(t,e,s,r){return s&&0!==s.length?(s.sort(n),i(t,e,s,r,0)):{}}function i(t,s,n,a,o){if(a=a||{},t){r(n,o,o)&&(a[o]=t);var l=s.children;if(l)for(var c=t.childNodes,h=0;h<s.children.length;h++){o+=1;var u=l[h]||e,d=o+(u.count||0);r(n,o,d)&&i(c[h],u,n,a,o),o=d}}return a}function r(t,e,s){if(0===t.length)return!1;var i,r,n=0,a=t.length-1;while(n<=a){if(i=(a+n)/2>>0,r=t[i],n===a)return r>=e&&r<=s;if(r<e)n=i+1;else{if(!(r>s))return!0;a=i-1}}return!1}function n(t,e){return t>e?1:-1}t.exports=s},9120:(t,e,s)=>{var i=s(6672),r=s(4097),n=s(8057),a=s(6670);function o(t,e,s){var r=t.type,a=t.vNode,o=t.patch;switch(r){case n.REMOVE:return l(e,a);case n.INSERT:return c(e,o,s);case n.VTEXT:return h(e,a,o,s);case n.WIDGET:return u(e,a,o,s);case n.VNODE:return d(e,a,o,s);case n.ORDER:return f(e,o),e;case n.PROPS:return i(e,o,a.properties),e;case n.THUNK:return m(e,s.patch(e,o,s));default:return e}}function l(t,e){var s=t.parentNode;return s&&s.removeChild(t),p(t,e),null}function c(t,e,s){var i=s.render(e,s);return t&&t.appendChild(i),t}function h(t,e,s,i){var r;if(3===t.nodeType)t.replaceData(0,t.length,s.text),r=t;else{var n=t.parentNode;r=i.render(s,i),n&&r!==t&&n.replaceChild(r,t)}return r}function u(t,e,s,i){var r,n=a(e,s);r=n?s.update(e,t)||t:i.render(s,i);var o=t.parentNode;return o&&r!==t&&o.replaceChild(r,t),n||p(t,e),r}function d(t,e,s,i){var r=t.parentNode,n=i.render(s,i);return r&&n!==t&&r.replaceChild(n,t),n}function p(t,e){"function"===typeof e.destroy&&r(e)&&e.destroy(t)}function f(t,e){for(var s,i,r,n=t.childNodes,a={},o=0;o<e.removes.length;o++)i=e.removes[o],s=n[i.from],i.key&&(a[i.key]=s),t.removeChild(s);for(var l=n.length,c=0;c<e.inserts.length;c++)r=e.inserts[c],s=a[r.key],t.insertBefore(s,r.to>=l++?null:n[r.to])}function m(t,e){return t&&e&&t!==e&&t.parentNode&&t.parentNode.replaceChild(e,t),e}t.exports=o},6943:(t,e,s)=>{var i=s(9144),r=s(7362),n=s(3513),a=s(8992),o=s(9120);function l(t,e,s){return s=s||{},s.patch=s.patch&&s.patch!==l?s.patch:c,s.render=s.render||n,s.patch(t,e,s)}function c(t,e,s){var r=u(e);if(0===r.length)return t;var n=a(t,e.a,r),o=t.ownerDocument;s.document||o===i||(s.document=o);for(var l=0;l<r.length;l++){var c=r[l];t=h(t,n[c],e[c],s)}return t}function h(t,e,s,i){if(!e)return t;var n;if(r(s))for(var a=0;a<s.length;a++)n=o(s[a],e,i),e===t&&(t=n);else n=o(s,e,i),e===t&&(t=n);return t}function u(t){var e=[];for(var s in t)"a"!==s&&e.push(Number(s));return e}t.exports=l},6670:(t,e,s)=>{var i=s(4097);function r(t,e){return!(!i(t)||!i(e))&&("name"in t&&"name"in e?t.id===e.id:t.init===e.init)}t.exports=r},6505:(t,e,s)=>{"use strict";var i=s(8832);function r(t){if(!(this instanceof r))return new r(t);this.value=t}t.exports=r,r.prototype.hook=function(t,e){var s=i(t),r=e.substr(3);s[r]=this.value},r.prototype.unhook=function(t,e){var s=i(t),r=e.substr(3);s[r]=void 0}},7199:t=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this.value=t}t.exports=e,e.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},8744:(t,e,s)=>{"use strict";var i=s(7362),r=s(4282),n=s(4268),a=s(5170),o=s(6221),l=s(4097),c=s(7265),h=s(6741),u=s(1948),d=s(7199),p=s(6505);function f(t,e,s){var i,n,a,o,l=[];return!s&&y(e)&&(s=e,n={}),n=n||e||{},i=u(t,n),n.hasOwnProperty("key")&&(a=n.key,n.key=void 0),n.hasOwnProperty("namespace")&&(o=n.namespace,n.namespace=void 0),"INPUT"!==i||o||!n.hasOwnProperty("value")||void 0===n.value||c(n.value)||(n.value=d(n.value)),v(n),void 0!==s&&null!==s&&m(s,l,i,n),new r(i,n,l,a,o)}function m(t,e,s,r){if("string"===typeof t)e.push(new n(t));else if("number"===typeof t)e.push(new n(String(t)));else if(g(t))e.push(t);else{if(!i(t)){if(null===t||void 0===t)return;throw b({foreignObject:t,parentVnode:{tagName:s,properties:r}})}for(var a=0;a<t.length;a++)m(t[a],e,s,r)}}function v(t){for(var e in t)if(t.hasOwnProperty(e)){var s=t[e];if(c(s))continue;"ev-"===e.substr(0,3)&&(t[e]=p(s))}}function g(t){return a(t)||o(t)||l(t)||h(t)}function y(t){return"string"===typeof t||i(t)||g(t)}function b(t){var e=new Error;return e.type="virtual-hyperscript.unexpected.virtual-element",e.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+k(t.foreignObject)+".\nThe parent vnode is:\n"+k(t.parentVnode),e.foreignObject=t.foreignObject,e.parentVnode=t.parentVnode,e}function k(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}t.exports=f},1948:(t,e,s)=>{"use strict";var i=s(6824),r=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,n=/^\.|#/;function a(t,e){if(!t)return"DIV";var s,a,o,l,c=!e.hasOwnProperty("id"),h=i(t,r),u=null;for(n.test(h[1])&&(u="DIV"),l=0;l<h.length;l++)a=h[l],a&&(o=a.charAt(0),u?"."===o?(s=s||[],s.push(a.substring(1,a.length))):"#"===o&&c&&(e.id=a.substring(1,a.length)):u=a);return s&&(e.className&&s.push(e.className),e.className=s.join(" ")),e.namespace?u:u.toUpperCase()}t.exports=a},6078:(t,e,s)=>{var i=s(5170),r=s(6221),n=s(4097),a=s(6741);function o(t,e){var s=t,i=e;return a(e)&&(i=l(e,t)),a(t)&&(s=l(t,null)),{a:s,b:i}}function l(t,e){var s=t.vnode;if(s||(s=t.vnode=t.render(e)),!(i(s)||r(s)||n(s)))throw new Error("thunk did not return a valid node");return s}t.exports=o},6741:t=>{function e(t){return t&&"Thunk"===t.type}t.exports=e},7265:t=>{function e(t){return t&&("function"===typeof t.hook&&!t.hasOwnProperty("hook")||"function"===typeof t.unhook&&!t.hasOwnProperty("unhook"))}t.exports=e},5170:(t,e,s)=>{var i=s(9962);function r(t){return t&&"VirtualNode"===t.type&&t.version===i}t.exports=r},6221:(t,e,s)=>{var i=s(9962);function r(t){return t&&"VirtualText"===t.type&&t.version===i}t.exports=r},4097:t=>{function e(t){return t&&"Widget"===t.type}t.exports=e},9962:t=>{t.exports="2"},4282:(t,e,s)=>{var i=s(9962),r=s(5170),n=s(4097),a=s(6741),o=s(7265);t.exports=h;var l={},c=[];function h(t,e,s,i,h){this.tagName=t,this.properties=e||l,this.children=s||c,this.key=null!=i?String(i):void 0,this.namespace="string"===typeof h?h:null;var u,d=s&&s.length||0,p=0,f=!1,m=!1,v=!1;for(var g in e)if(e.hasOwnProperty(g)){var y=e[g];o(y)&&y.unhook&&(u||(u={}),u[g]=y)}for(var b=0;b<d;b++){var k=s[b];r(k)?(p+=k.count||0,!f&&k.hasWidgets&&(f=!0),!m&&k.hasThunks&&(m=!0),v||!k.hooks&&!k.descendantHooks||(v=!0)):!f&&n(k)?"function"===typeof k.destroy&&(f=!0):!m&&a(k)&&(m=!0)}this.count=d+p,this.hasWidgets=f,this.hasThunks=m,this.hooks=u,this.descendantHooks=v}h.prototype.version=i,h.prototype.type="VirtualNode"},8057:(t,e,s)=>{var i=s(9962);function r(t,e,s){this.type=Number(t),this.vNode=e,this.patch=s}r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,t.exports=r,r.prototype.version=i,r.prototype.type="VirtualPatch"},4268:(t,e,s)=>{var i=s(9962);function r(t){this.text=String(t)}t.exports=r,r.prototype.version=i,r.prototype.type="VirtualText"},9973:(t,e,s)=>{var i=s(6240),r=s(7265);function n(t,e){var s;for(var o in t){o in e||(s=s||{},s[o]=void 0);var l=t[o],c=e[o];if(l!==c)if(i(l)&&i(c))if(a(c)!==a(l))s=s||{},s[o]=c;else if(r(c))s=s||{},s[o]=c;else{var h=n(l,c);h&&(s=s||{},s[o]=h)}else s=s||{},s[o]=c}for(var u in e)u in t||(s=s||{},s[u]=e[u]);return s}function a(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=n},3072:(t,e,s)=>{var i=s(7362),r=s(8057),n=s(5170),a=s(6221),o=s(4097),l=s(6741),c=s(6078),h=s(9973);function u(t,e){var s={a:t};return d(t,e,s,0),s}function d(t,e,s,i){if(t!==e){var c=s[i],u=!1;if(l(t)||l(e))v(t,e,s,i);else if(null==e)o(t)||(f(t,s,i),c=s[i]),c=P(c,new r(r.REMOVE,t,e));else if(n(e))if(n(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var d=h(t.properties,e.properties);d&&(c=P(c,new r(r.PROPS,t,d))),c=p(t,e,s,c,i)}else c=P(c,new r(r.VNODE,t,e)),u=!0;else c=P(c,new r(r.VNODE,t,e)),u=!0;else a(e)?a(t)?t.text!==e.text&&(c=P(c,new r(r.VTEXT,t,e))):(c=P(c,new r(r.VTEXT,t,e)),u=!0):o(e)&&(o(t)||(u=!0),c=P(c,new r(r.WIDGET,t,e)));c&&(s[i]=c),u&&f(t,s,i)}}function p(t,e,s,i,a){for(var o=t.children,l=k(o,e.children),c=l.children,h=o.length,u=c.length,p=h>u?h:u,f=0;f<p;f++){var m=o[f],v=c[f];a+=1,m?d(m,v,s,a):v&&(i=P(i,new r(r.INSERT,null,v))),n(m)&&m.count&&(a+=m.count)}return l.moves&&(i=P(i,new r(r.ORDER,t,l.moves))),i}function f(t,e,s){y(t,e,s),m(t,e,s)}function m(t,e,s){if(o(t))"function"===typeof t.destroy&&(e[s]=P(e[s],new r(r.REMOVE,t,null)));else if(n(t)&&(t.hasWidgets||t.hasThunks))for(var i=t.children,a=i.length,c=0;c<a;c++){var h=i[c];s+=1,m(h,e,s),n(h)&&h.count&&(s+=h.count)}else l(t)&&v(t,null,e,s)}function v(t,e,s,i){var n=c(t,e),a=u(n.a,n.b);g(a)&&(s[i]=new r(r.THUNK,null,a))}function g(t){for(var e in t)if("a"!==e)return!0;return!1}function y(t,e,s){if(n(t)){if(t.hooks&&(e[s]=P(e[s],new r(r.PROPS,t,b(t.hooks)))),t.descendantHooks||t.hasThunks)for(var i=t.children,a=i.length,o=0;o<a;o++){var c=i[o];s+=1,y(c,e,s),n(c)&&c.count&&(s+=c.count)}}else l(t)&&v(t,null,e,s)}function b(t){var e={};for(var s in t)e[s]=void 0;return e}function k(t,e){var s=x(e),i=s.keys,r=s.free;if(r.length===e.length)return{children:e,moves:null};var n=x(t),a=n.keys,o=n.free;if(o.length===t.length)return{children:e,moves:null};for(var l=[],c=0,h=r.length,u=0,d=0;d<t.length;d++){var p,f=t[d];f.key?i.hasOwnProperty(f.key)?(p=i[f.key],l.push(e[p])):(p=d-u++,l.push(null)):c<h?(p=r[c++],l.push(e[p])):(p=d-u++,l.push(null))}for(var m=c>=r.length?e.length:r[c],v=0;v<e.length;v++){var g=e[v];g.key?a.hasOwnProperty(g.key)||l.push(g):v>=m&&l.push(g)}for(var y,b=l.slice(),k=0,P=[],S=[],T=0;T<e.length;){var _=e[T];y=b[k];while(null===y&&b.length)P.push(w(b,k,null)),y=b[k];y&&y.key===_.key?(k++,T++):_.key?(y&&y.key&&i[y.key]!==T+1?(P.push(w(b,k,y.key)),y=b[k],y&&y.key===_.key?k++:S.push({key:_.key,to:T})):S.push({key:_.key,to:T}),T++):y&&y.key&&P.push(w(b,k,y.key))}while(k<b.length)y=b[k],P.push(w(b,k,y&&y.key));return P.length!==u||S.length?{children:l,moves:{removes:P,inserts:S}}:{children:l,moves:null}}function w(t,e,s){return t.splice(e,1),{from:e,key:s}}function x(t){for(var e={},s=[],i=t.length,r=0;r<i;r++){var n=t[r];n.key?e[n.key]=r:s.push(r)}return{keys:e,free:s}}function P(t,e){return t?(i(t)?t.push(e):t=[t,e],t):e}t.exports=u},4991:t=>{"use strict";function e(t){for(var e,s=1/0,i=-1/0,r=0,n=t.length;r<n;r++)e=t[r],s>e&&(s=e),i<e&&(i=e);return{min:s,max:i}}function s(t,e){var s=Math.pow(2,e-1),i=t<0?t*s:t*(s-1);return Math.max(-s,Math.min(s-1,i))}function i(t,i,n){var a,o,l,c,h,u,d,p=t.length,f=Math.ceil(p/i),m=r(n,2*f);for(a=0;a<f;a++)o=a*i,l=(a+1)*i>p?p:(a+1)*i,c=t.subarray(o,l),d=e(c),u=s(d.min,n),h=s(d.max,n),m[2*a]=u,m[2*a+1]=h;return m}function r(t,e){return new(new Function(`return Int${t}Array`)())(e)}function n(t,e){var s,i,n=t.length,a=1/n,o=t[0].length/2,l=0,c=0,h=r(e,2*o);for(c=0;c<o;c++){for(s=0,i=0,l=0;l<n;l++)s+=a*t[l][2*c],i+=a*t[l][2*c+1];h[2*c]=s,h[2*c+1]=i}return[h]}function a(t,e){return"number"===typeof t?t:e}t.exports=function(t,e,s,r,o,l){if(e=a(e,1e3),l=a(l,16),null!==s&&void 0!==s||(s=!0),[8,16,32].indexOf(l)<0)throw new Error("Invalid number of bits specified for peaks.");var c,h,u,d,p=t.numberOfChannels,f=[];if(r=a(r,0),o=a(o,t.length),"undefined"===typeof t.subarray)for(c=0;c<p;c++)u=t.getChannelData(c),d=u.subarray(r,o),f.push(i(d,e,l));else f.push(i(t.subarray(r,o),e,l));return s&&f.length>1&&(f=n(f,l)),h=f[0].length/2,{length:h,data:f,bits:l}}},7362:t=>{var e=Array.isArray,s=Object.prototype.toString;function i(t){return"[object Array]"===s.call(t)}t.exports=e||i},5893:()=>{}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i](n,n.exports,s),n.loaded=!0,n.exports}(()=>{s.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return s.d(e,{a:e}),e}})(),(()=>{s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{s.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})();var i={};return(()=>{"use strict";s.r(i),s.d(i,{default:()=>Ot,init:()=>_t});var t=s(2098),e=s.n(t),r=s(4935),n=s.n(r),a=s(8370),o=s.n(a),l=s(347),c=s.n(l),h=s(7921),u=s.n(h),d=s(9720),p=s.n(d),f=s(849),m=s.n(f);function v(t,e){return Math.ceil(t*e)}function g(t,e,s){return t*e/s}function y(t,e,s){return Math.ceil(t*s/e)}function b(t,e){const s=Math.ceil(t.duration*e),i=new OfflineAudioContext(t.numberOfChannels,s,e),r=i.createBufferSource();return r.buffer=t,r.connect(i.destination),r.start(),i.startRendering()}const k=0,w=1,x=2,P=3,S=class{constructor(t,e,s=o()()){this.src=t,this.ac=e,this.audioRequestState=k,this.ee=s}setStateChange(t){this.audioRequestState=t,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}fileProgress(t){let e=0;this.audioRequestState===k&&this.setStateChange(w),t.lengthComputable&&(e=t.loaded/t.total*100),this.ee.emit("loadprogress",e,this.src)}fileLoad(t){const e=t.target.response||t.target.result;return this.setStateChange(x),new Promise(((t,s)=>{this.ac.decodeAudioData(e,(e=>{this.audioBuffer=e,this.setStateChange(P),t(e)}),(t=>{s(null===t?Error("MediaDecodeAudioDataUnknownContentType"):t)}))}))}},T=class extends S{load(){return new Promise(((t,e)=>{if(this.src.type.match(/audio.*/)||this.src.type.match(/video\/ogg/)){const s=new FileReader;s.readAsArrayBuffer(this.src),s.addEventListener("progress",(t=>{super.fileProgress(t)})),s.addEventListener("load",(s=>{const i=super.fileLoad(s);i.then((e=>{t(e)})).catch(e)})),s.addEventListener("error",e)}else e(Error(`Unsupported file type ${this.src.type}`))}))}};class _ extends S{load(){return Promise.resolve(this.src)}}const O=class extends S{load(){return new Promise(((t,e)=>{const s=new XMLHttpRequest;s.open("GET",this.src,!0),s.responseType="arraybuffer",s.send(),s.addEventListener("progress",(t=>{super.fileProgress(t)})),s.addEventListener("load",(s=>{const i=super.fileLoad(s);i.then((e=>{t(e)})).catch(e)})),s.addEventListener("error",(()=>{e(Error(`Track ${this.src} failed to load`))}))}))}},E=class{static createLoader(t,e,s){if(t instanceof Blob)return new T(t,e,s);if(t instanceof AudioBuffer)return new _(t,e,s);if("string"===typeof t)return new O(t,e,s);throw new Error("Unsupported src type")}},R=class{constructor(t){this.playlist=t}hook(t){const e=this.playlist;if(!e.isScrolling){const s=t;if(e.isAutomaticScroll){const s=t.getBoundingClientRect(),i=e.controls.show?e.controls.width:0,r=g(s.width-i,e.samplesPerPixel,e.sampleRate),n=e.isPlaying()?e.playbackSeconds:e.getTimeSelection().start;(n<e.scrollLeft||n>=e.scrollLeft+r)&&(e.scrollLeft=Math.min(n,e.duration-r))}const i=y(e.scrollLeft,e.samplesPerPixel,e.sampleRate);s.scrollLeft=i}}},A=class{constructor(t,e,s,i,r){this.tickInfo=t,this.offset=e,this.samplesPerPixel=s,this.duration=i,this.colors=r}hook(t,e,s){if(void 0!==s&&s.offset===this.offset&&s.duration===this.duration&&s.samplesPerPixel===this.samplesPerPixel)return;const i=t.width,r=t.height,n=t.getContext("2d");n.clearRect(0,0,i,r),n.fillStyle=this.colors.timeColor,Object.keys(this.tickInfo).forEach((t=>{const e=this.tickInfo[t],s=r-e;n.fillRect(t,s,1,e)}))}};class C{constructor(t,e,s,i,r=0,n){this.duration=t,this.offset=e,this.samplesPerPixel=s,this.sampleRate=i,this.marginLeft=r,this.colors=n,this.timeinfo={2e4:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12e3:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},1e4:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5e3:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}getScaleInfo(t){let e=Object.keys(this.timeinfo).map((t=>parseInt(t,10)));e=e.sort(((t,e)=>t-e));for(let s=0;s<e.length;s+=1)if(t<=e[s])return this.timeinfo[e[s]];return this.timeinfo[e[0]]}static formatTime(t){const e=t/1e3;let s=e%60;const i=(e-s)/60;return s<10&&(s=`0${s}`),`${i}:${s}`}render(){const t=y(this.duration,this.samplesPerPixel,this.sampleRate),e=this.sampleRate/this.samplesPerPixel,s=y(this.offset,this.samplesPerPixel,this.sampleRate),i=this.getScaleInfo(this.samplesPerPixel),r={},n=[],a=t+s;let o=0;for(let l=0;l<a;l+=e*i.secondStep){const t=Math.floor(l),e=t-s;t>=s&&(i.marker&&o%i.marker===0?(n.push(c()("div.time",{attributes:{style:`position: absolute; left: ${e}px;`}},[C.formatTime(o)])),r[e]=10):i.bigStep&&o%i.bigStep===0?r[e]=5:i.smallStep&&o%i.smallStep===0&&(r[e]=2)),o+=1e3*i.secondStep}return c()("div.playlist-time-scale",{attributes:{style:`position: relative; left: 0; right: 0; margin-left: ${this.marginLeft}px;`}},[n,c()("canvas",{attributes:{width:t,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new A(r,this.offset,this.samplesPerPixel,this.duration,this.colors)})])}}const j=C;var G,L=s(1730),M=s.n(L),I=s(3520),F=s.n(I),$=new Uint8Array(16);function D(){if(!G&&(G="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!G))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return G($)}const z=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function N(t){return"string"===typeof t&&z.test(t)}const V=N;for(var W=[],U=0;U<256;++U)W.push((U+256).toString(16).substr(1));function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(W[t[e+0]]+W[t[e+1]]+W[t[e+2]]+W[t[e+3]]+"-"+W[t[e+4]]+W[t[e+5]]+"-"+W[t[e+6]]+W[t[e+7]]+"-"+W[t[e+8]]+W[t[e+9]]+"-"+W[t[e+10]]+W[t[e+11]]+W[t[e+12]]+W[t[e+13]]+W[t[e+14]]+W[t[e+15]]).toLowerCase();if(!V(s))throw TypeError("Stringified UUID is invalid");return s}const H=q;function B(t,e,s){t=t||{};var i=t.random||(t.rng||D)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){s=s||0;for(var r=0;r<16;++r)e[s+r]=i[r];return e}return H(i)}const X=B;var Y=s(4991),Z=s.n(Y),J=s(1114);const K=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){t.preventDefault();const e=t.offsetX,s=g(e,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",s,s,this.track)}static getClass(){return".state-cursor"}static getEvents(){return["click"]}},Q=class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitSelection(t){const e=Math.min(t,this.startX),s=Math.max(t,this.startX),i=g(e,this.samplesPerPixel,this.sampleRate),r=g(s,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",i,r,this.track)}complete(t){this.emitSelection(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.startX=t.offsetX;const e=g(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",e,e,this.track)}mousemove(t){this.active&&(t.preventDefault(),this.emitSelection(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-select"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},tt=class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitShift(t){const e=t-this.prevX,s=g(e,this.samplesPerPixel,this.sampleRate);this.prevX=t,this.track.ee.emit("shift",s,this.track)}complete(t){this.emitShift(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.el=t.target,this.prevX=t.offsetX}mousemove(t){this.active&&(t.preventDefault(),this.emitShift(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-shift"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},et=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=t.offsetX,s=g(e,this.samplesPerPixel,this.sampleRate);s>this.track.getStartTime()&&s<this.track.getEndTime()&&this.track.ee.emit("fadein",s-this.track.getStartTime(),this.track)}static getClass(){return".state-fadein"}static getEvents(){return["click"]}},st=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=t.offsetX,s=g(e,this.samplesPerPixel,this.sampleRate);s>this.track.getStartTime()&&s<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-s,this.track)}static getClass(){return".state-fadeout"}static getEvents(){return["click"]}},it={cursor:K,select:Q,shift:tt,fadein:et,fadeout:st};class rt{constructor(t,e,s,i,r,n,a,o){this.peaks=t,this.offset=e,this.color=i,this.bits=s,this.scale=r,this.height=n,this.barWidth=a,this.barGap=o}static drawFrame(t,e,s,i,r,n,a){const o=Math.abs(i*e),l=Math.abs(r*e);t.fillRect(s,0,n,e-l),t.fillRect(s,e+o,n,e-o),0!==a&&t.fillRect(s+n,0,a,2*e)}hook(t,e,s){if(void 0!==s&&s.peaks===this.peaks&&s.scale===this.scale&&s.height===this.height)return;const i=this.scale,r=t.width/i,n=t.getContext("2d"),a=t.height/i/2,o=2**(this.bits-1),l=this.barWidth,c=this.barGap,h=l+c;n.clearRect(0,0,t.width,t.height),n.save(),n.fillStyle=this.color,n.scale(i,i);for(let u=0;u<r;u+=h){const t=this.peaks[2*(u+this.offset)]/o,e=this.peaks[2*(u+this.offset)+1]/o;rt.drawFrame(n,a,u,t,e,l,c)}n.restore()}}const nt=rt;var at=s(6226);class ot{constructor(t,e,s,i){this.type=t,this.shape=e,this.duration=s,this.samplesPerPixel=i}static createCurve(t,e,s){let i,r;switch(e){case J.Y1:i=1;break;case J.h7:i=-1;break;default:throw new Error("Unsupported fade type.")}switch(t){case J._h:r=(0,at.sCurve)(s,i);break;case J.t$:r=(0,at.linear)(s,i);break;case J.Jl:r=(0,at.exponential)(s,i);break;case J.Hp:r=(0,at.logarithmic)(s,10,i);break;default:throw new Error("Unsupported fade shape")}return r}hook(t,e,s){if(void 0!==s&&s.shape===this.shape&&s.type===this.type&&s.duration===this.duration&&s.samplesPerPixel===this.samplesPerPixel)return;const i=t.getContext("2d"),r=t.width,n=t.height,a=ot.createCurve(this.shape,this.type,r),o=a.length;let l=n-a[0]*n;i.clearRect(0,0,t.width,t.height),i.save(),i.strokeStyle="black",i.beginPath(),i.moveTo(0,l);for(let c=1;c<o;c+=1)l=n-a[c]*n,i.lineTo(c,l);i.stroke(),i.restore()}}const lt=ot,ct=class{constructor(t){this.gain=t}hook(t){t.value=100*this.gain,t.title=`${Math.round(100*this.gain)}% volume`}},ht=class{constructor(t){this.stereoPan=t}hook(t){let e;t.value=100*this.stereoPan,e=0===this.stereoPan?"Center":this.stereoPan<0?"Left":"Right";const s=`${Math.abs(Math.round(100*this.stereoPan))}% `;t.title=`Pan: ${0!==this.stereoPan?s:""}${e}`}},ut=1e3,dt=class{constructor(){this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0,this.stereoPan=0}setEventEmitter(t){this.ee=t}setName(t){this.name=t}setCustomClass(t){this.customClass=t}setWaveOutlineColor(t){this.waveOutlineColor=t}setCues(t,e){if(e<t)throw new Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}trim(t,e){const s=this.getStartTime(),i=this.getEndTime(),r=this.cueIn-s;if(s<=t&&i>=t||s<=e&&i>=e){const n=t<s?s:t,a=e>i?i:e;this.setCues(n+r,a+r),t>s&&this.setStartTime(t)}}setStartTime(t){this.startTime=t,this.endTime=t+this.duration}setPlayout(t){this.playout=t}setOfflinePlayout(t){this.offlinePlayout=t}setEnabledStates(t={}){const e={cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0};this.enabledStates=M()({},e,t)}setFadeIn(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade In");const s={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(J.Y1,s.shape,s.start,s.end)}setFadeOut(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade Out");const s={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(J.h7,s.shape,s.start,s.end)}saveFade(t,e,s,i){const r=X();return this.fades[r]={type:t,shape:e,start:s,end:i},r}removeFade(t){delete this.fades[t]}setBuffer(t){this.buffer=t}setPeakData(t){this.peakData=t}calculatePeaks(t,e){const s=v(this.cueIn,e),i=v(this.cueOut,e);this.setPeaks(Z()(this.buffer,t,this.peakData.mono,s,i))}setPeaks(t){this.peaks=t}setState(t){if(this.state=t,this.state&&this.enabledStates[this.state]){const t=it[this.state];this.stateObj=new t(this)}else this.stateObj=void 0}getStartTime(){return this.startTime}getEndTime(){return this.endTime}getDuration(){return this.duration}isPlaying(){return this.playout.isPlaying()}setShouldPlay(t){this.playout.setShouldPlay(t)}setGainLevel(t){this.gain=t,this.playout.setVolumeGainLevel(t)}setMasterGainLevel(t){this.playout.setMasterGainLevel(t)}setStereoPanValue(t){this.stereoPan=t,this.playout.setStereoPanValue(t)}setEffects(t){this.effectsGraph=t,this.playout.setEffects(t)}schedulePlay(t,e,s,i){let r,n,a=t,o=s?s-e:void 0;const l={shouldPlay:!0,masterGain:1,isOffline:!1},c=M()({},l,i),h=c.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=e||o&&e+o<this.startTime)return Promise.resolve();this.startTime>=e?(r=0,a+=this.startTime-e,s?(o-=this.startTime-e,n=Math.min(o,this.duration)):n=this.duration):(r=e-this.startTime,n=s?Math.min(o,this.duration-r):this.duration-r),r+=this.cueIn;const u=e-this.startTime,d=h.setUpSource();return F()(this.fades,(e=>{let s,i;if(u<e.end)switch(u<=e.start?(s=t+(e.start-u),i=e.end-e.start):u>e.start&&u<e.end&&(s=t-(u-e.start),i=e.end-e.start),e.type){case J.Y1:h.applyFadeIn(s,i,e.shape);break;case J.h7:h.applyFadeOut(s,i,e.shape);break;default:throw new Error("Invalid fade type saved on track.")}})),h.setVolumeGainLevel(this.gain),h.setShouldPlay(c.shouldPlay),h.setMasterGainLevel(c.masterGain),h.setStereoPanValue(this.stereoPan),h.play(a,r,n),d}scheduleStop(t=0){this.playout.stop(t)}renderOverlay(t){const e=y(t.playlistLength,t.resolution,t.sampleRate),s={attributes:{style:`position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: ${e}px; z-index: 9;`}};let i="";if(this.stateObj){this.stateObj.setup(t.resolution,t.sampleRate);const e=it[this.state],r=e.getEvents();r.forEach((t=>{s[`on${t}`]=this.stateObj[t].bind(this.stateObj)})),i=e.getClass()}return c()(`div.playlist-overlay${i}`,s)}renderControls(t){const e=t.muted?".active":"",s=t.soloed?".active":"",i=t.collapsed,r=this.peaks.data.length,n=t.controls.widgets,a=c()("button.btn.btn-danger.btn-xs.track-remove",{attributes:{type:"button",title:"Remove track"},onclick:()=>{this.ee.emit("removeTrack",this)}},[c()("i.fas.fa-times")]),o=c()("span",[this.name]),l=c()("button.btn.btn-info.btn-xs.track-collapse",{attributes:{type:"button",title:i?"Expand track":"Collapse track"},onclick:()=>{this.ee.emit("changeTrackView",this,{collapsed:!i})}},[c()("i.fas."+(i?"fa-caret-down":"fa-caret-up"))]),h=[];n.remove&&h.push(a),h.push(o),n.collapse&&h.push(l);const u=[c()("div.track-header",h)];return i||(n.muteOrSolo&&u.push(c()("div.btn-group",[c()(`button.btn.btn-outline-dark.btn-xs.btn-mute${e}`,{attributes:{type:"button"},onclick:()=>{this.ee.emit("mute",this)}},["Mute"]),c()(`button.btn.btn-outline-dark.btn-xs.btn-solo${s}`,{onclick:()=>{this.ee.emit("solo",this)}},["Solo"])])),n.volume&&u.push(c()("label.volume",[c()("input.volume-slider",{attributes:{"aria-label":"Track volume control",type:"range",min:0,max:100,value:100},hook:new ct(this.gain),oninput:t=>{this.ee.emit("volumechange",t.target.value,this)}})])),n.stereoPan&&u.push(c()("label.stereopan",[c()("input.stereopan-slider",{attributes:{"aria-label":"Track stereo pan control",type:"range",min:-100,max:100,value:100},hook:new ht(this.stereoPan),oninput:t=>{this.ee.emit("stereopan",t.target.value/100,this)}})]))),c()("div.controls",{attributes:{style:`height: ${r*t.height}px; width: ${t.controls.width}px; position: absolute; left: 0; z-index: 10;`}},u)}render(t){const e=this.peaks.length,s=y(t.playbackSeconds,t.resolution,t.sampleRate),i=y(this.startTime,t.resolution,t.sampleRate),r=y(this.endTime,t.resolution,t.sampleRate);let n=0;const a=this.peaks.data.length,o=Math.ceil(window.devicePixelRatio);s>0&&s>i&&(n=s<r?s-i:e);const l=[c()("div.cursor",{attributes:{style:`position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: ${s}px; bottom: 0; z-index: 5;`}})],h=Object.keys(this.peaks.data).map((s=>{const r=[c()("div.channel-progress",{attributes:{style:`position: absolute; width: ${n}px; height: ${t.height}px; z-index: 2;`}})];let a=0,l=e;const h=this.peaks.data[s];while(l>0){const e=Math.min(l,ut),s=this.waveOutlineColor?this.waveOutlineColor:t.colors.waveOutlineColor;r.push(c()("canvas",{attributes:{width:e*o,height:t.height*o,style:`float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: ${e}px; height: ${t.height}px;`},hook:new nt(h,a,this.peaks.bits,s,o,t.height,t.barWidth,t.barGap)})),l-=e,a+=ut}if(this.fadeIn){const e=this.fades[this.fadeIn],s=y(e.end-e.start,t.resolution,t.sampleRate);r.push(c()("div.wp-fade.wp-fadein",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${s}px; top: 0; left: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:s,height:t.height},hook:new lt(e.type,e.shape,e.end-e.start,t.resolution)})]))}if(this.fadeOut){const e=this.fades[this.fadeOut],s=y(e.end-e.start,t.resolution,t.sampleRate);r.push(c()("div.wp-fade.wp-fadeout",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${s}px; top: 0; right: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:s,height:t.height},hook:new lt(e.type,e.shape,e.end-e.start,t.resolution)})]))}return c()(`div.channel.channel-${s}`,{attributes:{style:`height: ${t.height}px; width: ${e}px; top: ${s*t.height}px; left: ${i}px; position: absolute; margin: 0; padding: 0; z-index: 1;`}},r)}));if(l.push(h),l.push(this.renderOverlay(t)),!0===t.isActive){const e=y(t.timeSelection.start,t.resolution,t.sampleRate),s=y(t.timeSelection.end,t.resolution,t.sampleRate),i=s-e+1,r=i>1?".segment":".point";l.push(c()(`div.selection${r}`,{attributes:{style:`position: absolute; width: ${i}px; bottom: 0; top: 0; left: ${e}px; z-index: 4;`}}))}const u=c()("div.waveform",{attributes:{style:`height: ${a*t.height}px; position: relative;`}},l),d=[];let p=0;t.controls.show&&(d.push(this.renderControls(t)),p=t.controls.width),d.push(u);const f=t.shouldPlay?"":".silent",m=void 0===this.customClass?"":`.${this.customClass}`;return c()(`div.channel-wrapper${f}${m}`,{attributes:{style:`margin-left: ${p}px; height: ${t.height*a}px;`}},d)}getTrackDetails(){const t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut,stereoPan:this.stereoPan,gain:this.gain,effects:this.effectsGraph};if(this.fadeIn){const e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){const e=this.fades[this.fadeOut];t.fadeOut={shape:e.shape,duration:e.end-e.start}}return t}};function pt(t,e){t.connect(e)}const ft=class{constructor(t,e,s=t.createGain()){this.ac=t,this.gain=1,this.effectsGraph=pt,this.masterEffectsGraph=pt,this.buffer=e,this.masterGain=s,this.destination=this.ac.destination}applyFade(t,e,s,i="logarithmic"){if(t===J.Y1)(0,J.L7)(this.fadeGain.gain,i,e,s);else{if(t!==J.h7)throw new Error("Unsupported fade type");(0,J.Mt)(this.fadeGain.gain,i,e,s)}}applyFadeIn(t,e,s="logarithmic"){this.applyFade(J.Y1,t,e,s)}applyFadeOut(t,e,s="logarithmic"){this.applyFade(J.h7,t,e,s)}isPlaying(){return void 0!==this.source}getDuration(){return this.buffer.duration}setAudioContext(t){this.ac=t,this.destination=this.ac.destination}createStereoPanner(){return this.ac.createStereoPanner?this.ac.createStereoPanner():this.ac.createPanner()}setUpSource(){let t,e;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;const s=new Promise((s=>{this.source.onended=()=>{this.source.disconnect(),this.fadeGain.disconnect(),this.volumeGain.disconnect(),this.shouldPlayGain.disconnect(),this.panner.disconnect(),t&&t(),e&&e(),this.source=void 0,this.fadeGain=void 0,this.volumeGain=void 0,this.shouldPlayGain=void 0,this.panner=void 0,s()}}));return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.panner=this.createStereoPanner(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.panner),t=this.effectsGraph(this.panner,this.masterGain,this.ac instanceof OfflineAudioContext),e=this.masterEffectsGraph(this.masterGain,this.destination,this.ac instanceof OfflineAudioContext),s}setVolumeGainLevel(t){this.volumeGain&&(this.volumeGain.gain.value=t)}setShouldPlay(t){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=t?1:0)}setMasterGainLevel(t){this.masterGain&&(this.masterGain.gain.value=t)}setStereoPanValue(t=0){this.panner&&(void 0!==this.panner.pan?this.panner.pan.value=t:(this.panner.panningModel="equalpower",this.panner.setPosition(t,0,1-Math.abs(t))))}setEffects(t=pt){this.effectsGraph=t}setMasterEffects(t=pt){this.masterEffectsGraph=t}play(t,e,s){this.source.start(t,e,s)}stop(t=0){this.source&&this.source.stop(t)}};function mt(t){const e={id:t.id||X(),start:Number(t.begin)||0,end:Number(t.end)||0,lines:t.lines||[""],lang:t.language||"en"};return e}function vt(t){return{begin:String(t.start.toFixed(3)),end:String(t.end.toFixed(3)),id:String(t.id),language:t.lang,lines:t.lines}}const gt=class{constructor(t,e={}){this.playlist=t,this.data=e,this.active=!1,this.ondragover=t=>{this.active&&(t.preventDefault(),this.emitDrag(t.clientX))}}emitDrag(t){const e=t-this.prevX;if(e){const s=g(e,this.playlist.samplesPerPixel,this.playlist.sampleRate);this.prevX=t,this.playlist.ee.emit("dragged",s,this.data)}}complete(){this.active=!1,document.removeEventListener("dragover",this.ondragover)}dragstart(t){const e=t;this.active=!0,this.prevX=t.clientX,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}dragend(t){this.active&&(t.preventDefault(),this.complete())}static getClass(){return".shift"}static getEvents(){return["dragstart","dragend"]}},yt=function(){};yt.prototype.hook=function(t){const e=t.querySelector(".current");if(e){const s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=i.top-s.top,n=t;n.scrollTop+=r}};const bt=yt;function kt(t){function e(t,e){const s=parseInt(t/3600,10)%24,i=parseInt(t/60,10)%60,r=(t%60).toFixed(e),n=s<10?`0${s}`:s,a=i<10?`0${i}`:i,o=r<10?`0${r}`:r;return`${n}:${a}:${o}`}const s={seconds(t){return t.toFixed(0)},thousandths(t){return t.toFixed(3)},"hh:mm:ss":function(t){return e(t,0)},"hh:mm:ss.u":function(t){return e(t,1)},"hh:mm:ss.uu":function(t){return e(t,2)},"hh:mm:ss.uuu":function(t){return e(t,3)}};return s[t]}class wt{constructor(t,e,s=[],i=!1,r=!1,n=!1,a=0){this.playlist=t,this.marginLeft=a,this.resizeHandlers=[],this.editable=i,this.annotations=e.map((t=>mt(t))),this.setupInteractions(),this.controls=s,this.setupEE(t.ee),this.playlist.isContinuousPlay=n,this.playlist.linkEndpoints=r,this.length=this.annotations.length}setupInteractions(){this.annotations.forEach(((t,e)=>{const s=new gt(this.playlist,{direction:"left",index:e}),i=new gt(this.playlist,{direction:"right",index:e});this.resizeHandlers.push(s),this.resizeHandlers.push(i)}))}setupEE(t){return t.on("dragged",((t,e)=>{const s=e.index,i=this.annotations,r=i[s];if("left"===e.direction){const e=r.start;r.start+=t,r.start<0&&(r.start=0),s&&i[s-1].end>r.start&&(i[s-1].end=r.start),this.playlist.linkEndpoints&&s&&i[s-1].end===e&&(i[s-1].end=r.start)}else{const e=r.end;r.end+=t,r.end>this.playlist.duration&&(r.end=this.playlist.duration),s<i.length-1&&i[s+1].start<r.end&&(i[s+1].start=r.end),this.playlist.linkEndpoints&&s<i.length-1&&i[s+1].start===e&&(i[s+1].start=r.end)}this.playlist.drawRequest()})),t.on("continuousplay",(t=>{this.playlist.isContinuousPlay=t})),t.on("linkendpoints",(t=>{this.playlist.linkEndpoints=t})),t.on("annotationsrequest",(()=>{this.export()})),t}export(){const t=this.annotations.map((t=>vt(t))),e=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`,s=document.createElement("a");document.body.appendChild(s),s.href=e,s.download="annotations.json",s.click(),document.body.removeChild(s)}renderResizeLeft(t){const e=gt.getEvents(),s={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},i=this.resizeHandlers[2*t];return e.forEach((t=>{s[`on${t}`]=i[t].bind(i)})),c()("div.resize-handle.resize-w",s)}renderResizeRight(t){const e=gt.getEvents(),s={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},i=this.resizeHandlers[2*t+1];return e.forEach((t=>{s[`on${t}`]=i[t].bind(i)})),c()("div.resize-handle.resize-e",s)}renderControls(t,e){const s=this;return this.controls.map((i=>c()(`i.${i.class}`,{attributes:{title:i.title},onclick:()=>{i.action(t,e,s.annotations,{linkEndpoints:s.playlist.linkEndpoints}),this.setupInteractions(),s.playlist.drawRequest()}})))}render(){const t=c()("div.annotations-boxes",{attributes:{style:`height: 30px; position: relative; margin-left: ${this.marginLeft}px;`}},this.annotations.map(((t,e)=>{const s=this.playlist.samplesPerPixel,i=this.playlist.sampleRate,r=i/s,n=y(this.playlist.scrollLeft,s,i),a=Math.floor(t.start*r-n),o=Math.ceil(t.end*r-t.start*r);return c()("div.annotation-box",{attributes:{style:`position: absolute; height: 30px; width: ${o}px; left: ${a}px`,"data-id":t.id}},[this.renderResizeLeft(e),c()("span.id",{onclick:()=>{const t=this.annotations[e].start,s=this.annotations[e].end;this.playlist.isContinuousPlay?(this.playlist.seek(t,t),this.playlist.ee.emit("play",t)):(this.playlist.seek(t,s),this.playlist.ee.emit("play",t,s))}},[t.id]),this.renderResizeRight(e)])}))),e=c()("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[t]),s=c()("div.annotations-text",{hook:new bt},this.annotations.map(((t,e)=>{const s=kt(this.playlist.durationFormat),i=s(t.start),r=s(t.end);let n="";this.playlist.isPlaying()&&this.playlist.playbackSeconds>=t.start&&this.playlist.playbackSeconds<=t.end&&(n=".current");const a={attributes:{contenteditable:!0},oninput:e=>{t.lines=[e.target.innerText]},onkeypress:t=>{13!==t.which&&13!==t.keyCode||(t.target.blur(),t.preventDefault())}},o=this.editable?a:{};return c()(`div.annotation${n}`,[c()("span.annotation-id",[t.id]),c()("span.annotation-start",[i]),c()("span.annotation-end",[r]),c()("span.annotation-lines",o,[t.lines]),c()("span.annotation-actions",this.renderControls(t,e))])})));return c()("div.annotations",[e,s])}}const xt=wt;function Pt(){function t(t){let e,s=1/0,i=-1/0;for(let r=0;r<t.length;r+=1)e=t[r],s>e&&(s=e),i<e&&(i=e);return{min:s,max:i}}function e(t,e){const s=2**(e-1),i=t<0?t*s:t*s-1;return Math.max(-s,Math.min(s-1,i))}function s(s,i,r){const n=s.length,a=Math.ceil(n/i);let o,l,c,h,u,d;const p=new self[`Int${r}Array`](2*a);for(let f=0;f<a;f+=1)o=f*i,l=(f+1)*i>n?n:(f+1)*i,c=s.subarray(o,l),d=t(c),u=e(d.min,r),h=e(d.max,r),p[2*f]=u,p[2*f+1]=h;return p}function i(t,e=1e4,i=8){if([8,16,32].indexOf(i)<0)throw new Error("Invalid number of bits specified for peaks.");const r=[],n=0,a=t.length;r.push(s(t.subarray(n,a),e,i));const o=r[0].length/2;return{bits:i,length:o,data:r}}onmessage=function(t){const e=i(t.data.samples,t.data.samplesPerPixel);postMessage(e)}}function St(){let t,e=0,s=[],i=[];function r(e){t=e.sampleRate}function n(t){s.push(t[0]),i.push(t[1]),e+=t[0].length}function a(t,e,s){for(let i=0;i<s.length;i+=1)t.setUint8(e+i,s.charCodeAt(i))}function o(t,e,s){let i=e;for(let r=0;r<s.length;r+=1,i+=2){const e=Math.max(-1,Math.min(1,s[r]));t.setInt16(i,e<0?32768*e:32767*e,!0)}}function l(e,s=!1){const i=new ArrayBuffer(44+2*e.length),r=new DataView(i);return a(r,0,"RIFF"),r.setUint32(4,32+2*e.length,!0),a(r,8,"WAVE"),a(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,s?1:2,!0),r.setUint32(24,t,!0),r.setUint32(28,4*t,!0),r.setUint16(32,4,!0),r.setUint16(34,16,!0),a(r,36,"data"),r.setUint32(40,2*e.length,!0),o(r,44,e),r}function c(t,e){const s=new Float32Array(e);let i=0;for(let r=0;r<t.length;r+=1)s.set(t[r],i),i+=t[r].length;return s}function h(t,e){const s=t.length+e.length,i=new Float32Array(s);let r=0,n=0;while(r<s)i[r+=1]=t[n],i[r+=1]=e[n],n+=1;return i}function u(t){const r=c(s,e),n=c(i,e),a=h(r,n),o=l(a),u=new Blob([o],{type:t});postMessage(u)}function d(){e=0,s=[],i=[]}onmessage=function(t){switch(t.data.command){case"init":r(t.data.config);break;case"record":n(t.data.buffer);break;case"exportWAV":u(t.data.type);break;case"clear":d();break;default:throw new Error("Unknown export worker command")}}}const Tt=class{constructor(){this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.collapsedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0}initExporter(){this.exportWorker=new(m())(St)}initRecorder(t){this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstart=()=>{const t=new dt;t.setName("Recording"),t.setEnabledStates(),t.setEventEmitter(this.ee),this.recordingTrack=t,this.tracks.push(t),this.chunks=[],this.working=!1},this.mediaRecorder.ondataavailable=t=>{if(this.chunks.push(t.data),!this.working){const t=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"}),e=E.createLoader(t,this.ac);e.load().then((t=>{this.recorderWorker.postMessage({samples:t.getChannelData(0),samplesPerPixel:this.samplesPerPixel}),this.recordingTrack.setCues(0,t.duration),this.recordingTrack.setBuffer(t),this.recordingTrack.setPlayout(new ft(this.ac,t,this.masterGainNode)),this.adjustDuration()})).catch((()=>{this.working=!1})),this.working=!0}},this.mediaRecorder.onstop=()=>{this.chunks=[],this.working=!1},this.recorderWorker=new(m())(Pt),this.recorderWorker.onmessage=t=>{this.recordingTrack.setPeaks(t.data),this.working=!1,this.drawRequest()}}setShowTimeScale(t){this.showTimescale=t}setMono(t){this.mono=t}setExclSolo(t){this.exclSolo=t}setSeekStyle(t){this.seekStyle=t}getSeekStyle(){return this.seekStyle}setSampleRate(t){this.sampleRate=t}setSamplesPerPixel(t){this.samplesPerPixel=t}setAudioContext(t){this.ac=t,this.masterGainNode=t.createGain()}getAudioContext(){return this.ac}setControlOptions(t){this.controls=t}setWaveHeight(t){this.waveHeight=t}setCollapsedWaveHeight(t){this.collapsedWaveHeight=t}setColors(t){this.colors=t}setBarWidth(t){this.barWidth=t}setBarGap(t){this.barGap=t}setAnnotations(t){const e=this.controls.show?this.controls.width:0;this.annotationList=new xt(this,t.annotations,t.controls,t.editable,t.linkEndpoints,t.isContinuousPlay,e)}setEffects(t){this.effectsGraph=t}setEventEmitter(t){this.ee=t}getEventEmitter(){return this.ee}setUpEventEmitter(){const t=this.ee;t.on("automaticscroll",(t=>{this.isAutomaticScroll=t})),t.on("durationformat",(t=>{this.durationFormat=t,this.drawRequest()})),t.on("select",((t,e,s)=>{this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.seek(t,e,s),this.ee.emit("timeupdate",t),this.drawRequest())})),t.on("startaudiorendering",(t=>{this.startOfflineRender(t)})),t.on("statechange",(t=>{this.setState(t),this.drawRequest()})),t.on("shift",((t,e)=>{e.setStartTime(e.getStartTime()+t),this.adjustDuration(),this.drawRequest()})),t.on("record",(()=>{this.record()})),t.on("play",((t,e)=>{this.play(t,e)})),t.on("pause",(()=>{this.pause()})),t.on("stop",(()=>{this.stop()})),t.on("rewind",(()=>{this.rewind()})),t.on("fastforward",(()=>{this.fastForward()})),t.on("clear",(()=>{this.clear().then((()=>{this.drawRequest()}))})),t.on("solo",(t=>{this.soloTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("mute",(t=>{this.muteTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("removeTrack",(t=>{this.removeTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("changeTrackView",((t,e)=>{this.collapseTrack(t,e),this.drawRequest()})),t.on("volumechange",((t,e)=>{e.setGainLevel(t/100),this.drawRequest()})),t.on("mastervolumechange",(t=>{this.masterGain=t/100,this.tracks.forEach((t=>{t.setMasterGainLevel(this.masterGain)}))})),t.on("fadein",((t,e)=>{e.setFadeIn(t,this.fadeType),this.drawRequest()})),t.on("fadeout",((t,e)=>{e.setFadeOut(t,this.fadeType),this.drawRequest()})),t.on("stereopan",((t,e)=>{e.setStereoPanValue(t),this.drawRequest()})),t.on("fadetype",(t=>{this.fadeType=t})),t.on("newtrack",(t=>{this.load([{src:t,name:t.name}])})),t.on("trim",(()=>{const t=this.getActiveTrack(),e=this.getTimeSelection();t.trim(e.start,e.end),t.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.setTimeSelection(0,0),this.drawRequest()})),t.on("zoomin",(()=>{const t=Math.max(0,this.zoomIndex-1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())})),t.on("zoomout",(()=>{const t=Math.min(this.zoomLevels.length-1,this.zoomIndex+1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())})),t.on("scroll",(()=>{this.isScrolling=!0,this.drawRequest(),clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((()=>{this.isScrolling=!1}),200)}))}load(t){const e=t.map((t=>{const e=E.createLoader(t.src,this.ac,this.ee);return e.load().then((t=>t.sampleRate===this.sampleRate?t:b(t,this.sampleRate)))}));return Promise.all(e).then((e=>{this.ee.emit("audiosourcesloaded");const s=e.map(((e,s)=>{const i=t[s],r=i.name||"Untitled",n=i.start||0,a=i.states||{},o=i.fadeIn,l=i.fadeOut,c=i.cuein||0,h=i.cueout||e.duration,u=i.gain||1,d=i.muted||!1,p=i.soloed||!1,f=i.selected,m=i.peaks||{type:"WebAudio",mono:this.mono},v=i.customClass||void 0,g=i.waveOutlineColor||void 0,y=i.stereoPan||0,b=i.effects||null,k=new ft(this.ac,e,this.masterGainNode),w=new dt;return w.src=i.src,w.setBuffer(e),w.setName(r),w.setEventEmitter(this.ee),w.setEnabledStates(a),w.setCues(c,h),w.setCustomClass(v),w.setWaveOutlineColor(g),void 0!==o&&w.setFadeIn(o.duration,o.shape),void 0!==l&&w.setFadeOut(l.duration,l.shape),void 0!==f&&(this.setActiveTrack(w),this.setTimeSelection(f.start,f.end)),void 0!==m&&w.setPeakData(m),w.setState(this.getState()),w.setStartTime(n),w.setPlayout(k),w.setGainLevel(u),w.setStereoPanValue(y),b&&w.setEffects(b),d&&this.muteTrack(w),p&&this.soloTrack(w),w.calculatePeaks(this.samplesPerPixel,this.sampleRate),w}));this.tracks=this.tracks.concat(s),this.adjustDuration(),this.draw(this.render()),this.ee.emit("audiosourcesrendered")})).catch((t=>{this.ee.emit("audiosourceserror",t)}))}setActiveTrack(t){this.activeTrack=t}getActiveTrack(){return this.activeTrack}isSegmentSelection(){return this.timeSelection.start!==this.timeSelection.end}setTimeSelection(t=0,e){this.timeSelection={start:t,end:void 0===e?t:e},this.cursor=t}async startOfflineRender(t){if(this.isRendering)return;this.isRendering=!0,this.offlineAudioContext=new OfflineAudioContext(2,44100*this.duration,44100);const e=[];this.ee.emit("audiorenderingstarting",this.offlineAudioContext,e);const s=this.offlineAudioContext.currentTime,i=this.offlineAudioContext.createGain();this.tracks.forEach((t=>{const e=new ft(this.offlineAudioContext,t.buffer,i);e.setEffects(t.effectsGraph),e.setMasterEffects(this.effectsGraph),t.setOfflinePlayout(e),t.schedulePlay(s,0,0,{shouldPlay:this.shouldTrackPlay(t),masterGain:1,isOffline:!0})})),await Promise.all(e);const r=await this.offlineAudioContext.startRendering();"buffer"===t?(this.ee.emit("audiorenderingfinished",t,r),this.isRendering=!1):"wav"===t&&(this.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),this.exportWorker.onmessage=e=>{this.ee.emit("audiorenderingfinished",t,e.data),this.isRendering=!1,this.exportWorker.postMessage({command:"clear"})},this.exportWorker.postMessage({command:"record",buffer:[r.getChannelData(0),r.getChannelData(1)]}),this.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}))}getTimeSelection(){return this.timeSelection}setState(t){this.state=t,this.tracks.forEach((e=>{e.setState(t)}))}getState(){return this.state}setZoomIndex(t){this.zoomIndex=t}setZoomLevels(t){this.zoomLevels=t}setZoom(t){this.samplesPerPixel=t,this.zoomIndex=this.zoomLevels.indexOf(t),this.tracks.forEach((e=>{e.calculatePeaks(t,this.sampleRate)}))}muteTrack(t){const e=this.mutedTracks.indexOf(t);e>-1?this.mutedTracks.splice(e,1):this.mutedTracks.push(t)}soloTrack(t){const e=this.soloedTracks.indexOf(t);e>-1?this.soloedTracks.splice(e,1):this.exclSolo?this.soloedTracks=[t]:this.soloedTracks.push(t)}collapseTrack(t,e){if(e.collapsed)this.collapsedTracks.push(t);else{const e=this.collapsedTracks.indexOf(t);e>-1&&this.collapsedTracks.splice(e,1)}}removeTrack(t){t.isPlaying()&&t.scheduleStop();const e=[this.mutedTracks,this.soloedTracks,this.collapsedTracks,this.tracks];e.forEach((e=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)}))}adjustTrackPlayout(){this.tracks.forEach((t=>{t.setShouldPlay(this.shouldTrackPlay(t))}))}adjustDuration(){this.duration=this.tracks.reduce(((t,e)=>Math.max(t,e.getEndTime())),0)}shouldTrackPlay(t){let e;return this.soloedTracks.length>0?(e=!1,this.soloedTracks.indexOf(t)>-1&&(e=!0)):(e=!0,this.mutedTracks.indexOf(t)>-1&&(e=!1)),e}isPlaying(){return this.tracks.reduce(((t,e)=>t||e.isPlaying()),!1)}getCurrentTime(){const t=this.lastSeeked||this.pausedAt||this.cursor;return t+this.getElapsedTime()}getElapsedTime(){return this.ac.currentTime-this.lastPlay}setMasterGain(t){this.ee.emit("mastervolumechange",t)}restartPlayFrom(t,e){return this.stopAnimation(),this.tracks.forEach((t=>{t.scheduleStop()})),Promise.all(this.playoutPromises).then(this.play.bind(this,t,e))}play(t,e){clearTimeout(this.resetDrawTimer);const s=this.ac.currentTime,i=this.getTimeSelection(),r=[],n=t||this.pausedAt||this.cursor;let a=e;return!a&&i.end!==i.start&&i.end>n&&(a=i.end),this.isPlaying()?this.restartPlayFrom(n,a):(this.effectsGraph&&this.tracks&&this.tracks[0].playout.setMasterEffects(this.effectsGraph),this.tracks.forEach((t=>{t.setState("cursor"),r.push(t.schedulePlay(s,n,a,{shouldPlay:this.shouldTrackPlay(t),masterGain:this.masterGain}))})),this.lastPlay=s,this.playoutPromises=r,this.startAnimation(n),Promise.all(this.playoutPromises))}pause(){return this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):Promise.all(this.playoutPromises)}stop(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}playbackReset(){return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach((t=>{t.scheduleStop(),t.setState(this.getState())})),this.masterGainNode.disconnect(),this.drawRequest(),Promise.all(this.playoutPromises)}rewind(){return this.stop().then((()=>{this.scrollLeft=0,this.ee.emit("select",0,0)}))}fastForward(){return this.stop().then((()=>{this.viewDuration<this.duration?this.scrollLeft=this.duration-this.viewDuration:this.scrollLeft=0,this.ee.emit("select",this.duration,this.duration)}))}clear(){return this.stop().then((()=>{this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.seek(0,0,void 0)}))}record(){const t=[];this.mediaRecorder.start(300),this.tracks.forEach((e=>{e.setState("none"),t.push(e.schedulePlay(this.ac.currentTime,0,void 0,{shouldPlay:this.shouldTrackPlay(e)}))})),this.playoutPromises=t}startAnimation(t){this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame((()=>{this.updateEditor(t)}))}stopAnimation(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}seek(t,e,s){this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.setActiveTrack(s||this.tracks[0]),this.pausedAt=t,this.setTimeSelection(t,e),"fill"===this.getSeekStyle()&&(this.playbackSeconds=t))}updateEditor(t){const e=this.ac.currentTime,s=this.getTimeSelection(),i=t||this.cursor,r=e-this.lastDraw;if(this.isPlaying()){const t=i+r;this.ee.emit("timeupdate",t),this.animationRequest=window.requestAnimationFrame((()=>{this.updateEditor(t)})),this.playbackSeconds=t,this.draw(this.render()),this.lastDraw=e}else i+r>=(this.isSegmentSelection()?s.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout((()=>{this.pausedAt=void 0,this.lastSeeked=void 0,this.setState(this.getState()),this.playbackSeconds=0,this.draw(this.render())}),0)}drawRequest(){window.requestAnimationFrame((()=>{this.draw(this.render())}))}draw(t){const e=u()(this.tree,t);this.rootNode=p()(this.rootNode,e),this.tree=t,this.viewDuration=g(this.rootNode.clientWidth-this.controls.width,this.samplesPerPixel,this.sampleRate)}getTrackRenderData(t={}){const s={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors,barWidth:this.barWidth,barGap:this.barGap};return e()({},t,s)}isActiveTrack(t){const e=this.getActiveTrack();return!this.isSegmentSelection()||e===t}renderAnnotations(){return this.annotationList.render()}renderTimeScale(){const t=this.controls.show?this.controls.width:0,e=new j(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,t,this.colors);return e.render()}renderTrackSection(){const t=this.tracks.map((t=>{const e=this.collapsedTracks.indexOf(t)>-1;return t.render(this.getTrackRenderData({isActive:this.isActiveTrack(t),shouldPlay:this.shouldTrackPlay(t),soloed:this.soloedTracks.indexOf(t)>-1,muted:this.mutedTracks.indexOf(t)>-1,collapsed:e,height:e?this.collapsedWaveHeight:this.waveHeight,barGap:this.barGap,barWidth:this.barWidth}))}));return c()("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:t=>{this.scrollLeft=g(t.target.scrollLeft,this.samplesPerPixel,this.sampleRate),this.ee.emit("scroll")},hook:new R(this)},t)}render(){const t=[];return this.showTimescale&&t.push(this.renderTimeScale()),t.push(this.renderTrackSection()),this.annotationList.length&&t.push(this.renderAnnotations()),c()("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},t)}getInfo(){const t=[];return this.tracks.forEach((e=>{t.push(e.getTrackDetails())})),{tracks:t,effects:this.effectsGraph}}};function _t(t={},s=o()()){if(void 0===t.container)throw new Error("DOM element container must be given.");const i={samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150,widgets:{muteOrSolo:!0,volume:!0,stereoPan:!0,collapse:!0,remove:!0}},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,collapsedWaveHeight:30,barWidth:1,barGap:0,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1},r=e()({},t,i),a=r.zoomLevels.indexOf(r.samplesPerPixel);if(-1===a)throw new Error("initial samplesPerPixel must be included in array zoomLevels");const l=new Tt,c=r.ac||new AudioContext;l.setAudioContext(c),l.setSampleRate(r.sampleRate||c.sampleRate),l.setSamplesPerPixel(r.samplesPerPixel),l.setEventEmitter(s),l.setUpEventEmitter(),l.setTimeSelection(0,0),l.setState(r.state),l.setControlOptions(r.controls),l.setWaveHeight(r.waveHeight),l.setCollapsedWaveHeight(r.collapsedWaveHeight),l.setColors(r.colors),l.setZoomLevels(r.zoomLevels),l.setZoomIndex(a),l.setMono(r.mono),l.setExclSolo(r.exclSolo),l.setShowTimeScale(r.timescale),l.setSeekStyle(r.seekStyle),l.setAnnotations(r.annotationList),l.setBarGap(r.barGap),l.setBarWidth(r.barWidth),l.isAutomaticScroll=r.isAutomaticScroll,l.isContinuousPlay=r.isContinuousPlay,l.linkedEndpoints=r.linkedEndpoints,r.effects&&l.setEffects(r.effects);const h=l.render(),u=n()(h);return r.container.appendChild(u),l.tree=h,l.rootNode=u,l}function Ot(t={},e=o()()){return _t(t,e)}})(),i})()}))}}]);
//# sourceMappingURL=521.js.map