{"version":3,"file":"js/570.js","mappings":"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","sources":["webpack://app/./src/components/KeywordsField.vue?19b5","webpack://app/./src/components/KeywordsFieldEditor.vue?456a","webpack://app/src/components/KeywordsFieldEditor.vue","webpack://app/./src/components/KeywordsFieldEditor.vue?12f0","webpack://app/./src/components/KeywordsFieldEditor.vue","webpack://app/src/components/KeywordsField.vue","webpack://app/./src/components/KeywordsField.vue?462f","webpack://app/./src/components/KeywordsField.vue","webpack://app/./src/components/SingleKeyword.vue?f4be","webpack://app/src/components/SingleKeyword.vue","webpack://app/./src/components/SingleKeyword.vue?00e5","webpack://app/./src/components/SingleKeyword.vue","webpack://app/./src/components/publications/agora/AgoraExport.vue?fa7b","webpack://app/./src/utils/scrollToY.js","webpack://app/src/components/publications/agora/AgoraExport.vue","webpack://app/./src/components/publications/agora/AgoraExport.vue?a593","webpack://app/./src/components/publications/agora/AgoraExport.vue","webpack://app/./src/components/KeywordsFieldEditor.vue?2c16","webpack://app/./src/components/SingleKeyword.vue?b445","webpack://app/./src/components/publications/agora/AgoraExport.vue?e13c","webpack://app/./src/components/KeywordsFieldEditor.vue?e44b","webpack://app/./src/components/SingleKeyword.vue?5d5e","webpack://app/./src/components/publications/agora/AgoraExport.vue?9b07"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_keywordsField\"},[(_vm.label)?_c('DLabel',{staticClass:\"_label\",attrs:{\"str\":_vm.label}}):_vm._e(),(_vm.keywords.length > 0)?_c('div',{staticClass:\"u-keywords\"},_vm._l((_vm.keywords),function(keyword){return _c('SingleKeyword',{key:keyword,attrs:{\"keyword\":keyword}})}),1):_vm._e(),(_vm.can_edit)?_c('EditBtn',{on:{\"click\":_vm.enableEditMode}}):_vm._e(),(_vm.edit_mode)?_c('BaseModal2',{attrs:{\"title\":_vm.label},on:{\"close\":function($event){_vm.edit_mode = false}}},[(_vm.new_keywords.length > 0)?_c('div',{staticClass:\"u-keywords\"},_vm._l((_vm.new_keywords),function(keyword){return _c('SingleKeyword',{key:keyword,attrs:{\"keyword\":keyword,\"can_remove\":true},on:{\"remove\":function($event){return _vm.removeKeyword(keyword)}}})}),1):_vm._e(),_c('hr'),_c('KeywordsFieldEditor',{attrs:{\"keywords\":_vm.new_keywords},on:{\"update:keywords\":function($event){_vm.new_keywords = $event}}}),_c('hr'),_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.$t('advanced_options')}}),_c('div',{staticClass:\"u-sameRow\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.new_keywords_stringified),expression:\"new_keywords_stringified\"}],ref:\"urlToCopy\",attrs:{\"type\":\"text\",\"size\":\"small\"},domProps:{\"value\":(_vm.new_keywords_stringified)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.new_keywords_stringified=$event.target.value}}}),_c('button',{staticClass:\"u-button u-button_icon u-suffix _clipboardBtn\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.copyToClipboard}},[(!_vm.is_copied)?_c('b-icon',{attrs:{\"icon\":\"clipboard\"}}):_c('b-icon',{attrs:{\"icon\":\"clipboard-check\"}})],1)])],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('SaveCancelButtons',{staticClass:\"_scb\",on:{\"save\":_vm.updateKeywords,\"cancel\":_vm.cancel}})],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_keywordsFieldEditor\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user_suggestion),expression:\"user_suggestion\"}],ref:\"keywordField\",attrs:{\"type\":\"text\",\"required\":\"\",\"placeholder\":_vm.$t('keyword_materials_etc')},domProps:{\"value\":(_vm.user_suggestion)},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }$event.preventDefault();return _vm.$emit('cancelEdit')},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();return _vm.newKeyword.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if(!$event.shiftKey){ return null; }if($event.ctrlKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();return _vm.submitFirstSuggestion.apply(null, arguments)}],\"input\":function($event){if($event.target.composing){ return; }_vm.user_suggestion=$event.target.value}}}),_c('div',{staticClass:\"u-instructions\"},[_c('small',[(_vm.suggested_keywords.length > 0)?[_vm._v(\" \"+_vm._s(_vm.$t(\"validate_with_shift_enter\"))+\" \")]:(_vm.user_suggestion.length > 0)?[_vm._v(_vm._s(_vm.$t(\"create_new_keyword_enter\")))]:_vm._e()],2)]),_c('div',{staticClass:\"_catSug\"},[(!_vm.suggestion_from_category)?_c('div',{staticClass:\"_categories\"},_vm._l((_vm.categories_with_keywords),function(category){return _c('button',{key:category,staticClass:\"u-button _category\",style:(_vm.getCatColor(category)),attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggleCategory(category)}}},[_vm._v(\" \"+_vm._s(category)+\" (\"+_vm._s(_vm.matchingKeywordsWithCategory(category).length)+\") \")])}),0):_c('div',[_c('button',{staticClass:\"u-button _category\",style:(_vm.getCatColor(_vm.suggestion_from_category)),attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggleCategory(_vm.suggestion_from_category)}}},[_vm._v(\" \"+_vm._s(_vm.suggestion_from_category)+\" (\"+_vm._s(_vm.matchingKeywordsWithCategory(_vm.suggestion_from_category).length)+\")   \"),_c('b-icon',{attrs:{\"icon\":\"x-circle\"}})],1)]),(_vm.suggested_keywords.length > 0)?_c('div',{staticClass:\"_suggestions\"},[_c('div',{staticClass:\"u-keywords\"},_vm._l((_vm.suggested_keywords),function(suggested_keyword,index){return _c('SingleKeyword',{key:suggested_keyword,class:{\n            'is--first': index === 0,\n          },attrs:{\"keyword\":suggested_keyword,\"can_add\":true},on:{\"add\":function($event){return _vm.addKeyword(suggested_keyword)}}})}),1)]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_keywordsFieldEditor\">\n    <input\n      type=\"text\"\n      v-model=\"user_suggestion\"\n      ref=\"keywordField\"\n      required\n      :placeholder=\"$t('keyword_materials_etc')\"\n      @keydown.esc.prevent=\"$emit('cancelEdit')\"\n      @keydown.enter.exact.prevent=\"newKeyword\"\n      @keydown.enter.shift.exact.prevent=\"submitFirstSuggestion\"\n    />\n    <div class=\"u-instructions\">\n      <small>\n        <template v-if=\"suggested_keywords.length > 0\">\n          {{ $t(\"validate_with_shift_enter\") }}\n        </template>\n        <template v-else-if=\"user_suggestion.length > 0\">{{\n          $t(\"create_new_keyword_enter\")\n        }}</template>\n      </small>\n    </div>\n\n    <div class=\"_catSug\">\n      <div class=\"_categories\" v-if=\"!suggestion_from_category\">\n        <button\n          v-for=\"category in categories_with_keywords\"\n          type=\"button\"\n          class=\"u-button _category\"\n          :key=\"category\"\n          :style=\"getCatColor(category)\"\n          @click=\"toggleCategory(category)\"\n        >\n          {{ category }}\n          ({{ matchingKeywordsWithCategory(category).length }})\n        </button>\n      </div>\n      <div v-else>\n        <button\n          type=\"button\"\n          class=\"u-button _category\"\n          :style=\"getCatColor(suggestion_from_category)\"\n          @click=\"toggleCategory(suggestion_from_category)\"\n        >\n          {{ suggestion_from_category }}\n          ({{ matchingKeywordsWithCategory(suggestion_from_category).length }})\n          &nbsp;\n          <b-icon icon=\"x-circle\" />\n        </button>\n      </div>\n\n      <div class=\"_suggestions\" v-if=\"suggested_keywords.length > 0\">\n        <div class=\"u-keywords\">\n          <SingleKeyword\n            v-for=\"(suggested_keyword, index) in suggested_keywords\"\n            :key=\"suggested_keyword\"\n            :class=\"{\n              'is--first': index === 0,\n            }\"\n            :keyword=\"suggested_keyword\"\n            :can_add=\"true\"\n            @add=\"addKeyword(suggested_keyword)\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SingleKeyword from \"@/components/SingleKeyword.vue\";\n\nexport default {\n  props: {\n    keywords: Array,\n  },\n  components: {\n    SingleKeyword,\n  },\n  data() {\n    return {\n      user_suggestion: \"\",\n      suggestion_from_category: false,\n      categories: [],\n\n      path: \"categories\",\n    };\n  },\n  i18n: {\n    messages: {\n      fr: {\n        validate_with_shift_enter:\n          \"Validez la première suggestion avec SHIFT+ENTRÉE, ou créez un nouveau mot-clé avec ENTRÉE.\",\n        create_new_keyword_enter: \"Créez un nouveau mot-clé avec ENTRÉE.\",\n      },\n      en: {\n        validate_with_shift_enter:\n          \"Add first suggestion with SHIFT+ENTER, or create a new keyword with ENTER.\",\n        create_new_keyword_enter: \"Create a new keyword with ENTER.\",\n      },\n    },\n  },\n\n  async created() {\n    this.categories = await this.$api.getFolders({\n      path: this.path,\n    });\n    this.$api.join({ room: this.path });\n  },\n  async mounted() {},\n  beforeDestroy() {\n    this.$api.leave({ room: this.path });\n  },\n  watch: {},\n  computed: {\n    all_categories() {\n      return this.categories.map((c) => c.title);\n    },\n    all_keywords() {\n      return this.categories.reduce((acc, category) => {\n        if (category.title && category.list_of_suggestions) {\n          category.list_of_suggestions.map((item) => {\n            acc.push(category.title + \"/\" + item);\n          });\n        }\n        return acc;\n      }, []);\n    },\n    categories_with_keywords() {\n      return this.all_categories.filter((c) => {\n        return this.matchingKeywordsWithCategory(c).length > 0;\n      });\n    },\n    suggested_keywords() {\n      return this.matchingKeywordsWithCategory(this.suggestion_from_category);\n    },\n  },\n  methods: {\n    matchingKeywordsWithCategory(filter_by_category) {\n      return this.all_keywords.filter((kw) => {\n        const category = kw.includes(\"/\") ? kw.split(\"/\").at(0) : false;\n        const name = kw.includes(\"/\") ? kw.split(\"/\").at(1) : kw;\n\n        if (this.keywords.includes(kw)) return false;\n\n        if (filter_by_category && filter_by_category !== category) return false;\n\n        if (!filter_by_category && this.user_suggestion.length === 0)\n          return false;\n\n        return this.twoStringsMatch(name, this.user_suggestion);\n      });\n    },\n    toggleCategory(category) {\n      if (this.suggestion_from_category === category)\n        this.suggestion_from_category = false;\n      else this.suggestion_from_category = category;\n    },\n    getCatColor(category) {\n      const c = window.app_infos.custom_suggested_categories.find(\n        (c) => c.title === category\n      );\n      if (!c?.tag_color) return;\n      return `--cat-color: ${c.tag_color}`;\n    },\n    newKeyword() {\n      if (this.user_suggestion.length > 0)\n        this.addKeyword(this.user_suggestion);\n    },\n    submitFirstSuggestion() {\n      if (this.suggested_keywords.length === 0) return false;\n      const first_suggestion = this.suggested_keywords.at(0);\n      this.addKeyword(first_suggestion);\n    },\n    keywordKey(keyword) {\n      return keyword.category + \"/\" + keyword.name;\n    },\n    addKeyword(new_keyword) {\n      let kw = this.keywords.slice();\n      kw.push(new_keyword);\n      kw.sort((a, b) => {\n        return b;\n      });\n      this.$emit(\"update:keywords\", kw);\n      this.user_suggestion = \"\";\n\n      this.$refs.keywordField.focus();\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._keywordsFieldEditor {\n  margin-top: calc(var(--spacing) / 4);\n}\n._suggestions {\n  margin-top: calc(var(--spacing) / 2);\n  padding-top: calc(var(--spacing) / 2);\n  // border-top: 2px solid var(--c-noir);\n\n  ._keyword {\n    cursor: pointer;\n  }\n}\n\n._catSug {\n  // border-left: 2px solid black;\n  padding: calc(var(--spacing) / 2) 0;\n  // background: var(--c-noir);\n}\n\n._categories {\n  display: flex;\n  flex-flow: row wrap;\n  padding: 0;\n  gap: calc(var(--spacing) / 4);\n}\n\n._category {\n  padding: calc(var(--spacing) / 4) calc(var(--spacing) / 2);\n  border-radius: 4px;\n  font-weight: 600;\n  background: var(--cat-color);\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KeywordsFieldEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KeywordsFieldEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KeywordsFieldEditor.vue?vue&type=template&id=bf8392da&scoped=true&\"\nimport script from \"./KeywordsFieldEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./KeywordsFieldEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./KeywordsFieldEditor.vue?vue&type=style&index=0&id=bf8392da&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf8392da\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"_keywordsField\">\n    <DLabel v-if=\"label\" class=\"_label\" :str=\"label\" />\n    <div class=\"u-keywords\" v-if=\"keywords.length > 0\">\n      <SingleKeyword\n        v-for=\"keyword in keywords\"\n        :key=\"keyword\"\n        :keyword=\"keyword\"\n      />\n    </div>\n    <EditBtn v-if=\"can_edit\" @click=\"enableEditMode\" />\n\n    <BaseModal2 :title=\"label\" v-if=\"edit_mode\" @close=\"edit_mode = false\">\n      <div class=\"u-keywords\" v-if=\"new_keywords.length > 0\">\n        <SingleKeyword\n          v-for=\"keyword in new_keywords\"\n          :key=\"keyword\"\n          :keyword=\"keyword\"\n          :can_remove=\"true\"\n          @remove=\"removeKeyword(keyword)\"\n        />\n      </div>\n\n      <hr />\n\n      <KeywordsFieldEditor\n        :keywords=\"new_keywords\"\n        @update:keywords=\"new_keywords = $event\"\n      />\n\n      <hr />\n\n      <div class=\"\">\n        <DLabel :str=\"$t('advanced_options')\" />\n        <div class=\"u-sameRow\">\n          <input\n            type=\"text\"\n            v-model=\"new_keywords_stringified\"\n            ref=\"urlToCopy\"\n            size=\"small\"\n          />\n          <button\n            type=\"button\"\n            class=\"u-button u-button_icon u-suffix _clipboardBtn\"\n            @click=\"copyToClipboard\"\n          >\n            <b-icon icon=\"clipboard\" v-if=\"!is_copied\" />\n            <b-icon icon=\"clipboard-check\" v-else />\n          </button>\n        </div>\n      </div>\n\n      <div slot=\"footer\">\n        <SaveCancelButtons\n          class=\"_scb\"\n          @save=\"updateKeywords\"\n          @cancel=\"cancel\"\n        />\n      </div>\n    </BaseModal2>\n  </div>\n</template>\n<script>\nimport KeywordsFieldEditor from \"@/components/KeywordsFieldEditor.vue\";\nimport SingleKeyword from \"@/components/SingleKeyword.vue\";\n\nexport default {\n  props: {\n    field_name: String,\n    label: String,\n    path: String,\n    keywords: {\n      type: Array,\n      default: () => [],\n    },\n    can_edit: Boolean,\n  },\n  components: {\n    KeywordsFieldEditor,\n    SingleKeyword,\n  },\n  data() {\n    return {\n      new_keywords: this.keywords || [],\n      new_keywords_stringified: \"\",\n      edit_mode: this.can_edit && !this.path && !this.field_name,\n      is_saving: false,\n      is_copied: false,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {\n    new_keywords: {\n      immediate: true,\n      handler(new_val) {\n        this.$emit(\"update:keywords\", new_val);\n        this.new_keywords_stringified = new_val.join(\", \");\n      },\n      deep: true,\n    },\n    new_keywords_stringified: {\n      immediate: true,\n      handler(new_val) {\n        if (new_val) {\n          this.new_keywords = new_val.split(\", \").map((kw) => kw.trim());\n        } else {\n          this.new_keywords = [];\n        }\n      },\n    },\n  },\n  computed: {},\n  methods: {\n    enableEditMode() {\n      this.edit_mode = true;\n    },\n    async updateKeywords() {\n      this.is_saving = true;\n      await new Promise((r) => setTimeout(r, 50));\n\n      try {\n        const new_meta = {\n          [this.field_name]: this.new_keywords,\n        };\n\n        await this.$api.updateMeta({\n          path: this.path,\n          new_meta,\n        });\n        this.edit_mode = false;\n        this.is_saving = false;\n      } catch (err) {\n        this.is_saving = false;\n      }\n    },\n    copyToClipboard() {\n      this.is_copied = false;\n\n      // Get the text field\n      var copyText = this.$refs.urlToCopy;\n\n      // Select the text field\n      copyText.select();\n      copyText.setSelectionRange(0, 99999); // For mobile devices\n\n      // Copy the text inside the text field\n      navigator.clipboard.writeText(copyText.value);\n\n      this.is_copied = true;\n    },\n\n    cancel() {\n      this.new_keywords = this.keywords || [];\n      this.edit_mode = false;\n    },\n\n    removeKeyword(_kw) {\n      this.new_keywords = this.new_keywords.filter((kw) => kw !== _kw);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KeywordsField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KeywordsField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KeywordsField.vue?vue&type=template&id=6cb6a657&scoped=true&\"\nimport script from \"./KeywordsField.vue?vue&type=script&lang=js&\"\nexport * from \"./KeywordsField.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cb6a657\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_singleKeyword\",class:{\n    'is--clickable': _vm.can_add,\n  },style:(_vm.kw_styles)},[_c('div',{},[(_vm.category)?_c('div',{staticClass:\"_category\"},[_vm._v(\" \"+_vm._s(_vm.category.toUpperCase())+\" \")]):_vm._e(),_c('div',{staticClass:\"_name\"},[_vm._v(\" \"+_vm._s(_vm.name)+\" \")])]),(_vm.count)?_c('div',{staticClass:\"_count\"},[_vm._v(\" \"+_vm._s(_vm.count)+\" \")]):_vm._e(),(_vm.can_remove)?_c('b-icon',{staticClass:\"_white\",attrs:{\"icon\":\"dash-circle\"},on:{\"click\":function($event){return _vm.$emit('remove')}}}):_vm._e(),(_vm.can_add)?_c('button',{staticClass:\"_addBtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('add')}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"_singleKeyword\"\n    :class=\"{\n      'is--clickable': can_add,\n    }\"\n    :style=\"kw_styles\"\n  >\n    <div class=\"\">\n      <div class=\"_category\" v-if=\"category\">\n        {{ category.toUpperCase() }}\n      </div>\n      <div class=\"_name\">\n        {{ name }}\n      </div>\n    </div>\n    <div v-if=\"count\" class=\"_count\">\n      {{ count }}\n    </div>\n    <b-icon\n      v-if=\"can_remove\"\n      class=\"_white\"\n      icon=\"dash-circle\"\n      @click=\"$emit('remove')\"\n    />\n    <button\n      type=\"button\"\n      v-if=\"can_add\"\n      class=\"_addBtn\"\n      @click=\"$emit('add')\"\n    />\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    keyword: String,\n    count: Number,\n    cat_color: String,\n    can_remove: Boolean,\n    can_add: Boolean,\n  },\n  components: {},\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    category() {\n      return this.keyword.includes(\"/\") ? this.keyword.split(\"/\").at(0) : false;\n    },\n    name() {\n      return this.keyword.includes(\"/\")\n        ? this.keyword.split(\"/\").at(1)\n        : this.keyword;\n    },\n    kw_styles() {\n      let category_color = false;\n\n      if (this.cat_color) category_color = this.cat_color;\n      else {\n        const category = window.app_infos.custom_suggested_categories.find(\n          (c) => c.title === this.category\n        );\n        category_color = category?.tag_color;\n      }\n      return category_color ? `--cat-color: ${category_color}` : \"\";\n    },\n  },\n  methods: {},\n};\n</script>\n<style lang=\"scss\" scoped>\n._singleKeyword {\n  position: relative;\n  // background-color: rgba(255, 255, 255, 0.2);\n  padding: calc(var(--spacing) / 4) calc(var(--spacing) / 2);\n  border-radius: 4px;\n  // color: white;\n  line-height: 1.2;\n\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  gap: calc(var(--spacing) / 1);\n\n  background-color: var(--cat-color, white);\n  color: #000;\n\n  transition: all 0.1s cubic-bezier(0.19, 1, 0.22, 1);\n\n  &.is--clickable:hover {\n    opacity: 0.7;\n    // background-color: rgba(41, 41, 41, 1);\n  }\n}\n\n._category {\n  font-size: 80%;\n  // color: var(--cat-color);\n}\n._name {\n  font-size: 110%;\n}\n\n._addBtn {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  background: transparent;\n}\n\n._count {\n  border: 1px solid currentColor;\n  border-radius: 10px;\n  min-width: 14px;\n  height: 14px;\n  font-size: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 600;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SingleKeyword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SingleKeyword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SingleKeyword.vue?vue&type=template&id=f2ad472e&scoped=true&\"\nimport script from \"./SingleKeyword.vue?vue&type=script&lang=js&\"\nexport * from \"./SingleKeyword.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SingleKeyword.vue?vue&type=style&index=0&id=f2ad472e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2ad472e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_agoraExport\",attrs:{\"data-autoscroll\":_vm.is_autoscroll === true}},[_c('div',{ref:\"agoraView\",staticClass:\"_agoraExport--items\",on:{\"scroll\":_vm.onScroll}},[_c('div',{staticClass:\"_item\"},[_c('div',{staticClass:\"_item--content _firstEmptySlide\"},[_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(\n              _vm.currently_shown_module_index === -1 && _vm.is_autoscroll === false\n            )?_c('button',{staticClass:\"u-button u-button_icon\",on:{\"click\":function($event){_vm.slide_to_show = 0}}},[_c('b-icon',{attrs:{\"icon\":\"arrow-down\"}})],1):_vm._e()])],1)]),_vm._l((_vm.section_modules_list),function(agoramodule,index){return _c('div',{key:agoramodule.$path,staticClass:\"_item\",attrs:{\"data-modulepath\":agoramodule.$path,\"data-iscurrent\":index === _vm.currently_shown_module_index,\"data-stickied\":index < _vm.currently_shown_module_index}},[_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(\n            index >\n            _vm.currently_shown_module_index -\n              _vm.number_of_modules_to_keep_visible_at_once\n          )?_c('div',{staticClass:\"_item--content\",style:(_vm.slideRandomLayout(\n              index,\n              _vm.getFirstSourceMedia(agoramodule.source_medias)\n            ))},[(_vm.getFirstSourceMedia(agoramodule.source_medias))?[_c('MediaContent',{attrs:{\"file\":_vm.getFirstSourceMedia(agoramodule.source_medias),\"resolution\":1600,\"context\":'full',\"show_fs_button\":false}})]:[_c('div',[_vm._v(\"Erreur au chargement du média\")])]],2):_vm._e()])],1)})],2),_c('transition',{attrs:{\"name\":\"showkeywords\",\"mode\":\"out-in\"}},[(_vm.currently_shown_module && _vm.currently_shown_module.keywords)?_c('div',{key:_vm.currently_shown_module.$path,staticClass:\"_agoraExport--bottom\"},[_c('div',{staticClass:\"_keywords\"},[_c('KeywordsField',{attrs:{\"field_name\":'keywords',\"keywords\":_vm.currently_shown_module.keywords,\"can_edit\":false}})],1)]):_vm._e()]),_c('div',{staticClass:\"_scrollIndicator\",style:({\n      '--scroll-progress': _vm.scroll_y / _vm.scroll_height,\n    })})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function scrollToY(\n  container,\n  scrollTargetY = 0,\n  speed = 2000,\n  easing = \"easeOutSine\"\n) {\n  // scrollTargetY: the target scrollY property of the window\n  // speed: time in pixels per second\n  // easing: easing equation to use\n\n  var scrollY = container.scrollTop || document.documentElement.scrollTop,\n    currentTime = 0;\n\n  // min time .1, max time .8 seconds\n  var time = Math.max(\n    0.1,\n    Math.min(Math.abs(scrollY - scrollTargetY) / speed, 1.6)\n  );\n\n  // easing equations from https://github.com/danro/easing-js/blob/master/easing.js\n  var easingEquations = {\n    easeOutSine: function (pos) {\n      return Math.sin(pos * (Math.PI / 2));\n    },\n    easeInOutSine: function (pos) {\n      return -0.5 * (Math.cos(Math.PI * pos) - 1);\n    },\n    easeInOutQuint: function (pos) {\n      if ((pos /= 0.5) < 1) {\n        return 0.5 * Math.pow(pos, 5);\n      }\n      return 0.5 * (Math.pow(pos - 2, 5) + 2);\n    },\n  };\n\n  // add animation loop\n  function tick() {\n    currentTime += 1 / 60;\n\n    var p = currentTime / time;\n    var t = easingEquations[easing](p);\n\n    if (p < 1) {\n      window.requestAnimationFrame(tick);\n      container.scrollTop = scrollY + (scrollTargetY - scrollY) * t;\n      // console.log(\"scroll\", scrollY + (scrollTargetY - scrollY) * t);\n    } else {\n      container.scrollTop = scrollTargetY;\n    }\n  }\n\n  // call it once to get started\n  tick();\n}\n","<template>\n  <div class=\"_agoraExport\" :data-autoscroll=\"is_autoscroll === true\">\n    <div class=\"_agoraExport--items\" ref=\"agoraView\" @scroll=\"onScroll\">\n      <div class=\"_item\">\n        <div class=\"_item--content _firstEmptySlide\">\n          <transition name=\"fade\" mode=\"out-in\">\n            <button\n              v-if=\"\n                currently_shown_module_index === -1 && is_autoscroll === false\n              \"\n              class=\"u-button u-button_icon\"\n              @click=\"slide_to_show = 0\"\n            >\n              <b-icon icon=\"arrow-down\" />\n            </button>\n          </transition>\n        </div>\n      </div>\n      <div\n        v-for=\"(agoramodule, index) in section_modules_list\"\n        :key=\"agoramodule.$path\"\n        :data-modulepath=\"agoramodule.$path\"\n        :data-iscurrent=\"index === currently_shown_module_index\"\n        :data-stickied=\"index < currently_shown_module_index\"\n        class=\"_item\"\n      >\n        <transition name=\"fade\" mode=\"out-in\">\n          <div\n            class=\"_item--content\"\n            v-if=\"\n              index >\n              currently_shown_module_index -\n                number_of_modules_to_keep_visible_at_once\n            \"\n            :style=\"\n              slideRandomLayout(\n                index,\n                getFirstSourceMedia(agoramodule.source_medias)\n              )\n            \"\n          >\n            <template v-if=\"getFirstSourceMedia(agoramodule.source_medias)\">\n              <MediaContent\n                :file=\"getFirstSourceMedia(agoramodule.source_medias)\"\n                :resolution=\"1600\"\n                :context=\"'full'\"\n                :show_fs_button=\"false\"\n              />\n            </template>\n            <template v-else>\n              <div>Erreur au chargement du média</div>\n            </template>\n          </div>\n        </transition>\n      </div>\n    </div>\n    <transition name=\"showkeywords\" mode=\"out-in\">\n      <div\n        class=\"_agoraExport--bottom\"\n        v-if=\"currently_shown_module && currently_shown_module.keywords\"\n        :key=\"currently_shown_module.$path\"\n      >\n        <!-- <div class=\"_progressBar\" v-if=\"false\">\n          <button\n            type=\"button\"\n            v-for=\"(agoramodule, index) in section_modules_list\"\n            :data-alreadyshown=\"index <= currently_shown_module_index\"\n            :key=\"agoramodule.$path\"\n            @click=\"updateCurrentSlide(index)\"\n          />\n        </div> -->\n\n        <div class=\"_keywords\">\n          <KeywordsField\n            :field_name=\"'keywords'\"\n            :keywords=\"currently_shown_module.keywords\"\n            :can_edit=\"false\"\n          />\n        </div>\n      </div>\n    </transition>\n\n    <div\n      class=\"_scrollIndicator\"\n      :style=\"{\n        '--scroll-progress': scroll_y / scroll_height,\n      }\"\n    />\n  </div>\n</template>\n<script>\nimport KeywordsField from \"@/components/KeywordsField.vue\";\nimport { scrollToY } from \"@/utils/scrollToY.js\";\n\nexport default {\n  props: {\n    publication: Object,\n  },\n  components: {\n    KeywordsField,\n  },\n  data() {\n    return {\n      scroll_y: 0,\n      scroll_height: undefined,\n\n      window_width: undefined,\n      window_height: undefined,\n      number_of_modules_to_keep_visible_at_once: 8,\n\n      restart_autoscroll_on_end: true,\n\n      number_of_different_layouts: 10,\n      left_right_margin: 40,\n      top_margin: 40,\n      bottom_margin: 140,\n\n      slide_to_show: -1,\n      random_layouts_options: [],\n\n      all_layouts: [\n        {\n          w: 70,\n        },\n        {\n          w: 64,\n        },\n        {\n          w: 60,\n        },\n        {\n          w: 80,\n        },\n        {\n          w: 100,\n        },\n      ],\n    };\n  },\n  created() {\n    this.all_layouts = this.all_layouts.map((layout) => ({\n      ...layout,\n      rnd: Math.random(),\n    }));\n    this.random_layouts_options = this.fillWithRandoms({\n      items: 100,\n      number_of_different_layouts: this.all_layouts.length,\n    });\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.onResize();\n    });\n    window.addEventListener(\"resize\", this.onResize);\n\n    if (this.is_autoscroll === true) {\n      setTimeout(() => {\n        this.startAutomaticScroll();\n      }, 1000);\n    }\n\n    // scroll to top on reload to prevent scroll reload\n    if (history.scrollRestoration) {\n      history.scrollRestoration = \"manual\";\n    } else {\n      window.onbeforeunload = function () {\n        window.scrollTo(0, 0);\n      };\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"resize\", this.onResize);\n  },\n  watch: {\n    slide_to_show() {\n      scrollToY(\n        this.$refs.agoraView,\n        (this.slide_to_show + 1) * window.innerHeight,\n        400\n      );\n    },\n  },\n  computed: {\n    first_section() {\n      const sections = this.getSectionsWithProps({\n        publication: this.publication,\n        group: \"sections_list\",\n      });\n      return sections[0];\n    },\n    is_autoscroll() {\n      return this.$route.query?.scroll === \"auto\";\n    },\n    section_modules_list() {\n      return this.getModulesForSection({\n        publication: this.publication,\n        section: this.first_section,\n      }).map(({ _module }) => _module);\n    },\n    currently_shown_module_index() {\n      return Math.floor(this.scroll_y / this.window_height - 0.1);\n    },\n    currently_shown_module() {\n      return this.section_modules_list[this.currently_shown_module_index];\n    },\n  },\n  methods: {\n    onResize() {\n      this.window_width = window.innerWidth;\n      this.window_height = window.innerHeight;\n      // account for empty slides at the top\n      this.scroll_height =\n        this.window_height * this.section_modules_list.length;\n      this.onScroll();\n    },\n    fillWithRandoms({ items, number_of_different_layouts }) {\n      let randoms = [];\n\n      while (randoms.length < items) {\n        const first_bag = new Array(number_of_different_layouts)\n          .fill(1)\n          .map((_, index) => index)\n          .map((value) => ({ value, sort: Math.random() }))\n          .sort((a, b) => a.sort - b.sort)\n          .map(({ value }) => value);\n        randoms = randoms.concat(first_bag);\n      }\n\n      return randoms;\n    },\n    slideRandomLayout(index, source_media) {\n      if (!source_media) return;\n\n      const layout_index =\n        this.random_layouts_options[index % this.random_layouts_options.length];\n      const layout = this.all_layouts[layout_index];\n\n      // get width\n      const ratio = source_media.$infos?.ratio || 1;\n\n      const slide_container_width =\n        this.window_width - this.left_right_margin * 2;\n      const slide_container_height =\n        this.window_height - this.bottom_margin - this.top_margin;\n\n      let width = (layout.w / 100) * slide_container_width;\n      let height = width * ratio;\n\n      if (height > slide_container_height) {\n        height = slide_container_height;\n        width = height / ratio;\n      }\n\n      const marginTop =\n        Math.round((slide_container_height - height) * layout.rnd) +\n        this.top_margin;\n      const marginLeft =\n        Math.round((slide_container_width - width) * layout.rnd) +\n        this.left_right_margin;\n\n      return {\n        \"--ratio\": ratio,\n        \"--rnd\": layout.rnd,\n        width: width + \"px\",\n        height: height + \"px\",\n        marginTop: marginTop + \"px\",\n        marginLeft: marginLeft + \"px\",\n      };\n    },\n\n    getFirstSourceMedia(source_medias) {\n      const first_source_media = source_medias[0];\n      if (!first_source_media) return false;\n      return this.getSourceMedia({\n        source_media: {\n          meta_filename: first_source_media.meta_filename,\n        },\n        folder_path: this.publication.$path,\n      });\n    },\n    updateCurrentSlide(slide_index) {\n      const targetPosition = slide_index * window.innerHeight;\n      scrollToY(this.$refs.agoraView, targetPosition, 2000);\n    },\n    onScroll(e) {\n      this.scroll_y = this.$refs.agoraView.scrollTop;\n    },\n    async startAutomaticScroll() {\n      console.log(\"showing slide number\", this.slide_to_show);\n\n      this.slide_to_show += 1;\n      const animation_duration = 1000;\n\n      await new Promise((resolve) => setTimeout(resolve, animation_duration));\n\n      this.stopAllVideos();\n      this.autoPlayVideo(this.slide_to_show);\n\n      const keep_showing_slide_for =\n        this.section_modules_list[this.slide_to_show]?.duration * 1000 || 5000;\n\n      console.log(\"will show slide for\", keep_showing_slide_for, \"ms\");\n\n      await new Promise((resolve) =>\n        setTimeout(resolve, keep_showing_slide_for)\n      );\n\n      if (this.slide_to_show < this.section_modules_list.length) {\n        this.startAutomaticScroll();\n      } else {\n        console.log(\"Last slide\");\n        if (this.restart_autoscroll_on_end) {\n          this.slide_to_show = -1;\n          await new Promise((resolve) =>\n            setTimeout(resolve, animation_duration)\n          );\n          this.startAutomaticScroll();\n        }\n      }\n    },\n    autoPlayVideo(slide_index) {\n      const slide_path = this.section_modules_list[slide_index]?.$path;\n      if (!slide_path) return;\n\n      const module_element = this.$el.querySelector(\n        `[data-modulepath=\"${slide_path}\"]`\n      );\n\n      const video_el = module_element.querySelector(\"video\");\n\n      if (video_el) {\n        video_el.muted = true;\n        const play_btn = module_element.querySelector(\"[data-plyr='play']\");\n        if (play_btn) play_btn.click();\n      }\n    },\n    stopAllVideos() {\n      this.$el.querySelectorAll(\"video\").forEach((video_el) => {\n        video_el.pause();\n        video_el.currentTime = 0;\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._agoraExport {\n  &:not([data-autoscroll=\"true\"]) {\n    scroll-snap-type: y mandatory;\n  }\n  &[data-autoscroll=\"true\"] ._agoraExport--items {\n    overflow-y: hidden;\n\n    ::v-deep [data-plyr=\"play\"] {\n      opacity: 0;\n    }\n  }\n}\n._agoraExport--items {\n  height: 100vh;\n  height: 100dvh;\n  overflow-y: auto;\n}\n._agoraExport--bottom {\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.3);\n  pointer-events: none;\n  // mask-image: linear-gradient(\n  //   to top,\n  //   white 0%,\n  //   white calc(100% - calc(var(--spacing) * 2)),\n  //   transparent 100%\n  // );\n  // background: white;\n  bottom: 0;\n  width: 100%;\n  overflow: hidden;\n\n  display: flex;\n  flex-flow: column nowrap;\n  gap: calc(var(--spacing) / 2);\n\n  ._keywords {\n    padding: calc(var(--spacing) / 2);\n    padding: 1vmin 3vmin 3vmin 3vmin;\n  }\n\n  ::v-deep {\n    .u-keywords {\n      font-size: 2vw;\n      gap: 0.5vw;\n    }\n  }\n}\n\n._item {\n  position: sticky;\n  top: 0;\n  scroll-snap-align: center;\n\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  // backdrop-filter: blur(1px);\n  overflow: hidden;\n\n  transition: all 0.6s ease-in-out;\n\n  &[data-stickied=\"true\"] {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n\n  ::v-deep ._mediaContent {\n    width: 100%;\n    height: 100%;\n\n    .plyr--video,\n    .plyr__poster {\n      width: 100%;\n      height: auto;\n      filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.55));\n    }\n\n    ._mediaContent--image,\n    ._mediaContent--iframe,\n    ._iframeStylePreview {\n      position: absolute;\n      height: 100%;\n      width: 100%;\n      object-fit: contain;\n      background-size: contain;\n      filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.55));\n    }\n  }\n}\n._item--content {\n  width: 100%;\n  height: 100%;\n  pointer-events: auto;\n  overflow: visible;\n\n  &._firstEmptySlide {\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n\n    padding: calc(var(--spacing) / 1);\n  }\n}\n\n.showkeywords {\n  &-enter-active,\n  &-leave-active {\n    // transform: translateY(0);\n    transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);\n  }\n  &-enter,\n  &-leave-to {\n    // transform: translateY(100%);\n    opacity: 0;\n    transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);\n  }\n}\n\n._progressBar {\n  width: 100%;\n  height: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n\n  > button {\n    width: 20px;\n    height: 20px;\n    padding: 5px;\n    background: transparent;\n    display: block;\n\n    // disable for now because of scrolling back up because of stickies (!)\n    pointer-events: none;\n\n    &::before {\n      content: \"\";\n      display: block;\n      width: 5px;\n      height: 5px;\n      border-radius: 50%;\n      background: transparent;\n\n      transition: all 0.3s ease-in-out;\n    }\n\n    &[data-alreadyshown=\"true\"]::before {\n      background: black;\n    }\n  }\n}\n\n._scrollIndicator {\n  position: absolute;\n  z-index: 1000;\n  top: 0;\n  right: 0;\n  width: max(1vw, 10px);\n  height: 100%;\n  pointer-events: none;\n\n  background-color: white;\n\n  padding: 3px;\n\n  &::before {\n    content: \"\";\n    display: block;\n    width: 100%;\n    height: calc(var(--scroll-progress) * 100%);\n    background: var(--h-500);\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AgoraExport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AgoraExport.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AgoraExport.vue?vue&type=template&id=3319475c&scoped=true&\"\nimport script from \"./AgoraExport.vue?vue&type=script&lang=js&\"\nexport * from \"./AgoraExport.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AgoraExport.vue?vue&type=style&index=0&id=3319475c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3319475c\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._keywordsFieldEditor[data-v-bf8392da]{margin-top:calc(var(--spacing)/4)}._suggestions[data-v-bf8392da]{margin-top:calc(var(--spacing)/2);padding-top:calc(var(--spacing)/2)}._suggestions ._keyword[data-v-bf8392da]{cursor:pointer}._catSug[data-v-bf8392da]{padding:calc(var(--spacing)/2) 0}._categories[data-v-bf8392da]{display:flex;flex-flow:row wrap;padding:0;gap:calc(var(--spacing)/4)}._category[data-v-bf8392da]{padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;font-weight:600;background:var(--cat-color)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._singleKeyword[data-v-f2ad472e]{position:relative;padding:calc(var(--spacing)/4) calc(var(--spacing)/2);border-radius:4px;line-height:1.2;display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/1);background-color:var(--cat-color,#fff);color:#000;transition:all .1s cubic-bezier(.19,1,.22,1)}._singleKeyword.is--clickable[data-v-f2ad472e]:hover{opacity:.7}._category[data-v-f2ad472e]{font-size:80%}._name[data-v-f2ad472e]{font-size:110%}._addBtn[data-v-f2ad472e]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;background:transparent}._count[data-v-f2ad472e]{border:1px solid currentColor;border-radius:10px;min-width:14px;height:14px;font-size:8px;display:flex;justify-content:center;align-items:center;font-weight:600}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._agoraExport[data-v-3319475c]:not([data-autoscroll=true]){scroll-snap-type:y mandatory}._agoraExport[data-autoscroll=true] ._agoraExport--items[data-v-3319475c]{overflow-y:hidden}._agoraExport[data-autoscroll=true] ._agoraExport--items[data-v-3319475c]  [data-plyr=play]{opacity:0}._agoraExport--items[data-v-3319475c]{height:100vh;height:100dvh;overflow-y:auto}._agoraExport--bottom[data-v-3319475c]{position:absolute;background-color:hsla(0,0%,100%,.3);pointer-events:none;bottom:0;width:100%;overflow:hidden;display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/2)}._agoraExport--bottom ._keywords[data-v-3319475c]{padding:calc(var(--spacing)/2);padding:1vmin 3vmin 3vmin 3vmin}._agoraExport--bottom[data-v-3319475c]  .u-keywords{font-size:2vw;gap:.5vw}._item[data-v-3319475c]{position:sticky;top:0;scroll-snap-align:center;width:100%;height:100%;pointer-events:none;overflow:hidden;transition:all .6s ease-in-out}._item[data-stickied=true][data-v-3319475c]{background-color:hsla(0,0%,100%,.2)}._item[data-v-3319475c]  ._mediaContent{width:100%;height:100%}._item[data-v-3319475c]  ._mediaContent .plyr--video,._item[data-v-3319475c]  ._mediaContent .plyr__poster{width:100%;height:auto;filter:drop-shadow(0 0 10px rgba(0,0,0,.55))}._item[data-v-3319475c]  ._mediaContent ._iframeStylePreview,._item[data-v-3319475c]  ._mediaContent ._mediaContent--iframe,._item[data-v-3319475c]  ._mediaContent ._mediaContent--image{position:absolute;height:100%;width:100%;-o-object-fit:contain;object-fit:contain;background-size:contain;filter:drop-shadow(0 0 10px rgba(0,0,0,.55))}._item--content[data-v-3319475c]{width:100%;height:100%;pointer-events:auto;overflow:visible}._item--content._firstEmptySlide[data-v-3319475c]{display:flex;align-items:flex-end;justify-content:center;padding:calc(var(--spacing)/1)}.showkeywords-enter[data-v-3319475c],.showkeywords-enter-active[data-v-3319475c],.showkeywords-leave-active[data-v-3319475c],.showkeywords-leave-to[data-v-3319475c]{transition:all 1s cubic-bezier(.19,1,.22,1)}.showkeywords-enter[data-v-3319475c],.showkeywords-leave-to[data-v-3319475c]{opacity:0}._progressBar[data-v-3319475c]{width:100%;height:15px;display:flex;align-items:center;justify-content:space-around}._progressBar>button[data-v-3319475c]{width:20px;height:20px;padding:5px;background:transparent;display:block;pointer-events:none}._progressBar>button[data-v-3319475c]:before{content:\\\"\\\";display:block;width:5px;height:5px;border-radius:50%;background:transparent;transition:all .3s ease-in-out}._progressBar>button[data-alreadyshown=true][data-v-3319475c]:before{background:#000}._scrollIndicator[data-v-3319475c]{position:absolute;z-index:1000;top:0;right:0;width:max(1vw,10px);height:100%;pointer-events:none;background-color:#fff;padding:3px}._scrollIndicator[data-v-3319475c]:before{content:\\\"\\\";display:block;width:100%;height:calc(var(--scroll-progress)*100%);background:var(--h-500)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KeywordsFieldEditor.vue?vue&type=style&index=0&id=bf8392da&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9a1ab002\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SingleKeyword.vue?vue&type=style&index=0&id=f2ad472e&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"354422cf\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AgoraExport.vue?vue&type=style&index=0&id=3319475c&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5c9b9ae6\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","label","_e","keywords","length","_l","keyword","key","on","enableEditMode","$event","edit_mode","new_keywords","removeKeyword","$t","directives","name","rawName","value","expression","ref","domProps","target","composing","new_keywords_stringified","copyToClipboard","is_copied","slot","updateKeywords","cancel","staticRenderFns","type","indexOf","_k","keyCode","preventDefault","$emit","ctrlKey","shiftKey","altKey","metaKey","newKeyword","apply","arguments","submitFirstSuggestion","user_suggestion","suggested_keywords","_v","_s","suggestion_from_category","style","getCatColor","toggleCategory","matchingKeywordsWithCategory","category","suggested_keyword","index","class","addKeyword","props","Array","components","SingleKeyword","data","categories","path","i18n","messages","fr","validate_with_shift_enter","create_new_keyword_enter","en","$api","getFolders","join","room","beforeDestroy","leave","watch","computed","all_categories","map","c","title","all_keywords","reduce","acc","list_of_suggestions","item","push","categories_with_keywords","filter","methods","filter_by_category","kw","includes","split","at","twoStringsMatch","window","app_infos","custom_suggested_categories","find","tag_color","first_suggestion","keywordKey","new_keyword","slice","sort","a","b","$refs","keywordField","focus","component","field_name","String","default","can_edit","Boolean","KeywordsFieldEditor","is_saving","created","mounted","immediate","handler","new_val","deep","trim","Promise","r","setTimeout","new_meta","updateMeta","err","copyText","urlToCopy","select","setSelectionRange","navigator","clipboard","writeText","_kw","can_add","toUpperCase","count","Number","cat_color","can_remove","kw_styles","category_color","is_autoscroll","onScroll","currently_shown_module_index","slide_to_show","agoramodule","$path","number_of_modules_to_keep_visible_at_once","slideRandomLayout","getFirstSourceMedia","source_medias","currently_shown_module","scroll_y","scroll_height","scrollToY","container","scrollTargetY","speed","easing","scrollY","scrollTop","document","documentElement","currentTime","time","Math","max","min","abs","easingEquations","easeOutSine","pos","sin","PI","easeInOutSine","cos","easeInOutQuint","pow","tick","p","t","requestAnimationFrame","publication","Object","KeywordsField","undefined","window_width","window_height","restart_autoscroll_on_end","number_of_different_layouts","left_right_margin","top_margin","bottom_margin","random_layouts_options","all_layouts","w","layout","rnd","random","fillWithRandoms","items","$nextTick","onResize","addEventListener","startAutomaticScroll","history","scrollRestoration","onbeforeunload","scrollTo","removeEventListener","agoraView","innerHeight","first_section","sections","getSectionsWithProps","group","$route","query","scroll","section_modules_list","getModulesForSection","section","_module","floor","innerWidth","randoms","first_bag","fill","_","concat","source_media","layout_index","ratio","$infos","slide_container_width","slide_container_height","width","height","marginTop","round","marginLeft","first_source_media","getSourceMedia","meta_filename","folder_path","updateCurrentSlide","slide_index","targetPosition","e","console","log","animation_duration","resolve","stopAllVideos","autoPlayVideo","keep_showing_slide_for","duration","slide_path","module_element","$el","querySelector","video_el","muted","play_btn","click","querySelectorAll","forEach","pause","___CSS_LOADER_EXPORT___","module","id","content","__esModule","locals","exports","add"],"sourceRoot":""}