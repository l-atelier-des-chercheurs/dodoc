(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[724],{60335:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_publicationView",class:{"is--serversidepreview":t.is_serversidepreview}},[i("style",{tag:"component"},[t._v(" "+t._s(t.set_print_margins)+" ")]),i("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.$root.is_loading?i("div",{key:"loader",staticClass:"u-divCentered"},[i("LoaderSpinner")],1):i("div",{key:"publication",ref:"fsContainer"},["story_with_sections"===t.publication.template?i("div",[i("SectionWithPrint",{attrs:{publication:t.publication}})],1):t._e()])])],1)},a=[],n=i(8375),r={props:{},components:{SectionWithPrint:()=>i.e(156).then(i.bind(i,32156))},data(){return{project:null,publication:null,is_fullscreen:!1,is_serversidepreview:!1}},created(){console.log("Loading PublicationView")},async mounted(){"true"===this.$route.query?.make_preview&&(this.is_serversidepreview=!0),this.publication=await this.$api.getPublicFolder({path:this.publication_path}).catch((t=>{this.fetch_publication_error=t.response,this.$root.is_loading=!1})),this.$root.is_loading=!1},beforeDestroy(){},watch:{is_fullscreen(){}},computed:{project_path(){return this.createPath({space_slug:this.$route.params.space_slug,project_slug:this.$route.params.project_slug})},publication_path(){return`${this.project_path}/publications/${this.$route.params.publication_slug}`},set_print_margins(){let t=15;return this.publication&&"page_by_page"===this.publication.template&&(t=0),`\n      @page {\n        margin: ${t}mm;\n      }\n      `}},methods:{async openFs(){await n.Z.request(this.$refs.fsContainer),this.is_fullscreen=!0,n.Z.onchange((()=>{n.Z.isFullscreen||(this.is_fullscreen=!1)}))},async closeFs(){await n.Z.exit(),this.is_fullscreen=!1},async toggleFs(){this.is_fullscreen?this.closeFs():this.openFs()}}},o=r,l=(i(22532),i(30305),i(1001)),p=(0,l.Z)(o,s,a,!1,null,"68cf1e64",null),c=p.exports},86985:function(t,e,i){"use strict";i.r(e);var s=i(8081),a=i.n(s),n=i(23645),r=i.n(n),o=r()(a());o.push([t.id,"._publicationView[data-v-68cf1e64]{background:#fff}",""]),e["default"]=o},24136:function(t,e,i){"use strict";i.r(e);var s=i(8081),a=i.n(s),n=i(23645),r=i.n(n),o=r()(a());o.push([t.id,".alertify-logs{display:none!important}@media print{body,html{background:#fff!important}}._storyTemplate{padding:calc(var(--spacing)/1)}._pubTopbar ._topbar{margin:var(--spacing) auto}._pubTopbar{margin:0 auto;max-width:86ch}@media print{._pubTopbar,._sectionsSummary{display:none}._storyContent{box-shadow:none!important}}",""]),e["default"]=o},22532:function(t,e,i){var s=i(86985);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var a=i(31982).Z;a("69f021f7",s,!0,{sourceMap:!1,shadowMode:!1})},30305:function(t,e,i){var s=i(24136);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var a=i(31982).Z;a("0a781bbe",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=PublicationView.js.map