(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[724],{69335:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_publicationView",class:{"is--serversidepreview":t.is_serversidepreview}},[i("style",{tag:"component"},[t._v(" "+t._s(t.set_print_margins)+" ")]),i("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.$root.is_loading?i("div",{key:"loader",staticClass:"u-divCentered"},[i("LoaderSpinner")],1):i("div",{key:"publication",ref:"fsContainer"},["page_by_page"===t.publication.template?[i("PageSlides",{attrs:{publication:t.publication,is_serversidepreview:t.is_serversidepreview},on:{toggleFs:t.toggleFs}})]:"story"===t.publication.template?i("div",[i("StoryTemplate",{staticClass:"_storyTemplate",attrs:{publication:t.publication,can_edit:!1}})],1):"story_with_sections"===t.publication.template?i("div",[i("SectionWithPrint",{attrs:{publication:t.publication}})],1):"cartography"===t.publication.template?i("div",[i("MapForPrint",{attrs:{publication:t.publication}})],1):t._e()],2)])],1)},s=[],n=i(8375),r={props:{},components:{PageSlides:()=>i.e(684).then(i.bind(i,43684)),StoryTemplate:()=>i.e(833).then(i.bind(i,61833)),SectionWithPrint:()=>i.e(156).then(i.bind(i,32156)),MapForPrint:()=>i.e(929).then(i.bind(i,7666))},data(){return{project:null,publication:null,is_fullscreen:!1,is_serversidepreview:!1}},created(){console.log("Loading PublicationView")},async mounted(){"true"===this.$route.query?.make_preview&&(this.is_serversidepreview=!0),this.publication=await this.$api.getPublicFolder({path:this.publication_path}).catch((t=>{this.fetch_publication_error=t.response,this.$root.is_loading=!1})),this.$root.is_loading=!1},beforeDestroy(){},watch:{is_fullscreen(){}},computed:{project_path(){return this.createPath({space_slug:this.$route.params.space_slug,project_slug:this.$route.params.project_slug})},publication_path(){return`${this.project_path}/publications/${this.$route.params.publication_slug}`},set_print_margins(){let t=15;return this.publication&&"page_by_page"===this.publication.template&&(t=0),`\n      @page {\n        margin: ${t}mm;\n      }\n      `}},methods:{async openFs(){await n.Z.request(this.$refs.fsContainer),this.is_fullscreen=!0,n.Z.onchange((()=>{n.Z.isFullscreen||(this.is_fullscreen=!1)}))},async closeFs(){await n.Z.exit(),this.is_fullscreen=!1},async toggleFs(){this.is_fullscreen?this.closeFs():this.openFs()}}},o=r,p=(i(70782),i(30305),i(1001)),l=(0,p.Z)(o,a,s,!1,null,"171c6736",null),c=l.exports},56751:function(t,e,i){"use strict";i.r(e);var a=i(8081),s=i.n(a),n=i(23645),r=i.n(n),o=r()(s());o.push([t.id,"._publicationView[data-v-171c6736]{background:#fff}",""]),e["default"]=o},24136:function(t,e,i){"use strict";i.r(e);var a=i(8081),s=i.n(a),n=i(23645),r=i.n(n),o=r()(s());o.push([t.id,".alertify-logs{display:none!important}@media print{body,html{background:#fff!important}}._storyTemplate{padding:calc(var(--spacing)/1)}._pubTopbar ._topbar{margin:var(--spacing) auto}._pubTopbar{margin:0 auto;max-width:86ch}@media print{._pubTopbar,._sectionsSummary{display:none}._storyContent{box-shadow:none!important}}",""]),e["default"]=o},70782:function(t,e,i){var a=i(56751);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=i(31982).Z;s("05acef32",a,!0,{sourceMap:!1,shadowMode:!1})},30305:function(t,e,i){var a=i(24136);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var s=i(31982).Z;s("0a781bbe",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=PublicationView.js.map