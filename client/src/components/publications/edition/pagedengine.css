.media {
  display: inline-block;
  position: relative;

  &._isqrcode {
    display: flex;
    align-items: center;
    gap: 2mm;
    background-color: white;
    padding: 1mm;
      border: 1mm solid var(--c-gris_clair);

    ._qrCode {
      flex: 0 0 auto;
      width: 2cm;
      height: 2cm;
      margin: 0;
      object-fit: cover;
      border-radius: 0.25em;
    }
    
    .mediaInfos {
      flex: 1 1 auto;
      font-size: 10px;
  
    }
    .mediaSourceCredits, .mediaSourceCaption {
      p {
        margin: 0;
      }
    }
  
    ._thumbnail {
      flex: 0 0 2cm;
    }
  }

  &._isFullPage {
    break-before: page;
    break-after: page;
    margin: 0;
    width: var(--pagedjs-width);
    /* complex calculation because otherwise a p is pushed onto the next page */
    height: calc(var(--pagedjs-height) - var(--pagedjs-margin-top) - var(--pagedjs-margin-bottom) - 5mm);
    z-index: 1000;

    > *:not(.mediaCaption) {
      position: absolute;
      top: calc(var(--pagedjs-margin-top) * -1);
      left: calc(var(--pagedjs-margin-left) * -1);
      width: var(--pagedjs-width);
      height: var(--pagedjs-height);
      object-fit: contain;
      background-color: white;

    }
    &._isFullPageCover > * {
      object-fit: cover;
    }

    .mediaCaption {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      left: calc(var(--pagedjs-margin-left)* -1);

      span {
        display: inline;
        box-decoration-break: clone;
        background-color: white;
        padding: .25em;
        border-radius: 0.25em;
      }
    }


  }
}


/* SET CHAPTER START OPTION */

.book {
  .chapter[data-starts-on-page="in_flow"]:not(:first-child) {
    margin-top: 3rem;
  }
  .chapter[data-starts-on-page="page"] {
    break-before: page;
  }
  .chapter[data-starts-on-page="left"] {
    break-before: left;
  }
  .chapter[data-starts-on-page="right"] {
    break-before: right;
  }
}

/* SET COVER OPTIONS */

._cover {
  break-after: page;
}
._coverTitle {
  position: relative;
  z-index: 2;
}
._coverImage {
  position: relative;
  z-index: 1;
}
._cover:not([data-layout-mode="normal"]) ._coverImage img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
._cover[data-layout-mode="full_page"] ._coverImage {
  position: absolute;
  top: calc(var(--pagedjs-margin-top) * -1);
  left: calc(var(--pagedjs-margin-left) * -1);
  width: var(--pagedjs-width);
  height: var(--pagedjs-height);
}

._cover[data-layout-mode="text_top_image_down"] ._coverTitle {
  height: calc(var(--pagedjs-height) / 2);
}
._cover[data-layout-mode="text_top_image_down"] ._coverImage {
  position: absolute;
  top: calc(var(--pagedjs-margin-top) * -1 + calc(var(--pagedjs-height) / 2));
  left: calc(var(--pagedjs-margin-left) * -1);
  width: var(--pagedjs-width);
  height: calc(var(--pagedjs-height) / 2);
}
._cover[data-layout-mode="image_top_text_down"] ._coverTitle {
  position: absolute;
  top: calc(var(--pagedjs-margin-top) * -1 + calc(var(--pagedjs-height) / 2) + 2rem);
  height: calc(var(--pagedjs-height) / 2);
}
._cover[data-layout-mode="image_top_text_down"] ._coverImage {
  position: absolute;
  top: calc(var(--pagedjs-margin-top) * -1);
  left: calc(var(--pagedjs-margin-left) * -1);
  width: var(--pagedjs-width);
  height: calc(var(--pagedjs-height) / 2);
}
