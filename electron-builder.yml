appId: "dodoc"
productName: "do•doc"

electronVersion: "38.1.2"
asar: true
asarUnpack:
  - "content/**"
  - "node_modules/sharp/**"
  - "node_modules/@img/**"
  - "client/dist/**"
icon: build/icon.png

# Exclude problematic directories to prevent pattern length issues
files:
  - "!**/node_modules/**/node_modules/**"
  - "!**/.*"
  - "!**/*.log"
  - "!**/.DS_Store"

win:
  artifactName: dodoc-${version}-windows.${ext}
  icon: build/icon.png
  target:
    - target: nsis
      arch: [x64]

nsis:
  oneClick: true
  uninstallDisplayName: "do•doc ${version}"
  createDesktopShortcut: always
  shortcutName: "do•doc"

appx:
  applicationId: "L'AtelierDesChercheurs.DoDoc"
  displayName: "do•doc"
  publisherDisplayName: "L'Atelier des Chercheurs"
  # Replace these with values from Microsoft Partner Center:
  identityName: "do•doc" # Get from App Identity page in Partner Center
  publisher: "CN=21DC51D1-C93D-4F1C-8596-0ADF25BB5216" # Get from App Identity page in Partner Center
  backgroundColor: "#ffffff"
  languages: ["en-US", "fr-FR", "it-IT"]
  showNameOnTiles: true
  electronUpdaterAware: false

mac:
  artifactName: dodoc-${version}-macos.${ext}
  category: public.app-category.education
  icon: build/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  provisioningProfile: build/dodoc.provisionprofile
  extendInfo:
    NSMicrophoneUsageDescription: Merci d'accorder l'accès au micro pour réaliser des enregistrements.
    NSCameraUsageDescription: Merci d'accorder l'accès à la caméra pour réaliser des enregistrements.
    NSScreenCaptureDescription: Merci d'accorder l'accès à l'affichage pour réaliser des enregistrements.
    com.apple.security.device.audio-input: true
    com.apple.security.device.camera: true

linux:
  artifactName: dodoc-${version}-linux.${ext}
  target: AppImage
  category: Education
  icon: build/icons
  executableName: dodoc
  executableArgs:
    - '--js-flags="--max-old-space-size=4096"'

appImage:
  synopsis: A documentation tool for creativity.
  category: Education
